var Uw=Object.defineProperty;var Gw=(nt,rt,it)=>rt in nt?Uw(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it;var Ww=(nt,rt)=>()=>(rt||nt((rt={exports:{}}).exports,rt),rt.exports);var $c=(nt,rt,it)=>(Gw(nt,typeof rt!="symbol"?rt+"":rt,it),it);var qw=Ww((exports,module)=>{(function(){const rt=document.createElement("link").relList;if(rt&&rt.supports&&rt.supports("modulepreload"))return;for(const bt of document.querySelectorAll('link[rel="modulepreload"]'))st(bt);new MutationObserver(bt=>{for(const wt of bt)if(wt.type==="childList")for(const Et of wt.addedNodes)Et.tagName==="LINK"&&Et.rel==="modulepreload"&&st(Et)}).observe(document,{childList:!0,subtree:!0});function it(bt){const wt={};return bt.integrity&&(wt.integrity=bt.integrity),bt.referrerpolicy&&(wt.referrerPolicy=bt.referrerpolicy),bt.crossorigin==="use-credentials"?wt.credentials="include":bt.crossorigin==="anonymous"?wt.credentials="omit":wt.credentials="same-origin",wt}function st(bt){if(bt.ep)return;bt.ep=!0;const wt=it(bt);fetch(bt.href,wt)}})();const style="";function makeMap(nt,rt){const it=Object.create(null),st=nt.split(",");for(let bt=0;bt<st.length;bt++)it[st[bt]]=!0;return rt?bt=>!!it[bt.toLowerCase()]:bt=>!!it[bt]}function normalizeStyle(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++){const st=nt[it],bt=isString(st)?parseStringStyle(st):normalizeStyle(st);if(bt)for(const wt in bt)rt[wt]=bt[wt]}return rt}else{if(isString(nt))return nt;if(isObject$3(nt))return nt}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(nt){const rt={};return nt.replace(styleCommentRE,"").split(listDelimiterRE).forEach(it=>{if(it){const st=it.split(propertyDelimiterRE);st.length>1&&(rt[st[0].trim()]=st[1].trim())}}),rt}function normalizeClass(nt){let rt="";if(isString(nt))rt=nt;else if(isArray$2(nt))for(let it=0;it<nt.length;it++){const st=normalizeClass(nt[it]);st&&(rt+=st+" ")}else if(isObject$3(nt))for(const it in nt)nt[it]&&(rt+=it+" ");return rt.trim()}function normalizeProps(nt){if(!nt)return null;let{class:rt,style:it}=nt;return rt&&!isString(rt)&&(nt.class=normalizeClass(rt)),it&&(nt.style=normalizeStyle(it)),nt}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(nt){return!!nt||nt===""}const toDisplayString=nt=>isString(nt)?nt:nt==null?"":isArray$2(nt)||isObject$3(nt)&&(nt.toString===objectToString$1||!isFunction$1(nt.toString))?JSON.stringify(nt,replacer,2):String(nt),replacer=(nt,rt)=>rt&&rt.__v_isRef?replacer(nt,rt.value):isMap$2(rt)?{[`Map(${rt.size})`]:[...rt.entries()].reduce((it,[st,bt])=>(it[`${st} =>`]=bt,it),{})}:isSet$2(rt)?{[`Set(${rt.size})`]:[...rt.values()]}:isObject$3(rt)&&!isArray$2(rt)&&!isPlainObject$1(rt)?String(rt):rt,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=nt=>onRE.test(nt),isModelListener=nt=>nt.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(nt,rt)=>{const it=nt.indexOf(rt);it>-1&&nt.splice(it,1)},hasOwnProperty$h=Object.prototype.hasOwnProperty,hasOwn=(nt,rt)=>hasOwnProperty$h.call(nt,rt),isArray$2=Array.isArray,isMap$2=nt=>toTypeString(nt)==="[object Map]",isSet$2=nt=>toTypeString(nt)==="[object Set]",isFunction$1=nt=>typeof nt=="function",isString=nt=>typeof nt=="string",isSymbol$1=nt=>typeof nt=="symbol",isObject$3=nt=>nt!==null&&typeof nt=="object",isPromise=nt=>isObject$3(nt)&&isFunction$1(nt.then)&&isFunction$1(nt.catch),objectToString$1=Object.prototype.toString,toTypeString=nt=>objectToString$1.call(nt),toRawType=nt=>toTypeString(nt).slice(8,-1),isPlainObject$1=nt=>toTypeString(nt)==="[object Object]",isIntegerKey=nt=>isString(nt)&&nt!=="NaN"&&nt[0]!=="-"&&""+parseInt(nt,10)===nt,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=nt=>{const rt=Object.create(null);return it=>rt[it]||(rt[it]=nt(it))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(nt=>nt.replace(camelizeRE,(rt,it)=>it?it.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(nt=>nt.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)),toHandlerKey=cacheStringFunction(nt=>nt?`on${capitalize(nt)}`:""),hasChanged=(nt,rt)=>!Object.is(nt,rt),invokeArrayFns=(nt,rt)=>{for(let it=0;it<nt.length;it++)nt[it](rt)},def=(nt,rt,it)=>{Object.defineProperty(nt,rt,{configurable:!0,enumerable:!1,value:it})},toNumber$1=nt=>{const rt=parseFloat(nt);return isNaN(rt)?nt:rt};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(rt=!1){this.detached=rt,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!rt&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(rt){if(this.active){const it=activeEffectScope;try{return activeEffectScope=this,rt()}finally{activeEffectScope=it}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(rt){if(this.active){let it,st;for(it=0,st=this.effects.length;it<st;it++)this.effects[it].stop();for(it=0,st=this.cleanups.length;it<st;it++)this.cleanups[it]();if(this.scopes)for(it=0,st=this.scopes.length;it<st;it++)this.scopes[it].stop(!0);if(!this.detached&&this.parent&&!rt){const bt=this.parent.scopes.pop();bt&&bt!==this&&(this.parent.scopes[this.index]=bt,bt.index=this.index)}this.parent=void 0,this.active=!1}}}function recordEffectScope(nt,rt=activeEffectScope){rt&&rt.active&&rt.effects.push(nt)}const createDep=nt=>{const rt=new Set(nt);return rt.w=0,rt.n=0,rt},wasTracked=nt=>(nt.w&trackOpBit)>0,newTracked=nt=>(nt.n&trackOpBit)>0,initDepMarkers=({deps:nt})=>{if(nt.length)for(let rt=0;rt<nt.length;rt++)nt[rt].w|=trackOpBit},finalizeDepMarkers=nt=>{const{deps:rt}=nt;if(rt.length){let it=0;for(let st=0;st<rt.length;st++){const bt=rt[st];wasTracked(bt)&&!newTracked(bt)?bt.delete(nt):rt[it++]=bt,bt.w&=~trackOpBit,bt.n&=~trackOpBit}rt.length=it}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(rt,it=null,st){this.fn=rt,this.scheduler=it,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,st)}run(){if(!this.active)return this.fn();let rt=activeEffect,it=shouldTrack;for(;rt;){if(rt===this)return;rt=rt.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=it,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(nt){const{deps:rt}=nt;if(rt.length){for(let it=0;it<rt.length;it++)rt[it].delete(nt);rt.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const nt=trackStack.pop();shouldTrack=nt===void 0?!0:nt}function track(nt,rt,it){if(shouldTrack&&activeEffect){let st=targetMap.get(nt);st||targetMap.set(nt,st=new Map);let bt=st.get(it);bt||st.set(it,bt=createDep()),trackEffects(bt)}}function trackEffects(nt,rt){let it=!1;effectTrackDepth<=maxMarkerBits?newTracked(nt)||(nt.n|=trackOpBit,it=!wasTracked(nt)):it=!nt.has(activeEffect),it&&(nt.add(activeEffect),activeEffect.deps.push(nt))}function trigger(nt,rt,it,st,bt,wt){const Et=targetMap.get(nt);if(!Et)return;let kt=[];if(rt==="clear")kt=[...Et.values()];else if(it==="length"&&isArray$2(nt)){const Lt=toNumber$1(st);Et.forEach((Ot,Rt)=>{(Rt==="length"||Rt>=Lt)&&kt.push(Ot)})}else switch(it!==void 0&&kt.push(Et.get(it)),rt){case"add":isArray$2(nt)?isIntegerKey(it)&&kt.push(Et.get("length")):(kt.push(Et.get(ITERATE_KEY)),isMap$2(nt)&&kt.push(Et.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(nt)||(kt.push(Et.get(ITERATE_KEY)),isMap$2(nt)&&kt.push(Et.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(nt)&&kt.push(Et.get(ITERATE_KEY));break}if(kt.length===1)kt[0]&&triggerEffects(kt[0]);else{const Lt=[];for(const Ot of kt)Ot&&Lt.push(...Ot);triggerEffects(createDep(Lt))}}function triggerEffects(nt,rt){const it=isArray$2(nt)?nt:[...nt];for(const st of it)st.computed&&triggerEffect(st);for(const st of it)st.computed||triggerEffect(st)}function triggerEffect(nt,rt){(nt!==activeEffect||nt.allowRecurse)&&(nt.scheduler?nt.scheduler():nt.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(nt=>nt!=="arguments"&&nt!=="caller").map(nt=>Symbol[nt]).filter(isSymbol$1)),get$4=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const nt={};return["includes","indexOf","lastIndexOf"].forEach(rt=>{nt[rt]=function(...it){const st=toRaw(this);for(let wt=0,Et=this.length;wt<Et;wt++)track(st,"get",wt+"");const bt=st[rt](...it);return bt===-1||bt===!1?st[rt](...it.map(toRaw)):bt}}),["push","pop","shift","unshift","splice"].forEach(rt=>{nt[rt]=function(...it){pauseTracking();const st=toRaw(this)[rt].apply(this,it);return resetTracking(),st}}),nt}function createGetter(nt=!1,rt=!1){return function(st,bt,wt){if(bt==="__v_isReactive")return!nt;if(bt==="__v_isReadonly")return nt;if(bt==="__v_isShallow")return rt;if(bt==="__v_raw"&&wt===(nt?rt?shallowReadonlyMap:readonlyMap:rt?shallowReactiveMap:reactiveMap).get(st))return st;const Et=isArray$2(st);if(!nt&&Et&&hasOwn(arrayInstrumentations,bt))return Reflect.get(arrayInstrumentations,bt,wt);const kt=Reflect.get(st,bt,wt);return(isSymbol$1(bt)?builtInSymbols.has(bt):isNonTrackableKeys(bt))||(nt||track(st,"get",bt),rt)?kt:isRef(kt)?Et&&isIntegerKey(bt)?kt:kt.value:isObject$3(kt)?nt?readonly(kt):reactive(kt):kt}}const set$4=createSetter(),shallowSet=createSetter(!0);function createSetter(nt=!1){return function(it,st,bt,wt){let Et=it[st];if(isReadonly(Et)&&isRef(Et)&&!isRef(bt))return!1;if(!nt&&(!isShallow(bt)&&!isReadonly(bt)&&(Et=toRaw(Et),bt=toRaw(bt)),!isArray$2(it)&&isRef(Et)&&!isRef(bt)))return Et.value=bt,!0;const kt=isArray$2(it)&&isIntegerKey(st)?Number(st)<it.length:hasOwn(it,st),Lt=Reflect.set(it,st,bt,wt);return it===toRaw(wt)&&(kt?hasChanged(bt,Et)&&trigger(it,"set",st,bt):trigger(it,"add",st,bt)),Lt}}function deleteProperty(nt,rt){const it=hasOwn(nt,rt);nt[rt];const st=Reflect.deleteProperty(nt,rt);return st&&it&&trigger(nt,"delete",rt,void 0),st}function has$1(nt,rt){const it=Reflect.has(nt,rt);return(!isSymbol$1(rt)||!builtInSymbols.has(rt))&&track(nt,"has",rt),it}function ownKeys(nt){return track(nt,"iterate",isArray$2(nt)?"length":ITERATE_KEY),Reflect.ownKeys(nt)}const mutableHandlers={get:get$4,set:set$4,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(nt,rt){return!0},deleteProperty(nt,rt){return!0}},shallowReactiveHandlers=extend$3({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=nt=>nt,getProto=nt=>Reflect.getPrototypeOf(nt);function get$1$1(nt,rt,it=!1,st=!1){nt=nt.__v_raw;const bt=toRaw(nt),wt=toRaw(rt);it||(rt!==wt&&track(bt,"get",rt),track(bt,"get",wt));const{has:Et}=getProto(bt),kt=st?toShallow:it?toReadonly:toReactive;if(Et.call(bt,rt))return kt(nt.get(rt));if(Et.call(bt,wt))return kt(nt.get(wt));nt!==bt&&nt.get(rt)}function has$1$1(nt,rt=!1){const it=this.__v_raw,st=toRaw(it),bt=toRaw(nt);return rt||(nt!==bt&&track(st,"has",nt),track(st,"has",bt)),nt===bt?it.has(nt):it.has(nt)||it.has(bt)}function size(nt,rt=!1){return nt=nt.__v_raw,!rt&&track(toRaw(nt),"iterate",ITERATE_KEY),Reflect.get(nt,"size",nt)}function add(nt){nt=toRaw(nt);const rt=toRaw(this);return getProto(rt).has.call(rt,nt)||(rt.add(nt),trigger(rt,"add",nt,nt)),this}function set$1$1(nt,rt){rt=toRaw(rt);const it=toRaw(this),{has:st,get:bt}=getProto(it);let wt=st.call(it,nt);wt||(nt=toRaw(nt),wt=st.call(it,nt));const Et=bt.call(it,nt);return it.set(nt,rt),wt?hasChanged(rt,Et)&&trigger(it,"set",nt,rt):trigger(it,"add",nt,rt),this}function deleteEntry(nt){const rt=toRaw(this),{has:it,get:st}=getProto(rt);let bt=it.call(rt,nt);bt||(nt=toRaw(nt),bt=it.call(rt,nt)),st&&st.call(rt,nt);const wt=rt.delete(nt);return bt&&trigger(rt,"delete",nt,void 0),wt}function clear$h(){const nt=toRaw(this),rt=nt.size!==0,it=nt.clear();return rt&&trigger(nt,"clear",void 0,void 0),it}function createForEach(nt,rt){return function(st,bt){const wt=this,Et=wt.__v_raw,kt=toRaw(Et),Lt=rt?toShallow:nt?toReadonly:toReactive;return!nt&&track(kt,"iterate",ITERATE_KEY),Et.forEach((Ot,Rt)=>st.call(bt,Lt(Ot),Lt(Rt),wt))}}function createIterableMethod(nt,rt,it){return function(...st){const bt=this.__v_raw,wt=toRaw(bt),Et=isMap$2(wt),kt=nt==="entries"||nt===Symbol.iterator&&Et,Lt=nt==="keys"&&Et,Ot=bt[nt](...st),Rt=it?toShallow:rt?toReadonly:toReactive;return!rt&&track(wt,"iterate",Lt?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Dt,done:Bt}=Ot.next();return Bt?{value:Dt,done:Bt}:{value:kt?[Rt(Dt[0]),Rt(Dt[1])]:Rt(Dt),done:Bt}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(nt){return function(...rt){return nt==="delete"?!1:this}}function createInstrumentations(){const nt={get(wt){return get$1$1(this,wt)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear:clear$h,forEach:createForEach(!1,!1)},rt={get(wt){return get$1$1(this,wt,!1,!0)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear:clear$h,forEach:createForEach(!1,!0)},it={get(wt){return get$1$1(this,wt,!0)},get size(){return size(this,!0)},has(wt){return has$1$1.call(this,wt,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},st={get(wt){return get$1$1(this,wt,!0,!0)},get size(){return size(this,!0)},has(wt){return has$1$1.call(this,wt,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(wt=>{nt[wt]=createIterableMethod(wt,!1,!1),it[wt]=createIterableMethod(wt,!0,!1),rt[wt]=createIterableMethod(wt,!1,!0),st[wt]=createIterableMethod(wt,!0,!0)}),[nt,it,rt,st]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(nt,rt){const it=rt?nt?shallowReadonlyInstrumentations:shallowInstrumentations:nt?readonlyInstrumentations:mutableInstrumentations;return(st,bt,wt)=>bt==="__v_isReactive"?!nt:bt==="__v_isReadonly"?nt:bt==="__v_raw"?st:Reflect.get(hasOwn(it,bt)&&bt in st?it:st,bt,wt)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(nt){switch(nt){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(nt){return nt.__v_skip||!Object.isExtensible(nt)?0:targetTypeMap(toRawType(nt))}function reactive(nt){return isReadonly(nt)?nt:createReactiveObject(nt,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(nt){return createReactiveObject(nt,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(nt){return createReactiveObject(nt,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(nt,rt,it,st,bt){if(!isObject$3(nt)||nt.__v_raw&&!(rt&&nt.__v_isReactive))return nt;const wt=bt.get(nt);if(wt)return wt;const Et=getTargetType(nt);if(Et===0)return nt;const kt=new Proxy(nt,Et===2?st:it);return bt.set(nt,kt),kt}function isReactive(nt){return isReadonly(nt)?isReactive(nt.__v_raw):!!(nt&&nt.__v_isReactive)}function isReadonly(nt){return!!(nt&&nt.__v_isReadonly)}function isShallow(nt){return!!(nt&&nt.__v_isShallow)}function isProxy(nt){return isReactive(nt)||isReadonly(nt)}function toRaw(nt){const rt=nt&&nt.__v_raw;return rt?toRaw(rt):nt}function markRaw(nt){return def(nt,"__v_skip",!0),nt}const toReactive=nt=>isObject$3(nt)?reactive(nt):nt,toReadonly=nt=>isObject$3(nt)?readonly(nt):nt;function trackRefValue(nt){shouldTrack&&activeEffect&&(nt=toRaw(nt),trackEffects(nt.dep||(nt.dep=createDep())))}function triggerRefValue(nt,rt){nt=toRaw(nt),nt.dep&&triggerEffects(nt.dep)}function isRef(nt){return!!(nt&&nt.__v_isRef===!0)}function ref(nt){return createRef(nt,!1)}function createRef(nt,rt){return isRef(nt)?nt:new RefImpl(nt,rt)}class RefImpl{constructor(rt,it){this.__v_isShallow=it,this.dep=void 0,this.__v_isRef=!0,this._rawValue=it?rt:toRaw(rt),this._value=it?rt:toReactive(rt)}get value(){return trackRefValue(this),this._value}set value(rt){const it=this.__v_isShallow||isShallow(rt)||isReadonly(rt);rt=it?rt:toRaw(rt),hasChanged(rt,this._rawValue)&&(this._rawValue=rt,this._value=it?rt:toReactive(rt),triggerRefValue(this))}}function unref(nt){return isRef(nt)?nt.value:nt}const shallowUnwrapHandlers={get:(nt,rt,it)=>unref(Reflect.get(nt,rt,it)),set:(nt,rt,it,st)=>{const bt=nt[rt];return isRef(bt)&&!isRef(it)?(bt.value=it,!0):Reflect.set(nt,rt,it,st)}};function proxyRefs(nt){return isReactive(nt)?nt:new Proxy(nt,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(rt,it,st,bt){this._setter=it,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(rt,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!bt,this.__v_isReadonly=st}get value(){const rt=toRaw(this);return trackRefValue(rt),(rt._dirty||!rt._cacheable)&&(rt._dirty=!1,rt._value=rt.effect.run()),rt._value}set value(rt){this._setter(rt)}}_a$1="__v_isReadonly";function computed$1(nt,rt,it=!1){let st,bt;const wt=isFunction$1(nt);return wt?(st=nt,bt=NOOP):(st=nt.get,bt=nt.set),new ComputedRefImpl(st,bt,wt||!bt,it)}function warn(nt,...rt){}function callWithErrorHandling(nt,rt,it,st){let bt;try{bt=st?nt(...st):nt()}catch(wt){handleError$1(wt,rt,it)}return bt}function callWithAsyncErrorHandling(nt,rt,it,st){if(isFunction$1(nt)){const wt=callWithErrorHandling(nt,rt,it,st);return wt&&isPromise(wt)&&wt.catch(Et=>{handleError$1(Et,rt,it)}),wt}const bt=[];for(let wt=0;wt<nt.length;wt++)bt.push(callWithAsyncErrorHandling(nt[wt],rt,it,st));return bt}function handleError$1(nt,rt,it,st=!0){const bt=rt?rt.vnode:null;if(rt){let wt=rt.parent;const Et=rt.proxy,kt=it;for(;wt;){const Ot=wt.ec;if(Ot){for(let Rt=0;Rt<Ot.length;Rt++)if(Ot[Rt](nt,Et,kt)===!1)return}wt=wt.parent}const Lt=rt.appContext.config.errorHandler;if(Lt){callWithErrorHandling(Lt,null,10,[nt,Et,kt]);return}}logError(nt,it,bt,st)}function logError(nt,rt,it,st=!0){console.error(nt)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(nt){const rt=currentFlushPromise||resolvedPromise;return nt?rt.then(this?nt.bind(this):nt):rt}function findInsertionIndex(nt){let rt=flushIndex+1,it=queue.length;for(;rt<it;){const st=rt+it>>>1;getId$1(queue[st])<nt?rt=st+1:it=st}return rt}function queueJob(nt){(!queue.length||!queue.includes(nt,isFlushing&&nt.allowRecurse?flushIndex+1:flushIndex))&&(nt.id==null?queue.push(nt):queue.splice(findInsertionIndex(nt.id),0,nt),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(nt){const rt=queue.indexOf(nt);rt>flushIndex&&queue.splice(rt,1)}function queuePostFlushCb(nt){isArray$2(nt)?pendingPostFlushCbs.push(...nt):(!activePostFlushCbs||!activePostFlushCbs.includes(nt,nt.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(nt),queueFlush()}function flushPreFlushCbs(nt,rt=isFlushing?flushIndex+1:0){for(;rt<queue.length;rt++){const it=queue[rt];it&&it.pre&&(queue.splice(rt,1),rt--,it())}}function flushPostFlushCbs(nt){if(pendingPostFlushCbs.length){const rt=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...rt);return}for(activePostFlushCbs=rt,activePostFlushCbs.sort((it,st)=>getId$1(it)-getId$1(st)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId$1=nt=>nt.id==null?1/0:nt.id,comparator=(nt,rt)=>{const it=getId$1(nt)-getId$1(rt);if(it===0){if(nt.pre&&!rt.pre)return-1;if(rt.pre&&!nt.pre)return 1}return it};function flushJobs(nt){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const rt=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const it=queue[flushIndex];it&&it.active!==!1&&callWithErrorHandling(it,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(nt,rt,...it){if(nt.isUnmounted)return;const st=nt.vnode.props||EMPTY_OBJ;let bt=it;const wt=rt.startsWith("update:"),Et=wt&&rt.slice(7);if(Et&&Et in st){const Rt=`${Et==="modelValue"?"model":Et}Modifiers`,{number:Dt,trim:Bt}=st[Rt]||EMPTY_OBJ;Bt&&(bt=it.map(Ft=>isString(Ft)?Ft.trim():Ft)),Dt&&(bt=it.map(toNumber$1))}let kt,Lt=st[kt=toHandlerKey(rt)]||st[kt=toHandlerKey(camelize(rt))];!Lt&&wt&&(Lt=st[kt=toHandlerKey(hyphenate(rt))]),Lt&&callWithAsyncErrorHandling(Lt,nt,6,bt);const Ot=st[kt+"Once"];if(Ot){if(!nt.emitted)nt.emitted={};else if(nt.emitted[kt])return;nt.emitted[kt]=!0,callWithAsyncErrorHandling(Ot,nt,6,bt)}}function normalizeEmitsOptions(nt,rt,it=!1){const st=rt.emitsCache,bt=st.get(nt);if(bt!==void 0)return bt;const wt=nt.emits;let Et={},kt=!1;if(!isFunction$1(nt)){const Lt=Ot=>{const Rt=normalizeEmitsOptions(Ot,rt,!0);Rt&&(kt=!0,extend$3(Et,Rt))};!it&&rt.mixins.length&&rt.mixins.forEach(Lt),nt.extends&&Lt(nt.extends),nt.mixins&&nt.mixins.forEach(Lt)}return!wt&&!kt?(isObject$3(nt)&&st.set(nt,null),null):(isArray$2(wt)?wt.forEach(Lt=>Et[Lt]=null):extend$3(Et,wt),isObject$3(nt)&&st.set(nt,Et),Et)}function isEmitListener(nt,rt){return!nt||!isOn(rt)?!1:(rt=rt.slice(2).replace(/Once$/,""),hasOwn(nt,rt[0].toLowerCase()+rt.slice(1))||hasOwn(nt,hyphenate(rt))||hasOwn(nt,rt))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(nt){const rt=currentRenderingInstance;return currentRenderingInstance=nt,currentScopeId=nt&&nt.type.__scopeId||null,rt}function pushScopeId(nt){currentScopeId=nt}function popScopeId(){currentScopeId=null}function withCtx(nt,rt=currentRenderingInstance,it){if(!rt||nt._n)return nt;const st=(...bt)=>{st._d&&setBlockTracking(-1);const wt=setCurrentRenderingInstance(rt);let Et;try{Et=nt(...bt)}finally{setCurrentRenderingInstance(wt),st._d&&setBlockTracking(1)}return Et};return st._n=!0,st._c=!0,st._d=!0,st}function markAttrsAccessed(){}function renderComponentRoot(nt){const{type:rt,vnode:it,proxy:st,withProxy:bt,props:wt,propsOptions:[Et],slots:kt,attrs:Lt,emit:Ot,render:Rt,renderCache:Dt,data:Bt,setupState:Ft,ctx:Yt,inheritAttrs:Jt}=nt;let Wt,Qt;const rn=setCurrentRenderingInstance(nt);try{if(it.shapeFlag&4){const on=bt||st;Wt=normalizeVNode(Rt.call(on,on,Dt,wt,Ft,Bt,Yt)),Qt=Lt}else{const on=rt;Wt=normalizeVNode(on.length>1?on(wt,{attrs:Lt,slots:kt,emit:Ot}):on(wt,null)),Qt=rt.props?Lt:getFunctionalFallthrough(Lt)}}catch(on){blockStack.length=0,handleError$1(on,nt,1),Wt=createVNode(Comment)}let sn=Wt;if(Qt&&Jt!==!1){const on=Object.keys(Qt),{shapeFlag:hn}=sn;on.length&&hn&7&&(Et&&on.some(isModelListener)&&(Qt=filterModelListeners(Qt,Et)),sn=cloneVNode(sn,Qt))}return it.dirs&&(sn=cloneVNode(sn),sn.dirs=sn.dirs?sn.dirs.concat(it.dirs):it.dirs),it.transition&&(sn.transition=it.transition),Wt=sn,setCurrentRenderingInstance(rn),Wt}const getFunctionalFallthrough=nt=>{let rt;for(const it in nt)(it==="class"||it==="style"||isOn(it))&&((rt||(rt={}))[it]=nt[it]);return rt},filterModelListeners=(nt,rt)=>{const it={};for(const st in nt)(!isModelListener(st)||!(st.slice(9)in rt))&&(it[st]=nt[st]);return it};function shouldUpdateComponent(nt,rt,it){const{props:st,children:bt,component:wt}=nt,{props:Et,children:kt,patchFlag:Lt}=rt,Ot=wt.emitsOptions;if(rt.dirs||rt.transition)return!0;if(it&&Lt>=0){if(Lt&1024)return!0;if(Lt&16)return st?hasPropsChanged(st,Et,Ot):!!Et;if(Lt&8){const Rt=rt.dynamicProps;for(let Dt=0;Dt<Rt.length;Dt++){const Bt=Rt[Dt];if(Et[Bt]!==st[Bt]&&!isEmitListener(Ot,Bt))return!0}}}else return(bt||kt)&&(!kt||!kt.$stable)?!0:st===Et?!1:st?Et?hasPropsChanged(st,Et,Ot):!0:!!Et;return!1}function hasPropsChanged(nt,rt,it){const st=Object.keys(rt);if(st.length!==Object.keys(nt).length)return!0;for(let bt=0;bt<st.length;bt++){const wt=st[bt];if(rt[wt]!==nt[wt]&&!isEmitListener(it,wt))return!0}return!1}function updateHOCHostEl({vnode:nt,parent:rt},it){for(;rt&&rt.subTree===nt;)(nt=rt.vnode).el=it,rt=rt.parent}const isSuspense=nt=>nt.__isSuspense;function queueEffectWithSuspense(nt,rt){rt&&rt.pendingBranch?isArray$2(nt)?rt.effects.push(...nt):rt.effects.push(nt):queuePostFlushCb(nt)}function provide(nt,rt){if(currentInstance){let it=currentInstance.provides;const st=currentInstance.parent&&currentInstance.parent.provides;st===it&&(it=currentInstance.provides=Object.create(st)),it[nt]=rt}}function inject(nt,rt,it=!1){const st=currentInstance||currentRenderingInstance;if(st){const bt=st.parent==null?st.vnode.appContext&&st.vnode.appContext.provides:st.parent.provides;if(bt&&nt in bt)return bt[nt];if(arguments.length>1)return it&&isFunction$1(rt)?rt.call(st.proxy):rt}}const INITIAL_WATCHER_VALUE={};function watch$1(nt,rt,it){return doWatch(nt,rt,it)}function doWatch(nt,rt,{immediate:it,deep:st,flush:bt,onTrack:wt,onTrigger:Et}=EMPTY_OBJ){const kt=currentInstance;let Lt,Ot=!1,Rt=!1;if(isRef(nt)?(Lt=()=>nt.value,Ot=isShallow(nt)):isReactive(nt)?(Lt=()=>nt,st=!0):isArray$2(nt)?(Rt=!0,Ot=nt.some(sn=>isReactive(sn)||isShallow(sn)),Lt=()=>nt.map(sn=>{if(isRef(sn))return sn.value;if(isReactive(sn))return traverse(sn);if(isFunction$1(sn))return callWithErrorHandling(sn,kt,2)})):isFunction$1(nt)?rt?Lt=()=>callWithErrorHandling(nt,kt,2):Lt=()=>{if(!(kt&&kt.isUnmounted))return Dt&&Dt(),callWithAsyncErrorHandling(nt,kt,3,[Bt])}:Lt=NOOP,rt&&st){const sn=Lt;Lt=()=>traverse(sn())}let Dt,Bt=sn=>{Dt=Qt.onStop=()=>{callWithErrorHandling(sn,kt,4)}},Ft;if(isInSSRComponentSetup)if(Bt=NOOP,rt?it&&callWithAsyncErrorHandling(rt,kt,3,[Lt(),Rt?[]:void 0,Bt]):Lt(),bt==="sync"){const sn=useSSRContext();Ft=sn.__watcherHandles||(sn.__watcherHandles=[])}else return NOOP;let Yt=Rt?new Array(nt.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Jt=()=>{if(!!Qt.active)if(rt){const sn=Qt.run();(st||Ot||(Rt?sn.some((on,hn)=>hasChanged(on,Yt[hn])):hasChanged(sn,Yt)))&&(Dt&&Dt(),callWithAsyncErrorHandling(rt,kt,3,[sn,Yt===INITIAL_WATCHER_VALUE?void 0:Rt&&Yt[0]===INITIAL_WATCHER_VALUE?[]:Yt,Bt]),Yt=sn)}else Qt.run()};Jt.allowRecurse=!!rt;let Wt;bt==="sync"?Wt=Jt:bt==="post"?Wt=()=>queuePostRenderEffect(Jt,kt&&kt.suspense):(Jt.pre=!0,kt&&(Jt.id=kt.uid),Wt=()=>queueJob(Jt));const Qt=new ReactiveEffect(Lt,Wt);rt?it?Jt():Yt=Qt.run():bt==="post"?queuePostRenderEffect(Qt.run.bind(Qt),kt&&kt.suspense):Qt.run();const rn=()=>{Qt.stop(),kt&&kt.scope&&remove$1(kt.scope.effects,Qt)};return Ft&&Ft.push(rn),rn}function instanceWatch(nt,rt,it){const st=this.proxy,bt=isString(nt)?nt.includes(".")?createPathGetter(st,nt):()=>st[nt]:nt.bind(st,st);let wt;isFunction$1(rt)?wt=rt:(wt=rt.handler,it=rt);const Et=currentInstance;setCurrentInstance(this);const kt=doWatch(bt,wt.bind(st),it);return Et?setCurrentInstance(Et):unsetCurrentInstance(),kt}function createPathGetter(nt,rt){const it=rt.split(".");return()=>{let st=nt;for(let bt=0;bt<it.length&&st;bt++)st=st[it[bt]];return st}}function traverse(nt,rt){if(!isObject$3(nt)||nt.__v_skip||(rt=rt||new Set,rt.has(nt)))return nt;if(rt.add(nt),isRef(nt))traverse(nt.value,rt);else if(isArray$2(nt))for(let it=0;it<nt.length;it++)traverse(nt[it],rt);else if(isSet$2(nt)||isMap$2(nt))nt.forEach(it=>{traverse(it,rt)});else if(isPlainObject$1(nt))for(const it in nt)traverse(nt[it],rt);return nt}function useTransitionState(){const nt={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{nt.isMounted=!0}),onBeforeUnmount(()=>{nt.isUnmounting=!0}),nt}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(nt,{slots:rt}){const it=getCurrentInstance(),st=useTransitionState();let bt;return()=>{const wt=rt.default&&getTransitionRawChildren(rt.default(),!0);if(!wt||!wt.length)return;let Et=wt[0];if(wt.length>1){for(const Jt of wt)if(Jt.type!==Comment){Et=Jt;break}}const kt=toRaw(nt),{mode:Lt}=kt;if(st.isLeaving)return emptyPlaceholder(Et);const Ot=getKeepAliveChild(Et);if(!Ot)return emptyPlaceholder(Et);const Rt=resolveTransitionHooks(Ot,kt,st,it);setTransitionHooks(Ot,Rt);const Dt=it.subTree,Bt=Dt&&getKeepAliveChild(Dt);let Ft=!1;const{getTransitionKey:Yt}=Ot.type;if(Yt){const Jt=Yt();bt===void 0?bt=Jt:Jt!==bt&&(bt=Jt,Ft=!0)}if(Bt&&Bt.type!==Comment&&(!isSameVNodeType(Ot,Bt)||Ft)){const Jt=resolveTransitionHooks(Bt,kt,st,it);if(setTransitionHooks(Bt,Jt),Lt==="out-in")return st.isLeaving=!0,Jt.afterLeave=()=>{st.isLeaving=!1,it.update.active!==!1&&it.update()},emptyPlaceholder(Et);Lt==="in-out"&&Ot.type!==Comment&&(Jt.delayLeave=(Wt,Qt,rn)=>{const sn=getLeavingNodesForType(st,Bt);sn[String(Bt.key)]=Bt,Wt._leaveCb=()=>{Qt(),Wt._leaveCb=void 0,delete Rt.delayedLeave},Rt.delayedLeave=rn})}return Et}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(nt,rt){const{leavingVNodes:it}=nt;let st=it.get(rt.type);return st||(st=Object.create(null),it.set(rt.type,st)),st}function resolveTransitionHooks(nt,rt,it,st){const{appear:bt,mode:wt,persisted:Et=!1,onBeforeEnter:kt,onEnter:Lt,onAfterEnter:Ot,onEnterCancelled:Rt,onBeforeLeave:Dt,onLeave:Bt,onAfterLeave:Ft,onLeaveCancelled:Yt,onBeforeAppear:Jt,onAppear:Wt,onAfterAppear:Qt,onAppearCancelled:rn}=rt,sn=String(nt.key),on=getLeavingNodesForType(it,nt),hn=(Tn,kn)=>{Tn&&callWithAsyncErrorHandling(Tn,st,9,kn)},mn=(Tn,kn)=>{const In=kn[1];hn(Tn,kn),isArray$2(Tn)?Tn.every(Ln=>Ln.length<=1)&&In():Tn.length<=1&&In()},Cn={mode:wt,persisted:Et,beforeEnter(Tn){let kn=kt;if(!it.isMounted)if(bt)kn=Jt||kt;else return;Tn._leaveCb&&Tn._leaveCb(!0);const In=on[sn];In&&isSameVNodeType(nt,In)&&In.el._leaveCb&&In.el._leaveCb(),hn(kn,[Tn])},enter(Tn){let kn=Lt,In=Ot,Ln=Rt;if(!it.isMounted)if(bt)kn=Wt||Lt,In=Qt||Ot,Ln=rn||Rt;else return;let pn=!1;const Hn=Tn._enterCb=yn=>{pn||(pn=!0,yn?hn(Ln,[Tn]):hn(In,[Tn]),Cn.delayedLeave&&Cn.delayedLeave(),Tn._enterCb=void 0)};kn?mn(kn,[Tn,Hn]):Hn()},leave(Tn,kn){const In=String(nt.key);if(Tn._enterCb&&Tn._enterCb(!0),it.isUnmounting)return kn();hn(Dt,[Tn]);let Ln=!1;const pn=Tn._leaveCb=Hn=>{Ln||(Ln=!0,kn(),Hn?hn(Yt,[Tn]):hn(Ft,[Tn]),Tn._leaveCb=void 0,on[In]===nt&&delete on[In])};on[In]=nt,Bt?mn(Bt,[Tn,pn]):pn()},clone(Tn){return resolveTransitionHooks(Tn,rt,it,st)}};return Cn}function emptyPlaceholder(nt){if(isKeepAlive(nt))return nt=cloneVNode(nt),nt.children=null,nt}function getKeepAliveChild(nt){return isKeepAlive(nt)?nt.children?nt.children[0]:void 0:nt}function setTransitionHooks(nt,rt){nt.shapeFlag&6&&nt.component?setTransitionHooks(nt.component.subTree,rt):nt.shapeFlag&128?(nt.ssContent.transition=rt.clone(nt.ssContent),nt.ssFallback.transition=rt.clone(nt.ssFallback)):nt.transition=rt}function getTransitionRawChildren(nt,rt=!1,it){let st=[],bt=0;for(let wt=0;wt<nt.length;wt++){let Et=nt[wt];const kt=it==null?Et.key:String(it)+String(Et.key!=null?Et.key:wt);Et.type===Fragment?(Et.patchFlag&128&&bt++,st=st.concat(getTransitionRawChildren(Et.children,rt,kt))):(rt||Et.type!==Comment)&&st.push(kt!=null?cloneVNode(Et,{key:kt}):Et)}if(bt>1)for(let wt=0;wt<st.length;wt++)st[wt].patchFlag=-2;return st}function defineComponent(nt){return isFunction$1(nt)?{setup:nt,name:nt.name}:nt}const isAsyncWrapper=nt=>!!nt.type.__asyncLoader,isKeepAlive=nt=>nt.type.__isKeepAlive;function onActivated(nt,rt){registerKeepAliveHook(nt,"a",rt)}function onDeactivated(nt,rt){registerKeepAliveHook(nt,"da",rt)}function registerKeepAliveHook(nt,rt,it=currentInstance){const st=nt.__wdc||(nt.__wdc=()=>{let bt=it;for(;bt;){if(bt.isDeactivated)return;bt=bt.parent}return nt()});if(injectHook(rt,st,it),it){let bt=it.parent;for(;bt&&bt.parent;)isKeepAlive(bt.parent.vnode)&&injectToKeepAliveRoot(st,rt,it,bt),bt=bt.parent}}function injectToKeepAliveRoot(nt,rt,it,st){const bt=injectHook(rt,nt,st,!0);onUnmounted(()=>{remove$1(st[rt],bt)},it)}function injectHook(nt,rt,it=currentInstance,st=!1){if(it){const bt=it[nt]||(it[nt]=[]),wt=rt.__weh||(rt.__weh=(...Et)=>{if(it.isUnmounted)return;pauseTracking(),setCurrentInstance(it);const kt=callWithAsyncErrorHandling(rt,it,nt,Et);return unsetCurrentInstance(),resetTracking(),kt});return st?bt.unshift(wt):bt.push(wt),wt}}const createHook=nt=>(rt,it=currentInstance)=>(!isInSSRComponentSetup||nt==="sp")&&injectHook(nt,(...st)=>rt(...st),it),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(nt,rt=currentInstance){injectHook("ec",nt,rt)}function invokeDirectiveHook(nt,rt,it,st){const bt=nt.dirs,wt=rt&&rt.dirs;for(let Et=0;Et<bt.length;Et++){const kt=bt[Et];wt&&(kt.oldValue=wt[Et].value);let Lt=kt.dir[st];Lt&&(pauseTracking(),callWithAsyncErrorHandling(Lt,it,8,[nt.el,kt,nt,rt]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol();function renderList(nt,rt,it,st){let bt;const wt=it&&it[st];if(isArray$2(nt)||isString(nt)){bt=new Array(nt.length);for(let Et=0,kt=nt.length;Et<kt;Et++)bt[Et]=rt(nt[Et],Et,void 0,wt&&wt[Et])}else if(typeof nt=="number"){bt=new Array(nt);for(let Et=0;Et<nt;Et++)bt[Et]=rt(Et+1,Et,void 0,wt&&wt[Et])}else if(isObject$3(nt))if(nt[Symbol.iterator])bt=Array.from(nt,(Et,kt)=>rt(Et,kt,void 0,wt&&wt[kt]));else{const Et=Object.keys(nt);bt=new Array(Et.length);for(let kt=0,Lt=Et.length;kt<Lt;kt++){const Ot=Et[kt];bt[kt]=rt(nt[Ot],Ot,kt,wt&&wt[kt])}}else bt=[];return it&&(it[st]=bt),bt}const getPublicInstance=nt=>nt?isStatefulComponent(nt)?getExposeProxy(nt)||nt.proxy:getPublicInstance(nt.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:nt=>nt,$el:nt=>nt.vnode.el,$data:nt=>nt.data,$props:nt=>nt.props,$attrs:nt=>nt.attrs,$slots:nt=>nt.slots,$refs:nt=>nt.refs,$parent:nt=>getPublicInstance(nt.parent),$root:nt=>getPublicInstance(nt.root),$emit:nt=>nt.emit,$options:nt=>resolveMergedOptions(nt),$forceUpdate:nt=>nt.f||(nt.f=()=>queueJob(nt.update)),$nextTick:nt=>nt.n||(nt.n=nextTick.bind(nt.proxy)),$watch:nt=>instanceWatch.bind(nt)}),hasSetupBinding=(nt,rt)=>nt!==EMPTY_OBJ&&!nt.__isScriptSetup&&hasOwn(nt,rt),PublicInstanceProxyHandlers={get({_:nt},rt){const{ctx:it,setupState:st,data:bt,props:wt,accessCache:Et,type:kt,appContext:Lt}=nt;let Ot;if(rt[0]!=="$"){const Ft=Et[rt];if(Ft!==void 0)switch(Ft){case 1:return st[rt];case 2:return bt[rt];case 4:return it[rt];case 3:return wt[rt]}else{if(hasSetupBinding(st,rt))return Et[rt]=1,st[rt];if(bt!==EMPTY_OBJ&&hasOwn(bt,rt))return Et[rt]=2,bt[rt];if((Ot=nt.propsOptions[0])&&hasOwn(Ot,rt))return Et[rt]=3,wt[rt];if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Et[rt]=4,it[rt];shouldCacheAccess&&(Et[rt]=0)}}const Rt=publicPropertiesMap[rt];let Dt,Bt;if(Rt)return rt==="$attrs"&&track(nt,"get",rt),Rt(nt);if((Dt=kt.__cssModules)&&(Dt=Dt[rt]))return Dt;if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Et[rt]=4,it[rt];if(Bt=Lt.config.globalProperties,hasOwn(Bt,rt))return Bt[rt]},set({_:nt},rt,it){const{data:st,setupState:bt,ctx:wt}=nt;return hasSetupBinding(bt,rt)?(bt[rt]=it,!0):st!==EMPTY_OBJ&&hasOwn(st,rt)?(st[rt]=it,!0):hasOwn(nt.props,rt)||rt[0]==="$"&&rt.slice(1)in nt?!1:(wt[rt]=it,!0)},has({_:{data:nt,setupState:rt,accessCache:it,ctx:st,appContext:bt,propsOptions:wt}},Et){let kt;return!!it[Et]||nt!==EMPTY_OBJ&&hasOwn(nt,Et)||hasSetupBinding(rt,Et)||(kt=wt[0])&&hasOwn(kt,Et)||hasOwn(st,Et)||hasOwn(publicPropertiesMap,Et)||hasOwn(bt.config.globalProperties,Et)},defineProperty(nt,rt,it){return it.get!=null?nt._.accessCache[rt]=0:hasOwn(it,"value")&&this.set(nt,rt,it.value,null),Reflect.defineProperty(nt,rt,it)}};let shouldCacheAccess=!0;function applyOptions(nt){const rt=resolveMergedOptions(nt),it=nt.proxy,st=nt.ctx;shouldCacheAccess=!1,rt.beforeCreate&&callHook(rt.beforeCreate,nt,"bc");const{data:bt,computed:wt,methods:Et,watch:kt,provide:Lt,inject:Ot,created:Rt,beforeMount:Dt,mounted:Bt,beforeUpdate:Ft,updated:Yt,activated:Jt,deactivated:Wt,beforeDestroy:Qt,beforeUnmount:rn,destroyed:sn,unmounted:on,render:hn,renderTracked:mn,renderTriggered:Cn,errorCaptured:Tn,serverPrefetch:kn,expose:In,inheritAttrs:Ln,components:pn,directives:Hn,filters:yn}=rt;if(Ot&&resolveInjections(Ot,st,null,nt.appContext.config.unwrapInjectedRef),Et)for(const yr in Et){const Tr=Et[yr];isFunction$1(Tr)&&(st[yr]=Tr.bind(it))}if(bt){const yr=bt.call(it,it);isObject$3(yr)&&(nt.data=reactive(yr))}if(shouldCacheAccess=!0,wt)for(const yr in wt){const Tr=wt[yr],Mr=isFunction$1(Tr)?Tr.bind(it,it):isFunction$1(Tr.get)?Tr.get.bind(it,it):NOOP,rr=!isFunction$1(Tr)&&isFunction$1(Tr.set)?Tr.set.bind(it):NOOP,wr=computed({get:Mr,set:rr});Object.defineProperty(st,yr,{enumerable:!0,configurable:!0,get:()=>wr.value,set:fr=>wr.value=fr})}if(kt)for(const yr in kt)createWatcher(kt[yr],st,it,yr);if(Lt){const yr=isFunction$1(Lt)?Lt.call(it):Lt;Reflect.ownKeys(yr).forEach(Tr=>{provide(Tr,yr[Tr])})}Rt&&callHook(Rt,nt,"c");function vn(yr,Tr){isArray$2(Tr)?Tr.forEach(Mr=>yr(Mr.bind(it))):Tr&&yr(Tr.bind(it))}if(vn(onBeforeMount,Dt),vn(onMounted,Bt),vn(onBeforeUpdate,Ft),vn(onUpdated,Yt),vn(onActivated,Jt),vn(onDeactivated,Wt),vn(onErrorCaptured,Tn),vn(onRenderTracked,mn),vn(onRenderTriggered,Cn),vn(onBeforeUnmount,rn),vn(onUnmounted,on),vn(onServerPrefetch,kn),isArray$2(In))if(In.length){const yr=nt.exposed||(nt.exposed={});In.forEach(Tr=>{Object.defineProperty(yr,Tr,{get:()=>it[Tr],set:Mr=>it[Tr]=Mr})})}else nt.exposed||(nt.exposed={});hn&&nt.render===NOOP&&(nt.render=hn),Ln!=null&&(nt.inheritAttrs=Ln),pn&&(nt.components=pn),Hn&&(nt.directives=Hn)}function resolveInjections(nt,rt,it=NOOP,st=!1){isArray$2(nt)&&(nt=normalizeInject(nt));for(const bt in nt){const wt=nt[bt];let Et;isObject$3(wt)?"default"in wt?Et=inject(wt.from||bt,wt.default,!0):Et=inject(wt.from||bt):Et=inject(wt),isRef(Et)&&st?Object.defineProperty(rt,bt,{enumerable:!0,configurable:!0,get:()=>Et.value,set:kt=>Et.value=kt}):rt[bt]=Et}}function callHook(nt,rt,it){callWithAsyncErrorHandling(isArray$2(nt)?nt.map(st=>st.bind(rt.proxy)):nt.bind(rt.proxy),rt,it)}function createWatcher(nt,rt,it,st){const bt=st.includes(".")?createPathGetter(it,st):()=>it[st];if(isString(nt)){const wt=rt[nt];isFunction$1(wt)&&watch$1(bt,wt)}else if(isFunction$1(nt))watch$1(bt,nt.bind(it));else if(isObject$3(nt))if(isArray$2(nt))nt.forEach(wt=>createWatcher(wt,rt,it,st));else{const wt=isFunction$1(nt.handler)?nt.handler.bind(it):rt[nt.handler];isFunction$1(wt)&&watch$1(bt,wt,nt)}}function resolveMergedOptions(nt){const rt=nt.type,{mixins:it,extends:st}=rt,{mixins:bt,optionsCache:wt,config:{optionMergeStrategies:Et}}=nt.appContext,kt=wt.get(rt);let Lt;return kt?Lt=kt:!bt.length&&!it&&!st?Lt=rt:(Lt={},bt.length&&bt.forEach(Ot=>mergeOptions(Lt,Ot,Et,!0)),mergeOptions(Lt,rt,Et)),isObject$3(rt)&&wt.set(rt,Lt),Lt}function mergeOptions(nt,rt,it,st=!1){const{mixins:bt,extends:wt}=rt;wt&&mergeOptions(nt,wt,it,!0),bt&&bt.forEach(Et=>mergeOptions(nt,Et,it,!0));for(const Et in rt)if(!(st&&Et==="expose")){const kt=internalOptionMergeStrats[Et]||it&&it[Et];nt[Et]=kt?kt(nt[Et],rt[Et]):rt[Et]}return nt}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(nt,rt){return rt?nt?function(){return extend$3(isFunction$1(nt)?nt.call(this,this):nt,isFunction$1(rt)?rt.call(this,this):rt)}:rt:nt}function mergeInject(nt,rt){return mergeObjectOptions(normalizeInject(nt),normalizeInject(rt))}function normalizeInject(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++)rt[nt[it]]=nt[it];return rt}return nt}function mergeAsArray(nt,rt){return nt?[...new Set([].concat(nt,rt))]:rt}function mergeObjectOptions(nt,rt){return nt?extend$3(extend$3(Object.create(null),nt),rt):rt}function mergeWatchOptions(nt,rt){if(!nt)return rt;if(!rt)return nt;const it=extend$3(Object.create(null),nt);for(const st in rt)it[st]=mergeAsArray(nt[st],rt[st]);return it}function initProps(nt,rt,it,st=!1){const bt={},wt={};def(wt,InternalObjectKey,1),nt.propsDefaults=Object.create(null),setFullProps(nt,rt,bt,wt);for(const Et in nt.propsOptions[0])Et in bt||(bt[Et]=void 0);it?nt.props=st?bt:shallowReactive(bt):nt.type.props?nt.props=bt:nt.props=wt,nt.attrs=wt}function updateProps(nt,rt,it,st){const{props:bt,attrs:wt,vnode:{patchFlag:Et}}=nt,kt=toRaw(bt),[Lt]=nt.propsOptions;let Ot=!1;if((st||Et>0)&&!(Et&16)){if(Et&8){const Rt=nt.vnode.dynamicProps;for(let Dt=0;Dt<Rt.length;Dt++){let Bt=Rt[Dt];if(isEmitListener(nt.emitsOptions,Bt))continue;const Ft=rt[Bt];if(Lt)if(hasOwn(wt,Bt))Ft!==wt[Bt]&&(wt[Bt]=Ft,Ot=!0);else{const Yt=camelize(Bt);bt[Yt]=resolvePropValue(Lt,kt,Yt,Ft,nt,!1)}else Ft!==wt[Bt]&&(wt[Bt]=Ft,Ot=!0)}}}else{setFullProps(nt,rt,bt,wt)&&(Ot=!0);let Rt;for(const Dt in kt)(!rt||!hasOwn(rt,Dt)&&((Rt=hyphenate(Dt))===Dt||!hasOwn(rt,Rt)))&&(Lt?it&&(it[Dt]!==void 0||it[Rt]!==void 0)&&(bt[Dt]=resolvePropValue(Lt,kt,Dt,void 0,nt,!0)):delete bt[Dt]);if(wt!==kt)for(const Dt in wt)(!rt||!hasOwn(rt,Dt)&&!0)&&(delete wt[Dt],Ot=!0)}Ot&&trigger(nt,"set","$attrs")}function setFullProps(nt,rt,it,st){const[bt,wt]=nt.propsOptions;let Et=!1,kt;if(rt)for(let Lt in rt){if(isReservedProp(Lt))continue;const Ot=rt[Lt];let Rt;bt&&hasOwn(bt,Rt=camelize(Lt))?!wt||!wt.includes(Rt)?it[Rt]=Ot:(kt||(kt={}))[Rt]=Ot:isEmitListener(nt.emitsOptions,Lt)||(!(Lt in st)||Ot!==st[Lt])&&(st[Lt]=Ot,Et=!0)}if(wt){const Lt=toRaw(it),Ot=kt||EMPTY_OBJ;for(let Rt=0;Rt<wt.length;Rt++){const Dt=wt[Rt];it[Dt]=resolvePropValue(bt,Lt,Dt,Ot[Dt],nt,!hasOwn(Ot,Dt))}}return Et}function resolvePropValue(nt,rt,it,st,bt,wt){const Et=nt[it];if(Et!=null){const kt=hasOwn(Et,"default");if(kt&&st===void 0){const Lt=Et.default;if(Et.type!==Function&&isFunction$1(Lt)){const{propsDefaults:Ot}=bt;it in Ot?st=Ot[it]:(setCurrentInstance(bt),st=Ot[it]=Lt.call(null,rt),unsetCurrentInstance())}else st=Lt}Et[0]&&(wt&&!kt?st=!1:Et[1]&&(st===""||st===hyphenate(it))&&(st=!0))}return st}function normalizePropsOptions(nt,rt,it=!1){const st=rt.propsCache,bt=st.get(nt);if(bt)return bt;const wt=nt.props,Et={},kt=[];let Lt=!1;if(!isFunction$1(nt)){const Rt=Dt=>{Lt=!0;const[Bt,Ft]=normalizePropsOptions(Dt,rt,!0);extend$3(Et,Bt),Ft&&kt.push(...Ft)};!it&&rt.mixins.length&&rt.mixins.forEach(Rt),nt.extends&&Rt(nt.extends),nt.mixins&&nt.mixins.forEach(Rt)}if(!wt&&!Lt)return isObject$3(nt)&&st.set(nt,EMPTY_ARR),EMPTY_ARR;if(isArray$2(wt))for(let Rt=0;Rt<wt.length;Rt++){const Dt=camelize(wt[Rt]);validatePropName(Dt)&&(Et[Dt]=EMPTY_OBJ)}else if(wt)for(const Rt in wt){const Dt=camelize(Rt);if(validatePropName(Dt)){const Bt=wt[Rt],Ft=Et[Dt]=isArray$2(Bt)||isFunction$1(Bt)?{type:Bt}:Object.assign({},Bt);if(Ft){const Yt=getTypeIndex(Boolean,Ft.type),Jt=getTypeIndex(String,Ft.type);Ft[0]=Yt>-1,Ft[1]=Jt<0||Yt<Jt,(Yt>-1||hasOwn(Ft,"default"))&&kt.push(Dt)}}}const Ot=[Et,kt];return isObject$3(nt)&&st.set(nt,Ot),Ot}function validatePropName(nt){return nt[0]!=="$"}function getType(nt){const rt=nt&&nt.toString().match(/^\s*function (\w+)/);return rt?rt[1]:nt===null?"null":""}function isSameType(nt,rt){return getType(nt)===getType(rt)}function getTypeIndex(nt,rt){return isArray$2(rt)?rt.findIndex(it=>isSameType(it,nt)):isFunction$1(rt)&&isSameType(rt,nt)?0:-1}const isInternalKey=nt=>nt[0]==="_"||nt==="$stable",normalizeSlotValue=nt=>isArray$2(nt)?nt.map(normalizeVNode):[normalizeVNode(nt)],normalizeSlot=(nt,rt,it)=>{if(rt._n)return rt;const st=withCtx((...bt)=>normalizeSlotValue(rt(...bt)),it);return st._c=!1,st},normalizeObjectSlots=(nt,rt,it)=>{const st=nt._ctx;for(const bt in nt){if(isInternalKey(bt))continue;const wt=nt[bt];if(isFunction$1(wt))rt[bt]=normalizeSlot(bt,wt,st);else if(wt!=null){const Et=normalizeSlotValue(wt);rt[bt]=()=>Et}}},normalizeVNodeSlots=(nt,rt)=>{const it=normalizeSlotValue(rt);nt.slots.default=()=>it},initSlots=(nt,rt)=>{if(nt.vnode.shapeFlag&32){const it=rt._;it?(nt.slots=toRaw(rt),def(rt,"_",it)):normalizeObjectSlots(rt,nt.slots={})}else nt.slots={},rt&&normalizeVNodeSlots(nt,rt);def(nt.slots,InternalObjectKey,1)},updateSlots=(nt,rt,it)=>{const{vnode:st,slots:bt}=nt;let wt=!0,Et=EMPTY_OBJ;if(st.shapeFlag&32){const kt=rt._;kt?it&&kt===1?wt=!1:(extend$3(bt,rt),!it&&kt===1&&delete bt._):(wt=!rt.$stable,normalizeObjectSlots(rt,bt)),Et=rt}else rt&&(normalizeVNodeSlots(nt,rt),Et={default:1});if(wt)for(const kt in bt)!isInternalKey(kt)&&!(kt in Et)&&delete bt[kt]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(nt,rt){return function(st,bt=null){isFunction$1(st)||(st=Object.assign({},st)),bt!=null&&!isObject$3(bt)&&(bt=null);const wt=createAppContext(),Et=new Set;let kt=!1;const Lt=wt.app={_uid:uid++,_component:st,_props:bt,_container:null,_context:wt,_instance:null,version:version$2,get config(){return wt.config},set config(Ot){},use(Ot,...Rt){return Et.has(Ot)||(Ot&&isFunction$1(Ot.install)?(Et.add(Ot),Ot.install(Lt,...Rt)):isFunction$1(Ot)&&(Et.add(Ot),Ot(Lt,...Rt))),Lt},mixin(Ot){return wt.mixins.includes(Ot)||wt.mixins.push(Ot),Lt},component(Ot,Rt){return Rt?(wt.components[Ot]=Rt,Lt):wt.components[Ot]},directive(Ot,Rt){return Rt?(wt.directives[Ot]=Rt,Lt):wt.directives[Ot]},mount(Ot,Rt,Dt){if(!kt){const Bt=createVNode(st,bt);return Bt.appContext=wt,Rt&&rt?rt(Bt,Ot):nt(Bt,Ot,Dt),kt=!0,Lt._container=Ot,Ot.__vue_app__=Lt,getExposeProxy(Bt.component)||Bt.component.proxy}},unmount(){kt&&(nt(null,Lt._container),delete Lt._container.__vue_app__)},provide(Ot,Rt){return wt.provides[Ot]=Rt,Lt}};return Lt}}function setRef(nt,rt,it,st,bt=!1){if(isArray$2(nt)){nt.forEach((Bt,Ft)=>setRef(Bt,rt&&(isArray$2(rt)?rt[Ft]:rt),it,st,bt));return}if(isAsyncWrapper(st)&&!bt)return;const wt=st.shapeFlag&4?getExposeProxy(st.component)||st.component.proxy:st.el,Et=bt?null:wt,{i:kt,r:Lt}=nt,Ot=rt&&rt.r,Rt=kt.refs===EMPTY_OBJ?kt.refs={}:kt.refs,Dt=kt.setupState;if(Ot!=null&&Ot!==Lt&&(isString(Ot)?(Rt[Ot]=null,hasOwn(Dt,Ot)&&(Dt[Ot]=null)):isRef(Ot)&&(Ot.value=null)),isFunction$1(Lt))callWithErrorHandling(Lt,kt,12,[Et,Rt]);else{const Bt=isString(Lt),Ft=isRef(Lt);if(Bt||Ft){const Yt=()=>{if(nt.f){const Jt=Bt?hasOwn(Dt,Lt)?Dt[Lt]:Rt[Lt]:Lt.value;bt?isArray$2(Jt)&&remove$1(Jt,wt):isArray$2(Jt)?Jt.includes(wt)||Jt.push(wt):Bt?(Rt[Lt]=[wt],hasOwn(Dt,Lt)&&(Dt[Lt]=Rt[Lt])):(Lt.value=[wt],nt.k&&(Rt[nt.k]=Lt.value))}else Bt?(Rt[Lt]=Et,hasOwn(Dt,Lt)&&(Dt[Lt]=Et)):Ft&&(Lt.value=Et,nt.k&&(Rt[nt.k]=Et))};Et?(Yt.id=-1,queuePostRenderEffect(Yt,it)):Yt()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(nt){return baseCreateRenderer(nt)}function baseCreateRenderer(nt,rt){const it=getGlobalThis();it.__VUE__=!0;const{insert:st,remove:bt,patchProp:wt,createElement:Et,createText:kt,createComment:Lt,setText:Ot,setElementText:Rt,parentNode:Dt,nextSibling:Bt,setScopeId:Ft=NOOP,insertStaticContent:Yt}=nt,Jt=(Pn,nn,fn,cn=null,Nn=null,On=null,cr=!1,Bn=null,Qn=!!nn.dynamicChildren)=>{if(Pn===nn)return;Pn&&!isSameVNodeType(Pn,nn)&&(cn=qr(Pn),fr(Pn,Nn,On,!0),Pn=null),nn.patchFlag===-2&&(Qn=!1,nn.dynamicChildren=null);const{type:Un,ref:or,shapeFlag:hr}=nn;switch(Un){case Text:Wt(Pn,nn,fn,cn);break;case Comment:Qt(Pn,nn,fn,cn);break;case Static:Pn==null&&rn(nn,fn,cn,cr);break;case Fragment:pn(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn);break;default:hr&1?hn(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn):hr&6?Hn(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn):(hr&64||hr&128)&&Un.process(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn,pr)}or!=null&&Nn&&setRef(or,Pn&&Pn.ref,On,nn||Pn,!nn)},Wt=(Pn,nn,fn,cn)=>{if(Pn==null)st(nn.el=kt(nn.children),fn,cn);else{const Nn=nn.el=Pn.el;nn.children!==Pn.children&&Ot(Nn,nn.children)}},Qt=(Pn,nn,fn,cn)=>{Pn==null?st(nn.el=Lt(nn.children||""),fn,cn):nn.el=Pn.el},rn=(Pn,nn,fn,cn)=>{[Pn.el,Pn.anchor]=Yt(Pn.children,nn,fn,cn,Pn.el,Pn.anchor)},sn=({el:Pn,anchor:nn},fn,cn)=>{let Nn;for(;Pn&&Pn!==nn;)Nn=Bt(Pn),st(Pn,fn,cn),Pn=Nn;st(nn,fn,cn)},on=({el:Pn,anchor:nn})=>{let fn;for(;Pn&&Pn!==nn;)fn=Bt(Pn),bt(Pn),Pn=fn;bt(nn)},hn=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn)=>{cr=cr||nn.type==="svg",Pn==null?mn(nn,fn,cn,Nn,On,cr,Bn,Qn):kn(Pn,nn,Nn,On,cr,Bn,Qn)},mn=(Pn,nn,fn,cn,Nn,On,cr,Bn)=>{let Qn,Un;const{type:or,props:hr,shapeFlag:kr,transition:xr,dirs:br}=Pn;if(Qn=Pn.el=Et(Pn.type,On,hr&&hr.is,hr),kr&8?Rt(Qn,Pn.children):kr&16&&Tn(Pn.children,Qn,null,cn,Nn,On&&or!=="foreignObject",cr,Bn),br&&invokeDirectiveHook(Pn,null,cn,"created"),hr){for(const di in hr)di!=="value"&&!isReservedProp(di)&&wt(Qn,di,null,hr[di],On,Pn.children,cn,Nn,lr);"value"in hr&&wt(Qn,"value",null,hr.value),(Un=hr.onVnodeBeforeMount)&&invokeVNodeHook(Un,cn,Pn)}Cn(Qn,Pn,Pn.scopeId,cr,cn),br&&invokeDirectiveHook(Pn,null,cn,"beforeMount");const hi=(!Nn||Nn&&!Nn.pendingBranch)&&xr&&!xr.persisted;hi&&xr.beforeEnter(Qn),st(Qn,nn,fn),((Un=hr&&hr.onVnodeMounted)||hi||br)&&queuePostRenderEffect(()=>{Un&&invokeVNodeHook(Un,cn,Pn),hi&&xr.enter(Qn),br&&invokeDirectiveHook(Pn,null,cn,"mounted")},Nn)},Cn=(Pn,nn,fn,cn,Nn)=>{if(fn&&Ft(Pn,fn),cn)for(let On=0;On<cn.length;On++)Ft(Pn,cn[On]);if(Nn){let On=Nn.subTree;if(nn===On){const cr=Nn.vnode;Cn(Pn,cr,cr.scopeId,cr.slotScopeIds,Nn.parent)}}},Tn=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn=0)=>{for(let Un=Qn;Un<Pn.length;Un++){const or=Pn[Un]=Bn?cloneIfMounted(Pn[Un]):normalizeVNode(Pn[Un]);Jt(null,or,nn,fn,cn,Nn,On,cr,Bn)}},kn=(Pn,nn,fn,cn,Nn,On,cr)=>{const Bn=nn.el=Pn.el;let{patchFlag:Qn,dynamicChildren:Un,dirs:or}=nn;Qn|=Pn.patchFlag&16;const hr=Pn.props||EMPTY_OBJ,kr=nn.props||EMPTY_OBJ;let xr;fn&&toggleRecurse(fn,!1),(xr=kr.onVnodeBeforeUpdate)&&invokeVNodeHook(xr,fn,nn,Pn),or&&invokeDirectiveHook(nn,Pn,fn,"beforeUpdate"),fn&&toggleRecurse(fn,!0);const br=Nn&&nn.type!=="foreignObject";if(Un?In(Pn.dynamicChildren,Un,Bn,fn,cn,br,On):cr||Tr(Pn,nn,Bn,null,fn,cn,br,On,!1),Qn>0){if(Qn&16)Ln(Bn,nn,hr,kr,fn,cn,Nn);else if(Qn&2&&hr.class!==kr.class&&wt(Bn,"class",null,kr.class,Nn),Qn&4&&wt(Bn,"style",hr.style,kr.style,Nn),Qn&8){const hi=nn.dynamicProps;for(let di=0;di<hi.length;di++){const vi=hi[di],Ti=hr[vi],ki=kr[vi];(ki!==Ti||vi==="value")&&wt(Bn,vi,Ti,ki,Nn,Pn.children,fn,cn,lr)}}Qn&1&&Pn.children!==nn.children&&Rt(Bn,nn.children)}else!cr&&Un==null&&Ln(Bn,nn,hr,kr,fn,cn,Nn);((xr=kr.onVnodeUpdated)||or)&&queuePostRenderEffect(()=>{xr&&invokeVNodeHook(xr,fn,nn,Pn),or&&invokeDirectiveHook(nn,Pn,fn,"updated")},cn)},In=(Pn,nn,fn,cn,Nn,On,cr)=>{for(let Bn=0;Bn<nn.length;Bn++){const Qn=Pn[Bn],Un=nn[Bn],or=Qn.el&&(Qn.type===Fragment||!isSameVNodeType(Qn,Un)||Qn.shapeFlag&70)?Dt(Qn.el):fn;Jt(Qn,Un,or,null,cn,Nn,On,cr,!0)}},Ln=(Pn,nn,fn,cn,Nn,On,cr)=>{if(fn!==cn){if(fn!==EMPTY_OBJ)for(const Bn in fn)!isReservedProp(Bn)&&!(Bn in cn)&&wt(Pn,Bn,fn[Bn],null,cr,nn.children,Nn,On,lr);for(const Bn in cn){if(isReservedProp(Bn))continue;const Qn=cn[Bn],Un=fn[Bn];Qn!==Un&&Bn!=="value"&&wt(Pn,Bn,Un,Qn,cr,nn.children,Nn,On,lr)}"value"in cn&&wt(Pn,"value",fn.value,cn.value)}},pn=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn)=>{const Un=nn.el=Pn?Pn.el:kt(""),or=nn.anchor=Pn?Pn.anchor:kt("");let{patchFlag:hr,dynamicChildren:kr,slotScopeIds:xr}=nn;xr&&(Bn=Bn?Bn.concat(xr):xr),Pn==null?(st(Un,fn,cn),st(or,fn,cn),Tn(nn.children,fn,or,Nn,On,cr,Bn,Qn)):hr>0&&hr&64&&kr&&Pn.dynamicChildren?(In(Pn.dynamicChildren,kr,fn,Nn,On,cr,Bn),(nn.key!=null||Nn&&nn===Nn.subTree)&&traverseStaticChildren(Pn,nn,!0)):Tr(Pn,nn,fn,or,Nn,On,cr,Bn,Qn)},Hn=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn)=>{nn.slotScopeIds=Bn,Pn==null?nn.shapeFlag&512?Nn.ctx.activate(nn,fn,cn,cr,Qn):yn(nn,fn,cn,Nn,On,cr,Qn):mr(Pn,nn,Qn)},yn=(Pn,nn,fn,cn,Nn,On,cr)=>{const Bn=Pn.component=createComponentInstance(Pn,cn,Nn);if(isKeepAlive(Pn)&&(Bn.ctx.renderer=pr),setupComponent(Bn),Bn.asyncDep){if(Nn&&Nn.registerDep(Bn,vn),!Pn.el){const Qn=Bn.subTree=createVNode(Comment);Qt(null,Qn,nn,fn)}return}vn(Bn,Pn,nn,fn,Nn,On,cr)},mr=(Pn,nn,fn)=>{const cn=nn.component=Pn.component;if(shouldUpdateComponent(Pn,nn,fn))if(cn.asyncDep&&!cn.asyncResolved){yr(cn,nn,fn);return}else cn.next=nn,invalidateJob(cn.update),cn.update();else nn.el=Pn.el,cn.vnode=nn},vn=(Pn,nn,fn,cn,Nn,On,cr)=>{const Bn=()=>{if(Pn.isMounted){let{next:or,bu:hr,u:kr,parent:xr,vnode:br}=Pn,hi=or,di;toggleRecurse(Pn,!1),or?(or.el=br.el,yr(Pn,or,cr)):or=br,hr&&invokeArrayFns(hr),(di=or.props&&or.props.onVnodeBeforeUpdate)&&invokeVNodeHook(di,xr,or,br),toggleRecurse(Pn,!0);const vi=renderComponentRoot(Pn),Ti=Pn.subTree;Pn.subTree=vi,Jt(Ti,vi,Dt(Ti.el),qr(Ti),Pn,Nn,On),or.el=vi.el,hi===null&&updateHOCHostEl(Pn,vi.el),kr&&queuePostRenderEffect(kr,Nn),(di=or.props&&or.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(di,xr,or,br),Nn)}else{let or;const{el:hr,props:kr}=nn,{bm:xr,m:br,parent:hi}=Pn,di=isAsyncWrapper(nn);if(toggleRecurse(Pn,!1),xr&&invokeArrayFns(xr),!di&&(or=kr&&kr.onVnodeBeforeMount)&&invokeVNodeHook(or,hi,nn),toggleRecurse(Pn,!0),hr&&ir){const vi=()=>{Pn.subTree=renderComponentRoot(Pn),ir(hr,Pn.subTree,Pn,Nn,null)};di?nn.type.__asyncLoader().then(()=>!Pn.isUnmounted&&vi()):vi()}else{const vi=Pn.subTree=renderComponentRoot(Pn);Jt(null,vi,fn,cn,Pn,Nn,On),nn.el=vi.el}if(br&&queuePostRenderEffect(br,Nn),!di&&(or=kr&&kr.onVnodeMounted)){const vi=nn;queuePostRenderEffect(()=>invokeVNodeHook(or,hi,vi),Nn)}(nn.shapeFlag&256||hi&&isAsyncWrapper(hi.vnode)&&hi.vnode.shapeFlag&256)&&Pn.a&&queuePostRenderEffect(Pn.a,Nn),Pn.isMounted=!0,nn=fn=cn=null}},Qn=Pn.effect=new ReactiveEffect(Bn,()=>queueJob(Un),Pn.scope),Un=Pn.update=()=>Qn.run();Un.id=Pn.uid,toggleRecurse(Pn,!0),Un()},yr=(Pn,nn,fn)=>{nn.component=Pn;const cn=Pn.vnode.props;Pn.vnode=nn,Pn.next=null,updateProps(Pn,nn.props,cn,fn),updateSlots(Pn,nn.children,fn),pauseTracking(),flushPreFlushCbs(),resetTracking()},Tr=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn=!1)=>{const Un=Pn&&Pn.children,or=Pn?Pn.shapeFlag:0,hr=nn.children,{patchFlag:kr,shapeFlag:xr}=nn;if(kr>0){if(kr&128){rr(Un,hr,fn,cn,Nn,On,cr,Bn,Qn);return}else if(kr&256){Mr(Un,hr,fn,cn,Nn,On,cr,Bn,Qn);return}}xr&8?(or&16&&lr(Un,Nn,On),hr!==Un&&Rt(fn,hr)):or&16?xr&16?rr(Un,hr,fn,cn,Nn,On,cr,Bn,Qn):lr(Un,Nn,On,!0):(or&8&&Rt(fn,""),xr&16&&Tn(hr,fn,cn,Nn,On,cr,Bn,Qn))},Mr=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn)=>{Pn=Pn||EMPTY_ARR,nn=nn||EMPTY_ARR;const Un=Pn.length,or=nn.length,hr=Math.min(Un,or);let kr;for(kr=0;kr<hr;kr++){const xr=nn[kr]=Qn?cloneIfMounted(nn[kr]):normalizeVNode(nn[kr]);Jt(Pn[kr],xr,fn,null,Nn,On,cr,Bn,Qn)}Un>or?lr(Pn,Nn,On,!0,!1,hr):Tn(nn,fn,cn,Nn,On,cr,Bn,Qn,hr)},rr=(Pn,nn,fn,cn,Nn,On,cr,Bn,Qn)=>{let Un=0;const or=nn.length;let hr=Pn.length-1,kr=or-1;for(;Un<=hr&&Un<=kr;){const xr=Pn[Un],br=nn[Un]=Qn?cloneIfMounted(nn[Un]):normalizeVNode(nn[Un]);if(isSameVNodeType(xr,br))Jt(xr,br,fn,null,Nn,On,cr,Bn,Qn);else break;Un++}for(;Un<=hr&&Un<=kr;){const xr=Pn[hr],br=nn[kr]=Qn?cloneIfMounted(nn[kr]):normalizeVNode(nn[kr]);if(isSameVNodeType(xr,br))Jt(xr,br,fn,null,Nn,On,cr,Bn,Qn);else break;hr--,kr--}if(Un>hr){if(Un<=kr){const xr=kr+1,br=xr<or?nn[xr].el:cn;for(;Un<=kr;)Jt(null,nn[Un]=Qn?cloneIfMounted(nn[Un]):normalizeVNode(nn[Un]),fn,br,Nn,On,cr,Bn,Qn),Un++}}else if(Un>kr)for(;Un<=hr;)fr(Pn[Un],Nn,On,!0),Un++;else{const xr=Un,br=Un,hi=new Map;for(Un=br;Un<=kr;Un++){const An=nn[Un]=Qn?cloneIfMounted(nn[Un]):normalizeVNode(nn[Un]);An.key!=null&&hi.set(An.key,Un)}let di,vi=0;const Ti=kr-br+1;let ki=!1,Di=0;const Ci=new Array(Ti);for(Un=0;Un<Ti;Un++)Ci[Un]=0;for(Un=xr;Un<=hr;Un++){const An=Pn[Un];if(vi>=Ti){fr(An,Nn,On,!0);continue}let Sn;if(An.key!=null)Sn=hi.get(An.key);else for(di=br;di<=kr;di++)if(Ci[di-br]===0&&isSameVNodeType(An,nn[di])){Sn=di;break}Sn===void 0?fr(An,Nn,On,!0):(Ci[Sn-br]=Un+1,Sn>=Di?Di=Sn:ki=!0,Jt(An,nn[Sn],fn,null,Nn,On,cr,Bn,Qn),vi++)}const $r=ki?getSequence(Ci):EMPTY_ARR;for(di=$r.length-1,Un=Ti-1;Un>=0;Un--){const An=br+Un,Sn=nn[An],Wn=An+1<or?nn[An+1].el:cn;Ci[Un]===0?Jt(null,Sn,fn,Wn,Nn,On,cr,Bn,Qn):ki&&(di<0||Un!==$r[di]?wr(Sn,fn,Wn,2):di--)}}},wr=(Pn,nn,fn,cn,Nn=null)=>{const{el:On,type:cr,transition:Bn,children:Qn,shapeFlag:Un}=Pn;if(Un&6){wr(Pn.component.subTree,nn,fn,cn);return}if(Un&128){Pn.suspense.move(nn,fn,cn);return}if(Un&64){cr.move(Pn,nn,fn,pr);return}if(cr===Fragment){st(On,nn,fn);for(let hr=0;hr<Qn.length;hr++)wr(Qn[hr],nn,fn,cn);st(Pn.anchor,nn,fn);return}if(cr===Static){sn(Pn,nn,fn);return}if(cn!==2&&Un&1&&Bn)if(cn===0)Bn.beforeEnter(On),st(On,nn,fn),queuePostRenderEffect(()=>Bn.enter(On),Nn);else{const{leave:hr,delayLeave:kr,afterLeave:xr}=Bn,br=()=>st(On,nn,fn),hi=()=>{hr(On,()=>{br(),xr&&xr()})};kr?kr(On,br,hi):hi()}else st(On,nn,fn)},fr=(Pn,nn,fn,cn=!1,Nn=!1)=>{const{type:On,props:cr,ref:Bn,children:Qn,dynamicChildren:Un,shapeFlag:or,patchFlag:hr,dirs:kr}=Pn;if(Bn!=null&&setRef(Bn,null,fn,Pn,!0),or&256){nn.ctx.deactivate(Pn);return}const xr=or&1&&kr,br=!isAsyncWrapper(Pn);let hi;if(br&&(hi=cr&&cr.onVnodeBeforeUnmount)&&invokeVNodeHook(hi,nn,Pn),or&6)Pr(Pn.component,fn,cn);else{if(or&128){Pn.suspense.unmount(fn,cn);return}xr&&invokeDirectiveHook(Pn,null,nn,"beforeUnmount"),or&64?Pn.type.remove(Pn,nn,fn,Nn,pr,cn):Un&&(On!==Fragment||hr>0&&hr&64)?lr(Un,nn,fn,!1,!0):(On===Fragment&&hr&384||!Nn&&or&16)&&lr(Qn,nn,fn),cn&&gr(Pn)}(br&&(hi=cr&&cr.onVnodeUnmounted)||xr)&&queuePostRenderEffect(()=>{hi&&invokeVNodeHook(hi,nn,Pn),xr&&invokeDirectiveHook(Pn,null,nn,"unmounted")},fn)},gr=Pn=>{const{type:nn,el:fn,anchor:cn,transition:Nn}=Pn;if(nn===Fragment){Lr(fn,cn);return}if(nn===Static){on(Pn);return}const On=()=>{bt(fn),Nn&&!Nn.persisted&&Nn.afterLeave&&Nn.afterLeave()};if(Pn.shapeFlag&1&&Nn&&!Nn.persisted){const{leave:cr,delayLeave:Bn}=Nn,Qn=()=>cr(fn,On);Bn?Bn(Pn.el,On,Qn):Qn()}else On()},Lr=(Pn,nn)=>{let fn;for(;Pn!==nn;)fn=Bt(Pn),bt(Pn),Pn=fn;bt(nn)},Pr=(Pn,nn,fn)=>{const{bum:cn,scope:Nn,update:On,subTree:cr,um:Bn}=Pn;cn&&invokeArrayFns(cn),Nn.stop(),On&&(On.active=!1,fr(cr,Pn,nn,fn)),Bn&&queuePostRenderEffect(Bn,nn),queuePostRenderEffect(()=>{Pn.isUnmounted=!0},nn),nn&&nn.pendingBranch&&!nn.isUnmounted&&Pn.asyncDep&&!Pn.asyncResolved&&Pn.suspenseId===nn.pendingId&&(nn.deps--,nn.deps===0&&nn.resolve())},lr=(Pn,nn,fn,cn=!1,Nn=!1,On=0)=>{for(let cr=On;cr<Pn.length;cr++)fr(Pn[cr],nn,fn,cn,Nn)},qr=Pn=>Pn.shapeFlag&6?qr(Pn.component.subTree):Pn.shapeFlag&128?Pn.suspense.next():Bt(Pn.anchor||Pn.el),sr=(Pn,nn,fn)=>{Pn==null?nn._vnode&&fr(nn._vnode,null,null,!0):Jt(nn._vnode||null,Pn,nn,null,null,null,fn),flushPreFlushCbs(),flushPostFlushCbs(),nn._vnode=Pn},pr={p:Jt,um:fr,m:wr,r:gr,mt:yn,mc:Tn,pc:Tr,pbc:In,n:qr,o:nt};let Er,ir;return rt&&([Er,ir]=rt(pr)),{render:sr,hydrate:Er,createApp:createAppAPI(sr,Er)}}function toggleRecurse({effect:nt,update:rt},it){nt.allowRecurse=rt.allowRecurse=it}function traverseStaticChildren(nt,rt,it=!1){const st=nt.children,bt=rt.children;if(isArray$2(st)&&isArray$2(bt))for(let wt=0;wt<st.length;wt++){const Et=st[wt];let kt=bt[wt];kt.shapeFlag&1&&!kt.dynamicChildren&&((kt.patchFlag<=0||kt.patchFlag===32)&&(kt=bt[wt]=cloneIfMounted(bt[wt]),kt.el=Et.el),it||traverseStaticChildren(Et,kt)),kt.type===Text&&(kt.el=Et.el)}}function getSequence(nt){const rt=nt.slice(),it=[0];let st,bt,wt,Et,kt;const Lt=nt.length;for(st=0;st<Lt;st++){const Ot=nt[st];if(Ot!==0){if(bt=it[it.length-1],nt[bt]<Ot){rt[st]=bt,it.push(st);continue}for(wt=0,Et=it.length-1;wt<Et;)kt=wt+Et>>1,nt[it[kt]]<Ot?wt=kt+1:Et=kt;Ot<nt[it[wt]]&&(wt>0&&(rt[st]=it[wt-1]),it[wt]=st)}}for(wt=it.length,Et=it[wt-1];wt-- >0;)it[wt]=Et,Et=rt[Et];return it}const isTeleport=nt=>nt.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(nt=!1){blockStack.push(currentBlock=nt?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(nt){isBlockTreeEnabled+=nt}function setupBlock(nt){return nt.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(nt),nt}function createElementBlock(nt,rt,it,st,bt,wt){return setupBlock(createBaseVNode(nt,rt,it,st,bt,wt,!0))}function createBlock(nt,rt,it,st,bt){return setupBlock(createVNode(nt,rt,it,st,bt,!0))}function isVNode(nt){return nt?nt.__v_isVNode===!0:!1}function isSameVNodeType(nt,rt){return nt.type===rt.type&&nt.key===rt.key}const InternalObjectKey="__vInternal",normalizeKey=({key:nt})=>nt!=null?nt:null,normalizeRef=({ref:nt,ref_key:rt,ref_for:it})=>nt!=null?isString(nt)||isRef(nt)||isFunction$1(nt)?{i:currentRenderingInstance,r:nt,k:rt,f:!!it}:nt:null;function createBaseVNode(nt,rt=null,it=null,st=0,bt=null,wt=nt===Fragment?0:1,Et=!1,kt=!1){const Lt={__v_isVNode:!0,__v_skip:!0,type:nt,props:rt,key:rt&&normalizeKey(rt),ref:rt&&normalizeRef(rt),scopeId:currentScopeId,slotScopeIds:null,children:it,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:wt,patchFlag:st,dynamicProps:bt,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return kt?(normalizeChildren(Lt,it),wt&128&&nt.normalize(Lt)):it&&(Lt.shapeFlag|=isString(it)?8:16),isBlockTreeEnabled>0&&!Et&&currentBlock&&(Lt.patchFlag>0||wt&6)&&Lt.patchFlag!==32&&currentBlock.push(Lt),Lt}const createVNode=_createVNode;function _createVNode(nt,rt=null,it=null,st=0,bt=null,wt=!1){if((!nt||nt===NULL_DYNAMIC_COMPONENT)&&(nt=Comment),isVNode(nt)){const kt=cloneVNode(nt,rt,!0);return it&&normalizeChildren(kt,it),isBlockTreeEnabled>0&&!wt&&currentBlock&&(kt.shapeFlag&6?currentBlock[currentBlock.indexOf(nt)]=kt:currentBlock.push(kt)),kt.patchFlag|=-2,kt}if(isClassComponent(nt)&&(nt=nt.__vccOpts),rt){rt=guardReactiveProps(rt);let{class:kt,style:Lt}=rt;kt&&!isString(kt)&&(rt.class=normalizeClass(kt)),isObject$3(Lt)&&(isProxy(Lt)&&!isArray$2(Lt)&&(Lt=extend$3({},Lt)),rt.style=normalizeStyle(Lt))}const Et=isString(nt)?1:isSuspense(nt)?128:isTeleport(nt)?64:isObject$3(nt)?4:isFunction$1(nt)?2:0;return createBaseVNode(nt,rt,it,st,bt,Et,wt,!0)}function guardReactiveProps(nt){return nt?isProxy(nt)||InternalObjectKey in nt?extend$3({},nt):nt:null}function cloneVNode(nt,rt,it=!1){const{props:st,ref:bt,patchFlag:wt,children:Et}=nt,kt=rt?mergeProps(st||{},rt):st;return{__v_isVNode:!0,__v_skip:!0,type:nt.type,props:kt,key:kt&&normalizeKey(kt),ref:rt&&rt.ref?it&&bt?isArray$2(bt)?bt.concat(normalizeRef(rt)):[bt,normalizeRef(rt)]:normalizeRef(rt):bt,scopeId:nt.scopeId,slotScopeIds:nt.slotScopeIds,children:Et,target:nt.target,targetAnchor:nt.targetAnchor,staticCount:nt.staticCount,shapeFlag:nt.shapeFlag,patchFlag:rt&&nt.type!==Fragment?wt===-1?16:wt|16:wt,dynamicProps:nt.dynamicProps,dynamicChildren:nt.dynamicChildren,appContext:nt.appContext,dirs:nt.dirs,transition:nt.transition,component:nt.component,suspense:nt.suspense,ssContent:nt.ssContent&&cloneVNode(nt.ssContent),ssFallback:nt.ssFallback&&cloneVNode(nt.ssFallback),el:nt.el,anchor:nt.anchor,ctx:nt.ctx}}function createTextVNode(nt=" ",rt=0){return createVNode(Text,null,nt,rt)}function createCommentVNode(nt="",rt=!1){return rt?(openBlock(),createBlock(Comment,null,nt)):createVNode(Comment,null,nt)}function normalizeVNode(nt){return nt==null||typeof nt=="boolean"?createVNode(Comment):isArray$2(nt)?createVNode(Fragment,null,nt.slice()):typeof nt=="object"?cloneIfMounted(nt):createVNode(Text,null,String(nt))}function cloneIfMounted(nt){return nt.el===null&&nt.patchFlag!==-1||nt.memo?nt:cloneVNode(nt)}function normalizeChildren(nt,rt){let it=0;const{shapeFlag:st}=nt;if(rt==null)rt=null;else if(isArray$2(rt))it=16;else if(typeof rt=="object")if(st&65){const bt=rt.default;bt&&(bt._c&&(bt._d=!1),normalizeChildren(nt,bt()),bt._c&&(bt._d=!0));return}else{it=32;const bt=rt._;!bt&&!(InternalObjectKey in rt)?rt._ctx=currentRenderingInstance:bt===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?rt._=1:(rt._=2,nt.patchFlag|=1024))}else isFunction$1(rt)?(rt={default:rt,_ctx:currentRenderingInstance},it=32):(rt=String(rt),st&64?(it=16,rt=[createTextVNode(rt)]):it=8);nt.children=rt,nt.shapeFlag|=it}function mergeProps(...nt){const rt={};for(let it=0;it<nt.length;it++){const st=nt[it];for(const bt in st)if(bt==="class")rt.class!==st.class&&(rt.class=normalizeClass([rt.class,st.class]));else if(bt==="style")rt.style=normalizeStyle([rt.style,st.style]);else if(isOn(bt)){const wt=rt[bt],Et=st[bt];Et&&wt!==Et&&!(isArray$2(wt)&&wt.includes(Et))&&(rt[bt]=wt?[].concat(wt,Et):Et)}else bt!==""&&(rt[bt]=st[bt])}return rt}function invokeVNodeHook(nt,rt,it,st=null){callWithAsyncErrorHandling(nt,rt,7,[it,st])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(nt,rt,it){const st=nt.type,bt=(rt?rt.appContext:nt.appContext)||emptyAppContext,wt={uid:uid$1++,vnode:nt,type:st,parent:rt,appContext:bt,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:rt?rt.provides:Object.create(bt.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(st,bt),emitsOptions:normalizeEmitsOptions(st,bt),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:st.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:it,suspenseId:it?it.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return wt.ctx={_:wt},wt.root=rt?rt.root:wt,wt.emit=emit$1.bind(null,wt),nt.ce&&nt.ce(wt),wt}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=nt=>{currentInstance=nt,nt.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(nt){return nt.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(nt,rt=!1){isInSSRComponentSetup=rt;const{props:it,children:st}=nt.vnode,bt=isStatefulComponent(nt);initProps(nt,it,bt,rt),initSlots(nt,st);const wt=bt?setupStatefulComponent(nt,rt):void 0;return isInSSRComponentSetup=!1,wt}function setupStatefulComponent(nt,rt){const it=nt.type;nt.accessCache=Object.create(null),nt.proxy=markRaw(new Proxy(nt.ctx,PublicInstanceProxyHandlers));const{setup:st}=it;if(st){const bt=nt.setupContext=st.length>1?createSetupContext(nt):null;setCurrentInstance(nt),pauseTracking();const wt=callWithErrorHandling(st,nt,0,[nt.props,bt]);if(resetTracking(),unsetCurrentInstance(),isPromise(wt)){if(wt.then(unsetCurrentInstance,unsetCurrentInstance),rt)return wt.then(Et=>{handleSetupResult(nt,Et,rt)}).catch(Et=>{handleError$1(Et,nt,0)});nt.asyncDep=wt}else handleSetupResult(nt,wt,rt)}else finishComponentSetup(nt,rt)}function handleSetupResult(nt,rt,it){isFunction$1(rt)?nt.type.__ssrInlineRender?nt.ssrRender=rt:nt.render=rt:isObject$3(rt)&&(nt.setupState=proxyRefs(rt)),finishComponentSetup(nt,it)}let compile$1;function finishComponentSetup(nt,rt,it){const st=nt.type;if(!nt.render){if(!rt&&compile$1&&!st.render){const bt=st.template||resolveMergedOptions(nt).template;if(bt){const{isCustomElement:wt,compilerOptions:Et}=nt.appContext.config,{delimiters:kt,compilerOptions:Lt}=st,Ot=extend$3(extend$3({isCustomElement:wt,delimiters:kt},Et),Lt);st.render=compile$1(bt,Ot)}}nt.render=st.render||NOOP}setCurrentInstance(nt),pauseTracking(),applyOptions(nt),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(nt){return new Proxy(nt.attrs,{get(rt,it){return track(nt,"get","$attrs"),rt[it]}})}function createSetupContext(nt){const rt=st=>{nt.exposed=st||{}};let it;return{get attrs(){return it||(it=createAttrsProxy(nt))},slots:nt.slots,emit:nt.emit,expose:rt}}function getExposeProxy(nt){if(nt.exposed)return nt.exposeProxy||(nt.exposeProxy=new Proxy(proxyRefs(markRaw(nt.exposed)),{get(rt,it){if(it in rt)return rt[it];if(it in publicPropertiesMap)return publicPropertiesMap[it](nt)},has(rt,it){return it in rt||it in publicPropertiesMap}}))}function isClassComponent(nt){return isFunction$1(nt)&&"__vccOpts"in nt}const computed=(nt,rt)=>computed$1(nt,rt,isInSSRComponentSetup),ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version$2="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(nt,rt,it)=>{rt.insertBefore(nt,it||null)},remove:nt=>{const rt=nt.parentNode;rt&&rt.removeChild(nt)},createElement:(nt,rt,it,st)=>{const bt=rt?doc.createElementNS(svgNS,nt):doc.createElement(nt,it?{is:it}:void 0);return nt==="select"&&st&&st.multiple!=null&&bt.setAttribute("multiple",st.multiple),bt},createText:nt=>doc.createTextNode(nt),createComment:nt=>doc.createComment(nt),setText:(nt,rt)=>{nt.nodeValue=rt},setElementText:(nt,rt)=>{nt.textContent=rt},parentNode:nt=>nt.parentNode,nextSibling:nt=>nt.nextSibling,querySelector:nt=>doc.querySelector(nt),setScopeId(nt,rt){nt.setAttribute(rt,"")},insertStaticContent(nt,rt,it,st,bt,wt){const Et=it?it.previousSibling:rt.lastChild;if(bt&&(bt===wt||bt.nextSibling))for(;rt.insertBefore(bt.cloneNode(!0),it),!(bt===wt||!(bt=bt.nextSibling)););else{templateContainer.innerHTML=st?`<svg>${nt}</svg>`:nt;const kt=templateContainer.content;if(st){const Lt=kt.firstChild;for(;Lt.firstChild;)kt.appendChild(Lt.firstChild);kt.removeChild(Lt)}rt.insertBefore(kt,it)}return[Et?Et.nextSibling:rt.firstChild,it?it.previousSibling:rt.lastChild]}};function patchClass(nt,rt,it){const st=nt._vtc;st&&(rt=(rt?[rt,...st]:[...st]).join(" ")),rt==null?nt.removeAttribute("class"):it?nt.setAttribute("class",rt):nt.className=rt}function patchStyle(nt,rt,it){const st=nt.style,bt=isString(it);if(it&&!bt){for(const wt in it)setStyle$1(st,wt,it[wt]);if(rt&&!isString(rt))for(const wt in rt)it[wt]==null&&setStyle$1(st,wt,"")}else{const wt=st.display;bt?rt!==it&&(st.cssText=it):rt&&nt.removeAttribute("style"),"_vod"in nt&&(st.display=wt)}}const importantRE=/\s*!important$/;function setStyle$1(nt,rt,it){if(isArray$2(it))it.forEach(st=>setStyle$1(nt,rt,st));else if(it==null&&(it=""),rt.startsWith("--"))nt.setProperty(rt,it);else{const st=autoPrefix(nt,rt);importantRE.test(it)?nt.setProperty(hyphenate(st),it.replace(importantRE,""),"important"):nt[st]=it}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(nt,rt){const it=prefixCache[rt];if(it)return it;let st=camelize(rt);if(st!=="filter"&&st in nt)return prefixCache[rt]=st;st=capitalize(st);for(let bt=0;bt<prefixes$1.length;bt++){const wt=prefixes$1[bt]+st;if(wt in nt)return prefixCache[rt]=wt}return rt}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(nt,rt,it,st,bt){if(st&&rt.startsWith("xlink:"))it==null?nt.removeAttributeNS(xlinkNS,rt.slice(6,rt.length)):nt.setAttributeNS(xlinkNS,rt,it);else{const wt=isSpecialBooleanAttr(rt);it==null||wt&&!includeBooleanAttr(it)?nt.removeAttribute(rt):nt.setAttribute(rt,wt?"":it)}}function patchDOMProp(nt,rt,it,st,bt,wt,Et){if(rt==="innerHTML"||rt==="textContent"){st&&Et(st,bt,wt),nt[rt]=it==null?"":it;return}if(rt==="value"&&nt.tagName!=="PROGRESS"&&!nt.tagName.includes("-")){nt._value=it;const Lt=it==null?"":it;(nt.value!==Lt||nt.tagName==="OPTION")&&(nt.value=Lt),it==null&&nt.removeAttribute(rt);return}let kt=!1;if(it===""||it==null){const Lt=typeof nt[rt];Lt==="boolean"?it=includeBooleanAttr(it):it==null&&Lt==="string"?(it="",kt=!0):Lt==="number"&&(it=0,kt=!0)}try{nt[rt]=it}catch{}kt&&nt.removeAttribute(rt)}function addEventListener(nt,rt,it,st){nt.addEventListener(rt,it,st)}function removeEventListener(nt,rt,it,st){nt.removeEventListener(rt,it,st)}function patchEvent(nt,rt,it,st,bt=null){const wt=nt._vei||(nt._vei={}),Et=wt[rt];if(st&&Et)Et.value=st;else{const[kt,Lt]=parseName(rt);if(st){const Ot=wt[rt]=createInvoker(st,bt);addEventListener(nt,kt,Ot,Lt)}else Et&&(removeEventListener(nt,kt,Et,Lt),wt[rt]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(nt){let rt;if(optionsModifierRE.test(nt)){rt={};let st;for(;st=nt.match(optionsModifierRE);)nt=nt.slice(0,nt.length-st[0].length),rt[st[0].toLowerCase()]=!0}return[nt[2]===":"?nt.slice(3):hyphenate(nt.slice(2)),rt]}let cachedNow=0;const p$3=Promise.resolve(),getNow=()=>cachedNow||(p$3.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(nt,rt){const it=st=>{if(!st._vts)st._vts=Date.now();else if(st._vts<=it.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(st,it.value),rt,5,[st])};return it.value=nt,it.attached=getNow(),it}function patchStopImmediatePropagation(nt,rt){if(isArray$2(rt)){const it=nt.stopImmediatePropagation;return nt.stopImmediatePropagation=()=>{it.call(nt),nt._stopped=!0},rt.map(st=>bt=>!bt._stopped&&st&&st(bt))}else return rt}const nativeOnRE=/^on[a-z]/,patchProp=(nt,rt,it,st,bt=!1,wt,Et,kt,Lt)=>{rt==="class"?patchClass(nt,st,bt):rt==="style"?patchStyle(nt,it,st):isOn(rt)?isModelListener(rt)||patchEvent(nt,rt,it,st,Et):(rt[0]==="."?(rt=rt.slice(1),!0):rt[0]==="^"?(rt=rt.slice(1),!1):shouldSetAsProp(nt,rt,st,bt))?patchDOMProp(nt,rt,st,wt,Et,kt,Lt):(rt==="true-value"?nt._trueValue=st:rt==="false-value"&&(nt._falseValue=st),patchAttr(nt,rt,st,bt))};function shouldSetAsProp(nt,rt,it,st){return st?!!(rt==="innerHTML"||rt==="textContent"||rt in nt&&nativeOnRE.test(rt)&&isFunction$1(it)):rt==="spellcheck"||rt==="draggable"||rt==="translate"||rt==="form"||rt==="list"&&nt.tagName==="INPUT"||rt==="type"&&nt.tagName==="TEXTAREA"||nativeOnRE.test(rt)&&isString(it)?!1:rt in nt}function defineCustomElement(nt,rt){const it=defineComponent(nt);class st extends VueElement{constructor(wt){super(it,wt,rt)}}return st.def=it,st}const BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(rt,it={},st){super(),this._def=rt,this._props=it,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&st?st(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render$4(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let st=0;st<this.attributes.length;st++)this._setAttr(this.attributes[st].name);new MutationObserver(st=>{for(const bt of st)this._setAttr(bt.attributeName)}).observe(this,{attributes:!0});const rt=(st,bt=!1)=>{const{props:wt,styles:Et}=st;let kt;if(wt&&!isArray$2(wt))for(const Lt in wt){const Ot=wt[Lt];(Ot===Number||Ot&&Ot.type===Number)&&(Lt in this._props&&(this._props[Lt]=toNumber$1(this._props[Lt])),(kt||(kt=Object.create(null)))[camelize(Lt)]=!0)}this._numberProps=kt,bt&&this._resolveProps(st),this._applyStyles(Et),this._update()},it=this._def.__asyncLoader;it?it().then(st=>rt(st,!0)):rt(this._def)}_resolveProps(rt){const{props:it}=rt,st=isArray$2(it)?it:Object.keys(it||{});for(const bt of Object.keys(this))bt[0]!=="_"&&st.includes(bt)&&this._setProp(bt,this[bt],!0,!1);for(const bt of st.map(camelize))Object.defineProperty(this,bt,{get(){return this._getProp(bt)},set(wt){this._setProp(bt,wt)}})}_setAttr(rt){let it=this.getAttribute(rt);const st=camelize(rt);this._numberProps&&this._numberProps[st]&&(it=toNumber$1(it)),this._setProp(st,it,!1)}_getProp(rt){return this._props[rt]}_setProp(rt,it,st=!0,bt=!0){it!==this._props[rt]&&(this._props[rt]=it,bt&&this._instance&&this._update(),st&&(it===!0?this.setAttribute(hyphenate(rt),""):typeof it=="string"||typeof it=="number"?this.setAttribute(hyphenate(rt),it+""):it||this.removeAttribute(hyphenate(rt))))}_update(){render$4(this._createVNode(),this.shadowRoot)}_createVNode(){const rt=createVNode(this._def,extend$3({},this._props));return this._instance||(rt.ce=it=>{this._instance=it,it.isCE=!0;const st=(wt,Et)=>{this.dispatchEvent(new CustomEvent(wt,{detail:Et}))};it.emit=(wt,...Et)=>{st(wt,Et),hyphenate(wt)!==wt&&st(hyphenate(wt),Et)};let bt=this;for(;bt=bt&&(bt.parentNode||bt.host);)if(bt instanceof VueElement){it.parent=bt._instance,it.provides=bt._instance.provides;break}}),rt}_applyStyles(rt){rt&&rt.forEach(it=>{const st=document.createElement("style");st.textContent=it,this.shadowRoot.appendChild(st)})}}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:nt=>nt.stopPropagation(),prevent:nt=>nt.preventDefault(),self:nt=>nt.target!==nt.currentTarget,ctrl:nt=>!nt.ctrlKey,shift:nt=>!nt.shiftKey,alt:nt=>!nt.altKey,meta:nt=>!nt.metaKey,left:nt=>"button"in nt&&nt.button!==0,middle:nt=>"button"in nt&&nt.button!==1,right:nt=>"button"in nt&&nt.button!==2,exact:(nt,rt)=>systemModifiers.some(it=>nt[`${it}Key`]&&!rt.includes(it))},withModifiers=(nt,rt)=>(it,...st)=>{for(let bt=0;bt<rt.length;bt++){const wt=modifierGuards[rt[bt]];if(wt&&wt(it,rt))return}return nt(it,...st)},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$4=(...nt)=>{ensureRenderer().render(...nt)},light="";var basePath="";function setBasePath(nt){basePath=nt}function getBasePath(){if(!basePath){const nt=[...document.getElementsByTagName("script")],rt=nt.find(it=>it.hasAttribute("data-shoelace"));if(rt)setBasePath(rt.getAttribute("data-shoelace"));else{const it=nt.find(bt=>/shoelace(\.min)?\.js($|\?)/.test(bt.src));let st="";it&&(st=it.getAttribute("src")),setBasePath(st.split("/").slice(0,-1).join("/"))}}return basePath.replace(/\/$/,"")}var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(nt,rt,it)=>rt in nt?__defProp$1(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__spreadValues=(nt,rt)=>{for(var it in rt||(rt={}))__hasOwnProp.call(rt,it)&&__defNormalProp$1(nt,it,rt[it]);if(__getOwnPropSymbols)for(var it of __getOwnPropSymbols(rt))__propIsEnum.call(rt,it)&&__defNormalProp$1(nt,it,rt[it]);return nt},__spreadProps=(nt,rt)=>__defProps(nt,__getOwnPropDescs(rt)),__objRest=(nt,rt)=>{var it={};for(var st in nt)__hasOwnProp.call(nt,st)&&rt.indexOf(st)<0&&(it[st]=nt[st]);if(nt!=null&&__getOwnPropSymbols)for(var st of __getOwnPropSymbols(nt))rt.indexOf(st)<0&&__propIsEnum.call(nt,st)&&(it[st]=nt[st]);return it},__decorateClass=(nt,rt,it,st)=>{for(var bt=st>1?void 0:st?__getOwnPropDesc(rt,it):rt,wt=nt.length-1,Et;wt>=0;wt--)(Et=nt[wt])&&(bt=(st?Et(rt,it,bt):Et(bt))||bt);return st&&bt&&__defProp$1(rt,it,bt),bt};const scriptRel="modulepreload",assetsURL=function(nt){return"/"+nt},seen={},__vitePreload=function(rt,it,st){if(!it||it.length===0)return rt();const bt=document.getElementsByTagName("link");return Promise.all(it.map(wt=>{if(wt=assetsURL(wt),wt in seen)return;seen[wt]=!0;const Et=wt.endsWith(".css"),kt=Et?'[rel="stylesheet"]':"";if(!!st)for(let Rt=bt.length-1;Rt>=0;Rt--){const Dt=bt[Rt];if(Dt.href===wt&&(!Et||Dt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${wt}"]${kt}`))return;const Ot=document.createElement("link");if(Ot.rel=Et?"stylesheet":scriptRel,Et||(Ot.as="script",Ot.crossOrigin=""),Ot.href=wt,document.head.appendChild(Ot),Et)return new Promise((Rt,Dt)=>{Ot.addEventListener("load",Rt),Ot.addEventListener("error",()=>Dt(new Error(`Unable to preload CSS for ${wt}`)))})})).then(()=>rt())};var e$4=typeof self<"u"?self:global;const t$4=typeof navigator<"u",i$6=t$4&&typeof HTMLImageElement>"u",n$4=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),s$5=e$4.Buffer,r$2=e$4.BigInt,a$3=!!s$5,o$3=nt=>nt;function l$4(nt,rt=o$3){if(n$4)try{return typeof require=="function"?Promise.resolve(rt(require(nt))):__vitePreload(()=>import(nt),[]).then(rt)}catch{console.warn(`Couldn't load ${nt}`)}}let h$3=e$4.fetch;const u$2=nt=>h$3=nt;if(!e$4.fetch){const nt=l$4("http",st=>st),rt=l$4("https",st=>st),it=(st,{headers:bt}={})=>new Promise(async(wt,Et)=>{let{port:kt,hostname:Lt,pathname:Ot,protocol:Rt,search:Dt}=new URL(st);const Bt={method:"GET",hostname:Lt,path:encodeURI(Ot)+Dt,headers:bt};kt!==""&&(Bt.port=Number(kt));const Ft=(Rt==="https:"?await rt:await nt).request(Bt,Yt=>{if(Yt.statusCode===301||Yt.statusCode===302){let Jt=new URL(Yt.headers.location,st).toString();return it(Jt,{headers:bt}).then(wt).catch(Et)}wt({status:Yt.statusCode,arrayBuffer:()=>new Promise(Jt=>{let Wt=[];Yt.on("data",Qt=>Wt.push(Qt)),Yt.on("end",()=>Jt(Buffer.concat(Wt)))})})});Ft.on("error",Et),Ft.end()});u$2(it)}function c$3(nt,rt,it){return rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}const f$3=nt=>p$2(nt)?void 0:nt,d$3=nt=>nt!==void 0;function p$2(nt){return nt===void 0||(nt instanceof Map?nt.size===0:Object.values(nt).filter(d$3).length===0)}function g$2(nt){let rt=new Error(nt);throw delete rt.stack,rt}function m$3(nt){return(nt=function(rt){for(;rt.endsWith("\0");)rt=rt.slice(0,-1);return rt}(nt).trim())===""?void 0:nt}function S$1(nt){let rt=function(it){let st=0;return it.ifd0.enabled&&(st+=1024),it.exif.enabled&&(st+=2048),it.makerNote&&(st+=2048),it.userComment&&(st+=1024),it.gps.enabled&&(st+=512),it.interop.enabled&&(st+=100),it.ifd1.enabled&&(st+=1024),st+2048}(nt);return nt.jfif.enabled&&(rt+=50),nt.xmp.enabled&&(rt+=2e4),nt.iptc.enabled&&(rt+=14e3),nt.icc.enabled&&(rt+=6e3),rt}const C$2=nt=>String.fromCharCode.apply(null,nt),y$3=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function b$2(nt){return y$3?y$3.decode(nt):a$3?Buffer.from(nt).toString("utf8"):decodeURIComponent(escape(C$2(nt)))}class I$1{static from(rt,it){return rt instanceof this&&rt.le===it?rt:new I$1(rt,void 0,void 0,it)}constructor(rt,it=0,st,bt){if(typeof bt=="boolean"&&(this.le=bt),Array.isArray(rt)&&(rt=new Uint8Array(rt)),rt===0)this.byteOffset=0,this.byteLength=0;else if(rt instanceof ArrayBuffer){st===void 0&&(st=rt.byteLength-it);let wt=new DataView(rt,it,st);this._swapDataView(wt)}else if(rt instanceof Uint8Array||rt instanceof DataView||rt instanceof I$1){st===void 0&&(st=rt.byteLength-it),(it+=rt.byteOffset)+st>rt.byteOffset+rt.byteLength&&g$2("Creating view outside of available memory in ArrayBuffer");let wt=new DataView(rt.buffer,it,st);this._swapDataView(wt)}else if(typeof rt=="number"){let wt=new DataView(new ArrayBuffer(rt));this._swapDataView(wt)}else g$2("Invalid input argument for BufferView: "+rt)}_swapArrayBuffer(rt){this._swapDataView(new DataView(rt))}_swapBuffer(rt){this._swapDataView(new DataView(rt.buffer,rt.byteOffset,rt.byteLength))}_swapDataView(rt){this.dataView=rt,this.buffer=rt.buffer,this.byteOffset=rt.byteOffset,this.byteLength=rt.byteLength}_lengthToEnd(rt){return this.byteLength-rt}set(rt,it,st=I$1){return rt instanceof DataView||rt instanceof I$1?rt=new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength):rt instanceof ArrayBuffer&&(rt=new Uint8Array(rt)),rt instanceof Uint8Array||g$2("BufferView.set(): Invalid data argument."),this.toUint8().set(rt,it),new st(this,it,rt.byteLength)}subarray(rt,it){return it=it||this._lengthToEnd(rt),new I$1(this,rt,it)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(rt,it){return new Uint8Array(this.buffer,this.byteOffset+rt,it)}getString(rt=0,it=this.byteLength){return b$2(this.getUint8Array(rt,it))}getLatin1String(rt=0,it=this.byteLength){let st=this.getUint8Array(rt,it);return C$2(st)}getUnicodeString(rt=0,it=this.byteLength){const st=[];for(let bt=0;bt<it&&rt+bt<this.byteLength;bt+=2)st.push(this.getUint16(rt+bt));return C$2(st)}getInt8(rt){return this.dataView.getInt8(rt)}getUint8(rt){return this.dataView.getUint8(rt)}getInt16(rt,it=this.le){return this.dataView.getInt16(rt,it)}getInt32(rt,it=this.le){return this.dataView.getInt32(rt,it)}getUint16(rt,it=this.le){return this.dataView.getUint16(rt,it)}getUint32(rt,it=this.le){return this.dataView.getUint32(rt,it)}getFloat32(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getFloat64(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getFloat(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getDouble(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getUintBytes(rt,it,st){switch(it){case 1:return this.getUint8(rt,st);case 2:return this.getUint16(rt,st);case 4:return this.getUint32(rt,st);case 8:return this.getUint64&&this.getUint64(rt,st)}}getUint(rt,it,st){switch(it){case 8:return this.getUint8(rt,st);case 16:return this.getUint16(rt,st);case 32:return this.getUint32(rt,st);case 64:return this.getUint64&&this.getUint64(rt,st)}}toString(rt){return this.dataView.toString(rt,this.constructor.name)}ensureChunk(){}}function P$1(nt,rt){g$2(`${nt} '${rt}' was not loaded, try using full build of exifr.`)}class k$2 extends Map{constructor(rt){super(),this.kind=rt}get(rt,it){return this.has(rt)||P$1(this.kind,rt),it&&(rt in it||function(st,bt){g$2(`Unknown ${st} '${bt}'.`)}(this.kind,rt),it[rt].enabled||P$1(this.kind,rt)),super.get(rt)}keyList(){return Array.from(this.keys())}}var w$1=new k$2("file parser"),T$2=new k$2("segment parser"),A$2=new k$2("file reader");function D(nt,rt){return typeof nt=="string"?O$1(nt,rt):t$4&&!i$6&&nt instanceof HTMLImageElement?O$1(nt.src,rt):nt instanceof Uint8Array||nt instanceof ArrayBuffer||nt instanceof DataView?new I$1(nt):t$4&&nt instanceof Blob?x$3(nt,rt,"blob",R$2):void g$2("Invalid input argument")}function O$1(nt,rt){return(it=nt).startsWith("data:")||it.length>1e4?v$1(nt,rt,"base64"):n$4&&nt.includes("://")?x$3(nt,rt,"url",M$1):n$4?v$1(nt,rt,"fs"):t$4?x$3(nt,rt,"url",M$1):void g$2("Invalid input argument");var it}async function x$3(nt,rt,it,st){return A$2.has(it)?v$1(nt,rt,it):st?async function(bt,wt){let Et=await wt(bt);return new I$1(Et)}(nt,st):void g$2(`Parser ${it} is not loaded`)}async function v$1(nt,rt,it){let st=new(A$2.get(it))(nt,rt);return await st.read(),st}const M$1=nt=>h$3(nt).then(rt=>rt.arrayBuffer()),R$2=nt=>new Promise((rt,it)=>{let st=new FileReader;st.onloadend=()=>rt(st.result||new ArrayBuffer),st.onerror=it,st.readAsArrayBuffer(nt)});class L$3 extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function U(nt,rt,it){let st=new L$3;for(let[bt,wt]of it)st.set(bt,wt);if(Array.isArray(rt))for(let bt of rt)nt.set(bt,st);else nt.set(rt,st);return st}function F(nt,rt,it){let st,bt=nt.get(rt);for(st of it)bt.set(st[0],st[1])}const E$1=new Map,B=new Map,N$1=new Map,G=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],V$1=["jfif","xmp","icc","iptc","ihdr"],z$1=["tiff",...V$1],H$2=["ifd0","ifd1","exif","gps","interop"],j=[...z$1,...H$2],W$1=["makerNote","userComment"],K$1=["translateKeys","translateValues","reviveValues","multiSegment"],X=[...K$1,"sanitize","mergeOutput","silentErrors"];class _$2{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Y extends _$2{get needed(){return this.enabled||this.deps.size>0}constructor(rt,it,st,bt){if(super(),c$3(this,"enabled",!1),c$3(this,"skip",new Set),c$3(this,"pick",new Set),c$3(this,"deps",new Set),c$3(this,"translateKeys",!1),c$3(this,"translateValues",!1),c$3(this,"reviveValues",!1),this.key=rt,this.enabled=it,this.parse=this.enabled,this.applyInheritables(bt),this.canBeFiltered=H$2.includes(rt),this.canBeFiltered&&(this.dict=E$1.get(rt)),st!==void 0)if(Array.isArray(st))this.parse=this.enabled=!0,this.canBeFiltered&&st.length>0&&this.translateTagSet(st,this.pick);else if(typeof st=="object"){if(this.enabled=!0,this.parse=st.parse!==!1,this.canBeFiltered){let{pick:wt,skip:Et}=st;wt&&wt.length>0&&this.translateTagSet(wt,this.pick),Et&&Et.length>0&&this.translateTagSet(Et,this.skip)}this.applyInheritables(st)}else st===!0||st===!1?this.parse=this.enabled=st:g$2(`Invalid options argument: ${st}`)}applyInheritables(rt){let it,st;for(it of K$1)st=rt[it],st!==void 0&&(this[it]=st)}translateTagSet(rt,it){if(this.dict){let st,bt,{tagKeys:wt,tagValues:Et}=this.dict;for(st of rt)typeof st=="string"?(bt=Et.indexOf(st),bt===-1&&(bt=wt.indexOf(Number(st))),bt!==-1&&it.add(Number(wt[bt]))):it.add(st)}else for(let st of rt)it.add(st)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ee(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ee(this.pick,this.deps)}}var $$1={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},J=new Map;class q extends _$2{static useCached(rt){let it=J.get(rt);return it!==void 0||(it=new this(rt),J.set(rt,it)),it}constructor(rt){super(),rt===!0?this.setupFromTrue():rt===void 0?this.setupFromUndefined():Array.isArray(rt)?this.setupFromArray(rt):typeof rt=="object"?this.setupFromObject(rt):g$2(`Invalid options argument ${rt}`),this.firstChunkSize===void 0&&(this.firstChunkSize=t$4?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W$1)this[rt]=$$1[rt];for(rt of j)this[rt]=new Y(rt,$$1[rt],void 0,this)}setupFromTrue(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W$1)this[rt]=!0;for(rt of j)this[rt]=new Y(rt,!0,void 0,this)}setupFromArray(rt){let it;for(it of G)this[it]=$$1[it];for(it of X)this[it]=$$1[it];for(it of W$1)this[it]=$$1[it];for(it of j)this[it]=new Y(it,!1,void 0,this);this.setupGlobalFilters(rt,void 0,H$2)}setupFromObject(rt){let it;for(it of(H$2.ifd0=H$2.ifd0||H$2.image,H$2.ifd1=H$2.ifd1||H$2.thumbnail,Object.assign(this,rt),G))this[it]=Z$1(rt[it],$$1[it]);for(it of X)this[it]=Z$1(rt[it],$$1[it]);for(it of W$1)this[it]=Z$1(rt[it],$$1[it]);for(it of z$1)this[it]=new Y(it,$$1[it],rt[it],this);for(it of H$2)this[it]=new Y(it,$$1[it],rt[it],this.tiff);this.setupGlobalFilters(rt.pick,rt.skip,H$2,j),rt.tiff===!0?this.batchEnableWithBool(H$2,!0):rt.tiff===!1?this.batchEnableWithUserValue(H$2,rt):Array.isArray(rt.tiff)?this.setupGlobalFilters(rt.tiff,void 0,H$2):typeof rt.tiff=="object"&&this.setupGlobalFilters(rt.tiff.pick,rt.tiff.skip,H$2)}batchEnableWithBool(rt,it){for(let st of rt)this[st].enabled=it}batchEnableWithUserValue(rt,it){for(let st of rt){let bt=it[st];this[st].enabled=bt!==!1&&bt!==void 0}}setupGlobalFilters(rt,it,st,bt=st){if(rt&&rt.length){for(let Et of bt)this[Et].enabled=!1;let wt=Q(rt,st);for(let[Et,kt]of wt)ee(this[Et].pick,kt),this[Et].enabled=!0}else if(it&&it.length){let wt=Q(it,st);for(let[Et,kt]of wt)ee(this[Et].skip,kt)}}filterNestedSegmentTags(){let{ifd0:rt,exif:it,xmp:st,iptc:bt,icc:wt}=this;this.makerNote?it.deps.add(37500):it.skip.add(37500),this.userComment?it.deps.add(37510):it.skip.add(37510),st.enabled||rt.skip.add(700),bt.enabled||rt.skip.add(33723),wt.enabled||rt.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:rt,exif:it,gps:st,interop:bt}=this;bt.needed&&(it.deps.add(40965),rt.deps.add(40965)),it.needed&&rt.deps.add(34665),st.needed&&rt.deps.add(34853),this.tiff.enabled=H$2.some(wt=>this[wt].enabled===!0)||this.makerNote||this.userComment;for(let wt of H$2)this[wt].finalizeFilters()}get onlyTiff(){return!V$1.map(rt=>this[rt].enabled).some(rt=>rt===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let rt of z$1)this[rt].enabled&&!T$2.has(rt)&&P$1("segment parser",rt)}}function Q(nt,rt){let it,st,bt,wt,Et=[];for(bt of rt){for(wt of(it=E$1.get(bt),st=[],it))(nt.includes(wt[0])||nt.includes(wt[1]))&&st.push(wt[0]);st.length&&Et.push([bt,st])}return Et}function Z$1(nt,rt){return nt!==void 0?nt:rt!==void 0?rt:void 0}function ee(nt,rt){for(let it of rt)nt.add(it)}c$3(q,"default",$$1);class te{constructor(rt){c$3(this,"parsers",{}),c$3(this,"output",{}),c$3(this,"errors",[]),c$3(this,"pushToErrors",it=>this.errors.push(it)),this.options=q.useCached(rt)}async read(rt){this.file=await D(rt,this.options)}setup(){if(this.fileParser)return;let{file:rt}=this,it=rt.getUint16(0);for(let[st,bt]of w$1)if(bt.canHandle(rt,it))return this.fileParser=new bt(this.options,this.file,this.parsers),rt[st]=!0;this.file.close&&this.file.close(),g$2("Unknown file format")}async parse(){let{output:rt,errors:it}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),it.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&it.length>0&&(rt.errors=it),f$3(rt)}async executeParsers(){let{output:rt}=this;await this.fileParser.parse();let it=Object.values(this.parsers).map(async st=>{let bt=await st.parse();st.assignToOutput(rt,bt)});this.options.silentErrors&&(it=it.map(st=>st.catch(this.pushToErrors))),await Promise.all(it)}async extractThumbnail(){this.setup();let{options:rt,file:it}=this,st=T$2.get("tiff",rt);var bt;if(it.tiff?bt={start:0,type:"tiff"}:it.jpeg&&(bt=await this.fileParser.getOrFindSegment("tiff")),bt===void 0)return;let wt=await this.fileParser.ensureSegmentChunk(bt),Et=this.parsers.tiff=new st(wt,rt,it),kt=await Et.extractThumbnail();return it.close&&it.close(),kt}}async function ie(nt,rt){let it=new te(rt);return await it.read(nt),it.parse()}var ne=Object.freeze({__proto__:null,parse:ie,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q});class se{constructor(rt,it,st){c$3(this,"errors",[]),c$3(this,"ensureSegmentChunk",async bt=>{let wt=bt.start,Et=bt.size||65536;if(this.file.chunked)if(this.file.available(wt,Et))bt.chunk=this.file.subarray(wt,Et);else try{bt.chunk=await this.file.readChunk(wt,Et)}catch(kt){g$2(`Couldn't read segment: ${JSON.stringify(bt)}. ${kt.message}`)}else this.file.byteLength>wt+Et?bt.chunk=this.file.subarray(wt,Et):bt.size===void 0?bt.chunk=this.file.subarray(wt):g$2("Segment unreachable: "+JSON.stringify(bt));return bt.chunk}),this.extendOptions&&this.extendOptions(rt),this.options=rt,this.file=it,this.parsers=st}injectSegment(rt,it){this.options[rt].enabled&&this.createParser(rt,it)}createParser(rt,it){let st=new(T$2.get(rt))(it,this.options,this.file);return this.parsers[rt]=st}createParsers(rt){for(let it of rt){let{type:st,chunk:bt}=it,wt=this.options[st];if(wt&&wt.enabled){let Et=this.parsers[st];Et&&Et.append||Et||this.createParser(st,bt)}}}async readSegments(rt){let it=rt.map(this.ensureSegmentChunk);await Promise.all(it)}}class re$1{static findPosition(rt,it){let st=rt.getUint16(it+2)+2,bt=typeof this.headerLength=="function"?this.headerLength(rt,it,st):this.headerLength,wt=it+bt,Et=st-bt;return{offset:it,length:st,headerLength:bt,start:wt,size:Et,end:wt+Et}}static parse(rt,it={}){return new this(rt,new q({[this.type]:it}),rt).parse()}normalizeInput(rt){return rt instanceof I$1?rt:new I$1(rt)}constructor(rt,it={},st){c$3(this,"errors",[]),c$3(this,"raw",new Map),c$3(this,"handleError",bt=>{if(!this.options.silentErrors)throw bt;this.errors.push(bt.message)}),this.chunk=this.normalizeInput(rt),this.file=st,this.type=this.constructor.type,this.globalOptions=this.options=it,this.localOptions=it[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(rt,it){let st=N$1.get(it),bt=B.get(it),wt=E$1.get(it),Et=this.options[it],kt=Et.reviveValues&&!!st,Lt=Et.translateValues&&!!bt,Ot=Et.translateKeys&&!!wt,Rt={};for(let[Dt,Bt]of rt)kt&&st.has(Dt)?Bt=st.get(Dt)(Bt):Lt&&bt.has(Dt)&&(Bt=this.translateValue(Bt,bt.get(Dt))),Ot&&wt.has(Dt)&&(Dt=wt.get(Dt)||Dt),Rt[Dt]=Bt;return Rt}translateValue(rt,it){return it[rt]||it.DEFAULT||rt}assignToOutput(rt,it){this.assignObjectToOutput(rt,this.constructor.type,it)}assignObjectToOutput(rt,it,st){if(this.globalOptions.mergeOutput)return Object.assign(rt,st);rt[it]?Object.assign(rt[it],st):rt[it]=st}}c$3(re$1,"headerLength",4),c$3(re$1,"type",void 0),c$3(re$1,"multiSegment",!1),c$3(re$1,"canHandle",()=>!1);function ae(nt){return nt===192||nt===194||nt===196||nt===219||nt===221||nt===218||nt===254}function oe(nt){return nt>=224&&nt<=239}function le(nt,rt,it){for(let[st,bt]of T$2)if(bt.canHandle(nt,rt,it))return st}class he extends se{constructor(...rt){super(...rt),c$3(this,"appSegments",[]),c$3(this,"jpegSegments",[]),c$3(this,"unknownSegments",[])}static canHandle(rt,it){return it===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(rt){rt===!0?(this.findAll=!0,this.wanted=new Set(T$2.keyList())):(rt=rt===void 0?T$2.keyList().filter(it=>this.options[it].enabled):rt.filter(it=>this.options[it].enabled&&T$2.has(it)),this.findAll=!1,this.remaining=new Set(rt),this.wanted=new Set(rt)),this.unfinishedMultiSegment=!1}async findAppSegments(rt=0,it){this.setupSegmentFinderArgs(it);let{file:st,findAll:bt,wanted:wt,remaining:Et}=this;if(!bt&&this.file.chunked&&(bt=Array.from(wt).some(kt=>{let Lt=T$2.get(kt),Ot=this.options[kt];return Lt.multiSegment&&Ot.multiSegment}),bt&&await this.file.readWhole()),rt=this.findAppSegmentsInRange(rt,st.byteLength),!this.options.onlyTiff&&st.chunked){let kt=!1;for(;Et.size>0&&!kt&&(st.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:Lt}=st,Ot=this.appSegments.some(Rt=>!this.file.available(Rt.offset||Rt.start,Rt.length||Rt.size));if(kt=rt>Lt&&!Ot?!await st.readNextChunk(rt):!await st.readNextChunk(Lt),(rt=this.findAppSegmentsInRange(rt,st.byteLength))===void 0)return}}}findAppSegmentsInRange(rt,it){it-=2;let st,bt,wt,Et,kt,Lt,{file:Ot,findAll:Rt,wanted:Dt,remaining:Bt,options:Ft}=this;for(;rt<it;rt++)if(Ot.getUint8(rt)===255){if(st=Ot.getUint8(rt+1),oe(st)){if(bt=Ot.getUint16(rt+2),wt=le(Ot,rt,bt),wt&&Dt.has(wt)&&(Et=T$2.get(wt),kt=Et.findPosition(Ot,rt),Lt=Ft[wt],kt.type=wt,this.appSegments.push(kt),!Rt&&(Et.multiSegment&&Lt.multiSegment?(this.unfinishedMultiSegment=kt.chunkNumber<kt.chunkCount,this.unfinishedMultiSegment||Bt.delete(wt)):Bt.delete(wt),Bt.size===0)))break;Ft.recordUnknownSegments&&(kt=re$1.findPosition(Ot,rt),kt.marker=st,this.unknownSegments.push(kt)),rt+=bt+1}else if(ae(st)){if(bt=Ot.getUint16(rt+2),st===218&&Ft.stopAfterSos!==!1)return;Ft.recordJpegSegments&&this.jpegSegments.push({offset:rt,length:bt,marker:st}),rt+=bt+1}}return rt}mergeMultiSegments(){if(!this.appSegments.some(it=>it.multiSegment))return;let rt=function(it,st){let bt,wt,Et,kt=new Map;for(let Lt=0;Lt<it.length;Lt++)bt=it[Lt],wt=bt[st],kt.has(wt)?Et=kt.get(wt):kt.set(wt,Et=[]),Et.push(bt);return Array.from(kt)}(this.appSegments,"type");this.mergedAppSegments=rt.map(([it,st])=>{let bt=T$2.get(it,this.options);return bt.handleMultiSegments?{type:it,chunk:bt.handleMultiSegments(st)}:st[0]})}getSegment(rt){return this.appSegments.find(it=>it.type===rt)}async getOrFindSegment(rt){let it=this.getSegment(rt);return it===void 0&&(await this.findAppSegments(0,[rt]),it=this.getSegment(rt)),it}}c$3(he,"type","jpeg"),w$1.set("jpeg",he);const ue=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ce extends re$1{parseHeader(){var rt=this.chunk.getUint16();rt===18761?this.le=!0:rt===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(rt,it,st=new Map){let{pick:bt,skip:wt}=this.options[it];bt=new Set(bt);let Et=bt.size>0,kt=wt.size===0,Lt=this.chunk.getUint16(rt);rt+=2;for(let Ot=0;Ot<Lt;Ot++){let Rt=this.chunk.getUint16(rt);if(Et){if(bt.has(Rt)&&(st.set(Rt,this.parseTag(rt,Rt,it)),bt.delete(Rt),bt.size===0))break}else!kt&&wt.has(Rt)||st.set(Rt,this.parseTag(rt,Rt,it));rt+=12}return st}parseTag(rt,it,st){let{chunk:bt}=this,wt=bt.getUint16(rt+2),Et=bt.getUint32(rt+4),kt=ue[wt];if(kt*Et<=4?rt+=8:rt=bt.getUint32(rt+8),(wt<1||wt>13)&&g$2(`Invalid TIFF value type. block: ${st.toUpperCase()}, tag: ${it.toString(16)}, type: ${wt}, offset ${rt}`),rt>bt.byteLength&&g$2(`Invalid TIFF value offset. block: ${st.toUpperCase()}, tag: ${it.toString(16)}, type: ${wt}, offset ${rt} is outside of chunk size ${bt.byteLength}`),wt===1)return bt.getUint8Array(rt,Et);if(wt===2)return m$3(bt.getString(rt,Et));if(wt===7)return bt.getUint8Array(rt,Et);if(Et===1)return this.parseTagValue(wt,rt);{let Lt=new(function(Rt){switch(Rt){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(wt))(Et),Ot=kt;for(let Rt=0;Rt<Et;Rt++)Lt[Rt]=this.parseTagValue(wt,rt),rt+=Ot;return Lt}}parseTagValue(rt,it){let{chunk:st}=this;switch(rt){case 1:return st.getUint8(it);case 3:return st.getUint16(it);case 4:return st.getUint32(it);case 5:return st.getUint32(it)/st.getUint32(it+4);case 6:return st.getInt8(it);case 8:return st.getInt16(it);case 9:return st.getInt32(it);case 10:return st.getInt32(it)/st.getInt32(it+4);case 11:return st.getFloat(it);case 12:return st.getDouble(it);case 13:return st.getUint32(it);default:g$2(`Invalid tiff type ${rt}`)}}}class fe extends ce{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1165519206&&rt.getUint16(it+8)===0}async parse(){this.parseHeader();let{options:rt}=this;return rt.ifd0.enabled&&await this.parseIfd0Block(),rt.exif.enabled&&await this.safeParse("parseExifBlock"),rt.gps.enabled&&await this.safeParse("parseGpsBlock"),rt.interop.enabled&&await this.safeParse("parseInteropBlock"),rt.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(rt){let it=this[rt]();return it.catch!==void 0&&(it=it.catch(this.handleError)),it}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let rt=this.chunk.getUint16(this.ifd0Offset),it=this.ifd0Offset+2+12*rt;this.ifd1Offset=this.chunk.getUint32(it)}}parseBlock(rt,it){let st=new Map;return this[it]=st,this.parseTags(rt,it,st),st}async parseIfd0Block(){if(this.ifd0)return;let{file:rt}=this;this.findIfd0Offset(),this.ifd0Offset<8&&g$2("Malformed EXIF data"),!rt.chunked&&this.ifd0Offset>rt.byteLength&&g$2(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${rt.byteLength}`),rt.tiff&&await rt.ensureChunk(this.ifd0Offset,S$1(this.options));let it=this.parseBlock(this.ifd0Offset,"ifd0");return it.size!==0?(this.exifOffset=it.get(34665),this.interopOffset=it.get(40965),this.gpsOffset=it.get(34853),this.xmp=it.get(700),this.iptc=it.get(33723),this.icc=it.get(34675),this.options.sanitize&&(it.delete(34665),it.delete(40965),it.delete(34853),it.delete(700),it.delete(33723),it.delete(34675)),it):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,S$1(this.options));let rt=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=rt.get(40965)),this.makerNote=rt.get(37500),this.userComment=rt.get(37510),this.options.sanitize&&(rt.delete(40965),rt.delete(37500),rt.delete(37510)),this.unpack(rt,41728),this.unpack(rt,41729),rt}unpack(rt,it){let st=rt.get(it);st&&st.length===1&&rt.set(it,st[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let rt=this.parseBlock(this.gpsOffset,"gps");return rt&&rt.has(2)&&rt.has(4)&&(rt.set("latitude",de(...rt.get(2),rt.get(1))),rt.set("longitude",de(...rt.get(4),rt.get(3)))),rt}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(rt=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||rt))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let rt=this.ifd1.get(513),it=this.ifd1.get(514);return this.chunk.getUint8Array(rt,it)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let rt,it,st,bt={};for(it of H$2)if(rt=this[it],!p$2(rt))if(st=this.canTranslate?this.translateBlock(rt,it):Object.fromEntries(rt),this.options.mergeOutput){if(it==="ifd1")continue;Object.assign(bt,st)}else bt[it]=st;return this.makerNote&&(bt.makerNote=this.makerNote),this.userComment&&(bt.userComment=this.userComment),bt}assignToOutput(rt,it){if(this.globalOptions.mergeOutput)Object.assign(rt,it);else for(let[st,bt]of Object.entries(it))this.assignObjectToOutput(rt,st,bt)}}function de(nt,rt,it,st){var bt=nt+rt/60+it/3600;return st!=="S"&&st!=="W"||(bt*=-1),bt}c$3(fe,"type","tiff"),c$3(fe,"headerLength",10),T$2.set("tiff",fe);var pe=Object.freeze({__proto__:null,default:ne,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q,parse:ie});const ge={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},me=Object.assign({},ge,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Se(nt){let rt=new te(me);await rt.read(nt);let it=await rt.parse();if(it&&it.gps){let{latitude:st,longitude:bt}=it.gps;return{latitude:st,longitude:bt}}}const Ce=Object.assign({},ge,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ye(nt){let rt=new te(Ce);await rt.read(nt);let it=await rt.extractThumbnail();return it&&a$3?s$5.from(it):it}async function be(nt){let rt=await this.thumbnail(nt);if(rt!==void 0){let it=new Blob([rt]);return URL.createObjectURL(it)}}const Ie=Object.assign({},ge,{firstChunkSize:4e4,ifd0:[274]});async function Pe(nt){let rt=new te(Ie);await rt.read(nt);let it=await rt.parse();if(it&&it.ifd0)return it.ifd0[274]}const ke=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let we=!0,Te=!0;if(typeof navigator=="object"){let nt=navigator.userAgent;if(nt.includes("iPad")||nt.includes("iPhone")){let rt=nt.match(/OS (\d+)_(\d+)/);if(rt){let[,it,st]=rt;we=Number(it)+.1*Number(st)<13.4,Te=!1}}else if(nt.includes("OS X 10")){let[,rt]=nt.match(/OS X 10[_.](\d+)/);we=Te=Number(rt)<15}if(nt.includes("Chrome/")){let[,rt]=nt.match(/Chrome\/(\d+)/);we=Te=Number(rt)<81}else if(nt.includes("Firefox/")){let[,rt]=nt.match(/Firefox\/(\d+)/);we=Te=Number(rt)<77}}async function Ae(nt){let rt=await Pe(nt);return Object.assign({canvas:we,css:Te},ke[rt])}class De extends I$1{constructor(...rt){super(...rt),c$3(this,"ranges",new Oe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(rt,it,st){if(rt===0&&this.byteLength===0&&st){let bt=new DataView(st.buffer||st,st.byteOffset,st.byteLength);this._swapDataView(bt)}else{let bt=rt+it;if(bt>this.byteLength){let{dataView:wt}=this._extend(bt);this._swapDataView(wt)}}}_extend(rt){let it;it=a$3?s$5.allocUnsafe(rt):new Uint8Array(rt);let st=new DataView(it.buffer,it.byteOffset,it.byteLength);return it.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:it,dataView:st}}subarray(rt,it,st=!1){return it=it||this._lengthToEnd(rt),st&&this._tryExtend(rt,it),this.ranges.add(rt,it),super.subarray(rt,it)}set(rt,it,st=!1){st&&this._tryExtend(it,rt.byteLength,rt);let bt=super.set(rt,it);return this.ranges.add(it,bt.byteLength),bt}async ensureChunk(rt,it){this.chunked&&(this.ranges.available(rt,it)||await this.readChunk(rt,it))}available(rt,it){return this.ranges.available(rt,it)}}class Oe{constructor(){c$3(this,"list",[])}get length(){return this.list.length}add(rt,it,st=0){let bt=rt+it,wt=this.list.filter(Et=>xe(rt,Et.offset,bt)||xe(rt,Et.end,bt));if(wt.length>0){rt=Math.min(rt,...wt.map(kt=>kt.offset)),bt=Math.max(bt,...wt.map(kt=>kt.end)),it=bt-rt;let Et=wt.shift();Et.offset=rt,Et.length=it,Et.end=bt,this.list=this.list.filter(kt=>!wt.includes(kt))}else this.list.push({offset:rt,length:it,end:bt})}available(rt,it){let st=rt+it;return this.list.some(bt=>bt.offset<=rt&&st<=bt.end)}}function xe(nt,rt,it){return nt<=rt&&rt<=it}class ve extends De{constructor(rt,it){super(0),c$3(this,"chunksRead",0),this.input=rt,this.options=it}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(rt=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let it=this.options.chunkSize,st=await this.readChunk(rt,it);return!!st&&st.byteLength===it}async readChunk(rt,it){if(this.chunksRead++,(it=this.safeWrapAddress(rt,it))!==0)return this._readChunk(rt,it)}safeWrapAddress(rt,it){return this.size!==void 0&&rt+it>this.size?Math.max(0,this.size-rt):it}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}A$2.set("blob",class extends ve{async readWhole(){this.chunked=!1;let nt=await R$2(this.input);this._swapArrayBuffer(nt)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(nt,rt){let it=rt?nt+rt:void 0,st=this.input.slice(nt,it),bt=await R$2(st);return this.set(bt,nt,!0)}});var Me=Object.freeze({__proto__:null,default:pe,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});A$2.set("url",class extends ve{async readWhole(){this.chunked=!1;let nt=await M$1(this.input);nt instanceof ArrayBuffer?this._swapArrayBuffer(nt):nt instanceof Uint8Array&&this._swapBuffer(nt)}async _readChunk(nt,rt){let it=rt?nt+rt-1:void 0,st=this.options.httpHeaders||{};(nt||it)&&(st.range=`bytes=${[nt,it].join("-")}`);let bt=await h$3(this.input,{headers:st}),wt=await bt.arrayBuffer(),Et=wt.byteLength;if(bt.status!==416)return Et!==rt&&(this.size=nt+Et),this.set(wt,nt,!0)}});I$1.prototype.getUint64=function(nt){let rt=this.getUint32(nt),it=this.getUint32(nt+4);return rt<1048575?rt<<32|it:typeof r$2!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),r$2(rt)<<r$2(32)|r$2(it)):void g$2("Trying to read 64b value but JS can only handle 53b numbers.")};class Re extends se{parseBoxes(rt=0){let it=[];for(;rt<this.file.byteLength-4;){let st=this.parseBoxHead(rt);if(it.push(st),st.length===0)break;rt+=st.length}return it}parseSubBoxes(rt){rt.boxes=this.parseBoxes(rt.start)}findBox(rt,it){return rt.boxes===void 0&&this.parseSubBoxes(rt),rt.boxes.find(st=>st.kind===it)}parseBoxHead(rt){let it=this.file.getUint32(rt),st=this.file.getString(rt+4,4),bt=rt+8;return it===1&&(it=this.file.getUint64(rt+8),bt+=8),{offset:rt,length:it,kind:st,start:bt}}parseBoxFullHead(rt){if(rt.version!==void 0)return;let it=this.file.getUint32(rt.start);rt.version=it>>24,rt.start+=4}}class Le extends Re{static canHandle(rt,it){if(it!==0)return!1;let st=rt.getUint16(2);if(st>50)return!1;let bt=16,wt=[];for(;bt<st;)wt.push(rt.getString(bt,4)),bt+=4;return wt.includes(this.type)}async parse(){let rt=this.file.getUint32(0),it=this.parseBoxHead(rt);for(;it.kind!=="meta";)rt+=it.length,await this.file.ensureChunk(rt,16),it=this.parseBoxHead(rt);await this.file.ensureChunk(it.offset,it.length),this.parseBoxFullHead(it),this.parseSubBoxes(it),this.options.icc.enabled&&await this.findIcc(it),this.options.tiff.enabled&&await this.findExif(it)}async registerSegment(rt,it,st){await this.file.ensureChunk(it,st);let bt=this.file.subarray(it,st);this.createParser(rt,bt)}async findIcc(rt){let it=this.findBox(rt,"iprp");if(it===void 0)return;let st=this.findBox(it,"ipco");if(st===void 0)return;let bt=this.findBox(st,"colr");bt!==void 0&&await this.registerSegment("icc",bt.offset+12,bt.length)}async findExif(rt){let it=this.findBox(rt,"iinf");if(it===void 0)return;let st=this.findBox(rt,"iloc");if(st===void 0)return;let bt=this.findExifLocIdInIinf(it),wt=this.findExtentInIloc(st,bt);if(wt===void 0)return;let[Et,kt]=wt;await this.file.ensureChunk(Et,kt);let Lt=4+this.file.getUint32(Et);Et+=Lt,kt-=Lt,await this.registerSegment("tiff",Et,kt)}findExifLocIdInIinf(rt){this.parseBoxFullHead(rt);let it,st,bt,wt,Et=rt.start,kt=this.file.getUint16(Et);for(Et+=2;kt--;){if(it=this.parseBoxHead(Et),this.parseBoxFullHead(it),st=it.start,it.version>=2&&(bt=it.version===3?4:2,wt=this.file.getString(st+bt+2,4),wt==="Exif"))return this.file.getUintBytes(st,bt);Et+=it.length}}get8bits(rt){let it=this.file.getUint8(rt);return[it>>4,15&it]}findExtentInIloc(rt,it){this.parseBoxFullHead(rt);let st=rt.start,[bt,wt]=this.get8bits(st++),[Et,kt]=this.get8bits(st++),Lt=rt.version===2?4:2,Ot=rt.version===1||rt.version===2?2:0,Rt=kt+bt+wt,Dt=rt.version===2?4:2,Bt=this.file.getUintBytes(st,Dt);for(st+=Dt;Bt--;){let Ft=this.file.getUintBytes(st,Lt);st+=Lt+Ot+2+Et;let Yt=this.file.getUint16(st);if(st+=2,Ft===it)return Yt>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(st+kt,bt),this.file.getUintBytes(st+kt+bt,wt)];st+=Yt*Rt}}}class Ue extends Le{}c$3(Ue,"type","heic");class Fe extends Le{}c$3(Fe,"type","avif"),w$1.set("heic",Ue),w$1.set("avif",Fe),U(E$1,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),U(E$1,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),U(E$1,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),U(B,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ee=U(B,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Be={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ee.set(37392,Be),Ee.set(41488,Be);const Ne={0:"Normal",1:"Low",2:"High"};function Ge(nt){return typeof nt=="object"&&nt.length!==void 0?nt[0]:nt}function Ve(nt){let rt=Array.from(nt).slice(1);return rt[1]>15&&(rt=rt.map(it=>String.fromCharCode(it))),rt[2]!=="0"&&rt[2]!==0||rt.pop(),rt.join(".")}function ze(nt){if(typeof nt=="string"){var[rt,it,st,bt,wt,Et]=nt.trim().split(/[-: ]/g).map(Number),kt=new Date(rt,it-1,st);return Number.isNaN(bt)||Number.isNaN(wt)||Number.isNaN(Et)||(kt.setHours(bt),kt.setMinutes(wt),kt.setSeconds(Et)),Number.isNaN(+kt)?nt:kt}}function He(nt){if(typeof nt=="string")return nt;let rt=[];if(nt[1]===0&&nt[nt.length-1]===0)for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it+1],nt[it]));else for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it],nt[it+1]));return m$3(String.fromCodePoint(...rt))}function je(nt,rt){return nt<<8|rt}Ee.set(41992,Ne),Ee.set(41993,Ne),Ee.set(41994,Ne),U(N$1,["ifd0","ifd1"],[[50827,function(nt){return typeof nt!="string"?b$2(nt):nt}],[306,ze],[40091,He],[40092,He],[40093,He],[40094,He],[40095,He]]),U(N$1,"exif",[[40960,Ve],[36864,Ve],[36867,ze],[36868,ze],[40962,Ge],[40963,Ge]]),U(N$1,"gps",[[0,nt=>Array.from(nt).join(".")],[7,nt=>Array.from(nt).join(":")]]);class We extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1752462448&&rt.getString(it+4,20)==="http://ns.adobe.com/"}static headerLength(rt,it){return rt.getString(it+4,34)==="http://ns.adobe.com/xmp/extension/"?79:4+28+1}static findPosition(rt,it){let st=super.findPosition(rt,it);return st.multiSegment=st.extended=st.headerLength===79,st.multiSegment?(st.chunkCount=rt.getUint8(it+72),st.chunkNumber=rt.getUint8(it+76),rt.getUint8(it+77)!==0&&st.chunkNumber++):(st.chunkCount=1/0,st.chunkNumber=-1),st}static handleMultiSegments(rt){return rt.map(it=>it.chunk.getString()).join("")}normalizeInput(rt){return typeof rt=="string"?rt:I$1.from(rt).getString()}parse(rt=this.chunk){if(!this.localOptions.parse)return rt;rt=function(wt){let Et={},kt={};for(let Lt of Ze)Et[Lt]=[],kt[Lt]=0;return wt.replace(et,(Lt,Ot,Rt)=>{if(Ot==="<"){let Dt=++kt[Rt];return Et[Rt].push(Dt),`${Lt}#${Dt}`}return`${Lt}#${Et[Rt].pop()}`})}(rt);let it=Xe.findAll(rt,"rdf","Description");it.length===0&&it.push(new Xe("rdf","Description",void 0,rt));let st,bt={};for(let wt of it)for(let Et of wt.properties)st=Je(Et.ns,bt),_e(Et,st);return function(wt){let Et;for(let kt in wt)Et=wt[kt]=f$3(wt[kt]),Et===void 0&&delete wt[kt];return f$3(wt)}(bt)}assignToOutput(rt,it){if(this.localOptions.parse)for(let[st,bt]of Object.entries(it))switch(st){case"tiff":this.assignObjectToOutput(rt,"ifd0",bt);break;case"exif":this.assignObjectToOutput(rt,"exif",bt);break;case"xmlns":break;default:this.assignObjectToOutput(rt,st,bt)}else rt.xmp=it}}c$3(We,"type","xmp"),c$3(We,"multiSegment",!0),T$2.set("xmp",We);class Ke{static findAll(rt){return qe(rt,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ke.unpackMatch)}static unpackMatch(rt){let it=rt[1],st=rt[2],bt=rt[3].slice(1,-1);return bt=Qe(bt),new Ke(it,st,bt)}constructor(rt,it,st){this.ns=rt,this.name=it,this.value=st}serialize(){return this.value}}class Xe{static findAll(rt,it,st){if(it!==void 0||st!==void 0){it=it||"[\\w\\d-]+",st=st||"[\\w\\d-]+";var bt=new RegExp(`<(${it}):(${st})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else bt=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return qe(rt,bt).map(Xe.unpackMatch)}static unpackMatch(rt){let it=rt[1],st=rt[2],bt=rt[4],wt=rt[8];return new Xe(it,st,bt,wt)}constructor(rt,it,st,bt){this.ns=rt,this.name=it,this.attrString=st,this.innerXml=bt,this.attrs=Ke.findAll(st),this.children=Xe.findAll(bt),this.value=this.children.length===0?Qe(bt):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:rt,name:it}=this;return rt==="rdf"&&(it==="Seq"||it==="Bag"||it==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return $e(this.children.map(Ye));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let rt={};for(let it of this.properties)_e(it,rt);return this.value!==void 0&&(rt.value=this.value),f$3(rt)}}function _e(nt,rt){let it=nt.serialize();it!==void 0&&(rt[nt.name]=it)}var Ye=nt=>nt.serialize(),$e=nt=>nt.length===1?nt[0]:nt,Je=(nt,rt)=>rt[nt]?rt[nt]:rt[nt]={};function qe(nt,rt){let it,st=[];if(!nt)return st;for(;(it=rt.exec(nt))!==null;)st.push(it);return st}function Qe(nt){if(function(st){return st==null||st==="null"||st==="undefined"||st===""||st.trim()===""}(nt))return;let rt=Number(nt);if(!Number.isNaN(rt))return rt;let it=nt.toLowerCase();return it==="true"||it!=="false"&&nt.trim()}const Ze=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],et=new RegExp(`(<|\\/)(${Ze.join("|")})`,"g");var tt=Object.freeze({__proto__:null,default:Me,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});let at=l$4("fs",nt=>nt.promises);A$2.set("fs",class extends ve{async readWhole(){this.chunked=!1,this.fs=await at;let nt=await this.fs.readFile(this.input);this._swapBuffer(nt)}async readChunked(){this.chunked=!0,this.fs=await at,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(nt,rt){this.fh===void 0&&await this.open(),nt+rt>this.size&&(rt=this.size-nt);var it=this.subarray(nt,rt,!0);return await this.fh.read(it.dataView,0,rt,nt),it}async close(){if(this.fh){let nt=this.fh;this.fh=void 0,await nt.close()}}});A$2.set("base64",class extends ve{constructor(...nt){super(...nt),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(nt,rt){let it,st,bt=this.input;nt===void 0?(nt=0,it=0,st=0):(it=4*Math.floor(nt/3),st=nt-it/4*3),rt===void 0&&(rt=this.size);let wt=nt+rt,Et=it+4*Math.ceil(wt/3);bt=bt.slice(it,Et);let kt=Math.min(rt,this.size-nt);if(a$3){let Lt=s$5.from(bt,"base64").slice(st,st+kt);return this.set(Lt,nt,!0)}{let Lt=this.subarray(nt,kt,!0),Ot=atob(bt),Rt=Lt.toUint8();for(let Dt=0;Dt<kt;Dt++)Rt[Dt]=Ot.charCodeAt(st+Dt);return Lt}}});class ot extends se{static canHandle(rt,it){return it===18761||it===19789}extendOptions(rt){let{ifd0:it,xmp:st,iptc:bt,icc:wt}=rt;st.enabled&&it.deps.add(700),bt.enabled&&it.deps.add(33723),wt.enabled&&it.deps.add(34675),it.finalizeFilters()}async parse(){let{tiff:rt,xmp:it,iptc:st,icc:bt}=this.options;if(rt.enabled||it.enabled||st.enabled||bt.enabled){let wt=Math.max(S$1(this.options),this.options.chunkSize);await this.file.ensureChunk(0,wt),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(rt){if(this.parsers.tiff[rt]){let it=this.parsers.tiff[rt];this.injectSegment(rt,it)}}}c$3(ot,"type","tiff"),w$1.set("tiff",ot);let lt=l$4("zlib");const ht=["ihdr","iccp","text","itxt","exif"];class ut extends se{constructor(...rt){super(...rt),c$3(this,"catchError",it=>this.errors.push(it)),c$3(this,"metaChunks",[]),c$3(this,"unknownChunks",[])}static canHandle(rt,it){return it===35152&&rt.getUint32(0)===2303741511&&rt.getUint32(4)===218765834}async parse(){let{file:rt}=this;await this.findPngChunksInRange(8,rt.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(rt,it){let{file:st}=this;for(;rt<it;){let bt=st.getUint32(rt),wt=st.getUint32(rt+4),Et=st.getString(rt+4,4).toLowerCase(),kt=bt+4+4+4,Lt={type:Et,offset:rt,length:kt,start:rt+4+4,size:bt,marker:wt};ht.includes(Et)?this.metaChunks.push(Lt):this.unknownChunks.push(Lt),rt+=kt}}parseTextChunks(){let rt=this.metaChunks.filter(it=>it.type==="text");for(let it of rt){let[st,bt]=this.file.getString(it.start,it.size).split("\0");this.injectKeyValToIhdr(st,bt)}}injectKeyValToIhdr(rt,it){let st=this.parsers.ihdr;st&&st.raw.set(rt,it)}findIhdr(){let rt=this.metaChunks.find(it=>it.type==="ihdr");rt&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",rt.chunk)}async findExif(){let rt=this.metaChunks.find(it=>it.type==="exif");rt&&this.injectSegment("tiff",rt.chunk)}async findXmp(){let rt=this.metaChunks.filter(it=>it.type==="itxt");for(let it of rt)it.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",it.chunk)}async findIcc(){let rt=this.metaChunks.find(kt=>kt.type==="iccp");if(!rt)return;let{chunk:it}=rt,st=it.getUint8Array(0,81),bt=0;for(;bt<80&&st[bt]!==0;)bt++;let wt=bt+2,Et=it.getString(0,bt);if(this.injectKeyValToIhdr("ProfileName",Et),n$4){let kt=await lt,Lt=it.getUint8Array(wt);Lt=kt.inflateSync(Lt),this.injectSegment("icc",Lt)}}}c$3(ut,"type","png"),w$1.set("png",ut),U(E$1,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),F(E$1,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let ct=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];F(E$1,"ifd0",ct),F(E$1,"exif",ct),U(B,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ft extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===224&&rt.getUint32(it+4)===1246120262&&rt.getUint8(it+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}c$3(ft,"type","jfif"),c$3(ft,"headerLength",9),T$2.set("jfif",ft),U(E$1,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class dt extends re$1{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}c$3(dt,"type","ihdr"),T$2.set("ihdr",dt),U(E$1,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),U(B,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pt extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===226&&rt.getUint32(it+4)===1229144927}static findPosition(rt,it){let st=super.findPosition(rt,it);return st.chunkNumber=rt.getUint8(it+16),st.chunkCount=rt.getUint8(it+17),st.multiSegment=st.chunkCount>1,st}static handleMultiSegments(rt){return function(it){let st=function(bt){let wt=bt[0].constructor,Et=0;for(let Ot of bt)Et+=Ot.length;let kt=new wt(Et),Lt=0;for(let Ot of bt)kt.set(Ot,Lt),Lt+=Ot.length;return kt}(it.map(bt=>bt.chunk.toUint8()));return new I$1(st)}(rt)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:rt}=this;this.chunk.byteLength<84&&g$2("ICC header is too short");for(let[it,st]of Object.entries(gt)){it=parseInt(it,10);let bt=st(this.chunk,it);bt!=="\0\0\0\0"&&rt.set(it,bt)}}parseTags(){let rt,it,st,bt,wt,{raw:Et}=this,kt=this.chunk.getUint32(128),Lt=132,Ot=this.chunk.byteLength;for(;kt--;){if(rt=this.chunk.getString(Lt,4),it=this.chunk.getUint32(Lt+4),st=this.chunk.getUint32(Lt+8),bt=this.chunk.getString(it,4),it+st>Ot)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");wt=this.parseTag(bt,it,st),wt!==void 0&&wt!=="\0\0\0\0"&&Et.set(rt,wt),Lt+=12}}parseTag(rt,it,st){switch(rt){case"desc":return this.parseDesc(it);case"mluc":return this.parseMluc(it);case"text":return this.parseText(it,st);case"sig ":return this.parseSig(it)}if(!(it+st>this.chunk.byteLength))return this.chunk.getUint8Array(it,st)}parseDesc(rt){let it=this.chunk.getUint32(rt+8)-1;return m$3(this.chunk.getString(rt+12,it))}parseText(rt,it){return m$3(this.chunk.getString(rt+8,it-8))}parseSig(rt){return m$3(this.chunk.getString(rt+8,4))}parseMluc(rt){let{chunk:it}=this,st=it.getUint32(rt+8),bt=it.getUint32(rt+12),wt=rt+16,Et=[];for(let kt=0;kt<st;kt++){let Lt=it.getString(wt+0,2),Ot=it.getString(wt+2,2),Rt=it.getUint32(wt+4),Dt=it.getUint32(wt+8)+rt,Bt=m$3(it.getUnicodeString(Dt,Rt));Et.push({lang:Lt,country:Ot,text:Bt}),wt+=bt}return st===1?Et[0].text:Et}translateValue(rt,it){return typeof rt=="string"?it[rt]||it[rt.toLowerCase()]||rt:it[rt]||rt}}c$3(pt,"type","icc"),c$3(pt,"multiSegment",!0),c$3(pt,"headerLength",18);const gt={4:mt,8:function(nt,rt){return[nt.getUint8(rt),nt.getUint8(rt+1)>>4,nt.getUint8(rt+1)%16].map(it=>it.toString(10)).join(".")},12:mt,16:mt,20:mt,24:function(nt,rt){const it=nt.getUint16(rt),st=nt.getUint16(rt+2)-1,bt=nt.getUint16(rt+4),wt=nt.getUint16(rt+6),Et=nt.getUint16(rt+8),kt=nt.getUint16(rt+10);return new Date(Date.UTC(it,st,bt,wt,Et,kt))},36:mt,40:mt,48:mt,52:mt,64:(nt,rt)=>nt.getUint32(rt),80:mt};function mt(nt,rt){return m$3(nt.getString(rt,4))}T$2.set("icc",pt),U(E$1,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const St={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ct={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};U(B,"icc",[[4,St],[12,Ct],[40,Object.assign({},St,Ct)],[48,St],[80,St],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class yt extends re$1{static canHandle(rt,it,st){return rt.getUint8(it+1)===237&&rt.getString(it+4,9)==="Photoshop"&&this.containsIptc8bim(rt,it,st)!==void 0}static headerLength(rt,it,st){let bt,wt=this.containsIptc8bim(rt,it,st);if(wt!==void 0)return bt=rt.getUint8(it+wt+7),bt%2!=0&&(bt+=1),bt===0&&(bt=4),wt+8+bt}static containsIptc8bim(rt,it,st){for(let bt=0;bt<st;bt++)if(this.isIptcSegmentHead(rt,it+bt))return bt}static isIptcSegmentHead(rt,it){return rt.getUint8(it)===56&&rt.getUint32(it)===943868237&&rt.getUint16(it+4)===1028}parse(){let{raw:rt}=this,it=this.chunk.byteLength-1,st=!1;for(let bt=0;bt<it;bt++)if(this.chunk.getUint8(bt)===28&&this.chunk.getUint8(bt+1)===2){st=!0;let wt=this.chunk.getUint16(bt+3),Et=this.chunk.getUint8(bt+2),kt=this.chunk.getLatin1String(bt+5,wt);rt.set(Et,this.pluralizeValue(rt.get(Et),kt)),bt+=4+wt}else if(st)break;return this.translate(),this.output}pluralizeValue(rt,it){return rt!==void 0?rt instanceof Array?(rt.push(it),rt):[rt,it]:it}}c$3(yt,"type","iptc"),c$3(yt,"translateValues",!1),c$3(yt,"reviveValues",!1),T$2.set("iptc",yt),U(E$1,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),U(B,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);class GithubClient{constructor(rt){$c(this,"authToken");$c(this,"_shas",{});this.authToken=rt}b64EncodeUnicode(rt){return btoa(encodeURIComponent(rt).replace(/%([0-9A-F]{2})/g,function(it,st){return String.fromCharCode(parseInt(st,16))}))}b64DecodeUnicode(rt){return decodeURIComponent(Array.prototype.map.call(atob(rt),function(it){return"%"+("00"+it.charCodeAt(0).toString(16)).slice(-2)}).join(""))}user(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}async isCollaborator(rt,it,st){let bt=`https://api.github.com/repos/${rt}/${it}/collaborators/${st}`,wt=await fetch(bt,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}});return wt.ok&&wt.status===204}organizations(){return fetch("https://api.github.com/user/orgs",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}repos(rt="",it=""){let st=rt?`users/${rt}`:it?`orgs/${it}`:"user";return fetch(`https://api.github.com/${st}/repos?per_page=100`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(bt=>bt.json())}async createRepository({org:rt=null,name:it="",description:st="",auto_init:bt=!0}){let wt=rt?`https://api.github.com/orgs/${rt}/repos`:"https://api.github.com/user/repos";console.log(`createUserRepository: org=${rt} name=${it} description=${st} auto_init=${bt} url=${wt}`);let Et=await fetch(wt,{method:"POST",body:JSON.stringify({name:it,description:st,auto_init:bt}),headers:{Authorization:`Token ${this.authToken}`}});return{status:Et.status,statusText:Et.statusText}}branches(rt,it){return fetch(`https://api.github.com/repos/${rt}/${it}/branches`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(st=>st.json())}async getFile(rt,it,st,bt){let wt,Et=`https://api.github.com/repos/${rt}/${it}/contents/${st}`;bt&&(Et+=`?ref=${bt}`);let kt=await fetch(Et,{cache:"no-cache",headers:{Authorization:`Token ${this.authToken}`}});return kt.ok&&(kt=await kt.json(),wt=decodeURIComponent(escape(atob(kt.content)))),Promise.resolve({content:wt,sha:kt.sha})}async getSha(rt,it,st,bt){console.log(`getSha: acct=${rt} repo=${it} path=${st} ref=${bt}`);let wt=`https://api.github.com/repos/${rt}/${it}/contents/${st}`;bt&&(wt+=`?ref=${bt}`);let Et=await fetch(wt,{headers:{Authorization:`Token ${this.authToken}`}});return Et.ok&&(Et=await Et.json()),Et.sha}async putFile(rt,it,st,bt,wt,Et=!1,kt=""){let Lt=`https://api.github.com/repos/${rt}/${it}/contents/${st}`,Ot=`${rt}/${it}/${wt}/${st}`;kt=kt||this._shas[Ot]||await this.getSha(rt,it,st,wt),console.log(`putFile: acct=${rt} repo=${it} path=${st} ref=${wt} sha=${kt} isBinaryString=${Et}`);let Rt={message:"API commit",content:Et?btoa(bt):this.b64EncodeUnicode(bt)};wt&&(Rt.branch=wt),kt&&(Rt.sha=kt);let Dt=await fetch(Lt,{method:"PUT",body:JSON.stringify(Rt),headers:{Authorization:`Token ${this.authToken}`}});return Dt.ok?(kt=(await Dt.json()).content.sha,this._shas[Ot]=kt):console.log(Dt),{status:Dt.status,statusText:Dt.statusText,sha:kt}}async deleteFile(rt,it,st,bt,wt=""){console.log(`deleteFile: acct=${rt} repo=${it} path=${st} sha=${wt}`),wt=wt||await this.getSha(rt,it,st,bt);let Et=`https://api.github.com/repos/${rt}/${it}/contents/${st}`,kt={message:"API commit",sha:wt},Lt=await fetch(Et,{method:"DELETE",body:JSON.stringify(kt),headers:{Authorization:`Token ${this.authToken}`}});Lt=await Lt.json()}async defaultBranch(rt,it){let st=null,bt=`https://api.github.com/repos/${rt}/${it}`,wt=await fetch(bt,{headers:{Authorization:`Token ${this.authToken}`}});return wt.ok&&(wt=await wt.json(),st=wt.default_branch),st}async dirlist(rt,it,st,bt){var Ot;st=st||"",bt=bt||await this.defaultBranch(rt,it);let wt=[],Et=`https://api.github.com/repos/${rt}/${it}/git/trees/${bt}`,kt={Authorization:`Token ${this.authToken}`,Accept:"application/vnd.github.v3+json","If-None-Match":""},Lt=st.split("/").filter(Rt=>Rt);for(let Rt=0;Rt<Lt.length;Rt++){let Dt=await fetch(Et,{headers:kt}),Bt=Dt.ok?await Dt.json():{},Ft=Bt?(Ot=Bt.tree)==null?void 0:Ot.find(Yt=>Yt.path===Lt[Rt]):null;if(Et=Ft?Ft.url:null,!Et)break}if(Et){let Rt=await fetch(Et,{headers:kt});wt=((Rt.ok?await Rt.json():{}).tree||[]).map(Bt=>({name:Bt.path,sha:Bt.sha,type:Bt.type==="tree"?"dir":"file"}))}return wt}async fullPath(rt,it,st,bt,wt=!1){let Et=st.split("/").filter(Rt=>Rt),kt=Et[Et.length-1],Lt=await this.dirlist(rt,it,Et.join("/"),bt);if(Lt.length===0&&(Et.pop(),Lt=await this.dirlist(rt,it,Et.join("/"),bt)),!wt){let Rt=[kt,`${kt}.md`,"README.md"];for(let Dt=0;Dt<Rt.length;Dt++)if(Lt.find(Bt=>Bt.type==="file"&&Bt.name===Rt[Dt])){Et.push(Rt[Dt]);break}}return Et.join("/")}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing$1(nt){return typeof nt>"u"||nt===null}function isObject$2(nt){return typeof nt=="object"&&nt!==null}function toArray$1(nt){return Array.isArray(nt)?nt:isNothing$1(nt)?[]:[nt]}function extend$2(nt,rt){var it,st,bt,wt;if(rt)for(wt=Object.keys(rt),it=0,st=wt.length;it<st;it+=1)bt=wt[it],nt[bt]=rt[bt];return nt}function repeat$1(nt,rt){var it="",st;for(st=0;st<rt;st+=1)it+=nt;return it}function isNegativeZero$1(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1$1=isNothing$1,isObject_1$1=isObject$2,toArray_1$1=toArray$1,repeat_1$1=repeat$1,isNegativeZero_1$1=isNegativeZero$1,extend_1$1=extend$2,common$2={isNothing:isNothing_1$1,isObject:isObject_1$1,toArray:toArray_1$1,repeat:repeat_1$1,isNegativeZero:isNegativeZero_1$1,extend:extend_1$1};function formatError$1(nt,rt){var it="",st=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),st+" "+it):st}function YAMLException$1$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError$1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1$1.prototype=Object.create(Error.prototype);YAMLException$1$1.prototype.constructor=YAMLException$1$1;YAMLException$1$1.prototype.toString=function(rt){return this.name+": "+formatError$1(this,rt)};var exception$1=YAMLException$1$1;function getLine$1(nt,rt,it,st,bt){var wt="",Et="",kt=Math.floor(bt/2)-1;return st-rt>kt&&(wt=" ... ",rt=st-kt+wt.length),it-st>kt&&(Et=" ...",it=st+kt-Et.length),{str:wt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Et,pos:st-rt+wt.length}}function padStart$1(nt,rt){return common$2.repeat(" ",rt-nt.length)+nt}function makeSnippet$1(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,st=[0],bt=[],wt,Et=-1;wt=it.exec(nt.buffer);)bt.push(wt.index),st.push(wt.index+wt[0].length),nt.position<=wt.index&&Et<0&&(Et=st.length-2);Et<0&&(Et=st.length-1);var kt="",Lt,Ot,Rt=Math.min(nt.line+rt.linesAfter,bt.length).toString().length,Dt=rt.maxLength-(rt.indent+Rt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Et-Lt<0);Lt++)Ot=getLine$1(nt.buffer,st[Et-Lt],bt[Et-Lt],nt.position-(st[Et]-st[Et-Lt]),Dt),kt=common$2.repeat(" ",rt.indent)+padStart$1((nt.line-Lt+1).toString(),Rt)+" | "+Ot.str+`
`+kt;for(Ot=getLine$1(nt.buffer,st[Et],bt[Et],nt.position,Dt),kt+=common$2.repeat(" ",rt.indent)+padStart$1((nt.line+1).toString(),Rt)+" | "+Ot.str+`
`,kt+=common$2.repeat("-",rt.indent+Rt+3+Ot.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Et+Lt>=bt.length);Lt++)Ot=getLine$1(nt.buffer,st[Et+Lt],bt[Et+Lt],nt.position-(st[Et]-st[Et+Lt]),Dt),kt+=common$2.repeat(" ",rt.indent)+padStart$1((nt.line+Lt+1).toString(),Rt)+" | "+Ot.str+`
`;return kt.replace(/\n$/,"")}var snippet$1=makeSnippet$1,TYPE_CONSTRUCTOR_OPTIONS$1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS$1=["scalar","sequence","mapping"];function compileStyleAliases$1(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(st){rt[String(st)]=it})}),rt}function Type$1$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS$1.indexOf(it)===-1)throw new exception$1('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases$1(rt.styleAliases||null),YAML_NODE_KINDS$1.indexOf(this.kind)===-1)throw new exception$1('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type$1=Type$1$1;function compileList$1(nt,rt){var it=[];return nt[rt].forEach(function(st){var bt=it.length;it.forEach(function(wt,Et){wt.tag===st.tag&&wt.kind===st.kind&&wt.multi===st.multi&&(bt=Et)}),it[bt]=st}),it}function compileMap$1(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function st(bt){bt.multi?(nt.multi[bt.kind].push(bt),nt.multi.fallback.push(bt)):nt[bt.kind][bt.tag]=nt.fallback[bt.tag]=bt}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(st);return nt}function Schema$1$1(nt){return this.extend(nt)}Schema$1$1.prototype.extend=function(rt){var it=[],st=[];if(rt instanceof type$1)st.push(rt);else if(Array.isArray(rt))st=st.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(st=st.concat(rt.explicit));else throw new exception$1("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(wt){if(!(wt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(wt.loadKind&&wt.loadKind!=="scalar")throw new exception$1("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(wt.multi)throw new exception$1("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(wt){if(!(wt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Schema$1$1.prototype);return bt.implicit=(this.implicit||[]).concat(it),bt.explicit=(this.explicit||[]).concat(st),bt.compiledImplicit=compileList$1(bt,"implicit"),bt.compiledExplicit=compileList$1(bt,"explicit"),bt.compiledTypeMap=compileMap$1(bt.compiledImplicit,bt.compiledExplicit),bt};var schema$1=Schema$1$1,str$1=new type$1("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$2=new type$1("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map$3=new type$1("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe$1=new schema$1({explicit:[str$1,seq$2,map$3]});function resolveYamlNull$1(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull$1(){return null}function isNull$1(nt){return nt===null}var _null$1=new type$1("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull$1,construct:constructYamlNull$1,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean$1(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean$1(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean$1(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool$1=new type$1("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean$1,construct:constructYamlBoolean$1,predicate:isBoolean$1,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode$1(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode$1(nt){return 48<=nt&&nt<=55}function isDecCode$1(nt){return 48<=nt&&nt<=57}function resolveYamlInteger$1(nt){if(nt===null)return!1;var rt=nt.length,it=0,st=!1,bt;if(!rt)return!1;if(bt=nt[it],(bt==="-"||bt==="+")&&(bt=nt[++it]),bt==="0"){if(it+1===rt)return!0;if(bt=nt[++it],bt==="b"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(bt!=="0"&&bt!=="1")return!1;st=!0}return st&&bt!=="_"}if(bt==="x"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isHexCode$1(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}if(bt==="o"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isOctCode$1(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}}if(bt==="_")return!1;for(;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isDecCode$1(nt.charCodeAt(it)))return!1;st=!0}return!(!st||bt==="_")}function constructYamlInteger$1(nt){var rt=nt,it=1,st;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),st=rt[0],(st==="-"||st==="+")&&(st==="-"&&(it=-1),rt=rt.slice(1),st=rt[0]),rt==="0")return 0;if(st==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger$2(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common$2.isNegativeZero(nt)}var int$1=new type$1("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger$1,construct:constructYamlInteger$1,predicate:isInteger$2,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN$1=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat$1(nt){return!(nt===null||!YAML_FLOAT_PATTERN$1.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat$1(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT$1=/^[-+]?[0-9]+e/;function representYamlFloat$1(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$2.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT$1.test(it)?it.replace("e",".e"):it}function isFloat$1(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common$2.isNegativeZero(nt))}var float$1=new type$1("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat$1,construct:constructYamlFloat$1,predicate:isFloat$1,represent:representYamlFloat$1,defaultStyle:"lowercase"}),json$1=failsafe$1.extend({implicit:[_null$1,bool$1,int$1,float$1]}),core$1=json$1,YAML_DATE_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp$1(nt){return nt===null?!1:YAML_DATE_REGEXP$1.exec(nt)!==null||YAML_TIMESTAMP_REGEXP$1.exec(nt)!==null}function constructYamlTimestamp$1(nt){var rt,it,st,bt,wt,Et,kt,Lt=0,Ot=null,Rt,Dt,Bt;if(rt=YAML_DATE_REGEXP$1.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP$1.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],st=+rt[2]-1,bt=+rt[3],!rt[4])return new Date(Date.UTC(it,st,bt));if(wt=+rt[4],Et=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Rt=+rt[10],Dt=+(rt[11]||0),Ot=(Rt*60+Dt)*6e4,rt[9]==="-"&&(Ot=-Ot)),Bt=new Date(Date.UTC(it,st,bt,wt,Et,kt,Lt)),Ot&&Bt.setTime(Bt.getTime()-Ot),Bt}function representYamlTimestamp$1(nt){return nt.toISOString()}var timestamp$1=new type$1("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp$1,construct:constructYamlTimestamp$1,instanceOf:Date,represent:representYamlTimestamp$1});function resolveYamlMerge$1(nt){return nt==="<<"||nt===null}var merge$4=new type$1("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge$1}),BASE64_MAP$1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary$1(nt){if(nt===null)return!1;var rt,it,st=0,bt=nt.length,wt=BASE64_MAP$1;for(it=0;it<bt;it++)if(rt=wt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;st+=6}return st%8===0}function constructYamlBinary$1(nt){var rt,it,st=nt.replace(/[\r\n=]/g,""),bt=st.length,wt=BASE64_MAP$1,Et=0,kt=[];for(rt=0;rt<bt;rt++)rt%4===0&&rt&&(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)),Et=Et<<6|wt.indexOf(st.charAt(rt));return it=bt%4*6,it===0?(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)):it===18?(kt.push(Et>>10&255),kt.push(Et>>2&255)):it===12&&kt.push(Et>>4&255),new Uint8Array(kt)}function representYamlBinary$1(nt){var rt="",it=0,st,bt,wt=nt.length,Et=BASE64_MAP$1;for(st=0;st<wt;st++)st%3===0&&st&&(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]),it=(it<<8)+nt[st];return bt=wt%3,bt===0?(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]):bt===2?(rt+=Et[it>>10&63],rt+=Et[it>>4&63],rt+=Et[it<<2&63],rt+=Et[64]):bt===1&&(rt+=Et[it>>2&63],rt+=Et[it<<4&63],rt+=Et[64],rt+=Et[64]),rt}function isBinary$1(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary$1=new type$1("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary$1,construct:constructYamlBinary$1,predicate:isBinary$1,represent:representYamlBinary$1}),_hasOwnProperty$3$1=Object.prototype.hasOwnProperty,_toString$2$1=Object.prototype.toString;function resolveYamlOmap$1(nt){if(nt===null)return!0;var rt=[],it,st,bt,wt,Et,kt=nt;for(it=0,st=kt.length;it<st;it+=1){if(bt=kt[it],Et=!1,_toString$2$1.call(bt)!=="[object Object]")return!1;for(wt in bt)if(_hasOwnProperty$3$1.call(bt,wt))if(!Et)Et=!0;else return!1;if(!Et)return!1;if(rt.indexOf(wt)===-1)rt.push(wt);else return!1}return!0}function constructYamlOmap$1(nt){return nt!==null?nt:[]}var omap$1=new type$1("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap$1,construct:constructYamlOmap$1}),_toString$1$1=Object.prototype.toString;function resolveYamlPairs$1(nt){if(nt===null)return!0;var rt,it,st,bt,wt,Et=nt;for(wt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1){if(st=Et[rt],_toString$1$1.call(st)!=="[object Object]"||(bt=Object.keys(st),bt.length!==1))return!1;wt[rt]=[bt[0],st[bt[0]]]}return!0}function constructYamlPairs$1(nt){if(nt===null)return[];var rt,it,st,bt,wt,Et=nt;for(wt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1)st=Et[rt],bt=Object.keys(st),wt[rt]=[bt[0],st[bt[0]]];return wt}var pairs$1=new type$1("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs$1,construct:constructYamlPairs$1}),_hasOwnProperty$2$1=Object.prototype.hasOwnProperty;function resolveYamlSet$1(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2$1.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet$1(nt){return nt!==null?nt:{}}var set$3=new type$1("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet$1,construct:constructYamlSet$1}),_default$1=core$1.extend({implicit:[timestamp$1,merge$4],explicit:[binary$1,omap$1,pairs$1,set$3]}),_hasOwnProperty$1$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN$1=1,CONTEXT_FLOW_OUT$1=2,CONTEXT_BLOCK_IN$1=3,CONTEXT_BLOCK_OUT$1=4,CHOMPING_CLIP$1=1,CHOMPING_STRIP$1=2,CHOMPING_KEEP$1=3,PATTERN_NON_PRINTABLE$1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS$1=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS$1=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE$1=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI$1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class$1(nt){return Object.prototype.toString.call(nt)}function is_EOL$1(nt){return nt===10||nt===13}function is_WHITE_SPACE$1(nt){return nt===9||nt===32}function is_WS_OR_EOL$1(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR$1(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode$1(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen$1(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode$1(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence$1(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint$1(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck$1=new Array(256),simpleEscapeMap$1=new Array(256);for(var i$5=0;i$5<256;i$5++)simpleEscapeCheck$1[i$5]=simpleEscapeSequence$1(i$5)?1:0,simpleEscapeMap$1[i$5]=simpleEscapeSequence$1(i$5);function State$1$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default$1,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError$1(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet$1(it),new exception$1(rt,it)}function throwError$1(nt,rt){throw generateError$1(nt,rt)}function throwWarning$1(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError$1(nt,rt))}var directiveHandlers$1={YAML:function(rt,it,st){var bt,wt,Et;rt.version!==null&&throwError$1(rt,"duplication of %YAML directive"),st.length!==1&&throwError$1(rt,"YAML directive accepts exactly one argument"),bt=/^([0-9]+)\.([0-9]+)$/.exec(st[0]),bt===null&&throwError$1(rt,"ill-formed argument of the YAML directive"),wt=parseInt(bt[1],10),Et=parseInt(bt[2],10),wt!==1&&throwError$1(rt,"unacceptable YAML version of the document"),rt.version=st[0],rt.checkLineBreaks=Et<2,Et!==1&&Et!==2&&throwWarning$1(rt,"unsupported YAML version of the document")},TAG:function(rt,it,st){var bt,wt;st.length!==2&&throwError$1(rt,"TAG directive accepts exactly two arguments"),bt=st[0],wt=st[1],PATTERN_TAG_HANDLE$1.test(bt)||throwError$1(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1$1.call(rt.tagMap,bt)&&throwError$1(rt,'there is a previously declared suffix for "'+bt+'" tag handle'),PATTERN_TAG_URI$1.test(wt)||throwError$1(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{wt=decodeURIComponent(wt)}catch{throwError$1(rt,"tag prefix is malformed: "+wt)}rt.tagMap[bt]=wt}};function captureSegment$1(nt,rt,it,st){var bt,wt,Et,kt;if(rt<it){if(kt=nt.input.slice(rt,it),st)for(bt=0,wt=kt.length;bt<wt;bt+=1)Et=kt.charCodeAt(bt),Et===9||32<=Et&&Et<=1114111||throwError$1(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE$1.test(kt)&&throwError$1(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings$1(nt,rt,it,st){var bt,wt,Et,kt;for(common$2.isObject(it)||throwError$1(nt,"cannot merge mappings; the provided source object is unacceptable"),bt=Object.keys(it),Et=0,kt=bt.length;Et<kt;Et+=1)wt=bt[Et],_hasOwnProperty$1$1.call(rt,wt)||(rt[wt]=it[wt],st[wt]=!0)}function storeMappingPair$1(nt,rt,it,st,bt,wt,Et,kt,Lt){var Ot,Rt;if(Array.isArray(bt))for(bt=Array.prototype.slice.call(bt),Ot=0,Rt=bt.length;Ot<Rt;Ot+=1)Array.isArray(bt[Ot])&&throwError$1(nt,"nested arrays are not supported inside keys"),typeof bt=="object"&&_class$1(bt[Ot])==="[object Object]"&&(bt[Ot]="[object Object]");if(typeof bt=="object"&&_class$1(bt)==="[object Object]"&&(bt="[object Object]"),bt=String(bt),rt===null&&(rt={}),st==="tag:yaml.org,2002:merge")if(Array.isArray(wt))for(Ot=0,Rt=wt.length;Ot<Rt;Ot+=1)mergeMappings$1(nt,rt,wt[Ot],it);else mergeMappings$1(nt,rt,wt,it);else!nt.json&&!_hasOwnProperty$1$1.call(it,bt)&&_hasOwnProperty$1$1.call(rt,bt)&&(nt.line=Et||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError$1(nt,"duplicated mapping key")),bt==="__proto__"?Object.defineProperty(rt,bt,{configurable:!0,enumerable:!0,writable:!0,value:wt}):rt[bt]=wt,delete it[bt];return rt}function readLineBreak$1(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError$1(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace$1(nt,rt,it){for(var st=0,bt=nt.input.charCodeAt(nt.position);bt!==0;){for(;is_WHITE_SPACE$1(bt);)bt===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),bt=nt.input.charCodeAt(++nt.position);if(rt&&bt===35)do bt=nt.input.charCodeAt(++nt.position);while(bt!==10&&bt!==13&&bt!==0);if(is_EOL$1(bt))for(readLineBreak$1(nt),bt=nt.input.charCodeAt(nt.position),st++,nt.lineIndent=0;bt===32;)nt.lineIndent++,bt=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&st!==0&&nt.lineIndent<it&&throwWarning$1(nt,"deficient indentation"),st}function testDocumentSeparator$1(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL$1(it)))}function writeFoldedLines$1(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common$2.repeat(`
`,rt-1))}function readPlainScalar$1(nt,rt,it){var st,bt,wt,Et,kt,Lt,Ot,Rt,Dt=nt.kind,Bt=nt.result,Ft;if(Ft=nt.input.charCodeAt(nt.position),is_WS_OR_EOL$1(Ft)||is_FLOW_INDICATOR$1(Ft)||Ft===35||Ft===38||Ft===42||Ft===33||Ft===124||Ft===62||Ft===39||Ft===34||Ft===37||Ft===64||Ft===96||(Ft===63||Ft===45)&&(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(bt)||it&&is_FLOW_INDICATOR$1(bt)))return!1;for(nt.kind="scalar",nt.result="",wt=Et=nt.position,kt=!1;Ft!==0;){if(Ft===58){if(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(bt)||it&&is_FLOW_INDICATOR$1(bt))break}else if(Ft===35){if(st=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL$1(st))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator$1(nt)||it&&is_FLOW_INDICATOR$1(Ft))break;if(is_EOL$1(Ft))if(Lt=nt.line,Ot=nt.lineStart,Rt=nt.lineIndent,skipSeparationSpace$1(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Ft=nt.input.charCodeAt(nt.position);continue}else{nt.position=Et,nt.line=Lt,nt.lineStart=Ot,nt.lineIndent=Rt;break}}kt&&(captureSegment$1(nt,wt,Et,!1),writeFoldedLines$1(nt,nt.line-Lt),wt=Et=nt.position,kt=!1),is_WHITE_SPACE$1(Ft)||(Et=nt.position+1),Ft=nt.input.charCodeAt(++nt.position)}return captureSegment$1(nt,wt,Et,!1),nt.result?!0:(nt.kind=Dt,nt.result=Bt,!1)}function readSingleQuotedScalar$1(nt,rt){var it,st,bt;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,st=bt=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment$1(nt,st,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)st=nt.position,nt.position++,bt=nt.position;else return!0;else is_EOL$1(it)?(captureSegment$1(nt,st,bt,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),st=bt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,bt=nt.position);throwError$1(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar$1(nt,rt){var it,st,bt,wt,Et,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=st=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment$1(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment$1(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL$1(kt))skipSeparationSpace$1(nt,!1,rt);else if(kt<256&&simpleEscapeCheck$1[kt])nt.result+=simpleEscapeMap$1[kt],nt.position++;else if((Et=escapedHexLen$1(kt))>0){for(bt=Et,wt=0;bt>0;bt--)kt=nt.input.charCodeAt(++nt.position),(Et=fromHexCode$1(kt))>=0?wt=(wt<<4)+Et:throwError$1(nt,"expected hexadecimal character");nt.result+=charFromCodepoint$1(wt),nt.position++}else throwError$1(nt,"unknown escape sequence");it=st=nt.position}else is_EOL$1(kt)?(captureSegment$1(nt,it,st,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),it=st=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,st=nt.position)}throwError$1(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection$1(nt,rt){var it=!0,st,bt,wt,Et=nt.tag,kt,Lt=nt.anchor,Ot,Rt,Dt,Bt,Ft,Yt=Object.create(null),Jt,Wt,Qt,rn;if(rn=nt.input.charCodeAt(nt.position),rn===91)Rt=93,Ft=!1,kt=[];else if(rn===123)Rt=125,Ft=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),rn=nt.input.charCodeAt(++nt.position);rn!==0;){if(skipSeparationSpace$1(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===Rt)return nt.position++,nt.tag=Et,nt.anchor=Lt,nt.kind=Ft?"mapping":"sequence",nt.result=kt,!0;it?rn===44&&throwError$1(nt,"expected the node content, but found ','"):throwError$1(nt,"missed comma between flow collection entries"),Wt=Jt=Qt=null,Dt=Bt=!1,rn===63&&(Ot=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(Ot)&&(Dt=Bt=!0,nt.position++,skipSeparationSpace$1(nt,!0,rt))),st=nt.line,bt=nt.lineStart,wt=nt.position,composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Wt=nt.tag,Jt=nt.result,skipSeparationSpace$1(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),(Bt||nt.line===st)&&rn===58&&(Dt=!0,rn=nt.input.charCodeAt(++nt.position),skipSeparationSpace$1(nt,!0,rt),composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Qt=nt.result),Ft?storeMappingPair$1(nt,kt,Yt,Wt,Jt,Qt,st,bt,wt):Dt?kt.push(storeMappingPair$1(nt,null,Yt,Wt,Jt,Qt,st,bt,wt)):kt.push(Jt),skipSeparationSpace$1(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===44?(it=!0,rn=nt.input.charCodeAt(++nt.position)):it=!1}throwError$1(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar$1(nt,rt){var it,st,bt=CHOMPING_CLIP$1,wt=!1,Et=!1,kt=rt,Lt=0,Ot=!1,Rt,Dt;if(Dt=nt.input.charCodeAt(nt.position),Dt===124)st=!1;else if(Dt===62)st=!0;else return!1;for(nt.kind="scalar",nt.result="";Dt!==0;)if(Dt=nt.input.charCodeAt(++nt.position),Dt===43||Dt===45)CHOMPING_CLIP$1===bt?bt=Dt===43?CHOMPING_KEEP$1:CHOMPING_STRIP$1:throwError$1(nt,"repeat of a chomping mode identifier");else if((Rt=fromDecimalCode$1(Dt))>=0)Rt===0?throwError$1(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Et?throwError$1(nt,"repeat of an indentation width identifier"):(kt=rt+Rt-1,Et=!0);else break;if(is_WHITE_SPACE$1(Dt)){do Dt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE$1(Dt));if(Dt===35)do Dt=nt.input.charCodeAt(++nt.position);while(!is_EOL$1(Dt)&&Dt!==0)}for(;Dt!==0;){for(readLineBreak$1(nt),nt.lineIndent=0,Dt=nt.input.charCodeAt(nt.position);(!Et||nt.lineIndent<kt)&&Dt===32;)nt.lineIndent++,Dt=nt.input.charCodeAt(++nt.position);if(!Et&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL$1(Dt)){Lt++;continue}if(nt.lineIndent<kt){bt===CHOMPING_KEEP$1?nt.result+=common$2.repeat(`
`,wt?1+Lt:Lt):bt===CHOMPING_CLIP$1&&wt&&(nt.result+=`
`);break}for(st?is_WHITE_SPACE$1(Dt)?(Ot=!0,nt.result+=common$2.repeat(`
`,wt?1+Lt:Lt)):Ot?(Ot=!1,nt.result+=common$2.repeat(`
`,Lt+1)):Lt===0?wt&&(nt.result+=" "):nt.result+=common$2.repeat(`
`,Lt):nt.result+=common$2.repeat(`
`,wt?1+Lt:Lt),wt=!0,Et=!0,Lt=0,it=nt.position;!is_EOL$1(Dt)&&Dt!==0;)Dt=nt.input.charCodeAt(++nt.position);captureSegment$1(nt,it,nt.position,!1)}return!0}function readBlockSequence$1(nt,rt){var it,st=nt.tag,bt=nt.anchor,wt=[],Et,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=wt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Et=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL$1(Et))));){if(kt=!0,nt.position++,skipSeparationSpace$1(nt,!0,-1)&&nt.lineIndent<=rt){wt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode$1(nt,rt,CONTEXT_BLOCK_IN$1,!1,!0),wt.push(nt.result),skipSeparationSpace$1(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError$1(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=st,nt.anchor=bt,nt.kind="sequence",nt.result=wt,!0):!1}function readBlockMapping$1(nt,rt,it){var st,bt,wt,Et,kt,Lt,Ot=nt.tag,Rt=nt.anchor,Dt={},Bt=Object.create(null),Ft=null,Yt=null,Jt=null,Wt=!1,Qt=!1,rn;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=Dt),rn=nt.input.charCodeAt(nt.position);rn!==0;){if(!Wt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),st=nt.input.charCodeAt(nt.position+1),wt=nt.line,(rn===63||rn===58)&&is_WS_OR_EOL$1(st))rn===63?(Wt&&(storeMappingPair$1(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Jt=null),Qt=!0,Wt=!0,bt=!0):Wt?(Wt=!1,bt=!0):throwError$1(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,rn=st;else{if(Et=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode$1(nt,it,CONTEXT_FLOW_OUT$1,!1,!0))break;if(nt.line===wt){for(rn=nt.input.charCodeAt(nt.position);is_WHITE_SPACE$1(rn);)rn=nt.input.charCodeAt(++nt.position);if(rn===58)rn=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL$1(rn)||throwError$1(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Wt&&(storeMappingPair$1(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Jt=null),Qt=!0,Wt=!1,bt=!1,Ft=nt.tag,Yt=nt.result;else if(Qt)throwError$1(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=Ot,nt.anchor=Rt,!0}else if(Qt)throwError$1(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=Ot,nt.anchor=Rt,!0}if((nt.line===wt||nt.lineIndent>rt)&&(Wt&&(Et=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode$1(nt,rt,CONTEXT_BLOCK_OUT$1,!0,bt)&&(Wt?Yt=nt.result:Jt=nt.result),Wt||(storeMappingPair$1(nt,Dt,Bt,Ft,Yt,Jt,Et,kt,Lt),Ft=Yt=Jt=null),skipSeparationSpace$1(nt,!0,-1),rn=nt.input.charCodeAt(nt.position)),(nt.line===wt||nt.lineIndent>rt)&&rn!==0)throwError$1(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Wt&&storeMappingPair$1(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Qt&&(nt.tag=Ot,nt.anchor=Rt,nt.kind="mapping",nt.result=Dt),Qt}function readTagProperty$1(nt){var rt,it=!1,st=!1,bt,wt,Et;if(Et=nt.input.charCodeAt(nt.position),Et!==33)return!1;if(nt.tag!==null&&throwError$1(nt,"duplication of a tag property"),Et=nt.input.charCodeAt(++nt.position),Et===60?(it=!0,Et=nt.input.charCodeAt(++nt.position)):Et===33?(st=!0,bt="!!",Et=nt.input.charCodeAt(++nt.position)):bt="!",rt=nt.position,it){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&Et!==62);nt.position<nt.length?(wt=nt.input.slice(rt,nt.position),Et=nt.input.charCodeAt(++nt.position)):throwError$1(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Et!==0&&!is_WS_OR_EOL$1(Et);)Et===33&&(st?throwError$1(nt,"tag suffix cannot contain exclamation marks"):(bt=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE$1.test(bt)||throwError$1(nt,"named tag handle cannot contain such characters"),st=!0,rt=nt.position+1)),Et=nt.input.charCodeAt(++nt.position);wt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS$1.test(wt)&&throwError$1(nt,"tag suffix cannot contain flow indicator characters")}wt&&!PATTERN_TAG_URI$1.test(wt)&&throwError$1(nt,"tag name cannot contain such characters: "+wt);try{wt=decodeURIComponent(wt)}catch{throwError$1(nt,"tag name is malformed: "+wt)}return it?nt.tag=wt:_hasOwnProperty$1$1.call(nt.tagMap,bt)?nt.tag=nt.tagMap[bt]+wt:bt==="!"?nt.tag="!"+wt:bt==="!!"?nt.tag="tag:yaml.org,2002:"+wt:throwError$1(nt,'undeclared tag handle "'+bt+'"'),!0}function readAnchorProperty$1(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError$1(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL$1(it)&&!is_FLOW_INDICATOR$1(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias$1(nt){var rt,it,st;if(st=nt.input.charCodeAt(nt.position),st!==42)return!1;for(st=nt.input.charCodeAt(++nt.position),rt=nt.position;st!==0&&!is_WS_OR_EOL$1(st)&&!is_FLOW_INDICATOR$1(st);)st=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1$1.call(nt.anchorMap,it)||throwError$1(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace$1(nt,!0,-1),!0}function composeNode$1(nt,rt,it,st,bt){var wt,Et,kt,Lt=1,Ot=!1,Rt=!1,Dt,Bt,Ft,Yt,Jt,Wt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,wt=Et=kt=CONTEXT_BLOCK_OUT$1===it||CONTEXT_BLOCK_IN$1===it,st&&skipSeparationSpace$1(nt,!0,-1)&&(Ot=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty$1(nt)||readAnchorProperty$1(nt);)skipSeparationSpace$1(nt,!0,-1)?(Ot=!0,kt=wt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=Ot||bt),(Lt===1||CONTEXT_BLOCK_OUT$1===it)&&(CONTEXT_FLOW_IN$1===it||CONTEXT_FLOW_OUT$1===it?Jt=rt:Jt=rt+1,Wt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence$1(nt,Wt)||readBlockMapping$1(nt,Wt,Jt))||readFlowCollection$1(nt,Jt)?Rt=!0:(Et&&readBlockScalar$1(nt,Jt)||readSingleQuotedScalar$1(nt,Jt)||readDoubleQuotedScalar$1(nt,Jt)?Rt=!0:readAlias$1(nt)?(Rt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError$1(nt,"alias node should not have any properties")):readPlainScalar$1(nt,Jt,CONTEXT_FLOW_IN$1===it)&&(Rt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Rt=kt&&readBlockSequence$1(nt,Wt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError$1(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),Dt=0,Bt=nt.implicitTypes.length;Dt<Bt;Dt+=1)if(Yt=nt.implicitTypes[Dt],Yt.resolve(nt.result)){nt.result=Yt.construct(nt.result),nt.tag=Yt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Yt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Yt=null,Ft=nt.typeMap.multi[nt.kind||"fallback"],Dt=0,Bt=Ft.length;Dt<Bt;Dt+=1)if(nt.tag.slice(0,Ft[Dt].tag.length)===Ft[Dt].tag){Yt=Ft[Dt];break}Yt||throwError$1(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Yt.kind!==nt.kind&&throwError$1(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Yt.kind+'", not "'+nt.kind+'"'),Yt.resolve(nt.result,nt.tag)?(nt.result=Yt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError$1(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Rt}function readDocument$1(nt){var rt=nt.position,it,st,bt,wt=!1,Et;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Et=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace$1(nt,!0,-1),Et=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Et!==37));){for(wt=!0,Et=nt.input.charCodeAt(++nt.position),it=nt.position;Et!==0&&!is_WS_OR_EOL$1(Et);)Et=nt.input.charCodeAt(++nt.position);for(st=nt.input.slice(it,nt.position),bt=[],st.length<1&&throwError$1(nt,"directive name must not be less than one character in length");Et!==0;){for(;is_WHITE_SPACE$1(Et);)Et=nt.input.charCodeAt(++nt.position);if(Et===35){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&!is_EOL$1(Et));break}if(is_EOL$1(Et))break;for(it=nt.position;Et!==0&&!is_WS_OR_EOL$1(Et);)Et=nt.input.charCodeAt(++nt.position);bt.push(nt.input.slice(it,nt.position))}Et!==0&&readLineBreak$1(nt),_hasOwnProperty$1$1.call(directiveHandlers$1,st)?directiveHandlers$1[st](nt,st,bt):throwWarning$1(nt,'unknown document directive "'+st+'"')}if(skipSeparationSpace$1(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace$1(nt,!0,-1)):wt&&throwError$1(nt,"directives end mark is expected"),composeNode$1(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT$1,!1,!0),skipSeparationSpace$1(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS$1.test(nt.input.slice(rt,nt.position))&&throwWarning$1(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator$1(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace$1(nt,!0,-1));return}if(nt.position<nt.length-1)throwError$1(nt,"end of the stream or a document separator is expected");else return}function loadDocuments$1(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1$1(nt,rt),st=nt.indexOf("\0");for(st!==-1&&(it.position=st,throwError$1(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument$1(it);return it.documents}function loadAll$1$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var st=loadDocuments$1(nt,it);if(typeof rt!="function")return st;for(var bt=0,wt=st.length;bt<wt;bt+=1)rt(st[bt])}function load$1$1(nt,rt){var it=loadDocuments$1(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception$1("expected a single document in the stream, but found more")}}var loadAll_1$1=loadAll$1$1,load_1$1=load$1$1,loader$1={loadAll:loadAll_1$1,load:load_1$1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(nt,rt){var it,st,bt,wt,Et,kt,Lt;if(rt===null)return{};for(it={},st=Object.keys(rt),bt=0,wt=st.length;bt<wt;bt+=1)Et=st[bt],kt=String(rt[Et]),Et.slice(0,2)==="!!"&&(Et="tag:yaml.org,2002:"+Et.slice(2)),Lt=nt.compiledTypeMap.fallback[Et],Lt&&_hasOwnProperty.call(Lt.styleAliases,kt)&&(kt=Lt.styleAliases[kt]),it[Et]=kt;return it}function encodeHex(nt){var rt,it,st;if(rt=nt.toString(16).toUpperCase(),nt<=255)it="x",st=2;else if(nt<=65535)it="u",st=4;else if(nt<=4294967295)it="U",st=8;else throw new exception$1("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+it+common$2.repeat("0",st-rt.length)+rt}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(nt){this.schema=nt.schema||_default$1,this.indent=Math.max(1,nt.indent||2),this.noArrayIndent=nt.noArrayIndent||!1,this.skipInvalid=nt.skipInvalid||!1,this.flowLevel=common$2.isNothing(nt.flowLevel)?-1:nt.flowLevel,this.styleMap=compileStyleMap(this.schema,nt.styles||null),this.sortKeys=nt.sortKeys||!1,this.lineWidth=nt.lineWidth||80,this.noRefs=nt.noRefs||!1,this.noCompatMode=nt.noCompatMode||!1,this.condenseFlow=nt.condenseFlow||!1,this.quotingType=nt.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=nt.forceQuotes||!1,this.replacer=typeof nt.replacer=="function"?nt.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(nt,rt){for(var it=common$2.repeat(" ",rt),st=0,bt=-1,wt="",Et,kt=nt.length;st<kt;)bt=nt.indexOf(`
`,st),bt===-1?(Et=nt.slice(st),st=kt):(Et=nt.slice(st,bt+1),st=bt+1),Et.length&&Et!==`
`&&(wt+=it),wt+=Et;return wt}function generateNextLine(nt,rt){return`
`+common$2.repeat(" ",nt.indent*rt)}function testImplicitResolving(nt,rt){var it,st,bt;for(it=0,st=nt.implicitTypes.length;it<st;it+=1)if(bt=nt.implicitTypes[it],bt.resolve(rt))return!0;return!1}function isWhitespace(nt){return nt===CHAR_SPACE||nt===CHAR_TAB}function isPrintable(nt){return 32<=nt&&nt<=126||161<=nt&&nt<=55295&&nt!==8232&&nt!==8233||57344<=nt&&nt<=65533&&nt!==CHAR_BOM||65536<=nt&&nt<=1114111}function isNsCharOrWhitespace(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&nt!==CHAR_CARRIAGE_RETURN&&nt!==CHAR_LINE_FEED}function isPlainSafe(nt,rt,it){var st=isNsCharOrWhitespace(nt),bt=st&&!isWhitespace(nt);return(it?st:st&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET)&&nt!==CHAR_SHARP&&!(rt===CHAR_COLON&&!bt)||isNsCharOrWhitespace(rt)&&!isWhitespace(rt)&&nt===CHAR_SHARP||rt===CHAR_COLON&&bt}function isPlainSafeFirst(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&!isWhitespace(nt)&&nt!==CHAR_MINUS&&nt!==CHAR_QUESTION&&nt!==CHAR_COLON&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET&&nt!==CHAR_SHARP&&nt!==CHAR_AMPERSAND&&nt!==CHAR_ASTERISK&&nt!==CHAR_EXCLAMATION&&nt!==CHAR_VERTICAL_LINE&&nt!==CHAR_EQUALS&&nt!==CHAR_GREATER_THAN&&nt!==CHAR_SINGLE_QUOTE&&nt!==CHAR_DOUBLE_QUOTE&&nt!==CHAR_PERCENT&&nt!==CHAR_COMMERCIAL_AT&&nt!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(nt){return!isWhitespace(nt)&&nt!==CHAR_COLON}function codePointAt(nt,rt){var it=nt.charCodeAt(rt),st;return it>=55296&&it<=56319&&rt+1<nt.length&&(st=nt.charCodeAt(rt+1),st>=56320&&st<=57343)?(it-55296)*1024+st-56320+65536:it}function needIndentIndicator(nt){var rt=/^\n* /;return rt.test(nt)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(nt,rt,it,st,bt,wt,Et,kt){var Lt,Ot=0,Rt=null,Dt=!1,Bt=!1,Ft=st!==-1,Yt=-1,Jt=isPlainSafeFirst(codePointAt(nt,0))&&isPlainSafeLast(codePointAt(nt,nt.length-1));if(rt||Et)for(Lt=0;Lt<nt.length;Ot>=65536?Lt+=2:Lt++){if(Ot=codePointAt(nt,Lt),!isPrintable(Ot))return STYLE_DOUBLE;Jt=Jt&&isPlainSafe(Ot,Rt,kt),Rt=Ot}else{for(Lt=0;Lt<nt.length;Ot>=65536?Lt+=2:Lt++){if(Ot=codePointAt(nt,Lt),Ot===CHAR_LINE_FEED)Dt=!0,Ft&&(Bt=Bt||Lt-Yt-1>st&&nt[Yt+1]!==" ",Yt=Lt);else if(!isPrintable(Ot))return STYLE_DOUBLE;Jt=Jt&&isPlainSafe(Ot,Rt,kt),Rt=Ot}Bt=Bt||Ft&&Lt-Yt-1>st&&nt[Yt+1]!==" "}return!Dt&&!Bt?Jt&&!Et&&!bt(nt)?STYLE_PLAIN:wt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:it>9&&needIndentIndicator(nt)?STYLE_DOUBLE:Et?wt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:Bt?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(nt,rt,it,st,bt){nt.dump=function(){if(rt.length===0)return nt.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!nt.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(rt)!==-1||DEPRECATED_BASE60_SYNTAX.test(rt)))return nt.quotingType===QUOTING_TYPE_DOUBLE?'"'+rt+'"':"'"+rt+"'";var wt=nt.indent*Math.max(1,it),Et=nt.lineWidth===-1?-1:Math.max(Math.min(nt.lineWidth,40),nt.lineWidth-wt),kt=st||nt.flowLevel>-1&&it>=nt.flowLevel;function Lt(Ot){return testImplicitResolving(nt,Ot)}switch(chooseScalarStyle(rt,kt,nt.indent,Et,Lt,nt.quotingType,nt.forceQuotes&&!st,bt)){case STYLE_PLAIN:return rt;case STYLE_SINGLE:return"'"+rt.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(rt,wt));case STYLE_FOLDED:return">"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(foldString(rt,Et),wt));case STYLE_DOUBLE:return'"'+escapeString(rt)+'"';default:throw new exception$1("impossible error: invalid scalar style")}}()}function blockHeader(nt,rt){var it=needIndentIndicator(nt)?String(rt):"",st=nt[nt.length-1]===`
`,bt=st&&(nt[nt.length-2]===`
`||nt===`
`),wt=bt?"+":st?"":"-";return it+wt+`
`}function dropEndingNewline(nt){return nt[nt.length-1]===`
`?nt.slice(0,-1):nt}function foldString(nt,rt){for(var it=/(\n+)([^\n]*)/g,st=function(){var Ot=nt.indexOf(`
`);return Ot=Ot!==-1?Ot:nt.length,it.lastIndex=Ot,foldLine(nt.slice(0,Ot),rt)}(),bt=nt[0]===`
`||nt[0]===" ",wt,Et;Et=it.exec(nt);){var kt=Et[1],Lt=Et[2];wt=Lt[0]===" ",st+=kt+(!bt&&!wt&&Lt!==""?`
`:"")+foldLine(Lt,rt),bt=wt}return st}function foldLine(nt,rt){if(nt===""||nt[0]===" ")return nt;for(var it=/ [^ ]/g,st,bt=0,wt,Et=0,kt=0,Lt="";st=it.exec(nt);)kt=st.index,kt-bt>rt&&(wt=Et>bt?Et:kt,Lt+=`
`+nt.slice(bt,wt),bt=wt+1),Et=kt;return Lt+=`
`,nt.length-bt>rt&&Et>bt?Lt+=nt.slice(bt,Et)+`
`+nt.slice(Et+1):Lt+=nt.slice(bt),Lt.slice(1)}function escapeString(nt){for(var rt="",it=0,st,bt=0;bt<nt.length;it>=65536?bt+=2:bt++)it=codePointAt(nt,bt),st=ESCAPE_SEQUENCES[it],!st&&isPrintable(it)?(rt+=nt[bt],it>=65536&&(rt+=nt[bt+1])):rt+=st||encodeHex(it);return rt}function writeFlowSequence(nt,rt,it){var st="",bt=nt.tag,wt,Et,kt;for(wt=0,Et=it.length;wt<Et;wt+=1)kt=it[wt],nt.replacer&&(kt=nt.replacer.call(it,String(wt),kt)),(writeNode(nt,rt,kt,!1,!1)||typeof kt>"u"&&writeNode(nt,rt,null,!1,!1))&&(st!==""&&(st+=","+(nt.condenseFlow?"":" ")),st+=nt.dump);nt.tag=bt,nt.dump="["+st+"]"}function writeBlockSequence(nt,rt,it,st){var bt="",wt=nt.tag,Et,kt,Lt;for(Et=0,kt=it.length;Et<kt;Et+=1)Lt=it[Et],nt.replacer&&(Lt=nt.replacer.call(it,String(Et),Lt)),(writeNode(nt,rt+1,Lt,!0,!0,!1,!0)||typeof Lt>"u"&&writeNode(nt,rt+1,null,!0,!0,!1,!0))&&((!st||bt!=="")&&(bt+=generateNextLine(nt,rt)),nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?bt+="-":bt+="- ",bt+=nt.dump);nt.tag=wt,nt.dump=bt||"[]"}function writeFlowMapping(nt,rt,it){var st="",bt=nt.tag,wt=Object.keys(it),Et,kt,Lt,Ot,Rt;for(Et=0,kt=wt.length;Et<kt;Et+=1)Rt="",st!==""&&(Rt+=", "),nt.condenseFlow&&(Rt+='"'),Lt=wt[Et],Ot=it[Lt],nt.replacer&&(Ot=nt.replacer.call(it,Lt,Ot)),writeNode(nt,rt,Lt,!1,!1)&&(nt.dump.length>1024&&(Rt+="? "),Rt+=nt.dump+(nt.condenseFlow?'"':"")+":"+(nt.condenseFlow?"":" "),writeNode(nt,rt,Ot,!1,!1)&&(Rt+=nt.dump,st+=Rt));nt.tag=bt,nt.dump="{"+st+"}"}function writeBlockMapping(nt,rt,it,st){var bt="",wt=nt.tag,Et=Object.keys(it),kt,Lt,Ot,Rt,Dt,Bt;if(nt.sortKeys===!0)Et.sort();else if(typeof nt.sortKeys=="function")Et.sort(nt.sortKeys);else if(nt.sortKeys)throw new exception$1("sortKeys must be a boolean or a function");for(kt=0,Lt=Et.length;kt<Lt;kt+=1)Bt="",(!st||bt!=="")&&(Bt+=generateNextLine(nt,rt)),Ot=Et[kt],Rt=it[Ot],nt.replacer&&(Rt=nt.replacer.call(it,Ot,Rt)),writeNode(nt,rt+1,Ot,!0,!0,!0)&&(Dt=nt.tag!==null&&nt.tag!=="?"||nt.dump&&nt.dump.length>1024,Dt&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Bt+="?":Bt+="? "),Bt+=nt.dump,Dt&&(Bt+=generateNextLine(nt,rt)),writeNode(nt,rt+1,Rt,!0,Dt)&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Bt+=":":Bt+=": ",Bt+=nt.dump,bt+=Bt));nt.tag=wt,nt.dump=bt||"{}"}function detectType$1(nt,rt,it){var st,bt,wt,Et,kt,Lt;for(bt=it?nt.explicitTypes:nt.implicitTypes,wt=0,Et=bt.length;wt<Et;wt+=1)if(kt=bt[wt],(kt.instanceOf||kt.predicate)&&(!kt.instanceOf||typeof rt=="object"&&rt instanceof kt.instanceOf)&&(!kt.predicate||kt.predicate(rt))){if(it?kt.multi&&kt.representName?nt.tag=kt.representName(rt):nt.tag=kt.tag:nt.tag="?",kt.represent){if(Lt=nt.styleMap[kt.tag]||kt.defaultStyle,_toString.call(kt.represent)==="[object Function]")st=kt.represent(rt,Lt);else if(_hasOwnProperty.call(kt.represent,Lt))st=kt.represent[Lt](rt,Lt);else throw new exception$1("!<"+kt.tag+'> tag resolver accepts not "'+Lt+'" style');nt.dump=st}return!0}return!1}function writeNode(nt,rt,it,st,bt,wt,Et){nt.tag=null,nt.dump=it,detectType$1(nt,it,!1)||detectType$1(nt,it,!0);var kt=_toString.call(nt.dump),Lt=st,Ot;st&&(st=nt.flowLevel<0||nt.flowLevel>rt);var Rt=kt==="[object Object]"||kt==="[object Array]",Dt,Bt;if(Rt&&(Dt=nt.duplicates.indexOf(it),Bt=Dt!==-1),(nt.tag!==null&&nt.tag!=="?"||Bt||nt.indent!==2&&rt>0)&&(bt=!1),Bt&&nt.usedDuplicates[Dt])nt.dump="*ref_"+Dt;else{if(Rt&&Bt&&!nt.usedDuplicates[Dt]&&(nt.usedDuplicates[Dt]=!0),kt==="[object Object]")st&&Object.keys(nt.dump).length!==0?(writeBlockMapping(nt,rt,nt.dump,bt),Bt&&(nt.dump="&ref_"+Dt+nt.dump)):(writeFlowMapping(nt,rt,nt.dump),Bt&&(nt.dump="&ref_"+Dt+" "+nt.dump));else if(kt==="[object Array]")st&&nt.dump.length!==0?(nt.noArrayIndent&&!Et&&rt>0?writeBlockSequence(nt,rt-1,nt.dump,bt):writeBlockSequence(nt,rt,nt.dump,bt),Bt&&(nt.dump="&ref_"+Dt+nt.dump)):(writeFlowSequence(nt,rt,nt.dump),Bt&&(nt.dump="&ref_"+Dt+" "+nt.dump));else if(kt==="[object String]")nt.tag!=="?"&&writeScalar(nt,nt.dump,rt,wt,Lt);else{if(kt==="[object Undefined]")return!1;if(nt.skipInvalid)return!1;throw new exception$1("unacceptable kind of an object to dump "+kt)}nt.tag!==null&&nt.tag!=="?"&&(Ot=encodeURI(nt.tag[0]==="!"?nt.tag.slice(1):nt.tag).replace(/!/g,"%21"),nt.tag[0]==="!"?Ot="!"+Ot:Ot.slice(0,18)==="tag:yaml.org,2002:"?Ot="!!"+Ot.slice(18):Ot="!<"+Ot+">",nt.dump=Ot+" "+nt.dump)}return!0}function getDuplicateReferences(nt,rt){var it=[],st=[],bt,wt;for(inspectNode(nt,it,st),bt=0,wt=st.length;bt<wt;bt+=1)rt.duplicates.push(it[st[bt]]);rt.usedDuplicates=new Array(wt)}function inspectNode(nt,rt,it){var st,bt,wt;if(nt!==null&&typeof nt=="object")if(bt=rt.indexOf(nt),bt!==-1)it.indexOf(bt)===-1&&it.push(bt);else if(rt.push(nt),Array.isArray(nt))for(bt=0,wt=nt.length;bt<wt;bt+=1)inspectNode(nt[bt],rt,it);else for(st=Object.keys(nt),bt=0,wt=st.length;bt<wt;bt+=1)inspectNode(nt[st[bt]],rt,it)}function dump$1(nt,rt){rt=rt||{};var it=new State(rt);it.noRefs||getDuplicateReferences(nt,it);var st=nt;return it.replacer&&(st=it.replacer.call({"":st},"",st)),writeNode(it,0,st,!0,!0)?it.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(nt,rt){return function(){throw new Error("Function yaml."+nt+" is removed in js-yaml 4. Use yaml."+rt+" instead, which is now safe by default.")}}var Type$3=type$1,Schema=schema$1,FAILSAFE_SCHEMA$1=failsafe$1,JSON_SCHEMA=json$1,CORE_SCHEMA=core$1,DEFAULT_SCHEMA=_default$1,load$2=loader$1.load,loadAll=loader$1.loadAll,dump=dumper.dump,YAMLException=exception$1,types$9={binary:binary$1,float:float$1,map:map$3,null:_null$1,pairs:pairs$1,set:set$3,timestamp:timestamp$1,bool:bool$1,int:int$1,merge:merge$4,omap:omap$1,seq:seq$2,str:str$1},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type:Type$3,Schema,FAILSAFE_SCHEMA:FAILSAFE_SCHEMA$1,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load:load$2,loadAll,dump,YAMLException,types:types$9,safeLoad,safeLoadAll,safeDump};function isTabbable(nt){const rt=nt.tagName.toLowerCase();return nt.getAttribute("tabindex")==="-1"||nt.hasAttribute("disabled")||nt.hasAttribute("aria-disabled")&&nt.getAttribute("aria-disabled")!=="false"||rt==="input"&&nt.getAttribute("type")==="radio"&&!nt.hasAttribute("checked")||nt.offsetParent===null||window.getComputedStyle(nt).visibility==="hidden"?!1:(rt==="audio"||rt==="video")&&nt.hasAttribute("controls")||nt.hasAttribute("tabindex")||nt.hasAttribute("contenteditable")&&nt.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(rt)}function getTabbableBoundary(nt){var rt,it;const st=[];function bt(kt){kt instanceof HTMLElement&&(st.push(kt),kt.shadowRoot!==null&&kt.shadowRoot.mode==="open"&&bt(kt.shadowRoot)),[...kt.children].forEach(Lt=>bt(Lt))}bt(nt);const wt=(rt=st.find(kt=>isTabbable(kt)))!=null?rt:null,Et=(it=st.reverse().find(kt=>isTabbable(kt)))!=null?it:null;return{start:wt,end:Et}}var activeModals=[],Modal$1=class{constructor(nt){this.tabDirection="forward",this.element=nt,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}activate(){activeModals.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){activeModals=activeModals.filter(nt=>nt!==this.element),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return activeModals[activeModals.length-1]===this.element}checkFocus(){if(this.isActive()&&!this.element.matches(":focus-within")){const{start:nt,end:rt}=getTabbableBoundary(this.element),it=this.tabDirection==="forward"?nt:rt;typeof(it==null?void 0:it.focus)=="function"&&it.focus({preventScroll:!0})}}handleFocusIn(){this.checkFocus()}handleKeyDown(nt){nt.key==="Tab"&&nt.shiftKey&&(this.tabDirection="backward",requestAnimationFrame(()=>this.checkFocus()))}handleKeyUp(){this.tabDirection="forward"}};function getOffset(nt,rt){return{top:Math.round(nt.getBoundingClientRect().top-rt.getBoundingClientRect().top),left:Math.round(nt.getBoundingClientRect().left-rt.getBoundingClientRect().left)}}var locks=new Set;function lockBodyScrolling(nt){locks.add(nt),document.body.classList.add("sl-scroll-lock")}function unlockBodyScrolling(nt){locks.delete(nt),locks.size===0&&document.body.classList.remove("sl-scroll-lock")}function scrollIntoView(nt,rt,it="vertical",st="smooth"){const bt=getOffset(nt,rt),wt=bt.top+rt.scrollTop,Et=bt.left+rt.scrollLeft,kt=rt.scrollLeft,Lt=rt.scrollLeft+rt.offsetWidth,Ot=rt.scrollTop,Rt=rt.scrollTop+rt.offsetHeight;(it==="horizontal"||it==="both")&&(Et<kt?rt.scrollTo({left:Et,behavior:st}):Et+nt.clientWidth>Lt&&rt.scrollTo({left:Et-rt.offsetWidth+nt.clientWidth,behavior:st})),(it==="vertical"||it==="both")&&(wt<Ot?rt.scrollTo({top:wt,behavior:st}):wt+nt.clientHeight>Rt&&rt.scrollTo({top:wt-rt.offsetHeight+nt.clientHeight,behavior:st}))}var t$3=window,e$3=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),n$3=new WeakMap,o$2=class{constructor(nt,rt,it){if(this._$cssResult$=!0,it!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=nt,this.t=rt}get styleSheet(){let nt=this.o;const rt=this.t;if(e$3&&nt===void 0){const it=rt!==void 0&&rt.length===1;it&&(nt=n$3.get(rt)),nt===void 0&&((this.o=nt=new CSSStyleSheet).replaceSync(this.cssText),it&&n$3.set(rt,nt))}return nt}toString(){return this.cssText}},r$1=nt=>new o$2(typeof nt=="string"?nt:nt+"",void 0,s$4),i$4=(nt,...rt)=>{const it=nt.length===1?nt[0]:rt.reduce((st,bt,wt)=>st+(Et=>{if(Et._$cssResult$===!0)return Et.cssText;if(typeof Et=="number")return Et;throw Error("Value passed to 'css' function must be a 'css' function result: "+Et+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(bt)+nt[wt+1],nt[0]);return new o$2(it,nt,s$4)},S=(nt,rt)=>{e$3?nt.adoptedStyleSheets=rt.map(it=>it instanceof CSSStyleSheet?it:it.styleSheet):rt.forEach(it=>{const st=document.createElement("style"),bt=t$3.litNonce;bt!==void 0&&st.setAttribute("nonce",bt),st.textContent=it.cssText,nt.appendChild(st)})},c$2=e$3?nt=>nt:nt=>nt instanceof CSSStyleSheet?(rt=>{let it="";for(const st of rt.cssRules)it+=st.cssText;return r$1(it)})(nt):nt,s2$1,e2$3=window,r2$1=e2$3.trustedTypes,h$2=r2$1?r2$1.emptyScript:"",o2$2=e2$3.reactiveElementPolyfillSupport,n2$1={toAttribute(nt,rt){switch(rt){case Boolean:nt=nt?h$2:null;break;case Object:case Array:nt=nt==null?nt:JSON.stringify(nt)}return nt},fromAttribute(nt,rt){let it=nt;switch(rt){case Boolean:it=nt!==null;break;case Number:it=nt===null?null:Number(nt);break;case Object:case Array:try{it=JSON.parse(nt)}catch{it=null}}return it}},a$2=(nt,rt)=>rt!==nt&&(rt==rt||nt==nt),l$3={attribute:!0,type:String,converter:n2$1,reflect:!1,hasChanged:a$2},d$2=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(nt){var rt;this.finalize(),((rt=this.h)!==null&&rt!==void 0?rt:this.h=[]).push(nt)}static get observedAttributes(){this.finalize();const nt=[];return this.elementProperties.forEach((rt,it)=>{const st=this._$Ep(it,rt);st!==void 0&&(this._$Ev.set(st,it),nt.push(st))}),nt}static createProperty(nt,rt=l$3){if(rt.state&&(rt.attribute=!1),this.finalize(),this.elementProperties.set(nt,rt),!rt.noAccessor&&!this.prototype.hasOwnProperty(nt)){const it=typeof nt=="symbol"?Symbol():"__"+nt,st=this.getPropertyDescriptor(nt,it,rt);st!==void 0&&Object.defineProperty(this.prototype,nt,st)}}static getPropertyDescriptor(nt,rt,it){return{get(){return this[rt]},set(st){const bt=this[nt];this[rt]=st,this.requestUpdate(nt,bt,it)},configurable:!0,enumerable:!0}}static getPropertyOptions(nt){return this.elementProperties.get(nt)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const nt=Object.getPrototypeOf(this);if(nt.finalize(),nt.h!==void 0&&(this.h=[...nt.h]),this.elementProperties=new Map(nt.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const rt=this.properties,it=[...Object.getOwnPropertyNames(rt),...Object.getOwnPropertySymbols(rt)];for(const st of it)this.createProperty(st,rt[st])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(nt){const rt=[];if(Array.isArray(nt)){const it=new Set(nt.flat(1/0).reverse());for(const st of it)rt.unshift(c$2(st))}else nt!==void 0&&rt.push(c$2(nt));return rt}static _$Ep(nt,rt){const it=rt.attribute;return it===!1?void 0:typeof it=="string"?it:typeof nt=="string"?nt.toLowerCase():void 0}u(){var nt;this._$E_=new Promise(rt=>this.enableUpdating=rt),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(nt=this.constructor.h)===null||nt===void 0||nt.forEach(rt=>rt(this))}addController(nt){var rt,it;((rt=this._$ES)!==null&&rt!==void 0?rt:this._$ES=[]).push(nt),this.renderRoot!==void 0&&this.isConnected&&((it=nt.hostConnected)===null||it===void 0||it.call(nt))}removeController(nt){var rt;(rt=this._$ES)===null||rt===void 0||rt.splice(this._$ES.indexOf(nt)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((nt,rt)=>{this.hasOwnProperty(rt)&&(this._$Ei.set(rt,this[rt]),delete this[rt])})}createRenderRoot(){var nt;const rt=(nt=this.shadowRoot)!==null&&nt!==void 0?nt:this.attachShadow(this.constructor.shadowRootOptions);return S(rt,this.constructor.elementStyles),rt}connectedCallback(){var nt;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(nt=this._$ES)===null||nt===void 0||nt.forEach(rt=>{var it;return(it=rt.hostConnected)===null||it===void 0?void 0:it.call(rt)})}enableUpdating(nt){}disconnectedCallback(){var nt;(nt=this._$ES)===null||nt===void 0||nt.forEach(rt=>{var it;return(it=rt.hostDisconnected)===null||it===void 0?void 0:it.call(rt)})}attributeChangedCallback(nt,rt,it){this._$AK(nt,it)}_$EO(nt,rt,it=l$3){var st;const bt=this.constructor._$Ep(nt,it);if(bt!==void 0&&it.reflect===!0){const wt=(((st=it.converter)===null||st===void 0?void 0:st.toAttribute)!==void 0?it.converter:n2$1).toAttribute(rt,it.type);this._$El=nt,wt==null?this.removeAttribute(bt):this.setAttribute(bt,wt),this._$El=null}}_$AK(nt,rt){var it;const st=this.constructor,bt=st._$Ev.get(nt);if(bt!==void 0&&this._$El!==bt){const wt=st.getPropertyOptions(bt),Et=typeof wt.converter=="function"?{fromAttribute:wt.converter}:((it=wt.converter)===null||it===void 0?void 0:it.fromAttribute)!==void 0?wt.converter:n2$1;this._$El=bt,this[bt]=Et.fromAttribute(rt,wt.type),this._$El=null}}requestUpdate(nt,rt,it){let st=!0;nt!==void 0&&(((it=it||this.constructor.getPropertyOptions(nt)).hasChanged||a$2)(this[nt],rt)?(this._$AL.has(nt)||this._$AL.set(nt,rt),it.reflect===!0&&this._$El!==nt&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(nt,it))):st=!1),!this.isUpdatePending&&st&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(rt){Promise.reject(rt)}const nt=this.scheduleUpdate();return nt!=null&&await nt,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var nt;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((st,bt)=>this[bt]=st),this._$Ei=void 0);let rt=!1;const it=this._$AL;try{rt=this.shouldUpdate(it),rt?(this.willUpdate(it),(nt=this._$ES)===null||nt===void 0||nt.forEach(st=>{var bt;return(bt=st.hostUpdate)===null||bt===void 0?void 0:bt.call(st)}),this.update(it)):this._$Ek()}catch(st){throw rt=!1,this._$Ek(),st}rt&&this._$AE(it)}willUpdate(nt){}_$AE(nt){var rt;(rt=this._$ES)===null||rt===void 0||rt.forEach(it=>{var st;return(st=it.hostUpdated)===null||st===void 0?void 0:st.call(it)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(nt)),this.updated(nt)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(nt){return!0}update(nt){this._$EC!==void 0&&(this._$EC.forEach((rt,it)=>this._$EO(it,this[it],rt)),this._$EC=void 0),this._$Ek()}updated(nt){}firstUpdated(nt){}};d$2.finalized=!0,d$2.elementProperties=new Map,d$2.elementStyles=[],d$2.shadowRootOptions={mode:"open"},o2$2==null||o2$2({ReactiveElement:d$2}),((s2$1=e2$3.reactiveElementVersions)!==null&&s2$1!==void 0?s2$1:e2$3.reactiveElementVersions=[]).push("1.4.2");var t2$1,i2$3=window,s3=i2$3.trustedTypes,e3$1=s3?s3.createPolicy("lit-html",{createHTML:nt=>nt}):void 0,o3$1=`lit$${(Math.random()+"").slice(9)}$`,n3="?"+o3$1,l2$2=`<${n3}>`,h2$1=document,r3=(nt="")=>h2$1.createComment(nt),d2$1=nt=>nt===null||typeof nt!="object"&&typeof nt!="function",u$1=Array.isArray,c2$1=nt=>u$1(nt)||typeof(nt==null?void 0:nt[Symbol.iterator])=="function",v=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a2$1=/-->/g,f$2=/>/g,_$1=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$2=/'/g,p$1=/"/g,$=/^(?:script|style|textarea|title)$/i,g$1=nt=>(rt,...it)=>({_$litType$:nt,strings:rt,values:it}),y$2=g$1(1),x$2=Symbol.for("lit-noChange"),b$1=Symbol.for("lit-nothing"),T$1=new WeakMap,A$1=h2$1.createTreeWalker(h2$1,129,null,!1),E=(nt,rt)=>{const it=nt.length-1,st=[];let bt,wt=rt===2?"<svg>":"",Et=v;for(let Lt=0;Lt<it;Lt++){const Ot=nt[Lt];let Rt,Dt,Bt=-1,Ft=0;for(;Ft<Ot.length&&(Et.lastIndex=Ft,Dt=Et.exec(Ot),Dt!==null);)Ft=Et.lastIndex,Et===v?Dt[1]==="!--"?Et=a2$1:Dt[1]!==void 0?Et=f$2:Dt[2]!==void 0?($.test(Dt[2])&&(bt=RegExp("</"+Dt[2],"g")),Et=_$1):Dt[3]!==void 0&&(Et=_$1):Et===_$1?Dt[0]===">"?(Et=bt!=null?bt:v,Bt=-1):Dt[1]===void 0?Bt=-2:(Bt=Et.lastIndex-Dt[2].length,Rt=Dt[1],Et=Dt[3]===void 0?_$1:Dt[3]==='"'?p$1:m$2):Et===p$1||Et===m$2?Et=_$1:Et===a2$1||Et===f$2?Et=v:(Et=_$1,bt=void 0);const Yt=Et===_$1&&nt[Lt+1].startsWith("/>")?" ":"";wt+=Et===v?Ot+l2$2:Bt>=0?(st.push(Rt),Ot.slice(0,Bt)+"$lit$"+Ot.slice(Bt)+o3$1+Yt):Ot+o3$1+(Bt===-2?(st.push(void 0),Lt):Yt)}const kt=wt+(nt[it]||"<?>")+(rt===2?"</svg>":"");if(!Array.isArray(nt)||!nt.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e3$1!==void 0?e3$1.createHTML(kt):kt,st]},C$1=class{constructor({strings:nt,_$litType$:rt},it){let st;this.parts=[];let bt=0,wt=0;const Et=nt.length-1,kt=this.parts,[Lt,Ot]=E(nt,rt);if(this.el=C$1.createElement(Lt,it),A$1.currentNode=this.el.content,rt===2){const Rt=this.el.content,Dt=Rt.firstChild;Dt.remove(),Rt.append(...Dt.childNodes)}for(;(st=A$1.nextNode())!==null&&kt.length<Et;){if(st.nodeType===1){if(st.hasAttributes()){const Rt=[];for(const Dt of st.getAttributeNames())if(Dt.endsWith("$lit$")||Dt.startsWith(o3$1)){const Bt=Ot[wt++];if(Rt.push(Dt),Bt!==void 0){const Ft=st.getAttribute(Bt.toLowerCase()+"$lit$").split(o3$1),Yt=/([.?@])?(.*)/.exec(Bt);kt.push({type:1,index:bt,name:Yt[2],strings:Ft,ctor:Yt[1]==="."?M:Yt[1]==="?"?k$1:Yt[1]==="@"?H$1:S2})}else kt.push({type:6,index:bt})}for(const Dt of Rt)st.removeAttribute(Dt)}if($.test(st.tagName)){const Rt=st.textContent.split(o3$1),Dt=Rt.length-1;if(Dt>0){st.textContent=s3?s3.emptyScript:"";for(let Bt=0;Bt<Dt;Bt++)st.append(Rt[Bt],r3()),A$1.nextNode(),kt.push({type:2,index:++bt});st.append(Rt[Dt],r3())}}}else if(st.nodeType===8)if(st.data===n3)kt.push({type:2,index:bt});else{let Rt=-1;for(;(Rt=st.data.indexOf(o3$1,Rt+1))!==-1;)kt.push({type:7,index:bt}),Rt+=o3$1.length-1}bt++}}static createElement(nt,rt){const it=h2$1.createElement("template");return it.innerHTML=nt,it}};function P(nt,rt,it=nt,st){var bt,wt,Et,kt;if(rt===x$2)return rt;let Lt=st!==void 0?(bt=it._$Co)===null||bt===void 0?void 0:bt[st]:it._$Cl;const Ot=d2$1(rt)?void 0:rt._$litDirective$;return(Lt==null?void 0:Lt.constructor)!==Ot&&((wt=Lt==null?void 0:Lt._$AO)===null||wt===void 0||wt.call(Lt,!1),Ot===void 0?Lt=void 0:(Lt=new Ot(nt),Lt._$AT(nt,it,st)),st!==void 0?((Et=(kt=it)._$Co)!==null&&Et!==void 0?Et:kt._$Co=[])[st]=Lt:it._$Cl=Lt),Lt!==void 0&&(rt=P(nt,Lt._$AS(nt,rt.values),Lt,st)),rt}var V=class{constructor(nt,rt){this.u=[],this._$AN=void 0,this._$AD=nt,this._$AM=rt}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(nt){var rt;const{el:{content:it},parts:st}=this._$AD,bt=((rt=nt==null?void 0:nt.creationScope)!==null&&rt!==void 0?rt:h2$1).importNode(it,!0);A$1.currentNode=bt;let wt=A$1.nextNode(),Et=0,kt=0,Lt=st[0];for(;Lt!==void 0;){if(Et===Lt.index){let Ot;Lt.type===2?Ot=new N(wt,wt.nextSibling,this,nt):Lt.type===1?Ot=new Lt.ctor(wt,Lt.name,Lt.strings,this,nt):Lt.type===6&&(Ot=new I(wt,this,nt)),this.u.push(Ot),Lt=st[++kt]}Et!==(Lt==null?void 0:Lt.index)&&(wt=A$1.nextNode(),Et++)}return bt}p(nt){let rt=0;for(const it of this.u)it!==void 0&&(it.strings!==void 0?(it._$AI(nt,it,rt),rt+=it.strings.length-2):it._$AI(nt[rt])),rt++}},N=class{constructor(nt,rt,it,st){var bt;this.type=2,this._$AH=b$1,this._$AN=void 0,this._$AA=nt,this._$AB=rt,this._$AM=it,this.options=st,this._$Cm=(bt=st==null?void 0:st.isConnected)===null||bt===void 0||bt}get _$AU(){var nt,rt;return(rt=(nt=this._$AM)===null||nt===void 0?void 0:nt._$AU)!==null&&rt!==void 0?rt:this._$Cm}get parentNode(){let nt=this._$AA.parentNode;const rt=this._$AM;return rt!==void 0&&nt.nodeType===11&&(nt=rt.parentNode),nt}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(nt,rt=this){nt=P(this,nt,rt),d2$1(nt)?nt===b$1||nt==null||nt===""?(this._$AH!==b$1&&this._$AR(),this._$AH=b$1):nt!==this._$AH&&nt!==x$2&&this.g(nt):nt._$litType$!==void 0?this.$(nt):nt.nodeType!==void 0?this.T(nt):c2$1(nt)?this.k(nt):this.g(nt)}O(nt,rt=this._$AB){return this._$AA.parentNode.insertBefore(nt,rt)}T(nt){this._$AH!==nt&&(this._$AR(),this._$AH=this.O(nt))}g(nt){this._$AH!==b$1&&d2$1(this._$AH)?this._$AA.nextSibling.data=nt:this.T(h2$1.createTextNode(nt)),this._$AH=nt}$(nt){var rt;const{values:it,_$litType$:st}=nt,bt=typeof st=="number"?this._$AC(nt):(st.el===void 0&&(st.el=C$1.createElement(st.h,this.options)),st);if(((rt=this._$AH)===null||rt===void 0?void 0:rt._$AD)===bt)this._$AH.p(it);else{const wt=new V(bt,this),Et=wt.v(this.options);wt.p(it),this.T(Et),this._$AH=wt}}_$AC(nt){let rt=T$1.get(nt.strings);return rt===void 0&&T$1.set(nt.strings,rt=new C$1(nt)),rt}k(nt){u$1(this._$AH)||(this._$AH=[],this._$AR());const rt=this._$AH;let it,st=0;for(const bt of nt)st===rt.length?rt.push(it=new N(this.O(r3()),this.O(r3()),this,this.options)):it=rt[st],it._$AI(bt),st++;st<rt.length&&(this._$AR(it&&it._$AB.nextSibling,st),rt.length=st)}_$AR(nt=this._$AA.nextSibling,rt){var it;for((it=this._$AP)===null||it===void 0||it.call(this,!1,!0,rt);nt&&nt!==this._$AB;){const st=nt.nextSibling;nt.remove(),nt=st}}setConnected(nt){var rt;this._$AM===void 0&&(this._$Cm=nt,(rt=this._$AP)===null||rt===void 0||rt.call(this,nt))}},S2=class{constructor(nt,rt,it,st,bt){this.type=1,this._$AH=b$1,this._$AN=void 0,this.element=nt,this.name=rt,this._$AM=st,this.options=bt,it.length>2||it[0]!==""||it[1]!==""?(this._$AH=Array(it.length-1).fill(new String),this.strings=it):this._$AH=b$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(nt,rt=this,it,st){const bt=this.strings;let wt=!1;if(bt===void 0)nt=P(this,nt,rt,0),wt=!d2$1(nt)||nt!==this._$AH&&nt!==x$2,wt&&(this._$AH=nt);else{const Et=nt;let kt,Lt;for(nt=bt[0],kt=0;kt<bt.length-1;kt++)Lt=P(this,Et[it+kt],rt,kt),Lt===x$2&&(Lt=this._$AH[kt]),wt||(wt=!d2$1(Lt)||Lt!==this._$AH[kt]),Lt===b$1?nt=b$1:nt!==b$1&&(nt+=(Lt!=null?Lt:"")+bt[kt+1]),this._$AH[kt]=Lt}wt&&!st&&this.j(nt)}j(nt){nt===b$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,nt!=null?nt:"")}},M=class extends S2{constructor(){super(...arguments),this.type=3}j(nt){this.element[this.name]=nt===b$1?void 0:nt}},R$1=s3?s3.emptyScript:"",k$1=class extends S2{constructor(){super(...arguments),this.type=4}j(nt){nt&&nt!==b$1?this.element.setAttribute(this.name,R$1):this.element.removeAttribute(this.name)}},H$1=class extends S2{constructor(nt,rt,it,st,bt){super(nt,rt,it,st,bt),this.type=5}_$AI(nt,rt=this){var it;if((nt=(it=P(this,nt,rt,0))!==null&&it!==void 0?it:b$1)===x$2)return;const st=this._$AH,bt=nt===b$1&&st!==b$1||nt.capture!==st.capture||nt.once!==st.once||nt.passive!==st.passive,wt=nt!==b$1&&(st===b$1||bt);bt&&this.element.removeEventListener(this.name,this,st),wt&&this.element.addEventListener(this.name,this,nt),this._$AH=nt}handleEvent(nt){var rt,it;typeof this._$AH=="function"?this._$AH.call((it=(rt=this.options)===null||rt===void 0?void 0:rt.host)!==null&&it!==void 0?it:this.element,nt):this._$AH.handleEvent(nt)}},I=class{constructor(nt,rt,it){this.element=nt,this.type=6,this._$AN=void 0,this._$AM=rt,this.options=it}get _$AU(){return this._$AM._$AU}_$AI(nt){P(this,nt)}},z=i2$3.litHtmlPolyfillSupport;z==null||z(C$1,N),((t2$1=i2$3.litHtmlVersions)!==null&&t2$1!==void 0?t2$1:i2$3.litHtmlVersions=[]).push("2.4.0");var Z=(nt,rt,it)=>{var st,bt;const wt=(st=it==null?void 0:it.renderBefore)!==null&&st!==void 0?st:rt;let Et=wt._$litPart$;if(Et===void 0){const kt=(bt=it==null?void 0:it.renderBefore)!==null&&bt!==void 0?bt:null;wt._$litPart$=Et=new N(rt.insertBefore(r3(),kt),kt,void 0,it!=null?it:{})}return Et._$AI(nt),Et},l3,o4,s4=class extends d$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var nt,rt;const it=super.createRenderRoot();return(nt=(rt=this.renderOptions).renderBefore)!==null&&nt!==void 0||(rt.renderBefore=it.firstChild),it}update(nt){const rt=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(nt),this._$Dt=Z(rt,this.renderRoot,this.renderOptions)}connectedCallback(){var nt;super.connectedCallback(),(nt=this._$Dt)===null||nt===void 0||nt.setConnected(!0)}disconnectedCallback(){var nt;super.disconnectedCallback(),(nt=this._$Dt)===null||nt===void 0||nt.setConnected(!1)}render(){return x$2}};s4.finalized=!0,s4._$litElement$=!0,(l3=globalThis.litElementHydrateSupport)===null||l3===void 0||l3.call(globalThis,{LitElement:s4});var n4=globalThis.litElementPolyfillSupport;n4==null||n4({LitElement:s4});((o4=globalThis.litElementVersions)!==null&&o4!==void 0?o4:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var component_styles_default=i$4`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`,dialog_styles_default=i$4`
  ${component_styles_default}

  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .dialog__header-actions sl-icon-button,
  .dialog__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .dialog__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }

  @media (forced-colors: active) {
    .dialog__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`;function waitForEvent(nt,rt){return new Promise(it=>{function st(bt){bt.target===nt&&(nt.removeEventListener(rt,st),it())}nt.addEventListener(rt,st)})}function animateTo(nt,rt,it){return new Promise(st=>{if((it==null?void 0:it.duration)===1/0)throw new Error("Promise-based animations must be finite.");const bt=nt.animate(rt,__spreadProps(__spreadValues({},it),{duration:prefersReducedMotion()?0:it.duration}));bt.addEventListener("cancel",st,{once:!0}),bt.addEventListener("finish",st,{once:!0})})}function parseDuration$1(nt){return nt=nt.toString().toLowerCase(),nt.indexOf("ms")>-1?parseFloat(nt):nt.indexOf("s")>-1?parseFloat(nt)*1e3:parseFloat(nt)}function prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function stopAnimations(nt){return Promise.all(nt.getAnimations().map(rt=>new Promise(it=>{const st=requestAnimationFrame(it);rt.addEventListener("cancel",()=>st,{once:!0}),rt.addEventListener("finish",()=>st,{once:!0}),rt.cancel()})))}function shimKeyframesHeightAuto(nt,rt){return nt.map(it=>__spreadProps(__spreadValues({},it),{height:it.height==="auto"?`${rt}px`:it.height}))}var defaultAnimationRegistry=new Map,customAnimationRegistry=new WeakMap;function ensureAnimation(nt){return nt!=null?nt:{keyframes:[],options:{duration:0}}}function getLogicalAnimation(nt,rt){return rt.toLowerCase()==="rtl"?{keyframes:nt.rtlKeyframes||nt.keyframes,options:nt.options}:nt}function setDefaultAnimation(nt,rt){defaultAnimationRegistry.set(nt,ensureAnimation(rt))}function getAnimation(nt,rt,it){const st=customAnimationRegistry.get(nt);if(st!=null&&st[rt])return getLogicalAnimation(st[rt],it.dir);const bt=defaultAnimationRegistry.get(rt);return bt?getLogicalAnimation(bt,it.dir):{keyframes:[],options:{duration:0}}}var connectedElements=new Set,documentElementObserver=new MutationObserver(update),translations=new Map,documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,fallback;documentElementObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});function registerTranslation(...nt){nt.map(rt=>{const it=rt.$code.toLowerCase();translations.has(it)?translations.set(it,Object.assign(Object.assign({},translations.get(it)),rt)):translations.set(it,rt),fallback||(fallback=rt)}),update()}function update(){documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,[...connectedElements.keys()].map(nt=>{typeof nt.requestUpdate=="function"&&nt.requestUpdate()})}var LocalizeController=class{constructor(nt){this.host=nt,this.host.addController(this)}hostConnected(){connectedElements.add(this.host)}hostDisconnected(){connectedElements.delete(this.host)}dir(){return`${this.host.dir||documentDirection}`.toLowerCase()}lang(){return`${this.host.lang||documentLanguage}`.toLowerCase()}term(nt,...rt){var it,st;const bt=new Intl.Locale(this.lang()),wt=bt==null?void 0:bt.language.toLowerCase(),Et=(st=(it=bt==null?void 0:bt.region)===null||it===void 0?void 0:it.toLowerCase())!==null&&st!==void 0?st:"",kt=translations.get(`${wt}-${Et}`),Lt=translations.get(wt);let Ot;if(kt&&kt[nt])Ot=kt[nt];else if(Lt&&Lt[nt])Ot=Lt[nt];else if(fallback&&fallback[nt])Ot=fallback[nt];else return console.error(`No translation found for: ${String(nt)}`),String(nt);return typeof Ot=="function"?Ot(...rt):Ot}date(nt,rt){return nt=new Date(nt),new Intl.DateTimeFormat(this.lang(),rt).format(nt)}number(nt,rt){return nt=Number(nt),isNaN(nt)?"":new Intl.NumberFormat(this.lang(),rt).format(nt)}relativeTime(nt,rt,it){return new Intl.RelativeTimeFormat(this.lang(),it).format(nt,rt)}},LocalizeController2=class extends LocalizeController{},translation={$code:"en",$name:"English",$dir:"ltr",clearEntry:"Clear entry",close:"Close",copy:"Copy",numOptionsSelected:nt=>nt===0?"No options selected":nt===1?"1 option selected":`${nt} options selected`,currentValue:"Current value",hidePassword:"Hide password",loading:"Loading",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",toggleColorFormat:"Toggle color format"};registerTranslation(translation);var HasSlotController=class{constructor(nt,...rt){this.slotNames=[],(this.host=nt).addController(this),this.slotNames=rt,this.handleSlotChange=this.handleSlotChange.bind(this)}hasDefaultSlot(){return[...this.host.childNodes].some(nt=>{if(nt.nodeType===nt.TEXT_NODE&&nt.textContent.trim()!=="")return!0;if(nt.nodeType===nt.ELEMENT_NODE){const rt=nt;if(rt.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!rt.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(nt){return this.host.querySelector(`:scope > [slot="${nt}"]`)!==null}test(nt){return nt==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(nt)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}handleSlotChange(nt){const rt=nt.target;(this.slotNames.includes("[default]")&&!rt.name||rt.name&&this.slotNames.includes(rt.name))&&this.host.requestUpdate()}};function getTextContent(nt){if(!nt)return"";const rt=nt.assignedNodes({flatten:!0});let it="";return[...rt].forEach(st=>{st.nodeType===Node.TEXT_NODE&&(it+=st.textContent)}),it}var l$2=nt=>nt!=null?nt:b$1;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$2=nt=>(...rt)=>({_$litDirective$:nt,values:rt}),i$3=class{constructor(nt){}get _$AU(){return this._$AM._$AU}_$AT(nt,rt,it){this._$Ct=nt,this._$AM=rt,this._$Ci=it}_$AS(nt,rt){return this.update(nt,rt)}update(nt,rt){return this.render(...rt)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var o$1=e$2(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t$2.ATTRIBUTE||nt.name!=="class"||((rt=nt.strings)===null||rt===void 0?void 0:rt.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(nt){return" "+Object.keys(nt).filter(rt=>nt[rt]).join(" ")+" "}update(nt,[rt]){var it,st;if(this.nt===void 0){this.nt=new Set,nt.strings!==void 0&&(this.st=new Set(nt.strings.join(" ").split(/\s/).filter(wt=>wt!=="")));for(const wt in rt)rt[wt]&&!(!((it=this.st)===null||it===void 0)&&it.has(wt))&&this.nt.add(wt);return this.render(rt)}const bt=nt.element.classList;this.nt.forEach(wt=>{wt in rt||(bt.remove(wt),this.nt.delete(wt))});for(const wt in rt){const Et=!!rt[wt];Et===this.nt.has(wt)||((st=this.st)===null||st===void 0?void 0:st.has(wt))||(Et?(bt.add(wt),this.nt.add(wt)):(bt.remove(wt),this.nt.delete(wt)))}return x$2}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function watch(nt,rt){const it=__spreadValues({waitUntilFirstUpdate:!1},rt);return(st,bt)=>{const{update:wt}=st;if(nt in st){const Et=nt;st.update=function(kt){if(kt.has(Et)){const Lt=kt.get(Et),Ot=this[Et];Lt!==Ot&&(!it.waitUntilFirstUpdate||this.hasUpdated)&&this[bt](Lt,Ot)}wt.call(this,kt)}}}}var e$1=nt=>rt=>typeof rt=="function"?((it,st)=>(customElements.define(it,st),st))(nt,rt):((it,st)=>{const{kind:bt,elements:wt}=st;return{kind:bt,elements:wt,finisher(Et){customElements.define(it,Et)}}})(nt,rt),i$2=(nt,rt)=>rt.kind==="method"&&rt.descriptor&&!("value"in rt.descriptor)?__spreadProps(__spreadValues({},rt),{finisher(it){it.createProperty(rt.key,nt)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:rt.key,initializer(){typeof rt.initializer=="function"&&(this[rt.key]=rt.initializer.call(this))},finisher(it){it.createProperty(rt.key,nt)}};function e2$2(nt){return(rt,it)=>it!==void 0?((st,bt,wt)=>{bt.constructor.createProperty(wt,st)})(nt,rt,it):i$2(nt,rt)}function t$1(nt){return e2$2(__spreadProps(__spreadValues({},nt),{state:!0}))}var o=({finisher:nt,descriptor:rt})=>(it,st)=>{var bt;if(st===void 0){const wt=(bt=it.originalKey)!==null&&bt!==void 0?bt:it.key,Et=rt!=null?{kind:"method",placement:"prototype",key:wt,descriptor:rt(it.key)}:__spreadProps(__spreadValues({},it),{key:wt});return nt!=null&&(Et.finisher=function(kt){nt(kt,wt)}),Et}{const wt=it.constructor;rt!==void 0&&Object.defineProperty(it,st,rt(st)),nt==null||nt(wt,st)}};function i2$2(nt,rt){return o({descriptor:it=>{const st={get(){var bt,wt;return(wt=(bt=this.renderRoot)===null||bt===void 0?void 0:bt.querySelector(nt))!==null&&wt!==void 0?wt:null},enumerable:!0,configurable:!0};if(rt){const bt=typeof it=="symbol"?Symbol():"__"+it;st.get=function(){var wt,Et;return this[bt]===void 0&&(this[bt]=(Et=(wt=this.renderRoot)===null||wt===void 0?void 0:wt.querySelector(nt))!==null&&Et!==void 0?Et:null),this[bt]}}return st}})}var n$2;((n$2=window.HTMLSlotElement)===null||n$2===void 0?void 0:n$2.prototype.assignedElements)!=null;var ShoelaceElement=class extends s4{emit(nt,rt){const it=new CustomEvent(nt,__spreadValues({bubbles:!0,cancelable:!1,composed:!0,detail:{}},rt));return this.dispatchEvent(it),it}};__decorateClass([e2$2()],ShoelaceElement.prototype,"dir",2);__decorateClass([e2$2()],ShoelaceElement.prototype,"lang",2);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlDialog=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController2(this),this.open=!1,this.label="",this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.modal=new Modal$1(this)}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.addOpenListeners(),this.modal.activate(),lockBodyScrolling(this))}disconnectedCallback(){super.disconnectedCallback(),unlockBodyScrolling(this)}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"dialog.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown(nt){this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.requestClose("keyboard"))}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.modal.activate(),lockBodyScrolling(this);const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,"dialog.show",{dir:this.localize.dir()}),it=getAnimation(this,"dialog.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),this.modal.deactivate(),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]);const nt=getAnimation(this,"dialog.hide",{dir:this.localize.dir()}),rt=getAnimation(this,"dialog.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.dialog.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1,unlockBodyScrolling(this);const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return y$2`
      <div
        part="base"
        class=${o$1({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${l$2(this.noHeader?this.label:void 0)}
          aria-labelledby=${l$2(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":y$2`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="dialog__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="dialog__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click="${()=>this.requestClose("close-button")}"
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="dialog__body"></slot>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDialog.styles=dialog_styles_default;__decorateClass([i2$2(".dialog")],SlDialog.prototype,"dialog",2);__decorateClass([i2$2(".dialog__panel")],SlDialog.prototype,"panel",2);__decorateClass([i2$2(".dialog__overlay")],SlDialog.prototype,"overlay",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDialog.prototype,"open",2);__decorateClass([e2$2({reflect:!0})],SlDialog.prototype,"label",2);__decorateClass([e2$2({attribute:"no-header",type:Boolean,reflect:!0})],SlDialog.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDialog.prototype,"handleOpenChange",1);SlDialog=__decorateClass([e$1("sl-dialog")],SlDialog);setDefaultAnimation("dialog.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.denyClose",{keyframes:[{scale:1},{scale:1.02},{scale:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});var icon_button_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`,e=Symbol.for(""),l$1=nt=>{if((nt==null?void 0:nt.r)===e)return nt==null?void 0:nt._$litStatic$},i$1=(nt,...rt)=>({_$litStatic$:rt.reduce((it,st,bt)=>it+(wt=>{if(wt._$litStatic$!==void 0)return wt._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${wt}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(st)+nt[bt+1],nt[0]),r:e}),s$3=new Map,a$1=nt=>(rt,...it)=>{const st=it.length;let bt,wt;const Et=[],kt=[];let Lt,Ot=0,Rt=!1;for(;Ot<st;){for(Lt=rt[Ot];Ot<st&&(wt=it[Ot],(bt=l$1(wt))!==void 0);)Lt+=bt+rt[++Ot],Rt=!0;kt.push(wt),Et.push(Lt),Ot++}if(Ot===st&&Et.push(rt[st]),Rt){const Dt=Et.join("$$lit$$");(rt=s$3.get(Dt))===void 0&&(Et.raw=Et,s$3.set(Dt,rt=Et)),it=kt}return nt(rt,...it)},n$1=a$1(y$2);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlIconButton=class extends ShoelaceElement{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(nt){this.disabled&&(nt.preventDefault(),nt.stopPropagation())}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}render(){const nt=!!this.href,rt=nt?i$1`a`:i$1`button`;return n$1`
      <${rt}
        part="base"
        class=${o$1({"icon-button":!0,"icon-button--disabled":!nt&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${l$2(nt?void 0:this.disabled)}
        type=${l$2(nt?void 0:"button")}
        href=${l$2(nt?this.href:void 0)}
        target=${l$2(nt?this.target:void 0)}
        download=${l$2(nt?this.download:void 0)}
        rel=${l$2(nt&&this.target?"noreferrer noopener":void 0)}
        role=${l$2(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${l$2(this.name)}
          library=${l$2(this.library)}
          src=${l$2(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${rt}>
    `}};SlIconButton.styles=icon_button_styles_default;__decorateClass([i2$2(".icon-button")],SlIconButton.prototype,"button",2);__decorateClass([t$1()],SlIconButton.prototype,"hasFocus",2);__decorateClass([e2$2()],SlIconButton.prototype,"name",2);__decorateClass([e2$2()],SlIconButton.prototype,"library",2);__decorateClass([e2$2()],SlIconButton.prototype,"src",2);__decorateClass([e2$2()],SlIconButton.prototype,"href",2);__decorateClass([e2$2()],SlIconButton.prototype,"target",2);__decorateClass([e2$2()],SlIconButton.prototype,"download",2);__decorateClass([e2$2()],SlIconButton.prototype,"label",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlIconButton.prototype,"disabled",2);SlIconButton=__decorateClass([e$1("sl-icon-button")],SlIconButton);var library={name:"default",resolver:nt=>`${getBasePath()}/assets/icons/${nt}.svg`},library_default_default=library,icons={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},systemLibrary={name:"system",resolver:nt=>nt in icons?`data:image/svg+xml,${encodeURIComponent(icons[nt])}`:""},library_system_default=systemLibrary,registry=[library_default_default,library_system_default],watchedIcons=[];function watchIcon(nt){watchedIcons.push(nt)}function unwatchIcon(nt){watchedIcons=watchedIcons.filter(rt=>rt!==nt)}function getIconLibrary(nt){return registry.find(rt=>rt.name===nt)}var includeFiles=new Map;function requestInclude(nt,rt="cors"){if(includeFiles.has(nt))return includeFiles.get(nt);const it=fetch(nt,{mode:rt}).then(async st=>({ok:st.ok,status:st.status,html:await st.text()}));return includeFiles.set(nt,it),it}var iconFiles=new Map;async function requestIcon(nt){if(iconFiles.has(nt))return iconFiles.get(nt);const rt=await requestInclude(nt),it={ok:rt.ok,status:rt.status,svg:null};if(rt.ok){const st=document.createElement("div");st.innerHTML=rt.html;const bt=st.firstElementChild;it.svg=(bt==null?void 0:bt.tagName.toLowerCase())==="svg"?bt.outerHTML:""}return iconFiles.set(nt,it),it}var icon_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    contain: strict;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,e4=class extends i$3{constructor(nt){if(super(nt),this.it=b$1,nt.type!==t$2.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(nt){if(nt===b$1||nt==null)return this._t=void 0,this.it=nt;if(nt===x$2)return nt;if(typeof nt!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(nt===this.it)return this._t;this.it=nt;const rt=[nt];return rt.raw=rt,this._t={_$litType$:this.constructor.resultType,strings:rt,values:[]}}};e4.directiveName="unsafeHTML",e4.resultType=1;var t3$1=class extends e4{};t3$1.directiveName="unsafeSVG",t3$1.resultType=2;var o2$1=e$2(t3$1),parser$d,SlIcon=class extends ShoelaceElement{constructor(){super(...arguments),this.svg="",this.label="",this.library="default"}connectedCallback(){super.connectedCallback(),watchIcon(this)}firstUpdated(){this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),unwatchIcon(this)}getUrl(){const nt=getIconLibrary(this.library);return this.name&&nt?nt.resolver(this.name):this.src}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var nt;const rt=getIconLibrary(this.library),it=this.getUrl();if(parser$d||(parser$d=new DOMParser),it)try{const st=await requestIcon(it);if(it!==this.getUrl())return;if(st.ok){const wt=parser$d.parseFromString(st.svg,"text/html").body.querySelector("svg");wt!==null?((nt=rt==null?void 0:rt.mutator)==null||nt.call(rt,wt),this.svg=wt.outerHTML,this.emit("sl-load")):(this.svg="",this.emit("sl-error"))}else this.svg="",this.emit("sl-error")}catch{this.emit("sl-error")}else this.svg.length>0&&(this.svg="")}render(){return y$2` ${o2$1(this.svg)} `}};SlIcon.styles=icon_styles_default;__decorateClass([t$1()],SlIcon.prototype,"svg",2);__decorateClass([e2$2({reflect:!0})],SlIcon.prototype,"name",2);__decorateClass([e2$2()],SlIcon.prototype,"src",2);__decorateClass([e2$2()],SlIcon.prototype,"label",2);__decorateClass([e2$2({reflect:!0})],SlIcon.prototype,"library",2);__decorateClass([watch("label")],SlIcon.prototype,"handleLabelChange",1);__decorateClass([watch("name"),watch("src"),watch("library")],SlIcon.prototype,"setIcon",1);SlIcon=__decorateClass([e$1("sl-icon")],SlIcon);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var formCollections=new WeakMap,userInteractedControls=new WeakMap,reportValidityOverloads=new WeakMap,FormSubmitController=class{constructor(nt,rt){(this.host=nt).addController(this),this.options=__spreadValues({form:it=>it.closest("form"),name:it=>it.name,value:it=>it.value,defaultValue:it=>it.defaultValue,disabled:it=>{var st;return(st=it.disabled)!=null?st:!1},reportValidity:it=>typeof it.reportValidity=="function"?it.reportValidity():!0,setValue:(it,st)=>it.value=st},rt),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFormReset=this.handleFormReset.bind(this),this.reportFormValidity=this.reportFormValidity.bind(this),this.handleUserInput=this.handleUserInput.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(formCollections.has(this.form)?formCollections.get(this.form).add(this.host):formCollections.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)||(reportValidityOverloads.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity())),this.host.addEventListener("sl-input",this.handleUserInput)}hostDisconnected(){var nt;this.form&&((nt=formCollections.get(this.form))==null||nt.delete(this.host),this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)&&(this.form.reportValidity=reportValidityOverloads.get(this.form),reportValidityOverloads.delete(this.form)),this.form=void 0),this.host.removeEventListener("sl-input",this.handleUserInput)}hostUpdated(){var nt;const rt=this.host,it=Boolean(userInteractedControls.get(rt)),st=Boolean(rt.invalid),bt=Boolean(rt.required);(nt=this.form)!=null&&nt.noValidate?(rt.removeAttribute("data-required"),rt.removeAttribute("data-optional"),rt.removeAttribute("data-invalid"),rt.removeAttribute("data-valid"),rt.removeAttribute("data-user-invalid"),rt.removeAttribute("data-user-valid")):(rt.toggleAttribute("data-required",bt),rt.toggleAttribute("data-optional",!bt),rt.toggleAttribute("data-invalid",st),rt.toggleAttribute("data-valid",!st),rt.toggleAttribute("data-user-invalid",st&&it),rt.toggleAttribute("data-user-valid",!st&&it))}handleFormData(nt){const rt=this.options.disabled(this.host),it=this.options.name(this.host),st=this.options.value(this.host),bt=this.host.tagName.toLowerCase()==="sl-button";!rt&&!bt&&typeof it=="string"&&it.length>0&&typeof st<"u"&&(Array.isArray(st)?st.forEach(wt=>{nt.formData.append(it,wt.toString())}):nt.formData.append(it,st.toString()))}handleFormSubmit(nt){var rt;const it=this.options.disabled(this.host),st=this.options.reportValidity;this.form&&!this.form.noValidate&&((rt=formCollections.get(this.form))==null||rt.forEach(bt=>{this.setUserInteracted(bt,!0)})),this.form&&!this.form.noValidate&&!it&&!st(this.host)&&(nt.preventDefault(),nt.stopImmediatePropagation())}handleFormReset(){this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1)}async handleUserInput(){await this.host.updateComplete,this.setUserInteracted(this.host,!0)}reportFormValidity(){if(this.form&&!this.form.noValidate){const nt=this.form.querySelectorAll("*");for(const rt of nt)if(typeof rt.reportValidity=="function"&&!rt.reportValidity())return!1}return!0}setUserInteracted(nt,rt){userInteractedControls.set(nt,rt),nt.requestUpdate()}doAction(nt,rt){if(this.form){const it=document.createElement("button");it.type=nt,it.style.position="absolute",it.style.width="0",it.style.height="0",it.style.clipPath="inset(50%)",it.style.overflow="hidden",it.style.whiteSpace="nowrap",rt&&(it.name=rt.name,it.value=rt.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(st=>{rt.hasAttribute(st)&&it.setAttribute(st,rt.getAttribute(st))})),this.form.append(it),it.click(),it.remove()}}reset(nt){this.doAction("reset",nt)}submit(nt){this.doAction("submit",nt)}},button_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    font-size: var(--sl-button-font-size-small);
    height: var(--sl-input-height-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    font-size: var(--sl-button-font-size-medium);
    height: var(--sl-input-height-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    font-size: var(--sl-button-font-size-large);
    height: var(--sl-input-height-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host(.sl-button-group__button--inner) .button {
    border-radius: 0;
  }

  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(.sl-button-group__button:not(.sl-button-group__button--first, .sl-button-group__button--radio, [variant='default']):not(:hover))
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host(.sl-button-group__button--hover) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host(.sl-button-group__button--focus),
  :host(.sl-button-group__button[checked]) {
    z-index: 2;
  }
`,SlButton=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this,{form:nt=>{if(nt.hasAttribute("form")){const rt=nt.getRootNode(),it=nt.getAttribute("form");return rt.getElementById(it)}return nt.closest("form")}}),this.hasSlotController=new HasSlotController(this,"[default]","prefix","suffix"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href=""}firstUpdated(){this.isButton()&&(this.invalid=!this.button.checkValidity())}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(nt){if(this.disabled||this.loading){nt.preventDefault(),nt.stopPropagation();return}this.type==="submit"&&this.formSubmitController.submit(this),this.type==="reset"&&this.formSubmitController.reset(this)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&(this.button.disabled=this.disabled,this.invalid=!this.button.checkValidity())}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(nt){this.isButton()&&(this.button.setCustomValidity(nt),this.invalid=!this.button.checkValidity())}render(){const nt=this.isLink(),rt=nt?i$1`a`:i$1`button`;return n$1`
      <${rt}
        part="base"
        class=${o$1({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${l$2(nt?void 0:this.disabled)}
        type=${l$2(nt?void 0:this.type)}
        title=${this.title}
        name=${l$2(nt?void 0:this.name)}
        value=${l$2(nt?void 0:this.value)}
        href=${l$2(nt?this.href:void 0)}
        target=${l$2(nt?this.target:void 0)}
        download=${l$2(nt?this.download:void 0)}
        rel=${l$2(nt&&this.target?"noreferrer noopener":void 0)}
        role=${l$2(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?n$1` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?n$1`<sl-spinner></sl-spinner>`:""}
      </${rt}>
    `}};SlButton.styles=button_styles_default;__decorateClass([i2$2(".button")],SlButton.prototype,"button",2);__decorateClass([t$1()],SlButton.prototype,"hasFocus",2);__decorateClass([t$1()],SlButton.prototype,"invalid",2);__decorateClass([e2$2()],SlButton.prototype,"title",2);__decorateClass([e2$2({reflect:!0})],SlButton.prototype,"variant",2);__decorateClass([e2$2({reflect:!0})],SlButton.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"caret",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"disabled",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"loading",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"outline",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"pill",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"circle",2);__decorateClass([e2$2()],SlButton.prototype,"type",2);__decorateClass([e2$2()],SlButton.prototype,"name",2);__decorateClass([e2$2()],SlButton.prototype,"value",2);__decorateClass([e2$2()],SlButton.prototype,"href",2);__decorateClass([e2$2()],SlButton.prototype,"target",2);__decorateClass([e2$2()],SlButton.prototype,"download",2);__decorateClass([e2$2()],SlButton.prototype,"form",2);__decorateClass([e2$2({attribute:"formaction"})],SlButton.prototype,"formAction",2);__decorateClass([e2$2({attribute:"formenctype"})],SlButton.prototype,"formEnctype",2);__decorateClass([e2$2({attribute:"formmethod"})],SlButton.prototype,"formMethod",2);__decorateClass([e2$2({attribute:"formnovalidate",type:Boolean})],SlButton.prototype,"formNoValidate",2);__decorateClass([e2$2({attribute:"formtarget"})],SlButton.prototype,"formTarget",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlButton.prototype,"handleDisabledChange",1);SlButton=__decorateClass([e$1("sl-button")],SlButton);var spinner_styles_default=i$4`
  ${component_styles_default}

  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
    mix-blend-mode: multiply;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      rotate: 0deg;
      stroke-dasharray: 0.01em, 2.75em;
    }

    50% {
      rotate: 450deg;
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      rotate: 1080deg;
      stroke-dasharray: 0.01em, 2.75em;
    }
  }
`,SlSpinner=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this)}render(){return y$2`
      <svg part="base" class="spinner" role="progressbar" aria-valuetext=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};SlSpinner.styles=spinner_styles_default;SlSpinner=__decorateClass([e$1("sl-spinner")],SlSpinner);var form_control_styles_default=i$4`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control_label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`,input_styles_default=i$4`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix::slotted(sl-icon),
  .input__suffix::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  .input--empty .input__clear {
    visibility: hidden;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide Firefox's clear button on date and time inputs */
  .input--is-firefox input[type='date'],
  .input--is-firefox input[type='time'] {
    clip-path: inset(0 2em 0 0);
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`,e2$1=nt=>nt.strings===void 0,f$1={},s$2=(nt,rt=f$1)=>nt._$AH=rt,l2$1=e$2(class extends i$3{constructor(nt){if(super(nt),nt.type!==t$2.PROPERTY&&nt.type!==t$2.ATTRIBUTE&&nt.type!==t$2.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!e2$1(nt))throw Error("`live` bindings can only contain a single expression")}render(nt){return nt}update(nt,[rt]){if(rt===x$2||rt===b$1)return rt;const it=nt.element,st=nt.name;if(nt.type===t$2.PROPERTY){if(rt===it[st])return x$2}else if(nt.type===t$2.BOOLEAN_ATTRIBUTE){if(!!rt===it.hasAttribute(st))return x$2}else if(nt.type===t$2.ATTRIBUTE&&it.getAttribute(st)===rt+"")return x$2;return s$2(nt),rt}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var defaultValue=(nt="value")=>(rt,it)=>{const st=rt.constructor,bt=st.prototype.attributeChangedCallback;st.prototype.attributeChangedCallback=function(wt,Et,kt){var Lt;const Ot=st.getPropertyOptions(nt),Rt=typeof Ot.attribute=="string"?Ot.attribute:nt;if(wt===Rt){const Dt=Ot.converter||n2$1,Ft=(typeof Dt=="function"?Dt:(Lt=Dt==null?void 0:Dt.fromAttribute)!=null?Lt:n2$1.fromAttribute)(kt,Ot.type);this[nt]!==Ft&&(this[it]=Ft)}bt.call(this,wt,Et,kt)}},_a,isChromium=(_a=navigator.userAgentData)==null?void 0:_a.brands.some(nt=>nt.brand.includes("Chromium")),isFirefox=isChromium?!1:navigator.userAgent.includes("Firefox"),SlInput=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.required=!1,this.spellcheck=!0}get valueAsDate(){var nt,rt;return(rt=(nt=this.input)==null?void 0:nt.valueAsDate)!=null?rt:null}set valueAsDate(nt){const rt=document.createElement("input");rt.type="date",rt.valueAsDate=nt,this.value=rt.value}get valueAsNumber(){var nt,rt;return(rt=(nt=this.input)==null?void 0:nt.valueAsNumber)!=null?rt:parseFloat(this.value)}set valueAsNumber(nt){const rt=document.createElement("input");rt.type="number",rt.valueAsNumber=nt,this.value=rt.value}firstUpdated(){this.invalid=!this.checkValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(nt){this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change"),this.input.focus(),nt.stopPropagation()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.invalid=!this.checkValidity(),this.emit("sl-input")}handleInvalid(){this.invalid=!0}handleKeyDown(nt){const rt=nt.metaKey||nt.ctrlKey||nt.shiftKey||nt.altKey;nt.key==="Enter"&&!rt&&setTimeout(()=>{!nt.defaultPrevented&&!nt.isComposing&&this.formSubmitController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.checkValidity()}handleStepChange(){this.input.step=String(this.step),this.invalid=!this.checkValidity()}async handleValueChange(){await this.updateComplete,this.invalid=!this.checkValidity()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,st){this.input.setRangeText(nt,rt,it,st),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.invalid=!this.checkValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt,bt=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return y$2`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--invalid":this.invalid,"input--no-spin-buttons":this.noSpinButtons,"input--is-firefox":isFirefox})}
          >
            <slot name="prefix" part="prefix" class="input__prefix"></slot>
            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${l$2(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$2(this.placeholder)}
              minlength=${l$2(this.minlength)}
              maxlength=${l$2(this.maxlength)}
              min=${l$2(this.min)}
              max=${l$2(this.max)}
              step=${l$2(this.step)}
              .value=${l2$1(this.value)}
              autocapitalize=${l$2(this.type==="password"?"off":this.autocapitalize)}
              autocomplete=${l$2(this.type==="password"?"off":this.autocomplete)}
              autocorrect=${l$2(this.type==="password"?"off":this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${l$2(this.pattern)}
              enterkeyhint=${l$2(this.enterkeyhint)}
              inputmode=${l$2(this.inputmode)}
              aria-describedby="help-text"
              aria-invalid=${this.invalid?"true":"false"}
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${bt?y$2`
                    <button
                      part="clear-button"
                      class="input__clear"
                      type="button"
                      aria-label=${this.localize.term("clearEntry")}
                      @click=${this.handleClearClick}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}
            ${this.passwordToggle&&!this.disabled?y$2`
                    <button
                      part="password-toggle-button"
                      class="input__password-toggle"
                      type="button"
                      aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                      @click=${this.handlePasswordToggle}
                      tabindex="-1"
                    >
                      ${this.passwordVisible?y$2`
                            <slot name="show-password-icon">
                              <sl-icon name="eye-slash" library="system"></sl-icon>
                            </slot>
                          `:y$2`
                            <slot name="hide-password-icon">
                              <sl-icon name="eye" library="system"></sl-icon>
                            </slot>
                          `}
                    </button>
                  `:""}

            <slot name="suffix" part="suffix" class="input__suffix"></slot>
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          ${this.helpText}
        </slot>
        </div>
      </div>
    `}};SlInput.styles=input_styles_default;__decorateClass([i2$2(".input__control")],SlInput.prototype,"input",2);__decorateClass([t$1()],SlInput.prototype,"hasFocus",2);__decorateClass([t$1()],SlInput.prototype,"invalid",2);__decorateClass([e2$2()],SlInput.prototype,"title",2);__decorateClass([e2$2({reflect:!0})],SlInput.prototype,"type",2);__decorateClass([e2$2()],SlInput.prototype,"name",2);__decorateClass([e2$2()],SlInput.prototype,"value",2);__decorateClass([defaultValue()],SlInput.prototype,"defaultValue",2);__decorateClass([e2$2({reflect:!0})],SlInput.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"filled",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"pill",2);__decorateClass([e2$2()],SlInput.prototype,"label",2);__decorateClass([e2$2({attribute:"help-text"})],SlInput.prototype,"helpText",2);__decorateClass([e2$2({type:Boolean})],SlInput.prototype,"clearable",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"disabled",2);__decorateClass([e2$2()],SlInput.prototype,"placeholder",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"readonly",2);__decorateClass([e2$2({attribute:"password-toggle",type:Boolean})],SlInput.prototype,"passwordToggle",2);__decorateClass([e2$2({attribute:"password-visible",type:Boolean})],SlInput.prototype,"passwordVisible",2);__decorateClass([e2$2({attribute:"no-spin-buttons",type:Boolean})],SlInput.prototype,"noSpinButtons",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"required",2);__decorateClass([e2$2()],SlInput.prototype,"pattern",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"minlength",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"maxlength",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"min",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"max",2);__decorateClass([e2$2()],SlInput.prototype,"step",2);__decorateClass([e2$2()],SlInput.prototype,"autocapitalize",2);__decorateClass([e2$2()],SlInput.prototype,"autocorrect",2);__decorateClass([e2$2()],SlInput.prototype,"autocomplete",2);__decorateClass([e2$2({type:Boolean})],SlInput.prototype,"autofocus",2);__decorateClass([e2$2()],SlInput.prototype,"enterkeyhint",2);__decorateClass([e2$2({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlInput.prototype,"spellcheck",2);__decorateClass([e2$2()],SlInput.prototype,"inputmode",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleDisabledChange",1);__decorateClass([watch("step",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleStepChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleValueChange",1);SlInput=__decorateClass([e$1("sl-input")],SlInput);var tooltip_styles_default=i$4`
  ${component_styles_default}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip {
    --arrow-size: var(--sl-tooltip-arrow-size);
    --arrow-color: var(--sl-tooltip-background-color);
  }

  .tooltip::part(popup) {
    pointer-events: none;
    z-index: var(--sl-z-index-tooltip);
  }

  .tooltip[placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .tooltip[placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .tooltip[placement^='left']::part(popup) {
    transform-origin: right;
  }

  .tooltip[placement^='right']::part(popup) {
    transform-origin: left;
  }

  .tooltip__body {
    display: block;
    width: max-content;
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
    pointer-events: none;
  }
`,SlTooltip=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.updateComplete.then(()=>{this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)})}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this.handleBlur,!0),this.removeEventListener("focus",this.handleFocus,!0),this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeyDown),this.removeEventListener("mouseover",this.handleMouseOver),this.removeEventListener("mouseout",this.handleMouseOut)}handleBlur(){this.hasTrigger("focus")&&this.hide()}handleClick(){this.hasTrigger("click")&&(this.open?this.hide():this.show())}handleFocus(){this.hasTrigger("focus")&&this.show()}handleKeyDown(nt){this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide())}handleMouseOver(){if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),nt)}}handleMouseOut(){if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),nt)}}hasTrigger(nt){return this.trigger.split(" ").includes(nt)}async handleOpenChange(){if(this.open){if(this.disabled)return;this.emit("sl-show"),await stopAnimations(this.body),this.body.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"tooltip.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),await stopAnimations(this.body);const{keyframes:nt,options:rt}=getAnimation(this,"tooltip.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.popup.active=!1,this.body.hidden=!0,this.emit("sl-after-hide")}}async handleOptionsChange(){this.hasUpdated&&(await this.updateComplete,this.popup.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return y$2`
      <sl-popup
        part="base"
        exportparts="
          popup:base__popup,
          arrow:base__arrow
        "
        class=${o$1({tooltip:!0,"tooltip--open":this.open})}
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        arrow
      >
        <slot slot="anchor" aria-describedby="tooltip"></slot>

        <slot
          name="content"
          part="body"
          id="tooltip"
          class="tooltip__body"
          role="tooltip"
          aria-live=${this.open?"polite":"off"}
        >
          ${this.content}
        </slot>
      </sl-popup>
    `}};SlTooltip.styles=tooltip_styles_default;__decorateClass([i2$2("slot:not([name])")],SlTooltip.prototype,"defaultSlot",2);__decorateClass([i2$2(".tooltip__body")],SlTooltip.prototype,"body",2);__decorateClass([i2$2("sl-popup")],SlTooltip.prototype,"popup",2);__decorateClass([e2$2()],SlTooltip.prototype,"content",2);__decorateClass([e2$2()],SlTooltip.prototype,"placement",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTooltip.prototype,"disabled",2);__decorateClass([e2$2({type:Number})],SlTooltip.prototype,"distance",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTooltip.prototype,"open",2);__decorateClass([e2$2({type:Number})],SlTooltip.prototype,"skidding",2);__decorateClass([e2$2()],SlTooltip.prototype,"trigger",2);__decorateClass([e2$2({type:Boolean})],SlTooltip.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlTooltip.prototype,"handleOpenChange",1);__decorateClass([watch("content"),watch("distance"),watch("hoist"),watch("placement"),watch("skidding")],SlTooltip.prototype,"handleOptionsChange",1);__decorateClass([watch("disabled")],SlTooltip.prototype,"handleDisabledChange",1);SlTooltip=__decorateClass([e$1("sl-tooltip")],SlTooltip);setDefaultAnimation("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}});setDefaultAnimation("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});var popup_styles_default=i$4`
  ${component_styles_default}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`;function t(nt){return nt.split("-")[0]}function e3(nt){return nt.split("-")[1]}function n(nt){return["top","bottom"].includes(t(nt))?"x":"y"}function r(nt){return nt==="y"?"height":"width"}function i2$1(nt,rt,it){let{reference:st,floating:bt}=nt;const wt=st.x+st.width/2-bt.width/2,Et=st.y+st.height/2-bt.height/2,kt=n(rt),Lt=r(kt),Ot=st[Lt]/2-bt[Lt]/2,Rt=kt==="x";let Dt;switch(t(rt)){case"top":Dt={x:wt,y:st.y-bt.height};break;case"bottom":Dt={x:wt,y:st.y+st.height};break;case"right":Dt={x:st.x+st.width,y:Et};break;case"left":Dt={x:st.x-bt.width,y:Et};break;default:Dt={x:st.x,y:st.y}}switch(e3(rt)){case"start":Dt[kt]-=Ot*(it&&Rt?-1:1);break;case"end":Dt[kt]+=Ot*(it&&Rt?-1:1)}return Dt}var o2=async(nt,rt,it)=>{const{placement:st="bottom",strategy:bt="absolute",middleware:wt=[],platform:Et}=it,kt=wt.filter(Boolean),Lt=await(Et.isRTL==null?void 0:Et.isRTL(rt));let Ot=await Et.getElementRects({reference:nt,floating:rt,strategy:bt}),{x:Rt,y:Dt}=i2$1(Ot,st,Lt),Bt=st,Ft={},Yt=0;for(let Jt=0;Jt<kt.length;Jt++){const{name:Wt,fn:Qt}=kt[Jt],{x:rn,y:sn,data:on,reset:hn}=await Qt({x:Rt,y:Dt,initialPlacement:st,placement:Bt,strategy:bt,middlewareData:Ft,rects:Ot,platform:Et,elements:{reference:nt,floating:rt}});Rt=rn!=null?rn:Rt,Dt=sn!=null?sn:Dt,Ft=__spreadProps(__spreadValues({},Ft),{[Wt]:__spreadValues(__spreadValues({},Ft[Wt]),on)}),hn&&Yt<=50&&(Yt++,typeof hn=="object"&&(hn.placement&&(Bt=hn.placement),hn.rects&&(Ot=hn.rects===!0?await Et.getElementRects({reference:nt,floating:rt,strategy:bt}):hn.rects),{x:Rt,y:Dt}=i2$1(Ot,Bt,Lt)),Jt=-1)}return{x:Rt,y:Dt,placement:Bt,strategy:bt,middlewareData:Ft}};function a(nt){return typeof nt!="number"?function(rt){return __spreadValues({top:0,right:0,bottom:0,left:0},rt)}(nt):{top:nt,right:nt,bottom:nt,left:nt}}function l(nt){return __spreadProps(__spreadValues({},nt),{top:nt.y,left:nt.x,right:nt.x+nt.width,bottom:nt.y+nt.height})}async function s$1(nt,rt){var it;rt===void 0&&(rt={});const{x:st,y:bt,platform:wt,rects:Et,elements:kt,strategy:Lt}=nt,{boundary:Ot="clippingAncestors",rootBoundary:Rt="viewport",elementContext:Dt="floating",altBoundary:Bt=!1,padding:Ft=0}=rt,Yt=a(Ft),Jt=kt[Bt?Dt==="floating"?"reference":"floating":Dt],Wt=l(await wt.getClippingRect({element:(it=await(wt.isElement==null?void 0:wt.isElement(Jt)))==null||it?Jt:Jt.contextElement||await(wt.getDocumentElement==null?void 0:wt.getDocumentElement(kt.floating)),boundary:Ot,rootBoundary:Rt,strategy:Lt})),Qt=l(wt.convertOffsetParentRelativeRectToViewportRelativeRect?await wt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Dt==="floating"?__spreadProps(__spreadValues({},Et.floating),{x:st,y:bt}):Et.reference,offsetParent:await(wt.getOffsetParent==null?void 0:wt.getOffsetParent(kt.floating)),strategy:Lt}):Et[Dt]);return{top:Wt.top-Qt.top+Yt.top,bottom:Qt.bottom-Wt.bottom+Yt.bottom,left:Wt.left-Qt.left+Yt.left,right:Qt.right-Wt.right+Yt.right}}var c$1=Math.min,f=Math.max;function u(nt,rt,it){return f(nt,c$1(rt,it))}var m$1=nt=>({name:"arrow",options:nt,async fn(rt){const{element:it,padding:st=0}=nt!=null?nt:{},{x:bt,y:wt,placement:Et,rects:kt,platform:Lt}=rt;if(it==null)return{};const Ot=a(st),Rt={x:bt,y:wt},Dt=n(Et),Bt=e3(Et),Ft=r(Dt),Yt=await Lt.getDimensions(it),Jt=Dt==="y"?"top":"left",Wt=Dt==="y"?"bottom":"right",Qt=kt.reference[Ft]+kt.reference[Dt]-Rt[Dt]-kt.floating[Ft],rn=Rt[Dt]-kt.reference[Dt],sn=await(Lt.getOffsetParent==null?void 0:Lt.getOffsetParent(it));let on=sn?Dt==="y"?sn.clientHeight||0:sn.clientWidth||0:0;on===0&&(on=kt.floating[Ft]);const hn=Qt/2-rn/2,mn=Ot[Jt],Cn=on-Yt[Ft]-Ot[Wt],Tn=on/2-Yt[Ft]/2+hn,kn=u(mn,Tn,Cn),In=(Bt==="start"?Ot[Jt]:Ot[Wt])>0&&Tn!==kn&&kt.reference[Ft]<=kt.floating[Ft];return{[Dt]:Rt[Dt]-(In?Tn<mn?mn-Tn:Cn-Tn:0),data:{[Dt]:kn,centerOffset:Tn-kn}}}}),g={left:"right",right:"left",bottom:"top",top:"bottom"};function d$1(nt){return nt.replace(/left|right|bottom|top/g,rt=>g[rt])}function p(nt,rt,it){it===void 0&&(it=!1);const st=e3(nt),bt=n(nt),wt=r(bt);let Et=bt==="x"?st===(it?"end":"start")?"right":"left":st==="start"?"bottom":"top";return rt.reference[wt]>rt.floating[wt]&&(Et=d$1(Et)),{main:Et,cross:d$1(Et)}}var h$1={start:"end",end:"start"};function y2(nt){return nt.replace(/start|end/g,rt=>h$1[rt])}var x$1=["top","right","bottom","left"];x$1.reduce((nt,rt)=>nt.concat(rt,rt+"-start",rt+"-end"),[]);var b=function(nt){return nt===void 0&&(nt={}),{name:"flip",options:nt,async fn(rt){var it;const{placement:st,middlewareData:bt,rects:wt,initialPlacement:Et,platform:kt,elements:Lt}=rt,Ot=nt,{mainAxis:Rt=!0,crossAxis:Dt=!0,fallbackPlacements:Bt,fallbackStrategy:Ft="bestFit",flipAlignment:Yt=!0}=Ot,Jt=__objRest(Ot,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),Wt=t(st),Qt=Bt||(Wt===Et||!Yt?[d$1(Et)]:function(kn){const In=d$1(kn);return[y2(kn),In,y2(In)]}(Et)),rn=[Et,...Qt],sn=await s$1(rt,Jt),on=[];let hn=((it=bt.flip)==null?void 0:it.overflows)||[];if(Rt&&on.push(sn[Wt]),Dt){const{main:kn,cross:In}=p(st,wt,await(kt.isRTL==null?void 0:kt.isRTL(Lt.floating)));on.push(sn[kn],sn[In])}if(hn=[...hn,{placement:st,overflows:on}],!on.every(kn=>kn<=0)){var mn,Cn;const kn=((mn=(Cn=bt.flip)==null?void 0:Cn.index)!=null?mn:0)+1,In=rn[kn];if(In)return{data:{index:kn,overflows:hn},reset:{placement:In}};let Ln="bottom";switch(Ft){case"bestFit":{var Tn;const pn=(Tn=hn.map(Hn=>[Hn,Hn.overflows.filter(yn=>yn>0).reduce((yn,mr)=>yn+mr,0)]).sort((Hn,yn)=>Hn[1]-yn[1])[0])==null?void 0:Tn[0].placement;pn&&(Ln=pn);break}case"initialPlacement":Ln=Et}if(st!==Ln)return{reset:{placement:Ln}}}return{}}}},T=function(nt){return nt===void 0&&(nt=0),{name:"offset",options:nt,async fn(rt){const{x:it,y:st}=rt,bt=await async function(wt,Et){const{placement:kt,platform:Lt,elements:Ot}=wt,Rt=await(Lt.isRTL==null?void 0:Lt.isRTL(Ot.floating)),Dt=t(kt),Bt=e3(kt),Ft=n(kt)==="x",Yt=["left","top"].includes(Dt)?-1:1,Jt=Rt&&Ft?-1:1,Wt=typeof Et=="function"?Et(wt):Et;let{mainAxis:Qt,crossAxis:rn,alignmentAxis:sn}=typeof Wt=="number"?{mainAxis:Wt,crossAxis:0,alignmentAxis:null}:__spreadValues({mainAxis:0,crossAxis:0,alignmentAxis:null},Wt);return Bt&&typeof sn=="number"&&(rn=Bt==="end"?-1*sn:sn),Ft?{x:rn*Jt,y:Qt*Yt}:{x:Qt*Yt,y:rn*Jt}}(rt,nt);return{x:it+bt.x,y:st+bt.y,data:bt}}}};function O(nt){return nt==="x"?"y":"x"}var L$2=function(nt){return nt===void 0&&(nt={}),{name:"shift",options:nt,async fn(rt){const{x:it,y:st,placement:bt}=rt,wt=nt,{mainAxis:Et=!0,crossAxis:kt=!1,limiter:Lt={fn:Qt=>{let{x:rn,y:sn}=Qt;return{x:rn,y:sn}}}}=wt,Ot=__objRest(wt,["mainAxis","crossAxis","limiter"]),Rt={x:it,y:st},Dt=await s$1(rt,Ot),Bt=n(t(bt)),Ft=O(Bt);let Yt=Rt[Bt],Jt=Rt[Ft];if(Et){const Qt=Bt==="y"?"bottom":"right";Yt=u(Yt+Dt[Bt==="y"?"top":"left"],Yt,Yt-Dt[Qt])}if(kt){const Qt=Ft==="y"?"bottom":"right";Jt=u(Jt+Dt[Ft==="y"?"top":"left"],Jt,Jt-Dt[Qt])}const Wt=Lt.fn(__spreadProps(__spreadValues({},rt),{[Bt]:Yt,[Ft]:Jt}));return __spreadProps(__spreadValues({},Wt),{data:{x:Wt.x-it,y:Wt.y-st}})}}},k=function(nt){return nt===void 0&&(nt={}),{name:"size",options:nt,async fn(rt){const{placement:it,rects:st,platform:bt,elements:wt}=rt,Et=nt,{apply:kt=()=>{}}=Et,Lt=__objRest(Et,["apply"]),Ot=await s$1(rt,Lt),Rt=t(it),Dt=e3(it);let Bt,Ft;Rt==="top"||Rt==="bottom"?(Bt=Rt,Ft=Dt===(await(bt.isRTL==null?void 0:bt.isRTL(wt.floating))?"start":"end")?"left":"right"):(Ft=Rt,Bt=Dt==="end"?"top":"bottom");const Yt=f(Ot.left,0),Jt=f(Ot.right,0),Wt=f(Ot.top,0),Qt=f(Ot.bottom,0),rn={availableHeight:st.floating.height-(["left","right"].includes(it)?2*(Wt!==0||Qt!==0?Wt+Qt:f(Ot.top,Ot.bottom)):Ot[Bt]),availableWidth:st.floating.width-(["top","bottom"].includes(it)?2*(Yt!==0||Jt!==0?Yt+Jt:f(Ot.left,Ot.right)):Ot[Ft])};await kt(__spreadValues(__spreadValues({},rt),rn));const sn=await bt.getDimensions(wt.floating);return st.floating.width!==sn.width||st.floating.height!==sn.height?{reset:{rects:!0}}:{}}}};function n2(nt){return nt&&nt.document&&nt.location&&nt.alert&&nt.setInterval}function o3(nt){if(nt==null)return window;if(!n2(nt)){const rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function i3(nt){return o3(nt).getComputedStyle(nt)}function r2(nt){return n2(nt)?"":nt?(nt.nodeName||"").toLowerCase():""}function l2(){const nt=navigator.userAgentData;return nt&&Array.isArray(nt.brands)?nt.brands.map(rt=>rt.brand+"/"+rt.version).join(" "):navigator.userAgent}function c2(nt){return nt instanceof o3(nt).HTMLElement}function s2(nt){return nt instanceof o3(nt).Element}function f2(nt){return typeof ShadowRoot>"u"?!1:nt instanceof o3(nt).ShadowRoot||nt instanceof ShadowRoot}function u2(nt){const{overflow:rt,overflowX:it,overflowY:st,display:bt}=i3(nt);return/auto|scroll|overlay|hidden/.test(rt+st+it)&&!["inline","contents"].includes(bt)}function a2(nt){return["table","td","th"].includes(r2(nt))}function d2(nt){const rt=/firefox/i.test(l2()),it=i3(nt),st=it.backdropFilter||it.WebkitBackdropFilter;return it.transform!=="none"||it.perspective!=="none"||!!st&&st!=="none"||rt&&it.willChange==="filter"||rt&&!!it.filter&&it.filter!=="none"||["transform","perspective"].some(bt=>it.willChange.includes(bt))||["paint","layout","strict","content"].some(bt=>{const wt=it.contain;return wt!=null&&wt.includes(bt)})}function h2(){return!/^((?!chrome|android).)*safari/i.test(l2())}function g2(nt){return["html","body","#document"].includes(r2(nt))}var m2=Math.min,p2=Math.max,w2=Math.round;function v2(nt,rt,it){var st,bt,wt,Et;rt===void 0&&(rt=!1),it===void 0&&(it=!1);const kt=nt.getBoundingClientRect();let Lt=1,Ot=1;rt&&c2(nt)&&(Lt=nt.offsetWidth>0&&w2(kt.width)/nt.offsetWidth||1,Ot=nt.offsetHeight>0&&w2(kt.height)/nt.offsetHeight||1);const Rt=s2(nt)?o3(nt):window,Dt=!h2()&&it,Bt=(kt.left+(Dt&&(st=(bt=Rt.visualViewport)==null?void 0:bt.offsetLeft)!=null?st:0))/Lt,Ft=(kt.top+(Dt&&(wt=(Et=Rt.visualViewport)==null?void 0:Et.offsetTop)!=null?wt:0))/Ot,Yt=kt.width/Lt,Jt=kt.height/Ot;return{width:Yt,height:Jt,top:Ft,right:Bt+Yt,bottom:Ft+Jt,left:Bt,x:Bt,y:Ft}}function y3(nt){return(rt=nt,(rt instanceof o3(rt).Node?nt.ownerDocument:nt.document)||window.document).documentElement;var rt}function x2(nt){return s2(nt)?{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}:{scrollLeft:nt.pageXOffset,scrollTop:nt.pageYOffset}}function b2(nt){return v2(y3(nt)).left+x2(nt).scrollLeft}function L2(nt,rt,it){const st=c2(rt),bt=y3(rt),wt=v2(nt,st&&function(Lt){const Ot=v2(Lt);return w2(Ot.width)!==Lt.offsetWidth||w2(Ot.height)!==Lt.offsetHeight}(rt),it==="fixed");let Et={scrollLeft:0,scrollTop:0};const kt={x:0,y:0};if(st||!st&&it!=="fixed")if((r2(rt)!=="body"||u2(bt))&&(Et=x2(rt)),c2(rt)){const Lt=v2(rt,!0);kt.x=Lt.x+rt.clientLeft,kt.y=Lt.y+rt.clientTop}else bt&&(kt.x=b2(bt));return{x:wt.left+Et.scrollLeft-kt.x,y:wt.top+Et.scrollTop-kt.y,width:wt.width,height:wt.height}}function E2(nt){if(r2(nt)==="html")return nt;const rt=nt.assignedSlot||nt.parentNode||(f2(nt)?nt.host:null)||y3(nt);return f2(rt)?rt.host:rt}function R(nt){return c2(nt)&&i3(nt).position!=="fixed"?nt.offsetParent:null}function T2(nt){const rt=o3(nt);let it=R(nt);for(;it&&a2(it)&&i3(it).position==="static";)it=R(it);return it&&(r2(it)==="html"||r2(it)==="body"&&i3(it).position==="static"&&!d2(it))?rt:it||function(st){let bt=E2(st);for(;c2(bt)&&!g2(bt);){if(d2(bt))return bt;bt=E2(bt)}return null}(nt)||rt}function W(nt){const rt=E2(nt);return g2(rt)?nt.ownerDocument.body:c2(rt)&&u2(rt)?rt:W(rt)}function H(nt,rt){var it;rt===void 0&&(rt=[]);const st=W(nt),bt=st===((it=nt.ownerDocument)==null?void 0:it.body),wt=o3(st),Et=bt?[wt].concat(wt.visualViewport||[],u2(st)?st:[]):st,kt=rt.concat(Et);return bt?kt:kt.concat(H(Et))}function D2(nt,rt,it){return rt==="viewport"?l(function(st,bt){const wt=o3(st),Et=y3(st),kt=wt.visualViewport;let Lt=Et.clientWidth,Ot=Et.clientHeight,Rt=0,Dt=0;if(kt){Lt=kt.width,Ot=kt.height;const Bt=h2();(Bt||!Bt&&bt==="fixed")&&(Rt=kt.offsetLeft,Dt=kt.offsetTop)}return{width:Lt,height:Ot,x:Rt,y:Dt}}(nt,it)):s2(rt)?function(st,bt){const wt=v2(st,!1,bt==="fixed"),Et=wt.top+st.clientTop,kt=wt.left+st.clientLeft;return{top:Et,left:kt,x:kt,y:Et,right:kt+st.clientWidth,bottom:Et+st.clientHeight,width:st.clientWidth,height:st.clientHeight}}(rt,it):l(function(st){var bt;const wt=y3(st),Et=x2(st),kt=(bt=st.ownerDocument)==null?void 0:bt.body,Lt=p2(wt.scrollWidth,wt.clientWidth,kt?kt.scrollWidth:0,kt?kt.clientWidth:0),Ot=p2(wt.scrollHeight,wt.clientHeight,kt?kt.scrollHeight:0,kt?kt.clientHeight:0);let Rt=-Et.scrollLeft+b2(st);const Dt=-Et.scrollTop;return i3(kt||wt).direction==="rtl"&&(Rt+=p2(wt.clientWidth,kt?kt.clientWidth:0)-Lt),{width:Lt,height:Ot,x:Rt,y:Dt}}(y3(nt)))}var A={getClippingRect:function(nt){let{element:rt,boundary:it,rootBoundary:st,strategy:bt}=nt;const wt=it==="clippingAncestors"?function(Ot){let Rt=H(Ot).filter(Yt=>s2(Yt)&&r2(Yt)!=="body"),Dt=null;const Bt=i3(Ot).position==="fixed";let Ft=Bt?E2(Ot):Ot;for(;s2(Ft)&&!g2(Ft);){const Yt=i3(Ft),Jt=d2(Ft);(Bt?Jt||Dt:Jt||Yt.position!=="static"||!Dt||!["absolute","fixed"].includes(Dt.position))?Dt=Yt:Rt=Rt.filter(Wt=>Wt!==Ft),Ft=E2(Ft)}return Rt}(rt):[].concat(it),Et=[...wt,st],kt=Et[0],Lt=Et.reduce((Ot,Rt)=>{const Dt=D2(rt,Rt,bt);return Ot.top=p2(Dt.top,Ot.top),Ot.right=m2(Dt.right,Ot.right),Ot.bottom=m2(Dt.bottom,Ot.bottom),Ot.left=p2(Dt.left,Ot.left),Ot},D2(rt,kt,bt));return{width:Lt.right-Lt.left,height:Lt.bottom-Lt.top,x:Lt.left,y:Lt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(nt){let{rect:rt,offsetParent:it,strategy:st}=nt;const bt=c2(it),wt=y3(it);if(it===wt)return rt;let Et={scrollLeft:0,scrollTop:0};const kt={x:0,y:0};if((bt||!bt&&st!=="fixed")&&((r2(it)!=="body"||u2(wt))&&(Et=x2(it)),c2(it))){const Lt=v2(it,!0);kt.x=Lt.x+it.clientLeft,kt.y=Lt.y+it.clientTop}return __spreadProps(__spreadValues({},rt),{x:rt.x-Et.scrollLeft+kt.x,y:rt.y-Et.scrollTop+kt.y})},isElement:s2,getDimensions:function(nt){if(c2(nt))return{width:nt.offsetWidth,height:nt.offsetHeight};const rt=v2(nt);return{width:rt.width,height:rt.height}},getOffsetParent:T2,getDocumentElement:y3,async getElementRects(nt){let{reference:rt,floating:it,strategy:st}=nt;const bt=this.getOffsetParent||T2,wt=this.getDimensions;return{reference:L2(rt,await bt(it),st),floating:__spreadValues({x:0,y:0},await wt(it))}},getClientRects:nt=>Array.from(nt.getClientRects()),isRTL:nt=>i3(nt).direction==="rtl"};function C(nt,rt,it,st){st===void 0&&(st={});const{ancestorScroll:bt=!0,ancestorResize:wt=!0,elementResize:Et=!0,animationFrame:kt=!1}=st,Lt=bt&&!kt,Ot=Lt||wt?[...s2(nt)?H(nt):nt.contextElement?H(nt.contextElement):[],...H(rt)]:[];Ot.forEach(Ft=>{Lt&&Ft.addEventListener("scroll",it,{passive:!0}),wt&&Ft.addEventListener("resize",it)});let Rt,Dt=null;if(Et){let Ft=!0;Dt=new ResizeObserver(()=>{Ft||it(),Ft=!1}),s2(nt)&&!kt&&Dt.observe(nt),s2(nt)||!nt.contextElement||kt||Dt.observe(nt.contextElement),Dt.observe(rt)}let Bt=kt?v2(nt):null;return kt&&function Ft(){const Yt=v2(nt);!Bt||Yt.x===Bt.x&&Yt.y===Bt.y&&Yt.width===Bt.width&&Yt.height===Bt.height||it(),Bt=Yt,Rt=requestAnimationFrame(Ft)}(),it(),()=>{var Ft;Ot.forEach(Yt=>{Lt&&Yt.removeEventListener("scroll",it),wt&&Yt.removeEventListener("resize",it)}),(Ft=Dt)==null||Ft.disconnect(),Dt=null,kt&&cancelAnimationFrame(Rt)}}var O2=(nt,rt,it)=>o2(nt,rt,__spreadValues({platform:A},it)),SlPopup=class extends ShoelaceElement{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){this.stop()}async updated(nt){super.updated(nt),nt.has("active")&&(this.active?this.start():this.stop()),nt.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){const nt=this.getRootNode();this.anchorEl=nt.getElementById(this.anchor)}else this.anchor instanceof HTMLElement?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');if(this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),!this.anchorEl)throw new Error("Invalid anchor element: no anchor could be found using the anchor slot or the anchor attribute.");this.start()}start(){!this.anchorEl||(this.cleanup=C(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(nt=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>nt())):nt()})}reposition(){if(!this.active||!this.anchorEl)return;const nt=[T({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?nt.push(k({apply:({rects:rt})=>{const it=this.sync==="width"||this.sync==="both",st=this.sync==="height"||this.sync==="both";this.popup.style.width=it?`${rt.reference.width}px`:"",this.popup.style.height=st?`${rt.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&nt.push(b({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&nt.push(L$2({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?nt.push(k({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:rt,availableHeight:it})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${it}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${rt}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&nt.push(m$1({element:this.arrowEl,padding:this.arrowPadding})),O2(this.anchorEl,this.popup,{placement:this.placement,middleware:nt,strategy:this.strategy}).then(({x:rt,y:it,middlewareData:st,placement:bt})=>{const wt=getComputedStyle(this).direction==="rtl",Et={top:"bottom",right:"left",bottom:"top",left:"right"}[bt.split("-")[0]];if(this.setAttribute("data-current-placement",bt),Object.assign(this.popup.style,{left:`${rt}px`,top:`${it}px`}),this.arrow){const kt=st.arrow.x,Lt=st.arrow.y;let Ot="",Rt="",Dt="",Bt="";if(this.arrowPlacement==="start"){const Ft=typeof kt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Ot=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",Rt=wt?Ft:"",Bt=wt?"":Ft}else if(this.arrowPlacement==="end"){const Ft=typeof kt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Rt=wt?"":Ft,Bt=wt?Ft:"",Dt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(Bt=typeof kt=="number"?"calc(50% - var(--arrow-size-diagonal))":"",Ot=typeof Lt=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(Bt=typeof kt=="number"?`${kt}px`:"",Ot=typeof Lt=="number"?`${Lt}px`:"");Object.assign(this.arrowEl.style,{top:Ot,right:Rt,bottom:Dt,left:Bt,[Et]:"calc(var(--arrow-size-diagonal) * -1)"})}}),this.emit("sl-reposition")}render(){return y$2`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${o$1({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?y$2`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};SlPopup.styles=popup_styles_default;__decorateClass([i2$2(".popup")],SlPopup.prototype,"popup",2);__decorateClass([i2$2(".popup__arrow")],SlPopup.prototype,"arrowEl",2);__decorateClass([e2$2()],SlPopup.prototype,"anchor",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlPopup.prototype,"active",2);__decorateClass([e2$2({reflect:!0})],SlPopup.prototype,"placement",2);__decorateClass([e2$2({reflect:!0})],SlPopup.prototype,"strategy",2);__decorateClass([e2$2({type:Number})],SlPopup.prototype,"distance",2);__decorateClass([e2$2({type:Number})],SlPopup.prototype,"skidding",2);__decorateClass([e2$2({type:Boolean})],SlPopup.prototype,"arrow",2);__decorateClass([e2$2({attribute:"arrow-placement"})],SlPopup.prototype,"arrowPlacement",2);__decorateClass([e2$2({attribute:"arrow-padding",type:Number})],SlPopup.prototype,"arrowPadding",2);__decorateClass([e2$2({type:Boolean})],SlPopup.prototype,"flip",2);__decorateClass([e2$2({attribute:"flip-fallback-placements",converter:{fromAttribute:nt=>nt.split(" ").map(rt=>rt.trim()).filter(rt=>rt!==""),toAttribute:nt=>nt.join(" ")}})],SlPopup.prototype,"flipFallbackPlacements",2);__decorateClass([e2$2({attribute:"flip-fallback-strategy"})],SlPopup.prototype,"flipFallbackStrategy",2);__decorateClass([e2$2({type:Object})],SlPopup.prototype,"flipBoundary",2);__decorateClass([e2$2({attribute:"flip-padding",type:Number})],SlPopup.prototype,"flipPadding",2);__decorateClass([e2$2({type:Boolean})],SlPopup.prototype,"shift",2);__decorateClass([e2$2({type:Object})],SlPopup.prototype,"shiftBoundary",2);__decorateClass([e2$2({attribute:"shift-padding",type:Number})],SlPopup.prototype,"shiftPadding",2);__decorateClass([e2$2({attribute:"auto-size"})],SlPopup.prototype,"autoSize",2);__decorateClass([e2$2()],SlPopup.prototype,"sync",2);__decorateClass([e2$2({type:Object})],SlPopup.prototype,"autoSizeBoundary",2);__decorateClass([e2$2({attribute:"auto-size-padding",type:Number})],SlPopup.prototype,"autoSizePadding",2);SlPopup=__decorateClass([e$1("sl-popup")],SlPopup);const _hoisted_1$w={id:"add-media-resource-dialog",label:"Add Media Resource"},_hoisted_2$r=createBaseVNode("img",{id:"img",style:{paddingLeft:"16px",height:"100%"}},null,-1),_hoisted_3$k=[_hoisted_2$r],_hoisted_4$h=createBaseVNode("div",{class:"fields"},[createBaseVNode("sl-input",{autocomplete:"off",id:"resource-folder",placeholder:"Folder",pattern:"^[A-z0-9\\/\\-_]+$"}),createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"resource-name",placeholder:"Name",pattern:"^[A-z0-9\\-_ ]+$"}),createBaseVNode("sl-input",{autocomplete:"off",id:"resource-summary",placeholder:"Summary"})],-1),_hoisted_5$e={class:"metadata"},_hoisted_6$b={class:"exif-data"},_hoisted_7$9=["innerHTML"],_hoisted_8$9=["innerHTML"],_hoisted_9$7={class:"depicted"},_hoisted_10$6={class:"search"},_hoisted_11$5=createBaseVNode("div",null,"Entities:",-1),_hoisted_12$4=["data-entity"],_hoisted_13$4=["innerHTML"],_hoisted_14$4=["innerHTML"],_hoisted_15$4=["onClick"],_hoisted_16$4=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_sfc_main$y=defineComponent({__name:"AddMediaResourceDialog.ce",props:{path:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt;rt({isOpen:Hn,show:Tr});const st=ref(""),bt=ref(),wt=ref(),Et=ref(),kt=ref(),Lt=ref([]),Ot=ref(),Rt=ref(),Dt=ref(),Bt=ref(),Ft=ref(),Yt=ref(),Jt=ref(),Wt=ref(),Qt=ref(),rn=ref({}),sn=ref([]),on=ref(!1),hn=ref(null),mn=computed(()=>{var Mr;return(Mr=hn==null?void 0:hn.value)==null?void 0:Mr.parentNode});computed(()=>{var Mr,rr;return(rr=(Mr=hn.value)==null?void 0:Mr.getRootNode())==null?void 0:rr.host}),onMounted(()=>Cn()),watch$1(on,()=>{Ot.value&&(Ot.value.open=on.value)}),watch$1(st,()=>{bt.value=new GithubClient(st.value)}),watch$1(Rt,()=>{bt.value=new GithubClient(st.value)}),watch$1(Lt,()=>{Ft.value&&(Ft.value.value=Lt.value.join("/"))}),watch$1(it,()=>{Tn()});function Cn(){var rr,wr,fr,gr,Lr,Pr,lr;let Mr=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");Mr&&(st.value=Mr),it.path&&Tn(),Ot.value=(rr=mn.value)==null?void 0:rr.querySelector("#add-media-resource-dialog"),Ot.value.addEventListener("sl-hide",()=>kn()),Bt.value=(wr=mn.value)==null?void 0:wr.querySelector("#add-media-resource-form"),Ft.value=(fr=mn.value)==null?void 0:fr.querySelector("#resource-folder"),Ft.value.value=Lt.value.join("/"),Yt.value=(gr=mn.value)==null?void 0:gr.querySelector("#resource-name"),Jt.value=(Lr=mn.value)==null?void 0:Lr.querySelector("#resource-summary"),Wt.value=(Pr=mn.value)==null?void 0:Pr.querySelector("#img"),Qt.value=(lr=mn.value)==null?void 0:lr.querySelector("#filePicker"),it.show&&In()}function Tn(){var Mr;if(it.path){let[rr,wr]=((Mr=it.path.split(":").pop())==null?void 0:Mr.split("?"))||[],fr=wr?Object.fromEntries(wr.split("&").map(Lr=>Lr.split("="))):{},gr=rr.split("/").filter(Lr=>Lr);gr.length>0&&(wt.value=gr[0]),gr.length>1&&(Et.value=gr[1]),gr.length>2&&(Lt.value=gr.slice(2)),fr.ref&&(kt.value=fr.ref||"main")}}function kn(){Ft.value&&(Ft.value.value=Lt.value.join("/")),Yt.value&&(Yt.value.value=""),Rt.value=void 0,Qt.value&&(Qt.value.value=""),on.value=!1}async function In(){let Mr=Bt.value;Mr&&(Mr.onclick||(Mr.onclick=function(){},Mr.addEventListener("submit",async rr=>{var gr,Lr,Pr;rr.preventDefault(),console.log(`Add resource: folder="${(gr=Ft.value)==null?void 0:gr.value}" name="${(Lr=Yt.value)==null?void 0:Lr.value}" summary="${(Pr=Jt.value)==null?void 0:Pr.value}"`);let wr=await mr();const fr=new FileReader;fr.onloadend=async()=>{var sr,pr;const lr=fr.result;let qr=(sr=Yt.value)==null?void 0:sr.value.trim().replace(/ /g,"_");if(Ft.value){let Er=[...(pr=Ft.value)==null?void 0:pr.value.split("/").filter(ir=>ir),qr].join("/");await bt.value.putFile(wt.value,Et.value,`${Er}.${Dt.value}`,lr,kt.value,!0),Object.keys(wr).length>0&&await bt.value.putFile(wt.value,Et.value,`${Er}.yaml`,jsYaml.dump(wr),kt.value),on.value=!1}},Rt.value&&fr.readAsBinaryString(Rt.value)})),on.value=!0)}function Ln(Mr){sn.value=sn.value.filter(rr=>rr.id!==Mr)}function pn(Mr){sn.value=[...sn.value,Mr.detail[0]]}function Hn(){return on.value}function yn(){var Mr;if(((Mr=Qt.value)==null?void 0:Mr.files)&&Qt.value.files.length>0){Rt.value=Qt.value.files[0];let rr=Rt.value.name.split(".");Dt.value=rr.slice(-1)[0].toLowerCase();let wr=window.URL||window.webkitURL;Wt.value&&(Wt.value.onload=()=>vn().then(fr=>{rn.value=fr}),Wt.value.src=wr.createObjectURL(Rt.value)),setTimeout(()=>{var fr;return((fr=mn.value)==null?void 0:fr.querySelector("#resource-name")).focus()},100)}}async function mr(){let Mr={};Jt.value&&(Mr.summary=Jt.value.value.trim());let rr=mn.value?Array.from(mn.value.querySelectorAll(".depicted [data-entity]")).map(fr=>fr.dataset.entity):[];rr.length>0&&(Mr.depicts=rr);let wr=await vn();return wr&&(Mr={...Mr,...wr}),Mr}async function vn(){var rr,wr,fr;let Mr={};try{let gr=await tt.parse((rr=Wt.value)==null?void 0:rr.src,!0);gr.CreateDate&&(Mr.created=gr.CreateDate.toISOString());let Lr=await tt.orientation((wr=Wt.value)==null?void 0:wr.src);Lr&&(Mr.orientation=Lr);let Pr=await tt.gps((fr=Wt.value)==null?void 0:fr.src);if(Pr){let{latitude:lr,longitude:qr}=Pr;lr&&(Mr.location=`${lr.toFixed(7)},${qr.toFixed(7)}`)}}catch(gr){console.log(gr)}return Mr}function yr(){on.value=!1}function Tr(Mr){Mr?In():kn()}return(Mr,rr)=>{var wr,fr,gr;return openBlock(),createElementBlock("div",{ref_key:"root",ref:hn,class:"main"},[createBaseVNode("sl-dialog",_hoisted_1$w,[createBaseVNode("form",{style:normalizeStyle({display:(wr=Rt.value)!=null&&wr.name?"grid":"none"}),id:"add-media-resource-form",class:"input-validation-pattern"},[createBaseVNode("div",{style:normalizeStyle({height:`${(fr=Rt.value)!=null&&fr.name?120:0}px`})},_hoisted_3$k,4),_hoisted_4$h,createBaseVNode("div",_hoisted_5$e,[createBaseVNode("div",_hoisted_6$b,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(rn.value,(Lr,Pr,lr)=>(openBlock(),createElementBlock("li",{key:`exif-${lr}`},[createBaseVNode("span",{class:"label",innerHTML:Pr},null,8,_hoisted_7$9),createBaseVNode("span",{class:"value",innerHTML:Lr},null,8,_hoisted_8$9)]))),128))])]),createBaseVNode("div",_hoisted_9$7,[createBaseVNode("div",_hoisted_10$6,[_hoisted_11$5,createBaseVNode("ve-wikidata-search",{onEntitySelected:pn},null,32)]),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(sn.value,Lr=>(openBlock(),createElementBlock("li",{key:Lr.id,"data-entity":Lr.id},[createBaseVNode("span",{class:"entity-label",innerHTML:Lr.label},null,8,_hoisted_13$4),createBaseVNode("span",{class:"entity-description",innerHTML:Lr.description||""},null,8,_hoisted_14$4),createBaseVNode("sl-icon-button",{class:"remove-entity",onClick:Pr=>Ln(Lr.id),id:"remove-icon",name:"trash",label:"Remove entity"},null,8,_hoisted_15$4)],8,_hoisted_12$4))),128))])])]),createBaseVNode("div",{class:"buttons"},[createBaseVNode("sl-button",{onClick:yr},"Cancel"),_hoisted_16$4])],4),createBaseVNode("input",{style:normalizeStyle({display:(gr=Rt.value)!=null&&gr.name?"none":"block"}),id:"filePicker",type:"file",accept:"image/x-png,image/jpeg,image/gif",onChange:yn},null,36)])],512)}}}),_style_0$q=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}input[type=file]{font-size:1.2rem}form{margin:12px}form .buttons{display:flex;gap:12px;justify-content:center}form{display:grid;height:60vh;grid-template-columns:1fr;grid-template-rows:auto auto 1fr auto;margin:0;gap:12px}.metadata{height:100%;overflow-y:scroll;overflow-x:hidden;margin:0}.exif-data ul{list-style:none;margin:0;padding:0}.label{font-weight:700;margin-right:12px}.label:after{content:":"}.fields{display:flex;flex-direction:column;gap:6px}.search{display:flex;align-items:center;gap:12px}.search div{font-size:1.1rem;font-weight:700}ve-wikidata-search{width:100%}.depicted{margin-top:12px}.depicted ul{list-style:none;margin:12px 0;padding:0;width:95%}.depicted ul li{display:flex;align-items:flex-start;gap:6px;margin-bottom:9px;width:100%}.entity-label{width:30%}.entity-description{width:50%}.remove-entity{margin-left:auto}.value{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}
`,_export_sfc=(nt,rt)=>{const it=nt.__vccOpts||nt;for(const[st,bt]of rt)it[st]=bt;return it},AddMediaResourceDialog=_export_sfc(_sfc_main$y,[["styles",[_style_0$q]]]),_hoisted_1$v={ref:"root",class:"main"},_hoisted_2$q=["content"],_hoisted_3$j=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{"font-size":"20px"}},null,-1),_hoisted_4$g={key:1,content:"Click to Login with Github",placement:"top"},_hoisted_5$d=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{"font-size":"20px"}},null,-1),_sfc_main$x=defineComponent({__name:"Auth.ce",setup(nt){const rt={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","dev.juncture-digital.org":"bb290b5a738cb6fe31c7","search.juncture-digital.org":"ce9f2d2fb0a3498569fd"},it=ref(""),st=ref(),bt=computed(()=>it.value!==null),wt=ref(null),Et=ref(null);onMounted(()=>{it.value=window.localStorage.getItem("gh-auth-token"),Et.value=window.localStorage.getItem("gh-username"),window.addEventListener("storage",()=>it.value=window.localStorage.getItem("gh-auth-token"));let Rt=new URL(window.location.href).searchParams.get("code");if(Rt){let Dt=`${location.pathname}${location.hash}`;window.history.replaceState({},"",Dt),fetch(`/gh-token?code=${Rt}&hostname=${window.location.hostname}`).then(Bt=>Bt.text()).then(Bt=>{Bt&&(localStorage.setItem("gh-auth-token",Bt),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),Ot())}).catch(Bt=>console.log("err",Bt))}});function kt(){let Rt=new URL(window.location.href).hostname,Dt=Rt==="localhost"||Rt.indexOf("192.168.")===0,Bt=`${window.location.href}`,Ft=Dt?`${window.location.pathname}?code=testing&redirect_uri=${location.pathname}${location.hash}`:rt[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${rt[location.hostname]}&scope=repo&state=juncture&redirect_uri=${Bt}`:null;Ft&&(window.location.href=Ft)}function Lt(){Object.keys(localStorage).forEach(Rt=>localStorage.removeItem(Rt)),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),wt.value=null,location.href=""}function Ot(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${it.value}`}}).then(Rt=>Rt.json()).then(Rt=>wt.value=Rt)}return watch$1(wt,()=>{wt.value&&localStorage.setItem("gh-username",wt.value.login),Et.value=window.localStorage.getItem("gh-username")}),watch$1(it,()=>{st.value=new GithubClient(it.value||"")}),watch$1(st,async()=>{if(bt.value){let Rt=await st.value.user().then(Dt=>Dt.login);await st.value.repos(Rt).then(Dt=>{Dt.find(Bt=>Bt.name==="essays")||st.value.createRepository({name:"essays",description:"Juncture visual essays"}),Dt.find(Bt=>Bt.name==="media")||st.value.createRepository({name:"media",description:"Juncture media"})})}}),(Rt,Dt)=>(openBlock(),createElementBlock("div",_hoisted_1$v,[unref(bt)?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Logged in as ${Et.value}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",onClick:Lt},[_hoisted_3$j,createTextVNode(" Logout ")])],8,_hoisted_2$q)):(openBlock(),createElementBlock("sl-tooltip",_hoisted_4$g,[createBaseVNode("sl-button",{variant:"default",onClick:kt},[_hoisted_5$d,createTextVNode(" Login with Github ")])]))],512))}}),_style_0$p=`:host{display:inline-block}div{color:#00f}div:hover{text-decoration:underline;cursor:pointer}
`,Auth=_export_sfc(_sfc_main$x,[["styles",[_style_0$p]]]),_hoisted_1$u=["name"],_sfc_main$w=defineComponent({__name:"Button.ce",props:{href:{type:String},target:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},label:{type:String},icon:{type:String},authRequired:{type:Boolean,default:!1}},setup(nt){const rt=nt,it=window,st=ref(null),bt=computed(()=>{var Lt,Ot;return(Ot=(Lt=st.value)==null?void 0:Lt.getRootNode())==null?void 0:Ot.host}),wt=ref(""),Et=computed(()=>wt.value!==null);onMounted(()=>{wt.value=window.localStorage.getItem("gh-auth-token"),window.addEventListener("storage",()=>wt.value=window.localStorage.getItem("gh-auth-token"))}),watch$1(bt,()=>{var Lt;((Lt=bt.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&bt.value.parentElement.children.length===1&&(bt.value.parentElement.style.display=!rt.authRequired||Et.value?"block":"none")}),watch$1(Et,()=>{var Lt;((Lt=bt.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&bt.value.parentElement.children.length===1&&(bt.value.parentElement.style.display=!rt.authRequired||Et.value?"block":"none")});function kt(){if(rt.target==="_blank"){let Lt=rt.width||1040,Ot=rt.height||Math.max(window.innerHeight,1500);it.junctureWindow&&it.junctureWindow.close();let Rt=`toolbar=yes,location=yes,left=${rt.left},top=${rt.top},width=${Lt},height=${Ot},scrollbars=yes,status=yes`;it.junctureWindow=window.open(rt.href,"_blank",Rt)}else rt.href&&(location.href=rt.href)}return(Lt,Ot)=>!rt.authRequired||unref(Et)?(openBlock(),createElementBlock("sl-button",{key:0,ref_key:"root",ref:st,onClick:kt},[rt.icon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.icon},null,8,_hoisted_1$u)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.label),1)],512)):createCommentVNode("",!0)}}),_style_0$o=`*{box-sizing:border-box}.ve-component{z-index:2;position:relative}ve-media-card{height:100%}.manifest-popup{border:1px solid #555;background-color:#fff;width:350px;max-height:500px;overflow-y:scroll;border-radius:6px;padding:4px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}main>p:first-of-type{padding-top:24px}.markdown-section h1,.markdown-section h2,.markdown-section h3,.markdown-section h4,.markdown-section h5,.markdown-section h6{line-height:1.2}main>section,main>p{padding:0 1rem}.right{float:right;top:0;width:calc(50% - 12px)}.visible{visibility:visible;opacity:1;transition:opacity .5s linear}.hidden{visibility:hidden;opacity:0;transition:visibility 0s .5s,opacity .5s linear}#juncture section{display:flow-root;position:relative}#juncture>section{margin-top:2rem}#juncture>section>section,#juncture>section>section>section{margin-top:2rem}#juncture>section>section>section>section,#juncture>section>section>section>section>section,#juncture>section>section>section>section>section>section{margin-top:1rem;padding-top:0}#juncture section>h1,#juncture section>h2,#juncture section>h3,#juncture section>h4,#juncture section>h5,#juncture section>h6{padding-top:0;margin-top:unset;margin-bottom:1.5rem;padding-bottom:0}#juncture section ol,#juncture section ul{padding:.5em .5em .5em 1.4em}#juncture section li>p{margin:0}body{font-family:Roboto,sans-serif;margin:0;background-color:#fff}.clear{clear:both}#juncture section.sticky{position:sticky;top:0;z-index:3;background-color:#fff;padding-top:6px}ve-footer ul{display:none}#juncture section{background-color:inherit}#juncture .section1,#juncture .section2{width:100%;clear:both;background-color:inherit}.noclear{clear:none}.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.hide{display:none}.show-active p{border-left:8px solid transparent}.show-active p.active{border-left:4px solid #ccc;padding-left:4px}ve-header>ul{display:none}ve-footer{clear:both}main{background-color:inherit}:target:before{content:"";display:block;height:80px;margin:32px 0 0}section.no-offset:target:before{display:none}#juncture section.footnote{font-size:80%;margin-top:1rem}.ve-component.sticky+div.footnote,.ve-component.sticky~div.footnote{width:100%}@media (max-width: 480px){#juncture{font-size:1.2rem;line-height:1.3;padding:0 0 40vh}#juncture h1{font-size:1.5em}#juncture h2{font-size:1.4em}#juncture h3{font-size:1.3em}#juncture>section{padding:0 6px}#juncture section.sticky.right{display:none}}@media (min-width: 481px){body{margin:0 2rem}#juncture{font-size:1.3rem;line-height:1.4;padding:0;max-width:1200px;margin:auto}.ve-component{z-index:2}.ve-component[grid]{z-index:3}ve-map.full{padding-bottom:12px}.right{margin-left:12px}.left{margin-right:12px}.sticky.right+section,.sticky.right~section,.sticky.right+div,.sticky.right~div,.sticky.right+p,.sticky.right~p,.sticky.right+ol,.sticky.right~ol .sticky.right+ul,.sticky.right~ul,.sticky.right+blockquote,.sticky.right~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.left+section,.ve-component.sticky.left~section,.ve-component.sticky.left+div,.ve-component.sticky.left~div,.ve-component.sticky.left+p,.ve-component.sticky.left~p,.ve-component.sticky.left+ol,.ve-component.sticky.left~ol .ve-component.sticky.left+ul,.ve-component.sticky.left~ul,.ve-component.sticky.left+blockquote,.ve-component.sticky.left~blockquote{margin-left:50%;padding-left:9px}.ve-component.sticky+section,.ve-component.sticky~section,#juncture section.sticky+section,#juncture section.sticky~section{clear:none}.ve-component.sticky.left.text-left+section,.ve-component.sticky.left.text-left~section{margin-left:0}.ve-component.sticky.left.text-left+div,.ve-component.sticky.left.text-left~div,.ve-component.sticky.left.text-left+p,.ve-component.sticky.left.text-left~p,.ve-component.sticky.left.text-left+ol,.ve-component.sticky.left.text-left~ol .ve-component.sticky.left.text-left+ul,.ve-component.sticky.left.text-left~ul,.ve-component.sticky.left.text-left+blockquote,.ve-component.sticky.left.text-left~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.right.text-right+section,.ve-component.sticky.right.text-right~section,.ve-component.sticky.right.text-right+div,.ve-component.sticky.right.text-right~div,.ve-component.sticky.right.text-right+p,.ve-component.sticky.right.text-right~p,.ve-component.sticky.right.text-right+ol,.ve-component.sticky.right.text-right~ol .ve-component.sticky.right.text-right+ul,.ve-component.sticky.right.text-right~ul,.ve-component.sticky.right.text-right+blockquote,.ve-component.sticky.right.text-right~blockquote{margin-left:50%;padding-left:9px}}#juncture section.tab{height:calc(100% - 84px);overflow-y:scroll;border:1px solid #ccc}#juncture .tabs label{margin-bottom:0}#juncture input{display:none}#juncture input+label{display:inline-block}#juncture input~.tab{visibility:hidden}#juncture #tab1:checked~.tab.content1,#juncture #tab2:checked~.tab.content2,#juncture #tab3:checked~.tab.content3,#juncture #tab4:checked~.tab.content4,#juncture #tab5:checked~.tab.content5,#juncture #tab6:checked~.tab.content6{visibility:visible}#juncture input+label{border:1px solid #999;background:#EEE;padding:4px 12px;border-radius:4px 4px 0 0;position:relative;top:1px;cursor:pointer}#juncture input:checked+label{background:#FFF;border-bottom:1px solid white;z-index:2}#juncture input~.tab{border-top:1px solid #999;padding:12px}#juncture h1{margin-bottom:32px}#juncture .tab{position:absolute;visibility:hidden;width:100%;height:100%;padding:1rem 0}#juncture .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(265px,1fr));grid-auto-rows:1fr;row-gap:2rem;column-gap:2rem}#juncture .cards.wrapper{margin-top:0}#juncture .cards.wrapper>section{padding:0}#juncture .card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;padding:0;border:1px solid #ddd;border-radius:6px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#juncture .card p{border:none}#juncture .card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:300px}#juncture .card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}#juncture .card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.4rem .5rem;margin:0;font-size:1.1rem;font-weight:700;max-height:260px;overflow-y:scroll}#juncture .card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-start;min-height:110px;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:12}.clamp5{-webkit-line-clamp:5}#juncture .hero{display:flex;flex-direction:column;height:400px;margin-top:0}#juncture .hero-text{color:#fff;text-align:center;font-size:2.5rem;max-width:60%;margin:auto;font-family:Georgia;hyphens:unset}#juncture .cta{background-color:#ffe55a;border-radius:50px;font-family:Roboto;font-size:2rem;padding:16px 72px;margin:0 auto auto;text-align:center}@media (max-width: 480px){#juncture .hero-text{font-size:2rem;max-width:80%}#juncture .cta{font-size:1.5rem;padding:12px 60px}}mark{cursor:pointer;background:unset;border-bottom:1px solid #ccc;color:#444}mark:hover{border-bottom:2px solid #444;background:#eee}mark:after{color:#aaa;font-size:50%;line-height:0;position:relative;vertical-align:baseline;top:-.3em;padding-left:2px;padding-right:4px}mark.anno:after,mark.zoomto:after{content:"\\1f50e"}mark.play:after{content:"\\25b6"}mark.flyto:after{content:"\\2708";font-size:120%;top:0}#juncture a{color:#0645ad;text-decoration:none}#juncture a:visited{color:#0b0080}#juncture a:hover{color:#06e}#juncture a:active{color:#faa700}#juncture a:focus{outline:thin dotted}#juncture a:hover,#juncture a:active{outline:0}::-moz-selection{background:rgba(255,255,0,.3);color:#000}::selection{background:rgba(255,255,0,.3);color:#000}#juncture a::-moz-selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture a::selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture p,#juncture li{line-height:1.4;color:#444;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}#juncture p{margin:0 0 1rem}#juncture img{max-width:100%}#juncture h1,#juncture h2,#juncture h3,#juncture h4,#juncture h5,#juncture h6{font-weight:500;color:#444;line-height:1em}#juncture h4,#juncture h5 #juncture h6{font-weight:500}#juncture h1{font-size:1.8em}#juncture h2{font-size:1.6em}#juncture h3{font-size:1.5em}#juncture h4{font-size:1.2em}#juncture h5{font-size:1em}#juncture h6{font-size:.9em}#juncture blockquote{color:#666;margin:0;padding-left:1em;border-left:.5em #EEE solid}#juncture hr{display:block;height:2px;border:0;border-top:1px solid #aaa;border-bottom:1px solid #eee;margin:1em 0;padding:0}#juncture pre,#juncture code,#juncture kbd,#juncture samp{color:#900;background-color:#eee;padding:0;font-family:monospace,monospace;_font-family:"courier new",monospace;font-size:1em}#juncture pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#juncture b,#juncture strong{font-weight:700}#juncture dfn{font-style:italic}#juncture ins{background:#ff9;color:#000;text-decoration:none}#juncture sub,#juncture sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#juncture sup{top:-.5em}#juncture sub{bottom:-.25em}#juncture ul,#juncture ol{margin:0;padding:0 0 0 2em}#juncture li p:last-child{margin:0}#juncture dd{margin:0 0 0 2em}#juncture img{border:0;-ms-interpolation-mode:bicubic;vertical-align:middle}#juncture table{border-collapse:collapse;border-spacing:0;width:100%}#juncture th{border-bottom:1px solid black}#juncture td{vertical-align:top}#juncture table{border:1px solid #555}#juncture td,#juncture th{border:1px solid #555;padding:8px;line-height:1.2}#juncture th{background-color:#e2f0f7;font-weight:700;text-align:center}
`,_style_1$6=`:host{display:inline-block}
`,Button=_export_sfc(_sfc_main$w,[["styles",[_style_0$o,_style_1$6]]]);var alert_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: contents;

    /* For better DX, we'll reset the margin here so the base part can inherit it */
    margin: 0;
  }

  .alert {
    position: relative;
    display: flex;
    align-items: stretch;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-top-width: calc(var(--sl-panel-border-width) * 3);
    border-radius: var(--sl-border-radius-medium);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-normal);
    line-height: 1.6;
    color: var(--sl-color-neutral-700);
    margin: inherit;
  }

  .alert:not(.alert--has-icon) .alert__icon,
  .alert:not(.alert--closable) .alert__close-button {
    display: none;
  }

  .alert__icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-inline-start: var(--sl-spacing-large);
  }

  .alert--primary {
    border-top-color: var(--sl-color-primary-600);
  }

  .alert--primary .alert__icon {
    color: var(--sl-color-primary-600);
  }

  .alert--success {
    border-top-color: var(--sl-color-success-600);
  }

  .alert--success .alert__icon {
    color: var(--sl-color-success-600);
  }

  .alert--neutral {
    border-top-color: var(--sl-color-neutral-600);
  }

  .alert--neutral .alert__icon {
    color: var(--sl-color-neutral-600);
  }

  .alert--warning {
    border-top-color: var(--sl-color-warning-600);
  }

  .alert--warning .alert__icon {
    color: var(--sl-color-warning-600);
  }

  .alert--danger {
    border-top-color: var(--sl-color-danger-600);
  }

  .alert--danger .alert__icon {
    color: var(--sl-color-danger-600);
  }

  .alert__message {
    flex: 1 1 auto;
    display: block;
    padding: var(--sl-spacing-large);
    overflow: hidden;
  }

  .alert__close-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
    padding-inline-end: var(--sl-spacing-medium);
  }
`,toastStack=Object.assign(document.createElement("div"),{className:"sl-toast-stack"}),SlAlert=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"icon","suffix"),this.localize=new LocalizeController2(this),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0}firstUpdated(){this.base.hidden=!this.open}restartAutoHide(){clearTimeout(this.autoHideTimeout),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.duration))}handleCloseClick(){this.hide()}handleMouseMove(){this.restartAutoHide()}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.duration<1/0&&this.restartAutoHide(),await stopAnimations(this.base),this.base.hidden=!1;const{keyframes:nt,options:rt}=getAnimation(this,"alert.show",{dir:this.localize.dir()});await animateTo(this.base,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),clearTimeout(this.autoHideTimeout),await stopAnimations(this.base);const{keyframes:nt,options:rt}=getAnimation(this,"alert.hide",{dir:this.localize.dir()});await animateTo(this.base,nt,rt),this.base.hidden=!0,this.emit("sl-after-hide")}}handleDurationChange(){this.restartAutoHide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}async toast(){return new Promise(nt=>{toastStack.parentElement===null&&document.body.append(toastStack),toastStack.appendChild(this),requestAnimationFrame(()=>{this.clientWidth,this.show()}),this.addEventListener("sl-after-hide",()=>{toastStack.removeChild(this),nt(),toastStack.querySelector("sl-alert")===null&&toastStack.remove()},{once:!0})})}render(){return y$2`
      <div
        part="base"
        class=${o$1({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":this.variant==="primary","alert--success":this.variant==="success","alert--neutral":this.variant==="neutral","alert--warning":this.variant==="warning","alert--danger":this.variant==="danger"})}
        role="alert"
        aria-hidden=${this.open?"false":"true"}
        @mousemove=${this.handleMouseMove}
      >
        <slot name="icon" part="icon" class="alert__icon"></slot>

        <slot part="message" class="alert__message" aria-live="polite"></slot>

        ${this.closable?y$2`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                class="alert__close-button"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                @click=${this.handleCloseClick}
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlAlert.styles=alert_styles_default;__decorateClass([i2$2('[part~="base"]')],SlAlert.prototype,"base",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlAlert.prototype,"open",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlAlert.prototype,"closable",2);__decorateClass([e2$2({reflect:!0})],SlAlert.prototype,"variant",2);__decorateClass([e2$2({type:Number})],SlAlert.prototype,"duration",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlAlert.prototype,"handleOpenChange",1);__decorateClass([watch("duration")],SlAlert.prototype,"handleDurationChange",1);SlAlert=__decorateClass([e$1("sl-alert")],SlAlert);setDefaultAnimation("alert.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("alert.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});var textarea_styles_default=i$4`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .textarea {
    display: flex;
    align-items: center;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
    cursor: text;
  }

  /* Standard textareas */
  .textarea--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .textarea--standard:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }
  .textarea--standard:hover:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-hover);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-focus);
  }

  .textarea--standard.textarea--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea--standard.textarea--disabled .textarea__control {
    color: var(--sl-input-color-disabled);
  }

  .textarea--standard.textarea--disabled .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled textareas */
  .textarea--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .textarea--filled:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .textarea--filled.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .textarea--filled.textarea--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: 1.4;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .textarea__control::-webkit-search-decoration,
  .textarea__control::-webkit-search-cancel-button,
  .textarea__control::-webkit-search-results-button,
  .textarea__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .textarea__control:focus {
    outline: none;
  }

  /*
   * Size modifiers
   */

  .textarea--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
  }

  .textarea--small .textarea__control {
    padding: 0.5em var(--sl-input-spacing-small);
  }

  .textarea--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .textarea--medium .textarea__control {
    padding: 0.5em var(--sl-input-spacing-medium);
  }

  .textarea--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
  }

  .textarea--large .textarea__control {
    padding: 0.5em var(--sl-input-spacing-large);
  }

  /*
   * Resize types
   */

  .textarea--resize-none .textarea__control {
    resize: none;
  }

  .textarea--resize-vertical .textarea__control {
    resize: vertical;
  }

  .textarea--resize-auto .textarea__control {
    height: auto;
    resize: none;
    overflow-y: hidden;
  }
`,SlTextarea=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.hasFocus=!1,this.invalid=!1,this.title="",this.name="",this.value="",this.size="medium",this.filled=!1,this.label="",this.helpText="",this.placeholder="",this.rows=4,this.resize="vertical",this.disabled=!1,this.readonly=!1,this.required=!1,this.spellcheck=!0,this.defaultValue=""}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.setTextareaHeight()),this.updateComplete.then(()=>{this.setTextareaHeight(),this.resizeObserver.observe(this.input)})}firstUpdated(){this.invalid=!this.checkValidity()}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this.input)}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.setTextareaHeight(),this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}setTextareaHeight(){this.resize==="auto"?(this.input.style.height="auto",this.input.style.height=`${this.input.scrollHeight}px`):this.input.style.height=void 0}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.checkValidity()}handleRowsChange(){this.setTextareaHeight()}async handleValueChange(){await this.updateComplete,this.invalid=!this.checkValidity(),this.setTextareaHeight()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}scrollPosition(nt){if(nt){typeof nt.top=="number"&&(this.input.scrollTop=nt.top),typeof nt.left=="number"&&(this.input.scrollLeft=nt.left);return}return{top:this.input.scrollTop,left:this.input.scrollTop}}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,st){this.input.setRangeText(nt,rt,it,st),this.value!==this.input.value&&(this.value=this.input.value),this.value!==this.input.value&&(this.value=this.input.value,this.setTextareaHeight())}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.invalid=!this.checkValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt;return y$2`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({textarea:!0,"textarea--small":this.size==="small","textarea--medium":this.size==="medium","textarea--large":this.size==="large","textarea--standard":!this.filled,"textarea--filled":this.filled,"textarea--disabled":this.disabled,"textarea--focused":this.hasFocus,"textarea--empty":!this.value,"textarea--invalid":this.invalid,"textarea--resize-none":this.resize==="none","textarea--resize-vertical":this.resize==="vertical","textarea--resize-auto":this.resize==="auto"})}
          >
            <textarea
              part="textarea"
              id="input"
              class="textarea__control"
              title=${this.title}
              name=${l$2(this.name)}
              .value=${l2$1(this.value)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$2(this.placeholder)}
              rows=${l$2(this.rows)}
              minlength=${l$2(this.minlength)}
              maxlength=${l$2(this.maxlength)}
              autocapitalize=${l$2(this.autocapitalize)}
              autocorrect=${l$2(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${l$2(this.spellcheck)}
              enterkeyhint=${l$2(this.enterkeyhint)}
              inputmode=${l$2(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            ></textarea>
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          ${this.helpText}
        </slot>
      </div>
    `}};SlTextarea.styles=textarea_styles_default;__decorateClass([i2$2(".textarea__control")],SlTextarea.prototype,"input",2);__decorateClass([t$1()],SlTextarea.prototype,"hasFocus",2);__decorateClass([t$1()],SlTextarea.prototype,"invalid",2);__decorateClass([e2$2()],SlTextarea.prototype,"title",2);__decorateClass([e2$2()],SlTextarea.prototype,"name",2);__decorateClass([e2$2()],SlTextarea.prototype,"value",2);__decorateClass([e2$2({reflect:!0})],SlTextarea.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"filled",2);__decorateClass([e2$2()],SlTextarea.prototype,"label",2);__decorateClass([e2$2({attribute:"help-text"})],SlTextarea.prototype,"helpText",2);__decorateClass([e2$2()],SlTextarea.prototype,"placeholder",2);__decorateClass([e2$2({type:Number})],SlTextarea.prototype,"rows",2);__decorateClass([e2$2()],SlTextarea.prototype,"resize",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"disabled",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"readonly",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"required",2);__decorateClass([e2$2({type:Number})],SlTextarea.prototype,"minlength",2);__decorateClass([e2$2({type:Number})],SlTextarea.prototype,"maxlength",2);__decorateClass([e2$2()],SlTextarea.prototype,"autocapitalize",2);__decorateClass([e2$2()],SlTextarea.prototype,"autocorrect",2);__decorateClass([e2$2()],SlTextarea.prototype,"autocomplete",2);__decorateClass([e2$2({type:Boolean})],SlTextarea.prototype,"autofocus",2);__decorateClass([e2$2()],SlTextarea.prototype,"enterkeyhint",2);__decorateClass([e2$2({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlTextarea.prototype,"spellcheck",2);__decorateClass([e2$2()],SlTextarea.prototype,"inputmode",2);__decorateClass([defaultValue()],SlTextarea.prototype,"defaultValue",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleDisabledChange",1);__decorateClass([watch("rows",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleRowsChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleValueChange",1);SlTextarea=__decorateClass([e$1("sl-textarea")],SlTextarea);const _hoisted_1$t=["innerHTML"],_hoisted_2$p=["label"],_hoisted_3$i=createBaseVNode("sl-input",{id:"from",type:"email",label:"Email address"},null,-1),_hoisted_4$f=createBaseVNode("sl-alert",{id:"bad-email-alert",variant:"danger"},[createBaseVNode("sl-icon",{slot:"icon",name:"exclamation-octagon"}),createBaseVNode("strong",null,"Invalid email address"),createBaseVNode("br"),createTextVNode("Please fix and resubmit ")],-1),_hoisted_5$c=createBaseVNode("sl-textarea",{id:"message",label:"Message"},null,-1),_hoisted_6$a=createBaseVNode("sl-alert",{id:"no-message-alert",variant:"danger"},[createBaseVNode("sl-icon",{slot:"icon",name:"exclamation-octagon"}),createBaseVNode("strong",null,"No message entered"),createBaseVNode("br")],-1),_sfc_main$v=defineComponent({__name:"Contact.ce",props:{contact:{type:String},title:{type:String},subject:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt,st=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,bt="/sendmail/",wt=ref(null),Et=computed(()=>{var Qt,rn;return(rn=(Qt=wt.value)==null?void 0:Qt.getRootNode())==null?void 0:rn.host}),kt=computed(()=>{var Qt;return(Qt=wt==null?void 0:wt.value)==null?void 0:Qt.parentNode}),Lt=computed(()=>{var Qt;return(Qt=Et.value)==null?void 0:Qt.innerHTML}),Ot=ref(!1);rt({show:Ot}),watch$1(Ot,()=>Rt.open=Ot.value);let Rt,Dt,Bt,Ft,Yt;onMounted(()=>{Ot.value=it.show}),watch$1(it,()=>{Ot.value=it.show}),watch$1(Et,()=>{var Qt,rn,sn,on,hn;Rt=(Qt=kt.value)==null?void 0:Qt.querySelector(".contact-dialog"),Dt=(rn=kt.value)==null?void 0:rn.querySelector("#from"),Ft=(sn=kt.value)==null?void 0:sn.querySelector("#message"),Bt=(on=kt.value)==null?void 0:on.querySelector("#bad-email-alert"),Yt=(hn=kt.value)==null?void 0:hn.querySelector("#no-message-alert"),Rt.addEventListener("sl-hide",()=>Ot.value=!1)});function Jt(){Rt.hide(),Dt.value="",Ft.value="",Bt.hide(),Yt.hide()}async function Wt(){let Qt=st.test(Dt.value);Qt?Bt.hide():Bt.show();let rn=Ft.value.trim().length>0;if(rn?Yt.hide():Yt.show(),Qt&&rn){let sn={to:it.contact,from:Dt.value,subject:it.subject||"Contact Us",message:Ft.value};Jt(),await fetch(bt,{method:"POST",body:JSON.stringify(sn)})}}return(Qt,rn)=>(openBlock(),createElementBlock("section",{ref_key:"root",ref:wt,class:"main"},[unref(Lt)?(openBlock(),createElementBlock("a",{key:0,href:"#",onClick:rn[0]||(rn[0]=withModifiers(sn=>Ot.value=!Ot.value,["prevent"])),innerHTML:unref(Lt)},null,8,_hoisted_1$t)):createCommentVNode("",!0),createBaseVNode("sl-dialog",{label:it.title||"Contact Us",class:"contact-dialog"},[_hoisted_3$i,_hoisted_4$f,_hoisted_5$c,_hoisted_6$a,createBaseVNode("sl-button",{id:"cancel",slot:"footer",onClick:Jt},"Cancel"),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Wt},"Submit")],8,_hoisted_2$p)],512))}}),_style_0$n=`*{box-sizing:border-box}:host{display:inline-block}sl-input,sl-textarea{padding:12px 0}sl-dialog::part(title),sl-input::part(form-control),sl-textarea::part(form-control){text-align:left}
`,Contact=_export_sfc(_sfc_main$v,[["styles",[_style_0$n]]]);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}function getAugmentedNamespace(nt){var rt=nt.default;if(typeof rt=="function"){var it=function(){return rt.apply(this,arguments)};it.prototype=rt.prototype}else it={};return Object.defineProperty(it,"__esModule",{value:!0}),Object.keys(nt).forEach(function(st){var bt=Object.getOwnPropertyDescriptor(nt,st);Object.defineProperty(it,st,bt.get?bt:{enumerable:!0,get:function(){return nt[st]}})}),it}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt,rt){return function(it){return new Sha256(rt,!0).update(it)[nt]()}},createMethod=function(nt){var rt=createOutputMethod("hex",nt);NODE_JS&&(rt=nodeWrap(rt,nt)),rt.create=function(){return new Sha256(nt)},rt.update=function(bt){return rt.create().update(bt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var st=OUTPUT_TYPES[it];rt[st]=createOutputMethod(st,nt)}return rt},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash(algorithm).update(nt,"utf8").digest("hex");if(nt==null)throw new Error(ERROR);return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod},createHmacOutputMethod=function(nt,rt){return function(it,st){return new HmacSha256(it,rt,!0).update(st)[nt]()}},createHmacMethod=function(nt){var rt=createHmacOutputMethod("hex",nt);rt.create=function(bt){return new HmacSha256(bt,nt)},rt.update=function(bt,wt){return rt.create(bt).update(wt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var st=OUTPUT_TYPES[it];rt[st]=createHmacOutputMethod(st,nt)}return rt};function Sha256(nt,rt){rt?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],nt?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=nt}Sha256.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);rt=!0}for(var st,bt=0,wt,Et=nt.length,kt=this.blocks;bt<Et;){if(this.hashed&&(this.hashed=!1,kt[0]=this.block,kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)for(wt=this.start;bt<Et&&wt<64;++bt)kt[wt>>2]|=nt[bt]<<SHIFT[wt++&3];else for(wt=this.start;bt<Et&&wt<64;++bt)st=nt.charCodeAt(bt),st<128?kt[wt>>2]|=st<<SHIFT[wt++&3]:st<2048?(kt[wt>>2]|=(192|st>>6)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st&63)<<SHIFT[wt++&3]):st<55296||st>=57344?(kt[wt>>2]|=(224|st>>12)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st&63)<<SHIFT[wt++&3]):(st=65536+((st&1023)<<10|nt.charCodeAt(++bt)&1023),kt[wt>>2]|=(240|st>>18)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st>>12&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st&63)<<SHIFT[wt++&3]);this.lastByteIndex=wt,this.bytes+=wt-this.start,wt>=64?(this.block=kt[16],this.start=wt-64,this.hash(),this.hashed=!0):this.start=wt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[16]=this.block,nt[rt>>2]|=EXTRA[rt&3],this.block=nt[16],rt>=56&&(this.hashed||this.hash(),nt[0]=this.block,nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.hBytes<<3|this.bytes>>>29,nt[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,bt=this.h4,wt=this.h5,Et=this.h6,kt=this.h7,Lt=this.blocks,Ot,Rt,Dt,Bt,Ft,Yt,Jt,Wt,Qt,rn,sn;for(Ot=16;Ot<64;++Ot)Ft=Lt[Ot-15],Rt=(Ft>>>7|Ft<<25)^(Ft>>>18|Ft<<14)^Ft>>>3,Ft=Lt[Ot-2],Dt=(Ft>>>17|Ft<<15)^(Ft>>>19|Ft<<13)^Ft>>>10,Lt[Ot]=Lt[Ot-16]+Rt+Lt[Ot-7]+Dt<<0;for(sn=rt&it,Ot=0;Ot<64;Ot+=4)this.first?(this.is224?(Wt=300032,Ft=Lt[0]-1413257819,kt=Ft-150054599<<0,st=Ft+24177077<<0):(Wt=704751109,Ft=Lt[0]-210244248,kt=Ft-1521486534<<0,st=Ft+143694565<<0),this.first=!1):(Rt=(nt>>>2|nt<<30)^(nt>>>13|nt<<19)^(nt>>>22|nt<<10),Dt=(bt>>>6|bt<<26)^(bt>>>11|bt<<21)^(bt>>>25|bt<<7),Wt=nt&rt,Bt=Wt^nt&it^sn,Jt=bt&wt^~bt&Et,Ft=kt+Dt+Jt+K[Ot]+Lt[Ot],Yt=Rt+Bt,kt=st+Ft<<0,st=Ft+Yt<<0),Rt=(st>>>2|st<<30)^(st>>>13|st<<19)^(st>>>22|st<<10),Dt=(kt>>>6|kt<<26)^(kt>>>11|kt<<21)^(kt>>>25|kt<<7),Qt=st&nt,Bt=Qt^st&rt^Wt,Jt=kt&bt^~kt&wt,Ft=Et+Dt+Jt+K[Ot+1]+Lt[Ot+1],Yt=Rt+Bt,Et=it+Ft<<0,it=Ft+Yt<<0,Rt=(it>>>2|it<<30)^(it>>>13|it<<19)^(it>>>22|it<<10),Dt=(Et>>>6|Et<<26)^(Et>>>11|Et<<21)^(Et>>>25|Et<<7),rn=it&st,Bt=rn^it&nt^Qt,Jt=Et&kt^~Et&bt,Ft=wt+Dt+Jt+K[Ot+2]+Lt[Ot+2],Yt=Rt+Bt,wt=rt+Ft<<0,rt=Ft+Yt<<0,Rt=(rt>>>2|rt<<30)^(rt>>>13|rt<<19)^(rt>>>22|rt<<10),Dt=(wt>>>6|wt<<26)^(wt>>>11|wt<<21)^(wt>>>25|wt<<7),sn=rt&it,Bt=sn^rt&st^rn,Jt=wt&Et^~wt&kt,Ft=bt+Dt+Jt+K[Ot+3]+Lt[Ot+3],Yt=Rt+Bt,bt=nt+Ft<<0,nt=Ft+Yt<<0;this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+st<<0,this.h4=this.h4+bt<<0,this.h5=this.h5+wt<<0,this.h6=this.h6+Et<<0,this.h7=this.h7+kt<<0},Sha256.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,bt=this.h4,wt=this.h5,Et=this.h6,kt=this.h7,Lt=HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[st>>28&15]+HEX_CHARS[st>>24&15]+HEX_CHARS[st>>20&15]+HEX_CHARS[st>>16&15]+HEX_CHARS[st>>12&15]+HEX_CHARS[st>>8&15]+HEX_CHARS[st>>4&15]+HEX_CHARS[st&15]+HEX_CHARS[bt>>28&15]+HEX_CHARS[bt>>24&15]+HEX_CHARS[bt>>20&15]+HEX_CHARS[bt>>16&15]+HEX_CHARS[bt>>12&15]+HEX_CHARS[bt>>8&15]+HEX_CHARS[bt>>4&15]+HEX_CHARS[bt&15]+HEX_CHARS[wt>>28&15]+HEX_CHARS[wt>>24&15]+HEX_CHARS[wt>>20&15]+HEX_CHARS[wt>>16&15]+HEX_CHARS[wt>>12&15]+HEX_CHARS[wt>>8&15]+HEX_CHARS[wt>>4&15]+HEX_CHARS[wt&15]+HEX_CHARS[Et>>28&15]+HEX_CHARS[Et>>24&15]+HEX_CHARS[Et>>20&15]+HEX_CHARS[Et>>16&15]+HEX_CHARS[Et>>12&15]+HEX_CHARS[Et>>8&15]+HEX_CHARS[Et>>4&15]+HEX_CHARS[Et&15];return this.is224||(Lt+=HEX_CHARS[kt>>28&15]+HEX_CHARS[kt>>24&15]+HEX_CHARS[kt>>20&15]+HEX_CHARS[kt>>16&15]+HEX_CHARS[kt>>12&15]+HEX_CHARS[kt>>8&15]+HEX_CHARS[kt>>4&15]+HEX_CHARS[kt&15]),Lt},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,bt=this.h4,wt=this.h5,Et=this.h6,kt=this.h7,Lt=[nt>>24&255,nt>>16&255,nt>>8&255,nt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255,it>>24&255,it>>16&255,it>>8&255,it&255,st>>24&255,st>>16&255,st>>8&255,st&255,bt>>24&255,bt>>16&255,bt>>8&255,bt&255,wt>>24&255,wt>>16&255,wt>>8&255,wt&255,Et>>24&255,Et>>16&255,Et>>8&255,Et&255];return this.is224||Lt.push(kt>>24&255,kt>>16&255,kt>>8&255,kt&255),Lt},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(this.is224?28:32),rt=new DataView(nt);return rt.setUint32(0,this.h0),rt.setUint32(4,this.h1),rt.setUint32(8,this.h2),rt.setUint32(12,this.h3),rt.setUint32(16,this.h4),rt.setUint32(20,this.h5),rt.setUint32(24,this.h6),this.is224||rt.setUint32(28,this.h7),nt};function HmacSha256(nt,rt,it){var st,bt=typeof nt;if(bt==="string"){var wt=[],Et=nt.length,kt=0,Lt;for(st=0;st<Et;++st)Lt=nt.charCodeAt(st),Lt<128?wt[kt++]=Lt:Lt<2048?(wt[kt++]=192|Lt>>6,wt[kt++]=128|Lt&63):Lt<55296||Lt>=57344?(wt[kt++]=224|Lt>>12,wt[kt++]=128|Lt>>6&63,wt[kt++]=128|Lt&63):(Lt=65536+((Lt&1023)<<10|nt.charCodeAt(++st)&1023),wt[kt++]=240|Lt>>18,wt[kt++]=128|Lt>>12&63,wt[kt++]=128|Lt>>6&63,wt[kt++]=128|Lt&63);nt=wt}else if(bt==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);nt.length>64&&(nt=new Sha256(rt,!0).update(nt).array());var Ot=[],Rt=[];for(st=0;st<64;++st){var Dt=nt[st]||0;Ot[st]=92^Dt,Rt[st]=54^Dt}Sha256.call(this,rt,it),this.update(Rt),this.oKeyPad=Ot,this.inner=!0,this.sharedMemory=it}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var nt=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(nt),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var md5$1={exports:{}};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt){return function(rt){return new Md5(!0).update(rt)[nt]()}},createMethod=function(){var nt=createOutputMethod("hex");NODE_JS&&(nt=nodeWrap(nt)),nt.create=function(){return new Md5},nt.update=function(st){return nt.create().update(st)};for(var rt=0;rt<OUTPUT_TYPES.length;++rt){var it=OUTPUT_TYPES[rt];nt[it]=createOutputMethod(it)}return nt},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash("md5").update(nt,"utf8").digest("hex");if(nt==null)throw ERROR;return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash("md5").update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod};function Md5(nt){if(nt)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var rt=new ArrayBuffer(68);this.buffer8=new Uint8Array(rt),this.blocks=new Uint32Array(rt)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw ERROR;if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw ERROR}else throw ERROR;rt=!0}for(var st,bt=0,wt,Et=nt.length,kt=this.blocks,Lt=this.buffer8;bt<Et;){if(this.hashed&&(this.hashed=!1,kt[0]=kt[16],kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)if(ARRAY_BUFFER)for(wt=this.start;bt<Et&&wt<64;++bt)Lt[wt++]=nt[bt];else for(wt=this.start;bt<Et&&wt<64;++bt)kt[wt>>2]|=nt[bt]<<SHIFT[wt++&3];else if(ARRAY_BUFFER)for(wt=this.start;bt<Et&&wt<64;++bt)st=nt.charCodeAt(bt),st<128?Lt[wt++]=st:st<2048?(Lt[wt++]=192|st>>6,Lt[wt++]=128|st&63):st<55296||st>=57344?(Lt[wt++]=224|st>>12,Lt[wt++]=128|st>>6&63,Lt[wt++]=128|st&63):(st=65536+((st&1023)<<10|nt.charCodeAt(++bt)&1023),Lt[wt++]=240|st>>18,Lt[wt++]=128|st>>12&63,Lt[wt++]=128|st>>6&63,Lt[wt++]=128|st&63);else for(wt=this.start;bt<Et&&wt<64;++bt)st=nt.charCodeAt(bt),st<128?kt[wt>>2]|=st<<SHIFT[wt++&3]:st<2048?(kt[wt>>2]|=(192|st>>6)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st&63)<<SHIFT[wt++&3]):st<55296||st>=57344?(kt[wt>>2]|=(224|st>>12)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st&63)<<SHIFT[wt++&3]):(st=65536+((st&1023)<<10|nt.charCodeAt(++bt)&1023),kt[wt>>2]|=(240|st>>18)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st>>12&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|st&63)<<SHIFT[wt++&3]);this.lastByteIndex=wt,this.bytes+=wt-this.start,wt>=64?(this.start=wt-64,this.hash(),this.hashed=!0):this.start=wt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[rt>>2]|=EXTRA[rt&3],rt>=56&&(this.hashed||this.hash(),nt[0]=nt[16],nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.bytes<<3,nt[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var nt,rt,it,st,bt,wt,Et=this.blocks;this.first?(nt=Et[0]-680876937,nt=(nt<<7|nt>>>25)-271733879<<0,st=(-1732584194^nt&2004318071)+Et[1]-117830708,st=(st<<12|st>>>20)+nt<<0,it=(-271733879^st&(nt^-271733879))+Et[2]-1126478375,it=(it<<17|it>>>15)+st<<0,rt=(nt^it&(st^nt))+Et[3]-1316259209,rt=(rt<<22|rt>>>10)+it<<0):(nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,nt+=(st^rt&(it^st))+Et[0]-680876936,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[1]-389564586,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[2]+606105819,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[3]-1044525330,rt=(rt<<22|rt>>>10)+it<<0),nt+=(st^rt&(it^st))+Et[4]-176418897,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[5]+1200080426,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[6]-1473231341,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[7]-45705983,rt=(rt<<22|rt>>>10)+it<<0,nt+=(st^rt&(it^st))+Et[8]+1770035416,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[9]-1958414417,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[10]-42063,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[11]-1990404162,rt=(rt<<22|rt>>>10)+it<<0,nt+=(st^rt&(it^st))+Et[12]+1804603682,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[13]-40341101,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[14]-1502002290,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[15]+1236535329,rt=(rt<<22|rt>>>10)+it<<0,nt+=(it^st&(rt^it))+Et[1]-165796510,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[6]-1069501632,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[11]+643717713,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[0]-373897302,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[5]-701558691,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[10]+38016083,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[15]-660478335,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[4]-405537848,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[9]+568446438,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[14]-1019803690,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[3]-187363961,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[8]+1163531501,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[13]-1444681467,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[2]-51403784,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[7]+1735328473,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[12]-1926607734,rt=(rt<<20|rt>>>12)+it<<0,bt=rt^it,nt+=(bt^st)+Et[5]-378558,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[8]-2022574463,st=(st<<11|st>>>21)+nt<<0,wt=st^nt,it+=(wt^rt)+Et[11]+1839030562,it=(it<<16|it>>>16)+st<<0,rt+=(wt^it)+Et[14]-35309556,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^st)+Et[1]-1530992060,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[4]+1272893353,st=(st<<11|st>>>21)+nt<<0,wt=st^nt,it+=(wt^rt)+Et[7]-155497632,it=(it<<16|it>>>16)+st<<0,rt+=(wt^it)+Et[10]-1094730640,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^st)+Et[13]+681279174,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[0]-358537222,st=(st<<11|st>>>21)+nt<<0,wt=st^nt,it+=(wt^rt)+Et[3]-722521979,it=(it<<16|it>>>16)+st<<0,rt+=(wt^it)+Et[6]+76029189,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^st)+Et[9]-640364487,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[12]-421815835,st=(st<<11|st>>>21)+nt<<0,wt=st^nt,it+=(wt^rt)+Et[15]+530742520,it=(it<<16|it>>>16)+st<<0,rt+=(wt^it)+Et[2]-995338651,rt=(rt<<23|rt>>>9)+it<<0,nt+=(it^(rt|~st))+Et[0]-198630844,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[7]+1126891415,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[14]-1416354905,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[5]-57434055,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[12]+1700485571,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[3]-1894986606,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[10]-1051523,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[1]-2054922799,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[8]+1873313359,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[15]-30611744,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[6]-1560198380,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[13]+1309151649,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[4]-145523070,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[11]-1120210379,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[2]+718787259,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[9]-343485551,rt=(rt<<21|rt>>>11)+it<<0,this.first?(this.h0=nt+1732584193<<0,this.h1=rt-271733879<<0,this.h2=it-1732584194<<0,this.h3=st+271733878<<0,this.first=!1):(this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+st<<0)},Md5.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3;return HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[st>>4&15]+HEX_CHARS[st&15]+HEX_CHARS[st>>12&15]+HEX_CHARS[st>>8&15]+HEX_CHARS[st>>20&15]+HEX_CHARS[st>>16&15]+HEX_CHARS[st>>28&15]+HEX_CHARS[st>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3;return[nt&255,nt>>8&255,nt>>16&255,nt>>24&255,rt&255,rt>>8&255,rt>>16&255,rt>>24&255,it&255,it>>8&255,it>>16&255,it>>24&255,st&255,st>>8&255,st>>16&255,st>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(16),rt=new Uint32Array(nt);return rt[0]=this.h0,rt[1]=this.h1,rt[2]=this.h2,rt[3]=this.h3,nt},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var nt,rt,it,st="",bt=this.array(),wt=0;wt<15;)nt=bt[wt++],rt=bt[wt++],it=bt[wt++],st+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[(nt<<4|rt>>>4)&63]+BASE64_ENCODE_CHAR[(rt<<2|it>>>6)&63]+BASE64_ENCODE_CHAR[it&63];return nt=bt[wt],st+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[nt<<4&63]+"==",st};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);const md5=md5$1.exports;var top$2="top",bottom$1="bottom",right$1="right",left$1="left",auto="auto",basePlacements=[top$2,bottom$1,right$1,left$1],start$2="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,rt){return nt.concat([rt+"-"+start$2,rt+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,rt){return nt.concat([rt,rt+"-"+start$2,rt+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main$1="main",afterMain="afterMain",beforeWrite="beforeWrite",write$1="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main$1,afterMain,beforeWrite,write$1,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function isElement$1(nt){var rt=getWindow(nt).Element;return nt instanceof rt||nt instanceof Element}function isHTMLElement(nt){var rt=getWindow(nt).HTMLElement;return nt instanceof rt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var rt=getWindow(nt).ShadowRoot;return nt instanceof rt||nt instanceof ShadowRoot}function applyStyles(nt){var rt=nt.state;Object.keys(rt.elements).forEach(function(it){var st=rt.styles[it]||{},bt=rt.attributes[it]||{},wt=rt.elements[it];!isHTMLElement(wt)||!getNodeName(wt)||(Object.assign(wt.style,st),Object.keys(bt).forEach(function(Et){var kt=bt[Et];kt===!1?wt.removeAttribute(Et):wt.setAttribute(Et,kt===!0?"":kt)}))})}function effect$2(nt){var rt=nt.state,it={popper:{position:rt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(rt.elements.popper.style,it.popper),rt.styles=it,rt.elements.arrow&&Object.assign(rt.elements.arrow.style,it.arrow),function(){Object.keys(rt.elements).forEach(function(st){var bt=rt.elements[st],wt=rt.attributes[st]||{},Et=Object.keys(rt.styles.hasOwnProperty(st)?rt.styles[st]:it[st]),kt=Et.reduce(function(Lt,Ot){return Lt[Ot]="",Lt},{});!isHTMLElement(bt)||!getNodeName(bt)||(Object.assign(bt.style,kt),Object.keys(wt).forEach(function(Lt){bt.removeAttribute(Lt)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(nt){return nt.split("-")[0]}var max$3=Math.max,min$3=Math.min,round=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands?nt.brands.map(function(rt){return rt.brand+"/"+rt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!1);var st=nt.getBoundingClientRect(),bt=1,wt=1;rt&&isHTMLElement(nt)&&(bt=nt.offsetWidth>0&&round(st.width)/nt.offsetWidth||1,wt=nt.offsetHeight>0&&round(st.height)/nt.offsetHeight||1);var Et=isElement$1(nt)?getWindow(nt):window,kt=Et.visualViewport,Lt=!isLayoutViewport()&&it,Ot=(st.left+(Lt&&kt?kt.offsetLeft:0))/bt,Rt=(st.top+(Lt&&kt?kt.offsetTop:0))/wt,Dt=st.width/bt,Bt=st.height/wt;return{width:Dt,height:Bt,top:Rt,right:Ot+Dt,bottom:Rt+Bt,left:Ot,x:Ot,y:Rt}}function getLayoutRect(nt){var rt=getBoundingClientRect(nt),it=nt.offsetWidth,st=nt.offsetHeight;return Math.abs(rt.width-it)<=1&&(it=rt.width),Math.abs(rt.height-st)<=1&&(st=rt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:it,height:st}}function contains(nt,rt){var it=rt.getRootNode&&rt.getRootNode();if(nt.contains(rt))return!0;if(it&&isShadowRoot(it)){var st=rt;do{if(st&&nt.isSameNode(st))return!0;st=st.parentNode||st.host}while(st)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement$1(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var rt=/firefox/i.test(getUAString()),it=/Trident/i.test(getUAString());if(it&&isHTMLElement(nt)){var st=getComputedStyle$1(nt);if(st.position==="fixed")return null}var bt=getParentNode(nt);for(isShadowRoot(bt)&&(bt=bt.host);isHTMLElement(bt)&&["html","body"].indexOf(getNodeName(bt))<0;){var wt=getComputedStyle$1(bt);if(wt.transform!=="none"||wt.perspective!=="none"||wt.contain==="paint"||["transform","perspective"].indexOf(wt.willChange)!==-1||rt&&wt.willChange==="filter"||rt&&wt.filter&&wt.filter!=="none")return bt;bt=bt.parentNode}return null}function getOffsetParent(nt){for(var rt=getWindow(nt),it=getTrueOffsetParent(nt);it&&isTableElement(it)&&getComputedStyle$1(it).position==="static";)it=getTrueOffsetParent(it);return it&&(getNodeName(it)==="html"||getNodeName(it)==="body"&&getComputedStyle$1(it).position==="static")?rt:it||getContainingBlock(nt)||rt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,rt,it){return max$3(nt,min$3(rt,it))}function withinMaxClamp(nt,rt,it){var st=within(nt,rt,it);return st>it?it:st}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,rt){return rt.reduce(function(it,st){return it[st]=nt,it},{})}var toPaddingObject=function nt(rt,it){return rt=typeof rt=="function"?rt(Object.assign({},it.rects,{placement:it.placement})):rt,mergePaddingObject(typeof rt!="number"?rt:expandToHashMap(rt,basePlacements))};function arrow(nt){var rt,it=nt.state,st=nt.name,bt=nt.options,wt=it.elements.arrow,Et=it.modifiersData.popperOffsets,kt=getBasePlacement$1(it.placement),Lt=getMainAxisFromPlacement(kt),Ot=[left$1,right$1].indexOf(kt)>=0,Rt=Ot?"height":"width";if(!(!wt||!Et)){var Dt=toPaddingObject(bt.padding,it),Bt=getLayoutRect(wt),Ft=Lt==="y"?top$2:left$1,Yt=Lt==="y"?bottom$1:right$1,Jt=it.rects.reference[Rt]+it.rects.reference[Lt]-Et[Lt]-it.rects.popper[Rt],Wt=Et[Lt]-it.rects.reference[Lt],Qt=getOffsetParent(wt),rn=Qt?Lt==="y"?Qt.clientHeight||0:Qt.clientWidth||0:0,sn=Jt/2-Wt/2,on=Dt[Ft],hn=rn-Bt[Rt]-Dt[Yt],mn=rn/2-Bt[Rt]/2+sn,Cn=within(on,mn,hn),Tn=Lt;it.modifiersData[st]=(rt={},rt[Tn]=Cn,rt.centerOffset=Cn-mn,rt)}}function effect$1(nt){var rt=nt.state,it=nt.options,st=it.element,bt=st===void 0?"[data-popper-arrow]":st;bt!=null&&(typeof bt=="string"&&(bt=rt.elements.popper.querySelector(bt),!bt)||!contains(rt.elements.popper,bt)||(rt.elements.arrow=bt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt){var rt=nt.x,it=nt.y,st=window,bt=st.devicePixelRatio||1;return{x:round(rt*bt)/bt||0,y:round(it*bt)/bt||0}}function mapToStyles(nt){var rt,it=nt.popper,st=nt.popperRect,bt=nt.placement,wt=nt.variation,Et=nt.offsets,kt=nt.position,Lt=nt.gpuAcceleration,Ot=nt.adaptive,Rt=nt.roundOffsets,Dt=nt.isFixed,Bt=Et.x,Ft=Bt===void 0?0:Bt,Yt=Et.y,Jt=Yt===void 0?0:Yt,Wt=typeof Rt=="function"?Rt({x:Ft,y:Jt}):{x:Ft,y:Jt};Ft=Wt.x,Jt=Wt.y;var Qt=Et.hasOwnProperty("x"),rn=Et.hasOwnProperty("y"),sn=left$1,on=top$2,hn=window;if(Ot){var mn=getOffsetParent(it),Cn="clientHeight",Tn="clientWidth";if(mn===getWindow(it)&&(mn=getDocumentElement(it),getComputedStyle$1(mn).position!=="static"&&kt==="absolute"&&(Cn="scrollHeight",Tn="scrollWidth")),mn=mn,bt===top$2||(bt===left$1||bt===right$1)&&wt===end$1){on=bottom$1;var kn=Dt&&mn===hn&&hn.visualViewport?hn.visualViewport.height:mn[Cn];Jt-=kn-st.height,Jt*=Lt?1:-1}if(bt===left$1||(bt===top$2||bt===bottom$1)&&wt===end$1){sn=right$1;var In=Dt&&mn===hn&&hn.visualViewport?hn.visualViewport.width:mn[Tn];Ft-=In-st.width,Ft*=Lt?1:-1}}var Ln=Object.assign({position:kt},Ot&&unsetSides),pn=Rt===!0?roundOffsetsByDPR({x:Ft,y:Jt}):{x:Ft,y:Jt};if(Ft=pn.x,Jt=pn.y,Lt){var Hn;return Object.assign({},Ln,(Hn={},Hn[on]=rn?"0":"",Hn[sn]=Qt?"0":"",Hn.transform=(hn.devicePixelRatio||1)<=1?"translate("+Ft+"px, "+Jt+"px)":"translate3d("+Ft+"px, "+Jt+"px, 0)",Hn))}return Object.assign({},Ln,(rt={},rt[on]=rn?Jt+"px":"",rt[sn]=Qt?Ft+"px":"",rt.transform="",rt))}function computeStyles(nt){var rt=nt.state,it=nt.options,st=it.gpuAcceleration,bt=st===void 0?!0:st,wt=it.adaptive,Et=wt===void 0?!0:wt,kt=it.roundOffsets,Lt=kt===void 0?!0:kt,Ot={placement:getBasePlacement$1(rt.placement),variation:getVariation(rt.placement),popper:rt.elements.popper,popperRect:rt.rects.popper,gpuAcceleration:bt,isFixed:rt.options.strategy==="fixed"};rt.modifiersData.popperOffsets!=null&&(rt.styles.popper=Object.assign({},rt.styles.popper,mapToStyles(Object.assign({},Ot,{offsets:rt.modifiersData.popperOffsets,position:rt.options.strategy,adaptive:Et,roundOffsets:Lt})))),rt.modifiersData.arrow!=null&&(rt.styles.arrow=Object.assign({},rt.styles.arrow,mapToStyles(Object.assign({},Ot,{offsets:rt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Lt})))),rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-placement":rt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var rt=nt.state,it=nt.instance,st=nt.options,bt=st.scroll,wt=bt===void 0?!0:bt,Et=st.resize,kt=Et===void 0?!0:Et,Lt=getWindow(rt.elements.popper),Ot=[].concat(rt.scrollParents.reference,rt.scrollParents.popper);return wt&&Ot.forEach(function(Rt){Rt.addEventListener("scroll",it.update,passive)}),kt&&Lt.addEventListener("resize",it.update,passive),function(){wt&&Ot.forEach(function(Rt){Rt.removeEventListener("scroll",it.update,passive)}),kt&&Lt.removeEventListener("resize",it.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function nt(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(rt){return hash$1[rt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(rt){return hash[rt]})}function getWindowScroll(nt){var rt=getWindow(nt),it=rt.pageXOffset,st=rt.pageYOffset;return{scrollLeft:it,scrollTop:st}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,rt){var it=getWindow(nt),st=getDocumentElement(nt),bt=it.visualViewport,wt=st.clientWidth,Et=st.clientHeight,kt=0,Lt=0;if(bt){wt=bt.width,Et=bt.height;var Ot=isLayoutViewport();(Ot||!Ot&&rt==="fixed")&&(kt=bt.offsetLeft,Lt=bt.offsetTop)}return{width:wt,height:Et,x:kt+getWindowScrollBarX(nt),y:Lt}}function getDocumentRect(nt){var rt,it=getDocumentElement(nt),st=getWindowScroll(nt),bt=(rt=nt.ownerDocument)==null?void 0:rt.body,wt=max$3(it.scrollWidth,it.clientWidth,bt?bt.scrollWidth:0,bt?bt.clientWidth:0),Et=max$3(it.scrollHeight,it.clientHeight,bt?bt.scrollHeight:0,bt?bt.clientHeight:0),kt=-st.scrollLeft+getWindowScrollBarX(nt),Lt=-st.scrollTop;return getComputedStyle$1(bt||it).direction==="rtl"&&(kt+=max$3(it.clientWidth,bt?bt.clientWidth:0)-wt),{width:wt,height:Et,x:kt,y:Lt}}function isScrollParent(nt){var rt=getComputedStyle$1(nt),it=rt.overflow,st=rt.overflowX,bt=rt.overflowY;return/auto|scroll|overlay|hidden/.test(it+bt+st)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,rt){var it;rt===void 0&&(rt=[]);var st=getScrollParent(nt),bt=st===((it=nt.ownerDocument)==null?void 0:it.body),wt=getWindow(st),Et=bt?[wt].concat(wt.visualViewport||[],isScrollParent(st)?st:[]):st,kt=rt.concat(Et);return bt?kt:kt.concat(listScrollParents(getParentNode(Et)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,rt){var it=getBoundingClientRect(nt,!1,rt==="fixed");return it.top=it.top+nt.clientTop,it.left=it.left+nt.clientLeft,it.bottom=it.top+nt.clientHeight,it.right=it.left+nt.clientWidth,it.width=nt.clientWidth,it.height=nt.clientHeight,it.x=it.left,it.y=it.top,it}function getClientRectFromMixedType(nt,rt,it){return rt===viewport?rectToClientRect(getViewportRect(nt,it)):isElement$1(rt)?getInnerBoundingClientRect(rt,it):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var rt=listScrollParents(getParentNode(nt)),it=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,st=it&&isHTMLElement(nt)?getOffsetParent(nt):nt;return isElement$1(st)?rt.filter(function(bt){return isElement$1(bt)&&contains(bt,st)&&getNodeName(bt)!=="body"}):[]}function getClippingRect(nt,rt,it,st){var bt=rt==="clippingParents"?getClippingParents(nt):[].concat(rt),wt=[].concat(bt,[it]),Et=wt[0],kt=wt.reduce(function(Lt,Ot){var Rt=getClientRectFromMixedType(nt,Ot,st);return Lt.top=max$3(Rt.top,Lt.top),Lt.right=min$3(Rt.right,Lt.right),Lt.bottom=min$3(Rt.bottom,Lt.bottom),Lt.left=max$3(Rt.left,Lt.left),Lt},getClientRectFromMixedType(nt,Et,st));return kt.width=kt.right-kt.left,kt.height=kt.bottom-kt.top,kt.x=kt.left,kt.y=kt.top,kt}function computeOffsets(nt){var rt=nt.reference,it=nt.element,st=nt.placement,bt=st?getBasePlacement$1(st):null,wt=st?getVariation(st):null,Et=rt.x+rt.width/2-it.width/2,kt=rt.y+rt.height/2-it.height/2,Lt;switch(bt){case top$2:Lt={x:Et,y:rt.y-it.height};break;case bottom$1:Lt={x:Et,y:rt.y+rt.height};break;case right$1:Lt={x:rt.x+rt.width,y:kt};break;case left$1:Lt={x:rt.x-it.width,y:kt};break;default:Lt={x:rt.x,y:rt.y}}var Ot=bt?getMainAxisFromPlacement(bt):null;if(Ot!=null){var Rt=Ot==="y"?"height":"width";switch(wt){case start$2:Lt[Ot]=Lt[Ot]-(rt[Rt]/2-it[Rt]/2);break;case end$1:Lt[Ot]=Lt[Ot]+(rt[Rt]/2-it[Rt]/2);break}}return Lt}function detectOverflow(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,bt=st===void 0?nt.placement:st,wt=it.strategy,Et=wt===void 0?nt.strategy:wt,kt=it.boundary,Lt=kt===void 0?clippingParents:kt,Ot=it.rootBoundary,Rt=Ot===void 0?viewport:Ot,Dt=it.elementContext,Bt=Dt===void 0?popper:Dt,Ft=it.altBoundary,Yt=Ft===void 0?!1:Ft,Jt=it.padding,Wt=Jt===void 0?0:Jt,Qt=mergePaddingObject(typeof Wt!="number"?Wt:expandToHashMap(Wt,basePlacements)),rn=Bt===popper?reference:popper,sn=nt.rects.popper,on=nt.elements[Yt?rn:Bt],hn=getClippingRect(isElement$1(on)?on:on.contextElement||getDocumentElement(nt.elements.popper),Lt,Rt,Et),mn=getBoundingClientRect(nt.elements.reference),Cn=computeOffsets({reference:mn,element:sn,strategy:"absolute",placement:bt}),Tn=rectToClientRect(Object.assign({},sn,Cn)),kn=Bt===popper?Tn:mn,In={top:hn.top-kn.top+Qt.top,bottom:kn.bottom-hn.bottom+Qt.bottom,left:hn.left-kn.left+Qt.left,right:kn.right-hn.right+Qt.right},Ln=nt.modifiersData.offset;if(Bt===popper&&Ln){var pn=Ln[bt];Object.keys(In).forEach(function(Hn){var yn=[right$1,bottom$1].indexOf(Hn)>=0?1:-1,mr=[top$2,bottom$1].indexOf(Hn)>=0?"y":"x";In[Hn]+=pn[mr]*yn})}return In}function computeAutoPlacement(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,bt=it.boundary,wt=it.rootBoundary,Et=it.padding,kt=it.flipVariations,Lt=it.allowedAutoPlacements,Ot=Lt===void 0?placements:Lt,Rt=getVariation(st),Dt=Rt?kt?variationPlacements:variationPlacements.filter(function(Yt){return getVariation(Yt)===Rt}):basePlacements,Bt=Dt.filter(function(Yt){return Ot.indexOf(Yt)>=0});Bt.length===0&&(Bt=Dt);var Ft=Bt.reduce(function(Yt,Jt){return Yt[Jt]=detectOverflow(nt,{placement:Jt,boundary:bt,rootBoundary:wt,padding:Et})[getBasePlacement$1(Jt)],Yt},{});return Object.keys(Ft).sort(function(Yt,Jt){return Ft[Yt]-Ft[Jt]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement$1(nt)===auto)return[];var rt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),rt,getOppositeVariationPlacement(rt)]}function flip(nt){var rt=nt.state,it=nt.options,st=nt.name;if(!rt.modifiersData[st]._skip){for(var bt=it.mainAxis,wt=bt===void 0?!0:bt,Et=it.altAxis,kt=Et===void 0?!0:Et,Lt=it.fallbackPlacements,Ot=it.padding,Rt=it.boundary,Dt=it.rootBoundary,Bt=it.altBoundary,Ft=it.flipVariations,Yt=Ft===void 0?!0:Ft,Jt=it.allowedAutoPlacements,Wt=rt.options.placement,Qt=getBasePlacement$1(Wt),rn=Qt===Wt,sn=Lt||(rn||!Yt?[getOppositePlacement(Wt)]:getExpandedFallbackPlacements(Wt)),on=[Wt].concat(sn).reduce(function(Lr,Pr){return Lr.concat(getBasePlacement$1(Pr)===auto?computeAutoPlacement(rt,{placement:Pr,boundary:Rt,rootBoundary:Dt,padding:Ot,flipVariations:Yt,allowedAutoPlacements:Jt}):Pr)},[]),hn=rt.rects.reference,mn=rt.rects.popper,Cn=new Map,Tn=!0,kn=on[0],In=0;In<on.length;In++){var Ln=on[In],pn=getBasePlacement$1(Ln),Hn=getVariation(Ln)===start$2,yn=[top$2,bottom$1].indexOf(pn)>=0,mr=yn?"width":"height",vn=detectOverflow(rt,{placement:Ln,boundary:Rt,rootBoundary:Dt,altBoundary:Bt,padding:Ot}),yr=yn?Hn?right$1:left$1:Hn?bottom$1:top$2;hn[mr]>mn[mr]&&(yr=getOppositePlacement(yr));var Tr=getOppositePlacement(yr),Mr=[];if(wt&&Mr.push(vn[pn]<=0),kt&&Mr.push(vn[yr]<=0,vn[Tr]<=0),Mr.every(function(Lr){return Lr})){kn=Ln,Tn=!1;break}Cn.set(Ln,Mr)}if(Tn)for(var rr=Yt?3:1,wr=function(Pr){var lr=on.find(function(qr){var sr=Cn.get(qr);if(sr)return sr.slice(0,Pr).every(function(pr){return pr})});if(lr)return kn=lr,"break"},fr=rr;fr>0;fr--){var gr=wr(fr);if(gr==="break")break}rt.placement!==kn&&(rt.modifiersData[st]._skip=!0,rt.placement=kn,rt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,rt,it){return it===void 0&&(it={x:0,y:0}),{top:nt.top-rt.height-it.y,right:nt.right-rt.width+it.x,bottom:nt.bottom-rt.height+it.y,left:nt.left-rt.width-it.x}}function isAnySideFullyClipped(nt){return[top$2,right$1,bottom$1,left$1].some(function(rt){return nt[rt]>=0})}function hide(nt){var rt=nt.state,it=nt.name,st=rt.rects.reference,bt=rt.rects.popper,wt=rt.modifiersData.preventOverflow,Et=detectOverflow(rt,{elementContext:"reference"}),kt=detectOverflow(rt,{altBoundary:!0}),Lt=getSideOffsets(Et,st),Ot=getSideOffsets(kt,bt,wt),Rt=isAnySideFullyClipped(Lt),Dt=isAnySideFullyClipped(Ot);rt.modifiersData[it]={referenceClippingOffsets:Lt,popperEscapeOffsets:Ot,isReferenceHidden:Rt,hasPopperEscaped:Dt},rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-reference-hidden":Rt,"data-popper-escaped":Dt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,rt,it){var st=getBasePlacement$1(nt),bt=[left$1,top$2].indexOf(st)>=0?-1:1,wt=typeof it=="function"?it(Object.assign({},rt,{placement:nt})):it,Et=wt[0],kt=wt[1];return Et=Et||0,kt=(kt||0)*bt,[left$1,right$1].indexOf(st)>=0?{x:kt,y:Et}:{x:Et,y:kt}}function offset$1(nt){var rt=nt.state,it=nt.options,st=nt.name,bt=it.offset,wt=bt===void 0?[0,0]:bt,Et=placements.reduce(function(Rt,Dt){return Rt[Dt]=distanceAndSkiddingToXY(Dt,rt.rects,wt),Rt},{}),kt=Et[rt.placement],Lt=kt.x,Ot=kt.y;rt.modifiersData.popperOffsets!=null&&(rt.modifiersData.popperOffsets.x+=Lt,rt.modifiersData.popperOffsets.y+=Ot),rt.modifiersData[st]=Et}const offset$2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset$1};function popperOffsets(nt){var rt=nt.state,it=nt.name;rt.modifiersData[it]=computeOffsets({reference:rt.rects.reference,element:rt.rects.popper,strategy:"absolute",placement:rt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var rt=nt.state,it=nt.options,st=nt.name,bt=it.mainAxis,wt=bt===void 0?!0:bt,Et=it.altAxis,kt=Et===void 0?!1:Et,Lt=it.boundary,Ot=it.rootBoundary,Rt=it.altBoundary,Dt=it.padding,Bt=it.tether,Ft=Bt===void 0?!0:Bt,Yt=it.tetherOffset,Jt=Yt===void 0?0:Yt,Wt=detectOverflow(rt,{boundary:Lt,rootBoundary:Ot,padding:Dt,altBoundary:Rt}),Qt=getBasePlacement$1(rt.placement),rn=getVariation(rt.placement),sn=!rn,on=getMainAxisFromPlacement(Qt),hn=getAltAxis(on),mn=rt.modifiersData.popperOffsets,Cn=rt.rects.reference,Tn=rt.rects.popper,kn=typeof Jt=="function"?Jt(Object.assign({},rt.rects,{placement:rt.placement})):Jt,In=typeof kn=="number"?{mainAxis:kn,altAxis:kn}:Object.assign({mainAxis:0,altAxis:0},kn),Ln=rt.modifiersData.offset?rt.modifiersData.offset[rt.placement]:null,pn={x:0,y:0};if(!!mn){if(wt){var Hn,yn=on==="y"?top$2:left$1,mr=on==="y"?bottom$1:right$1,vn=on==="y"?"height":"width",yr=mn[on],Tr=yr+Wt[yn],Mr=yr-Wt[mr],rr=Ft?-Tn[vn]/2:0,wr=rn===start$2?Cn[vn]:Tn[vn],fr=rn===start$2?-Tn[vn]:-Cn[vn],gr=rt.elements.arrow,Lr=Ft&&gr?getLayoutRect(gr):{width:0,height:0},Pr=rt.modifiersData["arrow#persistent"]?rt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),lr=Pr[yn],qr=Pr[mr],sr=within(0,Cn[vn],Lr[vn]),pr=sn?Cn[vn]/2-rr-sr-lr-In.mainAxis:wr-sr-lr-In.mainAxis,Er=sn?-Cn[vn]/2+rr+sr+qr+In.mainAxis:fr+sr+qr+In.mainAxis,ir=rt.elements.arrow&&getOffsetParent(rt.elements.arrow),Pn=ir?on==="y"?ir.clientTop||0:ir.clientLeft||0:0,nn=(Hn=Ln==null?void 0:Ln[on])!=null?Hn:0,fn=yr+pr-nn-Pn,cn=yr+Er-nn,Nn=within(Ft?min$3(Tr,fn):Tr,yr,Ft?max$3(Mr,cn):Mr);mn[on]=Nn,pn[on]=Nn-yr}if(kt){var On,cr=on==="x"?top$2:left$1,Bn=on==="x"?bottom$1:right$1,Qn=mn[hn],Un=hn==="y"?"height":"width",or=Qn+Wt[cr],hr=Qn-Wt[Bn],kr=[top$2,left$1].indexOf(Qt)!==-1,xr=(On=Ln==null?void 0:Ln[hn])!=null?On:0,br=kr?or:Qn-Cn[Un]-Tn[Un]-xr+In.altAxis,hi=kr?Qn+Cn[Un]+Tn[Un]-xr-In.altAxis:hr,di=Ft&&kr?withinMaxClamp(br,Qn,hi):within(Ft?br:or,Qn,Ft?hi:hr);mn[hn]=di,pn[hn]=di-Qn}rt.modifiersData[st]=pn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var rt=nt.getBoundingClientRect(),it=round(rt.width)/nt.offsetWidth||1,st=round(rt.height)/nt.offsetHeight||1;return it!==1||st!==1}function getCompositeRect(nt,rt,it){it===void 0&&(it=!1);var st=isHTMLElement(rt),bt=isHTMLElement(rt)&&isElementScaled(rt),wt=getDocumentElement(rt),Et=getBoundingClientRect(nt,bt,it),kt={scrollLeft:0,scrollTop:0},Lt={x:0,y:0};return(st||!st&&!it)&&((getNodeName(rt)!=="body"||isScrollParent(wt))&&(kt=getNodeScroll(rt)),isHTMLElement(rt)?(Lt=getBoundingClientRect(rt,!0),Lt.x+=rt.clientLeft,Lt.y+=rt.clientTop):wt&&(Lt.x=getWindowScrollBarX(wt))),{x:Et.left+kt.scrollLeft-Lt.x,y:Et.top+kt.scrollTop-Lt.y,width:Et.width,height:Et.height}}function order$1(nt){var rt=new Map,it=new Set,st=[];nt.forEach(function(wt){rt.set(wt.name,wt)});function bt(wt){it.add(wt.name);var Et=[].concat(wt.requires||[],wt.requiresIfExists||[]);Et.forEach(function(kt){if(!it.has(kt)){var Lt=rt.get(kt);Lt&&bt(Lt)}}),st.push(wt)}return nt.forEach(function(wt){it.has(wt.name)||bt(wt)}),st}function orderModifiers(nt){var rt=order$1(nt);return modifierPhases.reduce(function(it,st){return it.concat(rt.filter(function(bt){return bt.phase===st}))},[])}function debounce$1(nt){var rt;return function(){return rt||(rt=new Promise(function(it){Promise.resolve().then(function(){rt=void 0,it(nt())})})),rt}}function mergeByName(nt){var rt=nt.reduce(function(it,st){var bt=it[st.name];return it[st.name]=bt?Object.assign({},bt,st,{options:Object.assign({},bt.options,st.options),data:Object.assign({},bt.data,st.data)}):st,it},{});return Object.keys(rt).map(function(it){return rt[it]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return!rt.some(function(st){return!(st&&typeof st.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var rt=nt,it=rt.defaultModifiers,st=it===void 0?[]:it,bt=rt.defaultOptions,wt=bt===void 0?DEFAULT_OPTIONS:bt;return function(kt,Lt,Ot){Ot===void 0&&(Ot=wt);var Rt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,wt),modifiersData:{},elements:{reference:kt,popper:Lt},attributes:{},styles:{}},Dt=[],Bt=!1,Ft={state:Rt,setOptions:function(Qt){var rn=typeof Qt=="function"?Qt(Rt.options):Qt;Jt(),Rt.options=Object.assign({},wt,Rt.options,rn),Rt.scrollParents={reference:isElement$1(kt)?listScrollParents(kt):kt.contextElement?listScrollParents(kt.contextElement):[],popper:listScrollParents(Lt)};var sn=orderModifiers(mergeByName([].concat(st,Rt.options.modifiers)));return Rt.orderedModifiers=sn.filter(function(on){return on.enabled}),Yt(),Ft.update()},forceUpdate:function(){if(!Bt){var Qt=Rt.elements,rn=Qt.reference,sn=Qt.popper;if(!!areValidElements(rn,sn)){Rt.rects={reference:getCompositeRect(rn,getOffsetParent(sn),Rt.options.strategy==="fixed"),popper:getLayoutRect(sn)},Rt.reset=!1,Rt.placement=Rt.options.placement,Rt.orderedModifiers.forEach(function(In){return Rt.modifiersData[In.name]=Object.assign({},In.data)});for(var on=0;on<Rt.orderedModifiers.length;on++){if(Rt.reset===!0){Rt.reset=!1,on=-1;continue}var hn=Rt.orderedModifiers[on],mn=hn.fn,Cn=hn.options,Tn=Cn===void 0?{}:Cn,kn=hn.name;typeof mn=="function"&&(Rt=mn({state:Rt,options:Tn,name:kn,instance:Ft})||Rt)}}}},update:debounce$1(function(){return new Promise(function(Wt){Ft.forceUpdate(),Wt(Rt)})}),destroy:function(){Jt(),Bt=!0}};if(!areValidElements(kt,Lt))return Ft;Ft.setOptions(Ot).then(function(Wt){!Bt&&Ot.onFirstUpdate&&Ot.onFirstUpdate(Wt)});function Yt(){Rt.orderedModifiers.forEach(function(Wt){var Qt=Wt.name,rn=Wt.options,sn=rn===void 0?{}:rn,on=Wt.effect;if(typeof on=="function"){var hn=on({state:Rt,name:Qt,instance:Ft,options:sn}),mn=function(){};Dt.push(hn||mn)}})}function Jt(){Dt.forEach(function(Wt){return Wt()}),Dt=[]}return Ft}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$2,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function nt(){return document.body};function getValueAtIndexOrReturn(nt,rt,it){if(Array.isArray(nt)){var st=nt[rt];return st==null?Array.isArray(it)?it[rt]:it:st}return nt}function isType(nt,rt){var it={}.toString.call(nt);return it.indexOf("[object")===0&&it.indexOf(rt+"]")>-1}function invokeWithArgsOrReturn(nt,rt){return typeof nt=="function"?nt.apply(void 0,rt):nt}function debounce(nt,rt){if(rt===0)return nt;var it;return function(st){clearTimeout(it),it=setTimeout(function(){nt(st)},rt)}}function splitBySpaces(nt){return nt.split(/\s+/).filter(Boolean)}function normalizeToArray(nt){return[].concat(nt)}function pushIfUnique(nt,rt){nt.indexOf(rt)===-1&&nt.push(rt)}function unique(nt){return nt.filter(function(rt,it){return nt.indexOf(rt)===it})}function getBasePlacement(nt){return nt.split("-")[0]}function arrayFrom(nt){return[].slice.call(nt)}function removeUndefinedProps(nt){return Object.keys(nt).reduce(function(rt,it){return nt[it]!==void 0&&(rt[it]=nt[it]),rt},{})}function div(){return document.createElement("div")}function isElement(nt){return["Element","Fragment"].some(function(rt){return isType(nt,rt)})}function isNodeList(nt){return isType(nt,"NodeList")}function isMouseEvent(nt){return isType(nt,"MouseEvent")}function isReferenceElement(nt){return!!(nt&&nt._tippy&&nt._tippy.reference===nt)}function getArrayOfElements(nt){return isElement(nt)?[nt]:isNodeList(nt)?arrayFrom(nt):Array.isArray(nt)?nt:arrayFrom(document.querySelectorAll(nt))}function setTransitionDuration(nt,rt){nt.forEach(function(it){it&&(it.style.transitionDuration=rt+"ms")})}function setVisibilityState(nt,rt){nt.forEach(function(it){it&&it.setAttribute("data-state",rt)})}function getOwnerDocument(nt){var rt,it=normalizeToArray(nt),st=it[0];return st!=null&&(rt=st.ownerDocument)!=null&&rt.body?st.ownerDocument:document}function isCursorOutsideInteractiveBorder(nt,rt){var it=rt.clientX,st=rt.clientY;return nt.every(function(bt){var wt=bt.popperRect,Et=bt.popperState,kt=bt.props,Lt=kt.interactiveBorder,Ot=getBasePlacement(Et.placement),Rt=Et.modifiersData.offset;if(!Rt)return!0;var Dt=Ot==="bottom"?Rt.top.y:0,Bt=Ot==="top"?Rt.bottom.y:0,Ft=Ot==="right"?Rt.left.x:0,Yt=Ot==="left"?Rt.right.x:0,Jt=wt.top-st+Dt>Lt,Wt=st-wt.bottom-Bt>Lt,Qt=wt.left-it+Ft>Lt,rn=it-wt.right-Yt>Lt;return Jt||Wt||Qt||rn})}function updateTransitionEndListener(nt,rt,it){var st=rt+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(bt){nt[st](bt,it)})}function actualContains(nt,rt){for(var it=rt;it;){var st;if(nt.contains(it))return!0;it=it.getRootNode==null||(st=it.getRootNode())==null?void 0:st.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var nt=performance.now();nt-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=nt}function onWindowBlur(){var nt=document.activeElement;if(isReferenceElement(nt)){var rt=nt._tippy;nt.blur&&!rt.state.isVisible&&nt.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function nt(){},onBeforeUpdate:function nt(){},onCreate:function nt(){},onDestroy:function nt(){},onHidden:function nt(){},onHide:function nt(){},onMount:function nt(){},onShow:function nt(){},onShown:function nt(){},onTrigger:function nt(){},onUntrigger:function nt(){},onClickOutside:function nt(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function nt(rt){var it=Object.keys(rt);it.forEach(function(st){defaultProps[st]=rt[st]})};function getExtendedPassedProps(nt){var rt=nt.plugins||[],it=rt.reduce(function(st,bt){var wt=bt.name,Et=bt.defaultValue;if(wt){var kt;st[wt]=nt[wt]!==void 0?nt[wt]:(kt=defaultProps[wt])!=null?kt:Et}return st},{});return Object.assign({},nt,it)}function getDataAttributeProps(nt,rt){var it=rt?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:rt}))):defaultKeys,st=it.reduce(function(bt,wt){var Et=(nt.getAttribute("data-tippy-"+wt)||"").trim();if(!Et)return bt;if(wt==="content")bt[wt]=Et;else try{bt[wt]=JSON.parse(Et)}catch{bt[wt]=Et}return bt},{});return st}function evaluateProps(nt,rt){var it=Object.assign({},rt,{content:invokeWithArgsOrReturn(rt.content,[nt])},rt.ignoreAttributes?{}:getDataAttributeProps(nt,rt.plugins));return it.aria=Object.assign({},defaultProps.aria,it.aria),it.aria={expanded:it.aria.expanded==="auto"?rt.interactive:it.aria.expanded,content:it.aria.content==="auto"?rt.interactive?null:"describedby":it.aria.content},it}var innerHTML=function nt(){return"innerHTML"};function dangerouslySetInnerHTML(nt,rt){nt[innerHTML()]=rt}function createArrowElement(nt){var rt=div();return nt===!0?rt.className=ARROW_CLASS:(rt.className=SVG_ARROW_CLASS,isElement(nt)?rt.appendChild(nt):dangerouslySetInnerHTML(rt,nt)),rt}function setContent(nt,rt){isElement(rt.content)?(dangerouslySetInnerHTML(nt,""),nt.appendChild(rt.content)):typeof rt.content!="function"&&(rt.allowHTML?dangerouslySetInnerHTML(nt,rt.content):nt.textContent=rt.content)}function getChildren(nt){var rt=nt.firstElementChild,it=arrayFrom(rt.children);return{box:rt,content:it.find(function(st){return st.classList.contains(CONTENT_CLASS)}),arrow:it.find(function(st){return st.classList.contains(ARROW_CLASS)||st.classList.contains(SVG_ARROW_CLASS)}),backdrop:it.find(function(st){return st.classList.contains(BACKDROP_CLASS)})}}function render$3(nt){var rt=div(),it=div();it.className=BOX_CLASS,it.setAttribute("data-state","hidden"),it.setAttribute("tabindex","-1");var st=div();st.className=CONTENT_CLASS,st.setAttribute("data-state","hidden"),setContent(st,nt.props),rt.appendChild(it),it.appendChild(st),bt(nt.props,nt.props);function bt(wt,Et){var kt=getChildren(rt),Lt=kt.box,Ot=kt.content,Rt=kt.arrow;Et.theme?Lt.setAttribute("data-theme",Et.theme):Lt.removeAttribute("data-theme"),typeof Et.animation=="string"?Lt.setAttribute("data-animation",Et.animation):Lt.removeAttribute("data-animation"),Et.inertia?Lt.setAttribute("data-inertia",""):Lt.removeAttribute("data-inertia"),Lt.style.maxWidth=typeof Et.maxWidth=="number"?Et.maxWidth+"px":Et.maxWidth,Et.role?Lt.setAttribute("role",Et.role):Lt.removeAttribute("role"),(wt.content!==Et.content||wt.allowHTML!==Et.allowHTML)&&setContent(Ot,nt.props),Et.arrow?Rt?wt.arrow!==Et.arrow&&(Lt.removeChild(Rt),Lt.appendChild(createArrowElement(Et.arrow))):Lt.appendChild(createArrowElement(Et.arrow)):Rt&&Lt.removeChild(Rt)}return{popper:rt,onUpdate:bt}}render$3.$$tippy=!0;var idCounter$1=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(nt,rt){var it=evaluateProps(nt,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(rt)))),st,bt,wt,Et=!1,kt=!1,Lt=!1,Ot=!1,Rt,Dt,Bt,Ft=[],Yt=debounce(fn,it.interactiveDebounce),Jt,Wt=idCounter$1++,Qt=null,rn=unique(it.plugins),sn={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},on={id:Wt,reference:nt,popper:div(),popperInstance:Qt,props:it,state:sn,plugins:rn,clearDelayTimeouts:br,setProps:hi,setContent:di,show:vi,hide:Ti,hideWithInteractivity:ki,enable:kr,disable:xr,unmount:Di,destroy:Ci};if(!it.render)return on;var hn=it.render(on),mn=hn.popper,Cn=hn.onUpdate;mn.setAttribute("data-tippy-root",""),mn.id="tippy-"+on.id,on.popper=mn,nt._tippy=on,mn._tippy=on;var Tn=rn.map(function($r){return $r.fn(on)}),kn=nt.hasAttribute("aria-expanded");return ir(),rr(),yr(),Tr("onCreate",[on]),it.showOnCreate&&or(),mn.addEventListener("mouseenter",function(){on.props.interactive&&on.state.isVisible&&on.clearDelayTimeouts()}),mn.addEventListener("mouseleave",function(){on.props.interactive&&on.props.trigger.indexOf("mouseenter")>=0&&yn().addEventListener("mousemove",Yt)}),on;function In(){var $r=on.props.touch;return Array.isArray($r)?$r:[$r,0]}function Ln(){return In()[0]==="hold"}function pn(){var $r;return!!(($r=on.props.render)!=null&&$r.$$tippy)}function Hn(){return Jt||nt}function yn(){var $r=Hn().parentNode;return $r?getOwnerDocument($r):document}function mr(){return getChildren(mn)}function vn($r){return on.state.isMounted&&!on.state.isVisible||currentInput.isTouch||Rt&&Rt.type==="focus"?0:getValueAtIndexOrReturn(on.props.delay,$r?0:1,defaultProps.delay)}function yr($r){$r===void 0&&($r=!1),mn.style.pointerEvents=on.props.interactive&&!$r?"":"none",mn.style.zIndex=""+on.props.zIndex}function Tr($r,An,Sn){if(Sn===void 0&&(Sn=!0),Tn.forEach(function(er){er[$r]&&er[$r].apply(er,An)}),Sn){var Wn;(Wn=on.props)[$r].apply(Wn,An)}}function Mr(){var $r=on.props.aria;if(!!$r.content){var An="aria-"+$r.content,Sn=mn.id,Wn=normalizeToArray(on.props.triggerTarget||nt);Wn.forEach(function(er){var vr=er.getAttribute(An);if(on.state.isVisible)er.setAttribute(An,vr?vr+" "+Sn:Sn);else{var ti=vr&&vr.replace(Sn,"").trim();ti?er.setAttribute(An,ti):er.removeAttribute(An)}})}}function rr(){if(!(kn||!on.props.aria.expanded)){var $r=normalizeToArray(on.props.triggerTarget||nt);$r.forEach(function(An){on.props.interactive?An.setAttribute("aria-expanded",on.state.isVisible&&An===Hn()?"true":"false"):An.removeAttribute("aria-expanded")})}}function wr(){yn().removeEventListener("mousemove",Yt),mouseMoveListeners=mouseMoveListeners.filter(function($r){return $r!==Yt})}function fr($r){if(!(currentInput.isTouch&&(Lt||$r.type==="mousedown"))){var An=$r.composedPath&&$r.composedPath()[0]||$r.target;if(!(on.props.interactive&&actualContains(mn,An))){if(normalizeToArray(on.props.triggerTarget||nt).some(function(Sn){return actualContains(Sn,An)})){if(currentInput.isTouch||on.state.isVisible&&on.props.trigger.indexOf("click")>=0)return}else Tr("onClickOutside",[on,$r]);on.props.hideOnClick===!0&&(on.clearDelayTimeouts(),on.hide(),kt=!0,setTimeout(function(){kt=!1}),on.state.isMounted||lr())}}}function gr(){Lt=!0}function Lr(){Lt=!1}function Pr(){var $r=yn();$r.addEventListener("mousedown",fr,!0),$r.addEventListener("touchend",fr,TOUCH_OPTIONS),$r.addEventListener("touchstart",Lr,TOUCH_OPTIONS),$r.addEventListener("touchmove",gr,TOUCH_OPTIONS)}function lr(){var $r=yn();$r.removeEventListener("mousedown",fr,!0),$r.removeEventListener("touchend",fr,TOUCH_OPTIONS),$r.removeEventListener("touchstart",Lr,TOUCH_OPTIONS),$r.removeEventListener("touchmove",gr,TOUCH_OPTIONS)}function qr($r,An){pr($r,function(){!on.state.isVisible&&mn.parentNode&&mn.parentNode.contains(mn)&&An()})}function sr($r,An){pr($r,An)}function pr($r,An){var Sn=mr().box;function Wn(er){er.target===Sn&&(updateTransitionEndListener(Sn,"remove",Wn),An())}if($r===0)return An();updateTransitionEndListener(Sn,"remove",Dt),updateTransitionEndListener(Sn,"add",Wn),Dt=Wn}function Er($r,An,Sn){Sn===void 0&&(Sn=!1);var Wn=normalizeToArray(on.props.triggerTarget||nt);Wn.forEach(function(er){er.addEventListener($r,An,Sn),Ft.push({node:er,eventType:$r,handler:An,options:Sn})})}function ir(){Ln()&&(Er("touchstart",nn,{passive:!0}),Er("touchend",cn,{passive:!0})),splitBySpaces(on.props.trigger).forEach(function($r){if($r!=="manual")switch(Er($r,nn),$r){case"mouseenter":Er("mouseleave",cn);break;case"focus":Er(isIE11?"focusout":"blur",Nn);break;case"focusin":Er("focusout",Nn);break}})}function Pn(){Ft.forEach(function($r){var An=$r.node,Sn=$r.eventType,Wn=$r.handler,er=$r.options;An.removeEventListener(Sn,Wn,er)}),Ft=[]}function nn($r){var An,Sn=!1;if(!(!on.state.isEnabled||On($r)||kt)){var Wn=((An=Rt)==null?void 0:An.type)==="focus";Rt=$r,Jt=$r.currentTarget,rr(),!on.state.isVisible&&isMouseEvent($r)&&mouseMoveListeners.forEach(function(er){return er($r)}),$r.type==="click"&&(on.props.trigger.indexOf("mouseenter")<0||Et)&&on.props.hideOnClick!==!1&&on.state.isVisible?Sn=!0:or($r),$r.type==="click"&&(Et=!Sn),Sn&&!Wn&&hr($r)}}function fn($r){var An=$r.target,Sn=Hn().contains(An)||mn.contains(An);if(!($r.type==="mousemove"&&Sn)){var Wn=Un().concat(mn).map(function(er){var vr,ti=er._tippy,_r=(vr=ti.popperInstance)==null?void 0:vr.state;return _r?{popperRect:er.getBoundingClientRect(),popperState:_r,props:it}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Wn,$r)&&(wr(),hr($r))}}function cn($r){var An=On($r)||on.props.trigger.indexOf("click")>=0&&Et;if(!An){if(on.props.interactive){on.hideWithInteractivity($r);return}hr($r)}}function Nn($r){on.props.trigger.indexOf("focusin")<0&&$r.target!==Hn()||on.props.interactive&&$r.relatedTarget&&mn.contains($r.relatedTarget)||hr($r)}function On($r){return currentInput.isTouch?Ln()!==$r.type.indexOf("touch")>=0:!1}function cr(){Bn();var $r=on.props,An=$r.popperOptions,Sn=$r.placement,Wn=$r.offset,er=$r.getReferenceClientRect,vr=$r.moveTransition,ti=pn()?getChildren(mn).arrow:null,_r=er?{getBoundingClientRect:er,contextElement:er.contextElement||Hn()}:nt,li={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(_i){var Pi=_i.state;if(pn()){var xi=mr(),Zi=xi.box;["placement","reference-hidden","escaped"].forEach(function($i){$i==="placement"?Zi.setAttribute("data-placement",Pi.placement):Pi.attributes.popper["data-popper-"+$i]?Zi.setAttribute("data-"+$i,""):Zi.removeAttribute("data-"+$i)}),Pi.attributes.popper={}}}},Or=[{name:"offset",options:{offset:Wn}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!vr}},li];pn()&&ti&&Or.push({name:"arrow",options:{element:ti,padding:3}}),Or.push.apply(Or,(An==null?void 0:An.modifiers)||[]),on.popperInstance=createPopper(_r,mn,Object.assign({},An,{placement:Sn,onFirstUpdate:Bt,modifiers:Or}))}function Bn(){on.popperInstance&&(on.popperInstance.destroy(),on.popperInstance=null)}function Qn(){var $r=on.props.appendTo,An,Sn=Hn();on.props.interactive&&$r===TIPPY_DEFAULT_APPEND_TO||$r==="parent"?An=Sn.parentNode:An=invokeWithArgsOrReturn($r,[Sn]),An.contains(mn)||An.appendChild(mn),on.state.isMounted=!0,cr()}function Un(){return arrayFrom(mn.querySelectorAll("[data-tippy-root]"))}function or($r){on.clearDelayTimeouts(),$r&&Tr("onTrigger",[on,$r]),Pr();var An=vn(!0),Sn=In(),Wn=Sn[0],er=Sn[1];currentInput.isTouch&&Wn==="hold"&&er&&(An=er),An?st=setTimeout(function(){on.show()},An):on.show()}function hr($r){if(on.clearDelayTimeouts(),Tr("onUntrigger",[on,$r]),!on.state.isVisible){lr();return}if(!(on.props.trigger.indexOf("mouseenter")>=0&&on.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf($r.type)>=0&&Et)){var An=vn(!1);An?bt=setTimeout(function(){on.state.isVisible&&on.hide()},An):wt=requestAnimationFrame(function(){on.hide()})}}function kr(){on.state.isEnabled=!0}function xr(){on.hide(),on.state.isEnabled=!1}function br(){clearTimeout(st),clearTimeout(bt),cancelAnimationFrame(wt)}function hi($r){if(!on.state.isDestroyed){Tr("onBeforeUpdate",[on,$r]),Pn();var An=on.props,Sn=evaluateProps(nt,Object.assign({},An,removeUndefinedProps($r),{ignoreAttributes:!0}));on.props=Sn,ir(),An.interactiveDebounce!==Sn.interactiveDebounce&&(wr(),Yt=debounce(fn,Sn.interactiveDebounce)),An.triggerTarget&&!Sn.triggerTarget?normalizeToArray(An.triggerTarget).forEach(function(Wn){Wn.removeAttribute("aria-expanded")}):Sn.triggerTarget&&nt.removeAttribute("aria-expanded"),rr(),yr(),Cn&&Cn(An,Sn),on.popperInstance&&(cr(),Un().forEach(function(Wn){requestAnimationFrame(Wn._tippy.popperInstance.forceUpdate)})),Tr("onAfterUpdate",[on,$r])}}function di($r){on.setProps({content:$r})}function vi(){var $r=on.state.isVisible,An=on.state.isDestroyed,Sn=!on.state.isEnabled,Wn=currentInput.isTouch&&!on.props.touch,er=getValueAtIndexOrReturn(on.props.duration,0,defaultProps.duration);if(!($r||An||Sn||Wn)&&!Hn().hasAttribute("disabled")&&(Tr("onShow",[on],!1),on.props.onShow(on)!==!1)){if(on.state.isVisible=!0,pn()&&(mn.style.visibility="visible"),yr(),Pr(),on.state.isMounted||(mn.style.transition="none"),pn()){var vr=mr(),ti=vr.box,_r=vr.content;setTransitionDuration([ti,_r],0)}Bt=function(){var Or;if(!(!on.state.isVisible||Ot)){if(Ot=!0,mn.offsetHeight,mn.style.transition=on.props.moveTransition,pn()&&on.props.animation){var mi=mr(),_i=mi.box,Pi=mi.content;setTransitionDuration([_i,Pi],er),setVisibilityState([_i,Pi],"visible")}Mr(),rr(),pushIfUnique(mountedInstances,on),(Or=on.popperInstance)==null||Or.forceUpdate(),Tr("onMount",[on]),on.props.animation&&pn()&&sr(er,function(){on.state.isShown=!0,Tr("onShown",[on])})}},Qn()}}function Ti(){var $r=!on.state.isVisible,An=on.state.isDestroyed,Sn=!on.state.isEnabled,Wn=getValueAtIndexOrReturn(on.props.duration,1,defaultProps.duration);if(!($r||An||Sn)&&(Tr("onHide",[on],!1),on.props.onHide(on)!==!1)){if(on.state.isVisible=!1,on.state.isShown=!1,Ot=!1,Et=!1,pn()&&(mn.style.visibility="hidden"),wr(),lr(),yr(!0),pn()){var er=mr(),vr=er.box,ti=er.content;on.props.animation&&(setTransitionDuration([vr,ti],Wn),setVisibilityState([vr,ti],"hidden"))}Mr(),rr(),on.props.animation?pn()&&qr(Wn,on.unmount):on.unmount()}}function ki($r){yn().addEventListener("mousemove",Yt),pushIfUnique(mouseMoveListeners,Yt),Yt($r)}function Di(){on.state.isVisible&&on.hide(),on.state.isMounted&&(Bn(),Un().forEach(function($r){$r._tippy.unmount()}),mn.parentNode&&mn.parentNode.removeChild(mn),mountedInstances=mountedInstances.filter(function($r){return $r!==on}),on.state.isMounted=!1,Tr("onHidden",[on]))}function Ci(){on.state.isDestroyed||(on.clearDelayTimeouts(),on.unmount(),Pn(),delete nt._tippy,on.state.isDestroyed=!0,Tr("onDestroy",[on]))}}function tippy(nt,rt){rt===void 0&&(rt={});var it=defaultProps.plugins.concat(rt.plugins||[]);bindGlobalEventListeners();var st=Object.assign({},rt,{plugins:it}),bt=getArrayOfElements(nt),wt=bt.reduce(function(Et,kt){var Lt=kt&&createTippy(kt,st);return Lt&&Et.push(Lt),Et},[]);return isElement(nt)?wt[0]:wt}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function nt(rt){var it=rt.state,st={popper:{position:it.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(it.elements.popper.style,st.popper),it.styles=st,it.elements.arrow&&Object.assign(it.elements.arrow.style,st.arrow)}});tippy.setDefaultProps({render:render$3});const iiifServer="https://iiif.juncture-digital.org";function isURL(nt){return/^https*:\/\//.test(nt)}function sha256(nt){return sha256$1.exports.sha256(nt)}function isMobile(){return"ontouchstart"in document.documentElement&&/mobi/i.test(navigator.userAgent)}function kebabToCamel(nt){return nt.replace(/-([a-z])/g,function(rt){return rt[1].toUpperCase()})}let tippyEntities;function initTippy(nt=null,rt=!1){let it=new Set("qid label description image".split(/\s/));rt&&(tippyEntities=null),nt=nt||document;let st=Array.from(nt.querySelectorAll("mark")).filter(bt=>Array.from(bt.attributes).find(wt=>{let Et=wt.name.toLowerCase();return it.has(Et)||isQID(wt.value)&&Et!=="flyto"}));!tippyEntities&&st.length>0&&(tippyEntities=st,tippy(tippyEntities,{interactive:!0,allowHTML:!0,delay:[null,null],onShow:bt=>{let wt=Array.from(bt.reference.attributes).filter(Et=>it.has(Et.name)).map(Et=>`${Et.name}="${Et.value}"`);bt.setContent(`<ve-entity-card ${wt} style="max-width:90vw;"></ve-entity-card>`)}}))}async function getManifest(nt,rt=!1){let it=nt.indexOf("http")===0?nt:`${iiifServer}/${nt}/manifest.json`;return(await loadManifests([it],rt))[0]}function observeNavbar(nt,rt){const it=()=>{let bt=parseInt(nt.style.top.replace(/^-/,"").replace(/px$/,""))||0,Et=(parseInt(nt.style.height.replace(/px$/,""))||nt.clientHeight)-bt;rt.style.top=`${Et}px`};it(),new MutationObserver(it).observe(nt,{attributes:!0})}function makeSticky(nt){var it;nt.classList.add("sticky"),nt.style.position="sticky";let rt=document.querySelector('ve-navbar[sticky="true"]');if(rt)observeNavbar(rt,nt);else{let st=document.querySelector("ve-header[sticky]");st?(rt=(it=st==null?void 0:st.shadowRoot)==null?void 0:it.querySelector("ve-navbar"),rt?observeNavbar(rt,nt):new MutationObserver(()=>{var wt;rt=(wt=st==null?void 0:st.shadowRoot)==null?void 0:wt.querySelector("ve-navbar"),rt&&observeNavbar(rt,nt)}).observe(st,{childList:!0,subtree:!0,attributes:!0})):nt.style.top="0"}}function findItem(nt,rt,it=1){const st=_findItems(nt,rt);return st.length>=it?st[it-1]:null}function _findItems(nt,rt,it=[]){if(it=it||[],rt.items)for(let st=0;st<rt.items.length;st++){let bt=rt.items[st];!Object.entries(nt).find(([Et,kt])=>bt[Et]&&bt[Et]!==kt)?it.push(bt):_findItems(nt,bt,it)}return it}function getItemInfo(nt,rt=1){return findItem({type:"Annotation",motivation:"painting"},nt,rt).body}function imageCount(nt){return _findItems({type:"Annotation",motivation:"painting"},nt).length}const _manifestCache={};async function loadManifests(nt,rt=!1){let it=nt.map(bt=>bt.indexOf("http")===0?bt:`${iiifServer}/${bt}/manifest.json`),st=it.filter(bt=>!_manifestCache[bt]);if(st.length>0){let bt=st.map(kt=>(rt&&["localhost","iiif.juncture-digital.org"].includes(new URL(kt).hostname)&&(kt+="?refresh"),fetch(kt))),wt=await Promise.all(bt),Et=await Promise.all(wt.map(kt=>kt.json()));if(bt=Et.filter(kt=>!Array.isArray(kt["@context"])&&parseFloat(kt["@context"].split("/").slice(-2,-1).pop())<3).map(kt=>fetch("https://iiif.juncture-digital.org/prezi2to3/",{method:"POST",body:JSON.stringify(kt)})),bt.length>0){wt=await Promise.all(bt);let kt=await Promise.all(wt.map(Lt=>Lt.json()));for(let Lt=0;Lt<Et.length;Lt++){let Ot=Et[Lt].id||Et[Lt]["@id"],Rt=kt.find(Dt=>(Dt.id||Dt["@id"])===Ot);Rt&&(Et[Lt]=Rt)}}return Et.forEach((kt,Lt)=>_manifestCache[st[Lt]]=kt),it.map(kt=>_manifestCache[kt])}else return it.map(bt=>_manifestCache[bt])}function _value(nt,rt="en"){return typeof nt=="object"?nt[rt]||nt.none||nt[Object.keys(nt).sort()[0]]:nt}function label(nt,rt="en"){return nt?_value(nt.label,rt):null}function summary(nt,rt="en"){return nt?_value(nt.summary,rt):null}function staticImage(nt,rt,it=0,st=0){let bt=getItemInfo(nt),wt=rt.region||"full",Et=rt.size?rt.size:it?st?`${it},${st}`:`${it},`:st?`,${st}`:"400,",kt=rt.rotation||"0",Lt=rt.quality||"default",Ot=rt.format||"jpg";return`${bt.service[0].id||bt.service[0]["@id"]}/${wt}/${Et}/${kt}/${Lt}.${Ot}`}function thumbnail(nt,rt=400,it=1){if(!nt)return null;let st=getItemInfo(nt,it);return st.service?`${st.service[0].id||st.service[0]["@id"]}/full/${rt},/0/default.jpg`:st.type==="Video"?`https://iiif.juncture-digital.org/thumbnail?url=${st.id}`:st.id}function parseRegionString(nt,rt){let it;const st=nt.split(":");let[bt,wt,Et,kt]=st[st.length-1].split(",").map(Ot=>parseInt(Ot));const Lt=rt.world.getItemAt(0).getContentSize();return st.length===2&&(st[0]==="pct"||st[0]==="percent")&&(bt=Math.round(Lt.x*bt/100),wt=Math.round(Lt.y*wt/100),Et=Math.round(Lt.x*Et/100),kt=Math.round(Lt.y*kt/100)),it=rt.viewport.imageToViewportRectangle(bt,wt,Et,kt),it}function getMetadata(nt,rt="en"){let it=[];return nt.metadata&&nt.metadata.forEach(st=>{it.push({label:_value(st.label,rt)[0],value:_value(st.value,rt)})}),it}function metadataAsObj(nt,rt="en"){return Object.fromEntries(getMetadata(nt,rt).map(it=>[it.label,it.value]))}function top$1(){return stickyElems.length>0&&stickyElems[0].localName.toLowerCase()==="ve-navbar"?parseInt(window.getComputedStyle(stickyElems[0]).height.slice(0,-2)):0}function findStickyElems(){var it,st;initTippy();let nt=Array.from(document.querySelectorAll(".sticky")),rt=nt.findIndex(bt=>bt.localName.toLowerCase()==="ve-navbar");if(rt<0){let bt=nt.findIndex(wt=>wt.localName.toLowerCase()==="ve-header");if(bt>=0){let wt=(st=(it=nt[bt])==null?void 0:it.shadowRoot)==null?void 0:st.querySelector("ve-navbar.sticky");wt&&(nt[bt]=wt,rt=bt)}}return nt.forEach(bt=>setTop(bt)),nt}function activeRegionOffset(){let nt=stickyElems.find(it=>it.localName.toLowerCase()==="ve-navbar"),rt=nt?nt.getBoundingClientRect().top:0;return stickyElems.forEach(it=>{let st=it.getBoundingClientRect();if((st.x<st.width?0:1)===0&&st.top===rt){let wt=window.getComputedStyle(it).height;wt.length>=3&&wt.slice(-2)==="px"&&(rt+=parseInt(window.getComputedStyle(it).height.slice(0,-2)))}}),rt}function setTop(nt){if(nt.localName.toLowerCase()==="section"){let rt=stickyElems.find(st=>st.localName.toLowerCase()==="ve-navbar"),it=rt?rt.clientHeight:0;nt.style.top=`${it}px`}}let stickyElems=[];const mutationObserver=new MutationObserver(nt=>{let rt=nt.filter(it=>{let st=Array.from(it.addedNodes).filter(wt=>{var Et;return((Et=wt.id)==null?void 0:Et.indexOf("tippy"))<0}).length,bt=Array.from(it.removedNodes).filter(wt=>{var Et;return((Et=wt.id)==null?void 0:Et.indexOf("tippy"))<0}).length;return st+bt>0});(!tippyEntities||rt.length>0)&&(stickyElems=findStickyElems())});mutationObserver.observe(document,{childList:!0,subtree:!0});let targets={},active,offset=0;const intersectionObserver=new IntersectionObserver(nt=>{offset=activeRegionOffset(),nt.forEach(st=>targets[domPath(st.target)]=st);let rt=Object.values(targets).filter(st=>st.isIntersecting).filter(st=>st.target.getBoundingClientRect().y>=offset).sort((st,bt)=>st.target.getBoundingClientRect().y>bt.target.getBoundingClientRect().y?1:-1),it=rt.find(st=>st.intersectionRatio===1)||rt[0];if(it){let st=it.target;Array.from(st.classList).indexOf("active")<0&&(active&&active.classList.remove("active"),st.classList.add("active"),active=st)}},{root:null,threshold:[0,.25,.5,.75,1],rootMargin:`-${offset}px 0px 0px 0px`});Array.from(document.querySelectorAll("p")).forEach(nt=>intersectionObserver.observe(nt));function observeActive(nt){Array.from(nt.querySelectorAll("p")).forEach(rt=>intersectionObserver.observe(rt))}function domPath(nt){for(var rt=[];nt.parentNode!=null;){let st=0,bt=0;for(var it=0;it<nt.parentNode.childNodes.length;it++){let wt=nt.parentNode.childNodes[it];wt.nodeName==nt.nodeName&&(wt===nt&&(bt=st),st++)}nt.hasAttribute("id")&&nt.id!=""?rt.unshift(nt.nodeName.toLowerCase()+`#${nt.id}`):st>1?rt.unshift(nt.nodeName.toLowerCase()+(bt>0?`[${bt}]`:"")):rt.unshift(nt.nodeName.toLowerCase()),nt=nt.parentNode}return rt.join(".")}let entityData={};async function getEntityData(nt=[],rt="en"){let it=nt.filter(st=>!entityData[st]).map(st=>`(<http://www.wikidata.org/entity/${st}>)`);if(it.length>0){let st=`
      SELECT ?item ?label ?description ?alias ?image ?logoImage ?coords ?pageBanner ?whosOnFirst ?wikipedia WHERE {
        VALUES (?item) { ${it.join(" ")} }
        ?item rdfs:label ?label . 
        FILTER (LANG(?label) = "${rt}" || LANG(?label) = "en")
        OPTIONAL { ?item schema:description ?description . FILTER (LANG(?description) = "${rt}" || LANG(?description) = "en")}
        OPTIONAL { ?item skos:altLabel ?alias . FILTER (LANG(?alias) = "${rt}" || LANG(?alias) = "en")}
        OPTIONAL { ?item wdt:P625 ?coords . }
        OPTIONAL { ?item wdt:P18 ?image . }
        OPTIONAL { ?item wdt:P154 ?logoImage . }
        OPTIONAL { ?item wdt:P948 ?pageBanner . }
        OPTIONAL { ?item wdt:P6766 ?whosOnFirst . }
        OPTIONAL { ?wikipedia schema:about ?item; schema:isPartOf <https://${rt}.wikipedia.org/> . }
    }`,bt=await fetch("https://query.wikidata.org/sparql",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"},body:`query=${encodeURIComponent(st)}`});if(bt.ok)return(await bt.json()).results.bindings.forEach(Et=>{let kt=Et.item.value.split("/").pop();entityData[kt]?Et.alias&&entityData[kt].aliases.push(Et.alias.value):(entityData[kt]={id:kt,label:Et.label.value},Et.description&&(entityData[kt].description=Et.description.value),Et.alias&&(entityData[kt].aliases=[Et.alias.value]),Et.coords&&(entityData[kt].coords=Et.coords.value.slice(6,-1).split(" ").reverse().join(",")),Et.wikipedia&&(entityData[kt].wikipedia=Et.wikipedia.value),Et.pageBanner&&(entityData[kt].pageBanner=Et.pageBanner.value),Et.image&&(entityData[kt].image=Et.image.value,entityData[kt].thumbnail=mwImage(Et.image.value,300)),Et.logoImage&&(entityData[kt].logoImage=Et.logoImage.value,entityData[kt].thumbnail||(entityData[kt].thumbnail=mwImage(Et.logoImage.value,300))),Et.whosOnFirst&&(entityData[kt].geojson=whosOnFirstUrl(Et.whosOnFirst.value)))}),Object.fromEntries(nt.filter(Et=>entityData[Et]).map(Et=>[Et,entityData[Et]]))}return Object.fromEntries(nt.filter(st=>entityData[st]).map(st=>[st,entityData[st]]))}function isQID(nt){return nt[0]==="Q"&&isNum(nt.slice(1))}async function getEntity(nt,rt="en"){return(await getEntityData([nt],rt))[nt]}function mwImage(nt,rt){nt=(Array.isArray(nt)?nt[0]:nt).replace(/Special:FilePath\//,"File:").split("File:").pop(),nt=decodeURIComponent(nt).replace(/ /g,"_");const it=md5(nt),st=nt.split(".").pop();let bt=`https://upload.wikimedia.org/wikipedia/commons${rt?"/thumb":""}`;return bt+=`/${it.slice(0,1)}/${it.slice(0,2)}/${nt}`,rt&&(bt+=`/${rt}px-${nt}`,st==="svg"?bt+=".png":(st==="tif"||st==="tiff")&&(bt+=".jpg")),bt}function whosOnFirstUrl(nt){let rt=[];for(let it=0;it<nt.length;it+=3)rt.push(nt.slice(it,it+3));return`https://data.whosonfirst.org/${rt.join("/")}/${nt}.geojson`}function isNum(nt){return nt&&!isNaN(nt)}function parseImageOptions(nt){let rt=(nt==null?void 0:nt.split("/"))||[],it="full",st="full",bt="0",wt="default",Et="jpg",kt=0;return{region:rt.length>kt&&rt[kt]?rt[kt]:it,size:rt.length>kt+1&&rt[kt+1]?rt[kt+1]:st,rotation:rt.length>kt+2&&rt[kt+2]?rt[kt+2]:bt,quality:rt.length>kt+3&&rt[kt+3]?rt[kt+3]:wt,format:rt.length>kt+4&&rt[kt+4]?rt[kt+4]:Et}}async function imageDataUrl(nt,rt,it){return new Promise(st=>{let{x:bt,y:wt,w:Et,h:kt}=rt,{width:Lt,height:Ot}=it,Rt=new Image;Rt.crossOrigin="anonymous",bt=bt?bt/100:0,wt=wt?wt/100:0,Et=Et?Et/100:0,kt=kt?kt/100:0,Rt.onload=()=>{let Dt=Rt.width,Bt=Rt.height,Ft=Et>0?Dt*Et:Dt-Dt*bt,Yt=kt>0?Bt*kt:Bt-Bt*wt,Jt=Ft/Yt;Jt>1?Ot=Lt/Jt:Lt=Ot*Jt;const Wt=document.createElement("canvas"),Qt=Wt.getContext("2d");Wt.width=Lt,Wt.height=Ot,bt=bt*Dt,wt=wt*Bt,Qt==null||Qt.drawImage(Rt,bt,wt,Ft,Yt,0,0,Lt,Ot);let rn=Wt.toDataURL();st(rn)},Rt.src=nt})}let summaryText={};async function getSummaryText(nt,rt="en"){if(summaryText[rt]||(summaryText[rt]={}),!summaryText[rt][nt]&&entityData[nt]&&entityData[nt].wikipedia){let st=entityData[nt].wikipedia.replace(/\/w\//,"/wiki").split("/wiki/").pop(),bt=`https://${rt}.wikipedia.org/api/rest_v1/page/summary/${st}`,wt=await fetch(bt);return wt.ok&&(wt=await wt.json(),summaryText[rt][nt]=wt.extract_html||wt.extract),summaryText[rt][nt]}else return summaryText[rt][nt]}var breadcrumb_styles_default=i$4`
  ${component_styles_default}

  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
`,SlBreadcrumb=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){const rt=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[rt,...rt.querySelectorAll("[id]")].forEach(it=>it.removeAttribute("id")),rt.setAttribute("data-default",""),rt.slot="separator",rt}handleSlotChange(){const nt=[...this.defaultSlot.assignedElements({flatten:!0})].filter(rt=>rt.tagName.toLowerCase()==="sl-breadcrumb-item");nt.forEach((rt,it)=>{const st=rt.querySelector('[slot="separator"]');st===null?rt.append(this.getSeparator()):st.hasAttribute("data-default")&&st.replaceWith(this.getSeparator()),it===nt.length-1?rt.setAttribute("aria-current","page"):rt.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),y$2`
      <nav part="base" class="breadcrumb" aria-label=${this.label}>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </nav>

      <slot name="separator" hidden aria-hidden="true">
        <sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon>
      </slot>
    `}};SlBreadcrumb.styles=breadcrumb_styles_default;__decorateClass([i2$2("slot")],SlBreadcrumb.prototype,"defaultSlot",2);__decorateClass([i2$2('slot[name="separator"]')],SlBreadcrumb.prototype,"separatorSlot",2);__decorateClass([e2$2()],SlBreadcrumb.prototype,"label",2);SlBreadcrumb=__decorateClass([e$1("sl-breadcrumb")],SlBreadcrumb);var breadcrumb_item_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-flex;
  }

  .breadcrumb-item {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-600);
    line-height: var(--sl-line-height-normal);
    white-space: nowrap;
  }

  .breadcrumb-item__label {
    display: inline-block;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    padding: 0;
    margin: 0;
    cursor: pointer;
    transition: var(--sl-transition-fast) --color;
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label {
    color: var(--sl-color-primary-600);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:hover {
    color: var(--sl-color-primary-500);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:active {
    color: var(--sl-color-primary-600);
  }

  .breadcrumb-item__label:focus {
    outline: none;
  }

  .breadcrumb-item__label:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .breadcrumb-item__prefix,
  .breadcrumb-item__suffix {
    display: none;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .breadcrumb-item--has-prefix .breadcrumb-item__prefix {
    display: inline-flex;
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .breadcrumb-item--has-suffix .breadcrumb-item__suffix {
    display: inline-flex;
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:last-of-type) .breadcrumb-item__separator {
    display: none;
  }

  .breadcrumb-item__separator {
    display: inline-flex;
    align-items: center;
    margin: 0 var(--sl-spacing-x-small);
    user-select: none;
  }
`,SlBreadcrumbItem=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"prefix","suffix"),this.rel="noreferrer noopener"}render(){const nt=!!this.href;return y$2`
      <div
        part="base"
        class=${o$1({"breadcrumb-item":!0,"breadcrumb-item--has-prefix":this.hasSlotController.test("prefix"),"breadcrumb-item--has-suffix":this.hasSlotController.test("suffix")})}
      >
        <slot name="prefix" part="prefix" class="breadcrumb-item__prefix"></slot>

        ${nt?y$2`
              <a
                part="label"
                class="breadcrumb-item__label breadcrumb-item__label--link"
                href="${this.href}"
                target="${l$2(this.target?this.target:void 0)}"
                rel=${l$2(this.target?this.rel:void 0)}
              >
                <slot></slot>
              </a>
            `:y$2`
              <button part="label" type="button" class="breadcrumb-item__label breadcrumb-item__label--button">
                <slot></slot>
              </button>
            `}

        <slot name="suffix" part="suffix" class="breadcrumb-item__suffix"></slot>

        <slot name="separator" part="separator" class="breadcrumb-item__separator" aria-hidden="true"></slot>
      </div>
    `}};SlBreadcrumbItem.styles=breadcrumb_item_styles_default;__decorateClass([e2$2()],SlBreadcrumbItem.prototype,"href",2);__decorateClass([e2$2()],SlBreadcrumbItem.prototype,"target",2);__decorateClass([e2$2()],SlBreadcrumbItem.prototype,"rel",2);SlBreadcrumbItem=__decorateClass([e$1("sl-breadcrumb-item")],SlBreadcrumbItem);var details_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: block;
  }

  .details {
    border: solid 1px var(--sl-color-neutral-200);
    border-radius: var(--sl-border-radius-medium);
    background-color: var(--sl-color-neutral-0);
    overflow-anchor: none;
  }

  .details--disabled {
    opacity: 0.5;
  }

  .details__header {
    display: flex;
    align-items: center;
    border-radius: inherit;
    padding: var(--sl-spacing-medium);
    user-select: none;
    cursor: pointer;
  }

  .details__header:focus {
    outline: none;
  }

  .details__header:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(1px + var(--sl-focus-ring-offset));
  }

  .details--disabled .details__header {
    cursor: not-allowed;
  }

  .details--disabled .details__header:focus-visible {
    outline: none;
    box-shadow: none;
  }

  .details__summary {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
  }

  .details__summary-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) rotate ease;
  }

  .details--open .details__summary-icon {
    rotate: 90deg;
  }

  .details--open.details--rtl .details__summary-icon {
    rotate: -90deg;
  }

  .details--open slot[name='expand-icon'],
  .details:not(.details--open) slot[name='collapse-icon'] {
    display: none;
  }

  .details__body {
    overflow: hidden;
  }

  .details__content {
    display: block;
    padding: var(--sl-spacing-medium);
  }
`,SlDetails=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.open=!1,this.disabled=!1}firstUpdated(){this.body.hidden=!this.open,this.body.style.height=this.open?"auto":"0"}handleSummaryClick(){this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(nt){(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),this.open?this.hide():this.show()),(nt.key==="ArrowUp"||nt.key==="ArrowLeft")&&(nt.preventDefault(),this.hide()),(nt.key==="ArrowDown"||nt.key==="ArrowRight")&&(nt.preventDefault(),this.show())}async handleOpenChange(){if(this.open){if(this.emit("sl-show",{cancelable:!0}).defaultPrevented){this.open=!1;return}await stopAnimations(this.body),this.body.hidden=!1;const{keyframes:rt,options:it}=getAnimation(this,"details.show",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.style.height="auto",this.emit("sl-after-show")}else{if(this.emit("sl-hide",{cancelable:!0}).defaultPrevented){this.open=!0;return}await stopAnimations(this.body);const{keyframes:rt,options:it}=getAnimation(this,"details.hide",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.hidden=!0,this.body.style.height="auto",this.emit("sl-after-hide")}}async show(){if(!(this.open||this.disabled))return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!(!this.open||this.disabled))return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){const nt=this.localize.dir()==="rtl";return y$2`
      <div
        part="base"
        class=${o$1({details:!0,"details--open":this.open,"details--disabled":this.disabled,"details--rtl":nt})}
      >
        <header
          part="header"
          id="header"
          class="details__header"
          role="button"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="content"
          aria-disabled=${this.disabled?"true":"false"}
          tabindex=${this.disabled?"-1":"0"}
          @click=${this.handleSummaryClick}
          @keydown=${this.handleSummaryKeyDown}
        >
          <slot name="summary" part="summary" class="details__summary">${this.summary}</slot>

          <span part="summary-icon" class="details__summary-icon">
            <slot name="expand-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
            <slot name="collapse-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
          </span>
        </header>

        <div class="details__body">
          <slot part="content" id="content" class="details__content" role="region" aria-labelledby="header"></slot>
        </div>
      </div>
    `}};SlDetails.styles=details_styles_default;__decorateClass([i2$2(".details")],SlDetails.prototype,"details",2);__decorateClass([i2$2(".details__header")],SlDetails.prototype,"header",2);__decorateClass([i2$2(".details__body")],SlDetails.prototype,"body",2);__decorateClass([i2$2(".details__expand-icon-slot")],SlDetails.prototype,"expandIconSlot",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDetails.prototype,"open",2);__decorateClass([e2$2()],SlDetails.prototype,"summary",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDetails.prototype,"disabled",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDetails.prototype,"handleOpenChange",1);SlDetails=__decorateClass([e$1("sl-details")],SlDetails);setDefaultAnimation("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"linear"}});setDefaultAnimation("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"linear"}});var drawer_styles_default=i$4`
  ${component_styles_default}

  :host {
    --size: 25rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .drawer {
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
  }

  .drawer--contained {
    position: absolute;
    z-index: initial;
  }

  .drawer--fixed {
    position: fixed;
    z-index: var(--sl-z-index-drawer);
  }

  .drawer__panel {
    position: absolute;
    display: flex;
    flex-direction: column;
    z-index: 2;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-large);
    overflow: auto;
    pointer-events: all;
  }

  .drawer__panel:focus {
    outline: none;
  }

  .drawer--top .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--end .drawer__panel {
    top: 0;
    inset-inline-end: 0;
    bottom: auto;
    inset-inline-start: auto;
    width: var(--size);
    height: 100%;
  }

  .drawer--bottom .drawer__panel {
    top: auto;
    inset-inline-end: auto;
    bottom: 0;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--start .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: var(--size);
    height: 100%;
  }

  .drawer__header {
    display: flex;
  }

  .drawer__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .drawer__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .drawer__header-actions sl-icon-button,
  .drawer__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .drawer__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .drawer__footer {
    text-align: right;
    padding: var(--footer-spacing);
  }

  .drawer__footer ::slotted(sl-button:not(:last-of-type)) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .drawer:not(.drawer--has-footer) .drawer__footer {
    display: none;
  }

  .drawer__overlay {
    display: block;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
    pointer-events: all;
  }

  .drawer--contained .drawer__overlay {
    display: none;
  }

  @media (forced-colors: active) {
    .drawer__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`;function uppercaseFirstLetter(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)}var SlDrawer=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController2(this),this.open=!1,this.label="",this.placement="end",this.contained=!1,this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.modal=new Modal$1(this)}firstUpdated(){this.drawer.hidden=!this.open,this.open&&(this.addOpenListeners(),this.contained||(this.modal.activate(),lockBodyScrolling(this)))}disconnectedCallback(){super.disconnectedCallback(),unlockBodyScrolling(this)}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"drawer.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown(nt){this.open&&!this.contained&&nt.key==="Escape"&&(nt.stopPropagation(),this.requestClose("keyboard"))}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.contained||(this.modal.activate(),lockBodyScrolling(this));const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]),this.drawer.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,`drawer.show${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),it=getAnimation(this,"drawer.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),this.contained||(this.modal.deactivate(),unlockBodyScrolling(this)),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]);const nt=getAnimation(this,`drawer.hide${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),rt=getAnimation(this,"drawer.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.drawer.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1;const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}handleNoModalChange(){this.open&&!this.contained&&(this.modal.activate(),lockBodyScrolling(this)),this.open&&this.contained&&(this.modal.deactivate(),unlockBodyScrolling(this))}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return y$2`
      <div
        part="base"
        class=${o$1({drawer:!0,"drawer--open":this.open,"drawer--top":this.placement==="top","drawer--end":this.placement==="end","drawer--bottom":this.placement==="bottom","drawer--start":this.placement==="start","drawer--contained":this.contained,"drawer--fixed":!this.contained,"drawer--rtl":this.localize.dir()==="rtl","drawer--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="drawer__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="drawer__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${l$2(this.noHeader?this.label:void 0)}
          aria-labelledby=${l$2(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":y$2`
                <header part="header" class="drawer__header">
                  <h2 part="title" class="drawer__title" id="title">
                    <!-- If there's no label, use an invisible character to prevent the header from collapsing -->
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="drawer__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="drawer__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click=${()=>this.requestClose("close-button")}
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="drawer__body"></slot>

          <footer part="footer" class="drawer__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDrawer.styles=drawer_styles_default;__decorateClass([i2$2(".drawer")],SlDrawer.prototype,"drawer",2);__decorateClass([i2$2(".drawer__panel")],SlDrawer.prototype,"panel",2);__decorateClass([i2$2(".drawer__overlay")],SlDrawer.prototype,"overlay",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDrawer.prototype,"open",2);__decorateClass([e2$2({reflect:!0})],SlDrawer.prototype,"label",2);__decorateClass([e2$2({reflect:!0})],SlDrawer.prototype,"placement",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDrawer.prototype,"contained",2);__decorateClass([e2$2({attribute:"no-header",type:Boolean,reflect:!0})],SlDrawer.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleOpenChange",1);__decorateClass([watch("contained",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleNoModalChange",1);SlDrawer=__decorateClass([e$1("sl-drawer")],SlDrawer);setDefaultAnimation("drawer.showTop",{keyframes:[{opacity:0,translate:"0 -100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideTop",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 -100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showEnd",{keyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideEnd",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showBottom",{keyframes:[{opacity:0,translate:"0 100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideBottom",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showStart",{keyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideStart",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.denyClose",{keyframes:[{scale:1},{scale:1.01},{scale:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});var divider_styles_default=i$4`
  ${component_styles_default}

  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,SlDivider=class extends ShoelaceElement{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};SlDivider.styles=divider_styles_default;__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDivider.prototype,"vertical",2);__decorateClass([watch("vertical")],SlDivider.prototype,"handleVerticalChange",1);SlDivider=__decorateClass([e$1("sl-divider")],SlDivider);var dropdown_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`,SlDropdown=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleMenuItemActivate=this.handleMenuItemActivate.bind(this),this.handlePanelSelect=this.handlePanelSelect.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const nt=this.trigger.assignedElements({flatten:!0})[0];typeof(nt==null?void 0:nt.focus)=="function"&&nt.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(nt=>nt.tagName.toLowerCase()==="sl-menu")}handleKeyDown(nt){this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide(),this.focusOnTrigger())}handleDocumentKeyDown(nt){var rt;if(nt.key==="Tab"){if(this.open&&((rt=document.activeElement)==null?void 0:rt.tagName.toLowerCase())==="sl-menu-item"){nt.preventDefault(),this.hide(),this.focusOnTrigger();return}setTimeout(()=>{var it,st,bt;const wt=((it=this.containingElement)==null?void 0:it.getRootNode())instanceof ShadowRoot?(bt=(st=document.activeElement)==null?void 0:st.shadowRoot)==null?void 0:bt.activeElement:document.activeElement;(!this.containingElement||(wt==null?void 0:wt.closest(this.containingElement.tagName.toLowerCase()))!==this.containingElement)&&this.hide()})}}handleDocumentMouseDown(nt){const rt=nt.composedPath();this.containingElement&&!rt.includes(this.containingElement)&&this.hide()}handleMenuItemActivate(nt){const rt=nt.target;scrollIntoView(rt,this.panel)}handlePanelSelect(nt){const rt=nt.target;!this.stayOpenOnSelect&&rt.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}handleTriggerClick(){this.open?this.hide():this.show()}handleTriggerKeyDown(nt){if(nt.key==="Escape"&&this.open){nt.stopPropagation(),this.focusOnTrigger(),this.hide();return}if([" ","Enter"].includes(nt.key)){nt.preventDefault(),this.handleTriggerClick();return}const rt=this.getMenu();if(rt){const it=rt.defaultSlot.assignedElements({flatten:!0}),st=it[0],bt=it[it.length-1];["ArrowDown","ArrowUp","Home","End"].includes(nt.key)&&(nt.preventDefault(),this.open||this.show(),it.length>0&&requestAnimationFrame(()=>{(nt.key==="ArrowDown"||nt.key==="Home")&&(rt.setCurrentItem(st),st.focus()),(nt.key==="ArrowUp"||nt.key==="End")&&(rt.setCurrentItem(bt),bt.focus())}))}}handleTriggerKeyUp(nt){nt.key===" "&&nt.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const rt=this.trigger.assignedElements({flatten:!0}).find(st=>getTabbableBoundary(st).start);let it;if(rt){switch(rt.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":it=rt.button;break;default:it=rt}it.setAttribute("aria-haspopup","true"),it.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){this.panel.addEventListener("sl-activate",this.handleMenuItemActivate),this.panel.addEventListener("sl-select",this.handlePanelSelect),this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel&&(this.panel.removeEventListener("sl-activate",this.handleMenuItemActivate),this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await stopAnimations(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await stopAnimations(this);const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return y$2`
      <sl-popup
        part="base"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        class=${o$1({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <slot
          part="panel"
          class="dropdown__panel"
          aria-hidden=${this.open?"false":"true"}
          aria-labelledby="dropdown"
        ></slot>
      </sl-popup>
    `}};SlDropdown.styles=dropdown_styles_default;__decorateClass([i2$2(".dropdown")],SlDropdown.prototype,"popup",2);__decorateClass([i2$2(".dropdown__trigger")],SlDropdown.prototype,"trigger",2);__decorateClass([i2$2(".dropdown__panel")],SlDropdown.prototype,"panel",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDropdown.prototype,"open",2);__decorateClass([e2$2({reflect:!0})],SlDropdown.prototype,"placement",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDropdown.prototype,"disabled",2);__decorateClass([e2$2({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],SlDropdown.prototype,"stayOpenOnSelect",2);__decorateClass([e2$2({attribute:!1})],SlDropdown.prototype,"containingElement",2);__decorateClass([e2$2({type:Number})],SlDropdown.prototype,"distance",2);__decorateClass([e2$2({type:Number})],SlDropdown.prototype,"skidding",2);__decorateClass([e2$2({type:Boolean})],SlDropdown.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDropdown.prototype,"handleOpenChange",1);SlDropdown=__decorateClass([e$1("sl-dropdown")],SlDropdown);setDefaultAnimation("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});setDefaultAnimation("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});var menu_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,SlMenu=class extends ShoelaceElement{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(nt=>!!this.isMenuItem(nt))}handleClick(nt){const it=nt.target.closest("sl-menu-item");(it==null?void 0:it.disabled)===!1&&(it.type==="checkbox"&&(it.checked=!it.checked),this.emit("sl-select",{detail:{item:it}}))}handleKeyDown(nt){if(nt.key==="Enter"){const rt=this.getCurrentItem();nt.preventDefault(),rt==null||rt.click()}if(nt.key===" "&&nt.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(nt.key)){const rt=this.getAllItems(),it=this.getCurrentItem();let st=it?rt.indexOf(it):0;rt.length>0&&(nt.preventDefault(),nt.key==="ArrowDown"?st++:nt.key==="ArrowUp"?st--:nt.key==="Home"?st=0:nt.key==="End"&&(st=rt.length-1),st<0&&(st=rt.length-1),st>rt.length-1&&(st=0),this.setCurrentItem(rt[st]),rt[st].focus())}}handleMouseDown(nt){const rt=nt.target;this.isMenuItem(rt)&&this.setCurrentItem(rt)}handleSlotChange(){const nt=this.getAllItems();nt.length>0&&this.setCurrentItem(nt[0])}isMenuItem(nt){var rt;return nt.tagName.toLowerCase()==="sl-menu-item"||["menuitem","menuitemcheckbox","menuitemradio"].includes((rt=nt.getAttribute("role"))!=null?rt:"")}getCurrentItem(){return this.getAllItems().find(nt=>nt.getAttribute("tabindex")==="0")}setCurrentItem(nt){this.getAllItems().forEach(it=>{it.setAttribute("tabindex",it===nt?"0":"-1")})}render(){return y$2`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}};SlMenu.styles=menu_styles_default;__decorateClass([i2$2("slot")],SlMenu.prototype,"defaultSlot",2);SlMenu=__decorateClass([e$1("sl-menu")],SlMenu);var menu_item_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: block;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:focus) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'])) .menu-item {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  :host(:focus-visible) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`,SlMenuItem=class extends ShoelaceElement{constructor(){super(...arguments),this.type="normal",this.checked=!1,this.value="",this.disabled=!1}handleDefaultSlotChange(){const nt=this.getTextLabel();if(typeof this.cachedTextLabel>"u"){this.cachedTextLabel=nt;return}nt!==this.cachedTextLabel&&(this.cachedTextLabel=nt,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1}))}handleCheckedChange(){if(this.checked&&this.type!=="checkbox"){this.checked=!1,console.error('The checked attribute can only be used on menu items with type="checkbox"',this);return}this.type==="checkbox"?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){this.type==="checkbox"?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return getTextContent(this.defaultSlot)}render(){return y$2`
      <div
        part="base"
        class=${o$1({"menu-item":!0,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":!1})}
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span class="menu-item__chevron">
          <sl-icon name="chevron-right" library="system" aria-hidden="true"></sl-icon>
        </span>
      </div>
    `}};SlMenuItem.styles=menu_item_styles_default;__decorateClass([i2$2("slot:not([name])")],SlMenuItem.prototype,"defaultSlot",2);__decorateClass([i2$2(".menu-item")],SlMenuItem.prototype,"menuItem",2);__decorateClass([e2$2()],SlMenuItem.prototype,"type",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlMenuItem.prototype,"checked",2);__decorateClass([e2$2()],SlMenuItem.prototype,"value",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlMenuItem.prototype,"disabled",2);__decorateClass([watch("checked")],SlMenuItem.prototype,"handleCheckedChange",1);__decorateClass([watch("disabled")],SlMenuItem.prototype,"handleDisabledChange",1);__decorateClass([watch("type")],SlMenuItem.prototype,"handleTypeChange",1);SlMenuItem=__decorateClass([e$1("sl-menu-item")],SlMenuItem);var tag_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--primary:active > sl-icon-button {
    color: var(--sl-color-primary-600);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--success:active > sl-icon-button {
    color: var(--sl-color-success-600);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--neutral:active > sl-icon-button {
    color: var(--sl-color-neutral-600);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--warning:active > sl-icon-button {
    color: var(--sl-color-warning-600);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  .tag--danger:active > sl-icon-button {
    color: var(--sl-color-danger-600);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`,SlTag=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return y$2`
      <span
        part="base"
        class=${o$1({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?y$2`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </span>
    `}};SlTag.styles=tag_styles_default;__decorateClass([e2$2({reflect:!0})],SlTag.prototype,"variant",2);__decorateClass([e2$2({reflect:!0})],SlTag.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTag.prototype,"pill",2);__decorateClass([e2$2({type:Boolean})],SlTag.prototype,"removable",2);SlTag=__decorateClass([e$1("sl-tag")],SlTag);const _hoisted_1$s={class:"content-path",style:{position:"relative"}},_hoisted_2$o={class:"workspace"},_hoisted_3$h=["content","disabled"],_hoisted_4$e=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_5$b=[_hoisted_4$e],_hoisted_6$9={class:"ws-path"},_hoisted_7$8={class:"breadcrumbs"},_hoisted_8$8=createBaseVNode("sl-icon",{slot:"prefix",name:"folder2",style:{fontSize:"24px"}},null,-1),_hoisted_9$6=["innerHTML","onClick"],_hoisted_10$5=["onClick"],_hoisted_11$4=createBaseVNode("sl-icon",{slot:"prefix",name:"filetype-md",style:{fontSize:"24px"}},null,-1),_hoisted_12$3={slot:"suffix"},_hoisted_13$3=createBaseVNode("sl-icon-button",{slot:"trigger",name:"caret-down",label:"File actions"},null,-1),_hoisted_14$3=["onClick"],_hoisted_15$3=createBaseVNode("sl-icon",{slot:"prefix",name:"trash"},null,-1),_hoisted_16$3=["innerHTML","onClick"],_hoisted_17$3=["onClick"],_hoisted_18$3=createBaseVNode("sl-icon",{slot:"prefix",name:"folder2",style:{fontSize:"24px"}},null,-1),_hoisted_19$3=["content"],_hoisted_20$3=["size","name"],_hoisted_21$3=createBaseVNode("sl-icon",{name:"plus-lg",label:"Add file"},null,-1),_hoisted_22$3=[_hoisted_21$3],_hoisted_23$3={noHeader:"",label:"Workspace",placement:"bottom",contained:"",class:"workspace-selector",style:{"--size":"100%"}},_hoisted_24$3={style:{display:"flex",height:"100%","align-items":"center"}},_hoisted_25$3={key:0,class:"github-select"},_hoisted_26$3={key:1,name:"chevron-double-right",style:{fontSize:"24px"}},_hoisted_27$3={style:{"margin-left":"12px"}},_hoisted_28$3=["disabled"],_hoisted_29$3={key:0},_hoisted_30$3={key:0,slot:"trigger",class:"path-elem"},_hoisted_31$3={key:1,slot:"trigger",pill:"",size:"medium",class:"folder"},_hoisted_32$3=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_33$3=["checked","onClick","innerHTML"],_hoisted_34$3={key:0,class:"path-elem"},_hoisted_35$2={key:1,pill:"",size:"medium",class:"folder"},_hoisted_36$2=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_37$1=["disabled"],_hoisted_38$1={key:0},_hoisted_39$1={key:0,slot:"trigger",class:"path-elem"},_hoisted_40$1={key:1,slot:"trigger",pill:"",size:"medium"},_hoisted_41$1=createBaseVNode("sl-icon",{slot:"prefix",name:"archive",style:{fontSize:"24px"}},null,-1),_hoisted_42$1=["checked","onClick","innerHTML"],_hoisted_43$1=createBaseVNode("sl-divider",null,null,-1),_hoisted_44$1=createBaseVNode("sl-icon",{slot:"prefix",name:"plus-lg"},null,-1),_hoisted_45$1={key:0,class:"path-elem"},_hoisted_46$1={key:1,pill:"",size:"medium"},_hoisted_47$1=createBaseVNode("sl-icon",{slot:"prefix",name:"archive",style:{fontSize:"24px"}},null,-1),_hoisted_48=["disabled"],_hoisted_49={key:0},_hoisted_50={key:0,slot:"trigger",class:"path-elem"},_hoisted_51={key:1,slot:"trigger",pill:"",size:"medium"},_hoisted_52=createBaseVNode("sl-icon",{slot:"prefix",name:"share",style:{fontSize:"24px"}},null,-1),_hoisted_53=["checked","onClick","innerHTML"],_hoisted_54={key:0,class:"path-elem"},_hoisted_55={key:1,pill:"",size:"medium"},_hoisted_56=createBaseVNode("sl-icon",{slot:"prefix",name:"share",style:{fontSize:"24px"}},null,-1),_hoisted_57={key:0},_hoisted_58={key:1,class:"dirs"},_hoisted_59=["onClick"],_hoisted_60=["name"],_hoisted_61=["content"],_hoisted_62=createBaseVNode("sl-icon",{name:"plus-lg",label:"Add file"},null,-1),_hoisted_63=[_hoisted_62],_hoisted_64=createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"add-repo-input",placeholder:"Enter name",pattern:"^[A-z0-9\\-_]+$"},null,-1),_hoisted_65=createBaseVNode("br",null,null,-1),_hoisted_66=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_hoisted_67=createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"add-file-input",placeholder:"Enter file path",pattern:"^\\/?([A-z0-9-_+]+\\/)*([A-z0-9\\-]+(\\.(css|md|json|geojson|yaml|yml))?)$"},null,-1),_hoisted_68=createBaseVNode("br",null,null,-1),_hoisted_69=createBaseVNode("sl-button",{type:"reset",variant:"default"},"Reset",-1),_hoisted_70=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_hoisted_71={id:"delete-file-dialog",label:"Confirm file delete"},_hoisted_72=["innerHTML"],_sfc_main$u=defineComponent({__name:"ContentSelector.ce",props:{contentPath:{type:String},sticky:{type:Boolean,default:!1},mode:{type:String,default:"media"},compact:{type:Boolean}},emits:["accessChanged","addMediaResource","contentPathChanged"],setup(nt,{expose:rt,emit:it}){const st=nt;rt({getDirList:Mr,getFile:wr,putFile:fr,repositoryIsWriteable:rr});const bt=new Set(["config.yaml","CNAME","index.html","404.html",".nojekyll"]),wt=ref("");watch$1(wt,()=>{console.log(`contentPath=${toRaw(wt.value)}`),it("contentPathChanged",wt.value)});const Et=ref(null),kt=computed(()=>{var Bn;return(Bn=Et==null?void 0:Et.value)==null?void 0:Bn.parentNode});let Lt,Ot="",Rt=!0;const Dt=ref();watch$1(Dt,()=>{Dt.value&&Pn()});const Bt=ref(isMobile()),Ft=ref(""),Yt=ref(),Jt=ref(!1),Wt=ref(!1);watch$1(Ft,()=>{Jt.value=window.localStorage.getItem("gh-auth-token")!==null,Yt.value=new GithubClient(Ft.value||"")}),watch$1(Jt,()=>{Jt||(Ot="",Wt.value=!1)}),watch$1(Wt,()=>{it("accessChanged",{acct:rn.value,repo:on.value,canUpdate:Wt.value})}),watch$1(Yt,async()=>{Ln(),Jt.value&&(Qt.value=await mr(),Ot=await Yt.value.user().then(Bn=>Bn.login),await Yt.value.repos(Ot).then(Bn=>{Bn.find(Qn=>Qn.name==="essays")||Yt.value.createRepository({name:"essays",description:"Juncture visual essays"}),Bn.find(Qn=>Qn.name==="media")||Yt.value.createRepository({name:"media",description:"Juncture media"})}),rn.value&&on.value&&Ot&&Yt.value.isCollaborator(rn.value,on.value,Ot).then(Bn=>Wt.value=Bn))});const Qt=ref([]),rn=ref("");watch$1(Qt,()=>{rn.value=rn.value||(Qt.value.length>0?Qt.value[0].login:null)}),watch$1(rn,(Bn,Qn)=>{Qn&&(on.value=""),vn().then(Un=>sn.value=Un)});const sn=ref([]),on=ref("");watch$1(sn,()=>{if(!on.value&&sn.value.length>0)if(sn.value.length===1)on.value=sn.value[0].name;else{let Bn=st.mode==="media"?"media":"essays";on.value=sn.value.find(Qn=>Qn.name===Bn)?Bn:sn.value[0].name}});const hn=ref([]),mn=ref("");watch$1(on,(Bn,Qn)=>{Qn&&(Tn.value=[]),Tr().then(Un=>pn()),mn.value="",on.value&&(Jt.value&&rn.value&&Yt.value.user().then(Un=>Un.login).then(Un=>on.value?Yt.value.isCollaborator(rn.value,on.value,Un):!1).then(Un=>Wt.value=Un),yr().then(Un=>hn.value=Un))});let Cn;watch$1(hn,async()=>{!Cn&&rn.value&&on.value&&(Cn=await Yt.value.defaultBranch(rn.value,on.value)),Cn&&(mn.value=Cn)}),watch$1(mn,()=>{mn.value&&Tn.value&&kn&&Tr().then(Bn=>pn())});const Tn=ref([]);watch$1(Tn,()=>{mn.value&&Tr().then(Bn=>pn())});let kn=!0;const In=ref([]);watch$1(In,()=>{kn=Tn.value.length===0||In.value.length>0}),onMounted(()=>{var Bn;yn(),window.addEventListener("storage",()=>yn()),Lt=(Bn=kt==null?void 0:kt.value)==null?void 0:Bn.querySelector(".workspace-selector")});function Ln(Bn=""){var Qn;if(Bn=Bn||st.contentPath||"",Bn){let[Un,or]=((Qn=Bn.split(":").pop())==null?void 0:Qn.split("?"))||[],hr=or?Object.fromEntries(or.split("&").map(xr=>xr.split("="))):{},kr=Un.split("/").filter(xr=>xr);kr.length>0&&(rn.value=kr[0]),kr.length>1&&(on.value=kr[1]),kr.length>2&&(Tn.value=kr.slice(2)),hr.ref&&(mn.value=hr.ref||"main")}}function pn(){if(rn.value&&on.value){let Bn=`gh:${rn.value}/${on.value}`;Tn.value.length>0&&(Bn+=`/${Tn.value.join("/")}`),mn.value&&mn.value!==Cn&&(Bn+=`?ref=${mn.value}`),wt.value=Bn}}async function Hn(){let Qn=await fetch("https://api.juncture-digital.org/gh-token");if(Qn.ok){let Un=await Qn.text();window.localStorage.setItem("gh-unscoped-token",Un)}}async function yn(){window.localStorage.getItem("gh-unscoped-token")||await Hn(),Ft.value=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token"),Jt.value=window.localStorage.getItem("gh-auth-token")!==null}async function mr(){return await Promise.all([Yt.value.user(),Yt.value.organizations()]).then(Bn=>Bn.flat())}async function vn(){return Yt.value.repos(rn.value)}async function yr(){return Yt.value.branches(rn.value,on.value)}async function Tr(){In.value=[];let Bn=await Yt.value.dirlist(rn.value,on.value,Tn.value.join("/"),mn.value),Qn=Bn.filter(or=>or.type==="dir"),Un=Bn.filter(or=>or.type==="file"&&!bt.has(or.name));Rt&&Un.find(or=>or.name==="README.md")&&Qn.length===0&&(Tn.value.length===0||Tn.value[Tn.value.length-1]!=="README.md")&&(Tn.value=[...Tn.value,"README.md"]),In.value=[...Qn,...Un]}function Mr(){return In.value}function rr(){return Wt.value}async function wr(Bn){var br;let[Qn,Un]=((br=Bn.split(":").pop())==null?void 0:br.split("?"))||[],or=Un?Object.fromEntries(Un.split("&").map(hi=>hi.split("="))):{},hr=Qn.split("/").filter(hi=>hi),[kr,xr]=hr.slice(0,2);return Qn=hr.slice(2).filter(hi=>hi).join("/"),Yt.value.getFile(kr,xr,Qn,or.ref||mn.value)}async function fr(Bn,Qn){var di;let[Un,or]=((di=Bn.split(":").pop())==null?void 0:di.split("?"))||[],hr=or?Object.fromEntries(or.split("&").map(vi=>vi.split("="))):{},kr=Un.split("/").filter(vi=>vi),[xr,br]=kr.slice(0,2);Un=kr.slice(2).filter(vi=>vi).join("/");let hi=hr.ref||mn.value;return Yt.value.putFile(xr,br,Un,Qn,hi)}function gr(Bn){rn.value=Bn.login}function Lr(Bn){on.value=Bn.name}function Pr(Bn){mn.value=Bn.name}function lr(Bn){Lt.hide(),Rt=!0;let Qn=[...Tn.value];kn||(Qn=Qn.slice(0,-1)),(Qn.length===0||Qn[Qn.length-1]!==Bn.name)&&(Qn=[...Qn,Bn.name]),Tn.value=Qn}function qr(Bn){Lt.hide(),Rt=!1,Tn.value=Bn===0?[]:Tn.value.slice(0,Bn)}function sr(Bn){st.mode==="essays"?Er():On(Bn)}function pr(Bn){return Bn.toLowerCase().split("-").map(function(Qn){return Qn.charAt(0).toUpperCase()+Qn.slice(1)}).join(" ")}function Er(){var Un,or;let Bn=(Un=kt.value)==null?void 0:Un.querySelector("#add-file-form");Bn.onclick||(Bn.onclick=function(){},Bn.addEventListener("submit",async hr=>{var di;hr.preventDefault();let kr=(di=kt.value)==null?void 0:di.querySelector("#add-file-input"),xr=[...Tn.value,...kr.value.split("/").filter(vi=>vi)],br=xr[xr.length-1];xr[xr.length-1].indexOf(".")>0?xr[xr.length-1]=xr[xr.length-1].replace(/readme\.md/,"README.md"):xr.push("README.md");let hi=xr.join("/");br=pr(br),await Yt.value.putFile(rn.value,on.value,hi,`# ${br}

`,mn.value),Tn.value=xr,ir()}));let Qn=(or=kt.value)==null?void 0:or.querySelector("#add-file-dialog");Qn.addEventListener("sl-after-show",()=>{var hr;((hr=kt.value)==null?void 0:hr.querySelector("#add-file-input")).focus()}),Qn.show()}function ir(){var Bn,Qn;((Bn=kt.value)==null?void 0:Bn.querySelector("#add-file-input")).value="",((Qn=kt.value)==null?void 0:Qn.querySelector("#add-file-dialog")).hide()}function Pn(){var Qn;((Qn=kt.value)==null?void 0:Qn.querySelector("#delete-file-dialog")).show()}function nn(){var Qn;((Qn=kt.value)==null?void 0:Qn.querySelector("#delete-file-dialog")).hide()}async function fn(){var Un,or;let Bn=(Un=kt.value)==null?void 0:Un.querySelector("#add-repo-form");Bn.onclick||(Bn.onclick=function(){},Bn.addEventListener("submit",async hr=>{var hi;hr.preventDefault();let xr=((hi=kt.value)==null?void 0:hi.querySelector("#add-repo-input")).value;(await Yt.value.createRepository({name:xr,org:Ot===rn.value?null:rn.value})).status===201&&vn().then(di=>{on.value=xr,sn.value=di}),cn()}));let Qn=(or=kt.value)==null?void 0:or.querySelector("#add-repo-dialog");Qn.addEventListener("sl-after-show",()=>{var hr;((hr=kt.value)==null?void 0:hr.querySelector("#add-repo-input")).focus()}),Qn.show()}function cn(){var Qn,Un;((Qn=kt.value)==null?void 0:Qn.querySelector("#add-repo-dialog")).hide(),((Un=kt.value)==null?void 0:Un.querySelector("#add-repo-input")).value=""}async function Nn(){let Bn=Tn.value.join("/");await Yt.value.deleteFile(rn.value,on.value,Bn,mn.value),await Tr(),qr(Tn.value.length-(In.value.length===0?2:1)),Dt.value=null,nn()}function On(Bn){it("addMediaResource",Bn)}function cr(){Lt.open?Lt.hide():Lt.show()}return(Bn,Qn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Et},[createBaseVNode("section",_hoisted_1$s,[createBaseVNode("div",_hoisted_2$o,[createBaseVNode("sl-tooltip",{content:`${rn.value}: ${on.value} (${mn.value})`,disabled:Bt.value,placement:"bottom"},[createBaseVNode("sl-button",{pill:"",size:"medium",onClick:cr},_hoisted_5$b)],8,_hoisted_3$h),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("div",_hoisted_7$8,[createBaseVNode("sl-breadcrumb",null,[createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-button",{pill:"",size:"medium",onClick:Qn[0]||(Qn[0]=Un=>qr(0))},[createTextVNode("/ "),_hoisted_8$8])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Tn.value,(Un,or)=>(openBlock(),createElementBlock("sl-breadcrumb-item",{key:`bci-${or}`},[or===Tn.value.length-1?(openBlock(),createElementBlock(Fragment,{key:0},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Un,onClick:hr=>qr(or+1)},null,8,_hoisted_9$6)):(openBlock(),createElementBlock("sl-button",{key:1,pill:"",size:"medium",onClick:hr=>qr(or+1)},[createTextVNode(toDisplayString(Un)+" ",1),_hoisted_11$4],8,_hoisted_10$5)),createBaseVNode("sl-dropdown",_hoisted_12$3,[_hoisted_13$3,createBaseVNode("sl-menu",null,[createBaseVNode("sl-menu-item",{onClick:()=>Dt.value=Un},[createTextVNode("Delete file"),_hoisted_15$3],8,_hoisted_14$3)])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Un,onClick:hr=>qr(or+1)},null,8,_hoisted_16$3)):(openBlock(),createElementBlock("sl-button",{key:1,pill:"",size:"medium",onClick:hr=>qr(or+1)},[createTextVNode(toDisplayString(Un)+" ",1),_hoisted_18$3],8,_hoisted_17$3))],64))]))),128))]),Jt.value&&nt.mode==="media"?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Add ${st.mode==="media"?"resource":"file"}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",size:nt.mode==="media"?"medium":"small",class:"add-item",name:`Add ${nt.mode==="media"?"resource":"file"}`,circle:"",onClick:sr},_hoisted_22$3,8,_hoisted_20$3)],8,_hoisted_19$3)):createCommentVNode("",!0)]),createBaseVNode("sl-drawer",_hoisted_23$3,[createBaseVNode("div",_hoisted_24$3,[nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_25$3,"Select GitHub Repository")),nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("sl-icon",_hoisted_26$3)),createBaseVNode("sl-breadcrumb",_hoisted_27$3,[createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Account",hoist:"",disabled:Bt.value,placement:"left"},[Qt.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_29$3,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_30$3,toDisplayString(rn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_31$3,[createTextVNode(toDisplayString(rn.value)+" ",1),_hoisted_32$3])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Qt.value,(Un,or)=>(openBlock(),createElementBlock("sl-menu-item",{key:`acct-${or}`,checked:Un.login===rn.value,onClick:hr=>gr(Un),type:"checkbox",innerHTML:Un.login},null,8,_hoisted_33$3))),128))])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_34$3,toDisplayString(mn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_35$2,[createTextVNode(toDisplayString(rn.value)+" ",1),_hoisted_36$2]))],64))],8,_hoisted_28$3)]),createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Repository",hoist:"",disabled:Bt.value,placement:"left"},[sn.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_38$1,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_39$1,toDisplayString(on.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_40$1,[createTextVNode(toDisplayString(on.value)+" ",1),_hoisted_41$1])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(sn.value,(Un,or)=>(openBlock(),createElementBlock("sl-menu-item",{key:`repo-${or}`,checked:Un.name===on.value,onClick:hr=>Lr(Un),type:"checkbox",innerHTML:Un.name},null,8,_hoisted_42$1))),128)),_hoisted_43$1,createBaseVNode("sl-menu-item",{class:"add-repo",onClick:fn},[_hoisted_44$1,createTextVNode(" New repository ")])])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_45$1,toDisplayString(on.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_46$1,[createTextVNode(toDisplayString(on.value)+" ",1),_hoisted_47$1]))],64))],8,_hoisted_37$1)]),createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Branch",hoist:"",disabled:Bt.value,placement:"left"},[hn.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_49,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_50,toDisplayString(mn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_51,[createTextVNode(toDisplayString(mn.value)+" ",1),_hoisted_52])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(hn.value,(Un,or)=>(openBlock(),createElementBlock("sl-menu-item",{key:`branch-${or}`,checked:Un.name===mn.value,onClick:hr=>Pr(Un),type:"checkbox",innerHTML:Un.name},null,8,_hoisted_53))),128))])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_54,toDisplayString(mn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_55,[createTextVNode(toDisplayString(mn.value)+" ",1),_hoisted_56]))],64))],8,_hoisted_48)])])])])])]),In.value.filter(Un=>st.mode==="essays"||Un.type==="dir").length>0?(openBlock(),createElementBlock("sl-divider",_hoisted_57)):createCommentVNode("",!0),In.value.length>0?(openBlock(),createElementBlock("div",_hoisted_58,[(openBlock(!0),createElementBlock(Fragment,null,renderList(In.value.filter(Un=>st.mode==="essays"||Un.type==="dir"),(Un,or)=>(openBlock(),createElementBlock("sl-button",{key:`child-${or}`,onClick:hr=>lr(Un),pill:"",size:"small",class:normalizeClass(Un.type)},[createBaseVNode("sl-icon",{slot:"prefix",name:Un.type==="dir"?"folder2":"file-earmark"},null,8,_hoisted_60),createTextVNode(" "+toDisplayString(Un.name),1)],10,_hoisted_59))),128)),Tn.value&&(Tn.value.length===0||Tn.value[Tn.value.length-1].split(".").pop()!=="md")&&st.mode==="essays"?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Add ${nt.mode==="media"?"resource":"file"}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",size:"small",class:"add-item",name:"`Add file",circle:"",onClick:sr},_hoisted_63)],8,_hoisted_61)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("sl-dialog",{id:"add-repo-dialog",label:"Add Repository"},[createBaseVNode("form",{id:"add-repo-form",class:"input-validation-pattern"},[_hoisted_64,_hoisted_65,createBaseVNode("sl-button",{onClick:cn},"Cancel"),_hoisted_66])]),createBaseVNode("sl-dialog",{id:"add-file-dialog",label:"Add File"},[createBaseVNode("form",{id:"add-file-form",class:"input-validation-pattern"},[_hoisted_67,_hoisted_68,createBaseVNode("sl-button",{onClick:ir},"Cancel"),_hoisted_69,_hoisted_70])]),createBaseVNode("sl-dialog",_hoisted_71,[createBaseVNode("div",null,[createTextVNode("Delete file "),createBaseVNode("span",{innerHTML:Dt.value},null,8,_hoisted_72),createTextVNode("?")]),createBaseVNode("sl-button",{slot:"footer",onClick:nn},"Cancel"),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Nn},"Confirm")])],512))}}),_style_1$5=`*{box-sizing:border-box}:host{display:block;width:100%;border:1px solid #444;padding:6px;z-index:9;background-color:#fff}span.path-elem{font-family:Archivo Narrow,Roboto,sans-serif;font-size:1.2rem}.workspace{display:flex;align-items:center}.workspace-selector{display:flex;gap:12px}.workspace-selector div{display:inline-flex;position:relative;padding-left:6px;font-size:1rem}.selectors{display:flex;gap:6px}.ws-path{position:relative;display:flex;align-items:center;width:100%;height:100%;margin:3px}.workspace-selector>sl-icon{vertical-align:middle;padding-right:6px}sl-drawer::part(base),sl-drawer::part(panel),sl-drawer::part(body){padding:0;overflow:visible}.github-select{font-weight:700;font-size:1.2em;color:#5a162e}sl-divider{margin:6px}.values{display:flex;flex-direction:column;gap:1rem}.values>div{display:flex;align-items:center;gap:1rem}.label{font-weight:700}.value{display:inline-block}sl-breadcrumb-item::part(label){font-size:1rem;color:var(--sl-color-primary-600)}.dir-items li{cursor:pointer}.dir-items{height:40vh;overflow-y:scroll}.dir-items li:hover{color:var(--sl-color-primary-600)}sl-icon-button::part(base){padding:0}.content-path{display:flex;flex-direction:column}sl-icon-button{align-self:start;margin-top:6px}sl-menu::part(base){max-height:300px;overflow-y:scroll}.dirs{display:flex;flex-wrap:wrap;gap:6px}.dirs sl-button::part(base){border-radius:12px;font-weight:500;font-family:Archivo Narrow,Roboto,sans-serif;font-size:1rem}sl-button.dir::part(base){background-color:#eee}sl-button.add-item::part(base){background-color:#eee;color:#000}.delete{margin-left:18px}sl-icon-button.delete::part(base){color:red}.add-repo{background-color:#ddd}sl-menu{text-align:left}sl-breadcrumb{display:inline-block}.breadcrumbs{display:flex;align-items:center;gap:12px;padding-left:12px}
`,ContentSelector=_export_sfc(_sfc_main$u,[["styles",[_style_0$o,_style_1$5]]]),_hoisted_1$r={class:"content"},_hoisted_2$n={class:"buttons"},_hoisted_3$g=["onClick"],_hoisted_4$d=["qid"],_hoisted_5$a={key:0,class:"caption"},_sfc_main$t=defineComponent({__name:"Entities.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Yt;return(Yt=it==null?void 0:it.value)==null?void 0:Yt.parentNode}),bt=computed(()=>{var Yt,Jt;return(Jt=(Yt=it.value)==null?void 0:Yt.getRootNode())==null?void 0:Jt.host}),wt=computed(()=>{var Yt;return(Yt=st.value)==null?void 0:Yt.querySelector(".content")}),Et=ref({}),kt=ref(null),Lt=computed(()=>{var Yt,Jt;return((Jt=(Yt=kt.value)==null?void 0:Yt.getAttribute("entities"))==null?void 0:Jt.split(/\s/).filter(Wt=>Wt))||[]}),Ot=ref();watch$1(Lt,()=>{Lt.value.length>0?getEntityData(Lt.value).then(Yt=>{Et.value=Yt,Ot.value=Lt.value[0]}):(Et.value={},Ot.value=void 0)}),watch$1(bt,()=>Rt());function Rt(){Bt(),Ft()}const Dt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Bt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Dt),Dt==="full"?bt.value.style.width="100%":(bt.value.style.float=Dt,bt.value.style.width="calc(50% - 16px)"),bt.value.style.width=window.getComputedStyle(bt.value).width,rt.sticky&&makeSticky(bt.value),wt.value.style.width=rt.width||"100%",nextTick(()=>{let Yt=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2));rt.sticky,wt.value.style.width=`${Yt}px`})}function Ft(){kt.value=document.querySelector(".active"),new MutationObserver(Jt=>{Jt.forEach(Wt=>{if(Wt.type==="attributes"){let Qt=Wt.target;Array.from(Qt.classList).indexOf("active")>=0&&(kt.value=Qt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Yt,Jt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$n,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Lt),Wt=>{var Qt;return openBlock(),createElementBlock("sl-button",{key:Wt,onClick:rn=>Ot.value=Wt,pill:"",size:"small",class:normalizeClass({selected:Wt===Ot.value})},toDisplayString((Qt=Et.value[Wt])==null?void 0:Qt.label),11,_hoisted_3$g)}),128))]),Ot.value?(openBlock(),createElementBlock("ve-entity-card",{key:0,qid:Ot.value},null,8,_hoisted_4$d)):createCommentVNode("",!0)]),rt.caption&&Ot.value?(openBlock(),createElementBlock("div",_hoisted_5$a,toDisplayString(rt.caption),1)):createCommentVNode("",!0)],512))}}),_style_0$m=`*{box-sizing:border-box}.main{margin-bottom:3rem}.buttons{display:flex;flex-wrap:wrap;gap:6px;padding:0 0 12px}.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}sl-button.selected::part(base){background-color:#ddd;font-weight:700}
`,Entities=_export_sfc(_sfc_main$t,[["styles",[_style_0$m]]]),_hoisted_1$q=["innerHTML"],_hoisted_2$m=["innerHTML"],_hoisted_3$f={class:"links"},_hoisted_4$c={key:0,class:"logo",title:"Wikipedia"},_hoisted_5$9=["href"],_hoisted_6$8=createBaseVNode("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/77/Wikipedia_svg_logo.svg"},null,-1),_hoisted_7$7=[_hoisted_6$8],_hoisted_8$7=["innerHTML"],_sfc_main$s=defineComponent({__name:"EntityCard.ce",props:{qid:{type:String},label:{type:String},description:{type:String},image:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Wt,Qt;return(Qt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Qt.host}),bt=ref(),wt=ref(),Et=ref(),kt=ref(),Lt=ref(),Ot=ref(),Rt=ref(),Dt=computed(()=>`${st.value.clientWidth*.33}px`);watch$1(Ot,()=>st.value.style.width="572px"),onMounted(()=>Bt());function Bt(){rt.qid&&bt.value!==rt.qid&&(bt.value=rt.qid),rt.label&&(Et.value=rt.label),rt.description&&(kt.value=rt.description),rt.image&&(Ot.value=rt.image)}watch$1(wt,()=>{var Wt;Et.value=wt.value.label,kt.value=wt.value.description,Ot.value=((Wt=wt.value)==null?void 0:Wt.thumbnail)&&`url('${Yt(wt.value.thumbnail)}')`,Rt.value=wt.value.wikipedia,Lt.value=wt.value.summaryText}),watch$1(bt,()=>Ft());async function Ft(){if(bt.value&&(!wt.value||wt.value.id!==rt.qid)){let Wt=await getEntity(bt.value),Qt=await getSummaryText(bt.value);Qt&&(Wt={...Wt,summaryText:Jt(Qt)}),wt.value=Wt}}function Yt(Wt){let Qt=Wt.split("/");return`${Qt.slice(0,-1).join("/")}/${encodeURIComponent(Qt[Qt.length-1])}`}function Jt(Wt){return new DOMParser().parseFromString(Wt,"text/html").children[0].children[1].children[0].innerHTML}return(Wt,Qt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:Et.value},null,8,_hoisted_1$q),createBaseVNode("div",{class:"description",innerHTML:kt.value},null,8,_hoisted_2$m),Ot.value?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:Ot.value,width:unref(Dt)})},null,4)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$f,[Rt.value?(openBlock(),createElementBlock("span",_hoisted_4$c,[createBaseVNode("a",{target:"_blank",href:Rt.value},_hoisted_7$7,8,_hoisted_5$9)])):createCommentVNode("",!0)]),Lt.value?(openBlock(),createElementBlock("p",{key:1,class:"summary",innerHTML:Lt.value},null,8,_hoisted_8$7)):createCommentVNode("",!0)],512))}}),_style_0$l=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border:1px solid #444;border-radius:6px;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;object-fit:cover;background-repeat:no-repeat;background-size:contain;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,EntityCard=_export_sfc(_sfc_main$s,[["styles",[_style_0$l]]]),_hoisted_1$p=["innerHTML"],_sfc_main$r=defineComponent({__name:"Essay.ce",props:{src:{type:String},prefix:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ot,Rt;return(Rt=(Ot=it.value)==null?void 0:Ot.getRootNode())==null?void 0:Rt.host}),bt=computed(()=>{var Ot;return(Ot=it==null?void 0:it.value)==null?void 0:Ot.parentNode}),wt=computed(()=>{var Ot,Rt;return(Rt=(Ot=st.value)==null?void 0:Ot.querySelector("pre"))==null?void 0:Rt.textContent}),Et=ref(),kt=ref();watch$1(wt,()=>{let Ot=wt.value.split(`
`),Rt=[];if(Ot.forEach(Dt=>{(Dt.trim().length>0||Rt.length>0)&&Rt.push(Dt)}),Rt.length>0){let Dt=(Rt[0].match(/(^\s+)/)||[""])[0].length;Et.value=Rt.map(Bt=>(Bt.match(/(^\s+)/)||[""])[0].length>=Dt?Bt.slice(Dt):Bt).join(`
`)}}),watch$1(Et,()=>Lt()),watch$1(st,()=>{let Ot=st.value.textContent.split(`
`),Rt=[];if(Ot.forEach(Dt=>{(Dt.trim().length>0||Rt.length>0)&&Rt.push(Dt)}),Rt.length>0){let Dt=(Rt[0].match(/(^\s+)/)||[""])[0].length;Et.value=Rt.map(Bt=>(Bt.match(/(^\s+)/)||[""])[0].length>=Dt?Bt.slice(Dt):Bt).join(`
`)}});function Lt(){kt.value="",fetch("/html/?inline=true",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:"",markdown:Et.value})}).then(Rt=>Rt.text()).then(Rt=>{let Bt=new DOMParser().parseFromString(Rt,"text/html").children[0].children[1].querySelector("main");Bt&&(Bt.id="juncture"),Bt&&(kt.value=Bt.innerHTML),nextTick(()=>{var Yt;let Ft=(Yt=bt.value)==null?void 0:Yt.querySelector("#juncture");Ft&&observeActive(Ft)})})}return(Ot,Rt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[kt.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",innerHTML:kt.value},null,8,_hoisted_1$p)):createCommentVNode("",!0)],512))}}),_style_1$4=`[v-cloak]{display:none}*{box-sizing:border-box}#main{font-family:Roboto,sans-serif;margin-top:0}#juncture{padding:12px;font-size:1.2em;line-height:1.3}@media (max-width: 480px){#juncture{padding:0}}
`,Essay=_export_sfc(_sfc_main$r,[["styles",[_style_0$o,_style_1$4]]]),_hoisted_1$o=["content","disabled"],_hoisted_2$l=["name"],_sfc_main$q=defineComponent({__name:"FAB.ce",props:{color:{type:String,default:"red"},label:{type:String},icon:{type:String},action:{type:String},right:{type:String,default:"35px"},bottom:{type:String,default:"35px"},disabled:{type:Boolean}},emits:["fabClicked"],setup(nt,{emit:rt}){const it=nt,st=ref(null),bt=ref(isMobile());function wt(){rt("fabClicked",it.action)}return(Et,kt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:st,class:"fab-wrapper",style:normalizeStyle({right:it.right,bottom:it.bottom})},[createBaseVNode("sl-tooltip",{content:it.label,placement:"top",disabled:bt.value||it.disabled},[createBaseVNode("span",{"data-action":"props.action",class:"fab-button",onClick:wt,style:normalizeStyle({visibility:it.disabled?"hidden":"visible",backgroundColor:it.color})},[createBaseVNode("sl-icon",{name:it.icon,style:{"font-size":"36px"}},null,8,_hoisted_2$l)],4)],8,_hoisted_1$o)],4))}}),_style_0$k=`.fab-wrapper{position:absolute;bottom:35px;right:35px}.fab-button{height:56px;width:56px;background-color:red;border-radius:50%;color:#fff;z-index:1;display:flex;align-items:center;justify-content:center;text-decoration:none;opacity:.4}.fab-button:hover{opacity:1;transition:all .4s;cursor:pointer}.fab-button i{font-size:16px;transform:rotate(0);transition:all .4s}
`,FAB=_export_sfc(_sfc_main$q,[["styles",[_style_0$k]]]),_hoisted_1$n=["name","label","onClick"],_hoisted_2$k=["innerHTML","onClick"],_hoisted_3$e=["src"],_sfc_main$p=defineComponent({__name:"Footer.ce",props:{sticky:{type:Boolean}},setup(nt){const rt=nt,it={"view-code":{icon:"markdown",label:"View Page Code"}},st=ref([]),bt=ref(null),wt=computed(()=>{var Jt,Wt;return(Wt=(Jt=bt.value)==null?void 0:Jt.getRootNode())==null?void 0:Wt.host}),Et=computed(()=>{var Jt;return(Jt=bt==null?void 0:bt.value)==null?void 0:Jt.parentNode}),kt=ref(!1);watch$1(kt,()=>Lt.open=kt.value);let Lt;const Ot=ref();watch$1(wt,()=>{var Jt;Lt=(Jt=Et.value)==null?void 0:Jt.querySelector(".page-source-dialog"),Lt.addEventListener("sl-hide",()=>kt.value=!1)}),watch$1(wt,()=>Rt());function Rt(){var Jt;wt.value.style.clear="both",rt.sticky&&Dt(),st.value=Array.from((Jt=wt.value)==null?void 0:Jt.querySelectorAll("li"))}function Dt(){wt.value.classList.add("sticky");let Jt=wt.value.offsetHeight;Jt+=parseInt(window.getComputedStyle(wt.value).getPropertyValue("margin-top")),Jt+=parseInt(window.getComputedStyle(wt.value).getPropertyValue("margin-bottom"));let Wt=document.querySelector("main");Wt&&(Wt.style.paddingBottom=`${Jt}px`),wt.value.style.width=`${wt.value.parentElement.clientWidth}px`,document.body.style.marginBottom="80px"}function Bt(Jt){return Jt?Object.fromEntries(Jt.split(";").filter(Wt=>Wt.trim()).map(Wt=>Wt.split(":").map(Qt=>Qt.trim()))):{}}function Ft(){let Jt=window.PREFIX,Wt=location.hostname.indexOf("github.io")!==-1,Qt=location.pathname.split("/").filter(rn=>rn).filter(rn=>rn!=="editor").slice(Wt?1:0).join("/");Ot.value=Jt&&Qt.indexOf(Jt)!==0?`${Jt}/${Qt}`:Qt,kt.value=!0}function Yt(Jt,Wt){Jt.innerHTML==="view-code"&&(Wt.stopPropagation(),Ft())}return(Jt,Wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:bt,class:"main"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(st.value,(Qt,rn)=>(openBlock(),createElementBlock(Fragment,{key:`li-${rn}`},[it[Qt.innerHTML]?(openBlock(),createElementBlock("sl-icon",{key:0,name:it[Qt.innerHTML].icon,label:it[Qt.innerHTML].label,onClick:sn=>Yt(Qt,sn),style:{"font-size":"24px"}},null,8,_hoisted_1$n)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(Qt.className),style:normalizeStyle(Bt(Qt.getAttribute("style")||"")),innerHTML:Qt.innerHTML,onClick:sn=>Yt(Qt,sn)},null,14,_hoisted_2$k))],64))),128)),createBaseVNode("sl-dialog",{label:"Page Source",class:"page-source-dialog",style:normalizeStyle({"--width":unref(isMobile)()?"100vw":"80vw"})},[Ot.value?(openBlock(),createElementBlock("ve-snippet",{key:0,src:Ot.value,tabs:"markdown,html,wordpress","disable-drag":""},null,8,_hoisted_3$e)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Wt[0]||(Wt[0]=Qt=>kt.value=!1)},"Close")],4)],512))}}),_style_0$j=`*{box-sizing:border-box}.main{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:9px 12px;margin:36px auto auto;font-family:Roboto,sans-serif;font-size:.9rem;z-index:100;background-color:#eee;color:#444;border-radius:3px}a,sl-icon{color:#0645ad;text-decoration:none}a:visited{color:#0b0080}a:hover,sl-icon:hover{color:#06e;cursor:pointer}a:active{color:#faa700}a:focus{outline:thin dotted}a:hover,a:active{outline:0}.main.sticky{position:fixed;bottom:0}div{display:flex;align-items:center;gap:12px}.main div{cursor:pointer}img{height:36px;vertical-align:middle}a{color:inherit;text-decoration:none}.logo,.logo img{height:20px}.push{margin-left:auto}sl-dialog::part(panel){color:#444;font-size:medium}
`,Footer=_export_sfc(_sfc_main$p,[["styles",[_style_0$j]]]),_hoisted_1$m=["src","alt"],_hoisted_2$j=["name","data-state"],_sfc_main$o=defineComponent({__name:"GIF.ce",props:{src:{type:String,required:!0},alt:{type:String},initiallyPaused:{type:Boolean},restartOnPlay:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Bt;return(Bt=it==null?void 0:it.value)==null?void 0:Bt.parentNode}),bt=computed(()=>{var Bt;return(Bt=st.value)==null?void 0:Bt.querySelector("#gif")}),wt=ref(!1),Et=ref(!1),kt=ref(),Lt={buttonPlayIconID:"",buttonPauseIconID:"",buttonPlayIconHTML:"",buttonPauseIconHTML:"",inheritClasses:!0,initiallyPaused:!1,restartOnPlay:!1,langPause:"Pause animation:",langPlay:"Play animation:",langPauseAllButton:"Pause all animations",langPlayAllButton:"Play all animations",langMissingAlt:"Animated GIF."};watch$1(bt,()=>{nextTick(()=>Ot())});function Ot(){kt.value={...Lt,initiallyPaused:rt.initiallyPaused,restartOnPlay:rt.restartOnPlay},Rt()}function Rt(){let Bt=()=>{wt.value=!0;let Ft;if(Ft=bt.value.src.split("."),Ft=Ft[Ft.length-1].toLowerCase(),Ft=Ft.substring(0,4),Ft==="gif"){const Yt=document.createElement("canvas");let Jt=parseFloat(getComputedStyle(bt.value,null).getPropertyValue("border-left-width")),Wt=parseFloat(getComputedStyle(bt.value,null).getPropertyValue("border-right-width")),Qt=Jt+Wt,rn=bt.value.getAttribute("width");rn!==null?(Yt.width=parseInt(rn),Yt.setAttribute("style","width:"+rn+"px !important;")):bt.value.clientWidth==0?Yt.width=bt.value.naturalWidth+.5+Qt:Yt.width=bt.value.clientWidth+.5+Qt;const sn=bt.value.naturalHeight/bt.value.naturalWidth*Yt.width;if(Yt.height=sn+.5,Yt.setAttribute("role","img"),kt.value.inheritClasses===!0){let Tn=bt.value.getAttribute("class");Tn==null&&(Tn=""),Yt.setAttribute("class","gifa11y-canvas "+Tn)}else Yt.setAttribute("class","gifa11y-canvas");let on=bt.value.getAttribute("alt")||kt.value.langMissingAlt;Yt.setAttribute("aria-label",on);const hn=bt.value.src,mn=window.matchMedia("(prefers-reduced-motion: reduce)");!mn||mn.matches||bt.value.classList.contains("gifa11y-paused")||hn.indexOf("gifa11y-paused")>-1||kt.value.initiallyPaused===!0?bt.value.style.display="none":Yt.style.display="none",Yt.getContext("2d").drawImage(bt.value,0,0,Yt.width,Yt.height),bt.value.after(Yt)}};bt.value.complete?Bt():bt.value.addEventListener("load",()=>{wt.value||nextTick(()=>Bt())})}function Dt(Bt,Ft){Et.value=!Et.value;const Yt=bt.value.nextElementSibling;Et.value?(kt.value.restartOnPlay&&(bt.value.src=rt.src),bt.value.style.display="block",Yt.style.display="none"):(kt.value.restartOnPlay&&(bt.value.src=rt.src),bt.value.style.display="none",Yt.style.display="block"),Ft.preventDefault()}return(Bt,Ft)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("img",{src:rt.src,i:"",id:"gif",style:{width:"100%"},alt:rt.alt||"Animated GIF",onClick:Ft[0]||(Ft[0]=Yt=>Dt("image",Yt))},null,8,_hoisted_1$m),wt.value?(openBlock(),createElementBlock("sl-icon",{key:0,id:"play-button",name:Et.value?"pause-circle":"play-circle","data-state":Et.value?"playing":"paused",style:{"font-size":"100px"},onClick:Ft[1]||(Ft[1]=Yt=>Dt("icon",Yt))},null,8,_hoisted_2$j)):createCommentVNode("",!0)],512))}}),_style_0$i=`.main{position:relative}canvas.gifa11y-canvas{object-fit:contain;max-width:100%}#play-button{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);color:#fff;visibility:hidden;background-color:#0006;border-radius:50%}#play-button:hover{cursor:pointer}#play-button[data-state=paused],.main:hover #play-button{visibility:visible}
`,GIF=_export_sfc(_sfc_main$o,[["styles",[_style_0$i]]]),_hoisted_1$l=["background","options","position","sticky","height","top"],_hoisted_2$i=["label","subtitle","logo","url","sticky","search-domain","contact","contact-form-title","contact-subject","height","background","alpha","offset"],_hoisted_3$d=["innerHTML"],_sfc_main$n=defineComponent({__name:"Header.ce",props:{label:{type:String},subtitle:{type:String},logo:{type:String},url:{type:String},contact:{type:String},contactFormTitle:{type:String},contactSubject:{type:String},searchDomain:{type:String},entities:{type:String},sticky:{type:Boolean},background:{type:String},options:{type:String},height:{type:Number},position:{type:String}},setup(nt){const rt=nt,it=80,st=400,bt=/^\w+:/,wt=ref(null),Et=computed(()=>{var Wt,Qt;return(Qt=(Wt=wt.value)==null?void 0:Wt.getRootNode())==null?void 0:Qt.host}),kt=ref(),Lt=ref(),Ot=ref([]),Rt=ref(),Dt=ref(),Bt=ref(),Ft=ref(rt.height||it);onMounted(()=>Yt()),onUpdated(()=>Yt());function Yt(){var Wt;Ot.value=rt.entities?rt.entities.split(/\s+/).filter(Qt=>Qt):[],rt.background!==void 0&&(isURL(rt.background)||Jt(rt.background))?(Bt.value=rt.background,Ft.value=rt.height||st):Dt.value=rt.background||"#444",rt.label&&rt.label!=="static"&&(kt.value=rt.label),rt.sticky&&Et.value.classList.add("sticky"),Lt.value=(Wt=Et.value.querySelector("ul"))==null?void 0:Wt.innerHTML}watch$1(Ot,async()=>{Ot.value.length>0&&!Rt.value&&(Rt.value=await getEntity(Ot.value[0]),Rt.value&&(kt.value=Rt.value.label,Rt.value.pageBanner&&(Bt.value=`https://iiif.juncture-digital.org/wc:${decodeURIComponent(Rt.value.pageBanner.split("/Special:FilePath/").pop()).replace(/\s/,"_")}/manifest.json`,Ft.value=st)))});function Jt(Wt){return bt.test(Wt)}return(Wt,Qt)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",normalizeProps(guardReactiveProps(Wt.$attrs)),null,16),Bt.value?(openBlock(),createElementBlock("ve-hero",{key:0,background:Bt.value,options:rt.options,position:rt.position,sticky:rt.sticky?"":null,height:Ft.value,top:rt.sticky?Ft.value-it:0},null,8,_hoisted_1$l)):createCommentVNode("",!0),createBaseVNode("ve-navbar",{ref_key:"navbar",ref:wt,label:kt.value,subtitle:rt.subtitle,logo:rt.logo,url:rt.url,sticky:rt.sticky?"":null,"search-domain":rt.searchDomain,contact:rt.contact,"contact-form-title":rt.contactFormTitle,"contact-subject":rt.contactSubject,height:Bt.value?it:Ft.value,background:Dt.value,alpha:Bt.value?.2:0,offset:Bt.value?it:0},[Lt.value?(openBlock(),createElementBlock("ul",{key:0,innerHTML:Lt.value},null,8,_hoisted_3$d)):createCommentVNode("",!0)],8,_hoisted_2$i)],64))}}),_style_0$h=`.main{width:100%}
`,Header=_export_sfc(_sfc_main$n,[["styles",[_style_0$h]]]),_hoisted_1$k=["manifest"],_sfc_main$m=defineComponent({__name:"Hero.ce",props:{background:{type:String},options:{type:String},position:{type:String,default:"center"},sticky:{type:Boolean,default:!1},height:{type:Number,default:350},top:{type:Number,default:0}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ot,Rt;return(Rt=(Ot=it.value)==null?void 0:Ot.getRootNode())==null?void 0:Rt.host}),bt=ref(),wt=ref(),Et=ref(),kt=ref();watch$1(rt,()=>{rt.sticky&&(st.value.style.position="sticky",st.value.style.top="-320px")}),watch$1(st,()=>{wt.value=parseImageOptions(rt.options||""),rt.background&&getManifest(rt.background).then(Ot=>bt.value=Ot),st.value.style.height=`${rt.height}px`,rt.sticky&&(st.value.style.position="sticky"),rt.top&&(st.value.style.top=`-${rt.top}px`)}),watch$1(bt,(Ot,Rt)=>{Ot!==Rt&&(Et.value=getItemInfo(Ot))}),watch$1(Et,async(Ot,Rt)=>{Ot!==Rt&&(kt.value=Ot.service?Lt(Ot.service[0].id||Ot.service[0]["@id"],wt.value):await imageDataUrl(Et.value.id,wt.value.region,{width:st.value.clientWidth,height:rt.height}))}),watch$1(kt,()=>{st.value.style.backgroundImage=`url("${kt.value}")`,st.value.style.backgroundPosition=rt.position});function Lt(Ot,Rt){let Dt=Et.value,Bt=Number((Dt.width/Dt.height).toFixed(4)),Ft=Math.min(800,st.value.clientWidth),Yt=Number(Ft/Bt).toFixed(0),Jt=`${Ft},${Yt}`;return`${Ot.replace(/\/info.json$/,"")}/${Rt.region}/${Jt}/${Rt.rotation}/${Rt.quality}.${Rt.format}`}return(Ot,Rt)=>{var Dt;return openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-hero media-item"},[createBaseVNode("ve-manifest-popup",{manifest:(Dt=bt.value)==null?void 0:Dt.id},null,8,_hoisted_1$k)],512)}}}),_style_0$g=`*{box-sizing:border-box}:host{display:block;position:relative;width:100%;z-index:10}.ve-hero{background-repeat:no-repeat;background-size:cover;background-position:center;z-index:8}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,Hero=_export_sfc(_sfc_main$m,[["styles",[_style_0$g]]]),_hoisted_1$j={class:"content"},_hoisted_2$h=["src","width","height"],_sfc_main$l=defineComponent({__name:"IFrame.ce",props:{allow:{type:String},allowfullscreen:{type:Boolean},allowpaymentrequest:{type:Boolean},height:{type:String},loading:{type:String},name:{type:String},referrerpolicy:{type:String},sandbox:{type:String},src:{type:String},srcdoc:{type:String},width:{type:String},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Bt;return(Bt=it==null?void 0:it.value)==null?void 0:Bt.parentNode}),bt=computed(()=>{var Bt,Ft;return(Ft=(Bt=it.value)==null?void 0:Bt.getRootNode())==null?void 0:Ft.host}),wt=computed(()=>{var Bt;return(Bt=st.value)==null?void 0:Bt.querySelector(".content")}),Et=ref(),kt=ref(0),Lt=ref(0),Ot=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");onMounted(()=>Rt());function Rt(){rt.src&&(Et.value=rt.src),Dt()}function Dt(){rt.sticky&&makeSticky(bt.value),bt.value.classList.add("ve-component"),bt.value.classList.add(Ot),Ot==="full"?bt.value.style.width="100%":(bt.value.style.float=Ot,bt.value.style.width="50%"),nextTick(()=>{bt.value.style.width=window.getComputedStyle(bt.value).width,bt.value.style.height=rt.height||window.getComputedStyle(bt.value).width,wt.value.style.width=rt.width||window.getComputedStyle(bt.value).width,wt.value.style.height=rt.height||window.getComputedStyle(bt.value).width,nextTick(()=>{kt.value=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2)),Lt.value=parseInt(window.getComputedStyle(wt.value).height.slice(0,-2))})})}return(Bt,Ft)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$j,[createBaseVNode("iframe",{src:Et.value,width:kt.value,height:Lt.value},null,8,_hoisted_2$h)])],512))}}),_style_0$f=`*{box-sizing:border-box}.main{height:500px}:host{display:block;width:100%;background-color:#fff}.content{margin:auto}iframe{border:none}
`,IFrame=_export_sfc(_sfc_main$l,[["styles",[_style_0$f]]]),_hoisted_1$i=["innerHTML"],_hoisted_2$g=["innerHTML"],_sfc_main$k=defineComponent({__name:"InfoCard.ce",props:{label:{type:String},description:{type:String},image:{type:String},href:{type:String},data:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Dt,Bt;return(Bt=(Dt=it.value)==null?void 0:Dt.getRootNode())==null?void 0:Bt.host}),bt=computed(()=>rt.data?JSON.parse(rt.data):{}),wt=computed(()=>bt.value.label||rt.label),Et=computed(()=>bt.value.description||rt.description),kt=computed(()=>bt.value.image||rt.image);computed(()=>bt.value.href||rt.href);const Lt=computed(()=>kt.value&&`url('${Rt(kt.value)}')`),Ot=computed(()=>{var Dt;return`${((Dt=st.value)==null?void 0:Dt.clientWidth)*.33}px`});function Rt(Dt){let Bt=Dt.split("/");return`${Bt.slice(0,-1).join("/")}/${encodeURIComponent(Bt[Bt.length-1])}`}return(Dt,Bt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:unref(wt)},null,8,_hoisted_1$i),createBaseVNode("div",{class:"description",innerHTML:unref(Et)},null,8,_hoisted_2$g),unref(kt)?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:unref(Lt),width:unref(Ot)})},null,4)):createCommentVNode("",!0)],512))}}),_style_0$e=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border-radius:6px;min-height:80px;max-height:100px;overflow-y:hidden;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400;height:100%}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;max-height:100px;object-fit:cover;background-repeat:no-repeat;background-size:cover;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,InfoCard=_export_sfc(_sfc_main$k,[["styles",[_style_0$e]]]),_withScopeId=nt=>(pushScopeId("data-v-b4ddce3a"),nt=nt(),popScopeId(),nt),_hoisted_1$h={class:"main"},_hoisted_2$f=["src"],_hoisted_3$c=["innerHTML"],_hoisted_4$b=["innerHTML"],_hoisted_5$8=["href","innerHTML"],_hoisted_6$7={class:"links"},_hoisted_7$6={class:"detail"},_hoisted_8$6={key:0,class:"provider"},_hoisted_9$5=_withScopeId(()=>createBaseVNode("span",{class:"label"},"provider",-1)),_hoisted_10$4={key:0,style:{display:"flex","align-items":"center"}},_hoisted_11$3=["src"],_hoisted_12$2=["href","innerHTML"],_hoisted_13$2={key:1},_hoisted_14$2=["src"],_hoisted_15$2=["href","innerHTML"],_hoisted_16$2={key:1,class:"requiredStatement"},_hoisted_17$2=["innerHTML"],_hoisted_18$2={key:2,class:"rights"},_hoisted_19$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"Reuse rights",-1)),_hoisted_20$2=["href","innerHTML"],_hoisted_21$2={key:3,class:"metadata"},_hoisted_22$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"metadata",-1)),_hoisted_23$2=["innerHTML"],_hoisted_24$2=["innerHTML"],_hoisted_25$2={key:1},_hoisted_26$2=["innerHTML"],_hoisted_27$2={key:4,class:"navDate"},_hoisted_28$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"navDate",-1)),_hoisted_29$2=["innerHTML"],_hoisted_30$2={key:5,class:"homepage"},_hoisted_31$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"homepage",-1)),_hoisted_32$2=["href","innerHTML"],_hoisted_33$2={key:6,class:"seeAlso"},_hoisted_34$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"seeAlso",-1)),_hoisted_35$1=["href","innerHTML"],_hoisted_36$1={key:7,class:"logo"},_hoisted_37=_withScopeId(()=>createBaseVNode("span",{class:"label"},"logo",-1)),_hoisted_38=["href","innerHTML"],_hoisted_39={key:8,class:"imageData"},_hoisted_40=_withScopeId(()=>createBaseVNode("span",{class:"label"},"source",-1)),_hoisted_41=["href","innerHTML"],_hoisted_42=_withScopeId(()=>createBaseVNode("span",{class:"label"},"format",-1)),_hoisted_43=["innerHTML"],_hoisted_44=_withScopeId(()=>createBaseVNode("span",{class:"label"},"width",-1)),_hoisted_45=["innerHTML"],_hoisted_46=_withScopeId(()=>createBaseVNode("span",{class:"label"},"height",-1)),_hoisted_47=["innerHTML"],_sfc_main$j=defineComponent({__name:"Manifest.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null);computed(()=>{var Dt,Bt;return(Bt=(Dt=it.value)==null?void 0:Dt.getRootNode())==null?void 0:Bt.host});const st=ref(null),bt=ref(null);watch$1(st,()=>bt.value=Lt(st.value));const wt=computed(()=>bt.value&&Rt(bt.value));onMounted(()=>Et());function Et(){typeof rt.manifest=="object"?st.value=rt.manifest:getManifest(rt.manifest).then(Dt=>st.value=Dt)}function kt(Dt,Bt="en"){return typeof Dt=="object"&&!Array.isArray(Dt)?Dt[Bt]||Dt.none||Dt[Object.keys(Dt).sort()[0]]:Dt}function Lt(Dt){let Bt={};if(Bt.id=kt(Dt.id),Bt.label=kt(Dt.label),Dt.summary&&(Bt.summary=kt(Dt.summary)),Dt.rights&&(Bt.rights=Dt.rights),Dt.thumbnail&&(Bt.thumbnail=Dt.thumbnail[0].id||Dt.thumbnail),Dt.metadata){Bt.metadata=Dt.metadata.map(Jt=>({label:kt(Jt.label)[0],value:kt(Jt.value)}));let Ft=Bt.metadata.find(Jt=>Jt.label=="source_url");Bt.sourceUrl=Ft?Ft.value[0]:null;let Yt=Bt.metadata.find(Jt=>Jt.label==="depicts");Yt&&(Bt.depicts=Yt.value)}if(Dt.provider&&(Bt.provider=Dt.provider.map(Ft=>{let Yt={label:kt(Ft.label),href:Ft.id};return Ft.logo&&(Yt.logo={src:Ft.logo[0].id}),Yt})),Dt.logo&&(Bt.logo=Dt.logo.map(Ft=>{let Yt={src:typeof Ft=="object"?Ft.id||Ft["@id"]:Ft};return typeof Ft=="object"&&(Ft.width&&(Yt.width=Ft.width),Ft.height&&(Yt.height=Ft.height)),Yt})),Bt.imageData=getItemInfo(Dt),Bt.service=Bt.imageData.service&&`${(Bt.imageData.service[0].id||Bt.imageData.service[0]["@id"]).replace(/\/info\.json$/,"")}/info.json`,Dt.requiredStatement){let Ft=Dt.requiredStatement;Bt.requiredStatement={label:kt(Ft.label),value:kt(Ft.value)}}return Dt.homepage&&(Bt.homepage={label:Dt.homepage.label?kt(Dt.homepage.label):Dt.homepage.id,href:Dt.homepage.id}),Dt.seeAlso&&(Bt.seeAlso=Dt.seeAlso.map(Ft=>({label:Ft.label?kt(Ft.label):Ft.id,href:Ft.id}))),Bt}function Ot(Dt){navigator.clipboard&&navigator.clipboard.writeText(Dt)}function Rt(Dt){let Bt={cc:{badgeWidth:88,badgeHeight:31,badgeTemplate:'https://licensebuttons.net/l/${this.rightsCode}${this.rightsCode === "publicdomain" ? "" : "/"+this.version}/${this.badgeWidth}x${this.badgeHeight}.png'},rs:{badgeTemplate:"https://rightsstatements.org/files/buttons/${this.rightsCode}.white.svg",backgroundColor:"318ac7"}};const Ft=function(on,hn){return new Function("return `"+on+"`;").call(hn)};let Yt=Dt.rights||"",Jt="",[Wt,Qt,rn,sn]=Yt.split("/").slice(2);return Wt==="creativecommons.org"?(rn=rn==="zero"?"publicdomain":rn,Jt=`<img src="${Ft(Bt.cc.badgeTemplate,{...Bt.cc,rightsCode:rn,version:sn})}"/>`):Wt==="rightsstatements.org"&&(Jt=`<div style="display:inline-block;height:25px;padding:3px;background-color:#${Bt.rs.backgroundColor};"><img style="height:100%;" src="${Ft(Bt.rs.badgeTemplate,{...Bt.rs,rightsCode:rn})}"/></div>`),Jt}return(Dt,Bt)=>{var Ft,Yt,Jt,Wt,Qt,rn,sn,on,hn,mn,Cn,Tn,kn,In,Ln;return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"manifest"},[createBaseVNode("div",_hoisted_1$h,[createBaseVNode("img",{class:"thumbnail",src:(Ft=bt.value)==null?void 0:Ft.thumbnail},null,8,_hoisted_2$f),createBaseVNode("div",{class:"label",innerHTML:(Yt=bt.value)==null?void 0:Yt.label},null,8,_hoisted_3$c),(Jt=bt.value)!=null&&Jt.summary?(openBlock(),createElementBlock("div",{key:0,class:"summary",innerHTML:(Wt=bt.value)==null?void 0:Wt.summary},null,8,_hoisted_4$b)):createCommentVNode("",!0),(Qt=bt.value)!=null&&Qt.rights?(openBlock(),createElementBlock("a",{key:1,href:(rn=bt.value)==null?void 0:rn.rights,innerHTML:unref(wt)},null,8,_hoisted_5$8)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$7,[createBaseVNode("img",{src:"https://juncture-digital.github.io/web-app/static/iiif.png",class:"iiif",alt:"IIIF manifest icon",onClick:Bt[0]||(Bt[0]=pn=>Ot(st.value.id))})])]),createBaseVNode("div",_hoisted_7$6,[(sn=bt.value)!=null&&sn.provider?(openBlock(),createElementBlock("div",_hoisted_8$6,[_hoisted_9$5,bt.value.provider.length===1?(openBlock(),createElementBlock("div",_hoisted_10$4,[bt.value.provider[0].logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:bt.value.provider[0].logo.src},null,8,_hoisted_11$3)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:bt.value.provider[0].href,innerHTML:bt.value.provider[0].label},null,8,_hoisted_12$2)])):(openBlock(),createElementBlock("ul",_hoisted_13$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value.provider,(pn,Hn)=>(openBlock(),createElementBlock("li",{key:`provider-${Hn}`},[pn.logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:pn.logo.src},null,8,_hoisted_14$2)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:pn.href,innerHTML:pn.label},null,8,_hoisted_15$2)]))),128))]))])):createCommentVNode("",!0),(on=bt.value)!=null&&on.requiredStatement?(openBlock(),createElementBlock("div",_hoisted_16$2,[createBaseVNode("span",{class:"value",innerHTML:bt.value.requiredStatement.value},null,8,_hoisted_17$2)])):createCommentVNode("",!0),(hn=bt.value)!=null&&hn.rights?(openBlock(),createElementBlock("div",_hoisted_18$2,[_hoisted_19$2,createBaseVNode("a",{class:"value",href:bt.value.rights,innerHTML:bt.value.rights},null,8,_hoisted_20$2)])):createCommentVNode("",!0),(mn=bt.value)!=null&&mn.metadata?(openBlock(),createElementBlock("div",_hoisted_21$2,[_hoisted_22$2,createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value.metadata,(pn,Hn)=>(openBlock(),createElementBlock("li",{key:`md-${Hn}`},[createBaseVNode("span",{class:"label",innerHTML:pn.label},null,8,_hoisted_23$2),pn.value.length===1?(openBlock(),createElementBlock("span",{key:0,class:"value",innerHTML:pn.value[0]},null,8,_hoisted_24$2)):(openBlock(),createElementBlock("ul",_hoisted_25$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(pn.value,yn=>(openBlock(),createElementBlock("li",{class:"value",innerHTML:yn},null,8,_hoisted_26$2))),256))]))]))),128))])])):createCommentVNode("",!0),(Cn=bt.value)!=null&&Cn.navDate?(openBlock(),createElementBlock("div",_hoisted_27$2,[_hoisted_28$2,createBaseVNode("span",{class:"value",innerHTML:bt.value.navDate},null,8,_hoisted_29$2)])):createCommentVNode("",!0),(Tn=bt.value)!=null&&Tn.homepage?(openBlock(),createElementBlock("div",_hoisted_30$2,[_hoisted_31$2,createBaseVNode("a",{class:"value",href:bt.value.homepage.href,innerHTML:bt.value.homepage.label},null,8,_hoisted_32$2)])):createCommentVNode("",!0),(kn=bt.value)!=null&&kn.seeAlso?(openBlock(),createElementBlock("div",_hoisted_33$2,[_hoisted_34$2,createBaseVNode("a",{class:"value",href:bt.value.seeAlso[0].href,innerHTML:bt.value.seeAlso[0].label},null,8,_hoisted_35$1)])):createCommentVNode("",!0),(In=bt.value)!=null&&In.logo?(openBlock(),createElementBlock("div",_hoisted_36$1,[_hoisted_37,createBaseVNode("a",{class:"value",href:bt.value.logo[0].src,innerHTML:bt.value.logo[0].src},null,8,_hoisted_38)])):createCommentVNode("",!0),(Ln=bt.value)!=null&&Ln.imageData?(openBlock(),createElementBlock("div",_hoisted_39,[createBaseVNode("div",null,[_hoisted_40,createBaseVNode("a",{class:"value",href:bt.value.imageData.id,innerHTML:bt.value.imageData.id.split("/").pop()},null,8,_hoisted_41)]),createBaseVNode("div",null,[_hoisted_42,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.format},null,8,_hoisted_43)]),createBaseVNode("div",null,[_hoisted_44,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.width},null,8,_hoisted_45)]),createBaseVNode("div",null,[_hoisted_46,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.height},null,8,_hoisted_47)])])):createCommentVNode("",!0)])],512)}}}),_style_0$d=`*[data-v-b4ddce3a]{box-sizing:border-box}.manifest[data-v-b4ddce3a]{width:100%;height:100%;overflow-y:scroll;background-color:#fff}.main[data-v-b4ddce3a],.detail[data-v-b4ddce3a]{display:flow-root;margin:6px}.main>*[data-v-b4ddce3a]{margin-bottom:6px}.detail>div[data-v-b4ddce3a]{margin-top:12px}.main .label[data-v-b4ddce3a]{font-size:1.2em;font-weight:700}.thumbnail[data-v-b4ddce3a]{float:left;max-width:45%;max-height:200px;margin:0 6px 6px 0}.links[data-v-b4ddce3a]{margin-top:6px}img.iiif[data-v-b4ddce3a]{height:24px;cursor:copy}ul[data-v-b4ddce3a]{list-style:none;padding-left:12px;margin-top:0}.detail .label[data-v-b4ddce3a]{font-size:1.1em;font-weight:700;min-width:80px;margin-right:6px}.detail .label[data-v-b4ddce3a]:after{content:":"}.detail .value[data-v-b4ddce3a],.main .label[data-v-b4ddce3a]{white-space:pre-wrap;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.logo[data-v-b4ddce3a]{padding-right:6px}img.logo[data-v-b4ddce3a]{height:40px}.manifest-id[data-v-b4ddce3a],.manifest-label[data-v-b4ddce3a],.summary[data-v-b4ddce3a],.provider[data-v-b4ddce3a],.rights[data-v-b4ddce3a],.service[data-v-b4ddce3a],.imageData div[data-v-b4ddce3a],.thumbnail[data-v-b4ddce3a]{display:flex;align-items:flex-start}.metadata>ul[data-v-b4ddce3a],.requiredStatement ul[data-v-b4ddce3a]{padding-left:24px}.metadata ul li[data-v-b4ddce3a],.requiredStatement ul li[data-v-b4ddce3a]{display:flex}.metadata ul ul[data-v-b4ddce3a]{padding-left:0}a[data-v-b4ddce3a]:link,a[data-v-b4ddce3a]:visited{color:#00e}
`,Manifest=_export_sfc(_sfc_main$j,[["styles",[_style_0$d]],["__scopeId","data-v-b4ddce3a"]]),_hoisted_1$g=createBaseVNode("sl-icon",{id:"tippy",name:"info-circle-fill"},null,-1),_hoisted_2$e=[_hoisted_1$g],_sfc_main$i=defineComponent({__name:"ManifestPopup.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var bt,wt;return(wt=(bt=it.value)==null?void 0:bt.getRootNode())==null?void 0:wt.host});return watch$1(st,()=>{tippy(st.value,{theme:"light-border",allowHTML:!0,interactive:!0,appendTo:document.body,placement:"bottom-end",arrow:!0,delay:[null,null],onShow:bt=>bt.setContent(`<div class="manifest-popup"><ve-manifest manifest="${rt.manifest}"></ve-manifest></div>`)})}),(bt,wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it},_hoisted_2$e,512))}}),_style_0$c=`#tippy{width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center}
`,ManifestPopup=_export_sfc(_sfc_main$i,[["styles",[_style_0$c]]]);var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(nt,rt){(function(it,st){st(rt)})(commonjsGlobal$1,function(it){var st="1.9.3";function bt(Mt){var jt,tn,gn,$n;for(tn=1,gn=arguments.length;tn<gn;tn++){$n=arguments[tn];for(jt in $n)Mt[jt]=$n[jt]}return Mt}var wt=Object.create||function(){function Mt(){}return function(jt){return Mt.prototype=jt,new Mt}}();function Et(Mt,jt){var tn=Array.prototype.slice;if(Mt.bind)return Mt.bind.apply(Mt,tn.call(arguments,1));var gn=tn.call(arguments,2);return function(){return Mt.apply(jt,gn.length?gn.concat(tn.call(arguments)):arguments)}}var kt=0;function Lt(Mt){return"_leaflet_id"in Mt||(Mt._leaflet_id=++kt),Mt._leaflet_id}function Ot(Mt,jt,tn){var gn,$n,tr,Ir;return Ir=function(){gn=!1,$n&&(tr.apply(tn,$n),$n=!1)},tr=function(){gn?$n=arguments:(Mt.apply(tn,arguments),setTimeout(Ir,jt),gn=!0)},tr}function Rt(Mt,jt,tn){var gn=jt[1],$n=jt[0],tr=gn-$n;return Mt===gn&&tn?Mt:((Mt-$n)%tr+tr)%tr+$n}function Dt(){return!1}function Bt(Mt,jt){if(jt===!1)return Mt;var tn=Math.pow(10,jt===void 0?6:jt);return Math.round(Mt*tn)/tn}function Ft(Mt){return Mt.trim?Mt.trim():Mt.replace(/^\s+|\s+$/g,"")}function Yt(Mt){return Ft(Mt).split(/\s+/)}function Jt(Mt,jt){Object.prototype.hasOwnProperty.call(Mt,"options")||(Mt.options=Mt.options?wt(Mt.options):{});for(var tn in jt)Mt.options[tn]=jt[tn];return Mt.options}function Wt(Mt,jt,tn){var gn=[];for(var $n in Mt)gn.push(encodeURIComponent(tn?$n.toUpperCase():$n)+"="+encodeURIComponent(Mt[$n]));return(!jt||jt.indexOf("?")===-1?"?":"&")+gn.join("&")}var Qt=/\{ *([\w_ -]+) *\}/g;function rn(Mt,jt){return Mt.replace(Qt,function(tn,gn){var $n=jt[gn];if($n===void 0)throw new Error("No value provided for variable "+tn);return typeof $n=="function"&&($n=$n(jt)),$n})}var sn=Array.isArray||function(Mt){return Object.prototype.toString.call(Mt)==="[object Array]"};function on(Mt,jt){for(var tn=0;tn<Mt.length;tn++)if(Mt[tn]===jt)return tn;return-1}var hn="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function mn(Mt){return window["webkit"+Mt]||window["moz"+Mt]||window["ms"+Mt]}var Cn=0;function Tn(Mt){var jt=+new Date,tn=Math.max(0,16-(jt-Cn));return Cn=jt+tn,window.setTimeout(Mt,tn)}var kn=window.requestAnimationFrame||mn("RequestAnimationFrame")||Tn,In=window.cancelAnimationFrame||mn("CancelAnimationFrame")||mn("CancelRequestAnimationFrame")||function(Mt){window.clearTimeout(Mt)};function Ln(Mt,jt,tn){if(tn&&kn===Tn)Mt.call(jt);else return kn.call(window,Et(Mt,jt))}function pn(Mt){Mt&&In.call(window,Mt)}var Hn={__proto__:null,extend:bt,create:wt,bind:Et,get lastId(){return kt},stamp:Lt,throttle:Ot,wrapNum:Rt,falseFn:Dt,formatNum:Bt,trim:Ft,splitWords:Yt,setOptions:Jt,getParamString:Wt,template:rn,isArray:sn,indexOf:on,emptyImageUrl:hn,requestFn:kn,cancelFn:In,requestAnimFrame:Ln,cancelAnimFrame:pn};function yn(){}yn.extend=function(Mt){var jt=function(){Jt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},tn=jt.__super__=this.prototype,gn=wt(tn);gn.constructor=jt,jt.prototype=gn;for(var $n in this)Object.prototype.hasOwnProperty.call(this,$n)&&$n!=="prototype"&&$n!=="__super__"&&(jt[$n]=this[$n]);return Mt.statics&&bt(jt,Mt.statics),Mt.includes&&(mr(Mt.includes),bt.apply(null,[gn].concat(Mt.includes))),bt(gn,Mt),delete gn.statics,delete gn.includes,gn.options&&(gn.options=tn.options?wt(tn.options):{},bt(gn.options,Mt.options)),gn._initHooks=[],gn.callInitHooks=function(){if(!this._initHooksCalled){tn.callInitHooks&&tn.callInitHooks.call(this),this._initHooksCalled=!0;for(var tr=0,Ir=gn._initHooks.length;tr<Ir;tr++)gn._initHooks[tr].call(this)}},jt},yn.include=function(Mt){var jt=this.prototype.options;return bt(this.prototype,Mt),Mt.options&&(this.prototype.options=jt,this.mergeOptions(Mt.options)),this},yn.mergeOptions=function(Mt){return bt(this.prototype.options,Mt),this},yn.addInitHook=function(Mt){var jt=Array.prototype.slice.call(arguments,1),tn=typeof Mt=="function"?Mt:function(){this[Mt].apply(this,jt)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(tn),this};function mr(Mt){if(!(typeof L>"u"||!L||!L.Mixin)){Mt=sn(Mt)?Mt:[Mt];for(var jt=0;jt<Mt.length;jt++)Mt[jt]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var vn={on:function(Mt,jt,tn){if(typeof Mt=="object")for(var gn in Mt)this._on(gn,Mt[gn],jt);else{Mt=Yt(Mt);for(var $n=0,tr=Mt.length;$n<tr;$n++)this._on(Mt[$n],jt,tn)}return this},off:function(Mt,jt,tn){if(!arguments.length)delete this._events;else if(typeof Mt=="object")for(var gn in Mt)this._off(gn,Mt[gn],jt);else{Mt=Yt(Mt);for(var $n=arguments.length===1,tr=0,Ir=Mt.length;tr<Ir;tr++)$n?this._off(Mt[tr]):this._off(Mt[tr],jt,tn)}return this},_on:function(Mt,jt,tn,gn){if(typeof jt!="function"){console.warn("wrong listener type: "+typeof jt);return}if(this._listens(Mt,jt,tn)===!1){tn===this&&(tn=void 0);var $n={fn:jt,ctx:tn};gn&&($n.once=!0),this._events=this._events||{},this._events[Mt]=this._events[Mt]||[],this._events[Mt].push($n)}},_off:function(Mt,jt,tn){var gn,$n,tr;if(!!this._events&&(gn=this._events[Mt],!!gn)){if(arguments.length===1){if(this._firingCount)for($n=0,tr=gn.length;$n<tr;$n++)gn[$n].fn=Dt;delete this._events[Mt];return}if(typeof jt!="function"){console.warn("wrong listener type: "+typeof jt);return}var Ir=this._listens(Mt,jt,tn);if(Ir!==!1){var Xr=gn[Ir];this._firingCount&&(Xr.fn=Dt,this._events[Mt]=gn=gn.slice()),gn.splice(Ir,1)}}},fire:function(Mt,jt,tn){if(!this.listens(Mt,tn))return this;var gn=bt({},jt,{type:Mt,target:this,sourceTarget:jt&&jt.sourceTarget||this});if(this._events){var $n=this._events[Mt];if($n){this._firingCount=this._firingCount+1||1;for(var tr=0,Ir=$n.length;tr<Ir;tr++){var Xr=$n[tr],ii=Xr.fn;Xr.once&&this.off(Mt,ii,Xr.ctx),ii.call(Xr.ctx||this,gn)}this._firingCount--}}return tn&&this._propagateEvent(gn),this},listens:function(Mt,jt,tn,gn){typeof Mt!="string"&&console.warn('"string" type argument expected');var $n=jt;typeof jt!="function"&&(gn=!!jt,$n=void 0,tn=void 0);var tr=this._events&&this._events[Mt];if(tr&&tr.length&&this._listens(Mt,$n,tn)!==!1)return!0;if(gn){for(var Ir in this._eventParents)if(this._eventParents[Ir].listens(Mt,jt,tn,gn))return!0}return!1},_listens:function(Mt,jt,tn){if(!this._events)return!1;var gn=this._events[Mt]||[];if(!jt)return!!gn.length;tn===this&&(tn=void 0);for(var $n=0,tr=gn.length;$n<tr;$n++)if(gn[$n].fn===jt&&gn[$n].ctx===tn)return $n;return!1},once:function(Mt,jt,tn){if(typeof Mt=="object")for(var gn in Mt)this._on(gn,Mt[gn],jt,!0);else{Mt=Yt(Mt);for(var $n=0,tr=Mt.length;$n<tr;$n++)this._on(Mt[$n],jt,tn,!0)}return this},addEventParent:function(Mt){return this._eventParents=this._eventParents||{},this._eventParents[Lt(Mt)]=Mt,this},removeEventParent:function(Mt){return this._eventParents&&delete this._eventParents[Lt(Mt)],this},_propagateEvent:function(Mt){for(var jt in this._eventParents)this._eventParents[jt].fire(Mt.type,bt({layer:Mt.target,propagatedFrom:Mt.target},Mt),!0)}};vn.addEventListener=vn.on,vn.removeEventListener=vn.clearAllEventListeners=vn.off,vn.addOneTimeEventListener=vn.once,vn.fireEvent=vn.fire,vn.hasEventListeners=vn.listens;var yr=yn.extend(vn);function Tr(Mt,jt,tn){this.x=tn?Math.round(Mt):Mt,this.y=tn?Math.round(jt):jt}var Mr=Math.trunc||function(Mt){return Mt>0?Math.floor(Mt):Math.ceil(Mt)};Tr.prototype={clone:function(){return new Tr(this.x,this.y)},add:function(Mt){return this.clone()._add(rr(Mt))},_add:function(Mt){return this.x+=Mt.x,this.y+=Mt.y,this},subtract:function(Mt){return this.clone()._subtract(rr(Mt))},_subtract:function(Mt){return this.x-=Mt.x,this.y-=Mt.y,this},divideBy:function(Mt){return this.clone()._divideBy(Mt)},_divideBy:function(Mt){return this.x/=Mt,this.y/=Mt,this},multiplyBy:function(Mt){return this.clone()._multiplyBy(Mt)},_multiplyBy:function(Mt){return this.x*=Mt,this.y*=Mt,this},scaleBy:function(Mt){return new Tr(this.x*Mt.x,this.y*Mt.y)},unscaleBy:function(Mt){return new Tr(this.x/Mt.x,this.y/Mt.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Mr(this.x),this.y=Mr(this.y),this},distanceTo:function(Mt){Mt=rr(Mt);var jt=Mt.x-this.x,tn=Mt.y-this.y;return Math.sqrt(jt*jt+tn*tn)},equals:function(Mt){return Mt=rr(Mt),Mt.x===this.x&&Mt.y===this.y},contains:function(Mt){return Mt=rr(Mt),Math.abs(Mt.x)<=Math.abs(this.x)&&Math.abs(Mt.y)<=Math.abs(this.y)},toString:function(){return"Point("+Bt(this.x)+", "+Bt(this.y)+")"}};function rr(Mt,jt,tn){return Mt instanceof Tr?Mt:sn(Mt)?new Tr(Mt[0],Mt[1]):Mt==null?Mt:typeof Mt=="object"&&"x"in Mt&&"y"in Mt?new Tr(Mt.x,Mt.y):new Tr(Mt,jt,tn)}function wr(Mt,jt){if(!!Mt)for(var tn=jt?[Mt,jt]:Mt,gn=0,$n=tn.length;gn<$n;gn++)this.extend(tn[gn])}wr.prototype={extend:function(Mt){var jt,tn;if(!Mt)return this;if(Mt instanceof Tr||typeof Mt[0]=="number"||"x"in Mt)jt=tn=rr(Mt);else if(Mt=fr(Mt),jt=Mt.min,tn=Mt.max,!jt||!tn)return this;return!this.min&&!this.max?(this.min=jt.clone(),this.max=tn.clone()):(this.min.x=Math.min(jt.x,this.min.x),this.max.x=Math.max(tn.x,this.max.x),this.min.y=Math.min(jt.y,this.min.y),this.max.y=Math.max(tn.y,this.max.y)),this},getCenter:function(Mt){return rr((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,Mt)},getBottomLeft:function(){return rr(this.min.x,this.max.y)},getTopRight:function(){return rr(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(Mt){var jt,tn;return typeof Mt[0]=="number"||Mt instanceof Tr?Mt=rr(Mt):Mt=fr(Mt),Mt instanceof wr?(jt=Mt.min,tn=Mt.max):jt=tn=Mt,jt.x>=this.min.x&&tn.x<=this.max.x&&jt.y>=this.min.y&&tn.y<=this.max.y},intersects:function(Mt){Mt=fr(Mt);var jt=this.min,tn=this.max,gn=Mt.min,$n=Mt.max,tr=$n.x>=jt.x&&gn.x<=tn.x,Ir=$n.y>=jt.y&&gn.y<=tn.y;return tr&&Ir},overlaps:function(Mt){Mt=fr(Mt);var jt=this.min,tn=this.max,gn=Mt.min,$n=Mt.max,tr=$n.x>jt.x&&gn.x<tn.x,Ir=$n.y>jt.y&&gn.y<tn.y;return tr&&Ir},isValid:function(){return!!(this.min&&this.max)},pad:function(Mt){var jt=this.min,tn=this.max,gn=Math.abs(jt.x-tn.x)*Mt,$n=Math.abs(jt.y-tn.y)*Mt;return fr(rr(jt.x-gn,jt.y-$n),rr(tn.x+gn,tn.y+$n))},equals:function(Mt){return Mt?(Mt=fr(Mt),this.min.equals(Mt.getTopLeft())&&this.max.equals(Mt.getBottomRight())):!1}};function fr(Mt,jt){return!Mt||Mt instanceof wr?Mt:new wr(Mt,jt)}function gr(Mt,jt){if(!!Mt)for(var tn=jt?[Mt,jt]:Mt,gn=0,$n=tn.length;gn<$n;gn++)this.extend(tn[gn])}gr.prototype={extend:function(Mt){var jt=this._southWest,tn=this._northEast,gn,$n;if(Mt instanceof Pr)gn=Mt,$n=Mt;else if(Mt instanceof gr){if(gn=Mt._southWest,$n=Mt._northEast,!gn||!$n)return this}else return Mt?this.extend(lr(Mt)||Lr(Mt)):this;return!jt&&!tn?(this._southWest=new Pr(gn.lat,gn.lng),this._northEast=new Pr($n.lat,$n.lng)):(jt.lat=Math.min(gn.lat,jt.lat),jt.lng=Math.min(gn.lng,jt.lng),tn.lat=Math.max($n.lat,tn.lat),tn.lng=Math.max($n.lng,tn.lng)),this},pad:function(Mt){var jt=this._southWest,tn=this._northEast,gn=Math.abs(jt.lat-tn.lat)*Mt,$n=Math.abs(jt.lng-tn.lng)*Mt;return new gr(new Pr(jt.lat-gn,jt.lng-$n),new Pr(tn.lat+gn,tn.lng+$n))},getCenter:function(){return new Pr((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Pr(this.getNorth(),this.getWest())},getSouthEast:function(){return new Pr(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(Mt){typeof Mt[0]=="number"||Mt instanceof Pr||"lat"in Mt?Mt=lr(Mt):Mt=Lr(Mt);var jt=this._southWest,tn=this._northEast,gn,$n;return Mt instanceof gr?(gn=Mt.getSouthWest(),$n=Mt.getNorthEast()):gn=$n=Mt,gn.lat>=jt.lat&&$n.lat<=tn.lat&&gn.lng>=jt.lng&&$n.lng<=tn.lng},intersects:function(Mt){Mt=Lr(Mt);var jt=this._southWest,tn=this._northEast,gn=Mt.getSouthWest(),$n=Mt.getNorthEast(),tr=$n.lat>=jt.lat&&gn.lat<=tn.lat,Ir=$n.lng>=jt.lng&&gn.lng<=tn.lng;return tr&&Ir},overlaps:function(Mt){Mt=Lr(Mt);var jt=this._southWest,tn=this._northEast,gn=Mt.getSouthWest(),$n=Mt.getNorthEast(),tr=$n.lat>jt.lat&&gn.lat<tn.lat,Ir=$n.lng>jt.lng&&gn.lng<tn.lng;return tr&&Ir},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(Mt,jt){return Mt?(Mt=Lr(Mt),this._southWest.equals(Mt.getSouthWest(),jt)&&this._northEast.equals(Mt.getNorthEast(),jt)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Lr(Mt,jt){return Mt instanceof gr?Mt:new gr(Mt,jt)}function Pr(Mt,jt,tn){if(isNaN(Mt)||isNaN(jt))throw new Error("Invalid LatLng object: ("+Mt+", "+jt+")");this.lat=+Mt,this.lng=+jt,tn!==void 0&&(this.alt=+tn)}Pr.prototype={equals:function(Mt,jt){if(!Mt)return!1;Mt=lr(Mt);var tn=Math.max(Math.abs(this.lat-Mt.lat),Math.abs(this.lng-Mt.lng));return tn<=(jt===void 0?1e-9:jt)},toString:function(Mt){return"LatLng("+Bt(this.lat,Mt)+", "+Bt(this.lng,Mt)+")"},distanceTo:function(Mt){return sr.distance(this,lr(Mt))},wrap:function(){return sr.wrapLatLng(this)},toBounds:function(Mt){var jt=180*Mt/40075017,tn=jt/Math.cos(Math.PI/180*this.lat);return Lr([this.lat-jt,this.lng-tn],[this.lat+jt,this.lng+tn])},clone:function(){return new Pr(this.lat,this.lng,this.alt)}};function lr(Mt,jt,tn){return Mt instanceof Pr?Mt:sn(Mt)&&typeof Mt[0]!="object"?Mt.length===3?new Pr(Mt[0],Mt[1],Mt[2]):Mt.length===2?new Pr(Mt[0],Mt[1]):null:Mt==null?Mt:typeof Mt=="object"&&"lat"in Mt?new Pr(Mt.lat,"lng"in Mt?Mt.lng:Mt.lon,Mt.alt):jt===void 0?null:new Pr(Mt,jt,tn)}var qr={latLngToPoint:function(Mt,jt){var tn=this.projection.project(Mt),gn=this.scale(jt);return this.transformation._transform(tn,gn)},pointToLatLng:function(Mt,jt){var tn=this.scale(jt),gn=this.transformation.untransform(Mt,tn);return this.projection.unproject(gn)},project:function(Mt){return this.projection.project(Mt)},unproject:function(Mt){return this.projection.unproject(Mt)},scale:function(Mt){return 256*Math.pow(2,Mt)},zoom:function(Mt){return Math.log(Mt/256)/Math.LN2},getProjectedBounds:function(Mt){if(this.infinite)return null;var jt=this.projection.bounds,tn=this.scale(Mt),gn=this.transformation.transform(jt.min,tn),$n=this.transformation.transform(jt.max,tn);return new wr(gn,$n)},infinite:!1,wrapLatLng:function(Mt){var jt=this.wrapLng?Rt(Mt.lng,this.wrapLng,!0):Mt.lng,tn=this.wrapLat?Rt(Mt.lat,this.wrapLat,!0):Mt.lat,gn=Mt.alt;return new Pr(tn,jt,gn)},wrapLatLngBounds:function(Mt){var jt=Mt.getCenter(),tn=this.wrapLatLng(jt),gn=jt.lat-tn.lat,$n=jt.lng-tn.lng;if(gn===0&&$n===0)return Mt;var tr=Mt.getSouthWest(),Ir=Mt.getNorthEast(),Xr=new Pr(tr.lat-gn,tr.lng-$n),ii=new Pr(Ir.lat-gn,Ir.lng-$n);return new gr(Xr,ii)}},sr=bt({},qr,{wrapLng:[-180,180],R:6371e3,distance:function(Mt,jt){var tn=Math.PI/180,gn=Mt.lat*tn,$n=jt.lat*tn,tr=Math.sin((jt.lat-Mt.lat)*tn/2),Ir=Math.sin((jt.lng-Mt.lng)*tn/2),Xr=tr*tr+Math.cos(gn)*Math.cos($n)*Ir*Ir,ii=2*Math.atan2(Math.sqrt(Xr),Math.sqrt(1-Xr));return this.R*ii}}),pr=6378137,Er={R:pr,MAX_LATITUDE:85.0511287798,project:function(Mt){var jt=Math.PI/180,tn=this.MAX_LATITUDE,gn=Math.max(Math.min(tn,Mt.lat),-tn),$n=Math.sin(gn*jt);return new Tr(this.R*Mt.lng*jt,this.R*Math.log((1+$n)/(1-$n))/2)},unproject:function(Mt){var jt=180/Math.PI;return new Pr((2*Math.atan(Math.exp(Mt.y/this.R))-Math.PI/2)*jt,Mt.x*jt/this.R)},bounds:function(){var Mt=pr*Math.PI;return new wr([-Mt,-Mt],[Mt,Mt])}()};function ir(Mt,jt,tn,gn){if(sn(Mt)){this._a=Mt[0],this._b=Mt[1],this._c=Mt[2],this._d=Mt[3];return}this._a=Mt,this._b=jt,this._c=tn,this._d=gn}ir.prototype={transform:function(Mt,jt){return this._transform(Mt.clone(),jt)},_transform:function(Mt,jt){return jt=jt||1,Mt.x=jt*(this._a*Mt.x+this._b),Mt.y=jt*(this._c*Mt.y+this._d),Mt},untransform:function(Mt,jt){return jt=jt||1,new Tr((Mt.x/jt-this._b)/this._a,(Mt.y/jt-this._d)/this._c)}};function Pn(Mt,jt,tn,gn){return new ir(Mt,jt,tn,gn)}var nn=bt({},sr,{code:"EPSG:3857",projection:Er,transformation:function(){var Mt=.5/(Math.PI*Er.R);return Pn(Mt,.5,-Mt,.5)}()}),fn=bt({},nn,{code:"EPSG:900913"});function cn(Mt){return document.createElementNS("http://www.w3.org/2000/svg",Mt)}function Nn(Mt,jt){var tn="",gn,$n,tr,Ir,Xr,ii;for(gn=0,tr=Mt.length;gn<tr;gn++){for(Xr=Mt[gn],$n=0,Ir=Xr.length;$n<Ir;$n++)ii=Xr[$n],tn+=($n?"L":"M")+ii.x+" "+ii.y;tn+=jt?Ai.svg?"z":"x":""}return tn||"M0 0"}var On=document.documentElement.style,cr="ActiveXObject"in window,Bn=cr&&!document.addEventListener,Qn="msLaunchUri"in navigator&&!("documentMode"in document),Un=Hs("webkit"),or=Hs("android"),hr=Hs("android 2")||Hs("android 3"),kr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xr=or&&Hs("Google")&&kr<537&&!("AudioNode"in window),br=!!window.opera,hi=!Qn&&Hs("chrome"),di=Hs("gecko")&&!Un&&!br&&!cr,vi=!hi&&Hs("safari"),Ti=Hs("phantom"),ki="OTransition"in On,Di=navigator.platform.indexOf("Win")===0,Ci=cr&&"transition"in On,$r="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!hr,An="MozPerspective"in On,Sn=!window.L_DISABLE_3D&&(Ci||$r||An)&&!ki&&!Ti,Wn=typeof orientation<"u"||Hs("mobile"),er=Wn&&Un,vr=Wn&&$r,ti=!window.PointerEvent&&window.MSPointerEvent,_r=!!(window.PointerEvent||ti),li="ontouchstart"in window||!!window.TouchEvent,Or=!window.L_NO_TOUCH&&(li||_r),mi=Wn&&br,_i=Wn&&di,Pi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xi=function(){var Mt=!1;try{var jt=Object.defineProperty({},"passive",{get:function(){Mt=!0}});window.addEventListener("testPassiveEventSupport",Dt,jt),window.removeEventListener("testPassiveEventSupport",Dt,jt)}catch{}return Mt}(),Zi=function(){return!!document.createElement("canvas").getContext}(),$i=!!(document.createElementNS&&cn("svg").createSVGRect),Qi=!!$i&&function(){var Mt=document.createElement("div");return Mt.innerHTML="<svg/>",(Mt.firstChild&&Mt.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Eo=!$i&&function(){try{var Mt=document.createElement("div");Mt.innerHTML='<v:shape adj="1"/>';var jt=Mt.firstChild;return jt.style.behavior="url(#default#VML)",jt&&typeof jt.adj=="object"}catch{return!1}}(),to=navigator.platform.indexOf("Mac")===0,Za=navigator.platform.indexOf("Linux")===0;function Hs(Mt){return navigator.userAgent.toLowerCase().indexOf(Mt)>=0}var Ai={ie:cr,ielt9:Bn,edge:Qn,webkit:Un,android:or,android23:hr,androidStock:xr,opera:br,chrome:hi,gecko:di,safari:vi,phantom:Ti,opera12:ki,win:Di,ie3d:Ci,webkit3d:$r,gecko3d:An,any3d:Sn,mobile:Wn,mobileWebkit:er,mobileWebkit3d:vr,msPointer:ti,pointer:_r,touch:Or,touchNative:li,mobileOpera:mi,mobileGecko:_i,retina:Pi,passiveEvents:xi,canvas:Zi,svg:$i,vml:Eo,inlineSvg:Qi,mac:to,linux:Za},io=Ai.msPointer?"MSPointerDown":"pointerdown",Fs=Ai.msPointer?"MSPointerMove":"pointermove",Xo=Ai.msPointer?"MSPointerUp":"pointerup",os=Ai.msPointer?"MSPointerCancel":"pointercancel",Os={touchstart:io,touchmove:Fs,touchend:Xo,touchcancel:os},Ns={touchstart:ss,touchmove:bo,touchend:bo,touchcancel:bo},Rr={},Qr=!1;function Dr(Mt,jt,tn){return jt==="touchstart"&&Po(),Ns[jt]?(tn=Ns[jt].bind(this,tn),Mt.addEventListener(Os[jt],tn,!1),tn):(console.warn("wrong event specified:",jt),Dt)}function ar(Mt,jt,tn){if(!Os[jt]){console.warn("wrong event specified:",jt);return}Mt.removeEventListener(Os[jt],tn,!1)}function Ur(Mt){Rr[Mt.pointerId]=Mt}function ci(Mt){Rr[Mt.pointerId]&&(Rr[Mt.pointerId]=Mt)}function wi(Mt){delete Rr[Mt.pointerId]}function Po(){Qr||(document.addEventListener(io,Ur,!0),document.addEventListener(Fs,ci,!0),document.addEventListener(Xo,wi,!0),document.addEventListener(os,wi,!0),Qr=!0)}function bo(Mt,jt){if(jt.pointerType!==(jt.MSPOINTER_TYPE_MOUSE||"mouse")){jt.touches=[];for(var tn in Rr)jt.touches.push(Rr[tn]);jt.changedTouches=[jt],Mt(jt)}}function ss(Mt,jt){jt.MSPOINTER_TYPE_TOUCH&&jt.pointerType===jt.MSPOINTER_TYPE_TOUCH&&da(jt),bo(Mt,jt)}function oo(Mt){var jt={},tn,gn;for(gn in Mt)tn=Mt[gn],jt[gn]=tn&&tn.bind?tn.bind(Mt):tn;return Mt=jt,jt.type="dblclick",jt.detail=2,jt.isTrusted=!1,jt._simulated=!0,jt}var Do=200;function Us(Mt,jt){Mt.addEventListener("dblclick",jt);var tn=0,gn;function $n(tr){if(tr.detail!==1){gn=tr.detail;return}if(!(tr.pointerType==="mouse"||tr.sourceCapabilities&&!tr.sourceCapabilities.firesTouchEvents)){var Ir=su(tr);if(!(Ir.some(function(ii){return ii instanceof HTMLLabelElement&&ii.attributes.for})&&!Ir.some(function(ii){return ii instanceof HTMLInputElement||ii instanceof HTMLSelectElement}))){var Xr=Date.now();Xr-tn<=Do?(gn++,gn===2&&jt(oo(tr))):gn=1,tn=Xr}}}return Mt.addEventListener("click",$n),{dblclick:jt,simDblclick:$n}}function aa(Mt,jt){Mt.removeEventListener("dblclick",jt.dblclick),Mt.removeEventListener("click",jt.simDblclick)}var ra=ic(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ji=ic(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),so=ji==="webkitTransition"||ji==="OTransition"?ji+"End":"transitionend";function fo(Mt){return typeof Mt=="string"?document.getElementById(Mt):Mt}function Li(Mt,jt){var tn=Mt.style[jt]||Mt.currentStyle&&Mt.currentStyle[jt];if((!tn||tn==="auto")&&document.defaultView){var gn=document.defaultView.getComputedStyle(Mt,null);tn=gn?gn[jt]:null}return tn==="auto"?null:tn}function ao(Mt,jt,tn){var gn=document.createElement(Mt);return gn.className=jt||"",tn&&tn.appendChild(gn),gn}function Sr(Mt){var jt=Mt.parentNode;jt&&jt.removeChild(Mt)}function ml(Mt){for(;Mt.firstChild;)Mt.removeChild(Mt.firstChild)}function Nr(Mt){var jt=Mt.parentNode;jt&&jt.lastChild!==Mt&&jt.appendChild(Mt)}function ia(Mt){var jt=Mt.parentNode;jt&&jt.firstChild!==Mt&&jt.insertBefore(Mt,jt.firstChild)}function _c(Mt,jt){if(Mt.classList!==void 0)return Mt.classList.contains(jt);var tn=Fi(Mt);return tn.length>0&&new RegExp("(^|\\s)"+jt+"(\\s|$)").test(tn)}function No(Mt,jt){if(Mt.classList!==void 0)for(var tn=Yt(jt),gn=0,$n=tn.length;gn<$n;gn++)Mt.classList.add(tn[gn]);else if(!_c(Mt,jt)){var tr=Fi(Mt);Tu(Mt,(tr?tr+" ":"")+jt)}}function go(Mt,jt){Mt.classList!==void 0?Mt.classList.remove(jt):Tu(Mt,Ft((" "+Fi(Mt)+" ").replace(" "+jt+" "," ")))}function Tu(Mt,jt){Mt.className.baseVal===void 0?Mt.className=jt:Mt.className.baseVal=jt}function Fi(Mt){return Mt.correspondingElement&&(Mt=Mt.correspondingElement),Mt.className.baseVal===void 0?Mt.className:Mt.className.baseVal}function mo(Mt,jt){"opacity"in Mt.style?Mt.style.opacity=jt:"filter"in Mt.style&&Ka(Mt,jt)}function Ka(Mt,jt){var tn=!1,gn="DXImageTransform.Microsoft.Alpha";try{tn=Mt.filters.item(gn)}catch{if(jt===1)return}jt=Math.round(jt*100),tn?(tn.Enabled=jt!==100,tn.Opacity=jt):Mt.style.filter+=" progid:"+gn+"(opacity="+jt+")"}function ic(Mt){for(var jt=document.documentElement.style,tn=0;tn<Mt.length;tn++)if(Mt[tn]in jt)return Mt[tn];return!1}function Rl(Mt,jt,tn){var gn=jt||new Tr(0,0);Mt.style[ra]=(Ai.ie3d?"translate("+gn.x+"px,"+gn.y+"px)":"translate3d("+gn.x+"px,"+gn.y+"px,0)")+(tn?" scale("+tn+")":"")}function Qs(Mt,jt){Mt._leaflet_pos=jt,Ai.any3d?Rl(Mt,jt):(Mt.style.left=jt.x+"px",Mt.style.top=jt.y+"px")}function Ho(Mt){return Mt._leaflet_pos||new Tr(0,0)}var jo,la,Tl;if("onselectstart"in document)jo=function(){Bo(window,"selectstart",da)},la=function(){co(window,"selectstart",da)};else{var ya=ic(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);jo=function(){if(ya){var Mt=document.documentElement.style;Tl=Mt[ya],Mt[ya]="none"}},la=function(){ya&&(document.documentElement.style[ya]=Tl,Tl=void 0)}}function yl(){Bo(window,"dragstart",da)}function ja(){co(window,"dragstart",da)}var ou,Rc;function bc(Mt){for(;Mt.tabIndex===-1;)Mt=Mt.parentNode;!Mt.style||(Ja(),ou=Mt,Rc=Mt.style.outline,Mt.style.outline="none",Bo(window,"keydown",Ja))}function Ja(){!ou||(ou.style.outline=Rc,ou=void 0,Rc=void 0,co(window,"keydown",Ja))}function ku(Mt){do Mt=Mt.parentNode;while((!Mt.offsetWidth||!Mt.offsetHeight)&&Mt!==document.body);return Mt}function Au(Mt){var jt=Mt.getBoundingClientRect();return{x:jt.width/Mt.offsetWidth||1,y:jt.height/Mt.offsetHeight||1,boundingClientRect:jt}}var Lu={__proto__:null,TRANSFORM:ra,TRANSITION:ji,TRANSITION_END:so,get:fo,getStyle:Li,create:ao,remove:Sr,empty:ml,toFront:Nr,toBack:ia,hasClass:_c,addClass:No,removeClass:go,setClass:Tu,getClass:Fi,setOpacity:mo,testProp:ic,setTransform:Rl,setPosition:Qs,getPosition:Ho,get disableTextSelection(){return jo},get enableTextSelection(){return la},disableImageDrag:yl,enableImageDrag:ja,preventOutline:bc,restoreOutline:Ja,getSizedParentNode:ku,getScale:Au};function Bo(Mt,jt,tn,gn){if(jt&&typeof jt=="object")for(var $n in jt)Qh(Mt,$n,jt[$n],tn);else{jt=Yt(jt);for(var tr=0,Ir=jt.length;tr<Ir;tr++)Qh(Mt,jt[tr],tn,gn)}return this}var va="_leaflet_events";function co(Mt,jt,tn,gn){if(arguments.length===1)kl(Mt),delete Mt[va];else if(jt&&typeof jt=="object")for(var $n in jt)Ju(Mt,$n,jt[$n],tn);else if(jt=Yt(jt),arguments.length===2)kl(Mt,function(Xr){return on(jt,Xr)!==-1});else for(var tr=0,Ir=jt.length;tr<Ir;tr++)Ju(Mt,jt[tr],tn,gn);return this}function kl(Mt,jt){for(var tn in Mt[va]){var gn=tn.split(/\d/)[0];(!jt||jt(gn))&&Ju(Mt,gn,null,null,tn)}}var Jh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qh(Mt,jt,tn,gn){var $n=jt+Lt(tn)+(gn?"_"+Lt(gn):"");if(Mt[va]&&Mt[va][$n])return this;var tr=function(Xr){return tn.call(gn||Mt,Xr||window.event)},Ir=tr;!Ai.touchNative&&Ai.pointer&&jt.indexOf("touch")===0?tr=Dr(Mt,jt,tr):Ai.touch&&jt==="dblclick"?tr=Us(Mt,tr):"addEventListener"in Mt?jt==="touchstart"||jt==="touchmove"||jt==="wheel"||jt==="mousewheel"?Mt.addEventListener(Jh[jt]||jt,tr,Ai.passiveEvents?{passive:!1}:!1):jt==="mouseenter"||jt==="mouseleave"?(tr=function(Xr){Xr=Xr||window.event,Al(Mt,Xr)&&Ir(Xr)},Mt.addEventListener(Jh[jt],tr,!1)):Mt.addEventListener(jt,Ir,!1):Mt.attachEvent("on"+jt,tr),Mt[va]=Mt[va]||{},Mt[va][$n]=tr}function Ju(Mt,jt,tn,gn,$n){$n=$n||jt+Lt(tn)+(gn?"_"+Lt(gn):"");var tr=Mt[va]&&Mt[va][$n];if(!tr)return this;!Ai.touchNative&&Ai.pointer&&jt.indexOf("touch")===0?ar(Mt,jt,tr):Ai.touch&&jt==="dblclick"?aa(Mt,tr):"removeEventListener"in Mt?Mt.removeEventListener(Jh[jt]||jt,tr,!1):Mt.detachEvent("on"+jt,tr),Mt[va][$n]=null}function Iu(Mt){return Mt.stopPropagation?Mt.stopPropagation():Mt.originalEvent?Mt.originalEvent._stopped=!0:Mt.cancelBubble=!0,this}function Qu(Mt){return Qh(Mt,"wheel",Iu),this}function Nl(Mt){return Bo(Mt,"mousedown touchstart dblclick contextmenu",Iu),Mt._leaflet_disable_click=!0,this}function da(Mt){return Mt.preventDefault?Mt.preventDefault():Mt.returnValue=!1,this}function Nc(Mt){return da(Mt),Iu(Mt),this}function su(Mt){if(Mt.composedPath)return Mt.composedPath();for(var jt=[],tn=Mt.target;tn;)jt.push(tn),tn=tn.parentNode;return jt}function Md(Mt,jt){if(!jt)return new Tr(Mt.clientX,Mt.clientY);var tn=Au(jt),gn=tn.boundingClientRect;return new Tr((Mt.clientX-gn.left)/tn.x-jt.clientLeft,(Mt.clientY-gn.top)/tn.y-jt.clientTop)}var wf=Ai.linux&&Ai.chrome?window.devicePixelRatio:Ai.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ed(Mt){return Ai.edge?Mt.wheelDeltaY/2:Mt.deltaY&&Mt.deltaMode===0?-Mt.deltaY/wf:Mt.deltaY&&Mt.deltaMode===1?-Mt.deltaY*20:Mt.deltaY&&Mt.deltaMode===2?-Mt.deltaY*60:Mt.deltaX||Mt.deltaZ?0:Mt.wheelDelta?(Mt.wheelDeltaY||Mt.wheelDelta)/2:Mt.detail&&Math.abs(Mt.detail)<32765?-Mt.detail*20:Mt.detail?Mt.detail/-32765*60:0}function Al(Mt,jt){var tn=jt.relatedTarget;if(!tn)return!0;try{for(;tn&&tn!==Mt;)tn=tn.parentNode}catch{return!1}return tn!==Mt}var Ua={__proto__:null,on:Bo,off:co,stopPropagation:Iu,disableScrollPropagation:Qu,disableClickPropagation:Nl,preventDefault:da,stop:Nc,getPropagationPath:su,getMousePosition:Md,getWheelDelta:ed,isExternalTarget:Al,addListener:Bo,removeListener:co},Th=yr.extend({run:function(Mt,jt,tn,gn){this.stop(),this._el=Mt,this._inProgress=!0,this._duration=tn||.25,this._easeOutPower=1/Math.max(gn||.5,.2),this._startPos=Ho(Mt),this._offset=jt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=Ln(this._animate,this),this._step()},_step:function(Mt){var jt=+new Date-this._startTime,tn=this._duration*1e3;jt<tn?this._runFrame(this._easeOut(jt/tn),Mt):(this._runFrame(1),this._complete())},_runFrame:function(Mt,jt){var tn=this._startPos.add(this._offset.multiplyBy(Mt));jt&&tn._round(),Qs(this._el,tn),this.fire("step")},_complete:function(){pn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(Mt){return 1-Math.pow(1-Mt,this._easeOutPower)}}),Fo=yr.extend({options:{crs:nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(Mt,jt){jt=Jt(this,jt),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(Mt),this._initLayout(),this._onResize=Et(this._onResize,this),this._initEvents(),jt.maxBounds&&this.setMaxBounds(jt.maxBounds),jt.zoom!==void 0&&(this._zoom=this._limitZoom(jt.zoom)),jt.center&&jt.zoom!==void 0&&this.setView(lr(jt.center),jt.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ji&&Ai.any3d&&!Ai.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Bo(this._proxy,so,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(Mt,jt,tn){if(jt=jt===void 0?this._zoom:this._limitZoom(jt),Mt=this._limitCenter(lr(Mt),jt,this.options.maxBounds),tn=tn||{},this._stop(),this._loaded&&!tn.reset&&tn!==!0){tn.animate!==void 0&&(tn.zoom=bt({animate:tn.animate},tn.zoom),tn.pan=bt({animate:tn.animate,duration:tn.duration},tn.pan));var gn=this._zoom!==jt?this._tryAnimatedZoom&&this._tryAnimatedZoom(Mt,jt,tn.zoom):this._tryAnimatedPan(Mt,tn.pan);if(gn)return clearTimeout(this._sizeTimer),this}return this._resetView(Mt,jt,tn.pan&&tn.pan.noMoveStart),this},setZoom:function(Mt,jt){return this._loaded?this.setView(this.getCenter(),Mt,{zoom:jt}):(this._zoom=Mt,this)},zoomIn:function(Mt,jt){return Mt=Mt||(Ai.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+Mt,jt)},zoomOut:function(Mt,jt){return Mt=Mt||(Ai.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-Mt,jt)},setZoomAround:function(Mt,jt,tn){var gn=this.getZoomScale(jt),$n=this.getSize().divideBy(2),tr=Mt instanceof Tr?Mt:this.latLngToContainerPoint(Mt),Ir=tr.subtract($n).multiplyBy(1-1/gn),Xr=this.containerPointToLatLng($n.add(Ir));return this.setView(Xr,jt,{zoom:tn})},_getBoundsCenterZoom:function(Mt,jt){jt=jt||{},Mt=Mt.getBounds?Mt.getBounds():Lr(Mt);var tn=rr(jt.paddingTopLeft||jt.padding||[0,0]),gn=rr(jt.paddingBottomRight||jt.padding||[0,0]),$n=this.getBoundsZoom(Mt,!1,tn.add(gn));if($n=typeof jt.maxZoom=="number"?Math.min(jt.maxZoom,$n):$n,$n===1/0)return{center:Mt.getCenter(),zoom:$n};var tr=gn.subtract(tn).divideBy(2),Ir=this.project(Mt.getSouthWest(),$n),Xr=this.project(Mt.getNorthEast(),$n),ii=this.unproject(Ir.add(Xr).divideBy(2).add(tr),$n);return{center:ii,zoom:$n}},fitBounds:function(Mt,jt){if(Mt=Lr(Mt),!Mt.isValid())throw new Error("Bounds are not valid.");var tn=this._getBoundsCenterZoom(Mt,jt);return this.setView(tn.center,tn.zoom,jt)},fitWorld:function(Mt){return this.fitBounds([[-90,-180],[90,180]],Mt)},panTo:function(Mt,jt){return this.setView(Mt,this._zoom,{pan:jt})},panBy:function(Mt,jt){if(Mt=rr(Mt).round(),jt=jt||{},!Mt.x&&!Mt.y)return this.fire("moveend");if(jt.animate!==!0&&!this.getSize().contains(Mt))return this._resetView(this.unproject(this.project(this.getCenter()).add(Mt)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Th,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),jt.noMoveStart||this.fire("movestart"),jt.animate!==!1){No(this._mapPane,"leaflet-pan-anim");var tn=this._getMapPanePos().subtract(Mt).round();this._panAnim.run(this._mapPane,tn,jt.duration||.25,jt.easeLinearity)}else this._rawPanBy(Mt),this.fire("move").fire("moveend");return this},flyTo:function(Mt,jt,tn){if(tn=tn||{},tn.animate===!1||!Ai.any3d)return this.setView(Mt,jt,tn);this._stop();var gn=this.project(this.getCenter()),$n=this.project(Mt),tr=this.getSize(),Ir=this._zoom;Mt=lr(Mt),jt=jt===void 0?Ir:jt;var Xr=Math.max(tr.x,tr.y),ii=Xr*this.getZoomScale(Ir,jt),yi=$n.distanceTo(gn)||1,Gi=1.42,Oo=Gi*Gi;function ps(ea){var Gd=ea?-1:1,Dg=ea?ii:Xr,Bg=ii*ii-Xr*Xr+Gd*Oo*Oo*yi*yi,fd=2*Dg*Oo*yi,pd=Bg/fd,Rf=Math.sqrt(pd*pd+1)-pd,Rp=Rf<1e-9?-18:Math.log(Rf);return Rp}function Xl(ea){return(Math.exp(ea)-Math.exp(-ea))/2}function sh(ea){return(Math.exp(ea)+Math.exp(-ea))/2}function Ih(ea){return Xl(ea)/sh(ea)}var Ec=ps(0);function Mf(ea){return Xr*(sh(Ec)/sh(Ec+Gi*ea))}function Mp(ea){return Xr*(sh(Ec)*Ih(Ec+Gi*ea)-Xl(Ec))/Oo}function Ng(ea){return 1-Math.pow(1-ea,1.5)}var $p=Date.now(),ah=(ps(1)-Ec)/Gi,dd=tn.duration?1e3*tn.duration:1e3*ah*.8;function $f(){var ea=(Date.now()-$p)/dd,Gd=Ng(ea)*ah;ea<=1?(this._flyToFrame=Ln($f,this),this._move(this.unproject(gn.add($n.subtract(gn).multiplyBy(Mp(Gd)/yi)),Ir),this.getScaleZoom(Xr/Mf(Gd),Ir),{flyTo:!0})):this._move(Mt,jt)._moveEnd(!0)}return this._moveStart(!0,tn.noMoveStart),$f.call(this),this},flyToBounds:function(Mt,jt){var tn=this._getBoundsCenterZoom(Mt,jt);return this.flyTo(tn.center,tn.zoom,jt)},setMaxBounds:function(Mt){return Mt=Lr(Mt),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),Mt.isValid()?(this.options.maxBounds=Mt,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(Mt){var jt=this.options.minZoom;return this.options.minZoom=Mt,this._loaded&&jt!==Mt&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(Mt):this},setMaxZoom:function(Mt){var jt=this.options.maxZoom;return this.options.maxZoom=Mt,this._loaded&&jt!==Mt&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(Mt):this},panInsideBounds:function(Mt,jt){this._enforcingBounds=!0;var tn=this.getCenter(),gn=this._limitCenter(tn,this._zoom,Lr(Mt));return tn.equals(gn)||this.panTo(gn,jt),this._enforcingBounds=!1,this},panInside:function(Mt,jt){jt=jt||{};var tn=rr(jt.paddingTopLeft||jt.padding||[0,0]),gn=rr(jt.paddingBottomRight||jt.padding||[0,0]),$n=this.project(this.getCenter()),tr=this.project(Mt),Ir=this.getPixelBounds(),Xr=fr([Ir.min.add(tn),Ir.max.subtract(gn)]),ii=Xr.getSize();if(!Xr.contains(tr)){this._enforcingBounds=!0;var yi=tr.subtract(Xr.getCenter()),Gi=Xr.extend(tr).getSize().subtract(ii);$n.x+=yi.x<0?-Gi.x:Gi.x,$n.y+=yi.y<0?-Gi.y:Gi.y,this.panTo(this.unproject($n),jt),this._enforcingBounds=!1}return this},invalidateSize:function(Mt){if(!this._loaded)return this;Mt=bt({animate:!1,pan:!0},Mt===!0?{animate:!0}:Mt);var jt=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var tn=this.getSize(),gn=jt.divideBy(2).round(),$n=tn.divideBy(2).round(),tr=gn.subtract($n);return!tr.x&&!tr.y?this:(Mt.animate&&Mt.pan?this.panBy(tr):(Mt.pan&&this._rawPanBy(tr),this.fire("move"),Mt.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Et(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:jt,newSize:tn}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(Mt){if(Mt=this._locateOptions=bt({timeout:1e4,watch:!1},Mt),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var jt=Et(this._handleGeolocationResponse,this),tn=Et(this._handleGeolocationError,this);return Mt.watch?this._locationWatchId=navigator.geolocation.watchPosition(jt,tn,Mt):navigator.geolocation.getCurrentPosition(jt,tn,Mt),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(Mt){if(!!this._container._leaflet_id){var jt=Mt.code,tn=Mt.message||(jt===1?"permission denied":jt===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:jt,message:"Geolocation error: "+tn+"."})}},_handleGeolocationResponse:function(Mt){if(!!this._container._leaflet_id){var jt=Mt.coords.latitude,tn=Mt.coords.longitude,gn=new Pr(jt,tn),$n=gn.toBounds(Mt.coords.accuracy*2),tr=this._locateOptions;if(tr.setView){var Ir=this.getBoundsZoom($n);this.setView(gn,tr.maxZoom?Math.min(Ir,tr.maxZoom):Ir)}var Xr={latlng:gn,bounds:$n,timestamp:Mt.timestamp};for(var ii in Mt.coords)typeof Mt.coords[ii]=="number"&&(Xr[ii]=Mt.coords[ii]);this.fire("locationfound",Xr)}},addHandler:function(Mt,jt){if(!jt)return this;var tn=this[Mt]=new jt(this);return this._handlers.push(tn),this.options[Mt]&&tn.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Sr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(pn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var Mt;for(Mt in this._layers)this._layers[Mt].remove();for(Mt in this._panes)Sr(this._panes[Mt]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(Mt,jt){var tn="leaflet-pane"+(Mt?" leaflet-"+Mt.replace("Pane","")+"-pane":""),gn=ao("div",tn,jt||this._mapPane);return Mt&&(this._panes[Mt]=gn),gn},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var Mt=this.getPixelBounds(),jt=this.unproject(Mt.getBottomLeft()),tn=this.unproject(Mt.getTopRight());return new gr(jt,tn)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(Mt,jt,tn){Mt=Lr(Mt),tn=rr(tn||[0,0]);var gn=this.getZoom()||0,$n=this.getMinZoom(),tr=this.getMaxZoom(),Ir=Mt.getNorthWest(),Xr=Mt.getSouthEast(),ii=this.getSize().subtract(tn),yi=fr(this.project(Xr,gn),this.project(Ir,gn)).getSize(),Gi=Ai.any3d?this.options.zoomSnap:1,Oo=ii.x/yi.x,ps=ii.y/yi.y,Xl=jt?Math.max(Oo,ps):Math.min(Oo,ps);return gn=this.getScaleZoom(Xl,gn),Gi&&(gn=Math.round(gn/(Gi/100))*(Gi/100),gn=jt?Math.ceil(gn/Gi)*Gi:Math.floor(gn/Gi)*Gi),Math.max($n,Math.min(tr,gn))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Tr(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(Mt,jt){var tn=this._getTopLeftPoint(Mt,jt);return new wr(tn,tn.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(Mt){return this.options.crs.getProjectedBounds(Mt===void 0?this.getZoom():Mt)},getPane:function(Mt){return typeof Mt=="string"?this._panes[Mt]:Mt},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(Mt,jt){var tn=this.options.crs;return jt=jt===void 0?this._zoom:jt,tn.scale(Mt)/tn.scale(jt)},getScaleZoom:function(Mt,jt){var tn=this.options.crs;jt=jt===void 0?this._zoom:jt;var gn=tn.zoom(Mt*tn.scale(jt));return isNaN(gn)?1/0:gn},project:function(Mt,jt){return jt=jt===void 0?this._zoom:jt,this.options.crs.latLngToPoint(lr(Mt),jt)},unproject:function(Mt,jt){return jt=jt===void 0?this._zoom:jt,this.options.crs.pointToLatLng(rr(Mt),jt)},layerPointToLatLng:function(Mt){var jt=rr(Mt).add(this.getPixelOrigin());return this.unproject(jt)},latLngToLayerPoint:function(Mt){var jt=this.project(lr(Mt))._round();return jt._subtract(this.getPixelOrigin())},wrapLatLng:function(Mt){return this.options.crs.wrapLatLng(lr(Mt))},wrapLatLngBounds:function(Mt){return this.options.crs.wrapLatLngBounds(Lr(Mt))},distance:function(Mt,jt){return this.options.crs.distance(lr(Mt),lr(jt))},containerPointToLayerPoint:function(Mt){return rr(Mt).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(Mt){return rr(Mt).add(this._getMapPanePos())},containerPointToLatLng:function(Mt){var jt=this.containerPointToLayerPoint(rr(Mt));return this.layerPointToLatLng(jt)},latLngToContainerPoint:function(Mt){return this.layerPointToContainerPoint(this.latLngToLayerPoint(lr(Mt)))},mouseEventToContainerPoint:function(Mt){return Md(Mt,this._container)},mouseEventToLayerPoint:function(Mt){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(Mt))},mouseEventToLatLng:function(Mt){return this.layerPointToLatLng(this.mouseEventToLayerPoint(Mt))},_initContainer:function(Mt){var jt=this._container=fo(Mt);if(jt){if(jt._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Bo(jt,"scroll",this._onScroll,this),this._containerId=Lt(jt)},_initLayout:function(){var Mt=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ai.any3d,No(Mt,"leaflet-container"+(Ai.touch?" leaflet-touch":"")+(Ai.retina?" leaflet-retina":"")+(Ai.ielt9?" leaflet-oldie":"")+(Ai.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var jt=Li(Mt,"position");jt!=="absolute"&&jt!=="relative"&&jt!=="fixed"&&jt!=="sticky"&&(Mt.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var Mt=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qs(this._mapPane,new Tr(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(No(Mt.markerPane,"leaflet-zoom-hide"),No(Mt.shadowPane,"leaflet-zoom-hide"))},_resetView:function(Mt,jt,tn){Qs(this._mapPane,new Tr(0,0));var gn=!this._loaded;this._loaded=!0,jt=this._limitZoom(jt),this.fire("viewprereset");var $n=this._zoom!==jt;this._moveStart($n,tn)._move(Mt,jt)._moveEnd($n),this.fire("viewreset"),gn&&this.fire("load")},_moveStart:function(Mt,jt){return Mt&&this.fire("zoomstart"),jt||this.fire("movestart"),this},_move:function(Mt,jt,tn,gn){jt===void 0&&(jt=this._zoom);var $n=this._zoom!==jt;return this._zoom=jt,this._lastCenter=Mt,this._pixelOrigin=this._getNewPixelOrigin(Mt),gn?tn&&tn.pinch&&this.fire("zoom",tn):(($n||tn&&tn.pinch)&&this.fire("zoom",tn),this.fire("move",tn)),this},_moveEnd:function(Mt){return Mt&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return pn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(Mt){Qs(this._mapPane,this._getMapPanePos().subtract(Mt))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(Mt){this._targets={},this._targets[Lt(this._container)]=this;var jt=Mt?co:Bo;jt(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&jt(window,"resize",this._onResize,this),Ai.any3d&&this.options.transform3DLimit&&(Mt?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){pn(this._resizeRequest),this._resizeRequest=Ln(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var Mt=this._getMapPanePos();Math.max(Math.abs(Mt.x),Math.abs(Mt.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(Mt,jt){for(var tn=[],gn,$n=jt==="mouseout"||jt==="mouseover",tr=Mt.target||Mt.srcElement,Ir=!1;tr;){if(gn=this._targets[Lt(tr)],gn&&(jt==="click"||jt==="preclick")&&this._draggableMoved(gn)){Ir=!0;break}if(gn&&gn.listens(jt,!0)&&($n&&!Al(tr,Mt)||(tn.push(gn),$n))||tr===this._container)break;tr=tr.parentNode}return!tn.length&&!Ir&&!$n&&this.listens(jt,!0)&&(tn=[this]),tn},_isClickDisabled:function(Mt){for(;Mt&&Mt!==this._container;){if(Mt._leaflet_disable_click)return!0;Mt=Mt.parentNode}},_handleDOMEvent:function(Mt){var jt=Mt.target||Mt.srcElement;if(!(!this._loaded||jt._leaflet_disable_events||Mt.type==="click"&&this._isClickDisabled(jt))){var tn=Mt.type;tn==="mousedown"&&bc(jt),this._fireDOMEvent(Mt,tn)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(Mt,jt,tn){if(Mt.type==="click"){var gn=bt({},Mt);gn.type="preclick",this._fireDOMEvent(gn,gn.type,tn)}var $n=this._findEventTargets(Mt,jt);if(tn){for(var tr=[],Ir=0;Ir<tn.length;Ir++)tn[Ir].listens(jt,!0)&&tr.push(tn[Ir]);$n=tr.concat($n)}if(!!$n.length){jt==="contextmenu"&&da(Mt);var Xr=$n[0],ii={originalEvent:Mt};if(Mt.type!=="keypress"&&Mt.type!=="keydown"&&Mt.type!=="keyup"){var yi=Xr.getLatLng&&(!Xr._radius||Xr._radius<=10);ii.containerPoint=yi?this.latLngToContainerPoint(Xr.getLatLng()):this.mouseEventToContainerPoint(Mt),ii.layerPoint=this.containerPointToLayerPoint(ii.containerPoint),ii.latlng=yi?Xr.getLatLng():this.layerPointToLatLng(ii.layerPoint)}for(Ir=0;Ir<$n.length;Ir++)if($n[Ir].fire(jt,ii,!0),ii.originalEvent._stopped||$n[Ir].options.bubblingMouseEvents===!1&&on(this._mouseEvents,jt)!==-1)return}},_draggableMoved:function(Mt){return Mt=Mt.dragging&&Mt.dragging.enabled()?Mt:this,Mt.dragging&&Mt.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var Mt=0,jt=this._handlers.length;Mt<jt;Mt++)this._handlers[Mt].disable()},whenReady:function(Mt,jt){return this._loaded?Mt.call(jt||this,{target:this}):this.on("load",Mt,jt),this},_getMapPanePos:function(){return Ho(this._mapPane)||new Tr(0,0)},_moved:function(){var Mt=this._getMapPanePos();return Mt&&!Mt.equals([0,0])},_getTopLeftPoint:function(Mt,jt){var tn=Mt&&jt!==void 0?this._getNewPixelOrigin(Mt,jt):this.getPixelOrigin();return tn.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(Mt,jt){var tn=this.getSize()._divideBy(2);return this.project(Mt,jt)._subtract(tn)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(Mt,jt,tn){var gn=this._getNewPixelOrigin(tn,jt);return this.project(Mt,jt)._subtract(gn)},_latLngBoundsToNewLayerBounds:function(Mt,jt,tn){var gn=this._getNewPixelOrigin(tn,jt);return fr([this.project(Mt.getSouthWest(),jt)._subtract(gn),this.project(Mt.getNorthWest(),jt)._subtract(gn),this.project(Mt.getSouthEast(),jt)._subtract(gn),this.project(Mt.getNorthEast(),jt)._subtract(gn)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(Mt){return this.latLngToLayerPoint(Mt).subtract(this._getCenterLayerPoint())},_limitCenter:function(Mt,jt,tn){if(!tn)return Mt;var gn=this.project(Mt,jt),$n=this.getSize().divideBy(2),tr=new wr(gn.subtract($n),gn.add($n)),Ir=this._getBoundsOffset(tr,tn,jt);return Math.abs(Ir.x)<=1&&Math.abs(Ir.y)<=1?Mt:this.unproject(gn.add(Ir),jt)},_limitOffset:function(Mt,jt){if(!jt)return Mt;var tn=this.getPixelBounds(),gn=new wr(tn.min.add(Mt),tn.max.add(Mt));return Mt.add(this._getBoundsOffset(gn,jt))},_getBoundsOffset:function(Mt,jt,tn){var gn=fr(this.project(jt.getNorthEast(),tn),this.project(jt.getSouthWest(),tn)),$n=gn.min.subtract(Mt.min),tr=gn.max.subtract(Mt.max),Ir=this._rebound($n.x,-tr.x),Xr=this._rebound($n.y,-tr.y);return new Tr(Ir,Xr)},_rebound:function(Mt,jt){return Mt+jt>0?Math.round(Mt-jt)/2:Math.max(0,Math.ceil(Mt))-Math.max(0,Math.floor(jt))},_limitZoom:function(Mt){var jt=this.getMinZoom(),tn=this.getMaxZoom(),gn=Ai.any3d?this.options.zoomSnap:1;return gn&&(Mt=Math.round(Mt/gn)*gn),Math.max(jt,Math.min(tn,Mt))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){go(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(Mt,jt){var tn=this._getCenterOffset(Mt)._trunc();return(jt&&jt.animate)!==!0&&!this.getSize().contains(tn)?!1:(this.panBy(tn,jt),!0)},_createAnimProxy:function(){var Mt=this._proxy=ao("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(Mt),this.on("zoomanim",function(jt){var tn=ra,gn=this._proxy.style[tn];Rl(this._proxy,this.project(jt.center,jt.zoom),this.getZoomScale(jt.zoom,1)),gn===this._proxy.style[tn]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Sr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var Mt=this.getCenter(),jt=this.getZoom();Rl(this._proxy,this.project(Mt,jt),this.getZoomScale(jt,1))},_catchTransitionEnd:function(Mt){this._animatingZoom&&Mt.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(Mt,jt,tn){if(this._animatingZoom)return!0;if(tn=tn||{},!this._zoomAnimated||tn.animate===!1||this._nothingToAnimate()||Math.abs(jt-this._zoom)>this.options.zoomAnimationThreshold)return!1;var gn=this.getZoomScale(jt),$n=this._getCenterOffset(Mt)._divideBy(1-1/gn);return tn.animate!==!0&&!this.getSize().contains($n)?!1:(Ln(function(){this._moveStart(!0,!1)._animateZoom(Mt,jt,!0)},this),!0)},_animateZoom:function(Mt,jt,tn,gn){!this._mapPane||(tn&&(this._animatingZoom=!0,this._animateToCenter=Mt,this._animateToZoom=jt,No(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:Mt,zoom:jt,noUpdate:gn}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Et(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&go(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Pu(Mt,jt){return new Fo(Mt,jt)}var ba=yn.extend({options:{position:"topright"},initialize:function(Mt){Jt(this,Mt)},getPosition:function(){return this.options.position},setPosition:function(Mt){var jt=this._map;return jt&&jt.removeControl(this),this.options.position=Mt,jt&&jt.addControl(this),this},getContainer:function(){return this._container},addTo:function(Mt){this.remove(),this._map=Mt;var jt=this._container=this.onAdd(Mt),tn=this.getPosition(),gn=Mt._controlCorners[tn];return No(jt,"leaflet-control"),tn.indexOf("bottom")!==-1?gn.insertBefore(jt,gn.firstChild):gn.appendChild(jt),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Sr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(Mt){this._map&&Mt&&Mt.screenX>0&&Mt.screenY>0&&this._map.getContainer().focus()}}),eh=function(Mt){return new ba(Mt)};Fo.include({addControl:function(Mt){return Mt.addTo(this),this},removeControl:function(Mt){return Mt.remove(),this},_initControlPos:function(){var Mt=this._controlCorners={},jt="leaflet-",tn=this._controlContainer=ao("div",jt+"control-container",this._container);function gn($n,tr){var Ir=jt+$n+" "+jt+tr;Mt[$n+tr]=ao("div",Ir,tn)}gn("top","left"),gn("top","right"),gn("bottom","left"),gn("bottom","right")},_clearControlPos:function(){for(var Mt in this._controlCorners)Sr(this._controlCorners[Mt]);Sr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var th=ba.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(Mt,jt,tn,gn){return tn<gn?-1:gn<tn?1:0}},initialize:function(Mt,jt,tn){Jt(this,tn),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var gn in Mt)this._addLayer(Mt[gn],gn);for(gn in jt)this._addLayer(jt[gn],gn,!0)},onAdd:function(Mt){this._initLayout(),this._update(),this._map=Mt,Mt.on("zoomend",this._checkDisabledLayers,this);for(var jt=0;jt<this._layers.length;jt++)this._layers[jt].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(Mt){return ba.prototype.addTo.call(this,Mt),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var Mt=0;Mt<this._layers.length;Mt++)this._layers[Mt].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(Mt,jt){return this._addLayer(Mt,jt),this._map?this._update():this},addOverlay:function(Mt,jt){return this._addLayer(Mt,jt,!0),this._map?this._update():this},removeLayer:function(Mt){Mt.off("add remove",this._onLayerChange,this);var jt=this._getLayer(Lt(Mt));return jt&&this._layers.splice(this._layers.indexOf(jt),1),this._map?this._update():this},expand:function(){No(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var Mt=this._map.getSize().y-(this._container.offsetTop+50);return Mt<this._section.clientHeight?(No(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=Mt+"px"):go(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return go(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var Mt="leaflet-control-layers",jt=this._container=ao("div",Mt),tn=this.options.collapsed;jt.setAttribute("aria-haspopup",!0),Nl(jt),Qu(jt);var gn=this._section=ao("section",Mt+"-list");tn&&(this._map.on("click",this.collapse,this),Bo(jt,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var $n=this._layersLink=ao("a",Mt+"-toggle",jt);$n.href="#",$n.title="Layers",$n.setAttribute("role","button"),Bo($n,{keydown:function(tr){tr.keyCode===13&&this._expandSafely()},click:function(tr){da(tr),this._expandSafely()}},this),tn||this.expand(),this._baseLayersList=ao("div",Mt+"-base",gn),this._separator=ao("div",Mt+"-separator",gn),this._overlaysList=ao("div",Mt+"-overlays",gn),jt.appendChild(gn)},_getLayer:function(Mt){for(var jt=0;jt<this._layers.length;jt++)if(this._layers[jt]&&Lt(this._layers[jt].layer)===Mt)return this._layers[jt]},_addLayer:function(Mt,jt,tn){this._map&&Mt.on("add remove",this._onLayerChange,this),this._layers.push({layer:Mt,name:jt,overlay:tn}),this.options.sortLayers&&this._layers.sort(Et(function(gn,$n){return this.options.sortFunction(gn.layer,$n.layer,gn.name,$n.name)},this)),this.options.autoZIndex&&Mt.setZIndex&&(this._lastZIndex++,Mt.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ml(this._baseLayersList),ml(this._overlaysList),this._layerControlInputs=[];var Mt,jt,tn,gn,$n=0;for(tn=0;tn<this._layers.length;tn++)gn=this._layers[tn],this._addItem(gn),jt=jt||gn.overlay,Mt=Mt||!gn.overlay,$n+=gn.overlay?0:1;return this.options.hideSingleBase&&(Mt=Mt&&$n>1,this._baseLayersList.style.display=Mt?"":"none"),this._separator.style.display=jt&&Mt?"":"none",this},_onLayerChange:function(Mt){this._handlingClick||this._update();var jt=this._getLayer(Lt(Mt.target)),tn=jt.overlay?Mt.type==="add"?"overlayadd":"overlayremove":Mt.type==="add"?"baselayerchange":null;tn&&this._map.fire(tn,jt)},_createRadioElement:function(Mt,jt){var tn='<input type="radio" class="leaflet-control-layers-selector" name="'+Mt+'"'+(jt?' checked="checked"':"")+"/>",gn=document.createElement("div");return gn.innerHTML=tn,gn.firstChild},_addItem:function(Mt){var jt=document.createElement("label"),tn=this._map.hasLayer(Mt.layer),gn;Mt.overlay?(gn=document.createElement("input"),gn.type="checkbox",gn.className="leaflet-control-layers-selector",gn.defaultChecked=tn):gn=this._createRadioElement("leaflet-base-layers_"+Lt(this),tn),this._layerControlInputs.push(gn),gn.layerId=Lt(Mt.layer),Bo(gn,"click",this._onInputClick,this);var $n=document.createElement("span");$n.innerHTML=" "+Mt.name;var tr=document.createElement("span");jt.appendChild(tr),tr.appendChild(gn),tr.appendChild($n);var Ir=Mt.overlay?this._overlaysList:this._baseLayersList;return Ir.appendChild(jt),this._checkDisabledLayers(),jt},_onInputClick:function(){var Mt=this._layerControlInputs,jt,tn,gn=[],$n=[];this._handlingClick=!0;for(var tr=Mt.length-1;tr>=0;tr--)jt=Mt[tr],tn=this._getLayer(jt.layerId).layer,jt.checked?gn.push(tn):jt.checked||$n.push(tn);for(tr=0;tr<$n.length;tr++)this._map.hasLayer($n[tr])&&this._map.removeLayer($n[tr]);for(tr=0;tr<gn.length;tr++)this._map.hasLayer(gn[tr])||this._map.addLayer(gn[tr]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var Mt=this._layerControlInputs,jt,tn,gn=this._map.getZoom(),$n=Mt.length-1;$n>=0;$n--)jt=Mt[$n],tn=this._getLayer(jt.layerId).layer,jt.disabled=tn.options.minZoom!==void 0&&gn<tn.options.minZoom||tn.options.maxZoom!==void 0&&gn>tn.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var Mt=this._section;Bo(Mt,"click",da),this.expand(),setTimeout(function(){co(Mt,"click",da)})}}),au=function(Mt,jt,tn){return new th(Mt,jt,tn)},nh=ba.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(Mt){var jt="leaflet-control-zoom",tn=ao("div",jt+" leaflet-bar"),gn=this.options;return this._zoomInButton=this._createButton(gn.zoomInText,gn.zoomInTitle,jt+"-in",tn,this._zoomIn),this._zoomOutButton=this._createButton(gn.zoomOutText,gn.zoomOutTitle,jt+"-out",tn,this._zoomOut),this._updateDisabled(),Mt.on("zoomend zoomlevelschange",this._updateDisabled,this),tn},onRemove:function(Mt){Mt.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(Mt){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(Mt.shiftKey?3:1))},_zoomOut:function(Mt){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(Mt.shiftKey?3:1))},_createButton:function(Mt,jt,tn,gn,$n){var tr=ao("a",tn,gn);return tr.innerHTML=Mt,tr.href="#",tr.title=jt,tr.setAttribute("role","button"),tr.setAttribute("aria-label",jt),Nl(tr),Bo(tr,"click",Nc),Bo(tr,"click",$n,this),Bo(tr,"click",this._refocusOnMap,this),tr},_updateDisabled:function(){var Mt=this._map,jt="leaflet-disabled";go(this._zoomInButton,jt),go(this._zoomOutButton,jt),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||Mt._zoom===Mt.getMinZoom())&&(No(this._zoomOutButton,jt),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||Mt._zoom===Mt.getMaxZoom())&&(No(this._zoomInButton,jt),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fo.mergeOptions({zoomControl:!0}),Fo.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new nh,this.addControl(this.zoomControl))});var $d=function(Mt){return new nh(Mt)},xc=ba.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(Mt){var jt="leaflet-control-scale",tn=ao("div",jt),gn=this.options;return this._addScales(gn,jt+"-line",tn),Mt.on(gn.updateWhenIdle?"moveend":"move",this._update,this),Mt.whenReady(this._update,this),tn},onRemove:function(Mt){Mt.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(Mt,jt,tn){Mt.metric&&(this._mScale=ao("div",jt,tn)),Mt.imperial&&(this._iScale=ao("div",jt,tn))},_update:function(){var Mt=this._map,jt=Mt.getSize().y/2,tn=Mt.distance(Mt.containerPointToLatLng([0,jt]),Mt.containerPointToLatLng([this.options.maxWidth,jt]));this._updateScales(tn)},_updateScales:function(Mt){this.options.metric&&Mt&&this._updateMetric(Mt),this.options.imperial&&Mt&&this._updateImperial(Mt)},_updateMetric:function(Mt){var jt=this._getRoundNum(Mt),tn=jt<1e3?jt+" m":jt/1e3+" km";this._updateScale(this._mScale,tn,jt/Mt)},_updateImperial:function(Mt){var jt=Mt*3.2808399,tn,gn,$n;jt>5280?(tn=jt/5280,gn=this._getRoundNum(tn),this._updateScale(this._iScale,gn+" mi",gn/tn)):($n=this._getRoundNum(jt),this._updateScale(this._iScale,$n+" ft",$n/jt))},_updateScale:function(Mt,jt,tn){Mt.style.width=Math.round(this.options.maxWidth*tn)+"px",Mt.innerHTML=jt},_getRoundNum:function(Mt){var jt=Math.pow(10,(Math.floor(Mt)+"").length-1),tn=Mt/jt;return tn=tn>=10?10:tn>=5?5:tn>=3?3:tn>=2?2:1,jt*tn}}),Rd=function(Mt){return new xc(Mt)},td='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kh=ba.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ai.inlineSvg?td+" ":"")+"Leaflet</a>"},initialize:function(Mt){Jt(this,Mt),this._attributions={}},onAdd:function(Mt){Mt.attributionControl=this,this._container=ao("div","leaflet-control-attribution"),Nl(this._container);for(var jt in Mt._layers)Mt._layers[jt].getAttribution&&this.addAttribution(Mt._layers[jt].getAttribution());return this._update(),Mt.on("layeradd",this._addAttribution,this),this._container},onRemove:function(Mt){Mt.off("layeradd",this._addAttribution,this)},_addAttribution:function(Mt){Mt.layer.getAttribution&&(this.addAttribution(Mt.layer.getAttribution()),Mt.layer.once("remove",function(){this.removeAttribution(Mt.layer.getAttribution())},this))},setPrefix:function(Mt){return this.options.prefix=Mt,this._update(),this},addAttribution:function(Mt){return Mt?(this._attributions[Mt]||(this._attributions[Mt]=0),this._attributions[Mt]++,this._update(),this):this},removeAttribution:function(Mt){return Mt?(this._attributions[Mt]&&(this._attributions[Mt]--,this._update()),this):this},_update:function(){if(!!this._map){var Mt=[];for(var jt in this._attributions)this._attributions[jt]&&Mt.push(jt);var tn=[];this.options.prefix&&tn.push(this.options.prefix),Mt.length&&tn.push(Mt.join(", ")),this._container.innerHTML=tn.join(' <span aria-hidden="true">|</span> ')}}});Fo.mergeOptions({attributionControl:!0}),Fo.addInitHook(function(){this.options.attributionControl&&new kh().addTo(this)});var nd=function(Mt){return new kh(Mt)};ba.Layers=th,ba.Zoom=nh,ba.Scale=xc,ba.Attribution=kh,eh.layers=au,eh.zoom=$d,eh.scale=Rd,eh.attribution=nd;var Ys=yn.extend({initialize:function(Mt){this._map=Mt},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ys.addTo=function(Mt,jt){return Mt.addHandler(jt,this),this};var Dc={Events:vn},Qa=Ai.touch?"touchstart mousedown":"mousedown",Ga=yr.extend({options:{clickTolerance:3},initialize:function(Mt,jt,tn,gn){Jt(this,gn),this._element=Mt,this._dragStartTarget=jt||Mt,this._preventOutline=tn},enable:function(){this._enabled||(Bo(this._dragStartTarget,Qa,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Ga._dragging===this&&this.finishDrag(!0),co(this._dragStartTarget,Qa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(Mt){if(!!this._enabled&&(this._moved=!1,!_c(this._element,"leaflet-zoom-anim"))){if(Mt.touches&&Mt.touches.length!==1){Ga._dragging===this&&this.finishDrag();return}if(!(Ga._dragging||Mt.shiftKey||Mt.which!==1&&Mt.button!==1&&!Mt.touches)&&(Ga._dragging=this,this._preventOutline&&bc(this._element),yl(),jo(),!this._moving)){this.fire("down");var jt=Mt.touches?Mt.touches[0]:Mt,tn=ku(this._element);this._startPoint=new Tr(jt.clientX,jt.clientY),this._startPos=Ho(this._element),this._parentScale=Au(tn);var gn=Mt.type==="mousedown";Bo(document,gn?"mousemove":"touchmove",this._onMove,this),Bo(document,gn?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(Mt){if(!!this._enabled){if(Mt.touches&&Mt.touches.length>1){this._moved=!0;return}var jt=Mt.touches&&Mt.touches.length===1?Mt.touches[0]:Mt,tn=new Tr(jt.clientX,jt.clientY)._subtract(this._startPoint);!tn.x&&!tn.y||Math.abs(tn.x)+Math.abs(tn.y)<this.options.clickTolerance||(tn.x/=this._parentScale.x,tn.y/=this._parentScale.y,da(Mt),this._moved||(this.fire("dragstart"),this._moved=!0,No(document.body,"leaflet-dragging"),this._lastTarget=Mt.target||Mt.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),No(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(tn),this._moving=!0,this._lastEvent=Mt,this._updatePosition())}},_updatePosition:function(){var Mt={originalEvent:this._lastEvent};this.fire("predrag",Mt),Qs(this._element,this._newPos),this.fire("drag",Mt)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(Mt){go(document.body,"leaflet-dragging"),this._lastTarget&&(go(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),co(document,"mousemove touchmove",this._onMove,this),co(document,"mouseup touchend touchcancel",this._onUp,this),ja(),la(),this._moved&&this._moving&&this.fire("dragend",{noInertia:Mt,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ga._dragging=!1}});function Ll(Mt,jt){if(!jt||!Mt.length)return Mt.slice();var tn=jt*jt;return Mt=oc(Mt,tn),Mt=wp(Mt,tn),Mt}function xo(Mt,jt,tn){return Math.sqrt(Ko(Mt,jt,tn,!0))}function Ef(Mt,jt,tn){return Ko(Mt,jt,tn)}function wp(Mt,jt){var tn=Mt.length,gn=typeof Uint8Array!=void 0+""?Uint8Array:Array,$n=new gn(tn);$n[0]=$n[tn-1]=1,rh(Mt,$n,jt,0,tn-1);var tr,Ir=[];for(tr=0;tr<tn;tr++)$n[tr]&&Ir.push(Mt[tr]);return Ir}function rh(Mt,jt,tn,gn,$n){var tr=0,Ir,Xr,ii;for(Xr=gn+1;Xr<=$n-1;Xr++)ii=Ko(Mt[Xr],Mt[gn],Mt[$n],!0),ii>tr&&(Ir=Xr,tr=ii);tr>tn&&(jt[Ir]=1,rh(Mt,jt,tn,gn,Ir),rh(Mt,jt,tn,Ir,$n))}function oc(Mt,jt){for(var tn=[Mt[0]],gn=1,$n=0,tr=Mt.length;gn<tr;gn++)rd(Mt[gn],Mt[$n])>jt&&(tn.push(Mt[gn]),$n=gn);return $n<tr-1&&tn.push(Mt[tr-1]),tn}var ql;function vl(Mt,jt,tn,gn,$n){var tr=gn?ql:el(Mt,tn),Ir=el(jt,tn),Xr,ii,yi;for(ql=Ir;;){if(!(tr|Ir))return[Mt,jt];if(tr&Ir)return!1;Xr=tr||Ir,ii=Wa(Mt,jt,Xr,tn,$n),yi=el(ii,tn),Xr===tr?(Mt=ii,tr=yi):(jt=ii,Ir=yi)}}function Wa(Mt,jt,tn,gn,$n){var tr=jt.x-Mt.x,Ir=jt.y-Mt.y,Xr=gn.min,ii=gn.max,yi,Gi;return tn&8?(yi=Mt.x+tr*(ii.y-Mt.y)/Ir,Gi=ii.y):tn&4?(yi=Mt.x+tr*(Xr.y-Mt.y)/Ir,Gi=Xr.y):tn&2?(yi=ii.x,Gi=Mt.y+Ir*(ii.x-Mt.x)/tr):tn&1&&(yi=Xr.x,Gi=Mt.y+Ir*(Xr.x-Mt.x)/tr),new Tr(yi,Gi,$n)}function el(Mt,jt){var tn=0;return Mt.x<jt.min.x?tn|=1:Mt.x>jt.max.x&&(tn|=2),Mt.y<jt.min.y?tn|=4:Mt.y>jt.max.y&&(tn|=8),tn}function rd(Mt,jt){var tn=jt.x-Mt.x,gn=jt.y-Mt.y;return tn*tn+gn*gn}function Ko(Mt,jt,tn,gn){var $n=jt.x,tr=jt.y,Ir=tn.x-$n,Xr=tn.y-tr,ii=Ir*Ir+Xr*Xr,yi;return ii>0&&(yi=((Mt.x-$n)*Ir+(Mt.y-tr)*Xr)/ii,yi>1?($n=tn.x,tr=tn.y):yi>0&&($n+=Ir*yi,tr+=Xr*yi)),Ir=Mt.x-$n,Xr=Mt.y-tr,gn?Ir*Ir+Xr*Xr:new Tr($n,tr)}function Zt(Mt){return!sn(Mt[0])||typeof Mt[0][0]!="object"&&typeof Mt[0][0]<"u"}function dn(Mt){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Zt(Mt)}function Mn(Mt,jt){var tn,gn,$n,tr,Ir,Xr,ii,yi;if(!Mt||Mt.length===0)throw new Error("latlngs not passed");Zt(Mt)||(console.warn("latlngs are not flat! Only the first ring will be used"),Mt=Mt[0]);var Gi=[];for(var Oo in Mt)Gi.push(jt.project(lr(Mt[Oo])));var ps=Gi.length;for(tn=0,gn=0;tn<ps-1;tn++)gn+=Gi[tn].distanceTo(Gi[tn+1])/2;if(gn===0)yi=Gi[0];else for(tn=0,tr=0;tn<ps-1;tn++)if(Ir=Gi[tn],Xr=Gi[tn+1],$n=Ir.distanceTo(Xr),tr+=$n,tr>gn){ii=(tr-gn)/$n,yi=[Xr.x-ii*(Xr.x-Ir.x),Xr.y-ii*(Xr.y-Ir.y)];break}return jt.unproject(rr(yi))}var Kn={__proto__:null,simplify:Ll,pointToSegmentDistance:xo,closestPointOnSegment:Ef,clipSegment:vl,_getEdgeIntersection:Wa,_getBitCode:el,_sqClosestPointOnSegment:Ko,isFlat:Zt,_flat:dn,polylineCenter:Mn};function dr(Mt,jt,tn){var gn,$n=[1,4,2,8],tr,Ir,Xr,ii,yi,Gi,Oo,ps;for(tr=0,Gi=Mt.length;tr<Gi;tr++)Mt[tr]._code=el(Mt[tr],jt);for(Xr=0;Xr<4;Xr++){for(Oo=$n[Xr],gn=[],tr=0,Gi=Mt.length,Ir=Gi-1;tr<Gi;Ir=tr++)ii=Mt[tr],yi=Mt[Ir],ii._code&Oo?yi._code&Oo||(ps=Wa(yi,ii,Oo,jt,tn),ps._code=el(ps,jt),gn.push(ps)):(yi._code&Oo&&(ps=Wa(yi,ii,Oo,jt,tn),ps._code=el(ps,jt),gn.push(ps)),gn.push(ii));Mt=gn}return Mt}function Hr(Mt,jt){var tn,gn,$n,tr,Ir,Xr,ii,yi,Gi;if(!Mt||Mt.length===0)throw new Error("latlngs not passed");Zt(Mt)||(console.warn("latlngs are not flat! Only the first ring will be used"),Mt=Mt[0]);var Oo=[];for(var ps in Mt)Oo.push(jt.project(lr(Mt[ps])));var Xl=Oo.length;for(Xr=ii=yi=0,tn=0,gn=Xl-1;tn<Xl;gn=tn++)$n=Oo[tn],tr=Oo[gn],Ir=$n.y*tr.x-tr.y*$n.x,ii+=($n.x+tr.x)*Ir,yi+=($n.y+tr.y)*Ir,Xr+=Ir*3;return Xr===0?Gi=Oo[0]:Gi=[ii/Xr,yi/Xr],jt.unproject(rr(Gi))}var ri={__proto__:null,clipPolygon:dr,polygonCenter:Hr},ui={project:function(Mt){return new Tr(Mt.lng,Mt.lat)},unproject:function(Mt){return new Pr(Mt.y,Mt.x)},bounds:new wr([-180,-90],[180,90])},Ri={R:6378137,R_MINOR:6356752314245179e-9,bounds:new wr([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(Mt){var jt=Math.PI/180,tn=this.R,gn=Mt.lat*jt,$n=this.R_MINOR/tn,tr=Math.sqrt(1-$n*$n),Ir=tr*Math.sin(gn),Xr=Math.tan(Math.PI/4-gn/2)/Math.pow((1-Ir)/(1+Ir),tr/2);return gn=-tn*Math.log(Math.max(Xr,1e-10)),new Tr(Mt.lng*jt*tn,gn)},unproject:function(Mt){for(var jt=180/Math.PI,tn=this.R,gn=this.R_MINOR/tn,$n=Math.sqrt(1-gn*gn),tr=Math.exp(-Mt.y/tn),Ir=Math.PI/2-2*Math.atan(tr),Xr=0,ii=.1,yi;Xr<15&&Math.abs(ii)>1e-7;Xr++)yi=$n*Math.sin(Ir),yi=Math.pow((1-yi)/(1+yi),$n/2),ii=Math.PI/2-2*Math.atan(tr*yi)-Ir,Ir+=ii;return new Pr(Ir*jt,Mt.x*jt/tn)}},Ii={__proto__:null,LonLat:ui,Mercator:Ri,SphericalMercator:Er},yo=bt({},sr,{code:"EPSG:3395",projection:Ri,transformation:function(){var Mt=.5/(Math.PI*Ri.R);return Pn(Mt,.5,-Mt,.5)}()}),lo=bt({},sr,{code:"EPSG:4326",projection:ui,transformation:Pn(1/180,1,-1/180,.5)}),Zo=bt({},qr,{projection:ui,transformation:Pn(1,0,-1,0),scale:function(Mt){return Math.pow(2,Mt)},zoom:function(Mt){return Math.log(Mt)/Math.LN2},distance:function(Mt,jt){var tn=jt.lng-Mt.lng,gn=jt.lat-Mt.lat;return Math.sqrt(tn*tn+gn*gn)},infinite:!0});qr.Earth=sr,qr.EPSG3395=yo,qr.EPSG3857=nn,qr.EPSG900913=fn,qr.EPSG4326=lo,qr.Simple=Zo;var Ds=yr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(Mt){return Mt.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(Mt){return Mt&&Mt.removeLayer(this),this},getPane:function(Mt){return this._map.getPane(Mt?this.options[Mt]||Mt:this.options.pane)},addInteractiveTarget:function(Mt){return this._map._targets[Lt(Mt)]=this,this},removeInteractiveTarget:function(Mt){return delete this._map._targets[Lt(Mt)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(Mt){var jt=Mt.target;if(!!jt.hasLayer(this)){if(this._map=jt,this._zoomAnimated=jt._zoomAnimated,this.getEvents){var tn=this.getEvents();jt.on(tn,this),this.once("remove",function(){jt.off(tn,this)},this)}this.onAdd(jt),this.fire("add"),jt.fire("layeradd",{layer:this})}}});Fo.include({addLayer:function(Mt){if(!Mt._layerAdd)throw new Error("The provided object is not a Layer.");var jt=Lt(Mt);return this._layers[jt]?this:(this._layers[jt]=Mt,Mt._mapToAdd=this,Mt.beforeAdd&&Mt.beforeAdd(this),this.whenReady(Mt._layerAdd,Mt),this)},removeLayer:function(Mt){var jt=Lt(Mt);return this._layers[jt]?(this._loaded&&Mt.onRemove(this),delete this._layers[jt],this._loaded&&(this.fire("layerremove",{layer:Mt}),Mt.fire("remove")),Mt._map=Mt._mapToAdd=null,this):this},hasLayer:function(Mt){return Lt(Mt)in this._layers},eachLayer:function(Mt,jt){for(var tn in this._layers)Mt.call(jt,this._layers[tn]);return this},_addLayers:function(Mt){Mt=Mt?sn(Mt)?Mt:[Mt]:[];for(var jt=0,tn=Mt.length;jt<tn;jt++)this.addLayer(Mt[jt])},_addZoomLimit:function(Mt){(!isNaN(Mt.options.maxZoom)||!isNaN(Mt.options.minZoom))&&(this._zoomBoundLayers[Lt(Mt)]=Mt,this._updateZoomLevels())},_removeZoomLimit:function(Mt){var jt=Lt(Mt);this._zoomBoundLayers[jt]&&(delete this._zoomBoundLayers[jt],this._updateZoomLevels())},_updateZoomLevels:function(){var Mt=1/0,jt=-1/0,tn=this._getZoomSpan();for(var gn in this._zoomBoundLayers){var $n=this._zoomBoundLayers[gn].options;Mt=$n.minZoom===void 0?Mt:Math.min(Mt,$n.minZoom),jt=$n.maxZoom===void 0?jt:Math.max(jt,$n.maxZoom)}this._layersMaxZoom=jt===-1/0?void 0:jt,this._layersMinZoom=Mt===1/0?void 0:Mt,tn!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ms=Ds.extend({initialize:function(Mt,jt){Jt(this,jt),this._layers={};var tn,gn;if(Mt)for(tn=0,gn=Mt.length;tn<gn;tn++)this.addLayer(Mt[tn])},addLayer:function(Mt){var jt=this.getLayerId(Mt);return this._layers[jt]=Mt,this._map&&this._map.addLayer(Mt),this},removeLayer:function(Mt){var jt=Mt in this._layers?Mt:this.getLayerId(Mt);return this._map&&this._layers[jt]&&this._map.removeLayer(this._layers[jt]),delete this._layers[jt],this},hasLayer:function(Mt){var jt=typeof Mt=="number"?Mt:this.getLayerId(Mt);return jt in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(Mt){var jt=Array.prototype.slice.call(arguments,1),tn,gn;for(tn in this._layers)gn=this._layers[tn],gn[Mt]&&gn[Mt].apply(gn,jt);return this},onAdd:function(Mt){this.eachLayer(Mt.addLayer,Mt)},onRemove:function(Mt){this.eachLayer(Mt.removeLayer,Mt)},eachLayer:function(Mt,jt){for(var tn in this._layers)Mt.call(jt,this._layers[tn]);return this},getLayer:function(Mt){return this._layers[Mt]},getLayers:function(){var Mt=[];return this.eachLayer(Mt.push,Mt),Mt},setZIndex:function(Mt){return this.invoke("setZIndex",Mt)},getLayerId:function(Mt){return Lt(Mt)}}),wc=function(Mt,jt){return new Ms(Mt,jt)},Yl=Ms.extend({addLayer:function(Mt){return this.hasLayer(Mt)?this:(Mt.addEventParent(this),Ms.prototype.addLayer.call(this,Mt),this.fire("layeradd",{layer:Mt}))},removeLayer:function(Mt){return this.hasLayer(Mt)?(Mt in this._layers&&(Mt=this._layers[Mt]),Mt.removeEventParent(this),Ms.prototype.removeLayer.call(this,Mt),this.fire("layerremove",{layer:Mt})):this},setStyle:function(Mt){return this.invoke("setStyle",Mt)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var Mt=new gr;for(var jt in this._layers){var tn=this._layers[jt];Mt.extend(tn.getBounds?tn.getBounds():tn.getLatLng())}return Mt}}),Bc=function(Mt,jt){return new Yl(Mt,jt)},ca=yn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(Mt){Jt(this,Mt)},createIcon:function(Mt){return this._createIcon("icon",Mt)},createShadow:function(Mt){return this._createIcon("shadow",Mt)},_createIcon:function(Mt,jt){var tn=this._getIconUrl(Mt);if(!tn){if(Mt==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var gn=this._createImg(tn,jt&&jt.tagName==="IMG"?jt:null);return this._setIconStyles(gn,Mt),(this.options.crossOrigin||this.options.crossOrigin==="")&&(gn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),gn},_setIconStyles:function(Mt,jt){var tn=this.options,gn=tn[jt+"Size"];typeof gn=="number"&&(gn=[gn,gn]);var $n=rr(gn),tr=rr(jt==="shadow"&&tn.shadowAnchor||tn.iconAnchor||$n&&$n.divideBy(2,!0));Mt.className="leaflet-marker-"+jt+" "+(tn.className||""),tr&&(Mt.style.marginLeft=-tr.x+"px",Mt.style.marginTop=-tr.y+"px"),$n&&(Mt.style.width=$n.x+"px",Mt.style.height=$n.y+"px")},_createImg:function(Mt,jt){return jt=jt||document.createElement("img"),jt.src=Mt,jt},_getIconUrl:function(Mt){return Ai.retina&&this.options[Mt+"RetinaUrl"]||this.options[Mt+"Url"]}});function od(Mt){return new ca(Mt)}var sd=ca.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(Mt){return typeof sd.imagePath!="string"&&(sd.imagePath=this._detectIconPath()),(this.options.imagePath||sd.imagePath)+ca.prototype._getIconUrl.call(this,Mt)},_stripUrl:function(Mt){var jt=function(tn,gn,$n){var tr=gn.exec(tn);return tr&&tr[$n]};return Mt=jt(Mt,/^url\((['"])?(.+)\1\)$/,2),Mt&&jt(Mt,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var Mt=ao("div","leaflet-default-icon-path",document.body),jt=Li(Mt,"background-image")||Li(Mt,"backgroundImage");if(document.body.removeChild(Mt),jt=this._stripUrl(jt),jt)return jt;var tn=document.querySelector('link[href$="leaflet.css"]');return tn?tn.href.substring(0,tn.href.length-11-1):""}}),Ep=Ys.extend({initialize:function(Mt){this._marker=Mt},addHooks:function(){var Mt=this._marker._icon;this._draggable||(this._draggable=new Ga(Mt,Mt,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),No(Mt,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&go(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(Mt){var jt=this._marker,tn=jt._map,gn=this._marker.options.autoPanSpeed,$n=this._marker.options.autoPanPadding,tr=Ho(jt._icon),Ir=tn.getPixelBounds(),Xr=tn.getPixelOrigin(),ii=fr(Ir.min._subtract(Xr).add($n),Ir.max._subtract(Xr).subtract($n));if(!ii.contains(tr)){var yi=rr((Math.max(ii.max.x,tr.x)-ii.max.x)/(Ir.max.x-ii.max.x)-(Math.min(ii.min.x,tr.x)-ii.min.x)/(Ir.min.x-ii.min.x),(Math.max(ii.max.y,tr.y)-ii.max.y)/(Ir.max.y-ii.max.y)-(Math.min(ii.min.y,tr.y)-ii.min.y)/(Ir.min.y-ii.min.y)).multiplyBy(gn);tn.panBy(yi,{animate:!1}),this._draggable._newPos._add(yi),this._draggable._startPos._add(yi),Qs(jt._icon,this._draggable._newPos),this._onDrag(Mt),this._panRequest=Ln(this._adjustPan.bind(this,Mt))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(Mt){this._marker.options.autoPan&&(pn(this._panRequest),this._panRequest=Ln(this._adjustPan.bind(this,Mt)))},_onDrag:function(Mt){var jt=this._marker,tn=jt._shadow,gn=Ho(jt._icon),$n=jt._map.layerPointToLatLng(gn);tn&&Qs(tn,gn),jt._latlng=$n,Mt.latlng=$n,Mt.oldLatLng=this._oldLatLng,jt.fire("move",Mt).fire("drag",Mt)},_onDragEnd:function(Mt){pn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",Mt)}}),ad=Ds.extend({options:{icon:new sd,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(Mt,jt){Jt(this,jt),this._latlng=lr(Mt)},onAdd:function(Mt){this._zoomAnimated=this._zoomAnimated&&Mt.options.markerZoomAnimation,this._zoomAnimated&&Mt.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(Mt){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&Mt.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(Mt){var jt=this._latlng;return this._latlng=lr(Mt),this.update(),this.fire("move",{oldLatLng:jt,latlng:this._latlng})},setZIndexOffset:function(Mt){return this.options.zIndexOffset=Mt,this.update()},getIcon:function(){return this.options.icon},setIcon:function(Mt){return this.options.icon=Mt,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var Mt=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(Mt)}return this},_initIcon:function(){var Mt=this.options,jt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),tn=Mt.icon.createIcon(this._icon),gn=!1;tn!==this._icon&&(this._icon&&this._removeIcon(),gn=!0,Mt.title&&(tn.title=Mt.title),tn.tagName==="IMG"&&(tn.alt=Mt.alt||"")),No(tn,jt),Mt.keyboard&&(tn.tabIndex="0",tn.setAttribute("role","button")),this._icon=tn,Mt.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bo(tn,"focus",this._panOnFocus,this);var $n=Mt.icon.createShadow(this._shadow),tr=!1;$n!==this._shadow&&(this._removeShadow(),tr=!0),$n&&(No($n,jt),$n.alt=""),this._shadow=$n,Mt.opacity<1&&this._updateOpacity(),gn&&this.getPane().appendChild(this._icon),this._initInteraction(),$n&&tr&&this.getPane(Mt.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&co(this._icon,"focus",this._panOnFocus,this),Sr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Sr(this._shadow),this._shadow=null},_setPos:function(Mt){this._icon&&Qs(this._icon,Mt),this._shadow&&Qs(this._shadow,Mt),this._zIndex=Mt.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(Mt){this._icon&&(this._icon.style.zIndex=this._zIndex+Mt)},_animateZoom:function(Mt){var jt=this._map._latLngToNewLayerPoint(this._latlng,Mt.zoom,Mt.center).round();this._setPos(jt)},_initInteraction:function(){if(!!this.options.interactive&&(No(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ep)){var Mt=this.options.draggable;this.dragging&&(Mt=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ep(this),Mt&&this.dragging.enable()}},setOpacity:function(Mt){return this.options.opacity=Mt,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var Mt=this.options.opacity;this._icon&&mo(this._icon,Mt),this._shadow&&mo(this._shadow,Mt)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var Mt=this._map;if(!!Mt){var jt=this.options.icon.options,tn=jt.iconSize?rr(jt.iconSize):rr(0,0),gn=jt.iconAnchor?rr(jt.iconAnchor):rr(0,0);Mt.panInside(this._latlng,{paddingTopLeft:gn,paddingBottomRight:tn.subtract(gn)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Sf(Mt,jt){return new ad(Mt,jt)}var lu=Ds.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(Mt){this._renderer=Mt.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(Mt){return Jt(this,Mt),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&Mt&&Object.prototype.hasOwnProperty.call(Mt,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nd=lu.extend({options:{fill:!0,radius:10},initialize:function(Mt,jt){Jt(this,jt),this._latlng=lr(Mt),this._radius=this.options.radius},setLatLng:function(Mt){var jt=this._latlng;return this._latlng=lr(Mt),this.redraw(),this.fire("move",{oldLatLng:jt,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(Mt){return this.options.radius=this._radius=Mt,this.redraw()},getRadius:function(){return this._radius},setStyle:function(Mt){var jt=Mt&&Mt.radius||this._radius;return lu.prototype.setStyle.call(this,Mt),this.setRadius(jt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var Mt=this._radius,jt=this._radiusY||Mt,tn=this._clickTolerance(),gn=[Mt+tn,jt+tn];this._pxBounds=new wr(this._point.subtract(gn),this._point.add(gn))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(Mt){return Mt.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bm(Mt,jt){return new Nd(Mt,jt)}var Sp=Nd.extend({initialize:function(Mt,jt,tn){if(typeof jt=="number"&&(jt=bt({},tn,{radius:jt})),Jt(this,jt),this._latlng=lr(Mt),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(Mt){return this._mRadius=Mt,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var Mt=[this._radius,this._radiusY||this._radius];return new gr(this._map.layerPointToLatLng(this._point.subtract(Mt)),this._map.layerPointToLatLng(this._point.add(Mt)))},setStyle:lu.prototype.setStyle,_project:function(){var Mt=this._latlng.lng,jt=this._latlng.lat,tn=this._map,gn=tn.options.crs;if(gn.distance===sr.distance){var $n=Math.PI/180,tr=this._mRadius/sr.R/$n,Ir=tn.project([jt+tr,Mt]),Xr=tn.project([jt-tr,Mt]),ii=Ir.add(Xr).divideBy(2),yi=tn.unproject(ii).lat,Gi=Math.acos((Math.cos(tr*$n)-Math.sin(jt*$n)*Math.sin(yi*$n))/(Math.cos(jt*$n)*Math.cos(yi*$n)))/$n;(isNaN(Gi)||Gi===0)&&(Gi=tr/Math.cos(Math.PI/180*jt)),this._point=ii.subtract(tn.getPixelOrigin()),this._radius=isNaN(Gi)?0:ii.x-tn.project([yi,Mt-Gi]).x,this._radiusY=ii.y-Ir.y}else{var Oo=gn.unproject(gn.project(this._latlng).subtract([this._mRadius,0]));this._point=tn.latLngToLayerPoint(this._latlng),this._radius=this._point.x-tn.latLngToLayerPoint(Oo).x}this._updateBounds()}});function Lg(Mt,jt,tn){return new Sp(Mt,jt,tn)}var Ou=lu.extend({options:{smoothFactor:1,noClip:!1},initialize:function(Mt,jt){Jt(this,jt),this._setLatLngs(Mt)},getLatLngs:function(){return this._latlngs},setLatLngs:function(Mt){return this._setLatLngs(Mt),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(Mt){for(var jt=1/0,tn=null,gn=Ko,$n,tr,Ir=0,Xr=this._parts.length;Ir<Xr;Ir++)for(var ii=this._parts[Ir],yi=1,Gi=ii.length;yi<Gi;yi++){$n=ii[yi-1],tr=ii[yi];var Oo=gn(Mt,$n,tr,!0);Oo<jt&&(jt=Oo,tn=gn(Mt,$n,tr))}return tn&&(tn.distance=Math.sqrt(jt)),tn},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(Mt,jt){return jt=jt||this._defaultShape(),Mt=lr(Mt),jt.push(Mt),this._bounds.extend(Mt),this.redraw()},_setLatLngs:function(Mt){this._bounds=new gr,this._latlngs=this._convertLatLngs(Mt)},_defaultShape:function(){return Zt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(Mt){for(var jt=[],tn=Zt(Mt),gn=0,$n=Mt.length;gn<$n;gn++)tn?(jt[gn]=lr(Mt[gn]),this._bounds.extend(jt[gn])):jt[gn]=this._convertLatLngs(Mt[gn]);return jt},_project:function(){var Mt=new wr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,Mt),this._bounds.isValid()&&Mt.isValid()&&(this._rawPxBounds=Mt,this._updateBounds())},_updateBounds:function(){var Mt=this._clickTolerance(),jt=new Tr(Mt,Mt);!this._rawPxBounds||(this._pxBounds=new wr([this._rawPxBounds.min.subtract(jt),this._rawPxBounds.max.add(jt)]))},_projectLatlngs:function(Mt,jt,tn){var gn=Mt[0]instanceof Pr,$n=Mt.length,tr,Ir;if(gn){for(Ir=[],tr=0;tr<$n;tr++)Ir[tr]=this._map.latLngToLayerPoint(Mt[tr]),tn.extend(Ir[tr]);jt.push(Ir)}else for(tr=0;tr<$n;tr++)this._projectLatlngs(Mt[tr],jt,tn)},_clipPoints:function(){var Mt=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(Mt))){if(this.options.noClip){this._parts=this._rings;return}var jt=this._parts,tn,gn,$n,tr,Ir,Xr,ii;for(tn=0,$n=0,tr=this._rings.length;tn<tr;tn++)for(ii=this._rings[tn],gn=0,Ir=ii.length;gn<Ir-1;gn++)Xr=vl(ii[gn],ii[gn+1],Mt,gn,!0),Xr&&(jt[$n]=jt[$n]||[],jt[$n].push(Xr[0]),(Xr[1]!==ii[gn+1]||gn===Ir-2)&&(jt[$n].push(Xr[1]),$n++))}},_simplifyPoints:function(){for(var Mt=this._parts,jt=this.options.smoothFactor,tn=0,gn=Mt.length;tn<gn;tn++)Mt[tn]=Ll(Mt[tn],jt)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(Mt,jt){var tn,gn,$n,tr,Ir,Xr,ii=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(Mt))return!1;for(tn=0,tr=this._parts.length;tn<tr;tn++)for(Xr=this._parts[tn],gn=0,Ir=Xr.length,$n=Ir-1;gn<Ir;$n=gn++)if(!(!jt&&gn===0)&&xo(Mt,Xr[$n],Xr[gn])<=ii)return!0;return!1}});function Fm(Mt,jt){return new Ou(Mt,jt)}Ou._flat=dn;var ih=Ou.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(Mt){var jt=Ou.prototype._convertLatLngs.call(this,Mt),tn=jt.length;return tn>=2&&jt[0]instanceof Pr&&jt[0].equals(jt[tn-1])&&jt.pop(),jt},_setLatLngs:function(Mt){Ou.prototype._setLatLngs.call(this,Mt),Zt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Zt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var Mt=this._renderer._bounds,jt=this.options.weight,tn=new Tr(jt,jt);if(Mt=new wr(Mt.min.subtract(tn),Mt.max.add(tn)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(Mt))){if(this.options.noClip){this._parts=this._rings;return}for(var gn=0,$n=this._rings.length,tr;gn<$n;gn++)tr=dr(this._rings[gn],Mt,!0),tr.length&&this._parts.push(tr)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(Mt){var jt=!1,tn,gn,$n,tr,Ir,Xr,ii,yi;if(!this._pxBounds||!this._pxBounds.contains(Mt))return!1;for(tr=0,ii=this._parts.length;tr<ii;tr++)for(tn=this._parts[tr],Ir=0,yi=tn.length,Xr=yi-1;Ir<yi;Xr=Ir++)gn=tn[Ir],$n=tn[Xr],gn.y>Mt.y!=$n.y>Mt.y&&Mt.x<($n.x-gn.x)*(Mt.y-gn.y)/($n.y-gn.y)+gn.x&&(jt=!jt);return jt||Ou.prototype._containsPoint.call(this,Mt,!0)}});function zm(Mt,jt){return new ih(Mt,jt)}var Mu=Yl.extend({initialize:function(Mt,jt){Jt(this,jt),this._layers={},Mt&&this.addData(Mt)},addData:function(Mt){var jt=sn(Mt)?Mt:Mt.features,tn,gn,$n;if(jt){for(tn=0,gn=jt.length;tn<gn;tn++)$n=jt[tn],($n.geometries||$n.geometry||$n.features||$n.coordinates)&&this.addData($n);return this}var tr=this.options;if(tr.filter&&!tr.filter(Mt))return this;var Ir=tl(Mt,tr);return Ir?(Ir.feature=Dd(Mt),Ir.defaultOptions=Ir.options,this.resetStyle(Ir),tr.onEachFeature&&tr.onEachFeature(Mt,Ir),this.addLayer(Ir)):this},resetStyle:function(Mt){return Mt===void 0?this.eachLayer(this.resetStyle,this):(Mt.options=bt({},Mt.defaultOptions),this._setLayerStyle(Mt,this.options.style),this)},setStyle:function(Mt){return this.eachLayer(function(jt){this._setLayerStyle(jt,Mt)},this)},_setLayerStyle:function(Mt,jt){Mt.setStyle&&(typeof jt=="function"&&(jt=jt(Mt.feature)),Mt.setStyle(jt))}});function tl(Mt,jt){var tn=Mt.type==="Feature"?Mt.geometry:Mt,gn=tn?tn.coordinates:null,$n=[],tr=jt&&jt.pointToLayer,Ir=jt&&jt.coordsToLatLng||ld,Xr,ii,yi,Gi;if(!gn&&!tn)return null;switch(tn.type){case"Point":return Xr=Ir(gn),Ig(tr,Mt,Xr,jt);case"MultiPoint":for(yi=0,Gi=gn.length;yi<Gi;yi++)Xr=Ir(gn[yi]),$n.push(Ig(tr,Mt,Xr,jt));return new Yl($n);case"LineString":case"MultiLineString":return ii=Dl(gn,tn.type==="LineString"?0:1,Ir),new Ou(ii,jt);case"Polygon":case"MultiPolygon":return ii=Dl(gn,tn.type==="Polygon"?1:2,Ir),new ih(ii,jt);case"GeometryCollection":for(yi=0,Gi=tn.geometries.length;yi<Gi;yi++){var Oo=tl({geometry:tn.geometries[yi],type:"Feature",properties:Mt.properties},jt);Oo&&$n.push(Oo)}return new Yl($n);case"FeatureCollection":for(yi=0,Gi=tn.features.length;yi<Gi;yi++){var ps=tl(tn.features[yi],jt);ps&&$n.push(ps)}return new Yl($n);default:throw new Error("Invalid GeoJSON object.")}}function Ig(Mt,jt,tn,gn){return Mt?Mt(jt,tn):new ad(tn,gn&&gn.markersInheritOptions&&gn)}function ld(Mt){return new Pr(Mt[1],Mt[0],Mt[2])}function Dl(Mt,jt,tn){for(var gn=[],$n=0,tr=Mt.length,Ir;$n<tr;$n++)Ir=jt?Dl(Mt[$n],jt-1,tn):(tn||ld)(Mt[$n]),gn.push(Ir);return gn}function sc(Mt,jt){return Mt=lr(Mt),Mt.alt!==void 0?[Bt(Mt.lng,jt),Bt(Mt.lat,jt),Bt(Mt.alt,jt)]:[Bt(Mt.lng,jt),Bt(Mt.lat,jt)]}function Fc(Mt,jt,tn,gn){for(var $n=[],tr=0,Ir=Mt.length;tr<Ir;tr++)$n.push(jt?Fc(Mt[tr],Zt(Mt[tr])?0:jt-1,tn,gn):sc(Mt[tr],gn));return!jt&&tn&&$n.push($n[0].slice()),$n}function $u(Mt,jt){return Mt.feature?bt({},Mt.feature,{geometry:jt}):Dd(jt)}function Dd(Mt){return Mt.type==="Feature"||Mt.type==="FeatureCollection"?Mt:{type:"Feature",properties:{},geometry:Mt}}var Cf={toGeoJSON:function(Mt){return $u(this,{type:"Point",coordinates:sc(this.getLatLng(),Mt)})}};ad.include(Cf),Sp.include(Cf),Nd.include(Cf),Ou.include({toGeoJSON:function(Mt){var jt=!Zt(this._latlngs),tn=Fc(this._latlngs,jt?1:0,!1,Mt);return $u(this,{type:(jt?"Multi":"")+"LineString",coordinates:tn})}}),ih.include({toGeoJSON:function(Mt){var jt=!Zt(this._latlngs),tn=jt&&!Zt(this._latlngs[0]),gn=Fc(this._latlngs,tn?2:jt?1:0,!0,Mt);return jt||(gn=[gn]),$u(this,{type:(tn?"Multi":"")+"Polygon",coordinates:gn})}}),Ms.include({toMultiPoint:function(Mt){var jt=[];return this.eachLayer(function(tn){jt.push(tn.toGeoJSON(Mt).geometry.coordinates)}),$u(this,{type:"MultiPoint",coordinates:jt})},toGeoJSON:function(Mt){var jt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(jt==="MultiPoint")return this.toMultiPoint(Mt);var tn=jt==="GeometryCollection",gn=[];return this.eachLayer(function($n){if($n.toGeoJSON){var tr=$n.toGeoJSON(Mt);if(tn)gn.push(tr.geometry);else{var Ir=Dd(tr);Ir.type==="FeatureCollection"?gn.push.apply(gn,Ir.features):gn.push(Ir)}}}),tn?$u(this,{geometries:gn,type:"GeometryCollection"}):{type:"FeatureCollection",features:gn}}});function Tf(Mt,jt){return new Mu(Mt,jt)}var Cp=Tf,kf=Ds.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(Mt,jt,tn){this._url=Mt,this._bounds=Lr(jt),Jt(this,tn)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(No(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Sr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(Mt){return this.options.opacity=Mt,this._image&&this._updateOpacity(),this},setStyle:function(Mt){return Mt.opacity&&this.setOpacity(Mt.opacity),this},bringToFront:function(){return this._map&&Nr(this._image),this},bringToBack:function(){return this._map&&ia(this._image),this},setUrl:function(Mt){return this._url=Mt,this._image&&(this._image.src=Mt),this},setBounds:function(Mt){return this._bounds=Lr(Mt),this._map&&this._reset(),this},getEvents:function(){var Mt={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(Mt.zoomanim=this._animateZoom),Mt},setZIndex:function(Mt){return this.options.zIndex=Mt,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var Mt=this._url.tagName==="IMG",jt=this._image=Mt?this._url:ao("img");if(No(jt,"leaflet-image-layer"),this._zoomAnimated&&No(jt,"leaflet-zoom-animated"),this.options.className&&No(jt,this.options.className),jt.onselectstart=Dt,jt.onmousemove=Dt,jt.onload=Et(this.fire,this,"load"),jt.onerror=Et(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(jt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),Mt){this._url=jt.src;return}jt.src=this._url,jt.alt=this.options.alt},_animateZoom:function(Mt){var jt=this._map.getZoomScale(Mt.zoom),tn=this._map._latLngBoundsToNewLayerBounds(this._bounds,Mt.zoom,Mt.center).min;Rl(this._image,tn,jt)},_reset:function(){var Mt=this._image,jt=new wr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),tn=jt.getSize();Qs(Mt,jt.min),Mt.style.width=tn.x+"px",Mt.style.height=tn.y+"px"},_updateOpacity:function(){mo(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var Mt=this.options.errorOverlayUrl;Mt&&this._url!==Mt&&(this._url=Mt,this._image.src=Mt)},getCenter:function(){return this._bounds.getCenter()}}),cd=function(Mt,jt,tn){return new kf(Mt,jt,tn)},Pg=kf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var Mt=this._url.tagName==="VIDEO",jt=this._image=Mt?this._url:ao("video");if(No(jt,"leaflet-image-layer"),this._zoomAnimated&&No(jt,"leaflet-zoom-animated"),this.options.className&&No(jt,this.options.className),jt.onselectstart=Dt,jt.onmousemove=Dt,jt.onloadeddata=Et(this.fire,this,"load"),Mt){for(var tn=jt.getElementsByTagName("source"),gn=[],$n=0;$n<tn.length;$n++)gn.push(tn[$n].src);this._url=tn.length>0?gn:[jt.src];return}sn(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(jt.style,"objectFit")&&(jt.style.objectFit="fill"),jt.autoplay=!!this.options.autoplay,jt.loop=!!this.options.loop,jt.muted=!!this.options.muted,jt.playsInline=!!this.options.playsInline;for(var tr=0;tr<this._url.length;tr++){var Ir=ao("source");Ir.src=this._url[tr],jt.appendChild(Ir)}}});function Og(Mt,jt,tn){return new Pg(Mt,jt,tn)}var Bd=kf.extend({_initImage:function(){var Mt=this._image=this._url;No(Mt,"leaflet-image-layer"),this._zoomAnimated&&No(Mt,"leaflet-zoom-animated"),this.options.className&&No(Mt,this.options.className),Mt.onselectstart=Dt,Mt.onmousemove=Dt}});function Ta(Mt,jt,tn){return new Bd(Mt,jt,tn)}var zc=Ds.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(Mt,jt){Mt&&(Mt instanceof Pr||sn(Mt))?(this._latlng=lr(Mt),Jt(this,jt)):(Jt(this,Mt),this._source=jt),this.options.content&&(this._content=this.options.content)},openOn:function(Mt){return Mt=arguments.length?Mt:this._source._map,Mt.hasLayer(this)||Mt.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(Mt){return this._map?this.close():(arguments.length?this._source=Mt:Mt=this._source,this._prepareOpen(),this.openOn(Mt._map)),this},onAdd:function(Mt){this._zoomAnimated=Mt._zoomAnimated,this._container||this._initLayout(),Mt._fadeAnimated&&mo(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),Mt._fadeAnimated&&mo(this._container,1),this.bringToFront(),this.options.interactive&&(No(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(Mt){Mt._fadeAnimated?(mo(this._container,0),this._removeTimeout=setTimeout(Et(Sr,void 0,this._container),200)):Sr(this._container),this.options.interactive&&(go(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(Mt){return this._latlng=lr(Mt),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(Mt){return this._content=Mt,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var Mt={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(Mt.zoomanim=this._animateZoom),Mt},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nr(this._container),this},bringToBack:function(){return this._map&&ia(this._container),this},_prepareOpen:function(Mt){var jt=this._source;if(!jt._map)return!1;if(jt instanceof Yl){jt=null;var tn=this._source._layers;for(var gn in tn)if(tn[gn]._map){jt=tn[gn];break}if(!jt)return!1;this._source=jt}if(!Mt)if(jt.getCenter)Mt=jt.getCenter();else if(jt.getLatLng)Mt=jt.getLatLng();else if(jt.getBounds)Mt=jt.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(Mt),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var Mt=this._contentNode,jt=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof jt=="string")Mt.innerHTML=jt;else{for(;Mt.hasChildNodes();)Mt.removeChild(Mt.firstChild);Mt.appendChild(jt)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var Mt=this._map.latLngToLayerPoint(this._latlng),jt=rr(this.options.offset),tn=this._getAnchor();this._zoomAnimated?Qs(this._container,Mt.add(tn)):jt=jt.add(Mt).add(tn);var gn=this._containerBottom=-jt.y,$n=this._containerLeft=-Math.round(this._containerWidth/2)+jt.x;this._container.style.bottom=gn+"px",this._container.style.left=$n+"px"}},_getAnchor:function(){return[0,0]}});Fo.include({_initOverlay:function(Mt,jt,tn,gn){var $n=jt;return $n instanceof Mt||($n=new Mt(gn).setContent(jt)),tn&&$n.setLatLng(tn),$n}}),Ds.include({_initOverlay:function(Mt,jt,tn,gn){var $n=tn;return $n instanceof Mt?(Jt($n,gn),$n._source=this):($n=jt&&!gn?jt:new Mt(gn,this),$n.setContent(tn)),$n}});var ul=zc.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(Mt){return Mt=arguments.length?Mt:this._source._map,!Mt.hasLayer(this)&&Mt._popup&&Mt._popup.options.autoClose&&Mt.removeLayer(Mt._popup),Mt._popup=this,zc.prototype.openOn.call(this,Mt)},onAdd:function(Mt){zc.prototype.onAdd.call(this,Mt),Mt.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof lu||this._source.on("preclick",Iu))},onRemove:function(Mt){zc.prototype.onRemove.call(this,Mt),Mt.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof lu||this._source.off("preclick",Iu))},getEvents:function(){var Mt=zc.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(Mt.preclick=this.close),this.options.keepInView&&(Mt.moveend=this._adjustPan),Mt},_initLayout:function(){var Mt="leaflet-popup",jt=this._container=ao("div",Mt+" "+(this.options.className||"")+" leaflet-zoom-animated"),tn=this._wrapper=ao("div",Mt+"-content-wrapper",jt);if(this._contentNode=ao("div",Mt+"-content",tn),Nl(jt),Qu(this._contentNode),Bo(jt,"contextmenu",Iu),this._tipContainer=ao("div",Mt+"-tip-container",jt),this._tip=ao("div",Mt+"-tip",this._tipContainer),this.options.closeButton){var gn=this._closeButton=ao("a",Mt+"-close-button",jt);gn.setAttribute("role","button"),gn.setAttribute("aria-label","Close popup"),gn.href="#close",gn.innerHTML='<span aria-hidden="true">&#215;</span>',Bo(gn,"click",function($n){da($n),this.close()},this)}},_updateLayout:function(){var Mt=this._contentNode,jt=Mt.style;jt.width="",jt.whiteSpace="nowrap";var tn=Mt.offsetWidth;tn=Math.min(tn,this.options.maxWidth),tn=Math.max(tn,this.options.minWidth),jt.width=tn+1+"px",jt.whiteSpace="",jt.height="";var gn=Mt.offsetHeight,$n=this.options.maxHeight,tr="leaflet-popup-scrolled";$n&&gn>$n?(jt.height=$n+"px",No(Mt,tr)):go(Mt,tr),this._containerWidth=this._container.offsetWidth},_animateZoom:function(Mt){var jt=this._map._latLngToNewLayerPoint(this._latlng,Mt.zoom,Mt.center),tn=this._getAnchor();Qs(this._container,jt.add(tn))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var Mt=this._map,jt=parseInt(Li(this._container,"marginBottom"),10)||0,tn=this._container.offsetHeight+jt,gn=this._containerWidth,$n=new Tr(this._containerLeft,-tn-this._containerBottom);$n._add(Ho(this._container));var tr=Mt.layerPointToContainerPoint($n),Ir=rr(this.options.autoPanPadding),Xr=rr(this.options.autoPanPaddingTopLeft||Ir),ii=rr(this.options.autoPanPaddingBottomRight||Ir),yi=Mt.getSize(),Gi=0,Oo=0;tr.x+gn+ii.x>yi.x&&(Gi=tr.x+gn-yi.x+ii.x),tr.x-Gi-Xr.x<0&&(Gi=tr.x-Xr.x),tr.y+tn+ii.y>yi.y&&(Oo=tr.y+tn-yi.y+ii.y),tr.y-Oo-Xr.y<0&&(Oo=tr.y-Xr.y),(Gi||Oo)&&(this.options.keepInView&&(this._autopanning=!0),Mt.fire("autopanstart").panBy([Gi,Oo]))}},_getAnchor:function(){return rr(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tp=function(Mt,jt){return new ul(Mt,jt)};Fo.mergeOptions({closePopupOnClick:!0}),Fo.include({openPopup:function(Mt,jt,tn){return this._initOverlay(ul,Mt,jt,tn).openOn(this),this},closePopup:function(Mt){return Mt=arguments.length?Mt:this._popup,Mt&&Mt.close(),this}}),Ds.include({bindPopup:function(Mt,jt){return this._popup=this._initOverlay(ul,this._popup,Mt,jt),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(Mt){return this._popup&&(this instanceof Yl||(this._popup._source=this),this._popup._prepareOpen(Mt||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(Mt){return this._popup&&this._popup.setContent(Mt),this},getPopup:function(){return this._popup},_openPopup:function(Mt){if(!(!this._popup||!this._map)){Nc(Mt);var jt=Mt.layer||Mt.target;if(this._popup._source===jt&&!(jt instanceof lu)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(Mt.latlng);return}this._popup._source=jt,this.openPopup(Mt.latlng)}},_movePopup:function(Mt){this._popup.setLatLng(Mt.latlng)},_onKeyPress:function(Mt){Mt.originalEvent.keyCode===13&&this._openPopup(Mt)}});var ac=zc.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(Mt){zc.prototype.onAdd.call(this,Mt),this.setOpacity(this.options.opacity),Mt.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(Mt){zc.prototype.onRemove.call(this,Mt),Mt.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var Mt=zc.prototype.getEvents.call(this);return this.options.permanent||(Mt.preclick=this.close),Mt},_initLayout:function(){var Mt="leaflet-tooltip",jt=Mt+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ao("div",jt),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Lt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(Mt){var jt,tn,gn=this._map,$n=this._container,tr=gn.latLngToContainerPoint(gn.getCenter()),Ir=gn.layerPointToContainerPoint(Mt),Xr=this.options.direction,ii=$n.offsetWidth,yi=$n.offsetHeight,Gi=rr(this.options.offset),Oo=this._getAnchor();Xr==="top"?(jt=ii/2,tn=yi):Xr==="bottom"?(jt=ii/2,tn=0):Xr==="center"?(jt=ii/2,tn=yi/2):Xr==="right"?(jt=0,tn=yi/2):Xr==="left"?(jt=ii,tn=yi/2):Ir.x<tr.x?(Xr="right",jt=0,tn=yi/2):(Xr="left",jt=ii+(Gi.x+Oo.x)*2,tn=yi/2),Mt=Mt.subtract(rr(jt,tn,!0)).add(Gi).add(Oo),go($n,"leaflet-tooltip-right"),go($n,"leaflet-tooltip-left"),go($n,"leaflet-tooltip-top"),go($n,"leaflet-tooltip-bottom"),No($n,"leaflet-tooltip-"+Xr),Qs($n,Mt)},_updatePosition:function(){var Mt=this._map.latLngToLayerPoint(this._latlng);this._setPosition(Mt)},setOpacity:function(Mt){this.options.opacity=Mt,this._container&&mo(this._container,Mt)},_animateZoom:function(Mt){var jt=this._map._latLngToNewLayerPoint(this._latlng,Mt.zoom,Mt.center);this._setPosition(jt)},_getAnchor:function(){return rr(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fd=function(Mt,jt){return new ac(Mt,jt)};Fo.include({openTooltip:function(Mt,jt,tn){return this._initOverlay(ac,Mt,jt,tn).openOn(this),this},closeTooltip:function(Mt){return Mt.close(),this}}),Ds.include({bindTooltip:function(Mt,jt){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ac,this._tooltip,Mt,jt),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(Mt){if(!(!Mt&&this._tooltipHandlersAdded)){var jt=Mt?"off":"on",tn={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?tn.add=this._openTooltip:(tn.mouseover=this._openTooltip,tn.mouseout=this.closeTooltip,tn.click=this._openTooltip,this._map?this._addFocusListeners():tn.add=this._addFocusListeners),this._tooltip.options.sticky&&(tn.mousemove=this._moveTooltip),this[jt](tn),this._tooltipHandlersAdded=!Mt}},openTooltip:function(Mt){return this._tooltip&&(this instanceof Yl||(this._tooltip._source=this),this._tooltip._prepareOpen(Mt)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(Mt){return this._tooltip&&this._tooltip.setContent(Mt),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(Mt){var jt=Mt.getElement();jt&&(Bo(jt,"focus",function(){this._tooltip._source=Mt,this.openTooltip()},this),Bo(jt,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(Mt){var jt=Mt.getElement();jt&&jt.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(Mt){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=Mt.layer||Mt.target,this.openTooltip(this._tooltip.options.sticky?Mt.latlng:void 0))},_moveTooltip:function(Mt){var jt=Mt.latlng,tn,gn;this._tooltip.options.sticky&&Mt.originalEvent&&(tn=this._map.mouseEventToContainerPoint(Mt.originalEvent),gn=this._map.containerPointToLayerPoint(tn),jt=this._map.layerPointToLatLng(gn)),this._tooltip.setLatLng(jt)}});var kp=ca.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(Mt){var jt=Mt&&Mt.tagName==="DIV"?Mt:document.createElement("div"),tn=this.options;if(tn.html instanceof Element?(ml(jt),jt.appendChild(tn.html)):jt.innerHTML=tn.html!==!1?tn.html:"",tn.bgPos){var gn=rr(tn.bgPos);jt.style.backgroundPosition=-gn.x+"px "+-gn.y+"px"}return this._setIconStyles(jt,"icon"),jt},createShadow:function(){return null}});function Mg(Mt){return new kp(Mt)}ca.Default=sd;var oh=Ds.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ai.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(Mt){Jt(this,Mt)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(Mt){Mt._addZoomLimit(this)},onRemove:function(Mt){this._removeAllTiles(),Sr(this._container),Mt._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ia(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(Mt){return this.options.opacity=Mt,this._updateOpacity(),this},setZIndex:function(Mt){return this.options.zIndex=Mt,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var Mt=this._clampZoom(this._map.getZoom());Mt!==this._tileZoom&&(this._tileZoom=Mt,this._updateLevels()),this._update()}return this},getEvents:function(){var Mt={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Ot(this._onMoveEnd,this.options.updateInterval,this)),Mt.move=this._onMove),this._zoomAnimated&&(Mt.zoomanim=this._animateZoom),Mt},createTile:function(){return document.createElement("div")},getTileSize:function(){var Mt=this.options.tileSize;return Mt instanceof Tr?Mt:new Tr(Mt,Mt)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(Mt){for(var jt=this.getPane().children,tn=-Mt(-1/0,1/0),gn=0,$n=jt.length,tr;gn<$n;gn++)tr=jt[gn].style.zIndex,jt[gn]!==this._container&&tr&&(tn=Mt(tn,+tr));isFinite(tn)&&(this.options.zIndex=tn+Mt(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!Ai.ielt9){mo(this._container,this.options.opacity);var Mt=+new Date,jt=!1,tn=!1;for(var gn in this._tiles){var $n=this._tiles[gn];if(!(!$n.current||!$n.loaded)){var tr=Math.min(1,(Mt-$n.loaded)/200);mo($n.el,tr),tr<1?jt=!0:($n.active?tn=!0:this._onOpaqueTile($n),$n.active=!0)}}tn&&!this._noPrune&&this._pruneTiles(),jt&&(pn(this._fadeFrame),this._fadeFrame=Ln(this._updateOpacity,this))}},_onOpaqueTile:Dt,_initContainer:function(){this._container||(this._container=ao("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var Mt=this._tileZoom,jt=this.options.maxZoom;if(Mt!==void 0){for(var tn in this._levels)tn=Number(tn),this._levels[tn].el.children.length||tn===Mt?(this._levels[tn].el.style.zIndex=jt-Math.abs(Mt-tn),this._onUpdateLevel(tn)):(Sr(this._levels[tn].el),this._removeTilesAtZoom(tn),this._onRemoveLevel(tn),delete this._levels[tn]);var gn=this._levels[Mt],$n=this._map;return gn||(gn=this._levels[Mt]={},gn.el=ao("div","leaflet-tile-container leaflet-zoom-animated",this._container),gn.el.style.zIndex=jt,gn.origin=$n.project($n.unproject($n.getPixelOrigin()),Mt).round(),gn.zoom=Mt,this._setZoomTransform(gn,$n.getCenter(),$n.getZoom()),Dt(gn.el.offsetWidth),this._onCreateLevel(gn)),this._level=gn,gn}},_onUpdateLevel:Dt,_onRemoveLevel:Dt,_onCreateLevel:Dt,_pruneTiles:function(){if(!!this._map){var Mt,jt,tn=this._map.getZoom();if(tn>this.options.maxZoom||tn<this.options.minZoom){this._removeAllTiles();return}for(Mt in this._tiles)jt=this._tiles[Mt],jt.retain=jt.current;for(Mt in this._tiles)if(jt=this._tiles[Mt],jt.current&&!jt.active){var gn=jt.coords;this._retainParent(gn.x,gn.y,gn.z,gn.z-5)||this._retainChildren(gn.x,gn.y,gn.z,gn.z+2)}for(Mt in this._tiles)this._tiles[Mt].retain||this._removeTile(Mt)}},_removeTilesAtZoom:function(Mt){for(var jt in this._tiles)this._tiles[jt].coords.z===Mt&&this._removeTile(jt)},_removeAllTiles:function(){for(var Mt in this._tiles)this._removeTile(Mt)},_invalidateAll:function(){for(var Mt in this._levels)Sr(this._levels[Mt].el),this._onRemoveLevel(Number(Mt)),delete this._levels[Mt];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(Mt,jt,tn,gn){var $n=Math.floor(Mt/2),tr=Math.floor(jt/2),Ir=tn-1,Xr=new Tr(+$n,+tr);Xr.z=+Ir;var ii=this._tileCoordsToKey(Xr),yi=this._tiles[ii];return yi&&yi.active?(yi.retain=!0,!0):(yi&&yi.loaded&&(yi.retain=!0),Ir>gn?this._retainParent($n,tr,Ir,gn):!1)},_retainChildren:function(Mt,jt,tn,gn){for(var $n=2*Mt;$n<2*Mt+2;$n++)for(var tr=2*jt;tr<2*jt+2;tr++){var Ir=new Tr($n,tr);Ir.z=tn+1;var Xr=this._tileCoordsToKey(Ir),ii=this._tiles[Xr];if(ii&&ii.active){ii.retain=!0;continue}else ii&&ii.loaded&&(ii.retain=!0);tn+1<gn&&this._retainChildren($n,tr,tn+1,gn)}},_resetView:function(Mt){var jt=Mt&&(Mt.pinch||Mt.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),jt,jt)},_animateZoom:function(Mt){this._setView(Mt.center,Mt.zoom,!0,Mt.noUpdate)},_clampZoom:function(Mt){var jt=this.options;return jt.minNativeZoom!==void 0&&Mt<jt.minNativeZoom?jt.minNativeZoom:jt.maxNativeZoom!==void 0&&jt.maxNativeZoom<Mt?jt.maxNativeZoom:Mt},_setView:function(Mt,jt,tn,gn){var $n=Math.round(jt);this.options.maxZoom!==void 0&&$n>this.options.maxZoom||this.options.minZoom!==void 0&&$n<this.options.minZoom?$n=void 0:$n=this._clampZoom($n);var tr=this.options.updateWhenZooming&&$n!==this._tileZoom;(!gn||tr)&&(this._tileZoom=$n,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),$n!==void 0&&this._update(Mt),tn||this._pruneTiles(),this._noPrune=!!tn),this._setZoomTransforms(Mt,jt)},_setZoomTransforms:function(Mt,jt){for(var tn in this._levels)this._setZoomTransform(this._levels[tn],Mt,jt)},_setZoomTransform:function(Mt,jt,tn){var gn=this._map.getZoomScale(tn,Mt.zoom),$n=Mt.origin.multiplyBy(gn).subtract(this._map._getNewPixelOrigin(jt,tn)).round();Ai.any3d?Rl(Mt.el,$n,gn):Qs(Mt.el,$n)},_resetGrid:function(){var Mt=this._map,jt=Mt.options.crs,tn=this._tileSize=this.getTileSize(),gn=this._tileZoom,$n=this._map.getPixelWorldBounds(this._tileZoom);$n&&(this._globalTileRange=this._pxBoundsToTileRange($n)),this._wrapX=jt.wrapLng&&!this.options.noWrap&&[Math.floor(Mt.project([0,jt.wrapLng[0]],gn).x/tn.x),Math.ceil(Mt.project([0,jt.wrapLng[1]],gn).x/tn.y)],this._wrapY=jt.wrapLat&&!this.options.noWrap&&[Math.floor(Mt.project([jt.wrapLat[0],0],gn).y/tn.x),Math.ceil(Mt.project([jt.wrapLat[1],0],gn).y/tn.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(Mt){var jt=this._map,tn=jt._animatingZoom?Math.max(jt._animateToZoom,jt.getZoom()):jt.getZoom(),gn=jt.getZoomScale(tn,this._tileZoom),$n=jt.project(Mt,this._tileZoom).floor(),tr=jt.getSize().divideBy(gn*2);return new wr($n.subtract(tr),$n.add(tr))},_update:function(Mt){var jt=this._map;if(!!jt){var tn=this._clampZoom(jt.getZoom());if(Mt===void 0&&(Mt=jt.getCenter()),this._tileZoom!==void 0){var gn=this._getTiledPixelBounds(Mt),$n=this._pxBoundsToTileRange(gn),tr=$n.getCenter(),Ir=[],Xr=this.options.keepBuffer,ii=new wr($n.getBottomLeft().subtract([Xr,-Xr]),$n.getTopRight().add([Xr,-Xr]));if(!(isFinite($n.min.x)&&isFinite($n.min.y)&&isFinite($n.max.x)&&isFinite($n.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var yi in this._tiles){var Gi=this._tiles[yi].coords;(Gi.z!==this._tileZoom||!ii.contains(new Tr(Gi.x,Gi.y)))&&(this._tiles[yi].current=!1)}if(Math.abs(tn-this._tileZoom)>1){this._setView(Mt,tn);return}for(var Oo=$n.min.y;Oo<=$n.max.y;Oo++)for(var ps=$n.min.x;ps<=$n.max.x;ps++){var Xl=new Tr(ps,Oo);if(Xl.z=this._tileZoom,!!this._isValidTile(Xl)){var sh=this._tiles[this._tileCoordsToKey(Xl)];sh?sh.current=!0:Ir.push(Xl)}}if(Ir.sort(function(Ec,Mf){return Ec.distanceTo(tr)-Mf.distanceTo(tr)}),Ir.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ih=document.createDocumentFragment();for(ps=0;ps<Ir.length;ps++)this._addTile(Ir[ps],Ih);this._level.el.appendChild(Ih)}}}},_isValidTile:function(Mt){var jt=this._map.options.crs;if(!jt.infinite){var tn=this._globalTileRange;if(!jt.wrapLng&&(Mt.x<tn.min.x||Mt.x>tn.max.x)||!jt.wrapLat&&(Mt.y<tn.min.y||Mt.y>tn.max.y))return!1}if(!this.options.bounds)return!0;var gn=this._tileCoordsToBounds(Mt);return Lr(this.options.bounds).overlaps(gn)},_keyToBounds:function(Mt){return this._tileCoordsToBounds(this._keyToTileCoords(Mt))},_tileCoordsToNwSe:function(Mt){var jt=this._map,tn=this.getTileSize(),gn=Mt.scaleBy(tn),$n=gn.add(tn),tr=jt.unproject(gn,Mt.z),Ir=jt.unproject($n,Mt.z);return[tr,Ir]},_tileCoordsToBounds:function(Mt){var jt=this._tileCoordsToNwSe(Mt),tn=new gr(jt[0],jt[1]);return this.options.noWrap||(tn=this._map.wrapLatLngBounds(tn)),tn},_tileCoordsToKey:function(Mt){return Mt.x+":"+Mt.y+":"+Mt.z},_keyToTileCoords:function(Mt){var jt=Mt.split(":"),tn=new Tr(+jt[0],+jt[1]);return tn.z=+jt[2],tn},_removeTile:function(Mt){var jt=this._tiles[Mt];!jt||(Sr(jt.el),delete this._tiles[Mt],this.fire("tileunload",{tile:jt.el,coords:this._keyToTileCoords(Mt)}))},_initTile:function(Mt){No(Mt,"leaflet-tile");var jt=this.getTileSize();Mt.style.width=jt.x+"px",Mt.style.height=jt.y+"px",Mt.onselectstart=Dt,Mt.onmousemove=Dt,Ai.ielt9&&this.options.opacity<1&&mo(Mt,this.options.opacity)},_addTile:function(Mt,jt){var tn=this._getTilePos(Mt),gn=this._tileCoordsToKey(Mt),$n=this.createTile(this._wrapCoords(Mt),Et(this._tileReady,this,Mt));this._initTile($n),this.createTile.length<2&&Ln(Et(this._tileReady,this,Mt,null,$n)),Qs($n,tn),this._tiles[gn]={el:$n,coords:Mt,current:!0},jt.appendChild($n),this.fire("tileloadstart",{tile:$n,coords:Mt})},_tileReady:function(Mt,jt,tn){jt&&this.fire("tileerror",{error:jt,tile:tn,coords:Mt});var gn=this._tileCoordsToKey(Mt);tn=this._tiles[gn],tn&&(tn.loaded=+new Date,this._map._fadeAnimated?(mo(tn.el,0),pn(this._fadeFrame),this._fadeFrame=Ln(this._updateOpacity,this)):(tn.active=!0,this._pruneTiles()),jt||(No(tn.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:tn.el,coords:Mt})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ai.ielt9||!this._map._fadeAnimated?Ln(this._pruneTiles,this):setTimeout(Et(this._pruneTiles,this),250)))},_getTilePos:function(Mt){return Mt.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(Mt){var jt=new Tr(this._wrapX?Rt(Mt.x,this._wrapX):Mt.x,this._wrapY?Rt(Mt.y,this._wrapY):Mt.y);return jt.z=Mt.z,jt},_pxBoundsToTileRange:function(Mt){var jt=this.getTileSize();return new wr(Mt.min.unscaleBy(jt).floor(),Mt.max.unscaleBy(jt).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var Mt in this._tiles)if(!this._tiles[Mt].loaded)return!1;return!0}});function Hm(Mt){return new oh(Mt)}var Ah=oh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(Mt,jt){this._url=Mt,jt=Jt(this,jt),jt.detectRetina&&Ai.retina&&jt.maxZoom>0?(jt.tileSize=Math.floor(jt.tileSize/2),jt.zoomReverse?(jt.zoomOffset--,jt.minZoom=Math.min(jt.maxZoom,jt.minZoom+1)):(jt.zoomOffset++,jt.maxZoom=Math.max(jt.minZoom,jt.maxZoom-1)),jt.minZoom=Math.max(0,jt.minZoom)):jt.zoomReverse?jt.minZoom=Math.min(jt.maxZoom,jt.minZoom):jt.maxZoom=Math.max(jt.minZoom,jt.maxZoom),typeof jt.subdomains=="string"&&(jt.subdomains=jt.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(Mt,jt){return this._url===Mt&&jt===void 0&&(jt=!0),this._url=Mt,jt||this.redraw(),this},createTile:function(Mt,jt){var tn=document.createElement("img");return Bo(tn,"load",Et(this._tileOnLoad,this,jt,tn)),Bo(tn,"error",Et(this._tileOnError,this,jt,tn)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(tn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(tn.referrerPolicy=this.options.referrerPolicy),tn.alt="",tn.src=this.getTileUrl(Mt),tn},getTileUrl:function(Mt){var jt={r:Ai.retina?"@2x":"",s:this._getSubdomain(Mt),x:Mt.x,y:Mt.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var tn=this._globalTileRange.max.y-Mt.y;this.options.tms&&(jt.y=tn),jt["-y"]=tn}return rn(this._url,bt(jt,this.options))},_tileOnLoad:function(Mt,jt){Ai.ielt9?setTimeout(Et(Mt,this,null,jt),0):Mt(null,jt)},_tileOnError:function(Mt,jt,tn){var gn=this.options.errorTileUrl;gn&&jt.getAttribute("src")!==gn&&(jt.src=gn),Mt(tn,jt)},_onTileRemove:function(Mt){Mt.tile.onload=null},_getZoomForUrl:function(){var Mt=this._tileZoom,jt=this.options.maxZoom,tn=this.options.zoomReverse,gn=this.options.zoomOffset;return tn&&(Mt=jt-Mt),Mt+gn},_getSubdomain:function(Mt){var jt=Math.abs(Mt.x+Mt.y)%this.options.subdomains.length;return this.options.subdomains[jt]},_abortLoading:function(){var Mt,jt;for(Mt in this._tiles)if(this._tiles[Mt].coords.z!==this._tileZoom&&(jt=this._tiles[Mt].el,jt.onload=Dt,jt.onerror=Dt,!jt.complete)){jt.src=hn;var tn=this._tiles[Mt].coords;Sr(jt),delete this._tiles[Mt],this.fire("tileabort",{tile:jt,coords:tn})}},_removeTile:function(Mt){var jt=this._tiles[Mt];if(!!jt)return jt.el.setAttribute("src",hn),oh.prototype._removeTile.call(this,Mt)},_tileReady:function(Mt,jt,tn){if(!(!this._map||tn&&tn.getAttribute("src")===hn))return oh.prototype._tileReady.call(this,Mt,jt,tn)}});function Af(Mt,jt){return new Ah(Mt,jt)}var zd=Ah.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(Mt,jt){this._url=Mt;var tn=bt({},this.defaultWmsParams);for(var gn in jt)gn in this.options||(tn[gn]=jt[gn]);jt=Jt(this,jt);var $n=jt.detectRetina&&Ai.retina?2:1,tr=this.getTileSize();tn.width=tr.x*$n,tn.height=tr.y*$n,this.wmsParams=tn},onAdd:function(Mt){this._crs=this.options.crs||Mt.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var jt=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[jt]=this._crs.code,Ah.prototype.onAdd.call(this,Mt)},getTileUrl:function(Mt){var jt=this._tileCoordsToNwSe(Mt),tn=this._crs,gn=fr(tn.project(jt[0]),tn.project(jt[1])),$n=gn.min,tr=gn.max,Ir=(this._wmsVersion>=1.3&&this._crs===lo?[$n.y,$n.x,tr.y,tr.x]:[$n.x,$n.y,tr.x,tr.y]).join(","),Xr=Ah.prototype.getTileUrl.call(this,Mt);return Xr+Wt(this.wmsParams,Xr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ir},setParams:function(Mt,jt){return bt(this.wmsParams,Mt),jt||this.redraw(),this}});function Hd(Mt,jt){return new zd(Mt,jt)}Ah.WMS=zd,Af.wms=Hd;var Hc=Ds.extend({options:{padding:.1},initialize:function(Mt){Jt(this,Mt),Lt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&No(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var Mt={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(Mt.zoomanim=this._onAnimZoom),Mt},_onAnimZoom:function(Mt){this._updateTransform(Mt.center,Mt.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(Mt,jt){var tn=this._map.getZoomScale(jt,this._zoom),gn=this._map.getSize().multiplyBy(.5+this.options.padding),$n=this._map.project(this._center,jt),tr=gn.multiplyBy(-tn).add($n).subtract(this._map._getNewPixelOrigin(Mt,jt));Ai.any3d?Rl(this._container,tr,tn):Qs(this._container,tr)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var Mt in this._layers)this._layers[Mt]._reset()},_onZoomEnd:function(){for(var Mt in this._layers)this._layers[Mt]._project()},_updatePaths:function(){for(var Mt in this._layers)this._layers[Mt]._update()},_update:function(){var Mt=this.options.padding,jt=this._map.getSize(),tn=this._map.containerPointToLayerPoint(jt.multiplyBy(-Mt)).round();this._bounds=new wr(tn,tn.add(jt.multiplyBy(1+Mt*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Lf=Hc.extend({options:{tolerance:0},getEvents:function(){var Mt=Hc.prototype.getEvents.call(this);return Mt.viewprereset=this._onViewPreReset,Mt},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var Mt=this._container=document.createElement("canvas");Bo(Mt,"mousemove",this._onMouseMove,this),Bo(Mt,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Bo(Mt,"mouseout",this._handleMouseOut,this),Mt._leaflet_disable_events=!0,this._ctx=Mt.getContext("2d")},_destroyContainer:function(){pn(this._redrawRequest),delete this._ctx,Sr(this._container),co(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var Mt;this._redrawBounds=null;for(var jt in this._layers)Mt=this._layers[jt],Mt._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Hc.prototype._update.call(this);var Mt=this._bounds,jt=this._container,tn=Mt.getSize(),gn=Ai.retina?2:1;Qs(jt,Mt.min),jt.width=gn*tn.x,jt.height=gn*tn.y,jt.style.width=tn.x+"px",jt.style.height=tn.y+"px",Ai.retina&&this._ctx.scale(2,2),this._ctx.translate(-Mt.min.x,-Mt.min.y),this.fire("update")}},_reset:function(){Hc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(Mt){this._updateDashArray(Mt),this._layers[Lt(Mt)]=Mt;var jt=Mt._order={layer:Mt,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=jt),this._drawLast=jt,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(Mt){this._requestRedraw(Mt)},_removePath:function(Mt){var jt=Mt._order,tn=jt.next,gn=jt.prev;tn?tn.prev=gn:this._drawLast=gn,gn?gn.next=tn:this._drawFirst=tn,delete Mt._order,delete this._layers[Lt(Mt)],this._requestRedraw(Mt)},_updatePath:function(Mt){this._extendRedrawBounds(Mt),Mt._project(),Mt._update(),this._requestRedraw(Mt)},_updateStyle:function(Mt){this._updateDashArray(Mt),this._requestRedraw(Mt)},_updateDashArray:function(Mt){if(typeof Mt.options.dashArray=="string"){var jt=Mt.options.dashArray.split(/[, ]+/),tn=[],gn,$n;for($n=0;$n<jt.length;$n++){if(gn=Number(jt[$n]),isNaN(gn))return;tn.push(gn)}Mt.options._dashArray=tn}else Mt.options._dashArray=Mt.options.dashArray},_requestRedraw:function(Mt){!this._map||(this._extendRedrawBounds(Mt),this._redrawRequest=this._redrawRequest||Ln(this._redraw,this))},_extendRedrawBounds:function(Mt){if(Mt._pxBounds){var jt=(Mt.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new wr,this._redrawBounds.extend(Mt._pxBounds.min.subtract([jt,jt])),this._redrawBounds.extend(Mt._pxBounds.max.add([jt,jt]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var Mt=this._redrawBounds;if(Mt){var jt=Mt.getSize();this._ctx.clearRect(Mt.min.x,Mt.min.y,jt.x,jt.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var Mt,jt=this._redrawBounds;if(this._ctx.save(),jt){var tn=jt.getSize();this._ctx.beginPath(),this._ctx.rect(jt.min.x,jt.min.y,tn.x,tn.y),this._ctx.clip()}this._drawing=!0;for(var gn=this._drawFirst;gn;gn=gn.next)Mt=gn.layer,(!jt||Mt._pxBounds&&Mt._pxBounds.intersects(jt))&&Mt._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(Mt,jt){if(!!this._drawing){var tn,gn,$n,tr,Ir=Mt._parts,Xr=Ir.length,ii=this._ctx;if(!!Xr){for(ii.beginPath(),tn=0;tn<Xr;tn++){for(gn=0,$n=Ir[tn].length;gn<$n;gn++)tr=Ir[tn][gn],ii[gn?"lineTo":"moveTo"](tr.x,tr.y);jt&&ii.closePath()}this._fillStroke(ii,Mt)}}},_updateCircle:function(Mt){if(!(!this._drawing||Mt._empty())){var jt=Mt._point,tn=this._ctx,gn=Math.max(Math.round(Mt._radius),1),$n=(Math.max(Math.round(Mt._radiusY),1)||gn)/gn;$n!==1&&(tn.save(),tn.scale(1,$n)),tn.beginPath(),tn.arc(jt.x,jt.y/$n,gn,0,Math.PI*2,!1),$n!==1&&tn.restore(),this._fillStroke(tn,Mt)}},_fillStroke:function(Mt,jt){var tn=jt.options;tn.fill&&(Mt.globalAlpha=tn.fillOpacity,Mt.fillStyle=tn.fillColor||tn.color,Mt.fill(tn.fillRule||"evenodd")),tn.stroke&&tn.weight!==0&&(Mt.setLineDash&&Mt.setLineDash(jt.options&&jt.options._dashArray||[]),Mt.globalAlpha=tn.opacity,Mt.lineWidth=tn.weight,Mt.strokeStyle=tn.color,Mt.lineCap=tn.lineCap,Mt.lineJoin=tn.lineJoin,Mt.stroke())},_onClick:function(Mt){for(var jt=this._map.mouseEventToLayerPoint(Mt),tn,gn,$n=this._drawFirst;$n;$n=$n.next)tn=$n.layer,tn.options.interactive&&tn._containsPoint(jt)&&(!(Mt.type==="click"||Mt.type==="preclick")||!this._map._draggableMoved(tn))&&(gn=tn);this._fireEvent(gn?[gn]:!1,Mt)},_onMouseMove:function(Mt){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var jt=this._map.mouseEventToLayerPoint(Mt);this._handleMouseHover(Mt,jt)}},_handleMouseOut:function(Mt){var jt=this._hoveredLayer;jt&&(go(this._container,"leaflet-interactive"),this._fireEvent([jt],Mt,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(Mt,jt){if(!this._mouseHoverThrottled){for(var tn,gn,$n=this._drawFirst;$n;$n=$n.next)tn=$n.layer,tn.options.interactive&&tn._containsPoint(jt)&&(gn=tn);gn!==this._hoveredLayer&&(this._handleMouseOut(Mt),gn&&(No(this._container,"leaflet-interactive"),this._fireEvent([gn],Mt,"mouseover"),this._hoveredLayer=gn)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,Mt),this._mouseHoverThrottled=!0,setTimeout(Et(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(Mt,jt,tn){this._map._fireDOMEvent(jt,tn||jt.type,Mt)},_bringToFront:function(Mt){var jt=Mt._order;if(!!jt){var tn=jt.next,gn=jt.prev;if(tn)tn.prev=gn;else return;gn?gn.next=tn:tn&&(this._drawFirst=tn),jt.prev=this._drawLast,this._drawLast.next=jt,jt.next=null,this._drawLast=jt,this._requestRedraw(Mt)}},_bringToBack:function(Mt){var jt=Mt._order;if(!!jt){var tn=jt.next,gn=jt.prev;if(gn)gn.next=tn;else return;tn?tn.prev=gn:gn&&(this._drawLast=gn),jt.prev=null,jt.next=this._drawFirst,this._drawFirst.prev=jt,this._drawFirst=jt,this._requestRedraw(Mt)}}});function If(Mt){return Ai.canvas?new Lf(Mt):null}var Lh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(Mt){return document.createElement("<lvml:"+Mt+' class="lvml">')}}catch{}return function(Mt){return document.createElement("<"+Mt+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Pf={_initContainer:function(){this._container=ao("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hc.prototype._update.call(this),this.fire("update"))},_initPath:function(Mt){var jt=Mt._container=Lh("shape");No(jt,"leaflet-vml-shape "+(this.options.className||"")),jt.coordsize="1 1",Mt._path=Lh("path"),jt.appendChild(Mt._path),this._updateStyle(Mt),this._layers[Lt(Mt)]=Mt},_addPath:function(Mt){var jt=Mt._container;this._container.appendChild(jt),Mt.options.interactive&&Mt.addInteractiveTarget(jt)},_removePath:function(Mt){var jt=Mt._container;Sr(jt),Mt.removeInteractiveTarget(jt),delete this._layers[Lt(Mt)]},_updateStyle:function(Mt){var jt=Mt._stroke,tn=Mt._fill,gn=Mt.options,$n=Mt._container;$n.stroked=!!gn.stroke,$n.filled=!!gn.fill,gn.stroke?(jt||(jt=Mt._stroke=Lh("stroke")),$n.appendChild(jt),jt.weight=gn.weight+"px",jt.color=gn.color,jt.opacity=gn.opacity,gn.dashArray?jt.dashStyle=sn(gn.dashArray)?gn.dashArray.join(" "):gn.dashArray.replace(/( *, *)/g," "):jt.dashStyle="",jt.endcap=gn.lineCap.replace("butt","flat"),jt.joinstyle=gn.lineJoin):jt&&($n.removeChild(jt),Mt._stroke=null),gn.fill?(tn||(tn=Mt._fill=Lh("fill")),$n.appendChild(tn),tn.color=gn.fillColor||gn.color,tn.opacity=gn.fillOpacity):tn&&($n.removeChild(tn),Mt._fill=null)},_updateCircle:function(Mt){var jt=Mt._point.round(),tn=Math.round(Mt._radius),gn=Math.round(Mt._radiusY||tn);this._setPath(Mt,Mt._empty()?"M0 0":"AL "+jt.x+","+jt.y+" "+tn+","+gn+" 0,"+65535*360)},_setPath:function(Mt,jt){Mt._path.v=jt},_bringToFront:function(Mt){Nr(Mt._container)},_bringToBack:function(Mt){ia(Mt._container)}},_l=Ai.vml?Lh:cn,Vd=Hc.extend({_initContainer:function(){this._container=_l("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_l("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Sr(this._container),co(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Hc.prototype._update.call(this);var Mt=this._bounds,jt=Mt.getSize(),tn=this._container;(!this._svgSize||!this._svgSize.equals(jt))&&(this._svgSize=jt,tn.setAttribute("width",jt.x),tn.setAttribute("height",jt.y)),Qs(tn,Mt.min),tn.setAttribute("viewBox",[Mt.min.x,Mt.min.y,jt.x,jt.y].join(" ")),this.fire("update")}},_initPath:function(Mt){var jt=Mt._path=_l("path");Mt.options.className&&No(jt,Mt.options.className),Mt.options.interactive&&No(jt,"leaflet-interactive"),this._updateStyle(Mt),this._layers[Lt(Mt)]=Mt},_addPath:function(Mt){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(Mt._path),Mt.addInteractiveTarget(Mt._path)},_removePath:function(Mt){Sr(Mt._path),Mt.removeInteractiveTarget(Mt._path),delete this._layers[Lt(Mt)]},_updatePath:function(Mt){Mt._project(),Mt._update()},_updateStyle:function(Mt){var jt=Mt._path,tn=Mt.options;!jt||(tn.stroke?(jt.setAttribute("stroke",tn.color),jt.setAttribute("stroke-opacity",tn.opacity),jt.setAttribute("stroke-width",tn.weight),jt.setAttribute("stroke-linecap",tn.lineCap),jt.setAttribute("stroke-linejoin",tn.lineJoin),tn.dashArray?jt.setAttribute("stroke-dasharray",tn.dashArray):jt.removeAttribute("stroke-dasharray"),tn.dashOffset?jt.setAttribute("stroke-dashoffset",tn.dashOffset):jt.removeAttribute("stroke-dashoffset")):jt.setAttribute("stroke","none"),tn.fill?(jt.setAttribute("fill",tn.fillColor||tn.color),jt.setAttribute("fill-opacity",tn.fillOpacity),jt.setAttribute("fill-rule",tn.fillRule||"evenodd")):jt.setAttribute("fill","none"))},_updatePoly:function(Mt,jt){this._setPath(Mt,Nn(Mt._parts,jt))},_updateCircle:function(Mt){var jt=Mt._point,tn=Math.max(Math.round(Mt._radius),1),gn=Math.max(Math.round(Mt._radiusY),1)||tn,$n="a"+tn+","+gn+" 0 1,0 ",tr=Mt._empty()?"M0 0":"M"+(jt.x-tn)+","+jt.y+$n+tn*2+",0 "+$n+-tn*2+",0 ";this._setPath(Mt,tr)},_setPath:function(Mt,jt){Mt._path.setAttribute("d",jt)},_bringToFront:function(Mt){Nr(Mt._path)},_bringToBack:function(Mt){ia(Mt._path)}});Ai.vml&&Vd.include(Pf);function Ap(Mt){return Ai.svg||Ai.vml?new Vd(Mt):null}Fo.include({getRenderer:function(Mt){var jt=Mt.options.renderer||this._getPaneRenderer(Mt.options.pane)||this.options.renderer||this._renderer;return jt||(jt=this._renderer=this._createRenderer()),this.hasLayer(jt)||this.addLayer(jt),jt},_getPaneRenderer:function(Mt){if(Mt==="overlayPane"||Mt===void 0)return!1;var jt=this._paneRenderers[Mt];return jt===void 0&&(jt=this._createRenderer({pane:Mt}),this._paneRenderers[Mt]=jt),jt},_createRenderer:function(Mt){return this.options.preferCanvas&&If(Mt)||Ap(Mt)}});var Lp=ih.extend({initialize:function(Mt,jt){ih.prototype.initialize.call(this,this._boundsToLatLngs(Mt),jt)},setBounds:function(Mt){return this.setLatLngs(this._boundsToLatLngs(Mt))},_boundsToLatLngs:function(Mt){return Mt=Lr(Mt),[Mt.getSouthWest(),Mt.getNorthWest(),Mt.getNorthEast(),Mt.getSouthEast()]}});function Ip(Mt,jt){return new Lp(Mt,jt)}Vd.create=_l,Vd.pointsToPath=Nn,Mu.geometryToLayer=tl,Mu.coordsToLatLng=ld,Mu.coordsToLatLngs=Dl,Mu.latLngToCoords=sc,Mu.latLngsToCoords=Fc,Mu.getFeature=$u,Mu.asFeature=Dd,Fo.mergeOptions({boxZoom:!0});var Pp=Ys.extend({initialize:function(Mt){this._map=Mt,this._container=Mt._container,this._pane=Mt._panes.overlayPane,this._resetStateTimeout=0,Mt.on("unload",this._destroy,this)},addHooks:function(){Bo(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){co(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Sr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(Mt){if(!Mt.shiftKey||Mt.which!==1&&Mt.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),jo(),yl(),this._startPoint=this._map.mouseEventToContainerPoint(Mt),Bo(document,{contextmenu:Nc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(Mt){this._moved||(this._moved=!0,this._box=ao("div","leaflet-zoom-box",this._container),No(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(Mt);var jt=new wr(this._point,this._startPoint),tn=jt.getSize();Qs(this._box,jt.min),this._box.style.width=tn.x+"px",this._box.style.height=tn.y+"px"},_finish:function(){this._moved&&(Sr(this._box),go(this._container,"leaflet-crosshair")),la(),ja(),co(document,{contextmenu:Nc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(Mt){if(!(Mt.which!==1&&Mt.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Et(this._resetState,this),0);var jt=new gr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(jt).fire("boxzoomend",{boxZoomBounds:jt})}},_onKeyDown:function(Mt){Mt.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fo.addInitHook("addHandler","boxZoom",Pp),Fo.mergeOptions({doubleClickZoom:!0});var Of=Ys.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(Mt){var jt=this._map,tn=jt.getZoom(),gn=jt.options.zoomDelta,$n=Mt.originalEvent.shiftKey?tn-gn:tn+gn;jt.options.doubleClickZoom==="center"?jt.setZoom($n):jt.setZoomAround(Mt.containerPoint,$n)}});Fo.addInitHook("addHandler","doubleClickZoom",Of),Fo.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ud=Ys.extend({addHooks:function(){if(!this._draggable){var Mt=this._map;this._draggable=new Ga(Mt._mapPane,Mt._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),Mt.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),Mt.on("zoomend",this._onZoomEnd,this),Mt.whenReady(this._onZoomEnd,this))}No(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){go(this._map._container,"leaflet-grab"),go(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var Mt=this._map;if(Mt._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var jt=Lr(this._map.options.maxBounds);this._offsetLimit=fr(this._map.latLngToContainerPoint(jt.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(jt.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;Mt.fire("movestart").fire("dragstart"),Mt.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(Mt){if(this._map.options.inertia){var jt=this._lastTime=+new Date,tn=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(tn),this._times.push(jt),this._prunePositions(jt)}this._map.fire("move",Mt).fire("drag",Mt)},_prunePositions:function(Mt){for(;this._positions.length>1&&Mt-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var Mt=this._map.getSize().divideBy(2),jt=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=jt.subtract(Mt).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(Mt,jt){return Mt-(Mt-jt)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var Mt=this._draggable._newPos.subtract(this._draggable._startPos),jt=this._offsetLimit;Mt.x<jt.min.x&&(Mt.x=this._viscousLimit(Mt.x,jt.min.x)),Mt.y<jt.min.y&&(Mt.y=this._viscousLimit(Mt.y,jt.min.y)),Mt.x>jt.max.x&&(Mt.x=this._viscousLimit(Mt.x,jt.max.x)),Mt.y>jt.max.y&&(Mt.y=this._viscousLimit(Mt.y,jt.max.y)),this._draggable._newPos=this._draggable._startPos.add(Mt)}},_onPreDragWrap:function(){var Mt=this._worldWidth,jt=Math.round(Mt/2),tn=this._initialWorldOffset,gn=this._draggable._newPos.x,$n=(gn-jt+tn)%Mt+jt-tn,tr=(gn+jt+tn)%Mt-jt-tn,Ir=Math.abs($n+tn)<Math.abs(tr+tn)?$n:tr;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ir},_onDragEnd:function(Mt){var jt=this._map,tn=jt.options,gn=!tn.inertia||Mt.noInertia||this._times.length<2;if(jt.fire("dragend",Mt),gn)jt.fire("moveend");else{this._prunePositions(+new Date);var $n=this._lastPos.subtract(this._positions[0]),tr=(this._lastTime-this._times[0])/1e3,Ir=tn.easeLinearity,Xr=$n.multiplyBy(Ir/tr),ii=Xr.distanceTo([0,0]),yi=Math.min(tn.inertiaMaxSpeed,ii),Gi=Xr.multiplyBy(yi/ii),Oo=yi/(tn.inertiaDeceleration*Ir),ps=Gi.multiplyBy(-Oo/2).round();!ps.x&&!ps.y?jt.fire("moveend"):(ps=jt._limitOffset(ps,jt.options.maxBounds),Ln(function(){jt.panBy(ps,{duration:Oo,easeLinearity:Ir,noMoveStart:!0,animate:!0})}))}}});Fo.addInitHook("addHandler","dragging",ud),Fo.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jd=Ys.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(Mt){this._map=Mt,this._setPanDelta(Mt.options.keyboardPanDelta),this._setZoomDelta(Mt.options.zoomDelta)},addHooks:function(){var Mt=this._map._container;Mt.tabIndex<=0&&(Mt.tabIndex="0"),Bo(Mt,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),co(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var Mt=document.body,jt=document.documentElement,tn=Mt.scrollTop||jt.scrollTop,gn=Mt.scrollLeft||jt.scrollLeft;this._map._container.focus(),window.scrollTo(gn,tn)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(Mt){var jt=this._panKeys={},tn=this.keyCodes,gn,$n;for(gn=0,$n=tn.left.length;gn<$n;gn++)jt[tn.left[gn]]=[-1*Mt,0];for(gn=0,$n=tn.right.length;gn<$n;gn++)jt[tn.right[gn]]=[Mt,0];for(gn=0,$n=tn.down.length;gn<$n;gn++)jt[tn.down[gn]]=[0,Mt];for(gn=0,$n=tn.up.length;gn<$n;gn++)jt[tn.up[gn]]=[0,-1*Mt]},_setZoomDelta:function(Mt){var jt=this._zoomKeys={},tn=this.keyCodes,gn,$n;for(gn=0,$n=tn.zoomIn.length;gn<$n;gn++)jt[tn.zoomIn[gn]]=Mt;for(gn=0,$n=tn.zoomOut.length;gn<$n;gn++)jt[tn.zoomOut[gn]]=-Mt},_addHooks:function(){Bo(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){co(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(Mt){if(!(Mt.altKey||Mt.ctrlKey||Mt.metaKey)){var jt=Mt.keyCode,tn=this._map,gn;if(jt in this._panKeys){if(!tn._panAnim||!tn._panAnim._inProgress)if(gn=this._panKeys[jt],Mt.shiftKey&&(gn=rr(gn).multiplyBy(3)),tn.options.maxBounds&&(gn=tn._limitOffset(rr(gn),tn.options.maxBounds)),tn.options.worldCopyJump){var $n=tn.wrapLatLng(tn.unproject(tn.project(tn.getCenter()).add(gn)));tn.panTo($n)}else tn.panBy(gn)}else if(jt in this._zoomKeys)tn.setZoom(tn.getZoom()+(Mt.shiftKey?3:1)*this._zoomKeys[jt]);else if(jt===27&&tn._popup&&tn._popup.options.closeOnEscapeKey)tn.closePopup();else return;Nc(Mt)}}});Fo.addInitHook("addHandler","keyboard",jd),Fo.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $g=Ys.extend({addHooks:function(){Bo(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){co(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(Mt){var jt=ed(Mt),tn=this._map.options.wheelDebounceTime;this._delta+=jt,this._lastMousePos=this._map.mouseEventToContainerPoint(Mt),this._startTime||(this._startTime=+new Date);var gn=Math.max(tn-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Et(this._performZoom,this),gn),Nc(Mt)},_performZoom:function(){var Mt=this._map,jt=Mt.getZoom(),tn=this._map.options.zoomSnap||0;Mt._stop();var gn=this._delta/(this._map.options.wheelPxPerZoomLevel*4),$n=4*Math.log(2/(1+Math.exp(-Math.abs(gn))))/Math.LN2,tr=tn?Math.ceil($n/tn)*tn:$n,Ir=Mt._limitZoom(jt+(this._delta>0?tr:-tr))-jt;this._delta=0,this._startTime=null,Ir&&(Mt.options.scrollWheelZoom==="center"?Mt.setZoom(jt+Ir):Mt.setZoomAround(this._lastMousePos,jt+Ir))}});Fo.addInitHook("addHandler","scrollWheelZoom",$g);var hd=600;Fo.mergeOptions({tapHold:Ai.touchNative&&Ai.safari&&Ai.mobile,tapTolerance:15});var Rg=Ys.extend({addHooks:function(){Bo(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){co(this._map._container,"touchstart",this._onDown,this)},_onDown:function(Mt){if(clearTimeout(this._holdTimeout),Mt.touches.length===1){var jt=Mt.touches[0];this._startPos=this._newPos=new Tr(jt.clientX,jt.clientY),this._holdTimeout=setTimeout(Et(function(){this._cancel(),this._isTapValid()&&(Bo(document,"touchend",da),Bo(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",jt))},this),hd),Bo(document,"touchend touchcancel contextmenu",this._cancel,this),Bo(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function Mt(){co(document,"touchend",da),co(document,"touchend touchcancel",Mt)},_cancel:function(){clearTimeout(this._holdTimeout),co(document,"touchend touchcancel contextmenu",this._cancel,this),co(document,"touchmove",this._onMove,this)},_onMove:function(Mt){var jt=Mt.touches[0];this._newPos=new Tr(jt.clientX,jt.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(Mt,jt){var tn=new MouseEvent(Mt,{bubbles:!0,cancelable:!0,view:window,screenX:jt.screenX,screenY:jt.screenY,clientX:jt.clientX,clientY:jt.clientY});tn._simulated=!0,jt.target.dispatchEvent(tn)}});Fo.addInitHook("addHandler","tapHold",Rg),Fo.mergeOptions({touchZoom:Ai.touch,bounceAtZoomLimits:!0});var Op=Ys.extend({addHooks:function(){No(this._map._container,"leaflet-touch-zoom"),Bo(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){go(this._map._container,"leaflet-touch-zoom"),co(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(Mt){var jt=this._map;if(!(!Mt.touches||Mt.touches.length!==2||jt._animatingZoom||this._zooming)){var tn=jt.mouseEventToContainerPoint(Mt.touches[0]),gn=jt.mouseEventToContainerPoint(Mt.touches[1]);this._centerPoint=jt.getSize()._divideBy(2),this._startLatLng=jt.containerPointToLatLng(this._centerPoint),jt.options.touchZoom!=="center"&&(this._pinchStartLatLng=jt.containerPointToLatLng(tn.add(gn)._divideBy(2))),this._startDist=tn.distanceTo(gn),this._startZoom=jt.getZoom(),this._moved=!1,this._zooming=!0,jt._stop(),Bo(document,"touchmove",this._onTouchMove,this),Bo(document,"touchend touchcancel",this._onTouchEnd,this),da(Mt)}},_onTouchMove:function(Mt){if(!(!Mt.touches||Mt.touches.length!==2||!this._zooming)){var jt=this._map,tn=jt.mouseEventToContainerPoint(Mt.touches[0]),gn=jt.mouseEventToContainerPoint(Mt.touches[1]),$n=tn.distanceTo(gn)/this._startDist;if(this._zoom=jt.getScaleZoom($n,this._startZoom),!jt.options.bounceAtZoomLimits&&(this._zoom<jt.getMinZoom()&&$n<1||this._zoom>jt.getMaxZoom()&&$n>1)&&(this._zoom=jt._limitZoom(this._zoom)),jt.options.touchZoom==="center"){if(this._center=this._startLatLng,$n===1)return}else{var tr=tn._add(gn)._divideBy(2)._subtract(this._centerPoint);if($n===1&&tr.x===0&&tr.y===0)return;this._center=jt.unproject(jt.project(this._pinchStartLatLng,this._zoom).subtract(tr),this._zoom)}this._moved||(jt._moveStart(!0,!1),this._moved=!0),pn(this._animRequest);var Ir=Et(jt._move,jt,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ln(Ir,this,!0),da(Mt)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,pn(this._animRequest),co(document,"touchmove",this._onTouchMove,this),co(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fo.addInitHook("addHandler","touchZoom",Op),Fo.BoxZoom=Pp,Fo.DoubleClickZoom=Of,Fo.Drag=ud,Fo.Keyboard=jd,Fo.ScrollWheelZoom=$g,Fo.TapHold=Rg,Fo.TouchZoom=Op,it.Bounds=wr,it.Browser=Ai,it.CRS=qr,it.Canvas=Lf,it.Circle=Sp,it.CircleMarker=Nd,it.Class=yn,it.Control=ba,it.DivIcon=kp,it.DivOverlay=zc,it.DomEvent=Ua,it.DomUtil=Lu,it.Draggable=Ga,it.Evented=yr,it.FeatureGroup=Yl,it.GeoJSON=Mu,it.GridLayer=oh,it.Handler=Ys,it.Icon=ca,it.ImageOverlay=kf,it.LatLng=Pr,it.LatLngBounds=gr,it.Layer=Ds,it.LayerGroup=Ms,it.LineUtil=Kn,it.Map=Fo,it.Marker=ad,it.Mixin=Dc,it.Path=lu,it.Point=Tr,it.PolyUtil=ri,it.Polygon=ih,it.Polyline=Ou,it.Popup=ul,it.PosAnimation=Th,it.Projection=Ii,it.Rectangle=Lp,it.Renderer=Hc,it.SVG=Vd,it.SVGOverlay=Bd,it.TileLayer=Ah,it.Tooltip=ac,it.Transformation=ir,it.Util=Hn,it.VideoOverlay=Pg,it.bind=Et,it.bounds=fr,it.canvas=If,it.circle=Lg,it.circleMarker=Bm,it.control=eh,it.divIcon=Mg,it.extend=bt,it.featureGroup=Bc,it.geoJSON=Tf,it.geoJson=Cp,it.gridLayer=Hm,it.icon=od,it.imageOverlay=cd,it.latLng=lr,it.latLngBounds=Lr,it.layerGroup=wc,it.map=Pu,it.marker=Sf,it.point=rr,it.polygon=zm,it.polyline=Fm,it.popup=Tp,it.rectangle=Ip,it.setOptions=Jt,it.stamp=Lt,it.svg=Ap,it.svgOverlay=Ta,it.tileLayer=Af,it.tooltip=Fd,it.transformation=Pn,it.version=st,it.videoOverlay=Og;var Ud=window.L;it.noConflict=function(){return window.L=Ud,this},window.L=it})})(leafletSrc,leafletSrc.exports);const L$1=leafletSrc.exports;var leafletGestureHandling_min={exports:{}};(function(nt,rt){(function(it,st){st(rt)})(commonjsGlobal$1,function(it){var st={ar:{touch:"\u0627\u0633\u062A\u062E\u062F\u0645 \u0625\u0635\u0628\u0639\u064A\u0646 \u0644\u062A\u062D\u0631\u064A\u0643 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",scroll:"\u200F\u0627\u0633\u062A\u062E\u062F\u0645 ctrl + scroll \u0644\u062A\u0635\u063A\u064A\u0631/\u062A\u0643\u0628\u064A\u0631 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",scrollMac:"\u064A\u0645\u0643\u0646\u0643 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u2318 + \u0627\u0644\u062A\u0645\u0631\u064A\u0631 \u0644\u062A\u0643\u0628\u064A\u0631/\u062A\u0635\u063A\u064A\u0631 \u0627\u0644\u062E\u0631\u064A\u0637\u0629"},bg:{touch:"\u0418\u0437\u043F\u043E\u043B\u0437\u0432\u0430\u0439\u0442\u0435 \u0434\u0432\u0430 \u043F\u0440\u044A\u0441\u0442\u0430, \u0437\u0430 \u0434\u0430 \u043F\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u0435 \u043A\u0430\u0440\u0442\u0430\u0442\u0430",scroll:"\u0417\u0430\u0434\u0440\u044A\u0436\u0442\u0435 \u0431\u0443\u0442\u043E\u043D\u0430 Ctrl \u043D\u0430\u0442\u0438\u0441\u043D\u0430\u0442, \u0434\u043E\u043A\u0430\u0442\u043E \u043F\u0440\u0435\u0432\u044A\u0440\u0442\u0430\u0442\u0435, \u0437\u0430 \u0434\u0430 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043C\u0430\u0449\u0430\u0431\u0430 \u043D\u0430 \u043A\u0430\u0440\u0442\u0430\u0442\u0430",scrollMac:"\u0417\u0430\u0434\u0440\u044A\u0436\u0442\u0435 \u0431\u0443\u0442\u043E\u043D\u0430 \u2318 \u043D\u0430\u0442\u0438\u0441\u043D\u0430\u0442, \u0434\u043E\u043A\u0430\u0442\u043E \u043F\u0440\u0435\u0432\u044A\u0440\u0442\u0430\u0442\u0435, \u0437\u0430 \u0434\u0430 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043C\u0430\u0449\u0430\u0431\u0430 \u043D\u0430 \u043A\u0430\u0440\u0442\u0430\u0442\u0430"},bn:{touch:"\u09AE\u09BE\u09A8\u099A\u09BF\u09A4\u09CD\u09B0\u099F\u09BF\u0995\u09C7 \u09B8\u09B0\u09BE\u09A4\u09C7 \u09A6\u09C1\u099F\u09BF \u0986\u0999\u09CD\u0997\u09C1\u09B2 \u09AC\u09CD\u09AF\u09AC\u09B9\u09BE\u09B0 \u0995\u09B0\u09C1\u09A8",scroll:"\u09AE\u09CD\u09AF\u09BE\u09AA \u099C\u09C1\u09AE \u0995\u09B0\u09A4\u09C7 ctrl + scroll \u09AC\u09CD\u09AF\u09AC\u09B9\u09BE\u09B0 \u0995\u09B0\u09C1\u09A8",scrollMac:"\u09AE\u09CD\u09AF\u09BE\u09AA\u09C7 \u099C\u09C1\u09AE \u0995\u09B0\u09A4\u09C7 \u2318 \u09AC\u09CB\u09A4\u09BE\u09AE \u099F\u09BF\u09AA\u09C7 \u09B8\u09CD\u0995\u09CD\u09B0\u09B2 \u0995\u09B0\u09C1\u09A8"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla \u2318 mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K\xA0posunut\xED mapy pou\u017Eijte dva prsty",scroll:"Velikost zobrazen\xED mapy zm\u011B\u0148te podr\u017Een\xEDm kl\xE1vesy Ctrl a\xA0posouv\xE1n\xEDm kole\u010Dka my\u0161i",scrollMac:"Velikost zobrazen\xED mapy zm\u011Bn\xEDte podr\u017Een\xEDm kl\xE1vesy \u2318 a\xA0posunut\xEDm kole\u010Dka my\u0161i / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud p\xE5 kortet",scrollMac:"Brug \u2318 + rullefunktionen til at zoome ind og ud p\xE5 kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"\u2318"},el:{touch:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03B4\u03CD\u03BF \u03B4\u03AC\u03C7\u03C4\u03C5\u03BB\u03B1 \u03B3\u03B9\u03B1 \u03BC\u03B5\u03C4\u03B1\u03BA\u03AF\u03BD\u03B7\u03C3\u03B7 \u03C3\u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7",scroll:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03BB\u03AE\u03BA\u03C4\u03C1\u03BF Ctrl \u03BA\u03B1\u03B9 \u03BA\u03CD\u03BB\u03B9\u03C3\u03B7, \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BC\u03B5\u03B3\u03B5\u03B8\u03CD\u03BD\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7",scrollMac:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03BB\u03AE\u03BA\u03C4\u03C1\u03BF \u2318 + \u03BA\u03CD\u03BB\u03B9\u03C3\u03B7 \u03B3\u03B9\u03B1 \u03B5\u03C3\u03C4\u03AF\u03B1\u03C3\u03B7 \u03C3\u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mant\xE9n pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mant\xE9n pulsada la tecla \u2318 mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta \u2318 eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"\u0628\u0631\u0627\u06CC \u062D\u0631\u06A9\u062A \u062F\u0627\u062F\u0646 \u0646\u0642\u0634\u0647 \u0627\u0632 \u062F\u0648 \u0627\u0646\u06AF\u0634\u062A \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F.",scroll:"\u200F\u0628\u0631\u0627\u06CC \u0628\u0632\u0631\u06AF\u200C\u0646\u0645\u0627\u06CC\u06CC \u0646\u0642\u0634\u0647 \u0627\u0632 ctrl + scroll \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F",scrollMac:"\u0628\u0631\u0627\u06CC \u0628\u0632\u0631\u06AF\u200C\u0646\u0645\u0627\u06CC\u06CC \u0646\u0642\u0634\u0647\u060C \u0627\u0632 \u2318 + \u067E\u06CC\u0645\u0627\u06CC\u0634 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F."},fi:{touch:"Siirr\xE4 karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vieritt\xE4m\xE4ll\xE4.",scrollMac:"Zoomaa karttaa pit\xE4m\xE4ll\xE4 painike \u2318 painettuna ja vieritt\xE4m\xE4ll\xE4."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang \u2318 + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux\xA0doigts pour d\xE9placer la carte",scroll:"Vous pouvez zoomer sur la carte \xE0 l'aide de CTRL+Molette de d\xE9filement",scrollMac:"Vous pouvez zoomer sur la carte \xE0 l'aide de \u2318+Molette de d\xE9filement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme \u2318 e despr\xE1zate para ampliar o mapa"},gu:{touch:"\u0AA8\u0A95\u0AB6\u0ACB \u0A96\u0AB8\u0AC7\u0AA1\u0AB5\u0ABE \u0AAC\u0AC7 \u0A86\u0A82\u0A97\u0AB3\u0AC0\u0A93\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB",scroll:"\u0AA8\u0A95\u0AB6\u0ABE\u0AA8\u0AC7 \u0A9D\u0AC2\u0AAE \u0A95\u0AB0\u0AB5\u0ABE \u0AAE\u0ABE\u0A9F\u0AC7 ctrl + \u0AB8\u0ACD\u0A95\u0ACD\u0AB0\u0ACB\u0AB2\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB",scrollMac:"\u0AA8\u0A95\u0AB6\u0ABE\u0AA8\u0AC7 \u0A9D\u0AC2\u0AAE \u0A95\u0AB0\u0AB5\u0ABE \u2318 + \u0AB8\u0ACD\u0A95\u0ACD\u0AB0\u0ACB\u0AB2\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB"},hi:{touch:"\u092E\u0948\u092A \u090F\u0915 \u091C\u0917\u0939 \u0938\u0947 \u0926\u0942\u0938\u0930\u0940 \u091C\u0917\u0939 \u0932\u0947 \u091C\u093E\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u0926\u094B \u0909\u0902\u0917\u0932\u093F\u092F\u094B\u0902 \u0915\u093E \u0907\u0938\u094D\u0924\u0947\u092E\u093E\u0932 \u0915\u0930\u0947\u0902",scroll:"\u092E\u0948\u092A \u0915\u094B \u091C\u093C\u0942\u092E \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F ctrl + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0915\u093E \u0909\u092A\u092F\u094B\u0917 \u0915\u0930\u0947\u0902",scrollMac:"\u092E\u0948\u092A \u0915\u094B \u091C\u093C\u0942\u092E \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u2318 + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0915\u093E \u0909\u092A\u092F\u094B\u0917 \u0915\u0930\u0947\u0902"},hr:{touch:"Pomi\u010Dite kartu pomo\u0107u dva prsta",scroll:"Upotrijebite Ctrl i kliza\u010D mi\u0161a da biste zumirali kartu",scrollMac:"Upotrijebite gumb \u2318 dok se pomi\u010Dete za zumiranje karte"},hu:{touch:"K\xE9t ujjal mozgassa a t\xE9rk\xE9pet",scroll:"A t\xE9rk\xE9p a ctrl + g\xF6rget\xE9s haszn\xE1lat\xE1val nagy\xEDthat\xF3",scrollMac:"A t\xE9rk\xE9p a \u2318 + g\xF6rget\xE9s haszn\xE1lat\xE1val nagy\xEDthat\xF3"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan \u2318 + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza \u2318 + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"\u05D4\u05D6\u05D6 \u05D0\u05EA \u05D4\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05E9\u05EA\u05D9 \u05D0\u05E6\u05D1\u05E2\u05D5\u05EA",scroll:"\u200F\u05D0\u05E4\u05E9\u05E8 \u05DC\u05E9\u05E0\u05D5\u05EA \u05D0\u05EA \u05DE\u05E8\u05D7\u05E7 \u05D4\u05EA\u05E6\u05D5\u05D2\u05D4 \u05D1\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05DE\u05E7\u05E9 ctrl \u05D5\u05D2\u05DC\u05D9\u05DC\u05D4",scrollMac:"\u05D0\u05E4\u05E9\u05E8 \u05DC\u05E9\u05E0\u05D5\u05EA \u05D0\u05EA \u05DE\u05E8\u05D7\u05E7 \u05D4\u05EA\u05E6\u05D5\u05D2\u05D4 \u05D1\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05DE\u05E7\u05E9 \u2318 \u05D5\u05D2\u05DC\u05D9\u05DC\u05D4"},ja:{touch:"\u5730\u56F3\u3092\u79FB\u52D5\u3055\u305B\u308B\u306B\u306F\u6307 2 \u672C\u3067\u64CD\u4F5C\u3057\u307E\u3059",scroll:"\u5730\u56F3\u3092\u30BA\u30FC\u30E0\u3059\u308B\u306B\u306F\u3001Ctrl \u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044",scrollMac:"\u5730\u56F3\u3092\u30BA\u30FC\u30E0\u3059\u308B\u306B\u306F\u3001\u2318 \u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},ko:{touch:"\uC9C0\uB3C4\uB97C \uC6C0\uC9C1\uC774\uB824\uBA74 \uB450 \uC190\uAC00\uB77D\uC744 \uC0AC\uC6A9\uD558\uC138\uC694.",scroll:"\uC9C0\uB3C4\uB97C \uD655\uB300/\uCD95\uC18C\uD558\uB824\uBA74 Ctrl\uC744 \uB204\uB978 \uCC44 \uC2A4\uD06C\uB864\uD558\uC138\uC694.",scrollMac:"\uC9C0\uB3C4\uB97C \uD655\uB300\uD558\uB824\uBA74 \u2318 + \uC2A4\uD06C\uB864 \uC0AC\uC6A9"},lt:{touch:"Perkelkite \u017Eem\u0117lap\u012F dviem pir\u0161tais",scroll:"Slinkite nuspaud\u0119 klavi\u0161\u0105 \u201ECtrl\u201C, kad pakeistum\u0117te \u017Eem\u0117lapio mastel\u012F",scrollMac:"Paspauskite klavi\u0161\u0105 \u2318 ir slinkite, kad priartintum\u0117te \u017Eem\u0117lap\u012F"},lv:{touch:"Lai p\u0101rvietotu karti, b\u012Bdiet to ar diviem pirkstiem",scroll:"Kartes t\u0101lummai\u0146ai izmantojiet ctrl + ritin\u0101\u0161anu",scrollMac:"Lai veiktu kartes t\u0101lummai\u0146u, izmantojiet \u2318 + ritin\u0101\u0161anu"},ml:{touch:"\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u0D28\u0D40\u0D15\u0D4D\u0D15\u0D3E\u0D7B \u0D30\u0D23\u0D4D\u0D1F\u0D4D \u0D35\u0D3F\u0D30\u0D32\u0D41\u0D15\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D15\u0D4D\u0D15\u0D41\u0D15",scroll:"\u0D15\u0D7A\u0D1F\u0D4D\u0D30\u0D4B\u0D7E + \u0D38\u0D4D\u200C\u0D15\u0D4D\u0D30\u0D4B\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D1A\u0D4D\u0D1A\u0D4D \u200C\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u200C\u0D38\u0D42\u0D02 \u0D1A\u0D46\u0D2F\u0D4D\u0D2F\u0D41\u0D15",scrollMac:"\u2318 + \u0D38\u0D4D\u200C\u0D15\u0D4D\u0D30\u0D4B\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D1A\u0D4D\u0D1A\u0D4D \u200C\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u200C\u0D38\u0D42\u0D02 \u0D1A\u0D46\u0D2F\u0D4D\u0D2F\u0D41\u0D15"},mr:{touch:"\u0928\u0915\u093E\u0936\u093E \u0939\u0932\u0935\u093F\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 \u0926\u094B\u0928 \u092C\u094B\u091F\u0947 \u0935\u093E\u092A\u0930\u093E",scroll:"\u0928\u0915\u093E\u0936\u093E \u091D\u0942\u092E \u0915\u0930\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 ctrl + scroll \u0935\u093E\u092A\u0930\u093E",scrollMac:"\u0928\u0915\u093E\u0936\u093E\u0935\u0930 \u091D\u0942\u092E \u0915\u0930\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 \u2318 + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0935\u093E\u092A\u0930\u093E"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik \u2318 + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for \xE5 flytte kartet",scroll:"Hold ctrl-tasten inne og rull for \xE5 zoome p\xE5 kartet",scrollMac:"Hold inne \u2318-tasten og rull for \xE5 zoome p\xE5 kartet"},pl:{touch:"Przesu\u0144 map\u0119 dwoma palcami",scroll:"Naci\u015Bnij CTRL i przewi\u0144, by przybli\u017Cy\u0107 map\u0119",scrollMac:"Naci\u015Bnij\xA0\u2318 i przewi\u0144, by przybli\u017Cy\u0107 map\u0119"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use \u2318 e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use \u2318 e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize \u2318 + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosi\u021Bi dou\u0103 degete pentru a deplasa harta",scroll:"Ap\u0103sa\u021Bi tasta ctrl \u0219i derula\u021Bi simultan pentru a m\u0103ri harta",scrollMac:"Folosi\u021Bi \u2318 \u0219i derula\u021Bi pentru a m\u0103ri/mic\u0219ora harta"},ru:{touch:"\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u0443, \u043F\u0440\u043E\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E \u043D\u0435\u0439 \u0434\u0432\u0443\u043C\u044F \u043F\u0430\u043B\u044C\u0446\u0430\u043C\u0438",scroll:"\u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043C\u0430\u0441\u0448\u0442\u0430\u0431, \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0438\u0432\u0430\u0439\u0442\u0435 \u043A\u0430\u0440\u0442\u0443, \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044F \u043A\u043B\u0430\u0432\u0438\u0448\u0443 Ctrl.",scrollMac:"\u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043C\u0430\u0441\u0448\u0442\u0430\u0431, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u2318\xA0+ \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430"},sk:{touch:"Mapu m\xF4\u017Eete posun\xFA\u0165 dvoma prstami",scroll:"Ak chcete pribl\xED\u017Ei\u0165 mapu, stla\u010Dte kl\xE1ves ctrl a\xA0pos\xFAvajte",scrollMac:"Ak chcete pribl\xED\u017Ei\u0165 mapu, stla\u010Dte kl\xE1ves \u2318 a\xA0pos\xFAvajte kolieskom my\u0161i"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid pove\u010Date tako, da dr\u017Eite tipko Ctrl in vrtite kolesce na mi\u0161ki",scrollMac:"Uporabite \u2318 + funkcijo pomika, da pove\u010Date ali pomanj\u0161ate zemljevid"},sr:{touch:"\u041C\u0430\u043F\u0443 \u043F\u043E\u043C\u0435\u0440\u0430\u0458\u0442\u0435 \u043F\u043E\u043C\u043E\u045B\u0443 \u0434\u0432\u0430 \u043F\u0440\u0441\u0442\u0430",scroll:"\u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 ctrl \u0442\u0430\u0441\u0442\u0435\u0440 \u0434\u043E\u043A \u043F\u043E\u043C\u0435\u0440\u0430\u0442\u0435 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u0437\u0443\u043C\u0438\u0440\u0430\u043B\u0438 \u043C\u0430\u043F\u0443",scrollMac:"\u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 \u0442\u0430\u0441\u0442\u0435\u0440 \u2318 \u0434\u043E\u043A \u043F\u043E\u043C\u0435\u0440\u0430\u0442\u0435 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u0437\u0443\u043C\u0438\u0440\u0430\u043B\u0438 \u043C\u0430\u043F\u0443"},sv:{touch:"Anv\xE4nd tv\xE5 fingrar f\xF6r att flytta kartan",scroll:"Anv\xE4nd ctrl + rulla f\xF6r att zooma kartan",scrollMac:"Anv\xE4nd \u2318 + rulla f\xF6r att zooma p\xE5 kartan"},ta:{touch:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BA8\u0B95\u0BB0\u0BCD\u0BA4\u0BCD\u0BA4 \u0B87\u0BB0\u0BA3\u0BCD\u0B9F\u0BC1 \u0BB5\u0BBF\u0BB0\u0BB2\u0BCD\u0B95\u0BB3\u0BC8\u0BAA\u0BCD \u0BAA\u0BAF\u0BA9\u0BCD\u0BAA\u0B9F\u0BC1\u0BA4\u0BCD\u0BA4\u0BB5\u0BC1\u0BAE\u0BCD",scroll:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BAA\u0BC6\u0BB0\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF/\u0B9A\u0BBF\u0BB1\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF\u0BAA\u0BCD \u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95, ctrl \u0BAA\u0B9F\u0BCD\u0B9F\u0BA9\u0BC8\u0BAA\u0BCD \u0BAA\u0BBF\u0B9F\u0BBF\u0BA4\u0BCD\u0BA4\u0BAA\u0B9F\u0BBF, \u0BAE\u0BC7\u0BB2\u0BC7/\u0B95\u0BC0\u0BB4\u0BC7 \u0BB8\u0BCD\u0B95\u0BCD\u0BB0\u0BBE\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BCD\u0BAF\u0BB5\u0BC1\u0BAE\u0BCD",scrollMac:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BAA\u0BC6\u0BB0\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF/\u0B9A\u0BBF\u0BB1\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF\u0BAA\u0BCD \u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95, \u2318 \u0BAA\u0B9F\u0BCD\u0B9F\u0BA9\u0BC8\u0BAA\u0BCD \u0BAA\u0BBF\u0B9F\u0BBF\u0BA4\u0BCD\u0BA4\u0BAA\u0B9F\u0BBF, \u0BAE\u0BC7\u0BB2\u0BC7/\u0B95\u0BC0\u0BB4\u0BC7 \u0BB8\u0BCD\u0B95\u0BCD\u0BB0\u0BBE\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BCD\u0BAF\u0BB5\u0BC1\u0BAE\u0BCD"},te:{touch:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D\u200C\u0C28\u0C3F \u0C24\u0C30\u0C32\u0C3F\u0C02\u0C1A\u0C21\u0C02 \u0C15\u0C4B\u0C38\u0C02 \u0C30\u0C46\u0C02\u0C21\u0C41 \u0C35\u0C47\u0C33\u0C4D\u0C32\u0C28\u0C41 \u0C09\u0C2A\u0C2F\u0C4B\u0C17\u0C3F\u0C02\u0C1A\u0C02\u0C21\u0C3F",scroll:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D\u200C\u0C28\u0C3F \u0C1C\u0C42\u0C2E\u0C4D \u0C1A\u0C47\u0C2F\u0C21\u0C3E\u0C28\u0C3F\u0C15\u0C3F ctrl \u0C2C\u0C1F\u0C28\u0C4D\u200C\u0C28\u0C41 \u0C28\u0C4A\u0C15\u0C4D\u0C15\u0C3F \u0C09\u0C02\u0C1A\u0C3F, \u0C38\u0C4D\u0C15\u0C4D\u0C30\u0C4B\u0C32\u0C4D \u0C1A\u0C47\u0C2F\u0C02\u0C21\u0C3F",scrollMac:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D \u0C1C\u0C42\u0C2E\u0C4D \u0C1A\u0C47\u0C2F\u0C3E\u0C32\u0C02\u0C1F\u0C47 \u2318 + \u0C38\u0C4D\u0C15\u0C4D\u0C30\u0C4B\u0C32\u0C4D \u0C09\u0C2A\u0C2F\u0C4B\u0C17\u0C3F\u0C02\u0C1A\u0C02\u0C21\u0C3F"},th:{touch:"\u0E43\u0E0A\u0E49 2 \u0E19\u0E34\u0E49\u0E27\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48",scroll:"\u0E01\u0E14 Ctrl \u0E04\u0E49\u0E32\u0E07\u0E44\u0E27\u0E49 \u0E41\u0E25\u0E49\u0E27\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E0B\u0E39\u0E21\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48",scrollMac:"\u0E01\u0E14 \u2318 \u0E41\u0E25\u0E49\u0E27\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E0B\u0E39\u0E21\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang \u2318 + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek i\xE7in iki parma\u011F\u0131n\u0131z\u0131 kullan\u0131n",scroll:"Haritay\u0131 yak\u0131nla\u015Ft\u0131rmak i\xE7in ctrl + kayd\u0131rma kombinasyonunu kullan\u0131n",scrollMac:"Haritay\u0131 yak\u0131nla\u015Ft\u0131rmak i\xE7in \u2318 tu\u015Funa bas\u0131p ekran\u0131 kayd\u0131r\u0131n"},uk:{touch:"\u041F\u0435\u0440\u0435\u043C\u0456\u0449\u0443\u0439\u0442\u0435 \u043A\u0430\u0440\u0442\u0443 \u0434\u0432\u043E\u043C\u0430 \u043F\u0430\u043B\u044C\u0446\u044F\u043C\u0438",scroll:"\u0429\u043E\u0431 \u0437\u043C\u0456\u043D\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043A\u0430\u0440\u0442\u0438, \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0443\u0439\u0442\u0435 \u043A\u043E\u043B\u0456\u0449\u0430\u0442\u043A\u043E \u043C\u0438\u0448\u0456, \u0443\u0442\u0440\u0438\u043C\u0443\u044E\u0447\u0438 \u043A\u043B\u0430\u0432\u0456\u0448\u0443 Ctrl",scrollMac:"\u0429\u043E\u0431 \u0437\u043C\u0456\u043D\u0438\u0442\u0438 \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043A\u0430\u0440\u0442\u0438, \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 \u2318 + \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0443\u0432\u0430\u043D\u043D\u044F"},vi:{touch:"S\u1EED d\u1EE5ng hai ng\xF3n tay \u0111\u1EC3 di chuy\u1EC3n b\u1EA3n \u0111\u1ED3",scroll:"S\u1EED d\u1EE5ng ctrl + cu\u1ED9n \u0111\u1EC3 thu ph\xF3ng b\u1EA3n \u0111\u1ED3",scrollMac:"S\u1EED d\u1EE5ng \u2318 + cu\u1ED9n \u0111\u1EC3 thu ph\xF3ng b\u1EA3n \u0111\u1ED3"},"zh-CN":{touch:"\u4F7F\u7528\u53CC\u6307\u79FB\u52A8\u5730\u56FE",scroll:"\u6309\u4F4F Ctrl \u5E76\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u624D\u53EF\u7F29\u653E\u5730\u56FE",scrollMac:"\u6309\u4F4F \u2318 \u5E76\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u624D\u53EF\u7F29\u653E\u5730\u56FE"},"zh-TW":{touch:"\u540C\u6642\u4EE5\u5169\u6307\u79FB\u52D5\u5730\u5716",scroll:"\u6309\u4F4F ctrl \u9375\u52A0\u4E0A\u6372\u52D5\u6ED1\u9F20\u53EF\u4EE5\u7E2E\u653E\u5730\u5716",scrollMac:"\u6309 \u2318 \u52A0\u4E0A\u6EFE\u52D5\u6372\u8EF8\u53EF\u4EE5\u7E2E\u653E\u5730\u5716"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var bt=!1,wt=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(Et){Et.type=="movestart"||Et.type=="move"?bt=!0:Et.type=="moveend"&&(bt=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var Et;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)Et=this._map.options.gestureHandlingOptions.text;else{var kt=this._getUserLanguage();kt||(kt="en"),st[kt]&&(Et=st[kt]),Et||kt.indexOf("-")===-1||(kt=kt.split("-")[0],Et=st[kt]),Et||(Et=st[kt="en"])}var Lt=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(Lt=!0);var Ot=Et.scroll;Lt&&(Ot=Et.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",Et.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",Ot)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(Et){for(var kt=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],Lt=!1,Ot=0;Ot<kt.length;Ot++)L.DomUtil.hasClass(Et.target,kt[Ot])&&(Lt=!0);Lt?L.DomUtil.hasClass(Et.target,"leaflet-interactive")&&Et.type==="touchmove"&&Et.touches.length===1?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):Et.type==="touchmove"||Et.type==="touchstart"?Et.touches.length===1?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(Et.preventDefault(),this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(Et){Et.metaKey||Et.ctrlKey?(Et.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var kt=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),Lt=0;Lt<kt.length;Lt++)L.DomUtil.removeClass(kt[Lt],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(Et){this._enableInteractions()},_handleMouseOut:function(Et){bt||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",wt),it.GestureHandling=wt,it.default=wt,Object.defineProperty(it,"__esModule",{value:!0})})})(leafletGestureHandling_min,leafletGestureHandling_min.exports);L.Control.Opacity=L.Control.extend({options:{collapsed:!1,position:"topright",label:null},initialize:function(nt,rt){for(const it in L.Util.setOptions(this,rt),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,nt)this._addLayer(nt[it],it,!0)},onAdd:function(nt){return this._initLayout(),this._update(),this._container},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var nt=this._map.getSize().y-(this._container.offsetTop+50);return nt<this._form.clientHeight?(L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=nt+"px"):L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this},collapse:function(){return L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){const nt="leaflet-control-layers",rt=this._container=L.DomUtil.create("div",nt),it=this.options.collapsed;if(rt.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(rt),L.DomEvent.disableScrollPropagation(rt),this.options.label){const wt=L.DomUtil.create("p",nt+"-label");wt.innerHTML=this.options.label,rt.appendChild(wt)}var st=this._form=L.DomUtil.create("form",nt+"-list");it&&(this._map.on("click zoom move",this.collapse,this),L.Browser.android||L.DomEvent.on(rt,{mouseenter:this.expand,mouseleave:this.collapse},this));const bt=this._layersLink=L.DomUtil.create("a",nt+"-toggle",rt);bt.href="#",bt.title="Layers",L.Browser.touch?(L.DomEvent.on(bt,"click",L.DomEvent.stop),L.DomEvent.on(bt,"click",this.expand,this)):L.DomEvent.on(bt,"focus",this.expand,this),it||this.expand(),this._baseLayersList=L.DomUtil.create("div",nt+"-base",st),this._separator=L.DomUtil.create("div",nt+"-separator",st),this._overlaysList=L.DomUtil.create("div",nt+"-overlays",st),rt.appendChild(st)},_getLayer:function(nt){for(let rt=0;rt<this._layers.length;rt++)if(this._layers[rt]&&L.Util.stamp(this._layers[rt].layer)===nt)return this._layers[rt]},_addLayer:function(nt,rt,it){this._layers.push({layer:nt,name:rt,overlay:it})},_update:function(){if(!this._container)return this;L.DomUtil.empty(this._baseLayersList),L.DomUtil.empty(this._overlaysList),this._layerControlInputs=[];let nt,rt,it,st,bt=0;for(it=0;it<this._layers.length;it++)st=this._layers[it],this._addItem(st),rt=rt||st.overlay,nt=nt||!st.overlay,bt+=st.overlay?0:1;this.options.hideSingleBase&&(nt=nt&&1<bt,this._baseLayersList.style.display=nt?"":"none"),this._separator.style.display=rt&&nt?"":"none"},_addItem:function(nt){let rt=document.createElement("label"),it=document.createElement("input");nt.overlay?(it.type="range",it.className="leaflet-control-layers-range",it.min=0,it.max=100,it.value=100*nt.layer.options.opacity):it=this._createRadioElement("leaflet-base-layers",checked),this._layerControlInputs.push(it),it.layerId=L.Util.stamp(nt.layer),it.addEventListener("input",kt=>{kt=kt.target.value;const Lt=this._getLayer(it.layerId).layer;Lt._url===void 0||Lt.setOpacity(Number(kt/100))});const st=document.createElement("span");st.innerHTML=" "+nt.name;const bt=document.createElement("div"),wt=document.createElement("div");rt.appendChild(bt),bt.appendChild(st),rt.appendChild(wt),wt.appendChild(it),(nt.overlay?this._overlaysList:this._baseLayersList).appendChild(rt)}}),L.control.opacity=function(nt,rt){return new L.Control.Opacity(nt,rt)};var range_styles_default=i$4`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    --thumb-size: 20px;
    --tooltip-offset: 10px;
    --track-color-active: var(--sl-color-neutral-200);
    --track-color-inactive: var(--sl-color-neutral-200);
    --track-active-offset: 0%;
    --track-height: 6px;

    display: block;
  }

  .range {
    position: relative;
  }

  .range__control {
    --percent: 0%;
    -webkit-appearance: none;
    border-radius: 3px;
    width: 100%;
    height: var(--track-height);
    background: transparent;
    line-height: var(--sl-input-height-medium);
    vertical-align: middle;
    margin: 0;

    background-image: linear-gradient(
      to right,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  .range--rtl .range__control {
    background-image: linear-gradient(
      to left,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  /* Webkit */
  .range__control::-webkit-slider-runnable-track {
    width: 100%;
    height: var(--track-height);
    border-radius: 3px;
    border: none;
  }

  .range__control::-webkit-slider-thumb {
    border: none;
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border: solid var(--sl-input-border-width) var(--sl-color-primary-600);
    -webkit-appearance: none;
    margin-top: calc(var(--thumb-size) / -2 + var(--track-height) / 2);
    cursor: pointer;
  }

  .range__control:enabled::-webkit-slider-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-webkit-slider-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-webkit-slider-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* Firefox */
  .range__control::-moz-focus-outer {
    border: 0;
  }

  .range__control::-moz-range-progress {
    background-color: var(--track-color-active);
    border-radius: 3px;
    height: var(--track-height);
  }

  .range__control::-moz-range-track {
    width: 100%;
    height: var(--track-height);
    background-color: var(--track-color-inactive);
    border-radius: 3px;
    border: none;
  }

  .range__control::-moz-range-thumb {
    border: none;
    height: var(--thumb-size);
    width: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .range__control:enabled::-moz-range-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-moz-range-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-moz-range-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* States */
  .range__control:focus-visible {
    outline: none;
  }

  .range__control:disabled {
    opacity: 0.5;
  }

  .range__control:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
  }

  .range__control:disabled::-moz-range-thumb {
    cursor: not-allowed;
  }

  /* Tooltip output */
  .range__tooltip {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    left: 0;
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    opacity: 0;
    padding: var(--sl-tooltip-padding);
    transition: var(--sl-transition-fast) opacity;
    pointer-events: none;
  }

  .range__tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 50%;
    translate: calc(-1 * var(--sl-tooltip-arrow-size));
  }

  .range--tooltip-visible .range__tooltip {
    opacity: 1;
  }

  /* Tooltip on top */
  .range--tooltip-top .range__tooltip {
    top: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-top .range__tooltip:after {
    border-top: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    top: 100%;
  }

  /* Tooltip on bottom */
  .range--tooltip-bottom .range__tooltip {
    bottom: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-bottom .range__tooltip:after {
    border-bottom: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    bottom: 100%;
  }

  @media (forced-colors: active) {
    .range__control,
    .range__tooltip {
      border: solid 1px transparent;
    }

    .range__control::-webkit-slider-thumb {
      border: solid 1px transparent;
    }

    .range__control::-moz-range-thumb {
      border: solid 1px transparent;
    }

    .range__tooltip:after {
      display: none;
    }
  }
`,SlRange=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.hasTooltip=!1,this.invalid=!1,this.title="",this.name="",this.value=0,this.label="",this.helpText="",this.disabled=!1,this.min=0,this.max=100,this.step=1,this.tooltip="top",this.tooltipFormatter=nt=>nt.toString(),this.defaultValue=0}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.syncRange()),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),this.updateComplete.then(()=>{this.syncRange(),this.resizeObserver.observe(this.input)})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this.input)}handleChange(){this.emit("sl-change")}handleInput(){this.value=parseFloat(this.input.value),this.emit("sl-input"),this.syncRange()}handleBlur(){this.hasFocus=!1,this.hasTooltip=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.hasTooltip=!0,this.emit("sl-focus")}handleThumbDragStart(){this.hasTooltip=!0}handleThumbDragEnd(){this.hasTooltip=!1}syncProgress(nt){this.input.style.setProperty("--percent",`${nt*100}%`)}syncTooltip(nt){if(this.output!==null){const rt=this.input.offsetWidth,it=this.output.offsetWidth,st=getComputedStyle(this.input).getPropertyValue("--thumb-size"),bt=this.localize.dir()==="rtl",wt=rt*nt;if(bt){const Et=`${rt-wt}px + ${nt} * ${st}`;this.output.style.translate=`calc((${Et} - ${it/2}px - ${st} / 2))`}else{const Et=`${wt}px - ${nt} * ${st}`;this.output.style.translate=`calc(${Et} - ${it/2}px + ${st} / 2)`}}}handleValueChange(){this.invalid=!this.checkValidity(),this.input.value=this.value.toString(),this.value=parseFloat(this.input.value),this.syncRange()}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.checkValidity()}syncRange(){const nt=Math.max(0,(this.value-this.min)/(this.max-this.min));this.syncProgress(nt),this.tooltip!=="none"&&this.syncTooltip(nt)}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}stepUp(){this.input.stepUp(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}stepDown(){this.input.stepDown(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.invalid=!this.checkValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt;return y$2`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--medium":!0,"form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({range:!0,"range--disabled":this.disabled,"range--focused":this.hasFocus,"range--rtl":this.localize.dir()==="rtl","range--tooltip-visible":this.hasTooltip,"range--tooltip-top":this.tooltip==="top","range--tooltip-bottom":this.tooltip==="bottom"})}
            @mousedown=${this.handleThumbDragStart}
            @mouseup=${this.handleThumbDragEnd}
            @touchstart=${this.handleThumbDragStart}
            @touchend=${this.handleThumbDragEnd}
          >
            <input
              part="input"
              id="input"
              class="range__control"
              title=${this.title}
              type="range"
              name=${l$2(this.name)}
              ?disabled=${this.disabled}
              min=${l$2(this.min)}
              max=${l$2(this.max)}
              step=${l$2(this.step)}
              .value=${l2$1(this.value.toString())}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />
            ${this.tooltip!=="none"&&!this.disabled?y$2`
                  <output part="tooltip" class="range__tooltip">
                    ${typeof this.tooltipFormatter=="function"?this.tooltipFormatter(this.value):this.value}
                  </output>
                `:""}
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          ${this.helpText}
        </slot>
      </div>
    `}};SlRange.styles=range_styles_default;__decorateClass([i2$2(".range__control")],SlRange.prototype,"input",2);__decorateClass([i2$2(".range__tooltip")],SlRange.prototype,"output",2);__decorateClass([t$1()],SlRange.prototype,"hasFocus",2);__decorateClass([t$1()],SlRange.prototype,"hasTooltip",2);__decorateClass([t$1()],SlRange.prototype,"invalid",2);__decorateClass([e2$2()],SlRange.prototype,"title",2);__decorateClass([e2$2()],SlRange.prototype,"name",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"value",2);__decorateClass([e2$2()],SlRange.prototype,"label",2);__decorateClass([e2$2({attribute:"help-text"})],SlRange.prototype,"helpText",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlRange.prototype,"disabled",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"min",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"max",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"step",2);__decorateClass([e2$2()],SlRange.prototype,"tooltip",2);__decorateClass([e2$2({attribute:!1})],SlRange.prototype,"tooltipFormatter",2);__decorateClass([defaultValue()],SlRange.prototype,"defaultValue",2);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleValueChange",1);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleDisabledChange",1);__decorateClass([watch("hasTooltip",{waitUntilFirstUpdate:!0})],SlRange.prototype,"syncRange",1);SlRange=__decorateClass([e$1("sl-range")],SlRange);(function(nt,rt){typeof exports=="object"&&typeof module<"u"?rt(exports):typeof define=="function"&&define.amd?define(["exports"],rt):rt((nt=typeof globalThis<"u"?globalThis:nt||self).turf={})})(globalThis,function(nt){var rt=63710088e-1,it={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*rt,kilometers:6371.0088,kilometres:6371.0088,meters:rt,metres:rt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:rt/1852,radians:1,yards:6967335223679999e-9},st={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/rt,yards:1.0936133},bt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function wt(vt,_t,xt){xt===void 0&&(xt={});var Tt={type:"Feature"};return(xt.id===0||xt.id)&&(Tt.id=xt.id),xt.bbox&&(Tt.bbox=xt.bbox),Tt.properties=_t||{},Tt.geometry=vt,Tt}function Et(vt,_t,xt){switch(vt){case"Point":return kt(_t).geometry;case"LineString":return Dt(_t).geometry;case"Polygon":return Ot(_t).geometry;case"MultiPoint":return Jt(_t).geometry;case"MultiLineString":return Yt(_t).geometry;case"MultiPolygon":return Wt(_t).geometry;default:throw new Error(vt+" is invalid")}}function kt(vt,_t,xt){if(xt===void 0&&(xt={}),!vt)throw new Error("coordinates is required");if(!Array.isArray(vt))throw new Error("coordinates must be an Array");if(vt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ln(vt[0])||!Ln(vt[1]))throw new Error("coordinates must contain numbers");return wt({type:"Point",coordinates:vt},_t,xt)}function Lt(vt,_t,xt){return xt===void 0&&(xt={}),Ft(vt.map(function(Tt){return kt(Tt,_t)}),xt)}function Ot(vt,_t,xt){xt===void 0&&(xt={});for(var Tt=0,At=vt;Tt<At.length;Tt++){var Pt=At[Tt];if(Pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Nt=0;Nt<Pt[Pt.length-1].length;Nt++)if(Pt[Pt.length-1][Nt]!==Pt[0][Nt])throw new Error("First and last Position are not equivalent.")}return wt({type:"Polygon",coordinates:vt},_t,xt)}function Rt(vt,_t,xt){return xt===void 0&&(xt={}),Ft(vt.map(function(Tt){return Ot(Tt,_t)}),xt)}function Dt(vt,_t,xt){if(xt===void 0&&(xt={}),vt.length<2)throw new Error("coordinates must be an array of two or more positions");return wt({type:"LineString",coordinates:vt},_t,xt)}function Bt(vt,_t,xt){return xt===void 0&&(xt={}),Ft(vt.map(function(Tt){return Dt(Tt,_t)}),xt)}function Ft(vt,_t){_t===void 0&&(_t={});var xt={type:"FeatureCollection"};return _t.id&&(xt.id=_t.id),_t.bbox&&(xt.bbox=_t.bbox),xt.features=vt,xt}function Yt(vt,_t,xt){return xt===void 0&&(xt={}),wt({type:"MultiLineString",coordinates:vt},_t,xt)}function Jt(vt,_t,xt){return xt===void 0&&(xt={}),wt({type:"MultiPoint",coordinates:vt},_t,xt)}function Wt(vt,_t,xt){return xt===void 0&&(xt={}),wt({type:"MultiPolygon",coordinates:vt},_t,xt)}function Qt(vt,_t,xt){return xt===void 0&&(xt={}),wt({type:"GeometryCollection",geometries:vt},_t,xt)}function rn(vt,_t){if(_t===void 0&&(_t=0),_t&&!(_t>=0))throw new Error("precision must be a positive number");var xt=Math.pow(10,_t||0);return Math.round(vt*xt)/xt}function sn(vt,_t){_t===void 0&&(_t="kilometers");var xt=it[_t];if(!xt)throw new Error(_t+" units is invalid");return vt*xt}function on(vt,_t){_t===void 0&&(_t="kilometers");var xt=it[_t];if(!xt)throw new Error(_t+" units is invalid");return vt/xt}function hn(vt,_t){return Cn(on(vt,_t))}function mn(vt){var _t=vt%360;return _t<0&&(_t+=360),_t}function Cn(vt){return 180*(vt%(2*Math.PI))/Math.PI}function Tn(vt){return vt%360*Math.PI/180}function kn(vt,_t,xt){if(_t===void 0&&(_t="kilometers"),xt===void 0&&(xt="kilometers"),!(vt>=0))throw new Error("length must be a positive number");return sn(on(vt,_t),xt)}function In(vt,_t,xt){if(_t===void 0&&(_t="meters"),xt===void 0&&(xt="kilometers"),!(vt>=0))throw new Error("area must be a positive number");var Tt=bt[_t];if(!Tt)throw new Error("invalid original units");var At=bt[xt];if(!At)throw new Error("invalid final units");return vt/Tt*At}function Ln(vt){return!isNaN(vt)&&vt!==null&&!Array.isArray(vt)}function pn(vt){return!!vt&&vt.constructor===Object}function Hn(vt){if(!vt)throw new Error("bbox is required");if(!Array.isArray(vt))throw new Error("bbox must be an Array");if(vt.length!==4&&vt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");vt.forEach(function(_t){if(!Ln(_t))throw new Error("bbox must only contain numbers")})}function yn(vt){if(!vt)throw new Error("id is required");if(["string","number"].indexOf(typeof vt)===-1)throw new Error("id must be a number or a string")}var mr=Object.freeze({__proto__:null,earthRadius:rt,factors:it,unitsFactors:st,areaFactors:bt,feature:wt,geometry:Et,point:kt,points:Lt,polygon:Ot,polygons:Rt,lineString:Dt,lineStrings:Bt,featureCollection:Ft,multiLineString:Yt,multiPoint:Jt,multiPolygon:Wt,geometryCollection:Qt,round:rn,radiansToLength:sn,lengthToRadians:on,lengthToDegrees:hn,bearingToAzimuth:mn,radiansToDegrees:Cn,degreesToRadians:Tn,convertLength:kn,convertArea:In,isNumber:Ln,isObject:pn,validateBBox:Hn,validateId:yn});function vn(vt,_t,xt){if(vt!==null)for(var Tt,At,Pt,Nt,Vt,Gt,qt,en,Xt=0,an=0,_n=vt.type,bn=_n==="FeatureCollection",En=_n==="Feature",un=bn?vt.features.length:1,Vn=0;Vn<un;Vn++){Vt=(en=!!(qt=bn?vt.features[Vn].geometry:En?vt.geometry:vt)&&qt.type==="GeometryCollection")?qt.geometries.length:1;for(var nr=0;nr<Vt;nr++){var xn=0,zn=0;if((Nt=en?qt.geometries[nr]:qt)!==null){Gt=Nt.coordinates;var jn=Nt.type;switch(Xt=!xt||jn!=="Polygon"&&jn!=="MultiPolygon"?0:1,jn){case null:break;case"Point":if(_t(Gt,an,Vn,xn,zn)===!1)return!1;an++,xn++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<Gt.length;Tt++){if(_t(Gt[Tt],an,Vn,xn,zn)===!1)return!1;an++,jn==="MultiPoint"&&xn++}jn==="LineString"&&xn++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<Gt.length;Tt++){for(At=0;At<Gt[Tt].length-Xt;At++){if(_t(Gt[Tt][At],an,Vn,xn,zn)===!1)return!1;an++}jn==="MultiLineString"&&xn++,jn==="Polygon"&&zn++}jn==="Polygon"&&xn++;break;case"MultiPolygon":for(Tt=0;Tt<Gt.length;Tt++){for(zn=0,At=0;At<Gt[Tt].length;At++){for(Pt=0;Pt<Gt[Tt][At].length-Xt;Pt++){if(_t(Gt[Tt][At][Pt],an,Vn,xn,zn)===!1)return!1;an++}zn++}xn++}break;case"GeometryCollection":for(Tt=0;Tt<Nt.geometries.length;Tt++)if(vn(Nt.geometries[Tt],_t,xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yr(vt,_t,xt,Tt){var At=xt;return vn(vt,function(Pt,Nt,Vt,Gt,qt){At=Nt===0&&xt===void 0?Pt:_t(At,Pt,Nt,Vt,Gt,qt)},Tt),At}function Tr(vt,_t){var xt;switch(vt.type){case"FeatureCollection":for(xt=0;xt<vt.features.length&&_t(vt.features[xt].properties,xt)!==!1;xt++);break;case"Feature":_t(vt.properties,0)}}function Mr(vt,_t,xt){var Tt=xt;return Tr(vt,function(At,Pt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt)}),Tt}function rr(vt,_t){if(vt.type==="Feature")_t(vt,0);else if(vt.type==="FeatureCollection")for(var xt=0;xt<vt.features.length&&_t(vt.features[xt],xt)!==!1;xt++);}function wr(vt,_t,xt){var Tt=xt;return rr(vt,function(At,Pt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt)}),Tt}function fr(vt){var _t=[];return vn(vt,function(xt){_t.push(xt)}),_t}function gr(vt,_t){var xt,Tt,At,Pt,Nt,Vt,Gt,qt,en,Xt,an=0,_n=vt.type==="FeatureCollection",bn=vt.type==="Feature",En=_n?vt.features.length:1;for(xt=0;xt<En;xt++){for(Vt=_n?vt.features[xt].geometry:bn?vt.geometry:vt,qt=_n?vt.features[xt].properties:bn?vt.properties:{},en=_n?vt.features[xt].bbox:bn?vt.bbox:void 0,Xt=_n?vt.features[xt].id:bn?vt.id:void 0,Nt=(Gt=!!Vt&&Vt.type==="GeometryCollection")?Vt.geometries.length:1,At=0;At<Nt;At++)if((Pt=Gt?Vt.geometries[At]:Vt)!==null)switch(Pt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_t(Pt,an,qt,en,Xt)===!1)return!1;break;case"GeometryCollection":for(Tt=0;Tt<Pt.geometries.length;Tt++)if(_t(Pt.geometries[Tt],an,qt,en,Xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_t(null,an,qt,en,Xt)===!1)return!1;an++}}function Lr(vt,_t,xt){var Tt=xt;return gr(vt,function(At,Pt,Nt,Vt,Gt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt,Nt,Vt,Gt)}),Tt}function Pr(vt,_t){gr(vt,function(xt,Tt,At,Pt,Nt){var Vt,Gt=xt===null?null:xt.type;switch(Gt){case null:case"Point":case"LineString":case"Polygon":return _t(wt(xt,At,{bbox:Pt,id:Nt}),Tt,0)!==!1&&void 0}switch(Gt){case"MultiPoint":Vt="Point";break;case"MultiLineString":Vt="LineString";break;case"MultiPolygon":Vt="Polygon"}for(var qt=0;qt<xt.coordinates.length;qt++){var en=xt.coordinates[qt];if(_t(wt({type:Vt,coordinates:en},At),Tt,qt)===!1)return!1}})}function lr(vt,_t,xt){var Tt=xt;return Pr(vt,function(At,Pt,Nt){Tt=Pt===0&&Nt===0&&xt===void 0?At:_t(Tt,At,Pt,Nt)}),Tt}function qr(vt,_t){Pr(vt,function(xt,Tt,At){var Pt=0;if(xt.geometry){var Nt=xt.geometry.type;if(Nt!=="Point"&&Nt!=="MultiPoint"){var Vt,Gt=0,qt=0,en=0;return vn(xt,function(Xt,an,_n,bn,En){if(Vt===void 0||Tt>Gt||bn>qt||En>en)return Vt=Xt,Gt=Tt,qt=bn,en=En,void(Pt=0);var un=Dt([Vt,Xt],xt.properties);if(_t(un,Tt,At,En,Pt)===!1)return!1;Pt++,Vt=Xt})!==!1&&void 0}}})}function sr(vt,_t,xt){var Tt=xt,At=!1;return qr(vt,function(Pt,Nt,Vt,Gt,qt){Tt=At===!1&&xt===void 0?Pt:_t(Tt,Pt,Nt,Vt,Gt,qt),At=!0}),Tt}function pr(vt,_t){if(!vt)throw new Error("geojson is required");Pr(vt,function(xt,Tt,At){if(xt.geometry!==null){var Pt=xt.geometry.type,Nt=xt.geometry.coordinates;switch(Pt){case"LineString":if(_t(xt,Tt,At,0,0)===!1)return!1;break;case"Polygon":for(var Vt=0;Vt<Nt.length;Vt++)if(_t(Dt(Nt[Vt],xt.properties),Tt,At,Vt)===!1)return!1}}})}function Er(vt,_t,xt){var Tt=xt;return pr(vt,function(At,Pt,Nt,Vt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt,Nt,Vt)}),Tt}function ir(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Pt=_t.geometryIndex||0,Nt=_t.segmentIndex||0,Vt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),Vt=Vt||vt.features[Tt].properties,xt=vt.features[Tt].geometry;break;case"Feature":Vt=Vt||vt.properties,xt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=vt;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var Gt=xt.coordinates;switch(xt.type){case"Point":case"MultiPoint":return null;case"LineString":return Nt<0&&(Nt=Gt.length+Nt-1),Dt([Gt[Nt],Gt[Nt+1]],Vt,_t);case"Polygon":return Pt<0&&(Pt=Gt.length+Pt),Nt<0&&(Nt=Gt[Pt].length+Nt-1),Dt([Gt[Pt][Nt],Gt[Pt][Nt+1]],Vt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt-1),Dt([Gt[At][Nt],Gt[At][Nt+1]],Vt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Pt<0&&(Pt=Gt[At].length+Pt),Nt<0&&(Nt=Gt[At][Pt].length-Nt-1),Dt([Gt[At][Pt][Nt],Gt[At][Pt][Nt+1]],Vt,_t)}throw new Error("geojson is invalid")}function Pn(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Pt=_t.geometryIndex||0,Nt=_t.coordIndex||0,Vt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),Vt=Vt||vt.features[Tt].properties,xt=vt.features[Tt].geometry;break;case"Feature":Vt=Vt||vt.properties,xt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=vt;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var Gt=xt.coordinates;switch(xt.type){case"Point":return kt(Gt,Vt,_t);case"MultiPoint":return At<0&&(At=Gt.length+At),kt(Gt[At],Vt,_t);case"LineString":return Nt<0&&(Nt=Gt.length+Nt),kt(Gt[Nt],Vt,_t);case"Polygon":return Pt<0&&(Pt=Gt.length+Pt),Nt<0&&(Nt=Gt[Pt].length+Nt),kt(Gt[Pt][Nt],Vt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt),kt(Gt[At][Nt],Vt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Pt<0&&(Pt=Gt[At].length+Pt),Nt<0&&(Nt=Gt[At][Pt].length-Nt),kt(Gt[At][Pt][Nt],Vt,_t)}throw new Error("geojson is invalid")}var nn=Object.freeze({__proto__:null,coordAll:fr,coordEach:vn,coordReduce:yr,featureEach:rr,featureReduce:wr,findPoint:Pn,findSegment:ir,flattenEach:Pr,flattenReduce:lr,geomEach:gr,geomReduce:Lr,lineEach:pr,lineReduce:Er,propEach:Tr,propReduce:Mr,segmentEach:qr,segmentReduce:sr});function fn(vt){var _t=[1/0,1/0,-1/0,-1/0];return vn(vt,function(xt){_t[0]>xt[0]&&(_t[0]=xt[0]),_t[1]>xt[1]&&(_t[1]=xt[1]),_t[2]<xt[0]&&(_t[2]=xt[0]),_t[3]<xt[1]&&(_t[3]=xt[1])}),_t}function cn(vt){if(!vt)throw new Error("coord is required");if(!Array.isArray(vt)){if(vt.type==="Feature"&&vt.geometry!==null&&vt.geometry.type==="Point")return vt.geometry.coordinates;if(vt.type==="Point")return vt.coordinates}if(Array.isArray(vt)&&vt.length>=2&&!Array.isArray(vt[0])&&!Array.isArray(vt[1]))return vt;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Nn(vt){if(Array.isArray(vt))return vt;if(vt.type==="Feature"){if(vt.geometry!==null)return vt.geometry.coordinates}else if(vt.coordinates)return vt.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function On(vt){if(vt.length>1&&Ln(vt[0])&&Ln(vt[1]))return!0;if(Array.isArray(vt[0])&&vt[0].length)return On(vt[0]);throw new Error("coordinates must only contain numbers")}function cr(vt,_t,xt){if(!_t||!xt)throw new Error("type and name required");if(!vt||vt.type!==_t)throw new Error("Invalid input to "+xt+": must be a "+_t+", given "+vt.type)}function Bn(vt,_t,xt){if(!vt)throw new Error("No feature passed");if(!xt)throw new Error(".featureOf() requires a name");if(!vt||vt.type!=="Feature"||!vt.geometry)throw new Error("Invalid input to "+xt+", Feature with geometry required");if(!vt.geometry||vt.geometry.type!==_t)throw new Error("Invalid input to "+xt+": must be a "+_t+", given "+vt.geometry.type)}function Qn(vt,_t,xt){if(!vt)throw new Error("No featureCollection passed");if(!xt)throw new Error(".collectionOf() requires a name");if(!vt||vt.type!=="FeatureCollection")throw new Error("Invalid input to "+xt+", FeatureCollection required");for(var Tt=0,At=vt.features;Tt<At.length;Tt++){var Pt=At[Tt];if(!Pt||Pt.type!=="Feature"||!Pt.geometry)throw new Error("Invalid input to "+xt+", Feature with geometry required");if(!Pt.geometry||Pt.geometry.type!==_t)throw new Error("Invalid input to "+xt+": must be a "+_t+", given "+Pt.geometry.type)}}function Un(vt){return vt.type==="Feature"?vt.geometry:vt}function or(vt,_t){return vt.type==="FeatureCollection"?"FeatureCollection":vt.type==="GeometryCollection"?"GeometryCollection":vt.type==="Feature"&&vt.geometry!==null?vt.geometry.type:vt.type}fn.default=fn;var hr=Object.freeze({__proto__:null,getCoord:cn,getCoords:Nn,containsNumber:On,geojsonType:cr,featureOf:Bn,collectionOf:Qn,getGeom:Un,getType:or}),kr=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable;/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function hi(vt){if(vt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(vt)}var di=function(){try{if(!Object.assign)return!1;var vt=new String("abc");if(vt[5]="de",Object.getOwnPropertyNames(vt)[0]==="5")return!1;for(var _t={},xt=0;xt<10;xt++)_t["_"+String.fromCharCode(xt)]=xt;if(Object.getOwnPropertyNames(_t).map(function(At){return _t[At]}).join("")!=="0123456789")return!1;var Tt={};return"abcdefghijklmnopqrst".split("").forEach(function(At){Tt[At]=At}),Object.keys(Object.assign({},Tt)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(vt,_t){for(var xt,Tt,At=hi(vt),Pt=1;Pt<arguments.length;Pt++){for(var Nt in xt=Object(arguments[Pt]))xr.call(xt,Nt)&&(At[Nt]=xt[Nt]);if(kr){Tt=kr(xt);for(var Vt=0;Vt<Tt.length;Vt++)br.call(xt,Tt[Vt])&&(At[Tt[Vt]]=xt[Tt[Vt]])}}return At},vi={successCallback:null,verbose:!1},Ti={};/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function ki(vt,_t,xt){xt=xt||{};for(var Tt=Object.keys(vi),At=0;At<Tt.length;At++){var Pt=Tt[At],Nt=xt[Pt];Nt=Nt!=null?Nt:vi[Pt],Ti[Pt]=Nt}Ti.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+_t);var Vt=function(Gt){var qt=[],en=0,Xt=1e-7;return Gt.cells.forEach(function(an,_n){an.forEach(function(bn,En){if(bn!==void 0&&(qn=bn).cval!==5&&qn.cval!==10&&!Ci(bn)){var un=function(Gn,Zr,Fr){var ei,zr,si=Gn.length,Wr=[],Gr=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],Vr=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],ni=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],Yr=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],ai=Gn[Zr][Fr],Cr=ai.cval,Ki=ni[Cr],Si=An(ai,Ki);Wr.push([Fr+Si[0],Zr+Si[1]]),Ki=Yr[Cr],Si=An(ai,Ki),Wr.push([Fr+Si[0],Zr+Si[1]]),$r(ai);for(var Ro=Fr+Gr[Cr],Wi=Zr+Vr[Cr],ho=Cr;Ro>=0&&Wi>=0&&Wi<si&&(Ro!=Fr||Wi!=Zr)&&(ai=Gn[Wi][Ro])!==void 0;){if((Cr=ai.cval)===0||Cr===15)return{path:Wr,info:"mergeable"};Ki=Yr[Cr],ei=Gr[Cr],zr=Vr[Cr],Cr!==5&&Cr!==10||(Cr===5?ai.flipped?Vr[ho]===-1?(Ki="left",ei=-1,zr=0):(Ki="right",ei=1,zr=0):Gr[ho]===-1&&(Ki="bottom",ei=0,zr=-1):Cr===10&&(ai.flipped?Gr[ho]===-1?(Ki="top",ei=0,zr=1):(Ki="bottom",ei=0,zr=-1):Vr[ho]===1&&(Ki="left",ei=-1,zr=0))),Si=An(ai,Ki),Wr.push([Ro+Si[0],Wi+Si[1]]),$r(ai),Ro+=ei,Wi+=zr,ho=Cr}return{path:Wr,info:"closed"}}(Gt.cells,_n,En),Vn=!1;if(un.info==="mergeable"){for(var nr=un.path[un.path.length-1][0],xn=un.path[un.path.length-1][1],zn=en-1;zn>=0;zn--)if(Math.abs(qt[zn][0][0]-nr)<=Xt&&Math.abs(qt[zn][0][1]-xn)<=Xt){for(var jn=un.path.length-2;jn>=0;--jn)qt[zn].unshift(un.path[jn]);Vn=!0;break}}Vn||(qt[en++]=un.path)}var qn})}),qt}(function(Gt,qt){for(var en=Gt.length-1,Xt=Gt[0].length-1,an={rows:en,cols:Xt,cells:[]},_n=0;_n<en;++_n){an.cells[_n]=[];for(var bn=0;bn<Xt;++bn){var En=0,un=Gt[_n+1][bn],Vn=Gt[_n+1][bn+1],nr=Gt[_n][bn+1],xn=Gt[_n][bn];if(!(isNaN(un)||isNaN(Vn)||isNaN(nr)||isNaN(xn))){En|=un>=qt?8:0,En|=Vn>=qt?4:0,En|=nr>=qt?2:0;var zn,jn,qn,Gn,Zr=!1;if((En|=xn>=qt?1:0)===5||En===10){var Fr=(un+Vn+nr+xn)/4;En===5&&Fr<qt?(En=10,Zr=!0):En===10&&Fr<qt&&(En=5,Zr=!0)}En!==0&&En!==15&&(zn=jn=qn=Gn=.5,En===1?(qn=1-Di(qt,un,xn),jn=1-Di(qt,nr,xn)):En===2?(jn=Di(qt,xn,nr),Gn=1-Di(qt,Vn,nr)):En===3?(qn=1-Di(qt,un,xn),Gn=1-Di(qt,Vn,nr)):En===4?(zn=Di(qt,un,Vn),Gn=Di(qt,nr,Vn)):En===5?(zn=Di(qt,un,Vn),Gn=Di(qt,nr,Vn),jn=1-Di(qt,nr,xn),qn=1-Di(qt,un,xn)):En===6?(jn=Di(qt,xn,nr),zn=Di(qt,un,Vn)):En===7?(qn=1-Di(qt,un,xn),zn=Di(qt,un,Vn)):En===8?(qn=Di(qt,xn,un),zn=1-Di(qt,Vn,un)):En===9?(jn=1-Di(qt,nr,xn),zn=1-Di(qt,Vn,un)):En===10?(zn=1-Di(qt,Vn,un),Gn=1-Di(qt,Vn,nr),jn=Di(qt,xn,nr),qn=Di(qt,xn,un)):En===11?(zn=1-Di(qt,Vn,un),Gn=1-Di(qt,Vn,nr)):En===12?(qn=Di(qt,xn,un),Gn=Di(qt,nr,Vn)):En===13?(jn=1-Di(qt,nr,xn),Gn=Di(qt,nr,Vn)):En===14?(qn=Di(qt,xn,un),jn=Di(qt,xn,nr)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+En),an.cells[_n][bn]={cval:En,flipped:Zr,top:zn,right:Gn,bottom:jn,left:qn})}}}return an}(vt,_t));return typeof Ti.successCallback=="function"&&Ti.successCallback(Vt),Vt}function Di(vt,_t,xt){return(vt-_t)/(xt-_t)}function Ci(vt){return vt.cval===0||vt.cval===15}function $r(vt){Ci(vt)||vt.cval===5||vt.cval===10||(vt.cval=15)}function An(vt,_t){return _t==="top"?[vt.top,1]:_t==="bottom"?[vt.bottom,0]:_t==="right"?[1,vt.right]:_t==="left"?[0,vt.left]:void 0}function Sn(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.zProperty||"elevation",Tt=_t.flip,At=_t.flags;Qn(vt,"Point","input must contain Points");for(var Pt=function(an,_n){var bn={};return rr(an,function(En){var un=Nn(En)[1];bn[un]||(bn[un]=[]),bn[un].push(En)}),Object.keys(bn).map(function(En){return bn[En].sort(function(un,Vn){return Nn(un)[0]-Nn(Vn)[0]})}).sort(function(En,un){return _n?Nn(En[0])[1]-Nn(un[0])[1]:Nn(un[0])[1]-Nn(En[0])[1]})}(vt,Tt),Nt=[],Vt=0;Vt<Pt.length;Vt++){for(var Gt=Pt[Vt],qt=[],en=0;en<Gt.length;en++){var Xt=Gt[en];Xt.properties[xt]?qt.push(Xt.properties[xt]):qt.push(0),At===!0&&(Xt.properties.matrixPosition=[Vt,en])}Nt.push(qt)}return Nt}var Wn=vr,er=vr;function vr(vt,_t,xt,Tt,At){ti(vt,_t,xt||0,Tt||vt.length-1,At||li)}function ti(vt,_t,xt,Tt,At){for(;Tt>xt;){if(Tt-xt>600){var Pt=Tt-xt+1,Nt=_t-xt+1,Vt=Math.log(Pt),Gt=.5*Math.exp(2*Vt/3),qt=.5*Math.sqrt(Vt*Gt*(Pt-Gt)/Pt)*(Nt-Pt/2<0?-1:1);ti(vt,_t,Math.max(xt,Math.floor(_t-Nt*Gt/Pt+qt)),Math.min(Tt,Math.floor(_t+(Pt-Nt)*Gt/Pt+qt)),At)}var en=vt[_t],Xt=xt,an=Tt;for(_r(vt,xt,_t),At(vt[Tt],en)>0&&_r(vt,xt,Tt);Xt<an;){for(_r(vt,Xt,an),Xt++,an--;At(vt[Xt],en)<0;)Xt++;for(;At(vt[an],en)>0;)an--}At(vt[xt],en)===0?_r(vt,xt,an):_r(vt,++an,Tt),an<=_t&&(xt=an+1),_t<=an&&(Tt=an-1)}}function _r(vt,_t,xt){var Tt=vt[_t];vt[_t]=vt[xt],vt[xt]=Tt}function li(vt,_t){return vt<_t?-1:vt>_t?1:0}Wn.default=er;var Or=_i,mi=_i;function _i(vt,_t){if(!(this instanceof _i))return new _i(vt,_t);this._maxEntries=Math.max(4,vt||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),_t&&this._initFormat(_t),this.clear()}function Pi(vt,_t,xt){if(!xt)return _t.indexOf(vt);for(var Tt=0;Tt<_t.length;Tt++)if(xt(vt,_t[Tt]))return Tt;return-1}function xi(vt,_t){Zi(vt,0,vt.children.length,_t,vt)}function Zi(vt,_t,xt,Tt,At){At||(At=io(null)),At.minX=1/0,At.minY=1/0,At.maxX=-1/0,At.maxY=-1/0;for(var Pt,Nt=_t;Nt<xt;Nt++)Pt=vt.children[Nt],$i(At,vt.leaf?Tt(Pt):Pt);return At}function $i(vt,_t){return vt.minX=Math.min(vt.minX,_t.minX),vt.minY=Math.min(vt.minY,_t.minY),vt.maxX=Math.max(vt.maxX,_t.maxX),vt.maxY=Math.max(vt.maxY,_t.maxY),vt}function Qi(vt,_t){return vt.minX-_t.minX}function Eo(vt,_t){return vt.minY-_t.minY}function to(vt){return(vt.maxX-vt.minX)*(vt.maxY-vt.minY)}function Za(vt){return vt.maxX-vt.minX+(vt.maxY-vt.minY)}function Hs(vt,_t){return vt.minX<=_t.minX&&vt.minY<=_t.minY&&_t.maxX<=vt.maxX&&_t.maxY<=vt.maxY}function Ai(vt,_t){return _t.minX<=vt.maxX&&_t.minY<=vt.maxY&&_t.maxX>=vt.minX&&_t.maxY>=vt.minY}function io(vt){return{children:vt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Fs(vt,_t,xt,Tt,At){for(var Pt,Nt=[_t,xt];Nt.length;)(xt=Nt.pop())-(_t=Nt.pop())<=Tt||(Pt=_t+Math.ceil((xt-_t)/Tt/2)*Tt,Wn(vt,Pt,_t,xt,At),Nt.push(_t,Pt,Pt,xt))}function Xo(vt){var _t={exports:{}};return vt(_t,_t.exports),_t.exports}_i.prototype={all:function(){return this._all(this.data,[])},search:function(vt){var _t=this.data,xt=[],Tt=this.toBBox;if(!Ai(vt,_t))return xt;for(var At,Pt,Nt,Vt,Gt=[];_t;){for(At=0,Pt=_t.children.length;At<Pt;At++)Nt=_t.children[At],Ai(vt,Vt=_t.leaf?Tt(Nt):Nt)&&(_t.leaf?xt.push(Nt):Hs(vt,Vt)?this._all(Nt,xt):Gt.push(Nt));_t=Gt.pop()}return xt},collides:function(vt){var _t=this.data,xt=this.toBBox;if(!Ai(vt,_t))return!1;for(var Tt,At,Pt,Nt,Vt=[];_t;){for(Tt=0,At=_t.children.length;Tt<At;Tt++)if(Pt=_t.children[Tt],Ai(vt,Nt=_t.leaf?xt(Pt):Pt)){if(_t.leaf||Hs(vt,Nt))return!0;Vt.push(Pt)}_t=Vt.pop()}return!1},load:function(vt){if(!vt||!vt.length)return this;if(vt.length<this._minEntries){for(var _t=0,xt=vt.length;_t<xt;_t++)this.insert(vt[_t]);return this}var Tt=this._build(vt.slice(),0,vt.length-1,0);if(this.data.children.length)if(this.data.height===Tt.height)this._splitRoot(this.data,Tt);else{if(this.data.height<Tt.height){var At=this.data;this.data=Tt,Tt=At}this._insert(Tt,this.data.height-Tt.height-1,!0)}else this.data=Tt;return this},insert:function(vt){return vt&&this._insert(vt,this.data.height-1),this},clear:function(){return this.data=io([]),this},remove:function(vt,_t){if(!vt)return this;for(var xt,Tt,At,Pt,Nt=this.data,Vt=this.toBBox(vt),Gt=[],qt=[];Nt||Gt.length;){if(Nt||(Nt=Gt.pop(),Tt=Gt[Gt.length-1],xt=qt.pop(),Pt=!0),Nt.leaf&&(At=Pi(vt,Nt.children,_t))!==-1)return Nt.children.splice(At,1),Gt.push(Nt),this._condense(Gt),this;Pt||Nt.leaf||!Hs(Nt,Vt)?Tt?(xt++,Nt=Tt.children[xt],Pt=!1):Nt=null:(Gt.push(Nt),qt.push(xt),xt=0,Tt=Nt,Nt=Nt.children[0])}return this},toBBox:function(vt){return vt},compareMinX:Qi,compareMinY:Eo,toJSON:function(){return this.data},fromJSON:function(vt){return this.data=vt,this},_all:function(vt,_t){for(var xt=[];vt;)vt.leaf?_t.push.apply(_t,vt.children):xt.push.apply(xt,vt.children),vt=xt.pop();return _t},_build:function(vt,_t,xt,Tt){var At,Pt=xt-_t+1,Nt=this._maxEntries;if(Pt<=Nt)return xi(At=io(vt.slice(_t,xt+1)),this.toBBox),At;Tt||(Tt=Math.ceil(Math.log(Pt)/Math.log(Nt)),Nt=Math.ceil(Pt/Math.pow(Nt,Tt-1))),(At=io([])).leaf=!1,At.height=Tt;var Vt,Gt,qt,en,Xt=Math.ceil(Pt/Nt),an=Xt*Math.ceil(Math.sqrt(Nt));for(Fs(vt,_t,xt,an,this.compareMinX),Vt=_t;Vt<=xt;Vt+=an)for(Fs(vt,Vt,qt=Math.min(Vt+an-1,xt),Xt,this.compareMinY),Gt=Vt;Gt<=qt;Gt+=Xt)en=Math.min(Gt+Xt-1,qt),At.children.push(this._build(vt,Gt,en,Tt-1));return xi(At,this.toBBox),At},_chooseSubtree:function(vt,_t,xt,Tt){for(var At,Pt,Nt,Vt,Gt,qt,en,Xt,an,_n;Tt.push(_t),!_t.leaf&&Tt.length-1!==xt;){for(en=Xt=1/0,At=0,Pt=_t.children.length;At<Pt;At++)Gt=to(Nt=_t.children[At]),an=vt,_n=Nt,(qt=(Math.max(_n.maxX,an.maxX)-Math.min(_n.minX,an.minX))*(Math.max(_n.maxY,an.maxY)-Math.min(_n.minY,an.minY))-Gt)<Xt?(Xt=qt,en=Gt<en?Gt:en,Vt=Nt):qt===Xt&&Gt<en&&(en=Gt,Vt=Nt);_t=Vt||_t.children[0]}return _t},_insert:function(vt,_t,xt){var Tt=this.toBBox,At=xt?vt:Tt(vt),Pt=[],Nt=this._chooseSubtree(At,this.data,_t,Pt);for(Nt.children.push(vt),$i(Nt,At);_t>=0&&Pt[_t].children.length>this._maxEntries;)this._split(Pt,_t),_t--;this._adjustParentBBoxes(At,Pt,_t)},_split:function(vt,_t){var xt=vt[_t],Tt=xt.children.length,At=this._minEntries;this._chooseSplitAxis(xt,At,Tt);var Pt=this._chooseSplitIndex(xt,At,Tt),Nt=io(xt.children.splice(Pt,xt.children.length-Pt));Nt.height=xt.height,Nt.leaf=xt.leaf,xi(xt,this.toBBox),xi(Nt,this.toBBox),_t?vt[_t-1].children.push(Nt):this._splitRoot(xt,Nt)},_splitRoot:function(vt,_t){this.data=io([vt,_t]),this.data.height=vt.height+1,this.data.leaf=!1,xi(this.data,this.toBBox)},_chooseSplitIndex:function(vt,_t,xt){var Tt,At,Pt,Nt,Vt,Gt,qt,en,Xt,an,_n,bn,En,un;for(Gt=qt=1/0,Tt=_t;Tt<=xt-_t;Tt++)At=Zi(vt,0,Tt,this.toBBox),Pt=Zi(vt,Tt,xt,this.toBBox),Xt=At,an=Pt,_n=void 0,bn=void 0,En=void 0,un=void 0,_n=Math.max(Xt.minX,an.minX),bn=Math.max(Xt.minY,an.minY),En=Math.min(Xt.maxX,an.maxX),un=Math.min(Xt.maxY,an.maxY),Nt=Math.max(0,En-_n)*Math.max(0,un-bn),Vt=to(At)+to(Pt),Nt<Gt?(Gt=Nt,en=Tt,qt=Vt<qt?Vt:qt):Nt===Gt&&Vt<qt&&(qt=Vt,en=Tt);return en},_chooseSplitAxis:function(vt,_t,xt){var Tt=vt.leaf?this.compareMinX:Qi,At=vt.leaf?this.compareMinY:Eo;this._allDistMargin(vt,_t,xt,Tt)<this._allDistMargin(vt,_t,xt,At)&&vt.children.sort(Tt)},_allDistMargin:function(vt,_t,xt,Tt){vt.children.sort(Tt);var At,Pt,Nt=this.toBBox,Vt=Zi(vt,0,_t,Nt),Gt=Zi(vt,xt-_t,xt,Nt),qt=Za(Vt)+Za(Gt);for(At=_t;At<xt-_t;At++)Pt=vt.children[At],$i(Vt,vt.leaf?Nt(Pt):Pt),qt+=Za(Vt);for(At=xt-_t-1;At>=_t;At--)Pt=vt.children[At],$i(Gt,vt.leaf?Nt(Pt):Pt),qt+=Za(Gt);return qt},_adjustParentBBoxes:function(vt,_t,xt){for(var Tt=xt;Tt>=0;Tt--)$i(_t[Tt],vt)},_condense:function(vt){for(var _t,xt=vt.length-1;xt>=0;xt--)vt[xt].children.length===0?xt>0?(_t=vt[xt-1].children).splice(_t.indexOf(vt[xt]),1):this.clear():xi(vt[xt],this.toBBox)},_initFormat:function(vt){var _t=["return a"," - b",";"];this.compareMinX=new Function("a","b",_t.join(vt[0])),this.compareMinY=new Function("a","b",_t.join(vt[1])),this.toBBox=new Function("a","return {minX: a"+vt[0]+", minY: a"+vt[1]+", maxX: a"+vt[2]+", maxY: a"+vt[3]+"};")}},Or.default=mi;var os=function(vt,_t,xt){var Tt=vt*_t,At=Os*vt,Pt=At-(At-vt),Nt=vt-Pt,Vt=Os*_t,Gt=Vt-(Vt-_t),qt=_t-Gt,en=Nt*qt-(Tt-Pt*Gt-Nt*Gt-Pt*qt);return xt?(xt[0]=en,xt[1]=Tt,xt):[en,Tt]},Os=+(Math.pow(2,27)+1),Ns=function(vt,_t){var xt=0|vt.length,Tt=0|_t.length;if(xt===1&&Tt===1)return function(qn,Gn){var Zr=qn+Gn,Fr=Zr-qn,ei=qn-(Zr-Fr)+(Gn-Fr);return ei?[ei,Zr]:[Zr]}(vt[0],_t[0]);var At,Pt,Nt=new Array(xt+Tt),Vt=0,Gt=0,qt=0,en=Math.abs,Xt=vt[Gt],an=en(Xt),_n=_t[qt],bn=en(_n);an<bn?(Pt=Xt,(Gt+=1)<xt&&(Xt=vt[Gt],an=en(Xt))):(Pt=_n,(qt+=1)<Tt&&(_n=_t[qt],bn=en(_n))),Gt<xt&&an<bn||qt>=Tt?(At=Xt,(Gt+=1)<xt&&(Xt=vt[Gt],an=en(Xt))):(At=_n,(qt+=1)<Tt&&(_n=_t[qt],bn=en(_n)));for(var En,un,Vn=At+Pt,nr=Vn-At,xn=Pt-nr,zn=xn,jn=Vn;Gt<xt&&qt<Tt;)an<bn?(At=Xt,(Gt+=1)<xt&&(Xt=vt[Gt],an=en(Xt))):(At=_n,(qt+=1)<Tt&&(_n=_t[qt],bn=en(_n))),(xn=(Pt=zn)-(nr=(Vn=At+Pt)-At))&&(Nt[Vt++]=xn),zn=jn-((En=jn+Vn)-(un=En-jn))+(Vn-un),jn=En;for(;Gt<xt;)(xn=(Pt=zn)-(nr=(Vn=(At=Xt)+Pt)-At))&&(Nt[Vt++]=xn),zn=jn-((En=jn+Vn)-(un=En-jn))+(Vn-un),jn=En,(Gt+=1)<xt&&(Xt=vt[Gt]);for(;qt<Tt;)(xn=(Pt=zn)-(nr=(Vn=(At=_n)+Pt)-At))&&(Nt[Vt++]=xn),zn=jn-((En=jn+Vn)-(un=En-jn))+(Vn-un),jn=En,(qt+=1)<Tt&&(_n=_t[qt]);return zn&&(Nt[Vt++]=zn),jn&&(Nt[Vt++]=jn),Vt||(Nt[Vt++]=0),Nt.length=Vt,Nt},Rr=function(vt,_t,xt){var Tt=vt+_t,At=Tt-vt,Pt=_t-At,Nt=vt-(Tt-At);return xt?(xt[0]=Nt+Pt,xt[1]=Tt,xt):[Nt+Pt,Tt]},Qr=function(vt,_t){var xt=vt.length;if(xt===1){var Tt=os(vt[0],_t);return Tt[0]?Tt:[Tt[1]]}var At=new Array(2*xt),Pt=[.1,.1],Nt=[.1,.1],Vt=0;os(vt[0],_t,Pt),Pt[0]&&(At[Vt++]=Pt[0]);for(var Gt=1;Gt<xt;++Gt){os(vt[Gt],_t,Nt);var qt=Pt[1];Rr(qt,Nt[0],Pt),Pt[0]&&(At[Vt++]=Pt[0]);var en=Nt[1],Xt=Pt[1],an=en+Xt,_n=Xt-(an-en);Pt[1]=an,_n&&(At[Vt++]=_n)}return Pt[1]&&(At[Vt++]=Pt[1]),Vt===0&&(At[Vt++]=0),At.length=Vt,At},Dr=function(vt,_t){var xt=0|vt.length,Tt=0|_t.length;if(xt===1&&Tt===1)return function(qn,Gn){var Zr=qn+Gn,Fr=Zr-qn,ei=qn-(Zr-Fr)+(Gn-Fr);return ei?[ei,Zr]:[Zr]}(vt[0],-_t[0]);var At,Pt,Nt=new Array(xt+Tt),Vt=0,Gt=0,qt=0,en=Math.abs,Xt=vt[Gt],an=en(Xt),_n=-_t[qt],bn=en(_n);an<bn?(Pt=Xt,(Gt+=1)<xt&&(Xt=vt[Gt],an=en(Xt))):(Pt=_n,(qt+=1)<Tt&&(_n=-_t[qt],bn=en(_n))),Gt<xt&&an<bn||qt>=Tt?(At=Xt,(Gt+=1)<xt&&(Xt=vt[Gt],an=en(Xt))):(At=_n,(qt+=1)<Tt&&(_n=-_t[qt],bn=en(_n)));for(var En,un,Vn=At+Pt,nr=Vn-At,xn=Pt-nr,zn=xn,jn=Vn;Gt<xt&&qt<Tt;)an<bn?(At=Xt,(Gt+=1)<xt&&(Xt=vt[Gt],an=en(Xt))):(At=_n,(qt+=1)<Tt&&(_n=-_t[qt],bn=en(_n))),(xn=(Pt=zn)-(nr=(Vn=At+Pt)-At))&&(Nt[Vt++]=xn),zn=jn-((En=jn+Vn)-(un=En-jn))+(Vn-un),jn=En;for(;Gt<xt;)(xn=(Pt=zn)-(nr=(Vn=(At=Xt)+Pt)-At))&&(Nt[Vt++]=xn),zn=jn-((En=jn+Vn)-(un=En-jn))+(Vn-un),jn=En,(Gt+=1)<xt&&(Xt=vt[Gt]);for(;qt<Tt;)(xn=(Pt=zn)-(nr=(Vn=(At=_n)+Pt)-At))&&(Nt[Vt++]=xn),zn=jn-((En=jn+Vn)-(un=En-jn))+(Vn-un),jn=En,(qt+=1)<Tt&&(_n=-_t[qt]);return zn&&(Nt[Vt++]=zn),jn&&(Nt[Vt++]=jn),Vt||(Nt[Vt++]=0),Nt.length=Vt,Nt},ar=Xo(function(vt){function _t(qt,en){for(var Xt=new Array(qt.length-1),an=1;an<qt.length;++an)for(var _n=Xt[an-1]=new Array(qt.length-1),bn=0,En=0;bn<qt.length;++bn)bn!==en&&(_n[En++]=qt[an][bn]);return Xt}function xt(qt){if(qt.length===1)return qt[0];if(qt.length===2)return["sum(",qt[0],",",qt[1],")"].join("");var en=qt.length>>1;return["sum(",xt(qt.slice(0,en)),",",xt(qt.slice(en)),")"].join("")}function Tt(qt){if(qt.length===2)return[["sum(prod(",qt[0][0],",",qt[1][1],"),prod(-",qt[0][1],",",qt[1][0],"))"].join("")];for(var en=[],Xt=0;Xt<qt.length;++Xt)en.push(["scale(",xt(Tt(_t(qt,Xt))),",",(an=Xt,1&an?"-":""),qt[0][Xt],")"].join(""));return en;var an}function At(qt){for(var en=[],Xt=[],an=function(xn){for(var zn=new Array(xn),jn=0;jn<xn;++jn){zn[jn]=new Array(xn);for(var qn=0;qn<xn;++qn)zn[jn][qn]=["m",qn,"[",xn-jn-1,"]"].join("")}return zn}(qt),_n=[],bn=0;bn<qt;++bn)(1&bn)==0?en.push.apply(en,Tt(_t(an,bn))):Xt.push.apply(Xt,Tt(_t(an,bn))),_n.push("m"+bn);var En=xt(en),un=xt(Xt),Vn="orientation"+qt+"Exact",nr=["function ",Vn,"(",_n.join(),"){var p=",En,",n=",un,",d=sub(p,n);return d[d.length-1];};return ",Vn].join("");return new Function("sum","prod","scale","sub",nr)(Ns,os,Qr,Dr)}var Pt=At(3),Nt=At(4),Vt=[function(){return 0},function(){return 0},function(qt,en){return en[0]-qt[0]},function(qt,en,Xt){var an,_n=(qt[1]-Xt[1])*(en[0]-Xt[0]),bn=(qt[0]-Xt[0])*(en[1]-Xt[1]),En=_n-bn;if(_n>0){if(bn<=0)return En;an=_n+bn}else{if(!(_n<0)||bn>=0)return En;an=-(_n+bn)}var un=33306690738754716e-32*an;return En>=un||En<=-un?En:Pt(qt,en,Xt)},function(qt,en,Xt,an){var _n=qt[0]-an[0],bn=en[0]-an[0],En=Xt[0]-an[0],un=qt[1]-an[1],Vn=en[1]-an[1],nr=Xt[1]-an[1],xn=qt[2]-an[2],zn=en[2]-an[2],jn=Xt[2]-an[2],qn=bn*nr,Gn=En*Vn,Zr=En*un,Fr=_n*nr,ei=_n*Vn,zr=bn*un,si=xn*(qn-Gn)+zn*(Zr-Fr)+jn*(ei-zr),Wr=7771561172376103e-31*((Math.abs(qn)+Math.abs(Gn))*Math.abs(xn)+(Math.abs(Zr)+Math.abs(Fr))*Math.abs(zn)+(Math.abs(ei)+Math.abs(zr))*Math.abs(jn));return si>Wr||-si>Wr?si:Nt(qt,en,Xt,an)}];function Gt(qt){var en=Vt[qt.length];return en||(en=Vt[qt.length]=At(qt.length)),en.apply(void 0,qt)}(function(){for(;Vt.length<=5;)Vt.push(At(Vt.length));for(var qt=[],en=["slow"],Xt=0;Xt<=5;++Xt)qt.push("a"+Xt),en.push("o"+Xt);var an=["function getOrientation(",qt.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(Xt=2;Xt<=5;++Xt)an.push("case ",Xt,":return o",Xt,"(",qt.slice(0,Xt).join(),");");an.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),en.push(an.join(""));var _n=Function.apply(void 0,en);for(vt.exports=_n.apply(void 0,[Gt].concat(Vt)),Xt=0;Xt<=5;++Xt)vt.exports[Xt]=Vt[Xt]})()}),Ur=function(vt){var _t=vt.length;if(_t<3){for(var xt=new Array(_t),Tt=0;Tt<_t;++Tt)xt[Tt]=Tt;return _t===2&&vt[0][0]===vt[1][0]&&vt[0][1]===vt[1][1]?[0]:xt}var At=new Array(_t);for(Tt=0;Tt<_t;++Tt)At[Tt]=Tt;At.sort(function(_n,bn){var En=vt[_n][0]-vt[bn][0];return En||vt[_n][1]-vt[bn][1]});var Pt=[At[0],At[1]],Nt=[At[0],At[1]];for(Tt=2;Tt<_t;++Tt){for(var Vt=At[Tt],Gt=vt[Vt],qt=Pt.length;qt>1&&ci(vt[Pt[qt-2]],vt[Pt[qt-1]],Gt)<=0;)qt-=1,Pt.pop();for(Pt.push(Vt),qt=Nt.length;qt>1&&ci(vt[Nt[qt-2]],vt[Nt[qt-1]],Gt)>=0;)qt-=1,Nt.pop();Nt.push(Vt)}xt=new Array(Nt.length+Pt.length-2);for(var en=0,Xt=(Tt=0,Pt.length);Tt<Xt;++Tt)xt[en++]=Pt[Tt];for(var an=Nt.length-2;an>0;--an)xt[en++]=Nt[an];return xt},ci=ar[3],wi=bo,Po=bo;function bo(vt,_t){if(!(this instanceof bo))return new bo(vt,_t);if(this.data=vt||[],this.length=this.data.length,this.compare=_t||ss,this.length>0)for(var xt=(this.length>>1)-1;xt>=0;xt--)this._down(xt)}function ss(vt,_t){return vt<_t?-1:vt>_t?1:0}bo.prototype={push:function(vt){this.data.push(vt),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var vt=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),vt}},peek:function(){return this.data[0]},_up:function(vt){for(var _t=this.data,xt=this.compare,Tt=_t[vt];vt>0;){var At=vt-1>>1,Pt=_t[At];if(xt(Tt,Pt)>=0)break;_t[vt]=Pt,vt=At}_t[vt]=Tt},_down:function(vt){for(var _t=this.data,xt=this.compare,Tt=this.length>>1,At=_t[vt];vt<Tt;){var Pt=1+(vt<<1),Nt=Pt+1,Vt=_t[Pt];if(Nt<this.length&&xt(_t[Nt],Vt)<0&&(Pt=Nt,Vt=_t[Nt]),xt(Vt,At)>=0)break;_t[vt]=Vt,vt=Pt}_t[vt]=At}},wi.default=Po;var oo=function(vt,_t){for(var xt=vt[0],Tt=vt[1],At=!1,Pt=0,Nt=_t.length-1;Pt<_t.length;Nt=Pt++){var Vt=_t[Pt][0],Gt=_t[Pt][1],qt=_t[Nt][0],en=_t[Nt][1];Gt>Tt!=en>Tt&&xt<(qt-Vt)*(Tt-Gt)/(en-Gt)+Vt&&(At=!At)}return At},Do=ar[3],Us=ra,aa=ra;function ra(vt,_t,xt){_t=Math.max(0,_t===void 0?2:_t),xt=xt||0;for(var Tt,At=function(nr){for(var xn=nr[0],zn=nr[0],jn=nr[0],qn=nr[0],Gn=0;Gn<nr.length;Gn++){var Zr=nr[Gn];Zr[0]<xn[0]&&(xn=Zr),Zr[0]>jn[0]&&(jn=Zr),Zr[1]<zn[1]&&(zn=Zr),Zr[1]>qn[1]&&(qn=Zr)}var Fr=[xn,zn,jn,qn],ei=Fr.slice();for(Gn=0;Gn<nr.length;Gn++)oo(nr[Gn],Fr)||ei.push(nr[Gn]);var zr=Ur(ei),si=[];for(Gn=0;Gn<zr.length;Gn++)si.push(ei[zr[Gn]]);return si}(vt),Pt=Or(16,["[0]","[1]","[0]","[1]"]).load(vt),Nt=[],Vt=0;Vt<At.length;Vt++){var Gt=At[Vt];Pt.remove(Gt),Tt=ml(Gt,Tt),Nt.push(Tt)}var qt=Or(16);for(Vt=0;Vt<Nt.length;Vt++)qt.insert(Sr(Nt[Vt]));for(var en=_t*_t,Xt=xt*xt;Nt.length;){var an=Nt.shift(),_n=an.p,bn=an.next.p,En=Nr(_n,bn);if(!(En<Xt)){var un=En/en;(Gt=ji(Pt,an.prev.p,_n,bn,an.next.next.p,un,qt))&&Math.min(Nr(Gt,_n),Nr(Gt,bn))<=un&&(Nt.push(an),Nt.push(ml(Gt,an)),Pt.remove(Gt),qt.remove(an),qt.insert(Sr(an)),qt.insert(Sr(an.next)))}}an=Tt;var Vn=[];do Vn.push(an.p),an=an.next;while(an!==Tt);return Vn.push(an.p),Vn}function ji(vt,_t,xt,Tt,At,Pt,Nt){for(var Vt=new wi(null,so),Gt=vt.data;Gt;){for(var qt=0;qt<Gt.children.length;qt++){var en=Gt.children[qt],Xt=Gt.leaf?ia(en,xt,Tt):fo(xt,Tt,en);Xt>Pt||Vt.push({node:en,dist:Xt})}for(;Vt.length&&!Vt.peek().node.children;){var an=Vt.pop(),_n=an.node,bn=ia(_n,_t,xt),En=ia(_n,Tt,At);if(an.dist<bn&&an.dist<En&&ao(xt,_n,Nt)&&ao(Tt,_n,Nt))return _n}(Gt=Vt.pop())&&(Gt=Gt.node)}return null}function so(vt,_t){return vt.dist-_t.dist}function fo(vt,_t,xt){if(Li(vt,xt)||Li(_t,xt))return 0;var Tt=_c(vt[0],vt[1],_t[0],_t[1],xt.minX,xt.minY,xt.maxX,xt.minY);if(Tt===0)return 0;var At=_c(vt[0],vt[1],_t[0],_t[1],xt.minX,xt.minY,xt.minX,xt.maxY);if(At===0)return 0;var Pt=_c(vt[0],vt[1],_t[0],_t[1],xt.maxX,xt.minY,xt.maxX,xt.maxY);if(Pt===0)return 0;var Nt=_c(vt[0],vt[1],_t[0],_t[1],xt.minX,xt.maxY,xt.maxX,xt.maxY);return Nt===0?0:Math.min(Tt,At,Pt,Nt)}function Li(vt,_t){return vt[0]>=_t.minX&&vt[0]<=_t.maxX&&vt[1]>=_t.minY&&vt[1]<=_t.maxY}function ao(vt,_t,xt){for(var Tt,At,Pt,Nt,Vt=Math.min(vt[0],_t[0]),Gt=Math.min(vt[1],_t[1]),qt=Math.max(vt[0],_t[0]),en=Math.max(vt[1],_t[1]),Xt=xt.search({minX:Vt,minY:Gt,maxX:qt,maxY:en}),an=0;an<Xt.length;an++)if(Tt=Xt[an].p,At=Xt[an].next.p,Pt=vt,Tt!==(Nt=_t)&&At!==Pt&&Do(Tt,At,Pt)>0!=Do(Tt,At,Nt)>0&&Do(Pt,Nt,Tt)>0!=Do(Pt,Nt,At)>0)return!1;return!0}function Sr(vt){var _t=vt.p,xt=vt.next.p;return vt.minX=Math.min(_t[0],xt[0]),vt.minY=Math.min(_t[1],xt[1]),vt.maxX=Math.max(_t[0],xt[0]),vt.maxY=Math.max(_t[1],xt[1]),vt}function ml(vt,_t){var xt={p:vt,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return _t?(xt.next=_t.next,xt.prev=_t,_t.next.prev=xt,_t.next=xt):(xt.prev=xt,xt.next=xt),xt}function Nr(vt,_t){var xt=vt[0]-_t[0],Tt=vt[1]-_t[1];return xt*xt+Tt*Tt}function ia(vt,_t,xt){var Tt=_t[0],At=_t[1],Pt=xt[0]-Tt,Nt=xt[1]-At;if(Pt!==0||Nt!==0){var Vt=((vt[0]-Tt)*Pt+(vt[1]-At)*Nt)/(Pt*Pt+Nt*Nt);Vt>1?(Tt=xt[0],At=xt[1]):Vt>0&&(Tt+=Pt*Vt,At+=Nt*Vt)}return(Pt=vt[0]-Tt)*Pt+(Nt=vt[1]-At)*Nt}function _c(vt,_t,xt,Tt,At,Pt,Nt,Vt){var Gt,qt,en,Xt,an=xt-vt,_n=Tt-_t,bn=Nt-At,En=Vt-Pt,un=vt-At,Vn=_t-Pt,nr=an*an+_n*_n,xn=an*bn+_n*En,zn=bn*bn+En*En,jn=an*un+_n*Vn,qn=bn*un+En*Vn,Gn=nr*zn-xn*xn,Zr=Gn,Fr=Gn;Gn===0?(qt=0,Zr=1,Xt=qn,Fr=zn):(Xt=nr*qn-xn*jn,(qt=xn*qn-zn*jn)<0?(qt=0,Xt=qn,Fr=zn):qt>Zr&&(qt=Zr,Xt=qn+xn,Fr=zn)),Xt<0?(Xt=0,-jn<0?qt=0:-jn>nr?qt=Zr:(qt=-jn,Zr=nr)):Xt>Fr&&(Xt=Fr,-jn+xn<0?qt=0:-jn+xn>nr?qt=Zr:(qt=-jn+xn,Zr=nr));var ei=(1-(en=Xt===0?0:Xt/Fr))*At+en*Nt-((1-(Gt=qt===0?0:qt/Zr))*vt+Gt*xt),zr=(1-en)*Pt+en*Vt-((1-Gt)*_t+Gt*Tt);return ei*ei+zr*zr}function No(vt,_t){_t===void 0&&(_t={}),_t.concavity=_t.concavity||1/0;var xt=[];if(vn(vt,function(At){xt.push([At[0],At[1]])}),!xt.length)return null;var Tt=Us(xt,_t.concavity);return Tt.length>3?Ot([Tt]):null}function go(vt,_t,xt){if(xt===void 0&&(xt={}),!vt)throw new Error("point is required");if(!_t)throw new Error("polygon is required");var Tt=cn(vt),At=Un(_t),Pt=At.type,Nt=_t.bbox,Vt=At.coordinates;if(Nt&&function(an,_n){return _n[0]<=an[0]&&_n[1]<=an[1]&&_n[2]>=an[0]&&_n[3]>=an[1]}(Tt,Nt)===!1)return!1;Pt==="Polygon"&&(Vt=[Vt]);for(var Gt=!1,qt=0;qt<Vt.length&&!Gt;qt++)if(Tu(Tt,Vt[qt][0],xt.ignoreBoundary)){for(var en=!1,Xt=1;Xt<Vt[qt].length&&!en;)Tu(Tt,Vt[qt][Xt],!xt.ignoreBoundary)&&(en=!0),Xt++;en||(Gt=!0)}return Gt}function Tu(vt,_t,xt){var Tt=!1;_t[0][0]===_t[_t.length-1][0]&&_t[0][1]===_t[_t.length-1][1]&&(_t=_t.slice(0,_t.length-1));for(var At=0,Pt=_t.length-1;At<_t.length;Pt=At++){var Nt=_t[At][0],Vt=_t[At][1],Gt=_t[Pt][0],qt=_t[Pt][1];if(vt[1]*(Nt-Gt)+Vt*(Gt-vt[0])+qt*(vt[0]-Nt)==0&&(Nt-vt[0])*(Gt-vt[0])<=0&&(Vt-vt[1])*(qt-vt[1])<=0)return!xt;Vt>vt[1]!=qt>vt[1]&&vt[0]<(Gt-Nt)*(vt[1]-Vt)/(qt-Vt)+Nt&&(Tt=!Tt)}return Tt}function Fi(vt,_t){var xt=[];return rr(vt,function(Tt){var At=!1;if(Tt.geometry.type==="Point")gr(_t,function(Nt){go(Tt,Nt)&&(At=!0)}),At&&xt.push(Tt);else{if(Tt.geometry.type!=="MultiPoint")throw new Error("Input geometry must be a Point or MultiPoint");var Pt=[];gr(_t,function(Nt){vn(Tt,function(Vt){go(Vt,Nt)&&(At=!0,Pt.push(Vt))})}),At&&xt.push(Jt(Pt))}}),Ft(xt)}function mo(vt,_t,xt){xt===void 0&&(xt={});var Tt=cn(vt),At=cn(_t),Pt=Tn(At[1]-Tt[1]),Nt=Tn(At[0]-Tt[0]),Vt=Tn(Tt[1]),Gt=Tn(At[1]),qt=Math.pow(Math.sin(Pt/2),2)+Math.pow(Math.sin(Nt/2),2)*Math.cos(Vt)*Math.cos(Gt);return sn(2*Math.atan2(Math.sqrt(qt),Math.sqrt(1-qt)),xt.units)}function Ka(vt,_t){var xt=!1;return Ft(function(Tt){if(Tt.length<3)return[];Tt.sort(Rl);for(var At,Pt,Nt,Vt,Gt,qt,en=Tt.length-1,Xt=Tt[en].x,an=Tt[0].x,_n=Tt[en].y,bn=_n,En=1e-12;en--;)Tt[en].y<_n&&(_n=Tt[en].y),Tt[en].y>bn&&(bn=Tt[en].y);var un,Vn=an-Xt,nr=bn-_n,xn=Vn>nr?Vn:nr,zn=.5*(an+Xt),jn=.5*(bn+_n),qn=[new ic({__sentinel:!0,x:zn-20*xn,y:jn-xn},{__sentinel:!0,x:zn,y:jn+20*xn},{__sentinel:!0,x:zn+20*xn,y:jn-xn})],Gn=[],Zr=[];for(en=Tt.length;en--;){for(Zr.length=0,un=qn.length;un--;)(Vn=Tt[en].x-qn[un].x)>0&&Vn*Vn>qn[un].r?(Gn.push(qn[un]),qn.splice(un,1)):Vn*Vn+(nr=Tt[en].y-qn[un].y)*nr>qn[un].r||(Zr.push(qn[un].a,qn[un].b,qn[un].b,qn[un].c,qn[un].c,qn[un].a),qn.splice(un,1));for(Qs(Zr),un=Zr.length;un;)Pt=Zr[--un],At=Zr[--un],Nt=Tt[en],Vt=Pt.x-At.x,Gt=Pt.y-At.y,qt=2*(Vt*(Nt.y-Pt.y)-Gt*(Nt.x-Pt.x)),Math.abs(qt)>En&&qn.push(new ic(At,Pt,Nt))}for(Array.prototype.push.apply(Gn,qn),en=Gn.length;en--;)(Gn[en].a.__sentinel||Gn[en].b.__sentinel||Gn[en].c.__sentinel)&&Gn.splice(en,1);return Gn}(vt.features.map(function(Tt){var At={x:Tt.geometry.coordinates[0],y:Tt.geometry.coordinates[1]};return _t?At.z=Tt.properties[_t]:Tt.geometry.coordinates.length===3&&(xt=!0,At.z=Tt.geometry.coordinates[2]),At})).map(function(Tt){var At=[Tt.a.x,Tt.a.y],Pt=[Tt.b.x,Tt.b.y],Nt=[Tt.c.x,Tt.c.y],Vt={};return xt?(At.push(Tt.a.z),Pt.push(Tt.b.z),Nt.push(Tt.c.z)):Vt={a:Tt.a.z,b:Tt.b.z,c:Tt.c.z},Ot([[At,Pt,Nt,At]],Vt)}))}Us.default=aa;var ic=function(vt,_t,xt){this.a=vt,this.b=_t,this.c=xt;var Tt,At,Pt=_t.x-vt.x,Nt=_t.y-vt.y,Vt=xt.x-vt.x,Gt=xt.y-vt.y,qt=Pt*(vt.x+_t.x)+Nt*(vt.y+_t.y),en=Vt*(vt.x+xt.x)+Gt*(vt.y+xt.y),Xt=2*(Pt*(xt.y-_t.y)-Nt*(xt.x-_t.x));this.x=(Gt*qt-Nt*en)/Xt,this.y=(Pt*en-Vt*qt)/Xt,Tt=this.x-vt.x,At=this.y-vt.y,this.r=Tt*Tt+At*At};function Rl(vt,_t){return _t.x-vt.x}function Qs(vt){var _t,xt,Tt,At,Pt,Nt=vt.length;e:for(;Nt;)for(xt=vt[--Nt],_t=vt[--Nt],Tt=Nt;Tt;)if(Pt=vt[--Tt],_t===(At=vt[--Tt])&&xt===Pt||_t===Pt&&xt===At){vt.splice(Nt,2),vt.splice(Tt,2),Nt-=2;continue e}}function Ho(vt){if(!vt)throw new Error("geojson is required");switch(vt.type){case"Feature":return jo(vt);case"FeatureCollection":return function(_t){var xt={type:"FeatureCollection"};return Object.keys(_t).forEach(function(Tt){switch(Tt){case"type":case"features":return;default:xt[Tt]=_t[Tt]}}),xt.features=_t.features.map(function(Tt){return jo(Tt)}),xt}(vt);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Tl(vt);default:throw new Error("unknown GeoJSON type")}}function jo(vt){var _t={type:"Feature"};return Object.keys(vt).forEach(function(xt){switch(xt){case"type":case"properties":case"geometry":return;default:_t[xt]=vt[xt]}}),_t.properties=la(vt.properties),_t.geometry=Tl(vt.geometry),_t}function la(vt){var _t={};return vt&&Object.keys(vt).forEach(function(xt){var Tt=vt[xt];typeof Tt=="object"?Tt===null?_t[xt]=null:Array.isArray(Tt)?_t[xt]=Tt.map(function(At){return At}):_t[xt]=la(Tt):_t[xt]=Tt}),_t}function Tl(vt){var _t={type:vt.type};return vt.bbox&&(_t.bbox=vt.bbox),vt.type==="GeometryCollection"?(_t.geometries=vt.geometries.map(function(xt){return Tl(xt)}),_t):(_t.coordinates=ya(vt.coordinates),_t)}function ya(vt){var _t=vt;return typeof _t[0]!="object"?_t.slice():_t.map(function(xt){return ya(xt)})}function yl(vt,_t){if(_t===void 0&&(_t={}),!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.mutate;if(or(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");xt!==!1&&xt!==void 0||(vt=Ho(vt));var Tt=[],At=Er(vt,function(Pt,Nt){var Vt=function(Gt,qt){var en,Xt=Gt.geometry.coordinates,an=qt.geometry.coordinates,_n=ja(Xt[0]),bn=ja(Xt[Xt.length-1]),En=ja(an[0]),un=ja(an[an.length-1]);if(_n===un)en=an.concat(Xt.slice(1));else if(En===bn)en=Xt.concat(an.slice(1));else if(_n===En)en=Xt.slice(1).reverse().concat(an);else{if(bn!==un)return null;en=Xt.concat(an.reverse().slice(1))}return Dt(en)}(Pt,Nt);return Vt||(Tt.push(Pt),Nt)});return At&&Tt.push(At),Tt.length?Tt.length===1?Tt[0]:Yt(Tt.map(function(Pt){return Pt.coordinates})):null}function ja(vt){return vt[0].toString()+","+vt[1].toString()}function ou(vt){return vt}function Rc(vt,_t){var xt=function(qt){if(qt==null)return ou;var en,Xt,an=qt.scale[0],_n=qt.scale[1],bn=qt.translate[0],En=qt.translate[1];return function(un,Vn){Vn||(en=Xt=0);var nr=2,xn=un.length,zn=new Array(xn);for(zn[0]=(en+=un[0])*an+bn,zn[1]=(Xt+=un[1])*_n+En;nr<xn;)zn[nr]=un[nr],++nr;return zn}}(vt.transform),Tt=vt.arcs;function At(qt,en){en.length&&en.pop();for(var Xt=Tt[qt<0?~qt:qt],an=0,_n=Xt.length;an<_n;++an)en.push(xt(Xt[an],an));qt<0&&function(bn,En){for(var un,Vn=bn.length,nr=Vn-En;nr<--Vn;)un=bn[nr],bn[nr++]=bn[Vn],bn[Vn]=un}(en,_n)}function Pt(qt){return xt(qt)}function Nt(qt){for(var en=[],Xt=0,an=qt.length;Xt<an;++Xt)At(qt[Xt],en);return en.length<2&&en.push(en[0]),en}function Vt(qt){for(var en=Nt(qt);en.length<4;)en.push(en[0]);return en}function Gt(qt){return qt.map(Vt)}return function qt(en){var Xt,an=en.type;switch(an){case"GeometryCollection":return{type:an,geometries:en.geometries.map(qt)};case"Point":Xt=Pt(en.coordinates);break;case"MultiPoint":Xt=en.coordinates.map(Pt);break;case"LineString":Xt=Nt(en.arcs);break;case"MultiLineString":Xt=en.arcs.map(Nt);break;case"Polygon":Xt=Gt(en.arcs);break;case"MultiPolygon":Xt=en.arcs.map(Gt);break;default:return null}return{type:an,coordinates:Xt}}(_t)}function bc(vt,_t){var xt={},Tt={},At={},Pt=[],Nt=-1;function Vt(Gt,qt){for(var en in Gt){var Xt=Gt[en];delete qt[Xt.start],delete Xt.start,delete Xt.end,Xt.forEach(function(an){xt[an<0?~an:an]=1}),Pt.push(Xt)}}return _t.forEach(function(Gt,qt){var en,Xt=vt.arcs[Gt<0?~Gt:Gt];Xt.length<3&&!Xt[1][0]&&!Xt[1][1]&&(en=_t[++Nt],_t[Nt]=Gt,_t[qt]=en)}),_t.forEach(function(Gt){var qt,en,Xt=function(un){var Vn,nr=vt.arcs[un<0?~un:un],xn=nr[0];return vt.transform?(Vn=[0,0],nr.forEach(function(zn){Vn[0]+=zn[0],Vn[1]+=zn[1]})):Vn=nr[nr.length-1],un<0?[Vn,xn]:[xn,Vn]}(Gt),an=Xt[0],_n=Xt[1];if(qt=At[an])if(delete At[qt.end],qt.push(Gt),qt.end=_n,en=Tt[_n]){delete Tt[en.start];var bn=en===qt?qt:qt.concat(en);Tt[bn.start=qt.start]=At[bn.end=en.end]=bn}else Tt[qt.start]=At[qt.end]=qt;else if(qt=Tt[_n])if(delete Tt[qt.start],qt.unshift(Gt),qt.start=an,en=At[an]){delete At[en.end];var En=en===qt?qt:en.concat(qt);Tt[En.start=en.start]=At[En.end=qt.end]=En}else Tt[qt.start]=At[qt.end]=qt;else Tt[(qt=[Gt]).start=an]=At[qt.end=_n]=qt}),Vt(At,Tt),Vt(Tt,At),_t.forEach(function(Gt){xt[Gt<0?~Gt:Gt]||Pt.push([Gt])}),Pt}function Ja(vt,_t){var xt={},Tt=[],At=[];function Pt(Vt){Vt.forEach(function(Gt){Gt.forEach(function(qt){(xt[qt=qt<0?~qt:qt]||(xt[qt]=[])).push(Vt)})}),Tt.push(Vt)}function Nt(Vt){return function(Gt){for(var qt,en=-1,Xt=Gt.length,an=Gt[Xt-1],_n=0;++en<Xt;)qt=an,an=Gt[en],_n+=qt[0]*an[1]-qt[1]*an[0];return Math.abs(_n)}(Rc(vt,{type:"Polygon",arcs:[Vt]}).coordinates[0])}return _t.forEach(function Vt(Gt){switch(Gt.type){case"GeometryCollection":Gt.geometries.forEach(Vt);break;case"Polygon":Pt(Gt.arcs);break;case"MultiPolygon":Gt.arcs.forEach(Pt)}}),Tt.forEach(function(Vt){if(!Vt._){var Gt=[],qt=[Vt];for(Vt._=1,At.push(Gt);Vt=qt.pop();)Gt.push(Vt),Vt.forEach(function(en){en.forEach(function(Xt){xt[Xt<0?~Xt:Xt].forEach(function(an){an._||(an._=1,qt.push(an))})})})}}),Tt.forEach(function(Vt){delete Vt._}),{type:"MultiPolygon",arcs:At.map(function(Vt){var Gt,qt=[];if(Vt.forEach(function(bn){bn.forEach(function(En){En.forEach(function(un){xt[un<0?~un:un].length<2&&qt.push(un)})})}),(Gt=(qt=bc(vt,qt)).length)>1)for(var en,Xt,an=1,_n=Nt(qt[0]);an<Gt;++an)(en=Nt(qt[an]))>_n&&(Xt=qt[0],qt[0]=qt[an],qt[an]=Xt,_n=en);return qt}).filter(function(Vt){return Vt.length>0})}}var ku=Object.prototype.hasOwnProperty;function Au(vt,_t,xt,Tt,At,Pt){arguments.length===3&&(Tt=Pt=Array,At=null);for(var Nt=new Tt(vt=1<<Math.max(4,Math.ceil(Math.log(vt)/Math.LN2))),Vt=new Pt(vt),Gt=vt-1,qt=0;qt<vt;++qt)Nt[qt]=At;function en(bn,En){for(var un=_t(bn)&Gt,Vn=Nt[un],nr=0;Vn!=At;){if(xt(Vn,bn))return Vt[un]=En;if(++nr>=vt)throw new Error("full hashmap");Vn=Nt[un=un+1&Gt]}return Nt[un]=bn,Vt[un]=En,En}function Xt(bn,En){for(var un=_t(bn)&Gt,Vn=Nt[un],nr=0;Vn!=At;){if(xt(Vn,bn))return Vt[un];if(++nr>=vt)throw new Error("full hashmap");Vn=Nt[un=un+1&Gt]}return Nt[un]=bn,Vt[un]=En,En}function an(bn,En){for(var un=_t(bn)&Gt,Vn=Nt[un],nr=0;Vn!=At;){if(xt(Vn,bn))return Vt[un];if(++nr>=vt)break;Vn=Nt[un=un+1&Gt]}return En}function _n(){for(var bn=[],En=0,un=Nt.length;En<un;++En){var Vn=Nt[En];Vn!=At&&bn.push(Vn)}return bn}return{set:en,maybeSet:Xt,get:an,keys:_n}}function Lu(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}var Bo=new ArrayBuffer(16),va=new Float64Array(Bo),co=new Uint32Array(Bo);function kl(vt){va[0]=vt[0],va[1]=vt[1];var _t=co[0]^co[1];return 2147483647&(_t=_t<<5^_t>>7^co[2]^co[3])}function Jh(vt){var _t,xt,Tt,At,Pt=vt.coordinates,Nt=vt.lines,Vt=vt.rings,Gt=function(){for(var Fr=Au(1.4*Pt.length,jn,qn,Int32Array,-1,Int32Array),ei=new Int32Array(Pt.length),zr=0,si=Pt.length;zr<si;++zr)ei[zr]=Fr.maybeSet(zr,zr);return ei}(),qt=new Int32Array(Pt.length),en=new Int32Array(Pt.length),Xt=new Int32Array(Pt.length),an=new Int8Array(Pt.length),_n=0;for(_t=0,xt=Pt.length;_t<xt;++_t)qt[_t]=en[_t]=Xt[_t]=-1;for(_t=0,xt=Nt.length;_t<xt;++_t){var bn=Nt[_t],En=bn[0],un=bn[1];for(Tt=Gt[En],At=Gt[++En],++_n,an[Tt]=1;++En<=un;)zn(_t,Tt,Tt=At,At=Gt[En]);++_n,an[At]=1}for(_t=0,xt=Pt.length;_t<xt;++_t)qt[_t]=-1;for(_t=0,xt=Vt.length;_t<xt;++_t){var Vn=Vt[_t],nr=Vn[0]+1,xn=Vn[1];for(zn(_t,Gt[xn-1],Tt=Gt[nr-1],At=Gt[nr]);++nr<=xn;)zn(_t,Tt,Tt=At,At=Gt[nr])}function zn(Fr,ei,zr,si){if(qt[zr]!==Fr){qt[zr]=Fr;var Wr=en[zr];if(Wr>=0){var Gr=Xt[zr];Wr===ei&&Gr===si||Wr===si&&Gr===ei||(++_n,an[zr]=1)}else en[zr]=ei,Xt[zr]=si}}function jn(Fr){return kl(Pt[Fr])}function qn(Fr,ei){return Lu(Pt[Fr],Pt[ei])}qt=en=Xt=null;var Gn,Zr=function(Fr,ei,zr,si,Wr){arguments.length===3&&(si=Array,Wr=null);for(var Gr=new si(Fr=1<<Math.max(4,Math.ceil(Math.log(Fr)/Math.LN2))),Vr=Fr-1,ni=0;ni<Fr;++ni)Gr[ni]=Wr;function Yr(Ki){for(var Si=ei(Ki)&Vr,Ro=Gr[Si],Wi=0;Ro!=Wr;){if(zr(Ro,Ki))return!0;if(++Wi>=Fr)throw new Error("full hashset");Ro=Gr[Si=Si+1&Vr]}return Gr[Si]=Ki,!0}function ai(Ki){for(var Si=ei(Ki)&Vr,Ro=Gr[Si],Wi=0;Ro!=Wr;){if(zr(Ro,Ki))return!0;if(++Wi>=Fr)break;Ro=Gr[Si=Si+1&Vr]}return!1}function Cr(){for(var Ki=[],Si=0,Ro=Gr.length;Si<Ro;++Si){var Wi=Gr[Si];Wi!=Wr&&Ki.push(Wi)}return Ki}return{add:Yr,has:ai,values:Cr}}(1.4*_n,kl,Lu);for(_t=0,xt=Pt.length;_t<xt;++_t)an[Gn=Gt[_t]]&&Zr.add(Pt[Gn]);return Zr}function Qh(vt,_t,xt,Tt){Ju(vt,_t,xt),Ju(vt,_t,_t+Tt),Ju(vt,_t+Tt,xt)}function Ju(vt,_t,xt){for(var Tt,At=_t+(xt---_t>>1);_t<At;++_t,--xt)Tt=vt[_t],vt[_t]=vt[xt],vt[xt]=Tt}function Iu(vt){var _t,xt,Tt={};for(_t in vt)Tt[_t]=(xt=vt[_t])==null?{type:null}:(xt.type==="FeatureCollection"?Qu:xt.type==="Feature"?Nl:da)(xt);return Tt}function Qu(vt){var _t={type:"GeometryCollection",geometries:vt.features.map(Nl)};return vt.bbox!=null&&(_t.bbox=vt.bbox),_t}function Nl(vt){var _t,xt=da(vt.geometry);for(_t in vt.id!=null&&(xt.id=vt.id),vt.bbox!=null&&(xt.bbox=vt.bbox),vt.properties){xt.properties=vt.properties;break}return xt}function da(vt){if(vt==null)return{type:null};var _t=vt.type==="GeometryCollection"?{type:"GeometryCollection",geometries:vt.geometries.map(da)}:vt.type==="Point"||vt.type==="MultiPoint"?{type:vt.type,coordinates:vt.coordinates}:{type:vt.type,arcs:vt.coordinates};return vt.bbox!=null&&(_t.bbox=vt.bbox),_t}function Nc(vt,_t){var xt=function(an){var _n=1/0,bn=1/0,En=-1/0,un=-1/0;function Vn(Gn){Gn!=null&&ku.call(nr,Gn.type)&&nr[Gn.type](Gn)}var nr={GeometryCollection:function(Gn){Gn.geometries.forEach(Vn)},Point:function(Gn){xn(Gn.coordinates)},MultiPoint:function(Gn){Gn.coordinates.forEach(xn)},LineString:function(Gn){zn(Gn.arcs)},MultiLineString:function(Gn){Gn.arcs.forEach(zn)},Polygon:function(Gn){Gn.arcs.forEach(zn)},MultiPolygon:function(Gn){Gn.arcs.forEach(jn)}};function xn(Gn){var Zr=Gn[0],Fr=Gn[1];Zr<_n&&(_n=Zr),Zr>En&&(En=Zr),Fr<bn&&(bn=Fr),Fr>un&&(un=Fr)}function zn(Gn){Gn.forEach(xn)}function jn(Gn){Gn.forEach(zn)}for(var qn in an)Vn(an[qn]);return En>=_n&&un>=bn?[_n,bn,En,un]:void 0}(vt=Iu(vt)),Tt=_t>0&&xt&&function(an,_n,bn){var En=_n[0],un=_n[1],Vn=_n[2],nr=_n[3],xn=Vn-En?(bn-1)/(Vn-En):1,zn=nr-un?(bn-1)/(nr-un):1;function jn(Wr){return[Math.round((Wr[0]-En)*xn),Math.round((Wr[1]-un)*zn)]}function qn(Wr,Gr){for(var Vr,ni,Yr,ai,Cr,Ki=-1,Si=0,Ro=Wr.length,Wi=new Array(Ro);++Ki<Ro;)Vr=Wr[Ki],ai=Math.round((Vr[0]-En)*xn),Cr=Math.round((Vr[1]-un)*zn),ai===ni&&Cr===Yr||(Wi[Si++]=[ni=ai,Yr=Cr]);for(Wi.length=Si;Si<Gr;)Si=Wi.push([Wi[0][0],Wi[0][1]]);return Wi}function Gn(Wr){return qn(Wr,2)}function Zr(Wr){return qn(Wr,4)}function Fr(Wr){return Wr.map(Zr)}function ei(Wr){Wr!=null&&ku.call(zr,Wr.type)&&zr[Wr.type](Wr)}var zr={GeometryCollection:function(Wr){Wr.geometries.forEach(ei)},Point:function(Wr){Wr.coordinates=jn(Wr.coordinates)},MultiPoint:function(Wr){Wr.coordinates=Wr.coordinates.map(jn)},LineString:function(Wr){Wr.arcs=Gn(Wr.arcs)},MultiLineString:function(Wr){Wr.arcs=Wr.arcs.map(Gn)},Polygon:function(Wr){Wr.arcs=Fr(Wr.arcs)},MultiPolygon:function(Wr){Wr.arcs=Wr.arcs.map(Fr)}};for(var si in an)ei(an[si]);return{scale:[1/xn,1/zn],translate:[En,un]}}(vt,xt,_t),At=function(an){var _n,bn,En,un,Vn=an.coordinates,nr=an.lines,xn=an.rings,zn=nr.length+xn.length;for(delete an.lines,delete an.rings,En=0,un=nr.length;En<un;++En)for(_n=nr[En];_n=_n.next;)++zn;for(En=0,un=xn.length;En<un;++En)for(bn=xn[En];bn=bn.next;)++zn;var jn=Au(2*zn*1.4,kl,Lu),qn=an.arcs=[];for(En=0,un=nr.length;En<un;++En){_n=nr[En];do Gn(_n);while(_n=_n.next)}for(En=0,un=xn.length;En<un;++En)if((bn=xn[En]).next)do Gn(bn);while(bn=bn.next);else Zr(bn);function Gn(Gr){var Vr,ni,Yr,ai,Cr,Ki,Si,Ro;if(Yr=jn.get(Vr=Vn[Gr[0]])){for(Si=0,Ro=Yr.length;Si<Ro;++Si)if(Fr(ai=Yr[Si],Gr))return Gr[0]=ai[0],void(Gr[1]=ai[1])}if(Cr=jn.get(ni=Vn[Gr[1]])){for(Si=0,Ro=Cr.length;Si<Ro;++Si)if(ei(Ki=Cr[Si],Gr))return Gr[1]=Ki[0],void(Gr[0]=Ki[1])}Yr?Yr.push(Gr):jn.set(Vr,[Gr]),Cr?Cr.push(Gr):jn.set(ni,[Gr]),qn.push(Gr)}function Zr(Gr){var Vr,ni,Yr,ai,Cr;if(ni=jn.get(Vn[Gr[0]]))for(ai=0,Cr=ni.length;ai<Cr;++ai){if(zr(Yr=ni[ai],Gr))return Gr[0]=Yr[0],void(Gr[1]=Yr[1]);if(si(Yr,Gr))return Gr[0]=Yr[1],void(Gr[1]=Yr[0])}if(ni=jn.get(Vr=Vn[Gr[0]+Wr(Gr)]))for(ai=0,Cr=ni.length;ai<Cr;++ai){if(zr(Yr=ni[ai],Gr))return Gr[0]=Yr[0],void(Gr[1]=Yr[1]);if(si(Yr,Gr))return Gr[0]=Yr[1],void(Gr[1]=Yr[0])}ni?ni.push(Gr):jn.set(Vr,[Gr]),qn.push(Gr)}function Fr(Gr,Vr){var ni=Gr[0],Yr=Vr[0],ai=Gr[1];if(ni-ai!=Yr-Vr[1])return!1;for(;ni<=ai;++ni,++Yr)if(!Lu(Vn[ni],Vn[Yr]))return!1;return!0}function ei(Gr,Vr){var ni=Gr[0],Yr=Vr[0],ai=Gr[1],Cr=Vr[1];if(ni-ai!=Yr-Cr)return!1;for(;ni<=ai;++ni,--Cr)if(!Lu(Vn[ni],Vn[Cr]))return!1;return!0}function zr(Gr,Vr){var ni=Gr[0],Yr=Vr[0],ai=Gr[1]-ni;if(ai!==Vr[1]-Yr)return!1;for(var Cr=Wr(Gr),Ki=Wr(Vr),Si=0;Si<ai;++Si)if(!Lu(Vn[ni+(Si+Cr)%ai],Vn[Yr+(Si+Ki)%ai]))return!1;return!0}function si(Gr,Vr){var ni=Gr[0],Yr=Vr[0],ai=Gr[1],Cr=Vr[1],Ki=ai-ni;if(Ki!==Cr-Yr)return!1;for(var Si=Wr(Gr),Ro=Ki-Wr(Vr),Wi=0;Wi<Ki;++Wi)if(!Lu(Vn[ni+(Wi+Si)%Ki],Vn[Cr-(Wi+Ro)%Ki]))return!1;return!0}function Wr(Gr){for(var Vr=Gr[0],ni=Gr[1],Yr=Vr,ai=Yr,Cr=Vn[Yr];++Yr<ni;){var Ki=Vn[Yr];(Ki[0]<Cr[0]||Ki[0]===Cr[0]&&Ki[1]<Cr[1])&&(ai=Yr,Cr=Ki)}return ai-Vr}return an}(function(an){var _n,bn,En,un=Jh(an),Vn=an.coordinates,nr=an.lines,xn=an.rings;for(bn=0,En=nr.length;bn<En;++bn)for(var zn=nr[bn],jn=zn[0],qn=zn[1];++jn<qn;)un.has(Vn[jn])&&(_n={0:jn,1:zn[1]},zn[1]=jn,zn=zn.next=_n);for(bn=0,En=xn.length;bn<En;++bn)for(var Gn=xn[bn],Zr=Gn[0],Fr=Zr,ei=Gn[1],zr=un.has(Vn[Zr]);++Fr<ei;)un.has(Vn[Fr])&&(zr?(_n={0:Fr,1:Gn[1]},Gn[1]=Fr,Gn=Gn.next=_n):(Qh(Vn,Zr,ei,ei-Fr),Vn[ei]=Vn[Zr],zr=!0,Fr=Zr));return an}(function(an){var _n=-1,bn=[],En=[],un=[];function Vn(Gn){Gn&&ku.call(nr,Gn.type)&&nr[Gn.type](Gn)}var nr={GeometryCollection:function(Gn){Gn.geometries.forEach(Vn)},LineString:function(Gn){Gn.arcs=xn(Gn.arcs)},MultiLineString:function(Gn){Gn.arcs=Gn.arcs.map(xn)},Polygon:function(Gn){Gn.arcs=Gn.arcs.map(zn)},MultiPolygon:function(Gn){Gn.arcs=Gn.arcs.map(jn)}};function xn(Gn){for(var Zr=0,Fr=Gn.length;Zr<Fr;++Zr)un[++_n]=Gn[Zr];var ei={0:_n-Fr+1,1:_n};return bn.push(ei),ei}function zn(Gn){for(var Zr=0,Fr=Gn.length;Zr<Fr;++Zr)un[++_n]=Gn[Zr];var ei={0:_n-Fr+1,1:_n};return En.push(ei),ei}function jn(Gn){return Gn.map(zn)}for(var qn in an)Vn(an[qn]);return{type:"Topology",coordinates:un,lines:bn,rings:En,objects:an}}(vt))),Pt=At.coordinates,Nt=Au(1.4*At.arcs.length,su,Md);function Vt(an){an&&ku.call(Gt,an.type)&&Gt[an.type](an)}vt=At.objects,At.bbox=xt,At.arcs=At.arcs.map(function(an,_n){return Nt.set(an,_n),Pt.slice(an[0],an[1]+1)}),delete At.coordinates,Pt=null;var Gt={GeometryCollection:function(an){an.geometries.forEach(Vt)},LineString:function(an){an.arcs=qt(an.arcs)},MultiLineString:function(an){an.arcs=an.arcs.map(qt)},Polygon:function(an){an.arcs=an.arcs.map(qt)},MultiPolygon:function(an){an.arcs=an.arcs.map(en)}};function qt(an){var _n=[];do{var bn=Nt.get(an);_n.push(an[0]<an[1]?bn:~bn)}while(an=an.next);return _n}function en(an){return an.map(qt)}for(var Xt in vt)Vt(vt[Xt]);return Tt&&(At.transform=Tt,At.arcs=function(an){for(var _n=-1,bn=an.length;++_n<bn;){for(var En,un,Vn=an[_n],nr=0,xn=1,zn=Vn.length,jn=Vn[0],qn=jn[0],Gn=jn[1];++nr<zn;)En=(jn=Vn[nr])[0],un=jn[1],En===qn&&un===Gn||(Vn[xn++]=[En-qn,un-Gn],qn=En,Gn=un);xn===1&&(Vn[xn++]=[0,0]),Vn.length=xn}return an}(At.arcs)),At}function su(vt){var _t,xt=vt[0],Tt=vt[1];return Tt<xt&&(_t=xt,xt=Tt,Tt=_t),xt+31*Tt}function Md(vt,_t){var xt,Tt=vt[0],At=vt[1],Pt=_t[0],Nt=_t[1];return At<Tt&&(xt=Tt,Tt=At,At=xt),Nt<Pt&&(xt=Pt,Pt=Nt,Nt=xt),Tt===Pt&&At===Nt}function wf(vt,_t){if(_t===void 0&&(_t={}),or(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");_t.mutate!==!1&&_t.mutate!==void 0||(vt=Ho(vt));var xt=[];Pr(vt,function(At){xt.push(At.geometry)});var Tt=Nc({geoms:Qt(xt).geometry});return function(At){return Rc(At,Ja.apply(this,arguments))}(Tt,Tt.objects.geoms.geometries)}function ed(vt,_t){if(_t===void 0&&(_t={}),!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.mutate;if(or(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");xt!==!1&&xt!==void 0||(vt=Ho(vt));var Tt=function(Pt){var Nt={};Pr(Pt,function(Gt){Nt[Gt.geometry.type]=!0});var Vt=Object.keys(Nt);return Vt.length===1?Vt[0]:null}(vt);if(!Tt)throw new Error("geojson must be homogenous");var At=vt;switch(Tt){case"LineString":return yl(At,_t);case"Polygon":return wf(At,_t);default:throw new Error(Tt+" is not supported")}}function Al(vt,_t){_t===void 0&&(_t={});var xt=typeof _t=="object"?_t.mutate:_t;if(!vt)throw new Error("geojson is required");var Tt=or(vt),At=[];switch(Tt){case"LineString":At=Ua(vt);break;case"MultiLineString":case"Polygon":Nn(vt).forEach(function(Nt){At.push(Ua(Nt))});break;case"MultiPolygon":Nn(vt).forEach(function(Nt){var Vt=[];Nt.forEach(function(Gt){Vt.push(Ua(Gt))}),At.push(Vt)});break;case"Point":return vt;case"MultiPoint":var Pt={};Nn(vt).forEach(function(Nt){var Vt=Nt.join("-");Object.prototype.hasOwnProperty.call(Pt,Vt)||(At.push(Nt),Pt[Vt]=!0)});break;default:throw new Error(Tt+" geometry not supported")}return vt.coordinates?xt===!0?(vt.coordinates=At,vt):{type:Tt,coordinates:At}:xt===!0?(vt.geometry.coordinates=At,vt):wt({type:Tt,coordinates:At},vt.properties,{bbox:vt.bbox,id:vt.id})}function Ua(vt){var _t=Nn(vt);if(_t.length===2&&!Th(_t[0],_t[1]))return _t;var xt=[],Tt=_t.length-1,At=xt.length;xt.push(_t[0]);for(var Pt=1;Pt<Tt;Pt++){var Nt=xt[xt.length-1];_t[Pt][0]===Nt[0]&&_t[Pt][1]===Nt[1]||(xt.push(_t[Pt]),(At=xt.length)>2&&Fo(xt[At-3],xt[At-1],xt[At-2])&&xt.splice(xt.length-2,1))}if(xt.push(_t[_t.length-1]),At=xt.length,Th(_t[0],_t[_t.length-1])&&At<4)throw new Error("invalid polygon");return Fo(xt[At-3],xt[At-1],xt[At-2])&&xt.splice(xt.length-2,1),xt}function Th(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function Fo(vt,_t,xt){var Tt=xt[0],At=xt[1],Pt=vt[0],Nt=vt[1],Vt=_t[0],Gt=_t[1],qt=Vt-Pt,en=Gt-Nt;return(Tt-Pt)*en-(At-Nt)*qt===0&&(Math.abs(qt)>=Math.abs(en)?qt>0?Pt<=Tt&&Tt<=Vt:Vt<=Tt&&Tt<=Pt:en>0?Nt<=At&&At<=Gt:Gt<=At&&At<=Nt)}function Pu(vt,_t,xt){var Tt=_t.x,At=_t.y,Pt=xt.x-Tt,Nt=xt.y-At;if(Pt!==0||Nt!==0){var Vt=((vt.x-Tt)*Pt+(vt.y-At)*Nt)/(Pt*Pt+Nt*Nt);Vt>1?(Tt=xt.x,At=xt.y):Vt>0&&(Tt+=Pt*Vt,At+=Nt*Vt)}return(Pt=vt.x-Tt)*Pt+(Nt=vt.y-At)*Nt}function ba(vt,_t,xt,Tt,At){for(var Pt,Nt=Tt,Vt=_t+1;Vt<xt;Vt++){var Gt=Pu(vt[Vt],vt[_t],vt[xt]);Gt>Nt&&(Pt=Vt,Nt=Gt)}Nt>Tt&&(Pt-_t>1&&ba(vt,_t,Pt,Tt,At),At.push(vt[Pt]),xt-Pt>1&&ba(vt,Pt,xt,Tt,At))}function eh(vt,_t){var xt=vt.length-1,Tt=[vt[0]];return ba(vt,0,xt,_t,Tt),Tt.push(vt[xt]),Tt}function th(vt,_t,xt){if(vt.length<=2)return vt;var Tt=_t!==void 0?_t*_t:1;return vt=eh(vt=xt?vt:function(At,Pt){for(var Nt,Vt,Gt,qt,en,Xt=At[0],an=[Xt],_n=1,bn=At.length;_n<bn;_n++)Nt=At[_n],Gt=Xt,qt=void 0,en=void 0,qt=(Vt=Nt).x-Gt.x,en=Vt.y-Gt.y,qt*qt+en*en>Pt&&(an.push(Nt),Xt=Nt);return Xt!==Nt&&an.push(Nt),an}(vt,Tt),Tt)}function au(vt,_t,xt){return th(vt.map(function(Tt){return{x:Tt[0],y:Tt[1],z:Tt[2]}}),_t,xt).map(function(Tt){return Tt.z?[Tt.x,Tt.y,Tt.z]:[Tt.x,Tt.y]})}function nh(vt,_t,xt){return vt.map(function(Tt){var At=Tt.map(function(Nt){return{x:Nt[0],y:Nt[1]}});if(At.length<4)throw new Error("invalid polygon");for(var Pt=th(At,_t,xt).map(function(Nt){return[Nt.x,Nt.y]});!$d(Pt);)Pt=th(At,_t-=.01*_t,xt).map(function(Nt){return[Nt.x,Nt.y]});return Pt[Pt.length-1][0]===Pt[0][0]&&Pt[Pt.length-1][1]===Pt[0][1]||Pt.push(Pt[0]),Pt})}function $d(vt){return!(vt.length<3)&&!(vt.length===3&&vt[2][0]===vt[0][0]&&vt[2][1]===vt[0][1])}var xc=function(){function vt(_t){this.points=_t.points||[],this.duration=_t.duration||1e4,this.sharpness=_t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=_t.stepLength||60,this.length=this.points.length,this.delay=0;for(var xt=0;xt<this.length;xt++)this.points[xt].z=this.points[xt].z||0;for(xt=0;xt<this.length-1;xt++){var Tt=this.points[xt],At=this.points[xt+1];this.centers.push({x:(Tt.x+At.x)/2,y:(Tt.y+At.y)/2,z:(Tt.z+At.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),xt=0;xt<this.centers.length-1;xt++){var Pt=this.points[xt+1].x-(this.centers[xt].x+this.centers[xt+1].x)/2,Nt=this.points[xt+1].y-(this.centers[xt].y+this.centers[xt+1].y)/2,Vt=this.points[xt+1].z-(this.centers[xt].y+this.centers[xt+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[xt+1].x+this.sharpness*(this.centers[xt].x+Pt),y:(1-this.sharpness)*this.points[xt+1].y+this.sharpness*(this.centers[xt].y+Nt),z:(1-this.sharpness)*this.points[xt+1].z+this.sharpness*(this.centers[xt].z+Vt)},{x:(1-this.sharpness)*this.points[xt+1].x+this.sharpness*(this.centers[xt+1].x+Pt),y:(1-this.sharpness)*this.points[xt+1].y+this.sharpness*(this.centers[xt+1].y+Nt),z:(1-this.sharpness)*this.points[xt+1].z+this.sharpness*(this.centers[xt+1].z+Vt)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return vt.prototype.cacheSteps=function(_t){var xt=[],Tt=this.pos(0);xt.push(0);for(var At=0;At<this.duration;At+=10){var Pt=this.pos(At);Math.sqrt((Pt.x-Tt.x)*(Pt.x-Tt.x)+(Pt.y-Tt.y)*(Pt.y-Tt.y)+(Pt.z-Tt.z)*(Pt.z-Tt.z))>_t&&(xt.push(At),Tt=Pt)}return xt},vt.prototype.vector=function(_t){var xt=this.pos(_t+10),Tt=this.pos(_t-10);return{angle:180*Math.atan2(xt.y-Tt.y,xt.x-Tt.x)/3.14,speed:Math.sqrt((Tt.x-xt.x)*(Tt.x-xt.x)+(Tt.y-xt.y)*(Tt.y-xt.y)+(Tt.z-xt.z)*(Tt.z-xt.z))}},vt.prototype.pos=function(_t){var xt=_t-this.delay;xt<0&&(xt=0),xt>this.duration&&(xt=this.duration-1);var Tt=xt/this.duration;if(Tt>=1)return this.points[this.length-1];var At=Math.floor((this.points.length-1)*Tt);return function(Pt,Nt,Vt,Gt,qt){var en=function(Xt){var an=Xt*Xt;return[an*Xt,3*an*(1-Xt),3*Xt*(1-Xt)*(1-Xt),(1-Xt)*(1-Xt)*(1-Xt)]}(Pt);return{x:qt.x*en[0]+Gt.x*en[1]+Vt.x*en[2]+Nt.x*en[3],y:qt.y*en[0]+Gt.y*en[1]+Vt.y*en[2]+Nt.y*en[3],z:qt.z*en[0]+Gt.z*en[1]+Vt.z*en[2]+Nt.z*en[3]}}((this.length-1)*Tt-At,this.points[At],this.controls[At][1],this.controls[At+1][0],this.points[At+1])},vt}();function Rd(vt,_t){_t===void 0&&(_t={});for(var xt=_t.resolution||1e4,Tt=_t.sharpness||.85,At=[],Pt=Un(vt).coordinates.map(function(qt){return{x:qt[0],y:qt[1]}}),Nt=new xc({duration:xt,points:Pt,sharpness:Tt}),Vt=function(qt){var en=Nt.pos(qt);Math.floor(qt/100)%2==0&&At.push([en.x,en.y])},Gt=0;Gt<Nt.duration;Gt+=10)Vt(Gt);return Vt(Nt.duration),Dt(At,_t.properties)}function td(vt,_t){_t===void 0&&(_t={});var xt=Number(vt[0]),Tt=Number(vt[1]),At=Number(vt[2]),Pt=Number(vt[3]);if(vt.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var Nt=[xt,Tt];return Ot([[Nt,[At,Tt],[At,Pt],[xt,Pt],Nt]],_t.properties,{bbox:vt,id:_t.id})}function kh(vt){return td(fn(vt))}function nd(vt){var _t=vt[0],xt=vt[1],Tt=vt[2],At=vt[3];if(mo(vt.slice(0,2),[Tt,xt])>=mo(vt.slice(0,2),[_t,At])){var Pt=(xt+At)/2;return[_t,Pt-(Tt-_t)/2,Tt,Pt+(Tt-_t)/2]}var Nt=(_t+Tt)/2;return[Nt-(At-xt)/2,xt,Nt+(At-xt)/2,At]}function Ys(vt,_t,xt,Tt){Tt===void 0&&(Tt={});var At=cn(vt),Pt=Tn(At[0]),Nt=Tn(At[1]),Vt=Tn(xt),Gt=on(_t,Tt.units),qt=Math.asin(Math.sin(Nt)*Math.cos(Gt)+Math.cos(Nt)*Math.sin(Gt)*Math.cos(Vt));return kt([Cn(Pt+Math.atan2(Math.sin(Vt)*Math.sin(Gt)*Math.cos(Nt),Math.cos(Gt)-Math.sin(Nt)*Math.sin(qt))),Cn(qt)],Tt.properties)}function Dc(vt,_t,xt){xt===void 0&&(xt={});for(var Tt=xt.steps||64,At=xt.properties?xt.properties:!Array.isArray(vt)&&vt.type==="Feature"&&vt.properties?vt.properties:{},Pt=[],Nt=0;Nt<Tt;Nt++)Pt.push(Ys(vt,_t,-360*Nt/Tt,xt).geometry.coordinates);return Pt.push(Pt[0]),Ot([Pt],At)}function Qa(vt,_t,xt){if(xt===void 0&&(xt={}),xt.final===!0)return function(Xt,an){var _n=Qa(an,Xt);return _n=(_n+180)%360}(vt,_t);var Tt=cn(vt),At=cn(_t),Pt=Tn(Tt[0]),Nt=Tn(At[0]),Vt=Tn(Tt[1]),Gt=Tn(At[1]),qt=Math.sin(Nt-Pt)*Math.cos(Gt),en=Math.cos(Vt)*Math.sin(Gt)-Math.sin(Vt)*Math.cos(Gt)*Math.cos(Nt-Pt);return Cn(Math.atan2(qt,en))}function Ga(vt,_t){_t===void 0&&(_t={});var xt=fn(vt);return kt([(xt[0]+xt[2])/2,(xt[1]+xt[3])/2],_t.properties,_t)}function Ll(vt,_t){_t===void 0&&(_t={});var xt=0,Tt=0,At=0;return vn(vt,function(Pt){xt+=Pt[0],Tt+=Pt[1],At++},!0),kt([xt/At,Tt/At],_t.properties)}function xo(vt){var _t=[];return vt.type==="FeatureCollection"?rr(vt,function(xt){vn(xt,function(Tt){_t.push(kt(Tt,xt.properties))})}):vn(vt,function(xt){_t.push(kt(xt,vt.properties))}),Ft(_t)}var Ef=rh,wp=rh;function rh(vt,_t,xt){xt=xt||2;var Tt,At,Pt,Nt,Vt,Gt,qt,en=_t&&_t.length,Xt=en?_t[0]*xt:vt.length,an=oc(vt,0,Xt,xt,!0),_n=[];if(!an)return _n;if(en&&(an=function(En,un,Vn,nr){var xn,zn,jn,qn=[];for(xn=0,zn=un.length;xn<zn;xn++)(jn=oc(En,un[xn]*nr,xn<zn-1?un[xn+1]*nr:En.length,nr,!1))===jn.next&&(jn.steiner=!0),qn.push(Kn(jn));for(qn.sort(Zt),xn=0;xn<qn.length;xn++)dn(qn[xn],Vn),Vn=ql(Vn,Vn.next);return Vn}(vt,_t,an,xt)),vt.length>80*xt){Tt=Pt=vt[0],At=Nt=vt[1];for(var bn=xt;bn<Xt;bn+=xt)(Vt=vt[bn])<Tt&&(Tt=Vt),(Gt=vt[bn+1])<At&&(At=Gt),Vt>Pt&&(Pt=Vt),Gt>Nt&&(Nt=Gt);qt=(qt=Math.max(Pt-Tt,Nt-At))!==0?1/qt:0}return vl(an,_n,xt,Tt,At,qt),_n}function oc(vt,_t,xt,Tt,At){var Pt,Nt;if(At===Ms(vt,_t,xt,Tt)>0)for(Pt=_t;Pt<xt;Pt+=Tt)Nt=lo(Pt,vt[Pt],vt[Pt+1],Nt);else for(Pt=xt-Tt;Pt>=_t;Pt-=Tt)Nt=lo(Pt,vt[Pt],vt[Pt+1],Nt);return Nt&&ui(Nt,Nt.next)&&(Zo(Nt),Nt=Nt.next),Nt}function ql(vt,_t){if(!vt)return vt;_t||(_t=vt);var xt,Tt=vt;do if(xt=!1,Tt.steiner||!ui(Tt,Tt.next)&&ri(Tt.prev,Tt,Tt.next)!==0)Tt=Tt.next;else{if(Zo(Tt),(Tt=_t=Tt.prev)===Tt.next)break;xt=!0}while(xt||Tt!==_t);return _t}function vl(vt,_t,xt,Tt,At,Pt,Nt){if(vt){!Nt&&Pt&&function(en,Xt,an,_n){var bn=en;do bn.z===null&&(bn.z=Mn(bn.x,bn.y,Xt,an,_n)),bn.prevZ=bn.prev,bn.nextZ=bn.next,bn=bn.next;while(bn!==en);bn.prevZ.nextZ=null,bn.prevZ=null,function(En){var un,Vn,nr,xn,zn,jn,qn,Gn,Zr=1;do{for(Vn=En,En=null,zn=null,jn=0;Vn;){for(jn++,nr=Vn,qn=0,un=0;un<Zr&&(qn++,nr=nr.nextZ);un++);for(Gn=Zr;qn>0||Gn>0&&nr;)qn!==0&&(Gn===0||!nr||Vn.z<=nr.z)?(xn=Vn,Vn=Vn.nextZ,qn--):(xn=nr,nr=nr.nextZ,Gn--),zn?zn.nextZ=xn:En=xn,xn.prevZ=zn,zn=xn;Vn=nr}zn.nextZ=null,Zr*=2}while(jn>1)}(bn)}(vt,Tt,At,Pt);for(var Vt,Gt,qt=vt;vt.prev!==vt.next;)if(Vt=vt.prev,Gt=vt.next,Pt?el(vt,Tt,At,Pt):Wa(vt))_t.push(Vt.i/xt),_t.push(vt.i/xt),_t.push(Gt.i/xt),Zo(vt),vt=Gt.next,qt=Gt.next;else if((vt=Gt)===qt){Nt?Nt===1?vl(vt=rd(vt,_t,xt),_t,xt,Tt,At,Pt,2):Nt===2&&Ko(vt,_t,xt,Tt,At,Pt):vl(ql(vt),_t,xt,Tt,At,Pt,1);break}}}function Wa(vt){var _t=vt.prev,xt=vt,Tt=vt.next;if(ri(_t,xt,Tt)>=0)return!1;for(var At=vt.next.next;At!==vt.prev;){if(dr(_t.x,_t.y,xt.x,xt.y,Tt.x,Tt.y,At.x,At.y)&&ri(At.prev,At,At.next)>=0)return!1;At=At.next}return!0}function el(vt,_t,xt,Tt){var At=vt.prev,Pt=vt,Nt=vt.next;if(ri(At,Pt,Nt)>=0)return!1;for(var Vt=At.x<Pt.x?At.x<Nt.x?At.x:Nt.x:Pt.x<Nt.x?Pt.x:Nt.x,Gt=At.y<Pt.y?At.y<Nt.y?At.y:Nt.y:Pt.y<Nt.y?Pt.y:Nt.y,qt=At.x>Pt.x?At.x>Nt.x?At.x:Nt.x:Pt.x>Nt.x?Pt.x:Nt.x,en=At.y>Pt.y?At.y>Nt.y?At.y:Nt.y:Pt.y>Nt.y?Pt.y:Nt.y,Xt=Mn(Vt,Gt,_t,xt,Tt),an=Mn(qt,en,_t,xt,Tt),_n=vt.prevZ,bn=vt.nextZ;_n&&_n.z>=Xt&&bn&&bn.z<=an;){if(_n!==vt.prev&&_n!==vt.next&&dr(At.x,At.y,Pt.x,Pt.y,Nt.x,Nt.y,_n.x,_n.y)&&ri(_n.prev,_n,_n.next)>=0||(_n=_n.prevZ,bn!==vt.prev&&bn!==vt.next&&dr(At.x,At.y,Pt.x,Pt.y,Nt.x,Nt.y,bn.x,bn.y)&&ri(bn.prev,bn,bn.next)>=0))return!1;bn=bn.nextZ}for(;_n&&_n.z>=Xt;){if(_n!==vt.prev&&_n!==vt.next&&dr(At.x,At.y,Pt.x,Pt.y,Nt.x,Nt.y,_n.x,_n.y)&&ri(_n.prev,_n,_n.next)>=0)return!1;_n=_n.prevZ}for(;bn&&bn.z<=an;){if(bn!==vt.prev&&bn!==vt.next&&dr(At.x,At.y,Pt.x,Pt.y,Nt.x,Nt.y,bn.x,bn.y)&&ri(bn.prev,bn,bn.next)>=0)return!1;bn=bn.nextZ}return!0}function rd(vt,_t,xt){var Tt=vt;do{var At=Tt.prev,Pt=Tt.next.next;!ui(At,Pt)&&Ri(At,Tt,Tt.next,Pt)&&Ii(At,Pt)&&Ii(Pt,At)&&(_t.push(At.i/xt),_t.push(Tt.i/xt),_t.push(Pt.i/xt),Zo(Tt),Zo(Tt.next),Tt=vt=Pt),Tt=Tt.next}while(Tt!==vt);return Tt}function Ko(vt,_t,xt,Tt,At,Pt){var Nt=vt;do{for(var Vt=Nt.next.next;Vt!==Nt.prev;){if(Nt.i!==Vt.i&&Hr(Nt,Vt)){var Gt=yo(Nt,Vt);return Nt=ql(Nt,Nt.next),Gt=ql(Gt,Gt.next),vl(Nt,_t,xt,Tt,At,Pt),void vl(Gt,_t,xt,Tt,At,Pt)}Vt=Vt.next}Nt=Nt.next}while(Nt!==vt)}function Zt(vt,_t){return vt.x-_t.x}function dn(vt,_t){if(_t=function(Tt,At){var Pt,Nt=At,Vt=Tt.x,Gt=Tt.y,qt=-1/0;do{if(Gt<=Nt.y&&Gt>=Nt.next.y&&Nt.next.y!==Nt.y){var en=Nt.x+(Gt-Nt.y)*(Nt.next.x-Nt.x)/(Nt.next.y-Nt.y);if(en<=Vt&&en>qt){if(qt=en,en===Vt){if(Gt===Nt.y)return Nt;if(Gt===Nt.next.y)return Nt.next}Pt=Nt.x<Nt.next.x?Nt:Nt.next}}Nt=Nt.next}while(Nt!==At);if(!Pt)return null;if(Vt===qt)return Pt.prev;var Xt,an=Pt,_n=Pt.x,bn=Pt.y,En=1/0;for(Nt=Pt.next;Nt!==an;)Vt>=Nt.x&&Nt.x>=_n&&Vt!==Nt.x&&dr(Gt<bn?Vt:qt,Gt,_n,bn,Gt<bn?qt:Vt,Gt,Nt.x,Nt.y)&&((Xt=Math.abs(Gt-Nt.y)/(Vt-Nt.x))<En||Xt===En&&Nt.x>Pt.x)&&Ii(Nt,Tt)&&(Pt=Nt,En=Xt),Nt=Nt.next;return Pt}(vt,_t)){var xt=yo(_t,vt);ql(xt,xt.next)}}function Mn(vt,_t,xt,Tt,At){return(vt=1431655765&((vt=858993459&((vt=252645135&((vt=16711935&((vt=32767*(vt-xt)*At)|vt<<8))|vt<<4))|vt<<2))|vt<<1))|(_t=1431655765&((_t=858993459&((_t=252645135&((_t=16711935&((_t=32767*(_t-Tt)*At)|_t<<8))|_t<<4))|_t<<2))|_t<<1))<<1}function Kn(vt){var _t=vt,xt=vt;do _t.x<xt.x&&(xt=_t),_t=_t.next;while(_t!==vt);return xt}function dr(vt,_t,xt,Tt,At,Pt,Nt,Vt){return(At-Nt)*(_t-Vt)-(vt-Nt)*(Pt-Vt)>=0&&(vt-Nt)*(Tt-Vt)-(xt-Nt)*(_t-Vt)>=0&&(xt-Nt)*(Pt-Vt)-(At-Nt)*(Tt-Vt)>=0}function Hr(vt,_t){return vt.next.i!==_t.i&&vt.prev.i!==_t.i&&!function(xt,Tt){var At=xt;do{if(At.i!==xt.i&&At.next.i!==xt.i&&At.i!==Tt.i&&At.next.i!==Tt.i&&Ri(At,At.next,xt,Tt))return!0;At=At.next}while(At!==xt);return!1}(vt,_t)&&Ii(vt,_t)&&Ii(_t,vt)&&function(xt,Tt){var At=xt,Pt=!1,Nt=(xt.x+Tt.x)/2,Vt=(xt.y+Tt.y)/2;do At.y>Vt!=At.next.y>Vt&&At.next.y!==At.y&&Nt<(At.next.x-At.x)*(Vt-At.y)/(At.next.y-At.y)+At.x&&(Pt=!Pt),At=At.next;while(At!==xt);return Pt}(vt,_t)}function ri(vt,_t,xt){return(_t.y-vt.y)*(xt.x-_t.x)-(_t.x-vt.x)*(xt.y-_t.y)}function ui(vt,_t){return vt.x===_t.x&&vt.y===_t.y}function Ri(vt,_t,xt,Tt){return!!(ui(vt,_t)&&ui(xt,Tt)||ui(vt,Tt)&&ui(xt,_t))||ri(vt,_t,xt)>0!=ri(vt,_t,Tt)>0&&ri(xt,Tt,vt)>0!=ri(xt,Tt,_t)>0}function Ii(vt,_t){return ri(vt.prev,vt,vt.next)<0?ri(vt,_t,vt.next)>=0&&ri(vt,vt.prev,_t)>=0:ri(vt,_t,vt.prev)<0||ri(vt,vt.next,_t)<0}function yo(vt,_t){var xt=new Ds(vt.i,vt.x,vt.y),Tt=new Ds(_t.i,_t.x,_t.y),At=vt.next,Pt=_t.prev;return vt.next=_t,_t.prev=vt,xt.next=At,At.prev=xt,Tt.next=xt,xt.prev=Tt,Pt.next=Tt,Tt.prev=Pt,Tt}function lo(vt,_t,xt,Tt){var At=new Ds(vt,_t,xt);return Tt?(At.next=Tt.next,At.prev=Tt,Tt.next.prev=At,Tt.next=At):(At.prev=At,At.next=At),At}function Zo(vt){vt.next.prev=vt.prev,vt.prev.next=vt.next,vt.prevZ&&(vt.prevZ.nextZ=vt.nextZ),vt.nextZ&&(vt.nextZ.prevZ=vt.prevZ)}function Ds(vt,_t,xt){this.i=vt,this.x=_t,this.y=xt,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ms(vt,_t,xt,Tt){for(var At=0,Pt=_t,Nt=xt-Tt;Pt<xt;Pt+=Tt)At+=(vt[Nt]-vt[Pt])*(vt[Pt+1]+vt[Nt+1]),Nt=Pt;return At}function wc(vt){var _t=function(Vt){for(var Gt=Vt[0][0].length,qt={vertices:[],holes:[],dimensions:Gt},en=0,Xt=0;Xt<Vt.length;Xt++){for(var an=0;an<Vt[Xt].length;an++)for(var _n=0;_n<Gt;_n++)qt.vertices.push(Vt[Xt][an][_n]);Xt>0&&(en+=Vt[Xt-1].length,qt.holes.push(en))}return qt}(vt),xt=Ef(_t.vertices,_t.holes,2),Tt=[],At=[];xt.forEach(function(Vt,Gt){var qt=xt[Gt];At.push([_t.vertices[2*qt],_t.vertices[2*qt+1]])});for(var Pt=0;Pt<At.length;Pt+=3){var Nt=At.slice(Pt,Pt+3);Nt.push(At[Pt]),Tt.push(Ot([Nt]))}return Tt}function Yl(vt,_t){if(!vt)throw new Error("targetPoint is required");if(!_t)throw new Error("points is required");var xt,Tt=1/0,At=0;return rr(_t,function(Pt,Nt){var Vt=mo(vt,Pt);Vt<Tt&&(At=Nt,Tt=Vt)}),(xt=Ho(_t.features[At])).properties.featureIndex=At,xt.properties.distanceToPoint=Tt,xt}function Bc(vt){if(!vt)throw new Error("geojson is required");var _t=[];return Pr(vt,function(xt){(function(Tt,At){var Pt=[],Nt=Tt.geometry;if(Nt!==null){switch(Nt.type){case"Polygon":Pt=Nn(Nt);break;case"LineString":Pt=[Nn(Nt)]}Pt.forEach(function(Vt){(function(Gt,qt){var en=[];return Gt.reduce(function(Xt,an){var _n=Dt([Xt,an],qt);return _n.bbox=function(bn,En){var un=bn[0],Vn=bn[1],nr=En[0],xn=En[1];return[un<nr?un:nr,Vn<xn?Vn:xn,un>nr?un:nr,Vn>xn?Vn:xn]}(Xt,an),en.push(_n),an}),en})(Vt,Tt.properties).forEach(function(Gt){Gt.id=At.length,At.push(Gt)})})}})(xt,_t)}),Ft(_t)}rh.deviation=function(vt,_t,xt,Tt){var At=_t&&_t.length,Pt=At?_t[0]*xt:vt.length,Nt=Math.abs(Ms(vt,0,Pt,xt));if(At)for(var Vt=0,Gt=_t.length;Vt<Gt;Vt++){var qt=_t[Vt]*xt,en=Vt<Gt-1?_t[Vt+1]*xt:vt.length;Nt-=Math.abs(Ms(vt,qt,en,xt))}var Xt=0;for(Vt=0;Vt<Tt.length;Vt+=3){var an=Tt[Vt]*xt,_n=Tt[Vt+1]*xt,bn=Tt[Vt+2]*xt;Xt+=Math.abs((vt[an]-vt[bn])*(vt[_n+1]-vt[an+1])-(vt[an]-vt[_n])*(vt[bn+1]-vt[an+1]))}return Nt===0&&Xt===0?0:Math.abs((Xt-Nt)/Nt)},rh.flatten=function(vt){for(var _t=vt[0][0].length,xt={vertices:[],holes:[],dimensions:_t},Tt=0,At=0;At<vt.length;At++){for(var Pt=0;Pt<vt[At].length;Pt++)for(var Nt=0;Nt<_t;Nt++)xt.vertices.push(vt[At][Pt][Nt]);At>0&&(Tt+=vt[At-1].length,xt.holes.push(Tt))}return xt},Ef.default=wp;var ca=Xo(function(vt,_t){function xt(bn,En,un){un===void 0&&(un={});var Vn={type:"Feature"};return(un.id===0||un.id)&&(Vn.id=un.id),un.bbox&&(Vn.bbox=un.bbox),Vn.properties=En||{},Vn.geometry=bn,Vn}function Tt(bn,En,un){if(un===void 0&&(un={}),!bn)throw new Error("coordinates is required");if(!Array.isArray(bn))throw new Error("coordinates must be an Array");if(bn.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_n(bn[0])||!_n(bn[1]))throw new Error("coordinates must contain numbers");return xt({type:"Point",coordinates:bn},En,un)}function At(bn,En,un){un===void 0&&(un={});for(var Vn=0,nr=bn;Vn<nr.length;Vn++){var xn=nr[Vn];if(xn.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var zn=0;zn<xn[xn.length-1].length;zn++)if(xn[xn.length-1][zn]!==xn[0][zn])throw new Error("First and last Position are not equivalent.")}return xt({type:"Polygon",coordinates:bn},En,un)}function Pt(bn,En,un){if(un===void 0&&(un={}),bn.length<2)throw new Error("coordinates must be an array of two or more positions");return xt({type:"LineString",coordinates:bn},En,un)}function Nt(bn,En){En===void 0&&(En={});var un={type:"FeatureCollection"};return En.id&&(un.id=En.id),En.bbox&&(un.bbox=En.bbox),un.features=bn,un}function Vt(bn,En,un){return un===void 0&&(un={}),xt({type:"MultiLineString",coordinates:bn},En,un)}function Gt(bn,En,un){return un===void 0&&(un={}),xt({type:"MultiPoint",coordinates:bn},En,un)}function qt(bn,En,un){return un===void 0&&(un={}),xt({type:"MultiPolygon",coordinates:bn},En,un)}function en(bn,En){En===void 0&&(En="kilometers");var un=_t.factors[En];if(!un)throw new Error(En+" units is invalid");return bn*un}function Xt(bn,En){En===void 0&&(En="kilometers");var un=_t.factors[En];if(!un)throw new Error(En+" units is invalid");return bn/un}function an(bn){return 180*(bn%(2*Math.PI))/Math.PI}function _n(bn){return!isNaN(bn)&&bn!==null&&!Array.isArray(bn)}Object.defineProperty(_t,"__esModule",{value:!0}),_t.earthRadius=63710088e-1,_t.factors={centimeters:100*_t.earthRadius,centimetres:100*_t.earthRadius,degrees:_t.earthRadius/111325,feet:3.28084*_t.earthRadius,inches:39.37*_t.earthRadius,kilometers:_t.earthRadius/1e3,kilometres:_t.earthRadius/1e3,meters:_t.earthRadius,metres:_t.earthRadius,miles:_t.earthRadius/1609.344,millimeters:1e3*_t.earthRadius,millimetres:1e3*_t.earthRadius,nauticalmiles:_t.earthRadius/1852,radians:1,yards:1.0936*_t.earthRadius},_t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/_t.earthRadius,yards:1.0936133},_t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},_t.feature=xt,_t.geometry=function(bn,En,un){switch(bn){case"Point":return Tt(En).geometry;case"LineString":return Pt(En).geometry;case"Polygon":return At(En).geometry;case"MultiPoint":return Gt(En).geometry;case"MultiLineString":return Vt(En).geometry;case"MultiPolygon":return qt(En).geometry;default:throw new Error(bn+" is invalid")}},_t.point=Tt,_t.points=function(bn,En,un){return un===void 0&&(un={}),Nt(bn.map(function(Vn){return Tt(Vn,En)}),un)},_t.polygon=At,_t.polygons=function(bn,En,un){return un===void 0&&(un={}),Nt(bn.map(function(Vn){return At(Vn,En)}),un)},_t.lineString=Pt,_t.lineStrings=function(bn,En,un){return un===void 0&&(un={}),Nt(bn.map(function(Vn){return Pt(Vn,En)}),un)},_t.featureCollection=Nt,_t.multiLineString=Vt,_t.multiPoint=Gt,_t.multiPolygon=qt,_t.geometryCollection=function(bn,En,un){return un===void 0&&(un={}),xt({type:"GeometryCollection",geometries:bn},En,un)},_t.round=function(bn,En){if(En===void 0&&(En=0),En&&!(En>=0))throw new Error("precision must be a positive number");var un=Math.pow(10,En||0);return Math.round(bn*un)/un},_t.radiansToLength=en,_t.lengthToRadians=Xt,_t.lengthToDegrees=function(bn,En){return an(Xt(bn,En))},_t.bearingToAzimuth=function(bn){var En=bn%360;return En<0&&(En+=360),En},_t.radiansToDegrees=an,_t.degreesToRadians=function(bn){return bn%360*Math.PI/180},_t.convertLength=function(bn,En,un){if(En===void 0&&(En="kilometers"),un===void 0&&(un="kilometers"),!(bn>=0))throw new Error("length must be a positive number");return en(Xt(bn,En),un)},_t.convertArea=function(bn,En,un){if(En===void 0&&(En="meters"),un===void 0&&(un="kilometers"),!(bn>=0))throw new Error("area must be a positive number");var Vn=_t.areaFactors[En];if(!Vn)throw new Error("invalid original units");var nr=_t.areaFactors[un];if(!nr)throw new Error("invalid final units");return bn/Vn*nr},_t.isNumber=_n,_t.isObject=function(bn){return!!bn&&bn.constructor===Object},_t.validateBBox=function(bn){if(!bn)throw new Error("bbox is required");if(!Array.isArray(bn))throw new Error("bbox must be an Array");if(bn.length!==4&&bn.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");bn.forEach(function(En){if(!_n(En))throw new Error("bbox must only contain numbers")})},_t.validateId=function(bn){if(!bn)throw new Error("id is required");if(["string","number"].indexOf(typeof bn)===-1)throw new Error("id must be a number or a string")}});function od(vt,_t,xt){if(vt!==null)for(var Tt,At,Pt,Nt,Vt,Gt,qt,en,Xt=0,an=0,_n=vt.type,bn=_n==="FeatureCollection",En=_n==="Feature",un=bn?vt.features.length:1,Vn=0;Vn<un;Vn++){Vt=(en=!!(qt=bn?vt.features[Vn].geometry:En?vt.geometry:vt)&&qt.type==="GeometryCollection")?qt.geometries.length:1;for(var nr=0;nr<Vt;nr++){var xn=0,zn=0;if((Nt=en?qt.geometries[nr]:qt)!==null){Gt=Nt.coordinates;var jn=Nt.type;switch(Xt=!xt||jn!=="Polygon"&&jn!=="MultiPolygon"?0:1,jn){case null:break;case"Point":if(_t(Gt,an,Vn,xn,zn)===!1)return!1;an++,xn++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<Gt.length;Tt++){if(_t(Gt[Tt],an,Vn,xn,zn)===!1)return!1;an++,jn==="MultiPoint"&&xn++}jn==="LineString"&&xn++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<Gt.length;Tt++){for(At=0;At<Gt[Tt].length-Xt;At++){if(_t(Gt[Tt][At],an,Vn,xn,zn)===!1)return!1;an++}jn==="MultiLineString"&&xn++,jn==="Polygon"&&zn++}jn==="Polygon"&&xn++;break;case"MultiPolygon":for(Tt=0;Tt<Gt.length;Tt++){for(zn=0,At=0;At<Gt[Tt].length;At++){for(Pt=0;Pt<Gt[Tt][At].length-Xt;Pt++){if(_t(Gt[Tt][At][Pt],an,Vn,xn,zn)===!1)return!1;an++}zn++}xn++}break;case"GeometryCollection":for(Tt=0;Tt<Nt.geometries.length;Tt++)if(od(Nt.geometries[Tt],_t,xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function sd(vt,_t){var xt;switch(vt.type){case"FeatureCollection":for(xt=0;xt<vt.features.length&&_t(vt.features[xt].properties,xt)!==!1;xt++);break;case"Feature":_t(vt.properties,0)}}function Ep(vt,_t){if(vt.type==="Feature")_t(vt,0);else if(vt.type==="FeatureCollection")for(var xt=0;xt<vt.features.length&&_t(vt.features[xt],xt)!==!1;xt++);}function ad(vt,_t){var xt,Tt,At,Pt,Nt,Vt,Gt,qt,en,Xt,an=0,_n=vt.type==="FeatureCollection",bn=vt.type==="Feature",En=_n?vt.features.length:1;for(xt=0;xt<En;xt++){for(Vt=_n?vt.features[xt].geometry:bn?vt.geometry:vt,qt=_n?vt.features[xt].properties:bn?vt.properties:{},en=_n?vt.features[xt].bbox:bn?vt.bbox:void 0,Xt=_n?vt.features[xt].id:bn?vt.id:void 0,Nt=(Gt=!!Vt&&Vt.type==="GeometryCollection")?Vt.geometries.length:1,At=0;At<Nt;At++)if((Pt=Gt?Vt.geometries[At]:Vt)!==null)switch(Pt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_t(Pt,an,qt,en,Xt)===!1)return!1;break;case"GeometryCollection":for(Tt=0;Tt<Pt.geometries.length;Tt++)if(_t(Pt.geometries[Tt],an,qt,en,Xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_t(null,an,qt,en,Xt)===!1)return!1;an++}}function Sf(vt,_t){ad(vt,function(xt,Tt,At,Pt,Nt){var Vt,Gt=xt===null?null:xt.type;switch(Gt){case null:case"Point":case"LineString":case"Polygon":return _t(ca.feature(xt,At,{bbox:Pt,id:Nt}),Tt,0)!==!1&&void 0}switch(Gt){case"MultiPoint":Vt="Point";break;case"MultiLineString":Vt="LineString";break;case"MultiPolygon":Vt="Polygon"}for(var qt=0;qt<xt.coordinates.length;qt++){var en={type:Vt,coordinates:xt.coordinates[qt]};if(_t(ca.feature(en,At),Tt,qt)===!1)return!1}})}function lu(vt,_t){Sf(vt,function(xt,Tt,At){var Pt=0;if(xt.geometry){var Nt=xt.geometry.type;if(Nt!=="Point"&&Nt!=="MultiPoint"){var Vt,Gt=0,qt=0,en=0;return od(xt,function(Xt,an,_n,bn,En){if(Vt===void 0||Tt>Gt||bn>qt||En>en)return Vt=Xt,Gt=Tt,qt=bn,en=En,void(Pt=0);var un=ca.lineString([Vt,Xt],xt.properties);if(_t(un,Tt,At,En,Pt)===!1)return!1;Pt++,Vt=Xt})!==!1&&void 0}}})}function Nd(vt,_t){if(!vt)throw new Error("geojson is required");Sf(vt,function(xt,Tt,At){if(xt.geometry!==null){var Pt=xt.geometry.type,Nt=xt.geometry.coordinates;switch(Pt){case"LineString":if(_t(xt,Tt,At,0,0)===!1)return!1;break;case"Polygon":for(var Vt=0;Vt<Nt.length;Vt++)if(_t(ca.lineString(Nt[Vt],xt.properties),Tt,At,Vt)===!1)return!1}}})}var Bm=function(vt){var _t=[];return od(vt,function(xt){_t.push(xt)}),_t},Sp=od,Lg=function(vt,_t,xt,Tt){var At=xt;return od(vt,function(Pt,Nt,Vt,Gt,qt){At=Nt===0&&xt===void 0?Pt:_t(At,Pt,Nt,Vt,Gt,qt)},Tt),At},Ou=Ep,Fm=function(vt,_t,xt){var Tt=xt;return Ep(vt,function(At,Pt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt)}),Tt},ih=function(vt,_t){if(_t=_t||{},!ca.isObject(_t))throw new Error("options is invalid");var xt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Pt=_t.geometryIndex||0,Nt=_t.coordIndex||0,Vt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),Vt=Vt||vt.features[Tt].properties,xt=vt.features[Tt].geometry;break;case"Feature":Vt=Vt||vt.properties,xt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=vt;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var Gt=xt.coordinates;switch(xt.type){case"Point":return ca.point(Gt,Vt,_t);case"MultiPoint":return At<0&&(At=Gt.length+At),ca.point(Gt[At],Vt,_t);case"LineString":return Nt<0&&(Nt=Gt.length+Nt),ca.point(Gt[Nt],Vt,_t);case"Polygon":return Pt<0&&(Pt=Gt.length+Pt),Nt<0&&(Nt=Gt[Pt].length+Nt),ca.point(Gt[Pt][Nt],Vt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt),ca.point(Gt[At][Nt],Vt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Pt<0&&(Pt=Gt[At].length+Pt),Nt<0&&(Nt=Gt[At][Pt].length-Nt),ca.point(Gt[At][Pt][Nt],Vt,_t)}throw new Error("geojson is invalid")},zm=function(vt,_t){if(_t=_t||{},!ca.isObject(_t))throw new Error("options is invalid");var xt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Pt=_t.geometryIndex||0,Nt=_t.segmentIndex||0,Vt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),Vt=Vt||vt.features[Tt].properties,xt=vt.features[Tt].geometry;break;case"Feature":Vt=Vt||vt.properties,xt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=vt;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var Gt=xt.coordinates;switch(xt.type){case"Point":case"MultiPoint":return null;case"LineString":return Nt<0&&(Nt=Gt.length+Nt-1),ca.lineString([Gt[Nt],Gt[Nt+1]],Vt,_t);case"Polygon":return Pt<0&&(Pt=Gt.length+Pt),Nt<0&&(Nt=Gt[Pt].length+Nt-1),ca.lineString([Gt[Pt][Nt],Gt[Pt][Nt+1]],Vt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt-1),ca.lineString([Gt[At][Nt],Gt[At][Nt+1]],Vt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Pt<0&&(Pt=Gt[At].length+Pt),Nt<0&&(Nt=Gt[At][Pt].length-Nt-1),ca.lineString([Gt[At][Pt][Nt],Gt[At][Pt][Nt+1]],Vt,_t)}throw new Error("geojson is invalid")},Mu=Sf,tl=function(vt,_t,xt){var Tt=xt;return Sf(vt,function(At,Pt,Nt){Tt=Pt===0&&Nt===0&&xt===void 0?At:_t(Tt,At,Pt,Nt)}),Tt},Ig=ad,ld=function(vt,_t,xt){var Tt=xt;return ad(vt,function(At,Pt,Nt,Vt,Gt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt,Nt,Vt,Gt)}),Tt},Dl=Nd,sc=function(vt,_t,xt){var Tt=xt;return Nd(vt,function(At,Pt,Nt,Vt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt,Nt,Vt)}),Tt},Fc=sd,$u=function(vt,_t,xt){var Tt=xt;return sd(vt,function(At,Pt){Tt=Pt===0&&xt===void 0?At:_t(Tt,At,Pt)}),Tt},Dd=lu,Cf=function(vt,_t,xt){var Tt=xt,At=!1;return lu(vt,function(Pt,Nt,Vt,Gt,qt){Tt=At===!1&&xt===void 0?Pt:_t(Tt,Pt,Nt,Vt,Gt,qt),At=!0}),Tt},Tf=Object.defineProperty({coordAll:Bm,coordEach:Sp,coordReduce:Lg,featureEach:Ou,featureReduce:Fm,findPoint:ih,findSegment:zm,flattenEach:Mu,flattenReduce:tl,geomEach:Ig,geomReduce:ld,lineEach:Dl,lineReduce:sc,propEach:Fc,propReduce:$u,segmentEach:Dd,segmentReduce:Cf},"__esModule",{value:!0});function Cp(vt){var _t=[1/0,1/0,-1/0,-1/0];return Tf.coordEach(vt,function(xt){_t[0]>xt[0]&&(_t[0]=xt[0]),_t[1]>xt[1]&&(_t[1]=xt[1]),_t[2]<xt[0]&&(_t[2]=xt[0]),_t[3]<xt[1]&&(_t[3]=xt[1])}),_t}Cp.default=Cp;var kf=Cp,cd=Object.defineProperty({default:kf},"__esModule",{value:!0}).default,Pg=Tf.featureEach,Og=(Tf.coordEach,ca.polygon,ca.featureCollection);function Bd(vt){var _t=Or(vt);return _t.insert=function(xt){if(xt.type!=="Feature")throw new Error("invalid feature");return xt.bbox=xt.bbox?xt.bbox:cd(xt),Or.prototype.insert.call(this,xt)},_t.load=function(xt){var Tt=[];return Array.isArray(xt)?xt.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:cd(At),Tt.push(At)}):Pg(xt,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:cd(At),Tt.push(At)}),Or.prototype.load.call(this,Tt)},_t.remove=function(xt,Tt){if(xt.type!=="Feature")throw new Error("invalid feature");return xt.bbox=xt.bbox?xt.bbox:cd(xt),Or.prototype.remove.call(this,xt,Tt)},_t.clear=function(){return Or.prototype.clear.call(this)},_t.search=function(xt){var Tt=Or.prototype.search.call(this,this.toBBox(xt));return Og(Tt)},_t.collides=function(xt){return Or.prototype.collides.call(this,this.toBBox(xt))},_t.all=function(){var xt=Or.prototype.all.call(this);return Og(xt)},_t.toJSON=function(){return Or.prototype.toJSON.call(this)},_t.fromJSON=function(xt){return Or.prototype.fromJSON.call(this,xt)},_t.toBBox=function(xt){var Tt;if(xt.bbox)Tt=xt.bbox;else if(Array.isArray(xt)&&xt.length===4)Tt=xt;else if(Array.isArray(xt)&&xt.length===6)Tt=[xt[0],xt[1],xt[3],xt[4]];else if(xt.type==="Feature")Tt=cd(xt);else{if(xt.type!=="FeatureCollection")throw new Error("invalid geojson");Tt=cd(xt)}return{minX:Tt[0],minY:Tt[1],maxX:Tt[2],maxY:Tt[3]}},_t}var Ta=Bd,zc=Bd;function ul(vt,_t){var xt={},Tt=[];if(vt.type==="LineString"&&(vt=wt(vt)),_t.type==="LineString"&&(_t=wt(_t)),vt.type==="Feature"&&_t.type==="Feature"&&vt.geometry!==null&&_t.geometry!==null&&vt.geometry.type==="LineString"&&_t.geometry.type==="LineString"&&vt.geometry.coordinates.length===2&&_t.geometry.coordinates.length===2){var At=Tp(vt,_t);return At&&Tt.push(At),Ft(Tt)}var Pt=Ta();return Pt.load(Bc(_t)),rr(Bc(vt),function(Nt){rr(Pt.search(Nt),function(Vt){var Gt=Tp(Nt,Vt);if(Gt){var qt=Nn(Gt).join(",");xt[qt]||(xt[qt]=!0,Tt.push(Gt))}})}),Ft(Tt)}function Tp(vt,_t){var xt=Nn(vt),Tt=Nn(_t);if(xt.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(Tt.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var At=xt[0][0],Pt=xt[0][1],Nt=xt[1][0],Vt=xt[1][1],Gt=Tt[0][0],qt=Tt[0][1],en=Tt[1][0],Xt=Tt[1][1],an=(Xt-qt)*(Nt-At)-(en-Gt)*(Vt-Pt),_n=(en-Gt)*(Pt-qt)-(Xt-qt)*(At-Gt),bn=(Nt-At)*(Pt-qt)-(Vt-Pt)*(At-Gt);if(an===0)return null;var En=_n/an,un=bn/an;return En>=0&&En<=1&&un>=0&&un<=1?kt([At+En*(Nt-At),Pt+En*(Vt-Pt)]):null}function ac(vt,_t,xt){xt===void 0&&(xt={});var Tt=kt([1/0,1/0],{dist:1/0}),At=0;return Pr(vt,function(Pt){for(var Nt=Nn(Pt),Vt=0;Vt<Nt.length-1;Vt++){var Gt=kt(Nt[Vt]);Gt.properties.dist=mo(_t,Gt,xt);var qt=kt(Nt[Vt+1]);qt.properties.dist=mo(_t,qt,xt);var en=mo(Gt,qt,xt),Xt=Math.max(Gt.properties.dist,qt.properties.dist),an=Qa(Gt,qt),_n=Ys(_t,Xt,an+90,xt),bn=Ys(_t,Xt,an-90,xt),En=ul(Dt([_n.geometry.coordinates,bn.geometry.coordinates]),Dt([Gt.geometry.coordinates,qt.geometry.coordinates])),un=null;En.features.length>0&&((un=En.features[0]).properties.dist=mo(_t,un,xt),un.properties.location=At+mo(Gt,un,xt)),Gt.properties.dist<Tt.properties.dist&&((Tt=Gt).properties.index=Vt,Tt.properties.location=At),qt.properties.dist<Tt.properties.dist&&((Tt=qt).properties.index=Vt+1,Tt.properties.location=At+en),un&&un.properties.dist<Tt.properties.dist&&((Tt=un).properties.index=Vt),At+=en}}),Tt}function Fd(vt,_t,xt){xt===void 0&&(xt={});var Tt=cn(vt),At=cn(_t);return At[0]+=At[0]-Tt[0]>180?-360:Tt[0]-At[0]>180?360:0,kn(function(Pt,Nt,Vt){var Gt=Vt=Vt===void 0?rt:Number(Vt),qt=Pt[1]*Math.PI/180,en=Nt[1]*Math.PI/180,Xt=en-qt,an=Math.abs(Nt[0]-Pt[0])*Math.PI/180;an>Math.PI&&(an-=2*Math.PI);var _n=Math.log(Math.tan(en/2+Math.PI/4)/Math.tan(qt/2+Math.PI/4)),bn=Math.abs(_n)>1e-11?Xt/_n:Math.cos(qt);return Math.sqrt(Xt*Xt+bn*bn*an*an)*Gt}(Tt,At),"meters",xt.units)}function kp(vt,_t,xt){if(xt===void 0&&(xt={}),xt.method||(xt.method="geodesic"),xt.units||(xt.units="kilometers"),!vt)throw new Error("pt is required");if(Array.isArray(vt)?vt=kt(vt):vt.type==="Point"?vt=wt(vt):Bn(vt,"Point","point"),!_t)throw new Error("line is required");Array.isArray(_t)?_t=Dt(_t):_t.type==="LineString"?_t=wt(_t):Bn(_t,"LineString","line");var Tt=1/0,At=vt.geometry.coordinates;return qr(_t,function(Pt){var Nt=Pt.geometry.coordinates[0],Vt=Pt.geometry.coordinates[1],Gt=function(qt,en,Xt,an){var _n=[Xt[0]-en[0],Xt[1]-en[1]],bn=Mg([qt[0]-en[0],qt[1]-en[1]],_n);if(bn<=0)return oh(qt,en,{method:an.method,units:"degrees"});var En=Mg(_n,_n);if(En<=bn)return oh(qt,Xt,{method:an.method,units:"degrees"});var un=bn/En,Vn=[en[0]+un*_n[0],en[1]+un*_n[1]];return oh(qt,Vn,{method:an.method,units:"degrees"})}(At,Nt,Vt,xt);Gt<Tt&&(Tt=Gt)}),kn(Tt,"degrees",xt.units)}function Mg(vt,_t){return vt[0]*_t[0]+vt[1]*_t[1]}function oh(vt,_t,xt){return xt.method==="planar"?Fd(vt,_t,xt):mo(vt,_t,xt)}function Hm(vt,_t,xt,Tt,At,Pt,Nt,Vt){var Gt,qt,en,Xt,an={x:null,y:null,onLine1:!1,onLine2:!1};return(Gt=(Vt-Pt)*(xt-vt)-(Nt-At)*(Tt-_t))===0?an.x!==null&&an.y!==null&&an:(Xt=(xt-vt)*(qt=_t-Pt)-(Tt-_t)*(en=vt-At),qt=((Nt-At)*qt-(Vt-Pt)*en)/Gt,en=Xt/Gt,an.x=vt+qt*(xt-vt),an.y=_t+qt*(Tt-_t),qt>=0&&qt<=1&&(an.onLine1=!0),en>=0&&en<=1&&(an.onLine2=!0),!(!an.onLine1||!an.onLine2)&&[an.x,an.y])}function Ah(vt){for(var _t=function(an){return an.type!=="FeatureCollection"?an.type!=="Feature"?Ft([wt(an)]):Ft([an]):an}(vt),xt=Ga(_t),Tt=!1,At=0;!Tt&&At<_t.features.length;){var Pt,Nt=_t.features[At].geometry,Vt=!1;if(Nt.type==="Point")xt.geometry.coordinates[0]===Nt.coordinates[0]&&xt.geometry.coordinates[1]===Nt.coordinates[1]&&(Tt=!0);else if(Nt.type==="MultiPoint"){var Gt=!1;for(Pt=0;!Gt&&Pt<Nt.coordinates.length;)xt.geometry.coordinates[0]===Nt.coordinates[Pt][0]&&xt.geometry.coordinates[1]===Nt.coordinates[Pt][1]&&(Tt=!0,Gt=!0),Pt++}else if(Nt.type==="LineString")for(Pt=0;!Vt&&Pt<Nt.coordinates.length-1;)Af(xt.geometry.coordinates[0],xt.geometry.coordinates[1],Nt.coordinates[Pt][0],Nt.coordinates[Pt][1],Nt.coordinates[Pt+1][0],Nt.coordinates[Pt+1][1])&&(Vt=!0,Tt=!0),Pt++;else if(Nt.type==="MultiLineString")for(var qt=0;qt<Nt.coordinates.length;){Vt=!1,Pt=0;for(var en=Nt.coordinates[qt];!Vt&&Pt<en.length-1;)Af(xt.geometry.coordinates[0],xt.geometry.coordinates[1],en[Pt][0],en[Pt][1],en[Pt+1][0],en[Pt+1][1])&&(Vt=!0,Tt=!0),Pt++;qt++}else Nt.type!=="Polygon"&&Nt.type!=="MultiPolygon"||go(xt,Nt)&&(Tt=!0);At++}if(Tt)return xt;var Xt=Ft([]);for(At=0;At<_t.features.length;At++)Xt.features=Xt.features.concat(xo(_t.features[At]).features);return kt(Yl(xt,Xt).geometry.coordinates)}function Af(vt,_t,xt,Tt,At,Pt){return Math.sqrt((At-xt)*(At-xt)+(Pt-Tt)*(Pt-Tt))===Math.sqrt((vt-xt)*(vt-xt)+(_t-Tt)*(_t-Tt))+Math.sqrt((At-vt)*(At-vt)+(Pt-_t)*(Pt-_t))}Ta.default=zc;var zd=6378137;function Hd(vt){return Lr(vt,function(_t,xt){return _t+function(Tt){var At,Pt=0;switch(Tt.type){case"Polygon":return Hc(Tt.coordinates);case"MultiPolygon":for(At=0;At<Tt.coordinates.length;At++)Pt+=Hc(Tt.coordinates[At]);return Pt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(xt)},0)}function Hc(vt){var _t=0;if(vt&&vt.length>0){_t+=Math.abs(Lf(vt[0]));for(var xt=1;xt<vt.length;xt++)_t-=Math.abs(Lf(vt[xt]))}return _t}function Lf(vt){var _t,xt,Tt,At,Pt,Nt,Vt=0,Gt=vt.length;if(Gt>2){for(Nt=0;Nt<Gt;Nt++)Nt===Gt-2?(Tt=Gt-2,At=Gt-1,Pt=0):Nt===Gt-1?(Tt=Gt-1,At=0,Pt=1):(Tt=Nt,At=Nt+1,Pt=Nt+2),_t=vt[Tt],xt=vt[At],Vt+=(If(vt[Pt][0])-If(_t[0]))*Math.sin(If(xt[1]));Vt=Vt*zd*zd/2}return Vt}function If(vt){return vt*Math.PI/180}function Lh(vt,_t){return _t===void 0&&(_t={}),sr(vt,function(xt,Tt){var At=Tt.geometry.coordinates;return xt+mo(At[0],At[1],_t)},0)}function Pf(vt,_t,xt,Tt){if(!pn(Tt=Tt||{}))throw new Error("options is invalid");var At,Pt=[];if(vt.type==="Feature")At=vt.geometry.coordinates;else{if(vt.type!=="LineString")throw new Error("input must be a LineString Feature or Geometry");At=vt.coordinates}for(var Nt,Vt,Gt,qt=At.length,en=0,Xt=0;Xt<At.length&&!(_t>=en&&Xt===At.length-1);Xt++){if(en>_t&&Pt.length===0){if(!(Nt=_t-en))return Pt.push(At[Xt]),Dt(Pt);Vt=Qa(At[Xt],At[Xt-1])-180,Gt=Ys(At[Xt],Nt,Vt,Tt),Pt.push(Gt.geometry.coordinates)}if(en>=xt)return(Nt=xt-en)?(Vt=Qa(At[Xt],At[Xt-1])-180,Gt=Ys(At[Xt],Nt,Vt,Tt),Pt.push(Gt.geometry.coordinates),Dt(Pt)):(Pt.push(At[Xt]),Dt(Pt));if(en>=_t&&Pt.push(At[Xt]),Xt===At.length-1)return Dt(Pt);en+=mo(At[Xt],At[Xt+1],Tt)}if(en<_t&&At.length===qt)throw new Error("Start position is beyond line");var an=At[At.length-1];return Dt([an,an])}function _l(vt,_t,xt){xt===void 0&&(xt={});for(var Tt=cn(vt),At=Nn(_t),Pt=0;Pt<At.length-1;Pt++){var Nt=!1;if(xt.ignoreEndVertices&&(Pt===0&&(Nt="start"),Pt===At.length-2&&(Nt="end"),Pt===0&&Pt+1===At.length-1&&(Nt="both")),Vd(At[Pt],At[Pt+1],Tt,Nt,xt.epsilon===void 0?null:xt.epsilon))return!0}return!1}function Vd(vt,_t,xt,Tt,At){var Pt=xt[0],Nt=xt[1],Vt=vt[0],Gt=vt[1],qt=_t[0],en=_t[1],Xt=qt-Vt,an=en-Gt,_n=(xt[0]-Vt)*an-(xt[1]-Gt)*Xt;if(At!==null){if(Math.abs(_n)>At)return!1}else if(_n!==0)return!1;return Tt?Tt==="start"?Math.abs(Xt)>=Math.abs(an)?Xt>0?Vt<Pt&&Pt<=qt:qt<=Pt&&Pt<Vt:an>0?Gt<Nt&&Nt<=en:en<=Nt&&Nt<Gt:Tt==="end"?Math.abs(Xt)>=Math.abs(an)?Xt>0?Vt<=Pt&&Pt<qt:qt<Pt&&Pt<=Vt:an>0?Gt<=Nt&&Nt<en:en<Nt&&Nt<=Gt:Tt==="both"&&(Math.abs(Xt)>=Math.abs(an)?Xt>0?Vt<Pt&&Pt<qt:qt<Pt&&Pt<Vt:an>0?Gt<Nt&&Nt<en:en<Nt&&Nt<Gt):Math.abs(Xt)>=Math.abs(an)?Xt>0?Vt<=Pt&&Pt<=qt:qt<=Pt&&Pt<=Vt:an>0?Gt<=Nt&&Nt<=en:en<=Nt&&Nt<=Gt}function Ap(vt,_t){var xt=Un(vt),Tt=Un(_t),At=xt.type,Pt=Tt.type;switch(At){case"Point":switch(Pt){case"MultiPoint":return function(Nt,Vt){var Gt,qt=!1;for(Gt=0;Gt<Vt.coordinates.length;Gt++)if(Ip(Vt.coordinates[Gt],Nt.coordinates)){qt=!0;break}return qt}(xt,Tt);case"LineString":return _l(xt,Tt,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return go(xt,Tt,{ignoreBoundary:!0});default:throw new Error("feature2 "+Pt+" geometry not supported")}case"MultiPoint":switch(Pt){case"MultiPoint":return function(Nt,Vt){for(var Gt=0;Gt<Nt.coordinates.length;Gt++){for(var qt=!1,en=0;en<Vt.coordinates.length;en++)Ip(Nt.coordinates[Gt],Vt.coordinates[en])&&(qt=!0);if(!qt)return!1}return!0}(xt,Tt);case"LineString":return function(Nt,Vt){for(var Gt=!1,qt=0;qt<Nt.coordinates.length;qt++){if(!_l(Nt.coordinates[qt],Vt))return!1;Gt||(Gt=_l(Nt.coordinates[qt],Vt,{ignoreEndVertices:!0}))}return Gt}(xt,Tt);case"Polygon":case"MultiPolygon":return function(Nt,Vt){for(var Gt=!0,qt=!1,en=0;en<Nt.coordinates.length;en++){if(!(qt=go(Nt.coordinates[1],Vt))){Gt=!1;break}qt=go(Nt.coordinates[1],Vt,{ignoreBoundary:!0})}return Gt&&qt}(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"LineString":switch(Pt){case"LineString":return function(Nt,Vt){for(var Gt=0;Gt<Nt.coordinates.length;Gt++)if(!_l(Nt.coordinates[Gt],Vt))return!1;return!0}(xt,Tt);case"Polygon":case"MultiPolygon":return function(Nt,Vt){var Gt=fn(Vt),qt=fn(Nt);if(!Lp(Gt,qt))return!1;for(var en=!1,Xt=0;Xt<Nt.coordinates.length-1;Xt++){if(!go(Nt.coordinates[Xt],Vt))return!1;en||(en=go(Nt.coordinates[Xt],Vt,{ignoreBoundary:!0})),!en&&(en=go(Pp(Nt.coordinates[Xt],Nt.coordinates[Xt+1]),Vt,{ignoreBoundary:!0}))}return en}(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"Polygon":switch(Pt){case"Polygon":case"MultiPolygon":return function(Nt,Vt){var Gt=fn(Nt);if(!Lp(fn(Vt),Gt))return!1;for(var qt=0;qt<Nt.coordinates[0].length;qt++)if(!go(Nt.coordinates[0][qt],Vt))return!1;return!0}(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}}function Lp(vt,_t){return!(vt[0]>_t[0])&&!(vt[2]<_t[2])&&!(vt[1]>_t[1])&&!(vt[3]<_t[3])}function Ip(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function Pp(vt,_t){return[(vt[0]+_t[0])/2,(vt[1]+_t[1])/2]}function Of(vt,_t,xt){xt===void 0&&(xt={}),xt.mask&&!xt.units&&(xt.units="kilometers");for(var Tt=[],At=vt[0],Pt=vt[1],Nt=vt[2],Vt=vt[3],Gt=_t/mo([At,Pt],[Nt,Pt],xt)*(Nt-At),qt=_t/mo([At,Pt],[At,Vt],xt)*(Vt-Pt),en=Nt-At,Xt=Vt-Pt,an=Math.floor(en/Gt),_n=(Xt-Math.floor(Xt/qt)*qt)/2,bn=At+(en-an*Gt)/2;bn<=Nt;){for(var En=Pt+_n;En<=Vt;){var un=kt([bn,En],xt.properties);xt.mask?Ap(un,xt.mask)&&Tt.push(un):Tt.push(un),En+=qt}bn+=Gt}return Ft(Tt)}function ud(vt,_t){_t===void 0&&(_t={});var xt=_t.precision,Tt=_t.coordinates,At=_t.mutate;if(xt=xt==null||isNaN(xt)?6:xt,Tt=Tt==null||isNaN(Tt)?3:Tt,!vt)throw new Error("<geojson> is required");if(typeof xt!="number")throw new Error("<precision> must be a number");if(typeof Tt!="number")throw new Error("<coordinates> must be a number");At!==!1&&At!==void 0||(vt=JSON.parse(JSON.stringify(vt)));var Pt=Math.pow(10,xt);return vn(vt,function(Nt){(function(Vt,Gt,qt){Vt.length>qt&&Vt.splice(qt,Vt.length);for(var en=0;en<Vt.length;en++)Vt[en]=Math.round(Vt[en]*Gt)/Gt})(Nt,Pt,Tt)}),vt}function jd(vt){if(!vt)throw new Error("geojson is required");var _t=[];return Pr(vt,function(xt){_t.push(xt)}),Ft(_t)}function $g(vt,_t,xt){if(vt.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");xt===void 0&&(xt=1);var Tt=vt.geometry.coordinates,At=[],Pt={};if(xt){for(var Nt=[],Vt=0;Vt<Tt.length;Vt++)for(var Gt=0;Gt<Tt[Vt].length-1;Gt++)Nt.push(En(Vt,Gt));var qt=Or();qt.load(Nt)}for(var en=0;en<Tt.length;en++)for(var Xt=0;Xt<Tt[en].length-1;Xt++)if(xt)qt.search(En(en,Xt)).forEach(function(un){var Vn=un.ring,nr=un.edge;bn(en,Xt,Vn,nr)});else for(var an=0;an<Tt.length;an++)for(var _n=0;_n<Tt[an].length-1;_n++)bn(en,Xt,an,_n);return _t||(At={type:"Feature",geometry:{type:"MultiPoint",coordinates:At}}),At;function bn(un,Vn,nr,xn){var zn,jn,qn=Tt[un][Vn],Gn=Tt[un][Vn+1],Zr=Tt[nr][xn],Fr=Tt[nr][xn+1],ei=function(Wr,Gr,Vr,ni){if(hd(Wr,Vr)||hd(Wr,ni)||hd(Gr,Vr)||hd(ni,Vr))return null;var Yr=Wr[0],ai=Wr[1],Cr=Gr[0],Ki=Gr[1],Si=Vr[0],Ro=Vr[1],Wi=ni[0],ho=ni[1],is=(Yr-Cr)*(Ro-ho)-(ai-Ki)*(Si-Wi);return is===0?null:[((Yr*Ki-ai*Cr)*(Si-Wi)-(Yr-Cr)*(Si*ho-Ro*Wi))/is,((Yr*Ki-ai*Cr)*(Ro-ho)-(ai-Ki)*(Si*ho-Ro*Wi))/is]}(qn,Gn,Zr,Fr);if(ei!==null&&(zn=Gn[0]!==qn[0]?(ei[0]-qn[0])/(Gn[0]-qn[0]):(ei[1]-qn[1])/(Gn[1]-qn[1]),jn=Fr[0]!==Zr[0]?(ei[0]-Zr[0])/(Fr[0]-Zr[0]):(ei[1]-Zr[1])/(Fr[1]-Zr[1]),!(zn>=1||zn<=0||jn>=1||jn<=0))){var zr=ei,si=!Pt[zr];si&&(Pt[zr]=!0),_t?At.push(_t(ei,un,Vn,qn,Gn,zn,nr,xn,Zr,Fr,jn,si)):At.push(ei)}}function En(un,Vn){var nr,xn,zn,jn,qn=Tt[un][Vn],Gn=Tt[un][Vn+1];return qn[0]<Gn[0]?(nr=qn[0],xn=Gn[0]):(nr=Gn[0],xn=qn[0]),qn[1]<Gn[1]?(zn=qn[1],jn=Gn[1]):(zn=Gn[1],jn=qn[1]),{minX:nr,minY:zn,maxX:xn,maxY:jn,ring:un,edge:Vn}}}function hd(vt,_t){if(!vt||!_t||vt.length!==_t.length)return!1;for(var xt=0,Tt=vt.length;xt<Tt;xt++)if(vt[xt]instanceof Array&&_t[xt]instanceof Array){if(!hd(vt[xt],_t[xt]))return!1}else if(vt[xt]!==_t[xt])return!1;return!0}function Rg(vt){if(vt.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(vt.geometry===void 0||vt.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(vt.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var _t=vt.geometry.coordinates.length,xt=[],Tt=0;Tt<_t;Tt++){var At=vt.geometry.coordinates[Tt];tn(At[0],At[At.length-1])||At.push(At[0]),xt.push.apply(xt,At.slice(0,At.length-1))}if(!function(Wi){for(var ho={},is=1,Ws=0,gl=Wi.length;Ws<gl;++Ws){if(Object.prototype.hasOwnProperty.call(ho,Wi[Ws])){is=0;break}ho[Wi[Ws]]=1}return is}(xt))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var Pt=xt.length,Nt=$g(vt,function(Wi,ho,is,Ws,gl,bg,Pd,xg,wg,vp,Im,_p){return[Wi,ho,is,Ws,gl,bg,Pd,xg,wg,vp,Im,_p]}),Vt=Nt.length;if(Vt==0){var Gt=[];for(Tt=0;Tt<_t;Tt++)Gt.push(Ot([vt.geometry.coordinates[Tt]],{parent:-1,winding:jt(vt.geometry.coordinates[Tt])}));var qt=Ft(Gt);return Ki(),Si(),qt}var en=[],Xt=[];for(Tt=0;Tt<_t;Tt++){en.push([]);for(var an=0;an<vt.geometry.coordinates[Tt].length-1;an++)en[Tt].push([new Op(vt.geometry.coordinates[Tt][gn(an+1,vt.geometry.coordinates[Tt].length-1)],1,[Tt,an],[Tt,gn(an+1,vt.geometry.coordinates[Tt].length-1)],void 0)]),Xt.push(new Ud(vt.geometry.coordinates[Tt][an],[Tt,gn(an-1,vt.geometry.coordinates[Tt].length-1)],[Tt,an],void 0,void 0,!1,!0))}for(Tt=0;Tt<Vt;Tt++)en[Nt[Tt][1]][Nt[Tt][2]].push(new Op(Nt[Tt][0],Nt[Tt][5],[Nt[Tt][1],Nt[Tt][2]],[Nt[Tt][6],Nt[Tt][7]],void 0)),Nt[Tt][11]&&Xt.push(new Ud(Nt[Tt][0],[Nt[Tt][1],Nt[Tt][2]],[Nt[Tt][6],Nt[Tt][7]],void 0,void 0,!0,!0));var _n=Xt.length;for(Tt=0;Tt<en.length;Tt++)for(an=0;an<en[Tt].length;an++)en[Tt][an].sort(function(Wi,ho){return Wi.param<ho.param?-1:1});var bn=[];for(Tt=0;Tt<_n;Tt++)bn.push({minX:Xt[Tt].coord[0],minY:Xt[Tt].coord[1],maxX:Xt[Tt].coord[0],maxY:Xt[Tt].coord[1],index:Tt});var En=Or();for(En.load(bn),Tt=0;Tt<en.length;Tt++)for(an=0;an<en[Tt].length;an++)for(var un=0;un<en[Tt][an].length;un++){nr=un==en[Tt][an].length-1?en[Tt][gn(an+1,vt.geometry.coordinates[Tt].length-1)][0].coord:en[Tt][an][un+1].coord;var Vn=En.search({minX:nr[0],minY:nr[1],maxX:nr[0],maxY:nr[1]})[0];en[Tt][an][un].nxtIsectAlongEdgeIn=Vn.index}for(Tt=0;Tt<en.length;Tt++)for(an=0;an<en[Tt].length;an++)for(un=0;un<en[Tt][an].length;un++){var nr=en[Tt][an][un].coord,xn=(Vn=En.search({minX:nr[0],minY:nr[1],maxX:nr[0],maxY:nr[1]})[0]).index;xn<Pt?Xt[xn].nxtIsectAlongRingAndEdge2=en[Tt][an][un].nxtIsectAlongEdgeIn:tn(Xt[xn].ringAndEdge1,en[Tt][an][un].ringAndEdgeIn)?Xt[xn].nxtIsectAlongRingAndEdge1=en[Tt][an][un].nxtIsectAlongEdgeIn:Xt[xn].nxtIsectAlongRingAndEdge2=en[Tt][an][un].nxtIsectAlongEdgeIn}var zn=[];for(Tt=0,an=0;an<_t;an++){var jn=Tt;for(un=0;un<vt.geometry.coordinates[an].length-1;un++)Xt[Tt].coord[0]<Xt[jn].coord[0]&&(jn=Tt),Tt++;var qn=Xt[jn].nxtIsectAlongRingAndEdge2;for(un=0;un<Xt.length;un++)if(Xt[un].nxtIsectAlongRingAndEdge1==jn||Xt[un].nxtIsectAlongRingAndEdge2==jn){var Gn=un;break}var Zr=Mt([Xt[Gn].coord,Xt[jn].coord,Xt[qn].coord],!0)?1:-1;zn.push({isect:jn,parent:-1,winding:Zr})}for(zn.sort(function(Wi,ho){return Xt[Wi.isect].coord>Xt[ho.isect].coord?-1:1}),Gt=[];zn.length>0;){var Fr=zn.pop(),ei=Fr.isect,zr=Fr.parent,si=Fr.winding,Wr=Gt.length,Gr=[Xt[ei].coord],Vr=ei;if(Xt[ei].ringAndEdge1Walkable)var ni=Xt[ei].ringAndEdge1,Yr=Xt[ei].nxtIsectAlongRingAndEdge1;else ni=Xt[ei].ringAndEdge2,Yr=Xt[ei].nxtIsectAlongRingAndEdge2;for(;!tn(Xt[ei].coord,Xt[Yr].coord);){Gr.push(Xt[Yr].coord);var ai=void 0;for(Tt=0;Tt<zn.length;Tt++)if(zn[Tt].isect==Yr){ai=Tt;break}if(ai!=null&&zn.splice(ai,1),tn(ni,Xt[Yr].ringAndEdge1)){if(ni=Xt[Yr].ringAndEdge2,Xt[Yr].ringAndEdge2Walkable=!1,Xt[Yr].ringAndEdge1Walkable){var Cr={isect:Yr};Mt([Xt[Vr].coord,Xt[Yr].coord,Xt[Xt[Yr].nxtIsectAlongRingAndEdge2].coord],si==1)?(Cr.parent=zr,Cr.winding=-si):(Cr.parent=Wr,Cr.winding=si),zn.push(Cr)}Vr=Yr,Yr=Xt[Yr].nxtIsectAlongRingAndEdge2}else ni=Xt[Yr].ringAndEdge1,Xt[Yr].ringAndEdge1Walkable=!1,Xt[Yr].ringAndEdge2Walkable&&(Cr={isect:Yr},Mt([Xt[Vr].coord,Xt[Yr].coord,Xt[Xt[Yr].nxtIsectAlongRingAndEdge1].coord],si==1)?(Cr.parent=zr,Cr.winding=-si):(Cr.parent=Wr,Cr.winding=si),zn.push(Cr)),Vr=Yr,Yr=Xt[Yr].nxtIsectAlongRingAndEdge1}Gr.push(Xt[Yr].coord),Gt.push(Ot([Gr],{index:Wr,parent:zr,winding:si,netWinding:void 0}))}qt=Ft(Gt);function Ki(){for(var Wi=[],ho=0;ho<qt.features.length;ho++)qt.features[ho].properties.parent==-1&&Wi.push(ho);if(Wi.length>1)for(ho=0;ho<Wi.length;ho++){for(var is=-1,Ws=0;Ws<qt.features.length;Ws++)Wi[ho]!=Ws&&go(qt.features[Wi[ho]].geometry.coordinates[0][0],qt.features[Ws],{ignoreBoundary:!0})&&Hd(qt.features[Ws])<1/0&&(is=Ws);qt.features[Wi[ho]].properties.parent=is}}function Si(){for(var Wi=0;Wi<qt.features.length;Wi++)if(qt.features[Wi].properties.parent==-1){var ho=qt.features[Wi].properties.winding;qt.features[Wi].properties.netWinding=ho,Ro(Wi,ho)}}function Ro(Wi,ho){for(var is=0;is<qt.features.length;is++)if(qt.features[is].properties.parent==Wi){var Ws=ho+qt.features[is].properties.winding;qt.features[is].properties.netWinding=Ws,Ro(is,Ws)}}return Ki(),Si(),qt}var Op=function(vt,_t,xt,Tt,At){this.coord=vt,this.param=_t,this.ringAndEdgeIn=xt,this.ringAndEdgeOut=Tt,this.nxtIsectAlongEdgeIn=At},Ud=function(vt,_t,xt,Tt,At,Pt,Nt){this.coord=vt,this.ringAndEdge1=_t,this.ringAndEdge2=xt,this.nxtIsectAlongRingAndEdge1=Tt,this.nxtIsectAlongRingAndEdge2=At,this.ringAndEdge1Walkable=Pt,this.ringAndEdge2Walkable=Nt};function Mt(vt,_t){if(_t===void 0&&(_t=!0),vt.length!=3)throw new Error("This function requires an array of three points [x,y]");return(vt[1][0]-vt[0][0])*(vt[2][1]-vt[0][1])-(vt[1][1]-vt[0][1])*(vt[2][0]-vt[0][0])>=0==_t}function jt(vt){for(var _t=0,xt=0;xt<vt.length-1;xt++)vt[xt][0]<vt[_t][0]&&(_t=xt);if(Mt([vt[gn(_t-1,vt.length-1)],vt[_t],vt[gn(_t+1,vt.length-1)]],!0))var Tt=1;else Tt=-1;return Tt}function tn(vt,_t){if(!vt||!_t||vt.length!=_t.length)return!1;for(var xt=0,Tt=vt.length;xt<Tt;xt++)if(vt[xt]instanceof Array&&_t[xt]instanceof Array){if(!tn(vt[xt],_t[xt]))return!1}else if(vt[xt]!=_t[xt])return!1;return!0}function gn(vt,_t){return(vt%_t+_t)%_t}var $n=Math.PI/180,tr=180/Math.PI,Ir=function(vt,_t){this.lon=vt,this.lat=_t,this.x=$n*vt,this.y=$n*_t};Ir.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ir.prototype.antipode=function(){var vt=-1*this.lat,_t=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ir(_t,vt)};var Xr=function(){this.coords=[],this.length=0};Xr.prototype.move_to=function(vt){this.length++,this.coords.push(vt)};var ii=function(vt){this.properties=vt||{},this.geometries=[]};ii.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var vt=[],_t=0;_t<this.geometries.length;_t++)vt.push(this.geometries[_t].coords);return{geometry:{type:"MultiLineString",coordinates:vt},type:"Feature",properties:this.properties}},ii.prototype.wkt=function(){for(var vt="",_t="LINESTRING(",xt=function(At){_t+=At[0]+" "+At[1]+","},Tt=0;Tt<this.geometries.length;Tt++){if(this.geometries[Tt].coords.length===0)return"LINESTRING(empty)";this.geometries[Tt].coords.forEach(xt),vt+=_t.substring(0,_t.length-1)+")"}return vt};var yi=function(vt,_t,xt){if(!vt||vt.x===void 0||vt.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!_t||_t.x===void 0||_t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ir(vt.x,vt.y),this.end=new Ir(_t.x,_t.y),this.properties=xt||{};var Tt=this.start.x-this.end.x,At=this.start.y-this.end.y,Pt=Math.pow(Math.sin(At/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(Tt/2),2);if(this.g=2*Math.asin(Math.sqrt(Pt)),this.g===Math.PI)throw new Error("it appears "+vt.view()+" and "+_t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+vt+" and "+_t)};function Gi(vt,_t){var xt=[],Tt=Ta();return Pr(_t,function(At){if(xt.forEach(function(Vt,Gt){Vt.id=Gt}),xt.length){var Pt=Tt.search(At);if(Pt.features.length){var Nt=ps(At,Pt);xt=xt.filter(function(Vt){return Vt.id!==Nt.id}),Tt.remove(Nt),rr(Oo(Nt,At),function(Vt){xt.push(Vt),Tt.insert(Vt)})}}else(xt=Oo(vt,At).features).forEach(function(Vt){Vt.bbox||(Vt.bbox=nd(fn(Vt)))}),Tt.load(Ft(xt))}),Ft(xt)}function Oo(vt,_t){var xt=[],Tt=Nn(vt)[0],At=Nn(vt)[vt.geometry.coordinates.length-1];if(Xl(Tt,cn(_t))||Xl(At,cn(_t)))return Ft([vt]);var Pt=Ta(),Nt=Bc(vt);Pt.load(Nt);var Vt=Pt.search(_t);if(!Vt.features.length)return Ft([vt]);var Gt=ps(_t,Vt),qt=wr(Nt,function(en,Xt,an){var _n=Nn(Xt)[1],bn=cn(_t);return an===Gt.id?(en.push(bn),xt.push(Dt(en)),Xl(bn,_n)?[bn]:[bn,_n]):(en.push(_n),en)},[Tt]);return qt.length>1&&xt.push(Dt(qt)),Ft(xt)}function ps(vt,_t){if(!_t.features.length)throw new Error("lines must contain features");if(_t.features.length===1)return _t.features[0];var xt,Tt=1/0;return rr(_t,function(At){var Pt=ac(At,vt).properties.dist;Pt<Tt&&(xt=At,Tt=Pt)}),xt}function Xl(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function sh(vt,_t,xt,Tt,At){At===void 0&&(At={});var Pt=At.steps||64,Nt=Ih(xt),Vt=Ih(Tt),Gt=Array.isArray(vt)||vt.type!=="Feature"?{}:vt.properties;if(Nt===Vt)return Dt(Dc(vt,_t,At).geometry.coordinates[0],Gt);for(var qt=Nt,en=Nt<Vt?Vt:Vt+360,Xt=qt,an=[],_n=0;Xt<en;)an.push(Ys(vt,_t,Xt,At).geometry.coordinates),Xt=qt+360*++_n/Pt;return Xt>en&&an.push(Ys(vt,_t,en,At).geometry.coordinates),Dt(an,Gt)}function Ih(vt){var _t=vt%360;return _t<0&&(_t+=360),_t}function Ec(vt,_t){_t===void 0&&(_t={});var xt=Un(vt);switch(_t.properties||vt.type!=="Feature"||(_t.properties=vt.properties),xt.type){case"Polygon":return Mf(xt,_t);case"MultiPolygon":return function(Tt,At){At===void 0&&(At={});var Pt=Un(Tt).coordinates,Nt=At.properties?At.properties:Tt.type==="Feature"?Tt.properties:{},Vt=[];return Pt.forEach(function(Gt){Vt.push(Mp(Gt,Nt))}),Ft(Vt)}(xt,_t);default:throw new Error("invalid poly")}}function Mf(vt,_t){return _t===void 0&&(_t={}),Mp(Un(vt).coordinates,_t.properties?_t.properties:vt.type==="Feature"?vt.properties:{})}function Mp(vt,_t){return vt.length>1?Yt(vt,_t):Dt(vt[0],_t)}function Ng(vt,_t){var xt,Tt,At;_t===void 0&&(_t={});var Pt=_t.properties,Nt=(xt=_t.autoComplete)===null||xt===void 0||xt,Vt=(Tt=_t.orderCoords)===null||Tt===void 0||Tt;switch((At=_t.mutate)!==null&&At!==void 0&&At||(vt=Ho(vt)),vt.type){case"FeatureCollection":var Gt=[];return vt.features.forEach(function(qt){Gt.push(Nn($p(qt,{},Nt,Vt)))}),Wt(Gt,Pt);default:return $p(vt,Pt,Nt,Vt)}}function $p(vt,_t,xt,Tt){_t=_t||(vt.type==="Feature"?vt.properties:{});var At=Un(vt),Pt=At.coordinates,Nt=At.type;if(!Pt.length)throw new Error("line must contain coordinates");switch(Nt){case"LineString":return xt&&(Pt=ah(Pt)),Ot([Pt],_t);case"MultiLineString":var Vt=[],Gt=0;return Pt.forEach(function(qt){if(xt&&(qt=ah(qt)),Tt){var en=function(Xt){var an=Xt[0],_n=Xt[1],bn=Xt[2],En=Xt[3];return Math.abs(an-bn)*Math.abs(_n-En)}(fn(Dt(qt)));en>Gt?(Vt.unshift(qt),Gt=en):Vt.push(qt)}else Vt.push(qt)}),Ot(Vt,_t);default:throw new Error("geometry type "+Nt+" is not supported")}}function ah(vt){var _t=vt[0],xt=_t[0],Tt=_t[1],At=vt[vt.length-1],Pt=At[0],Nt=At[1];return xt===Pt&&Tt===Nt||vt.push(_t),vt}function dd(vt,_t){var xt,Tt,At,Pt,Nt,Vt,Gt;for(Tt=1;Tt<=8;Tt*=2){for(xt=[],Pt=!(ea(At=vt[vt.length-1],_t)&Tt),Nt=0;Nt<vt.length;Nt++)(Gt=!(ea(Vt=vt[Nt],_t)&Tt))!==Pt&&xt.push($f(At,Vt,Tt,_t)),Gt&&xt.push(Vt),At=Vt,Pt=Gt;if(!(vt=xt).length)break}return xt}function $f(vt,_t,xt,Tt){return 8&xt?[vt[0]+(_t[0]-vt[0])*(Tt[3]-vt[1])/(_t[1]-vt[1]),Tt[3]]:4&xt?[vt[0]+(_t[0]-vt[0])*(Tt[1]-vt[1])/(_t[1]-vt[1]),Tt[1]]:2&xt?[Tt[2],vt[1]+(_t[1]-vt[1])*(Tt[2]-vt[0])/(_t[0]-vt[0])]:1&xt?[Tt[0],vt[1]+(_t[1]-vt[1])*(Tt[0]-vt[0])/(_t[0]-vt[0])]:null}function ea(vt,_t){var xt=0;return vt[0]<_t[0]?xt|=1:vt[0]>_t[2]&&(xt|=2),vt[1]<_t[1]?xt|=4:vt[1]>_t[3]&&(xt|=8),xt}function Gd(vt,_t){for(var xt=[],Tt=0,At=vt;Tt<At.length;Tt++){var Pt=dd(At[Tt],_t);Pt.length>0&&(Pt[0][0]===Pt[Pt.length-1][0]&&Pt[0][1]===Pt[Pt.length-1][1]||Pt.push(Pt[0]),Pt.length>=4&&xt.push(Pt))}return xt}yi.prototype.interpolate=function(vt){var _t=Math.sin((1-vt)*this.g)/Math.sin(this.g),xt=Math.sin(vt*this.g)/Math.sin(this.g),Tt=_t*Math.cos(this.start.y)*Math.cos(this.start.x)+xt*Math.cos(this.end.y)*Math.cos(this.end.x),At=_t*Math.cos(this.start.y)*Math.sin(this.start.x)+xt*Math.cos(this.end.y)*Math.sin(this.end.x),Pt=_t*Math.sin(this.start.y)+xt*Math.sin(this.end.y),Nt=tr*Math.atan2(Pt,Math.sqrt(Math.pow(Tt,2)+Math.pow(At,2)));return[tr*Math.atan2(At,Tt),Nt]},yi.prototype.Arc=function(vt,_t){var xt=[];if(!vt||vt<=2)xt.push([this.start.lon,this.start.lat]),xt.push([this.end.lon,this.end.lat]);else for(var Tt=1/(vt-1),At=0;At<vt;++At){var Pt=Tt*At,Nt=this.interpolate(Pt);xt.push(Nt)}for(var Vt=!1,Gt=0,qt=_t&&_t.offset?_t.offset:10,en=180-qt,Xt=-180+qt,an=360-qt,_n=1;_n<xt.length;++_n){var bn=xt[_n-1][0],En=xt[_n][0],un=Math.abs(En-bn);un>an&&(En>en&&bn<Xt||bn>en&&En<Xt)?Vt=!0:un>Gt&&(Gt=un)}var Vn=[];if(Vt&&Gt<qt){var nr=[];Vn.push(nr);for(var xn=0;xn<xt.length;++xn){var zn=parseFloat(xt[xn][0]);if(xn>0&&Math.abs(zn-xt[xn-1][0])>an){var jn=parseFloat(xt[xn-1][0]),qn=parseFloat(xt[xn-1][1]),Gn=parseFloat(xt[xn][0]),Zr=parseFloat(xt[xn][1]);if(jn>-180&&jn<Xt&&Gn===180&&xn+1<xt.length&&xt[xn-1][0]>-180&&xt[xn-1][0]<Xt){nr.push([-180,xt[xn][1]]),xn++,nr.push([xt[xn][0],xt[xn][1]]);continue}if(jn>en&&jn<180&&Gn===-180&&xn+1<xt.length&&xt[xn-1][0]>en&&xt[xn-1][0]<180){nr.push([180,xt[xn][1]]),xn++,nr.push([xt[xn][0],xt[xn][1]]);continue}if(jn<Xt&&Gn>en){var Fr=jn;jn=Gn,Gn=Fr;var ei=qn;qn=Zr,Zr=ei}if(jn>en&&Gn<Xt&&(Gn+=360),jn<=180&&Gn>=180&&jn<Gn){var zr=(180-jn)/(Gn-jn),si=zr*Zr+(1-zr)*qn;nr.push([xt[xn-1][0]>en?180:-180,si]),(nr=[]).push([xt[xn-1][0]>en?-180:180,si]),Vn.push(nr)}else nr=[],Vn.push(nr);nr.push([zn,xt[xn][1]])}else nr.push([xt[xn][0],xt[xn][1]])}}else{var Wr=[];Vn.push(Wr);for(var Gr=0;Gr<xt.length;++Gr)Wr.push([xt[Gr][0],xt[Gr][1]])}for(var Vr=new ii(this.properties),ni=0;ni<Vn.length;++ni){var Yr=new Xr;Vr.geometries.push(Yr);for(var ai=Vn[ni],Cr=0;Cr<ai.length;++Cr)Yr.move_to(ai[Cr])}return Vr};var Dg=Xo(function(vt,_t){function xt(Tt){var At=[];for(var Pt in Tt)At.push(Pt);return At}(vt.exports=typeof Object.keys=="function"?Object.keys:xt).shim=xt}),Bg=Xo(function(vt,_t){var xt=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";function Tt(Pt){return Object.prototype.toString.call(Pt)=="[object Arguments]"}function At(Pt){return Pt&&typeof Pt=="object"&&typeof Pt.length=="number"&&Object.prototype.hasOwnProperty.call(Pt,"callee")&&!Object.prototype.propertyIsEnumerable.call(Pt,"callee")||!1}(_t=vt.exports=xt?Tt:At).supported=Tt,_t.unsupported=At}),fd=Xo(function(vt){var _t=Array.prototype.slice,xt=vt.exports=function(Pt,Nt,Vt){return Vt||(Vt={}),Pt===Nt||(Pt instanceof Date&&Nt instanceof Date?Pt.getTime()===Nt.getTime():!Pt||!Nt||typeof Pt!="object"&&typeof Nt!="object"?Vt.strict?Pt===Nt:Pt==Nt:function(Gt,qt,en){var Xt,an;if(Tt(Gt)||Tt(qt)||Gt.prototype!==qt.prototype)return!1;if(Bg(Gt))return!!Bg(qt)&&(Gt=_t.call(Gt),qt=_t.call(qt),xt(Gt,qt,en));if(At(Gt)){if(!At(qt)||Gt.length!==qt.length)return!1;for(Xt=0;Xt<Gt.length;Xt++)if(Gt[Xt]!==qt[Xt])return!1;return!0}try{var _n=Dg(Gt),bn=Dg(qt)}catch{return!1}if(_n.length!=bn.length)return!1;for(_n.sort(),bn.sort(),Xt=_n.length-1;Xt>=0;Xt--)if(_n[Xt]!=bn[Xt])return!1;for(Xt=_n.length-1;Xt>=0;Xt--)if(an=_n[Xt],!xt(Gt[an],qt[an],en))return!1;return typeof Gt==typeof qt}(Pt,Nt,Vt))};function Tt(Pt){return Pt==null}function At(Pt){return!(!Pt||typeof Pt!="object"||typeof Pt.length!="number")&&typeof Pt.copy=="function"&&typeof Pt.slice=="function"&&!(Pt.length>0&&typeof Pt[0]!="number")}});function pd(vt,_t,xt){if(xt===void 0&&(xt={}),!pn(xt=xt||{}))throw new Error("options is invalid");var Tt,At=xt.tolerance||0,Pt=[],Nt=Ta(),Vt=Bc(vt);return Nt.load(Vt),qr(_t,function(Gt){var qt=!1;Gt&&(rr(Nt.search(Gt),function(en){if(qt===!1){var Xt=Nn(Gt).sort(),an=Nn(en).sort();fd(Xt,an)||(At===0?_l(Xt[0],en)&&_l(Xt[1],en):ac(en,Xt[0]).properties.dist<=At&&ac(en,Xt[1]).properties.dist<=At)?(qt=!0,Tt=Tt?Rf(Tt,Gt):Gt):(At===0?_l(an[0],Gt)&&_l(an[1],Gt):ac(Gt,an[0]).properties.dist<=At&&ac(Gt,an[1]).properties.dist<=At)&&(Tt=Tt?Rf(Tt,en):en)}}),qt===!1&&Tt&&(Pt.push(Tt),Tt=void 0))}),Tt&&Pt.push(Tt),Ft(Pt)}function Rf(vt,_t){var xt=Nn(_t),Tt=Nn(vt),At=Tt[0],Pt=Tt[Tt.length-1],Nt=vt.geometry.coordinates;return fd(xt[0],At)?Nt.unshift(xt[1]):fd(xt[0],Pt)?Nt.push(xt[1]):fd(xt[1],At)?Nt.unshift(xt[0]):fd(xt[1],Pt)&&Nt.push(xt[0]),vt}function Rp(vt){var _t=vt%360;return _t<0&&(_t+=360),_t}function Wd(vt,_t,xt){var Tt;return xt===void 0&&(xt={}),(Tt=xt.final?Vm(cn(_t),cn(vt)):Vm(cn(vt),cn(_t)))>180?-(360-Tt):Tt}function Vm(vt,_t){var xt=Tn(vt[1]),Tt=Tn(_t[1]),At=Tn(_t[0]-vt[0]);At>Math.PI&&(At-=2*Math.PI),At<-Math.PI&&(At+=2*Math.PI);var Pt=Math.log(Math.tan(Tt/2+Math.PI/4)/Math.tan(xt/2+Math.PI/4));return(Cn(Math.atan2(At,Pt))+360)%360}function Nf(vt,_t,xt,Tt){Tt===void 0&&(Tt={});var At=_t<0,Pt=kn(Math.abs(_t),Tt.units,"meters");At&&(Pt=-Math.abs(Pt));var Nt=cn(vt),Vt=function(Gt,qt,en,Xt){Xt=Xt===void 0?rt:Number(Xt);var an=qt/Xt,_n=Gt[0]*Math.PI/180,bn=Tn(Gt[1]),En=Tn(en),un=an*Math.cos(En),Vn=bn+un;Math.abs(Vn)>Math.PI/2&&(Vn=Vn>0?Math.PI-Vn:-Math.PI-Vn);var nr=Math.log(Math.tan(Vn/2+Math.PI/4)/Math.tan(bn/2+Math.PI/4)),xn=Math.abs(nr)>1e-11?un/nr:Math.cos(bn),zn=an*Math.sin(En)/xn;return[(180*(_n+zn)/Math.PI+540)%360-180,180*Vn/Math.PI]}(Nt,Pt,xt);return Vt[0]+=Vt[0]-Nt[0]>180?-360:Nt[0]-Vt[0]>180?360:0,kt(Vt,Tt.properties)}function jm(vt,_t,xt,Tt,At,Pt){for(var Nt=0;Nt<vt.length;Nt++){var Vt=vt[Nt],Gt=vt[Nt+1];Nt===vt.length-1&&(Gt=vt[0]),Tt=Ph(Vt,Gt,_t),xt<=0&&Tt>0?Ph(_t,Vt,At)<0||(At=Vt):xt>0&&Tt<=0&&(Gs(_t,Vt,Pt)||(Pt=Vt)),xt=Tt}return[At,Pt]}function Gs(vt,_t,xt){return Ph(vt,_t,xt)>0}function Ph(vt,_t,xt){return(_t[0]-vt[0])*(xt[1]-vt[1])-(xt[0]-vt[0])*(_t[1]-vt[1])}function Np(vt){for(var _t,xt,Tt=Nn(vt),At=0,Pt=1;Pt<Tt.length;)_t=xt||Tt[0],At+=((xt=Tt[Pt])[0]-_t[0])*(xt[1]+_t[1]),Pt++;return At>0}function Oh(vt,_t){switch(vt.type==="Feature"?vt.geometry.type:vt.type){case"GeometryCollection":return gr(vt,function(xt){Oh(xt,_t)}),vt;case"LineString":return Fg(Nn(vt),_t),vt;case"Polygon":return gd(Nn(vt),_t),vt;case"MultiLineString":return Nn(vt).forEach(function(xt){Fg(xt,_t)}),vt;case"MultiPolygon":return Nn(vt).forEach(function(xt){gd(xt,_t)}),vt;case"Point":case"MultiPoint":return vt}}function Fg(vt,_t){Np(vt)===_t&&vt.reverse()}function gd(vt,_t){Np(vt[0])!==_t&&vt[0].reverse();for(var xt=1;xt<vt.length;xt++)Np(vt[xt])===_t&&vt[xt].reverse()}function Um(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.zProperty||"elevation",Tt=_t.flip,At=_t.flags;Qn(vt,"Point","input must contain Points");for(var Pt=function(an,_n){var bn={};return rr(an,function(En){var un=Nn(En)[1];bn[un]||(bn[un]=[]),bn[un].push(En)}),Object.keys(bn).map(function(En){return bn[En].sort(function(un,Vn){return Nn(un)[0]-Nn(Vn)[0]})}).sort(function(En,un){return _n?Nn(En[0])[1]-Nn(un[0])[1]:Nn(un[0])[1]-Nn(En[0])[1]})}(vt,Tt),Nt=[],Vt=0;Vt<Pt.length;Vt++){for(var Gt=Pt[Vt],qt=[],en=0;en<Gt.length;en++){var Xt=Gt[en];Xt.properties[xt]?qt.push(Xt.properties[xt]):qt.push(0),At===!0&&(Xt.properties.matrixPosition=[Vt,en])}Nt.push(qt)}return Nt}var g1={successCallback:null,verbose:!1,polygons:!1},cu={};function md(vt,_t,xt,Tt){Tt=Tt||{};for(var At=Object.keys(g1),Pt=0;Pt<At.length;Pt++){var Nt=At[Pt],Vt=Tt[Nt];Vt=Vt!=null?Vt:g1[Nt],cu[Nt]=Vt}cu.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+_t+":"+(_t+xt)+"]");var Gt,qt=function(en,Xt,an){for(var _n=en.length-1,bn=en[0].length-1,En={rows:_n,cols:bn,cells:[]},un=Xt+Math.abs(an),Vn=0;Vn<_n;++Vn){En.cells[Vn]=[];for(var nr=0;nr<bn;++nr){var xn=0,zn=en[Vn+1][nr],jn=en[Vn+1][nr+1],qn=en[Vn][nr+1],Gn=en[Vn][nr];if(!(isNaN(zn)||isNaN(jn)||isNaN(qn)||isNaN(Gn))){xn|=zn<Xt?0:zn>un?128:64,xn|=jn<Xt?0:jn>un?32:16,xn|=qn<Xt?0:qn>un?8:4;var Zr=+(xn|=Gn<Xt?0:Gn>un?2:1),Fr=0;if(xn===17||xn===18||xn===33||xn===34||xn===38||xn===68||xn===72||xn===98||xn===102||xn===132||xn===136||xn===137||xn===152||xn===153){var ei=(zn+jn+qn+Gn)/4;Fr=ei>un?2:ei<Xt?0:1,xn===34?Fr===1?xn=35:Fr===0&&(xn=136):xn===136?Fr===1?(xn=35,Fr=4):Fr===0&&(xn=34):xn===17?Fr===1?(xn=155,Fr=4):Fr===0&&(xn=153):xn===68?Fr===1?(xn=103,Fr=4):Fr===0&&(xn=102):xn===153?Fr===1&&(xn=155):xn===102?Fr===1&&(xn=103):xn===152?Fr<2&&(xn=156,Fr=1):xn===137?Fr<2&&(xn=139,Fr=1):xn===98?Fr<2&&(xn=99,Fr=1):xn===38?Fr<2&&(xn=39,Fr=1):xn===18?Fr>0?(xn=156,Fr=4):xn=152:xn===33?Fr>0?(xn=139,Fr=4):xn=137:xn===72?Fr>0?(xn=99,Fr=4):xn=98:xn===132&&(Fr>0?(xn=39,Fr=4):xn=38)}if(xn!=0&&xn!=170){var zr,si,Wr,Gr,Vr,ni,Yr,ai;zr=si=Wr=Gr=Vr=ni=Yr=ai=.5;var Cr=[];xn===1?(Wr=1-Jn(Xt,qn,Gn),ai=1-Jn(Xt,zn,Gn),Cr.push(no[xn])):xn===169?(Wr=Jn(un,Gn,qn),ai=Jn(un,Gn,zn),Cr.push(no[xn])):xn===4?(ni=1-Jn(Xt,jn,qn),Gr=Jn(Xt,Gn,qn),Cr.push(qi[xn])):xn===166?(ni=Jn(un,qn,jn),Gr=1-Jn(un,qn,Gn),Cr.push(qi[xn])):xn===16?(Vr=Jn(Xt,qn,jn),si=Jn(Xt,zn,jn),Cr.push(Yi[xn])):xn===154?(Vr=1-Jn(un,jn,qn),si=1-Jn(un,jn,zn),Cr.push(Yi[xn])):xn===64?(Yr=Jn(Xt,Gn,zn),zr=1-Jn(Xt,jn,zn),Cr.push(vo[xn])):xn===106?(Yr=1-Jn(un,zn,Gn),zr=Jn(un,zn,jn),Cr.push(vo[xn])):xn===168?(Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),Cr.push(uo[xn]),Cr.push(no[xn])):xn===2?(Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),Cr.push(uo[xn]),Cr.push(no[xn])):xn===162?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),Cr.push(uo[xn]),Cr.push(no[xn])):xn===8?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===138?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===32?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===42?(ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn),Cr.push(So[xn]),Cr.push(vo[xn])):xn===128&&(ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn),Cr.push(So[xn]),Cr.push(vo[xn])),xn===5?(ni=1-Jn(Xt,jn,qn),ai=1-Jn(Xt,zn,Gn),Cr.push(qi[xn])):xn===165?(ni=Jn(un,qn,jn),ai=Jn(un,Gn,zn),Cr.push(qi[xn])):xn===20?(Gr=Jn(Xt,Gn,qn),si=Jn(Xt,zn,jn),Cr.push(uo[xn])):xn===150?(Gr=1-Jn(un,qn,Gn),si=1-Jn(un,jn,zn),Cr.push(uo[xn])):xn===80?(Vr=Jn(Xt,qn,jn),Yr=Jn(Xt,Gn,zn),Cr.push(Yi[xn])):xn===90?(Vr=1-Jn(un,jn,qn),Yr=1-Jn(un,zn,Gn),Cr.push(Yi[xn])):xn===65?(Wr=1-Jn(Xt,qn,Gn),zr=1-Jn(Xt,jn,zn),Cr.push(no[xn])):xn===105?(Wr=Jn(un,Gn,qn),zr=Jn(un,zn,jn),Cr.push(no[xn])):xn===160?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===10?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===130?(Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn),Cr.push(uo[xn]),Cr.push(no[xn])):xn===40?(Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn),Cr.push(uo[xn]),Cr.push(no[xn])):xn===101?(ni=Jn(un,qn,jn),zr=Jn(un,zn,jn),Cr.push(qi[xn])):xn===69?(ni=1-Jn(Xt,jn,qn),zr=1-Jn(Xt,jn,zn),Cr.push(qi[xn])):xn===149?(ai=Jn(un,Gn,zn),si=1-Jn(un,jn,zn),Cr.push(So[xn])):xn===21?(ai=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn),Cr.push(So[xn])):xn===86?(Gr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),Cr.push(uo[xn])):xn===84?(Gr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),Cr.push(uo[xn])):xn===89?(Vr=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),Cr.push(no[xn])):xn===81?(Vr=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),Cr.push(no[xn])):xn===96?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Yr=Jn(Xt,Gn,zn),zr=Jn(un,zn,jn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===74?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Yr=1-Jn(un,zn,Gn),zr=1-Jn(Xt,jn,zn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===24?(Vr=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),si=Jn(Xt,zn,jn),Cr.push(Yi[xn]),Cr.push(no[xn])):xn===146?(Vr=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),si=1-Jn(un,jn,zn),Cr.push(Yi[xn]),Cr.push(no[xn])):xn===6?(ni=1-Jn(Xt,jn,qn),Gr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===164?(ni=Jn(un,qn,jn),Gr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===129?(Wr=1-Jn(Xt,qn,Gn),ai=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn),Cr.push(no[xn]),Cr.push(So[xn])):xn===41?(Wr=Jn(un,Gn,qn),ai=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn),Cr.push(no[xn]),Cr.push(So[xn])):xn===66?(Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),zr=1-Jn(Xt,jn,zn),Cr.push(uo[xn]),Cr.push(no[xn])):xn===104?(Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),zr=Jn(un,zn,jn),Cr.push(no[xn]),Cr.push(As[xn])):xn===144?(Vr=Jn(Xt,qn,jn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),si=1-Jn(un,jn,zn),Cr.push(Yi[xn]),Cr.push(vo[xn])):xn===26?(Vr=1-Jn(un,jn,qn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn),Cr.push(Yi[xn]),Cr.push(vo[xn])):xn===36?(ni=Jn(un,qn,jn),Gr=Jn(Xt,Gn,qn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===134?(ni=1-Jn(Xt,jn,qn),Gr=1-Jn(un,qn,Gn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===9?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),ai=1-Jn(Xt,zn,Gn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===161?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),ai=Jn(un,Gn,zn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===37?(ni=Jn(un,qn,jn),ai=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn),Cr.push(qi[xn]),Cr.push(So[xn])):xn===133?(ni=1-Jn(Xt,jn,qn),ai=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn),Cr.push(qi[xn]),Cr.push(So[xn])):xn===148?(Gr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),si=1-Jn(un,jn,zn),Cr.push(uo[xn]),Cr.push(vo[xn])):xn===22?(Gr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn),Cr.push(uo[xn]),Cr.push(vo[xn])):xn===82?(Vr=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),Cr.push(Yi[xn]),Cr.push(no[xn])):xn===88?(Vr=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),Cr.push(Yi[xn]),Cr.push(no[xn])):xn===73?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),zr=1-Jn(Xt,jn,zn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===97?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),zr=Jn(un,zn,jn),Cr.push(Yi[xn]),Cr.push(qi[xn])):xn===145?(Vr=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),ai=Jn(un,Gn,zn),si=1-Jn(un,jn,zn),Cr.push(Yi[xn]),Cr.push(So[xn])):xn===25?(Vr=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),ai=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn),Cr.push(Yi[xn]),Cr.push(So[xn])):xn===70?(ni=1-Jn(Xt,jn,qn),Gr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),zr=1-Jn(Xt,jn,zn),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===100?(ni=Jn(un,qn,jn),Gr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),zr=Jn(un,zn,jn),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===34?(Fr===0?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)):(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(So[xn]),Cr.push(vo[xn])):xn===35?(Fr===4?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)):(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(no[xn]),Cr.push(vo[xn])):xn===136?(Fr===0?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)):(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(So[xn]),Cr.push(vo[xn])):xn===153?(Fr===0?(Vr=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),ai=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn)):(Vr=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),ai=Jn(un,Gn,zn),si=1-Jn(un,jn,zn)),Cr.push(Yi[xn]),Cr.push(no[xn])):xn===102?(Fr===0?(ni=1-Jn(Xt,jn,qn),Gr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),zr=1-Jn(Xt,jn,zn)):(ni=Jn(un,qn,jn),Gr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),zr=Jn(un,zn,jn)),Cr.push(qi[xn]),Cr.push(vo[xn])):xn===155?(Fr===4?(Vr=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),ai=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn)):(Vr=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),ai=Jn(un,Gn,zn),si=1-Jn(un,jn,zn)),Cr.push(Yi[xn]),Cr.push(So[xn])):xn===103?(Fr===4?(ni=1-Jn(Xt,jn,qn),Gr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),zr=1-Jn(Xt,jn,zn)):(ni=Jn(un,qn,jn),Gr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),zr=Jn(un,zn,jn)),Cr.push(qi[xn]),Cr.push(uo[xn])):xn===152?(Fr===0?(Vr=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn)):(Vr=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),si=1-Jn(un,jn,zn)),Cr.push(Yi[xn]),Cr.push(uo[xn]),Cr.push(no[xn])):xn===156?(Fr===4?(Vr=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),si=Jn(Xt,zn,jn)):(Vr=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),si=1-Jn(un,jn,zn)),Cr.push(Yi[xn]),Cr.push(no[xn]),Cr.push(vo[xn])):xn===137?(Fr===0?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),ai=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)):(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),ai=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(no[xn])):xn===139?(Fr===4?(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Wr=1-Jn(Xt,qn,Gn),ai=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)):(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Wr=Jn(un,Gn,qn),ai=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(So[xn])):xn===98?(Fr===0?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),zr=1-Jn(Xt,jn,zn)):(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),zr=Jn(un,zn,jn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(vo[xn])):xn===99?(Fr===4?(Vr=1-Jn(Xt,jn,qn),ni=1-Jn(un,jn,qn),Gr=Jn(un,Gn,qn),Wr=Jn(Xt,Gn,qn),Yr=Jn(Xt,Gn,zn),zr=1-Jn(Xt,jn,zn)):(Vr=Jn(un,qn,jn),ni=Jn(Xt,qn,jn),Gr=1-Jn(Xt,qn,Gn),Wr=1-Jn(un,qn,Gn),Yr=1-Jn(un,zn,Gn),zr=Jn(un,zn,jn)),Cr.push(Yi[xn]),Cr.push(qi[xn]),Cr.push(no[xn])):xn===38?(Fr===0?(ni=1-Jn(Xt,jn,qn),Gr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)):(ni=Jn(un,qn,jn),Gr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)),Cr.push(qi[xn]),Cr.push(So[xn]),Cr.push(vo[xn])):xn===39?(Fr===4?(ni=1-Jn(Xt,jn,qn),Gr=Jn(Xt,Gn,qn),ai=Jn(Xt,Gn,zn),Yr=Jn(un,Gn,zn),zr=1-Jn(un,jn,zn),si=1-Jn(Xt,jn,zn)):(ni=Jn(un,qn,jn),Gr=1-Jn(un,qn,Gn),ai=1-Jn(un,zn,Gn),Yr=1-Jn(Xt,zn,Gn),zr=Jn(Xt,zn,jn),si=Jn(un,zn,jn)),Cr.push(qi[xn]),Cr.push(uo[xn]),Cr.push(vo[xn])):xn===85&&(Vr=1,ni=0,Gr=1,Wr=0,ai=0,Yr=1,zr=0,si=1),(zr<0||zr>1||si<0||si>1||Vr<0||Vr>1||Gr<0||Gr>1||ai<0||ai>1||Yr<0||Yr>1)&&console.log("MarchingSquaresJS-isoBands: "+xn+" "+Zr+" "+zn+","+jn+","+qn+","+Gn+" "+Fr+" "+zr+" "+si+" "+Vr+" "+ni+" "+Gr+" "+Wr+" "+ai+" "+Yr),En.cells[Vn][nr]={cval:xn,cval_real:Zr,flipped:Fr,topleft:zr,topright:si,righttop:Vr,rightbottom:ni,bottomright:Gr,bottomleft:Wr,leftbottom:ai,lefttop:Yr,edges:Cr}}}}}return En}(vt,_t,xt);return cu.polygons?(cu.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),Gt=function(en){var Xt=[],an=0;return en.cells.forEach(function(_n,bn){_n.forEach(function(En,un){if(En!==void 0){var Vn=Bi[En.cval](En);typeof Vn=="object"&&Jm(Vn)?typeof Vn[0]=="object"&&Jm(Vn[0])?typeof Vn[0][0]=="object"&&Jm(Vn[0][0])?Vn.forEach(function(nr){nr.forEach(function(xn){xn[0]+=un,xn[1]+=bn}),Xt[an++]=nr}):(Vn.forEach(function(nr){nr[0]+=un,nr[1]+=bn}),Xt[an++]=Vn):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),Xt}(qt)):(cu.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),Gt=function(en){for(var Xt=[],an=en.rows,_n=en.cols,bn=[],En=0;En<an;En++)for(var un=0;un<_n;un++)if(en.cells[En][un]!==void 0&&en.cells[En][un].edges.length>0){var Vn=Dp(en.cells[En][un]),nr=null,xn=un,zn=En;Vn!==null&&bn.push([Vn.p[0]+xn,Vn.p[1]+zn]);do{if((nr=_v(en.cells[zn][xn],Vn.x,Vn.y,Vn.o))===null)break;if(bn.push([nr.p[0]+xn,nr.p[1]+zn]),xn+=nr.x,Vn=nr,(zn+=nr.y)<0||zn>=an||xn<0||xn>=_n||en.cells[zn][xn]===void 0){var jn=vv(en,xn-=nr.x,zn-=nr.y,nr.x,nr.y,nr.o);if(jn===null)break;jn.path.forEach(function(qn){bn.push(qn)}),xn=jn.i,zn=jn.j,Vn=jn}}while(en.cells[zn][xn]!==void 0&&en.cells[zn][xn].edges.length>0);Xt.push(bn),bn=[],en.cells[En][un].edges.length>0&&un--}return Xt}(qt)),typeof cu.successCallback=="function"&&cu.successCallback(Gt),Gt}var qa=64,Ru=16,Wo=[],gs=[],as=[],Jo=[],Qo=[],ys=[],vs=[],ls=[],es=[],_s=[],bs=[],xs=[],ws=[],To=[],cs=[],us=[],Es=[],Uo=[],Ss=[],Cs=[],Ts=[],ts=[],ks=[],hs=[];vs[85]=_s[85]=-1,ls[85]=bs[85]=0,es[85]=xs[85]=1,Ss[85]=ts[85]=1,Cs[85]=ks[85]=0,Ts[85]=hs[85]=1,Wo[85]=Jo[85]=0,gs[85]=Qo[85]=-1,as[85]=cs[85]=0,us[85]=ws[85]=0,Es[85]=To[85]=1,ys[85]=Uo[85]=1,ts[1]=ts[169]=0,ks[1]=ks[169]=-1,hs[1]=hs[169]=0,ws[1]=ws[169]=-1,To[1]=To[169]=0,cs[1]=cs[169]=0,_s[4]=_s[166]=0,bs[4]=bs[166]=-1,xs[4]=xs[166]=1,us[4]=us[166]=1,Es[4]=Es[166]=0,Uo[4]=Uo[166]=0,vs[16]=vs[154]=0,ls[16]=ls[154]=1,es[16]=es[154]=1,Jo[16]=Jo[154]=1,Qo[16]=Qo[154]=0,ys[16]=ys[154]=1,Ss[64]=Ss[106]=0,Cs[64]=Cs[106]=1,Ts[64]=Ts[106]=0,Wo[64]=Wo[106]=-1,gs[64]=gs[106]=0,as[64]=as[106]=1,Ss[2]=Ss[168]=0,Cs[2]=Cs[168]=-1,Ts[2]=Ts[168]=1,ts[2]=ts[168]=0,ks[2]=ks[168]=-1,hs[2]=hs[168]=0,ws[2]=ws[168]=-1,To[2]=To[168]=0,cs[2]=cs[168]=0,us[2]=us[168]=-1,Es[2]=Es[168]=0,Uo[2]=Uo[168]=1,vs[8]=vs[162]=0,ls[8]=ls[162]=-1,es[8]=es[162]=0,_s[8]=_s[162]=0,bs[8]=bs[162]=-1,xs[8]=xs[162]=1,ws[8]=ws[162]=1,To[8]=To[162]=0,cs[8]=cs[162]=1,us[8]=us[162]=1,Es[8]=Es[162]=0,Uo[8]=Uo[162]=0,vs[32]=vs[138]=0,ls[32]=ls[138]=1,es[32]=es[138]=1,_s[32]=_s[138]=0,bs[32]=bs[138]=1,xs[32]=xs[138]=0,Wo[32]=Wo[138]=1,gs[32]=gs[138]=0,as[32]=as[138]=0,Jo[32]=Jo[138]=1,Qo[32]=Qo[138]=0,ys[32]=ys[138]=1,ts[128]=ts[42]=0,ks[128]=ks[42]=1,hs[128]=hs[42]=1,Ss[128]=Ss[42]=0,Cs[128]=Cs[42]=1,Ts[128]=Ts[42]=0,Wo[128]=Wo[42]=-1,gs[128]=gs[42]=0,as[128]=as[42]=1,Jo[128]=Jo[42]=-1,Qo[128]=Qo[42]=0,ys[128]=ys[42]=0,_s[5]=_s[165]=-1,bs[5]=bs[165]=0,xs[5]=xs[165]=0,ts[5]=ts[165]=1,ks[5]=ks[165]=0,hs[5]=hs[165]=0,us[20]=us[150]=0,Es[20]=Es[150]=1,Uo[20]=Uo[150]=1,Jo[20]=Jo[150]=0,Qo[20]=Qo[150]=-1,ys[20]=ys[150]=1,vs[80]=vs[90]=-1,ls[80]=ls[90]=0,es[80]=es[90]=1,Ss[80]=Ss[90]=1,Cs[80]=Cs[90]=0,Ts[80]=Ts[90]=1,ws[65]=ws[105]=0,To[65]=To[105]=1,cs[65]=cs[105]=0,Wo[65]=Wo[105]=0,gs[65]=gs[105]=-1,as[65]=as[105]=0,vs[160]=vs[10]=-1,ls[160]=ls[10]=0,es[160]=es[10]=1,_s[160]=_s[10]=-1,bs[160]=bs[10]=0,xs[160]=xs[10]=0,ts[160]=ts[10]=1,ks[160]=ks[10]=0,hs[160]=hs[10]=0,Ss[160]=Ss[10]=1,Cs[160]=Cs[10]=0,Ts[160]=Ts[10]=1,us[130]=us[40]=0,Es[130]=Es[40]=1,Uo[130]=Uo[40]=1,ws[130]=ws[40]=0,To[130]=To[40]=1,cs[130]=cs[40]=0,Wo[130]=Wo[40]=0,gs[130]=gs[40]=-1,as[130]=as[40]=0,Jo[130]=Jo[40]=0,Qo[130]=Qo[40]=-1,ys[130]=ys[40]=1,_s[37]=_s[133]=0,bs[37]=bs[133]=1,xs[37]=xs[133]=1,ts[37]=ts[133]=0,ks[37]=ks[133]=1,hs[37]=hs[133]=0,Wo[37]=Wo[133]=-1,gs[37]=gs[133]=0,as[37]=as[133]=0,Jo[37]=Jo[133]=1,Qo[37]=Qo[133]=0,ys[37]=ys[133]=0,us[148]=us[22]=-1,Es[148]=Es[22]=0,Uo[148]=Uo[22]=0,ts[148]=ts[22]=0,ks[148]=ks[22]=-1,hs[148]=hs[22]=1,Ss[148]=Ss[22]=0,Cs[148]=Cs[22]=1,Ts[148]=Ts[22]=1,Jo[148]=Jo[22]=-1,Qo[148]=Qo[22]=0,ys[148]=ys[22]=1,vs[82]=vs[88]=0,ls[82]=ls[88]=-1,es[82]=es[88]=1,us[82]=us[88]=1,Es[82]=Es[88]=0,Uo[82]=Uo[88]=1,ws[82]=ws[88]=-1,To[82]=To[88]=0,cs[82]=cs[88]=1,Ss[82]=Ss[88]=0,Cs[82]=Cs[88]=-1,Ts[82]=Ts[88]=0,vs[73]=vs[97]=0,ls[73]=ls[97]=1,es[73]=es[97]=0,_s[73]=_s[97]=0,bs[73]=bs[97]=-1,xs[73]=xs[97]=0,ws[73]=ws[97]=1,To[73]=To[97]=0,cs[73]=cs[97]=0,Wo[73]=Wo[97]=1,gs[73]=gs[97]=0,as[73]=as[97]=1,vs[145]=vs[25]=0,ls[145]=ls[25]=-1,es[145]=es[25]=0,ws[145]=ws[25]=1,To[145]=To[25]=0,cs[145]=cs[25]=1,ts[145]=ts[25]=0,ks[145]=ks[25]=1,hs[145]=hs[25]=1,Jo[145]=Jo[25]=-1,Qo[145]=Qo[25]=0,ys[145]=ys[25]=0,_s[70]=_s[100]=0,bs[70]=bs[100]=1,xs[70]=xs[100]=0,us[70]=us[100]=-1,Es[70]=Es[100]=0,Uo[70]=Uo[100]=1,Ss[70]=Ss[100]=0,Cs[70]=Cs[100]=-1,Ts[70]=Ts[100]=1,Wo[70]=Wo[100]=1,gs[70]=gs[100]=0,as[70]=as[100]=0,_s[101]=_s[69]=0,bs[101]=bs[69]=1,xs[101]=xs[69]=0,Wo[101]=Wo[69]=1,gs[101]=gs[69]=0,as[101]=as[69]=0,ts[149]=ts[21]=0,ks[149]=ks[21]=1,hs[149]=hs[21]=1,Jo[149]=Jo[21]=-1,Qo[149]=Qo[21]=0,ys[149]=ys[21]=0,us[86]=us[84]=-1,Es[86]=Es[84]=0,Uo[86]=Uo[84]=1,Ss[86]=Ss[84]=0,Cs[86]=Cs[84]=-1,Ts[86]=Ts[84]=1,vs[89]=vs[81]=0,ls[89]=ls[81]=-1,es[89]=es[81]=0,ws[89]=ws[81]=1,To[89]=To[81]=0,cs[89]=cs[81]=1,vs[96]=vs[74]=0,ls[96]=ls[74]=1,es[96]=es[74]=0,_s[96]=_s[74]=-1,bs[96]=bs[74]=0,xs[96]=xs[74]=1,Ss[96]=Ss[74]=1,Cs[96]=Cs[74]=0,Ts[96]=Ts[74]=0,Wo[96]=Wo[74]=1,gs[96]=gs[74]=0,as[96]=as[74]=1,vs[24]=vs[146]=0,ls[24]=ls[146]=-1,es[24]=es[146]=1,us[24]=us[146]=1,Es[24]=Es[146]=0,Uo[24]=Uo[146]=1,ws[24]=ws[146]=0,To[24]=To[146]=1,cs[24]=cs[146]=1,Jo[24]=Jo[146]=0,Qo[24]=Qo[146]=-1,ys[24]=ys[146]=0,_s[6]=_s[164]=-1,bs[6]=bs[164]=0,xs[6]=xs[164]=1,us[6]=us[164]=-1,Es[6]=Es[164]=0,Uo[6]=Uo[164]=0,ts[6]=ts[164]=0,ks[6]=ks[164]=-1,hs[6]=hs[164]=1,Ss[6]=Ss[164]=1,Cs[6]=Cs[164]=0,Ts[6]=Ts[164]=0,ws[129]=ws[41]=0,To[129]=To[41]=1,cs[129]=cs[41]=1,ts[129]=ts[41]=0,ks[129]=ks[41]=1,hs[129]=hs[41]=0,Wo[129]=Wo[41]=-1,gs[129]=gs[41]=0,as[129]=as[41]=0,Jo[129]=Jo[41]=0,Qo[129]=Qo[41]=-1,ys[129]=ys[41]=0,us[66]=us[104]=0,Es[66]=Es[104]=1,Uo[66]=Uo[104]=0,ws[66]=ws[104]=-1,To[66]=To[104]=0,cs[66]=cs[104]=1,Ss[66]=Ss[104]=0,Cs[66]=Cs[104]=-1,Ts[66]=Ts[104]=0,Wo[66]=Wo[104]=0,gs[66]=gs[104]=-1,as[66]=as[104]=1,vs[144]=vs[26]=-1,ls[144]=ls[26]=0,es[144]=es[26]=0,ts[144]=ts[26]=1,ks[144]=ks[26]=0,hs[144]=hs[26]=1,Ss[144]=Ss[26]=0,Cs[144]=Cs[26]=1,Ts[144]=Ts[26]=1,Jo[144]=Jo[26]=-1,Qo[144]=Qo[26]=0,ys[144]=ys[26]=1,_s[36]=_s[134]=0,bs[36]=bs[134]=1,xs[36]=xs[134]=1,us[36]=us[134]=0,Es[36]=Es[134]=1,Uo[36]=Uo[134]=0,Wo[36]=Wo[134]=0,gs[36]=gs[134]=-1,as[36]=as[134]=1,Jo[36]=Jo[134]=1,Qo[36]=Qo[134]=0,ys[36]=ys[134]=0,vs[9]=vs[161]=-1,ls[9]=ls[161]=0,es[9]=es[161]=0,_s[9]=_s[161]=0,bs[9]=bs[161]=-1,xs[9]=xs[161]=0,ws[9]=ws[161]=1,To[9]=To[161]=0,cs[9]=cs[161]=0,ts[9]=ts[161]=1,ks[9]=ks[161]=0,hs[9]=hs[161]=1,vs[136]=0,ls[136]=1,es[136]=1,_s[136]=0,bs[136]=1,xs[136]=0,us[136]=-1,Es[136]=0,Uo[136]=1,ws[136]=-1,To[136]=0,cs[136]=0,ts[136]=0,ks[136]=-1,hs[136]=0,Ss[136]=0,Cs[136]=-1,Ts[136]=1,Wo[136]=1,gs[136]=0,as[136]=0,Jo[136]=1,Qo[136]=0,ys[136]=1,vs[34]=0,ls[34]=-1,es[34]=0,_s[34]=0,bs[34]=-1,xs[34]=1,us[34]=1,Es[34]=0,Uo[34]=0,ws[34]=1,To[34]=0,cs[34]=1,ts[34]=0,ks[34]=1,hs[34]=1,Ss[34]=0,Cs[34]=1,Ts[34]=0,Wo[34]=-1,gs[34]=0,as[34]=1,Jo[34]=-1,Qo[34]=0,ys[34]=0,vs[35]=0,ls[35]=1,es[35]=1,_s[35]=0,bs[35]=-1,xs[35]=1,us[35]=1,Es[35]=0,Uo[35]=0,ws[35]=-1,To[35]=0,cs[35]=0,ts[35]=0,ks[35]=-1,hs[35]=0,Ss[35]=0,Cs[35]=1,Ts[35]=0,Wo[35]=-1,gs[35]=0,as[35]=1,Jo[35]=1,Qo[35]=0,ys[35]=1,vs[153]=0,ls[153]=1,es[153]=1,ws[153]=-1,To[153]=0,cs[153]=0,ts[153]=0,ks[153]=-1,hs[153]=0,Jo[153]=1,Qo[153]=0,ys[153]=1,_s[102]=0,bs[102]=-1,xs[102]=1,us[102]=1,Es[102]=0,Uo[102]=0,Ss[102]=0,Cs[102]=1,Ts[102]=0,Wo[102]=-1,gs[102]=0,as[102]=1,vs[155]=0,ls[155]=-1,es[155]=0,ws[155]=1,To[155]=0,cs[155]=1,ts[155]=0,ks[155]=1,hs[155]=1,Jo[155]=-1,Qo[155]=0,ys[155]=0,_s[103]=0,bs[103]=1,xs[103]=0,us[103]=-1,Es[103]=0,Uo[103]=1,Ss[103]=0,Cs[103]=-1,Ts[103]=1,Wo[103]=1,gs[103]=0,as[103]=0,vs[152]=0,ls[152]=1,es[152]=1,us[152]=-1,Es[152]=0,Uo[152]=1,ws[152]=-1,To[152]=0,cs[152]=0,ts[152]=0,ks[152]=-1,hs[152]=0,Ss[152]=0,Cs[152]=-1,Ts[152]=1,Jo[152]=1,Qo[152]=0,ys[152]=1,vs[156]=0,ls[156]=-1,es[156]=1,us[156]=1,Es[156]=0,Uo[156]=1,ws[156]=-1,To[156]=0,cs[156]=0,ts[156]=0,ks[156]=-1,hs[156]=0,Ss[156]=0,Cs[156]=1,Ts[156]=1,Jo[156]=-1,Qo[156]=0,ys[156]=1,vs[137]=0,ls[137]=1,es[137]=1,_s[137]=0,bs[137]=1,xs[137]=0,ws[137]=-1,To[137]=0,cs[137]=0,ts[137]=0,ks[137]=-1,hs[137]=0,Wo[137]=1,gs[137]=0,as[137]=0,Jo[137]=1,Qo[137]=0,ys[137]=1,vs[139]=0,ls[139]=1,es[139]=1,_s[139]=0,bs[139]=-1,xs[139]=0,ws[139]=1,To[139]=0,cs[139]=0,ts[139]=0,ks[139]=1,hs[139]=0,Wo[139]=-1,gs[139]=0,as[139]=0,Jo[139]=1,Qo[139]=0,ys[139]=1,vs[98]=0,ls[98]=-1,es[98]=0,_s[98]=0,bs[98]=-1,xs[98]=1,us[98]=1,Es[98]=0,Uo[98]=0,ws[98]=1,To[98]=0,cs[98]=1,Ss[98]=0,Cs[98]=1,Ts[98]=0,Wo[98]=-1,gs[98]=0,as[98]=1,vs[99]=0,ls[99]=1,es[99]=0,_s[99]=0,bs[99]=-1,xs[99]=1,us[99]=1,Es[99]=0,Uo[99]=0,ws[99]=-1,To[99]=0,cs[99]=1,Ss[99]=0,Cs[99]=-1,Ts[99]=0,Wo[99]=1,gs[99]=0,as[99]=1,_s[38]=0,bs[38]=-1,xs[38]=1,us[38]=1,Es[38]=0,Uo[38]=0,ts[38]=0,ks[38]=1,hs[38]=1,Ss[38]=0,Cs[38]=1,Ts[38]=0,Wo[38]=-1,gs[38]=0,as[38]=1,Jo[38]=-1,Qo[38]=0,ys[38]=0,_s[39]=0,bs[39]=1,xs[39]=1,us[39]=-1,Es[39]=0,Uo[39]=0,ts[39]=0,ks[39]=-1,hs[39]=1,Ss[39]=0,Cs[39]=1,Ts[39]=0,Wo[39]=-1,gs[39]=0,as[39]=1,Jo[39]=1,Qo[39]=0,ys[39]=0;var Gm=function(vt){return[[vt.bottomleft,0],[0,0],[0,vt.leftbottom]]},Wm=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0]]},zg=function(vt){return[[vt.topright,1],[1,1],[1,vt.righttop]]},qm=function(vt){return[[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ym=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop]]},Xm=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[1,vt.righttop],[1,vt.rightbottom]]},Zm=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.topleft,1],[vt.topright,1]]},Km=function(vt){return[[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]},Yi=[],qi=[],uo=[],no=[],So=[],vo=[],As=[],ds=[];no[1]=So[1]=18,no[169]=So[169]=18,uo[4]=qi[4]=12,uo[166]=qi[166]=12,Yi[16]=ds[16]=4,Yi[154]=ds[154]=4,vo[64]=As[64]=22,vo[106]=As[106]=22,uo[2]=vo[2]=17,no[2]=So[2]=18,uo[168]=vo[168]=17,no[168]=So[168]=18,Yi[8]=no[8]=9,qi[8]=uo[8]=12,Yi[162]=no[162]=9,qi[162]=uo[162]=12,Yi[32]=ds[32]=4,qi[32]=As[32]=1,Yi[138]=ds[138]=4,qi[138]=As[138]=1,So[128]=ds[128]=21,vo[128]=As[128]=22,So[42]=ds[42]=21,vo[42]=As[42]=22,qi[5]=So[5]=14,qi[165]=So[165]=14,uo[20]=ds[20]=6,uo[150]=ds[150]=6,Yi[80]=vo[80]=11,Yi[90]=vo[90]=11,no[65]=As[65]=3,no[105]=As[105]=3,Yi[160]=vo[160]=11,qi[160]=So[160]=14,Yi[10]=vo[10]=11,qi[10]=So[10]=14,uo[130]=ds[130]=6,no[130]=As[130]=3,uo[40]=ds[40]=6,no[40]=As[40]=3,qi[101]=As[101]=1,qi[69]=As[69]=1,So[149]=ds[149]=21,So[21]=ds[21]=21,uo[86]=vo[86]=17,uo[84]=vo[84]=17,Yi[89]=no[89]=9,Yi[81]=no[81]=9,Yi[96]=As[96]=0,qi[96]=vo[96]=15,Yi[74]=As[74]=0,qi[74]=vo[74]=15,Yi[24]=uo[24]=8,no[24]=ds[24]=7,Yi[146]=uo[146]=8,no[146]=ds[146]=7,qi[6]=vo[6]=15,uo[6]=So[6]=16,qi[164]=vo[164]=15,uo[164]=So[164]=16,no[129]=ds[129]=7,So[129]=As[129]=20,no[41]=ds[41]=7,So[41]=As[41]=20,uo[66]=As[66]=2,no[66]=vo[66]=19,uo[104]=As[104]=2,no[104]=vo[104]=19,Yi[144]=So[144]=10,vo[144]=ds[144]=23,Yi[26]=So[26]=10,vo[26]=ds[26]=23,qi[36]=ds[36]=5,uo[36]=As[36]=2,qi[134]=ds[134]=5,uo[134]=As[134]=2,Yi[9]=So[9]=10,qi[9]=no[9]=13,Yi[161]=So[161]=10,qi[161]=no[161]=13,qi[37]=ds[37]=5,So[37]=As[37]=20,qi[133]=ds[133]=5,So[133]=As[133]=20,uo[148]=So[148]=16,vo[148]=ds[148]=23,uo[22]=So[22]=16,vo[22]=ds[22]=23,Yi[82]=uo[82]=8,no[82]=vo[82]=19,Yi[88]=uo[88]=8,no[88]=vo[88]=19,Yi[73]=As[73]=0,qi[73]=no[73]=13,Yi[97]=As[97]=0,qi[97]=no[97]=13,Yi[145]=no[145]=9,So[145]=ds[145]=21,Yi[25]=no[25]=9,So[25]=ds[25]=21,qi[70]=As[70]=1,uo[70]=vo[70]=17,qi[100]=As[100]=1,uo[100]=vo[100]=17,Yi[34]=no[34]=9,qi[34]=uo[34]=12,So[34]=ds[34]=21,vo[34]=As[34]=22,Yi[136]=ds[136]=4,qi[136]=As[136]=1,uo[136]=vo[136]=17,no[136]=So[136]=18,Yi[35]=ds[35]=4,qi[35]=uo[35]=12,no[35]=So[35]=18,vo[35]=As[35]=22,Yi[153]=ds[153]=4,no[153]=So[153]=18,qi[102]=uo[102]=12,vo[102]=As[102]=22,Yi[155]=no[155]=9,So[155]=ds[155]=23,qi[103]=As[103]=1,uo[103]=vo[103]=17,Yi[152]=ds[152]=4,uo[152]=vo[152]=17,no[152]=So[152]=18,Yi[156]=uo[156]=8,no[156]=So[156]=18,vo[156]=ds[156]=23,Yi[137]=ds[137]=4,qi[137]=As[137]=1,no[137]=So[137]=18,Yi[139]=ds[139]=4,qi[139]=no[139]=13,So[139]=As[139]=20,Yi[98]=no[98]=9,qi[98]=uo[98]=12,vo[98]=As[98]=22,Yi[99]=As[99]=0,qi[99]=uo[99]=12,no[99]=vo[99]=19,qi[38]=uo[38]=12,So[38]=ds[38]=21,vo[38]=As[38]=22,qi[39]=ds[39]=5,uo[39]=So[39]=16,vo[39]=As[39]=22;var Bi=[];function Jn(vt,_t,xt){return(vt-_t)/(xt-_t)}function Jm(vt){return vt.constructor.toString().indexOf("Array")>-1}function vv(vt,_t,xt,Tt,At,Pt){for(var Nt=vt.cells[xt][_t],Vt=Nt.cval_real,Gt=_t+Tt,qt=xt+At,en=[],Xt=!1;!Xt;){if(vt.cells[qt]===void 0||vt.cells[qt][Gt]===void 0)if(qt-=At,Gt-=Tt,Vt=(Nt=vt.cells[qt][Gt]).cval_real,At===-1)if(Pt===0)if(1&Vt)en.push([Gt,qt]),Tt=-1,At=0,Pt=0;else{if(!(4&Vt)){en.push([Gt+Nt.bottomright,qt]),Tt=0,At=1,Pt=1,Xt=!0;break}en.push([Gt+1,qt]),Tt=1,At=0,Pt=0}else{if(!(1&Vt)){if(4&Vt){en.push([Gt+Nt.bottomright,qt]),Tt=0,At=1,Pt=1,Xt=!0;break}en.push([Gt+Nt.bottomleft,qt]),Tt=0,At=1,Pt=0,Xt=!0;break}en.push([Gt,qt]),Tt=-1,At=0,Pt=0}else if(At===1)if(Pt===0){if(!(Vt&Ru)){if(Vt&qa){en.push([Gt+Nt.topleft,qt+1]),Tt=0,At=-1,Pt=0,Xt=!0;break}en.push([Gt+Nt.topright,qt+1]),Tt=0,At=-1,Pt=1,Xt=!0;break}en.push([Gt+1,qt+1]),Tt=1,At=0,Pt=1}else en.push([Gt+1,qt+1]),Tt=1,At=0,Pt=1;else if(Tt===-1)if(Pt===0){if(!(Vt&qa)){if(1&Vt){en.push([Gt,qt+Nt.leftbottom]),Tt=1,At=0,Pt=0,Xt=!0;break}en.push([Gt,qt+Nt.lefttop]),Tt=1,At=0,Pt=1,Xt=!0;break}en.push([Gt,qt+1]),Tt=0,At=1,Pt=0}else{if(!(Vt&qa)){console.log("MarchingSquaresJS-isoBands: wtf");break}en.push([Gt,qt+1]),Tt=0,At=1,Pt=0}else{if(Tt!==1){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(Pt===0){if(!(4&Vt)){en.push([Gt+1,qt+Nt.rightbottom]),Tt=-1,At=0,Pt=0,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Pt=1}else{if(!(4&Vt)){if(Vt&Ru){en.push([Gt+1,qt+Nt.righttop]),Tt=-1,At=0,Pt=1;break}en.push([Gt+1,qt+Nt.rightbottom]),Tt=-1,At=0,Pt=0,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Pt=1}}else if(Vt=(Nt=vt.cells[qt][Gt]).cval_real,Tt===-1)if(Pt===0)if(vt.cells[qt-1]!==void 0&&vt.cells[qt-1][Gt]!==void 0)Tt=0,At=-1,Pt=1;else{if(!(1&Vt)){en.push([Gt+Nt.bottomright,qt]),Tt=0,At=1,Pt=1,Xt=!0;break}en.push([Gt,qt])}else{if(!(Vt&qa)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+Gt+","+qt);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(Tt===1){if(Pt===0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt+1]!==void 0&&vt.cells[qt+1][Gt]!==void 0)Tt=0,At=1,Pt=0;else{if(!(Vt&Ru)){en.push([Gt+Nt.topleft,qt+1]),Tt=0,At=-1,Pt=0,Xt=!0;break}en.push([Gt+1,qt+1]),Tt=1,At=0,Pt=1}}else if(At===-1){if(Pt!==1){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt][Gt+1]!==void 0)Tt=1,At=0,Pt=1;else{if(!(4&Vt)){en.push([Gt+1,qt+Nt.righttop]),Tt=-1,At=0,Pt=1,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Pt=1}}else{if(At!==1){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(Pt!==0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt][Gt-1]!==void 0)Tt=-1,At=0,Pt=0;else{if(!(Vt&qa)){en.push([Gt,qt+Nt.leftbottom]),Tt=1,At=0,Pt=0,Xt=!0;break}en.push([Gt,qt+1]),Tt=0,At=1,Pt=0}}if(qt+=At,(Gt+=Tt)===_t&&qt===xt)break}return{path:en,i:Gt,j:qt,x:Tt,y:At,o:Pt}}function Dp(vt){if(vt.edges.length>0){var _t=vt.edges[vt.edges.length-1],xt=vt.cval_real;switch(_t){case 0:return xt&Ru?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.topleft,1],x:0,y:-1,o:0};case 1:return 4&xt?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 2:return 4&xt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[vt.topleft,1],x:0,y:-1,o:0};case 3:return 1&xt?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 4:return xt&Ru?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};case 5:return 4&xt?{p:[vt.topright,1],x:0,y:-1,o:1}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 6:return 4&xt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};case 7:return 1&xt?{p:[vt.topright,1],x:0,y:-1,o:1}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 8:return 4&xt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[1,vt.righttop],x:-1,y:0,o:1};case 9:return 1&xt?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 10:return 1&xt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[1,vt.righttop],x:-1,y:0,o:1};case 11:return xt&qa?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 12:return 4&xt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 13:return 1&xt?{p:[1,vt.rightbottom],x:-1,y:0,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 14:return 1&xt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 15:return xt&qa?{p:[1,vt.rightbottom],x:-1,y:0,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 16:return 4&xt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[0,vt.leftbottom],x:1,y:0,o:0};case 17:return xt&qa?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 18:return 1&xt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 19:return xt&qa?{p:[vt.bottomleft,0],x:0,y:1,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 20:return xt&qa?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[0,vt.leftbottom],x:1,y:0,o:0};case 21:return xt&Ru?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[vt.topright,1],x:0,y:-1,o:1};case 22:return xt&qa?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 23:return xt&Ru?{p:[0,vt.lefttop],x:1,y:0,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(vt)}}return null}function _v(vt,_t,xt,Tt){var At,Pt,Nt,Vt,Gt,qt=vt.cval;switch(_t){case-1:switch(Tt){case 0:At=qi[qt],Nt=_s[qt],Vt=bs[qt],Gt=xs[qt];break;default:At=Yi[qt],Nt=vs[qt],Vt=ls[qt],Gt=es[qt]}break;case 1:switch(Tt){case 0:At=So[qt],Nt=ts[qt],Vt=ks[qt],Gt=hs[qt];break;default:At=vo[qt],Nt=Ss[qt],Vt=Cs[qt],Gt=Ts[qt]}break;default:switch(xt){case-1:switch(Tt){case 0:At=As[qt],Nt=Wo[qt],Vt=gs[qt],Gt=as[qt];break;default:At=ds[qt],Nt=Jo[qt],Vt=Qo[qt],Gt=ys[qt]}break;case 1:switch(Tt){case 0:At=no[qt],Nt=ws[qt],Vt=To[qt],Gt=cs[qt];break;default:At=uo[qt],Nt=us[qt],Vt=Es[qt],Gt=Uo[qt]}}}if(Pt=vt.edges.indexOf(At),vt.edges[Pt]===void 0)return null;switch(function(en,Xt){delete en.edges[Xt];for(var an=Xt+1;an<en.edges.length;an++)en.edges[an-1]=en.edges[an];en.edges.pop()}(vt,Pt),qt=vt.cval_real,At){case 0:qt&Ru?(_t=vt.topleft,xt=1):(_t=1,xt=vt.righttop);break;case 1:4&qt?(_t=1,xt=vt.rightbottom):(_t=vt.topleft,xt=1);break;case 2:4&qt?(_t=vt.topleft,xt=1):(_t=vt.bottomright,xt=0);break;case 3:1&qt?(_t=vt.bottomleft,xt=0):(_t=vt.topleft,xt=1);break;case 4:qt&Ru?(_t=vt.topright,xt=1):(_t=1,xt=vt.righttop);break;case 5:4&qt?(_t=1,xt=vt.rightbottom):(_t=vt.topright,xt=1);break;case 6:4&qt?(_t=vt.topright,xt=1):(_t=vt.bottomright,xt=0);break;case 7:1&qt?(_t=vt.bottomleft,xt=0):(_t=vt.topright,xt=1);break;case 8:4&qt?(_t=1,xt=vt.righttop):(_t=vt.bottomright,xt=0);break;case 9:1&qt?(_t=vt.bottomleft,xt=0):(_t=1,xt=vt.righttop);break;case 10:1&qt?(_t=1,xt=vt.righttop):(_t=0,xt=vt.leftbottom);break;case 11:qt&qa?(_t=0,xt=vt.lefttop):(_t=1,xt=vt.righttop);break;case 12:4&qt?(_t=1,xt=vt.rightbottom):(_t=vt.bottomright,xt=0);break;case 13:1&qt?(_t=vt.bottomleft,xt=0):(_t=1,xt=vt.rightbottom);break;case 14:1&qt?(_t=1,xt=vt.rightbottom):(_t=0,xt=vt.leftbottom);break;case 15:qt&qa?(_t=0,xt=vt.lefttop):(_t=1,xt=vt.rightbottom);break;case 16:4&qt?(_t=0,xt=vt.leftbottom):(_t=vt.bottomright,xt=0);break;case 17:qt&qa?(_t=0,xt=vt.lefttop):(_t=vt.bottomright,xt=0);break;case 18:1&qt?(_t=vt.bottomleft,xt=0):(_t=0,xt=vt.leftbottom);break;case 19:qt&qa?(_t=0,xt=vt.lefttop):(_t=vt.bottomleft,xt=0);break;case 20:qt&qa?(_t=0,xt=vt.leftbottom):(_t=vt.topleft,xt=1);break;case 21:qt&Ru?(_t=vt.topright,xt=1):(_t=0,xt=vt.leftbottom);break;case 22:qt&qa?(_t=0,xt=vt.lefttop):(_t=vt.topleft,xt=1);break;case 23:qt&Ru?(_t=vt.topright,xt=1):(_t=0,xt=vt.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(vt),null}return _t!==void 0&&xt!==void 0&&Nt!==void 0&&Vt!==void 0&&Gt!==void 0||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(vt),console.log(_t+" "+xt+" "+Nt+" "+Vt+" "+Gt)),{p:[_t,xt],x:Nt,y:Vt,o:Gt}}function Bp(vt){var _t=[],xt=[];vt.forEach(function(At){var Pt=Hd(Ot([At]));xt.push(Pt),_t.push({ring:At,area:Pt})}),xt.sort(function(At,Pt){return Pt-At});var Tt=[];return xt.forEach(function(At){for(var Pt=0;Pt<_t.length;Pt++)if(_t[Pt].area===At){Tt.push(_t[Pt].ring),_t.splice(Pt,1);break}}),Tt}function bv(vt){for(var _t=vt.map(function(Vt){return{lrCoordinates:Vt,grouped:!1}}),xt=[];!xv(_t);)for(var Tt=0;Tt<_t.length;Tt++)if(!_t[Tt].grouped){var At=[];At.push(_t[Tt].lrCoordinates),_t[Tt].grouped=!0;for(var Pt=Ot([_t[Tt].lrCoordinates]),Nt=Tt+1;Nt<_t.length;Nt++)_t[Nt].grouped||m1(Ot([_t[Nt].lrCoordinates]),Pt)&&(At.push(_t[Nt].lrCoordinates),_t[Nt].grouped=!0);xt.push(At)}return xt}function m1(vt,_t){for(var xt=xo(vt),Tt=0;Tt<xt.features.length;Tt++)if(!go(xt.features[Tt],_t))return!1;return!0}function xv(vt){for(var _t=0;_t<vt.length;_t++)if(vt[_t].grouped===!1)return!1;return!0}function y1(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.pivot,At=xt.mutate;if(!vt)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("angle is required");return _t===0||(Tt||(Tt=Ll(vt)),At!==!1&&At!==void 0||(vt=Ho(vt)),vn(vt,function(Pt){var Nt=Wd(Tt,Pt)+_t,Vt=Fd(Tt,Pt),Gt=Nn(Nf(Tt,Vt,Nt));Pt[0]=Gt[0],Pt[1]=Gt[1]})),vt}function v1(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.origin,At=xt.mutate;if(!vt)throw new Error("geojson required");if(typeof _t!="number"||_t===0)throw new Error("invalid factor");var Pt=Array.isArray(Tt)||typeof Tt=="object";return At!==!0&&(vt=Ho(vt)),vt.type!=="FeatureCollection"||Pt?_1(vt,_t,Tt):(rr(vt,function(Nt,Vt){vt.features[Vt]=_1(Nt,_t,Tt)}),vt)}function _1(vt,_t,xt){var Tt=or(vt)==="Point";return xt=function(At,Pt){if(Pt==null&&(Pt="centroid"),Array.isArray(Pt)||typeof Pt=="object")return cn(Pt);var Nt=At.bbox?At.bbox:fn(At),Vt=Nt[0],Gt=Nt[1],qt=Nt[2],en=Nt[3];switch(Pt){case"sw":case"southwest":case"westsouth":case"bottomleft":return kt([Vt,Gt]);case"se":case"southeast":case"eastsouth":case"bottomright":return kt([qt,Gt]);case"nw":case"northwest":case"westnorth":case"topleft":return kt([Vt,en]);case"ne":case"northeast":case"eastnorth":case"topright":return kt([qt,en]);case"center":return Ga(At);case void 0:case null:case"centroid":return Ll(At);default:throw new Error("invalid origin")}}(vt,xt),_t===1||Tt||vn(vt,function(At){var Pt=Fd(xt,At),Nt=Wd(xt,At),Vt=Nn(Nf(xt,Pt*_t,Nt));At[0]=Vt[0],At[1]=Vt[1],At.length===3&&(At[2]*=_t)}),vt}function Df(vt){var _t=vt[0],xt=vt[1];return[xt[0]-_t[0],xt[1]-_t[1]]}function Fp(vt,_t){return vt[0]*_t[1]-_t[0]*vt[1]}function Qm(vt,_t){return!function(xt,Tt){return Fp(Df(xt),Df(Tt))===0}(vt,_t)&&function(xt,Tt){var At,Pt,Nt=xt[0],Vt=Df(xt),Gt=Tt[0],qt=Df(Tt),en=Fp(Vt,qt);return function(Xt,an){return[Xt[0]+an[0],Xt[1]+an[1]]}(Nt,function(Xt,an){return[Xt*an[0],Xt*an[1]]}(Fp((Pt=Nt,[(At=Gt)[0]-Pt[0],At[1]-Pt[1]]),qt)/en,Vt))}(vt,_t)}function Bf(vt,_t,xt){var Tt=[],At=hn(_t,xt),Pt=Nn(vt),Nt=[];return Pt.forEach(function(Vt,Gt){if(Gt!==Pt.length-1){var qt=(an=Vt,_n=Pt[Gt+1],bn=At,En=Math.sqrt((an[0]-_n[0])*(an[0]-_n[0])+(an[1]-_n[1])*(an[1]-_n[1])),un=an[0]+bn*(_n[1]-an[1])/En,Vn=_n[0]+bn*(_n[1]-an[1])/En,nr=an[1]+bn*(an[0]-_n[0])/En,xn=_n[1]+bn*(an[0]-_n[0])/En,[[un,nr],[Vn,xn]]);if(Tt.push(qt),Gt>0){var en=Tt[Gt-1],Xt=Qm(qt,en);Xt!==!1&&(en[1]=Xt,qt[0]=Xt),Nt.push(en[0]),Gt===Pt.length-2&&(Nt.push(qt[0]),Nt.push(qt[1]))}Pt.length===2&&(Nt.push(qt[0]),Nt.push(qt[1]))}var an,_n,bn,En,un,Vn,nr,xn}),Dt(Nt,vt.properties)}function e0(vt,_t,xt){var Tt=_t[0]-vt[0],At=_t[1]-vt[1],Pt=xt[0]-_t[0];return function(Nt){return(Nt>0)-(Nt<0)||+Nt}(Tt*(xt[1]-_t[1])-Pt*At)}function n0(vt,_t){return _t.geometry.coordinates[0].every(function(xt){return go(kt(xt),vt)})}Bi[1]=Bi[169]=Gm,Bi[4]=Bi[166]=Wm,Bi[16]=Bi[154]=zg,Bi[64]=Bi[106]=qm,Bi[168]=Bi[2]=Ym,Bi[162]=Bi[8]=Xm,Bi[138]=Bi[32]=Zm,Bi[42]=Bi[128]=Km,Bi[5]=Bi[165]=function(vt){return[[0,0],[0,vt.leftbottom],[1,vt.rightbottom],[1,0]]},Bi[20]=Bi[150]=function(vt){return[[1,0],[vt.bottomright,0],[vt.topright,1],[1,1]]},Bi[80]=Bi[90]=function(vt){return[[1,1],[1,vt.righttop],[0,vt.lefttop],[0,1]]},Bi[65]=Bi[105]=function(vt){return[[vt.bottomleft,0],[0,0],[0,1],[vt.topleft,1]]},Bi[160]=Bi[10]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[0,vt.leftbottom],[0,vt.lefttop]]},Bi[130]=Bi[40]=function(vt){return[[vt.topleft,1],[vt.topright,1],[vt.bottomright,0],[vt.bottomleft,0]]},Bi[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Bi[101]=Bi[69]=function(vt){return[[1,vt.rightbottom],[1,0],[0,0],[0,1],[vt.topleft,1]]},Bi[149]=Bi[21]=function(vt){return[[vt.topright,1],[1,1],[1,0],[0,0],[0,vt.leftbottom]]},Bi[86]=Bi[84]=function(vt){return[[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[1,1]]},Bi[89]=Bi[81]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,1]]},Bi[96]=Bi[74]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Bi[24]=Bi[146]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[vt.topright,1]]},Bi[6]=Bi[164]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop]]},Bi[129]=Bi[41]=function(vt){return[[vt.topright,1],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topleft,1]]},Bi[66]=Bi[104]=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Bi[144]=Bi[26]=function(vt){return[[1,1],[1,vt.righttop],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Bi[36]=Bi[134]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[vt.topleft,1],[vt.topright,1]]},Bi[9]=Bi[161]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,vt.leftbottom]]},Bi[37]=Bi[133]=function(vt){return[[1,vt.rightbottom],[1,0],[0,0],[0,vt.leftbottom],[vt.topleft,1],[vt.topright,1]]},Bi[148]=Bi[22]=function(vt){return[[1,1],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Bi[82]=Bi[88]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1]]},Bi[73]=Bi[97]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,1],[vt.topleft,1]]},Bi[145]=Bi[25]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topright,1]]},Bi[70]=Bi[100]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Bi[34]=function(vt){return[Km(vt),Xm(vt)]},Bi[35]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]},Bi[136]=function(vt){return[Zm(vt),Ym(vt)]},Bi[153]=function(vt){return[zg(vt),Gm(vt)]},Bi[102]=function(vt){return[Wm(vt),qm(vt)]},Bi[155]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topright,1]]},Bi[103]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Bi[152]=function(vt){return[zg(vt),Ym(vt)]},Bi[156]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Bi[137]=function(vt){return[Zm(vt),Gm(vt)]},Bi[139]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topleft,1],[vt.topright,1]]},Bi[98]=function(vt){return[Xm(vt),qm(vt)]},Bi[99]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Bi[38]=function(vt){return[Wm(vt),Km(vt)]},Bi[39]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]};var Hg=function(){function vt(_t){this.id=vt.buildId(_t),this.coordinates=_t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return vt.buildId=function(_t){return _t.join(",")},vt.prototype.removeInnerEdge=function(_t){this.innerEdges=this.innerEdges.filter(function(xt){return xt.from.id!==_t.from.id})},vt.prototype.removeOuterEdge=function(_t){this.outerEdges=this.outerEdges.filter(function(xt){return xt.to.id!==_t.to.id})},vt.prototype.addOuterEdge=function(_t){this.outerEdges.push(_t),this.outerEdgesSorted=!1},vt.prototype.sortOuterEdges=function(){var _t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(xt,Tt){var At=xt.to,Pt=Tt.to;if(At.coordinates[0]-_t.coordinates[0]>=0&&Pt.coordinates[0]-_t.coordinates[0]<0)return 1;if(At.coordinates[0]-_t.coordinates[0]<0&&Pt.coordinates[0]-_t.coordinates[0]>=0)return-1;if(At.coordinates[0]-_t.coordinates[0]==0&&Pt.coordinates[0]-_t.coordinates[0]==0)return At.coordinates[1]-_t.coordinates[1]>=0||Pt.coordinates[1]-_t.coordinates[1]>=0?At.coordinates[1]-Pt.coordinates[1]:Pt.coordinates[1]-At.coordinates[1];var Nt=e0(_t.coordinates,At.coordinates,Pt.coordinates);return Nt<0?1:Nt>0?-1:Math.pow(At.coordinates[0]-_t.coordinates[0],2)+Math.pow(At.coordinates[1]-_t.coordinates[1],2)-(Math.pow(Pt.coordinates[0]-_t.coordinates[0],2)+Math.pow(Pt.coordinates[1]-_t.coordinates[1],2))}),this.outerEdgesSorted=!0)},vt.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},vt.prototype.getOuterEdge=function(_t){return this.sortOuterEdges(),this.outerEdges[_t]},vt.prototype.addInnerEdge=function(_t){this.innerEdges.push(_t)},vt}(),r0=function(){function vt(_t,xt){this.from=_t,this.to=xt,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return vt.prototype.getSymetric=function(){return this.symetric||(this.symetric=new vt(this.to,this.from),this.symetric.symetric=this),this.symetric},vt.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},vt.prototype.isEqual=function(_t){return this.from.id===_t.from.id&&this.to.id===_t.to.id},vt.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},vt.prototype.toLineString=function(){return Dt([this.from.coordinates,this.to.coordinates])},vt.prototype.compareTo=function(_t){return e0(_t.from.coordinates,_t.to.coordinates,this.to.coordinates)},vt}(),Bl=function(){function vt(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return vt.prototype.push=function(_t){this.edges.push(_t),this.polygon=this.envelope=void 0},vt.prototype.get=function(_t){return this.edges[_t]},Object.defineProperty(vt.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),vt.prototype.forEach=function(_t){this.edges.forEach(_t)},vt.prototype.map=function(_t){return this.edges.map(_t)},vt.prototype.some=function(_t){return this.edges.some(_t)},vt.prototype.isValid=function(){return!0},vt.prototype.isHole=function(){var _t=this,xt=this.edges.reduce(function(Nt,Vt,Gt){return Vt.from.coordinates[1]>_t.edges[Nt].from.coordinates[1]&&(Nt=Gt),Nt},0),Tt=(xt===0?this.length:xt)-1,At=(xt+1)%this.length,Pt=e0(this.edges[Tt].from.coordinates,this.edges[xt].from.coordinates,this.edges[At].from.coordinates);return Pt===0?this.edges[Tt].from.coordinates[0]>this.edges[At].from.coordinates[0]:Pt>0},vt.prototype.toMultiPoint=function(){return Jt(this.edges.map(function(_t){return _t.from.coordinates}))},vt.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var _t=this.edges.map(function(xt){return xt.from.coordinates});return _t.push(this.edges[0].from.coordinates),this.polygon=Ot([_t])},vt.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=kh(this.toPolygon())},vt.findEdgeRingContaining=function(_t,xt){var Tt,At,Pt=_t.getEnvelope();return xt.forEach(function(Nt){var Vt,Gt,qt,en,Xt,an,_n=Nt.getEnvelope();if(At&&(Tt=At.getEnvelope()),Gt=Pt,qt=(Vt=_n).geometry.coordinates[0].map(function(xn){return xn[0]}),en=Vt.geometry.coordinates[0].map(function(xn){return xn[1]}),Xt=Gt.geometry.coordinates[0].map(function(xn){return xn[0]}),an=Gt.geometry.coordinates[0].map(function(xn){return xn[1]}),(Math.max.apply(null,qt)!==Math.max.apply(null,Xt)||Math.max.apply(null,en)!==Math.max.apply(null,an)||Math.min.apply(null,qt)!==Math.min.apply(null,Xt)||Math.min.apply(null,en)!==Math.min.apply(null,an))&&n0(_n,Pt)){for(var bn=_t.map(function(xn){return xn.from.coordinates}),En=void 0,un=function(xn){Nt.some(function(zn){return jn=xn,qn=zn.from.coordinates,jn[0]===qn[0]&&jn[1]===qn[1];var jn,qn})||(En=xn)},Vn=0,nr=bn;Vn<nr.length;Vn++)un(nr[Vn]);En&&Nt.inside(kt(En))&&(At&&!n0(Tt,_n)||(At=Nt))}}),At},vt.prototype.inside=function(_t){return go(_t,this.toPolygon())},vt}(),wv=function(){function vt(){this.edges=[],this.nodes={}}return vt.fromGeoJson=function(_t){(function(Tt){if(!Tt)throw new Error("No geojson passed");if(Tt.type!=="FeatureCollection"&&Tt.type!=="GeometryCollection"&&Tt.type!=="MultiLineString"&&Tt.type!=="LineString"&&Tt.type!=="Feature")throw new Error("Invalid input type '"+Tt.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")})(_t);var xt=new vt;return Pr(_t,function(Tt){Bn(Tt,"LineString","Graph::fromGeoJson"),yr(Tt,function(At,Pt){if(At){var Nt=xt.getNode(At),Vt=xt.getNode(Pt);xt.addEdge(Nt,Vt)}return Pt})}),xt},vt.prototype.getNode=function(_t){var xt=Hg.buildId(_t),Tt=this.nodes[xt];return Tt||(Tt=this.nodes[xt]=new Hg(_t)),Tt},vt.prototype.addEdge=function(_t,xt){var Tt=new r0(_t,xt),At=Tt.getSymetric();this.edges.push(Tt),this.edges.push(At)},vt.prototype.deleteDangles=function(){var _t=this;Object.keys(this.nodes).map(function(xt){return _t.nodes[xt]}).forEach(function(xt){return _t._removeIfDangle(xt)})},vt.prototype._removeIfDangle=function(_t){var xt=this;if(_t.innerEdges.length<=1){var Tt=_t.getOuterEdges().map(function(At){return At.to});this.removeNode(_t),Tt.forEach(function(At){return xt._removeIfDangle(At)})}},vt.prototype.deleteCutEdges=function(){var _t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(xt){xt.label===xt.symetric.label&&(_t.removeEdge(xt.symetric),_t.removeEdge(xt))})},vt.prototype._computeNextCWEdges=function(_t){var xt=this;_t===void 0?Object.keys(this.nodes).forEach(function(Tt){return xt._computeNextCWEdges(xt.nodes[Tt])}):_t.getOuterEdges().forEach(function(Tt,At){_t.getOuterEdge((At===0?_t.getOuterEdges().length:At)-1).symetric.next=Tt})},vt.prototype._computeNextCCWEdges=function(_t,xt){for(var Tt,At,Pt=_t.getOuterEdges(),Nt=Pt.length-1;Nt>=0;--Nt){var Vt=Pt[Nt],Gt=Vt.symetric,qt=void 0,en=void 0;Vt.label===xt&&(qt=Vt),Gt.label===xt&&(en=Gt),qt&&en&&(en&&(At=en),qt&&(At&&(At.next=qt,At=void 0),Tt||(Tt=qt)))}At&&(At.next=Tt)},vt.prototype._findLabeledEdgeRings=function(){var _t=[],xt=0;return this.edges.forEach(function(Tt){if(!(Tt.label>=0)){_t.push(Tt);var At=Tt;do At.label=xt,At=At.next;while(!Tt.isEqual(At));xt++}}),_t},vt.prototype.getEdgeRings=function(){var _t=this;this._computeNextCWEdges(),this.edges.forEach(function(Tt){Tt.label=void 0}),this._findLabeledEdgeRings().forEach(function(Tt){_t._findIntersectionNodes(Tt).forEach(function(At){_t._computeNextCCWEdges(At,Tt.label)})});var xt=[];return this.edges.forEach(function(Tt){Tt.ring||xt.push(_t._findEdgeRing(Tt))}),xt},vt.prototype._findIntersectionNodes=function(_t){var xt=[],Tt=_t,At=function(){var Pt=0;Tt.from.getOuterEdges().forEach(function(Nt){Nt.label===_t.label&&++Pt}),Pt>1&&xt.push(Tt.from),Tt=Tt.next};do At();while(!_t.isEqual(Tt));return xt},vt.prototype._findEdgeRing=function(_t){var xt=_t,Tt=new Bl;do Tt.push(xt),xt.ring=Tt,xt=xt.next;while(!_t.isEqual(xt));return Tt},vt.prototype.removeNode=function(_t){var xt=this;_t.getOuterEdges().forEach(function(Tt){return xt.removeEdge(Tt)}),_t.innerEdges.forEach(function(Tt){return xt.removeEdge(Tt)}),delete this.nodes[_t.id]},vt.prototype.removeEdge=function(_t){this.edges=this.edges.filter(function(xt){return!xt.isEqual(_t)}),_t.deleteEdge()},vt}();function i0(vt,_t){var xt=!0;return Pr(vt,function(Tt){Pr(_t,function(At){if(xt===!1)return!1;xt=function(Pt,Nt){switch(Pt.type){case"Point":switch(Nt.type){case"Point":return Vt=Pt.coordinates,Gt=Nt.coordinates,!(Vt[0]===Gt[0]&&Vt[1]===Gt[1]);case"LineString":return!b1(Nt,Pt);case"Polygon":return!go(Pt,Nt)}break;case"LineString":switch(Nt.type){case"Point":return!b1(Pt,Nt);case"LineString":return!function(qt,en){return ul(qt,en).features.length>0}(Pt,Nt);case"Polygon":return!Vg(Nt,Pt)}break;case"Polygon":switch(Nt.type){case"Point":return!go(Nt,Pt);case"LineString":return!Vg(Pt,Nt);case"Polygon":return!function(qt,en){for(var Xt=0,an=qt.coordinates[0];Xt<an.length;Xt++)if(go(an[Xt],en))return!0;for(var _n=0,bn=en.coordinates[0];_n<bn.length;_n++)if(go(bn[_n],qt))return!0;return ul(Ec(qt),Ec(en)).features.length>0}(Nt,Pt)}}var Vt,Gt;return!1}(Tt.geometry,At.geometry)})}),xt}function b1(vt,_t){for(var xt=0;xt<vt.coordinates.length-1;xt++)if(Ev(vt.coordinates[xt],vt.coordinates[xt+1],_t.coordinates))return!0;return!1}function Vg(vt,_t){for(var xt=0,Tt=_t.coordinates;xt<Tt.length;xt++)if(go(Tt[xt],vt))return!0;return ul(_t,Ec(vt)).features.length>0}function Ev(vt,_t,xt){var Tt=xt[0]-vt[0],At=xt[1]-vt[1],Pt=_t[0]-vt[0],Nt=_t[1]-vt[1];return Tt*Nt-At*Pt==0&&(Math.abs(Pt)>=Math.abs(Nt)?Pt>0?vt[0]<=xt[0]&&xt[0]<=_t[0]:_t[0]<=xt[0]&&xt[0]<=vt[0]:Nt>0?vt[1]<=xt[1]&&xt[1]<=_t[1]:_t[1]<=xt[1]&&xt[1]<=vt[1])}function x1(vt,_t){return!(vt[0]>_t[0])&&!(vt[2]<_t[2])&&!(vt[1]>_t[1])&&!(vt[3]<_t[3])}function o0(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function Sv(vt,_t){return[(vt[0]+_t[0])/2,(vt[1]+_t[1])/2]}function w1(vt,_t){for(var xt=!1,Tt=!1,At=vt.coordinates.length,Pt=0;Pt<At&&!xt&&!Tt;){for(var Nt=0;Nt<_t.coordinates.length-1;Nt++){var Vt=!0;Nt!==0&&Nt!==_t.coordinates.length-2||(Vt=!1),S1(_t.coordinates[Nt],_t.coordinates[Nt+1],vt.coordinates[Pt],Vt)?xt=!0:Tt=!0}Pt++}return xt&&Tt}function E1(vt,_t){return ul(vt,Mf(_t)).features.length>0}function s0(vt,_t){for(var xt=!1,Tt=!1,At=vt.coordinates.length,Pt=0;Pt<At&&(!xt||!Tt);Pt++)go(kt(vt.coordinates[Pt]),_t)?xt=!0:Tt=!0;return Tt&&xt}function S1(vt,_t,xt,Tt){var At=xt[0]-vt[0],Pt=xt[1]-vt[1],Nt=_t[0]-vt[0],Vt=_t[1]-vt[1];return At*Vt-Pt*Nt==0&&(Tt?Math.abs(Nt)>=Math.abs(Vt)?Nt>0?vt[0]<=xt[0]&&xt[0]<=_t[0]:_t[0]<=xt[0]&&xt[0]<=vt[0]:Vt>0?vt[1]<=xt[1]&&xt[1]<=_t[1]:_t[1]<=xt[1]&&xt[1]<=vt[1]:Math.abs(Nt)>=Math.abs(Vt)?Nt>0?vt[0]<xt[0]&&xt[0]<_t[0]:_t[0]<xt[0]&&xt[0]<vt[0]:Vt>0?vt[1]<xt[1]&&xt[1]<_t[1]:_t[1]<xt[1]&&xt[1]<vt[1])}var lh=function(vt){this.precision=vt&&vt.precision?vt.precision:17,this.direction=!(!vt||!vt.direction)&&vt.direction,this.pseudoNode=!(!vt||!vt.pseudoNode)&&vt.pseudoNode,this.objectComparator=vt&&vt.objectComparator?vt.objectComparator:Cv};function yd(vt){return vt.coordinates.map(function(_t){return{type:vt.type.replace("Multi",""),coordinates:_t}})}function Mh(vt,_t){return vt.hasOwnProperty("coordinates")?vt.coordinates.length===_t.coordinates.length:vt.length===_t.length}function Cv(vt,_t){return fd(vt,_t,{strict:!0})}lh.prototype.compare=function(vt,_t){if(vt.type!==_t.type||!Mh(vt,_t))return!1;switch(vt.type){case"Point":return this.compareCoord(vt.coordinates,_t.coordinates);case"LineString":return this.compareLine(vt.coordinates,_t.coordinates,0,!1);case"Polygon":return this.comparePolygon(vt,_t);case"Feature":return this.compareFeature(vt,_t);default:if(vt.type.indexOf("Multi")===0){var xt=this,Tt=yd(vt),At=yd(_t);return Tt.every(function(Pt){return this.some(function(Nt){return xt.compare(Pt,Nt)})},At)}}return!1},lh.prototype.compareCoord=function(vt,_t){if(vt.length!==_t.length)return!1;for(var xt=0;xt<vt.length;xt++)if(vt[xt].toFixed(this.precision)!==_t[xt].toFixed(this.precision))return!1;return!0},lh.prototype.compareLine=function(vt,_t,xt,Tt){if(!Mh(vt,_t))return!1;var At=this.pseudoNode?vt:this.removePseudo(vt),Pt=this.pseudoNode?_t:this.removePseudo(_t);if(!Tt||this.compareCoord(At[0],Pt[0])||(Pt=this.fixStartIndex(Pt,At))){var Nt=this.compareCoord(At[xt],Pt[xt]);return this.direction||Nt?this.comparePath(At,Pt):!!this.compareCoord(At[xt],Pt[Pt.length-(1+xt)])&&this.comparePath(At.slice().reverse(),Pt)}},lh.prototype.fixStartIndex=function(vt,_t){for(var xt,Tt=-1,At=0;At<vt.length;At++)if(this.compareCoord(vt[At],_t[0])){Tt=At;break}return Tt>=0&&(xt=[].concat(vt.slice(Tt,vt.length),vt.slice(1,Tt+1))),xt},lh.prototype.comparePath=function(vt,_t){var xt=this;return vt.every(function(Tt,At){return xt.compareCoord(Tt,this[At])},_t)},lh.prototype.comparePolygon=function(vt,_t){if(this.compareLine(vt.coordinates[0],_t.coordinates[0],1,!0)){var xt=vt.coordinates.slice(1,vt.coordinates.length),Tt=_t.coordinates.slice(1,_t.coordinates.length),At=this;return xt.every(function(Pt){return this.some(function(Nt){return At.compareLine(Pt,Nt,1,!0)})},Tt)}return!1},lh.prototype.compareFeature=function(vt,_t){return!(vt.id!==_t.id||!this.objectComparator(vt.properties,_t.properties)||!this.compareBBox(vt,_t))&&this.compare(vt.geometry,_t.geometry)},lh.prototype.compareBBox=function(vt,_t){return!!(!vt.bbox&&!_t.bbox||vt.bbox&&_t.bbox&&this.compareCoord(vt.bbox,_t.bbox))},lh.prototype.removePseudo=function(vt){return vt};var a0=lh;function C1(vt,_t){var xt=!1;return Pr(vt,function(Tt){Pr(_t,function(At){if(xt===!0)return!0;xt=!i0(Tt.geometry,At.geometry)})}),xt}var Tv=Xo(function(vt){function _t(xt,Tt,At,Pt){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(xt,Tt,At,Pt)}_t.prototype.run=function(xt,Tt,At,Pt){this._init(xt,Tt,At,Pt);for(var Nt=0;Nt<this._datasetLength;Nt++)if(this._visited[Nt]!==1){this._visited[Nt]=1;var Vt=this._regionQuery(Nt);if(Vt.length<this.minPts)this.noise.push(Nt);else{var Gt=this.clusters.length;this.clusters.push([]),this._addToCluster(Nt,Gt),this._expandCluster(Gt,Vt)}}return this.clusters},_t.prototype._init=function(xt,Tt,At,Pt){if(xt){if(!(xt instanceof Array))throw Error("Dataset must be of type array, "+typeof xt+" given");this.dataset=xt,this.clusters=[],this.noise=[],this._datasetLength=xt.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}Tt&&(this.epsilon=Tt),At&&(this.minPts=At),Pt&&(this.distance=Pt)},_t.prototype._expandCluster=function(xt,Tt){for(var At=0;At<Tt.length;At++){var Pt=Tt[At];if(this._visited[Pt]!==1){this._visited[Pt]=1;var Nt=this._regionQuery(Pt);Nt.length>=this.minPts&&(Tt=this._mergeArrays(Tt,Nt))}this._assigned[Pt]!==1&&this._addToCluster(Pt,xt)}},_t.prototype._addToCluster=function(xt,Tt){this.clusters[Tt].push(xt),this._assigned[xt]=1},_t.prototype._regionQuery=function(xt){for(var Tt=[],At=0;At<this._datasetLength;At++)this.distance(this.dataset[xt],this.dataset[At])<this.epsilon&&Tt.push(At);return Tt},_t.prototype._mergeArrays=function(xt,Tt){for(var At=Tt.length,Pt=0;Pt<At;Pt++){var Nt=Tt[Pt];xt.indexOf(Nt)<0&&xt.push(Nt)}return xt},_t.prototype._euclideanDistance=function(xt,Tt){for(var At=0,Pt=Math.min(xt.length,Tt.length);Pt--;)At+=(xt[Pt]-Tt[Pt])*(xt[Pt]-Tt[Pt]);return Math.sqrt(At)},vt.exports&&(vt.exports=_t)}),kv=Xo(function(vt){function _t(xt,Tt,At){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(xt,Tt,At)}_t.prototype.init=function(xt,Tt,At){this.assignments=[],this.centroids=[],xt!==void 0&&(this.dataset=xt),Tt!==void 0&&(this.k=Tt),At!==void 0&&(this.distance=At)},_t.prototype.run=function(xt,Tt){this.init(xt,Tt);for(var At=this.dataset.length,Pt=0;Pt<this.k;Pt++)this.centroids[Pt]=this.randomCentroid();for(var Nt=!0;Nt;){Nt=this.assign();for(var Vt=0;Vt<this.k;Vt++){for(var Gt=new Array(an),qt=0,en=0;en<an;en++)Gt[en]=0;for(var Xt=0;Xt<At;Xt++){var an=this.dataset[Xt].length;if(Vt===this.assignments[Xt]){for(en=0;en<an;en++)Gt[en]+=this.dataset[Xt][en];qt++}}if(qt>0){for(en=0;en<an;en++)Gt[en]/=qt;this.centroids[Vt]=Gt}else this.centroids[Vt]=this.randomCentroid(),Nt=!0}}return this.getClusters()},_t.prototype.randomCentroid=function(){var xt,Tt,At=this.dataset.length-1;do Tt=Math.round(Math.random()*At),xt=this.dataset[Tt];while(this.centroids.indexOf(xt)>=0);return xt},_t.prototype.assign=function(){for(var xt,Tt=!1,At=this.dataset.length,Pt=0;Pt<At;Pt++)(xt=this.argmin(this.dataset[Pt],this.centroids,this.distance))!=this.assignments[Pt]&&(this.assignments[Pt]=xt,Tt=!0);return Tt},_t.prototype.getClusters=function(){for(var xt,Tt=new Array(this.k),At=0;At<this.assignments.length;At++)Tt[xt=this.assignments[At]]===void 0&&(Tt[xt]=[]),Tt[xt].push(At);return Tt},_t.prototype.argmin=function(xt,Tt,At){for(var Pt,Nt=Number.MAX_VALUE,Vt=0,Gt=Tt.length,qt=0;qt<Gt;qt++)(Pt=At(xt,Tt[qt]))<Nt&&(Nt=Pt,Vt=qt);return Vt},_t.prototype.distance=function(xt,Tt){for(var At=0,Pt=Math.min(xt.length,Tt.length);Pt--;){var Nt=xt[Pt]-Tt[Pt];At+=Nt*Nt}return Math.sqrt(At)},vt.exports&&(vt.exports=_t)}),T1=Xo(function(vt){function _t(xt,Tt,At){this._queue=[],this._priorities=[],this._sorting="desc",this._init(xt,Tt,At)}_t.prototype.insert=function(xt,Tt){for(var At=this._queue.length,Pt=At;Pt--;){var Nt=this._priorities[Pt];this._sorting==="desc"?Tt>Nt&&(At=Pt):Tt<Nt&&(At=Pt)}this._insertAt(xt,Tt,At)},_t.prototype.remove=function(xt){for(var Tt=this._queue.length;Tt--;)if(xt===this._queue[Tt]){this._queue.splice(Tt,1),this._priorities.splice(Tt,1);break}},_t.prototype.forEach=function(xt){this._queue.forEach(xt)},_t.prototype.getElements=function(){return this._queue},_t.prototype.getElementPriority=function(xt){return this._priorities[xt]},_t.prototype.getPriorities=function(){return this._priorities},_t.prototype.getElementsWithPriorities=function(){for(var xt=[],Tt=0,At=this._queue.length;Tt<At;Tt++)xt.push([this._queue[Tt],this._priorities[Tt]]);return xt},_t.prototype._init=function(xt,Tt,At){if(xt&&Tt){if(this._queue=[],this._priorities=[],xt.length!==Tt.length)throw new Error("Arrays must have the same length");for(var Pt=0;Pt<xt.length;Pt++)this.insert(xt[Pt],Tt[Pt])}At&&(this._sorting=At)},_t.prototype._insertAt=function(xt,Tt,At){this._queue.length===At?(this._queue.push(xt),this._priorities.push(Tt)):(this._queue.splice(At,0,xt),this._priorities.splice(At,0,Tt))},vt.exports&&(vt.exports=_t)}),Av=Xo(function(vt){if(vt.exports)var _t=T1;function xt(Tt,At,Pt,Nt){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Tt,At,Pt,Nt)}xt.prototype.run=function(Tt,At,Pt,Nt){this._init(Tt,At,Pt,Nt);for(var Vt=0,Gt=this.dataset.length;Vt<Gt;Vt++)if(this._processed[Vt]!==1){this._processed[Vt]=1,this.clusters.push([Vt]);var qt=this.clusters.length-1;this._orderedList.push(Vt);var en=new _t(null,null,"asc"),Xt=this._regionQuery(Vt);this._distanceToCore(Vt)!==void 0&&(this._updateQueue(Vt,Xt,en),this._expandCluster(qt,en))}return this.clusters},xt.prototype.getReachabilityPlot=function(){for(var Tt=[],At=0,Pt=this._orderedList.length;At<Pt;At++){var Nt=this._orderedList[At],Vt=this._reachability[Nt];Tt.push([Nt,Vt])}return Tt},xt.prototype._init=function(Tt,At,Pt,Nt){if(Tt){if(!(Tt instanceof Array))throw Error("Dataset must be of type array, "+typeof Tt+" given");this.dataset=Tt,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}At&&(this.epsilon=At),Pt&&(this.minPts=Pt),Nt&&(this.distance=Nt)},xt.prototype._updateQueue=function(Tt,At,Pt){var Nt=this;this._coreDistance=this._distanceToCore(Tt),At.forEach(function(Vt){if(Nt._processed[Vt]===void 0){var Gt=Nt.distance(Nt.dataset[Tt],Nt.dataset[Vt]),qt=Math.max(Nt._coreDistance,Gt);Nt._reachability[Vt]===void 0?(Nt._reachability[Vt]=qt,Pt.insert(Vt,qt)):qt<Nt._reachability[Vt]&&(Nt._reachability[Vt]=qt,Pt.remove(Vt),Pt.insert(Vt,qt))}})},xt.prototype._expandCluster=function(Tt,At){for(var Pt=At.getElements(),Nt=0,Vt=Pt.length;Nt<Vt;Nt++){var Gt=Pt[Nt];if(this._processed[Gt]===void 0){var qt=this._regionQuery(Gt);this._processed[Gt]=1,this.clusters[Tt].push(Gt),this._orderedList.push(Gt),this._distanceToCore(Gt)!==void 0&&(this._updateQueue(Gt,qt,At),this._expandCluster(Tt,At))}}},xt.prototype._distanceToCore=function(Tt){for(var At=this.epsilon,Pt=0;Pt<At;Pt++)if(this._regionQuery(Tt,Pt).length>=this.minPts)return Pt},xt.prototype._regionQuery=function(Tt,At){At=At||this.epsilon;for(var Pt=[],Nt=0,Vt=this.dataset.length;Nt<Vt;Nt++)this.distance(this.dataset[Tt],this.dataset[Nt])<At&&Pt.push(Nt);return Pt},xt.prototype._euclideanDistance=function(Tt,At){for(var Pt=0,Nt=Math.min(Tt.length,At.length);Nt--;)Pt+=(Tt[Nt]-At[Nt])*(Tt[Nt]-At[Nt]);return Math.sqrt(Pt)},vt.exports&&(vt.exports=xt)}),Lv=Xo(function(vt){vt.exports&&(vt.exports={DBSCAN:Tv,KMEANS:kv,OPTICS:Av,PriorityQueue:T1})}),l0=function(vt,_t,xt){for(var Tt=vt.length,At=0,Pt=0;Pt<Tt;Pt++){var Nt=(vt[Pt]||0)-(_t[Pt]||0);At+=Nt*Nt}return xt?Math.sqrt(At):At},Iv=l0,zp=function(vt,_t,xt){var Tt=Math.abs(vt-_t);return xt?Tt:Tt*Tt},c0=l0,k1=function(vt,_t){for(var xt={},Tt=[],At=_t<<2,Pt=vt.length,Nt=vt[0].length>0;Tt.length<_t&&At-- >0;){var Vt=vt[Math.floor(Math.random()*Pt)],Gt=Nt?Vt.join("_"):""+Vt;xt[Gt]||(xt[Gt]=!0,Tt.push(Vt))}if(Tt.length<_t)throw new Error("Error initializating clusters");return Tt},Pv=function(vt,_t){var xt=vt[0].length?Iv:zp,Tt=[],At=vt.length,Pt=vt[0].length>0,Nt=vt[Math.floor(Math.random()*At)];for(Pt&&Nt.join("_"),Tt.push(Nt);Tt.length<_t;){for(var Vt=[],Gt=Tt.length,qt=0,en=[],Xt=0;Xt<At;Xt++){for(var an=1/0,_n=0;_n<Gt;_n++){var bn=xt(vt[Xt],Tt[_n]);bn<=an&&(an=bn)}Vt[Xt]=an}for(var En=0;En<At;En++)qt+=Vt[En];for(var un=0;un<At;un++)en[un]={i:un,v:vt[un],pr:Vt[un]/qt,cs:0};en.sort(function(zn,jn){return zn.pr-jn.pr}),en[0].cs=en[0].pr;for(var Vn=1;Vn<At;Vn++)en[Vn].cs=en[Vn-1].cs+en[Vn].pr;for(var nr=Math.random(),xn=0;xn<At-1&&en[xn++].cs<nr;);Tt.push(en[xn-1].v)}return Tt};function A1(vt,_t,xt){xt=xt||[];for(var Tt=0;Tt<vt;Tt++)xt[Tt]=_t;return xt}var u0=function(vt,_t,xt,Tt){var At=[],Pt=[],Nt=[],Vt=[],Gt=!1,qt=Tt||1e4,en=vt.length,Xt=vt[0].length,an=Xt>0,_n=[];if(xt)At=xt=="kmrand"?k1(vt,_t):xt=="kmpp"?Pv(vt,_t):xt;else for(var bn={};At.length<_t;){var En=Math.floor(Math.random()*en);bn[En]||(bn[En]=!0,At.push(vt[En]))}do{A1(_t,0,_n);for(var un=0;un<en;un++){for(var Vn=1/0,nr=0,xn=0;xn<_t;xn++)(Vt=an?c0(vt[un],At[xn]):Math.abs(vt[un]-At[xn]))<=Vn&&(Vn=Vt,nr=xn);Nt[un]=nr,_n[nr]++}for(var zn=[],jn=(Pt=[],0);jn<_t;jn++)zn[jn]=an?A1(Xt,0,zn[jn]):0,Pt[jn]=At[jn];if(an){for(var qn=0;qn<_t;qn++)At[qn]=[];for(var Gn=0;Gn<en;Gn++)for(var Zr=zn[Nt[Gn]],Fr=vt[Gn],ei=0;ei<Xt;ei++)Zr[ei]+=Fr[ei];Gt=!0;for(var zr=0;zr<_t;zr++){for(var si=At[zr],Wr=zn[zr],Gr=Pt[zr],Vr=_n[zr],ni=0;ni<Xt;ni++)si[ni]=Wr[ni]/Vr||0;if(Gt){for(var Yr=0;Yr<Xt;Yr++)if(Gr[Yr]!=si[Yr]){Gt=!1;break}}}}else{for(var ai=0;ai<en;ai++)zn[Nt[ai]]+=vt[ai];for(var Cr=0;Cr<_t;Cr++)At[Cr]=zn[Cr]/_n[Cr]||0;Gt=!0;for(var Ki=0;Ki<_t;Ki++)if(Pt[Ki]!=At[Ki]){Gt=!1;break}}Gt=Gt||--qt<=0}while(!Gt);return{it:1e4-qt,k:_t,idxs:Nt,centroids:At}};function jg(vt,_t){return mn(Wd(vt[0],vt[1]))===mn(Wd(_t[0],_t[1]))}function h0(vt,_t){if(vt.geometry&&vt.geometry.type)return vt.geometry.type;if(vt.type)return vt.type;throw new Error("Invalid GeoJSON object for "+_t)}function L1(vt){for(var _t=vt,xt=[];_t.parent;)xt.unshift(_t),_t=_t.parent;return xt}var Ug={search:function(vt,_t,xt,Tt){vt.cleanDirty();var At=(Tt=Tt||{}).heuristic||Ug.heuristics.manhattan,Pt=Tt.closest||!1,Nt=new d0(function(En){return En.f}),Vt=_t;for(_t.h=At(_t,xt),Nt.push(_t);Nt.size()>0;){var Gt=Nt.pop();if(Gt===xt)return L1(Gt);Gt.closed=!0;for(var qt=vt.neighbors(Gt),en=0,Xt=qt.length;en<Xt;++en){var an=qt[en];if(!an.closed&&!an.isWall()){var _n=Gt.g+an.getCost(Gt),bn=an.visited;(!bn||_n<an.g)&&(an.visited=!0,an.parent=Gt,an.h=an.h||At(an,xt),an.g=_n,an.f=an.g+an.h,vt.markDirty(an),Pt&&(an.h<Vt.h||an.h===Vt.h&&an.g<Vt.g)&&(Vt=an),bn?Nt.rescoreElement(an):Nt.push(an))}}}return Pt?L1(Vt):[]},heuristics:{manhattan:function(vt,_t){return Math.abs(_t.x-vt.x)+Math.abs(_t.y-vt.y)},diagonal:function(vt,_t){var xt=Math.sqrt(2),Tt=Math.abs(_t.x-vt.x),At=Math.abs(_t.y-vt.y);return 1*(Tt+At)+(xt-2)*Math.min(Tt,At)}},cleanNode:function(vt){vt.f=0,vt.g=0,vt.h=0,vt.visited=!1,vt.closed=!1,vt.parent=null}};function vd(vt,_t){_t=_t||{},this.nodes=[],this.diagonal=!!_t.diagonal,this.grid=[];for(var xt=0;xt<vt.length;xt++){this.grid[xt]=[];for(var Tt=0,At=vt[xt];Tt<At.length;Tt++){var Pt=new Gg(xt,Tt,At[Tt]);this.grid[xt][Tt]=Pt,this.nodes.push(Pt)}}this.init()}function Gg(vt,_t,xt){this.x=vt,this.y=_t,this.weight=xt}function d0(vt){this.content=[],this.scoreFunction=vt}function Ov(vt,_t){for(var xt=0;xt<_t.features.length;xt++)if(go(vt,_t.features[xt]))return!0;return!1}function I1(vt){return function(){return vt}}function Mv(vt){return vt[0]}function P1(vt){return vt[1]}function Wg(){this._=null}function Hp(vt){vt.U=vt.C=vt.L=vt.R=vt.P=vt.N=null}function Vp(vt,_t){var xt=_t,Tt=_t.R,At=xt.U;At?At.L===xt?At.L=Tt:At.R=Tt:vt._=Tt,Tt.U=At,xt.U=Tt,xt.R=Tt.L,xt.R&&(xt.R.U=xt),Tt.L=xt}function jp(vt,_t){var xt=_t,Tt=_t.L,At=xt.U;At?At.L===xt?At.L=Tt:At.R=Tt:vt._=Tt,Tt.U=At,xt.U=Tt,xt.L=Tt.R,xt.L&&(xt.L.U=xt),Tt.R=xt}function O1(vt){for(;vt.L;)vt=vt.L;return vt}function Ff(vt,_t,xt,Tt){var At=[null,null],Pt=Zl.push(At)-1;return At.left=vt,At.right=_t,xt&&zf(At,vt,_t,xt),Tt&&zf(At,_t,vt,Tt),Vc[vt.index].halfedges.push(Pt),Vc[_t.index].halfedges.push(Pt),At}function ch(vt,_t,xt){var Tt=[_t,xt];return Tt.left=vt,Tt}function zf(vt,_t,xt,Tt){vt[0]||vt[1]?vt.left===xt?vt[1]=Tt:vt[0]=Tt:(vt[0]=Tt,vt.left=_t,vt.right=xt)}function qg(vt,_t,xt,Tt,At){var Pt,Nt=vt[0],Vt=vt[1],Gt=Nt[0],qt=Nt[1],en=0,Xt=1,an=Vt[0]-Gt,_n=Vt[1]-qt;if(Pt=_t-Gt,an||!(Pt>0)){if(Pt/=an,an<0){if(Pt<en)return;Pt<Xt&&(Xt=Pt)}else if(an>0){if(Pt>Xt)return;Pt>en&&(en=Pt)}if(Pt=Tt-Gt,an||!(Pt<0)){if(Pt/=an,an<0){if(Pt>Xt)return;Pt>en&&(en=Pt)}else if(an>0){if(Pt<en)return;Pt<Xt&&(Xt=Pt)}if(Pt=xt-qt,_n||!(Pt>0)){if(Pt/=_n,_n<0){if(Pt<en)return;Pt<Xt&&(Xt=Pt)}else if(_n>0){if(Pt>Xt)return;Pt>en&&(en=Pt)}if(Pt=At-qt,_n||!(Pt<0)){if(Pt/=_n,_n<0){if(Pt>Xt)return;Pt>en&&(en=Pt)}else if(_n>0){if(Pt<en)return;Pt<Xt&&(Xt=Pt)}return!(en>0||Xt<1)||(en>0&&(vt[0]=[Gt+en*an,qt+en*_n]),Xt<1&&(vt[1]=[Gt+Xt*an,qt+Xt*_n]),!0)}}}}}function $v(vt,_t,xt,Tt,At){var Pt=vt[1];if(Pt)return!0;var Nt,Vt,Gt=vt[0],qt=vt.left,en=vt.right,Xt=qt[0],an=qt[1],_n=en[0],bn=en[1],En=(Xt+_n)/2,un=(an+bn)/2;if(bn===an){if(En<_t||En>=Tt)return;if(Xt>_n){if(Gt){if(Gt[1]>=At)return}else Gt=[En,xt];Pt=[En,At]}else{if(Gt){if(Gt[1]<xt)return}else Gt=[En,At];Pt=[En,xt]}}else if(Vt=un-(Nt=(Xt-_n)/(bn-an))*En,Nt<-1||Nt>1)if(Xt>_n){if(Gt){if(Gt[1]>=At)return}else Gt=[(xt-Vt)/Nt,xt];Pt=[(At-Vt)/Nt,At]}else{if(Gt){if(Gt[1]<xt)return}else Gt=[(At-Vt)/Nt,At];Pt=[(xt-Vt)/Nt,xt]}else if(an<bn){if(Gt){if(Gt[0]>=Tt)return}else Gt=[_t,Nt*_t+Vt];Pt=[Tt,Nt*Tt+Vt]}else{if(Gt){if(Gt[0]<_t)return}else Gt=[Tt,Nt*Tt+Vt];Pt=[_t,Nt*_t+Vt]}return vt[0]=Gt,vt[1]=Pt,!0}function f0(vt,_t){var xt=vt.site,Tt=_t.left,At=_t.right;return xt===At&&(At=Tt,Tt=xt),At?Math.atan2(At[1]-Tt[1],At[0]-Tt[0]):(xt===Tt?(Tt=_t[1],At=_t[0]):(Tt=_t[0],At=_t[1]),Math.atan2(Tt[0]-At[0],At[1]-Tt[1]))}function M1(vt,_t){return _t[+(_t.left!==vt.site)]}function Rv(vt,_t){return _t[+(_t.left===vt.site)]}vd.prototype.init=function(){this.dirtyNodes=[];for(var vt=0;vt<this.nodes.length;vt++)Ug.cleanNode(this.nodes[vt])},vd.prototype.cleanDirty=function(){for(var vt=0;vt<this.dirtyNodes.length;vt++)Ug.cleanNode(this.dirtyNodes[vt]);this.dirtyNodes=[]},vd.prototype.markDirty=function(vt){this.dirtyNodes.push(vt)},vd.prototype.neighbors=function(vt){var _t=[],xt=vt.x,Tt=vt.y,At=this.grid;return At[xt-1]&&At[xt-1][Tt]&&_t.push(At[xt-1][Tt]),At[xt+1]&&At[xt+1][Tt]&&_t.push(At[xt+1][Tt]),At[xt]&&At[xt][Tt-1]&&_t.push(At[xt][Tt-1]),At[xt]&&At[xt][Tt+1]&&_t.push(At[xt][Tt+1]),this.diagonal&&(At[xt-1]&&At[xt-1][Tt-1]&&_t.push(At[xt-1][Tt-1]),At[xt+1]&&At[xt+1][Tt-1]&&_t.push(At[xt+1][Tt-1]),At[xt-1]&&At[xt-1][Tt+1]&&_t.push(At[xt-1][Tt+1]),At[xt+1]&&At[xt+1][Tt+1]&&_t.push(At[xt+1][Tt+1])),_t},vd.prototype.toString=function(){for(var vt,_t,xt,Tt,At=[],Pt=this.grid,Nt=0,Vt=Pt.length;Nt<Vt;Nt++){for(vt=[],xt=0,Tt=(_t=Pt[Nt]).length;xt<Tt;xt++)vt.push(_t[xt].weight);At.push(vt.join(" "))}return At.join(`
`)},Gg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Gg.prototype.getCost=function(vt){return vt&&vt.x!==this.x&&vt.y!==this.y?1.41421*this.weight:this.weight},Gg.prototype.isWall=function(){return this.weight===0},d0.prototype={push:function(vt){this.content.push(vt),this.sinkDown(this.content.length-1)},pop:function(){var vt=this.content[0],_t=this.content.pop();return this.content.length>0&&(this.content[0]=_t,this.bubbleUp(0)),vt},remove:function(vt){var _t=this.content.indexOf(vt),xt=this.content.pop();_t!==this.content.length-1&&(this.content[_t]=xt,this.scoreFunction(xt)<this.scoreFunction(vt)?this.sinkDown(_t):this.bubbleUp(_t))},size:function(){return this.content.length},rescoreElement:function(vt){this.sinkDown(this.content.indexOf(vt))},sinkDown:function(vt){for(var _t=this.content[vt];vt>0;){var xt=(vt+1>>1)-1,Tt=this.content[xt];if(!(this.scoreFunction(_t)<this.scoreFunction(Tt)))break;this.content[xt]=_t,this.content[vt]=Tt,vt=xt}},bubbleUp:function(vt){for(var _t=this.content.length,xt=this.content[vt],Tt=this.scoreFunction(xt);;){var At,Pt=vt+1<<1,Nt=Pt-1,Vt=null;if(Nt<_t){var Gt=this.content[Nt];(At=this.scoreFunction(Gt))<Tt&&(Vt=Nt)}if(Pt<_t){var qt=this.content[Pt];this.scoreFunction(qt)<(Vt===null?Tt:At)&&(Vt=Pt)}if(Vt===null)break;this.content[vt]=this.content[Vt],this.content[Vt]=xt,vt=Vt}}},Wg.prototype={constructor:Wg,insert:function(vt,_t){var xt,Tt,At;if(vt){if(_t.P=vt,_t.N=vt.N,vt.N&&(vt.N.P=_t),vt.N=_t,vt.R){for(vt=vt.R;vt.L;)vt=vt.L;vt.L=_t}else vt.R=_t;xt=vt}else this._?(vt=O1(this._),_t.P=null,_t.N=vt,vt.P=vt.L=_t,xt=vt):(_t.P=_t.N=null,this._=_t,xt=null);for(_t.L=_t.R=null,_t.U=xt,_t.C=!0,vt=_t;xt&&xt.C;)xt===(Tt=xt.U).L?(At=Tt.R)&&At.C?(xt.C=At.C=!1,Tt.C=!0,vt=Tt):(vt===xt.R&&(Vp(this,xt),xt=(vt=xt).U),xt.C=!1,Tt.C=!0,jp(this,Tt)):(At=Tt.L)&&At.C?(xt.C=At.C=!1,Tt.C=!0,vt=Tt):(vt===xt.L&&(jp(this,xt),xt=(vt=xt).U),xt.C=!1,Tt.C=!0,Vp(this,Tt)),xt=vt.U;this._.C=!1},remove:function(vt){vt.N&&(vt.N.P=vt.P),vt.P&&(vt.P.N=vt.N),vt.N=vt.P=null;var _t,xt,Tt,At=vt.U,Pt=vt.L,Nt=vt.R;if(xt=Pt?Nt?O1(Nt):Pt:Nt,At?At.L===vt?At.L=xt:At.R=xt:this._=xt,Pt&&Nt?(Tt=xt.C,xt.C=vt.C,xt.L=Pt,Pt.U=xt,xt!==Nt?(At=xt.U,xt.U=vt.U,vt=xt.R,At.L=vt,xt.R=Nt,Nt.U=xt):(xt.U=At,At=xt,vt=xt.R)):(Tt=vt.C,vt=xt),vt&&(vt.U=At),!Tt)if(vt&&vt.C)vt.C=!1;else{do{if(vt===this._)break;if(vt===At.L){if((_t=At.R).C&&(_t.C=!1,At.C=!0,Vp(this,At),_t=At.R),_t.L&&_t.L.C||_t.R&&_t.R.C){_t.R&&_t.R.C||(_t.L.C=!1,_t.C=!0,jp(this,_t),_t=At.R),_t.C=At.C,At.C=_t.R.C=!1,Vp(this,At),vt=this._;break}}else if((_t=At.L).C&&(_t.C=!1,At.C=!0,jp(this,At),_t=At.L),_t.L&&_t.L.C||_t.R&&_t.R.C){_t.L&&_t.L.C||(_t.R.C=!1,_t.C=!0,Vp(this,_t),_t=At.L),_t.C=At.C,At.C=_t.L.C=!1,jp(this,At),vt=this._;break}_t.C=!0,vt=At,At=At.U}while(!vt.C);vt&&(vt.C=!1)}}};var p0,$1=[];function Nv(){Hp(this),this.x=this.y=this.arc=this.site=this.cy=null}function qd(vt){var _t=vt.P,xt=vt.N;if(_t&&xt){var Tt=_t.site,At=vt.site,Pt=xt.site;if(Tt!==Pt){var Nt=At[0],Vt=At[1],Gt=Tt[0]-Nt,qt=Tt[1]-Vt,en=Pt[0]-Nt,Xt=Pt[1]-Vt,an=2*(Gt*Xt-qt*en);if(!(an>=-zv)){var _n=Gt*Gt+qt*qt,bn=en*en+Xt*Xt,En=(Xt*_n-qt*bn)/an,un=(Gt*bn-en*_n)/an,Vn=$1.pop()||new Nv;Vn.arc=vt,Vn.site=At,Vn.x=En+Nt,Vn.y=(Vn.cy=un+Vt)+Math.sqrt(En*En+un*un),vt.circle=Vn;for(var nr=null,xn=Vf._;xn;)if(Vn.y<xn.y||Vn.y===xn.y&&Vn.x<=xn.x){if(!xn.L){nr=xn.P;break}xn=xn.L}else{if(!xn.R){nr=xn;break}xn=xn.R}Vf.insert(nr,Vn),nr||(p0=Vn)}}}}function _d(vt){var _t=vt.circle;_t&&(_t.P||(p0=_t.N),Vf.remove(_t),$1.push(_t),Hp(_t),vt.circle=null)}var R1=[];function N1(){Hp(this),this.edge=this.site=this.circle=null}function D1(vt){var _t=R1.pop()||new N1;return _t.site=vt,_t}function g0(vt){_d(vt),Hf.remove(vt),R1.push(vt),Hp(vt)}function Dv(vt){var _t=vt.circle,xt=_t.x,Tt=_t.cy,At=[xt,Tt],Pt=vt.P,Nt=vt.N,Vt=[vt];g0(vt);for(var Gt=Pt;Gt.circle&&Math.abs(xt-Gt.circle.x)<ta&&Math.abs(Tt-Gt.circle.cy)<ta;)Pt=Gt.P,Vt.unshift(Gt),g0(Gt),Gt=Pt;Vt.unshift(Gt),_d(Gt);for(var qt=Nt;qt.circle&&Math.abs(xt-qt.circle.x)<ta&&Math.abs(Tt-qt.circle.cy)<ta;)Nt=qt.N,Vt.push(qt),g0(qt),qt=Nt;Vt.push(qt),_d(qt);var en,Xt=Vt.length;for(en=1;en<Xt;++en)qt=Vt[en],Gt=Vt[en-1],zf(qt.edge,Gt.site,qt.site,At);Gt=Vt[0],(qt=Vt[Xt-1]).edge=Ff(Gt.site,qt.site,null,At),qd(Gt),qd(qt)}function Bv(vt){for(var _t,xt,Tt,At,Pt=vt[0],Nt=vt[1],Vt=Hf._;Vt;)if((Tt=B1(Vt,Nt)-Pt)>ta)Vt=Vt.L;else{if(!((At=Pt-Fv(Vt,Nt))>ta)){Tt>-ta?(_t=Vt.P,xt=Vt):At>-ta?(_t=Vt,xt=Vt.N):_t=xt=Vt;break}if(!Vt.R){_t=Vt;break}Vt=Vt.R}(function(jn){Vc[jn.index]={site:jn,halfedges:[]}})(vt);var Gt=D1(vt);if(Hf.insert(_t,Gt),_t||xt){if(_t===xt)return _d(_t),xt=D1(_t.site),Hf.insert(Gt,xt),Gt.edge=xt.edge=Ff(_t.site,Gt.site),qd(_t),void qd(xt);if(xt){_d(_t),_d(xt);var qt=_t.site,en=qt[0],Xt=qt[1],an=vt[0]-en,_n=vt[1]-Xt,bn=xt.site,En=bn[0]-en,un=bn[1]-Xt,Vn=2*(an*un-_n*En),nr=an*an+_n*_n,xn=En*En+un*un,zn=[(un*nr-_n*xn)/Vn+en,(an*xn-En*nr)/Vn+Xt];zf(xt.edge,qt,bn,zn),Gt.edge=Ff(qt,vt,null,zn),xt.edge=Ff(vt,bn,null,zn),qd(_t),qd(xt)}else Gt.edge=Ff(_t.site,Gt.site)}}function B1(vt,_t){var xt=vt.site,Tt=xt[0],At=xt[1],Pt=At-_t;if(!Pt)return Tt;var Nt=vt.P;if(!Nt)return-1/0;var Vt=(xt=Nt.site)[0],Gt=xt[1],qt=Gt-_t;if(!qt)return Vt;var en=Vt-Tt,Xt=1/Pt-1/qt,an=en/qt;return Xt?(-an+Math.sqrt(an*an-2*Xt*(en*en/(-2*qt)-Gt+qt/2+At-Pt/2)))/Xt+Tt:(Tt+Vt)/2}function Fv(vt,_t){var xt=vt.N;if(xt)return B1(xt,_t);var Tt=vt.site;return Tt[1]===_t?Tt[0]:1/0}var Hf,Vc,Vf,Zl,ta=1e-6,zv=1e-12;function F1(vt,_t){return _t[1]-vt[1]||_t[0]-vt[0]}function m0(vt,_t){var xt,Tt,At,Pt=vt.sort(F1).pop();for(Zl=[],Vc=new Array(vt.length),Hf=new Wg,Vf=new Wg;;)if(At=p0,Pt&&(!At||Pt[1]<At.y||Pt[1]===At.y&&Pt[0]<At.x))Pt[0]===xt&&Pt[1]===Tt||(Bv(Pt),xt=Pt[0],Tt=Pt[1]),Pt=vt.pop();else{if(!At)break;Dv(At.arc)}if(function(){for(var en,Xt,an,_n,bn=0,En=Vc.length;bn<En;++bn)if((en=Vc[bn])&&(_n=(Xt=en.halfedges).length)){var un=new Array(_n),Vn=new Array(_n);for(an=0;an<_n;++an)un[an]=an,Vn[an]=f0(en,Zl[Xt[an]]);for(un.sort(function(nr,xn){return Vn[xn]-Vn[nr]}),an=0;an<_n;++an)Vn[an]=Xt[un[an]];for(an=0;an<_n;++an)Xt[an]=Vn[an]}}(),_t){var Nt=+_t[0][0],Vt=+_t[0][1],Gt=+_t[1][0],qt=+_t[1][1];(function(en,Xt,an,_n){for(var bn,En=Zl.length;En--;)$v(bn=Zl[En],en,Xt,an,_n)&&qg(bn,en,Xt,an,_n)&&(Math.abs(bn[0][0]-bn[1][0])>ta||Math.abs(bn[0][1]-bn[1][1])>ta)||delete Zl[En]})(Nt,Vt,Gt,qt),function(en,Xt,an,_n){var bn,En,un,Vn,nr,xn,zn,jn,qn,Gn,Zr,Fr,ei=Vc.length,zr=!0;for(bn=0;bn<ei;++bn)if(En=Vc[bn]){for(un=En.site,Vn=(nr=En.halfedges).length;Vn--;)Zl[nr[Vn]]||nr.splice(Vn,1);for(Vn=0,xn=nr.length;Vn<xn;)Zr=(Gn=Rv(En,Zl[nr[Vn]]))[0],Fr=Gn[1],jn=(zn=M1(En,Zl[nr[++Vn%xn]]))[0],qn=zn[1],(Math.abs(Zr-jn)>ta||Math.abs(Fr-qn)>ta)&&(nr.splice(Vn,0,Zl.push(ch(un,Gn,Math.abs(Zr-en)<ta&&_n-Fr>ta?[en,Math.abs(jn-en)<ta?qn:_n]:Math.abs(Fr-_n)<ta&&an-Zr>ta?[Math.abs(qn-_n)<ta?jn:an,_n]:Math.abs(Zr-an)<ta&&Fr-Xt>ta?[an,Math.abs(jn-an)<ta?qn:Xt]:Math.abs(Fr-Xt)<ta&&Zr-en>ta?[Math.abs(qn-Xt)<ta?jn:en,Xt]:null))-1),++xn);xn&&(zr=!1)}if(zr){var si,Wr,Gr,Vr=1/0;for(bn=0,zr=null;bn<ei;++bn)(En=Vc[bn])&&(Gr=(si=(un=En.site)[0]-en)*si+(Wr=un[1]-Xt)*Wr)<Vr&&(Vr=Gr,zr=En);if(zr){var ni=[en,Xt],Yr=[en,_n],ai=[an,_n],Cr=[an,Xt];zr.halfedges.push(Zl.push(ch(un=zr.site,ni,Yr))-1,Zl.push(ch(un,Yr,ai))-1,Zl.push(ch(un,ai,Cr))-1,Zl.push(ch(un,Cr,ni))-1)}}for(bn=0;bn<ei;++bn)(En=Vc[bn])&&(En.halfedges.length||delete Vc[bn])}(Nt,Vt,Gt,qt)}this.edges=Zl,this.cells=Vc,Hf=Vf=Zl=Vc=null}function Hv(vt){return(vt=vt.slice()).push(vt[0]),Ot([vt])}function z1(vt,_t,xt,Tt){var At=(Tt=Tt||{}).steps||64,Pt=Tt.units||"kilometers",Nt=Tt.angle||0,Vt=Tt.pivot||vt,Gt=Tt.properties||vt.properties||{};if(!vt)throw new Error("center is required");if(!_t)throw new Error("xSemiAxis is required");if(!xt)throw new Error("ySemiAxis is required");if(!pn(Tt))throw new Error("options must be an object");if(!Ln(At))throw new Error("steps must be a number");if(!Ln(Nt))throw new Error("angle must be a number");var qt=cn(vt);if(Pt==="degrees")var en=Tn(Nt);else _t=Nf(vt,_t,90,{units:Pt}),xt=Nf(vt,xt,0,{units:Pt}),_t=cn(_t)[0]-qt[0],xt=cn(xt)[1]-qt[1];for(var Xt=[],an=0;an<At;an+=1){var _n=-360*an/At,bn=_t*xt/Math.sqrt(Math.pow(xt,2)+Math.pow(_t,2)*Math.pow(H1(_n),2)),En=_t*xt/Math.sqrt(Math.pow(_t,2)+Math.pow(xt,2)/Math.pow(H1(_n),2));if(_n<-90&&_n>=-270&&(bn=-bn),_n<-180&&_n>=-360&&(En=-En),Pt==="degrees"){var un=bn*Math.cos(en)+En*Math.sin(en),Vn=En*Math.cos(en)-bn*Math.sin(en);bn=un,En=Vn}Xt.push([bn+qt[0],En+qt[1]])}return Xt.push(Xt[0]),Pt==="degrees"?Ot([Xt],Gt):y1(Ot([Xt],Gt),Nt,{pivot:Vt})}function H1(vt){var _t=vt*Math.PI/180;return Math.tan(_t)}function y0(vt,_t){_t===void 0&&(_t={});var xt=0,Tt=0,At=0;return gr(vt,function(Pt,Nt,Vt){var Gt=_t.weight?Vt==null?void 0:Vt[_t.weight]:void 0;if(!Ln(Gt=Gt==null?1:Gt))throw new Error("weight value must be a number for feature index "+Nt);(Gt=Number(Gt))>0&&vn(Pt,function(qt){xt+=qt[0]*Gt,Tt+=qt[1]*Gt,At+=Gt})}),kt([xt/At,Tt/At],_t.properties,_t)}function V1(vt,_t,xt,Tt,At){var Pt=Tt.tolerance||.001,Nt=0,Vt=0,Gt=0,qt=0;if(rr(xt,function(an){var _n,bn=(_n=an.properties)===null||_n===void 0?void 0:_n.weight,En=bn==null?1:bn;if(!Ln(En=Number(En)))throw new Error("weight value must be a number");if(En>0){qt+=1;var un=En*mo(an,vt);un===0&&(un=1);var Vn=En/un;Nt+=an.geometry.coordinates[0]*Vn,Vt+=an.geometry.coordinates[1]*Vn,Gt+=Vn}}),qt<1)throw new Error("no features to measure");var en=Nt/Gt,Xt=Vt/Gt;return qt===1||At===0||Math.abs(en-_t[0])<Pt&&Math.abs(Xt-_t[1])<Pt?kt([en,Xt],{medianCandidates:Tt.medianCandidates}):(Tt.medianCandidates.push([en,Xt]),V1([en,Xt],vt,xt,Tt,At-1))}function j1(vt,_t){return{x:vt[0]-_t[0],y:vt[1]-_t[1]}}function Vv(vt,_t){var xt=0,Tt=0;vn(vt,function(At,Pt,Nt,Vt,Gt){Gt>xt&&(xt=Gt,Tt=Pt,_t.push([]));var qt=Pt-Tt,en=vt.coordinates[Gt][qt+1],Xt=At[0],an=At[1],_n=en[0],bn=en[1];_t[Gt].push([.75*Xt+.25*_n,.75*an+.25*bn]),_t[Gt].push([.25*Xt+.75*_n,.25*an+.75*bn])},!0),_t.forEach(function(At){At.push(At[0])})}function jv(vt,_t){var xt=0,Tt=0,At=0;vn(vt,function(Pt,Nt,Vt,Gt,qt){Gt>At&&(At=Gt,Tt=Nt,_t.push([[]])),qt>xt&&(xt=qt,Tt=Nt,_t[Gt].push([]));var en=Nt-Tt,Xt=vt.coordinates[Gt][qt][en+1],an=Pt[0],_n=Pt[1],bn=Xt[0],En=Xt[1];_t[Gt][qt].push([.75*an+.25*bn,.75*_n+.25*En]),_t[Gt][qt].push([.25*an+.75*bn,.25*_n+.75*En])},!0),_t.forEach(function(Pt){Pt.forEach(function(Nt){Nt.push(Nt[0])})})}function Uv(vt,_t,xt){xt===void 0&&(xt=2);var Tt=cn(vt),At=cn(_t),Pt=Tt[0]-At[0],Nt=Tt[1]-At[1];return xt===1?Math.abs(Pt)+Math.abs(Nt):Math.pow(Math.pow(Pt,xt)+Math.pow(Nt,xt),1/xt)}function U1(vt,_t){var xt=(_t=_t||{}).threshold||1e4,Tt=_t.p||2,At=_t.binary||!1,Pt=_t.alpha||-1,Nt=_t.standardization||!1,Vt=[];rr(vt,function(_n){Vt.push(Ll(_n))});for(var Gt=[],qt=0;qt<Vt.length;qt++)Gt[qt]=[];for(qt=0;qt<Vt.length;qt++)for(var en=qt;en<Vt.length;en++){qt===en&&(Gt[qt][en]=0);var Xt=Uv(Vt[qt],Vt[en],Tt);Gt[qt][en]=Xt,Gt[en][qt]=Xt}for(qt=0;qt<Vt.length;qt++)for(en=0;en<Vt.length;en++)(Xt=Gt[qt][en])!==0&&(Gt[qt][en]=At?Xt<=xt?1:0:Xt<=xt?Math.pow(Xt,Pt):0);if(Nt)for(qt=0;qt<Vt.length;qt++){var an=Gt[qt].reduce(function(_n,bn){return _n+bn},0);for(en=0;en<Vt.length;en++)Gt[qt][en]=Gt[qt][en]/an}return Gt}function G1(vt){for(var _t=0,xt=0,Tt=vt;xt<Tt.length;xt++)_t+=Tt[xt];return _t/vt.length}function W1(vt,_t){return _t===void 0&&(_t={}),Y1(vt,"mercator",_t)}function q1(vt,_t){return _t===void 0&&(_t={}),Y1(vt,"wgs84",_t)}function Y1(vt,_t,xt){xt===void 0&&(xt={});var Tt=(xt=xt||{}).mutate;if(!vt)throw new Error("geojson is required");return Array.isArray(vt)&&Ln(vt[0])?vt=_t==="mercator"?X1(vt):Z1(vt):(Tt!==!0&&(vt=Ho(vt)),vn(vt,function(At){var Pt=_t==="mercator"?X1(At):Z1(At);At[0]=Pt[0],At[1]=Pt[1]})),vt}function X1(vt){var _t=Math.PI/180,xt=6378137,Tt=20037508342789244e-9,At=[xt*(Math.abs(vt[0])<=180?vt[0]:vt[0]-360*function(Pt){return Pt<0?-1:Pt>0?1:0}(vt[0]))*_t,xt*Math.log(Math.tan(.25*Math.PI+.5*vt[1]*_t))];return At[0]>Tt&&(At[0]=Tt),At[0]<-Tt&&(At[0]=-Tt),At[1]>Tt&&(At[1]=Tt),At[1]<-Tt&&(At[1]=-Tt),At}function Z1(vt){var _t=180/Math.PI,xt=6378137;return[vt[0]*_t/xt,(.5*Math.PI-2*Math.atan(Math.exp(-vt[1]/xt)))*_t]}m0.prototype={constructor:m0,polygons:function(){var vt=this.edges;return this.cells.map(function(_t){var xt=_t.halfedges.map(function(Tt){return M1(_t,vt[Tt])});return xt.data=_t.site.data,xt})},triangles:function(){var vt=[],_t=this.edges;return this.cells.forEach(function(xt,Tt){if(Pt=(At=xt.halfedges).length)for(var At,Pt,Nt,Vt,Gt,qt,en=xt.site,Xt=-1,an=_t[At[Pt-1]],_n=an.left===en?an.right:an.left;++Xt<Pt;)Nt=_n,_n=(an=_t[At[Xt]]).left===en?an.right:an.left,Nt&&_n&&Tt<Nt.index&&Tt<_n.index&&(Gt=Nt,qt=_n,((Vt=en)[0]-qt[0])*(Gt[1]-Vt[1])-(Vt[0]-Gt[0])*(qt[1]-Vt[1])<0)&&vt.push([en.data,Nt.data,_n.data])}),vt},links:function(){return this.edges.filter(function(vt){return vt.right}).map(function(vt){return{source:vt.left.data,target:vt.right.data}})},find:function(vt,_t,xt){for(var Tt,At,Pt=this,Nt=Pt._found||0,Vt=Pt.cells.length;!(At=Pt.cells[Nt]);)if(++Nt>=Vt)return null;var Gt=vt-At.site[0],qt=_t-At.site[1],en=Gt*Gt+qt*qt;do At=Pt.cells[Tt=Nt],Nt=null,At.halfedges.forEach(function(Xt){var an=Pt.edges[Xt],_n=an.left;if(_n!==At.site&&_n||(_n=an.right)){var bn=vt-_n[0],En=_t-_n[1],un=bn*bn+En*En;un<en&&(en=un,Nt=_n.index)}});while(Nt!==null);return Pt._found=Tt,xt==null||en<=xt*xt?At.site:null}};var Gv=Object.freeze({__proto__:null,toMercator:W1,toWgs84:q1}),Wv=function(){for(var vt=0,_t=0,xt=arguments.length;_t<xt;_t++)vt+=arguments[_t].length;var Tt=Array(vt),At=0;for(_t=0;_t<xt;_t++)for(var Pt=arguments[_t],Nt=0,Vt=Pt.length;Nt<Vt;Nt++,At++)Tt[At]=Pt[Nt];return Tt};function Up(vt){return Array.isArray(vt)?ey(vt):vt&&vt.bbox?ey(vt.bbox):[360*Q1(),180*Q1()]}function K1(vt,_t){_t===void 0&&(_t={}),vt==null&&(vt=1);for(var xt=[],Tt=0;Tt<vt;Tt++)xt.push(kt(Up(_t.bbox)));return Ft(xt)}function v0(vt,_t){_t===void 0&&(_t={}),vt==null&&(vt=1),Ln(_t.num_vertices)&&_t.num_vertices!==void 0||(_t.num_vertices=10),Ln(_t.max_radial_length)&&_t.max_radial_length!==void 0||(_t.max_radial_length=10);for(var xt=[],Tt=function(Pt){var Nt,Vt=[],Gt=Wv(Array(_t.num_vertices+1)).map(Math.random);Gt.forEach(function(qt,en,Xt){Xt[en]=en>0?qt+Xt[en-1]:qt}),Gt.forEach(function(qt){qt=2*qt*Math.PI/Gt[Gt.length-1];var en=Math.random();Vt.push([en*(_t.max_radial_length||10)*Math.sin(qt),en*(_t.max_radial_length||10)*Math.cos(qt)])}),Vt[Vt.length-1]=Vt[0],Vt=Vt.map((Nt=Up(_t.bbox),function(qt){return[qt[0]+Nt[0],qt[1]+Nt[1]]})),xt.push(Ot([Vt]))},At=0;At<vt;At++)Tt();return Ft(xt)}function J1(vt,_t){if(_t===void 0&&(_t={}),!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.bbox,Tt=_t.num_vertices,At=_t.max_length,Pt=_t.max_rotation;vt==null&&(vt=1),(!Ln(Tt)||Tt===void 0||Tt<2)&&(Tt=10),Ln(At)&&At!==void 0||(At=1e-4),Ln(Pt)&&Pt!==void 0||(Pt=Math.PI/8);for(var Nt=[],Vt=0;Vt<vt;Vt++){for(var Gt=[Up(xt)],qt=0;qt<Tt-1;qt++){var en=(qt===0?2*Math.random()*Math.PI:Math.tan((Gt[qt][1]-Gt[qt-1][1])/(Gt[qt][0]-Gt[qt-1][0])))+(Math.random()-.5)*Pt*2,Xt=Math.random()*At;Gt.push([Gt[qt][0]+Xt*Math.cos(en),Gt[qt][1]+Xt*Math.sin(en)])}Nt.push(Dt(Gt))}return Ft(Nt)}function Q1(){return Math.random()-.5}function ey(vt){return[Math.random()*(vt[2]-vt[0])+vt[0],Math.random()*(vt[3]-vt[1])+vt[1]]}var qv=Object.freeze({__proto__:null,randomPosition:Up,randomPoint:K1,randomPolygon:v0,randomLineString:J1});function ty(vt,_t){if(!vt)throw new Error("geojson is required");if(vt.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(_t==null)throw new Error("filter is required");var xt=[];return rr(vt,function(Tt){Xg(Tt.properties,_t)&&xt.push(Tt)}),Ft(xt)}function _0(vt,_t,xt){if(!vt)throw new Error("geojson is required");if(vt.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(_t==null)throw new Error("property is required");for(var Tt=b0(vt,_t),At=Object.keys(Tt),Pt=0;Pt<At.length;Pt++){for(var Nt=At[Pt],Vt=Tt[Nt],Gt=[],qt=0;qt<Vt.length;qt++)Gt.push(vt.features[Vt[qt]]);xt(Ft(Gt),Nt,Pt)}}function Yg(vt,_t,xt,Tt){var At=Tt;return _0(vt,_t,function(Pt,Nt,Vt){At=Vt===0&&Tt===void 0?Pt:xt(At,Pt,Nt,Vt)}),At}function b0(vt,_t){var xt={};return rr(vt,function(Tt,At){var Pt=Tt.properties||{};if(Object.prototype.hasOwnProperty.call(Pt,String(_t))){var Nt=Pt[_t];Object.prototype.hasOwnProperty.call(xt,Nt)?xt[Nt].push(At):xt[Nt]=[At]}}),xt}function Xg(vt,_t){if(vt===void 0)return!1;var xt=typeof _t;if(xt==="number"||xt==="string")return Object.prototype.hasOwnProperty.call(vt,_t);if(Array.isArray(_t)){for(var Tt=0;Tt<_t.length;Tt++)if(!Xg(vt,_t[Tt]))return!1;return!0}return x0(vt,_t)}function x0(vt,_t){for(var xt=Object.keys(_t),Tt=0;Tt<xt.length;Tt++){var At=xt[Tt];if(vt[At]!==_t[At])return!1}return!0}function ny(vt,_t){if(!_t)return{};if(!_t.length)return{};for(var xt={},Tt=0;Tt<_t.length;Tt++){var At=_t[Tt];Object.prototype.hasOwnProperty.call(vt,At)&&(xt[At]=vt[At])}return xt}var Yv=Object.freeze({__proto__:null,getCluster:ty,clusterEach:_0,clusterReduce:Yg,createBins:b0,applyFilter:Xg,propertiesContainsFilter:x0,filterProperties:ny}),bd=function(vt,_t){this.next=null,this.key=vt,this.data=_t,this.left=null,this.right=null};/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function w0(vt,_t){return vt>_t?1:vt<_t?-1:0}function $h(vt,_t,xt){for(var Tt=new bd(null,null),At=Tt,Pt=Tt;;){var Nt=xt(vt,_t.key);if(Nt<0){if(_t.left===null)break;if(xt(vt,_t.left.key)<0){var Vt=_t.left;if(_t.left=Vt.right,Vt.right=_t,(_t=Vt).left===null)break}Pt.left=_t,Pt=_t,_t=_t.left}else{if(!(Nt>0)||_t.right===null||xt(vt,_t.right.key)>0&&(Vt=_t.right,_t.right=Vt.left,Vt.left=_t,(_t=Vt).right===null))break;At.right=_t,At=_t,_t=_t.right}}return At.right=_t.left,Pt.left=_t.right,_t.left=Tt.right,_t.right=Tt.left,_t}function E0(vt,_t,xt,Tt){var At=new bd(vt,_t);if(xt===null)return At.left=At.right=null,At;var Pt=Tt(vt,(xt=$h(vt,xt,Tt)).key);return Pt<0?(At.left=xt.left,At.right=xt,xt.left=null):Pt>=0&&(At.right=xt.right,At.left=xt,xt.right=null),At}function S0(vt,_t,xt){var Tt=null,At=null;if(_t){var Pt=xt((_t=$h(vt,_t,xt)).key,vt);Pt===0?(Tt=_t.left,At=_t.right):Pt<0?(At=_t.right,_t.right=null,Tt=_t):(Tt=_t.left,_t.left=null,At=_t)}return{left:Tt,right:At}}function C0(vt,_t,xt,Tt,At){if(vt){Tt(_t+(xt?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+At(vt)+`
`);var Pt=_t+(xt?"    ":"\u2502   ");vt.left&&C0(vt.left,Pt,!1,Tt,At),vt.right&&C0(vt.right,Pt,!0,Tt,At)}}var T0=function(){function vt(_t){_t===void 0&&(_t=w0),this._root=null,this._size=0,this._comparator=_t}return vt.prototype.insert=function(_t,xt){return this._size++,this._root=E0(_t,xt,this._root,this._comparator)},vt.prototype.add=function(_t,xt){var Tt=new bd(_t,xt);this._root===null&&(Tt.left=Tt.right=null,this._size++,this._root=Tt);var At=this._comparator,Pt=$h(_t,this._root,At),Nt=At(_t,Pt.key);return Nt===0?this._root=Pt:(Nt<0?(Tt.left=Pt.left,Tt.right=Pt,Pt.left=null):Nt>0&&(Tt.right=Pt.right,Tt.left=Pt,Pt.right=null),this._size++,this._root=Tt),this._root},vt.prototype.remove=function(_t){this._root=this._remove(_t,this._root,this._comparator)},vt.prototype._remove=function(_t,xt,Tt){var At;return xt===null?null:Tt(_t,(xt=$h(_t,xt,Tt)).key)===0?(xt.left===null?At=xt.right:(At=$h(_t,xt.left,Tt)).right=xt.right,this._size--,At):xt},vt.prototype.pop=function(){var _t=this._root;if(_t){for(;_t.left;)_t=_t.left;return this._root=$h(_t.key,this._root,this._comparator),this._root=this._remove(_t.key,this._root,this._comparator),{key:_t.key,data:_t.data}}return null},vt.prototype.findStatic=function(_t){for(var xt=this._root,Tt=this._comparator;xt;){var At=Tt(_t,xt.key);if(At===0)return xt;xt=At<0?xt.left:xt.right}return null},vt.prototype.find=function(_t){return this._root&&(this._root=$h(_t,this._root,this._comparator),this._comparator(_t,this._root.key)!==0)?null:this._root},vt.prototype.contains=function(_t){for(var xt=this._root,Tt=this._comparator;xt;){var At=Tt(_t,xt.key);if(At===0)return!0;xt=At<0?xt.left:xt.right}return!1},vt.prototype.forEach=function(_t,xt){for(var Tt=this._root,At=[],Pt=!1;!Pt;)Tt!==null?(At.push(Tt),Tt=Tt.left):At.length!==0?(Tt=At.pop(),_t.call(xt,Tt),Tt=Tt.right):Pt=!0;return this},vt.prototype.range=function(_t,xt,Tt,At){for(var Pt=[],Nt=this._comparator,Vt=this._root;Pt.length!==0||Vt;)if(Vt)Pt.push(Vt),Vt=Vt.left;else{if(Nt((Vt=Pt.pop()).key,xt)>0)break;if(Nt(Vt.key,_t)>=0&&Tt.call(At,Vt))return this;Vt=Vt.right}return this},vt.prototype.keys=function(){var _t=[];return this.forEach(function(xt){var Tt=xt.key;return _t.push(Tt)}),_t},vt.prototype.values=function(){var _t=[];return this.forEach(function(xt){var Tt=xt.data;return _t.push(Tt)}),_t},vt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},vt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},vt.prototype.minNode=function(_t){if(_t===void 0&&(_t=this._root),_t)for(;_t.left;)_t=_t.left;return _t},vt.prototype.maxNode=function(_t){if(_t===void 0&&(_t=this._root),_t)for(;_t.right;)_t=_t.right;return _t},vt.prototype.at=function(_t){for(var xt=this._root,Tt=!1,At=0,Pt=[];!Tt;)if(xt)Pt.push(xt),xt=xt.left;else if(Pt.length>0){if(xt=Pt.pop(),At===_t)return xt;At++,xt=xt.right}else Tt=!0;return null},vt.prototype.next=function(_t){var xt=this._root,Tt=null;if(_t.right){for(Tt=_t.right;Tt.left;)Tt=Tt.left;return Tt}for(var At=this._comparator;xt;){var Pt=At(_t.key,xt.key);if(Pt===0)break;Pt<0?(Tt=xt,xt=xt.left):xt=xt.right}return Tt},vt.prototype.prev=function(_t){var xt=this._root,Tt=null;if(_t.left!==null){for(Tt=_t.left;Tt.right;)Tt=Tt.right;return Tt}for(var At=this._comparator;xt;){var Pt=At(_t.key,xt.key);if(Pt===0)break;Pt<0?xt=xt.left:(Tt=xt,xt=xt.right)}return Tt},vt.prototype.clear=function(){return this._root=null,this._size=0,this},vt.prototype.toList=function(){return function(_t){for(var xt=_t,Tt=[],At=!1,Pt=new bd(null,null),Nt=Pt;!At;)xt?(Tt.push(xt),xt=xt.left):Tt.length>0?xt=(xt=Nt=Nt.next=Tt.pop()).right:At=!0;return Nt.next=null,Pt.next}(this._root)},vt.prototype.load=function(_t,xt,Tt){xt===void 0&&(xt=[]),Tt===void 0&&(Tt=!1);var At=_t.length,Pt=this._comparator;if(Tt&&A0(_t,xt,0,At-1,Pt),this._root===null)this._root=k0(_t,xt,0,At),this._size=At;else{var Nt=function(Vt,Gt,qt){for(var en=new bd(null,null),Xt=en,an=Vt,_n=Gt;an!==null&&_n!==null;)qt(an.key,_n.key)<0?(Xt.next=an,an=an.next):(Xt.next=_n,_n=_n.next),Xt=Xt.next;return an!==null?Xt.next=an:_n!==null&&(Xt.next=_n),en.next}(this.toList(),function(Vt,Gt){for(var qt=new bd(null,null),en=qt,Xt=0;Xt<Vt.length;Xt++)en=en.next=new bd(Vt[Xt],Gt[Xt]);return en.next=null,qt.next}(_t,xt),Pt);At=this._size+At,this._root=Zg({head:Nt},0,At)}return this},vt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(vt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(vt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),vt.prototype.toString=function(_t){_t===void 0&&(_t=function(Tt){return String(Tt.key)});var xt=[];return C0(this._root,"",!0,function(Tt){return xt.push(Tt)},_t),xt.join("")},vt.prototype.update=function(_t,xt,Tt){var At=this._comparator,Pt=S0(_t,this._root,At),Nt=Pt.left,Vt=Pt.right;At(_t,xt)<0?Vt=E0(xt,Tt,Vt,At):Nt=E0(xt,Tt,Nt,At),this._root=function(Gt,qt,en){return qt===null?Gt:(Gt===null||((qt=$h(Gt.key,qt,en)).left=Gt),qt)}(Nt,Vt,At)},vt.prototype.split=function(_t){return S0(_t,this._root,this._comparator)},vt}();function k0(vt,_t,xt,Tt){var At=Tt-xt;if(At>0){var Pt=xt+Math.floor(At/2),Nt=vt[Pt],Vt=_t[Pt],Gt=new bd(Nt,Vt);return Gt.left=k0(vt,_t,xt,Pt),Gt.right=k0(vt,_t,Pt+1,Tt),Gt}return null}function Zg(vt,_t,xt){var Tt=xt-_t;if(Tt>0){var At=_t+Math.floor(Tt/2),Pt=Zg(vt,_t,At),Nt=vt.head;return Nt.left=Pt,vt.head=vt.head.next,Nt.right=Zg(vt,At+1,xt),Nt}return null}function A0(vt,_t,xt,Tt,At){if(!(xt>=Tt)){for(var Pt=vt[xt+Tt>>1],Nt=xt-1,Vt=Tt+1;;){do Nt++;while(At(vt[Nt],Pt)<0);do Vt--;while(At(vt[Vt],Pt)>0);if(Nt>=Vt)break;var Gt=vt[Nt];vt[Nt]=vt[Vt],vt[Vt]=Gt,Gt=_t[Nt],_t[Nt]=_t[Vt],_t[Vt]=Gt}A0(vt,_t,xt,Vt,At),A0(vt,_t,Vt+1,Tt,At)}}function lc(vt,_t){if(!(vt instanceof _t))throw new TypeError("Cannot call a class as a function")}function L0(vt,_t){for(var xt=0;xt<_t.length;xt++){var Tt=_t[xt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(vt,Tt.key,Tt)}}function Kl(vt,_t,xt){return _t&&L0(vt.prototype,_t),xt&&L0(vt,xt),vt}var Gp=function(vt,_t){return vt.ll.x<=_t.x&&_t.x<=vt.ur.x&&vt.ll.y<=_t.y&&_t.y<=vt.ur.y},Kg=function(vt,_t){if(_t.ur.x<vt.ll.x||vt.ur.x<_t.ll.x||_t.ur.y<vt.ll.y||vt.ur.y<_t.ll.y)return null;var xt=vt.ll.x<_t.ll.x?_t.ll.x:vt.ll.x,Tt=vt.ur.x<_t.ur.x?vt.ur.x:_t.ur.x;return{ll:{x:xt,y:vt.ll.y<_t.ll.y?_t.ll.y:vt.ll.y},ur:{x:Tt,y:vt.ur.y<_t.ur.y?vt.ur.y:_t.ur.y}}},Rh=Number.EPSILON;Rh===void 0&&(Rh=Math.pow(2,-52));var Jg=Rh*Rh,I0=function(vt,_t){if(-Rh<vt&&vt<Rh&&-Rh<_t&&_t<Rh)return 0;var xt=vt-_t;return xt*xt<Jg*vt*_t?0:vt<_t?-1:1},ry=function(){function vt(){lc(this,vt),this.reset()}return Kl(vt,[{key:"reset",value:function(){this.xRounder=new iy,this.yRounder=new iy}},{key:"round",value:function(_t,xt){return{x:this.xRounder.round(_t),y:this.yRounder.round(xt)}}}]),vt}(),iy=function(){function vt(){lc(this,vt),this.tree=new T0,this.round(0)}return Kl(vt,[{key:"round",value:function(_t){var xt=this.tree.add(_t),Tt=this.tree.prev(xt);if(Tt!==null&&I0(xt.key,Tt.key)===0)return this.tree.remove(_t),Tt.key;var At=this.tree.next(xt);return At!==null&&I0(xt.key,At.key)===0?(this.tree.remove(_t),At.key):_t}}]),vt}(),Wp=new ry,qp=function(vt,_t){return vt.x*_t.y-vt.y*_t.x},oy=function(vt,_t){return vt.x*_t.x+vt.y*_t.y},sy=function(vt,_t,xt){var Tt={x:_t.x-vt.x,y:_t.y-vt.y},At={x:xt.x-vt.x,y:xt.y-vt.y},Pt=qp(Tt,At);return I0(Pt,0)},Qg=function(vt){return Math.sqrt(oy(vt,vt))},ay=function(vt,_t,xt){var Tt={x:_t.x-vt.x,y:_t.y-vt.y},At={x:xt.x-vt.x,y:xt.y-vt.y};return oy(At,Tt)/Qg(At)/Qg(Tt)},ly=function(vt,_t,xt){return _t.y===0?null:{x:vt.x+_t.x/_t.y*(xt-vt.y),y:xt}},cy=function(vt,_t,xt){return _t.x===0?null:{x:xt,y:vt.y+_t.y/_t.x*(xt-vt.x)}},uh=function(){function vt(_t,xt){lc(this,vt),_t.events===void 0?_t.events=[this]:_t.events.push(this),this.point=_t,this.isLeft=xt}return Kl(vt,null,[{key:"compare",value:function(_t,xt){var Tt=vt.comparePoints(_t.point,xt.point);return Tt!==0?Tt:(_t.point!==xt.point&&_t.link(xt),_t.isLeft!==xt.isLeft?_t.isLeft?1:-1:em.compare(_t.segment,xt.segment))}},{key:"comparePoints",value:function(_t,xt){return _t.x<xt.x?-1:_t.x>xt.x?1:_t.y<xt.y?-1:_t.y>xt.y?1:0}}]),Kl(vt,[{key:"link",value:function(_t){if(_t.point===this.point)throw new Error("Tried to link already linked events");for(var xt=_t.point.events,Tt=0,At=xt.length;Tt<At;Tt++){var Pt=xt[Tt];this.point.events.push(Pt),Pt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var _t=this.point.events.length,xt=0;xt<_t;xt++){var Tt=this.point.events[xt];if(Tt.segment.consumedBy===void 0)for(var At=xt+1;At<_t;At++){var Pt=this.point.events[At];Pt.consumedBy===void 0&&Tt.otherSE.point.events===Pt.otherSE.point.events&&Tt.segment.consume(Pt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var _t=[],xt=0,Tt=this.point.events.length;xt<Tt;xt++){var At=this.point.events[xt];At!==this&&!At.segment.ringOut&&At.segment.isInResult()&&_t.push(At)}return _t}},{key:"getLeftmostComparator",value:function(_t){var xt=this,Tt=new Map,At=function(Pt){var Nt,Vt,Gt,qt,en,Xt=Pt.otherSE;Tt.set(Pt,{sine:(Nt=xt.point,Vt=_t.point,Gt=Xt.point,qt={x:Vt.x-Nt.x,y:Vt.y-Nt.y},en={x:Gt.x-Nt.x,y:Gt.y-Nt.y},qp(en,qt)/Qg(en)/Qg(qt)),cosine:ay(xt.point,_t.point,Xt.point)})};return function(Pt,Nt){Tt.has(Pt)||At(Pt),Tt.has(Nt)||At(Nt);var Vt=Tt.get(Pt),Gt=Vt.sine,qt=Vt.cosine,en=Tt.get(Nt),Xt=en.sine,an=en.cosine;return Gt>=0&&Xt>=0?qt<an?1:qt>an?-1:0:Gt<0&&Xt<0?qt<an?-1:qt>an?1:0:Xt<Gt?-1:Xt>Gt?1:0}}}]),vt}(),Xv=0,em=function(){function vt(_t,xt,Tt,At){lc(this,vt),this.id=++Xv,this.leftSE=_t,_t.segment=this,_t.otherSE=xt,this.rightSE=xt,xt.segment=this,xt.otherSE=_t,this.rings=Tt,this.windings=At}return Kl(vt,null,[{key:"compare",value:function(_t,xt){var Tt=_t.leftSE.point.x,At=xt.leftSE.point.x,Pt=_t.rightSE.point.x,Nt=xt.rightSE.point.x;if(Nt<Tt)return 1;if(Pt<At)return-1;var Vt=_t.leftSE.point.y,Gt=xt.leftSE.point.y,qt=_t.rightSE.point.y,en=xt.rightSE.point.y;if(Tt<At){if(Gt<Vt&&Gt<qt)return 1;if(Gt>Vt&&Gt>qt)return-1;var Xt=_t.comparePoint(xt.leftSE.point);if(Xt<0)return 1;if(Xt>0)return-1;var an=xt.comparePoint(_t.rightSE.point);return an!==0?an:-1}if(Tt>At){if(Vt<Gt&&Vt<en)return-1;if(Vt>Gt&&Vt>en)return 1;var _n=xt.comparePoint(_t.leftSE.point);if(_n!==0)return _n;var bn=_t.comparePoint(xt.rightSE.point);return bn<0?1:bn>0?-1:1}if(Vt<Gt)return-1;if(Vt>Gt)return 1;if(Pt<Nt){var En=xt.comparePoint(_t.rightSE.point);if(En!==0)return En}if(Pt>Nt){var un=_t.comparePoint(xt.rightSE.point);if(un<0)return 1;if(un>0)return-1}if(Pt!==Nt){var Vn=qt-Vt,nr=Pt-Tt,xn=en-Gt,zn=Nt-At;if(Vn>nr&&xn<zn)return 1;if(Vn<nr&&xn>zn)return-1}return Pt>Nt?1:Pt<Nt||qt<en?-1:qt>en?1:_t.id<xt.id?-1:_t.id>xt.id?1:0}}]),Kl(vt,[{key:"replaceRightSE",value:function(_t){this.rightSE=_t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var _t=this.leftSE.point.y,xt=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:_t<xt?_t:xt},ur:{x:this.rightSE.point.x,y:_t>xt?_t:xt}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(_t){return _t.x===this.leftSE.point.x&&_t.y===this.leftSE.point.y||_t.x===this.rightSE.point.x&&_t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(_t){if(this.isAnEndpoint(_t))return 0;var xt=this.leftSE.point,Tt=this.rightSE.point,At=this.vector();if(xt.x===Tt.x)return _t.x===xt.x?0:_t.x<xt.x?1:-1;var Pt=(_t.y-xt.y)/At.y,Nt=xt.x+Pt*At.x;if(_t.x===Nt)return 0;var Vt=(_t.x-xt.x)/At.x,Gt=xt.y+Vt*At.y;return _t.y===Gt?0:_t.y<Gt?-1:1}},{key:"getIntersection",value:function(_t){var xt=this.bbox(),Tt=_t.bbox(),At=Kg(xt,Tt);if(At===null)return null;var Pt=this.leftSE.point,Nt=this.rightSE.point,Vt=_t.leftSE.point,Gt=_t.rightSE.point,qt=Gp(xt,Vt)&&this.comparePoint(Vt)===0,en=Gp(Tt,Pt)&&_t.comparePoint(Pt)===0,Xt=Gp(xt,Gt)&&this.comparePoint(Gt)===0,an=Gp(Tt,Nt)&&_t.comparePoint(Nt)===0;if(en&&qt)return an&&!Xt?Nt:!an&&Xt?Gt:null;if(en)return Xt&&Pt.x===Gt.x&&Pt.y===Gt.y?null:Pt;if(qt)return an&&Nt.x===Vt.x&&Nt.y===Vt.y?null:Vt;if(an&&Xt)return null;if(an)return Nt;if(Xt)return Gt;var _n=function(bn,En,un,Vn){if(En.x===0)return cy(un,Vn,bn.x);if(Vn.x===0)return cy(bn,En,un.x);if(En.y===0)return ly(un,Vn,bn.y);if(Vn.y===0)return ly(bn,En,un.y);var nr=qp(En,Vn);if(nr==0)return null;var xn={x:un.x-bn.x,y:un.y-bn.y},zn=qp(xn,En)/nr,jn=qp(xn,Vn)/nr;return{x:(bn.x+jn*En.x+(un.x+zn*Vn.x))/2,y:(bn.y+jn*En.y+(un.y+zn*Vn.y))/2}}(Pt,this.vector(),Vt,_t.vector());return _n===null?null:Gp(At,_n)?Wp.round(_n.x,_n.y):null}},{key:"split",value:function(_t){var xt=[],Tt=_t.events!==void 0,At=new uh(_t,!0),Pt=new uh(_t,!1),Nt=this.rightSE;this.replaceRightSE(Pt),xt.push(Pt),xt.push(At);var Vt=new vt(At,Nt,this.rings.slice(),this.windings.slice());return uh.comparePoints(Vt.leftSE.point,Vt.rightSE.point)>0&&Vt.swapEvents(),uh.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Tt&&(At.checkForConsuming(),Pt.checkForConsuming()),xt}},{key:"swapEvents",value:function(){var _t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=_t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var xt=0,Tt=this.windings.length;xt<Tt;xt++)this.windings[xt]*=-1}},{key:"consume",value:function(_t){for(var xt=this,Tt=_t;xt.consumedBy;)xt=xt.consumedBy;for(;Tt.consumedBy;)Tt=Tt.consumedBy;var At=vt.compare(xt,Tt);if(At!==0){if(At>0){var Pt=xt;xt=Tt,Tt=Pt}if(xt.prev===Tt){var Nt=xt;xt=Tt,Tt=Nt}for(var Vt=0,Gt=Tt.rings.length;Vt<Gt;Vt++){var qt=Tt.rings[Vt],en=Tt.windings[Vt],Xt=xt.rings.indexOf(qt);Xt===-1?(xt.rings.push(qt),xt.windings.push(en)):xt.windings[Xt]+=en}Tt.rings=null,Tt.windings=null,Tt.consumedBy=xt,Tt.leftSE.consumedBy=xt.leftSE,Tt.rightSE.consumedBy=xt.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var _t=this.prev.consumedBy||this.prev;this._beforeState=_t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var _t=this.beforeState();this._afterState={rings:_t.rings.slice(0),windings:_t.windings.slice(0),multiPolys:[]};for(var xt=this._afterState.rings,Tt=this._afterState.windings,At=this._afterState.multiPolys,Pt=0,Nt=this.rings.length;Pt<Nt;Pt++){var Vt=this.rings[Pt],Gt=this.windings[Pt],qt=xt.indexOf(Vt);qt===-1?(xt.push(Vt),Tt.push(Gt)):Tt[qt]+=Gt}for(var en=[],Xt=[],an=0,_n=xt.length;an<_n;an++)if(Tt[an]!==0){var bn=xt[an],En=bn.poly;if(Xt.indexOf(En)===-1)if(bn.isExterior)en.push(En);else{Xt.indexOf(En)===-1&&Xt.push(En);var un=en.indexOf(bn.poly);un!==-1&&en.splice(un,1)}}for(var Vn=0,nr=en.length;Vn<nr;Vn++){var xn=en[Vn].multiPoly;At.indexOf(xn)===-1&&At.push(xn)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var _t=this.beforeState().multiPolys,xt=this.afterState().multiPolys;switch(Nu.type){case"union":var Tt=_t.length===0,At=xt.length===0;this._isInResult=Tt!==At;break;case"intersection":var Pt,Nt;_t.length<xt.length?(Pt=_t.length,Nt=xt.length):(Pt=xt.length,Nt=_t.length),this._isInResult=Nt===Nu.numMultiPolys&&Pt<Nt;break;case"xor":var Vt=Math.abs(_t.length-xt.length);this._isInResult=Vt%2==1;break;case"difference":var Gt=function(qt){return qt.length===1&&qt[0].isSubject};this._isInResult=Gt(_t)!==Gt(xt);break;default:throw new Error("Unrecognized operation type found ".concat(Nu.type))}return this._isInResult}}],[{key:"fromRing",value:function(_t,xt,Tt){var At,Pt,Nt,Vt=uh.comparePoints(_t,xt);if(Vt<0)At=_t,Pt=xt,Nt=1;else{if(!(Vt>0))throw new Error("Tried to create degenerate segment at [".concat(_t.x,", ").concat(_t.y,"]"));At=xt,Pt=_t,Nt=-1}return new vt(new uh(At,!0),new uh(Pt,!1),[Tt],[Nt])}}]),vt}(),uy=function(){function vt(_t,xt,Tt){if(lc(this,vt),!Array.isArray(_t)||_t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=xt,this.isExterior=Tt,this.segments=[],typeof _t[0][0]!="number"||typeof _t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var At=Wp.round(_t[0][0],_t[0][1]);this.bbox={ll:{x:At.x,y:At.y},ur:{x:At.x,y:At.y}};for(var Pt=At,Nt=1,Vt=_t.length;Nt<Vt;Nt++){if(typeof _t[Nt][0]!="number"||typeof _t[Nt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Gt=Wp.round(_t[Nt][0],_t[Nt][1]);Gt.x===Pt.x&&Gt.y===Pt.y||(this.segments.push(em.fromRing(Pt,Gt,this)),Gt.x<this.bbox.ll.x&&(this.bbox.ll.x=Gt.x),Gt.y<this.bbox.ll.y&&(this.bbox.ll.y=Gt.y),Gt.x>this.bbox.ur.x&&(this.bbox.ur.x=Gt.x),Gt.y>this.bbox.ur.y&&(this.bbox.ur.y=Gt.y),Pt=Gt)}At.x===Pt.x&&At.y===Pt.y||this.segments.push(em.fromRing(Pt,At,this))}return Kl(vt,[{key:"getSweepEvents",value:function(){for(var _t=[],xt=0,Tt=this.segments.length;xt<Tt;xt++){var At=this.segments[xt];_t.push(At.leftSE),_t.push(At.rightSE)}return _t}}]),vt}(),Zv=function(){function vt(_t,xt){if(lc(this,vt),!Array.isArray(_t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new uy(_t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Tt=1,At=_t.length;Tt<At;Tt++){var Pt=new uy(_t[Tt],this,!1);Pt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Pt.bbox.ll.x),Pt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Pt.bbox.ll.y),Pt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Pt.bbox.ur.x),Pt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Pt.bbox.ur.y),this.interiorRings.push(Pt)}this.multiPoly=xt}return Kl(vt,[{key:"getSweepEvents",value:function(){for(var _t=this.exteriorRing.getSweepEvents(),xt=0,Tt=this.interiorRings.length;xt<Tt;xt++)for(var At=this.interiorRings[xt].getSweepEvents(),Pt=0,Nt=At.length;Pt<Nt;Pt++)_t.push(At[Pt]);return _t}}]),vt}(),hy=function(){function vt(_t,xt){if(lc(this,vt),!Array.isArray(_t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof _t[0][0][0]=="number"&&(_t=[_t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Tt=0,At=_t.length;Tt<At;Tt++){var Pt=new Zv(_t[Tt],this);Pt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Pt.bbox.ll.x),Pt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Pt.bbox.ll.y),Pt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Pt.bbox.ur.x),Pt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Pt.bbox.ur.y),this.polys.push(Pt)}this.isSubject=xt}return Kl(vt,[{key:"getSweepEvents",value:function(){for(var _t=[],xt=0,Tt=this.polys.length;xt<Tt;xt++)for(var At=this.polys[xt].getSweepEvents(),Pt=0,Nt=At.length;Pt<Nt;Pt++)_t.push(At[Pt]);return _t}}]),vt}(),dy=function(){function vt(_t){lc(this,vt),this.events=_t;for(var xt=0,Tt=_t.length;xt<Tt;xt++)_t[xt].segment.ringOut=this;this.poly=null}return Kl(vt,null,[{key:"factory",value:function(_t){for(var xt=[],Tt=0,At=_t.length;Tt<At;Tt++){var Pt=_t[Tt];if(Pt.isInResult()&&!Pt.ringOut){for(var Nt=null,Vt=Pt.leftSE,Gt=Pt.rightSE,qt=[Vt],en=Vt.point,Xt=[];Nt=Vt,Vt=Gt,qt.push(Vt),Vt.point!==en;)for(;;){var an=Vt.getAvailableLinkedEvents();if(an.length===0){var _n=qt[0].point,bn=qt[qt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_n.x,",")+" ".concat(_n.y,"]. Last matching segment found ends at")+" [".concat(bn.x,", ").concat(bn.y,"]."))}if(an.length===1){Gt=an[0].otherSE;break}for(var En=null,un=0,Vn=Xt.length;un<Vn;un++)if(Xt[un].point===Vt.point){En=un;break}if(En===null){Xt.push({index:qt.length,point:Vt.point});var nr=Vt.getLeftmostComparator(Nt);Gt=an.sort(nr)[0].otherSE;break}var xn=Xt.splice(En)[0],zn=qt.splice(xn.index);zn.unshift(zn[0].otherSE),xt.push(new vt(zn.reverse()))}xt.push(new vt(qt))}}return xt}}]),Kl(vt,[{key:"getGeom",value:function(){for(var _t=this.events[0].point,xt=[_t],Tt=1,At=this.events.length-1;Tt<At;Tt++){var Pt=this.events[Tt].point,Nt=this.events[Tt+1].point;sy(Pt,_t,Nt)!==0&&(xt.push(Pt),_t=Pt)}if(xt.length===1)return null;var Vt=xt[0],Gt=xt[1];sy(Vt,_t,Gt)===0&&xt.shift(),xt.push(xt[0]);for(var qt=this.isExteriorRing()?1:-1,en=this.isExteriorRing()?0:xt.length-1,Xt=this.isExteriorRing()?xt.length:-1,an=[],_n=en;_n!=Xt;_n+=qt)an.push([xt[_n].x,xt[_n].y]);return an}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var _t=this.enclosingRing();this._isExteriorRing=!_t||!_t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var _t=this.events[0],xt=1,Tt=this.events.length;xt<Tt;xt++){var At=this.events[xt];uh.compare(_t,At)>0&&(_t=At)}for(var Pt=_t.segment.prevInResult(),Nt=Pt?Pt.prevInResult():null;;){if(!Pt)return null;if(!Nt)return Pt.ringOut;if(Nt.ringOut!==Pt.ringOut)return Nt.ringOut.enclosingRing()!==Pt.ringOut?Pt.ringOut:Pt.ringOut.enclosingRing();Pt=Nt.prevInResult(),Nt=Pt?Pt.prevInResult():null}}}]),vt}(),fy=function(){function vt(_t){lc(this,vt),this.exteriorRing=_t,_t.poly=this,this.interiorRings=[]}return Kl(vt,[{key:"addInterior",value:function(_t){this.interiorRings.push(_t),_t.poly=this}},{key:"getGeom",value:function(){var _t=[this.exteriorRing.getGeom()];if(_t[0]===null)return null;for(var xt=0,Tt=this.interiorRings.length;xt<Tt;xt++){var At=this.interiorRings[xt].getGeom();At!==null&&_t.push(At)}return _t}}]),vt}(),Kv=function(){function vt(_t){lc(this,vt),this.rings=_t,this.polys=this._composePolys(_t)}return Kl(vt,[{key:"getGeom",value:function(){for(var _t=[],xt=0,Tt=this.polys.length;xt<Tt;xt++){var At=this.polys[xt].getGeom();At!==null&&_t.push(At)}return _t}},{key:"_composePolys",value:function(_t){for(var xt=[],Tt=0,At=_t.length;Tt<At;Tt++){var Pt=_t[Tt];if(!Pt.poly)if(Pt.isExteriorRing())xt.push(new fy(Pt));else{var Nt=Pt.enclosingRing();Nt.poly||xt.push(new fy(Nt)),Nt.poly.addInterior(Pt)}}return xt}}]),vt}(),Jv=function(){function vt(_t){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:em.compare;lc(this,vt),this.queue=_t,this.tree=new T0(xt),this.segments=[]}return Kl(vt,[{key:"process",value:function(_t){var xt=_t.segment,Tt=[];if(_t.consumedBy)return _t.isLeft?this.queue.remove(_t.otherSE):this.tree.remove(xt),Tt;var At=_t.isLeft?this.tree.insert(xt):this.tree.find(xt);if(!At)throw new Error("Unable to find segment #".concat(xt.id," ")+"[".concat(xt.leftSE.point.x,", ").concat(xt.leftSE.point.y,"] -> ")+"[".concat(xt.rightSE.point.x,", ").concat(xt.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Pt=At,Nt=At,Vt=void 0,Gt=void 0;Vt===void 0;)(Pt=this.tree.prev(Pt))===null?Vt=null:Pt.key.consumedBy===void 0&&(Vt=Pt.key);for(;Gt===void 0;)(Nt=this.tree.next(Nt))===null?Gt=null:Nt.key.consumedBy===void 0&&(Gt=Nt.key);if(_t.isLeft){var qt=null;if(Vt){var en=Vt.getIntersection(xt);if(en!==null&&(xt.isAnEndpoint(en)||(qt=en),!Vt.isAnEndpoint(en)))for(var Xt=this._splitSafely(Vt,en),an=0,_n=Xt.length;an<_n;an++)Tt.push(Xt[an])}var bn=null;if(Gt){var En=Gt.getIntersection(xt);if(En!==null&&(xt.isAnEndpoint(En)||(bn=En),!Gt.isAnEndpoint(En)))for(var un=this._splitSafely(Gt,En),Vn=0,nr=un.length;Vn<nr;Vn++)Tt.push(un[Vn])}if(qt!==null||bn!==null){var xn=null;qt===null?xn=bn:bn===null?xn=qt:xn=uh.comparePoints(qt,bn)<=0?qt:bn,this.queue.remove(xt.rightSE),Tt.push(xt.rightSE);for(var zn=xt.split(xn),jn=0,qn=zn.length;jn<qn;jn++)Tt.push(zn[jn])}Tt.length>0?(this.tree.remove(xt),Tt.push(_t)):(this.segments.push(xt),xt.prev=Vt)}else{if(Vt&&Gt){var Gn=Vt.getIntersection(Gt);if(Gn!==null){if(!Vt.isAnEndpoint(Gn))for(var Zr=this._splitSafely(Vt,Gn),Fr=0,ei=Zr.length;Fr<ei;Fr++)Tt.push(Zr[Fr]);if(!Gt.isAnEndpoint(Gn))for(var zr=this._splitSafely(Gt,Gn),si=0,Wr=zr.length;si<Wr;si++)Tt.push(zr[si])}}this.tree.remove(xt)}return Tt}},{key:"_splitSafely",value:function(_t,xt){this.tree.remove(_t);var Tt=_t.rightSE;this.queue.remove(Tt);var At=_t.split(xt);return At.push(Tt),_t.consumedBy===void 0&&this.tree.insert(_t),At}}]),vt}(),py=typeof process<"u"&&{version:"2.0.0-beta.43"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Qv=typeof process<"u"&&{version:"2.0.0-beta.43"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Nu=new(function(){function vt(){lc(this,vt)}return Kl(vt,[{key:"run",value:function(_t,xt,Tt){Nu.type=_t,Wp.reset();for(var At=[new hy(xt,!0)],Pt=0,Nt=Tt.length;Pt<Nt;Pt++)At.push(new hy(Tt[Pt],!1));if(Nu.numMultiPolys=At.length,Nu.type==="difference")for(var Vt=At[0],Gt=1;Gt<At.length;)Kg(At[Gt].bbox,Vt.bbox)!==null?Gt++:At.splice(Gt,1);if(Nu.type==="intersection"){for(var qt=0,en=At.length;qt<en;qt++)for(var Xt=At[qt],an=qt+1,_n=At.length;an<_n;an++)if(Kg(Xt.bbox,At[an].bbox)===null)return[]}for(var bn=new T0(uh.compare),En=0,un=At.length;En<un;En++)for(var Vn=At[En].getSweepEvents(),nr=0,xn=Vn.length;nr<xn;nr++)if(bn.insert(Vn[nr]),bn.size>py)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var zn=new Jv(bn),jn=bn.size,qn=bn.pop();qn;){var Gn=qn.key;if(bn.size===jn){var Zr=Gn.segment;throw new Error("Unable to pop() ".concat(Gn.isLeft?"left":"right"," SweepEvent ")+"[".concat(Gn.point.x,", ").concat(Gn.point.y,"] from segment #").concat(Zr.id," ")+"[".concat(Zr.leftSE.point.x,", ").concat(Zr.leftSE.point.y,"] -> ")+"[".concat(Zr.rightSE.point.x,", ").concat(Zr.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(bn.size>py)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(zn.segments.length>Qv)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Fr=zn.process(Gn),ei=0,zr=Fr.length;ei<zr;ei++){var si=Fr[ei];si.consumedBy===void 0&&bn.insert(si)}jn=bn.size,qn=bn.pop()}Wp.reset();var Wr=dy.factory(zn.segments);return new Kv(Wr).getGeom()}}]),vt}()),Nh={union:function(vt){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)xt[Tt-1]=arguments[Tt];return Nu.run("union",vt,xt)},intersection:function(vt){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)xt[Tt-1]=arguments[Tt];return Nu.run("intersection",vt,xt)},xor:function(vt){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)xt[Tt-1]=arguments[Tt];return Nu.run("xor",vt,xt)},difference:function(vt){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)xt[Tt-1]=arguments[Tt];return Nu.run("difference",vt,xt)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(vt){if(this==null)throw new TypeError(this+" is not an object");var _t=Object(this),xt=Math.max(Math.min(_t.length,9007199254740991),0)||0,Tt=1 in arguments&&parseInt(Number(arguments[1]),10)||0;Tt=Tt<0?Math.max(xt+Tt,0):Math.min(Tt,xt);var At=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:xt;for(At=At<0?Math.max(xt+arguments[2],0):Math.min(At,xt);Tt<At;)_t[Tt]=vt,++Tt;return _t},writable:!0}),Number.isFinite=Number.isFinite||function(vt){return typeof vt=="number"&&isFinite(vt)},Number.isInteger=Number.isInteger||function(vt){return typeof vt=="number"&&isFinite(vt)&&Math.floor(vt)===vt},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(vt){return vt!=vt},Math.trunc=Math.trunc||function(vt){return vt<0?Math.ceil(vt):Math.floor(vt)};var Yd=function(){};Yd.prototype.interfaces_=function(){return[]},Yd.prototype.getClass=function(){return Yd},Yd.prototype.equalsWithTolerance=function(vt,_t,xt){return Math.abs(vt-_t)<=xt};var oa=function(vt){function _t(xt){vt.call(this,xt),this.name="IllegalArgumentException",this.message=xt,this.stack=new vt().stack}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t}(Error),ko=function(){},gy={MAX_VALUE:{configurable:!0}};ko.isNaN=function(vt){return Number.isNaN(vt)},ko.doubleToLongBits=function(vt){return vt},ko.longBitsToDouble=function(vt){return vt},ko.isInfinite=function(vt){return!Number.isFinite(vt)},gy.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ko,gy);var Sc=function(){},Yp=function(){},jf=function(){};function Cc(){}var jr=function vt(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=vt.NULL_ORDINATE;else if(arguments.length===1){var _t=arguments[0];this.x=_t.x,this.y=_t.y,this.z=_t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=vt.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Xd={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};jr.prototype.setOrdinate=function(vt,_t){switch(vt){case jr.X:this.x=_t;break;case jr.Y:this.y=_t;break;case jr.Z:this.z=_t;break;default:throw new oa("Invalid ordinate index: "+vt)}},jr.prototype.equals2D=function(){if(arguments.length===1){var vt=arguments[0];return this.x===vt.x&&this.y===vt.y}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return!!Yd.equalsWithTolerance(this.x,_t.x,xt)&&!!Yd.equalsWithTolerance(this.y,_t.y,xt)}},jr.prototype.getOrdinate=function(vt){switch(vt){case jr.X:return this.x;case jr.Y:return this.y;case jr.Z:return this.z}throw new oa("Invalid ordinate index: "+vt)},jr.prototype.equals3D=function(vt){return this.x===vt.x&&this.y===vt.y&&(this.z===vt.z||ko.isNaN(this.z))&&ko.isNaN(vt.z)},jr.prototype.equals=function(vt){return vt instanceof jr&&this.equals2D(vt)},jr.prototype.equalInZ=function(vt,_t){return Yd.equalsWithTolerance(this.z,vt.z,_t)},jr.prototype.compareTo=function(vt){var _t=vt;return this.x<_t.x?-1:this.x>_t.x?1:this.y<_t.y?-1:this.y>_t.y?1:0},jr.prototype.clone=function(){},jr.prototype.copy=function(){return new jr(this)},jr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},jr.prototype.distance3D=function(vt){var _t=this.x-vt.x,xt=this.y-vt.y,Tt=this.z-vt.z;return Math.sqrt(_t*_t+xt*xt+Tt*Tt)},jr.prototype.distance=function(vt){var _t=this.x-vt.x,xt=this.y-vt.y;return Math.sqrt(_t*_t+xt*xt)},jr.prototype.hashCode=function(){var vt=17;return vt=37*(vt=37*vt+jr.hashCode(this.x))+jr.hashCode(this.y)},jr.prototype.setCoordinate=function(vt){this.x=vt.x,this.y=vt.y,this.z=vt.z},jr.prototype.interfaces_=function(){return[Sc,Yp,Cc]},jr.prototype.getClass=function(){return jr},jr.hashCode=function(){if(arguments.length===1){var vt=arguments[0],_t=ko.doubleToLongBits(vt);return Math.trunc((_t^_t)>>>32)}},Xd.DimensionalComparator.get=function(){return Dh},Xd.serialVersionUID.get=function(){return 6683108902428367e3},Xd.NULL_ORDINATE.get=function(){return ko.NaN},Xd.X.get=function(){return 0},Xd.Y.get=function(){return 1},Xd.Z.get=function(){return 2},Object.defineProperties(jr,Xd);var Dh=function(vt){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var _t=arguments[0];if(_t!==2&&_t!==3)throw new oa("only 2 or 3 dimensions may be specified");this._dimensionsToTest=_t}}};Dh.prototype.compare=function(vt,_t){var xt=vt,Tt=_t,At=Dh.compare(xt.x,Tt.x);if(At!==0)return At;var Pt=Dh.compare(xt.y,Tt.y);return Pt!==0?Pt:this._dimensionsToTest<=2?0:Dh.compare(xt.z,Tt.z)},Dh.prototype.interfaces_=function(){return[jf]},Dh.prototype.getClass=function(){return Dh},Dh.compare=function(vt,_t){return vt<_t?-1:vt>_t?1:ko.isNaN(vt)?ko.isNaN(_t)?0:-1:ko.isNaN(_t)?1:0};var Uf=function(){};Uf.prototype.create=function(){},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf};var Kr=function(){},Xp={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.toLocationSymbol=function(vt){switch(vt){case Kr.EXTERIOR:return"e";case Kr.BOUNDARY:return"b";case Kr.INTERIOR:return"i";case Kr.NONE:return"-"}throw new oa("Unknown location value: "+vt)},Xp.INTERIOR.get=function(){return 0},Xp.BOUNDARY.get=function(){return 1},Xp.EXTERIOR.get=function(){return 2},Xp.NONE.get=function(){return-1},Object.defineProperties(Kr,Xp);var _o=function(vt,_t){return vt.interfaces_&&vt.interfaces_().indexOf(_t)>-1},cc=function(){},my={LOG_10:{configurable:!0}};cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc},cc.log10=function(vt){var _t=Math.log(vt);return ko.isInfinite(_t)||ko.isNaN(_t)?_t:_t/cc.LOG_10},cc.min=function(vt,_t,xt,Tt){var At=vt;return _t<At&&(At=_t),xt<At&&(At=xt),Tt<At&&(At=Tt),At},cc.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],_t=arguments[1],xt=arguments[2];return vt<_t?_t:vt>xt?xt:vt}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Tt=arguments[0],At=arguments[1],Pt=arguments[2];return Tt<At?At:Tt>Pt?Pt:Tt}},cc.wrap=function(vt,_t){return vt<0?_t- -vt%_t:vt%_t},cc.max=function(){if(arguments.length===3){var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=vt;return _t>Tt&&(Tt=_t),xt>Tt&&(Tt=xt),Tt}if(arguments.length===4){var At=arguments[0],Pt=arguments[1],Nt=arguments[2],Vt=arguments[3],Gt=At;return Pt>Gt&&(Gt=Pt),Nt>Gt&&(Gt=Nt),Vt>Gt&&(Gt=Vt),Gt}},cc.average=function(vt,_t){return(vt+_t)/2},my.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(cc,my);var uu=function(vt){this.str=vt};uu.prototype.append=function(vt){this.str+=vt},uu.prototype.setCharAt=function(vt,_t){this.str=this.str.substr(0,vt)+_t+this.str.substr(vt+1)},uu.prototype.toString=function(vt){return this.str};var hu=function(vt){this.value=vt};hu.prototype.intValue=function(){return this.value},hu.prototype.compareTo=function(vt){return this.value<vt?-1:this.value>vt?1:0},hu.isNaN=function(vt){return Number.isNaN(vt)};var Zp=function(){};Zp.isWhitespace=function(vt){return vt<=32&&vt>=0||vt===127},Zp.toUpperCase=function(vt){return vt.toUpperCase()};var oi=function vt(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var _t=arguments[0];this.init(_t)}else if(arguments[0]instanceof vt){var xt=arguments[0];this.init(xt)}else if(typeof arguments[0]=="string"){var Tt=arguments[0];vt.call(this,vt.parse(Tt))}}else if(arguments.length===2){var At=arguments[0],Pt=arguments[1];this.init(At,Pt)}},jc={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};oi.prototype.le=function(vt){return(this._hi<vt._hi||this._hi===vt._hi)&&this._lo<=vt._lo},oi.prototype.extractSignificantDigits=function(vt,_t){var xt=this.abs(),Tt=oi.magnitude(xt._hi),At=oi.TEN.pow(Tt);(xt=xt.divide(At)).gt(oi.TEN)?(xt=xt.divide(oi.TEN),Tt+=1):xt.lt(oi.ONE)&&(xt=xt.multiply(oi.TEN),Tt-=1);for(var Pt=Tt+1,Nt=new uu,Vt=oi.MAX_PRINT_DIGITS-1,Gt=0;Gt<=Vt;Gt++){vt&&Gt===Pt&&Nt.append(".");var qt=Math.trunc(xt._hi);if(qt<0)break;var en=!1,Xt=0;qt>9?(en=!0,Xt="9"):Xt="0"+qt,Nt.append(Xt),xt=xt.subtract(oi.valueOf(qt)).multiply(oi.TEN),en&&xt.selfAdd(oi.TEN);var an=!0,_n=oi.magnitude(xt._hi);if(_n<0&&Math.abs(_n)>=Vt-Gt&&(an=!1),!an)break}return _t[0]=Tt,Nt.toString()},oi.prototype.sqr=function(){return this.multiply(this)},oi.prototype.doubleValue=function(){return this._hi+this._lo},oi.prototype.subtract=function(){if(arguments[0]instanceof oi){var vt=arguments[0];return this.add(vt.negate())}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.add(-_t)}},oi.prototype.equals=function(){if(arguments.length===1){var vt=arguments[0];return this._hi===vt._hi&&this._lo===vt._lo}},oi.prototype.isZero=function(){return this._hi===0&&this._lo===0},oi.prototype.selfSubtract=function(){if(arguments[0]instanceof oi){var vt=arguments[0];return this.isNaN()?this:this.selfAdd(-vt._hi,-vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.isNaN()?this:this.selfAdd(-_t,0)}},oi.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},oi.prototype.min=function(vt){return this.le(vt)?this:vt},oi.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof oi){var vt=arguments[0];return this.selfDivide(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.selfDivide(_t,0)}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1],At=null,Pt=null,Nt=null,Vt=null,Gt=null,qt=null,en=null,Xt=null;return Gt=this._hi/xt,Xt=(At=(qt=oi.SPLIT*Gt)-(At=qt-Gt))*(Nt=(Xt=oi.SPLIT*xt)-(Nt=Xt-xt))-(en=Gt*xt)+At*(Vt=xt-Nt)+(Pt=Gt-At)*Nt+Pt*Vt,Xt=Gt+(qt=(this._hi-en-Xt+this._lo-Gt*Tt)/xt),this._hi=Xt,this._lo=Gt-Xt+qt,this}},oi.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},oi.prototype.divide=function(){if(arguments[0]instanceof oi){var vt=arguments[0],_t=null,xt=null,Tt=null,At=null,Pt=null,Nt=null,Vt=null,Gt=null;xt=(Pt=this._hi/vt._hi)-(_t=(Nt=oi.SPLIT*Pt)-(_t=Nt-Pt)),Gt=_t*(Tt=(Gt=oi.SPLIT*vt._hi)-(Tt=Gt-vt._hi))-(Vt=Pt*vt._hi)+_t*(At=vt._hi-Tt)+xt*Tt+xt*At;var qt=Gt=Pt+(Nt=(this._hi-Vt-Gt+this._lo-Pt*vt._lo)/vt._hi),en=Pt-Gt+Nt;return new oi(qt,en)}if(typeof arguments[0]=="number"){var Xt=arguments[0];return ko.isNaN(Xt)?oi.createNaN():oi.copy(this).selfDivide(Xt,0)}},oi.prototype.ge=function(vt){return(this._hi>vt._hi||this._hi===vt._hi)&&this._lo>=vt._lo},oi.prototype.pow=function(vt){if(vt===0)return oi.valueOf(1);var _t=new oi(this),xt=oi.valueOf(1),Tt=Math.abs(vt);if(Tt>1)for(;Tt>0;)Tt%2==1&&xt.selfMultiply(_t),(Tt/=2)>0&&(_t=_t.sqr());else xt=_t;return vt<0?xt.reciprocal():xt},oi.prototype.ceil=function(){if(this.isNaN())return oi.NaN;var vt=Math.ceil(this._hi),_t=0;return vt===this._hi&&(_t=Math.ceil(this._lo)),new oi(vt,_t)},oi.prototype.compareTo=function(vt){var _t=vt;return this._hi<_t._hi?-1:this._hi>_t._hi?1:this._lo<_t._lo?-1:this._lo>_t._lo?1:0},oi.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},oi.prototype.setValue=function(){if(arguments[0]instanceof oi){var vt=arguments[0];return this.init(vt),this}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.init(_t),this}},oi.prototype.max=function(vt){return this.ge(vt)?this:vt},oi.prototype.sqrt=function(){if(this.isZero())return oi.valueOf(0);if(this.isNegative())return oi.NaN;var vt=1/Math.sqrt(this._hi),_t=this._hi*vt,xt=oi.valueOf(_t),Tt=this.subtract(xt.sqr())._hi*(.5*vt);return xt.add(Tt)},oi.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof oi){var vt=arguments[0];return this.selfAdd(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0],xt=null,Tt=null,At=null,Pt=null,Nt=null,Vt=null;return Pt=(At=this._hi+_t)-(Nt=At-this._hi),Tt=(Vt=(Pt=_t-Nt+(this._hi-Pt))+this._lo)+(At-(xt=At+Vt)),this._hi=xt+Tt,this._lo=Tt+(xt-this._hi),this}}else if(arguments.length===2){var Gt=arguments[0],qt=arguments[1],en=null,Xt=null,an=null,_n=null,bn=null,En=null,un=null;_n=this._hi+Gt,Xt=this._lo+qt,bn=_n-(En=_n-this._hi),an=Xt-(un=Xt-this._lo);var Vn=(en=_n+(En=(bn=Gt-En+(this._hi-bn))+Xt))+(En=(an=qt-un+(this._lo-an))+(En+(_n-en))),nr=En+(en-Vn);return this._hi=Vn,this._lo=nr,this}},oi.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof oi){var vt=arguments[0];return this.selfMultiply(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.selfMultiply(_t,0)}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1],At=null,Pt=null,Nt=null,Vt=null,Gt=null,qt=null;At=(Gt=oi.SPLIT*this._hi)-this._hi,qt=oi.SPLIT*xt,At=Gt-At,Pt=this._hi-At,Nt=qt-xt;var en=(Gt=this._hi*xt)+(qt=At*(Nt=qt-Nt)-Gt+At*(Vt=xt-Nt)+Pt*Nt+Pt*Vt+(this._hi*Tt+this._lo*xt)),Xt=qt+(At=Gt-en);return this._hi=en,this._lo=Xt,this}},oi.prototype.selfSqr=function(){return this.selfMultiply(this)},oi.prototype.floor=function(){if(this.isNaN())return oi.NaN;var vt=Math.floor(this._hi),_t=0;return vt===this._hi&&(_t=Math.floor(this._lo)),new oi(vt,_t)},oi.prototype.negate=function(){return this.isNaN()?this:new oi(-this._hi,-this._lo)},oi.prototype.clone=function(){},oi.prototype.multiply=function(){if(arguments[0]instanceof oi){var vt=arguments[0];return vt.isNaN()?oi.createNaN():oi.copy(this).selfMultiply(vt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return ko.isNaN(_t)?oi.createNaN():oi.copy(this).selfMultiply(_t,0)}},oi.prototype.isNaN=function(){return ko.isNaN(this._hi)},oi.prototype.intValue=function(){return Math.trunc(this._hi)},oi.prototype.toString=function(){var vt=oi.magnitude(this._hi);return vt>=-3&&vt<=20?this.toStandardNotation():this.toSciNotation()},oi.prototype.toStandardNotation=function(){var vt=this.getSpecialNumberString();if(vt!==null)return vt;var _t=new Array(1).fill(null),xt=this.extractSignificantDigits(!0,_t),Tt=_t[0]+1,At=xt;if(xt.charAt(0)===".")At="0"+xt;else if(Tt<0)At="0."+oi.stringOfChar("0",-Tt)+xt;else if(xt.indexOf(".")===-1){var Pt=Tt-xt.length;At=xt+oi.stringOfChar("0",Pt)+".0"}return this.isNegative()?"-"+At:At},oi.prototype.reciprocal=function(){var vt,_t,xt,Tt,At=null,Pt=null,Nt=null,Vt=null;vt=(xt=1/this._hi)-(At=(Nt=oi.SPLIT*xt)-(At=Nt-xt)),Pt=(Vt=oi.SPLIT*this._hi)-this._hi;var Gt=xt+(Nt=(1-(Tt=xt*this._hi)-(Vt=At*(Pt=Vt-Pt)-Tt+At*(_t=this._hi-Pt)+vt*Pt+vt*_t)-xt*this._lo)/this._hi);return new oi(Gt,xt-Gt+Nt)},oi.prototype.toSciNotation=function(){if(this.isZero())return oi.SCI_NOT_ZERO;var vt=this.getSpecialNumberString();if(vt!==null)return vt;var _t=new Array(1).fill(null),xt=this.extractSignificantDigits(!1,_t),Tt=oi.SCI_NOT_EXPONENT_CHAR+_t[0];if(xt.charAt(0)==="0")throw new Error("Found leading zero: "+xt);var At="";xt.length>1&&(At=xt.substring(1));var Pt=xt.charAt(0)+"."+At;return this.isNegative()?"-"+Pt+Tt:Pt+Tt},oi.prototype.abs=function(){return this.isNaN()?oi.NaN:this.isNegative()?this.negate():new oi(this)},oi.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},oi.prototype.lt=function(vt){return(this._hi<vt._hi||this._hi===vt._hi)&&this._lo<vt._lo},oi.prototype.add=function(){if(arguments[0]instanceof oi){var vt=arguments[0];return oi.copy(this).selfAdd(vt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return oi.copy(this).selfAdd(_t)}},oi.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var vt=arguments[0];this._hi=vt,this._lo=0}else if(arguments[0]instanceof oi){var _t=arguments[0];this._hi=_t._hi,this._lo=_t._lo}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];this._hi=xt,this._lo=Tt}},oi.prototype.gt=function(vt){return(this._hi>vt._hi||this._hi===vt._hi)&&this._lo>vt._lo},oi.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},oi.prototype.trunc=function(){return this.isNaN()?oi.NaN:this.isPositive()?this.floor():this.ceil()},oi.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},oi.prototype.interfaces_=function(){return[Cc,Sc,Yp]},oi.prototype.getClass=function(){return oi},oi.sqr=function(vt){return oi.valueOf(vt).selfMultiply(vt)},oi.valueOf=function(){if(typeof arguments[0]=="string"){var vt=arguments[0];return oi.parse(vt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return new oi(_t)}},oi.sqrt=function(vt){return oi.valueOf(vt).sqrt()},oi.parse=function(vt){for(var _t=0,xt=vt.length;Zp.isWhitespace(vt.charAt(_t));)_t++;var Tt=!1;if(_t<xt){var At=vt.charAt(_t);At!=="-"&&At!=="+"||(_t++,At==="-"&&(Tt=!0))}for(var Pt=new oi,Nt=0,Vt=0,Gt=0;!(_t>=xt);){var qt=vt.charAt(_t);if(_t++,Zp.isDigit(qt)){var en=qt-"0";Pt.selfMultiply(oi.TEN),Pt.selfAdd(en),Nt++}else{if(qt!=="."){if(qt==="e"||qt==="E"){var Xt=vt.substring(_t);try{Gt=hu.parseInt(Xt)}catch(un){throw un instanceof Error?new Error("Invalid exponent "+Xt+" in string "+vt):un}break}throw new Error("Unexpected character '"+qt+"' at position "+_t+" in string "+vt)}Vt=Nt}}var an=Pt,_n=Nt-Vt-Gt;if(_n===0)an=Pt;else if(_n>0){var bn=oi.TEN.pow(_n);an=Pt.divide(bn)}else if(_n<0){var En=oi.TEN.pow(-_n);an=Pt.multiply(En)}return Tt?an.negate():an},oi.createNaN=function(){return new oi(ko.NaN,ko.NaN)},oi.copy=function(vt){return new oi(vt)},oi.magnitude=function(vt){var _t=Math.abs(vt),xt=Math.log(_t)/Math.log(10),Tt=Math.trunc(Math.floor(xt));return 10*Math.pow(10,Tt)<=_t&&(Tt+=1),Tt},oi.stringOfChar=function(vt,_t){for(var xt=new uu,Tt=0;Tt<_t;Tt++)xt.append(vt);return xt.toString()},jc.PI.get=function(){return new oi(3.141592653589793,12246467991473532e-32)},jc.TWO_PI.get=function(){return new oi(6.283185307179586,24492935982947064e-32)},jc.PI_2.get=function(){return new oi(1.5707963267948966,6123233995736766e-32)},jc.E.get=function(){return new oi(2.718281828459045,14456468917292502e-32)},jc.NaN.get=function(){return new oi(ko.NaN,ko.NaN)},jc.EPS.get=function(){return 123259516440783e-46},jc.SPLIT.get=function(){return 134217729},jc.MAX_PRINT_DIGITS.get=function(){return 32},jc.TEN.get=function(){return oi.valueOf(10)},jc.ONE.get=function(){return oi.valueOf(1)},jc.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},jc.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(oi,jc);var Fl=function(){},yy={DP_SAFE_EPSILON:{configurable:!0}};Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},Fl.orientationIndex=function(vt,_t,xt){var Tt=Fl.orientationIndexFilter(vt,_t,xt);if(Tt<=1)return Tt;var At=oi.valueOf(_t.x).selfAdd(-vt.x),Pt=oi.valueOf(_t.y).selfAdd(-vt.y),Nt=oi.valueOf(xt.x).selfAdd(-_t.x),Vt=oi.valueOf(xt.y).selfAdd(-_t.y);return At.selfMultiply(Vt).selfSubtract(Pt.selfMultiply(Nt)).signum()},Fl.signOfDet2x2=function(vt,_t,xt,Tt){return vt.multiply(Tt).selfSubtract(_t.multiply(xt)).signum()},Fl.intersection=function(vt,_t,xt,Tt){var At=oi.valueOf(Tt.y).selfSubtract(xt.y).selfMultiply(oi.valueOf(_t.x).selfSubtract(vt.x)),Pt=oi.valueOf(Tt.x).selfSubtract(xt.x).selfMultiply(oi.valueOf(_t.y).selfSubtract(vt.y)),Nt=At.subtract(Pt),Vt=oi.valueOf(Tt.x).selfSubtract(xt.x).selfMultiply(oi.valueOf(vt.y).selfSubtract(xt.y)),Gt=oi.valueOf(Tt.y).selfSubtract(xt.y).selfMultiply(oi.valueOf(vt.x).selfSubtract(xt.x)),qt=Vt.subtract(Gt).selfDivide(Nt).doubleValue(),en=oi.valueOf(vt.x).selfAdd(oi.valueOf(_t.x).selfSubtract(vt.x).selfMultiply(qt)).doubleValue(),Xt=oi.valueOf(_t.x).selfSubtract(vt.x).selfMultiply(oi.valueOf(vt.y).selfSubtract(xt.y)),an=oi.valueOf(_t.y).selfSubtract(vt.y).selfMultiply(oi.valueOf(vt.x).selfSubtract(xt.x)),_n=Xt.subtract(an).selfDivide(Nt).doubleValue(),bn=oi.valueOf(xt.y).selfAdd(oi.valueOf(Tt.y).selfSubtract(xt.y).selfMultiply(_n)).doubleValue();return new jr(en,bn)},Fl.orientationIndexFilter=function(vt,_t,xt){var Tt=null,At=(vt.x-xt.x)*(_t.y-xt.y),Pt=(vt.y-xt.y)*(_t.x-xt.x),Nt=At-Pt;if(At>0){if(Pt<=0)return Fl.signum(Nt);Tt=At+Pt}else{if(!(At<0)||Pt>=0)return Fl.signum(Nt);Tt=-At-Pt}var Vt=Fl.DP_SAFE_EPSILON*Tt;return Nt>=Vt||-Nt>=Vt?Fl.signum(Nt):2},Fl.signum=function(vt){return vt>0?1:vt<0?-1:0},yy.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Fl,yy);var fs=function(){},Kp={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Kp.X.get=function(){return 0},Kp.Y.get=function(){return 1},Kp.Z.get=function(){return 2},Kp.M.get=function(){return 3},fs.prototype.setOrdinate=function(vt,_t,xt){},fs.prototype.size=function(){},fs.prototype.getOrdinate=function(vt,_t){},fs.prototype.getCoordinate=function(){},fs.prototype.getCoordinateCopy=function(vt){},fs.prototype.getDimension=function(){},fs.prototype.getX=function(vt){},fs.prototype.clone=function(){},fs.prototype.expandEnvelope=function(vt){},fs.prototype.copy=function(){},fs.prototype.getY=function(vt){},fs.prototype.toCoordinateArray=function(){},fs.prototype.interfaces_=function(){return[Yp]},fs.prototype.getClass=function(){return fs},Object.defineProperties(fs,Kp);var vy=function(){},Zd=function(vt){function _t(){vt.call(this,"Projective point not representable on the Cartesian plane.")}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(vy),hl=function(){};hl.arraycopy=function(vt,_t,xt,Tt,At){for(var Pt=0,Nt=_t;Nt<_t+At;Nt++)xt[Tt+Pt]=vt[Nt],Pt++},hl.getProperty=function(vt){return{"line.separator":`
`}[vt]};var Tc=function vt(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var _t=arguments[0];this.x=_t.x,this.y=_t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var xt=arguments[0],Tt=arguments[1];this.x=xt,this.y=Tt,this.w=1}else if(arguments[0]instanceof vt&&arguments[1]instanceof vt){var At=arguments[0],Pt=arguments[1];this.x=At.y*Pt.w-Pt.y*At.w,this.y=Pt.x*At.w-At.x*Pt.w,this.w=At.x*Pt.y-Pt.x*At.y}else if(arguments[0]instanceof jr&&arguments[1]instanceof jr){var Nt=arguments[0],Vt=arguments[1];this.x=Nt.y-Vt.y,this.y=Vt.x-Nt.x,this.w=Nt.x*Vt.y-Vt.x*Nt.y}}else if(arguments.length===3){var Gt=arguments[0],qt=arguments[1],en=arguments[2];this.x=Gt,this.y=qt,this.w=en}else if(arguments.length===4){var Xt=arguments[0],an=arguments[1],_n=arguments[2],bn=arguments[3],En=Xt.y-an.y,un=an.x-Xt.x,Vn=Xt.x*an.y-an.x*Xt.y,nr=_n.y-bn.y,xn=bn.x-_n.x,zn=_n.x*bn.y-bn.x*_n.y;this.x=un*zn-xn*Vn,this.y=nr*Vn-En*zn,this.w=En*xn-nr*un}};Tc.prototype.getY=function(){var vt=this.y/this.w;if(ko.isNaN(vt)||ko.isInfinite(vt))throw new Zd;return vt},Tc.prototype.getX=function(){var vt=this.x/this.w;if(ko.isNaN(vt)||ko.isInfinite(vt))throw new Zd;return vt},Tc.prototype.getCoordinate=function(){var vt=new jr;return vt.x=this.getX(),vt.y=this.getY(),vt},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.intersection=function(vt,_t,xt,Tt){var At=vt.y-_t.y,Pt=_t.x-vt.x,Nt=vt.x*_t.y-_t.x*vt.y,Vt=xt.y-Tt.y,Gt=Tt.x-xt.x,qt=xt.x*Tt.y-Tt.x*xt.y,en=At*Gt-Vt*Pt,Xt=(Pt*qt-Gt*Nt)/en,an=(Vt*Nt-At*qt)/en;if(ko.isNaN(Xt)||ko.isInfinite(Xt)||ko.isNaN(an)||ko.isInfinite(an))throw new Zd;return new jr(Xt,an)};var eo=function vt(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof jr){var _t=arguments[0];this.init(_t.x,_t.x,_t.y,_t.y)}else if(arguments[0]instanceof vt){var xt=arguments[0];this.init(xt)}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.init(Tt.x,At.x,Tt.y,At.y)}else if(arguments.length===4){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2],Gt=arguments[3];this.init(Pt,Nt,Vt,Gt)}},_y={serialVersionUID:{configurable:!0}};eo.prototype.getArea=function(){return this.getWidth()*this.getHeight()},eo.prototype.equals=function(vt){if(!(vt instanceof eo))return!1;var _t=vt;return this.isNull()?_t.isNull():this._maxx===_t.getMaxX()&&this._maxy===_t.getMaxY()&&this._minx===_t.getMinX()&&this._miny===_t.getMinY()},eo.prototype.intersection=function(vt){if(this.isNull()||vt.isNull()||!this.intersects(vt))return new eo;var _t=this._minx>vt._minx?this._minx:vt._minx,xt=this._miny>vt._miny?this._miny:vt._miny,Tt=this._maxx<vt._maxx?this._maxx:vt._maxx,At=this._maxy<vt._maxy?this._maxy:vt._maxy;return new eo(_t,Tt,xt,At)},eo.prototype.isNull=function(){return this._maxx<this._minx},eo.prototype.getMaxX=function(){return this._maxx},eo.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof jr){var vt=arguments[0];return this.covers(vt.x,vt.y)}if(arguments[0]instanceof eo){var _t=arguments[0];return!this.isNull()&&!_t.isNull()&&_t.getMinX()>=this._minx&&_t.getMaxX()<=this._maxx&&_t.getMinY()>=this._miny&&_t.getMaxY()<=this._maxy}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];return!this.isNull()&&xt>=this._minx&&xt<=this._maxx&&Tt>=this._miny&&Tt<=this._maxy}},eo.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof eo){var vt=arguments[0];return!this.isNull()&&!vt.isNull()&&!(vt._minx>this._maxx||vt._maxx<this._minx||vt._miny>this._maxy||vt._maxy<this._miny)}if(arguments[0]instanceof jr){var _t=arguments[0];return this.intersects(_t.x,_t.y)}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];return!this.isNull()&&!(xt>this._maxx||xt<this._minx||Tt>this._maxy||Tt<this._miny)}},eo.prototype.getMinY=function(){return this._miny},eo.prototype.getMinX=function(){return this._minx},eo.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof jr){var vt=arguments[0];this.expandToInclude(vt.x,vt.y)}else if(arguments[0]instanceof eo){var _t=arguments[0];if(_t.isNull())return null;this.isNull()?(this._minx=_t.getMinX(),this._maxx=_t.getMaxX(),this._miny=_t.getMinY(),this._maxy=_t.getMaxY()):(_t._minx<this._minx&&(this._minx=_t._minx),_t._maxx>this._maxx&&(this._maxx=_t._maxx),_t._miny<this._miny&&(this._miny=_t._miny),_t._maxy>this._maxy&&(this._maxy=_t._maxy))}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];this.isNull()?(this._minx=xt,this._maxx=xt,this._miny=Tt,this._maxy=Tt):(xt<this._minx&&(this._minx=xt),xt>this._maxx&&(this._maxx=xt),Tt<this._miny&&(this._miny=Tt),Tt>this._maxy&&(this._maxy=Tt))}},eo.prototype.minExtent=function(){if(this.isNull())return 0;var vt=this.getWidth(),_t=this.getHeight();return vt<_t?vt:_t},eo.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},eo.prototype.compareTo=function(vt){var _t=vt;return this.isNull()?_t.isNull()?0:-1:_t.isNull()?1:this._minx<_t._minx?-1:this._minx>_t._minx?1:this._miny<_t._miny?-1:this._miny>_t._miny?1:this._maxx<_t._maxx?-1:this._maxx>_t._maxx?1:this._maxy<_t._maxy?-1:this._maxy>_t._maxy?1:0},eo.prototype.translate=function(vt,_t){if(this.isNull())return null;this.init(this.getMinX()+vt,this.getMaxX()+vt,this.getMinY()+_t,this.getMaxY()+_t)},eo.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},eo.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},eo.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},eo.prototype.maxExtent=function(){if(this.isNull())return 0;var vt=this.getWidth(),_t=this.getHeight();return vt>_t?vt:_t},eo.prototype.expandBy=function(){if(arguments.length===1){var vt=arguments[0];this.expandBy(vt,vt)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this.isNull())return null;this._minx-=_t,this._maxx+=_t,this._miny-=xt,this._maxy+=xt,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},eo.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof eo){var vt=arguments[0];return this.covers(vt)}if(arguments[0]instanceof jr){var _t=arguments[0];return this.covers(_t)}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];return this.covers(xt,Tt)}},eo.prototype.centre=function(){return this.isNull()?null:new jr((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},eo.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof jr){var vt=arguments[0];this.init(vt.x,vt.x,vt.y,vt.y)}else if(arguments[0]instanceof eo){var _t=arguments[0];this._minx=_t._minx,this._maxx=_t._maxx,this._miny=_t._miny,this._maxy=_t._maxy}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];this.init(xt.x,Tt.x,xt.y,Tt.y)}else if(arguments.length===4){var At=arguments[0],Pt=arguments[1],Nt=arguments[2],Vt=arguments[3];At<Pt?(this._minx=At,this._maxx=Pt):(this._minx=Pt,this._maxx=At),Nt<Vt?(this._miny=Nt,this._maxy=Vt):(this._miny=Vt,this._maxy=Nt)}},eo.prototype.getMaxY=function(){return this._maxy},eo.prototype.distance=function(vt){if(this.intersects(vt))return 0;var _t=0;this._maxx<vt._minx?_t=vt._minx-this._maxx:this._minx>vt._maxx&&(_t=this._minx-vt._maxx);var xt=0;return this._maxy<vt._miny?xt=vt._miny-this._maxy:this._miny>vt._maxy&&(xt=this._miny-vt._maxy),_t===0?xt:xt===0?_t:Math.sqrt(_t*_t+xt*xt)},eo.prototype.hashCode=function(){var vt=17;return vt=37*(vt=37*(vt=37*(vt=37*vt+jr.hashCode(this._minx))+jr.hashCode(this._maxx))+jr.hashCode(this._miny))+jr.hashCode(this._maxy)},eo.prototype.interfaces_=function(){return[Sc,Cc]},eo.prototype.getClass=function(){return eo},eo.intersects=function(){if(arguments.length===3){var vt=arguments[0],_t=arguments[1],xt=arguments[2];return xt.x>=(vt.x<_t.x?vt.x:_t.x)&&xt.x<=(vt.x>_t.x?vt.x:_t.x)&&xt.y>=(vt.y<_t.y?vt.y:_t.y)&&xt.y<=(vt.y>_t.y?vt.y:_t.y)}if(arguments.length===4){var Tt=arguments[0],At=arguments[1],Pt=arguments[2],Nt=arguments[3],Vt=Math.min(Pt.x,Nt.x),Gt=Math.max(Pt.x,Nt.x),qt=Math.min(Tt.x,At.x),en=Math.max(Tt.x,At.x);return!(qt>Gt)&&!(en<Vt)&&(Vt=Math.min(Pt.y,Nt.y),Gt=Math.max(Pt.y,Nt.y),qt=Math.min(Tt.y,At.y),en=Math.max(Tt.y,At.y),!(qt>Gt)&&!(en<Vt))}},_y.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(eo,_y);var du={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Jp=function(vt){this.geometryFactory=vt||new Yo};Jp.prototype.read=function(vt){var _t,xt,Tt;vt=vt.replace(/[\n\r]/g," ");var At=du.typeStr.exec(vt);if(vt.search("EMPTY")!==-1&&((At=du.emptyTypeStr.exec(vt))[2]=void 0),At&&(xt=At[1].toLowerCase(),Tt=At[2],Gf[xt]&&(_t=Gf[xt].apply(this,[Tt]))),_t===void 0)throw new Error("Could not parse WKT "+vt);return _t},Jp.prototype.write=function(vt){return this.extractGeometry(vt)},Jp.prototype.extractGeometry=function(vt){var _t=vt.getGeometryType().toLowerCase();if(!hh[_t])return null;var xt=_t.toUpperCase();return vt.isEmpty()?xt+" EMPTY":xt+"("+hh[_t].apply(this,[vt])+")"};var hh={coordinate:function(vt){return vt.x+" "+vt.y},point:function(vt){return hh.coordinate.call(this,vt._coordinates._coordinates[0])},multipoint:function(vt){for(var _t=[],xt=0,Tt=vt._geometries.length;xt<Tt;++xt)_t.push("("+hh.point.apply(this,[vt._geometries[xt]])+")");return _t.join(",")},linestring:function(vt){for(var _t=[],xt=0,Tt=vt._points._coordinates.length;xt<Tt;++xt)_t.push(hh.coordinate.apply(this,[vt._points._coordinates[xt]]));return _t.join(",")},linearring:function(vt){for(var _t=[],xt=0,Tt=vt._points._coordinates.length;xt<Tt;++xt)_t.push(hh.coordinate.apply(this,[vt._points._coordinates[xt]]));return _t.join(",")},multilinestring:function(vt){for(var _t=[],xt=0,Tt=vt._geometries.length;xt<Tt;++xt)_t.push("("+hh.linestring.apply(this,[vt._geometries[xt]])+")");return _t.join(",")},polygon:function(vt){var _t=[];_t.push("("+hh.linestring.apply(this,[vt._shell])+")");for(var xt=0,Tt=vt._holes.length;xt<Tt;++xt)_t.push("("+hh.linestring.apply(this,[vt._holes[xt]])+")");return _t.join(",")},multipolygon:function(vt){for(var _t=[],xt=0,Tt=vt._geometries.length;xt<Tt;++xt)_t.push("("+hh.polygon.apply(this,[vt._geometries[xt]])+")");return _t.join(",")},geometrycollection:function(vt){for(var _t=[],xt=0,Tt=vt._geometries.length;xt<Tt;++xt)_t.push(this.extractGeometry(vt._geometries[xt]));return _t.join(",")}},Gf={point:function(vt){if(vt===void 0)return this.geometryFactory.createPoint();var _t=vt.trim().split(du.spaces);return this.geometryFactory.createPoint(new jr(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])))},multipoint:function(vt){var _t;if(vt===void 0)return this.geometryFactory.createMultiPoint();for(var xt=vt.trim().split(","),Tt=[],At=0,Pt=xt.length;At<Pt;++At)_t=xt[At].replace(du.trimParens,"$1"),Tt.push(Gf.point.apply(this,[_t]));return this.geometryFactory.createMultiPoint(Tt)},linestring:function(vt){if(vt===void 0)return this.geometryFactory.createLineString();for(var _t,xt=vt.trim().split(","),Tt=[],At=0,Pt=xt.length;At<Pt;++At)_t=xt[At].trim().split(du.spaces),Tt.push(new jr(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])));return this.geometryFactory.createLineString(Tt)},linearring:function(vt){if(vt===void 0)return this.geometryFactory.createLinearRing();for(var _t,xt=vt.trim().split(","),Tt=[],At=0,Pt=xt.length;At<Pt;++At)_t=xt[At].trim().split(du.spaces),Tt.push(new jr(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])));return this.geometryFactory.createLinearRing(Tt)},multilinestring:function(vt){var _t;if(vt===void 0)return this.geometryFactory.createMultiLineString();for(var xt=vt.trim().split(du.parenComma),Tt=[],At=0,Pt=xt.length;At<Pt;++At)_t=xt[At].replace(du.trimParens,"$1"),Tt.push(Gf.linestring.apply(this,[_t]));return this.geometryFactory.createMultiLineString(Tt)},polygon:function(vt){var _t,xt,Tt;if(vt===void 0)return this.geometryFactory.createPolygon();for(var At,Pt=vt.trim().split(du.parenComma),Nt=[],Vt=0,Gt=Pt.length;Vt<Gt;++Vt)_t=Pt[Vt].replace(du.trimParens,"$1"),xt=Gf.linestring.apply(this,[_t]),Tt=this.geometryFactory.createLinearRing(xt._points),Vt===0?At=Tt:Nt.push(Tt);return this.geometryFactory.createPolygon(At,Nt)},multipolygon:function(vt){var _t;if(vt===void 0)return this.geometryFactory.createMultiPolygon();for(var xt=vt.trim().split(du.doubleParenComma),Tt=[],At=0,Pt=xt.length;At<Pt;++At)_t=xt[At].replace(du.trimParens,"$1"),Tt.push(Gf.polygon.apply(this,[_t]));return this.geometryFactory.createMultiPolygon(Tt)},geometrycollection:function(vt){if(vt===void 0)return this.geometryFactory.createGeometryCollection();for(var _t=(vt=vt.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),xt=[],Tt=0,At=_t.length;Tt<At;++Tt)xt.push(this.read(_t[Tt]));return this.geometryFactory.createGeometryCollection(xt)}},Uc=function(vt){this.parser=new Jp(vt)};Uc.prototype.write=function(vt){return this.parser.write(vt)},Uc.toLineString=function(vt,_t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+vt.x+" "+vt.y+", "+_t.x+" "+_t.y+" )"};var dh=function(vt){function _t(xt){vt.call(this,xt),this.name="RuntimeException",this.message=xt,this.stack=new vt().stack}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t}(Error),tm=function(vt){function _t(){if(vt.call(this),arguments.length===0)vt.call(this);else if(arguments.length===1){var xt=arguments[0];vt.call(this,xt)}}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(dh),$o=function(){};$o.prototype.interfaces_=function(){return[]},$o.prototype.getClass=function(){return $o},$o.shouldNeverReachHere=function(){if(arguments.length===0)$o.shouldNeverReachHere(null);else if(arguments.length===1){var vt=arguments[0];throw new tm("Should never reach here"+(vt!==null?": "+vt:""))}},$o.isTrue=function(){var vt;if(arguments.length===1)$o.isTrue(arguments[0],null);else if(arguments.length===2&&(vt=arguments[1],!arguments[0]))throw vt===null?new tm:new tm(vt)},$o.equals=function(){var vt,_t,xt;if(arguments.length===2)$o.equals(vt=arguments[0],_t=arguments[1],null);else if(arguments.length===3&&(vt=arguments[0],xt=arguments[2],!(_t=arguments[1]).equals(vt)))throw new tm("Expected "+vt+" but encountered "+_t+(xt!==null?": "+xt:""))};var ua=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new jr,this._intPt[1]=new jr,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Kd={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ua.prototype.getIndexAlongSegment=function(vt,_t){return this.computeIntLineIndex(),this._intLineIndex[vt][_t]},ua.prototype.getTopologySummary=function(){var vt=new uu;return this.isEndPoint()&&vt.append(" endpoint"),this._isProper&&vt.append(" proper"),this.isCollinear()&&vt.append(" collinear"),vt.toString()},ua.prototype.computeIntersection=function(vt,_t,xt,Tt){this._inputLines[0][0]=vt,this._inputLines[0][1]=_t,this._inputLines[1][0]=xt,this._inputLines[1][1]=Tt,this._result=this.computeIntersect(vt,_t,xt,Tt)},ua.prototype.getIntersectionNum=function(){return this._result},ua.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var vt=arguments[0],_t=this.getEdgeDistance(vt,0),xt=this.getEdgeDistance(vt,1);_t>xt?(this._intLineIndex[vt][0]=0,this._intLineIndex[vt][1]=1):(this._intLineIndex[vt][0]=1,this._intLineIndex[vt][1]=0)}},ua.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ua.prototype.setPrecisionModel=function(vt){this._precisionModel=vt},ua.prototype.isInteriorIntersection=function(){var vt=this;if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var _t=arguments[0],xt=0;xt<this._result;xt++)if(!vt._intPt[xt].equals2D(vt._inputLines[_t][0])&&!vt._intPt[xt].equals2D(vt._inputLines[_t][1]))return!0;return!1}},ua.prototype.getIntersection=function(vt){return this._intPt[vt]},ua.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ua.prototype.hasIntersection=function(){return this._result!==ua.NO_INTERSECTION},ua.prototype.getEdgeDistance=function(vt,_t){return ua.computeEdgeDistance(this._intPt[_t],this._inputLines[vt][0],this._inputLines[vt][1])},ua.prototype.isCollinear=function(){return this._result===ua.COLLINEAR_INTERSECTION},ua.prototype.toString=function(){return Uc.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Uc.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ua.prototype.getEndpoint=function(vt,_t){return this._inputLines[vt][_t]},ua.prototype.isIntersection=function(vt){for(var _t=0;_t<this._result;_t++)if(this._intPt[_t].equals2D(vt))return!0;return!1},ua.prototype.getIntersectionAlongSegment=function(vt,_t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[vt][_t]]},ua.prototype.interfaces_=function(){return[]},ua.prototype.getClass=function(){return ua},ua.computeEdgeDistance=function(vt,_t,xt){var Tt=Math.abs(xt.x-_t.x),At=Math.abs(xt.y-_t.y),Pt=-1;if(vt.equals(_t))Pt=0;else if(vt.equals(xt))Pt=Tt>At?Tt:At;else{var Nt=Math.abs(vt.x-_t.x),Vt=Math.abs(vt.y-_t.y);(Pt=Tt>At?Nt:Vt)!==0||vt.equals(_t)||(Pt=Math.max(Nt,Vt))}return $o.isTrue(!(Pt===0&&!vt.equals(_t)),"Bad distance calculation"),Pt},ua.nonRobustComputeEdgeDistance=function(vt,_t,xt){var Tt=vt.x-_t.x,At=vt.y-_t.y,Pt=Math.sqrt(Tt*Tt+At*At);return $o.isTrue(!(Pt===0&&!vt.equals(_t)),"Invalid distance calculation"),Pt},Kd.DONT_INTERSECT.get=function(){return 0},Kd.DO_INTERSECT.get=function(){return 1},Kd.COLLINEAR.get=function(){return 2},Kd.NO_INTERSECTION.get=function(){return 0},Kd.POINT_INTERSECTION.get=function(){return 1},Kd.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ua,Kd);var Bh=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.isInSegmentEnvelopes=function(xt){var Tt=new eo(this._inputLines[0][0],this._inputLines[0][1]),At=new eo(this._inputLines[1][0],this._inputLines[1][1]);return Tt.contains(xt)&&At.contains(xt)},_t.prototype.computeIntersection=function(){if(arguments.length!==3)return vt.prototype.computeIntersection.apply(this,arguments);var xt=arguments[0],Tt=arguments[1],At=arguments[2];if(this._isProper=!1,eo.intersects(Tt,At,xt)&&Ni.orientationIndex(Tt,At,xt)===0&&Ni.orientationIndex(At,Tt,xt)===0)return this._isProper=!0,(xt.equals(Tt)||xt.equals(At))&&(this._isProper=!1),this._result=vt.POINT_INTERSECTION,null;this._result=vt.NO_INTERSECTION},_t.prototype.normalizeToMinimum=function(xt,Tt,At,Pt,Nt){Nt.x=this.smallestInAbsValue(xt.x,Tt.x,At.x,Pt.x),Nt.y=this.smallestInAbsValue(xt.y,Tt.y,At.y,Pt.y),xt.x-=Nt.x,xt.y-=Nt.y,Tt.x-=Nt.x,Tt.y-=Nt.y,At.x-=Nt.x,At.y-=Nt.y,Pt.x-=Nt.x,Pt.y-=Nt.y},_t.prototype.safeHCoordinateIntersection=function(xt,Tt,At,Pt){var Nt=null;try{Nt=Tc.intersection(xt,Tt,At,Pt)}catch(Vt){if(!(Vt instanceof Zd))throw Vt;Nt=_t.nearestEndpoint(xt,Tt,At,Pt)}return Nt},_t.prototype.intersection=function(xt,Tt,At,Pt){var Nt=this.intersectionWithNormalization(xt,Tt,At,Pt);return this.isInSegmentEnvelopes(Nt)||(Nt=new jr(_t.nearestEndpoint(xt,Tt,At,Pt))),this._precisionModel!==null&&this._precisionModel.makePrecise(Nt),Nt},_t.prototype.smallestInAbsValue=function(xt,Tt,At,Pt){var Nt=xt,Vt=Math.abs(Nt);return Math.abs(Tt)<Vt&&(Nt=Tt,Vt=Math.abs(Tt)),Math.abs(At)<Vt&&(Nt=At,Vt=Math.abs(At)),Math.abs(Pt)<Vt&&(Nt=Pt),Nt},_t.prototype.checkDD=function(xt,Tt,At,Pt,Nt){var Vt=Fl.intersection(xt,Tt,At,Pt),Gt=this.isInSegmentEnvelopes(Vt);hl.out.println("DD in env = "+Gt+"  --------------------- "+Vt),Nt.distance(Vt)>1e-4&&hl.out.println("Distance = "+Nt.distance(Vt))},_t.prototype.intersectionWithNormalization=function(xt,Tt,At,Pt){var Nt=new jr(xt),Vt=new jr(Tt),Gt=new jr(At),qt=new jr(Pt),en=new jr;this.normalizeToEnvCentre(Nt,Vt,Gt,qt,en);var Xt=this.safeHCoordinateIntersection(Nt,Vt,Gt,qt);return Xt.x+=en.x,Xt.y+=en.y,Xt},_t.prototype.computeCollinearIntersection=function(xt,Tt,At,Pt){var Nt=eo.intersects(xt,Tt,At),Vt=eo.intersects(xt,Tt,Pt),Gt=eo.intersects(At,Pt,xt),qt=eo.intersects(At,Pt,Tt);return Nt&&Vt?(this._intPt[0]=At,this._intPt[1]=Pt,vt.COLLINEAR_INTERSECTION):Gt&&qt?(this._intPt[0]=xt,this._intPt[1]=Tt,vt.COLLINEAR_INTERSECTION):Nt&&Gt?(this._intPt[0]=At,this._intPt[1]=xt,!At.equals(xt)||Vt||qt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):Nt&&qt?(this._intPt[0]=At,this._intPt[1]=Tt,!At.equals(Tt)||Vt||Gt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):Vt&&Gt?(this._intPt[0]=Pt,this._intPt[1]=xt,!Pt.equals(xt)||Nt||qt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):Vt&&qt?(this._intPt[0]=Pt,this._intPt[1]=Tt,!Pt.equals(Tt)||Nt||Gt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):vt.NO_INTERSECTION},_t.prototype.normalizeToEnvCentre=function(xt,Tt,At,Pt,Nt){var Vt=xt.x<Tt.x?xt.x:Tt.x,Gt=xt.y<Tt.y?xt.y:Tt.y,qt=xt.x>Tt.x?xt.x:Tt.x,en=xt.y>Tt.y?xt.y:Tt.y,Xt=At.x<Pt.x?At.x:Pt.x,an=At.y<Pt.y?At.y:Pt.y,_n=At.x>Pt.x?At.x:Pt.x,bn=At.y>Pt.y?At.y:Pt.y,En=((Vt>Xt?Vt:Xt)+(qt<_n?qt:_n))/2,un=((Gt>an?Gt:an)+(en<bn?en:bn))/2;Nt.x=En,Nt.y=un,xt.x-=Nt.x,xt.y-=Nt.y,Tt.x-=Nt.x,Tt.y-=Nt.y,At.x-=Nt.x,At.y-=Nt.y,Pt.x-=Nt.x,Pt.y-=Nt.y},_t.prototype.computeIntersect=function(xt,Tt,At,Pt){if(this._isProper=!1,!eo.intersects(xt,Tt,At,Pt))return vt.NO_INTERSECTION;var Nt=Ni.orientationIndex(xt,Tt,At),Vt=Ni.orientationIndex(xt,Tt,Pt);if(Nt>0&&Vt>0||Nt<0&&Vt<0)return vt.NO_INTERSECTION;var Gt=Ni.orientationIndex(At,Pt,xt),qt=Ni.orientationIndex(At,Pt,Tt);return Gt>0&&qt>0||Gt<0&&qt<0?vt.NO_INTERSECTION:Nt===0&&Vt===0&&Gt===0&&qt===0?this.computeCollinearIntersection(xt,Tt,At,Pt):(Nt===0||Vt===0||Gt===0||qt===0?(this._isProper=!1,xt.equals2D(At)||xt.equals2D(Pt)?this._intPt[0]=xt:Tt.equals2D(At)||Tt.equals2D(Pt)?this._intPt[0]=Tt:Nt===0?this._intPt[0]=new jr(At):Vt===0?this._intPt[0]=new jr(Pt):Gt===0?this._intPt[0]=new jr(xt):qt===0&&(this._intPt[0]=new jr(Tt))):(this._isProper=!0,this._intPt[0]=this.intersection(xt,Tt,At,Pt)),vt.POINT_INTERSECTION)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.nearestEndpoint=function(xt,Tt,At,Pt){var Nt=xt,Vt=Ni.distancePointLine(xt,At,Pt),Gt=Ni.distancePointLine(Tt,At,Pt);return Gt<Vt&&(Vt=Gt,Nt=Tt),(Gt=Ni.distancePointLine(At,xt,Tt))<Vt&&(Vt=Gt,Nt=At),(Gt=Ni.distancePointLine(Pt,xt,Tt))<Vt&&(Vt=Gt,Nt=Pt),Nt},_t}(ua),Jd=function(){};Jd.prototype.interfaces_=function(){return[]},Jd.prototype.getClass=function(){return Jd},Jd.orientationIndex=function(vt,_t,xt){var Tt=_t.x-vt.x,At=_t.y-vt.y,Pt=xt.x-_t.x,Nt=xt.y-_t.y;return Jd.signOfDet2x2(Tt,At,Pt,Nt)},Jd.signOfDet2x2=function(vt,_t,xt,Tt){var At=null,Pt=null,Nt=null;if(At=1,vt===0||Tt===0)return _t===0||xt===0?0:_t>0?xt>0?-At:At:xt>0?At:-At;if(_t===0||xt===0)return Tt>0?vt>0?At:-At:vt>0?-At:At;if(_t>0?Tt>0?_t<=Tt||(At=-At,Pt=vt,vt=xt,xt=Pt,Pt=_t,_t=Tt,Tt=Pt):_t<=-Tt?(At=-At,xt=-xt,Tt=-Tt):(Pt=vt,vt=-xt,xt=Pt,Pt=_t,_t=-Tt,Tt=Pt):Tt>0?-_t<=Tt?(At=-At,vt=-vt,_t=-_t):(Pt=-vt,vt=xt,xt=Pt,Pt=-_t,_t=Tt,Tt=Pt):_t>=Tt?(vt=-vt,_t=-_t,xt=-xt,Tt=-Tt):(At=-At,Pt=-vt,vt=-xt,xt=Pt,Pt=-_t,_t=-Tt,Tt=Pt),vt>0){if(!(xt>0)||!(vt<=xt))return At}else{if(xt>0||!(vt>=xt))return-At;At=-At,vt=-vt,xt=-xt}for(;;){if((Tt-=(Nt=Math.floor(xt/vt))*_t)<0)return-At;if(Tt>_t)return At;if(vt>(xt-=Nt*vt)+xt){if(_t<Tt+Tt)return At}else{if(_t>Tt+Tt)return-At;xt=vt-xt,Tt=_t-Tt,At=-At}if(Tt===0)return xt===0?0:-At;if(xt===0||(_t-=(Nt=Math.floor(vt/xt))*Tt)<0)return At;if(_t>Tt)return-At;if(xt>(vt-=Nt*xt)+vt){if(Tt<_t+_t)return-At}else{if(Tt>_t+_t)return At;vt=xt-vt,_t=Tt-_t,At=-At}if(_t===0)return vt===0?0:At;if(vt===0)return-At}};var fu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var vt=arguments[0];this._p=vt};fu.prototype.countSegment=function(vt,_t){if(vt.x<this._p.x&&_t.x<this._p.x)return null;if(this._p.x===_t.x&&this._p.y===_t.y)return this._isPointOnSegment=!0,null;if(vt.y===this._p.y&&_t.y===this._p.y){var xt=vt.x,Tt=_t.x;return xt>Tt&&(xt=_t.x,Tt=vt.x),this._p.x>=xt&&this._p.x<=Tt&&(this._isPointOnSegment=!0),null}if(vt.y>this._p.y&&_t.y<=this._p.y||_t.y>this._p.y&&vt.y<=this._p.y){var At=vt.x-this._p.x,Pt=vt.y-this._p.y,Nt=_t.x-this._p.x,Vt=_t.y-this._p.y,Gt=Jd.signOfDet2x2(At,Pt,Nt,Vt);if(Gt===0)return this._isPointOnSegment=!0,null;Vt<Pt&&(Gt=-Gt),Gt>0&&this._crossingCount++}},fu.prototype.isPointInPolygon=function(){return this.getLocation()!==Kr.EXTERIOR},fu.prototype.getLocation=function(){return this._isPointOnSegment?Kr.BOUNDARY:this._crossingCount%2==1?Kr.INTERIOR:Kr.EXTERIOR},fu.prototype.isOnSegment=function(){return this._isPointOnSegment},fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu},fu.locatePointInRing=function(){if(arguments[0]instanceof jr&&_o(arguments[1],fs)){for(var vt=arguments[0],_t=arguments[1],xt=new fu(vt),Tt=new jr,At=new jr,Pt=1;Pt<_t.size();Pt++)if(_t.getCoordinate(Pt,Tt),_t.getCoordinate(Pt-1,At),xt.countSegment(Tt,At),xt.isOnSegment())return xt.getLocation();return xt.getLocation()}if(arguments[0]instanceof jr&&arguments[1]instanceof Array){for(var Nt=arguments[0],Vt=arguments[1],Gt=new fu(Nt),qt=1;qt<Vt.length;qt++){var en=Vt[qt],Xt=Vt[qt-1];if(Gt.countSegment(en,Xt),Gt.isOnSegment())return Gt.getLocation()}return Gt.getLocation()}};var Ni=function(){},Qd={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.orientationIndex=function(vt,_t,xt){return Fl.orientationIndex(vt,_t,xt)},Ni.signedArea=function(){if(arguments[0]instanceof Array){var vt=arguments[0];if(vt.length<3)return 0;for(var _t=0,xt=vt[0].x,Tt=1;Tt<vt.length-1;Tt++){var At=vt[Tt].x-xt,Pt=vt[Tt+1].y,Nt=vt[Tt-1].y;_t+=At*(Nt-Pt)}return _t/2}if(_o(arguments[0],fs)){var Vt=arguments[0],Gt=Vt.size();if(Gt<3)return 0;var qt=new jr,en=new jr,Xt=new jr;Vt.getCoordinate(0,en),Vt.getCoordinate(1,Xt);var an=en.x;Xt.x-=an;for(var _n=0,bn=1;bn<Gt-1;bn++)qt.y=en.y,en.x=Xt.x,en.y=Xt.y,Vt.getCoordinate(bn+1,Xt),Xt.x-=an,_n+=en.x*(qt.y-Xt.y);return _n/2}},Ni.distanceLineLine=function(vt,_t,xt,Tt){if(vt.equals(_t))return Ni.distancePointLine(vt,xt,Tt);if(xt.equals(Tt))return Ni.distancePointLine(Tt,vt,_t);var At=!1;if(eo.intersects(vt,_t,xt,Tt)){var Pt=(_t.x-vt.x)*(Tt.y-xt.y)-(_t.y-vt.y)*(Tt.x-xt.x);if(Pt===0)At=!0;else{var Nt=(vt.y-xt.y)*(Tt.x-xt.x)-(vt.x-xt.x)*(Tt.y-xt.y),Vt=((vt.y-xt.y)*(_t.x-vt.x)-(vt.x-xt.x)*(_t.y-vt.y))/Pt,Gt=Nt/Pt;(Gt<0||Gt>1||Vt<0||Vt>1)&&(At=!0)}}else At=!0;return At?cc.min(Ni.distancePointLine(vt,xt,Tt),Ni.distancePointLine(_t,xt,Tt),Ni.distancePointLine(xt,vt,_t),Ni.distancePointLine(Tt,vt,_t)):0},Ni.isPointInRing=function(vt,_t){return Ni.locatePointInRing(vt,_t)!==Kr.EXTERIOR},Ni.computeLength=function(vt){var _t=vt.size();if(_t<=1)return 0;var xt=0,Tt=new jr;vt.getCoordinate(0,Tt);for(var At=Tt.x,Pt=Tt.y,Nt=1;Nt<_t;Nt++){vt.getCoordinate(Nt,Tt);var Vt=Tt.x,Gt=Tt.y,qt=Vt-At,en=Gt-Pt;xt+=Math.sqrt(qt*qt+en*en),At=Vt,Pt=Gt}return xt},Ni.isCCW=function(vt){var _t=vt.length-1;if(_t<3)throw new oa("Ring has fewer than 4 points, so orientation cannot be determined");for(var xt=vt[0],Tt=0,At=1;At<=_t;At++){var Pt=vt[At];Pt.y>xt.y&&(xt=Pt,Tt=At)}var Nt=Tt;do(Nt-=1)<0&&(Nt=_t);while(vt[Nt].equals2D(xt)&&Nt!==Tt);var Vt=Tt;do Vt=(Vt+1)%_t;while(vt[Vt].equals2D(xt)&&Vt!==Tt);var Gt=vt[Nt],qt=vt[Vt];if(Gt.equals2D(xt)||qt.equals2D(xt)||Gt.equals2D(qt))return!1;var en=Ni.computeOrientation(Gt,xt,qt),Xt=!1;return Xt=en===0?Gt.x>qt.x:en>0,Xt},Ni.locatePointInRing=function(vt,_t){return fu.locatePointInRing(vt,_t)},Ni.distancePointLinePerpendicular=function(vt,_t,xt){var Tt=(xt.x-_t.x)*(xt.x-_t.x)+(xt.y-_t.y)*(xt.y-_t.y),At=((_t.y-vt.y)*(xt.x-_t.x)-(_t.x-vt.x)*(xt.y-_t.y))/Tt;return Math.abs(At)*Math.sqrt(Tt)},Ni.computeOrientation=function(vt,_t,xt){return Ni.orientationIndex(vt,_t,xt)},Ni.distancePointLine=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];if(_t.length===0)throw new oa("Line array must contain at least one vertex");for(var xt=vt.distance(_t[0]),Tt=0;Tt<_t.length-1;Tt++){var At=Ni.distancePointLine(vt,_t[Tt],_t[Tt+1]);At<xt&&(xt=At)}return xt}if(arguments.length===3){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2];if(Nt.x===Vt.x&&Nt.y===Vt.y)return Pt.distance(Nt);var Gt=(Vt.x-Nt.x)*(Vt.x-Nt.x)+(Vt.y-Nt.y)*(Vt.y-Nt.y),qt=((Pt.x-Nt.x)*(Vt.x-Nt.x)+(Pt.y-Nt.y)*(Vt.y-Nt.y))/Gt;if(qt<=0)return Pt.distance(Nt);if(qt>=1)return Pt.distance(Vt);var en=((Nt.y-Pt.y)*(Vt.x-Nt.x)-(Nt.x-Pt.x)*(Vt.y-Nt.y))/Gt;return Math.abs(en)*Math.sqrt(Gt)}},Ni.isOnLine=function(vt,_t){for(var xt=new Bh,Tt=1;Tt<_t.length;Tt++){var At=_t[Tt-1],Pt=_t[Tt];if(xt.computeIntersection(vt,At,Pt),xt.hasIntersection())return!0}return!1},Qd.CLOCKWISE.get=function(){return-1},Qd.RIGHT.get=function(){return Ni.CLOCKWISE},Qd.COUNTERCLOCKWISE.get=function(){return 1},Qd.LEFT.get=function(){return Ni.COUNTERCLOCKWISE},Qd.COLLINEAR.get=function(){return 0},Qd.STRAIGHT.get=function(){return Ni.COLLINEAR},Object.defineProperties(Ni,Qd);var Du=function(){};Du.prototype.filter=function(vt){},Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du};var po=function(){var vt=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=vt,this._SRID=vt.getSRID()},Bu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};po.prototype.isGeometryCollection=function(){return this.getSortIndex()===po.SORTINDEX_GEOMETRYCOLLECTION},po.prototype.getFactory=function(){return this._factory},po.prototype.getGeometryN=function(vt){return this},po.prototype.getArea=function(){return 0},po.prototype.isRectangle=function(){return!1},po.prototype.equals=function(){if(arguments[0]instanceof po){var vt=arguments[0];return vt!==null&&this.equalsTopo(vt)}if(arguments[0]instanceof Object){var _t=arguments[0];if(!(_t instanceof po))return!1;var xt=_t;return this.equalsExact(xt)}},po.prototype.equalsExact=function(vt){return this===vt||this.equalsExact(vt,0)},po.prototype.geometryChanged=function(){this.apply(po.geometryChangedFilter)},po.prototype.geometryChangedAction=function(){this._envelope=null},po.prototype.equalsNorm=function(vt){return vt!==null&&this.norm().equalsExact(vt.norm())},po.prototype.getLength=function(){return 0},po.prototype.getNumGeometries=function(){return 1},po.prototype.compareTo=function(){if(arguments.length===1){var vt=arguments[0],_t=vt;return this.getSortIndex()!==_t.getSortIndex()?this.getSortIndex()-_t.getSortIndex():this.isEmpty()&&_t.isEmpty()?0:this.isEmpty()?-1:_t.isEmpty()?1:this.compareToSameClass(vt)}if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];return this.getSortIndex()!==xt.getSortIndex()?this.getSortIndex()-xt.getSortIndex():this.isEmpty()&&xt.isEmpty()?0:this.isEmpty()?-1:xt.isEmpty()?1:this.compareToSameClass(xt,Tt)}},po.prototype.getUserData=function(){return this._userData},po.prototype.getSRID=function(){return this._SRID},po.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},po.prototype.checkNotGeometryCollection=function(vt){if(vt.getSortIndex()===po.SORTINDEX_GEOMETRYCOLLECTION)throw new oa("This method does not support GeometryCollection arguments")},po.prototype.equal=function(vt,_t,xt){return xt===0?vt.equals(_t):vt.distance(_t)<=xt},po.prototype.norm=function(){var vt=this.copy();return vt.normalize(),vt},po.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},po.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new eo(this._envelope)},po.prototype.setSRID=function(vt){this._SRID=vt},po.prototype.setUserData=function(vt){this._userData=vt},po.prototype.compare=function(vt,_t){for(var xt=vt.iterator(),Tt=_t.iterator();xt.hasNext()&&Tt.hasNext();){var At=xt.next(),Pt=Tt.next(),Nt=At.compareTo(Pt);if(Nt!==0)return Nt}return xt.hasNext()?1:Tt.hasNext()?-1:0},po.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},po.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===po.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===po.SORTINDEX_MULTIPOINT||this.getSortIndex()===po.SORTINDEX_MULTILINESTRING||this.getSortIndex()===po.SORTINDEX_MULTIPOLYGON},po.prototype.interfaces_=function(){return[Yp,Sc,Cc]},po.prototype.getClass=function(){return po},po.hasNonEmptyElements=function(vt){for(var _t=0;_t<vt.length;_t++)if(!vt[_t].isEmpty())return!0;return!1},po.hasNullElements=function(vt){for(var _t=0;_t<vt.length;_t++)if(vt[_t]===null)return!0;return!1},Bu.serialVersionUID.get=function(){return 8763622679187377e3},Bu.SORTINDEX_POINT.get=function(){return 0},Bu.SORTINDEX_MULTIPOINT.get=function(){return 1},Bu.SORTINDEX_LINESTRING.get=function(){return 2},Bu.SORTINDEX_LINEARRING.get=function(){return 3},Bu.SORTINDEX_MULTILINESTRING.get=function(){return 4},Bu.SORTINDEX_POLYGON.get=function(){return 5},Bu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Bu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Bu.geometryChangedFilter.get=function(){return nm},Object.defineProperties(po,Bu);var nm=function(){};nm.interfaces_=function(){return[Du]},nm.filter=function(vt){vt.geometryChangedAction()};var Fu=function(){};Fu.prototype.filter=function(vt){},Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu};var kc=function(){},zu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};kc.prototype.isInBoundary=function(vt){},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},zu.Mod2BoundaryNodeRule.get=function(){return Wf},zu.EndPointBoundaryNodeRule.get=function(){return ef},zu.MultiValentEndPointBoundaryNodeRule.get=function(){return qf},zu.MonoValentEndPointBoundaryNodeRule.get=function(){return Yf},zu.MOD2_BOUNDARY_RULE.get=function(){return new Wf},zu.ENDPOINT_BOUNDARY_RULE.get=function(){return new ef},zu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new qf},zu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Yf},zu.OGC_SFS_BOUNDARY_RULE.get=function(){return kc.MOD2_BOUNDARY_RULE},Object.defineProperties(kc,zu);var Wf=function(){};Wf.prototype.isInBoundary=function(vt){return vt%2==1},Wf.prototype.interfaces_=function(){return[kc]},Wf.prototype.getClass=function(){return Wf};var ef=function(){};ef.prototype.isInBoundary=function(vt){return vt>0},ef.prototype.interfaces_=function(){return[kc]},ef.prototype.getClass=function(){return ef};var qf=function(){};qf.prototype.isInBoundary=function(vt){return vt>1},qf.prototype.interfaces_=function(){return[kc]},qf.prototype.getClass=function(){return qf};var Yf=function(){};Yf.prototype.isInBoundary=function(vt){return vt===1},Yf.prototype.interfaces_=function(){return[kc]},Yf.prototype.getClass=function(){return Yf};var Ma=function(){};function P0(vt){this.message=vt||""}Ma.prototype.add=function(){},Ma.prototype.addAll=function(){},Ma.prototype.isEmpty=function(){},Ma.prototype.iterator=function(){},Ma.prototype.size=function(){},Ma.prototype.toArray=function(){},Ma.prototype.remove=function(){},P0.prototype=new Error,P0.prototype.name="IndexOutOfBoundsException";var Xf=function(){};Xf.prototype.hasNext=function(){},Xf.prototype.next=function(){},Xf.prototype.remove=function(){};var Gc=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.get=function(){},_t.prototype.set=function(){},_t.prototype.isEmpty=function(){},_t}(Ma);function tf(vt){this.message=vt||""}tf.prototype=new Error,tf.prototype.name="NoSuchElementException";var Oi=function(vt){function _t(){vt.call(this),this.array_=[],arguments[0]instanceof Ma&&this.addAll(arguments[0])}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.ensureCapacity=function(){},_t.prototype.interfaces_=function(){return[vt,Ma]},_t.prototype.add=function(xt){return arguments.length===1?this.array_.push(xt):this.array_.splice(arguments[0],arguments[1]),!0},_t.prototype.clear=function(){this.array_=[]},_t.prototype.addAll=function(xt){for(var Tt=xt.iterator();Tt.hasNext();)this.add(Tt.next());return!0},_t.prototype.set=function(xt,Tt){var At=this.array_[xt];return this.array_[xt]=Tt,At},_t.prototype.iterator=function(){return new by(this)},_t.prototype.get=function(xt){if(xt<0||xt>=this.size())throw new P0;return this.array_[xt]},_t.prototype.isEmpty=function(){return this.array_.length===0},_t.prototype.size=function(){return this.array_.length},_t.prototype.toArray=function(){for(var xt=[],Tt=0,At=this.array_.length;Tt<At;Tt++)xt.push(this.array_[Tt]);return xt},_t.prototype.remove=function(xt){for(var Tt=!1,At=0,Pt=this.array_.length;At<Pt;At++)if(this.array_[At]===xt){this.array_.splice(At,1),Tt=!0;break}return Tt},_t}(Gc),by=function(vt){function _t(xt){vt.call(this),this.arrayList_=xt,this.position_=0}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new tf;return this.arrayList_.get(this.position_++)},_t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},_t.prototype.set=function(xt){return this.arrayList_.set(this.position_-1,xt)},_t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},_t}(Xf),Qp=function(vt){function _t(){if(vt.call(this),arguments.length!==0){if(arguments.length===1){var Tt=arguments[0];this.ensureCapacity(Tt.length),this.add(Tt,!0)}else if(arguments.length===2){var At=arguments[0],Pt=arguments[1];this.ensureCapacity(At.length),this.add(At,Pt)}}}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={coordArrayType:{configurable:!0}};return xt.coordArrayType.get=function(){return new Array(0).fill(null)},_t.prototype.getCoordinate=function(Tt){return this.get(Tt)},_t.prototype.addAll=function(){var Tt=this;if(arguments.length===2){for(var At=arguments[0],Pt=arguments[1],Nt=!1,Vt=At.iterator();Vt.hasNext();)Tt.add(Vt.next(),Pt),Nt=!0;return Nt}return vt.prototype.addAll.apply(this,arguments)},_t.prototype.clone=function(){for(var Tt=vt.prototype.clone.call(this),At=0;At<this.size();At++)Tt.add(At,this.get(At).copy());return Tt},_t.prototype.toCoordinateArray=function(){return this.toArray(_t.coordArrayType)},_t.prototype.add=function(){var Tt=this;if(arguments.length===1){var At=arguments[0];vt.prototype.add.call(this,At)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Pt=arguments[0],Nt=arguments[1];return this.add(Pt,Nt,!0),!0}if(arguments[0]instanceof jr&&typeof arguments[1]=="boolean"){var Vt=arguments[0],Gt=arguments[1];if(!Gt&&this.size()>=1){var qt=this.get(this.size()-1);if(qt.equals2D(Vt))return null}vt.prototype.add.call(this,Vt)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var en=arguments[0],Xt=arguments[1];return this.add(en,Xt),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var an=arguments[0],_n=arguments[1],bn=arguments[2];if(bn)for(var En=0;En<an.length;En++)Tt.add(an[En],_n);else for(var un=an.length-1;un>=0;un--)Tt.add(an[un],_n);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof jr){var Vn=arguments[0],nr=arguments[1],xn=arguments[2];if(!xn){var zn=this.size();if(zn>0){if(Vn>0){var jn=this.get(Vn-1);if(jn.equals2D(nr))return null}if(Vn<zn){var qn=this.get(Vn);if(qn.equals2D(nr))return null}}}vt.prototype.add.call(this,Vn,nr)}}else if(arguments.length===4){var Gn=arguments[0],Zr=arguments[1],Fr=arguments[2],ei=arguments[3],zr=1;Fr>ei&&(zr=-1);for(var si=Fr;si!==ei;si+=zr)Tt.add(Gn[si],Zr);return!0}},_t.prototype.closeRing=function(){this.size()>0&&this.add(new jr(this.get(0)),!1)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},Object.defineProperties(_t,xt),_t}(Oi),qo=function(){},rm={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};rm.ForwardComparator.get=function(){return eg},rm.BidirectionalComparator.get=function(){return nf},rm.coordArrayType.get=function(){return new Array(0).fill(null)},qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo},qo.isRing=function(vt){return!(vt.length<4)&&!!vt[0].equals2D(vt[vt.length-1])},qo.ptNotInList=function(vt,_t){for(var xt=0;xt<vt.length;xt++){var Tt=vt[xt];if(qo.indexOf(Tt,_t)<0)return Tt}return null},qo.scroll=function(vt,_t){var xt=qo.indexOf(_t,vt);if(xt<0)return null;var Tt=new Array(vt.length).fill(null);hl.arraycopy(vt,xt,Tt,0,vt.length-xt),hl.arraycopy(vt,0,Tt,vt.length-xt,xt),hl.arraycopy(Tt,0,vt,0,vt.length)},qo.equals=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];if(vt===_t)return!0;if(vt===null||_t===null||vt.length!==_t.length)return!1;for(var xt=0;xt<vt.length;xt++)if(!vt[xt].equals(_t[xt]))return!1;return!0}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2];if(Tt===At)return!0;if(Tt===null||At===null||Tt.length!==At.length)return!1;for(var Nt=0;Nt<Tt.length;Nt++)if(Pt.compare(Tt[Nt],At[Nt])!==0)return!1;return!0}},qo.intersection=function(vt,_t){for(var xt=new Qp,Tt=0;Tt<vt.length;Tt++)_t.intersects(vt[Tt])&&xt.add(vt[Tt],!0);return xt.toCoordinateArray()},qo.hasRepeatedPoints=function(vt){for(var _t=1;_t<vt.length;_t++)if(vt[_t-1].equals(vt[_t]))return!0;return!1},qo.removeRepeatedPoints=function(vt){return qo.hasRepeatedPoints(vt)?new Qp(vt,!1).toCoordinateArray():vt},qo.reverse=function(vt){for(var _t=vt.length-1,xt=Math.trunc(_t/2),Tt=0;Tt<=xt;Tt++){var At=vt[Tt];vt[Tt]=vt[_t-Tt],vt[_t-Tt]=At}},qo.removeNull=function(vt){for(var _t=0,xt=0;xt<vt.length;xt++)vt[xt]!==null&&_t++;var Tt=new Array(_t).fill(null);if(_t===0)return Tt;for(var At=0,Pt=0;Pt<vt.length;Pt++)vt[Pt]!==null&&(Tt[At++]=vt[Pt]);return Tt},qo.copyDeep=function(){if(arguments.length===1){for(var vt=arguments[0],_t=new Array(vt.length).fill(null),xt=0;xt<vt.length;xt++)_t[xt]=new jr(vt[xt]);return _t}if(arguments.length===5)for(var Tt=arguments[0],At=arguments[1],Pt=arguments[2],Nt=arguments[3],Vt=arguments[4],Gt=0;Gt<Vt;Gt++)Pt[Nt+Gt]=new jr(Tt[At+Gt])},qo.isEqualReversed=function(vt,_t){for(var xt=0;xt<vt.length;xt++){var Tt=vt[xt],At=_t[vt.length-xt-1];if(Tt.compareTo(At)!==0)return!1}return!0},qo.envelope=function(vt){for(var _t=new eo,xt=0;xt<vt.length;xt++)_t.expandToInclude(vt[xt]);return _t},qo.toCoordinateArray=function(vt){return vt.toArray(qo.coordArrayType)},qo.atLeastNCoordinatesOrNothing=function(vt,_t){return _t.length>=vt?_t:[]},qo.indexOf=function(vt,_t){for(var xt=0;xt<_t.length;xt++)if(vt.equals(_t[xt]))return xt;return-1},qo.increasingDirection=function(vt){for(var _t=0;_t<Math.trunc(vt.length/2);_t++){var xt=vt.length-1-_t,Tt=vt[_t].compareTo(vt[xt]);if(Tt!==0)return Tt}return 1},qo.compare=function(vt,_t){for(var xt=0;xt<vt.length&&xt<_t.length;){var Tt=vt[xt].compareTo(_t[xt]);if(Tt!==0)return Tt;xt++}return xt<_t.length?-1:xt<vt.length?1:0},qo.minCoordinate=function(vt){for(var _t=null,xt=0;xt<vt.length;xt++)(_t===null||_t.compareTo(vt[xt])>0)&&(_t=vt[xt]);return _t},qo.extract=function(vt,_t,xt){_t=cc.clamp(_t,0,vt.length);var Tt=(xt=cc.clamp(xt,-1,vt.length))-_t+1;xt<0&&(Tt=0),_t>=vt.length&&(Tt=0),xt<_t&&(Tt=0);var At=new Array(Tt).fill(null);if(Tt===0)return At;for(var Pt=0,Nt=_t;Nt<=xt;Nt++)At[Pt++]=vt[Nt];return At},Object.defineProperties(qo,rm);var eg=function(){};eg.prototype.compare=function(vt,_t){return qo.compare(vt,_t)},eg.prototype.interfaces_=function(){return[jf]},eg.prototype.getClass=function(){return eg};var nf=function(){};nf.prototype.compare=function(vt,_t){var xt=vt,Tt=_t;if(xt.length<Tt.length)return-1;if(xt.length>Tt.length)return 1;if(xt.length===0)return 0;var At=qo.compare(xt,Tt);return qo.isEqualReversed(xt,Tt)?0:At},nf.prototype.OLDcompare=function(vt,_t){var xt=vt,Tt=_t;if(xt.length<Tt.length)return-1;if(xt.length>Tt.length)return 1;if(xt.length===0)return 0;for(var At=qo.increasingDirection(xt),Pt=qo.increasingDirection(Tt),Nt=At>0?0:xt.length-1,Vt=Pt>0?0:xt.length-1,Gt=0;Gt<xt.length;Gt++){var qt=xt[Nt].compareTo(Tt[Vt]);if(qt!==0)return qt;Nt+=At,Vt+=Pt}return 0},nf.prototype.interfaces_=function(){return[jf]},nf.prototype.getClass=function(){return nf};var rf=function(){};rf.prototype.get=function(){},rf.prototype.put=function(){},rf.prototype.size=function(){},rf.prototype.values=function(){},rf.prototype.entrySet=function(){};var e_=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t}(rf);function Zf(vt){this.message=vt||""}function im(){}Zf.prototype=new Error,Zf.prototype.name="OperationNotSupported",im.prototype=new Ma,im.prototype.contains=function(){};var om=function(vt){function _t(){vt.call(this),this.array_=[],arguments[0]instanceof Ma&&this.addAll(arguments[0])}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.contains=function(xt){for(var Tt=0,At=this.array_.length;Tt<At;Tt++)if(this.array_[Tt]===xt)return!0;return!1},_t.prototype.add=function(xt){return!this.contains(xt)&&(this.array_.push(xt),!0)},_t.prototype.addAll=function(xt){for(var Tt=xt.iterator();Tt.hasNext();)this.add(Tt.next());return!0},_t.prototype.remove=function(xt){throw new Error},_t.prototype.size=function(){return this.array_.length},_t.prototype.isEmpty=function(){return this.array_.length===0},_t.prototype.toArray=function(){for(var xt=[],Tt=0,At=this.array_.length;Tt<At;Tt++)xt.push(this.array_[Tt]);return xt},_t.prototype.iterator=function(){return new xy(this)},_t}(im),xy=function(vt){function _t(xt){vt.call(this),this.hashSet_=xt,this.position_=0}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new tf;return this.hashSet_.array_[this.position_++]},_t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},_t.prototype.remove=function(){throw new Zf},_t}(Xf);function wy(vt){return vt===null?0:vt.color}function Xs(vt){return vt===null?null:vt.parent}function fh(vt,_t){vt!==null&&(vt.color=_t)}function O0(vt){return vt===null?null:vt.left}function Ey(vt){return vt===null?null:vt.right}function bl(){this.root_=null,this.size_=0}bl.prototype=new e_,bl.prototype.get=function(vt){for(var _t=this.root_;_t!==null;){var xt=vt.compareTo(_t.key);if(xt<0)_t=_t.left;else{if(!(xt>0))return _t.value;_t=_t.right}}return null},bl.prototype.put=function(vt,_t){if(this.root_===null)return this.root_={key:vt,value:_t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var xt,Tt,At=this.root_;do if(xt=At,(Tt=vt.compareTo(At.key))<0)At=At.left;else{if(!(Tt>0)){var Pt=At.value;return At.value=_t,Pt}At=At.right}while(At!==null);var Nt={key:vt,left:null,right:null,value:_t,parent:xt,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return Tt<0?xt.left=Nt:xt.right=Nt,this.fixAfterInsertion(Nt),this.size_++,null},bl.prototype.fixAfterInsertion=function(vt){var _t=this;for(vt.color=1;vt!=null&&vt!==this.root_&&vt.parent.color===1;)if(Xs(vt)===O0(Xs(Xs(vt)))){var xt=Ey(Xs(Xs(vt)));wy(xt)===1?(fh(Xs(vt),0),fh(xt,0),fh(Xs(Xs(vt)),1),vt=Xs(Xs(vt))):(vt===Ey(Xs(vt))&&(vt=Xs(vt),_t.rotateLeft(vt)),fh(Xs(vt),0),fh(Xs(Xs(vt)),1),_t.rotateRight(Xs(Xs(vt))))}else{var Tt=O0(Xs(Xs(vt)));wy(Tt)===1?(fh(Xs(vt),0),fh(Tt,0),fh(Xs(Xs(vt)),1),vt=Xs(Xs(vt))):(vt===O0(Xs(vt))&&(vt=Xs(vt),_t.rotateRight(vt)),fh(Xs(vt),0),fh(Xs(Xs(vt)),1),_t.rotateLeft(Xs(Xs(vt))))}this.root_.color=0},bl.prototype.values=function(){var vt=new Oi,_t=this.getFirstEntry();if(_t!==null)for(vt.add(_t.value);(_t=bl.successor(_t))!==null;)vt.add(_t.value);return vt},bl.prototype.entrySet=function(){var vt=new om,_t=this.getFirstEntry();if(_t!==null)for(vt.add(_t);(_t=bl.successor(_t))!==null;)vt.add(_t);return vt},bl.prototype.rotateLeft=function(vt){if(vt!=null){var _t=vt.right;vt.right=_t.left,_t.left!=null&&(_t.left.parent=vt),_t.parent=vt.parent,vt.parent===null?this.root_=_t:vt.parent.left===vt?vt.parent.left=_t:vt.parent.right=_t,_t.left=vt,vt.parent=_t}},bl.prototype.rotateRight=function(vt){if(vt!=null){var _t=vt.left;vt.left=_t.right,_t.right!=null&&(_t.right.parent=vt),_t.parent=vt.parent,vt.parent===null?this.root_=_t:vt.parent.right===vt?vt.parent.right=_t:vt.parent.left=_t,_t.right=vt,vt.parent=_t}},bl.prototype.getFirstEntry=function(){var vt=this.root_;if(vt!=null)for(;vt.left!=null;)vt=vt.left;return vt},bl.successor=function(vt){if(vt===null)return null;if(vt.right!==null){for(var _t=vt.right;_t.left!==null;)_t=_t.left;return _t}for(var xt=vt.parent,Tt=vt;xt!==null&&Tt===xt.right;)Tt=xt,xt=xt.parent;return xt},bl.prototype.size=function(){return this.size_};var Kf=function(){};function Sy(){}function Wc(){this.array_=[],arguments[0]instanceof Ma&&this.addAll(arguments[0])}Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Sy.prototype=new im,Wc.prototype=new Sy,Wc.prototype.contains=function(vt){for(var _t=0,xt=this.array_.length;_t<xt;_t++)if(this.array_[_t].compareTo(vt)===0)return!0;return!1},Wc.prototype.add=function(vt){if(this.contains(vt))return!1;for(var _t=0,xt=this.array_.length;_t<xt;_t++)if(this.array_[_t].compareTo(vt)===1)return this.array_.splice(_t,0,vt),!0;return this.array_.push(vt),!0},Wc.prototype.addAll=function(vt){for(var _t=vt.iterator();_t.hasNext();)this.add(_t.next());return!0},Wc.prototype.remove=function(vt){throw new Zf},Wc.prototype.size=function(){return this.array_.length},Wc.prototype.isEmpty=function(){return this.array_.length===0},Wc.prototype.toArray=function(){for(var vt=[],_t=0,xt=this.array_.length;_t<xt;_t++)vt.push(this.array_[_t]);return vt},Wc.prototype.iterator=function(){return new sm(this)};var sm=function(vt){this.treeSet_=vt,this.position_=0};sm.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new tf;return this.treeSet_.array_[this.position_++]},sm.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},sm.prototype.remove=function(){throw new Zf};var Hu=function(){};Hu.sort=function(){var vt,_t,xt,Tt,At=arguments[0];if(arguments.length===1)Tt=function(Nt,Vt){return Nt.compareTo(Vt)},At.sort(Tt);else if(arguments.length===2)xt=arguments[1],Tt=function(Nt,Vt){return xt.compare(Nt,Vt)},At.sort(Tt);else if(arguments.length===3){(_t=At.slice(arguments[1],arguments[2])).sort();var Pt=At.slice(0,arguments[1]).concat(_t,At.slice(arguments[2],At.length));for(At.splice(0,At.length),vt=0;vt<Pt.length;vt++)At.push(Pt[vt])}else if(arguments.length===4)for(_t=At.slice(arguments[1],arguments[2]),xt=arguments[3],Tt=function(Nt,Vt){return xt.compare(Nt,Vt)},_t.sort(Tt),Pt=At.slice(0,arguments[1]).concat(_t,At.slice(arguments[2],At.length)),At.splice(0,At.length),vt=0;vt<Pt.length;vt++)At.push(Pt[vt])},Hu.asList=function(vt){for(var _t=new Oi,xt=0,Tt=vt.length;xt<Tt;xt++)_t.add(vt[xt]);return _t};var Ls=function(){},Ac={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ac.P.get=function(){return 0},Ac.L.get=function(){return 1},Ac.A.get=function(){return 2},Ac.FALSE.get=function(){return-1},Ac.TRUE.get=function(){return-2},Ac.DONTCARE.get=function(){return-3},Ac.SYM_FALSE.get=function(){return"F"},Ac.SYM_TRUE.get=function(){return"T"},Ac.SYM_DONTCARE.get=function(){return"*"},Ac.SYM_P.get=function(){return"0"},Ac.SYM_L.get=function(){return"1"},Ac.SYM_A.get=function(){return"2"},Ls.prototype.interfaces_=function(){return[]},Ls.prototype.getClass=function(){return Ls},Ls.toDimensionSymbol=function(vt){switch(vt){case Ls.FALSE:return Ls.SYM_FALSE;case Ls.TRUE:return Ls.SYM_TRUE;case Ls.DONTCARE:return Ls.SYM_DONTCARE;case Ls.P:return Ls.SYM_P;case Ls.L:return Ls.SYM_L;case Ls.A:return Ls.SYM_A}throw new oa("Unknown dimension value: "+vt)},Ls.toDimensionValue=function(vt){switch(Zp.toUpperCase(vt)){case Ls.SYM_FALSE:return Ls.FALSE;case Ls.SYM_TRUE:return Ls.TRUE;case Ls.SYM_DONTCARE:return Ls.DONTCARE;case Ls.SYM_P:return Ls.P;case Ls.SYM_L:return Ls.L;case Ls.SYM_A:return Ls.A}throw new oa("Unknown dimension symbol: "+vt)},Object.defineProperties(Ls,Ac);var pu=function(){};pu.prototype.filter=function(vt){},pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu};var qc=function(){};qc.prototype.filter=function(vt,_t){},qc.prototype.isDone=function(){},qc.prototype.isGeometryChanged=function(){},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Il=function(vt){function _t(Tt,At){if(vt.call(this,At),this._geometries=Tt||[],vt.hasNullElements(this._geometries))throw new oa("geometries must not contain null elements")}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){for(var Tt=new eo,At=0;At<this._geometries.length;At++)Tt.expandToInclude(this._geometries[At].getEnvelopeInternal());return Tt},_t.prototype.getGeometryN=function(Tt){return this._geometries[Tt]},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_GEOMETRYCOLLECTION},_t.prototype.getCoordinates=function(){for(var Tt=new Array(this.getNumPoints()).fill(null),At=-1,Pt=0;Pt<this._geometries.length;Pt++)for(var Nt=this._geometries[Pt].getCoordinates(),Vt=0;Vt<Nt.length;Vt++)Tt[++At]=Nt[Vt];return Tt},_t.prototype.getArea=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getArea();return Tt},_t.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Pt=arguments[1];if(!this.isEquivalentClass(At))return!1;var Nt=At;if(this._geometries.length!==Nt._geometries.length)return!1;for(var Vt=0;Vt<this._geometries.length;Vt++)if(!Tt._geometries[Vt].equalsExact(Nt._geometries[Vt],Pt))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){for(var Tt=0;Tt<this._geometries.length;Tt++)this._geometries[Tt].normalize();Hu.sort(this._geometries)},_t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},_t.prototype.getBoundaryDimension=function(){for(var Tt=Ls.FALSE,At=0;At<this._geometries.length;At++)Tt=Math.max(Tt,this._geometries[At].getBoundaryDimension());return Tt},_t.prototype.getDimension=function(){for(var Tt=Ls.FALSE,At=0;At<this._geometries.length;At++)Tt=Math.max(Tt,this._geometries[At].getDimension());return Tt},_t.prototype.getLength=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getLength();return Tt},_t.prototype.getNumPoints=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getNumPoints();return Tt},_t.prototype.getNumGeometries=function(){return this._geometries.length},_t.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Pt=0;Pt<this._geometries.length;Pt++)At[Pt]=this._geometries[Pt].reverse();return this.getFactory().createGeometryCollection(At)},_t.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){var At=arguments[0],Pt=new Wc(Hu.asList(this._geometries)),Nt=new Wc(Hu.asList(At._geometries));return this.compare(Pt,Nt)}if(arguments.length===2){for(var Vt=arguments[0],Gt=arguments[1],qt=Vt,en=this.getNumGeometries(),Xt=qt.getNumGeometries(),an=0;an<en&&an<Xt;){var _n=Tt.getGeometryN(an),bn=qt.getGeometryN(an),En=_n.compareToSameClass(bn,Gt);if(En!==0)return En;an++}return an<en?1:an<Xt?-1:0}},_t.prototype.apply=function(){var Tt=this;if(_o(arguments[0],Fu))for(var At=arguments[0],Pt=0;Pt<this._geometries.length;Pt++)Tt._geometries[Pt].apply(At);else if(_o(arguments[0],qc)){var Nt=arguments[0];if(this._geometries.length===0)return null;for(var Vt=0;Vt<this._geometries.length&&(Tt._geometries[Vt].apply(Nt),!Nt.isDone());Vt++);Nt.isGeometryChanged()&&this.geometryChanged()}else if(_o(arguments[0],pu)){var Gt=arguments[0];Gt.filter(this);for(var qt=0;qt<this._geometries.length;qt++)Tt._geometries[qt].apply(Gt)}else if(_o(arguments[0],Du)){var en=arguments[0];en.filter(this);for(var Xt=0;Xt<this._geometries.length;Xt++)Tt._geometries[Xt].apply(en)}},_t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),$o.shouldNeverReachHere(),null},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);Tt._geometries=new Array(this._geometries.length).fill(null);for(var At=0;At<this._geometries.length;At++)Tt._geometries[At]=this._geometries[At].clone();return Tt},_t.prototype.getGeometryType=function(){return"GeometryCollection"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.isEmpty=function(){for(var Tt=0;Tt<this._geometries.length;Tt++)if(!this._geometries[Tt].isEmpty())return!1;return!0},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(_t,xt),_t}(po),Fh=function(vt){function _t(){vt.apply(this,arguments)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return po.SORTINDEX_MULTILINESTRING},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return this.isClosed()?Ls.FALSE:0},_t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var Tt=0;Tt<this._geometries.length;Tt++)if(!this._geometries[Tt].isClosed())return!1;return!0},_t.prototype.getDimension=function(){return 1},_t.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Pt=0;Pt<this._geometries.length;Pt++)At[Tt-1-Pt]=this._geometries[Pt].reverse();return this.getFactory().createMultiLineString(At)},_t.prototype.getBoundary=function(){return new zl(this).getBoundary()},_t.prototype.getGeometryType=function(){return"MultiLineString"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.interfaces_=function(){return[Kf]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(_t,xt),_t}(Il),zl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var vt=arguments[0],_t=kc.MOD2_BOUNDARY_RULE;this._geom=vt,this._geomFact=vt.getFactory(),this._bnRule=_t}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];this._geom=xt,this._geomFact=xt.getFactory(),this._bnRule=Tt}};zl.prototype.boundaryMultiLineString=function(vt){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var _t=this.computeBoundaryCoordinates(vt);return _t.length===1?this._geomFact.createPoint(_t[0]):this._geomFact.createMultiPointFromCoords(_t)},zl.prototype.getBoundary=function(){return this._geom instanceof sa?this.boundaryLineString(this._geom):this._geom instanceof Fh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},zl.prototype.boundaryLineString=function(vt){return this._geom.isEmpty()?this.getEmptyMultiPoint():vt.isClosed()?this._bnRule.isInBoundary(2)?vt.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([vt.getStartPoint(),vt.getEndPoint()])},zl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},zl.prototype.computeBoundaryCoordinates=function(vt){var _t=this,xt=new Oi;this._endpointMap=new bl;for(var Tt=0;Tt<vt.getNumGeometries();Tt++){var At=vt.getGeometryN(Tt);At.getNumPoints()!==0&&(_t.addEndpoint(At.getCoordinateN(0)),_t.addEndpoint(At.getCoordinateN(At.getNumPoints()-1)))}for(var Pt=this._endpointMap.entrySet().iterator();Pt.hasNext();){var Nt=Pt.next(),Vt=Nt.getValue().count;_t._bnRule.isInBoundary(Vt)&&xt.add(Nt.getKey())}return qo.toCoordinateArray(xt)},zl.prototype.addEndpoint=function(vt){var _t=this._endpointMap.get(vt);_t===null&&(_t=new Jf,this._endpointMap.put(vt,_t)),_t.count++},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.getBoundary=function(){if(arguments.length===1){var vt=arguments[0],_t=new zl(vt);return _t.getBoundary()}if(arguments.length===2){var xt=arguments[0],Tt=arguments[1],At=new zl(xt,Tt);return At.getBoundary()}};var Jf=function(){this.count=null};function Cy(){}function t_(){}Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var n_=function(){};function r_(){}function i_(){}function Ty(){}var Lc=function(){},M0={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.chars=function(vt,_t){for(var xt=new Array(_t).fill(null),Tt=0;Tt<_t;Tt++)xt[Tt]=vt;return String(xt)},Lc.getStackTrace=function(){if(arguments.length===1){var vt=arguments[0],_t=new r_,xt=new Cy;return vt.printStackTrace(xt),_t.toString()}if(arguments.length===2){for(var Tt=arguments[0],At=arguments[1],Pt="",Nt=new t_(Lc.getStackTrace(Tt)),Vt=new Ty,Gt=0;Gt<At;Gt++)try{Pt+=Vt.readLine()+Lc.NEWLINE}catch(qt){if(!(qt instanceof i_))throw qt;$o.shouldNeverReachHere()}return Pt}},Lc.split=function(vt,_t){for(var xt=_t.length,Tt=new Oi,At=""+vt,Pt=At.indexOf(_t);Pt>=0;){var Nt=At.substring(0,Pt);Tt.add(Nt),Pt=(At=At.substring(Pt+xt)).indexOf(_t)}At.length>0&&Tt.add(At);for(var Vt=new Array(Tt.size()).fill(null),Gt=0;Gt<Vt.length;Gt++)Vt[Gt]=Tt.get(Gt);return Vt},Lc.toString=function(){if(arguments.length===1){var vt=arguments[0];return Lc.SIMPLE_ORDINATE_FORMAT.format(vt)}},Lc.spaces=function(vt){return Lc.chars(" ",vt)},M0.NEWLINE.get=function(){return hl.getProperty("line.separator")},M0.SIMPLE_ORDINATE_FORMAT.get=function(){return new n_},Object.defineProperties(Lc,M0);var xa=function(){};xa.prototype.interfaces_=function(){return[]},xa.prototype.getClass=function(){return xa},xa.copyCoord=function(vt,_t,xt,Tt){for(var At=Math.min(vt.getDimension(),xt.getDimension()),Pt=0;Pt<At;Pt++)xt.setOrdinate(Tt,Pt,vt.getOrdinate(_t,Pt))},xa.isRing=function(vt){var _t=vt.size();return _t===0||!(_t<=3)&&vt.getOrdinate(0,fs.X)===vt.getOrdinate(_t-1,fs.X)&&vt.getOrdinate(0,fs.Y)===vt.getOrdinate(_t-1,fs.Y)},xa.isEqual=function(vt,_t){var xt=vt.size();if(xt!==_t.size())return!1;for(var Tt=Math.min(vt.getDimension(),_t.getDimension()),At=0;At<xt;At++)for(var Pt=0;Pt<Tt;Pt++){var Nt=vt.getOrdinate(At,Pt),Vt=_t.getOrdinate(At,Pt);if(vt.getOrdinate(At,Pt)!==_t.getOrdinate(At,Pt)&&(!ko.isNaN(Nt)||!ko.isNaN(Vt)))return!1}return!0},xa.extend=function(vt,_t,xt){var Tt=vt.create(xt,_t.getDimension()),At=_t.size();if(xa.copy(_t,0,Tt,0,At),At>0)for(var Pt=At;Pt<xt;Pt++)xa.copy(_t,At-1,Tt,Pt,1);return Tt},xa.reverse=function(vt){for(var _t=vt.size()-1,xt=Math.trunc(_t/2),Tt=0;Tt<=xt;Tt++)xa.swap(vt,Tt,_t-Tt)},xa.swap=function(vt,_t,xt){if(_t===xt)return null;for(var Tt=0;Tt<vt.getDimension();Tt++){var At=vt.getOrdinate(_t,Tt);vt.setOrdinate(_t,Tt,vt.getOrdinate(xt,Tt)),vt.setOrdinate(xt,Tt,At)}},xa.copy=function(vt,_t,xt,Tt,At){for(var Pt=0;Pt<At;Pt++)xa.copyCoord(vt,_t+Pt,xt,Tt+Pt)},xa.toString=function(){if(arguments.length===1){var vt=arguments[0],_t=vt.size();if(_t===0)return"()";var xt=vt.getDimension(),Tt=new uu;Tt.append("(");for(var At=0;At<_t;At++){At>0&&Tt.append(" ");for(var Pt=0;Pt<xt;Pt++)Pt>0&&Tt.append(","),Tt.append(Lc.toString(vt.getOrdinate(At,Pt)))}return Tt.append(")"),Tt.toString()}},xa.ensureValidRing=function(vt,_t){var xt=_t.size();return xt===0?_t:xt<=3?xa.createClosedRing(vt,_t,4):_t.getOrdinate(0,fs.X)===_t.getOrdinate(xt-1,fs.X)&&_t.getOrdinate(0,fs.Y)===_t.getOrdinate(xt-1,fs.Y)?_t:xa.createClosedRing(vt,_t,xt+1)},xa.createClosedRing=function(vt,_t,xt){var Tt=vt.create(xt,_t.getDimension()),At=_t.size();xa.copy(_t,0,Tt,0,At);for(var Pt=At;Pt<xt;Pt++)xa.copy(_t,0,Tt,Pt,1);return Tt};var sa=function(vt){function _t(Tt,At){vt.call(this,At),this._points=null,this.init(Tt)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new eo:this._points.expandEnvelope(new eo)},_t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_LINESTRING},_t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},_t.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Pt=arguments[1];if(!this.isEquivalentClass(At))return!1;var Nt=At;if(this._points.size()!==Nt._points.size())return!1;for(var Vt=0;Vt<this._points.size();Vt++)if(!Tt.equal(Tt._points.getCoordinate(Vt),Nt._points.getCoordinate(Vt),Pt))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){for(var Tt=this,At=0;At<Math.trunc(this._points.size()/2);At++){var Pt=Tt._points.size()-1-At;if(!Tt._points.getCoordinate(At).equals(Tt._points.getCoordinate(Pt)))return Tt._points.getCoordinate(At).compareTo(Tt._points.getCoordinate(Pt))>0&&xa.reverse(Tt._points),null}},_t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},_t.prototype.getBoundaryDimension=function(){return this.isClosed()?Ls.FALSE:0},_t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},_t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},_t.prototype.getDimension=function(){return 1},_t.prototype.getLength=function(){return Ni.computeLength(this._points)},_t.prototype.getNumPoints=function(){return this._points.size()},_t.prototype.reverse=function(){var Tt=this._points.copy();return xa.reverse(Tt),this.getFactory().createLineString(Tt)},_t.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){for(var At=arguments[0],Pt=At,Nt=0,Vt=0;Nt<this._points.size()&&Vt<Pt._points.size();){var Gt=Tt._points.getCoordinate(Nt).compareTo(Pt._points.getCoordinate(Vt));if(Gt!==0)return Gt;Nt++,Vt++}return Nt<this._points.size()?1:Vt<Pt._points.size()?-1:0}if(arguments.length===2){var qt=arguments[0],en=arguments[1],Xt=qt;return en.compare(this._points,Xt._points)}},_t.prototype.apply=function(){var Tt=this;if(_o(arguments[0],Fu))for(var At=arguments[0],Pt=0;Pt<this._points.size();Pt++)At.filter(Tt._points.getCoordinate(Pt));else if(_o(arguments[0],qc)){var Nt=arguments[0];if(this._points.size()===0)return null;for(var Vt=0;Vt<this._points.size()&&(Nt.filter(Tt._points,Vt),!Nt.isDone());Vt++);Nt.isGeometryChanged()&&this.geometryChanged()}else if(_o(arguments[0],pu)){var Gt=arguments[0];Gt.filter(this)}else if(_o(arguments[0],Du)){var qt=arguments[0];qt.filter(this)}},_t.prototype.getBoundary=function(){return new zl(this).getBoundary()},_t.prototype.isEquivalentClass=function(Tt){return Tt instanceof _t},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);return Tt._points=this._points.clone(),Tt},_t.prototype.getCoordinateN=function(Tt){return this._points.getCoordinate(Tt)},_t.prototype.getGeometryType=function(){return"LineString"},_t.prototype.copy=function(){return new _t(this._points.copy(),this._factory)},_t.prototype.getCoordinateSequence=function(){return this._points},_t.prototype.isEmpty=function(){return this._points.size()===0},_t.prototype.init=function(Tt){if(Tt===null&&(Tt=this.getFactory().getCoordinateSequenceFactory().create([])),Tt.size()===1)throw new oa("Invalid number of points in LineString (found "+Tt.size()+" - must be 0 or >= 2)");this._points=Tt},_t.prototype.isCoordinate=function(Tt){for(var At=0;At<this._points.size();At++)if(this._points.getCoordinate(At).equals(Tt))return!0;return!1},_t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},_t.prototype.getPointN=function(Tt){return this.getFactory().createPoint(this._points.getCoordinate(Tt))},_t.prototype.interfaces_=function(){return[Kf]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(_t,xt),_t}(po),Yc=function(){};Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc};var Jl=function(vt){function _t(Tt,At){vt.call(this,At),this._coordinates=Tt||null,this.init(this._coordinates)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new eo;var Tt=new eo;return Tt.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),Tt},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_POINT},_t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&(!(!this.isEmpty()||!Tt.isEmpty())||this.isEmpty()===Tt.isEmpty()&&this.equal(Tt.getCoordinate(),this.getCoordinate(),At))}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){},_t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},_t.prototype.getBoundaryDimension=function(){return Ls.FALSE},_t.prototype.getDimension=function(){return 0},_t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},_t.prototype.reverse=function(){return this.copy()},_t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},_t.prototype.compareToSameClass=function(){if(arguments.length===1){var Tt=arguments[0],At=Tt;return this.getCoordinate().compareTo(At.getCoordinate())}if(arguments.length===2){var Pt=arguments[0],Nt=arguments[1],Vt=Pt;return Nt.compare(this._coordinates,Vt._coordinates)}},_t.prototype.apply=function(){if(_o(arguments[0],Fu)){var Tt=arguments[0];if(this.isEmpty())return null;Tt.filter(this.getCoordinate())}else if(_o(arguments[0],qc)){var At=arguments[0];if(this.isEmpty())return null;At.filter(this._coordinates,0),At.isGeometryChanged()&&this.geometryChanged()}else if(_o(arguments[0],pu)){var Pt=arguments[0];Pt.filter(this)}else if(_o(arguments[0],Du)){var Nt=arguments[0];Nt.filter(this)}},_t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);return Tt._coordinates=this._coordinates.clone(),Tt},_t.prototype.getGeometryType=function(){return"Point"},_t.prototype.copy=function(){return new _t(this._coordinates.copy(),this._factory)},_t.prototype.getCoordinateSequence=function(){return this._coordinates},_t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},_t.prototype.isEmpty=function(){return this._coordinates.size()===0},_t.prototype.init=function(Tt){Tt===null&&(Tt=this.getFactory().getCoordinateSequenceFactory().create([])),$o.isTrue(Tt.size()<=1),this._coordinates=Tt},_t.prototype.isSimple=function(){return!0},_t.prototype.interfaces_=function(){return[Yc]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(_t,xt),_t}(po),zh=function(){};zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var $a=function(vt){function _t(Tt,At,Pt){if(vt.call(this,Pt),this._shell=null,this._holes=null,Tt===null&&(Tt=this.getFactory().createLinearRing()),At===null&&(At=[]),vt.hasNullElements(At))throw new oa("holes must not contain null elements");if(Tt.isEmpty()&&vt.hasNonEmptyElements(At))throw new oa("shell is empty but holes are not");this._shell=Tt,this._holes=At}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_POLYGON},_t.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var Tt=new Array(this.getNumPoints()).fill(null),At=-1,Pt=this._shell.getCoordinates(),Nt=0;Nt<Pt.length;Nt++)Tt[++At]=Pt[Nt];for(var Vt=0;Vt<this._holes.length;Vt++)for(var Gt=this._holes[Vt].getCoordinates(),qt=0;qt<Gt.length;qt++)Tt[++At]=Gt[qt];return Tt},_t.prototype.getArea=function(){var Tt=0;Tt+=Math.abs(Ni.signedArea(this._shell.getCoordinateSequence()));for(var At=0;At<this._holes.length;At++)Tt-=Math.abs(Ni.signedArea(this._holes[At].getCoordinateSequence()));return Tt},_t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var Tt=this._shell.getCoordinateSequence(),At=this.getEnvelopeInternal(),Pt=0;Pt<5;Pt++){var Nt=Tt.getX(Pt);if(Nt!==At.getMinX()&&Nt!==At.getMaxX())return!1;var Vt=Tt.getY(Pt);if(Vt!==At.getMinY()&&Vt!==At.getMaxY())return!1}for(var Gt=Tt.getX(0),qt=Tt.getY(0),en=1;en<=4;en++){var Xt=Tt.getX(en),an=Tt.getY(en);if(Xt!==Gt==(an!==qt))return!1;Gt=Xt,qt=an}return!0},_t.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Pt=arguments[1];if(!this.isEquivalentClass(At))return!1;var Nt=At,Vt=this._shell,Gt=Nt._shell;if(!Vt.equalsExact(Gt,Pt)||this._holes.length!==Nt._holes.length)return!1;for(var qt=0;qt<this._holes.length;qt++)if(!Tt._holes[qt].equalsExact(Nt._holes[qt],Pt))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){var Tt=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var At=0;At<this._holes.length;At++)Tt.normalize(Tt._holes[At],!1);Hu.sort(this._holes)}else if(arguments.length===2){var Pt=arguments[0],Nt=arguments[1];if(Pt.isEmpty())return null;var Vt=new Array(Pt.getCoordinates().length-1).fill(null);hl.arraycopy(Pt.getCoordinates(),0,Vt,0,Vt.length);var Gt=qo.minCoordinate(Pt.getCoordinates());qo.scroll(Vt,Gt),hl.arraycopy(Vt,0,Pt.getCoordinates(),0,Vt.length),Pt.getCoordinates()[Vt.length]=Vt[0],Ni.isCCW(Pt.getCoordinates())===Nt&&qo.reverse(Pt.getCoordinates())}},_t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},_t.prototype.getNumInteriorRing=function(){return this._holes.length},_t.prototype.getBoundaryDimension=function(){return 1},_t.prototype.getDimension=function(){return 2},_t.prototype.getLength=function(){var Tt=0;Tt+=this._shell.getLength();for(var At=0;At<this._holes.length;At++)Tt+=this._holes[At].getLength();return Tt},_t.prototype.getNumPoints=function(){for(var Tt=this._shell.getNumPoints(),At=0;At<this._holes.length;At++)Tt+=this._holes[At].getNumPoints();return Tt},_t.prototype.reverse=function(){var Tt=this.copy();Tt._shell=this._shell.copy().reverse(),Tt._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Tt._holes[At]=this._holes[At].copy().reverse();return Tt},_t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},_t.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){var At=arguments[0],Pt=this._shell,Nt=At._shell;return Pt.compareToSameClass(Nt)}if(arguments.length===2){var Vt=arguments[0],Gt=arguments[1],qt=Vt,en=this._shell,Xt=qt._shell,an=en.compareToSameClass(Xt,Gt);if(an!==0)return an;for(var _n=this.getNumInteriorRing(),bn=qt.getNumInteriorRing(),En=0;En<_n&&En<bn;){var un=Tt.getInteriorRingN(En),Vn=qt.getInteriorRingN(En),nr=un.compareToSameClass(Vn,Gt);if(nr!==0)return nr;En++}return En<_n?1:En<bn?-1:0}},_t.prototype.apply=function(Tt){var At=this;if(_o(Tt,Fu)){this._shell.apply(Tt);for(var Pt=0;Pt<this._holes.length;Pt++)At._holes[Pt].apply(Tt)}else if(_o(Tt,qc)){if(this._shell.apply(Tt),!Tt.isDone())for(var Nt=0;Nt<this._holes.length&&(At._holes[Nt].apply(Tt),!Tt.isDone());Nt++);Tt.isGeometryChanged()&&this.geometryChanged()}else if(_o(Tt,pu))Tt.filter(this);else if(_o(Tt,Du)){Tt.filter(this),this._shell.apply(Tt);for(var Vt=0;Vt<this._holes.length;Vt++)At._holes[Vt].apply(Tt)}},_t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var Tt=new Array(this._holes.length+1).fill(null);Tt[0]=this._shell;for(var At=0;At<this._holes.length;At++)Tt[At+1]=this._holes[At];return Tt.length<=1?this.getFactory().createLinearRing(Tt[0].getCoordinateSequence()):this.getFactory().createMultiLineString(Tt)},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);Tt._shell=this._shell.clone(),Tt._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Tt._holes[At]=this._holes[At].clone();return Tt},_t.prototype.getGeometryType=function(){return"Polygon"},_t.prototype.copy=function(){for(var Tt=this._shell.copy(),At=new Array(this._holes.length).fill(null),Pt=0;Pt<At.length;Pt++)At[Pt]=this._holes[Pt].copy();return new _t(Tt,At,this._factory)},_t.prototype.getExteriorRing=function(){return this._shell},_t.prototype.isEmpty=function(){return this._shell.isEmpty()},_t.prototype.getInteriorRingN=function(Tt){return this._holes[Tt]},_t.prototype.interfaces_=function(){return[zh]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(_t,xt),_t}(po),Qf=function(vt){function _t(){vt.apply(this,arguments)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return po.SORTINDEX_MULTIPOINT},_t.prototype.isValid=function(){return!0},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.getCoordinate=function(){if(arguments.length===1){var Tt=arguments[0];return this._geometries[Tt].getCoordinate()}return vt.prototype.getCoordinate.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return Ls.FALSE},_t.prototype.getDimension=function(){return 0},_t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},_t.prototype.getGeometryType=function(){return"MultiPoint"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.interfaces_=function(){return[Yc]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(_t,xt),_t}(Il),Vu=function(vt){function _t(Tt,At){Tt instanceof jr&&At instanceof Yo&&(Tt=At.getCoordinateSequenceFactory().create(Tt)),vt.call(this,Tt,At),this.validateConstruction()}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return po.SORTINDEX_LINEARRING},_t.prototype.getBoundaryDimension=function(){return Ls.FALSE},_t.prototype.isClosed=function(){return!!this.isEmpty()||vt.prototype.isClosed.call(this)},_t.prototype.reverse=function(){var Tt=this._points.copy();return xa.reverse(Tt),this.getFactory().createLinearRing(Tt)},_t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!vt.prototype.isClosed.call(this))throw new oa("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<_t.MINIMUM_VALID_SIZE)throw new oa("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},_t.prototype.getGeometryType=function(){return"LinearRing"},_t.prototype.copy=function(){return new _t(this._points.copy(),this._factory)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},xt.MINIMUM_VALID_SIZE.get=function(){return 4},xt.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(_t,xt),_t}(sa),ju=function(vt){function _t(){vt.apply(this,arguments)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return po.SORTINDEX_MULTIPOLYGON},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return 1},_t.prototype.getDimension=function(){return 2},_t.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Pt=0;Pt<this._geometries.length;Pt++)At[Pt]=this._geometries[Pt].reverse();return this.getFactory().createMultiPolygon(At)},_t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var Tt=new Oi,At=0;At<this._geometries.length;At++)for(var Pt=this._geometries[At].getBoundary(),Nt=0;Nt<Pt.getNumGeometries();Nt++)Tt.add(Pt.getGeometryN(Nt));var Vt=new Array(Tt.size()).fill(null);return this.getFactory().createMultiLineString(Tt.toArray(Vt))},_t.prototype.getGeometryType=function(){return"MultiPolygon"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.interfaces_=function(){return[zh]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(_t,xt),_t}(Il),Ic=function(vt){this._factory=vt||null,this._isUserDataCopied=!1},am={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ic.prototype.setCopyUserData=function(vt){this._isUserDataCopied=vt},Ic.prototype.edit=function(vt,_t){if(vt===null)return null;var xt=this.editInternal(vt,_t);return this._isUserDataCopied&&xt.setUserData(vt.getUserData()),xt},Ic.prototype.editInternal=function(vt,_t){return this._factory===null&&(this._factory=vt.getFactory()),vt instanceof Il?this.editGeometryCollection(vt,_t):vt instanceof $a?this.editPolygon(vt,_t):vt instanceof Jl||vt instanceof sa?_t.edit(vt,this._factory):($o.shouldNeverReachHere("Unsupported Geometry class: "+vt.getClass().getName()),null)},Ic.prototype.editGeometryCollection=function(vt,_t){for(var xt=_t.edit(vt,this._factory),Tt=new Oi,At=0;At<xt.getNumGeometries();At++){var Pt=this.edit(xt.getGeometryN(At),_t);Pt===null||Pt.isEmpty()||Tt.add(Pt)}return xt.getClass()===Qf?this._factory.createMultiPoint(Tt.toArray([])):xt.getClass()===Fh?this._factory.createMultiLineString(Tt.toArray([])):xt.getClass()===ju?this._factory.createMultiPolygon(Tt.toArray([])):this._factory.createGeometryCollection(Tt.toArray([]))},Ic.prototype.editPolygon=function(vt,_t){var xt=_t.edit(vt,this._factory);if(xt===null&&(xt=this._factory.createPolygon(null)),xt.isEmpty())return xt;var Tt=this.edit(xt.getExteriorRing(),_t);if(Tt===null||Tt.isEmpty())return this._factory.createPolygon();for(var At=new Oi,Pt=0;Pt<xt.getNumInteriorRing();Pt++){var Nt=this.edit(xt.getInteriorRingN(Pt),_t);Nt===null||Nt.isEmpty()||At.add(Nt)}return this._factory.createPolygon(Tt,At.toArray([]))},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.GeometryEditorOperation=function(){},am.NoOpGeometryOperation.get=function(){return tg},am.CoordinateOperation.get=function(){return ng},am.CoordinateSequenceOperation.get=function(){return rg},Object.defineProperties(Ic,am);var tg=function(){};tg.prototype.edit=function(vt,_t){return vt},tg.prototype.interfaces_=function(){return[Ic.GeometryEditorOperation]},tg.prototype.getClass=function(){return tg};var ng=function(){};ng.prototype.edit=function(vt,_t){var xt=this.editCoordinates(vt.getCoordinates(),vt);return xt===null?vt:vt instanceof Vu?_t.createLinearRing(xt):vt instanceof sa?_t.createLineString(xt):vt instanceof Jl?xt.length>0?_t.createPoint(xt[0]):_t.createPoint():vt},ng.prototype.interfaces_=function(){return[Ic.GeometryEditorOperation]},ng.prototype.getClass=function(){return ng};var rg=function(){};rg.prototype.edit=function(vt,_t){return vt instanceof Vu?_t.createLinearRing(this.edit(vt.getCoordinateSequence(),vt)):vt instanceof sa?_t.createLineString(this.edit(vt.getCoordinateSequence(),vt)):vt instanceof Jl?_t.createPoint(this.edit(vt.getCoordinateSequence(),vt)):vt},rg.prototype.interfaces_=function(){return[Ic.GeometryEditorOperation]},rg.prototype.getClass=function(){return rg};var wa=function(){var vt=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var _t=arguments[0];this._coordinates=new Array(_t).fill(null);for(var xt=0;xt<_t;xt++)vt._coordinates[xt]=new jr}else if(_o(arguments[0],fs)){var Tt=arguments[0];if(Tt===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=Tt.getDimension(),this._coordinates=new Array(Tt.size()).fill(null);for(var At=0;At<this._coordinates.length;At++)vt._coordinates[At]=Tt.getCoordinateCopy(At)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Pt=arguments[0],Nt=arguments[1];this._coordinates=Pt,this._dimension=Nt,Pt===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Vt=arguments[0],Gt=arguments[1];this._coordinates=new Array(Vt).fill(null),this._dimension=Gt;for(var qt=0;qt<Vt;qt++)vt._coordinates[qt]=new jr}}},ky={serialVersionUID:{configurable:!0}};wa.prototype.setOrdinate=function(vt,_t,xt){switch(_t){case fs.X:this._coordinates[vt].x=xt;break;case fs.Y:this._coordinates[vt].y=xt;break;case fs.Z:this._coordinates[vt].z=xt;break;default:throw new oa("invalid ordinateIndex")}},wa.prototype.size=function(){return this._coordinates.length},wa.prototype.getOrdinate=function(vt,_t){switch(_t){case fs.X:return this._coordinates[vt].x;case fs.Y:return this._coordinates[vt].y;case fs.Z:return this._coordinates[vt].z}return ko.NaN},wa.prototype.getCoordinate=function(){if(arguments.length===1){var vt=arguments[0];return this._coordinates[vt]}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];xt.x=this._coordinates[_t].x,xt.y=this._coordinates[_t].y,xt.z=this._coordinates[_t].z}},wa.prototype.getCoordinateCopy=function(vt){return new jr(this._coordinates[vt])},wa.prototype.getDimension=function(){return this._dimension},wa.prototype.getX=function(vt){return this._coordinates[vt].x},wa.prototype.clone=function(){for(var vt=new Array(this.size()).fill(null),_t=0;_t<this._coordinates.length;_t++)vt[_t]=this._coordinates[_t].clone();return new wa(vt,this._dimension)},wa.prototype.expandEnvelope=function(vt){for(var _t=0;_t<this._coordinates.length;_t++)vt.expandToInclude(this._coordinates[_t]);return vt},wa.prototype.copy=function(){for(var vt=new Array(this.size()).fill(null),_t=0;_t<this._coordinates.length;_t++)vt[_t]=this._coordinates[_t].copy();return new wa(vt,this._dimension)},wa.prototype.toString=function(){if(this._coordinates.length>0){var vt=new uu(17*this._coordinates.length);vt.append("("),vt.append(this._coordinates[0]);for(var _t=1;_t<this._coordinates.length;_t++)vt.append(", "),vt.append(this._coordinates[_t]);return vt.append(")"),vt.toString()}return"()"},wa.prototype.getY=function(vt){return this._coordinates[vt].y},wa.prototype.toCoordinateArray=function(){return this._coordinates},wa.prototype.interfaces_=function(){return[fs,Cc]},wa.prototype.getClass=function(){return wa},ky.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(wa,ky);var Uu=function(){},$0={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Uu.prototype.readResolve=function(){return Uu.instance()},Uu.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var vt=arguments[0];return new wa(vt)}if(_o(arguments[0],fs)){var _t=arguments[0];return new wa(_t)}}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];return Tt>3&&(Tt=3),Tt<2?new wa(xt):new wa(xt,Tt)}},Uu.prototype.interfaces_=function(){return[Uf,Cc]},Uu.prototype.getClass=function(){return Uu},Uu.instance=function(){return Uu.instanceObject},$0.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},$0.instanceObject.get=function(){return new Uu},Object.defineProperties(Uu,$0);var Ay=function(vt){function _t(){vt.call(this),this.map_=new Map}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.get=function(xt){return this.map_.get(xt)||null},_t.prototype.put=function(xt,Tt){return this.map_.set(xt,Tt),Tt},_t.prototype.values=function(){for(var xt=new Oi,Tt=this.map_.values(),At=Tt.next();!At.done;)xt.add(At.value),At=Tt.next();return xt},_t.prototype.entrySet=function(){var xt=new om;return this.map_.entries().forEach(function(Tt){return xt.add(Tt)}),xt},_t.prototype.size=function(){return this.map_.size()},_t}(rf),$s=function vt(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=vt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Xc){var _t=arguments[0];this._modelType=_t,_t===vt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var xt=arguments[0];this._modelType=vt.FIXED,this.setScale(xt)}else if(arguments[0]instanceof vt){var Tt=arguments[0];this._modelType=Tt._modelType,this._scale=Tt._scale}}},R0={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};$s.prototype.equals=function(vt){if(!(vt instanceof $s))return!1;var _t=vt;return this._modelType===_t._modelType&&this._scale===_t._scale},$s.prototype.compareTo=function(vt){var _t=vt,xt=this.getMaximumSignificantDigits(),Tt=_t.getMaximumSignificantDigits();return new hu(xt).compareTo(new hu(Tt))},$s.prototype.getScale=function(){return this._scale},$s.prototype.isFloating=function(){return this._modelType===$s.FLOATING||this._modelType===$s.FLOATING_SINGLE},$s.prototype.getType=function(){return this._modelType},$s.prototype.toString=function(){var vt="UNKNOWN";return this._modelType===$s.FLOATING?vt="Floating":this._modelType===$s.FLOATING_SINGLE?vt="Floating-Single":this._modelType===$s.FIXED&&(vt="Fixed (Scale="+this.getScale()+")"),vt},$s.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var vt=arguments[0];return ko.isNaN(vt)||this._modelType===$s.FLOATING_SINGLE?vt:this._modelType===$s.FIXED?Math.round(vt*this._scale)/this._scale:vt}if(arguments[0]instanceof jr){var _t=arguments[0];if(this._modelType===$s.FLOATING)return null;_t.x=this.makePrecise(_t.x),_t.y=this.makePrecise(_t.y)}},$s.prototype.getMaximumSignificantDigits=function(){var vt=16;return this._modelType===$s.FLOATING?vt=16:this._modelType===$s.FLOATING_SINGLE?vt=6:this._modelType===$s.FIXED&&(vt=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),vt},$s.prototype.setScale=function(vt){this._scale=Math.abs(vt)},$s.prototype.interfaces_=function(){return[Cc,Sc]},$s.prototype.getClass=function(){return $s},$s.mostPrecise=function(vt,_t){return vt.compareTo(_t)>=0?vt:_t},R0.serialVersionUID.get=function(){return 7777263578777804e3},R0.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties($s,R0);var Xc=function vt(_t){this._name=_t||null,vt.nameToTypeMap.put(_t,this)},ig={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Xc.prototype.readResolve=function(){return Xc.nameToTypeMap.get(this._name)},Xc.prototype.toString=function(){return this._name},Xc.prototype.interfaces_=function(){return[Cc]},Xc.prototype.getClass=function(){return Xc},ig.serialVersionUID.get=function(){return-552860263173159e4},ig.nameToTypeMap.get=function(){return new Ay},Object.defineProperties(Xc,ig),$s.Type=Xc,$s.FIXED=new Xc("FIXED"),$s.FLOATING=new Xc("FLOATING"),$s.FLOATING_SINGLE=new Xc("FLOATING SINGLE");var Yo=function vt(){this._precisionModel=new $s,this._SRID=0,this._coordinateSequenceFactory=vt.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?_o(arguments[0],Uf)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof $s&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ly={serialVersionUID:{configurable:!0}};Yo.prototype.toGeometry=function(vt){return vt.isNull()?this.createPoint(null):vt.getMinX()===vt.getMaxX()&&vt.getMinY()===vt.getMaxY()?this.createPoint(new jr(vt.getMinX(),vt.getMinY())):vt.getMinX()===vt.getMaxX()||vt.getMinY()===vt.getMaxY()?this.createLineString([new jr(vt.getMinX(),vt.getMinY()),new jr(vt.getMaxX(),vt.getMaxY())]):this.createPolygon(this.createLinearRing([new jr(vt.getMinX(),vt.getMinY()),new jr(vt.getMinX(),vt.getMaxY()),new jr(vt.getMaxX(),vt.getMaxY()),new jr(vt.getMaxX(),vt.getMinY()),new jr(vt.getMinX(),vt.getMinY())]),null)},Yo.prototype.createLineString=function(vt){return vt?vt instanceof Array?new sa(this.getCoordinateSequenceFactory().create(vt),this):_o(vt,fs)?new sa(vt,this):void 0:new sa(this.getCoordinateSequenceFactory().create([]),this)},Yo.prototype.createMultiLineString=function(){if(arguments.length===0)return new Fh(null,this);if(arguments.length===1){var vt=arguments[0];return new Fh(vt,this)}},Yo.prototype.buildGeometry=function(vt){for(var _t=null,xt=!1,Tt=!1,At=vt.iterator();At.hasNext();){var Pt=At.next(),Nt=Pt.getClass();_t===null&&(_t=Nt),Nt!==_t&&(xt=!0),Pt.isGeometryCollectionOrDerived()&&(Tt=!0)}if(_t===null)return this.createGeometryCollection();if(xt||Tt)return this.createGeometryCollection(Yo.toGeometryArray(vt));var Vt=vt.iterator().next();if(vt.size()>1){if(Vt instanceof $a)return this.createMultiPolygon(Yo.toPolygonArray(vt));if(Vt instanceof sa)return this.createMultiLineString(Yo.toLineStringArray(vt));if(Vt instanceof Jl)return this.createMultiPoint(Yo.toPointArray(vt));$o.shouldNeverReachHere("Unhandled class: "+Vt.getClass().getName())}return Vt},Yo.prototype.createMultiPointFromCoords=function(vt){return this.createMultiPoint(vt!==null?this.getCoordinateSequenceFactory().create(vt):null)},Yo.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof jr){var vt=arguments[0];return this.createPoint(vt!==null?this.getCoordinateSequenceFactory().create([vt]):null)}if(_o(arguments[0],fs)){var _t=arguments[0];return new Jl(_t,this)}}},Yo.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Yo.prototype.createPolygon=function(){if(arguments.length===0)return new $a(null,null,this);if(arguments.length===1){if(_o(arguments[0],fs)){var vt=arguments[0];return this.createPolygon(this.createLinearRing(vt))}if(arguments[0]instanceof Array){var _t=arguments[0];return this.createPolygon(this.createLinearRing(_t))}if(arguments[0]instanceof Vu){var xt=arguments[0];return this.createPolygon(xt,null)}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return new $a(Tt,At,this)}},Yo.prototype.getSRID=function(){return this._SRID},Yo.prototype.createGeometryCollection=function(){if(arguments.length===0)return new Il(null,this);if(arguments.length===1){var vt=arguments[0];return new Il(vt,this)}},Yo.prototype.createGeometry=function(vt){return new Ic(this).edit(vt,{edit:function(){if(arguments.length===2){var _t=arguments[0];return this._coordinateSequenceFactory.create(_t)}}})},Yo.prototype.getPrecisionModel=function(){return this._precisionModel},Yo.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var vt=arguments[0];return this.createLinearRing(vt!==null?this.getCoordinateSequenceFactory().create(vt):null)}if(_o(arguments[0],fs)){var _t=arguments[0];return new Vu(_t,this)}}},Yo.prototype.createMultiPolygon=function(){if(arguments.length===0)return new ju(null,this);if(arguments.length===1){var vt=arguments[0];return new ju(vt,this)}},Yo.prototype.createMultiPoint=function(){var vt=this;if(arguments.length===0)return new Qf(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var _t=arguments[0];return new Qf(_t,this)}if(arguments[0]instanceof Array){var xt=arguments[0];return this.createMultiPoint(xt!==null?this.getCoordinateSequenceFactory().create(xt):null)}if(_o(arguments[0],fs)){var Tt=arguments[0];if(Tt===null)return this.createMultiPoint(new Array(0).fill(null));for(var At=new Array(Tt.size()).fill(null),Pt=0;Pt<Tt.size();Pt++){var Nt=vt.getCoordinateSequenceFactory().create(1,Tt.getDimension());xa.copy(Tt,Pt,Nt,0,1),At[Pt]=vt.createPoint(Nt)}return this.createMultiPoint(At)}}},Yo.prototype.interfaces_=function(){return[Cc]},Yo.prototype.getClass=function(){return Yo},Yo.toMultiPolygonArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.toGeometryArray=function(vt){if(vt===null)return null;var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.getDefaultCoordinateSequenceFactory=function(){return Uu.instance()},Yo.toMultiLineStringArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.toLineStringArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.toMultiPointArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.toLinearRingArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.toPointArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.toPolygonArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Yo.createPointFromInternalCoord=function(vt,_t){return _t.getPrecisionModel().makePrecise(vt),_t.getFactory().createPoint(vt)},Ly.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Yo,Ly);var o_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],og=function(vt){this.geometryFactory=vt||new Yo};og.prototype.read=function(vt){var _t,xt=(_t=typeof vt=="string"?JSON.parse(vt):vt).type;if(!gu[xt])throw new Error("Unknown GeoJSON type: "+_t.type);return o_.indexOf(xt)!==-1?gu[xt].apply(this,[_t.coordinates]):xt==="GeometryCollection"?gu[xt].apply(this,[_t.geometries]):gu[xt].apply(this,[_t])},og.prototype.write=function(vt){var _t=vt.getGeometryType();if(!ph[_t])throw new Error("Geometry is not supported");return ph[_t].apply(this,[vt])};var gu={Feature:function(vt){var _t={};for(var xt in vt)_t[xt]=vt[xt];if(vt.geometry){var Tt=vt.geometry.type;if(!gu[Tt])throw new Error("Unknown GeoJSON type: "+vt.type);_t.geometry=this.read(vt.geometry)}return vt.bbox&&(_t.bbox=gu.bbox.apply(this,[vt.bbox])),_t},FeatureCollection:function(vt){var _t={};if(vt.features){_t.features=[];for(var xt=0;xt<vt.features.length;++xt)_t.features.push(this.read(vt.features[xt]))}return vt.bbox&&(_t.bbox=this.parse.bbox.apply(this,[vt.bbox])),_t},coordinates:function(vt){for(var _t=[],xt=0;xt<vt.length;++xt){var Tt=vt[xt];_t.push(new jr(Tt[0],Tt[1]))}return _t},bbox:function(vt){return this.geometryFactory.createLinearRing([new jr(vt[0],vt[1]),new jr(vt[2],vt[1]),new jr(vt[2],vt[3]),new jr(vt[0],vt[3]),new jr(vt[0],vt[1])])},Point:function(vt){var _t=new jr(vt[0],vt[1]);return this.geometryFactory.createPoint(_t)},MultiPoint:function(vt){for(var _t=[],xt=0;xt<vt.length;++xt)_t.push(gu.Point.apply(this,[vt[xt]]));return this.geometryFactory.createMultiPoint(_t)},LineString:function(vt){var _t=gu.coordinates.apply(this,[vt]);return this.geometryFactory.createLineString(_t)},MultiLineString:function(vt){for(var _t=[],xt=0;xt<vt.length;++xt)_t.push(gu.LineString.apply(this,[vt[xt]]));return this.geometryFactory.createMultiLineString(_t)},Polygon:function(vt){for(var _t=gu.coordinates.apply(this,[vt[0]]),xt=this.geometryFactory.createLinearRing(_t),Tt=[],At=1;At<vt.length;++At){var Pt=vt[At],Nt=gu.coordinates.apply(this,[Pt]),Vt=this.geometryFactory.createLinearRing(Nt);Tt.push(Vt)}return this.geometryFactory.createPolygon(xt,Tt)},MultiPolygon:function(vt){for(var _t=[],xt=0;xt<vt.length;++xt){var Tt=vt[xt];_t.push(gu.Polygon.apply(this,[Tt]))}return this.geometryFactory.createMultiPolygon(_t)},GeometryCollection:function(vt){for(var _t=[],xt=0;xt<vt.length;++xt){var Tt=vt[xt];_t.push(this.read(Tt))}return this.geometryFactory.createGeometryCollection(_t)}},ph={coordinate:function(vt){return[vt.x,vt.y]},Point:function(vt){return{type:"Point",coordinates:ph.coordinate.apply(this,[vt.getCoordinate()])}},MultiPoint:function(vt){for(var _t=[],xt=0;xt<vt._geometries.length;++xt){var Tt=vt._geometries[xt],At=ph.Point.apply(this,[Tt]);_t.push(At.coordinates)}return{type:"MultiPoint",coordinates:_t}},LineString:function(vt){for(var _t=[],xt=vt.getCoordinates(),Tt=0;Tt<xt.length;++Tt){var At=xt[Tt];_t.push(ph.coordinate.apply(this,[At]))}return{type:"LineString",coordinates:_t}},MultiLineString:function(vt){for(var _t=[],xt=0;xt<vt._geometries.length;++xt){var Tt=vt._geometries[xt],At=ph.LineString.apply(this,[Tt]);_t.push(At.coordinates)}return{type:"MultiLineString",coordinates:_t}},Polygon:function(vt){var _t=[],xt=ph.LineString.apply(this,[vt._shell]);_t.push(xt.coordinates);for(var Tt=0;Tt<vt._holes.length;++Tt){var At=vt._holes[Tt],Pt=ph.LineString.apply(this,[At]);_t.push(Pt.coordinates)}return{type:"Polygon",coordinates:_t}},MultiPolygon:function(vt){for(var _t=[],xt=0;xt<vt._geometries.length;++xt){var Tt=vt._geometries[xt],At=ph.Polygon.apply(this,[Tt]);_t.push(At.coordinates)}return{type:"MultiPolygon",coordinates:_t}},GeometryCollection:function(vt){for(var _t=[],xt=0;xt<vt._geometries.length;++xt){var Tt=vt._geometries[xt],At=Tt.getGeometryType();_t.push(ph[At].apply(this,[Tt]))}return{type:"GeometryCollection",geometries:_t}}},lm=function(vt){this.geometryFactory=vt||new Yo,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new og(this.geometryFactory)};lm.prototype.read=function(vt){var _t=this.parser.read(vt);return this.precisionModel.getType()===$s.FIXED&&this.reducePrecision(_t),_t},lm.prototype.reducePrecision=function(vt){var _t,xt;if(vt.coordinate)this.precisionModel.makePrecise(vt.coordinate);else if(vt.points)for(_t=0,xt=vt.points.length;_t<xt;_t++)this.precisionModel.makePrecise(vt.points[_t]);else if(vt.geometries)for(_t=0,xt=vt.geometries.length;_t<xt;_t++)this.reducePrecision(vt.geometries[_t])};var Iy=function(){this.parser=new og(this.geometryFactory)};Iy.prototype.write=function(vt){return this.parser.write(vt)};var Ei=function(){},sg={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function cm(vt){this.message=vt||""}function mu(){this.array_=[]}Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.opposite=function(vt){return vt===Ei.LEFT?Ei.RIGHT:vt===Ei.RIGHT?Ei.LEFT:vt},sg.ON.get=function(){return 0},sg.LEFT.get=function(){return 1},sg.RIGHT.get=function(){return 2},Object.defineProperties(Ei,sg),cm.prototype=new Error,cm.prototype.name="EmptyStackException",mu.prototype=new Gc,mu.prototype.add=function(vt){return this.array_.push(vt),!0},mu.prototype.get=function(vt){if(vt<0||vt>=this.size())throw new Error;return this.array_[vt]},mu.prototype.push=function(vt){return this.array_.push(vt),vt},mu.prototype.pop=function(vt){if(this.array_.length===0)throw new cm;return this.array_.pop()},mu.prototype.peek=function(){if(this.array_.length===0)throw new cm;return this.array_[this.array_.length-1]},mu.prototype.empty=function(){return this.array_.length===0},mu.prototype.isEmpty=function(){return this.empty()},mu.prototype.search=function(vt){return this.array_.indexOf(vt)},mu.prototype.size=function(){return this.array_.length},mu.prototype.toArray=function(){for(var vt=[],_t=0,xt=this.array_.length;_t<xt;_t++)vt.push(this.array_[_t]);return vt};var Zc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Zc.prototype.getCoordinate=function(){return this._minCoord},Zc.prototype.getRightmostSide=function(vt,_t){var xt=this.getRightmostSideOfSegment(vt,_t);return xt<0&&(xt=this.getRightmostSideOfSegment(vt,_t-1)),xt<0&&(this._minCoord=null,this.checkForRightmostCoordinate(vt)),xt},Zc.prototype.findRightmostEdgeAtVertex=function(){var vt=this._minDe.getEdge().getCoordinates();$o.isTrue(this._minIndex>0&&this._minIndex<vt.length,"rightmost point expected to be interior vertex of edge");var _t=vt[this._minIndex-1],xt=vt[this._minIndex+1],Tt=Ni.computeOrientation(this._minCoord,xt,_t),At=!1;(_t.y<this._minCoord.y&&xt.y<this._minCoord.y&&Tt===Ni.COUNTERCLOCKWISE||_t.y>this._minCoord.y&&xt.y>this._minCoord.y&&Tt===Ni.CLOCKWISE)&&(At=!0),At&&(this._minIndex=this._minIndex-1)},Zc.prototype.getRightmostSideOfSegment=function(vt,_t){var xt=vt.getEdge().getCoordinates();if(_t<0||_t+1>=xt.length||xt[_t].y===xt[_t+1].y)return-1;var Tt=Ei.LEFT;return xt[_t].y<xt[_t+1].y&&(Tt=Ei.RIGHT),Tt},Zc.prototype.getEdge=function(){return this._orientedDe},Zc.prototype.checkForRightmostCoordinate=function(vt){for(var _t=this,xt=vt.getEdge().getCoordinates(),Tt=0;Tt<xt.length-1;Tt++)(_t._minCoord===null||xt[Tt].x>_t._minCoord.x)&&(_t._minDe=vt,_t._minIndex=Tt,_t._minCoord=xt[Tt])},Zc.prototype.findRightmostEdgeAtNode=function(){var vt=this._minDe.getNode().getEdges();this._minDe=vt.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Zc.prototype.findEdge=function(vt){for(var _t=vt.iterator();_t.hasNext();){var xt=_t.next();xt.isForward()&&this.checkForRightmostCoordinate(xt)}$o.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ei.LEFT&&(this._orientedDe=this._minDe.getSym())},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var gh=function(vt){function _t(xt,Tt){vt.call(this,_t.msgWithCoord(xt,Tt)),this.pt=Tt?new jr(Tt):null,this.name="TopologyException"}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.getCoordinate=function(){return this.pt},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.msgWithCoord=function(xt,Tt){return Tt?xt:xt+" [ "+Tt+" ]"},_t}(dh),um=function(){this.array_=[]};um.prototype.addLast=function(vt){this.array_.push(vt)},um.prototype.removeFirst=function(){return this.array_.shift()},um.prototype.isEmpty=function(){return this.array_.length===0};var xl=function(){this._finder=null,this._dirEdgeList=new Oi,this._nodes=new Oi,this._rightMostCoord=null,this._env=null,this._finder=new Zc};xl.prototype.clearVisitedEdges=function(){for(var vt=this._dirEdgeList.iterator();vt.hasNext();)vt.next().setVisited(!1)},xl.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},xl.prototype.computeNodeDepth=function(vt){for(var _t=null,xt=vt.getEdges().iterator();xt.hasNext();){var Tt=xt.next();if(Tt.isVisited()||Tt.getSym().isVisited()){_t=Tt;break}}if(_t===null)throw new gh("unable to find edge to compute depths at "+vt.getCoordinate());vt.getEdges().computeDepths(_t);for(var At=vt.getEdges().iterator();At.hasNext();){var Pt=At.next();Pt.setVisited(!0),this.copySymDepths(Pt)}},xl.prototype.computeDepth=function(vt){this.clearVisitedEdges();var _t=this._finder.getEdge();_t.setEdgeDepths(Ei.RIGHT,vt),this.copySymDepths(_t),this.computeDepths(_t)},xl.prototype.create=function(vt){this.addReachable(vt),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},xl.prototype.findResultEdges=function(){for(var vt=this._dirEdgeList.iterator();vt.hasNext();){var _t=vt.next();_t.getDepth(Ei.RIGHT)>=1&&_t.getDepth(Ei.LEFT)<=0&&!_t.isInteriorAreaEdge()&&_t.setInResult(!0)}},xl.prototype.computeDepths=function(vt){var _t=new om,xt=new um,Tt=vt.getNode();for(xt.addLast(Tt),_t.add(Tt),vt.setVisited(!0);!xt.isEmpty();){var At=xt.removeFirst();_t.add(At),this.computeNodeDepth(At);for(var Pt=At.getEdges().iterator();Pt.hasNext();){var Nt=Pt.next().getSym();if(!Nt.isVisited()){var Vt=Nt.getNode();_t.contains(Vt)||(xt.addLast(Vt),_t.add(Vt))}}}},xl.prototype.compareTo=function(vt){var _t=vt;return this._rightMostCoord.x<_t._rightMostCoord.x?-1:this._rightMostCoord.x>_t._rightMostCoord.x?1:0},xl.prototype.getEnvelope=function(){if(this._env===null){for(var vt=new eo,_t=this._dirEdgeList.iterator();_t.hasNext();)for(var xt=_t.next().getEdge().getCoordinates(),Tt=0;Tt<xt.length-1;Tt++)vt.expandToInclude(xt[Tt]);this._env=vt}return this._env},xl.prototype.addReachable=function(vt){var _t=new mu;for(_t.add(vt);!_t.empty();){var xt=_t.pop();this.add(xt,_t)}},xl.prototype.copySymDepths=function(vt){var _t=vt.getSym();_t.setDepth(Ei.LEFT,vt.getDepth(Ei.RIGHT)),_t.setDepth(Ei.RIGHT,vt.getDepth(Ei.LEFT))},xl.prototype.add=function(vt,_t){vt.setVisited(!0),this._nodes.add(vt);for(var xt=vt.getEdges().iterator();xt.hasNext();){var Tt=xt.next();this._dirEdgeList.add(Tt);var At=Tt.getSym().getNode();At.isVisited()||_t.push(At)}},xl.prototype.getNodes=function(){return this._nodes},xl.prototype.getDirectedEdges=function(){return this._dirEdgeList},xl.prototype.interfaces_=function(){return[Sc]},xl.prototype.getClass=function(){return xl};var Zs=function vt(){var _t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var xt=arguments[0];this.init(xt.length)}else if(Number.isInteger(arguments[0])){var Tt=arguments[0];this.init(1),this.location[Ei.ON]=Tt}else if(arguments[0]instanceof vt){var At=arguments[0];if(this.init(At.location.length),At!==null)for(var Pt=0;Pt<this.location.length;Pt++)_t.location[Pt]=At.location[Pt]}}else if(arguments.length===3){var Nt=arguments[0],Vt=arguments[1],Gt=arguments[2];this.init(3),this.location[Ei.ON]=Nt,this.location[Ei.LEFT]=Vt,this.location[Ei.RIGHT]=Gt}};Zs.prototype.setAllLocations=function(vt){for(var _t=0;_t<this.location.length;_t++)this.location[_t]=vt},Zs.prototype.isNull=function(){for(var vt=0;vt<this.location.length;vt++)if(this.location[vt]!==Kr.NONE)return!1;return!0},Zs.prototype.setAllLocationsIfNull=function(vt){for(var _t=0;_t<this.location.length;_t++)this.location[_t]===Kr.NONE&&(this.location[_t]=vt)},Zs.prototype.isLine=function(){return this.location.length===1},Zs.prototype.merge=function(vt){if(vt.location.length>this.location.length){var _t=new Array(3).fill(null);_t[Ei.ON]=this.location[Ei.ON],_t[Ei.LEFT]=Kr.NONE,_t[Ei.RIGHT]=Kr.NONE,this.location=_t}for(var xt=0;xt<this.location.length;xt++)this.location[xt]===Kr.NONE&&xt<vt.location.length&&(this.location[xt]=vt.location[xt])},Zs.prototype.getLocations=function(){return this.location},Zs.prototype.flip=function(){if(this.location.length<=1)return null;var vt=this.location[Ei.LEFT];this.location[Ei.LEFT]=this.location[Ei.RIGHT],this.location[Ei.RIGHT]=vt},Zs.prototype.toString=function(){var vt=new uu;return this.location.length>1&&vt.append(Kr.toLocationSymbol(this.location[Ei.LEFT])),vt.append(Kr.toLocationSymbol(this.location[Ei.ON])),this.location.length>1&&vt.append(Kr.toLocationSymbol(this.location[Ei.RIGHT])),vt.toString()},Zs.prototype.setLocations=function(vt,_t,xt){this.location[Ei.ON]=vt,this.location[Ei.LEFT]=_t,this.location[Ei.RIGHT]=xt},Zs.prototype.get=function(vt){return vt<this.location.length?this.location[vt]:Kr.NONE},Zs.prototype.isArea=function(){return this.location.length>1},Zs.prototype.isAnyNull=function(){for(var vt=0;vt<this.location.length;vt++)if(this.location[vt]===Kr.NONE)return!0;return!1},Zs.prototype.setLocation=function(){if(arguments.length===1){var vt=arguments[0];this.setLocation(Ei.ON,vt)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this.location[_t]=xt}},Zs.prototype.init=function(vt){this.location=new Array(vt).fill(null),this.setAllLocations(Kr.NONE)},Zs.prototype.isEqualOnSide=function(vt,_t){return this.location[_t]===vt.location[_t]},Zs.prototype.allPositionsEqual=function(vt){for(var _t=0;_t<this.location.length;_t++)if(this.location[_t]!==vt)return!1;return!0},Zs.prototype.interfaces_=function(){return[]},Zs.prototype.getClass=function(){return Zs};var zs=function vt(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var _t=arguments[0];this.elt[0]=new Zs(_t),this.elt[1]=new Zs(_t)}else if(arguments[0]instanceof vt){var xt=arguments[0];this.elt[0]=new Zs(xt.elt[0]),this.elt[1]=new Zs(xt.elt[1])}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.elt[0]=new Zs(Kr.NONE),this.elt[1]=new Zs(Kr.NONE),this.elt[Tt].setLocation(At)}else if(arguments.length===3){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2];this.elt[0]=new Zs(Pt,Nt,Vt),this.elt[1]=new Zs(Pt,Nt,Vt)}else if(arguments.length===4){var Gt=arguments[0],qt=arguments[1],en=arguments[2],Xt=arguments[3];this.elt[0]=new Zs(Kr.NONE,Kr.NONE,Kr.NONE),this.elt[1]=new Zs(Kr.NONE,Kr.NONE,Kr.NONE),this.elt[Gt].setLocations(qt,en,Xt)}};zs.prototype.getGeometryCount=function(){var vt=0;return this.elt[0].isNull()||vt++,this.elt[1].isNull()||vt++,vt},zs.prototype.setAllLocations=function(vt,_t){this.elt[vt].setAllLocations(_t)},zs.prototype.isNull=function(vt){return this.elt[vt].isNull()},zs.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var vt=arguments[0];this.setAllLocationsIfNull(0,vt),this.setAllLocationsIfNull(1,vt)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this.elt[_t].setAllLocationsIfNull(xt)}},zs.prototype.isLine=function(vt){return this.elt[vt].isLine()},zs.prototype.merge=function(vt){for(var _t=this,xt=0;xt<2;xt++)_t.elt[xt]===null&&vt.elt[xt]!==null?_t.elt[xt]=new Zs(vt.elt[xt]):_t.elt[xt].merge(vt.elt[xt])},zs.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},zs.prototype.getLocation=function(){if(arguments.length===1){var vt=arguments[0];return this.elt[vt].get(Ei.ON)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return this.elt[_t].get(xt)}},zs.prototype.toString=function(){var vt=new uu;return this.elt[0]!==null&&(vt.append("A:"),vt.append(this.elt[0].toString())),this.elt[1]!==null&&(vt.append(" B:"),vt.append(this.elt[1].toString())),vt.toString()},zs.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var vt=arguments[0];return this.elt[vt].isArea()}},zs.prototype.isAnyNull=function(vt){return this.elt[vt].isAnyNull()},zs.prototype.setLocation=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this.elt[vt].setLocation(Ei.ON,_t)}else if(arguments.length===3){var xt=arguments[0],Tt=arguments[1],At=arguments[2];this.elt[xt].setLocation(Tt,At)}},zs.prototype.isEqualOnSide=function(vt,_t){return this.elt[0].isEqualOnSide(vt.elt[0],_t)&&this.elt[1].isEqualOnSide(vt.elt[1],_t)},zs.prototype.allPositionsEqual=function(vt,_t){return this.elt[vt].allPositionsEqual(_t)},zs.prototype.toLine=function(vt){this.elt[vt].isArea()&&(this.elt[vt]=new Zs(this.elt[vt].location[0]))},zs.prototype.interfaces_=function(){return[]},zs.prototype.getClass=function(){return zs},zs.toLineLabel=function(vt){for(var _t=new zs(Kr.NONE),xt=0;xt<2;xt++)_t.setLocation(xt,vt.getLocation(xt));return _t};var Ea=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Oi,this._pts=new Oi,this._label=new zs(Kr.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Oi,this._geometryFactory=null;var vt=arguments[0],_t=arguments[1];this._geometryFactory=_t,this.computePoints(vt),this.computeRing()};Ea.prototype.computeRing=function(){if(this._ring!==null)return null;for(var vt=new Array(this._pts.size()).fill(null),_t=0;_t<this._pts.size();_t++)vt[_t]=this._pts.get(_t);this._ring=this._geometryFactory.createLinearRing(vt),this._isHole=Ni.isCCW(this._ring.getCoordinates())},Ea.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Ea.prototype.computePoints=function(vt){var _t=this;this._startDe=vt;var xt=vt,Tt=!0;do{if(xt===null)throw new gh("Found null DirectedEdge");if(xt.getEdgeRing()===_t)throw new gh("Directed Edge visited twice during ring-building at "+xt.getCoordinate());_t._edges.add(xt);var At=xt.getLabel();$o.isTrue(At.isArea()),_t.mergeLabel(At),_t.addPoints(xt.getEdge(),xt.isForward(),Tt),Tt=!1,_t.setEdgeRing(xt,_t),xt=_t.getNext(xt)}while(xt!==this._startDe)},Ea.prototype.getLinearRing=function(){return this._ring},Ea.prototype.getCoordinate=function(vt){return this._pts.get(vt)},Ea.prototype.computeMaxNodeDegree=function(){var vt=this;this._maxNodeDegree=0;var _t=this._startDe;do{var xt=_t.getNode().getEdges().getOutgoingDegree(vt);xt>vt._maxNodeDegree&&(vt._maxNodeDegree=xt),_t=vt.getNext(_t)}while(_t!==this._startDe);this._maxNodeDegree*=2},Ea.prototype.addPoints=function(vt,_t,xt){var Tt=vt.getCoordinates();if(_t){var At=1;xt&&(At=0);for(var Pt=At;Pt<Tt.length;Pt++)this._pts.add(Tt[Pt])}else{var Nt=Tt.length-2;xt&&(Nt=Tt.length-1);for(var Vt=Nt;Vt>=0;Vt--)this._pts.add(Tt[Vt])}},Ea.prototype.isHole=function(){return this._isHole},Ea.prototype.setInResult=function(){var vt=this._startDe;do vt.getEdge().setInResult(!0),vt=vt.getNext();while(vt!==this._startDe)},Ea.prototype.containsPoint=function(vt){var _t=this.getLinearRing();if(!_t.getEnvelopeInternal().contains(vt)||!Ni.isPointInRing(vt,_t.getCoordinates()))return!1;for(var xt=this._holes.iterator();xt.hasNext();)if(xt.next().containsPoint(vt))return!1;return!0},Ea.prototype.addHole=function(vt){this._holes.add(vt)},Ea.prototype.isShell=function(){return this._shell===null},Ea.prototype.getLabel=function(){return this._label},Ea.prototype.getEdges=function(){return this._edges},Ea.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ea.prototype.getShell=function(){return this._shell},Ea.prototype.mergeLabel=function(){if(arguments.length===1){var vt=arguments[0];this.mergeLabel(vt,0),this.mergeLabel(vt,1)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1],Tt=_t.getLocation(xt,Ei.RIGHT);if(Tt===Kr.NONE)return null;if(this._label.getLocation(xt)===Kr.NONE)return this._label.setLocation(xt,Tt),null}},Ea.prototype.setShell=function(vt){this._shell=vt,vt!==null&&vt.addHole(this)},Ea.prototype.toPolygon=function(vt){for(var _t=new Array(this._holes.size()).fill(null),xt=0;xt<this._holes.size();xt++)_t[xt]=this._holes.get(xt).getLinearRing();return vt.createPolygon(this.getLinearRing(),_t)},Ea.prototype.interfaces_=function(){return[]},Ea.prototype.getClass=function(){return Ea};var s_=function(vt){function _t(){var xt=arguments[0],Tt=arguments[1];vt.call(this,xt,Tt)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.setEdgeRing=function(xt,Tt){xt.setMinEdgeRing(Tt)},_t.prototype.getNext=function(xt){return xt.getNextMin()},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ea),a_=function(vt){function _t(){var xt=arguments[0],Tt=arguments[1];vt.call(this,xt,Tt)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.buildMinimalRings=function(){var xt=new Oi,Tt=this._startDe;do{if(Tt.getMinEdgeRing()===null){var At=new s_(Tt,this._geometryFactory);xt.add(At)}Tt=Tt.getNext()}while(Tt!==this._startDe);return xt},_t.prototype.setEdgeRing=function(xt,Tt){xt.setEdgeRing(Tt)},_t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var xt=this._startDe;do xt.getNode().getEdges().linkMinimalDirectedEdges(this),xt=xt.getNext();while(xt!==this._startDe)},_t.prototype.getNext=function(xt){return xt.getNext()},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ea),Ql=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this._label=vt}}};Ql.prototype.setVisited=function(vt){this._isVisited=vt},Ql.prototype.setInResult=function(vt){this._isInResult=vt},Ql.prototype.isCovered=function(){return this._isCovered},Ql.prototype.isCoveredSet=function(){return this._isCoveredSet},Ql.prototype.setLabel=function(vt){this._label=vt},Ql.prototype.getLabel=function(){return this._label},Ql.prototype.setCovered=function(vt){this._isCovered=vt,this._isCoveredSet=!0},Ql.prototype.updateIM=function(vt){$o.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(vt)},Ql.prototype.isInResult=function(){return this._isInResult},Ql.prototype.isVisited=function(){return this._isVisited},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var hm=function(vt){function _t(){vt.call(this),this._coord=null,this._edges=null;var xt=arguments[0],Tt=arguments[1];this._coord=xt,this._edges=Tt,this._label=new zs(0,Kr.NONE)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.isIncidentEdgeInResult=function(){for(var xt=this.getEdges().getEdges().iterator();xt.hasNext();)if(xt.next().getEdge().isInResult())return!0;return!1},_t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},_t.prototype.getCoordinate=function(){return this._coord},_t.prototype.print=function(xt){xt.println("node "+this._coord+" lbl: "+this._label)},_t.prototype.computeIM=function(xt){},_t.prototype.computeMergedLocation=function(xt,Tt){var At=Kr.NONE;if(At=this._label.getLocation(Tt),!xt.isNull(Tt)){var Pt=xt.getLocation(Tt);At!==Kr.BOUNDARY&&(At=Pt)}return At},_t.prototype.setLabel=function(){if(arguments.length!==2)return vt.prototype.setLabel.apply(this,arguments);var xt=arguments[0],Tt=arguments[1];this._label===null?this._label=new zs(xt,Tt):this._label.setLocation(xt,Tt)},_t.prototype.getEdges=function(){return this._edges},_t.prototype.mergeLabel=function(){var xt=this;if(arguments[0]instanceof _t){var Tt=arguments[0];this.mergeLabel(Tt._label)}else if(arguments[0]instanceof zs)for(var At=arguments[0],Pt=0;Pt<2;Pt++){var Nt=xt.computeMergedLocation(At,Pt),Vt=xt._label.getLocation(Pt);Vt===Kr.NONE&&xt._label.setLocation(Pt,Nt)}},_t.prototype.add=function(xt){this._edges.insert(xt),xt.setNode(this)},_t.prototype.setLabelBoundary=function(xt){if(this._label===null)return null;var Tt=Kr.NONE;this._label!==null&&(Tt=this._label.getLocation(xt));var At=null;switch(Tt){case Kr.BOUNDARY:At=Kr.INTERIOR;break;case Kr.INTERIOR:default:At=Kr.BOUNDARY}this._label.setLocation(xt,At)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ql),yu=function(){this.nodeMap=new bl,this.nodeFact=null;var vt=arguments[0];this.nodeFact=vt};yu.prototype.find=function(vt){return this.nodeMap.get(vt)},yu.prototype.addNode=function(){if(arguments[0]instanceof jr){var vt=arguments[0],_t=this.nodeMap.get(vt);return _t===null&&(_t=this.nodeFact.createNode(vt),this.nodeMap.put(vt,_t)),_t}if(arguments[0]instanceof hm){var xt=arguments[0],Tt=this.nodeMap.get(xt.getCoordinate());return Tt===null?(this.nodeMap.put(xt.getCoordinate(),xt),xt):(Tt.mergeLabel(xt),Tt)}},yu.prototype.print=function(vt){for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},yu.prototype.iterator=function(){return this.nodeMap.values().iterator()},yu.prototype.values=function(){return this.nodeMap.values()},yu.prototype.getBoundaryNodes=function(vt){for(var _t=new Oi,xt=this.iterator();xt.hasNext();){var Tt=xt.next();Tt.getLabel().getLocation(vt)===Kr.BOUNDARY&&_t.add(Tt)}return _t},yu.prototype.add=function(vt){var _t=vt.getCoordinate();this.addNode(_t).add(vt)},yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu};var Vs=function(){},ag={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Vs.prototype.interfaces_=function(){return[]},Vs.prototype.getClass=function(){return Vs},Vs.isNorthern=function(vt){return vt===Vs.NE||vt===Vs.NW},Vs.isOpposite=function(vt,_t){return vt!==_t&&(vt-_t+4)%4===2},Vs.commonHalfPlane=function(vt,_t){if(vt===_t)return vt;if((vt-_t+4)%4===2)return-1;var xt=vt<_t?vt:_t;return xt===0&&(vt>_t?vt:_t)===3?3:xt},Vs.isInHalfPlane=function(vt,_t){return _t===Vs.SE?vt===Vs.SE||vt===Vs.SW:vt===_t||vt===_t+1},Vs.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],_t=arguments[1];if(vt===0&&_t===0)throw new oa("Cannot compute the quadrant for point ( "+vt+", "+_t+" )");return vt>=0?_t>=0?Vs.NE:Vs.SE:_t>=0?Vs.NW:Vs.SW}if(arguments[0]instanceof jr&&arguments[1]instanceof jr){var xt=arguments[0],Tt=arguments[1];if(Tt.x===xt.x&&Tt.y===xt.y)throw new oa("Cannot compute the quadrant for two identical points "+xt);return Tt.x>=xt.x?Tt.y>=xt.y?Vs.NE:Vs.SE:Tt.y>=xt.y?Vs.NW:Vs.SW}},ag.NE.get=function(){return 0},ag.NW.get=function(){return 1},ag.SW.get=function(){return 2},ag.SE.get=function(){return 3},Object.defineProperties(Vs,ag);var wl=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var vt=arguments[0];this._edge=vt}else if(arguments.length===3){var _t=arguments[0],xt=arguments[1],Tt=arguments[2],At=null;this._edge=_t,this.init(xt,Tt),this._label=At}else if(arguments.length===4){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2],Gt=arguments[3];this._edge=Pt,this.init(Nt,Vt),this._label=Gt}};wl.prototype.compareDirection=function(vt){return this._dx===vt._dx&&this._dy===vt._dy?0:this._quadrant>vt._quadrant?1:this._quadrant<vt._quadrant?-1:Ni.computeOrientation(vt._p0,vt._p1,this._p1)},wl.prototype.getDy=function(){return this._dy},wl.prototype.getCoordinate=function(){return this._p0},wl.prototype.setNode=function(vt){this._node=vt},wl.prototype.print=function(vt){var _t=Math.atan2(this._dy,this._dx),xt=this.getClass().getName(),Tt=xt.lastIndexOf("."),At=xt.substring(Tt+1);vt.print("  "+At+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+_t+"   "+this._label)},wl.prototype.compareTo=function(vt){var _t=vt;return this.compareDirection(_t)},wl.prototype.getDirectedCoordinate=function(){return this._p1},wl.prototype.getDx=function(){return this._dx},wl.prototype.getLabel=function(){return this._label},wl.prototype.getEdge=function(){return this._edge},wl.prototype.getQuadrant=function(){return this._quadrant},wl.prototype.getNode=function(){return this._node},wl.prototype.toString=function(){var vt=Math.atan2(this._dy,this._dx),_t=this.getClass().getName(),xt=_t.lastIndexOf(".");return"  "+_t.substring(xt+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+vt+"   "+this._label},wl.prototype.computeLabel=function(vt){},wl.prototype.init=function(vt,_t){this._p0=vt,this._p1=_t,this._dx=_t.x-vt.x,this._dy=_t.y-vt.y,this._quadrant=Vs.quadrant(this._dx,this._dy),$o.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},wl.prototype.interfaces_=function(){return[Sc]},wl.prototype.getClass=function(){return wl};var dm=function(vt){function _t(){var xt=arguments[0],Tt=arguments[1];if(vt.call(this,xt),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=Tt,Tt)this.init(xt.getCoordinate(0),xt.getCoordinate(1));else{var At=xt.getNumPoints()-1;this.init(xt.getCoordinate(At),xt.getCoordinate(At-1))}this.computeDirectedLabel()}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.getNextMin=function(){return this._nextMin},_t.prototype.getDepth=function(xt){return this._depth[xt]},_t.prototype.setVisited=function(xt){this._isVisited=xt},_t.prototype.computeDirectedLabel=function(){this._label=new zs(this._edge.getLabel()),this._isForward||this._label.flip()},_t.prototype.getNext=function(){return this._next},_t.prototype.setDepth=function(xt,Tt){if(this._depth[xt]!==-999&&this._depth[xt]!==Tt)throw new gh("assigned depths do not match",this.getCoordinate());this._depth[xt]=Tt},_t.prototype.isInteriorAreaEdge=function(){for(var xt=this,Tt=!0,At=0;At<2;At++)xt._label.isArea(At)&&xt._label.getLocation(At,Ei.LEFT)===Kr.INTERIOR&&xt._label.getLocation(At,Ei.RIGHT)===Kr.INTERIOR||(Tt=!1);return Tt},_t.prototype.setNextMin=function(xt){this._nextMin=xt},_t.prototype.print=function(xt){vt.prototype.print.call(this,xt),xt.print(" "+this._depth[Ei.LEFT]+"/"+this._depth[Ei.RIGHT]),xt.print(" ("+this.getDepthDelta()+")"),this._isInResult&&xt.print(" inResult")},_t.prototype.setMinEdgeRing=function(xt){this._minEdgeRing=xt},_t.prototype.isLineEdge=function(){var xt=this._label.isLine(0)||this._label.isLine(1),Tt=!this._label.isArea(0)||this._label.allPositionsEqual(0,Kr.EXTERIOR),At=!this._label.isArea(1)||this._label.allPositionsEqual(1,Kr.EXTERIOR);return xt&&Tt&&At},_t.prototype.setEdgeRing=function(xt){this._edgeRing=xt},_t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},_t.prototype.getDepthDelta=function(){var xt=this._edge.getDepthDelta();return this._isForward||(xt=-xt),xt},_t.prototype.setInResult=function(xt){this._isInResult=xt},_t.prototype.getSym=function(){return this._sym},_t.prototype.isForward=function(){return this._isForward},_t.prototype.getEdge=function(){return this._edge},_t.prototype.printEdge=function(xt){this.print(xt),xt.print(" "),this._isForward?this._edge.print(xt):this._edge.printReverse(xt)},_t.prototype.setSym=function(xt){this._sym=xt},_t.prototype.setVisitedEdge=function(xt){this.setVisited(xt),this._sym.setVisited(xt)},_t.prototype.setEdgeDepths=function(xt,Tt){var At=this.getEdge().getDepthDelta();this._isForward||(At=-At);var Pt=1;xt===Ei.LEFT&&(Pt=-1);var Nt=Ei.opposite(xt),Vt=Tt+At*Pt;this.setDepth(xt,Tt),this.setDepth(Nt,Vt)},_t.prototype.getEdgeRing=function(){return this._edgeRing},_t.prototype.isInResult=function(){return this._isInResult},_t.prototype.setNext=function(xt){this._next=xt},_t.prototype.isVisited=function(){return this._isVisited},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.depthFactor=function(xt,Tt){return xt===Kr.EXTERIOR&&Tt===Kr.INTERIOR?1:xt===Kr.INTERIOR&&Tt===Kr.EXTERIOR?-1:0},_t}(wl),ep=function(){};ep.prototype.createNode=function(vt){return new hm(vt,null)},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var ha=function(){if(this._edges=new Oi,this._nodes=null,this._edgeEndList=new Oi,arguments.length===0)this._nodes=new yu(new ep);else if(arguments.length===1){var vt=arguments[0];this._nodes=new yu(vt)}};ha.prototype.printEdges=function(vt){vt.println("Edges:");for(var _t=0;_t<this._edges.size();_t++){vt.println("edge "+_t+":");var xt=this._edges.get(_t);xt.print(vt),xt.eiList.print(vt)}},ha.prototype.find=function(vt){return this._nodes.find(vt)},ha.prototype.addNode=function(){if(arguments[0]instanceof hm){var vt=arguments[0];return this._nodes.addNode(vt)}if(arguments[0]instanceof jr){var _t=arguments[0];return this._nodes.addNode(_t)}},ha.prototype.getNodeIterator=function(){return this._nodes.iterator()},ha.prototype.linkResultDirectedEdges=function(){for(var vt=this._nodes.iterator();vt.hasNext();)vt.next().getEdges().linkResultDirectedEdges()},ha.prototype.debugPrintln=function(vt){hl.out.println(vt)},ha.prototype.isBoundaryNode=function(vt,_t){var xt=this._nodes.find(_t);if(xt===null)return!1;var Tt=xt.getLabel();return Tt!==null&&Tt.getLocation(vt)===Kr.BOUNDARY},ha.prototype.linkAllDirectedEdges=function(){for(var vt=this._nodes.iterator();vt.hasNext();)vt.next().getEdges().linkAllDirectedEdges()},ha.prototype.matchInSameDirection=function(vt,_t,xt,Tt){return!!vt.equals(xt)&&Ni.computeOrientation(vt,_t,Tt)===Ni.COLLINEAR&&Vs.quadrant(vt,_t)===Vs.quadrant(xt,Tt)},ha.prototype.getEdgeEnds=function(){return this._edgeEndList},ha.prototype.debugPrint=function(vt){hl.out.print(vt)},ha.prototype.getEdgeIterator=function(){return this._edges.iterator()},ha.prototype.findEdgeInSameDirection=function(vt,_t){for(var xt=this,Tt=0;Tt<this._edges.size();Tt++){var At=xt._edges.get(Tt),Pt=At.getCoordinates();if(xt.matchInSameDirection(vt,_t,Pt[0],Pt[1])||xt.matchInSameDirection(vt,_t,Pt[Pt.length-1],Pt[Pt.length-2]))return At}return null},ha.prototype.insertEdge=function(vt){this._edges.add(vt)},ha.prototype.findEdgeEnd=function(vt){for(var _t=this.getEdgeEnds().iterator();_t.hasNext();){var xt=_t.next();if(xt.getEdge()===vt)return xt}return null},ha.prototype.addEdges=function(vt){for(var _t=this,xt=vt.iterator();xt.hasNext();){var Tt=xt.next();_t._edges.add(Tt);var At=new dm(Tt,!0),Pt=new dm(Tt,!1);At.setSym(Pt),Pt.setSym(At),_t.add(At),_t.add(Pt)}},ha.prototype.add=function(vt){this._nodes.add(vt),this._edgeEndList.add(vt)},ha.prototype.getNodes=function(){return this._nodes.values()},ha.prototype.findEdge=function(vt,_t){for(var xt=0;xt<this._edges.size();xt++){var Tt=this._edges.get(xt),At=Tt.getCoordinates();if(vt.equals(At[0])&&_t.equals(At[1]))return Tt}return null},ha.prototype.interfaces_=function(){return[]},ha.prototype.getClass=function(){return ha},ha.linkResultDirectedEdges=function(vt){for(var _t=vt.iterator();_t.hasNext();)_t.next().getEdges().linkResultDirectedEdges()};var Hl=function(){this._geometryFactory=null,this._shellList=new Oi;var vt=arguments[0];this._geometryFactory=vt};Hl.prototype.sortShellsAndHoles=function(vt,_t,xt){for(var Tt=vt.iterator();Tt.hasNext();){var At=Tt.next();At.isHole()?xt.add(At):_t.add(At)}},Hl.prototype.computePolygons=function(vt){for(var _t=new Oi,xt=vt.iterator();xt.hasNext();){var Tt=xt.next().toPolygon(this._geometryFactory);_t.add(Tt)}return _t},Hl.prototype.placeFreeHoles=function(vt,_t){for(var xt=_t.iterator();xt.hasNext();){var Tt=xt.next();if(Tt.getShell()===null){var At=this.findEdgeRingContaining(Tt,vt);if(At===null)throw new gh("unable to assign hole to a shell",Tt.getCoordinate(0));Tt.setShell(At)}}},Hl.prototype.buildMinimalEdgeRings=function(vt,_t,xt){for(var Tt=new Oi,At=vt.iterator();At.hasNext();){var Pt=At.next();if(Pt.getMaxNodeDegree()>2){Pt.linkDirectedEdgesForMinimalEdgeRings();var Nt=Pt.buildMinimalRings(),Vt=this.findShell(Nt);Vt!==null?(this.placePolygonHoles(Vt,Nt),_t.add(Vt)):xt.addAll(Nt)}else Tt.add(Pt)}return Tt},Hl.prototype.containsPoint=function(vt){for(var _t=this._shellList.iterator();_t.hasNext();)if(_t.next().containsPoint(vt))return!0;return!1},Hl.prototype.buildMaximalEdgeRings=function(vt){for(var _t=new Oi,xt=vt.iterator();xt.hasNext();){var Tt=xt.next();if(Tt.isInResult()&&Tt.getLabel().isArea()&&Tt.getEdgeRing()===null){var At=new a_(Tt,this._geometryFactory);_t.add(At),At.setInResult()}}return _t},Hl.prototype.placePolygonHoles=function(vt,_t){for(var xt=_t.iterator();xt.hasNext();){var Tt=xt.next();Tt.isHole()&&Tt.setShell(vt)}},Hl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Hl.prototype.findEdgeRingContaining=function(vt,_t){for(var xt=vt.getLinearRing(),Tt=xt.getEnvelopeInternal(),At=xt.getCoordinateN(0),Pt=null,Nt=null,Vt=_t.iterator();Vt.hasNext();){var Gt=Vt.next(),qt=Gt.getLinearRing(),en=qt.getEnvelopeInternal();Pt!==null&&(Nt=Pt.getLinearRing().getEnvelopeInternal());var Xt=!1;en.contains(Tt)&&Ni.isPointInRing(At,qt.getCoordinates())&&(Xt=!0),Xt&&(Pt===null||Nt.contains(en))&&(Pt=Gt)}return Pt},Hl.prototype.findShell=function(vt){for(var _t=0,xt=null,Tt=vt.iterator();Tt.hasNext();){var At=Tt.next();At.isHole()||(xt=At,_t++)}return $o.isTrue(_t<=1,"found two shells in MinimalEdgeRing list"),xt},Hl.prototype.add=function(){if(arguments.length===1){var vt=arguments[0];this.add(vt.getEdgeEnds(),vt.getNodes())}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];ha.linkResultDirectedEdges(xt);var Tt=this.buildMaximalEdgeRings(_t),At=new Oi,Pt=this.buildMinimalEdgeRings(Tt,this._shellList,At);this.sortShellsAndHoles(Pt,this._shellList,At),this.placeFreeHoles(this._shellList,At)}},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var tp=function(){};tp.prototype.getBounds=function(){},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var Kc=function(){this._bounds=null,this._item=null;var vt=arguments[0],_t=arguments[1];this._bounds=vt,this._item=_t};Kc.prototype.getItem=function(){return this._item},Kc.prototype.getBounds=function(){return this._bounds},Kc.prototype.interfaces_=function(){return[tp,Cc]},Kc.prototype.getClass=function(){return Kc};var Gu=function(){this._size=null,this._items=null,this._size=0,this._items=new Oi,this._items.add(null)};Gu.prototype.poll=function(){if(this.isEmpty())return null;var vt=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),vt},Gu.prototype.size=function(){return this._size},Gu.prototype.reorder=function(vt){for(var _t=this,xt=null,Tt=this._items.get(vt);2*vt<=this._size&&((xt=2*vt)!==_t._size&&_t._items.get(xt+1).compareTo(_t._items.get(xt))<0&&xt++,_t._items.get(xt).compareTo(Tt)<0);vt=xt)_t._items.set(vt,_t._items.get(xt));this._items.set(vt,Tt)},Gu.prototype.clear=function(){this._size=0,this._items.clear()},Gu.prototype.isEmpty=function(){return this._size===0},Gu.prototype.add=function(vt){this._items.add(null),this._size+=1;var _t=this._size;for(this._items.set(0,vt);vt.compareTo(this._items.get(Math.trunc(_t/2)))<0;_t/=2)this._items.set(_t,this._items.get(Math.trunc(_t/2)));this._items.set(_t,vt)},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu};var Hh=function(){};Hh.prototype.visitItem=function(vt){},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh};var of=function(){};of.prototype.insert=function(vt,_t){},of.prototype.remove=function(vt,_t){},of.prototype.query=function(){},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var ka=function(){if(this._childBoundables=new Oi,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this._level=vt}}},Py={serialVersionUID:{configurable:!0}};ka.prototype.getLevel=function(){return this._level},ka.prototype.size=function(){return this._childBoundables.size()},ka.prototype.getChildBoundables=function(){return this._childBoundables},ka.prototype.addChildBoundable=function(vt){$o.isTrue(this._bounds===null),this._childBoundables.add(vt)},ka.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ka.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},ka.prototype.interfaces_=function(){return[tp,Cc]},ka.prototype.getClass=function(){return ka},Py.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(ka,Py);var Jc=function(){};Jc.reverseOrder=function(){return{compare:function(vt,_t){return _t.compareTo(vt)}}},Jc.min=function(vt){return Jc.sort(vt),vt.get(0)},Jc.sort=function(vt,_t){var xt=vt.toArray();_t?Hu.sort(xt,_t):Hu.sort(xt);for(var Tt=vt.iterator(),At=0,Pt=xt.length;At<Pt;At++)Tt.next(),Tt.set(xt[At])},Jc.singletonList=function(vt){var _t=new Oi;return _t.add(vt),_t};var Sa=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var vt=arguments[0],_t=arguments[1],xt=arguments[2];this._boundable1=vt,this._boundable2=_t,this._itemDistance=xt,this._distance=this.distance()};Sa.prototype.expandToQueue=function(vt,_t){var xt=Sa.isComposite(this._boundable1),Tt=Sa.isComposite(this._boundable2);if(xt&&Tt)return Sa.area(this._boundable1)>Sa.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,vt,_t),null):(this.expand(this._boundable2,this._boundable1,vt,_t),null);if(xt)return this.expand(this._boundable1,this._boundable2,vt,_t),null;if(Tt)return this.expand(this._boundable2,this._boundable1,vt,_t),null;throw new oa("neither boundable is composite")},Sa.prototype.isLeaves=function(){return!(Sa.isComposite(this._boundable1)||Sa.isComposite(this._boundable2))},Sa.prototype.compareTo=function(vt){var _t=vt;return this._distance<_t._distance?-1:this._distance>_t._distance?1:0},Sa.prototype.expand=function(vt,_t,xt,Tt){for(var At=vt.getChildBoundables().iterator();At.hasNext();){var Pt=At.next(),Nt=new Sa(Pt,_t,this._itemDistance);Nt.getDistance()<Tt&&xt.add(Nt)}},Sa.prototype.getBoundable=function(vt){return vt===0?this._boundable1:this._boundable2},Sa.prototype.getDistance=function(){return this._distance},Sa.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Sa.prototype.interfaces_=function(){return[Sc]},Sa.prototype.getClass=function(){return Sa},Sa.area=function(vt){return vt.getBounds().getArea()},Sa.isComposite=function(vt){return vt instanceof ka};var nl=function vt(){if(this._root=null,this._built=!1,this._itemBoundables=new Oi,this._nodeCapacity=null,arguments.length===0){var _t=vt.DEFAULT_NODE_CAPACITY;this._nodeCapacity=_t}else if(arguments.length===1){var xt=arguments[0];$o.isTrue(xt>1,"Node capacity must be greater than 1"),this._nodeCapacity=xt}},fm={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};nl.prototype.getNodeCapacity=function(){return this._nodeCapacity},nl.prototype.lastNode=function(vt){return vt.get(vt.size()-1)},nl.prototype.size=function(){var vt=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var _t=arguments[0],xt=0,Tt=_t.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();At instanceof ka?xt+=vt.size(At):At instanceof Kc&&(xt+=1)}return xt}},nl.prototype.removeItem=function(vt,_t){for(var xt=null,Tt=vt.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();At instanceof Kc&&At.getItem()===_t&&(xt=At)}return xt!==null&&(vt.getChildBoundables().remove(xt),!0)},nl.prototype.itemsTree=function(){var vt=this;if(arguments.length===0){this.build();var _t=this.itemsTree(this._root);return _t===null?new Oi:_t}if(arguments.length===1){for(var xt=arguments[0],Tt=new Oi,At=xt.getChildBoundables().iterator();At.hasNext();){var Pt=At.next();if(Pt instanceof ka){var Nt=vt.itemsTree(Pt);Nt!==null&&Tt.add(Nt)}else Pt instanceof Kc?Tt.add(Pt.getItem()):$o.shouldNeverReachHere()}return Tt.size()<=0?null:Tt}},nl.prototype.insert=function(vt,_t){$o.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Kc(vt,_t))},nl.prototype.boundablesAtLevel=function(){var vt=this;if(arguments.length===1){var _t=arguments[0],xt=new Oi;return this.boundablesAtLevel(_t,this._root,xt),xt}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2];if($o.isTrue(Tt>-2),At.getLevel()===Tt)return Pt.add(At),null;for(var Nt=At.getChildBoundables().iterator();Nt.hasNext();){var Vt=Nt.next();Vt instanceof ka?vt.boundablesAtLevel(Tt,Vt,Pt):($o.isTrue(Vt instanceof Kc),Tt===-1&&Pt.add(Vt))}return null}},nl.prototype.query=function(){var vt=this;if(arguments.length===1){var _t=arguments[0];this.build();var xt=new Oi;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),_t)&&this.query(_t,this._root,xt),xt}if(arguments.length===2){var Tt=arguments[0],At=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),Tt)&&this.query(Tt,this._root,At)}else if(arguments.length===3){if(_o(arguments[2],Hh)&&arguments[0]instanceof Object&&arguments[1]instanceof ka)for(var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2],Gt=Nt.getChildBoundables(),qt=0;qt<Gt.size();qt++){var en=Gt.get(qt);vt.getIntersectsOp().intersects(en.getBounds(),Pt)&&(en instanceof ka?vt.query(Pt,en,Vt):en instanceof Kc?Vt.visitItem(en.getItem()):$o.shouldNeverReachHere())}else if(_o(arguments[2],Gc)&&arguments[0]instanceof Object&&arguments[1]instanceof ka)for(var Xt=arguments[0],an=arguments[1],_n=arguments[2],bn=an.getChildBoundables(),En=0;En<bn.size();En++){var un=bn.get(En);vt.getIntersectsOp().intersects(un.getBounds(),Xt)&&(un instanceof ka?vt.query(Xt,un,_n):un instanceof Kc?_n.add(un.getItem()):$o.shouldNeverReachHere())}}},nl.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},nl.prototype.getRoot=function(){return this.build(),this._root},nl.prototype.remove=function(){var vt=this;if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),_t)&&this.remove(_t,this._root,xt)}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2],Nt=this.removeItem(At,Pt);if(Nt)return!0;for(var Vt=null,Gt=At.getChildBoundables().iterator();Gt.hasNext();){var qt=Gt.next();if(vt.getIntersectsOp().intersects(qt.getBounds(),Tt)&&qt instanceof ka&&(Nt=vt.remove(Tt,qt,Pt))){Vt=qt;break}}return Vt!==null&&Vt.getChildBoundables().isEmpty()&&At.getChildBoundables().remove(Vt),Nt}},nl.prototype.createHigherLevels=function(vt,_t){$o.isTrue(!vt.isEmpty());var xt=this.createParentBoundables(vt,_t+1);return xt.size()===1?xt.get(0):this.createHigherLevels(xt,_t+1)},nl.prototype.depth=function(){var vt=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var _t=arguments[0],xt=0,Tt=_t.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();if(At instanceof ka){var Pt=vt.depth(At);Pt>xt&&(xt=Pt)}}return xt+1}},nl.prototype.createParentBoundables=function(vt,_t){var xt=this;$o.isTrue(!vt.isEmpty());var Tt=new Oi;Tt.add(this.createNode(_t));var At=new Oi(vt);Jc.sort(At,this.getComparator());for(var Pt=At.iterator();Pt.hasNext();){var Nt=Pt.next();xt.lastNode(Tt).getChildBoundables().size()===xt.getNodeCapacity()&&Tt.add(xt.createNode(_t)),xt.lastNode(Tt).addChildBoundable(Nt)}return Tt},nl.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},nl.prototype.interfaces_=function(){return[Cc]},nl.prototype.getClass=function(){return nl},nl.compareDoubles=function(vt,_t){return vt>_t?1:vt<_t?-1:0},fm.IntersectsOp.get=function(){return Oy},fm.serialVersionUID.get=function(){return-3886435814360241e3},fm.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(nl,fm);var Oy=function(){},np=function(){};np.prototype.distance=function(vt,_t){},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var My=function(vt){function _t(Tt){Tt=Tt||_t.DEFAULT_NODE_CAPACITY,vt.call(this,Tt)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return _t.prototype.createParentBoundablesFromVerticalSlices=function(Tt,At){$o.isTrue(Tt.length>0);for(var Pt=new Oi,Nt=0;Nt<Tt.length;Nt++)Pt.addAll(this.createParentBoundablesFromVerticalSlice(Tt[Nt],At));return Pt},_t.prototype.createNode=function(Tt){return new N0(Tt)},_t.prototype.size=function(){return arguments.length===0?vt.prototype.size.call(this):vt.prototype.size.apply(this,arguments)},_t.prototype.insert=function(){if(arguments.length!==2)return vt.prototype.insert.apply(this,arguments);var Tt=arguments[0],At=arguments[1];if(Tt.isNull())return null;vt.prototype.insert.call(this,Tt,At)},_t.prototype.getIntersectsOp=function(){return _t.intersectsOp},_t.prototype.verticalSlices=function(Tt,At){for(var Pt=Math.trunc(Math.ceil(Tt.size()/At)),Nt=new Array(At).fill(null),Vt=Tt.iterator(),Gt=0;Gt<At;Gt++){Nt[Gt]=new Oi;for(var qt=0;Vt.hasNext()&&qt<Pt;){var en=Vt.next();Nt[Gt].add(en),qt++}}return Nt},_t.prototype.query=function(){if(arguments.length===1){var Tt=arguments[0];return vt.prototype.query.call(this,Tt)}if(arguments.length===2){var At=arguments[0],Pt=arguments[1];vt.prototype.query.call(this,At,Pt)}else if(arguments.length===3){if(_o(arguments[2],Hh)&&arguments[0]instanceof Object&&arguments[1]instanceof ka){var Nt=arguments[0],Vt=arguments[1],Gt=arguments[2];vt.prototype.query.call(this,Nt,Vt,Gt)}else if(_o(arguments[2],Gc)&&arguments[0]instanceof Object&&arguments[1]instanceof ka){var qt=arguments[0],en=arguments[1],Xt=arguments[2];vt.prototype.query.call(this,qt,en,Xt)}}},_t.prototype.getComparator=function(){return _t.yComparator},_t.prototype.createParentBoundablesFromVerticalSlice=function(Tt,At){return vt.prototype.createParentBoundables.call(this,Tt,At)},_t.prototype.remove=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return vt.prototype.remove.call(this,Tt,At)}return vt.prototype.remove.apply(this,arguments)},_t.prototype.depth=function(){return arguments.length===0?vt.prototype.depth.call(this):vt.prototype.depth.apply(this,arguments)},_t.prototype.createParentBoundables=function(Tt,At){$o.isTrue(!Tt.isEmpty());var Pt=Math.trunc(Math.ceil(Tt.size()/this.getNodeCapacity())),Nt=new Oi(Tt);Jc.sort(Nt,_t.xComparator);var Vt=this.verticalSlices(Nt,Math.trunc(Math.ceil(Math.sqrt(Pt))));return this.createParentBoundablesFromVerticalSlices(Vt,At)},_t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(_o(arguments[0],np)){var Tt=arguments[0],At=new Sa(this.getRoot(),this.getRoot(),Tt);return this.nearestNeighbour(At)}if(arguments[0]instanceof Sa){var Pt=arguments[0];return this.nearestNeighbour(Pt,ko.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof _t&&_o(arguments[1],np)){var Nt=arguments[0],Vt=arguments[1],Gt=new Sa(this.getRoot(),Nt.getRoot(),Vt);return this.nearestNeighbour(Gt)}if(arguments[0]instanceof Sa&&typeof arguments[1]=="number"){var qt=arguments[0],en=arguments[1],Xt=en,an=null,_n=new Gu;for(_n.add(qt);!_n.isEmpty()&&Xt>0;){var bn=_n.poll(),En=bn.getDistance();if(En>=Xt)break;bn.isLeaves()?(Xt=En,an=bn):bn.expandToQueue(_n,Xt)}return[an.getBoundable(0).getItem(),an.getBoundable(1).getItem()]}}else if(arguments.length===3){var un=arguments[0],Vn=arguments[1],nr=arguments[2],xn=new Kc(un,Vn),zn=new Sa(this.getRoot(),xn,nr);return this.nearestNeighbour(zn)[0]}},_t.prototype.interfaces_=function(){return[of,Cc]},_t.prototype.getClass=function(){return _t},_t.centreX=function(Tt){return _t.avg(Tt.getMinX(),Tt.getMaxX())},_t.avg=function(Tt,At){return(Tt+At)/2},_t.centreY=function(Tt){return _t.avg(Tt.getMinY(),Tt.getMaxY())},xt.STRtreeNode.get=function(){return N0},xt.serialVersionUID.get=function(){return 0x39920f7d5f261e0},xt.xComparator.get=function(){return{interfaces_:function(){return[jf]},compare:function(Tt,At){return vt.compareDoubles(_t.centreX(Tt.getBounds()),_t.centreX(At.getBounds()))}}},xt.yComparator.get=function(){return{interfaces_:function(){return[jf]},compare:function(Tt,At){return vt.compareDoubles(_t.centreY(Tt.getBounds()),_t.centreY(At.getBounds()))}}},xt.intersectsOp.get=function(){return{interfaces_:function(){return[vt.IntersectsOp]},intersects:function(Tt,At){return Tt.intersects(At)}}},xt.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_t,xt),_t}(nl),N0=function(vt){function _t(){var xt=arguments[0];vt.call(this,xt)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.computeBounds=function(){for(var xt=null,Tt=this.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();xt===null?xt=new eo(At.getBounds()):xt.expandToInclude(At.getBounds())}return xt},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ka),Vl=function(){};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.relativeSign=function(vt,_t){return vt<_t?-1:vt>_t?1:0},Vl.compare=function(vt,_t,xt){if(_t.equals2D(xt))return 0;var Tt=Vl.relativeSign(_t.x,xt.x),At=Vl.relativeSign(_t.y,xt.y);switch(vt){case 0:return Vl.compareValue(Tt,At);case 1:return Vl.compareValue(At,Tt);case 2:return Vl.compareValue(At,-Tt);case 3:return Vl.compareValue(-Tt,At);case 4:return Vl.compareValue(-Tt,-At);case 5:return Vl.compareValue(-At,-Tt);case 6:return Vl.compareValue(-At,Tt);case 7:return Vl.compareValue(Tt,-At)}return $o.shouldNeverReachHere("invalid octant value"),0},Vl.compareValue=function(vt,_t){return vt<0?-1:vt>0?1:_t<0?-1:_t>0?1:0};var Vh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=arguments[3];this._segString=vt,this.coord=new jr(_t),this.segmentIndex=xt,this._segmentOctant=Tt,this._isInterior=!_t.equals2D(vt.getCoordinate(xt))};Vh.prototype.getCoordinate=function(){return this.coord},Vh.prototype.print=function(vt){vt.print(this.coord),vt.print(" seg # = "+this.segmentIndex)},Vh.prototype.compareTo=function(vt){var _t=vt;return this.segmentIndex<_t.segmentIndex?-1:this.segmentIndex>_t.segmentIndex?1:this.coord.equals2D(_t.coord)?0:Vl.compare(this._segmentOctant,this.coord,_t.coord)},Vh.prototype.isEndPoint=function(vt){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===vt},Vh.prototype.isInterior=function(){return this._isInterior},Vh.prototype.interfaces_=function(){return[Sc]},Vh.prototype.getClass=function(){return Vh};var Ya=function(){this._nodeMap=new bl,this._edge=null;var vt=arguments[0];this._edge=vt};Ya.prototype.getSplitCoordinates=function(){var vt=new Qp;this.addEndpoints();for(var _t=this.iterator(),xt=_t.next();_t.hasNext();){var Tt=_t.next();this.addEdgeCoordinates(xt,Tt,vt),xt=Tt}return vt.toCoordinateArray()},Ya.prototype.addCollapsedNodes=function(){var vt=new Oi;this.findCollapsesFromInsertedNodes(vt),this.findCollapsesFromExistingVertices(vt);for(var _t=vt.iterator();_t.hasNext();){var xt=_t.next().intValue();this.add(this._edge.getCoordinate(xt),xt)}},Ya.prototype.print=function(vt){vt.println("Intersections:");for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},Ya.prototype.findCollapsesFromExistingVertices=function(vt){for(var _t=0;_t<this._edge.size()-2;_t++){var xt=this._edge.getCoordinate(_t),Tt=this._edge.getCoordinate(_t+2);xt.equals2D(Tt)&&vt.add(new hu(_t+1))}},Ya.prototype.addEdgeCoordinates=function(vt,_t,xt){var Tt=this._edge.getCoordinate(_t.segmentIndex),At=_t.isInterior()||!_t.coord.equals2D(Tt);xt.add(new jr(vt.coord),!1);for(var Pt=vt.segmentIndex+1;Pt<=_t.segmentIndex;Pt++)xt.add(this._edge.getCoordinate(Pt));At&&xt.add(new jr(_t.coord))},Ya.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ya.prototype.addSplitEdges=function(vt){this.addEndpoints(),this.addCollapsedNodes();for(var _t=this.iterator(),xt=_t.next();_t.hasNext();){var Tt=_t.next(),At=this.createSplitEdge(xt,Tt);vt.add(At),xt=Tt}},Ya.prototype.findCollapseIndex=function(vt,_t,xt){if(!vt.coord.equals2D(_t.coord))return!1;var Tt=_t.segmentIndex-vt.segmentIndex;return _t.isInterior()||Tt--,Tt===1&&(xt[0]=vt.segmentIndex+1,!0)},Ya.prototype.findCollapsesFromInsertedNodes=function(vt){for(var _t=new Array(1).fill(null),xt=this.iterator(),Tt=xt.next();xt.hasNext();){var At=xt.next();this.findCollapseIndex(Tt,At,_t)&&vt.add(new hu(_t[0])),Tt=At}},Ya.prototype.getEdge=function(){return this._edge},Ya.prototype.addEndpoints=function(){var vt=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(vt),vt)},Ya.prototype.createSplitEdge=function(vt,_t){var xt=_t.segmentIndex-vt.segmentIndex+2,Tt=this._edge.getCoordinate(_t.segmentIndex),At=_t.isInterior()||!_t.coord.equals2D(Tt);At||xt--;var Pt=new Array(xt).fill(null),Nt=0;Pt[Nt++]=new jr(vt.coord);for(var Vt=vt.segmentIndex+1;Vt<=_t.segmentIndex;Vt++)Pt[Nt++]=this._edge.getCoordinate(Vt);return At&&(Pt[Nt]=new jr(_t.coord)),new fa(Pt,this._edge.getData())},Ya.prototype.add=function(vt,_t){var xt=new Vh(this._edge,vt,_t,this._edge.getSegmentOctant(_t)),Tt=this._nodeMap.get(xt);return Tt!==null?($o.isTrue(Tt.coord.equals2D(vt),"Found equal nodes with different coordinates"),Tt):(this._nodeMap.put(xt,xt),xt)},Ya.prototype.checkSplitEdgesCorrectness=function(vt){var _t=this._edge.getCoordinates(),xt=vt.get(0).getCoordinate(0);if(!xt.equals2D(_t[0]))throw new dh("bad split edge start point at "+xt);var Tt=vt.get(vt.size()-1).getCoordinates(),At=Tt[Tt.length-1];if(!At.equals2D(_t[_t.length-1]))throw new dh("bad split edge end point at "+At)},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya};var Qc=function(){};Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},Qc.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],_t=arguments[1];if(vt===0&&_t===0)throw new oa("Cannot compute the octant for point ( "+vt+", "+_t+" )");var xt=Math.abs(vt),Tt=Math.abs(_t);return vt>=0?_t>=0?xt>=Tt?0:1:xt>=Tt?7:6:_t>=0?xt>=Tt?3:2:xt>=Tt?4:5}if(arguments[0]instanceof jr&&arguments[1]instanceof jr){var At=arguments[0],Pt=arguments[1],Nt=Pt.x-At.x,Vt=Pt.y-At.y;if(Nt===0&&Vt===0)throw new oa("Cannot compute the octant for two identical points "+At);return Qc.octant(Nt,Vt)}};var Ra=function(){};Ra.prototype.getCoordinates=function(){},Ra.prototype.size=function(){},Ra.prototype.getCoordinate=function(vt){},Ra.prototype.isClosed=function(){},Ra.prototype.setData=function(vt){},Ra.prototype.getData=function(){},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra};var lg=function(){};lg.prototype.addIntersection=function(vt,_t){},lg.prototype.interfaces_=function(){return[Ra]},lg.prototype.getClass=function(){return lg};var fa=function(){this._nodeList=new Ya(this),this._pts=null,this._data=null;var vt=arguments[0],_t=arguments[1];this._pts=vt,this._data=_t};fa.prototype.getCoordinates=function(){return this._pts},fa.prototype.size=function(){return this._pts.length},fa.prototype.getCoordinate=function(vt){return this._pts[vt]},fa.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fa.prototype.getSegmentOctant=function(vt){return vt===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(vt),this.getCoordinate(vt+1))},fa.prototype.setData=function(vt){this._data=vt},fa.prototype.safeOctant=function(vt,_t){return vt.equals2D(_t)?0:Qc.octant(vt,_t)},fa.prototype.getData=function(){return this._data},fa.prototype.addIntersection=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this.addIntersectionNode(vt,_t)}else if(arguments.length===4){var xt=arguments[0],Tt=arguments[1],At=arguments[3],Pt=new jr(xt.getIntersection(At));this.addIntersection(Pt,Tt)}},fa.prototype.toString=function(){return Uc.toLineString(new wa(this._pts))},fa.prototype.getNodeList=function(){return this._nodeList},fa.prototype.addIntersectionNode=function(vt,_t){var xt=_t,Tt=xt+1;if(Tt<this._pts.length){var At=this._pts[Tt];vt.equals2D(At)&&(xt=Tt)}return this._nodeList.add(vt,xt)},fa.prototype.addIntersections=function(vt,_t,xt){for(var Tt=0;Tt<vt.getIntersectionNum();Tt++)this.addIntersection(vt,_t,xt,Tt)},fa.prototype.interfaces_=function(){return[lg]},fa.prototype.getClass=function(){return fa},fa.getNodedSubstrings=function(){if(arguments.length===1){var vt=arguments[0],_t=new Oi;return fa.getNodedSubstrings(vt,_t),_t}if(arguments.length===2)for(var xt=arguments[0],Tt=arguments[1],At=xt.iterator();At.hasNext();){var Pt=At.next();Pt.getNodeList().addSplitEdges(Tt)}};var Ji=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new jr,this.p1=new jr;else if(arguments.length===1){var vt=arguments[0];this.p0=new jr(vt.p0),this.p1=new jr(vt.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var _t=arguments[0],xt=arguments[1],Tt=arguments[2],At=arguments[3];this.p0=new jr(_t,xt),this.p1=new jr(Tt,At)}},pm={serialVersionUID:{configurable:!0}};Ji.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Ji.prototype.orientationIndex=function(){if(arguments[0]instanceof Ji){var vt=arguments[0],_t=Ni.orientationIndex(this.p0,this.p1,vt.p0),xt=Ni.orientationIndex(this.p0,this.p1,vt.p1);return _t>=0&&xt>=0||_t<=0&&xt<=0?Math.max(_t,xt):0}if(arguments[0]instanceof jr){var Tt=arguments[0];return Ni.orientationIndex(this.p0,this.p1,Tt)}},Ji.prototype.toGeometry=function(vt){return vt.createLineString([this.p0,this.p1])},Ji.prototype.isVertical=function(){return this.p0.x===this.p1.x},Ji.prototype.equals=function(vt){if(!(vt instanceof Ji))return!1;var _t=vt;return this.p0.equals(_t.p0)&&this.p1.equals(_t.p1)},Ji.prototype.intersection=function(vt){var _t=new Bh;return _t.computeIntersection(this.p0,this.p1,vt.p0,vt.p1),_t.hasIntersection()?_t.getIntersection(0):null},Ji.prototype.project=function(){if(arguments[0]instanceof jr){var vt=arguments[0];if(vt.equals(this.p0)||vt.equals(this.p1))return new jr(vt);var _t=this.projectionFactor(vt),xt=new jr;return xt.x=this.p0.x+_t*(this.p1.x-this.p0.x),xt.y=this.p0.y+_t*(this.p1.y-this.p0.y),xt}if(arguments[0]instanceof Ji){var Tt=arguments[0],At=this.projectionFactor(Tt.p0),Pt=this.projectionFactor(Tt.p1);if(At>=1&&Pt>=1||At<=0&&Pt<=0)return null;var Nt=this.project(Tt.p0);At<0&&(Nt=this.p0),At>1&&(Nt=this.p1);var Vt=this.project(Tt.p1);return Pt<0&&(Vt=this.p0),Pt>1&&(Vt=this.p1),new Ji(Nt,Vt)}},Ji.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Ji.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Ji.prototype.getCoordinate=function(vt){return vt===0?this.p0:this.p1},Ji.prototype.distancePerpendicular=function(vt){return Ni.distancePointLinePerpendicular(vt,this.p0,this.p1)},Ji.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Ji.prototype.midPoint=function(){return Ji.midPoint(this.p0,this.p1)},Ji.prototype.projectionFactor=function(vt){if(vt.equals(this.p0))return 0;if(vt.equals(this.p1))return 1;var _t=this.p1.x-this.p0.x,xt=this.p1.y-this.p0.y,Tt=_t*_t+xt*xt;return Tt<=0?ko.NaN:((vt.x-this.p0.x)*_t+(vt.y-this.p0.y)*xt)/Tt},Ji.prototype.closestPoints=function(vt){var _t=this.intersection(vt);if(_t!==null)return[_t,_t];var xt=new Array(2).fill(null),Tt=ko.MAX_VALUE,At=null,Pt=this.closestPoint(vt.p0);Tt=Pt.distance(vt.p0),xt[0]=Pt,xt[1]=vt.p0;var Nt=this.closestPoint(vt.p1);(At=Nt.distance(vt.p1))<Tt&&(Tt=At,xt[0]=Nt,xt[1]=vt.p1);var Vt=vt.closestPoint(this.p0);(At=Vt.distance(this.p0))<Tt&&(Tt=At,xt[0]=this.p0,xt[1]=Vt);var Gt=vt.closestPoint(this.p1);return(At=Gt.distance(this.p1))<Tt&&(Tt=At,xt[0]=this.p1,xt[1]=Gt),xt},Ji.prototype.closestPoint=function(vt){var _t=this.projectionFactor(vt);return _t>0&&_t<1?this.project(vt):this.p0.distance(vt)<this.p1.distance(vt)?this.p0:this.p1},Ji.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Ji.prototype.getLength=function(){return this.p0.distance(this.p1)},Ji.prototype.compareTo=function(vt){var _t=vt,xt=this.p0.compareTo(_t.p0);return xt!==0?xt:this.p1.compareTo(_t.p1)},Ji.prototype.reverse=function(){var vt=this.p0;this.p0=this.p1,this.p1=vt},Ji.prototype.equalsTopo=function(vt){return this.p0.equals(vt.p0)&&(this.p1.equals(vt.p1)||this.p0.equals(vt.p1))&&this.p1.equals(vt.p0)},Ji.prototype.lineIntersection=function(vt){try{return Tc.intersection(this.p0,this.p1,vt.p0,vt.p1)}catch(_t){if(!(_t instanceof Zd))throw _t}return null},Ji.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Ji.prototype.pointAlongOffset=function(vt,_t){var xt=this.p0.x+vt*(this.p1.x-this.p0.x),Tt=this.p0.y+vt*(this.p1.y-this.p0.y),At=this.p1.x-this.p0.x,Pt=this.p1.y-this.p0.y,Nt=Math.sqrt(At*At+Pt*Pt),Vt=0,Gt=0;if(_t!==0){if(Nt<=0)throw new Error("Cannot compute offset from zero-length line segment");Vt=_t*At/Nt,Gt=_t*Pt/Nt}return new jr(xt-Gt,Tt+Vt)},Ji.prototype.setCoordinates=function(){if(arguments.length===1){var vt=arguments[0];this.setCoordinates(vt.p0,vt.p1)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this.p0.x=_t.x,this.p0.y=_t.y,this.p1.x=xt.x,this.p1.y=xt.y}},Ji.prototype.segmentFraction=function(vt){var _t=this.projectionFactor(vt);return _t<0?_t=0:(_t>1||ko.isNaN(_t))&&(_t=1),_t},Ji.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Ji.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Ji.prototype.distance=function(){if(arguments[0]instanceof Ji){var vt=arguments[0];return Ni.distanceLineLine(this.p0,this.p1,vt.p0,vt.p1)}if(arguments[0]instanceof jr){var _t=arguments[0];return Ni.distancePointLine(_t,this.p0,this.p1)}},Ji.prototype.pointAlong=function(vt){var _t=new jr;return _t.x=this.p0.x+vt*(this.p1.x-this.p0.x),_t.y=this.p0.y+vt*(this.p1.y-this.p0.y),_t},Ji.prototype.hashCode=function(){var vt=ko.doubleToLongBits(this.p0.x);vt^=31*ko.doubleToLongBits(this.p0.y);var _t=Math.trunc(vt)^Math.trunc(vt>>32),xt=ko.doubleToLongBits(this.p1.x);return xt^=31*ko.doubleToLongBits(this.p1.y),_t^(Math.trunc(xt)^Math.trunc(xt>>32))},Ji.prototype.interfaces_=function(){return[Sc,Cc]},Ji.prototype.getClass=function(){return Ji},Ji.midPoint=function(vt,_t){return new jr((vt.x+_t.x)/2,(vt.y+_t.y)/2)},pm.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Ji,pm);var cg=function(){this.tempEnv1=new eo,this.tempEnv2=new eo,this._overlapSeg1=new Ji,this._overlapSeg2=new Ji};cg.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=arguments[3];vt.getLineSegment(_t,this._overlapSeg1),xt.getLineSegment(Tt,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},cg.prototype.interfaces_=function(){return[]},cg.prototype.getClass=function(){return cg};var ec=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=arguments[3];this._pts=vt,this._start=_t,this._end=xt,this._context=Tt};ec.prototype.getLineSegment=function(vt,_t){_t.p0=this._pts[vt],_t.p1=this._pts[vt+1]},ec.prototype.computeSelect=function(vt,_t,xt,Tt){var At=this._pts[_t],Pt=this._pts[xt];if(Tt.tempEnv1.init(At,Pt),xt-_t==1)return Tt.select(this,_t),null;if(!vt.intersects(Tt.tempEnv1))return null;var Nt=Math.trunc((_t+xt)/2);_t<Nt&&this.computeSelect(vt,_t,Nt,Tt),Nt<xt&&this.computeSelect(vt,Nt,xt,Tt)},ec.prototype.getCoordinates=function(){for(var vt=new Array(this._end-this._start+1).fill(null),_t=0,xt=this._start;xt<=this._end;xt++)vt[_t++]=this._pts[xt];return vt},ec.prototype.computeOverlaps=function(vt,_t){this.computeOverlapsInternal(this._start,this._end,vt,vt._start,vt._end,_t)},ec.prototype.setId=function(vt){this._id=vt},ec.prototype.select=function(vt,_t){this.computeSelect(vt,this._start,this._end,_t)},ec.prototype.getEnvelope=function(){if(this._env===null){var vt=this._pts[this._start],_t=this._pts[this._end];this._env=new eo(vt,_t)}return this._env},ec.prototype.getEndIndex=function(){return this._end},ec.prototype.getStartIndex=function(){return this._start},ec.prototype.getContext=function(){return this._context},ec.prototype.getId=function(){return this._id},ec.prototype.computeOverlapsInternal=function(vt,_t,xt,Tt,At,Pt){var Nt=this._pts[vt],Vt=this._pts[_t],Gt=xt._pts[Tt],qt=xt._pts[At];if(_t-vt==1&&At-Tt==1)return Pt.overlap(this,vt,xt,Tt),null;if(Pt.tempEnv1.init(Nt,Vt),Pt.tempEnv2.init(Gt,qt),!Pt.tempEnv1.intersects(Pt.tempEnv2))return null;var en=Math.trunc((vt+_t)/2),Xt=Math.trunc((Tt+At)/2);vt<en&&(Tt<Xt&&this.computeOverlapsInternal(vt,en,xt,Tt,Xt,Pt),Xt<At&&this.computeOverlapsInternal(vt,en,xt,Xt,At,Pt)),en<_t&&(Tt<Xt&&this.computeOverlapsInternal(en,_t,xt,Tt,Xt,Pt),Xt<At&&this.computeOverlapsInternal(en,_t,xt,Xt,At,Pt))},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec};var Pc=function(){};Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.getChainStartIndices=function(vt){var _t=0,xt=new Oi;xt.add(new hu(_t));do{var Tt=Pc.findChainEnd(vt,_t);xt.add(new hu(Tt)),_t=Tt}while(_t<vt.length-1);return Pc.toIntArray(xt)},Pc.findChainEnd=function(vt,_t){for(var xt=_t;xt<vt.length-1&&vt[xt].equals2D(vt[xt+1]);)xt++;if(xt>=vt.length-1)return vt.length-1;for(var Tt=Vs.quadrant(vt[xt],vt[xt+1]),At=_t+1;At<vt.length&&!(!vt[At-1].equals2D(vt[At])&&Vs.quadrant(vt[At-1],vt[At])!==Tt);)At++;return At-1},Pc.getChains=function(){if(arguments.length===1){var vt=arguments[0];return Pc.getChains(vt,null)}if(arguments.length===2){for(var _t=arguments[0],xt=arguments[1],Tt=new Oi,At=Pc.getChainStartIndices(_t),Pt=0;Pt<At.length-1;Pt++){var Nt=new ec(_t,At[Pt],At[Pt+1],xt);Tt.add(Nt)}return Tt}},Pc.toIntArray=function(vt){for(var _t=new Array(vt.size()).fill(null),xt=0;xt<_t.length;xt++)_t[xt]=vt.get(xt).intValue();return _t};var xd=function(){};xd.prototype.computeNodes=function(vt){},xd.prototype.getNodedSubstrings=function(){},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var ug=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this.setSegmentIntersector(vt)}}};ug.prototype.setSegmentIntersector=function(vt){this._segInt=vt},ug.prototype.interfaces_=function(){return[xd]},ug.prototype.getClass=function(){return ug};var D0=function(vt){function _t(Tt){Tt?vt.call(this,Tt):vt.call(this),this._monoChains=new Oi,this._index=new My,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var xt={SegmentOverlapAction:{configurable:!0}};return _t.prototype.getMonotoneChains=function(){return this._monoChains},_t.prototype.getNodedSubstrings=function(){return fa.getNodedSubstrings(this._nodedSegStrings)},_t.prototype.getIndex=function(){return this._index},_t.prototype.add=function(Tt){for(var At=this,Pt=Pc.getChains(Tt.getCoordinates(),Tt).iterator();Pt.hasNext();){var Nt=Pt.next();Nt.setId(At._idCounter++),At._index.insert(Nt.getEnvelope(),Nt),At._monoChains.add(Nt)}},_t.prototype.computeNodes=function(Tt){this._nodedSegStrings=Tt;for(var At=Tt.iterator();At.hasNext();)this.add(At.next());this.intersectChains()},_t.prototype.intersectChains=function(){for(var Tt=this,At=new gm(this._segInt),Pt=this._monoChains.iterator();Pt.hasNext();)for(var Nt=Pt.next(),Vt=Tt._index.query(Nt.getEnvelope()).iterator();Vt.hasNext();){var Gt=Vt.next();if(Gt.getId()>Nt.getId()&&(Nt.computeOverlaps(Gt,At),Tt._nOverlaps++),Tt._segInt.isDone())return null}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},xt.SegmentOverlapAction.get=function(){return gm},Object.defineProperties(_t,xt),_t}(ug),gm=function(vt){function _t(){vt.call(this),this._si=null;var xt=arguments[0];this._si=xt}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.overlap=function(){if(arguments.length!==4)return vt.prototype.overlap.apply(this,arguments);var xt=arguments[0],Tt=arguments[1],At=arguments[2],Pt=arguments[3],Nt=xt.getContext(),Vt=At.getContext();this._si.processIntersections(Nt,Tt,Vt,Pt)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(cg),Rs=function vt(){if(this._quadrantSegments=vt.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=vt.CAP_ROUND,this._joinStyle=vt.JOIN_ROUND,this._mitreLimit=vt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=vt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var _t=arguments[0];this.setQuadrantSegments(_t)}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];this.setQuadrantSegments(xt),this.setEndCapStyle(Tt)}else if(arguments.length===4){var At=arguments[0],Pt=arguments[1],Nt=arguments[2],Vt=arguments[3];this.setQuadrantSegments(At),this.setEndCapStyle(Pt),this.setJoinStyle(Nt),this.setMitreLimit(Vt)}}},eu={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Rs.prototype.getEndCapStyle=function(){return this._endCapStyle},Rs.prototype.isSingleSided=function(){return this._isSingleSided},Rs.prototype.setQuadrantSegments=function(vt){this._quadrantSegments=vt,this._quadrantSegments===0&&(this._joinStyle=Rs.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Rs.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),vt<=0&&(this._quadrantSegments=1),this._joinStyle!==Rs.JOIN_ROUND&&(this._quadrantSegments=Rs.DEFAULT_QUADRANT_SEGMENTS)},Rs.prototype.getJoinStyle=function(){return this._joinStyle},Rs.prototype.setJoinStyle=function(vt){this._joinStyle=vt},Rs.prototype.setSimplifyFactor=function(vt){this._simplifyFactor=vt<0?0:vt},Rs.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Rs.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Rs.prototype.setEndCapStyle=function(vt){this._endCapStyle=vt},Rs.prototype.getMitreLimit=function(){return this._mitreLimit},Rs.prototype.setMitreLimit=function(vt){this._mitreLimit=vt},Rs.prototype.setSingleSided=function(vt){this._isSingleSided=vt},Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs},Rs.bufferDistanceError=function(vt){var _t=Math.PI/2/vt;return 1-Math.cos(_t/2)},eu.CAP_ROUND.get=function(){return 1},eu.CAP_FLAT.get=function(){return 2},eu.CAP_SQUARE.get=function(){return 3},eu.JOIN_ROUND.get=function(){return 1},eu.JOIN_MITRE.get=function(){return 2},eu.JOIN_BEVEL.get=function(){return 3},eu.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},eu.DEFAULT_MITRE_LIMIT.get=function(){return 5},eu.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(Rs,eu);var Js=function(vt){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ni.COUNTERCLOCKWISE,this._inputLine=vt||null},wd={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Js.prototype.isDeletable=function(vt,_t,xt,Tt){var At=this._inputLine[vt],Pt=this._inputLine[_t],Nt=this._inputLine[xt];return!!this.isConcave(At,Pt,Nt)&&!!this.isShallow(At,Pt,Nt,Tt)&&this.isShallowSampled(At,Pt,vt,xt,Tt)},Js.prototype.deleteShallowConcavities=function(){for(var vt=this,_t=1,xt=this.findNextNonDeletedIndex(_t),Tt=this.findNextNonDeletedIndex(xt),At=!1;Tt<this._inputLine.length;){var Pt=!1;vt.isDeletable(_t,xt,Tt,vt._distanceTol)&&(vt._isDeleted[xt]=Js.DELETE,Pt=!0,At=!0),_t=Pt?Tt:xt,xt=vt.findNextNonDeletedIndex(_t),Tt=vt.findNextNonDeletedIndex(xt)}return At},Js.prototype.isShallowConcavity=function(vt,_t,xt,Tt){return Ni.computeOrientation(vt,_t,xt)===this._angleOrientation&&Ni.distancePointLine(_t,vt,xt)<Tt},Js.prototype.isShallowSampled=function(vt,_t,xt,Tt,At){var Pt=Math.trunc((Tt-xt)/Js.NUM_PTS_TO_CHECK);Pt<=0&&(Pt=1);for(var Nt=xt;Nt<Tt;Nt+=Pt)if(!this.isShallow(vt,_t,this._inputLine[Nt],At))return!1;return!0},Js.prototype.isConcave=function(vt,_t,xt){var Tt=Ni.computeOrientation(vt,_t,xt)===this._angleOrientation;return Tt},Js.prototype.simplify=function(vt){this._distanceTol=Math.abs(vt),vt<0&&(this._angleOrientation=Ni.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var _t=!1;do _t=this.deleteShallowConcavities();while(_t);return this.collapseLine()},Js.prototype.findNextNonDeletedIndex=function(vt){for(var _t=vt+1;_t<this._inputLine.length&&this._isDeleted[_t]===Js.DELETE;)_t++;return _t},Js.prototype.isShallow=function(vt,_t,xt,Tt){return Ni.distancePointLine(_t,vt,xt)<Tt},Js.prototype.collapseLine=function(){for(var vt=new Qp,_t=0;_t<this._inputLine.length;_t++)this._isDeleted[_t]!==Js.DELETE&&vt.add(this._inputLine[_t]);return vt.toCoordinateArray()},Js.prototype.interfaces_=function(){return[]},Js.prototype.getClass=function(){return Js},Js.simplify=function(vt,_t){return new Js(vt).simplify(_t)},wd.INIT.get=function(){return 0},wd.DELETE.get=function(){return 1},wd.KEEP.get=function(){return 1},wd.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Js,wd);var uc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Oi},$y={COORDINATE_ARRAY_TYPE:{configurable:!0}};uc.prototype.getCoordinates=function(){return this._ptList.toArray(uc.COORDINATE_ARRAY_TYPE)},uc.prototype.setPrecisionModel=function(vt){this._precisionModel=vt},uc.prototype.addPt=function(vt){var _t=new jr(vt);if(this._precisionModel.makePrecise(_t),this.isRedundant(_t))return null;this._ptList.add(_t)},uc.prototype.revere=function(){},uc.prototype.addPts=function(vt,_t){if(_t)for(var xt=0;xt<vt.length;xt++)this.addPt(vt[xt]);else for(var Tt=vt.length-1;Tt>=0;Tt--)this.addPt(vt[Tt])},uc.prototype.isRedundant=function(vt){if(this._ptList.size()<1)return!1;var _t=this._ptList.get(this._ptList.size()-1);return vt.distance(_t)<this._minimimVertexDistance},uc.prototype.toString=function(){return new Yo().createLineString(this.getCoordinates()).toString()},uc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var vt=new jr(this._ptList.get(0)),_t=this._ptList.get(this._ptList.size()-1);if(vt.equals(_t))return null;this._ptList.add(vt)},uc.prototype.setMinimumVertexDistance=function(vt){this._minimimVertexDistance=vt},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc},$y.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(uc,$y);var ns=function(){},sf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};ns.prototype.interfaces_=function(){return[]},ns.prototype.getClass=function(){return ns},ns.toDegrees=function(vt){return 180*vt/Math.PI},ns.normalize=function(vt){for(;vt>Math.PI;)vt-=ns.PI_TIMES_2;for(;vt<=-Math.PI;)vt+=ns.PI_TIMES_2;return vt},ns.angle=function(){if(arguments.length===1){var vt=arguments[0];return Math.atan2(vt.y,vt.x)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1],Tt=xt.x-_t.x,At=xt.y-_t.y;return Math.atan2(At,Tt)}},ns.isAcute=function(vt,_t,xt){var Tt=vt.x-_t.x,At=vt.y-_t.y;return Tt*(xt.x-_t.x)+At*(xt.y-_t.y)>0},ns.isObtuse=function(vt,_t,xt){var Tt=vt.x-_t.x,At=vt.y-_t.y;return Tt*(xt.x-_t.x)+At*(xt.y-_t.y)<0},ns.interiorAngle=function(vt,_t,xt){var Tt=ns.angle(_t,vt),At=ns.angle(_t,xt);return Math.abs(At-Tt)},ns.normalizePositive=function(vt){if(vt<0){for(;vt<0;)vt+=ns.PI_TIMES_2;vt>=ns.PI_TIMES_2&&(vt=0)}else{for(;vt>=ns.PI_TIMES_2;)vt-=ns.PI_TIMES_2;vt<0&&(vt=0)}return vt},ns.angleBetween=function(vt,_t,xt){var Tt=ns.angle(_t,vt),At=ns.angle(_t,xt);return ns.diff(Tt,At)},ns.diff=function(vt,_t){var xt=null;return(xt=vt<_t?_t-vt:vt-_t)>Math.PI&&(xt=2*Math.PI-xt),xt},ns.toRadians=function(vt){return vt*Math.PI/180},ns.getTurn=function(vt,_t){var xt=Math.sin(_t-vt);return xt>0?ns.COUNTERCLOCKWISE:xt<0?ns.CLOCKWISE:ns.NONE},ns.angleBetweenOriented=function(vt,_t,xt){var Tt=ns.angle(_t,vt),At=ns.angle(_t,xt)-Tt;return At<=-Math.PI?At+ns.PI_TIMES_2:At>Math.PI?At-ns.PI_TIMES_2:At},sf.PI_TIMES_2.get=function(){return 2*Math.PI},sf.PI_OVER_2.get=function(){return Math.PI/2},sf.PI_OVER_4.get=function(){return Math.PI/4},sf.COUNTERCLOCKWISE.get=function(){return Ni.COUNTERCLOCKWISE},sf.CLOCKWISE.get=function(){return Ni.CLOCKWISE},sf.NONE.get=function(){return Ni.COLLINEAR},Object.defineProperties(ns,sf);var na=function vt(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ji,this._seg1=new Ji,this._offset0=new Ji,this._offset1=new Ji,this._side=0,this._hasNarrowConcaveAngle=!1;var _t=arguments[0],xt=arguments[1],Tt=arguments[2];this._precisionModel=_t,this._bufParams=xt,this._li=new Bh,this._filletAngleQuantum=Math.PI/2/xt.getQuadrantSegments(),xt.getQuadrantSegments()>=8&&xt.getJoinStyle()===Rs.JOIN_ROUND&&(this._closingSegLengthFactor=vt.MAX_CLOSING_SEG_LEN_FACTOR),this.init(Tt)},rp={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};na.prototype.addNextSegment=function(vt,_t){if(this._s0=this._s1,this._s1=this._s2,this._s2=vt,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var xt=Ni.computeOrientation(this._s0,this._s1,this._s2),Tt=xt===Ni.CLOCKWISE&&this._side===Ei.LEFT||xt===Ni.COUNTERCLOCKWISE&&this._side===Ei.RIGHT;xt===0?this.addCollinear(_t):Tt?this.addOutsideTurn(xt,_t):this.addInsideTurn(xt,_t)},na.prototype.addLineEndCap=function(vt,_t){var xt=new Ji(vt,_t),Tt=new Ji;this.computeOffsetSegment(xt,Ei.LEFT,this._distance,Tt);var At=new Ji;this.computeOffsetSegment(xt,Ei.RIGHT,this._distance,At);var Pt=_t.x-vt.x,Nt=_t.y-vt.y,Vt=Math.atan2(Nt,Pt);switch(this._bufParams.getEndCapStyle()){case Rs.CAP_ROUND:this._segList.addPt(Tt.p1),this.addFilletArc(_t,Vt+Math.PI/2,Vt-Math.PI/2,Ni.CLOCKWISE,this._distance),this._segList.addPt(At.p1);break;case Rs.CAP_FLAT:this._segList.addPt(Tt.p1),this._segList.addPt(At.p1);break;case Rs.CAP_SQUARE:var Gt=new jr;Gt.x=Math.abs(this._distance)*Math.cos(Vt),Gt.y=Math.abs(this._distance)*Math.sin(Vt);var qt=new jr(Tt.p1.x+Gt.x,Tt.p1.y+Gt.y),en=new jr(At.p1.x+Gt.x,At.p1.y+Gt.y);this._segList.addPt(qt),this._segList.addPt(en)}},na.prototype.getCoordinates=function(){return this._segList.getCoordinates()},na.prototype.addMitreJoin=function(vt,_t,xt,Tt){var At=!0,Pt=null;try{Pt=Tc.intersection(_t.p0,_t.p1,xt.p0,xt.p1),(Tt<=0?1:Pt.distance(vt)/Math.abs(Tt))>this._bufParams.getMitreLimit()&&(At=!1)}catch(Nt){if(!(Nt instanceof Zd))throw Nt;Pt=new jr(0,0),At=!1}At?this._segList.addPt(Pt):this.addLimitedMitreJoin(_t,xt,Tt,this._bufParams.getMitreLimit())},na.prototype.addFilletCorner=function(vt,_t,xt,Tt,At){var Pt=_t.x-vt.x,Nt=_t.y-vt.y,Vt=Math.atan2(Nt,Pt),Gt=xt.x-vt.x,qt=xt.y-vt.y,en=Math.atan2(qt,Gt);Tt===Ni.CLOCKWISE?Vt<=en&&(Vt+=2*Math.PI):Vt>=en&&(Vt-=2*Math.PI),this._segList.addPt(_t),this.addFilletArc(vt,Vt,en,Tt,At),this._segList.addPt(xt)},na.prototype.addOutsideTurn=function(vt,_t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*na.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Rs.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Rs.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(_t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,vt,this._distance),this._segList.addPt(this._offset1.p0))},na.prototype.createSquare=function(vt){this._segList.addPt(new jr(vt.x+this._distance,vt.y+this._distance)),this._segList.addPt(new jr(vt.x+this._distance,vt.y-this._distance)),this._segList.addPt(new jr(vt.x-this._distance,vt.y-this._distance)),this._segList.addPt(new jr(vt.x-this._distance,vt.y+this._distance)),this._segList.closeRing()},na.prototype.addSegments=function(vt,_t){this._segList.addPts(vt,_t)},na.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},na.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},na.prototype.initSideSegments=function(vt,_t,xt){this._s1=vt,this._s2=_t,this._side=xt,this._seg1.setCoordinates(vt,_t),this.computeOffsetSegment(this._seg1,xt,this._distance,this._offset1)},na.prototype.addLimitedMitreJoin=function(vt,_t,xt,Tt){var At=this._seg0.p1,Pt=ns.angle(At,this._seg0.p0),Nt=ns.angleBetweenOriented(this._seg0.p0,At,this._seg1.p1)/2,Vt=ns.normalize(Pt+Nt),Gt=ns.normalize(Vt+Math.PI),qt=Tt*xt,en=xt-qt*Math.abs(Math.sin(Nt)),Xt=At.x+qt*Math.cos(Gt),an=At.y+qt*Math.sin(Gt),_n=new jr(Xt,an),bn=new Ji(At,_n),En=bn.pointAlongOffset(1,en),un=bn.pointAlongOffset(1,-en);this._side===Ei.LEFT?(this._segList.addPt(En),this._segList.addPt(un)):(this._segList.addPt(un),this._segList.addPt(En))},na.prototype.computeOffsetSegment=function(vt,_t,xt,Tt){var At=_t===Ei.LEFT?1:-1,Pt=vt.p1.x-vt.p0.x,Nt=vt.p1.y-vt.p0.y,Vt=Math.sqrt(Pt*Pt+Nt*Nt),Gt=At*xt*Pt/Vt,qt=At*xt*Nt/Vt;Tt.p0.x=vt.p0.x-qt,Tt.p0.y=vt.p0.y+Gt,Tt.p1.x=vt.p1.x-qt,Tt.p1.y=vt.p1.y+Gt},na.prototype.addFilletArc=function(vt,_t,xt,Tt,At){var Pt=Tt===Ni.CLOCKWISE?-1:1,Nt=Math.abs(_t-xt),Vt=Math.trunc(Nt/this._filletAngleQuantum+.5);if(Vt<1)return null;for(var Gt=Nt/Vt,qt=0,en=new jr;qt<Nt;){var Xt=_t+Pt*qt;en.x=vt.x+At*Math.cos(Xt),en.y=vt.y+At*Math.sin(Xt),this._segList.addPt(en),qt+=Gt}},na.prototype.addInsideTurn=function(vt,_t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*na.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var xt=new jr((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(xt);var Tt=new jr((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(Tt)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},na.prototype.createCircle=function(vt){var _t=new jr(vt.x+this._distance,vt.y);this._segList.addPt(_t),this.addFilletArc(vt,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},na.prototype.addBevelJoin=function(vt,_t){this._segList.addPt(vt.p1),this._segList.addPt(_t.p0)},na.prototype.init=function(vt){this._distance=vt,this._maxCurveSegmentError=vt*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new uc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(vt*na.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},na.prototype.addCollinear=function(vt){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Rs.JOIN_BEVEL||this._bufParams.getJoinStyle()===Rs.JOIN_MITRE?(vt&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Ni.CLOCKWISE,this._distance))},na.prototype.closeRing=function(){this._segList.closeRing()},na.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},na.prototype.interfaces_=function(){return[]},na.prototype.getClass=function(){return na},rp.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},rp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},rp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},rp.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(na,rp);var ro=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var vt=arguments[0],_t=arguments[1];this._precisionModel=vt,this._bufParams=_t};ro.prototype.getOffsetCurve=function(vt,_t){if(this._distance=_t,_t===0)return null;var xt=_t<0,Tt=Math.abs(_t),At=this.getSegGen(Tt);vt.length<=1?this.computePointCurve(vt[0],At):this.computeOffsetCurve(vt,xt,At);var Pt=At.getCoordinates();return xt&&qo.reverse(Pt),Pt},ro.prototype.computeSingleSidedBufferCurve=function(vt,_t,xt){var Tt=this.simplifyTolerance(this._distance);if(_t){xt.addSegments(vt,!0);var At=Js.simplify(vt,-Tt),Pt=At.length-1;xt.initSideSegments(At[Pt],At[Pt-1],Ei.LEFT),xt.addFirstSegment();for(var Nt=Pt-2;Nt>=0;Nt--)xt.addNextSegment(At[Nt],!0)}else{xt.addSegments(vt,!1);var Vt=Js.simplify(vt,Tt),Gt=Vt.length-1;xt.initSideSegments(Vt[0],Vt[1],Ei.LEFT),xt.addFirstSegment();for(var qt=2;qt<=Gt;qt++)xt.addNextSegment(Vt[qt],!0)}xt.addLastSegment(),xt.closeRing()},ro.prototype.computeRingBufferCurve=function(vt,_t,xt){var Tt=this.simplifyTolerance(this._distance);_t===Ei.RIGHT&&(Tt=-Tt);var At=Js.simplify(vt,Tt),Pt=At.length-1;xt.initSideSegments(At[Pt-1],At[0],_t);for(var Nt=1;Nt<=Pt;Nt++){var Vt=Nt!==1;xt.addNextSegment(At[Nt],Vt)}xt.closeRing()},ro.prototype.computeLineBufferCurve=function(vt,_t){var xt=this.simplifyTolerance(this._distance),Tt=Js.simplify(vt,xt),At=Tt.length-1;_t.initSideSegments(Tt[0],Tt[1],Ei.LEFT);for(var Pt=2;Pt<=At;Pt++)_t.addNextSegment(Tt[Pt],!0);_t.addLastSegment(),_t.addLineEndCap(Tt[At-1],Tt[At]);var Nt=Js.simplify(vt,-xt),Vt=Nt.length-1;_t.initSideSegments(Nt[Vt],Nt[Vt-1],Ei.LEFT);for(var Gt=Vt-2;Gt>=0;Gt--)_t.addNextSegment(Nt[Gt],!0);_t.addLastSegment(),_t.addLineEndCap(Nt[1],Nt[0]),_t.closeRing()},ro.prototype.computePointCurve=function(vt,_t){switch(this._bufParams.getEndCapStyle()){case Rs.CAP_ROUND:_t.createCircle(vt);break;case Rs.CAP_SQUARE:_t.createSquare(vt)}},ro.prototype.getLineCurve=function(vt,_t){if(this._distance=_t,_t<0&&!this._bufParams.isSingleSided()||_t===0)return null;var xt=Math.abs(_t),Tt=this.getSegGen(xt);if(vt.length<=1)this.computePointCurve(vt[0],Tt);else if(this._bufParams.isSingleSided()){var At=_t<0;this.computeSingleSidedBufferCurve(vt,At,Tt)}else this.computeLineBufferCurve(vt,Tt);return Tt.getCoordinates()},ro.prototype.getBufferParameters=function(){return this._bufParams},ro.prototype.simplifyTolerance=function(vt){return vt*this._bufParams.getSimplifyFactor()},ro.prototype.getRingCurve=function(vt,_t,xt){if(this._distance=xt,vt.length<=2)return this.getLineCurve(vt,xt);if(xt===0)return ro.copyCoordinates(vt);var Tt=this.getSegGen(xt);return this.computeRingBufferCurve(vt,_t,Tt),Tt.getCoordinates()},ro.prototype.computeOffsetCurve=function(vt,_t,xt){var Tt=this.simplifyTolerance(this._distance);if(_t){var At=Js.simplify(vt,-Tt),Pt=At.length-1;xt.initSideSegments(At[Pt],At[Pt-1],Ei.LEFT),xt.addFirstSegment();for(var Nt=Pt-2;Nt>=0;Nt--)xt.addNextSegment(At[Nt],!0)}else{var Vt=Js.simplify(vt,Tt),Gt=Vt.length-1;xt.initSideSegments(Vt[0],Vt[1],Ei.LEFT),xt.addFirstSegment();for(var qt=2;qt<=Gt;qt++)xt.addNextSegment(Vt[qt],!0)}xt.addLastSegment()},ro.prototype.getSegGen=function(vt){return new na(this._precisionModel,this._bufParams,vt)},ro.prototype.interfaces_=function(){return[]},ro.prototype.getClass=function(){return ro},ro.copyCoordinates=function(vt){for(var _t=new Array(vt.length).fill(null),xt=0;xt<_t.length;xt++)_t[xt]=new jr(vt[xt]);return _t};var af=function(){this._subgraphs=null,this._seg=new Ji,this._cga=new Ni;var vt=arguments[0];this._subgraphs=vt},Ry={DepthSegment:{configurable:!0}};af.prototype.findStabbedSegments=function(){var vt=this;if(arguments.length===1){for(var _t=arguments[0],xt=new Oi,Tt=this._subgraphs.iterator();Tt.hasNext();){var At=Tt.next(),Pt=At.getEnvelope();_t.y<Pt.getMinY()||_t.y>Pt.getMaxY()||vt.findStabbedSegments(_t,At.getDirectedEdges(),xt)}return xt}if(arguments.length===3){if(_o(arguments[2],Gc)&&arguments[0]instanceof jr&&arguments[1]instanceof dm)for(var Nt=arguments[0],Vt=arguments[1],Gt=arguments[2],qt=Vt.getEdge().getCoordinates(),en=0;en<qt.length-1;en++){vt._seg.p0=qt[en],vt._seg.p1=qt[en+1],vt._seg.p0.y>vt._seg.p1.y&&vt._seg.reverse();var Xt=Math.max(vt._seg.p0.x,vt._seg.p1.x);if(!(Xt<Nt.x)&&!(vt._seg.isHorizontal()||Nt.y<vt._seg.p0.y||Nt.y>vt._seg.p1.y||Ni.computeOrientation(vt._seg.p0,vt._seg.p1,Nt)===Ni.RIGHT)){var an=Vt.getDepth(Ei.LEFT);vt._seg.p0.equals(qt[en])||(an=Vt.getDepth(Ei.RIGHT));var _n=new Ed(vt._seg,an);Gt.add(_n)}}else if(_o(arguments[2],Gc)&&arguments[0]instanceof jr&&_o(arguments[1],Gc))for(var bn=arguments[0],En=arguments[1],un=arguments[2],Vn=En.iterator();Vn.hasNext();){var nr=Vn.next();nr.isForward()&&vt.findStabbedSegments(bn,nr,un)}}},af.prototype.getDepth=function(vt){var _t=this.findStabbedSegments(vt);return _t.size()===0?0:Jc.min(_t)._leftDepth},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},Ry.DepthSegment.get=function(){return Ed},Object.defineProperties(af,Ry);var Ed=function(){this._upwardSeg=null,this._leftDepth=null;var vt=arguments[0],_t=arguments[1];this._upwardSeg=new Ji(vt),this._leftDepth=_t};Ed.prototype.compareTo=function(vt){var _t=vt;if(this._upwardSeg.minX()>=_t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=_t._upwardSeg.minX())return-1;var xt=this._upwardSeg.orientationIndex(_t._upwardSeg);return xt!==0||(xt=-1*_t._upwardSeg.orientationIndex(this._upwardSeg))!==0?xt:this._upwardSeg.compareTo(_t._upwardSeg)},Ed.prototype.compareX=function(vt,_t){var xt=vt.p0.compareTo(_t.p0);return xt!==0?xt:vt.p1.compareTo(_t.p1)},Ed.prototype.toString=function(){return this._upwardSeg.toString()},Ed.prototype.interfaces_=function(){return[Sc]},Ed.prototype.getClass=function(){return Ed};var Ao=function(vt,_t,xt){this.p0=vt||null,this.p1=_t||null,this.p2=xt||null};Ao.prototype.area=function(){return Ao.area(this.p0,this.p1,this.p2)},Ao.prototype.signedArea=function(){return Ao.signedArea(this.p0,this.p1,this.p2)},Ao.prototype.interpolateZ=function(vt){if(vt===null)throw new oa("Supplied point is null.");return Ao.interpolateZ(vt,this.p0,this.p1,this.p2)},Ao.prototype.longestSideLength=function(){return Ao.longestSideLength(this.p0,this.p1,this.p2)},Ao.prototype.isAcute=function(){return Ao.isAcute(this.p0,this.p1,this.p2)},Ao.prototype.circumcentre=function(){return Ao.circumcentre(this.p0,this.p1,this.p2)},Ao.prototype.area3D=function(){return Ao.area3D(this.p0,this.p1,this.p2)},Ao.prototype.centroid=function(){return Ao.centroid(this.p0,this.p1,this.p2)},Ao.prototype.inCentre=function(){return Ao.inCentre(this.p0,this.p1,this.p2)},Ao.prototype.interfaces_=function(){return[]},Ao.prototype.getClass=function(){return Ao},Ao.area=function(vt,_t,xt){return Math.abs(((xt.x-vt.x)*(_t.y-vt.y)-(_t.x-vt.x)*(xt.y-vt.y))/2)},Ao.signedArea=function(vt,_t,xt){return((xt.x-vt.x)*(_t.y-vt.y)-(_t.x-vt.x)*(xt.y-vt.y))/2},Ao.det=function(vt,_t,xt,Tt){return vt*Tt-_t*xt},Ao.interpolateZ=function(vt,_t,xt,Tt){var At=_t.x,Pt=_t.y,Nt=xt.x-At,Vt=Tt.x-At,Gt=xt.y-Pt,qt=Tt.y-Pt,en=Nt*qt-Vt*Gt,Xt=vt.x-At,an=vt.y-Pt,_n=(qt*Xt-Vt*an)/en,bn=(-Gt*Xt+Nt*an)/en;return _t.z+_n*(xt.z-_t.z)+bn*(Tt.z-_t.z)},Ao.longestSideLength=function(vt,_t,xt){var Tt=vt.distance(_t),At=_t.distance(xt),Pt=xt.distance(vt),Nt=Tt;return At>Nt&&(Nt=At),Pt>Nt&&(Nt=Pt),Nt},Ao.isAcute=function(vt,_t,xt){return!!ns.isAcute(vt,_t,xt)&&!!ns.isAcute(_t,xt,vt)&&!!ns.isAcute(xt,vt,_t)},Ao.circumcentre=function(vt,_t,xt){var Tt=xt.x,At=xt.y,Pt=vt.x-Tt,Nt=vt.y-At,Vt=_t.x-Tt,Gt=_t.y-At,qt=2*Ao.det(Pt,Nt,Vt,Gt),en=Ao.det(Nt,Pt*Pt+Nt*Nt,Gt,Vt*Vt+Gt*Gt),Xt=Ao.det(Pt,Pt*Pt+Nt*Nt,Vt,Vt*Vt+Gt*Gt);return new jr(Tt-en/qt,At+Xt/qt)},Ao.perpendicularBisector=function(vt,_t){var xt=_t.x-vt.x,Tt=_t.y-vt.y,At=new Tc(vt.x+xt/2,vt.y+Tt/2,1),Pt=new Tc(vt.x-Tt+xt/2,vt.y+xt+Tt/2,1);return new Tc(At,Pt)},Ao.angleBisector=function(vt,_t,xt){var Tt=_t.distance(vt),At=Tt/(Tt+_t.distance(xt)),Pt=xt.x-vt.x,Nt=xt.y-vt.y;return new jr(vt.x+At*Pt,vt.y+At*Nt)},Ao.area3D=function(vt,_t,xt){var Tt=_t.x-vt.x,At=_t.y-vt.y,Pt=_t.z-vt.z,Nt=xt.x-vt.x,Vt=xt.y-vt.y,Gt=xt.z-vt.z,qt=At*Gt-Pt*Vt,en=Pt*Nt-Tt*Gt,Xt=Tt*Vt-At*Nt,an=qt*qt+en*en+Xt*Xt,_n=Math.sqrt(an)/2;return _n},Ao.centroid=function(vt,_t,xt){var Tt=(vt.x+_t.x+xt.x)/3,At=(vt.y+_t.y+xt.y)/3;return new jr(Tt,At)},Ao.inCentre=function(vt,_t,xt){var Tt=_t.distance(xt),At=vt.distance(xt),Pt=vt.distance(_t),Nt=Tt+At+Pt,Vt=(Tt*vt.x+At*_t.x+Pt*xt.x)/Nt,Gt=(Tt*vt.y+At*_t.y+Pt*xt.y)/Nt;return new jr(Vt,Gt)};var jl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Oi;var vt=arguments[0],_t=arguments[1],xt=arguments[2];this._inputGeom=vt,this._distance=_t,this._curveBuilder=xt};jl.prototype.addPoint=function(vt){if(this._distance<=0)return null;var _t=vt.getCoordinates(),xt=this._curveBuilder.getLineCurve(_t,this._distance);this.addCurve(xt,Kr.EXTERIOR,Kr.INTERIOR)},jl.prototype.addPolygon=function(vt){var _t=this,xt=this._distance,Tt=Ei.LEFT;this._distance<0&&(xt=-this._distance,Tt=Ei.RIGHT);var At=vt.getExteriorRing(),Pt=qo.removeRepeatedPoints(At.getCoordinates());if(this._distance<0&&this.isErodedCompletely(At,this._distance)||this._distance<=0&&Pt.length<3)return null;this.addPolygonRing(Pt,xt,Tt,Kr.EXTERIOR,Kr.INTERIOR);for(var Nt=0;Nt<vt.getNumInteriorRing();Nt++){var Vt=vt.getInteriorRingN(Nt),Gt=qo.removeRepeatedPoints(Vt.getCoordinates());_t._distance>0&&_t.isErodedCompletely(Vt,-_t._distance)||_t.addPolygonRing(Gt,xt,Ei.opposite(Tt),Kr.INTERIOR,Kr.EXTERIOR)}},jl.prototype.isTriangleErodedCompletely=function(vt,_t){var xt=new Ao(vt[0],vt[1],vt[2]),Tt=xt.inCentre();return Ni.distancePointLine(Tt,xt.p0,xt.p1)<Math.abs(_t)},jl.prototype.addLineString=function(vt){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var _t=qo.removeRepeatedPoints(vt.getCoordinates()),xt=this._curveBuilder.getLineCurve(_t,this._distance);this.addCurve(xt,Kr.EXTERIOR,Kr.INTERIOR)},jl.prototype.addCurve=function(vt,_t,xt){if(vt===null||vt.length<2)return null;var Tt=new fa(vt,new zs(0,Kr.BOUNDARY,_t,xt));this._curveList.add(Tt)},jl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},jl.prototype.addPolygonRing=function(vt,_t,xt,Tt,At){if(_t===0&&vt.length<Vu.MINIMUM_VALID_SIZE)return null;var Pt=Tt,Nt=At;vt.length>=Vu.MINIMUM_VALID_SIZE&&Ni.isCCW(vt)&&(Pt=At,Nt=Tt,xt=Ei.opposite(xt));var Vt=this._curveBuilder.getRingCurve(vt,xt,_t);this.addCurve(Vt,Pt,Nt)},jl.prototype.add=function(vt){if(vt.isEmpty())return null;vt instanceof $a?this.addPolygon(vt):vt instanceof sa?this.addLineString(vt):vt instanceof Jl?this.addPoint(vt):(vt instanceof Qf||vt instanceof Fh||vt instanceof ju||vt instanceof Il)&&this.addCollection(vt)},jl.prototype.isErodedCompletely=function(vt,_t){var xt=vt.getCoordinates();if(xt.length<4)return _t<0;if(xt.length===4)return this.isTriangleErodedCompletely(xt,_t);var Tt=vt.getEnvelopeInternal(),At=Math.min(Tt.getHeight(),Tt.getWidth());return _t<0&&2*Math.abs(_t)>At},jl.prototype.addCollection=function(vt){for(var _t=0;_t<vt.getNumGeometries();_t++){var xt=vt.getGeometryN(_t);this.add(xt)}},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};var Bs=function(){};Bs.prototype.locate=function(vt){},Bs.prototype.interfaces_=function(){return[]},Bs.prototype.getClass=function(){return Bs};var vu=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var vt=arguments[0];this._parent=vt,this._atStart=!0,this._index=0,this._max=vt.getNumGeometries()};vu.prototype.next=function(){if(this._atStart)return this._atStart=!1,vu.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new tf;var vt=this._parent.getGeometryN(this._index++);return vt instanceof Il?(this._subcollectionIterator=new vu(vt),this._subcollectionIterator.next()):vt},vu.prototype.remove=function(){throw new Error(this.getClass().getName())},vu.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},vu.prototype.interfaces_=function(){return[Xf]},vu.prototype.getClass=function(){return vu},vu.isAtomic=function(vt){return!(vt instanceof Il)};var Ul=function(){this._geom=null;var vt=arguments[0];this._geom=vt};Ul.prototype.locate=function(vt){return Ul.locate(vt,this._geom)},Ul.prototype.interfaces_=function(){return[Bs]},Ul.prototype.getClass=function(){return Ul},Ul.isPointInRing=function(vt,_t){return!!_t.getEnvelopeInternal().intersects(vt)&&Ni.isPointInRing(vt,_t.getCoordinates())},Ul.containsPointInPolygon=function(vt,_t){if(_t.isEmpty())return!1;var xt=_t.getExteriorRing();if(!Ul.isPointInRing(vt,xt))return!1;for(var Tt=0;Tt<_t.getNumInteriorRing();Tt++){var At=_t.getInteriorRingN(Tt);if(Ul.isPointInRing(vt,At))return!1}return!0},Ul.containsPoint=function(vt,_t){if(_t instanceof $a)return Ul.containsPointInPolygon(vt,_t);if(_t instanceof Il)for(var xt=new vu(_t);xt.hasNext();){var Tt=xt.next();if(Tt!==_t&&Ul.containsPoint(vt,Tt))return!0}return!1},Ul.locate=function(vt,_t){return _t.isEmpty()?Kr.EXTERIOR:Ul.containsPoint(vt,_t)?Kr.INTERIOR:Kr.EXTERIOR};var rl=function(){this._edgeMap=new bl,this._edgeList=null,this._ptInAreaLocation=[Kr.NONE,Kr.NONE]};rl.prototype.getNextCW=function(vt){this.getEdges();var _t=this._edgeList.indexOf(vt),xt=_t-1;return _t===0&&(xt=this._edgeList.size()-1),this._edgeList.get(xt)},rl.prototype.propagateSideLabels=function(vt){for(var _t=Kr.NONE,xt=this.iterator();xt.hasNext();){var Tt=xt.next().getLabel();Tt.isArea(vt)&&Tt.getLocation(vt,Ei.LEFT)!==Kr.NONE&&(_t=Tt.getLocation(vt,Ei.LEFT))}if(_t===Kr.NONE)return null;for(var At=_t,Pt=this.iterator();Pt.hasNext();){var Nt=Pt.next(),Vt=Nt.getLabel();if(Vt.getLocation(vt,Ei.ON)===Kr.NONE&&Vt.setLocation(vt,Ei.ON,At),Vt.isArea(vt)){var Gt=Vt.getLocation(vt,Ei.LEFT),qt=Vt.getLocation(vt,Ei.RIGHT);if(qt!==Kr.NONE){if(qt!==At)throw new gh("side location conflict",Nt.getCoordinate());Gt===Kr.NONE&&$o.shouldNeverReachHere("found single null side (at "+Nt.getCoordinate()+")"),At=Gt}else $o.isTrue(Vt.getLocation(vt,Ei.LEFT)===Kr.NONE,"found single null side"),Vt.setLocation(vt,Ei.RIGHT,At),Vt.setLocation(vt,Ei.LEFT,At)}}},rl.prototype.getCoordinate=function(){var vt=this.iterator();return vt.hasNext()?vt.next().getCoordinate():null},rl.prototype.print=function(vt){hl.out.println("EdgeEndStar:   "+this.getCoordinate());for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},rl.prototype.isAreaLabelsConsistent=function(vt){return this.computeEdgeEndLabels(vt.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},rl.prototype.checkAreaLabelsConsistent=function(vt){var _t=this.getEdges();if(_t.size()<=0)return!0;var xt=_t.size()-1,Tt=_t.get(xt).getLabel().getLocation(vt,Ei.LEFT);$o.isTrue(Tt!==Kr.NONE,"Found unlabelled area edge");for(var At=Tt,Pt=this.iterator();Pt.hasNext();){var Nt=Pt.next().getLabel();$o.isTrue(Nt.isArea(vt),"Found non-area edge");var Vt=Nt.getLocation(vt,Ei.LEFT),Gt=Nt.getLocation(vt,Ei.RIGHT);if(Vt===Gt||Gt!==At)return!1;At=Vt}return!0},rl.prototype.findIndex=function(vt){this.iterator();for(var _t=0;_t<this._edgeList.size();_t++)if(this._edgeList.get(_t)===vt)return _t;return-1},rl.prototype.iterator=function(){return this.getEdges().iterator()},rl.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Oi(this._edgeMap.values())),this._edgeList},rl.prototype.getLocation=function(vt,_t,xt){return this._ptInAreaLocation[vt]===Kr.NONE&&(this._ptInAreaLocation[vt]=Ul.locate(_t,xt[vt].getGeometry())),this._ptInAreaLocation[vt]},rl.prototype.toString=function(){var vt=new uu;vt.append("EdgeEndStar:   "+this.getCoordinate()),vt.append(`
`);for(var _t=this.iterator();_t.hasNext();){var xt=_t.next();vt.append(xt),vt.append(`
`)}return vt.toString()},rl.prototype.computeEdgeEndLabels=function(vt){for(var _t=this.iterator();_t.hasNext();)_t.next().computeLabel(vt)},rl.prototype.computeLabelling=function(vt){this.computeEdgeEndLabels(vt[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var _t=[!1,!1],xt=this.iterator();xt.hasNext();)for(var Tt=xt.next().getLabel(),At=0;At<2;At++)Tt.isLine(At)&&Tt.getLocation(At)===Kr.BOUNDARY&&(_t[At]=!0);for(var Pt=this.iterator();Pt.hasNext();)for(var Nt=Pt.next(),Vt=Nt.getLabel(),Gt=0;Gt<2;Gt++)if(Vt.isAnyNull(Gt)){var qt=Kr.NONE;if(_t[Gt])qt=Kr.EXTERIOR;else{var en=Nt.getCoordinate();qt=this.getLocation(Gt,en,vt)}Vt.setAllLocationsIfNull(Gt,qt)}},rl.prototype.getDegree=function(){return this._edgeMap.size()},rl.prototype.insertEdgeEnd=function(vt,_t){this._edgeMap.put(vt,_t),this._edgeList=null},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl};var l_=function(vt){function _t(){vt.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.linkResultDirectedEdges=function(){var xt=this;this.getResultAreaEdges();for(var Tt=null,At=null,Pt=this._SCANNING_FOR_INCOMING,Nt=0;Nt<this._resultAreaEdgeList.size();Nt++){var Vt=xt._resultAreaEdgeList.get(Nt),Gt=Vt.getSym();if(Vt.getLabel().isArea())switch(Tt===null&&Vt.isInResult()&&(Tt=Vt),Pt){case xt._SCANNING_FOR_INCOMING:if(!Gt.isInResult())continue;At=Gt,Pt=xt._LINKING_TO_OUTGOING;break;case xt._LINKING_TO_OUTGOING:if(!Vt.isInResult())continue;At.setNext(Vt),Pt=xt._SCANNING_FOR_INCOMING}}if(Pt===this._LINKING_TO_OUTGOING){if(Tt===null)throw new gh("no outgoing dirEdge found",this.getCoordinate());$o.isTrue(Tt.isInResult(),"unable to link last incoming dirEdge"),At.setNext(Tt)}},_t.prototype.insert=function(xt){var Tt=xt;this.insertEdgeEnd(Tt,Tt)},_t.prototype.getRightmostEdge=function(){var xt=this.getEdges(),Tt=xt.size();if(Tt<1)return null;var At=xt.get(0);if(Tt===1)return At;var Pt=xt.get(Tt-1),Nt=At.getQuadrant(),Vt=Pt.getQuadrant();return Vs.isNorthern(Nt)&&Vs.isNorthern(Vt)?At:Vs.isNorthern(Nt)||Vs.isNorthern(Vt)?At.getDy()!==0?At:Pt.getDy()!==0?Pt:($o.shouldNeverReachHere("found two horizontal edges incident on node"),null):Pt},_t.prototype.print=function(xt){hl.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var Tt=this.iterator();Tt.hasNext();){var At=Tt.next();xt.print("out "),At.print(xt),xt.println(),xt.print("in "),At.getSym().print(xt),xt.println()}},_t.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Oi;for(var xt=this.iterator();xt.hasNext();){var Tt=xt.next();(Tt.isInResult()||Tt.getSym().isInResult())&&this._resultAreaEdgeList.add(Tt)}return this._resultAreaEdgeList},_t.prototype.updateLabelling=function(xt){for(var Tt=this.iterator();Tt.hasNext();){var At=Tt.next().getLabel();At.setAllLocationsIfNull(0,xt.getLocation(0)),At.setAllLocationsIfNull(1,xt.getLocation(1))}},_t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var xt=null,Tt=null,At=this._edgeList.size()-1;At>=0;At--){var Pt=this._edgeList.get(At),Nt=Pt.getSym();Tt===null&&(Tt=Nt),xt!==null&&Nt.setNext(xt),xt=Pt}Tt.setNext(xt)},_t.prototype.computeDepths=function(){var xt=this;if(arguments.length===1){var Tt=arguments[0],At=this.findIndex(Tt),Pt=Tt.getDepth(Ei.LEFT),Nt=Tt.getDepth(Ei.RIGHT),Vt=this.computeDepths(At+1,this._edgeList.size(),Pt),Gt=this.computeDepths(0,At,Vt);if(Gt!==Nt)throw new gh("depth mismatch at "+Tt.getCoordinate())}else if(arguments.length===3){for(var qt=arguments[0],en=arguments[1],Xt=arguments[2],an=Xt,_n=qt;_n<en;_n++){var bn=xt._edgeList.get(_n);bn.setEdgeDepths(Ei.RIGHT,an),an=bn.getDepth(Ei.LEFT)}return an}},_t.prototype.mergeSymLabels=function(){for(var xt=this.iterator();xt.hasNext();){var Tt=xt.next();Tt.getLabel().merge(Tt.getSym().getLabel())}},_t.prototype.linkMinimalDirectedEdges=function(xt){for(var Tt=this,At=null,Pt=null,Nt=this._SCANNING_FOR_INCOMING,Vt=this._resultAreaEdgeList.size()-1;Vt>=0;Vt--){var Gt=Tt._resultAreaEdgeList.get(Vt),qt=Gt.getSym();switch(At===null&&Gt.getEdgeRing()===xt&&(At=Gt),Nt){case Tt._SCANNING_FOR_INCOMING:if(qt.getEdgeRing()!==xt)continue;Pt=qt,Nt=Tt._LINKING_TO_OUTGOING;break;case Tt._LINKING_TO_OUTGOING:if(Gt.getEdgeRing()!==xt)continue;Pt.setNextMin(Gt),Nt=Tt._SCANNING_FOR_INCOMING}}Nt===this._LINKING_TO_OUTGOING&&($o.isTrue(At!==null,"found null for first outgoing dirEdge"),$o.isTrue(At.getEdgeRing()===xt,"unable to link last incoming dirEdge"),Pt.setNextMin(At))},_t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var xt=0,Tt=this.iterator();Tt.hasNext();){var At=Tt.next();At.isInResult()&&xt++}return xt}if(arguments.length===1){for(var Pt=arguments[0],Nt=0,Vt=this.iterator();Vt.hasNext();){var Gt=Vt.next();Gt.getEdgeRing()===Pt&&Nt++}return Nt}},_t.prototype.getLabel=function(){return this._label},_t.prototype.findCoveredLineEdges=function(){for(var xt=Kr.NONE,Tt=this.iterator();Tt.hasNext();){var At=Tt.next(),Pt=At.getSym();if(!At.isLineEdge()){if(At.isInResult()){xt=Kr.INTERIOR;break}if(Pt.isInResult()){xt=Kr.EXTERIOR;break}}}if(xt===Kr.NONE)return null;for(var Nt=xt,Vt=this.iterator();Vt.hasNext();){var Gt=Vt.next(),qt=Gt.getSym();Gt.isLineEdge()?Gt.getEdge().setCovered(Nt===Kr.INTERIOR):(Gt.isInResult()&&(Nt=Kr.EXTERIOR),qt.isInResult()&&(Nt=Kr.INTERIOR))}},_t.prototype.computeLabelling=function(xt){vt.prototype.computeLabelling.call(this,xt),this._label=new zs(Kr.NONE);for(var Tt=this.iterator();Tt.hasNext();)for(var At=Tt.next().getEdge().getLabel(),Pt=0;Pt<2;Pt++){var Nt=At.getLocation(Pt);Nt!==Kr.INTERIOR&&Nt!==Kr.BOUNDARY||this._label.setLocation(Pt,Kr.INTERIOR)}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(rl),Ny=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.createNode=function(xt){return new hm(xt,new l_)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ep),jh=function vt(){this._pts=null,this._orientation=null;var _t=arguments[0];this._pts=_t,this._orientation=vt.orientation(_t)};jh.prototype.compareTo=function(vt){var _t=vt;return jh.compareOriented(this._pts,this._orientation,_t._pts,_t._orientation)},jh.prototype.interfaces_=function(){return[Sc]},jh.prototype.getClass=function(){return jh},jh.orientation=function(vt){return qo.increasingDirection(vt)===1},jh.compareOriented=function(vt,_t,xt,Tt){for(var At=_t?1:-1,Pt=Tt?1:-1,Nt=_t?vt.length:-1,Vt=Tt?xt.length:-1,Gt=_t?0:vt.length-1,qt=Tt?0:xt.length-1;;){var en=vt[Gt].compareTo(xt[qt]);if(en!==0)return en;var Xt=(Gt+=At)===Nt,an=(qt+=Pt)===Vt;if(Xt&&!an)return-1;if(!Xt&&an)return 1;if(Xt&&an)return 0}};var tc=function(){this._edges=new Oi,this._ocaMap=new bl};tc.prototype.print=function(vt){vt.print("MULTILINESTRING ( ");for(var _t=0;_t<this._edges.size();_t++){var xt=this._edges.get(_t);_t>0&&vt.print(","),vt.print("(");for(var Tt=xt.getCoordinates(),At=0;At<Tt.length;At++)At>0&&vt.print(","),vt.print(Tt[At].x+" "+Tt[At].y);vt.println(")")}vt.print(")  ")},tc.prototype.addAll=function(vt){for(var _t=vt.iterator();_t.hasNext();)this.add(_t.next())},tc.prototype.findEdgeIndex=function(vt){for(var _t=0;_t<this._edges.size();_t++)if(this._edges.get(_t).equals(vt))return _t;return-1},tc.prototype.iterator=function(){return this._edges.iterator()},tc.prototype.getEdges=function(){return this._edges},tc.prototype.get=function(vt){return this._edges.get(vt)},tc.prototype.findEqualEdge=function(vt){var _t=new jh(vt.getCoordinates());return this._ocaMap.get(_t)},tc.prototype.add=function(vt){this._edges.add(vt);var _t=new jh(vt.getCoordinates());this._ocaMap.put(_t,vt)},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var Sd=function(){};Sd.prototype.processIntersections=function(vt,_t,xt,Tt){},Sd.prototype.isDone=function(){},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var nc=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var vt=arguments[0];this._li=vt};nc.prototype.isTrivialIntersection=function(vt,_t,xt,Tt){if(vt===xt&&this._li.getIntersectionNum()===1){if(nc.isAdjacentSegments(_t,Tt))return!0;if(vt.isClosed()){var At=vt.size()-1;if(_t===0&&Tt===At||Tt===0&&_t===At)return!0}}return!1},nc.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},nc.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},nc.prototype.getLineIntersector=function(){return this._li},nc.prototype.hasProperIntersection=function(){return this._hasProper},nc.prototype.processIntersections=function(vt,_t,xt,Tt){if(vt===xt&&_t===Tt)return null;this.numTests++;var At=vt.getCoordinates()[_t],Pt=vt.getCoordinates()[_t+1],Nt=xt.getCoordinates()[Tt],Vt=xt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Pt,Nt,Vt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(vt,_t,xt,Tt)||(this._hasIntersection=!0,vt.addIntersections(this._li,_t,0),xt.addIntersections(this._li,Tt,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},nc.prototype.hasIntersection=function(){return this._hasIntersection},nc.prototype.isDone=function(){return!1},nc.prototype.hasInteriorIntersection=function(){return this._hasInterior},nc.prototype.interfaces_=function(){return[Sd]},nc.prototype.getClass=function(){return nc},nc.isAdjacentSegments=function(vt,_t){return Math.abs(vt-_t)===1};var _u=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var vt=arguments[0],_t=arguments[1],xt=arguments[2];this.coord=new jr(vt),this.segmentIndex=_t,this.dist=xt};_u.prototype.getSegmentIndex=function(){return this.segmentIndex},_u.prototype.getCoordinate=function(){return this.coord},_u.prototype.print=function(vt){vt.print(this.coord),vt.print(" seg # = "+this.segmentIndex),vt.println(" dist = "+this.dist)},_u.prototype.compareTo=function(vt){var _t=vt;return this.compare(_t.segmentIndex,_t.dist)},_u.prototype.isEndPoint=function(vt){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===vt},_u.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},_u.prototype.getDistance=function(){return this.dist},_u.prototype.compare=function(vt,_t){return this.segmentIndex<vt?-1:this.segmentIndex>vt?1:this.dist<_t?-1:this.dist>_t?1:0},_u.prototype.interfaces_=function(){return[Sc]},_u.prototype.getClass=function(){return _u};var Is=function(){this._nodeMap=new bl,this.edge=null;var vt=arguments[0];this.edge=vt};Is.prototype.print=function(vt){vt.println("Intersections:");for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},Is.prototype.iterator=function(){return this._nodeMap.values().iterator()},Is.prototype.addSplitEdges=function(vt){this.addEndpoints();for(var _t=this.iterator(),xt=_t.next();_t.hasNext();){var Tt=_t.next(),At=this.createSplitEdge(xt,Tt);vt.add(At),xt=Tt}},Is.prototype.addEndpoints=function(){var vt=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[vt],vt,0)},Is.prototype.createSplitEdge=function(vt,_t){var xt=_t.segmentIndex-vt.segmentIndex+2,Tt=this.edge.pts[_t.segmentIndex],At=_t.dist>0||!_t.coord.equals2D(Tt);At||xt--;var Pt=new Array(xt).fill(null),Nt=0;Pt[Nt++]=new jr(vt.coord);for(var Vt=vt.segmentIndex+1;Vt<=_t.segmentIndex;Vt++)Pt[Nt++]=this.edge.pts[Vt];return At&&(Pt[Nt]=_t.coord),new ip(Pt,new zs(this.edge._label))},Is.prototype.add=function(vt,_t,xt){var Tt=new _u(vt,_t,xt),At=this._nodeMap.get(Tt);return At!==null?At:(this._nodeMap.put(Tt,Tt),Tt)},Is.prototype.isIntersection=function(vt){for(var _t=this.iterator();_t.hasNext();)if(_t.next().coord.equals(vt))return!0;return!1},Is.prototype.interfaces_=function(){return[]},Is.prototype.getClass=function(){return Is};var Uh=function(){};Uh.prototype.getChainStartIndices=function(vt){var _t=0,xt=new Oi;xt.add(new hu(_t));do{var Tt=this.findChainEnd(vt,_t);xt.add(new hu(Tt)),_t=Tt}while(_t<vt.length-1);return Uh.toIntArray(xt)},Uh.prototype.findChainEnd=function(vt,_t){for(var xt=Vs.quadrant(vt[_t],vt[_t+1]),Tt=_t+1;Tt<vt.length&&Vs.quadrant(vt[Tt-1],vt[Tt])===xt;)Tt++;return Tt-1},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Uh.toIntArray=function(vt){for(var _t=new Array(vt.size()).fill(null),xt=0;xt<_t.length;xt++)_t[xt]=vt.get(xt).intValue();return _t};var Na=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new eo,this.env2=new eo;var vt=arguments[0];this.e=vt,this.pts=vt.getCoordinates();var _t=new Uh;this.startIndex=_t.getChainStartIndices(this.pts)};Na.prototype.getCoordinates=function(){return this.pts},Na.prototype.getMaxX=function(vt){var _t=this.pts[this.startIndex[vt]].x,xt=this.pts[this.startIndex[vt+1]].x;return _t>xt?_t:xt},Na.prototype.getMinX=function(vt){var _t=this.pts[this.startIndex[vt]].x,xt=this.pts[this.startIndex[vt+1]].x;return _t<xt?_t:xt},Na.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=arguments[3];this.computeIntersectsForChain(this.startIndex[vt],this.startIndex[vt+1],_t,_t.startIndex[xt],_t.startIndex[xt+1],Tt)}else if(arguments.length===6){var At=arguments[0],Pt=arguments[1],Nt=arguments[2],Vt=arguments[3],Gt=arguments[4],qt=arguments[5],en=this.pts[At],Xt=this.pts[Pt],an=Nt.pts[Vt],_n=Nt.pts[Gt];if(Pt-At==1&&Gt-Vt==1)return qt.addIntersections(this.e,At,Nt.e,Vt),null;if(this.env1.init(en,Xt),this.env2.init(an,_n),!this.env1.intersects(this.env2))return null;var bn=Math.trunc((At+Pt)/2),En=Math.trunc((Vt+Gt)/2);At<bn&&(Vt<En&&this.computeIntersectsForChain(At,bn,Nt,Vt,En,qt),En<Gt&&this.computeIntersectsForChain(At,bn,Nt,En,Gt,qt)),bn<Pt&&(Vt<En&&this.computeIntersectsForChain(bn,Pt,Nt,Vt,En,qt),En<Gt&&this.computeIntersectsForChain(bn,Pt,Nt,En,Gt,qt))}},Na.prototype.getStartIndexes=function(){return this.startIndex},Na.prototype.computeIntersects=function(vt,_t){for(var xt=0;xt<this.startIndex.length-1;xt++)for(var Tt=0;Tt<vt.startIndex.length-1;Tt++)this.computeIntersectsForChain(xt,vt,Tt,_t)},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na};var Aa=function vt(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var _t=0;_t<2;_t++)for(var xt=0;xt<3;xt++)this._depth[_t][xt]=vt.NULL_VALUE},Wu={NULL_VALUE:{configurable:!0}};Aa.prototype.getDepth=function(vt,_t){return this._depth[vt][_t]},Aa.prototype.setDepth=function(vt,_t,xt){this._depth[vt][_t]=xt},Aa.prototype.isNull=function(){var vt=this;if(arguments.length===0){for(var _t=0;_t<2;_t++)for(var xt=0;xt<3;xt++)if(vt._depth[_t][xt]!==Aa.NULL_VALUE)return!1;return!0}if(arguments.length===1){var Tt=arguments[0];return this._depth[Tt][1]===Aa.NULL_VALUE}if(arguments.length===2){var At=arguments[0],Pt=arguments[1];return this._depth[At][Pt]===Aa.NULL_VALUE}},Aa.prototype.normalize=function(){for(var vt=this,_t=0;_t<2;_t++)if(!vt.isNull(_t)){var xt=vt._depth[_t][1];vt._depth[_t][2]<xt&&(xt=vt._depth[_t][2]),xt<0&&(xt=0);for(var Tt=1;Tt<3;Tt++){var At=0;vt._depth[_t][Tt]>xt&&(At=1),vt._depth[_t][Tt]=At}}},Aa.prototype.getDelta=function(vt){return this._depth[vt][Ei.RIGHT]-this._depth[vt][Ei.LEFT]},Aa.prototype.getLocation=function(vt,_t){return this._depth[vt][_t]<=0?Kr.EXTERIOR:Kr.INTERIOR},Aa.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Aa.prototype.add=function(){var vt=this;if(arguments.length===1)for(var _t=arguments[0],xt=0;xt<2;xt++)for(var Tt=1;Tt<3;Tt++){var At=_t.getLocation(xt,Tt);At!==Kr.EXTERIOR&&At!==Kr.INTERIOR||(vt.isNull(xt,Tt)?vt._depth[xt][Tt]=Aa.depthAtLocation(At):vt._depth[xt][Tt]+=Aa.depthAtLocation(At))}else if(arguments.length===3){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2];Vt===Kr.INTERIOR&&this._depth[Pt][Nt]++}},Aa.prototype.interfaces_=function(){return[]},Aa.prototype.getClass=function(){return Aa},Aa.depthAtLocation=function(vt){return vt===Kr.EXTERIOR?0:vt===Kr.INTERIOR?1:Aa.NULL_VALUE},Wu.NULL_VALUE.get=function(){return-1},Object.defineProperties(Aa,Wu);var ip=function(vt){function _t(){if(vt.call(this),this.pts=null,this._env=null,this.eiList=new Is(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Aa,this._depthDelta=0,arguments.length===1){var xt=arguments[0];_t.call(this,xt,null)}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.pts=Tt,this._label=At}}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.getDepth=function(){return this._depth},_t.prototype.getCollapsedEdge=function(){var xt=new Array(2).fill(null);return xt[0]=this.pts[0],xt[1]=this.pts[1],new _t(xt,zs.toLineLabel(this._label))},_t.prototype.isIsolated=function(){return this._isIsolated},_t.prototype.getCoordinates=function(){return this.pts},_t.prototype.setIsolated=function(xt){this._isIsolated=xt},_t.prototype.setName=function(xt){this._name=xt},_t.prototype.equals=function(xt){if(!(xt instanceof _t))return!1;var Tt=xt;if(this.pts.length!==Tt.pts.length)return!1;for(var At=!0,Pt=!0,Nt=this.pts.length,Vt=0;Vt<this.pts.length;Vt++)if(this.pts[Vt].equals2D(Tt.pts[Vt])||(At=!1),this.pts[Vt].equals2D(Tt.pts[--Nt])||(Pt=!1),!At&&!Pt)return!1;return!0},_t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var xt=arguments[0];return this.pts[xt]}},_t.prototype.print=function(xt){xt.print("edge "+this._name+": "),xt.print("LINESTRING (");for(var Tt=0;Tt<this.pts.length;Tt++)Tt>0&&xt.print(","),xt.print(this.pts[Tt].x+" "+this.pts[Tt].y);xt.print(")  "+this._label+" "+this._depthDelta)},_t.prototype.computeIM=function(xt){_t.updateIM(this._label,xt)},_t.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},_t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},_t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},_t.prototype.getDepthDelta=function(){return this._depthDelta},_t.prototype.getNumPoints=function(){return this.pts.length},_t.prototype.printReverse=function(xt){xt.print("edge "+this._name+": ");for(var Tt=this.pts.length-1;Tt>=0;Tt--)xt.print(this.pts[Tt]+" ");xt.println("")},_t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Na(this)),this._mce},_t.prototype.getEnvelope=function(){if(this._env===null){this._env=new eo;for(var xt=0;xt<this.pts.length;xt++)this._env.expandToInclude(this.pts[xt])}return this._env},_t.prototype.addIntersection=function(xt,Tt,At,Pt){var Nt=new jr(xt.getIntersection(Pt)),Vt=Tt,Gt=xt.getEdgeDistance(At,Pt),qt=Vt+1;if(qt<this.pts.length){var en=this.pts[qt];Nt.equals2D(en)&&(Vt=qt,Gt=0)}this.eiList.add(Nt,Vt,Gt)},_t.prototype.toString=function(){var xt=new uu;xt.append("edge "+this._name+": "),xt.append("LINESTRING (");for(var Tt=0;Tt<this.pts.length;Tt++)Tt>0&&xt.append(","),xt.append(this.pts[Tt].x+" "+this.pts[Tt].y);return xt.append(")  "+this._label+" "+this._depthDelta),xt.toString()},_t.prototype.isPointwiseEqual=function(xt){if(this.pts.length!==xt.pts.length)return!1;for(var Tt=0;Tt<this.pts.length;Tt++)if(!this.pts[Tt].equals2D(xt.pts[Tt]))return!1;return!0},_t.prototype.setDepthDelta=function(xt){this._depthDelta=xt},_t.prototype.getEdgeIntersectionList=function(){return this.eiList},_t.prototype.addIntersections=function(xt,Tt,At){for(var Pt=0;Pt<xt.getIntersectionNum();Pt++)this.addIntersection(xt,Tt,At,Pt)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.updateIM=function(){if(arguments.length!==2)return vt.prototype.updateIM.apply(this,arguments);var xt=arguments[0],Tt=arguments[1];Tt.setAtLeastIfValid(xt.getLocation(0,Ei.ON),xt.getLocation(1,Ei.ON),1),xt.isArea()&&(Tt.setAtLeastIfValid(xt.getLocation(0,Ei.LEFT),xt.getLocation(1,Ei.LEFT),2),Tt.setAtLeastIfValid(xt.getLocation(0,Ei.RIGHT),xt.getLocation(1,Ei.RIGHT),2))},_t}(Ql),il=function(vt){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new tc,this._bufParams=vt||null};il.prototype.setWorkingPrecisionModel=function(vt){this._workingPrecisionModel=vt},il.prototype.insertUniqueEdge=function(vt){var _t=this._edgeList.findEqualEdge(vt);if(_t!==null){var xt=_t.getLabel(),Tt=vt.getLabel();_t.isPointwiseEqual(vt)||(Tt=new zs(vt.getLabel())).flip(),xt.merge(Tt);var At=il.depthDelta(Tt),Pt=_t.getDepthDelta()+At;_t.setDepthDelta(Pt)}else this._edgeList.add(vt),vt.setDepthDelta(il.depthDelta(vt.getLabel()))},il.prototype.buildSubgraphs=function(vt,_t){for(var xt=new Oi,Tt=vt.iterator();Tt.hasNext();){var At=Tt.next(),Pt=At.getRightmostCoordinate(),Nt=new af(xt).getDepth(Pt);At.computeDepth(Nt),At.findResultEdges(),xt.add(At),_t.add(At.getDirectedEdges(),At.getNodes())}},il.prototype.createSubgraphs=function(vt){for(var _t=new Oi,xt=vt.getNodes().iterator();xt.hasNext();){var Tt=xt.next();if(!Tt.isVisited()){var At=new xl;At.create(Tt),_t.add(At)}}return Jc.sort(_t,Jc.reverseOrder()),_t},il.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},il.prototype.getNoder=function(vt){if(this._workingNoder!==null)return this._workingNoder;var _t=new D0,xt=new Bh;return xt.setPrecisionModel(vt),_t.setSegmentIntersector(new nc(xt)),_t},il.prototype.buffer=function(vt,_t){var xt=this._workingPrecisionModel;xt===null&&(xt=vt.getPrecisionModel()),this._geomFact=vt.getFactory();var Tt=new ro(xt,this._bufParams),At=new jl(vt,_t,Tt).getCurves();if(At.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(At,xt),this._graph=new ha(new Ny),this._graph.addEdges(this._edgeList.getEdges());var Pt=this.createSubgraphs(this._graph),Nt=new Hl(this._geomFact);this.buildSubgraphs(Pt,Nt);var Vt=Nt.getPolygons();return Vt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Vt)},il.prototype.computeNodedEdges=function(vt,_t){var xt=this.getNoder(_t);xt.computeNodes(vt);for(var Tt=xt.getNodedSubstrings().iterator();Tt.hasNext();){var At=Tt.next(),Pt=At.getCoordinates();if(Pt.length!==2||!Pt[0].equals2D(Pt[1])){var Nt=At.getData(),Vt=new ip(At.getCoordinates(),new zs(Nt));this.insertUniqueEdge(Vt)}}},il.prototype.setNoder=function(vt){this._workingNoder=vt},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},il.depthDelta=function(vt){var _t=vt.getLocation(0,Ei.LEFT),xt=vt.getLocation(0,Ei.RIGHT);return _t===Kr.INTERIOR&&xt===Kr.EXTERIOR?1:_t===Kr.EXTERIOR&&xt===Kr.INTERIOR?-1:0},il.convertSegStrings=function(vt){for(var _t=new Yo,xt=new Oi;vt.hasNext();){var Tt=vt.next(),At=_t.createLineString(Tt.getCoordinates());xt.add(At)}return _t.buildGeometry(xt)};var Gh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var vt=arguments[0],_t=arguments[1];this._noder=vt,this._scaleFactor=_t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var xt=arguments[0],Tt=arguments[1],At=arguments[2],Pt=arguments[3];this._noder=xt,this._scaleFactor=Tt,this._offsetX=At,this._offsetY=Pt,this._isScaled=!this.isIntegerPrecision()}};Gh.prototype.rescale=function(){var vt=this;if(_o(arguments[0],Ma))for(var _t=arguments[0],xt=_t.iterator();xt.hasNext();){var Tt=xt.next();vt.rescale(Tt.getCoordinates())}else if(arguments[0]instanceof Array){for(var At=arguments[0],Pt=0;Pt<At.length;Pt++)At[Pt].x=At[Pt].x/vt._scaleFactor+vt._offsetX,At[Pt].y=At[Pt].y/vt._scaleFactor+vt._offsetY;At.length===2&&At[0].equals2D(At[1])&&hl.out.println(At)}},Gh.prototype.scale=function(){var vt=this;if(_o(arguments[0],Ma)){for(var _t=arguments[0],xt=new Oi,Tt=_t.iterator();Tt.hasNext();){var At=Tt.next();xt.add(new fa(vt.scale(At.getCoordinates()),At.getData()))}return xt}if(arguments[0]instanceof Array){for(var Pt=arguments[0],Nt=new Array(Pt.length).fill(null),Vt=0;Vt<Pt.length;Vt++)Nt[Vt]=new jr(Math.round((Pt[Vt].x-vt._offsetX)*vt._scaleFactor),Math.round((Pt[Vt].y-vt._offsetY)*vt._scaleFactor),Pt[Vt].z);var Gt=qo.removeRepeatedPoints(Nt);return Gt}},Gh.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},Gh.prototype.getNodedSubstrings=function(){var vt=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(vt),vt},Gh.prototype.computeNodes=function(vt){var _t=vt;this._isScaled&&(_t=this.scale(vt)),this._noder.computeNodes(_t)},Gh.prototype.interfaces_=function(){return[xd]},Gh.prototype.getClass=function(){return Gh};var hc=function(){this._li=new Bh,this._segStrings=null;var vt=arguments[0];this._segStrings=vt},lf={fact:{configurable:!0}};hc.prototype.checkEndPtVertexIntersections=function(){var vt=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();){var xt=_t.next(),Tt=xt.getCoordinates();vt.checkEndPtVertexIntersections(Tt[0],vt._segStrings),vt.checkEndPtVertexIntersections(Tt[Tt.length-1],vt._segStrings)}else if(arguments.length===2){for(var At=arguments[0],Pt=arguments[1],Nt=Pt.iterator();Nt.hasNext();)for(var Vt=Nt.next(),Gt=Vt.getCoordinates(),qt=1;qt<Gt.length-1;qt++)if(Gt[qt].equals(At))throw new dh("found endpt/interior pt intersection at index "+qt+" :pt "+At)}},hc.prototype.checkInteriorIntersections=function(){var vt=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();)for(var xt=_t.next(),Tt=this._segStrings.iterator();Tt.hasNext();){var At=Tt.next();vt.checkInteriorIntersections(xt,At)}else if(arguments.length===2)for(var Pt=arguments[0],Nt=arguments[1],Vt=Pt.getCoordinates(),Gt=Nt.getCoordinates(),qt=0;qt<Vt.length-1;qt++)for(var en=0;en<Gt.length-1;en++)vt.checkInteriorIntersections(Pt,qt,Nt,en);else if(arguments.length===4){var Xt=arguments[0],an=arguments[1],_n=arguments[2],bn=arguments[3];if(Xt===_n&&an===bn)return null;var En=Xt.getCoordinates()[an],un=Xt.getCoordinates()[an+1],Vn=_n.getCoordinates()[bn],nr=_n.getCoordinates()[bn+1];if(this._li.computeIntersection(En,un,Vn,nr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,En,un)||this.hasInteriorIntersection(this._li,Vn,nr)))throw new dh("found non-noded intersection at "+En+"-"+un+" and "+Vn+"-"+nr)}},hc.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},hc.prototype.checkCollapses=function(){var vt=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();){var xt=_t.next();vt.checkCollapses(xt)}else if(arguments.length===1)for(var Tt=arguments[0],At=Tt.getCoordinates(),Pt=0;Pt<At.length-2;Pt++)vt.checkCollapse(At[Pt],At[Pt+1],At[Pt+2])},hc.prototype.hasInteriorIntersection=function(vt,_t,xt){for(var Tt=0;Tt<vt.getIntersectionNum();Tt++){var At=vt.getIntersection(Tt);if(!At.equals(_t)&&!At.equals(xt))return!0}return!1},hc.prototype.checkCollapse=function(vt,_t,xt){if(vt.equals(xt))throw new dh("found non-noded collapse at "+hc.fact.createLineString([vt,_t,xt]))},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},lf.fact.get=function(){return new Yo},Object.defineProperties(hc,lf);var Pl=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var vt=arguments[0],_t=arguments[1],xt=arguments[2];if(this._originalPt=vt,this._pt=vt,this._scaleFactor=_t,this._li=xt,_t<=0)throw new oa("Scale factor must be non-zero");_t!==1&&(this._pt=new jr(this.scale(vt.x),this.scale(vt.y)),this._p0Scaled=new jr,this._p1Scaled=new jr),this.initCorners(this._pt)},dc={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Pl.prototype.intersectsScaled=function(vt,_t){var xt=Math.min(vt.x,_t.x),Tt=Math.max(vt.x,_t.x),At=Math.min(vt.y,_t.y),Pt=Math.max(vt.y,_t.y),Nt=this._maxx<xt||this._minx>Tt||this._maxy<At||this._miny>Pt;if(Nt)return!1;var Vt=this.intersectsToleranceSquare(vt,_t);return $o.isTrue(!(Nt&&Vt),"Found bad envelope test"),Vt},Pl.prototype.initCorners=function(vt){var _t=.5;this._minx=vt.x-_t,this._maxx=vt.x+_t,this._miny=vt.y-_t,this._maxy=vt.y+_t,this._corner[0]=new jr(this._maxx,this._maxy),this._corner[1]=new jr(this._minx,this._maxy),this._corner[2]=new jr(this._minx,this._miny),this._corner[3]=new jr(this._maxx,this._miny)},Pl.prototype.intersects=function(vt,_t){return this._scaleFactor===1?this.intersectsScaled(vt,_t):(this.copyScaled(vt,this._p0Scaled),this.copyScaled(_t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Pl.prototype.scale=function(vt){return Math.round(vt*this._scaleFactor)},Pl.prototype.getCoordinate=function(){return this._originalPt},Pl.prototype.copyScaled=function(vt,_t){_t.x=this.scale(vt.x),_t.y=this.scale(vt.y)},Pl.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var vt=Pl.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new eo(this._originalPt.x-vt,this._originalPt.x+vt,this._originalPt.y-vt,this._originalPt.y+vt)}return this._safeEnv},Pl.prototype.intersectsPixelClosure=function(vt,_t){return this._li.computeIntersection(vt,_t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,_t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,_t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,_t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Pl.prototype.intersectsToleranceSquare=function(vt,_t){var xt=!1,Tt=!1;return this._li.computeIntersection(vt,_t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(vt,_t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(xt=!0),this._li.computeIntersection(vt,_t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(Tt=!0),this._li.computeIntersection(vt,_t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!xt||!Tt)||!!vt.equals(this._pt)||!!_t.equals(this._pt))))},Pl.prototype.addSnappedNode=function(vt,_t){var xt=vt.getCoordinate(_t),Tt=vt.getCoordinate(_t+1);return!!this.intersects(xt,Tt)&&(vt.addIntersection(this.getCoordinate(),_t),!0)},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl},dc.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(Pl,dc);var La=function(){this.tempEnv1=new eo,this.selectedSegment=new Ji};La.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];vt.getLineSegment(_t,this.selectedSegment),this.select(this.selectedSegment)}}},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La};var qu=function(){this._index=null;var vt=arguments[0];this._index=vt},hg={HotPixelSnapAction:{configurable:!0}};qu.prototype.snap=function(){if(arguments.length===1){var vt=arguments[0];return this.snap(vt,null,-1)}if(arguments.length===3){var _t=arguments[0],xt=arguments[1],Tt=arguments[2],At=_t.getSafeEnvelope(),Pt=new op(_t,xt,Tt);return this._index.query(At,{interfaces_:function(){return[Hh]},visitItem:function(Nt){Nt.select(At,Pt)}}),Pt.isNodeAdded()}},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},hg.HotPixelSnapAction.get=function(){return op},Object.defineProperties(qu,hg);var op=function(vt){function _t(){vt.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var xt=arguments[0],Tt=arguments[1],At=arguments[2];this._hotPixel=xt,this._parentEdge=Tt,this._hotPixelVertexIndex=At}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.isNodeAdded=function(){return this._isNodeAdded},_t.prototype.select=function(){if(arguments.length!==2)return vt.prototype.select.apply(this,arguments);var xt=arguments[0],Tt=arguments[1],At=xt.getContext();if(this._parentEdge!==null&&At===this._parentEdge&&Tt===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(At,Tt)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(La),cf=function(){this._li=null,this._interiorIntersections=null;var vt=arguments[0];this._li=vt,this._interiorIntersections=new Oi};cf.prototype.processIntersections=function(vt,_t,xt,Tt){if(vt===xt&&_t===Tt)return null;var At=vt.getCoordinates()[_t],Pt=vt.getCoordinates()[_t+1],Nt=xt.getCoordinates()[Tt],Vt=xt.getCoordinates()[Tt+1];if(this._li.computeIntersection(At,Pt,Nt,Vt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Gt=0;Gt<this._li.getIntersectionNum();Gt++)this._interiorIntersections.add(this._li.getIntersection(Gt));vt.addIntersections(this._li,_t,0),xt.addIntersections(this._li,Tt,1)}},cf.prototype.isDone=function(){return!1},cf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},cf.prototype.interfaces_=function(){return[Sd]},cf.prototype.getClass=function(){return cf};var Yu=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var vt=arguments[0];this._pm=vt,this._li=new Bh,this._li.setPrecisionModel(vt),this._scaleFactor=vt.getScale()};Yu.prototype.checkCorrectness=function(vt){var _t=fa.getNodedSubstrings(vt),xt=new hc(_t);try{xt.checkValid()}catch(Tt){if(!(Tt instanceof vy))throw Tt;Tt.printStackTrace()}},Yu.prototype.getNodedSubstrings=function(){return fa.getNodedSubstrings(this._nodedSegStrings)},Yu.prototype.snapRound=function(vt,_t){var xt=this.findInteriorIntersections(vt,_t);this.computeIntersectionSnaps(xt),this.computeVertexSnaps(vt)},Yu.prototype.findInteriorIntersections=function(vt,_t){var xt=new cf(_t);return this._noder.setSegmentIntersector(xt),this._noder.computeNodes(vt),xt.getInteriorIntersections()},Yu.prototype.computeVertexSnaps=function(){var vt=this;if(_o(arguments[0],Ma))for(var _t=arguments[0],xt=_t.iterator();xt.hasNext();){var Tt=xt.next();vt.computeVertexSnaps(Tt)}else if(arguments[0]instanceof fa)for(var At=arguments[0],Pt=At.getCoordinates(),Nt=0;Nt<Pt.length;Nt++){var Vt=new Pl(Pt[Nt],vt._scaleFactor,vt._li),Gt=vt._pointSnapper.snap(Vt,At,Nt);Gt&&At.addIntersection(Pt[Nt],Nt)}},Yu.prototype.computeNodes=function(vt){this._nodedSegStrings=vt,this._noder=new D0,this._pointSnapper=new qu(this._noder.getIndex()),this.snapRound(vt,this._li)},Yu.prototype.computeIntersectionSnaps=function(vt){for(var _t=this,xt=vt.iterator();xt.hasNext();){var Tt=xt.next(),At=new Pl(Tt,_t._scaleFactor,_t._li);_t._pointSnapper.snap(At)}},Yu.prototype.interfaces_=function(){return[xd]},Yu.prototype.getClass=function(){return Yu};var qs=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Rs,this._resultGeometry=null,this._saveException=null,arguments.length===1){var vt=arguments[0];this._argGeom=vt}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this._argGeom=_t,this._bufParams=xt}},fc={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};qs.prototype.bufferFixedPrecision=function(vt){var _t=new Gh(new Yu(new $s(1)),vt.getScale()),xt=new il(this._bufParams);xt.setWorkingPrecisionModel(vt),xt.setNoder(_t),this._resultGeometry=xt.buffer(this._argGeom,this._distance)},qs.prototype.bufferReducedPrecision=function(){var vt=this;if(arguments.length===0){for(var _t=qs.MAX_PRECISION_DIGITS;_t>=0;_t--){try{vt.bufferReducedPrecision(_t)}catch(Pt){if(!(Pt instanceof gh))throw Pt;vt._saveException=Pt}if(vt._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var xt=arguments[0],Tt=qs.precisionScaleFactor(this._argGeom,this._distance,xt),At=new $s(Tt);this.bufferFixedPrecision(At)}},qs.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var vt=this._argGeom.getFactory().getPrecisionModel();vt.getType()===$s.FIXED?this.bufferFixedPrecision(vt):this.bufferReducedPrecision()},qs.prototype.setQuadrantSegments=function(vt){this._bufParams.setQuadrantSegments(vt)},qs.prototype.bufferOriginalPrecision=function(){try{var vt=new il(this._bufParams);this._resultGeometry=vt.buffer(this._argGeom,this._distance)}catch(_t){if(!(_t instanceof dh))throw _t;this._saveException=_t}},qs.prototype.getResultGeometry=function(vt){return this._distance=vt,this.computeGeometry(),this._resultGeometry},qs.prototype.setEndCapStyle=function(vt){this._bufParams.setEndCapStyle(vt)},qs.prototype.interfaces_=function(){return[]},qs.prototype.getClass=function(){return qs},qs.bufferOp=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],xt=new qs(vt),Tt=xt.getResultGeometry(_t);return Tt}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof po&&typeof arguments[1]=="number"){var At=arguments[0],Pt=arguments[1],Nt=arguments[2],Vt=new qs(At);Vt.setQuadrantSegments(Nt);var Gt=Vt.getResultGeometry(Pt);return Gt}if(arguments[2]instanceof Rs&&arguments[0]instanceof po&&typeof arguments[1]=="number"){var qt=arguments[0],en=arguments[1],Xt=arguments[2],an=new qs(qt,Xt),_n=an.getResultGeometry(en);return _n}}else if(arguments.length===4){var bn=arguments[0],En=arguments[1],un=arguments[2],Vn=arguments[3],nr=new qs(bn);nr.setQuadrantSegments(un),nr.setEndCapStyle(Vn);var xn=nr.getResultGeometry(En);return xn}},qs.precisionScaleFactor=function(vt,_t,xt){var Tt=vt.getEnvelopeInternal(),At=cc.max(Math.abs(Tt.getMaxX()),Math.abs(Tt.getMaxY()),Math.abs(Tt.getMinX()),Math.abs(Tt.getMinY()))+2*(_t>0?_t:0),Pt=xt-Math.trunc(Math.log(At)/Math.log(10)+1);return Math.pow(10,Pt)},fc.CAP_ROUND.get=function(){return Rs.CAP_ROUND},fc.CAP_BUTT.get=function(){return Rs.CAP_FLAT},fc.CAP_FLAT.get=function(){return Rs.CAP_FLAT},fc.CAP_SQUARE.get=function(){return Rs.CAP_SQUARE},fc.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(qs,fc);var ol=function(){this._pt=[new jr,new jr],this._distance=ko.NaN,this._isNull=!0};ol.prototype.getCoordinates=function(){return this._pt},ol.prototype.getCoordinate=function(vt){return this._pt[vt]},ol.prototype.setMinimum=function(){if(arguments.length===1){var vt=arguments[0];this.setMinimum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Tt=_t.distance(xt);Tt<this._distance&&this.initialize(_t,xt,Tt)}},ol.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this._pt[0].setCoordinate(vt),this._pt[1].setCoordinate(_t),this._distance=vt.distance(_t),this._isNull=!1}else if(arguments.length===3){var xt=arguments[0],Tt=arguments[1],At=arguments[2];this._pt[0].setCoordinate(xt),this._pt[1].setCoordinate(Tt),this._distance=At,this._isNull=!1}},ol.prototype.getDistance=function(){return this._distance},ol.prototype.setMaximum=function(){if(arguments.length===1){var vt=arguments[0];this.setMaximum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Tt=_t.distance(xt);Tt>this._distance&&this.initialize(_t,xt,Tt)}},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol};var pc=function(){};pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.computeDistance=function(){if(arguments[2]instanceof ol&&arguments[0]instanceof sa&&arguments[1]instanceof jr)for(var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=vt.getCoordinates(),At=new Ji,Pt=0;Pt<Tt.length-1;Pt++){At.setCoordinates(Tt[Pt],Tt[Pt+1]);var Nt=At.closestPoint(_t);xt.setMinimum(Nt,_t)}else if(arguments[2]instanceof ol&&arguments[0]instanceof $a&&arguments[1]instanceof jr){var Vt=arguments[0],Gt=arguments[1],qt=arguments[2];pc.computeDistance(Vt.getExteriorRing(),Gt,qt);for(var en=0;en<Vt.getNumInteriorRing();en++)pc.computeDistance(Vt.getInteriorRingN(en),Gt,qt)}else if(arguments[2]instanceof ol&&arguments[0]instanceof po&&arguments[1]instanceof jr){var Xt=arguments[0],an=arguments[1],_n=arguments[2];if(Xt instanceof sa)pc.computeDistance(Xt,an,_n);else if(Xt instanceof $a)pc.computeDistance(Xt,an,_n);else if(Xt instanceof Il)for(var bn=Xt,En=0;En<bn.getNumGeometries();En++){var un=bn.getGeometryN(En);pc.computeDistance(un,an,_n)}else _n.setMinimum(Xt.getCoordinate(),an)}else if(arguments[2]instanceof ol&&arguments[0]instanceof Ji&&arguments[1]instanceof jr){var Vn=arguments[0],nr=arguments[1],xn=arguments[2],zn=Vn.closestPoint(nr);xn.setMinimum(zn,nr)}};var bu=function(vt){this._maxPtDist=new ol,this._inputGeom=vt||null},mm={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};bu.prototype.computeMaxMidpointDistance=function(vt){var _t=new Xu(this._inputGeom);vt.apply(_t),this._maxPtDist.setMaximum(_t.getMaxPointDistance())},bu.prototype.computeMaxVertexDistance=function(vt){var _t=new Cd(this._inputGeom);vt.apply(_t),this._maxPtDist.setMaximum(_t.getMaxPointDistance())},bu.prototype.findDistance=function(vt){return this.computeMaxVertexDistance(vt),this.computeMaxMidpointDistance(vt),this._maxPtDist.getDistance()},bu.prototype.getDistancePoints=function(){return this._maxPtDist},bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},mm.MaxPointDistanceFilter.get=function(){return Cd},mm.MaxMidpointDistanceFilter.get=function(){return Xu},Object.defineProperties(bu,mm);var Cd=function(vt){this._maxPtDist=new ol,this._minPtDist=new ol,this._geom=vt||null};Cd.prototype.filter=function(vt){this._minPtDist.initialize(),pc.computeDistance(this._geom,vt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Cd.prototype.getMaxPointDistance=function(){return this._maxPtDist},Cd.prototype.interfaces_=function(){return[Fu]},Cd.prototype.getClass=function(){return Cd};var Xu=function(vt){this._maxPtDist=new ol,this._minPtDist=new ol,this._geom=vt||null};Xu.prototype.filter=function(vt,_t){if(_t===0)return null;var xt=vt.getCoordinate(_t-1),Tt=vt.getCoordinate(_t),At=new jr((xt.x+Tt.x)/2,(xt.y+Tt.y)/2);this._minPtDist.initialize(),pc.computeDistance(this._geom,At,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Xu.prototype.isDone=function(){return!1},Xu.prototype.isGeometryChanged=function(){return!1},Xu.prototype.getMaxPointDistance=function(){return this._maxPtDist},Xu.prototype.interfaces_=function(){return[qc]},Xu.prototype.getClass=function(){return Xu};var mh=function(vt){this._comps=vt||null};mh.prototype.filter=function(vt){vt instanceof $a&&this._comps.add(vt)},mh.prototype.interfaces_=function(){return[pu]},mh.prototype.getClass=function(){return mh},mh.getPolygons=function(){if(arguments.length===1){var vt=arguments[0];return mh.getPolygons(vt,new Oi)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return _t instanceof $a?xt.add(_t):_t instanceof Il&&_t.apply(new mh(xt)),xt}};var dl=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var vt=arguments[0];this._lines=vt}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this._lines=_t,this._isForcedToLineString=xt}};dl.prototype.filter=function(vt){if(this._isForcedToLineString&&vt instanceof Vu){var _t=vt.getFactory().createLineString(vt.getCoordinateSequence());return this._lines.add(_t),null}vt instanceof sa&&this._lines.add(vt)},dl.prototype.setForceToLineString=function(vt){this._isForcedToLineString=vt},dl.prototype.interfaces_=function(){return[Du]},dl.prototype.getClass=function(){return dl},dl.getGeometry=function(){if(arguments.length===1){var vt=arguments[0];return vt.getFactory().buildGeometry(dl.getLines(vt))}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return _t.getFactory().buildGeometry(dl.getLines(_t,xt))}},dl.getLines=function(){if(arguments.length===1){var vt=arguments[0];return dl.getLines(vt,!1)}if(arguments.length===2){if(_o(arguments[0],Ma)&&_o(arguments[1],Ma)){for(var _t=arguments[0],xt=arguments[1],Tt=_t.iterator();Tt.hasNext();){var At=Tt.next();dl.getLines(At,xt)}return xt}if(arguments[0]instanceof po&&typeof arguments[1]=="boolean"){var Pt=arguments[0],Nt=arguments[1],Vt=new Oi;return Pt.apply(new dl(Vt,Nt)),Vt}if(arguments[0]instanceof po&&_o(arguments[1],Ma)){var Gt=arguments[0],qt=arguments[1];return Gt instanceof sa?qt.add(Gt):Gt.apply(new dl(qt)),qt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&_o(arguments[0],Ma)&&_o(arguments[1],Ma)){for(var en=arguments[0],Xt=arguments[1],an=arguments[2],_n=en.iterator();_n.hasNext();){var bn=_n.next();dl.getLines(bn,Xt,an)}return Xt}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof po&&_o(arguments[1],Ma)){var En=arguments[0],un=arguments[1],Vn=arguments[2];return En.apply(new dl(un,Vn)),un}}};var gc=function(){if(this._boundaryRule=kc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];if(vt===null)throw new oa("Rule must be non-null");this._boundaryRule=vt}}};gc.prototype.locateInternal=function(){var vt=this;if(arguments[0]instanceof jr&&arguments[1]instanceof $a){var _t=arguments[0],xt=arguments[1];if(xt.isEmpty())return Kr.EXTERIOR;var Tt=xt.getExteriorRing(),At=this.locateInPolygonRing(_t,Tt);if(At===Kr.EXTERIOR)return Kr.EXTERIOR;if(At===Kr.BOUNDARY)return Kr.BOUNDARY;for(var Pt=0;Pt<xt.getNumInteriorRing();Pt++){var Nt=xt.getInteriorRingN(Pt),Vt=vt.locateInPolygonRing(_t,Nt);if(Vt===Kr.INTERIOR)return Kr.EXTERIOR;if(Vt===Kr.BOUNDARY)return Kr.BOUNDARY}return Kr.INTERIOR}if(arguments[0]instanceof jr&&arguments[1]instanceof sa){var Gt=arguments[0],qt=arguments[1];if(!qt.getEnvelopeInternal().intersects(Gt))return Kr.EXTERIOR;var en=qt.getCoordinates();return qt.isClosed()||!Gt.equals(en[0])&&!Gt.equals(en[en.length-1])?Ni.isOnLine(Gt,en)?Kr.INTERIOR:Kr.EXTERIOR:Kr.BOUNDARY}if(arguments[0]instanceof jr&&arguments[1]instanceof Jl){var Xt=arguments[0],an=arguments[1],_n=an.getCoordinate();return _n.equals2D(Xt)?Kr.INTERIOR:Kr.EXTERIOR}},gc.prototype.locateInPolygonRing=function(vt,_t){return _t.getEnvelopeInternal().intersects(vt)?Ni.locatePointInRing(vt,_t.getCoordinates()):Kr.EXTERIOR},gc.prototype.intersects=function(vt,_t){return this.locate(vt,_t)!==Kr.EXTERIOR},gc.prototype.updateLocationInfo=function(vt){vt===Kr.INTERIOR&&(this._isIn=!0),vt===Kr.BOUNDARY&&this._numBoundaries++},gc.prototype.computeLocation=function(vt,_t){var xt=this;if(_t instanceof Jl&&this.updateLocationInfo(this.locateInternal(vt,_t)),_t instanceof sa)this.updateLocationInfo(this.locateInternal(vt,_t));else if(_t instanceof $a)this.updateLocationInfo(this.locateInternal(vt,_t));else if(_t instanceof Fh)for(var Tt=_t,At=0;At<Tt.getNumGeometries();At++){var Pt=Tt.getGeometryN(At);xt.updateLocationInfo(xt.locateInternal(vt,Pt))}else if(_t instanceof ju)for(var Nt=_t,Vt=0;Vt<Nt.getNumGeometries();Vt++){var Gt=Nt.getGeometryN(Vt);xt.updateLocationInfo(xt.locateInternal(vt,Gt))}else if(_t instanceof Il)for(var qt=new vu(_t);qt.hasNext();){var en=qt.next();en!==_t&&xt.computeLocation(vt,en)}},gc.prototype.locate=function(vt,_t){return _t.isEmpty()?Kr.EXTERIOR:_t instanceof sa||_t instanceof $a?this.locateInternal(vt,_t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(vt,_t),this._boundaryRule.isInBoundary(this._numBoundaries)?Kr.BOUNDARY:this._numBoundaries>0||this._isIn?Kr.INTERIOR:Kr.EXTERIOR)},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var Ol=function vt(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var _t=arguments[0],xt=arguments[1];vt.call(this,_t,vt.INSIDE_AREA,xt)}else if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2];this._component=Tt,this._segIndex=At,this._pt=Pt}},Dy={INSIDE_AREA:{configurable:!0}};Ol.prototype.isInsideArea=function(){return this._segIndex===Ol.INSIDE_AREA},Ol.prototype.getCoordinate=function(){return this._pt},Ol.prototype.getGeometryComponent=function(){return this._component},Ol.prototype.getSegmentIndex=function(){return this._segIndex},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Dy.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ol,Dy);var Wh=function(vt){this._pts=vt||null};Wh.prototype.filter=function(vt){vt instanceof Jl&&this._pts.add(vt)},Wh.prototype.interfaces_=function(){return[pu]},Wh.prototype.getClass=function(){return Wh},Wh.getPoints=function(){if(arguments.length===1){var vt=arguments[0];return vt instanceof Jl?Jc.singletonList(vt):Wh.getPoints(vt,new Oi)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return _t instanceof Jl?xt.add(_t):_t instanceof Il&&_t.apply(new Wh(xt)),xt}};var yh=function(){this._locations=null;var vt=arguments[0];this._locations=vt};yh.prototype.filter=function(vt){(vt instanceof Jl||vt instanceof sa||vt instanceof $a)&&this._locations.add(new Ol(vt,0,vt.getCoordinate()))},yh.prototype.interfaces_=function(){return[pu]},yh.prototype.getClass=function(){return yh},yh.getLocations=function(vt){var _t=new Oi;return vt.apply(new yh(_t)),_t};var sl=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new gc,this._minDistanceLocation=null,this._minDistance=ko.MAX_VALUE,arguments.length===2){var vt=arguments[0],_t=arguments[1];this._geom=[vt,_t],this._terminateDistance=0}else if(arguments.length===3){var xt=arguments[0],Tt=arguments[1],At=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=xt,this._geom[1]=Tt,this._terminateDistance=At}};sl.prototype.computeContainmentDistance=function(){var vt=this;if(arguments.length===0){var _t=new Array(2).fill(null);if(this.computeContainmentDistance(0,_t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,_t)}else if(arguments.length===2){var xt=arguments[0],Tt=arguments[1],At=1-xt,Pt=mh.getPolygons(this._geom[xt]);if(Pt.size()>0){var Nt=yh.getLocations(this._geom[At]);if(this.computeContainmentDistance(Nt,Pt,Tt),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[At]=Tt[0],this._minDistanceLocation[xt]=Tt[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&_o(arguments[0],Gc)&&_o(arguments[1],Gc)){for(var Vt=arguments[0],Gt=arguments[1],qt=arguments[2],en=0;en<Vt.size();en++)for(var Xt=Vt.get(en),an=0;an<Gt.size();an++)if(vt.computeContainmentDistance(Xt,Gt.get(an),qt),vt._minDistance<=vt._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ol&&arguments[1]instanceof $a){var _n=arguments[0],bn=arguments[1],En=arguments[2],un=_n.getCoordinate();if(Kr.EXTERIOR!==this._ptLocator.locate(un,bn))return this._minDistance=0,En[0]=_n,En[1]=new Ol(bn,un),null}}},sl.prototype.computeMinDistanceLinesPoints=function(vt,_t,xt){for(var Tt=this,At=0;At<vt.size();At++)for(var Pt=vt.get(At),Nt=0;Nt<_t.size();Nt++){var Vt=_t.get(Nt);if(Tt.computeMinDistance(Pt,Vt,xt),Tt._minDistance<=Tt._terminateDistance)return null}},sl.prototype.computeFacetDistance=function(){var vt=new Array(2).fill(null),_t=dl.getLines(this._geom[0]),xt=dl.getLines(this._geom[1]),Tt=Wh.getPoints(this._geom[0]),At=Wh.getPoints(this._geom[1]);return this.computeMinDistanceLines(_t,xt,vt),this.updateMinDistance(vt,!1),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistanceLinesPoints(_t,At,vt),this.updateMinDistance(vt,!1),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistanceLinesPoints(xt,Tt,vt),this.updateMinDistance(vt,!0),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistancePoints(Tt,At,vt),void this.updateMinDistance(vt,!1))))},sl.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},sl.prototype.updateMinDistance=function(vt,_t){if(vt[0]===null)return null;_t?(this._minDistanceLocation[0]=vt[1],this._minDistanceLocation[1]=vt[0]):(this._minDistanceLocation[0]=vt[0],this._minDistanceLocation[1]=vt[1])},sl.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},sl.prototype.computeMinDistance=function(){var vt=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof sa&&arguments[1]instanceof Jl){var _t=arguments[0],xt=arguments[1],Tt=arguments[2];if(_t.getEnvelopeInternal().distance(xt.getEnvelopeInternal())>this._minDistance)return null;for(var At=_t.getCoordinates(),Pt=xt.getCoordinate(),Nt=0;Nt<At.length-1;Nt++){var Vt=Ni.distancePointLine(Pt,At[Nt],At[Nt+1]);if(Vt<vt._minDistance){vt._minDistance=Vt;var Gt=new Ji(At[Nt],At[Nt+1]),qt=Gt.closestPoint(Pt);Tt[0]=new Ol(_t,Nt,qt),Tt[1]=new Ol(xt,0,Pt)}if(vt._minDistance<=vt._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof sa&&arguments[1]instanceof sa){var en=arguments[0],Xt=arguments[1],an=arguments[2];if(en.getEnvelopeInternal().distance(Xt.getEnvelopeInternal())>this._minDistance)return null;for(var _n=en.getCoordinates(),bn=Xt.getCoordinates(),En=0;En<_n.length-1;En++)for(var un=0;un<bn.length-1;un++){var Vn=Ni.distanceLineLine(_n[En],_n[En+1],bn[un],bn[un+1]);if(Vn<vt._minDistance){vt._minDistance=Vn;var nr=new Ji(_n[En],_n[En+1]),xn=new Ji(bn[un],bn[un+1]),zn=nr.closestPoints(xn);an[0]=new Ol(en,En,zn[0]),an[1]=new Ol(Xt,un,zn[1])}if(vt._minDistance<=vt._terminateDistance)return null}}}},sl.prototype.computeMinDistancePoints=function(vt,_t,xt){for(var Tt=this,At=0;At<vt.size();At++)for(var Pt=vt.get(At),Nt=0;Nt<_t.size();Nt++){var Vt=_t.get(Nt),Gt=Pt.getCoordinate().distance(Vt.getCoordinate());if(Gt<Tt._minDistance&&(Tt._minDistance=Gt,xt[0]=new Ol(Pt,0,Pt.getCoordinate()),xt[1]=new Ol(Vt,0,Vt.getCoordinate())),Tt._minDistance<=Tt._terminateDistance)return null}},sl.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new oa("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},sl.prototype.computeMinDistanceLines=function(vt,_t,xt){for(var Tt=this,At=0;At<vt.size();At++)for(var Pt=vt.get(At),Nt=0;Nt<_t.size();Nt++){var Vt=_t.get(Nt);if(Tt.computeMinDistance(Pt,Vt,xt),Tt._minDistance<=Tt._terminateDistance)return null}},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.distance=function(vt,_t){return new sl(vt,_t).distance()},sl.isWithinDistance=function(vt,_t,xt){return new sl(vt,_t,xt).distance()<=xt},sl.nearestPoints=function(vt,_t){return new sl(vt,_t).nearestPoints()};var El=function(){this._pt=[new jr,new jr],this._distance=ko.NaN,this._isNull=!0};El.prototype.getCoordinates=function(){return this._pt},El.prototype.getCoordinate=function(vt){return this._pt[vt]},El.prototype.setMinimum=function(){if(arguments.length===1){var vt=arguments[0];this.setMinimum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Tt=_t.distance(xt);Tt<this._distance&&this.initialize(_t,xt,Tt)}},El.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this._pt[0].setCoordinate(vt),this._pt[1].setCoordinate(_t),this._distance=vt.distance(_t),this._isNull=!1}else if(arguments.length===3){var xt=arguments[0],Tt=arguments[1],At=arguments[2];this._pt[0].setCoordinate(xt),this._pt[1].setCoordinate(Tt),this._distance=At,this._isNull=!1}},El.prototype.toString=function(){return Uc.toLineString(this._pt[0],this._pt[1])},El.prototype.getDistance=function(){return this._distance},El.prototype.setMaximum=function(){if(arguments.length===1){var vt=arguments[0];this.setMaximum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Tt=_t.distance(xt);Tt>this._distance&&this.initialize(_t,xt,Tt)}},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El};var tu=function(){};tu.prototype.interfaces_=function(){return[]},tu.prototype.getClass=function(){return tu},tu.computeDistance=function(){if(arguments[2]instanceof El&&arguments[0]instanceof sa&&arguments[1]instanceof jr)for(var vt=arguments[0],_t=arguments[1],xt=arguments[2],Tt=new Ji,At=vt.getCoordinates(),Pt=0;Pt<At.length-1;Pt++){Tt.setCoordinates(At[Pt],At[Pt+1]);var Nt=Tt.closestPoint(_t);xt.setMinimum(Nt,_t)}else if(arguments[2]instanceof El&&arguments[0]instanceof $a&&arguments[1]instanceof jr){var Vt=arguments[0],Gt=arguments[1],qt=arguments[2];tu.computeDistance(Vt.getExteriorRing(),Gt,qt);for(var en=0;en<Vt.getNumInteriorRing();en++)tu.computeDistance(Vt.getInteriorRingN(en),Gt,qt)}else if(arguments[2]instanceof El&&arguments[0]instanceof po&&arguments[1]instanceof jr){var Xt=arguments[0],an=arguments[1],_n=arguments[2];if(Xt instanceof sa)tu.computeDistance(Xt,an,_n);else if(Xt instanceof $a)tu.computeDistance(Xt,an,_n);else if(Xt instanceof Il)for(var bn=Xt,En=0;En<bn.getNumGeometries();En++){var un=bn.getGeometryN(En);tu.computeDistance(un,an,_n)}else _n.setMinimum(Xt.getCoordinate(),an)}else if(arguments[2]instanceof El&&arguments[0]instanceof Ji&&arguments[1]instanceof jr){var Vn=arguments[0],nr=arguments[1],xn=arguments[2],zn=Vn.closestPoint(nr);xn.setMinimum(zn,nr)}};var mc=function(){this._g0=null,this._g1=null,this._ptDist=new El,this._densifyFrac=0;var vt=arguments[0],_t=arguments[1];this._g0=vt,this._g1=_t},uf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};mc.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},mc.prototype.setDensifyFraction=function(vt){if(vt>1||vt<=0)throw new oa("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=vt},mc.prototype.compute=function(vt,_t){this.computeOrientedDistance(vt,_t,this._ptDist),this.computeOrientedDistance(_t,vt,this._ptDist)},mc.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},mc.prototype.computeOrientedDistance=function(vt,_t,xt){var Tt=new hf(_t);if(vt.apply(Tt),xt.setMaximum(Tt.getMaxPointDistance()),this._densifyFrac>0){var At=new qh(_t,this._densifyFrac);vt.apply(At),xt.setMaximum(At.getMaxPointDistance())}},mc.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc},mc.distance=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],xt=new mc(vt,_t);return xt.distance()}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2],Nt=new mc(Tt,At);return Nt.setDensifyFraction(Pt),Nt.distance()}},uf.MaxPointDistanceFilter.get=function(){return hf},uf.MaxDensifiedByFractionDistanceFilter.get=function(){return qh},Object.defineProperties(mc,uf);var hf=function(){this._maxPtDist=new El,this._minPtDist=new El,this._euclideanDist=new tu,this._geom=null;var vt=arguments[0];this._geom=vt};hf.prototype.filter=function(vt){this._minPtDist.initialize(),tu.computeDistance(this._geom,vt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},hf.prototype.getMaxPointDistance=function(){return this._maxPtDist},hf.prototype.interfaces_=function(){return[Fu]},hf.prototype.getClass=function(){return hf};var qh=function(){this._maxPtDist=new El,this._minPtDist=new El,this._geom=null,this._numSubSegs=0;var vt=arguments[0],_t=arguments[1];this._geom=vt,this._numSubSegs=Math.trunc(Math.round(1/_t))};qh.prototype.filter=function(vt,_t){var xt=this;if(_t===0)return null;for(var Tt=vt.getCoordinate(_t-1),At=vt.getCoordinate(_t),Pt=(At.x-Tt.x)/this._numSubSegs,Nt=(At.y-Tt.y)/this._numSubSegs,Vt=0;Vt<this._numSubSegs;Vt++){var Gt=Tt.x+Vt*Pt,qt=Tt.y+Vt*Nt,en=new jr(Gt,qt);xt._minPtDist.initialize(),tu.computeDistance(xt._geom,en,xt._minPtDist),xt._maxPtDist.setMaximum(xt._minPtDist)}},qh.prototype.isDone=function(){return!1},qh.prototype.isGeometryChanged=function(){return!1},qh.prototype.getMaxPointDistance=function(){return this._maxPtDist},qh.prototype.interfaces_=function(){return[qc]},qh.prototype.getClass=function(){return qh};var rc=function(vt,_t,xt){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=vt||null,this._bufDistance=_t||null,this._result=xt||null},B0={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};rc.prototype.checkMaximumDistance=function(vt,_t,xt){var Tt=new mc(_t,vt);if(Tt.setDensifyFraction(.25),this._maxDistanceFound=Tt.orientedDistance(),this._maxDistanceFound>xt){this._isValid=!1;var At=Tt.getCoordinates();this._errorLocation=At[1],this._errorIndicator=vt.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Uc.toLineString(At[0],At[1])+")"}},rc.prototype.isValid=function(){var vt=Math.abs(this._bufDistance),_t=rc.MAX_DISTANCE_DIFF_FRAC*vt;return this._minValidDistance=vt-_t,this._maxValidDistance=vt+_t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),rc.VERBOSE&&hl.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},rc.prototype.checkNegativeValid=function(){if(!(this._input instanceof $a||this._input instanceof ju||this._input instanceof Il))return null;var vt=this.getPolygonLines(this._input);if(this.checkMinimumDistance(vt,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(vt,this._result,this._maxValidDistance)},rc.prototype.getErrorIndicator=function(){return this._errorIndicator},rc.prototype.checkMinimumDistance=function(vt,_t,xt){var Tt=new sl(vt,_t,xt);if(this._minDistanceFound=Tt.distance(),this._minDistanceFound<xt){this._isValid=!1;var At=Tt.nearestPoints();this._errorLocation=Tt.nearestPoints()[1],this._errorIndicator=vt.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Uc.toLineString(At[0],At[1])+" )"}},rc.prototype.checkPositiveValid=function(){var vt=this._result.getBoundary();if(this.checkMinimumDistance(this._input,vt,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,vt,this._maxValidDistance)},rc.prototype.getErrorLocation=function(){return this._errorLocation},rc.prototype.getPolygonLines=function(vt){for(var _t=new Oi,xt=new dl(_t),Tt=mh.getPolygons(vt).iterator();Tt.hasNext();)Tt.next().apply(xt);return vt.getFactory().buildGeometry(_t)},rc.prototype.getErrorMessage=function(){return this._errMsg},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},B0.VERBOSE.get=function(){return!1},B0.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(rc,B0);var fl=function(vt,_t,xt){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=vt||null,this._distance=_t||null,this._result=xt||null},F0={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};fl.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},fl.prototype.checkEnvelope=function(){if(this._distance<0)return null;var vt=this._distance*fl.MAX_ENV_DIFF_FRAC;vt===0&&(vt=.001);var _t=new eo(this._input.getEnvelopeInternal());_t.expandBy(this._distance);var xt=new eo(this._result.getEnvelopeInternal());xt.expandBy(vt),xt.contains(_t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(xt)),this.report("Envelope")},fl.prototype.checkDistance=function(){var vt=new rc(this._input,this._distance,this._result);vt.isValid()||(this._isValid=!1,this._errorMsg=vt.getErrorMessage(),this._errorLocation=vt.getErrorLocation(),this._errorIndicator=vt.getErrorIndicator()),this.report("Distance")},fl.prototype.checkArea=function(){var vt=this._input.getArea(),_t=this._result.getArea();this._distance>0&&vt>_t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&vt<_t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},fl.prototype.checkPolygonal=function(){this._result instanceof $a||this._result instanceof ju||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},fl.prototype.getErrorIndicator=function(){return this._errorIndicator},fl.prototype.getErrorLocation=function(){return this._errorLocation},fl.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},fl.prototype.report=function(vt){if(!fl.VERBOSE)return null;hl.out.println("Check "+vt+": "+(this._isValid?"passed":"FAILED"))},fl.prototype.getErrorMessage=function(){return this._errorMsg},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.isValidMsg=function(vt,_t,xt){var Tt=new fl(vt,_t,xt);return Tt.isValid()?null:Tt.getErrorMessage()},fl.isValid=function(vt,_t,xt){return!!new fl(vt,_t,xt).isValid()},F0.VERBOSE.get=function(){return!1},F0.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(fl,F0);var xu=function(){this._pts=null,this._data=null;var vt=arguments[0],_t=arguments[1];this._pts=vt,this._data=_t};xu.prototype.getCoordinates=function(){return this._pts},xu.prototype.size=function(){return this._pts.length},xu.prototype.getCoordinate=function(vt){return this._pts[vt]},xu.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},xu.prototype.getSegmentOctant=function(vt){return vt===this._pts.length-1?-1:Qc.octant(this.getCoordinate(vt),this.getCoordinate(vt+1))},xu.prototype.setData=function(vt){this._data=vt},xu.prototype.getData=function(){return this._data},xu.prototype.toString=function(){return Uc.toLineString(new wa(this._pts))},xu.prototype.interfaces_=function(){return[Ra]},xu.prototype.getClass=function(){return xu};var al=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Oi,this._intersectionCount=0,this._keepIntersections=!0;var vt=arguments[0];this._li=vt,this._interiorIntersection=null};al.prototype.getInteriorIntersection=function(){return this._interiorIntersection},al.prototype.setCheckEndSegmentsOnly=function(vt){this._isCheckEndSegmentsOnly=vt},al.prototype.getIntersectionSegments=function(){return this._intSegments},al.prototype.count=function(){return this._intersectionCount},al.prototype.getIntersections=function(){return this._intersections},al.prototype.setFindAllIntersections=function(vt){this._findAllIntersections=vt},al.prototype.setKeepIntersections=function(vt){this._keepIntersections=vt},al.prototype.processIntersections=function(vt,_t,xt,Tt){if(!this._findAllIntersections&&this.hasIntersection()||vt===xt&&_t===Tt||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(vt,_t)||this.isEndSegment(xt,Tt)))return null;var At=vt.getCoordinates()[_t],Pt=vt.getCoordinates()[_t+1],Nt=xt.getCoordinates()[Tt],Vt=xt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Pt,Nt,Vt),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=At,this._intSegments[1]=Pt,this._intSegments[2]=Nt,this._intSegments[3]=Vt,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},al.prototype.isEndSegment=function(vt,_t){return _t===0||_t>=vt.size()-2},al.prototype.hasIntersection=function(){return this._interiorIntersection!==null},al.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},al.prototype.interfaces_=function(){return[Sd]},al.prototype.getClass=function(){return al},al.createAllIntersectionsFinder=function(vt){var _t=new al(vt);return _t.setFindAllIntersections(!0),_t},al.createAnyIntersectionFinder=function(vt){return new al(vt)},al.createIntersectionCounter=function(vt){var _t=new al(vt);return _t.setFindAllIntersections(!0),_t.setKeepIntersections(!1),_t};var Oc=function(){this._li=new Bh,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var vt=arguments[0];this._segStrings=vt};Oc.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},Oc.prototype.getIntersections=function(){return this._segInt.getIntersections()},Oc.prototype.isValid=function(){return this.execute(),this._isValid},Oc.prototype.setFindAllIntersections=function(vt){this._findAllIntersections=vt},Oc.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new al(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var vt=new D0;if(vt.setSegmentIntersector(this._segInt),vt.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Oc.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new gh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Oc.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var vt=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Uc.toLineString(vt[0],vt[1])+" and "+Uc.toLineString(vt[2],vt[3])},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc},Oc.computeIntersections=function(vt){var _t=new Oc(vt);return _t.setFindAllIntersections(!0),_t.isValid(),_t.getIntersections()};var Td=function vt(){this._nv=null;var _t=arguments[0];this._nv=new Oc(vt.toSegmentStrings(_t))};Td.prototype.checkValid=function(){this._nv.checkValid()},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.toSegmentStrings=function(vt){for(var _t=new Oi,xt=vt.iterator();xt.hasNext();){var Tt=xt.next();_t.add(new xu(Tt.getCoordinates(),Tt))}return _t},Td.checkValid=function(vt){new Td(vt).checkValid()};var df=function(vt){this._mapOp=vt};df.prototype.map=function(vt){for(var _t=new Oi,xt=0;xt<vt.getNumGeometries();xt++){var Tt=this._mapOp.map(vt.getGeometryN(xt));Tt.isEmpty()||_t.add(Tt)}return vt.getFactory().createGeometryCollection(Yo.toGeometryArray(_t))},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.map=function(vt,_t){return new df(_t).map(vt)};var wu=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Oi,this._resultLineList=new Oi;var vt=arguments[0],_t=arguments[1],xt=arguments[2];this._op=vt,this._geometryFactory=_t,this._ptLocator=xt};wu.prototype.collectLines=function(vt){for(var _t=this,xt=this._op.getGraph().getEdgeEnds().iterator();xt.hasNext();){var Tt=xt.next();_t.collectLineEdge(Tt,vt,_t._lineEdgesList),_t.collectBoundaryTouchEdge(Tt,vt,_t._lineEdgesList)}},wu.prototype.labelIsolatedLine=function(vt,_t){var xt=this._ptLocator.locate(vt.getCoordinate(),this._op.getArgGeometry(_t));vt.getLabel().setLocation(_t,xt)},wu.prototype.build=function(vt){return this.findCoveredLineEdges(),this.collectLines(vt),this.buildLines(vt),this._resultLineList},wu.prototype.collectLineEdge=function(vt,_t,xt){var Tt=vt.getLabel(),At=vt.getEdge();vt.isLineEdge()&&(vt.isVisited()||!Mo.isResultOfOp(Tt,_t)||At.isCovered()||(xt.add(At),vt.setVisitedEdge(!0)))},wu.prototype.findCoveredLineEdges=function(){for(var vt=this._op.getGraph().getNodes().iterator();vt.hasNext();)vt.next().getEdges().findCoveredLineEdges();for(var _t=this._op.getGraph().getEdgeEnds().iterator();_t.hasNext();){var xt=_t.next(),Tt=xt.getEdge();if(xt.isLineEdge()&&!Tt.isCoveredSet()){var At=this._op.isCoveredByA(xt.getCoordinate());Tt.setCovered(At)}}},wu.prototype.labelIsolatedLines=function(vt){for(var _t=vt.iterator();_t.hasNext();){var xt=_t.next(),Tt=xt.getLabel();xt.isIsolated()&&(Tt.isNull(0)?this.labelIsolatedLine(xt,0):this.labelIsolatedLine(xt,1))}},wu.prototype.buildLines=function(vt){for(var _t=this._lineEdgesList.iterator();_t.hasNext();){var xt=_t.next(),Tt=this._geometryFactory.createLineString(xt.getCoordinates());this._resultLineList.add(Tt),xt.setInResult(!0)}},wu.prototype.collectBoundaryTouchEdge=function(vt,_t,xt){var Tt=vt.getLabel();return vt.isLineEdge()||vt.isVisited()||vt.isInteriorAreaEdge()||vt.getEdge().isInResult()?null:($o.isTrue(!(vt.isInResult()||vt.getSym().isInResult())||!vt.getEdge().isInResult()),void(Mo.isResultOfOp(Tt,_t)&&_t===Mo.INTERSECTION&&(xt.add(vt.getEdge()),vt.setVisitedEdge(!0))))},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu};var ff=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Oi;var vt=arguments[0],_t=arguments[1];this._op=vt,this._geometryFactory=_t};ff.prototype.filterCoveredNodeToPoint=function(vt){var _t=vt.getCoordinate();if(!this._op.isCoveredByLA(_t)){var xt=this._geometryFactory.createPoint(_t);this._resultPointList.add(xt)}},ff.prototype.extractNonCoveredResultNodes=function(vt){for(var _t=this._op.getGraph().getNodes().iterator();_t.hasNext();){var xt=_t.next();if(!xt.isInResult()&&!xt.isIncidentEdgeInResult()&&(xt.getEdges().getDegree()===0||vt===Mo.INTERSECTION)){var Tt=xt.getLabel();Mo.isResultOfOp(Tt,vt)&&this.filterCoveredNodeToPoint(xt)}}},ff.prototype.build=function(vt){return this.extractNonCoveredResultNodes(vt),this._resultPointList},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var Ml=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ml.prototype.transformPoint=function(vt,_t){return this._factory.createPoint(this.transformCoordinates(vt.getCoordinateSequence(),vt))},Ml.prototype.transformPolygon=function(vt,_t){var xt=!0,Tt=this.transformLinearRing(vt.getExteriorRing(),vt);Tt!==null&&Tt instanceof Vu&&!Tt.isEmpty()||(xt=!1);for(var At=new Oi,Pt=0;Pt<vt.getNumInteriorRing();Pt++){var Nt=this.transformLinearRing(vt.getInteriorRingN(Pt),vt);Nt===null||Nt.isEmpty()||(Nt instanceof Vu||(xt=!1),At.add(Nt))}if(xt)return this._factory.createPolygon(Tt,At.toArray([]));var Vt=new Oi;return Tt!==null&&Vt.add(Tt),Vt.addAll(At),this._factory.buildGeometry(Vt)},Ml.prototype.createCoordinateSequence=function(vt){return this._factory.getCoordinateSequenceFactory().create(vt)},Ml.prototype.getInputGeometry=function(){return this._inputGeom},Ml.prototype.transformMultiLineString=function(vt,_t){for(var xt=new Oi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformLineString(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||xt.add(At))}return this._factory.buildGeometry(xt)},Ml.prototype.transformCoordinates=function(vt,_t){return this.copy(vt)},Ml.prototype.transformLineString=function(vt,_t){return this._factory.createLineString(this.transformCoordinates(vt.getCoordinateSequence(),vt))},Ml.prototype.transformMultiPoint=function(vt,_t){for(var xt=new Oi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformPoint(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||xt.add(At))}return this._factory.buildGeometry(xt)},Ml.prototype.transformMultiPolygon=function(vt,_t){for(var xt=new Oi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformPolygon(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||xt.add(At))}return this._factory.buildGeometry(xt)},Ml.prototype.copy=function(vt){return vt.copy()},Ml.prototype.transformGeometryCollection=function(vt,_t){for(var xt=new Oi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transform(vt.getGeometryN(Tt));At!==null&&(this._pruneEmptyGeometry&&At.isEmpty()||xt.add(At))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Yo.toGeometryArray(xt)):this._factory.buildGeometry(xt)},Ml.prototype.transform=function(vt){if(this._inputGeom=vt,this._factory=vt.getFactory(),vt instanceof Jl)return this.transformPoint(vt,null);if(vt instanceof Qf)return this.transformMultiPoint(vt,null);if(vt instanceof Vu)return this.transformLinearRing(vt,null);if(vt instanceof sa)return this.transformLineString(vt,null);if(vt instanceof Fh)return this.transformMultiLineString(vt,null);if(vt instanceof $a)return this.transformPolygon(vt,null);if(vt instanceof ju)return this.transformMultiPolygon(vt,null);if(vt instanceof Il)return this.transformGeometryCollection(vt,null);throw new oa("Unknown Geometry subtype: "+vt.getClass().getName())},Ml.prototype.transformLinearRing=function(vt,_t){var xt=this.transformCoordinates(vt.getCoordinateSequence(),vt);if(xt===null)return this._factory.createLinearRing(null);var Tt=xt.size();return Tt>0&&Tt<4&&!this._preserveType?this._factory.createLineString(xt):this._factory.createLinearRing(xt)},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml};var Ps=function vt(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ji,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof sa&&typeof arguments[1]=="number"){var _t=arguments[0],xt=arguments[1];vt.call(this,_t.getCoordinates(),xt)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var Tt=arguments[0],At=arguments[1];this._srcPts=Tt,this._isClosed=vt.isClosed(Tt),this._snapTolerance=At}};Ps.prototype.snapVertices=function(vt,_t){for(var xt=this._isClosed?vt.size()-1:vt.size(),Tt=0;Tt<xt;Tt++){var At=vt.get(Tt),Pt=this.findSnapForVertex(At,_t);Pt!==null&&(vt.set(Tt,new jr(Pt)),Tt===0&&this._isClosed&&vt.set(vt.size()-1,new jr(Pt)))}},Ps.prototype.findSnapForVertex=function(vt,_t){for(var xt=0;xt<_t.length;xt++){if(vt.equals2D(_t[xt]))return null;if(vt.distance(_t[xt])<this._snapTolerance)return _t[xt]}return null},Ps.prototype.snapTo=function(vt){var _t=new Qp(this._srcPts);return this.snapVertices(_t,vt),this.snapSegments(_t,vt),_t.toCoordinateArray()},Ps.prototype.snapSegments=function(vt,_t){if(_t.length===0)return null;var xt=_t.length;_t[0].equals2D(_t[_t.length-1])&&(xt=_t.length-1);for(var Tt=0;Tt<xt;Tt++){var At=_t[Tt],Pt=this.findSegmentIndexToSnap(At,vt);Pt>=0&&vt.add(Pt+1,new jr(At),!1)}},Ps.prototype.findSegmentIndexToSnap=function(vt,_t){for(var xt=this,Tt=ko.MAX_VALUE,At=-1,Pt=0;Pt<_t.size()-1;Pt++){if(xt._seg.p0=_t.get(Pt),xt._seg.p1=_t.get(Pt+1),xt._seg.p0.equals2D(vt)||xt._seg.p1.equals2D(vt)){if(xt._allowSnappingToSourceVertices)continue;return-1}var Nt=xt._seg.distance(vt);Nt<xt._snapTolerance&&Nt<Tt&&(Tt=Nt,At=Pt)}return At},Ps.prototype.setAllowSnappingToSourceVertices=function(vt){this._allowSnappingToSourceVertices=vt},Ps.prototype.interfaces_=function(){return[]},Ps.prototype.getClass=function(){return Ps},Ps.isClosed=function(vt){return!(vt.length<=1)&&vt[0].equals2D(vt[vt.length-1])};var rs=function(vt){this._srcGeom=vt||null},ym={SNAP_PRECISION_FACTOR:{configurable:!0}};rs.prototype.snapTo=function(vt,_t){var xt=this.extractTargetCoordinates(vt);return new vm(_t,xt).transform(this._srcGeom)},rs.prototype.snapToSelf=function(vt,_t){var xt=this.extractTargetCoordinates(this._srcGeom),Tt=new vm(vt,xt,!0).transform(this._srcGeom),At=Tt;return _t&&_o(At,zh)&&(At=Tt.buffer(0)),At},rs.prototype.computeSnapTolerance=function(vt){return this.computeMinimumSegmentLength(vt)/10},rs.prototype.extractTargetCoordinates=function(vt){for(var _t=new Wc,xt=vt.getCoordinates(),Tt=0;Tt<xt.length;Tt++)_t.add(xt[Tt]);return _t.toArray(new Array(0).fill(null))},rs.prototype.computeMinimumSegmentLength=function(vt){for(var _t=ko.MAX_VALUE,xt=0;xt<vt.length-1;xt++){var Tt=vt[xt].distance(vt[xt+1]);Tt<_t&&(_t=Tt)}return _t},rs.prototype.interfaces_=function(){return[]},rs.prototype.getClass=function(){return rs},rs.snap=function(vt,_t,xt){var Tt=new Array(2).fill(null),At=new rs(vt);Tt[0]=At.snapTo(_t,xt);var Pt=new rs(_t);return Tt[1]=Pt.snapTo(Tt[0],xt),Tt},rs.computeOverlaySnapTolerance=function(){if(arguments.length===1){var vt=arguments[0],_t=rs.computeSizeBasedSnapTolerance(vt),xt=vt.getPrecisionModel();if(xt.getType()===$s.FIXED){var Tt=1/xt.getScale()*2/1.415;Tt>_t&&(_t=Tt)}return _t}if(arguments.length===2){var At=arguments[0],Pt=arguments[1];return Math.min(rs.computeOverlaySnapTolerance(At),rs.computeOverlaySnapTolerance(Pt))}},rs.computeSizeBasedSnapTolerance=function(vt){var _t=vt.getEnvelopeInternal();return Math.min(_t.getHeight(),_t.getWidth())*rs.SNAP_PRECISION_FACTOR},rs.snapToSelf=function(vt,_t,xt){return new rs(vt).snapToSelf(_t,xt)},ym.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(rs,ym);var vm=function(vt){function _t(xt,Tt,At){vt.call(this),this._snapTolerance=xt||null,this._snapPts=Tt||null,this._isSelfSnap=At!==void 0&&At}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.snapLine=function(xt,Tt){var At=new Ps(xt,this._snapTolerance);return At.setAllowSnappingToSourceVertices(this._isSelfSnap),At.snapTo(Tt)},_t.prototype.transformCoordinates=function(xt,Tt){var At=xt.toCoordinateArray(),Pt=this.snapLine(At,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(Pt)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ml),ll=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ll.prototype.getCommon=function(){return ko.longBitsToDouble(this._commonBits)},ll.prototype.add=function(vt){var _t=ko.doubleToLongBits(vt);return this._isFirst?(this._commonBits=_t,this._commonSignExp=ll.signExpBits(this._commonBits),this._isFirst=!1,null):ll.signExpBits(_t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ll.numCommonMostSigMantissaBits(this._commonBits,_t),void(this._commonBits=ll.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ll.prototype.toString=function(){if(arguments.length===1){var vt=arguments[0],_t=ko.longBitsToDouble(vt),xt=ko.toBinaryString(vt),Tt="0000000000000000000000000000000000000000000000000000000000000000"+xt,At=Tt.substring(Tt.length-64),Pt=At.substring(0,1)+"  "+At.substring(1,12)+"(exp) "+At.substring(12)+" [ "+_t+" ]";return Pt}},ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll},ll.getBit=function(vt,_t){return(vt&1<<_t)!=0?1:0},ll.signExpBits=function(vt){return vt>>52},ll.zeroLowerBits=function(vt,_t){return vt&~((1<<_t)-1)},ll.numCommonMostSigMantissaBits=function(vt,_t){for(var xt=0,Tt=52;Tt>=0;Tt--){if(ll.getBit(vt,Tt)!==ll.getBit(_t,Tt))return xt;xt++}return 52};var Eu=function(){this._commonCoord=null,this._ccFilter=new vh},sp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Eu.prototype.addCommonBits=function(vt){var _t=new Su(this._commonCoord);vt.apply(_t),vt.geometryChanged()},Eu.prototype.removeCommonBits=function(vt){if(this._commonCoord.x===0&&this._commonCoord.y===0)return vt;var _t=new jr(this._commonCoord);_t.x=-_t.x,_t.y=-_t.y;var xt=new Su(_t);return vt.apply(xt),vt.geometryChanged(),vt},Eu.prototype.getCommonCoordinate=function(){return this._commonCoord},Eu.prototype.add=function(vt){vt.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},sp.CommonCoordinateFilter.get=function(){return vh},sp.Translater.get=function(){return Su},Object.defineProperties(Eu,sp);var vh=function(){this._commonBitsX=new ll,this._commonBitsY=new ll};vh.prototype.filter=function(vt){this._commonBitsX.add(vt.x),this._commonBitsY.add(vt.y)},vh.prototype.getCommonCoordinate=function(){return new jr(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},vh.prototype.interfaces_=function(){return[Fu]},vh.prototype.getClass=function(){return vh};var Su=function(){this.trans=null;var vt=arguments[0];this.trans=vt};Su.prototype.filter=function(vt,_t){var xt=vt.getOrdinate(_t,0)+this.trans.x,Tt=vt.getOrdinate(_t,1)+this.trans.y;vt.setOrdinate(_t,0,xt),vt.setOrdinate(_t,1,Tt)},Su.prototype.isDone=function(){return!1},Su.prototype.isGeometryChanged=function(){return!0},Su.prototype.interfaces_=function(){return[qc]},Su.prototype.getClass=function(){return Su};var Da=function(vt,_t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=vt,this._geom[1]=_t,this.computeSnapTolerance()};Da.prototype.selfSnap=function(vt){return new rs(vt).snapTo(vt,this._snapTolerance)},Da.prototype.removeCommonBits=function(vt){this._cbr=new Eu,this._cbr.add(vt[0]),this._cbr.add(vt[1]);var _t=new Array(2).fill(null);return _t[0]=this._cbr.removeCommonBits(vt[0].copy()),_t[1]=this._cbr.removeCommonBits(vt[1].copy()),_t},Da.prototype.prepareResult=function(vt){return this._cbr.addCommonBits(vt),vt},Da.prototype.getResultGeometry=function(vt){var _t=this.snap(this._geom),xt=Mo.overlayOp(_t[0],_t[1],vt);return this.prepareResult(xt)},Da.prototype.checkValid=function(vt){vt.isValid()||hl.out.println("Snapped geometry is invalid")},Da.prototype.computeSnapTolerance=function(){this._snapTolerance=rs.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Da.prototype.snap=function(vt){var _t=this.removeCommonBits(vt);return rs.snap(_t[0],_t[1],this._snapTolerance)},Da.prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da},Da.overlayOp=function(vt,_t,xt){return new Da(vt,_t).getResultGeometry(xt)},Da.union=function(vt,_t){return Da.overlayOp(vt,_t,Mo.UNION)},Da.intersection=function(vt,_t){return Da.overlayOp(vt,_t,Mo.INTERSECTION)},Da.symDifference=function(vt,_t){return Da.overlayOp(vt,_t,Mo.SYMDIFFERENCE)},Da.difference=function(vt,_t){return Da.overlayOp(vt,_t,Mo.DIFFERENCE)};var cl=function(vt,_t){this._geom=new Array(2).fill(null),this._geom[0]=vt,this._geom[1]=_t};cl.prototype.getResultGeometry=function(vt){var _t=null,xt=!1,Tt=null;try{_t=Mo.overlayOp(this._geom[0],this._geom[1],vt),xt=!0}catch(At){if(!(At instanceof dh))throw At;Tt=At}if(!xt)try{_t=Da.overlayOp(this._geom[0],this._geom[1],vt)}catch(At){throw At instanceof dh?Tt:At}return _t},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},cl.overlayOp=function(vt,_t,xt){return new cl(vt,_t).getResultGeometry(xt)},cl.union=function(vt,_t){return cl.overlayOp(vt,_t,Mo.UNION)},cl.intersection=function(vt,_t){return cl.overlayOp(vt,_t,Mo.INTERSECTION)},cl.symDifference=function(vt,_t){return cl.overlayOp(vt,_t,Mo.SYMDIFFERENCE)},cl.difference=function(vt,_t){return cl.overlayOp(vt,_t,Mo.DIFFERENCE)};var kd=function(){this.mce=null,this.chainIndex=null;var vt=arguments[0],_t=arguments[1];this.mce=vt,this.chainIndex=_t};kd.prototype.computeIntersections=function(vt,_t){this.mce.computeIntersectsForChain(this.chainIndex,vt.mce,vt.chainIndex,_t)},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd};var Sl=function vt(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var _t=arguments[0],xt=arguments[1];this._eventType=vt.DELETE,this._xValue=_t,this._insertEvent=xt}else if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2];this._eventType=vt.INSERT,this._label=Tt,this._xValue=At,this._obj=Pt}},z0={INSERT:{configurable:!0},DELETE:{configurable:!0}};Sl.prototype.isDelete=function(){return this._eventType===Sl.DELETE},Sl.prototype.setDeleteEventIndex=function(vt){this._deleteEventIndex=vt},Sl.prototype.getObject=function(){return this._obj},Sl.prototype.compareTo=function(vt){var _t=vt;return this._xValue<_t._xValue?-1:this._xValue>_t._xValue?1:this._eventType<_t._eventType?-1:this._eventType>_t._eventType?1:0},Sl.prototype.getInsertEvent=function(){return this._insertEvent},Sl.prototype.isInsert=function(){return this._eventType===Sl.INSERT},Sl.prototype.isSameLabel=function(vt){return this._label!==null&&this._label===vt._label},Sl.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Sl.prototype.interfaces_=function(){return[Sc]},Sl.prototype.getClass=function(){return Sl},z0.INSERT.get=function(){return 1},z0.DELETE.get=function(){return 2},Object.defineProperties(Sl,z0);var pf=function(){};pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var Ba=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var vt=arguments[0],_t=arguments[1],xt=arguments[2];this._li=vt,this._includeProper=_t,this._recordIsolated=xt};Ba.prototype.isTrivialIntersection=function(vt,_t,xt,Tt){if(vt===xt&&this._li.getIntersectionNum()===1){if(Ba.isAdjacentSegments(_t,Tt))return!0;if(vt.isClosed()){var At=vt.getNumPoints()-1;if(_t===0&&Tt===At||Tt===0&&_t===At)return!0}}return!1},Ba.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ba.prototype.setIsDoneIfProperInt=function(vt){this._isDoneWhenProperInt=vt},Ba.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ba.prototype.isBoundaryPointInternal=function(vt,_t){for(var xt=_t.iterator();xt.hasNext();){var Tt=xt.next().getCoordinate();if(vt.isIntersection(Tt))return!0}return!1},Ba.prototype.hasProperIntersection=function(){return this._hasProper},Ba.prototype.hasIntersection=function(){return this._hasIntersection},Ba.prototype.isDone=function(){return this._isDone},Ba.prototype.isBoundaryPoint=function(vt,_t){return _t!==null&&(!!this.isBoundaryPointInternal(vt,_t[0])||!!this.isBoundaryPointInternal(vt,_t[1]))},Ba.prototype.setBoundaryNodes=function(vt,_t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=vt,this._bdyNodes[1]=_t},Ba.prototype.addIntersections=function(vt,_t,xt,Tt){if(vt===xt&&_t===Tt)return null;this.numTests++;var At=vt.getCoordinates()[_t],Pt=vt.getCoordinates()[_t+1],Nt=xt.getCoordinates()[Tt],Vt=xt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Pt,Nt,Vt),this._li.hasIntersection()&&(this._recordIsolated&&(vt.setIsolated(!1),xt.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(vt,_t,xt,Tt)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(vt.addIntersections(this._li,_t,0),xt.addIntersections(this._li,Tt,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba},Ba.isAdjacentSegments=function(vt,_t){return Math.abs(vt-_t)===1};var c_=function(vt){function _t(){vt.call(this),this.events=new Oi,this.nOverlaps=null}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.prepareEvents=function(){Jc.sort(this.events);for(var xt=0;xt<this.events.size();xt++){var Tt=this.events.get(xt);Tt.isDelete()&&Tt.getInsertEvent().setDeleteEventIndex(xt)}},_t.prototype.computeIntersections=function(){var xt=this;if(arguments.length===1){var Tt=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var At=0;At<this.events.size();At++){var Pt=xt.events.get(At);if(Pt.isInsert()&&xt.processOverlaps(At,Pt.getDeleteEventIndex(),Pt,Tt),Tt.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Ba&&_o(arguments[0],Gc)&&_o(arguments[1],Gc)){var Nt=arguments[0],Vt=arguments[1],Gt=arguments[2];this.addEdges(Nt,Nt),this.addEdges(Vt,Vt),this.computeIntersections(Gt)}else if(typeof arguments[2]=="boolean"&&_o(arguments[0],Gc)&&arguments[1]instanceof Ba){var qt=arguments[0],en=arguments[1],Xt=arguments[2];Xt?this.addEdges(qt,null):this.addEdges(qt),this.computeIntersections(en)}}},_t.prototype.addEdge=function(xt,Tt){for(var At=xt.getMonotoneChainEdge(),Pt=At.getStartIndexes(),Nt=0;Nt<Pt.length-1;Nt++){var Vt=new kd(At,Nt),Gt=new Sl(Tt,At.getMinX(Nt),Vt);this.events.add(Gt),this.events.add(new Sl(At.getMaxX(Nt),Gt))}},_t.prototype.processOverlaps=function(xt,Tt,At,Pt){for(var Nt=At.getObject(),Vt=xt;Vt<Tt;Vt++){var Gt=this.events.get(Vt);if(Gt.isInsert()){var qt=Gt.getObject();At.isSameLabel(Gt)||(Nt.computeIntersections(qt,Pt),this.nOverlaps++)}}},_t.prototype.addEdges=function(){var xt=this;if(arguments.length===1)for(var Tt=arguments[0],At=Tt.iterator();At.hasNext();){var Pt=At.next();xt.addEdge(Pt,Pt)}else if(arguments.length===2)for(var Nt=arguments[0],Vt=arguments[1],Gt=Nt.iterator();Gt.hasNext();){var qt=Gt.next();xt.addEdge(qt,Vt)}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(pf),Zu=function(){this._min=ko.POSITIVE_INFINITY,this._max=ko.NEGATIVE_INFINITY},By={NodeComparator:{configurable:!0}};Zu.prototype.getMin=function(){return this._min},Zu.prototype.intersects=function(vt,_t){return!(this._min>_t||this._max<vt)},Zu.prototype.getMax=function(){return this._max},Zu.prototype.toString=function(){return Uc.toLineString(new jr(this._min,0),new jr(this._max,0))},Zu.prototype.interfaces_=function(){return[]},Zu.prototype.getClass=function(){return Zu},By.NodeComparator.get=function(){return dg},Object.defineProperties(Zu,By);var dg=function(){};dg.prototype.compare=function(vt,_t){var xt=vt,Tt=_t,At=(xt._min+xt._max)/2,Pt=(Tt._min+Tt._max)/2;return At<Pt?-1:At>Pt?1:0},dg.prototype.interfaces_=function(){return[jf]},dg.prototype.getClass=function(){return dg};var nu=function(vt){function _t(){vt.call(this),this._item=null;var xt=arguments[0],Tt=arguments[1],At=arguments[2];this._min=xt,this._max=Tt,this._item=At}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.query=function(xt,Tt,At){if(!this.intersects(xt,Tt))return null;At.visitItem(this._item)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Zu),Fy=function(vt){function _t(){vt.call(this),this._node1=null,this._node2=null;var xt=arguments[0],Tt=arguments[1];this._node1=xt,this._node2=Tt,this.buildExtent(this._node1,this._node2)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.buildExtent=function(xt,Tt){this._min=Math.min(xt._min,Tt._min),this._max=Math.max(xt._max,Tt._max)},_t.prototype.query=function(xt,Tt,At){if(!this.intersects(xt,Tt))return null;this._node1!==null&&this._node1.query(xt,Tt,At),this._node2!==null&&this._node2.query(xt,Tt,At)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Zu),Cu=function(){this._leaves=new Oi,this._root=null,this._level=0};Cu.prototype.buildTree=function(){Jc.sort(this._leaves,new Zu.NodeComparator);for(var vt=this._leaves,_t=null,xt=new Oi;;){if(this.buildLevel(vt,xt),xt.size()===1)return xt.get(0);_t=vt,vt=xt,xt=_t}},Cu.prototype.insert=function(vt,_t,xt){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new nu(vt,_t,xt))},Cu.prototype.query=function(vt,_t,xt){this.init(),this._root.query(vt,_t,xt)},Cu.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},Cu.prototype.printNode=function(vt){hl.out.println(Uc.toLineString(new jr(vt._min,this._level),new jr(vt._max,this._level)))},Cu.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},Cu.prototype.buildLevel=function(vt,_t){this._level++,_t.clear();for(var xt=0;xt<vt.size();xt+=2){var Tt=vt.get(xt);if((xt+1<vt.size()?vt.get(xt):null)===null)_t.add(Tt);else{var At=new Fy(vt.get(xt),vt.get(xt+1));_t.add(At)}}},Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu};var ap=function(){this._items=new Oi};ap.prototype.visitItem=function(vt){this._items.add(vt)},ap.prototype.getItems=function(){return this._items},ap.prototype.interfaces_=function(){return[Hh]},ap.prototype.getClass=function(){return ap};var lp=function(){this._index=null;var vt=arguments[0];if(!_o(vt,zh))throw new oa("Argument must be Polygonal");this._index=new Yh(vt)},_m={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};lp.prototype.locate=function(vt){var _t=new fu(vt),xt=new cp(_t);return this._index.query(vt.y,vt.y,xt),_t.getLocation()},lp.prototype.interfaces_=function(){return[Bs]},lp.prototype.getClass=function(){return lp},_m.SegmentVisitor.get=function(){return cp},_m.IntervalIndexedGeometry.get=function(){return Yh},Object.defineProperties(lp,_m);var cp=function(){this._counter=null;var vt=arguments[0];this._counter=vt};cp.prototype.visitItem=function(vt){var _t=vt;this._counter.countSegment(_t.getCoordinate(0),_t.getCoordinate(1))},cp.prototype.interfaces_=function(){return[Hh]},cp.prototype.getClass=function(){return cp};var Yh=function(){this._index=new Cu;var vt=arguments[0];this.init(vt)};Yh.prototype.init=function(vt){for(var _t=dl.getLines(vt).iterator();_t.hasNext();){var xt=_t.next().getCoordinates();this.addLine(xt)}},Yh.prototype.addLine=function(vt){for(var _t=1;_t<vt.length;_t++){var xt=new Ji(vt[_t-1],vt[_t]),Tt=Math.min(xt.p0.y,xt.p1.y),At=Math.max(xt.p0.y,xt.p1.y);this._index.insert(Tt,At,xt)}},Yh.prototype.query=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],xt=new ap;return this._index.query(vt,_t,xt),xt.getItems()}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2];this._index.query(Tt,At,Pt)}},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var up=function(vt){function _t(){if(vt.call(this),this._parentGeom=null,this._lineEdgeMap=new Ay,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new gc,arguments.length===2){var xt=arguments[0],Tt=arguments[1],At=kc.OGC_SFS_BOUNDARY_RULE;this._argIndex=xt,this._parentGeom=Tt,this._boundaryNodeRule=At,Tt!==null&&this.add(Tt)}else if(arguments.length===3){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2];this._argIndex=Pt,this._parentGeom=Nt,this._boundaryNodeRule=Vt,Nt!==null&&this.add(Nt)}}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.insertBoundaryPoint=function(xt,Tt){var At=this._nodes.addNode(Tt).getLabel(),Pt=1;At.getLocation(xt,Ei.ON)===Kr.BOUNDARY&&Pt++;var Nt=_t.determineBoundary(this._boundaryNodeRule,Pt);At.setLocation(xt,Nt)},_t.prototype.computeSelfNodes=function(){if(arguments.length===2){var xt=arguments[0],Tt=arguments[1];return this.computeSelfNodes(xt,Tt,!1)}if(arguments.length===3){var At=arguments[0],Pt=arguments[1],Nt=arguments[2],Vt=new Ba(At,!0,!1);Vt.setIsDoneIfProperInt(Nt);var Gt=this.createEdgeSetIntersector(),qt=this._parentGeom instanceof Vu||this._parentGeom instanceof $a||this._parentGeom instanceof ju,en=Pt||!qt;return Gt.computeIntersections(this._edges,Vt,en),this.addSelfIntersectionNodes(this._argIndex),Vt}},_t.prototype.computeSplitEdges=function(xt){for(var Tt=this._edges.iterator();Tt.hasNext();)Tt.next().eiList.addSplitEdges(xt)},_t.prototype.computeEdgeIntersections=function(xt,Tt,At){var Pt=new Ba(Tt,At,!0);return Pt.setBoundaryNodes(this.getBoundaryNodes(),xt.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,xt._edges,Pt),Pt},_t.prototype.getGeometry=function(){return this._parentGeom},_t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},_t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},_t.prototype.addPoint=function(){if(arguments[0]instanceof Jl){var xt=arguments[0],Tt=xt.getCoordinate();this.insertPoint(this._argIndex,Tt,Kr.INTERIOR)}else if(arguments[0]instanceof jr){var At=arguments[0];this.insertPoint(this._argIndex,At,Kr.INTERIOR)}},_t.prototype.addPolygon=function(xt){this.addPolygonRing(xt.getExteriorRing(),Kr.EXTERIOR,Kr.INTERIOR);for(var Tt=0;Tt<xt.getNumInteriorRing();Tt++){var At=xt.getInteriorRingN(Tt);this.addPolygonRing(At,Kr.INTERIOR,Kr.EXTERIOR)}},_t.prototype.addEdge=function(xt){this.insertEdge(xt);var Tt=xt.getCoordinates();this.insertPoint(this._argIndex,Tt[0],Kr.BOUNDARY),this.insertPoint(this._argIndex,Tt[Tt.length-1],Kr.BOUNDARY)},_t.prototype.addLineString=function(xt){var Tt=qo.removeRepeatedPoints(xt.getCoordinates());if(Tt.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=Tt[0],null;var At=new ip(Tt,new zs(this._argIndex,Kr.INTERIOR));this._lineEdgeMap.put(xt,At),this.insertEdge(At),$o.isTrue(Tt.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,Tt[0]),this.insertBoundaryPoint(this._argIndex,Tt[Tt.length-1])},_t.prototype.getInvalidPoint=function(){return this._invalidPoint},_t.prototype.getBoundaryPoints=function(){for(var xt=this.getBoundaryNodes(),Tt=new Array(xt.size()).fill(null),At=0,Pt=xt.iterator();Pt.hasNext();){var Nt=Pt.next();Tt[At++]=Nt.getCoordinate().copy()}return Tt},_t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},_t.prototype.addSelfIntersectionNode=function(xt,Tt,At){if(this.isBoundaryNode(xt,Tt))return null;At===Kr.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(xt,Tt):this.insertPoint(xt,Tt,At)},_t.prototype.addPolygonRing=function(xt,Tt,At){if(xt.isEmpty())return null;var Pt=qo.removeRepeatedPoints(xt.getCoordinates());if(Pt.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=Pt[0],null;var Nt=Tt,Vt=At;Ni.isCCW(Pt)&&(Nt=At,Vt=Tt);var Gt=new ip(Pt,new zs(this._argIndex,Kr.BOUNDARY,Nt,Vt));this._lineEdgeMap.put(xt,Gt),this.insertEdge(Gt),this.insertPoint(this._argIndex,Pt[0],Kr.BOUNDARY)},_t.prototype.insertPoint=function(xt,Tt,At){var Pt=this._nodes.addNode(Tt),Nt=Pt.getLabel();Nt===null?Pt._label=new zs(xt,At):Nt.setLocation(xt,At)},_t.prototype.createEdgeSetIntersector=function(){return new c_},_t.prototype.addSelfIntersectionNodes=function(xt){for(var Tt=this._edges.iterator();Tt.hasNext();)for(var At=Tt.next(),Pt=At.getLabel().getLocation(xt),Nt=At.eiList.iterator();Nt.hasNext();){var Vt=Nt.next();this.addSelfIntersectionNode(xt,Vt.coord,Pt)}},_t.prototype.add=function(){if(arguments.length!==1)return vt.prototype.add.apply(this,arguments);var xt=arguments[0];if(xt.isEmpty())return null;if(xt instanceof ju&&(this._useBoundaryDeterminationRule=!1),xt instanceof $a)this.addPolygon(xt);else if(xt instanceof sa)this.addLineString(xt);else if(xt instanceof Jl)this.addPoint(xt);else if(xt instanceof Qf)this.addCollection(xt);else if(xt instanceof Fh)this.addCollection(xt);else if(xt instanceof ju)this.addCollection(xt);else{if(!(xt instanceof Il))throw new Error(xt.getClass().getName());this.addCollection(xt)}},_t.prototype.addCollection=function(xt){for(var Tt=0;Tt<xt.getNumGeometries();Tt++){var At=xt.getGeometryN(Tt);this.add(At)}},_t.prototype.locate=function(xt){return _o(this._parentGeom,zh)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new lp(this._parentGeom)),this._areaPtLocator.locate(xt)):this._ptLocator.locate(xt,this._parentGeom)},_t.prototype.findEdge=function(){if(arguments.length===1){var xt=arguments[0];return this._lineEdgeMap.get(xt)}return vt.prototype.findEdge.apply(this,arguments)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.determineBoundary=function(xt,Tt){return xt.isInBoundary(Tt)?Kr.BOUNDARY:Kr.INTERIOR},_t}(ha),hp=function(){if(this._li=new Bh,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var vt=arguments[0];this.setComputationPrecision(vt.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new up(0,vt)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1],Tt=kc.OGC_SFS_BOUNDARY_RULE;_t.getPrecisionModel().compareTo(xt.getPrecisionModel())>=0?this.setComputationPrecision(_t.getPrecisionModel()):this.setComputationPrecision(xt.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new up(0,_t,Tt),this._arg[1]=new up(1,xt,Tt)}else if(arguments.length===3){var At=arguments[0],Pt=arguments[1],Nt=arguments[2];At.getPrecisionModel().compareTo(Pt.getPrecisionModel())>=0?this.setComputationPrecision(At.getPrecisionModel()):this.setComputationPrecision(Pt.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new up(0,At,Nt),this._arg[1]=new up(1,Pt,Nt)}};hp.prototype.getArgGeometry=function(vt){return this._arg[vt].getGeometry()},hp.prototype.setComputationPrecision=function(vt){this._resultPrecisionModel=vt,this._li.setPrecisionModel(this._resultPrecisionModel)},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp};var Ad=function(){};Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad},Ad.map=function(){if(arguments[0]instanceof po&&_o(arguments[1],Ad.MapOp)){for(var vt=arguments[0],_t=arguments[1],xt=new Oi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=_t.map(vt.getGeometryN(Tt));At!==null&&xt.add(At)}return vt.getFactory().buildGeometry(xt)}if(_o(arguments[0],Ma)&&_o(arguments[1],Ad.MapOp)){for(var Pt=arguments[0],Nt=arguments[1],Vt=new Oi,Gt=Pt.iterator();Gt.hasNext();){var qt=Gt.next(),en=Nt.map(qt);en!==null&&Vt.add(en)}return Vt}},Ad.MapOp=function(){};var Mo=function(vt){function _t(){var xt=arguments[0],Tt=arguments[1];vt.call(this,xt,Tt),this._ptLocator=new gc,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new tc,this._resultPolyList=new Oi,this._resultLineList=new Oi,this._resultPointList=new Oi,this._graph=new ha(new Ny),this._geomFact=xt.getFactory()}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.insertUniqueEdge=function(xt){var Tt=this._edgeList.findEqualEdge(xt);if(Tt!==null){var At=Tt.getLabel(),Pt=xt.getLabel();Tt.isPointwiseEqual(xt)||(Pt=new zs(xt.getLabel())).flip();var Nt=Tt.getDepth();Nt.isNull()&&Nt.add(At),Nt.add(Pt),At.merge(Pt)}else this._edgeList.add(xt)},_t.prototype.getGraph=function(){return this._graph},_t.prototype.cancelDuplicateResultEdges=function(){for(var xt=this._graph.getEdgeEnds().iterator();xt.hasNext();){var Tt=xt.next(),At=Tt.getSym();Tt.isInResult()&&At.isInResult()&&(Tt.setInResult(!1),At.setInResult(!1))}},_t.prototype.isCoveredByLA=function(xt){return!!this.isCovered(xt,this._resultLineList)||!!this.isCovered(xt,this._resultPolyList)},_t.prototype.computeGeometry=function(xt,Tt,At,Pt){var Nt=new Oi;return Nt.addAll(xt),Nt.addAll(Tt),Nt.addAll(At),Nt.isEmpty()?_t.createEmptyResult(Pt,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(Nt)},_t.prototype.mergeSymLabels=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();)xt.next().getEdges().mergeSymLabels()},_t.prototype.isCovered=function(xt,Tt){for(var At=Tt.iterator();At.hasNext();){var Pt=At.next();if(this._ptLocator.locate(xt,Pt)!==Kr.EXTERIOR)return!0}return!1},_t.prototype.replaceCollapsedEdges=function(){for(var xt=new Oi,Tt=this._edgeList.iterator();Tt.hasNext();){var At=Tt.next();At.isCollapsed()&&(Tt.remove(),xt.add(At.getCollapsedEdge()))}this._edgeList.addAll(xt)},_t.prototype.updateNodeLabelling=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();){var Tt=xt.next(),At=Tt.getEdges().getLabel();Tt.getLabel().merge(At)}},_t.prototype.getResultGeometry=function(xt){return this.computeOverlay(xt),this._resultGeom},_t.prototype.insertUniqueEdges=function(xt){for(var Tt=xt.iterator();Tt.hasNext();){var At=Tt.next();this.insertUniqueEdge(At)}},_t.prototype.computeOverlay=function(xt){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var Tt=new Oi;this._arg[0].computeSplitEdges(Tt),this._arg[1].computeSplitEdges(Tt),this.insertUniqueEdges(Tt),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Td.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(xt),this.cancelDuplicateResultEdges();var At=new Hl(this._geomFact);At.add(this._graph),this._resultPolyList=At.getPolygons();var Pt=new wu(this,this._geomFact,this._ptLocator);this._resultLineList=Pt.build(xt);var Nt=new ff(this,this._geomFact,this._ptLocator);this._resultPointList=Nt.build(xt),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,xt)},_t.prototype.labelIncompleteNode=function(xt,Tt){var At=this._ptLocator.locate(xt.getCoordinate(),this._arg[Tt].getGeometry());xt.getLabel().setLocation(Tt,At)},_t.prototype.copyPoints=function(xt){for(var Tt=this._arg[xt].getNodeIterator();Tt.hasNext();){var At=Tt.next();this._graph.addNode(At.getCoordinate()).setLabel(xt,At.getLabel().getLocation(xt))}},_t.prototype.findResultAreaEdges=function(xt){for(var Tt=this._graph.getEdgeEnds().iterator();Tt.hasNext();){var At=Tt.next(),Pt=At.getLabel();Pt.isArea()&&!At.isInteriorAreaEdge()&&_t.isResultOfOp(Pt.getLocation(0,Ei.RIGHT),Pt.getLocation(1,Ei.RIGHT),xt)&&At.setInResult(!0)}},_t.prototype.computeLabelsFromDepths=function(){for(var xt=this._edgeList.iterator();xt.hasNext();){var Tt=xt.next(),At=Tt.getLabel(),Pt=Tt.getDepth();if(!Pt.isNull()){Pt.normalize();for(var Nt=0;Nt<2;Nt++)At.isNull(Nt)||!At.isArea()||Pt.isNull(Nt)||(Pt.getDelta(Nt)===0?At.toLine(Nt):($o.isTrue(!Pt.isNull(Nt,Ei.LEFT),"depth of LEFT side has not been initialized"),At.setLocation(Nt,Ei.LEFT,Pt.getLocation(Nt,Ei.LEFT)),$o.isTrue(!Pt.isNull(Nt,Ei.RIGHT),"depth of RIGHT side has not been initialized"),At.setLocation(Nt,Ei.RIGHT,Pt.getLocation(Nt,Ei.RIGHT))))}}},_t.prototype.computeLabelling=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();)xt.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},_t.prototype.labelIncompleteNodes=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();){var Tt=xt.next(),At=Tt.getLabel();Tt.isIsolated()&&(At.isNull(0)?this.labelIncompleteNode(Tt,0):this.labelIncompleteNode(Tt,1)),Tt.getEdges().updateLabelling(At)}},_t.prototype.isCoveredByA=function(xt){return!!this.isCovered(xt,this._resultPolyList)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(hp);Mo.overlayOp=function(vt,_t,xt){return new Mo(vt,_t).getResultGeometry(xt)},Mo.intersection=function(vt,_t){if(vt.isEmpty()||_t.isEmpty())return Mo.createEmptyResult(Mo.INTERSECTION,vt,_t,vt.getFactory());if(vt.isGeometryCollection()){var xt=_t;return df.map(vt,{interfaces_:function(){return[Ad.MapOp]},map:function(Tt){return Tt.intersection(xt)}})}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),cl.overlayOp(vt,_t,Mo.INTERSECTION)},Mo.symDifference=function(vt,_t){if(vt.isEmpty()||_t.isEmpty()){if(vt.isEmpty()&&_t.isEmpty())return Mo.createEmptyResult(Mo.SYMDIFFERENCE,vt,_t,vt.getFactory());if(vt.isEmpty())return _t.copy();if(_t.isEmpty())return vt.copy()}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),cl.overlayOp(vt,_t,Mo.SYMDIFFERENCE)},Mo.resultDimension=function(vt,_t,xt){var Tt=_t.getDimension(),At=xt.getDimension(),Pt=-1;switch(vt){case Mo.INTERSECTION:Pt=Math.min(Tt,At);break;case Mo.UNION:Pt=Math.max(Tt,At);break;case Mo.DIFFERENCE:Pt=Tt;break;case Mo.SYMDIFFERENCE:Pt=Math.max(Tt,At)}return Pt},Mo.createEmptyResult=function(vt,_t,xt,Tt){var At=null;switch(Mo.resultDimension(vt,_t,xt)){case-1:At=Tt.createGeometryCollection(new Array(0).fill(null));break;case 0:At=Tt.createPoint();break;case 1:At=Tt.createLineString();break;case 2:At=Tt.createPolygon()}return At},Mo.difference=function(vt,_t){return vt.isEmpty()?Mo.createEmptyResult(Mo.DIFFERENCE,vt,_t,vt.getFactory()):_t.isEmpty()?vt.copy():(vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),cl.overlayOp(vt,_t,Mo.DIFFERENCE))},Mo.isResultOfOp=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],xt=vt.getLocation(0),Tt=vt.getLocation(1);return Mo.isResultOfOp(xt,Tt,_t)}if(arguments.length===3){var At=arguments[0],Pt=arguments[1],Nt=arguments[2];switch(At===Kr.BOUNDARY&&(At=Kr.INTERIOR),Pt===Kr.BOUNDARY&&(Pt=Kr.INTERIOR),Nt){case Mo.INTERSECTION:return At===Kr.INTERIOR&&Pt===Kr.INTERIOR;case Mo.UNION:return At===Kr.INTERIOR||Pt===Kr.INTERIOR;case Mo.DIFFERENCE:return At===Kr.INTERIOR&&Pt!==Kr.INTERIOR;case Mo.SYMDIFFERENCE:return At===Kr.INTERIOR&&Pt!==Kr.INTERIOR||At!==Kr.INTERIOR&&Pt===Kr.INTERIOR}return!1}},Mo.INTERSECTION=1,Mo.UNION=2,Mo.DIFFERENCE=3,Mo.SYMDIFFERENCE=4;var Xh=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new gc,this._seg=new Ji;var vt=arguments[0],_t=arguments[1];this._g=vt,this._boundaryDistanceTolerance=_t,this._linework=this.extractLinework(vt)};Xh.prototype.isWithinToleranceOfBoundary=function(vt){for(var _t=this,xt=0;xt<this._linework.getNumGeometries();xt++)for(var Tt=_t._linework.getGeometryN(xt).getCoordinateSequence(),At=0;At<Tt.size()-1;At++)if(Tt.getCoordinate(At,_t._seg.p0),Tt.getCoordinate(At+1,_t._seg.p1),_t._seg.distance(vt)<=_t._boundaryDistanceTolerance)return!0;return!1},Xh.prototype.getLocation=function(vt){return this.isWithinToleranceOfBoundary(vt)?Kr.BOUNDARY:this._ptLocator.locate(vt,this._g)},Xh.prototype.extractLinework=function(vt){var _t=new gf;vt.apply(_t);var xt=_t.getLinework(),Tt=Yo.toLineStringArray(xt);return vt.getFactory().createMultiLineString(Tt)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var gf=function(){this._linework=null,this._linework=new Oi};gf.prototype.getLinework=function(){return this._linework},gf.prototype.filter=function(vt){if(vt instanceof $a){var _t=vt;this._linework.add(_t.getExteriorRing());for(var xt=0;xt<_t.getNumInteriorRing();xt++)this._linework.add(_t.getInteriorRingN(xt))}},gf.prototype.interfaces_=function(){return[pu]},gf.prototype.getClass=function(){return gf};var Zh=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var vt=arguments[0];this._g=vt};Zh.prototype.extractPoints=function(vt,_t,xt){for(var Tt=vt.getCoordinates(),At=0;At<Tt.length-1;At++)this.computeOffsetPoints(Tt[At],Tt[At+1],_t,xt)},Zh.prototype.setSidesToGenerate=function(vt,_t){this._doLeft=vt,this._doRight=_t},Zh.prototype.getPoints=function(vt){for(var _t=new Oi,xt=dl.getLines(this._g).iterator();xt.hasNext();){var Tt=xt.next();this.extractPoints(Tt,vt,_t)}return _t},Zh.prototype.computeOffsetPoints=function(vt,_t,xt,Tt){var At=_t.x-vt.x,Pt=_t.y-vt.y,Nt=Math.sqrt(At*At+Pt*Pt),Vt=xt*At/Nt,Gt=xt*Pt/Nt,qt=(_t.x+vt.x)/2,en=(_t.y+vt.y)/2;if(this._doLeft){var Xt=new jr(qt-Gt,en+Vt);Tt.add(Xt)}if(this._doRight){var an=new jr(qt+Gt,en-Vt);Tt.add(an)}},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Gl=function vt(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=vt.TOLERANCE,this._testCoords=new Oi;var _t=arguments[0],xt=arguments[1],Tt=arguments[2];this._boundaryDistanceTolerance=vt.computeBoundaryDistanceTolerance(_t,xt),this._geom=[_t,xt,Tt],this._locFinder=[new Xh(this._geom[0],this._boundaryDistanceTolerance),new Xh(this._geom[1],this._boundaryDistanceTolerance),new Xh(this._geom[2],this._boundaryDistanceTolerance)]},H0={TOLERANCE:{configurable:!0}};Gl.prototype.reportResult=function(vt,_t,xt){hl.out.println("Overlay result invalid - A:"+Kr.toLocationSymbol(_t[0])+" B:"+Kr.toLocationSymbol(_t[1])+" expected:"+(xt?"i":"e")+" actual:"+Kr.toLocationSymbol(_t[2]))},Gl.prototype.isValid=function(vt){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var _t=this.checkValid(vt);return _t},Gl.prototype.checkValid=function(){var vt=this;if(arguments.length===1){for(var _t=arguments[0],xt=0;xt<this._testCoords.size();xt++){var Tt=vt._testCoords.get(xt);if(!vt.checkValid(_t,Tt))return vt._invalidLocation=Tt,!1}return!0}if(arguments.length===2){var At=arguments[0],Pt=arguments[1];return this._location[0]=this._locFinder[0].getLocation(Pt),this._location[1]=this._locFinder[1].getLocation(Pt),this._location[2]=this._locFinder[2].getLocation(Pt),!!Gl.hasLocation(this._location,Kr.BOUNDARY)||this.isValidResult(At,this._location)}},Gl.prototype.addTestPts=function(vt){var _t=new Zh(vt);this._testCoords.addAll(_t.getPoints(5*this._boundaryDistanceTolerance))},Gl.prototype.isValidResult=function(vt,_t){var xt=Mo.isResultOfOp(_t[0],_t[1],vt),Tt=!(xt^_t[2]===Kr.INTERIOR);return Tt||this.reportResult(vt,_t,xt),Tt},Gl.prototype.getInvalidLocation=function(){return this._invalidLocation},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.hasLocation=function(vt,_t){for(var xt=0;xt<3;xt++)if(vt[xt]===_t)return!0;return!1},Gl.computeBoundaryDistanceTolerance=function(vt,_t){return Math.min(rs.computeSizeBasedSnapTolerance(vt),rs.computeSizeBasedSnapTolerance(_t))},Gl.isValid=function(vt,_t,xt,Tt){return new Gl(vt,_t,Tt).isValid(xt)},H0.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Gl,H0);var Cl=function vt(_t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=vt.extractFactory(_t),this._inputGeoms=_t};Cl.prototype.extractElements=function(vt,_t){if(vt===null)return null;for(var xt=0;xt<vt.getNumGeometries();xt++){var Tt=vt.getGeometryN(xt);this._skipEmpty&&Tt.isEmpty()||_t.add(Tt)}},Cl.prototype.combine=function(){for(var vt=new Oi,_t=this._inputGeoms.iterator();_t.hasNext();){var xt=_t.next();this.extractElements(xt,vt)}return vt.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(vt)},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.combine=function(){if(arguments.length===1){var vt=arguments[0],_t=new Cl(vt);return _t.combine()}if(arguments.length===2){var xt=arguments[0],Tt=arguments[1],At=new Cl(Cl.createList(xt,Tt));return At.combine()}if(arguments.length===3){var Pt=arguments[0],Nt=arguments[1],Vt=arguments[2],Gt=new Cl(Cl.createList(Pt,Nt,Vt));return Gt.combine()}},Cl.extractFactory=function(vt){return vt.isEmpty()?null:vt.iterator().next().getFactory()},Cl.createList=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],xt=new Oi;return xt.add(vt),xt.add(_t),xt}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Pt=arguments[2],Nt=new Oi;return Nt.add(Tt),Nt.add(At),Nt.add(Pt),Nt}};var Ia=function(){this._inputPolys=null,this._geomFactory=null;var vt=arguments[0];this._inputPolys=vt,this._inputPolys===null&&(this._inputPolys=new Oi)},V0={STRTREE_NODE_CAPACITY:{configurable:!0}};Ia.prototype.reduceToGeometries=function(vt){for(var _t=new Oi,xt=vt.iterator();xt.hasNext();){var Tt=xt.next(),At=null;_o(Tt,Gc)?At=this.unionTree(Tt):Tt instanceof po&&(At=Tt),_t.add(At)}return _t},Ia.prototype.extractByEnvelope=function(vt,_t,xt){for(var Tt=new Oi,At=0;At<_t.getNumGeometries();At++){var Pt=_t.getGeometryN(At);Pt.getEnvelopeInternal().intersects(vt)?Tt.add(Pt):xt.add(Pt)}return this._geomFactory.buildGeometry(Tt)},Ia.prototype.unionOptimized=function(vt,_t){var xt=vt.getEnvelopeInternal(),Tt=_t.getEnvelopeInternal();if(!xt.intersects(Tt))return Cl.combine(vt,_t);if(vt.getNumGeometries()<=1&&_t.getNumGeometries()<=1)return this.unionActual(vt,_t);var At=xt.intersection(Tt);return this.unionUsingEnvelopeIntersection(vt,_t,At)},Ia.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var vt=new My(Ia.STRTREE_NODE_CAPACITY),_t=this._inputPolys.iterator();_t.hasNext();){var xt=_t.next();vt.insert(xt.getEnvelopeInternal(),xt)}this._inputPolys=null;var Tt=vt.itemsTree();return this.unionTree(Tt)},Ia.prototype.binaryUnion=function(){if(arguments.length===1){var vt=arguments[0];return this.binaryUnion(vt,0,vt.size())}if(arguments.length===3){var _t=arguments[0],xt=arguments[1],Tt=arguments[2];if(Tt-xt<=1){var At=Ia.getGeometry(_t,xt);return this.unionSafe(At,null)}if(Tt-xt==2)return this.unionSafe(Ia.getGeometry(_t,xt),Ia.getGeometry(_t,xt+1));var Pt=Math.trunc((Tt+xt)/2),Nt=this.binaryUnion(_t,xt,Pt),Vt=this.binaryUnion(_t,Pt,Tt);return this.unionSafe(Nt,Vt)}},Ia.prototype.repeatedUnion=function(vt){for(var _t=null,xt=vt.iterator();xt.hasNext();){var Tt=xt.next();_t=_t===null?Tt.copy():_t.union(Tt)}return _t},Ia.prototype.unionSafe=function(vt,_t){return vt===null&&_t===null?null:vt===null?_t.copy():_t===null?vt.copy():this.unionOptimized(vt,_t)},Ia.prototype.unionActual=function(vt,_t){return Ia.restrictToPolygons(vt.union(_t))},Ia.prototype.unionTree=function(vt){var _t=this.reduceToGeometries(vt);return this.binaryUnion(_t)},Ia.prototype.unionUsingEnvelopeIntersection=function(vt,_t,xt){var Tt=new Oi,At=this.extractByEnvelope(xt,vt,Tt),Pt=this.extractByEnvelope(xt,_t,Tt),Nt=this.unionActual(At,Pt);return Tt.add(Nt),Cl.combine(Tt)},Ia.prototype.bufferUnion=function(){if(arguments.length===1){var vt=arguments[0],_t=vt.get(0).getFactory(),xt=_t.buildGeometry(vt),Tt=xt.buffer(0);return Tt}if(arguments.length===2){var At=arguments[0],Pt=arguments[1],Nt=At.getFactory(),Vt=Nt.createGeometryCollection([At,Pt]),Gt=Vt.buffer(0);return Gt}},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia},Ia.restrictToPolygons=function(vt){if(_o(vt,zh))return vt;var _t=mh.getPolygons(vt);return _t.size()===1?_t.get(0):vt.getFactory().createMultiPolygon(Yo.toPolygonArray(_t))},Ia.getGeometry=function(vt,_t){return _t>=vt.size()?null:vt.get(_t)},Ia.union=function(vt){return new Ia(vt).union()},V0.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ia,V0);var ru=function(){};function _h(){return new dp}function dp(){this.reset()}ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru},ru.union=function(vt,_t){if(vt.isEmpty()||_t.isEmpty()){if(vt.isEmpty()&&_t.isEmpty())return Mo.createEmptyResult(Mo.UNION,vt,_t,vt.getFactory());if(vt.isEmpty())return _t.copy();if(_t.isEmpty())return vt.copy()}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),cl.overlayOp(vt,_t,Mo.UNION)},dp.prototype={constructor:dp,reset:function(){this.s=this.t=0},add:function(vt){j0(fg,vt,this.t),j0(this,fg.s,this.s),this.s?this.t+=fg.t:this.s=fg.t},valueOf:function(){return this.s}};var fg=new dp;function j0(vt,_t,xt){var Tt=vt.s=_t+xt,At=Tt-_t,Pt=Tt-At;vt.t=_t-Pt+(xt-At)}var Ca=1e-6,js=Math.PI,bh=js/2,zy=js/4,xh=2*js,wo=180/js,Mc=js/180,$l=Math.abs,u_=Math.atan,fp=Math.atan2,Fa=Math.cos,za=Math.sin,pg=Math.sqrt;function bm(vt){return vt>1?0:vt<-1?js:Math.acos(vt)}function Ku(vt){return vt>1?bh:vt<-1?-bh:Math.asin(vt)}function Ld(){}function gg(vt,_t){vt&&U0.hasOwnProperty(vt.type)&&U0[vt.type](vt,_t)}var xm={Feature:function(vt,_t){gg(vt.geometry,_t)},FeatureCollection:function(vt,_t){for(var xt=vt.features,Tt=-1,At=xt.length;++Tt<At;)gg(xt[Tt].geometry,_t)}},U0={Sphere:function(vt,_t){_t.sphere()},Point:function(vt,_t){vt=vt.coordinates,_t.point(vt[0],vt[1],vt[2])},MultiPoint:function(vt,_t){for(var xt=vt.coordinates,Tt=-1,At=xt.length;++Tt<At;)vt=xt[Tt],_t.point(vt[0],vt[1],vt[2])},LineString:function(vt,_t){wm(vt.coordinates,_t,0)},MultiLineString:function(vt,_t){for(var xt=vt.coordinates,Tt=-1,At=xt.length;++Tt<At;)wm(xt[Tt],_t,0)},Polygon:function(vt,_t){pp(vt.coordinates,_t)},MultiPolygon:function(vt,_t){for(var xt=vt.coordinates,Tt=-1,At=xt.length;++Tt<At;)pp(xt[Tt],_t)},GeometryCollection:function(vt,_t){for(var xt=vt.geometries,Tt=-1,At=xt.length;++Tt<At;)gg(xt[Tt],_t)}};function wm(vt,_t,xt){var Tt,At=-1,Pt=vt.length-xt;for(_t.lineStart();++At<Pt;)Tt=vt[At],_t.point(Tt[0],Tt[1],Tt[2]);_t.lineEnd()}function pp(vt,_t){var xt=-1,Tt=vt.length;for(_t.polygonStart();++xt<Tt;)wm(vt[xt],_t,1);_t.polygonEnd()}_h(),_h();function G0(vt){return[fp(vt[1],vt[0]),Ku(vt[2])]}function Pa(vt){var _t=vt[0],xt=vt[1],Tt=Fa(xt);return[Tt*Fa(_t),Tt*za(_t),za(xt)]}function mg(vt,_t){return vt[0]*_t[0]+vt[1]*_t[1]+vt[2]*_t[2]}function Em(vt,_t){return[vt[1]*_t[2]-vt[2]*_t[1],vt[2]*_t[0]-vt[0]*_t[2],vt[0]*_t[1]-vt[1]*_t[0]]}function W0(vt,_t){vt[0]+=_t[0],vt[1]+=_t[1],vt[2]+=_t[2]}function Sm(vt,_t){return[vt[0]*_t,vt[1]*_t,vt[2]*_t]}function q0(vt){var _t=pg(vt[0]*vt[0]+vt[1]*vt[1]+vt[2]*vt[2]);vt[0]/=_t,vt[1]/=_t,vt[2]/=_t}_h();function Y0(vt,_t){function xt(Tt,At){return Tt=vt(Tt,At),_t(Tt[0],Tt[1])}return vt.invert&&_t.invert&&(xt.invert=function(Tt,At){return(Tt=_t.invert(Tt,At))&&vt.invert(Tt[0],Tt[1])}),xt}function X0(vt,_t){return[vt>js?vt-xh:vt<-js?vt+xh:vt,_t]}function Hy(vt){return function(_t,xt){return[(_t+=vt)>js?_t-xh:_t<-js?_t+xh:_t,xt]}}function Z0(vt){var _t=Hy(vt);return _t.invert=Hy(-vt),_t}function K0(vt,_t){var xt=Fa(vt),Tt=za(vt),At=Fa(_t),Pt=za(_t);function Nt(Vt,Gt){var qt=Fa(Gt),en=Fa(Vt)*qt,Xt=za(Vt)*qt,an=za(Gt),_n=an*xt+en*Tt;return[fp(Xt*At-_n*Pt,en*xt-an*Tt),Ku(_n*At+Xt*Pt)]}return Nt.invert=function(Vt,Gt){var qt=Fa(Gt),en=Fa(Vt)*qt,Xt=za(Vt)*qt,an=za(Gt),_n=an*At-Xt*Pt;return[fp(Xt*At+an*Pt,en*xt+_n*Tt),Ku(_n*xt-en*Tt)]},Nt}function J0(vt,_t){(_t=Pa(_t))[0]-=vt,q0(_t);var xt=bm(-_t[1]);return((-_t[2]<0?-xt:xt)+xh-Ca)%xh}function Cm(){var vt,_t=[];return{point:function(xt,Tt){vt.push([xt,Tt])},lineStart:function(){_t.push(vt=[])},lineEnd:Ld,rejoin:function(){_t.length>1&&_t.push(_t.pop().concat(_t.shift()))},result:function(){var xt=_t;return _t=[],vt=null,xt}}}function Tm(vt,_t){return $l(vt[0]-_t[0])<Ca&&$l(vt[1]-_t[1])<Ca}function mf(vt,_t,xt,Tt){this.x=vt,this.z=_t,this.o=xt,this.e=Tt,this.v=!1,this.n=this.p=null}function Q0(vt,_t,xt,Tt,At){var Pt,Nt,Vt=[],Gt=[];if(vt.forEach(function(bn){if(!((En=bn.length-1)<=0)){var En,un,Vn=bn[0],nr=bn[En];if(Tm(Vn,nr)){for(At.lineStart(),Pt=0;Pt<En;++Pt)At.point((Vn=bn[Pt])[0],Vn[1]);At.lineEnd()}else Vt.push(un=new mf(Vn,bn,null,!0)),Gt.push(un.o=new mf(Vn,null,un,!1)),Vt.push(un=new mf(nr,bn,null,!1)),Gt.push(un.o=new mf(nr,null,un,!0))}}),Vt.length){for(Gt.sort(_t),yg(Vt),yg(Gt),Pt=0,Nt=Gt.length;Pt<Nt;++Pt)Gt[Pt].e=xt=!xt;for(var qt,en,Xt=Vt[0];;){for(var an=Xt,_n=!0;an.v;)if((an=an.n)===Xt)return;qt=an.z,At.lineStart();do{if(an.v=an.o.v=!0,an.e){if(_n)for(Pt=0,Nt=qt.length;Pt<Nt;++Pt)At.point((en=qt[Pt])[0],en[1]);else Tt(an.x,an.n.x,1,At);an=an.n}else{if(_n)for(qt=an.p.z,Pt=qt.length-1;Pt>=0;--Pt)At.point((en=qt[Pt])[0],en[1]);else Tt(an.x,an.p.x,-1,At);an=an.p}qt=(an=an.o).z,_n=!_n}while(!an.v);At.lineEnd()}}}function yg(vt){if(_t=vt.length){for(var _t,xt,Tt=0,At=vt[0];++Tt<_t;)At.n=xt=vt[Tt],xt.p=At,At=xt;At.n=xt=vt[0],xt.p=At}}function vg(vt,_t){return vt<_t?-1:vt>_t?1:vt>=_t?0:NaN}X0.invert=X0;var gp,wh;(gp=vg).length===1&&(wh=gp,gp=function(vt,_t){return vg(wh(vt),_t)});function Vy(vt){for(var _t,xt,Tt,At=vt.length,Pt=-1,Nt=0;++Pt<At;)Nt+=vt[Pt].length;for(xt=new Array(Nt);--At>=0;)for(_t=(Tt=vt[At]).length;--_t>=0;)xt[--Nt]=Tt[_t];return xt}var mp=1e9,pl=-mp;function km(vt,_t,xt,Tt){function At(qt,en){return vt<=qt&&qt<=xt&&_t<=en&&en<=Tt}function Pt(qt,en,Xt,an){var _n=0,bn=0;if(qt==null||(_n=Nt(qt,Xt))!==(bn=Nt(en,Xt))||Gt(qt,en)<0^Xt>0)do an.point(_n===0||_n===3?vt:xt,_n>1?Tt:_t);while((_n=(_n+Xt+4)%4)!==bn);else an.point(en[0],en[1])}function Nt(qt,en){return $l(qt[0]-vt)<Ca?en>0?0:3:$l(qt[0]-xt)<Ca?en>0?2:1:$l(qt[1]-_t)<Ca?en>0?1:0:en>0?3:2}function Vt(qt,en){return Gt(qt.x,en.x)}function Gt(qt,en){var Xt=Nt(qt,1),an=Nt(en,1);return Xt!==an?Xt-an:Xt===0?en[1]-qt[1]:Xt===1?qt[0]-en[0]:Xt===2?qt[1]-en[1]:en[0]-qt[0]}return function(qt){var en,Xt,an,_n,bn,En,un,Vn,nr,xn,zn,jn=qt,qn=Cm(),Gn={point:Zr,lineStart:function(){Gn.point=Fr,Xt&&Xt.push(an=[]),xn=!0,nr=!1,un=Vn=NaN},lineEnd:function(){en&&(Fr(_n,bn),En&&nr&&qn.rejoin(),en.push(qn.result())),Gn.point=Zr,nr&&jn.lineEnd()},polygonStart:function(){jn=qn,en=[],Xt=[],zn=!0},polygonEnd:function(){var ei=function(){for(var Wr=0,Gr=0,Vr=Xt.length;Gr<Vr;++Gr)for(var ni,Yr,ai=Xt[Gr],Cr=1,Ki=ai.length,Si=ai[0],Ro=Si[0],Wi=Si[1];Cr<Ki;++Cr)ni=Ro,Yr=Wi,Ro=(Si=ai[Cr])[0],Wi=Si[1],Yr<=Tt?Wi>Tt&&(Ro-ni)*(Tt-Yr)>(Wi-Yr)*(vt-ni)&&++Wr:Wi<=Tt&&(Ro-ni)*(Tt-Yr)<(Wi-Yr)*(vt-ni)&&--Wr;return Wr}(),zr=zn&&ei,si=(en=Vy(en)).length;(zr||si)&&(qt.polygonStart(),zr&&(qt.lineStart(),Pt(null,null,1,qt),qt.lineEnd()),si&&Q0(en,Vt,ei,Pt,qt),qt.polygonEnd()),jn=qt,en=Xt=an=null}};function Zr(ei,zr){At(ei,zr)&&jn.point(ei,zr)}function Fr(ei,zr){var si=At(ei,zr);if(Xt&&an.push([ei,zr]),xn)_n=ei,bn=zr,En=si,xn=!1,si&&(jn.lineStart(),jn.point(ei,zr));else if(si&&nr)jn.point(ei,zr);else{var Wr=[un=Math.max(pl,Math.min(mp,un)),Vn=Math.max(pl,Math.min(mp,Vn))],Gr=[ei=Math.max(pl,Math.min(mp,ei)),zr=Math.max(pl,Math.min(mp,zr))];(function(Vr,ni,Yr,ai,Cr,Ki){var Si,Ro=Vr[0],Wi=Vr[1],ho=0,is=1,Ws=ni[0]-Ro,gl=ni[1]-Wi;if(Si=Yr-Ro,Ws||!(Si>0)){if(Si/=Ws,Ws<0){if(Si<ho)return;Si<is&&(is=Si)}else if(Ws>0){if(Si>is)return;Si>ho&&(ho=Si)}if(Si=Cr-Ro,Ws||!(Si<0)){if(Si/=Ws,Ws<0){if(Si>is)return;Si>ho&&(ho=Si)}else if(Ws>0){if(Si<ho)return;Si<is&&(is=Si)}if(Si=ai-Wi,gl||!(Si>0)){if(Si/=gl,gl<0){if(Si<ho)return;Si<is&&(is=Si)}else if(gl>0){if(Si>is)return;Si>ho&&(ho=Si)}if(Si=Ki-Wi,gl||!(Si<0)){if(Si/=gl,gl<0){if(Si>is)return;Si>ho&&(ho=Si)}else if(gl>0){if(Si<ho)return;Si<is&&(is=Si)}return ho>0&&(Vr[0]=Ro+ho*Ws,Vr[1]=Wi+ho*gl),is<1&&(ni[0]=Ro+is*Ws,ni[1]=Wi+is*gl),!0}}}}})(Wr,Gr,vt,_t,xt,Tt)?(nr||(jn.lineStart(),jn.point(Wr[0],Wr[1])),jn.point(Gr[0],Gr[1]),si||jn.lineEnd(),zn=!1):si&&(jn.lineStart(),jn.point(ei,zr),zn=!1)}un=ei,Vn=zr,nr=si}return Gn}}var e1=_h();_h();function jy(vt){return vt}_h(),_h();var yp=1/0,yf=yp,Id=-yp,Am=Id,Uy={point:function(vt,_t){vt<yp&&(yp=vt),vt>Id&&(Id=vt),_t<yf&&(yf=_t),_t>Am&&(Am=_t)},lineStart:Ld,lineEnd:Ld,polygonStart:Ld,polygonEnd:Ld,result:function(){var vt=[[yp,yf],[Id,Am]];return Id=Am=-(yf=yp=1/0),vt}};_h();function n1(vt,_t,xt,Tt){return function(At,Pt){var Nt,Vt,Gt,qt=_t(Pt),en=At.invert(Tt[0],Tt[1]),Xt=Cm(),an=_t(Xt),_n=!1,bn={point:En,lineStart:Vn,lineEnd:nr,polygonStart:function(){bn.point=xn,bn.lineStart=zn,bn.lineEnd=jn,Vt=[],Nt=[]},polygonEnd:function(){bn.point=En,bn.lineStart=Vn,bn.lineEnd=nr,Vt=Vy(Vt);var qn=function(Gn,Zr){var Fr=Zr[0],ei=Zr[1],zr=[za(Fr),-Fa(Fr),0],si=0,Wr=0;e1.reset();for(var Gr=0,Vr=Gn.length;Gr<Vr;++Gr)if(Yr=(ni=Gn[Gr]).length)for(var ni,Yr,ai=ni[Yr-1],Cr=ai[0],Ki=ai[1]/2+zy,Si=za(Ki),Ro=Fa(Ki),Wi=0;Wi<Yr;++Wi,Cr=is,Si=gl,Ro=bg,ai=ho){var ho=ni[Wi],is=ho[0],Ws=ho[1]/2+zy,gl=za(Ws),bg=Fa(Ws),Pd=is-Cr,xg=Pd>=0?1:-1,wg=xg*Pd,vp=wg>js,Im=Si*gl;if(e1.add(fp(Im*xg*za(wg),Ro*bg+Im*Fa(wg))),si+=vp?Pd+xg*xh:Pd,vp^Cr>=Fr^is>=Fr){var _p=Em(Pa(ai),Pa(ho));q0(_p);var rv=Em(zr,_p);q0(rv);var iv=(vp^Pd>=0?-1:1)*Ku(rv[2]);(ei>iv||ei===iv&&(_p[0]||_p[1]))&&(Wr+=vp^Pd>=0?1:-1)}}return(si<-1e-6||si<Ca&&e1<-1e-6)^1&Wr}(Nt,en);Vt.length?(_n||(Pt.polygonStart(),_n=!0),Q0(Vt,r1,qn,xt,Pt)):qn&&(_n||(Pt.polygonStart(),_n=!0),Pt.lineStart(),xt(null,null,1,Pt),Pt.lineEnd()),_n&&(Pt.polygonEnd(),_n=!1),Vt=Nt=null},sphere:function(){Pt.polygonStart(),Pt.lineStart(),xt(null,null,1,Pt),Pt.lineEnd(),Pt.polygonEnd()}};function En(qn,Gn){var Zr=At(qn,Gn);vt(qn=Zr[0],Gn=Zr[1])&&Pt.point(qn,Gn)}function un(qn,Gn){var Zr=At(qn,Gn);qt.point(Zr[0],Zr[1])}function Vn(){bn.point=un,qt.lineStart()}function nr(){bn.point=En,qt.lineEnd()}function xn(qn,Gn){Gt.push([qn,Gn]);var Zr=At(qn,Gn);an.point(Zr[0],Zr[1])}function zn(){an.lineStart(),Gt=[]}function jn(){xn(Gt[0][0],Gt[0][1]),an.lineEnd();var qn,Gn,Zr,Fr,ei=an.clean(),zr=Xt.result(),si=zr.length;if(Gt.pop(),Nt.push(Gt),Gt=null,si)if(1&ei){if((Gn=(Zr=zr[0]).length-1)>0){for(_n||(Pt.polygonStart(),_n=!0),Pt.lineStart(),qn=0;qn<Gn;++qn)Pt.point((Fr=Zr[qn])[0],Fr[1]);Pt.lineEnd()}}else si>1&&2&ei&&zr.push(zr.pop().concat(zr.shift())),Vt.push(zr.filter(Gy))}return bn}}function Gy(vt){return vt.length>1}function r1(vt,_t){return((vt=vt.x)[0]<0?vt[1]-bh-Ca:bh-vt[1])-((_t=_t.x)[0]<0?_t[1]-bh-Ca:bh-_t[1])}var i1=n1(function(){return!0},function(vt){var _t,xt=NaN,Tt=NaN,At=NaN;return{lineStart:function(){vt.lineStart(),_t=1},point:function(Pt,Nt){var Vt=Pt>0?js:-js,Gt=$l(Pt-xt);$l(Gt-js)<Ca?(vt.point(xt,Tt=(Tt+Nt)/2>0?bh:-bh),vt.point(At,Tt),vt.lineEnd(),vt.lineStart(),vt.point(Vt,Tt),vt.point(Pt,Tt),_t=0):At!==Vt&&Gt>=js&&($l(xt-At)<Ca&&(xt-=At*Ca),$l(Pt-Vt)<Ca&&(Pt-=Vt*Ca),Tt=function(qt,en,Xt,an){var _n,bn,En=za(qt-Xt);return $l(En)>Ca?u_((za(en)*(bn=Fa(an))*za(Xt)-za(an)*(_n=Fa(en))*za(qt))/(_n*bn*En)):(en+an)/2}(xt,Tt,Pt,Nt),vt.point(At,Tt),vt.lineEnd(),vt.lineStart(),vt.point(Vt,Tt),_t=0),vt.point(xt=Pt,Tt=Nt),At=Vt},lineEnd:function(){vt.lineEnd(),xt=Tt=NaN},clean:function(){return 2-_t}}},function(vt,_t,xt,Tt){var At;if(vt==null)At=xt*bh,Tt.point(-js,At),Tt.point(0,At),Tt.point(js,At),Tt.point(js,0),Tt.point(js,-At),Tt.point(0,-At),Tt.point(-js,-At),Tt.point(-js,0),Tt.point(-js,At);else if($l(vt[0]-_t[0])>Ca){var Pt=vt[0]<_t[0]?js:-js;At=xt*Pt/2,Tt.point(-Pt,At),Tt.point(0,At),Tt.point(Pt,At)}else Tt.point(_t[0],_t[1])},[-js,-bh]);function Lm(vt,_t){var xt=Fa(vt),Tt=xt>0,At=$l(xt)>Ca;function Pt(Gt,qt){return Fa(Gt)*Fa(qt)>xt}function Nt(Gt,qt,en){var Xt=[1,0,0],an=Em(Pa(Gt),Pa(qt)),_n=mg(an,an),bn=an[0],En=_n-bn*bn;if(!En)return!en&&Gt;var un=xt*_n/En,Vn=-xt*bn/En,nr=Em(Xt,an),xn=Sm(Xt,un);W0(xn,Sm(an,Vn));var zn=nr,jn=mg(xn,zn),qn=mg(zn,zn),Gn=jn*jn-qn*(mg(xn,xn)-1);if(!(Gn<0)){var Zr=pg(Gn),Fr=Sm(zn,(-jn-Zr)/qn);if(W0(Fr,xn),Fr=G0(Fr),!en)return Fr;var ei,zr=Gt[0],si=qt[0],Wr=Gt[1],Gr=qt[1];si<zr&&(ei=zr,zr=si,si=ei);var Vr=si-zr,ni=$l(Vr-js)<Ca;if(!ni&&Gr<Wr&&(ei=Wr,Wr=Gr,Gr=ei),ni||Vr<Ca?ni?Wr+Gr>0^Fr[1]<($l(Fr[0]-zr)<Ca?Wr:Gr):Wr<=Fr[1]&&Fr[1]<=Gr:Vr>js^(zr<=Fr[0]&&Fr[0]<=si)){var Yr=Sm(zn,(-jn+Zr)/qn);return W0(Yr,xn),[Fr,G0(Yr)]}}}function Vt(Gt,qt){var en=Tt?vt:js-vt,Xt=0;return Gt<-en?Xt|=1:Gt>en&&(Xt|=2),qt<-en?Xt|=4:qt>en&&(Xt|=8),Xt}return n1(Pt,function(Gt){var qt,en,Xt,an,_n;return{lineStart:function(){an=Xt=!1,_n=1},point:function(bn,En){var un,Vn=[bn,En],nr=Pt(bn,En),xn=Tt?nr?0:Vt(bn,En):nr?Vt(bn+(bn<0?js:-js),En):0;if(!qt&&(an=Xt=nr)&&Gt.lineStart(),nr!==Xt&&(!(un=Nt(qt,Vn))||Tm(qt,un)||Tm(Vn,un))&&(Vn[0]+=Ca,Vn[1]+=Ca,nr=Pt(Vn[0],Vn[1])),nr!==Xt)_n=0,nr?(Gt.lineStart(),un=Nt(Vn,qt),Gt.point(un[0],un[1])):(un=Nt(qt,Vn),Gt.point(un[0],un[1]),Gt.lineEnd()),qt=un;else if(At&&qt&&Tt^nr){var zn;xn&en||!(zn=Nt(Vn,qt,!0))||(_n=0,Tt?(Gt.lineStart(),Gt.point(zn[0][0],zn[0][1]),Gt.point(zn[1][0],zn[1][1]),Gt.lineEnd()):(Gt.point(zn[1][0],zn[1][1]),Gt.lineEnd(),Gt.lineStart(),Gt.point(zn[0][0],zn[0][1])))}!nr||qt&&Tm(qt,Vn)||Gt.point(Vn[0],Vn[1]),qt=Vn,Xt=nr,en=xn},lineEnd:function(){Xt&&Gt.lineEnd(),qt=null},clean:function(){return _n|(an&&Xt)<<1}}},function(Gt,qt,en,Xt){(function(an,_n,bn,En,un,Vn){if(bn){var nr=Fa(_n),xn=za(_n),zn=En*bn;un==null?(un=_n+En*xh,Vn=_n-zn/2):(un=J0(nr,un),Vn=J0(nr,Vn),(En>0?un<Vn:un>Vn)&&(un+=En*xh));for(var jn,qn=un;En>0?qn>Vn:qn<Vn;qn-=zn)jn=G0([nr,-xn*Fa(qn),-xn*za(qn)]),an.point(jn[0],jn[1])}})(Xt,vt,_t,en,Gt,qt)},Tt?[0,-vt]:[-js,vt-js])}function Wy(vt){return function(_t){var xt=new o1;for(var Tt in vt)xt[Tt]=vt[Tt];return xt.stream=_t,xt}}function o1(){}function _g(vt,_t,xt){var Tt=_t[1][0]-_t[0][0],At=_t[1][1]-_t[0][1],Pt=vt.clipExtent&&vt.clipExtent();vt.scale(150).translate([0,0]),Pt!=null&&vt.clipExtent(null),function(en,Xt){en&&xm.hasOwnProperty(en.type)?xm[en.type](en,Xt):gg(en,Xt)}(xt,vt.stream(Uy));var Nt=Uy.result(),Vt=Math.min(Tt/(Nt[1][0]-Nt[0][0]),At/(Nt[1][1]-Nt[0][1])),Gt=+_t[0][0]+(Tt-Vt*(Nt[1][0]+Nt[0][0]))/2,qt=+_t[0][1]+(At-Vt*(Nt[1][1]+Nt[0][1]))/2;return Pt!=null&&vt.clipExtent(Pt),vt.scale(150*Vt).translate([Gt,qt])}o1.prototype={constructor:o1,point:function(vt,_t){this.stream.point(vt,_t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var h_=Fa(30*Mc);function qy(vt,_t){return+_t?function(xt,Tt){function At(Pt,Nt,Vt,Gt,qt,en,Xt,an,_n,bn,En,un,Vn,nr){var xn=Xt-Pt,zn=an-Nt,jn=xn*xn+zn*zn;if(jn>4*Tt&&Vn--){var qn=Gt+bn,Gn=qt+En,Zr=en+un,Fr=pg(qn*qn+Gn*Gn+Zr*Zr),ei=Ku(Zr/=Fr),zr=$l($l(Zr)-1)<Ca||$l(Vt-_n)<Ca?(Vt+_n)/2:fp(Gn,qn),si=xt(zr,ei),Wr=si[0],Gr=si[1],Vr=Wr-Pt,ni=Gr-Nt,Yr=zn*Vr-xn*ni;(Yr*Yr/jn>Tt||$l((xn*Vr+zn*ni)/jn-.5)>.3||Gt*bn+qt*En+en*un<h_)&&(At(Pt,Nt,Vt,Gt,qt,en,Wr,Gr,zr,qn/=Fr,Gn/=Fr,Zr,Vn,nr),nr.point(Wr,Gr),At(Wr,Gr,zr,qn,Gn,Zr,Xt,an,_n,bn,En,un,Vn,nr))}}return function(Pt){var Nt,Vt,Gt,qt,en,Xt,an,_n,bn,En,un,Vn,nr={point:xn,lineStart:zn,lineEnd:qn,polygonStart:function(){Pt.polygonStart(),nr.lineStart=Gn},polygonEnd:function(){Pt.polygonEnd(),nr.lineStart=zn}};function xn(ei,zr){ei=xt(ei,zr),Pt.point(ei[0],ei[1])}function zn(){_n=NaN,nr.point=jn,Pt.lineStart()}function jn(ei,zr){var si=Pa([ei,zr]),Wr=xt(ei,zr);At(_n,bn,an,En,un,Vn,_n=Wr[0],bn=Wr[1],an=ei,En=si[0],un=si[1],Vn=si[2],16,Pt),Pt.point(_n,bn)}function qn(){nr.point=xn,Pt.lineEnd()}function Gn(){zn(),nr.point=Zr,nr.lineEnd=Fr}function Zr(ei,zr){jn(Nt=ei,zr),Vt=_n,Gt=bn,qt=En,en=un,Xt=Vn,nr.point=jn}function Fr(){At(_n,bn,an,En,un,Vn,Vt,Gt,Nt,qt,en,Xt,16,Pt),nr.lineEnd=qn,qn()}return nr}}(vt,_t):function(xt){return Wy({point:function(Tt,At){Tt=xt(Tt,At),this.stream.point(Tt[0],Tt[1])}})}(vt)}var Yy=Wy({point:function(vt,_t){this.stream.point(vt*Mc,_t*Mc)}});function d_(vt){return function(_t){var xt,Tt,At,Pt,Nt,Vt,Gt,qt,en,Xt,an=150,_n=480,bn=250,En=0,un=0,Vn=0,nr=0,xn=0,zn=null,jn=i1,qn=null,Gn=jy,Zr=.5,Fr=qy(si,Zr);function ei(Vr){return[(Vr=Nt(Vr[0]*Mc,Vr[1]*Mc))[0]*an+Tt,At-Vr[1]*an]}function zr(Vr){return(Vr=Nt.invert((Vr[0]-Tt)/an,(At-Vr[1])/an))&&[Vr[0]*wo,Vr[1]*wo]}function si(Vr,ni){return[(Vr=xt(Vr,ni))[0]*an+Tt,At-Vr[1]*an]}function Wr(){Nt=Y0(Pt=function(ni,Yr,ai){return(ni%=xh)?Yr||ai?Y0(Z0(ni),K0(Yr,ai)):Z0(ni):Yr||ai?K0(Yr,ai):X0}(Vn,nr,xn),xt);var Vr=xt(En,un);return Tt=_n-Vr[0]*an,At=bn+Vr[1]*an,Gr()}function Gr(){return en=Xt=null,ei}return ei.stream=function(Vr){return en&&Xt===Vr?en:en=Yy(jn(Pt,Fr(Gn(Xt=Vr))))},ei.clipAngle=function(Vr){return arguments.length?(jn=+Vr?Lm(zn=Vr*Mc,6*Mc):(zn=null,i1),Gr()):zn*wo},ei.clipExtent=function(Vr){return arguments.length?(Gn=Vr==null?(qn=Vt=Gt=qt=null,jy):km(qn=+Vr[0][0],Vt=+Vr[0][1],Gt=+Vr[1][0],qt=+Vr[1][1]),Gr()):qn==null?null:[[qn,Vt],[Gt,qt]]},ei.scale=function(Vr){return arguments.length?(an=+Vr,Wr()):an},ei.translate=function(Vr){return arguments.length?(_n=+Vr[0],bn=+Vr[1],Wr()):[_n,bn]},ei.center=function(Vr){return arguments.length?(En=Vr[0]%360*Mc,un=Vr[1]%360*Mc,Wr()):[En*wo,un*wo]},ei.rotate=function(Vr){return arguments.length?(Vn=Vr[0]%360*Mc,nr=Vr[1]%360*Mc,xn=Vr.length>2?Vr[2]%360*Mc:0,Wr()):[Vn*wo,nr*wo,xn*wo]},ei.precision=function(Vr){return arguments.length?(Fr=qy(si,Zr=Vr*Vr),Gr()):pg(Zr)},ei.fitExtent=function(Vr,ni){return _g(ei,Vr,ni)},ei.fitSize=function(Vr,ni){return function(Yr,ai,Cr){return _g(Yr,[[0,0],ai],Cr)}(ei,Vr,ni)},function(){return xt=_t.apply(this,arguments),ei.invert=xt.invert&&zr,Wr()}}(function(){return vt})()}var s1=function(vt){return function(_t,xt){var Tt=Fa(_t),At=Fa(xt),Pt=vt(Tt*At);return[Pt*At*za(_t),Pt*za(xt)]}}(function(vt){return(vt=bm(vt))&&vt/za(vt)});function f_(){return d_(s1).scale(79.4188).clipAngle(179.999)}function vf(vt,_t,xt,Tt){var At=vt.properties||{},Pt=vt.type==="Feature"?vt.geometry:vt;if(Pt.type==="GeometryCollection"){var Nt=[];return gr(vt,function(an){var _n=vf(an,_t,xt,Tt);_n&&Nt.push(_n)}),Ft(Nt)}var Vt=function(an){var _n=Ga(an).geometry.coordinates,bn=[-_n[0],-_n[1]];return f_().rotate(bn).scale(rt)}(Pt),Gt={type:Pt.type,coordinates:Zy(Pt.coordinates,Vt)},qt=new lm().read(Gt),en=sn(on(_t,xt),"meters"),Xt=qs.bufferOp(qt,en,Tt);if(!Xy((Xt=new Iy().write(Xt)).coordinates))return wt({type:Xt.type,coordinates:Ky(Xt.coordinates,Vt)},At)}function Xy(vt){return Array.isArray(vt[0])?Xy(vt[0]):isNaN(vt[0])}function Zy(vt,_t){return typeof vt[0]!="object"?_t(vt):vt.map(function(xt){return Zy(xt,_t)})}function Ky(vt,_t){return typeof vt[0]!="object"?_t.invert(vt):vt.map(function(xt){return Ky(xt,_t)})}function _f(vt,_t,xt){xt===void 0&&(xt={});var Tt=Un(vt),At=Un(_t),Pt=Nh.intersection(Tt.coordinates,At.coordinates);return Pt.length===0?null:Pt.length===1?Ot(Pt[0],xt.properties):Wt(Pt,xt.properties)}function Jy(vt,_t,xt){xt===void 0&&(xt={});var Tt=JSON.stringify(xt.properties||{}),At=vt[0],Pt=vt[1],Nt=vt[2],Vt=vt[3],Gt=(Pt+Vt)/2,qt=(At+Nt)/2,en=2*_t/mo([At,Gt],[Nt,Gt],xt)*(Nt-At),Xt=2*_t/mo([qt,Pt],[qt,Vt],xt)*(Vt-Pt),an=en/2,_n=2*an,bn=Math.sqrt(3)/2*Xt,En=Nt-At,un=Vt-Pt,Vn=3/4*_n,nr=bn,xn=(En-_n)/(_n-an/2),zn=Math.floor(xn),jn=(zn*Vn-an/2-En)/2-an/2+Vn/2,qn=Math.floor((un-bn)/bn),Gn=(un-qn*bn)/2,Zr=qn*bn-un>bn/2;Zr&&(Gn-=bn/4);for(var Fr=[],ei=[],zr=0;zr<6;zr++){var si=2*Math.PI/6*zr;Fr.push(Math.cos(si)),ei.push(Math.sin(si))}for(var Wr=[],Gr=0;Gr<=zn;Gr++)for(var Vr=0;Vr<=qn;Vr++){var ni=Gr%2==1;if((Vr!==0||!ni)&&(Vr!==0||!Zr)){var Yr=Gr*Vn+At-jn,ai=Vr*nr+Pt+Gn;if(ni&&(ai-=bn/2),xt.triangles===!0)ev([Yr,ai],en/2,Xt/2,JSON.parse(Tt),Fr,ei).forEach(function(Ki){xt.mask?_f(xt.mask,Ki)&&Wr.push(Ki):Wr.push(Ki)});else{var Cr=Qy([Yr,ai],en/2,Xt/2,JSON.parse(Tt),Fr,ei);xt.mask?_f(xt.mask,Cr)&&Wr.push(Cr):Wr.push(Cr)}}}return Ft(Wr)}function Qy(vt,_t,xt,Tt,At,Pt){for(var Nt=[],Vt=0;Vt<6;Vt++){var Gt=vt[0]+_t*At[Vt],qt=vt[1]+xt*Pt[Vt];Nt.push([Gt,qt])}return Nt.push(Nt[0].slice()),Ot([Nt],Tt)}function ev(vt,_t,xt,Tt,At,Pt){for(var Nt=[],Vt=0;Vt<6;Vt++){var Gt=[];Gt.push(vt),Gt.push([vt[0]+_t*At[Vt],vt[1]+xt*Pt[Vt]]),Gt.push([vt[0]+_t*At[(Vt+1)%6],vt[1]+xt*Pt[(Vt+1)%6]]),Gt.push(vt),Nt.push(Ot([Gt],Tt))}return Nt}function tv(vt){return Wt(vt)}function p_(vt){return Ot(vt&&vt.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function nv(vt,_t,xt){return xt===void 0&&(xt={}),function(Tt,At,Pt,Nt){Nt===void 0&&(Nt={});for(var Vt=[],Gt=Tt[0],qt=Tt[1],en=Tt[2],Xt=Tt[3],an=At/mo([Gt,qt],[en,qt],Nt)*(en-Gt),_n=Pt/mo([Gt,qt],[Gt,Xt],Nt)*(Xt-qt),bn=en-Gt,En=Xt-qt,un=Math.floor(bn/an),Vn=Math.floor(En/_n),nr=(En-Vn*_n)/2,xn=Gt+(bn-un*an)/2,zn=0;zn<un;zn++){for(var jn=qt+nr,qn=0;qn<Vn;qn++){var Gn=Ot([[[xn,jn],[xn,jn+_n],[xn+an,jn+_n],[xn+an,jn],[xn,jn]]],Nt.properties);Nt.mask?C1(Nt.mask,Gn)&&Vt.push(Gn):Vt.push(Gn),jn+=_n}xn+=an}return Ft(Vt)}(vt,_t,_t,xt)}function a1(vt,_t,xt){xt===void 0&&(xt={});for(var Tt=[],At=_t/mo([vt[0],vt[1]],[vt[2],vt[1]],xt)*(vt[2]-vt[0]),Pt=_t/mo([vt[0],vt[1]],[vt[0],vt[3]],xt)*(vt[3]-vt[1]),Nt=0,Vt=vt[0];Vt<=vt[2];){for(var Gt=0,qt=vt[1];qt<=vt[3];){var en=null,Xt=null;Nt%2==0&&Gt%2==0?(en=Ot([[[Vt,qt],[Vt,qt+Pt],[Vt+At,qt],[Vt,qt]]],xt.properties),Xt=Ot([[[Vt,qt+Pt],[Vt+At,qt+Pt],[Vt+At,qt],[Vt,qt+Pt]]],xt.properties)):Nt%2==0&&Gt%2==1?(en=Ot([[[Vt,qt],[Vt+At,qt+Pt],[Vt+At,qt],[Vt,qt]]],xt.properties),Xt=Ot([[[Vt,qt],[Vt,qt+Pt],[Vt+At,qt+Pt],[Vt,qt]]],xt.properties)):Gt%2==0&&Nt%2==1?(en=Ot([[[Vt,qt],[Vt,qt+Pt],[Vt+At,qt+Pt],[Vt,qt]]],xt.properties),Xt=Ot([[[Vt,qt],[Vt+At,qt+Pt],[Vt+At,qt],[Vt,qt]]],xt.properties)):Gt%2==1&&Nt%2==1&&(en=Ot([[[Vt,qt],[Vt,qt+Pt],[Vt+At,qt],[Vt,qt]]],xt.properties),Xt=Ot([[[Vt,qt+Pt],[Vt+At,qt+Pt],[Vt+At,qt],[Vt,qt+Pt]]],xt.properties)),xt.mask?(_f(xt.mask,en)&&Tt.push(en),_f(xt.mask,Xt)&&Tt.push(Xt)):(Tt.push(en),Tt.push(Xt)),qt+=Pt,Gt++}Nt++,Vt+=At}return Ft(Tt)}s1.invert=function(vt){return function(_t,xt){var Tt=pg(_t*_t+xt*xt),At=vt(Tt),Pt=za(At),Nt=Fa(At);return[fp(_t*Pt,Tt*Nt),Ku(Tt&&xt*Pt/Tt)]}}(function(vt){return vt}),nt.along=function(vt,_t,xt){xt===void 0&&(xt={});for(var Tt=Un(vt).coordinates,At=0,Pt=0;Pt<Tt.length&&!(_t>=At&&Pt===Tt.length-1);Pt++){if(At>=_t){var Nt=_t-At;if(Nt){var Vt=Qa(Tt[Pt],Tt[Pt-1])-180;return Ys(Tt[Pt],Nt,Vt,xt)}return kt(Tt[Pt])}At+=mo(Tt[Pt],Tt[Pt+1],xt)}return kt(Tt[Tt.length-1])},nt.angle=function(vt,_t,xt,Tt){if(Tt===void 0&&(Tt={}),!pn(Tt))throw new Error("options is invalid");if(!vt)throw new Error("startPoint is required");if(!_t)throw new Error("midPoint is required");if(!xt)throw new Error("endPoint is required");var At=vt,Pt=_t,Nt=xt,Vt=mn(Tt.mercator!==!0?Qa(At,Pt):Wd(At,Pt)),Gt=mn(Tt.mercator!==!0?Qa(Nt,Pt):Wd(Nt,Pt)),qt=Math.abs(Vt-Gt);return Tt.explementary===!0?360-qt:qt},nt.applyFilter=Xg,nt.area=Hd,nt.areaFactors=bt,nt.bbox=fn,nt.bboxClip=function(vt,_t){var xt=Un(vt),Tt=xt.type,At=vt.type==="Feature"?vt.properties:{},Pt=xt.coordinates;switch(Tt){case"LineString":case"MultiLineString":var Nt=[];return Tt==="LineString"&&(Pt=[Pt]),Pt.forEach(function(Vt){(function(Gt,qt,en){var Xt,an,_n,bn,En,un=Gt.length,Vn=ea(Gt[0],qt),nr=[];for(en||(en=[]),Xt=1;Xt<un;Xt++){for(bn=Gt[Xt-1],an=_n=ea(En=Gt[Xt],qt);;){if(!(Vn|an)){nr.push(bn),an!==_n?(nr.push(En),Xt<un-1&&(en.push(nr),nr=[])):Xt===un-1&&nr.push(En);break}if(Vn&an)break;Vn?Vn=ea(bn=$f(bn,En,Vn,qt),qt):an=ea(En=$f(bn,En,an,qt),qt)}Vn=_n}nr.length&&en.push(nr)})(Vt,_t,Nt)}),Nt.length===1?Dt(Nt[0],At):Yt(Nt,At);case"Polygon":return Ot(Gd(Pt,_t),At);case"MultiPolygon":return Wt(Pt.map(function(Vt){return Gd(Vt,_t)}),At);default:throw new Error("geometry "+Tt+" not supported")}},nt.bboxPolygon=td,nt.bearing=Qa,nt.bearingToAngle=mn,nt.bearingToAzimuth=mn,nt.bezier=Rd,nt.bezierSpline=Rd,nt.booleanClockwise=Np,nt.booleanContains=function(vt,_t){var xt=Un(vt),Tt=Un(_t),At=xt.type,Pt=Tt.type,Nt=xt.coordinates,Vt=Tt.coordinates;switch(At){case"Point":switch(Pt){case"Point":return o0(Nt,Vt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"MultiPoint":switch(Pt){case"Point":return function(Gt,qt){var en,Xt=!1;for(en=0;en<Gt.coordinates.length;en++)if(o0(Gt.coordinates[en],qt.coordinates)){Xt=!0;break}return Xt}(xt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=0,Xt=qt.coordinates;en<Xt.length;en++){for(var an=Xt[en],_n=!1,bn=0,En=Gt.coordinates;bn<En.length;bn++)if(o0(an,En[bn])){_n=!0;break}if(!_n)return!1}return!0}(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"LineString":switch(Pt){case"Point":return _l(Tt,xt,{ignoreEndVertices:!0});case"LineString":return function(Gt,qt){for(var en=!1,Xt=0,an=qt.coordinates;Xt<an.length;Xt++){var _n=an[Xt];if(_l({type:"Point",coordinates:_n},Gt,{ignoreEndVertices:!0})&&(en=!0),!_l({type:"Point",coordinates:_n},Gt,{ignoreEndVertices:!1}))return!1}return en}(xt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=!1,Xt=0,an=qt.coordinates;Xt<an.length;Xt++){var _n=an[Xt];if(_l(_n,Gt,{ignoreEndVertices:!0})&&(en=!0),!_l(_n,Gt))return!1}return!!en}(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"Polygon":switch(Pt){case"Point":return go(Tt,xt,{ignoreBoundary:!0});case"LineString":return function(Gt,qt){var en=!1,Xt=0,an=fn(Gt),_n=fn(qt);if(!x1(an,_n))return!1;for(;Xt<qt.coordinates.length-1;Xt++)if(go({type:"Point",coordinates:Sv(qt.coordinates[Xt],qt.coordinates[Xt+1])},Gt,{ignoreBoundary:!0})){en=!0;break}return en}(xt,Tt);case"Polygon":return function(Gt,qt){if(Gt.type==="Feature"&&Gt.geometry===null||qt.type==="Feature"&&qt.geometry===null)return!1;var en=fn(Gt),Xt=fn(qt);if(!x1(en,Xt))return!1;for(var an=Un(qt).coordinates,_n=0,bn=an;_n<bn.length;_n++)for(var En=0,un=bn[_n];En<un.length;En++)if(!go(un[En],Gt))return!1;return!0}(xt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=0,Xt=qt.coordinates;en<Xt.length;en++)if(!go(Xt[en],Gt,{ignoreBoundary:!0}))return!1;return!0}(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanCrosses=function(vt,_t){var xt=Un(vt),Tt=Un(_t),At=xt.type,Pt=Tt.type;switch(At){case"MultiPoint":switch(Pt){case"LineString":return w1(xt,Tt);case"Polygon":return s0(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"LineString":switch(Pt){case"MultiPoint":return w1(Tt,xt);case"LineString":return function(Nt,Vt){if(ul(Nt,Vt).features.length>0)for(var Gt=0;Gt<Nt.coordinates.length-1;Gt++)for(var qt=0;qt<Vt.coordinates.length-1;qt++){var en=!0;if(qt!==0&&qt!==Vt.coordinates.length-2||(en=!1),S1(Nt.coordinates[Gt],Nt.coordinates[Gt+1],Vt.coordinates[qt],en))return!0}return!1}(xt,Tt);case"Polygon":return E1(xt,Tt);default:throw new Error("feature2 "+Pt+" geometry not supported")}case"Polygon":switch(Pt){case"MultiPoint":return s0(Tt,xt);case"LineString":return E1(Tt,xt);default:throw new Error("feature2 "+Pt+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanDisjoint=i0,nt.booleanEqual=function(vt,_t){return Un(vt).type===Un(_t).type&&new a0({precision:6}).compare(Al(vt),Al(_t))},nt.booleanIntersects=C1,nt.booleanOverlap=function(vt,_t){var xt=Un(vt),Tt=Un(_t),At=xt.type,Pt=Tt.type;if(At==="MultiPoint"&&Pt!=="MultiPoint"||(At==="LineString"||At==="MultiLineString")&&Pt!=="LineString"&&Pt!=="MultiLineString"||(At==="Polygon"||At==="MultiPolygon")&&Pt!=="Polygon"&&Pt!=="MultiPolygon")throw new Error("features must be of the same type");if(At==="Point")throw new Error("Point geometry not supported");if(new a0({precision:6}).compare(vt,_t))return!1;var Nt=0;switch(At){case"MultiPoint":for(var Vt=0;Vt<xt.coordinates.length;Vt++)for(var Gt=0;Gt<Tt.coordinates.length;Gt++){var qt=xt.coordinates[Vt],en=Tt.coordinates[Gt];if(qt[0]===en[0]&&qt[1]===en[1])return!0}return!1;case"LineString":case"MultiLineString":qr(vt,function(Xt){qr(_t,function(an){pd(Xt,an).features.length&&Nt++})});break;case"Polygon":case"MultiPolygon":qr(vt,function(Xt){qr(_t,function(an){ul(Xt,an).features.length&&Nt++})})}return Nt>0},nt.booleanParallel=function(vt,_t){if(!vt)throw new Error("line1 is required");if(!_t)throw new Error("line2 is required");if(h0(vt,"line1")!=="LineString")throw new Error("line1 must be a LineString");if(h0(_t,"line2")!=="LineString")throw new Error("line2 must be a LineString");for(var xt=Bc(Al(vt)).features,Tt=Bc(Al(_t)).features,At=0;At<xt.length;At++){var Pt=xt[At].geometry.coordinates;if(!Tt[At])break;if(!jg(Pt,Tt[At].geometry.coordinates))return!1}return!0},nt.booleanPointInPolygon=go,nt.booleanPointOnLine=_l,nt.booleanWithin=Ap,nt.buffer=function(vt,_t,xt){var Tt=(xt=xt||{}).units||"kilometers",At=xt.steps||8;if(!vt)throw new Error("geojson is required");if(typeof xt!="object")throw new Error("options must be an object");if(typeof At!="number")throw new Error("steps must be an number");if(_t===void 0)throw new Error("radius is required");if(At<=0)throw new Error("steps must be greater than 0");var Pt=[];switch(vt.type){case"GeometryCollection":return gr(vt,function(Nt){var Vt=vf(Nt,_t,Tt,At);Vt&&Pt.push(Vt)}),Ft(Pt);case"FeatureCollection":return rr(vt,function(Nt){var Vt=vf(Nt,_t,Tt,At);Vt&&rr(Vt,function(Gt){Gt&&Pt.push(Gt)})}),Ft(Pt)}return vf(vt,_t,Tt,At)},nt.center=Ga,nt.centerMean=y0,nt.centerMedian=function(vt,_t){if(_t===void 0&&(_t={}),!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.counter||10;if(!Ln(xt))throw new Error("counter must be a number");var Tt=_t.weight,At=y0(vt,{weight:_t.weight}),Pt=Ft([]);rr(vt,function(Vt){var Gt;Pt.features.push(Ll(Vt,{properties:{weight:(Gt=Vt.properties)===null||Gt===void 0?void 0:Gt[Tt]}}))});var Nt={tolerance:_t.tolerance,medianCandidates:[]};return V1(At.geometry.coordinates,[0,0],Pt,Nt,xt)},nt.centerOfMass=function vt(_t,xt){switch(xt===void 0&&(xt={}),or(_t)){case"Point":return kt(cn(_t),xt.properties);case"Polygon":var Tt=[];vn(_t,function(zn){Tt.push(zn)});var At,Pt,Nt,Vt,Gt,qt,en,Xt,an=Ll(_t,{properties:xt.properties}),_n=an.geometry.coordinates,bn=0,En=0,un=0,Vn=Tt.map(function(zn){return[zn[0]-_n[0],zn[1]-_n[1]]});for(At=0;At<Tt.length-1;At++)Vt=(Pt=Vn[At])[0],qt=Pt[1],Gt=(Nt=Vn[At+1])[0],un+=Xt=Vt*(en=Nt[1])-Gt*qt,bn+=(Vt+Gt)*Xt,En+=(qt+en)*Xt;if(un===0)return an;var nr=1/(6*(.5*un));return kt([_n[0]+nr*bn,_n[1]+nr*En],xt.properties);default:var xn=No(_t);return xn?vt(xn,{properties:xt.properties}):Ll(_t,{properties:xt.properties})}},nt.centroid=Ll,nt.circle=Dc,nt.cleanCoords=Al,nt.clone=Ho,nt.clusterEach=_0,nt.clusterReduce=Yg,nt.clusters=Yv,nt.clustersDbscan=function(vt,_t,xt){xt===void 0&&(xt={}),xt.mutate!==!0&&(vt=Ho(vt)),xt.minPoints=xt.minPoints||3;var Tt=new Lv.DBSCAN,At=Tt.run(fr(vt),kn(_t,xt.units),xt.minPoints,mo),Pt=-1;return At.forEach(function(Nt){Pt++,Nt.forEach(function(Vt){var Gt=vt.features[Vt];Gt.properties||(Gt.properties={}),Gt.properties.cluster=Pt,Gt.properties.dbscan="core"})}),Tt.noise.forEach(function(Nt){var Vt=vt.features[Nt];Vt.properties||(Vt.properties={}),Vt.properties.cluster?Vt.properties.dbscan="edge":Vt.properties.dbscan="noise"}),vt},nt.clustersKmeans=function(vt,_t){_t===void 0&&(_t={});var xt=vt.features.length;_t.numberOfClusters=_t.numberOfClusters||Math.round(Math.sqrt(xt/2)),_t.numberOfClusters>xt&&(_t.numberOfClusters=xt),_t.mutate!==!0&&(vt=Ho(vt));var Tt=fr(vt),At=Tt.slice(0,_t.numberOfClusters),Pt=u0(Tt,_t.numberOfClusters,At),Nt={};return Pt.centroids.forEach(function(Vt,Gt){Nt[Gt]=Vt}),rr(vt,function(Vt,Gt){var qt=Pt.idxs[Gt];Vt.properties.cluster=qt,Vt.properties.centroid=Nt[qt]}),vt},nt.collect=function(vt,_t,xt,Tt){var At=Or(6),Pt=_t.features.map(function(Nt){var Vt;return{minX:Nt.geometry.coordinates[0],minY:Nt.geometry.coordinates[1],maxX:Nt.geometry.coordinates[0],maxY:Nt.geometry.coordinates[1],property:(Vt=Nt.properties)===null||Vt===void 0?void 0:Vt[xt]}});return At.load(Pt),vt.features.forEach(function(Nt){Nt.properties||(Nt.properties={});var Vt=fn(Nt),Gt=At.search({minX:Vt[0],minY:Vt[1],maxX:Vt[2],maxY:Vt[3]}),qt=[];Gt.forEach(function(en){go([en.minX,en.minY],Nt)&&qt.push(en.property)}),Nt.properties[Tt]=qt}),vt},nt.collectionOf=Qn,nt.combine=function(vt){var _t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return rr(vt,function(xt){var Tt,At,Pt,Nt;switch((Nt=xt.geometry)===null||Nt===void 0?void 0:Nt.type){case"Point":_t.MultiPoint.coordinates.push(xt.geometry.coordinates),_t.MultiPoint.properties.push(xt.properties);break;case"MultiPoint":(Tt=_t.MultiPoint.coordinates).push.apply(Tt,xt.geometry.coordinates),_t.MultiPoint.properties.push(xt.properties);break;case"LineString":_t.MultiLineString.coordinates.push(xt.geometry.coordinates),_t.MultiLineString.properties.push(xt.properties);break;case"MultiLineString":(At=_t.MultiLineString.coordinates).push.apply(At,xt.geometry.coordinates),_t.MultiLineString.properties.push(xt.properties);break;case"Polygon":_t.MultiPolygon.coordinates.push(xt.geometry.coordinates),_t.MultiPolygon.properties.push(xt.properties);break;case"MultiPolygon":(Pt=_t.MultiPolygon.coordinates).push.apply(Pt,xt.geometry.coordinates),_t.MultiPolygon.properties.push(xt.properties)}}),Ft(Object.keys(_t).filter(function(xt){return _t[xt].coordinates.length}).sort().map(function(xt){return wt({type:xt,coordinates:_t[xt].coordinates},{collectedProperties:_t[xt].properties})}))},nt.concave=function(vt,_t){_t===void 0&&(_t={});var xt=_t.maxEdge||1/0,Tt=Ka(function(Pt){var Nt=[],Vt={};return rr(Pt,function(Gt){if(Gt.geometry){var qt=Gt.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(Vt,qt)||(Nt.push(Gt),Vt[qt]=!0)}}),Ft(Nt)}(vt));if(Tt.features=Tt.features.filter(function(Pt){var Nt=Pt.geometry.coordinates[0][0],Vt=Pt.geometry.coordinates[0][1],Gt=Pt.geometry.coordinates[0][2],qt=mo(Nt,Vt,_t),en=mo(Vt,Gt,_t),Xt=mo(Nt,Gt,_t);return qt<=xt&&en<=xt&&Xt<=xt}),Tt.features.length<1)return null;var At=ed(Tt);return At.coordinates.length===1&&(At.coordinates=At.coordinates[0],At.type="Polygon"),wt(At)},nt.containsNumber=On,nt.convertArea=In,nt.convertDistance=kn,nt.convertLength=kn,nt.convex=No,nt.coordAll=fr,nt.coordEach=vn,nt.coordReduce=yr,nt.createBins=b0,nt.degrees2radians=Tn,nt.degreesToRadians=Tn,nt.destination=Ys,nt.difference=function(vt,_t){var xt=Un(vt),Tt=Un(_t),At=vt.properties||{},Pt=Nh.difference(xt.coordinates,Tt.coordinates);return Pt.length===0?null:Pt.length===1?Ot(Pt[0],At):Wt(Pt,At)},nt.dissolve=function(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.propertyName;Qn(vt,"Polygon","dissolve");var Tt=[];if(!_t.propertyName)return jd(Wt(Nh.union.apply(null,vt.features.map(function(Gt){return Gt.geometry.coordinates}))));var At={};rr(vt,function(Gt){Object.prototype.hasOwnProperty.call(At,Gt.properties[xt])||(At[Gt.properties[xt]]=[]),At[Gt.properties[xt]].push(Gt)});for(var Pt=Object.keys(At),Nt=0;Nt<Pt.length;Nt++){var Vt=Wt(Nh.union.apply(null,At[Pt[Nt]].map(function(Gt){return Gt.geometry.coordinates})));Vt.properties[xt]=Pt[Nt],Tt.push(Vt)}return jd(Ft(Tt))},nt.distance=mo,nt.distanceToDegrees=hn,nt.distanceToRadians=on,nt.distanceWeight=U1,nt.earthRadius=rt,nt.ellipse=z1,nt.envelope=kh,nt.explode=xo,nt.factors=it,nt.feature=wt,nt.featureCollection=Ft,nt.featureEach=rr,nt.featureOf=Bn,nt.featureReduce=wr,nt.filterProperties=ny,nt.findPoint=Pn,nt.findSegment=ir,nt.flatten=jd,nt.flattenEach=Pr,nt.flattenReduce=lr,nt.flip=function(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.mutate;if(!vt)throw new Error("geojson is required");return xt!==!1&&xt!==void 0||(vt=Ho(vt)),vn(vt,function(Tt){var At=Tt[0],Pt=Tt[1];Tt[0]=Pt,Tt[1]=At}),vt},nt.geojsonType=cr,nt.geomEach=gr,nt.geomReduce=Lr,nt.geometry=Et,nt.geometryCollection=Qt,nt.getCluster=ty,nt.getCoord=cn,nt.getCoords=Nn,nt.getGeom=Un,nt.getType=or,nt.greatCircle=function(vt,_t,xt){if(typeof(xt=xt||{})!="object")throw new Error("options is invalid");var Tt=xt.properties,At=xt.npoints,Pt=xt.offset;return vt=cn(vt),_t=cn(_t),Tt=Tt||{},At=At||100,Pt=Pt||10,new yi({x:vt[0],y:vt[1]},{x:_t[0],y:_t[1]},Tt).Arc(At,{offset:Pt}).json()},nt.helpers=mr,nt.hexGrid=Jy,nt.inside=go,nt.interpolate=function(vt,_t,xt){if(typeof(xt=xt||{})!="object")throw new Error("options is invalid");var Tt=xt.gridType,At=xt.property,Pt=xt.weight;if(!vt)throw new Error("points is required");if(Qn(vt,"Point","input must contain Points"),!_t)throw new Error("cellSize is required");if(Pt!==void 0&&typeof Pt!="number")throw new Error("weight must be a number");At=At||"elevation",Tt=Tt||"square",Pt=Pt||1;var Nt,Vt=fn(vt);switch(Tt){case"point":case"points":Nt=Of(Vt,_t,xt);break;case"square":case"squares":Nt=nv(Vt,_t,xt);break;case"hex":case"hexes":Nt=Jy(Vt,_t,xt);break;case"triangle":case"triangles":Nt=a1(Vt,_t,xt);break;default:throw new Error("invalid gridType")}var Gt=[];return rr(Nt,function(qt){var en=0,Xt=0;rr(vt,function(_n){var bn,En=mo(Tt==="point"?qt:Ll(qt),_n,xt);if(At!==void 0&&(bn=_n.properties[At]),bn===void 0&&(bn=_n.geometry.coordinates[2]),bn===void 0)throw new Error("zValue is missing");En===0&&(en=bn);var un=1/Math.pow(En,Pt);Xt+=un,en+=un*bn});var an=Ho(qt);an.properties[At]=en/Xt,Gt.push(an)}),Ft(Gt)},nt.intersect=_f,nt.invariant=hr,nt.isNumber=Ln,nt.isObject=pn,nt.isobands=function(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.zProperty||"elevation",At=xt.commonProperties||{},Pt=xt.breaksProperties||[];if(Qn(vt,"Point","Input must contain Points"),!_t)throw new Error("breaks is required");if(!Array.isArray(_t))throw new Error("breaks is not an Array");if(!pn(At))throw new Error("commonProperties is not an Object");if(!Array.isArray(Pt))throw new Error("breaksProperties is not an Array");var Nt=Um(vt,{zProperty:Tt,flip:!0}),Vt=function(Gt,qt,en){for(var Xt=[],an=1;an<qt.length;an++){var _n=+qt[an-1],bn=+qt[an],En=bv(Bp(md(Gt,_n,bn-_n))),un={};un.groupedRings=En,un[en]=_n+"-"+bn,Xt.push(un)}return Xt}(Nt,_t,Tt);return Ft((Vt=function(Gt,qt,en){var Xt=fn(en),an=Xt[2]-Xt[0],_n=Xt[3]-Xt[1],bn=Xt[0],En=Xt[1],un=qt[0].length-1,Vn=qt.length-1,nr=an/un,xn=_n/Vn,zn=function(jn){jn[0]=jn[0]*nr+bn,jn[1]=jn[1]*xn+En};return Gt.forEach(function(jn){jn.groupedRings.forEach(function(qn){qn.forEach(function(Gn){Gn.forEach(zn)})})}),Gt}(Vt,Nt,vt)).map(function(Gt,qt){if(Pt[qt]&&!pn(Pt[qt]))throw new Error("Each mappedProperty is required to be an Object");var en=di({},At,Pt[qt]);return en[Tt]=Gt[Tt],Wt(Gt.groupedRings,en)}))},nt.isolines=function(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.zProperty||"elevation",At=xt.commonProperties||{},Pt=xt.breaksProperties||[];if(Qn(vt,"Point","Input must contain Points"),!_t)throw new Error("breaks is required");if(!Array.isArray(_t))throw new Error("breaks must be an Array");if(!pn(At))throw new Error("commonProperties must be an Object");if(!Array.isArray(Pt))throw new Error("breaksProperties must be an Array");var Nt=Sn(vt,{zProperty:Tt,flip:!0});return Ft(function(Vt,Gt,qt){var en=fn(qt),Xt=en[2]-en[0],an=en[3]-en[1],_n=en[0],bn=en[1],En=Gt[0].length-1,un=Gt.length-1,Vn=Xt/En,nr=an/un,xn=function(zn){zn[0]=zn[0]*Vn+_n,zn[1]=zn[1]*nr+bn};return Vt.forEach(function(zn){vn(zn,xn)}),Vt}(function(Vt,Gt,qt,en,Xt){for(var an=[],_n=1;_n<Gt.length;_n++){var bn=+Gt[_n],En=di({},en,Xt[_n]);En[qt]=bn;var un=Yt(ki(Vt,bn),En);an.push(un)}return an}(Nt,_t,Tt,At,Pt),Nt,vt))},nt.kinks=function(vt){var _t,xt,Tt={type:"FeatureCollection",features:[]};if((xt=vt.type==="Feature"?vt.geometry:vt).type==="LineString")_t=[xt.coordinates];else if(xt.type==="MultiLineString")_t=xt.coordinates;else if(xt.type==="MultiPolygon")_t=[].concat.apply([],xt.coordinates);else{if(xt.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");_t=xt.coordinates}return _t.forEach(function(At){_t.forEach(function(Pt){for(var Nt=0;Nt<At.length-1;Nt++)for(var Vt=Nt;Vt<Pt.length-1;Vt++)if(!(At===Pt&&(Math.abs(Nt-Vt)===1||Nt===0&&Vt===At.length-2&&At[Nt][0]===At[At.length-1][0]&&At[Nt][1]===At[At.length-1][1]))){var Gt=Hm(At[Nt][0],At[Nt][1],At[Nt+1][0],At[Nt+1][1],Pt[Vt][0],Pt[Vt][1],Pt[Vt+1][0],Pt[Vt+1][1]);Gt&&Tt.features.push(kt([Gt[0],Gt[1]]))}})}),Tt},nt.length=Lh,nt.lengthToDegrees=hn,nt.lengthToRadians=on,nt.lineArc=sh,nt.lineChunk=function(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.units,At=xt.reverse;if(!vt)throw new Error("geojson is required");if(_t<=0)throw new Error("segmentLength must be greater than 0");var Pt=[];return Pr(vt,function(Nt){At&&(Nt.geometry.coordinates=Nt.geometry.coordinates.reverse()),function(Vt,Gt,qt,en){var Xt=Lh(Vt,{units:qt});if(Xt<=Gt)return en(Vt);var an=Xt/Gt;Number.isInteger(an)||(an=Math.floor(an)+1);for(var _n=0;_n<an;_n++)en(Pf(Vt,Gt*_n,Gt*(_n+1),{units:qt}),_n)}(Nt,_t,Tt,function(Vt){Pt.push(Vt)})}),Ft(Pt)},nt.lineDistance=Lh,nt.lineEach=pr,nt.lineIntersect=ul,nt.lineOffset=function(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.units;if(!vt)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("distance is required");var At=or(vt),Pt=vt.properties;switch(At){case"LineString":return Bf(vt,_t,Tt);case"MultiLineString":var Nt=[];return Pr(vt,function(Vt){Nt.push(Bf(Vt,_t,Tt).geometry.coordinates)}),Yt(Nt,Pt);default:throw new Error("geometry "+At+" is not supported")}},nt.lineOverlap=pd,nt.lineReduce=Er,nt.lineSegment=Bc,nt.lineSlice=function(vt,_t,xt){var Tt=Nn(xt);if(or(xt)!=="LineString")throw new Error("line must be a LineString");for(var At,Pt=ac(xt,vt),Nt=ac(xt,_t),Vt=[(At=Pt.properties.index<=Nt.properties.index?[Pt,Nt]:[Nt,Pt])[0].geometry.coordinates],Gt=At[0].properties.index+1;Gt<At[1].properties.index+1;Gt++)Vt.push(Tt[Gt]);return Vt.push(At[1].geometry.coordinates),Dt(Vt,xt.properties)},nt.lineSliceAlong=Pf,nt.lineSplit=function(vt,_t){if(!vt)throw new Error("line is required");if(!_t)throw new Error("splitter is required");var xt=or(vt),Tt=or(_t);if(xt!=="LineString")throw new Error("line must be LineString");if(Tt==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(Tt==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var At=ud(_t,{precision:7});switch(Tt){case"Point":return Oo(vt,At);case"MultiPoint":return Gi(vt,At);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Gi(vt,ul(vt,At))}},nt.lineString=Dt,nt.lineStringToPolygon=Ng,nt.lineStrings=Bt,nt.lineToPolygon=Ng,nt.mask=function(vt,_t){var xt,Tt=p_(_t),At=null;return vt.type==="FeatureCollection"?At=tv((xt=vt).features.length===2?Nh.union(xt.features[0].geometry.coordinates,xt.features[1].geometry.coordinates):Nh.union.apply(Nh,xt.features.map(function(Pt){return Pt.geometry.coordinates}))):At=tv(Nh.union(vt.geometry.coordinates)),At.geometry.coordinates.forEach(function(Pt){Tt.geometry.coordinates.push(Pt[0])}),Tt},nt.meta=nn,nt.midpoint=function(vt,_t){return Ys(vt,mo(vt,_t)/2,Qa(vt,_t))},nt.moranIndex=function(vt,_t){var xt=_t.inputField,Tt=_t.threshold||1e5,At=_t.p||2,Pt=_t.binary||!1,Nt=U1(vt,{alpha:_t.alpha||-1,binary:Pt,p:At,standardization:_t.standardization||!0,threshold:Tt}),Vt=[];rr(vt,function(qn){var Gn=qn.properties||{};Vt.push(Gn[xt])});for(var Gt=G1(Vt),qt=function(qn){for(var Gn=G1(qn),Zr=0,Fr=0,ei=qn;Fr<ei.length;Fr++){var zr=ei[Fr];Zr+=Math.pow(zr-Gn,2)}return Zr/qn.length}(Vt),en=0,Xt=0,an=0,_n=0,bn=Nt.length,En=0;En<bn;En++){for(var un=0,Vn=0;Vn<bn;Vn++)en+=Nt[En][Vn]*(Vt[En]-Gt)*(Vt[Vn]-Gt),Xt+=Nt[En][Vn],an+=Math.pow(Nt[En][Vn]+Nt[Vn][En],2),un+=Nt[En][Vn]+Nt[Vn][En];_n+=Math.pow(un,2)}var nr=en/Xt/qt,xn=-1/(bn-1),zn=(bn*bn*(an*=.5)-bn*_n+Xt*Xt*3)/((bn-1)*(bn+1)*(Xt*Xt))-xn*xn,jn=Math.sqrt(zn);return{expectedMoranIndex:xn,moranIndex:nr,stdNorm:jn,zNorm:(nr-xn)/jn}},nt.multiLineString=Yt,nt.multiPoint=Jt,nt.multiPolygon=Wt,nt.nearest=Yl,nt.nearestPoint=Yl,nt.nearestPointOnLine=ac,nt.nearestPointToLine=function(vt,_t,xt){xt===void 0&&(xt={});var Tt=xt.units,At=xt.properties||{},Pt=function(Gt){var qt=[];switch(Gt.geometry?Gt.geometry.type:Gt.type){case"GeometryCollection":return gr(Gt,function(en){en.type==="Point"&&qt.push({type:"Feature",properties:{},geometry:en})}),{type:"FeatureCollection",features:qt};case"FeatureCollection":return Gt.features=Gt.features.filter(function(en){return en.geometry.type==="Point"}),Gt;default:throw new Error("points must be a Point Collection")}}(vt);if(!Pt.features.length)throw new Error("points must contain features");if(!_t)throw new Error("line is required");if(or(_t)!=="LineString")throw new Error("line must be a LineString");var Nt=1/0,Vt=null;return rr(Pt,function(Gt){var qt=kp(Gt,_t,{units:Tt});qt<Nt&&(Nt=qt,Vt=Gt)}),Vt&&(Vt.properties=di({dist:Nt},Vt.properties,At)),Vt},nt.planepoint=function(vt,_t){var xt=cn(vt),Tt=Un(_t).coordinates[0];if(Tt.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var At=_t.properties||{},Pt=At.a,Nt=At.b,Vt=At.c,Gt=xt[0],qt=xt[1],en=Tt[0][0],Xt=Tt[0][1],an=Pt!==void 0?Pt:Tt[0][2],_n=Tt[1][0],bn=Tt[1][1],En=Nt!==void 0?Nt:Tt[1][2],un=Tt[2][0],Vn=Tt[2][1],nr=Vt!==void 0?Vt:Tt[2][2];return(nr*(Gt-en)*(qt-bn)+an*(Gt-_n)*(qt-Vn)+En*(Gt-un)*(qt-Xt)-En*(Gt-en)*(qt-Vn)-nr*(Gt-_n)*(qt-Xt)-an*(Gt-un)*(qt-bn))/((Gt-en)*(qt-bn)+(Gt-_n)*(qt-Vn)+(Gt-un)*(qt-Xt)-(Gt-en)*(qt-Vn)-(Gt-_n)*(qt-Xt)-(Gt-un)*(qt-bn))},nt.point=kt,nt.pointGrid=Of,nt.pointOnFeature=Ah,nt.pointOnLine=ac,nt.pointOnSurface=Ah,nt.pointToLineDistance=kp,nt.points=Lt,nt.pointsWithinPolygon=Fi,nt.polygon=Ot,nt.polygonSmooth=function(vt,_t){var xt=[],Tt=_t.iterations||1;if(!vt)throw new Error("inputPolys is required");return gr(vt,function(At,Pt,Nt){var Vt,Gt,qt;switch(At.type){case"Polygon":Vt=[[]];for(var en=0;en<Tt;en++)qt=[[]],Gt=At,en>0&&(Gt=Ot(Vt).geometry),Vv(Gt,qt),Vt=qt.slice(0);xt.push(Ot(Vt,Nt));break;case"MultiPolygon":Vt=[[[]]];for(var Xt=0;Xt<Tt;Xt++)qt=[[[]]],Gt=At,Xt>0&&(Gt=Wt(Vt).geometry),jv(Gt,qt),Vt=qt.slice(0);xt.push(Wt(Vt,Nt));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),Ft(xt)},nt.polygonTangents=function(vt,_t){var xt,Tt,At,Pt,Nt=Nn(vt),Vt=Nn(_t),Gt=fn(_t),qt=0,en=null;switch(Nt[0]>Gt[0]&&Nt[0]<Gt[2]&&Nt[1]>Gt[1]&&Nt[1]<Gt[3]&&(qt=(en=Yl(vt,xo(_t))).properties.featureIndex),or(_t)){case"Polygon":xt=Vt[0][qt],Tt=Vt[0][0],en!==null&&en.geometry.coordinates[1]<Nt[1]&&(Tt=Vt[0][qt]),Pt=Ph(Vt[0][0],Vt[0][Vt[0].length-1],Nt);var Xt=jm(Vt[0],Nt,Pt,At,xt,Tt);xt=Xt[0],Tt=Xt[1];break;case"MultiPolygon":for(var an=0,_n=0,bn=0,En=0;En<Vt[0].length;En++){an=En;for(var un=!1,Vn=0;Vn<Vt[0][En].length;Vn++){if(_n=Vn,bn===qt){un=!0;break}bn++}if(un)break}xt=Vt[0][an][_n],Tt=Vt[0][an][_n],Pt=Ph(Vt[0][0][0],Vt[0][0][Vt[0][0].length-1],Nt),Vt.forEach(function(nr){var xn=jm(nr[0],Nt,Pt,At,xt,Tt);xt=xn[0],Tt=xn[1]})}return Ft([kt(xt),kt(Tt)])},nt.polygonToLine=Ec,nt.polygonToLineString=Ec,nt.polygonize=function(vt){var _t=wv.fromGeoJson(vt);_t.deleteDangles(),_t.deleteCutEdges();var xt=[],Tt=[];return _t.getEdgeRings().filter(function(At){return At.isValid()}).forEach(function(At){At.isHole()?xt.push(At):Tt.push(At)}),xt.forEach(function(At){Bl.findEdgeRingContaining(At,Tt)&&Tt.push(At)}),Ft(Tt.map(function(At){return At.toPolygon()}))},nt.polygons=Rt,nt.projection=Gv,nt.propEach=Tr,nt.propReduce=Mr,nt.propertiesContainsFilter=x0,nt.radians2degrees=Cn,nt.radiansToDegrees=Cn,nt.radiansToDistance=sn,nt.radiansToLength=sn,nt.random=qv,nt.randomLineString=J1,nt.randomPoint=K1,nt.randomPolygon=v0,nt.randomPosition=Up,nt.rewind=function(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.reverse||!1,Tt=_t.mutate||!1;if(!vt)throw new Error("<geojson> is required");if(typeof xt!="boolean")throw new Error("<reverse> must be a boolean");if(typeof Tt!="boolean")throw new Error("<mutate> must be a boolean");Tt===!1&&(vt=Ho(vt));var At=[];switch(vt.type){case"GeometryCollection":return gr(vt,function(Pt){Oh(Pt,xt)}),vt;case"FeatureCollection":return rr(vt,function(Pt){rr(Oh(Pt,xt),function(Nt){At.push(Nt)})}),Ft(At)}return Oh(vt,xt)},nt.rhumbBearing=Wd,nt.rhumbDestination=Nf,nt.rhumbDistance=Fd,nt.round=rn,nt.sample=function(vt,_t){if(!vt)throw new Error("featurecollection is required");if(_t==null)throw new Error("num is required");if(typeof _t!="number")throw new Error("num must be a number");return Ft(function(xt,Tt){for(var At,Pt,Nt=xt.slice(0),Vt=xt.length,Gt=Vt-Tt;Vt-- >Gt;)At=Nt[Pt=Math.floor((Vt+1)*Math.random())],Nt[Pt]=Nt[Vt],Nt[Vt]=At;return Nt.slice(Gt)}(vt.features,_t))},nt.sector=function(vt,_t,xt,Tt,At){if(!pn(At=At||{}))throw new Error("options is invalid");var Pt=At.properties;if(!vt)throw new Error("center is required");if(xt==null)throw new Error("bearing1 is required");if(Tt==null)throw new Error("bearing2 is required");if(!_t)throw new Error("radius is required");if(typeof At!="object")throw new Error("options must be an object");if(Rp(xt)===Rp(Tt))return Dc(vt,_t,At);var Nt=Nn(vt),Vt=sh(vt,_t,xt,Tt,At),Gt=[[Nt]];return vn(Vt,function(qt){Gt[0].push(qt)}),Gt[0].push(Nt),Ot(Gt,Pt)},nt.segmentEach=qr,nt.segmentReduce=sr,nt.shortestPath=function(vt,_t,xt){if(!pn(xt=xt||{}))throw new Error("options is invalid");var Tt=xt.resolution,At=xt.minDistance,Pt=xt.obstacles||Ft([]);if(!vt)throw new Error("start is required");if(!_t)throw new Error("end is required");if(Tt&&!Ln(Tt)||Tt<=0)throw new Error("options.resolution must be a number, greater than 0");if(At)throw new Error("options.minDistance is not yet implemented");var Nt=cn(vt),Vt=cn(_t);switch(vt=kt(Nt),_t=kt(Vt),or(Pt)){case"FeatureCollection":if(Pt.features.length===0)return Dt([Nt,Vt]);break;case"Polygon":Pt=Ft([wt(Un(Pt))]);break;default:throw new Error("invalid obstacles")}var Gt=Pt;Gt.features.push(vt),Gt.features.push(_t);var qt=fn(v1(td(fn(Gt)),1.15));Tt||(Tt=mo([qt[0],qt[1]],[qt[2],qt[1]],xt)/100),Gt.features.pop(),Gt.features.pop();for(var en=qt[0],Xt=qt[1],an=qt[2],_n=qt[3],bn=Tt/mo([en,Xt],[an,Xt],xt)*(an-en),En=Tt/mo([en,Xt],[en,_n],xt)*(_n-Xt),un=an-en,Vn=_n-Xt,nr=Math.floor(un/bn),xn=Math.floor(Vn/En),zn=(un-nr*bn)/2,jn=[],qn=[],Gn=[],Zr=[],Fr=1/0,ei=1/0,zr=_n-(Vn-xn*En)/2,si=0;zr>=Xt;){for(var Wr=[],Gr=[],Vr=en+zn,ni=0;Vr<=an;){var Yr=kt([Vr,zr]),ai=Ov(Yr,Pt);Wr.push(ai?0:1),Gr.push(Vr+"|"+zr);var Cr=mo(Yr,vt);!ai&&Cr<Fr&&(Fr=Cr,Gn={x:ni,y:si});var Ki=mo(Yr,_t);!ai&&Ki<ei&&(ei=Ki,Zr={x:ni,y:si}),Vr+=bn,ni++}qn.push(Wr),jn.push(Gr),zr-=En,si++}var Si=new vd(qn,{diagonal:!0}),Ro=Si.grid[Gn.y][Gn.x],Wi=Si.grid[Zr.y][Zr.x],ho=Ug.search(Si,Ro,Wi),is=[Nt];return ho.forEach(function(Ws){var gl=jn[Ws.x][Ws.y].split("|");is.push([+gl[0],+gl[1]])}),is.push(Vt),Al(Dt(is))},nt.simplify=function(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.tolerance!==void 0?_t.tolerance:1,Tt=_t.highQuality||!1,At=_t.mutate||!1;if(!vt)throw new Error("geojson is required");if(xt&&xt<0)throw new Error("invalid tolerance");return At!==!0&&(vt=Ho(vt)),gr(vt,function(Pt){(function(Nt,Vt,Gt){var qt=Nt.type;if(qt==="Point"||qt==="MultiPoint")return Nt;Al(Nt,!0);var en=Nt.coordinates;switch(qt){case"LineString":Nt.coordinates=au(en,Vt,Gt);break;case"MultiLineString":Nt.coordinates=en.map(function(Xt){return au(Xt,Vt,Gt)});break;case"Polygon":Nt.coordinates=nh(en,Vt,Gt);break;case"MultiPolygon":Nt.coordinates=en.map(function(Xt){return nh(Xt,Vt,Gt)})}})(Pt,xt,Tt)}),vt},nt.square=nd,nt.squareGrid=nv,nt.standardDeviationalEllipse=function(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.steps||64,Tt=_t.weight,At=_t.properties||{};if(!Ln(xt))throw new Error("steps must be a number");if(!pn(At))throw new Error("properties must be a number");var Pt=fr(vt).length,Nt=y0(vt,{weight:Tt}),Vt=0,Gt=0,qt=0;rr(vt,function(Gn){var Zr=Gn.properties[Tt]||1,Fr=j1(Nn(Gn),Nn(Nt));Vt+=Math.pow(Fr.x,2)*Zr,Gt+=Math.pow(Fr.y,2)*Zr,qt+=Fr.x*Fr.y*Zr});var en=Vt-Gt,Xt=Math.sqrt(Math.pow(en,2)+4*Math.pow(qt,2)),an=2*qt,_n=Math.atan((en+Xt)/an),bn=180*_n/Math.PI,En=0,un=0,Vn=0;rr(vt,function(Gn){var Zr=Gn.properties[Tt]||1,Fr=j1(Nn(Gn),Nn(Nt));En+=Math.pow(Fr.x*Math.cos(_n)-Fr.y*Math.sin(_n),2)*Zr,un+=Math.pow(Fr.x*Math.sin(_n)+Fr.y*Math.cos(_n),2)*Zr,Vn+=Zr});var nr=Math.sqrt(2*En/Vn),xn=Math.sqrt(2*un/Vn),zn=z1(Nt,nr,xn,{units:"degrees",angle:bn,steps:xt,properties:At}),jn=Fi(vt,Ft([zn])),qn={meanCenterCoordinates:Nn(Nt),semiMajorAxis:nr,semiMinorAxis:xn,numberOfFeatures:Pt,angle:bn,percentageWithinEllipse:100*fr(jn).length/Pt};return zn.properties.standardDeviationalEllipse=qn,zn},nt.tag=function(vt,_t,xt,Tt){return vt=Ho(vt),_t=Ho(_t),rr(vt,function(At){At.properties||(At.properties={}),rr(_t,function(Pt){At.properties[Tt]===void 0&&go(At,Pt)&&(At.properties[Tt]=Pt.properties[xt])})}),vt},nt.tesselate=function(vt){if(!vt.geometry||vt.geometry.type!=="Polygon"&&vt.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var _t={type:"FeatureCollection",features:[]};return vt.geometry.type==="Polygon"?_t.features=wc(vt.geometry.coordinates):vt.geometry.coordinates.forEach(function(xt){_t.features=_t.features.concat(wc(xt))}),_t},nt.tin=Ka,nt.toMercator=W1,nt.toWgs84=q1,nt.transformRotate=y1,nt.transformScale=v1,nt.transformTranslate=function(vt,_t,xt,Tt){if(!pn(Tt=Tt||{}))throw new Error("options is invalid");var At=Tt.units,Pt=Tt.zTranslation,Nt=Tt.mutate;if(!vt)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("distance is required");if(Pt&&typeof Pt!="number"&&isNaN(Pt))throw new Error("zTranslation is not a number");if(Pt=Pt!==void 0?Pt:0,_t===0&&Pt===0)return vt;if(xt==null||isNaN(xt))throw new Error("direction is required");return _t<0&&(_t=-_t,xt+=180),Nt!==!1&&Nt!==void 0||(vt=Ho(vt)),vn(vt,function(Vt){var Gt=Nn(Nf(Vt,_t,xt,{units:At}));Vt[0]=Gt[0],Vt[1]=Gt[1],Pt&&Vt.length===3&&(Vt[2]+=Pt)}),vt},nt.triangleGrid=a1,nt.truncate=ud,nt.union=function(vt,_t,xt){xt===void 0&&(xt={});var Tt=Un(vt),At=Un(_t),Pt=Nh.union(Tt.coordinates,At.coordinates);return Pt.length===0?null:Pt.length===1?Ot(Pt[0],xt.properties):Wt(Pt,xt.properties)},nt.unitsFactors=st,nt.unkinkPolygon=function(vt){var _t=[];return Pr(vt,function(xt){xt.geometry.type==="Polygon"&&rr(Rg(xt),function(Tt){_t.push(Ot(Tt.geometry.coordinates,xt.properties))})}),Ft(_t)},nt.validateBBox=Hn,nt.validateId=yn,nt.voronoi=function(vt,_t){if(!pn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.bbox||[-180,-85,180,85];if(!vt)throw new Error("points is required");if(!Array.isArray(xt))throw new Error("bbox is invalid");return Qn(vt,"Point","points"),Ft(function(){var Tt=Mv,At=P1,Pt=null;function Nt(Vt){return new m0(Vt.map(function(Gt,qt){var en=[Math.round(Tt(Gt,qt,Vt)/ta)*ta,Math.round(At(Gt,qt,Vt)/ta)*ta];return en.index=qt,en.data=Gt,en}),Pt)}return Nt.polygons=function(Vt){return Nt(Vt).polygons()},Nt.links=function(Vt){return Nt(Vt).links()},Nt.triangles=function(Vt){return Nt(Vt).triangles()},Nt.x=function(Vt){return arguments.length?(Tt=typeof Vt=="function"?Vt:I1(+Vt),Nt):Tt},Nt.y=function(Vt){return arguments.length?(At=typeof Vt=="function"?Vt:I1(+Vt),Nt):At},Nt.extent=function(Vt){return arguments.length?(Pt=Vt==null?null:[[+Vt[0][0],+Vt[0][1]],[+Vt[1][0],+Vt[1][1]]],Nt):Pt&&[[Pt[0][0],Pt[0][1]],[Pt[1][0],Pt[1][1]]]},Nt.size=function(Vt){return arguments.length?(Pt=Vt==null?null:[[0,0],[+Vt[0],+Vt[1]]],Nt):Pt&&[Pt[1][0]-Pt[0][0],Pt[1][1]-Pt[0][1]]},Nt}().x(function(Tt){return Tt.geometry.coordinates[0]}).y(function(Tt){return Tt.geometry.coordinates[1]}).extent([[xt[0],xt[1]],[xt[2],xt[3]]]).polygons(vt.features).map(Hv))},nt.within=Fi,Object.defineProperty(nt,"__esModule",{value:!0})});const _hoisted_1$f={class:"content"},_hoisted_2$d=["innerHTML"],_hoisted_3$b=createBaseVNode("div",{id:"map"},null,-1),_hoisted_4$a=["innerHTML"],_sfc_main$h=defineComponent({__name:"Map.ce",props:{overlay:{type:String},zoom:{type:Number,default:2},center:{type:String,default:"55.4,6.7"},marker:{type:Boolean},basemaps:{type:String,default:"OpenStreetMap"},caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},entities:{type:String},preferGeojson:{type:Boolean},popupOnHover:{type:Boolean},zoomOnClick:{type:Boolean},scrollWheelZoom:{type:Boolean},cards:{type:String},essayBase:{type:String}},setup(nt){const rt=nt,it=window.turf,st={iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon.png",iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",shadowSize:[41,41]},bt={CartoDB_DarkMatter:["https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterNoLabels:["https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterOnlyLabels:["https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Positron:["https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronNoLabels:["https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronOnlyLabels:["https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Voyager:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerNoLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerOnlyLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerLabelsUnder:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],Esri_DeLorme:["https://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Copyright: &copy;2012 DeLorme",minZoom:1,maxZoom:11}],Esri_NatGeoWorldMap:["https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",maxZoom:16}],Esri_OceanBasemap:["https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",maxZoom:13}],Esri_WorldGrayCanvas:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}],Esri_WorldImagery:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}],Esri_WorldPhysical:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",{maxZoom:8,attribution:"Tiles &copy; Esri &mdash; Source: US National Park Service"}],Esri_WorldShadedRelief:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri",maxZoom:13}],Esri_WorldStreetMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}],Esri_WorldTerrain:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS",maxZoom:13}],Esri_WorldTopoMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}],MtbMap:["http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &amp; USGS'}],OpenStreetMap:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}],OpenStreetMap_DE:["https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_France:["https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; OpenStreetMap France | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_HOT:["https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>',maxZoom:19}],OpenStreetMap_Mapnik:["https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}],OpenTopoMap:["https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}],OPNVKarte:["https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",{attribution:'Map <a href="https://memomaps.de/">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}],Stadia_AlidadeSmooth:["https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_AlidadeSmoothDark:["https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_OSMBright:["https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_Outdoors:["https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}],Stamen_Terrain:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainLabels:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_Toner:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerLite:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_Watercolor:["https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",{subdomains:"abcd",minZoom:1,maxZoom:16,ext:"jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],USGS_USTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImagery:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImageryTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}]},wt=ref(null),Et=computed(()=>{var fn,cn;return(cn=(fn=wt.value)==null?void 0:fn.getRootNode())==null?void 0:cn.host}),kt=computed(()=>{var fn;return(fn=wt==null?void 0:wt.value)==null?void 0:fn.parentNode}),Lt=computed(()=>{var fn;return(fn=kt.value)==null?void 0:fn.querySelector(".content")}),Ot=ref(),Rt=ref(),Dt=ref([]),Bt=ref(),Ft=ref([]),Yt=ref(),Jt=ref(),Wt=ref(),Qt=ref(10),rn=ref(),sn=ref(!1),on=ref(),hn=ref();watch$1(Et,()=>Cn()),onMounted(()=>{let fn=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");fn&&(Ot.value=new GithubClient(fn)),Tn(),Cn()});const mn=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Cn(){Et.value.classList.add("ve-component"),Et.value.classList.add(mn),mn==="full"?Et.value.style.width="100%":(Et.value.style.float=mn,Et.value.style.width="calc(50% - 16px)"),Et.value.style.width=window.getComputedStyle(Et.value).width,rt.sticky&&makeSticky(Et.value),Lt.value.style.width=isMobile()?"100%":rt.width||"100%",nextTick(()=>{let fn=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),cn=fn;if(rt.sticky&&mn==="full"){let Nn=Math.round(window.innerHeight*.4);cn=Math.min(Nn,fn)}Lt.value.style.width=`${fn}px`,Lt.value.style.height=`${cn}px`,Et.value.style.height=`${rt.caption?cn+32:cn}px`,In()})}watch$1(rt,()=>Tn());function Tn(){Qt.value=rt.zoom,rt.cards&&kn()}function kn(){let fn=[];if(rt.cards){let cn=document.getElementById(rt.cards);cn&&cn.querySelectorAll(".card").forEach(async Nn=>{var cr;let On=Array.from(Nn.querySelectorAll("li")).filter(Bn=>Bn.innerHTML.trim().indexOf("coords:")===0).map(Bn=>Bn.innerHTML.split(":")[1].trim()).pop()||"";if(On){let Bn=Nn.querySelector("ul.card-metadata");Bn&&((cr=Bn.parentElement)==null||cr.removeChild(Bn)),fn.push({coords:Pr(On),caption:Nn.innerHTML})}})}fn.length>0&&(Ft.value=[...Ft.value,...fn])}watch$1(Ft,async()=>{let fn=await Promise.all(Ft.value),cn=fn.filter(Qn=>Qn.geojson&&Qn.preferGeojson).map(Qn=>{if(Qn.geojson.indexOf("http")!==0)if(Qn.geojson[0]==="/"){let[Un,or,...hr]=Qn.geojson.split("/").filter(br=>br),kr=hr.join("/"),xr="main";Qn.geojson=`https://raw.githubusercontent.com/${Un}/${or}/${xr}/${kr}`}else Qn.geojson=`https://raw.githubusercontent.com/${rt.essayBase}/${Qn.geojson}`;return Qn}).map(Qn=>({url:Qn.geojson,item:Qn})),Nn=await Promise.all(cn.map(Qn=>fetch(Qn.url))),On=await Promise.all(Nn.map(Qn=>Qn.json())),cr={};for(let Qn=0;Qn<cn.length;Qn++){cn[Qn].item.id&&/^Q[0-9]+$/.test(cn[Qn].item.id)&&(cn[Qn].item.qid=cn[Qn].item.id,delete cn[Qn].item.id),On[Qn].type==="FeatureCollection"?On[Qn].features.forEach(or=>or.properties={...or.properties,...cn[Qn].item}):On[Qn].properties={...On[Qn].properties,...cn[Qn].item};let Un=cn[Qn].item.layer||"Locations";cr[Un]||(cr[Un]=[]),cr[Un].push(On[Qn])}let Bn={};fn.filter(Qn=>!Qn.geojson||!Qn.preferGeojson).filter(Qn=>!Qn.allmaps).forEach(Qn=>{let Un=Qn.layer||"Locations";Bn[Un]||(Bn[Un]=[]),Bn[Un].push(Qn)}),fn.filter(Qn=>!Qn.allmaps).forEach(Qn=>{let Un=Qn.layer||"Locations";cr[Un]?Bn[Un]&&(cr[Un].push(vn(Bn[Un])),delete Bn[Un]):(cr[Un]=[vn(Bn[Un])],delete Bn[Un])}),Jt.value=fn.filter(Qn=>Qn.allmaps).map(Qn=>({name:Qn.layer||"Image layer",disabled:Qn.disabled,layer:L$1.tileLayer(`https://allmaps.xyz/maps/${Qn.allmaps}/{z}/{x}/{y}.png`,{maxZoom:19,attribution:'<a href="https://allmaps.org">Allmaps</a>'})})),Wt.value=cr}),watch$1(Jt,()=>mr()),watch$1(Wt,()=>mr()),watch$1(Rt,()=>mr());function In(){var Nn;if(sn.value)return;if(sn.value=!0,Dt.value=rt.entities?rt.entities.split(/\s+/).filter(On=>On):[],rt.cards){let On=[],cr=document.getElementById(rt.cards);cr&&cr.querySelectorAll(".card").forEach(async Bn=>{var Un;let Qn=Array.from(Bn.querySelectorAll("li")).filter(or=>or.innerHTML.trim().indexOf("coords:")===0).map(or=>or.innerHTML.split(":")[1].trim()).pop()||"";if(Qn){let or=Bn.querySelector("ul.card-metadata");or&&((Un=or.parentElement)==null||Un.removeChild(or)),On.push({coords:Pr(Qn),caption:Bn.innerHTML})}}),Ft.value=[...Ft.value,...On]}yr(),Tr();const fn=new ResizeObserver(()=>Ln());let cn=(Nn=kt.value)==null?void 0:Nn.querySelector("#map");cn&&fn.observe(cn),pr()}async function Ln(){var Nn,On;let fn;if(rt.center)if(isQID(rt.center)){let cr=await getEntity(rt.center);fn=Pr(cr.coords)}else fn=Pr(rt.center);else if(rt.entities){let cr=await getEntity(Dt.value[0]);fn=Pr(cr.coords),Qt.value=9}else fn=new L$1.LatLng(0,0),Qt.value=6;if(Rt.value){Rt.value.off(),Rt.value.remove();let cr=(Nn=kt.value)==null?void 0:Nn.querySelector("#map"),Bn=document.createElement("div");Bn.id="map",cr==null||cr.replaceWith(Bn)}let cn=(On=kt.value)==null?void 0:On.querySelector("#map");if(cn){isMobile()&&L$1.Map.addInitHook("addHandler","gestureHandling",leafletGestureHandling_min.exports.GestureHandling),cn.style.cursor="default";let cr=rt.basemaps.split(",").map(Qn=>{let[Un,or]=bt[Qn];return[Qn.replace(/_/," "),L$1.tileLayer(Un,or)]}),Bn={preferCanvas:!1,zoomSnap:.1,center:fn,zoom:Qt.value,zoomAnimation:!0,gestureHandling:isMobile(),layers:[cr[0][1]]};Rt.value=L$1.map(cn,Bn),(cr.length>1||Object.keys(Wt.value||{}).length>1)&&(Yt.value=L$1.control.layers(Object.fromEntries(cr),{}).addTo(Rt.value)),Rt.value.on("click",Qn=>{var Un;pn(Qn),Bt.value&&lr((Un=Bt.value)==null?void 0:Un.split(" ")[0]),rt.zoomOnClick&&nn()}),Rt.value.on("zoomend",Qn=>{pn(Qn),hn.value&&hn.value.layer.openPopup()}),Rt.value.on("movestart",()=>cn.style.cursor="move"),Rt.value.on("moveend",Qn=>{cn.style.cursor="default",pn(Qn)}),Rt.value.on("layeradd",Qn=>{var Un,or;if(Qn.layer.feature){let hr=Qn.layer;((Un=hr.feature)==null?void 0:Un.type)=="Feature"&&((or=hr.feature)==null?void 0:or.properties.qid)&&hr.feature}}),Bt.value=`${Number(fn.lat.toFixed(5))},${Number(fn.lng.toFixed(5))} ${Qt.value}`,rn.value=`${Number(fn.lat.toFixed(5))},${Number(fn.lng.toFixed(5))},${Qt.value}`}}function pn(fn){let cn=fn.type==="click"?fn.latlng:fn.target.getCenter(),Nn=fn.target.getZoom(),On=[cn.lat,cn.lng,Nn];return Bt.value=`${Number(cn.lat.toFixed(5))},${Number(cn.lng.toFixed(5))} ${Nn}`,on.value||(rn.value=`${Number(cn.lat.toFixed(5))},${Number(cn.lng.toFixed(5))},${Nn}`),On}function Hn(fn){return L$1.geoJSON(fn,{pointToLayer:(cn,Nn)=>{const On=cn.properties;let cr={...st};return cn.properties.icon&&(cr.iconUrl=cn.properties.icon),cn.properties.shadowUrl&&(cr.shadowUrl=cn.properties.shadowUrl),cn.properties.iconRetinaUrl&&(cr.iconRetinaUrl=cn.properties.iconRetinaUrl),On.markerType==="circle"?L$1.circleMarker(Nn,{radius:On.radius||4}):L$1.marker(Nn,{icon:new L$1.Icon(cr)})},onEachFeature:async(cn,Nn)=>{var cr;let On=Nn;if(!cn.properties.coords){if((cr=On.feature)!=null&&cr.bbox){let Bn=On.getBounds().getCenter();cn.properties.coords=`${Bn.lat},${Bn.lng}`}else if(cn.geometry.type==="Polygon"){let Bn=it.centroid(cn);cn.properties.coords=`${Bn.geometry.coordinates[1]},${Bn.geometry.coordinates[0]}`}}if(cn.properties.qid){let Bn=await getEntity(cn.properties.qid);cn.properties.entityData=Bn;let Un=`<ve-info-card data="${JSON.stringify(Bn).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;Nn.bindPopup(Un)}else{let Qn=`<ve-info-card data="${JSON.stringify(cn.properties).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;Nn.bindPopup(Qn)}rt.popupOnHover&&(Nn.on("mouseover",()=>Nn.openPopup()),Nn.on("mouseout",()=>Nn.closePopup())),Nn.on("click",()=>{on.value?(Nn.closePopup(),on.value=void 0):(Nn.openPopup(),on.value={},rt.zoomOnClick&&Pn(cn.properties.coords))})},style:cn=>{const Nn=cn==null?void 0:cn.properties,On=cn==null?void 0:cn.geometry.type;for(let[Bn,Qn]of Object.entries(Nn))Qn==="null"&&(Nn[Bn]=null);return{color:Nn.color||"#FB683F",weight:Nn.weight||(On==="Polygon"||On==="MultiPolygon"?0:4),opacity:Nn.opacity||1,fillColor:Nn.fillColor||"#32C125",fillOpacity:Nn.fillOpacity||.5}}})}let yn=!1;function mr(){var fn;if(Rt.value&&Wt.value&&Jt.value&&!yn){yn=!0;let cn=Object.keys(Wt.value||{}),Nn=Jt.value?Jt.value.length:0;!Yt.value&&(cn.length>1||cn.length===1&&cn[0]!=="Locations"||Nn>0)&&(Yt.value=L$1.control.layers(Object.fromEntries([]),{}).addTo(Rt.value)),Object.keys(Wt.value||{}).forEach(cr=>{var Un;let Bn=new L$1.LayerGroup,Qn=!1;Wt.value[cr].forEach(or=>{var kr;let hr=Hn(or);Bn.addLayer(hr),(kr=or.properties)!=null&&kr.disabled&&(Qn=!0)}),Qn||(Un=Rt.value)==null||Un.addLayer(Bn),Yt.value&&Yt.value.addOverlay(Bn,cr)});let On={};(fn=Jt.value)==null||fn.forEach(cr=>{var Bn;Yt.value&&Yt.value.addOverlay(cr.layer,cr.name),cr.disabled||(Bn=Rt.value)==null||Bn.addLayer(cr.layer),On[cr.name]=cr.layer}),Object.keys(On).length>0&&L$1.control.opacity(On,{label:null,collapsed:!0,position:"topright"}).addTo(Rt.value)}}function vn(fn){const cn={type:"FeatureCollection",features:[]};return fn.filter(Nn=>Nn.coords).forEach(Nn=>{let[On,cr]=Nn.coords.split(",").map(Bn=>parseFloat(Bn.trim()));cn.features.push({type:"Feature",properties:Nn,geometry:{type:"Point",coordinates:[cr,On]}})}),cn}async function yr(){let fn=Array.from(Et.value.querySelectorAll("li")).map(cn=>{var Nn;return Lr((Nn=cn.firstChild)==null?void 0:Nn.textContent)});if(rt.marker&&rt.center)if(isQID(rt.center)){let cn=await getEntity(rt.center);fn.push(Promise.resolve(gr(cn)))}else fn.push(Promise.resolve({coords:rt.center,zoom:rt.zoom||10}));Ft.value=[...Ft.value,...fn]}function Tr(){const fn=Nn=>{for(let On of Nn)On.type==="childList"&&Array.from(On.target.classList).indexOf("hydrated")>=0&&yr()};new MutationObserver(fn).observe(Et.value,{childList:!0,subtree:!0,characterData:!0})}function Mr(fn){return/^[+-]?\d+(.\d*|\d*),{1}[+-]?\d+(.\d*|\d*)$/.test(fn)}function rr(fn){return/^\d{1,2}(\.\d{1})?$/.test(fn)}function wr(fn){fn=fn||"";let cn=[];fn=fn.replace(/“/,'"').replace(/”/,'"').replace(/’/,"'");let Nn=fn.match(/[^\s"]+|"([^"]*)"/gmi);return Nn&&Nn.forEach(On=>{cn.length>0&&cn[cn.length-1].indexOf("=")===cn[cn.length-1].length-1?cn[cn.length-1]=`${cn[cn.length-1]}${On}`:cn.push(On)}),cn}function fr(fn,cn){let Nn={id:cn},On=metadataAsObj(fn);return On.location&&(Nn.coords=On.location[0]),On.coordinates_of_the_point_of_view&&(Nn.coords=On.coordinates_of_the_point_of_view[0]),fn.label&&(Nn.label=fn.label.en),fn.summary&&(Nn.description=fn.summary.en[0]),fn.thumbnail&&(Nn.image=fn.thumbnail[0].id),Nn}function gr(fn,cn=""){let Nn={id:cn||fn.id};return fn.coords&&(Nn.coords=fn.coords),fn.geojson&&(Nn.geojson=fn.geojson),fn.label&&(Nn.label=fn.label),fn.description&&(Nn.description=fn.description),fn.thumbnail&&(Nn.image=fn.thumbnail),Nn}async function Lr(fn){let cn=wr(fn),Nn=/\.(geo)?json$/i,On=/^[a-z0-9\-]+:.+/,cr={},Bn=new Set(["disabled","prefer-geojson"]);for(let Qn=0;Qn<cn.length;Qn++){let Un=cn[Qn];if(Un.indexOf("=")>0){let[or,...hr]=Un.split("="),kr=hr.join("=");if(kr=kr[kr.length-1]==='"'?kr.slice(1,-1):kr,or==="qid"){let xr=await getEntity(Un);cr={...gr(xr,Un),...cr}}else if(or==="iiif"){let xr=await getManifest(Un);cr={...fr(xr,Un),...cr}}else cr[or]=kr}else if(rr(Un))cr.zoom=parseInt(Un);else if(Mr(Un))cr.coords=Un,cr.id=Un;else if(isQID(Un)){let or=await getEntity(Un);cr={...gr(or,Un),...cr}}else if(Nn.test(Un))cr.geojson=Un;else if(On.test(Un)){let or=await getManifest(Un);cr={...fr(or,Un),...cr}}else if(Bn.has(Un))cr[kebabToCamel(Un)]=!0;else{let or=Un[0]==='"'&&Un[Un.length-1]==='"'?Un.slice(1,-1):Un;cr.label?cr.description=or:cr.label=or}}return cr.preferGeojson=cr.preferGeojson||rt.preferGeojson&&cr.geojson||cr.geojson&&!cr.coords,cr}function Pr(fn){let[cn,Nn]=fn.split(",").map(On=>parseFloat(On.trim()));return new leafletSrc.exports.LatLng(cn,Nn)}function lr(fn){navigator.clipboard&&navigator.clipboard.writeText(fn)}function qr(fn="",cn=""){return Object.values(Wt.value).map(On=>{let cr=On[0];return cr.type==="FeatureCollection"?cr.features:[cr]}).flat().find(On=>{var cr,Bn;return On.id===fn||((cr=On.properties)==null?void 0:cr.id)===fn||((Bn=On.properties)==null?void 0:Bn.coords)===cn})}function sr(fn=""){var Bn,Qn,Un,or;fn=fn.replace(/^flyto\|/i,"");let cn="",Nn=10,On=fn.split(",");if(On.length===1){cn=On[0];let hr=qr(cn);Nn=((Bn=hr==null?void 0:hr.properties)==null?void 0:Bn.zoom)||Nn}else if(On.length===2)if(/^[+-]?\d+(.\d*|\d*)$/.test(On[0])){cn=On.join(",");let hr=qr("",cn);Nn=((Qn=hr==null?void 0:hr.properties)==null?void 0:Qn.zoom)||Nn}else cn=On[0],Nn=parseFloat(On[1]);else cn=On.slice(0,2).join(","),Nn=parseFloat(On[2]);let cr;return(Un=Rt.value)==null||Un.eachLayer(hr=>{var kr,xr,br,hi;(((xr=(kr=hr==null?void 0:hr.feature)==null?void 0:kr.properties)==null?void 0:xr.id)===cn||((hi=(br=hr==null?void 0:hr.feature)==null?void 0:br.properties)==null?void 0:hi.coords)===cn)&&(cr=hr)}),cr||(or=Rt.value)==null||or.eachLayer(hr=>cr=hr),{id:cn,zoom:Nn,layer:cr}}function pr(){let fn=Et.value.parentElement,cn=new Set;for(;fn.parentElement&&fn.tagName!=="MAIN";)fn=fn.parentElement,Array.from(fn.querySelectorAll("[enter],[exit]")).forEach(On=>{ir(On)&&!cn.has(On)&&(Er(On),cn.add(On))});let Nn=Et.value.parentElement;for(;(Nn==null?void 0:Nn.parentElement)&&Nn.tagName!=="BODY";)Nn=Nn.parentElement;Nn&&Array.from(Nn.querySelectorAll("mark")).forEach(On=>{let cr=Array.from(On.attributes).find(Bn=>Bn.name==="flyto");if(cr&&ir(On.parentElement)){let Qn=cr==null?void 0:cr.value;On.classList.add(cr.name),On.addEventListener("click",()=>Pn(Qn)),rt.popupOnHover&&(On.addEventListener("mouseover",()=>{let Un=sr(Qn).layer;Un.openPopup(),isMobile()&&setTimeout(()=>Un.closePopup(),2e3)}),On.addEventListener("mouseleave",()=>{var Un;hn.value=sr(Qn),hn.value.id!==on.value&&((Un=hn.value.layer)==null||Un.closePopup())}))}})}function Er(fn){let cn=fn.classList.contains("active");new MutationObserver(On=>{On.forEach(cr=>{if(cr.attributeName=="class"){let Bn=cr.target.classList.contains("active");if(cn!==Bn){cn=Bn;let Qn=fn.attributes.getNamedItem(Bn?"enter":"exit");if(Qn){const[Un,...or]=Qn.value.split(":");let hr=or.join(":");Un==="flyto"&&Pn(hr,!0),Qn.name==="exit"&&nn()}}}})}).observe(fn,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}function ir(fn){let cn=fn.previousSibling;for(;cn;){if(cn.nodeName==="VE-MAP")return cn===Et.value?cn:null;cn=cn.previousSibling}for(;fn.parentElement&&fn.tagName!=="MAIN";){fn=fn.parentElement;let Nn=fn.querySelector(":scope > ve-map, :scope > p > ve-map, :scope > section > ve-map");if(Nn)return Nn===Et.value?Nn:null}}async function Pn(fn,cn=!1){var Nn,On;if(hn.value=sr(fn),hn.value.layer){if(hn.value.id===on.value&&!cn)hn.value.layer.closePopup(),nn();else if(on.value=hn.value.id,(Nn=hn.value.layer.feature)!=null&&Nn.properties){let cr=Pr(hn.value.layer.feature.properties.coords);(On=Rt.value)==null||On.flyTo(cr,hn.value.zoom)}}else nn()}function nn(){var fn,cn;if(hn.value=null,rn.value){let[Nn,On,cr]=rn.value.split(",").map(Qn=>parseFloat(Qn)),Bn=new L$1.LatLng(Nn,On);(fn=Rt.value)==null||fn.flyTo(Bn,cr),(cn=Rt.value)==null||cn.closePopup()}on.value=void 0}return(fn,cn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:wt,style:{width:"100%",height:"100%"}},[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("div",{id:"lat-lng-zoom",innerHTML:Bt.value,onClick:cn[0]||(cn[0]=Nn=>lr(`${Bt.value}`))},null,8,_hoisted_2$d),_hoisted_3$b,nt.caption?(openBlock(),createElementBlock("div",{key:0,id:"caption",innerHTML:nt.caption},null,8,_hoisted_4$a)):createCommentVNode("",!0)])],512))}}),_style_0$b=`.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,.5)}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255,255,255,.8);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:rgba(255,255,255,.8);text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}input[type=range]{-webkit-appearance:none;-webkit-tap-highlight-color:rgba(255,255,255,0);width:110px;height:10px;margin:0;border:none;padding:1px 2px;border-radius:30px;background:#f1f0ee;outline:none}input[type=range]::-ms-track{border:inherit;color:transparent;background:transparent}input[type=range]::-ms-fill-lower,input[type=range]::-ms-fill-upper{background:transparent}input[type=range]::-ms-tooltip{display:none}input[type=range]::-ms-thumb{width:15px;height:18px;border-radius:12px;border:0;background-image:linear-gradient(to bottom,#1253a4 0,#1253a4 100%)}.leaflet-control-layers-label{margin:0 0 8px 1px}@-webkit-keyframes leaflet-gestures-fadein{0%{opacity:0}to{opacity:1}}@keyframes leaflet-gestures-fadein{0%{opacity:0}to{opacity:1}}.leaflet-container:after{-webkit-animation:leaflet-gestures-fadein .8s backwards;animation:leaflet-gestures-fadein .8s backwards;color:#fff;font-family:Roboto,Arial,sans-serif;font-size:22px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:15px;position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:461;pointer-events:none}.leaflet-gesture-handling-touch-warning:after,.leaflet-gesture-handling-scroll-warning:after{-webkit-animation:leaflet-gestures-fadein .8s forwards;animation:leaflet-gestures-fadein .8s forwards}.leaflet-gesture-handling-touch-warning:after{content:attr(data-gesture-handling-touch-content)}.leaflet-gesture-handling-scroll-warning:after{content:attr(data-gesture-handling-scroll-content)}*{box-sizing:border-box}:host{display:flex;align-content:center;justify-content:center;position:relative;font-family:Roboto,sans-serif;background-color:#fff;margin-bottom:1rem}.content{margin:auto}#map{border:1px solid #ccc;width:100%;height:100%}#caption{font-family:sans-serif;width:100%;white-space:nowrap;background-color:#555;color:#fff;padding:4px 6px;bottom:0;height:32px;text-overflow:ellipsis;overflow:hidden}#lat-lng-zoom{position:absolute;font-family:sans-serif;bottom:24px;right:0;width:150px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#lat-lng-zoom:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy;z-index:1000}.card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border-radius:4px;padding:0}.card p{border:none}.card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:190px}.card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}.card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.2rem .5rem;margin:0;font-size:.9rem;font-weight:400}.card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-end;height:110px;line-height:1.4;font-size:1rem;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;margin:0 0 .5rem}.leaflet-popup-content{width:280px;margin:0}.leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers.png)}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers-2x.png)}
`,Map$3=_export_sfc(_sfc_main$h,[["styles",[_style_0$b]]]),_hoisted_1$e=["innerHTML"],_hoisted_2$c=["innerHTML"],_hoisted_3$a={class:"card-metadata"},_hoisted_4$9=["innerHTML"],_hoisted_5$7=["innerHTML","onClick"],_hoisted_6$6={key:1},_hoisted_7$5=["innerHTML","onClick"],_hoisted_8$5={class:"card-links",style:{"margin-top":"auto"}},_hoisted_9$4=["manifest"],_hoisted_10$3=["center","zoom"],_hoisted_11$2={key:0},_sfc_main$g=defineComponent({__name:"MediaCard.ce",props:{manifest:{type:String,required:!0}},setup(nt){const rt=nt,it=computed(()=>`"${thumbnail(bt.value)}"`),st=ref(null);computed(()=>{var hn;return(hn=st==null?void 0:st.value)==null?void 0:hn.parentNode}),computed(()=>{var hn,mn;return(mn=(hn=st.value)==null?void 0:hn.getRootNode())==null?void 0:mn.host});const bt=ref(),wt=computed(()=>bt.value&&getItemInfo(bt.value)),Et=computed(()=>wt.value&&`${wt.value.width.toLocaleString()} x ${wt.value.height.toLocaleString()}`),kt=computed(()=>bt.value&&Dt()),Lt=computed(()=>{let hn=kt.value.find(mn=>mn.label.toLowerCase()==="location");return hn?`${hn.value}`:null}),Ot=computed(()=>{let hn=kt.value.find(mn=>mn.label.toLowerCase()==="allmapsid");return hn?`${hn.value}`:null}),Rt=computed(()=>{let hn=kt.value.find(mn=>mn.label.toLowerCase()==="zoom");return hn?`${parseFloat(hn.value)}`:9});onUpdated(()=>{getManifest(rt.manifest).then(hn=>bt.value=hn)});function Dt(){let hn=new Set(["created","updated"]),mn=new Set(["image_url","size"]),Cn=getMetadata(bt.value).filter(Tn=>!mn.has(Tn.label));return bt.value.navDate&&Cn.push({label:"navDate",value:[bt.value.navDate]}),Cn.push({label:"dimensions",value:[Et.value]}),Cn=Cn.map(Tn=>hn.has(Tn.label)?{label:Tn.label,value:[Tn.value[0].split("T")[0]]}:Tn).map(Tn=>{if(Tn.label==="source_url"){let kn=Tn.value[0].split("/").pop();Tn={label:"source",value:[`<a href="${Tn.value[0]}" target="_blank">${kn}</a>`]}}return Tn}),Cn.sort()}getManifest(rt.manifest).then(hn=>bt.value=hn);function Bt(hn){navigator.clipboard&&navigator.clipboard.writeText(hn)}const Ft=ref();watch$1(Ft,hn=>{hn==null||hn.addEventListener("sl-show",()=>{Ft.value&&(Ft.value.panel.style.width=`${sn()}px`)})});const Yt=ref(!1);watch$1(Yt,()=>{var hn,mn;Yt.value?(hn=Ft.value)==null||hn.show():(mn=Ft.value)==null||mn.hide()});function Jt(){Yt.value=!Yt.value}const Wt=ref();watch$1(Wt,hn=>{hn==null||hn.addEventListener("sl-show",()=>{Wt.value&&(Wt.value.panel.style.width=`${sn()}px`)})});const Qt=ref(!1);watch$1(Qt,()=>{var hn,mn;Qt.value?(hn=Wt.value)==null||hn.show():(mn=Wt.value)==null||mn.hide()});function rn(){Qt.value=!Qt.value}function sn(){let hn=Math.round(window.innerWidth-(isMobile()?0:100)),mn=Math.round(window.innerHeight-150),Cn=bt.value;if(Cn){let Tn=getItemInfo(Cn),kn=Number((Tn.width/Tn.height).toFixed(4));hn=kn>=1?hn/kn>mn?hn=mn*kn:hn:Math.round(mn*kn)}return hn}function on(hn){var Cn;hn.stopPropagation();let mn=`https://iiif.juncture-digital.org/?manifest=${bt.value.id}`;(Cn=hn.dataTransfer)==null||Cn.setData("text/uri-list",mn)}return(hn,mn)=>bt.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"root",ref:st},[createBaseVNode("div",{class:"card",draggable:"true",onDragstart:on},[createBaseVNode("div",{class:"card-image",style:normalizeStyle({backgroundImage:`url(${unref(it)})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"top"}),onClick:Jt},null,4),createBaseVNode("div",{class:"card-title",innerHTML:unref(label)(bt.value)},null,8,_hoisted_1$e),createBaseVNode("div",{class:"card-abstract",innerHTML:unref(summary)(bt.value)},null,8,_hoisted_2$c),createBaseVNode("ul",_hoisted_3$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(kt),Cn=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-label",innerHTML:Cn.label},null,8,_hoisted_4$9),Cn.value.length===1?(openBlock(),createElementBlock(Fragment,{key:0},[Cn.label==="location"?(openBlock(),createElementBlock("sl-icon-button",{key:0,name:"chat-square-text",label:"Show Location",onClick:rn})):createCommentVNode("",!0),createBaseVNode("span",{class:"md-value",innerHTML:Cn.value[0],onClick:Tn=>Bt(Cn.value)},null,8,_hoisted_5$7)],64)):(openBlock(),createElementBlock("ul",_hoisted_6$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.value,Tn=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-value",innerHTML:Tn,onClick:kn=>Bt(Tn)},null,8,_hoisted_7$5)]))),256))]))]))),256))]),createBaseVNode("div",_hoisted_8$5,[createBaseVNode("img",{src:"https://juncture-digital.github.io/web-app/static/iiif.png",class:"draggable-iiif",alt:"IIIF manifest icon",onClick:mn[0]||(mn[0]=Cn=>Bt(bt.value.id)),onDragstart:on},null,32)])],32),createBaseVNode("sl-dialog",{ref_key:"imageDialog",ref:Ft,id:"image-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},[Yt.value?(openBlock(),createElementBlock("ve-media",{key:0,manifest:bt.value.id,"zoom-on-scroll":""},null,8,_hoisted_9$4)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:Jt,variant:"primary"},"Close")],512),createBaseVNode("sl-dialog",{ref_key:"mapDialog",ref:Wt,id:"map-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},[Qt.value?(openBlock(),createElementBlock("ve-map",{key:0,center:unref(Lt),zoom:unref(Rt)},[createBaseVNode("ul",null,[createBaseVNode("li",null,toDisplayString(unref(Lt)),1),unref(Ot)?(openBlock(),createElementBlock("li",_hoisted_11$2,"allmaps="+toDisplayString(unref(Ot)),1)):createCommentVNode("",!0)])],8,_hoisted_10$3)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:rn,variant:"primary"},"Close")],512)],512)):createCommentVNode("",!0)}}),_style_0$a=`*{box-sizing:border-box}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.md-label{font-weight:700;margin-right:6px;color:#444}.md-value{display:inline;line-height:1.2rem;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;color:#444;cursor:copy}.md-value:hover{text-decoration:underline}.md-label:after{content:":"}.card-metadata ul ul{margin-left:18px}@media (max-width: 480px){.card-image{height:72vw}}.card{display:flex;flex-flow:column nowrap;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border:1px solid #ccc;border-radius:4px;padding:0;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.card p{border:none}.card-image{align-self:flex-start;width:100%;height:300px;cursor:pointer}.card-title{font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none;color:#444}.card-metadata{list-style:none;padding:.2rem .5rem;margin:12px 0 0;font-size:.9em;font-weight:400;max-height:260px;overflow-y:scroll}.card-abstract{align-self:flex-start;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:8}.card-links{padding:6px}.card-links img{height:24px}.draggable-iiif{cursor:grab}.clamp5{-webkit-line-clamp:5}
`,MediaCard=_export_sfc(_sfc_main$g,[["styles",[_style_0$a]]]),_hoisted_1$d={class:"content"},_hoisted_2$b=["caption"],_sfc_main$f=defineComponent({__name:"MediaSelector.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ft;return(Ft=it==null?void 0:it.value)==null?void 0:Ft.parentNode}),bt=computed(()=>{var Ft,Yt;return(Yt=(Ft=it.value)==null?void 0:Ft.getRootNode())==null?void 0:Yt.host}),wt=computed(()=>{var Ft;return(Ft=st.value)==null?void 0:Ft.querySelector(".content")}),Et=ref(null),kt=computed(()=>{var Ft,Yt;return((Yt=(Ft=Et.value)==null?void 0:Ft.getAttribute("data-media"))==null?void 0:Yt.split(/\s/).filter(Jt=>Jt))||[]}),Lt=ref();watch$1(bt,()=>Ot()),watch$1(Lt,()=>console.log(`selected=${toRaw(Lt.value)}`));function Ot(){Dt(),Bt()}const Rt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Dt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Rt),Rt==="full"?bt.value.style.width="100%":(bt.value.style.float=Rt,bt.value.style.width="calc(50% - 16px)"),bt.value.style.width=window.getComputedStyle(bt.value).width,rt.sticky&&makeSticky(bt.value),wt.value.style.width=rt.width||"100%",nextTick(()=>{let Ft=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2)),Yt=Ft;if(rt.sticky&&Rt==="full"){let Jt=Math.round(window.innerHeight*.4);Yt=Math.min(Jt,Ft)}wt.value.style.width=`${Ft}px`,wt.value.style.height=`${Yt}px`})}function Bt(){Et.value=document.querySelector(".active"),new MutationObserver(Yt=>{Yt.forEach(Jt=>{if(Jt.type==="attributes"){let Wt=Jt.target;Array.from(Wt.classList).indexOf("active")>=0&&(Et.value=Wt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Ft,Yt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$d,[unref(kt).length>0?(openBlock(),createElementBlock("ve-media",{key:0,grid:"",small:"",caption:Ft.$props.caption},[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(kt),(Jt,Wt)=>(openBlock(),createElementBlock("li",{key:`item-${Wt}`},toDisplayString(Jt),1))),128))])],8,_hoisted_2$b)):createCommentVNode("",!0)])],512))}}),_style_0$9=`sl-button{margin:6px 3px}
`,MediaSelector=_export_sfc(_sfc_main$f,[["styles",[_style_0$9]]]);var dist$1={exports:{}},Sister;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/Sister=function(){var nt={},rt={};return nt.on=function(it,st){var bt={name:it,handler:st};return rt[it]=rt[it]||[],rt[it].unshift(bt),bt},nt.off=function(it){var st=rt[it.name].indexOf(it);st!==-1&&rt[it.name].splice(st,1)},nt.trigger=function(it,st){var bt=rt[it],wt;if(bt)for(wt=bt.length;wt--;)bt[wt].handler(st)},nt};var sister=Sister,loadYouTubeIframeApi={exports:{}},loadScript=function nt(rt,it,st){var bt=document.head||document.getElementsByTagName("head")[0],wt=document.createElement("script");typeof it=="function"&&(st=it,it={}),it=it||{},st=st||function(){},wt.type=it.type||"text/javascript",wt.charset=it.charset||"utf8",wt.async="async"in it?!!it.async:!0,wt.src=rt,it.attrs&&setAttributes(wt,it.attrs),it.text&&(wt.text=""+it.text);var Et="onload"in wt?stdOnEnd:ieOnEnd;Et(wt,st),wt.onload||stdOnEnd(wt,st),bt.appendChild(wt)};function setAttributes(nt,rt){for(var it in rt)nt.setAttribute(it,rt[it])}function stdOnEnd(nt,rt){nt.onload=function(){this.onerror=this.onload=null,rt(null,nt)},nt.onerror=function(){this.onerror=this.onload=null,rt(new Error("Failed to load "+this.src),nt)}}function ieOnEnd(nt,rt){nt.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,rt(null,nt))}}(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=loadScript,st=bt(it);function bt(wt){return wt&&wt.__esModule?wt:{default:wt}}rt.default=function(wt){var Et=new Promise(function(kt){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){kt(window.YT);return}else{var Lt=window.location.protocol==="http:"?"http:":"https:";(0,st.default)(Lt+"//www.youtube.com/iframe_api",function(Rt){Rt&&wt.trigger("error",Rt)})}var Ot=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){Ot&&Ot(),kt(window.YT)}});return Et},nt.exports=rt.default})(loadYouTubeIframeApi,loadYouTubeIframeApi.exports);var YouTubePlayer$1={exports:{}},browser={exports:{}},debug={exports:{}},s=1e3,m=s*60,h=m*60,d=h*24,y$1=d*365.25,ms=function(nt,rt){rt=rt||{};var it=typeof nt;if(it==="string"&&nt.length>0)return parse$3(nt);if(it==="number"&&isNaN(nt)===!1)return rt.long?fmtLong(nt):fmtShort(nt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(nt))};function parse$3(nt){if(nt=String(nt),!(nt.length>100)){var rt=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(nt);if(!!rt){var it=parseFloat(rt[1]),st=(rt[2]||"ms").toLowerCase();switch(st){case"years":case"year":case"yrs":case"yr":case"y":return it*y$1;case"days":case"day":case"d":return it*d;case"hours":case"hour":case"hrs":case"hr":case"h":return it*h;case"minutes":case"minute":case"mins":case"min":case"m":return it*m;case"seconds":case"second":case"secs":case"sec":case"s":return it*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return it;default:return}}}}function fmtShort(nt){return nt>=d?Math.round(nt/d)+"d":nt>=h?Math.round(nt/h)+"h":nt>=m?Math.round(nt/m)+"m":nt>=s?Math.round(nt/s)+"s":nt+"ms"}function fmtLong(nt){return plural(nt,d,"day")||plural(nt,h,"hour")||plural(nt,m,"minute")||plural(nt,s,"second")||nt+" ms"}function plural(nt,rt,it){if(!(nt<rt))return nt<rt*1.5?Math.floor(nt/rt)+" "+it:Math.ceil(nt/rt)+" "+it+"s"}(function(nt,rt){rt=nt.exports=bt.debug=bt.default=bt,rt.coerce=Lt,rt.disable=Et,rt.enable=wt,rt.enabled=kt,rt.humanize=ms,rt.names=[],rt.skips=[],rt.formatters={};var it;function st(Ot){var Rt=0,Dt;for(Dt in Ot)Rt=(Rt<<5)-Rt+Ot.charCodeAt(Dt),Rt|=0;return rt.colors[Math.abs(Rt)%rt.colors.length]}function bt(Ot){function Rt(){if(!!Rt.enabled){var Dt=Rt,Bt=+new Date,Ft=Bt-(it||Bt);Dt.diff=Ft,Dt.prev=it,Dt.curr=Bt,it=Bt;for(var Yt=new Array(arguments.length),Jt=0;Jt<Yt.length;Jt++)Yt[Jt]=arguments[Jt];Yt[0]=rt.coerce(Yt[0]),typeof Yt[0]!="string"&&Yt.unshift("%O");var Wt=0;Yt[0]=Yt[0].replace(/%([a-zA-Z%])/g,function(rn,sn){if(rn==="%%")return rn;Wt++;var on=rt.formatters[sn];if(typeof on=="function"){var hn=Yt[Wt];rn=on.call(Dt,hn),Yt.splice(Wt,1),Wt--}return rn}),rt.formatArgs.call(Dt,Yt);var Qt=Rt.log||rt.log||console.log.bind(console);Qt.apply(Dt,Yt)}}return Rt.namespace=Ot,Rt.enabled=rt.enabled(Ot),Rt.useColors=rt.useColors(),Rt.color=st(Ot),typeof rt.init=="function"&&rt.init(Rt),Rt}function wt(Ot){rt.save(Ot),rt.names=[],rt.skips=[];for(var Rt=(typeof Ot=="string"?Ot:"").split(/[\s,]+/),Dt=Rt.length,Bt=0;Bt<Dt;Bt++)!Rt[Bt]||(Ot=Rt[Bt].replace(/\*/g,".*?"),Ot[0]==="-"?rt.skips.push(new RegExp("^"+Ot.substr(1)+"$")):rt.names.push(new RegExp("^"+Ot+"$")))}function Et(){rt.enable("")}function kt(Ot){var Rt,Dt;for(Rt=0,Dt=rt.skips.length;Rt<Dt;Rt++)if(rt.skips[Rt].test(Ot))return!1;for(Rt=0,Dt=rt.names.length;Rt<Dt;Rt++)if(rt.names[Rt].test(Ot))return!0;return!1}function Lt(Ot){return Ot instanceof Error?Ot.stack||Ot.message:Ot}})(debug,debug.exports);(function(nt,rt){rt=nt.exports=debug.exports,rt.log=bt,rt.formatArgs=st,rt.save=wt,rt.load=Et,rt.useColors=it,rt.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:kt(),rt.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function it(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}rt.formatters.j=function(Lt){try{return JSON.stringify(Lt)}catch(Ot){return"[UnexpectedJSONParseError]: "+Ot.message}};function st(Lt){var Ot=this.useColors;if(Lt[0]=(Ot?"%c":"")+this.namespace+(Ot?" %c":" ")+Lt[0]+(Ot?"%c ":" ")+"+"+rt.humanize(this.diff),!!Ot){var Rt="color: "+this.color;Lt.splice(1,0,Rt,"color: inherit");var Dt=0,Bt=0;Lt[0].replace(/%[a-zA-Z%]/g,function(Ft){Ft!=="%%"&&(Dt++,Ft==="%c"&&(Bt=Dt))}),Lt.splice(Bt,0,Rt)}}function bt(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function wt(Lt){try{Lt==null?rt.storage.removeItem("debug"):rt.storage.debug=Lt}catch{}}function Et(){var Lt;try{Lt=rt.storage.debug}catch{}return!Lt&&typeof process<"u"&&"env"in process&&(Lt={version:"2.0.0-beta.43"}.DEBUG),Lt}rt.enable(Et());function kt(){try{return window.localStorage}catch{}}})(browser,browser.exports);var functionNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],nt.exports=rt.default})(functionNames,functionNames.exports);var eventNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],nt.exports=rt.default})(eventNames,eventNames.exports);var FunctionStateMap={exports:{}},PlayerStates={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},nt.exports=rt.default})(PlayerStates,PlayerStates.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=PlayerStates.exports,st=bt(it);function bt(wt){return wt&&wt.__esModule?wt:{default:wt}}rt.default={pauseVideo:{acceptableStates:[st.default.ENDED,st.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[st.default.ENDED,st.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[st.default.ENDED,st.default.PLAYING,st.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},nt.exports=rt.default})(FunctionStateMap,FunctionStateMap.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=browser.exports,st=Rt(it),bt=functionNames.exports,wt=Rt(bt),Et=eventNames.exports,kt=Rt(Et),Lt=FunctionStateMap.exports,Ot=Rt(Lt);function Rt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}var Dt=(0,st.default)("youtube-player"),Bt={};Bt.proxyEvents=function(Ft){var Yt={},Jt=function(Cn){var Tn="on"+Cn.slice(0,1).toUpperCase()+Cn.slice(1);Yt[Tn]=function(kn){Dt('event "%s"',Tn,kn),Ft.trigger(Cn,kn)}},Wt=!0,Qt=!1,rn=void 0;try{for(var sn=kt.default[Symbol.iterator](),on;!(Wt=(on=sn.next()).done);Wt=!0){var hn=on.value;Jt(hn)}}catch(mn){Qt=!0,rn=mn}finally{try{!Wt&&sn.return&&sn.return()}finally{if(Qt)throw rn}}return Yt},Bt.promisifyPlayer=function(Ft){var Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Jt={},Wt=function(Tn){Yt&&Ot.default[Tn]?Jt[Tn]=function(){for(var kn=arguments.length,In=Array(kn),Ln=0;Ln<kn;Ln++)In[Ln]=arguments[Ln];return Ft.then(function(pn){var Hn=Ot.default[Tn],yn=pn.getPlayerState(),mr=pn[Tn].apply(pn,In);return Hn.stateChangeRequired||Array.isArray(Hn.acceptableStates)&&Hn.acceptableStates.indexOf(yn)===-1?new Promise(function(vn){var yr=function Tr(){var Mr=pn.getPlayerState(),rr=void 0;typeof Hn.timeout=="number"&&(rr=setTimeout(function(){pn.removeEventListener("onStateChange",Tr),vn()},Hn.timeout)),Array.isArray(Hn.acceptableStates)&&Hn.acceptableStates.indexOf(Mr)!==-1&&(pn.removeEventListener("onStateChange",Tr),clearTimeout(rr),vn())};pn.addEventListener("onStateChange",yr)}).then(function(){return mr}):mr})}:Jt[Tn]=function(){for(var kn=arguments.length,In=Array(kn),Ln=0;Ln<kn;Ln++)In[Ln]=arguments[Ln];return Ft.then(function(pn){return pn[Tn].apply(pn,In)})}},Qt=!0,rn=!1,sn=void 0;try{for(var on=wt.default[Symbol.iterator](),hn;!(Qt=(hn=on.next()).done);Qt=!0){var mn=hn.value;Wt(mn)}}catch(Cn){rn=!0,sn=Cn}finally{try{!Qt&&on.return&&on.return()}finally{if(rn)throw sn}}return Jt},rt.default=Bt,nt.exports=rt.default})(YouTubePlayer$1,YouTubePlayer$1.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt},st=sister,bt=Ot(st),wt=loadYouTubeIframeApi.exports,Et=Ot(wt),kt=YouTubePlayer$1.exports,Lt=Ot(kt);function Ot(Dt){return Dt&&Dt.__esModule?Dt:{default:Dt}}var Rt=void 0;rt.default=function(Dt){var Bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Yt=(0,bt.default)();if(Rt||(Rt=(0,Et.default)(Yt)),Bt.events)throw new Error("Event handlers cannot be overwritten.");if(typeof Dt=="string"&&!document.getElementById(Dt))throw new Error('Element "'+Dt+'" does not exist.');Bt.events=Lt.default.proxyEvents(Yt);var Jt=new Promise(function(Qt){if((typeof Dt>"u"?"undefined":it(Dt))==="object"&&Dt.playVideo instanceof Function){var rn=Dt;Qt(rn)}else Rt.then(function(sn){var on=new sn.Player(Dt,Bt);return Yt.on("ready",function(){Qt(on)}),null})}),Wt=Lt.default.promisifyPlayer(Jt,Ft);return Wt.on=Yt.on,Wt.off=Yt.off,Wt},nt.exports=rt.default})(dist$1,dist$1.exports);const YouTubePlayer=getDefaultExportFromCjs(dist$1.exports);/*! @vimeo/player v2.18.0 | (c) 2022 Vimeo | MIT License | https://github.com/vimeo/player.js */function _classCallCheck(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}function _defineProperties(nt,rt){for(var it=0;it<rt.length;it++){var st=rt[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(nt,st.key,st)}}function _createClass(nt,rt,it){return rt&&_defineProperties(nt.prototype,rt),it&&_defineProperties(nt,it),nt}var isNode=typeof global<"u"&&{}.toString.call(global)==="[object global]";function getMethodName(nt,rt){return nt.indexOf(rt.toLowerCase())===0?nt:"".concat(rt.toLowerCase()).concat(nt.substr(0,1).toUpperCase()).concat(nt.substr(1))}function isDomElement(nt){return Boolean(nt&&nt.nodeType===1&&"nodeName"in nt&&nt.ownerDocument&&nt.ownerDocument.defaultView)}function isInteger$1(nt){return!isNaN(parseFloat(nt))&&isFinite(nt)&&Math.floor(nt)==nt}function isVimeoUrl(nt){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(nt)}function isVimeoEmbed(nt){var rt=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return rt.test(nt)}function getVimeoUrl(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=nt.id,it=nt.url,st=rt||it;if(!st)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(isInteger$1(st))return"https://vimeo.com/".concat(st);if(isVimeoUrl(st))return st.replace("http:","https:");throw rt?new TypeError("\u201C".concat(rt,"\u201D is not a valid video id.")):new TypeError("\u201C".concat(st,"\u201D is not a vimeo.com url."))}var arrayIndexOfSupport=typeof Array.prototype.indexOf<"u",postMessageSupport=typeof window<"u"&&typeof window.postMessage<"u";if(!isNode&&(!arrayIndexOfSupport||!postMessageSupport))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(nt,rt){return rt={exports:{}},nt(rt,rt.exports),rt.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(nt){if(nt.WeakMap)return;var rt=Object.prototype.hasOwnProperty,it=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),st=function(wt,Et,kt){it?Object.defineProperty(wt,Et,{configurable:!0,writable:!0,value:kt}):wt[Et]=kt};nt.WeakMap=function(){function wt(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(st(this,"_id",kt("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}st(wt.prototype,"delete",function(Ot){if(Et(this,"delete"),!bt(Ot))return!1;var Rt=Ot[this._id];return Rt&&Rt[0]===Ot?(delete Ot[this._id],!0):!1}),st(wt.prototype,"get",function(Ot){if(Et(this,"get"),!!bt(Ot)){var Rt=Ot[this._id];if(Rt&&Rt[0]===Ot)return Rt[1]}}),st(wt.prototype,"has",function(Ot){if(Et(this,"has"),!bt(Ot))return!1;var Rt=Ot[this._id];return!!(Rt&&Rt[0]===Ot)}),st(wt.prototype,"set",function(Ot,Rt){if(Et(this,"set"),!bt(Ot))throw new TypeError("Invalid value used as weak map key");var Dt=Ot[this._id];return Dt&&Dt[0]===Ot?(Dt[1]=Rt,this):(st(Ot,this._id,[Ot,Rt]),this)});function Et(Ot,Rt){if(!bt(Ot)||!rt.call(Ot,"_id"))throw new TypeError(Rt+" method called on incompatible receiver "+typeof Ot)}function kt(Ot){return Ot+"_"+Lt()+"."+Lt()}function Lt(){return Math.random().toString().substring(2)}return st(wt,"_polyfill",!0),wt}();function bt(wt){return Object(wt)===wt}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal);var npo_src=createCommonjsModule(function(nt){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(it,st,bt){st[it]=st[it]||bt(),nt.exports&&(nt.exports=st[it])})("Promise",commonjsGlobal,function(){var it,st,bt,wt=Object.prototype.toString,Et=typeof setImmediate<"u"?function(sn){return setImmediate(sn)}:setTimeout;try{Object.defineProperty({},"x",{}),it=function(sn,on,hn,mn){return Object.defineProperty(sn,on,{value:hn,writable:!0,configurable:mn!==!1})}}catch{it=function(on,hn,mn){return on[hn]=mn,on}}bt=function(){var sn,on,hn;function mn(Cn,Tn){this.fn=Cn,this.self=Tn,this.next=void 0}return{add:function(Tn,kn){hn=new mn(Tn,kn),on?on.next=hn:sn=hn,on=hn,hn=void 0},drain:function(){var Tn=sn;for(sn=on=st=void 0;Tn;)Tn.fn.call(Tn.self),Tn=Tn.next}}}();function kt(rn,sn){bt.add(rn,sn),st||(st=Et(bt.drain))}function Lt(rn){var sn,on=typeof rn;return rn!=null&&(on=="object"||on=="function")&&(sn=rn.then),typeof sn=="function"?sn:!1}function Ot(){for(var rn=0;rn<this.chain.length;rn++)Rt(this,this.state===1?this.chain[rn].success:this.chain[rn].failure,this.chain[rn]);this.chain.length=0}function Rt(rn,sn,on){var hn,mn;try{sn===!1?on.reject(rn.msg):(sn===!0?hn=rn.msg:hn=sn.call(void 0,rn.msg),hn===on.promise?on.reject(TypeError("Promise-chain cycle")):(mn=Lt(hn))?mn.call(hn,on.resolve,on.reject):on.resolve(hn))}catch(Cn){on.reject(Cn)}}function Dt(rn){var sn,on=this;if(!on.triggered){on.triggered=!0,on.def&&(on=on.def);try{(sn=Lt(rn))?kt(function(){var hn=new Yt(on);try{sn.call(rn,function(){Dt.apply(hn,arguments)},function(){Bt.apply(hn,arguments)})}catch(mn){Bt.call(hn,mn)}}):(on.msg=rn,on.state=1,on.chain.length>0&&kt(Ot,on))}catch(hn){Bt.call(new Yt(on),hn)}}}function Bt(rn){var sn=this;sn.triggered||(sn.triggered=!0,sn.def&&(sn=sn.def),sn.msg=rn,sn.state=2,sn.chain.length>0&&kt(Ot,sn))}function Ft(rn,sn,on,hn){for(var mn=0;mn<sn.length;mn++)(function(Tn){rn.resolve(sn[Tn]).then(function(In){on(Tn,In)},hn)})(mn)}function Yt(rn){this.def=rn,this.triggered=!1}function Jt(rn){this.promise=rn,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Wt(rn){if(typeof rn!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var sn=new Jt(this);this.then=function(hn,mn){var Cn={success:typeof hn=="function"?hn:!0,failure:typeof mn=="function"?mn:!1};return Cn.promise=new this.constructor(function(kn,In){if(typeof kn!="function"||typeof In!="function")throw TypeError("Not a function");Cn.resolve=kn,Cn.reject=In}),sn.chain.push(Cn),sn.state!==0&&kt(Ot,sn),Cn.promise},this.catch=function(hn){return this.then(void 0,hn)};try{rn.call(void 0,function(hn){Dt.call(sn,hn)},function(hn){Bt.call(sn,hn)})}catch(on){Bt.call(sn,on)}}var Qt=it({},"constructor",Wt,!1);return Wt.prototype=Qt,it(Qt,"__NPO__",0,!1),it(Wt,"resolve",function(sn){var on=this;return sn&&typeof sn=="object"&&sn.__NPO__===1?sn:new on(function(mn,Cn){if(typeof mn!="function"||typeof Cn!="function")throw TypeError("Not a function");mn(sn)})}),it(Wt,"reject",function(sn){return new this(function(hn,mn){if(typeof hn!="function"||typeof mn!="function")throw TypeError("Not a function");mn(sn)})}),it(Wt,"all",function(sn){var on=this;return wt.call(sn)!="[object Array]"?on.reject(TypeError("Not an array")):sn.length===0?on.resolve([]):new on(function(mn,Cn){if(typeof mn!="function"||typeof Cn!="function")throw TypeError("Not a function");var Tn=sn.length,kn=Array(Tn),In=0;Ft(on,sn,function(pn,Hn){kn[pn]=Hn,++In===Tn&&mn(kn)},Cn)})}),it(Wt,"race",function(sn){var on=this;return wt.call(sn)!="[object Array]"?on.reject(TypeError("Not an array")):new on(function(mn,Cn){if(typeof mn!="function"||typeof Cn!="function")throw TypeError("Not a function");Ft(on,sn,function(kn,In){mn(In)},Cn)})}),Wt})}),callbackMap=new WeakMap;function storeCallback(nt,rt,it){var st=callbackMap.get(nt.element)||{};rt in st||(st[rt]=[]),st[rt].push(it),callbackMap.set(nt.element,st)}function getCallbacks(nt,rt){var it=callbackMap.get(nt.element)||{};return it[rt]||[]}function removeCallback(nt,rt,it){var st=callbackMap.get(nt.element)||{};if(!st[rt])return!0;if(!it)return st[rt]=[],callbackMap.set(nt.element,st),!0;var bt=st[rt].indexOf(it);return bt!==-1&&st[rt].splice(bt,1),callbackMap.set(nt.element,st),st[rt]&&st[rt].length===0}function shiftCallbacks(nt,rt){var it=getCallbacks(nt,rt);if(it.length<1)return!1;var st=it.shift();return removeCallback(nt,rt,st),st}function swapCallbacks(nt,rt){var it=callbackMap.get(nt);callbackMap.set(rt,it),callbackMap.delete(nt)}function parseMessageData(nt){if(typeof nt=="string")try{nt=JSON.parse(nt)}catch(rt){return console.warn(rt),{}}return nt}function postMessage(nt,rt,it){if(!(!nt.element.contentWindow||!nt.element.contentWindow.postMessage)){var st={method:rt};it!==void 0&&(st.value=it);var bt=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));bt>=8&&bt<10&&(st=JSON.stringify(st)),nt.element.contentWindow.postMessage(st,nt.origin)}}function processData(nt,rt){rt=parseMessageData(rt);var it=[],st;if(rt.event){if(rt.event==="error"){var bt=getCallbacks(nt,rt.data.method);bt.forEach(function(Et){var kt=new Error(rt.data.message);kt.name=rt.data.name,Et.reject(kt),removeCallback(nt,rt.data.method,Et)})}it=getCallbacks(nt,"event:".concat(rt.event)),st=rt.data}else if(rt.method){var wt=shiftCallbacks(nt,rt.method);wt&&(it.push(wt),st=rt.value)}it.forEach(function(Et){try{if(typeof Et=="function"){Et.call(nt,st);return}Et.resolve(st)}catch{}})}var oEmbedParameters=["autopause","autoplay","background","byline","color","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function getOEmbedParameters(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oEmbedParameters.reduce(function(it,st){var bt=nt.getAttribute("data-vimeo-".concat(st));return(bt||bt==="")&&(it[st]=bt===""?1:bt),it},rt)}function createEmbed(nt,rt){var it=nt.html;if(!rt)throw new TypeError("An element must be provided");if(rt.getAttribute("data-vimeo-initialized")!==null)return rt.querySelector("iframe");var st=document.createElement("div");return st.innerHTML=it,rt.appendChild(st.firstChild),rt.setAttribute("data-vimeo-initialized","true"),rt.querySelector("iframe")}function getOEmbedData(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=arguments.length>2?arguments[2]:void 0;return new Promise(function(st,bt){if(!isVimeoUrl(nt))throw new TypeError("\u201C".concat(nt,"\u201D is not a vimeo.com url."));var wt="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(nt));for(var Et in rt)rt.hasOwnProperty(Et)&&(wt+="&".concat(Et,"=").concat(encodeURIComponent(rt[Et])));var kt="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;kt.open("GET",wt,!0),kt.onload=function(){if(kt.status===404){bt(new Error("\u201C".concat(nt,"\u201D was not found.")));return}if(kt.status===403){bt(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}try{var Lt=JSON.parse(kt.responseText);if(Lt.domain_status_code===403){createEmbed(Lt,it),bt(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}st(Lt)}catch(Ot){bt(Ot)}},kt.onerror=function(){var Lt=kt.status?" (".concat(kt.status,")"):"";bt(new Error("There was an error fetching the embed code from Vimeo".concat(Lt,".")))},kt.send()})}function initializeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,rt=[].slice.call(nt.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),it=function(bt){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(bt))};rt.forEach(function(st){try{if(st.getAttribute("data-vimeo-defer")!==null)return;var bt=getOEmbedParameters(st),wt=getVimeoUrl(bt);getOEmbedData(wt,bt,st).then(function(Et){return createEmbed(Et,st)}).catch(it)}catch(Et){it(Et)}})}function resizeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var rt=function(st){if(!!isVimeoUrl(st.origin)&&!(!st.data||st.data.event!=="spacechange")){for(var bt=nt.querySelectorAll("iframe"),wt=0;wt<bt.length;wt++)if(bt[wt].contentWindow===st.source){var Et=bt[wt].parentElement;Et.style.paddingBottom="".concat(st.data.data[0].bottom,"px");break}}};window.addEventListener("message",rt)}}function initAppendVideoMetadata(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var rt=function(st){if(!!isVimeoUrl(st.origin)){var bt=parseMessageData(st.data);if(!(!bt||bt.event!=="ready"))for(var wt=nt.querySelectorAll("iframe"),Et=0;Et<wt.length;Et++){var kt=wt[Et],Lt=kt.contentWindow===st.source;if(isVimeoEmbed(kt.src)&&Lt){var Ot=new Player(kt);Ot.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",rt)}}function checkUrlTimeParam(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var rt=function(bt){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(bt))},it=function(bt){if(!!isVimeoUrl(bt.origin)){var wt=parseMessageData(bt.data);if(!(!wt||wt.event!=="ready"))for(var Et=nt.querySelectorAll("iframe"),kt=0;kt<Et.length;kt++){var Lt=Et[kt],Ot=Lt.contentWindow===bt.source;isVimeoEmbed(Lt.src)&&Ot&&function(){var Rt=new Player(Lt);Rt.getVideoId().then(function(Dt){var Bt=new RegExp("[?&]vimeo_t_".concat(Dt,"=([^&#]*)")).exec(window.location.href);if(Bt&&Bt[1]){var Ft=decodeURI(Bt[1]);Rt.setCurrentTime(Ft)}}).catch(rt)}()}}};window.addEventListener("message",it)}}function initializeScreenfull(){var nt=function(){for(var st,bt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],wt=0,Et=bt.length,kt={};wt<Et;wt++)if(st=bt[wt],st&&st[1]in document){for(wt=0;wt<st.length;wt++)kt[bt[0][wt]]=st[wt];return kt}return!1}(),rt={fullscreenchange:nt.fullscreenchange,fullscreenerror:nt.fullscreenerror},it={request:function(bt){return new Promise(function(wt,Et){var kt=function Ot(){it.off("fullscreenchange",Ot),wt()};it.on("fullscreenchange",kt),bt=bt||document.documentElement;var Lt=bt[nt.requestFullscreen]();Lt instanceof Promise&&Lt.then(kt).catch(Et)})},exit:function(){return new Promise(function(bt,wt){if(!it.isFullscreen){bt();return}var Et=function Lt(){it.off("fullscreenchange",Lt),bt()};it.on("fullscreenchange",Et);var kt=document[nt.exitFullscreen]();kt instanceof Promise&&kt.then(Et).catch(wt)})},on:function(bt,wt){var Et=rt[bt];Et&&document.addEventListener(Et,wt)},off:function(bt,wt){var Et=rt[bt];Et&&document.removeEventListener(Et,wt)}};return Object.defineProperties(it,{isFullscreen:{get:function(){return Boolean(document[nt.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[nt.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[nt.fullscreenEnabled])}}}),it}var playerMap=new WeakMap,readyMap=new WeakMap,screenfull={},Player=function(){function nt(rt){var it=this,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,nt),window.jQuery&&rt instanceof jQuery&&(rt.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),rt=rt[0]),typeof document<"u"&&typeof rt=="string"&&(rt=document.getElementById(rt)),!isDomElement(rt))throw new TypeError("You must pass either a valid element or a valid id.");if(rt.nodeName!=="IFRAME"){var bt=rt.querySelector("iframe");bt&&(rt=bt)}if(rt.nodeName==="IFRAME"&&!isVimeoUrl(rt.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(playerMap.has(rt))return playerMap.get(rt);this._window=rt.ownerDocument.defaultView,this.element=rt,this.origin="*";var wt=new npo_src(function(kt,Lt){if(it._onMessage=function(Dt){if(!(!isVimeoUrl(Dt.origin)||it.element.contentWindow!==Dt.source)){it.origin==="*"&&(it.origin=Dt.origin);var Bt=parseMessageData(Dt.data),Ft=Bt&&Bt.event==="error",Yt=Ft&&Bt.data&&Bt.data.method==="ready";if(Yt){var Jt=new Error(Bt.data.message);Jt.name=Bt.data.name,Lt(Jt);return}var Wt=Bt&&Bt.event==="ready",Qt=Bt&&Bt.method==="ping";if(Wt||Qt){it.element.setAttribute("data-ready","true"),kt();return}processData(it,Bt)}},it._window.addEventListener("message",it._onMessage),it.element.nodeName!=="IFRAME"){var Ot=getOEmbedParameters(rt,st),Rt=getVimeoUrl(Ot);getOEmbedData(Rt,Ot,rt).then(function(Dt){var Bt=createEmbed(Dt,rt);return it.element=Bt,it._originalElement=rt,swapCallbacks(rt,Bt),playerMap.set(it.element,it),Dt}).catch(Lt)}});if(readyMap.set(this,wt),playerMap.set(this.element,this),this.element.nodeName==="IFRAME"&&postMessage(this,"ping"),screenfull.isEnabled){var Et=function(){return screenfull.exit()};this.fullscreenchangeHandler=function(){screenfull.isFullscreen?storeCallback(it,"event:exitFullscreen",Et):removeCallback(it,"event:exitFullscreen",Et),it.ready().then(function(){postMessage(it,"fullscreenchange",screenfull.isFullscreen)})},screenfull.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return _createClass(nt,[{key:"callMethod",value:function(it){var st=this,bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new npo_src(function(wt,Et){return st.ready().then(function(){storeCallback(st,it,{resolve:wt,reject:Et}),postMessage(st,it,bt)}).catch(Et)})}},{key:"get",value:function(it){var st=this;return new npo_src(function(bt,wt){return it=getMethodName(it,"get"),st.ready().then(function(){storeCallback(st,it,{resolve:bt,reject:wt}),postMessage(st,it)}).catch(wt)})}},{key:"set",value:function(it,st){var bt=this;return new npo_src(function(wt,Et){if(it=getMethodName(it,"set"),st==null)throw new TypeError("There must be a value to set.");return bt.ready().then(function(){storeCallback(bt,it,{resolve:wt,reject:Et}),postMessage(bt,it,st)}).catch(Et)})}},{key:"on",value:function(it,st){if(!it)throw new TypeError("You must pass an event name.");if(!st)throw new TypeError("You must pass a callback function.");if(typeof st!="function")throw new TypeError("The callback must be a function.");var bt=getCallbacks(this,"event:".concat(it));bt.length===0&&this.callMethod("addEventListener",it).catch(function(){}),storeCallback(this,"event:".concat(it),st)}},{key:"off",value:function(it,st){if(!it)throw new TypeError("You must pass an event name.");if(st&&typeof st!="function")throw new TypeError("The callback must be a function.");var bt=removeCallback(this,"event:".concat(it),st);bt&&this.callMethod("removeEventListener",it).catch(function(wt){})}},{key:"loadVideo",value:function(it){return this.callMethod("loadVideo",it)}},{key:"ready",value:function(){var it=readyMap.get(this)||new npo_src(function(st,bt){bt(new Error("Unknown player. Probably unloaded."))});return npo_src.resolve(it)}},{key:"addCuePoint",value:function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:it,data:st})}},{key:"removeCuePoint",value:function(it){return this.callMethod("removeCuePoint",it)}},{key:"enableTextTrack",value:function(it,st){if(!it)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:it,kind:st})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return screenfull.isEnabled?screenfull.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return screenfull.isEnabled?screenfull.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return screenfull.isEnabled?npo_src.resolve(screenfull.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var it=this;return new npo_src(function(st){if(readyMap.delete(it),playerMap.delete(it.element),it._originalElement&&(playerMap.delete(it._originalElement),it._originalElement.removeAttribute("data-vimeo-initialized")),it.element&&it.element.nodeName==="IFRAME"&&it.element.parentNode&&(it.element.parentNode.parentNode&&it._originalElement&&it._originalElement!==it.element.parentNode?it.element.parentNode.parentNode.removeChild(it.element.parentNode):it.element.parentNode.removeChild(it.element)),it.element&&it.element.nodeName==="DIV"&&it.element.parentNode){it.element.removeAttribute("data-vimeo-initialized");var bt=it.element.querySelector("iframe");bt&&bt.parentNode&&(bt.parentNode.parentNode&&it._originalElement&&it._originalElement!==bt.parentNode?bt.parentNode.parentNode.removeChild(bt.parentNode):bt.parentNode.removeChild(bt))}it._window.removeEventListener("message",it._onMessage),screenfull.isEnabled&&screenfull.off("fullscreenchange",it.fullscreenchangeHandler),st()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(it){return this.set("autopause",it)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(it){return this.set("cameraProps",it)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(it){return this.set("color",it)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(it){return this.set("currentTime",it)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(it){return this.set("loop",it)}},{key:"setMuted",value:function(it){return this.set("muted",it)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(it){return this.set("playbackRate",it)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(it){return this.set("quality",it)}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(it){return this.set("volume",it)}}]),nt}();isNode||(screenfull=initializeScreenfull(),initializeEmbeds(),resizeEmbeds(),initAppendVideoMetadata(),checkUrlTimeParam());var openseadragon={exports:{}},hasRequiredOpenseadragon;function requireOpenseadragon(){return hasRequiredOpenseadragon||(hasRequiredOpenseadragon=1,function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(nt){return new OpenSeadragon.Viewer(nt)}(function(nt){nt.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var rt={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},it=Object.prototype.toString,st=Object.prototype.hasOwnProperty;nt.isFunction=function(bt){return nt.type(bt)==="function"},nt.isArray=Array.isArray||function(bt){return nt.type(bt)==="array"},nt.isWindow=function(bt){return bt&&typeof bt=="object"&&"setInterval"in bt},nt.type=function(bt){return bt==null?String(bt):rt[it.call(bt)]||"object"},nt.isPlainObject=function(bt){if(!bt||OpenSeadragon.type(bt)!=="object"||bt.nodeType||nt.isWindow(bt)||bt.constructor&&!st.call(bt,"constructor")&&!st.call(bt.constructor.prototype,"isPrototypeOf"))return!1;var wt;for(var Et in bt)wt=Et;return wt===void 0||st.call(bt,wt)},nt.isEmptyObject=function(bt){for(var wt in bt)return!1;return!0},nt.freezeObject=function(bt){return Object.freeze?nt.freezeObject=Object.freeze:nt.freezeObject=function(wt){return wt},nt.freezeObject(bt)},nt.supportsCanvas=function(){var bt=document.createElement("canvas");return!!(nt.isFunction(bt.getContext)&&bt.getContext("2d"))}(),nt.isCanvasTainted=function(bt){var wt=!1;try{bt.getContext("2d").getImageData(0,0,1,1)}catch{wt=!0}return wt},nt.pixelDensityRatio=function(){if(nt.supportsCanvas){var bt=document.createElement("canvas").getContext("2d"),wt=window.devicePixelRatio||1,Et=bt.webkitBackingStorePixelRatio||bt.mozBackingStorePixelRatio||bt.msBackingStorePixelRatio||bt.oBackingStorePixelRatio||bt.backingStorePixelRatio||1;return Math.max(wt,1)/Et}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var nt,rt,it,st,bt,wt,Et=arguments[0]||{},kt=arguments.length,Lt=!1,Ot=1;for(typeof Et=="boolean"&&(Lt=Et,Et=arguments[1]||{},Ot=2),typeof Et!="object"&&!OpenSeadragon.isFunction(Et)&&(Et={}),kt===Ot&&(Et=this,--Ot);Ot<kt;Ot++)if(nt=arguments[Ot],nt!==null||nt!==void 0)for(rt in nt)it=Et[rt],st=nt[rt],Et!==st&&(Lt&&st&&(OpenSeadragon.isPlainObject(st)||(bt=OpenSeadragon.isArray(st)))?(bt?(bt=!1,wt=it&&OpenSeadragon.isArray(it)?it:[]):wt=it&&OpenSeadragon.isPlainObject(it)?it:{},Et[rt]=OpenSeadragon.extend(Lt,wt,st)):st!==void 0&&(Et[rt]=st));return Et};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var nt=navigator.userAgent;return typeof nt!="string"?!1:nt.indexOf("iPhone")!==-1||nt.indexOf("iPad")!==-1||nt.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(nt,rt){return function(){var it=arguments;return it===void 0&&(it=[]),rt.apply(nt,it)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(nt){return typeof nt=="string"&&(nt=document.getElementById(nt)),nt},getElementPosition:function(nt){var rt=new $.Point,it,st;for(nt=$.getElement(nt),it=$.getElementStyle(nt).position=="fixed",st=getOffsetParent(nt,it);st;)rt.x+=nt.offsetLeft,rt.y+=nt.offsetTop,it&&(rt=rt.plus($.getPageScroll())),nt=st,it=$.getElementStyle(nt).position=="fixed",st=getOffsetParent(nt,it);return rt},getElementOffset:function(nt){nt=$.getElement(nt);var rt=nt&&nt.ownerDocument,it,st,bt={top:0,left:0};return rt?(it=rt.documentElement,typeof nt.getBoundingClientRect<"u"&&(bt=nt.getBoundingClientRect()),st=rt==rt.window?rt:rt.nodeType===9?rt.defaultView||rt.parentWindow:!1,new $.Point(bt.left+(st.pageXOffset||it.scrollLeft)-(it.clientLeft||0),bt.top+(st.pageYOffset||it.scrollTop)-(it.clientTop||0))):new $.Point},getElementSize:function(nt){return nt=$.getElement(nt),new $.Point(nt.clientWidth,nt.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(nt){return nt=$.getElement(nt),nt.currentStyle}:function(nt){return nt=$.getElement(nt),window.getComputedStyle(nt,"")},getCssPropertyWithVendorPrefix:function(nt){var rt={};return $.getCssPropertyWithVendorPrefix=function(it){if(rt[it]!==void 0)return rt[it];var st=document.createElement("div").style,bt=null;if(st[it]!==void 0)bt=it;else for(var wt=["Webkit","Moz","MS","O","webkit","moz","ms","o"],Et=$.capitalizeFirstLetter(it),kt=0;kt<wt.length;kt++){var Lt=wt[kt]+Et;if(st[Lt]!==void 0){bt=Lt;break}}return rt[it]=bt,bt},$.getCssPropertyWithVendorPrefix(nt)},capitalizeFirstLetter:function(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)},positiveModulo:function(nt,rt){var it=nt%rt;return it<0&&(it+=rt),it},pointInElement:function(nt,rt){nt=$.getElement(nt);var it=$.getElementOffset(nt),st=$.getElementSize(nt);return rt.x>=it.x&&rt.x<it.x+st.x&&rt.y<it.y+st.y&&rt.y>=it.y},getEvent:function(nt){return nt?$.getEvent=function(rt){return rt}:$.getEvent=function(){return window.event},$.getEvent(nt)},getMousePosition:function(nt){if(typeof nt.pageX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.pageX,it.y=rt.pageY,it};else if(typeof nt.clientX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,it.y=rt.clientY+document.body.scrollTop+document.documentElement.scrollTop,it};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(nt)},getPageScroll:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(rt.scrollLeft||rt.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(nt.scrollLeft||nt.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(nt){if(typeof window.scrollTo<"u")$.setPageScroll=function(st){window.scrollTo(st.x,st.y)};else{var rt=$.getPageScroll();if(rt.x===nt.x&&rt.y===nt.y)return;document.body.scrollLeft=nt.x,document.body.scrollTop=nt.y;var it=$.getPageScroll();if(it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(st){document.body.scrollLeft=st.x,document.body.scrollTop=st.y};return}if(document.documentElement.scrollLeft=nt.x,document.documentElement.scrollTop=nt.y,it=$.getPageScroll(),it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(st){document.documentElement.scrollLeft=st.x,document.documentElement.scrollTop=st.y};return}$.setPageScroll=function(st){}}return $.setPageScroll(nt)},getWindowSize:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(nt.clientWidth||nt.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(rt.clientWidth||rt.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(nt){nt=$.getElement(nt);var rt=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(rt[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(rt[1].style,{display:"table-row"}),$.extend(rt[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),rt[0].appendChild(rt[1]),rt[1].appendChild(rt[2]),rt[2].appendChild(nt),rt[0]},makeNeutralElement:function(nt){var rt=document.createElement(nt),it=rt.style;return it.background="transparent none",it.border="none",it.margin="0px",it.padding="0px",it.position="static",rt},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(nt){return $.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img");return it.src=rt,it},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img"),st=null;return st=$.makeNeutralElement("span"),st.style.display="inline-block",it.onload=function(){st.style.width=st.style.width||it.width+"px",st.style.height=st.style.height||it.height+"px",it.onload=null,it=null},it.src=rt,st.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+rt+"', sizingMethod='scale')",st}),$.makeTransparentImage(nt)},setElementOpacity:function(nt,rt,it){var st,bt;nt=$.getElement(nt),it&&!$.Browser.alpha&&(rt=Math.round(rt)),$.Browser.opacity?nt.style.opacity=rt<1?rt:"":rt<1?(st=Math.round(100*rt),bt="alpha(opacity="+st+")",nt.style.filter=bt):nt.style.filter=""},setElementTouchActionNone:function(nt){nt=$.getElement(nt),typeof nt.style.touchAction<"u"?nt.style.touchAction="none":typeof nt.style.msTouchAction<"u"&&(nt.style.msTouchAction="none")},addClass:function(nt,rt){nt=$.getElement(nt),nt.className?(" "+nt.className+" ").indexOf(" "+rt+" ")===-1&&(nt.className+=" "+rt):nt.className=rt},indexOf:function(nt,rt,it){return Array.prototype.indexOf?this.indexOf=function(st,bt,wt){return st.indexOf(bt,wt)}:this.indexOf=function(st,bt,wt){var Et,kt=wt||0,Lt;if(!st)throw new TypeError;if(Lt=st.length,Lt===0||kt>=Lt)return-1;for(kt<0&&(kt=Lt-Math.abs(kt)),Et=kt;Et<Lt;Et++)if(st[Et]===bt)return Et;return-1},this.indexOf(nt,rt,it)},removeClass:function(nt,rt){var it,st=[],bt;for(nt=$.getElement(nt),it=nt.className.split(/\s+/),bt=0;bt<it.length;bt++)it[bt]&&it[bt]!==rt&&st.push(it[bt]);nt.className=st.join(" ")},addEvent:function(){if(window.addEventListener)return function(nt,rt,it,st){nt=$.getElement(nt),nt.addEventListener(rt,it,st)};if(window.attachEvent)return function(nt,rt,it,st){nt=$.getElement(nt),nt.attachEvent("on"+rt,it)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(nt,rt,it,st){nt=$.getElement(nt),nt.removeEventListener(rt,it,st)};if(window.detachEvent)return function(nt,rt,it,st){nt=$.getElement(nt),nt.detachEvent("on"+rt,it)};throw new Error("No known event model.")}(),cancelEvent:function(nt){nt=$.getEvent(nt),nt.preventDefault?$.cancelEvent=function(rt){rt.preventDefault()}:$.cancelEvent=function(rt){rt=$.getEvent(rt),rt.cancel=!0,rt.returnValue=!1},$.cancelEvent(nt)},stopEvent:function(nt){nt=$.getEvent(nt),nt.stopPropagation?$.stopEvent=function(rt){rt.stopPropagation()}:$.stopEvent=function(rt){rt=$.getEvent(rt),rt.cancelBubble=!0},$.stopEvent(nt)},createCallback:function(nt,rt){var it=[],st;for(st=2;st<arguments.length;st++)it.push(arguments[st]);return function(){var bt=it.concat([]),wt;for(wt=0;wt<arguments.length;wt++)bt.push(arguments[wt]);return rt.apply(nt,bt)}},getUrlParameter:function(nt){var rt=URLPARAMS[nt];return rt||null},getUrlProtocol:function(nt){var rt=nt.match(/^([a-z]+:)\/\//i);return rt===null?window.location.protocol:rt[1].toLowerCase()},createAjaxRequest:function(nt){var rt;try{rt=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{rt=!1}if(rt)window.XMLHttpRequest?$.createAjaxRequest=function(it){return it?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(nt)},makeAjaxRequest:function(nt,rt,it){var st,bt,wt;$.isPlainObject(nt)&&(rt=nt.success,it=nt.error,st=nt.withCredentials,bt=nt.headers,wt=nt.responseType||null,nt=nt.url);var Et=$.getUrlProtocol(nt),kt=$.createAjaxRequest(Et==="file:");if(!$.isFunction(rt))throw new Error("makeAjaxRequest requires a success callback");kt.onreadystatechange=function(){kt.readyState==4&&(kt.onreadystatechange=function(){},kt.status>=200&&kt.status<300||kt.status===0&&Et!=="http:"&&Et!=="https:"?rt(kt):($.console.log("AJAX request returned %d: %s",kt.status,nt),$.isFunction(it)&&it(kt)))};try{if(kt.open("GET",nt,!0),wt&&(kt.responseType=wt),bt)for(var Lt in bt)Object.prototype.hasOwnProperty.call(bt,Lt)&&bt[Lt]&&kt.setRequestHeader(Lt,bt[Lt]);st&&(kt.withCredentials=!0),kt.send(null)}catch(Bt){var Ot=Bt.message,Rt=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(Rt&&typeof Bt.number<"u"&&Bt.number==-2147024891&&(Ot+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",Bt.name,Ot),kt.onreadystatechange=function(){},window.XDomainRequest){var Dt=new window.XDomainRequest;if(Dt){Dt.onload=function(Ft){$.isFunction(rt)&&rt({responseText:Dt.responseText,status:200,statusText:"OK"})},Dt.onerror=function(Ft){$.isFunction(it)&&it({responseText:Dt.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{Dt.open("GET",nt),Dt.send()}catch{$.isFunction(it)&&it(kt,Bt)}}}else $.isFunction(it)&&it(kt,Bt)}return kt},jsonp:function(nt){var rt,it=nt.url,st=document.head||document.getElementsByTagName("head")[0]||document.documentElement,bt=nt.callbackName||"openseadragon"+$.now(),wt=window[bt],Et="$1"+bt+"$2",kt=nt.param||"callback",Lt=nt.callback;it=it.replace(/(\=)\?(&|$)|\?\?/i,Et),it+=(/\?/.test(it)?"&":"?")+kt+"="+bt,window[bt]=function(Ot){if(wt)window[bt]=wt;else try{delete window[bt]}catch{}Lt&&$.isFunction(Lt)&&Lt(Ot)},rt=document.createElement("script"),(nt.async!==void 0||nt.async!==!1)&&(rt.async="async"),nt.scriptCharset&&(rt.charset=nt.scriptCharset),rt.src=it,rt.onload=rt.onreadystatechange=function(Ot,Rt){(Rt||!rt.readyState||/loaded|complete/.test(rt.readyState))&&(rt.onload=rt.onreadystatechange=null,st&&rt.parentNode&&st.removeChild(rt),rt=void 0)},st.insertBefore(rt,st.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(nt){if(window.DOMParser)$.parseXml=function(rt){var it=null,st;return st=new DOMParser,it=st.parseFromString(rt,"text/xml"),it};else if(window.ActiveXObject)$.parseXml=function(rt){var it=null;return it=new ActiveXObject("Microsoft.XMLDOM"),it.async=!1,it.loadXML(rt),it};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(nt)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(nt){return nt=nt||"",!!FILEFORMATS[nt.toLowerCase()]}});var nullfunction=function(nt){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var nt=navigator.appVersion,rt=navigator.userAgent,it;switch(navigator.appName){case"Microsoft Internet Explorer":!!window.attachEvent&&!!window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(rt.substring(rt.indexOf("MSIE")+5,rt.indexOf(";",rt.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(rt.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(rt.substring(rt.indexOf("Firefox")+8))):rt.indexOf("Safari")>=0?($.Browser.vendor=rt.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(rt.substring(rt.substring(0,rt.indexOf("Safari")).lastIndexOf("/")+1,rt.indexOf("Safari")))):(it=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),it.exec(rt)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(nt);break}var st=window.location.search.substring(1),bt=st.split("&"),wt,Et,kt;for(kt=0;kt<bt.length;kt++)if(wt=bt[kt],Et=wt.indexOf("="),Et>0){var Lt=wt.substring(0,Et),Ot=wt.substring(Et+1);try{URLPARAMS[Lt]=decodeURIComponent(Ot)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",Lt,Ot)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(nt){var rt=nt.requestAnimationFrame||nt.mozRequestAnimationFrame||nt.webkitRequestAnimationFrame||nt.msRequestAnimationFrame,it=nt.cancelAnimationFrame||nt.mozCancelAnimationFrame||nt.webkitCancelAnimationFrame||nt.msCancelAnimationFrame;if(rt&&it)$.requestAnimationFrame=function(){return rt.apply(nt,arguments)},$.cancelAnimationFrame=function(){return it.apply(nt,arguments)};else{var st=[],bt=[],wt=0,Et;$.requestAnimationFrame=function(kt){return st.push([++wt,kt]),Et||(Et=setInterval(function(){if(st.length){var Lt=$.now(),Ot=bt;for(bt=st,st=Ot;bt.length;)bt.shift()[1](Lt)}else clearInterval(Et),Et=void 0},1e3/50)),wt},$.cancelAnimationFrame=function(kt){var Lt,Ot;for(Lt=0,Ot=st.length;Lt<Ot;Lt+=1)if(st[Lt][0]===kt){st.splice(Lt,1);return}for(Lt=0,Ot=bt.length;Lt<Ot;Lt+=1)if(bt[Lt][0]===kt){bt.splice(Lt,1);return}}}}(window);function getOffsetParent(nt,rt){return rt&&nt!=document.body?document.body:nt.offsetParent}}(OpenSeadragon),function(nt,rt){module.exports?module.exports=rt():nt.OpenSeadragon=rt()}(commonjsGlobal$1,function(){return OpenSeadragon}),function(nt){var rt={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.fullscreenElement},rt.requestFullScreen=function(it){return it.requestFullscreen()},rt.exitFullScreen=function(){document.exitFullscreen()},rt.fullScreenEventName="fullscreenchange",rt.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.msFullscreenElement},rt.requestFullScreen=function(it){return it.msRequestFullscreen()},rt.exitFullScreen=function(){document.msExitFullscreen()},rt.fullScreenEventName="MSFullscreenChange",rt.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitFullscreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullscreen()},rt.exitFullScreen=function(){document.webkitExitFullscreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullScreen()},rt.exitFullScreen=function(){document.webkitCancelFullScreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.mozFullScreenElement},rt.requestFullScreen=function(it){return it.mozRequestFullScreen()},rt.exitFullScreen=function(){document.mozCancelFullScreen()},rt.fullScreenEventName="mozfullscreenchange",rt.fullScreenErrorEventName="mozfullscreenerror"),rt.isFullScreen=function(){return rt.getFullScreenElement()!==null},rt.cancelFullScreen=function(){nt.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),rt.exitFullScreen()},nt.extend(nt,rt)}(OpenSeadragon),function(nt){nt.EventSource=function(){this.events={}},nt.EventSource.prototype={addOnceHandler:function(rt,it,st,bt){var wt=this;bt=bt||1;var Et=0,kt=function(Lt){Et++,Et===bt&&wt.removeHandler(rt,kt),it(Lt)};this.addHandler(rt,kt,st)},addHandler:function(rt,it,st){var bt=this.events[rt];bt||(this.events[rt]=bt=[]),it&&nt.isFunction(it)&&(bt[bt.length]={handler:it,userData:st||null})},removeHandler:function(rt,it){var st=this.events[rt],bt=[],wt;if(!!st&&nt.isArray(st)){for(wt=0;wt<st.length;wt++)st[wt].handler!==it&&bt.push(st[wt]);this.events[rt]=bt}},removeAllHandlers:function(rt){if(rt)this.events[rt]=[];else for(var it in this.events)this.events[it]=[]},getHandler:function(rt){var it=this.events[rt];return!it||!it.length?null:(it=it.length===1?[it[0]]:Array.apply(null,it),function(st,bt){var wt,Et=it.length;for(wt=0;wt<Et;wt++)it[wt]&&(bt.eventSource=st,bt.userData=it[wt].userData,it[wt].handler(bt))})},raiseEvent:function(rt,it){var st=this.getHandler(rt);st&&(it||(it={}),st(this,it))}}}(OpenSeadragon),function(nt){var rt=[],it={};nt.MouseTracker=function(An){rt.push(this);var Sn=arguments;nt.isPlainObject(An)||(An={element:Sn[0],clickTimeThreshold:Sn[1],clickDistThreshold:Sn[2]}),this.hash=Math.random(),this.element=nt.getElement(An.element),this.clickTimeThreshold=An.clickTimeThreshold||nt.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=An.clickDistThreshold||nt.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=An.dblClickTimeThreshold||nt.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=An.dblClickDistThreshold||nt.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=An.userData||null,this.stopDelay=An.stopDelay||50,this.enterHandler=An.enterHandler||null,this.exitHandler=An.exitHandler||null,this.pressHandler=An.pressHandler||null,this.nonPrimaryPressHandler=An.nonPrimaryPressHandler||null,this.releaseHandler=An.releaseHandler||null,this.nonPrimaryReleaseHandler=An.nonPrimaryReleaseHandler||null,this.moveHandler=An.moveHandler||null,this.scrollHandler=An.scrollHandler||null,this.clickHandler=An.clickHandler||null,this.dblClickHandler=An.dblClickHandler||null,this.dragHandler=An.dragHandler||null,this.dragEndHandler=An.dragEndHandler||null,this.pinchHandler=An.pinchHandler||null,this.stopHandler=An.stopHandler||null,this.keyDownHandler=An.keyDownHandler||null,this.keyUpHandler=An.keyUpHandler||null,this.keyHandler=An.keyHandler||null,this.focusHandler=An.focusHandler||null,this.blurHandler=An.blurHandler||null;var Wn=this;it[this.hash]={click:function(er){Yt(Wn,er)},dblclick:function(er){Jt(Wn,er)},keydown:function(er){Wt(Wn,er)},keyup:function(er){Qt(Wn,er)},keypress:function(er){rn(Wn,er)},focus:function(er){sn(Wn,er)},blur:function(er){on(Wn,er)},wheel:function(er){hn(Wn,er)},mousewheel:function(er){mn(Wn,er)},DOMMouseScroll:function(er){mn(Wn,er)},MozMousePixelScroll:function(er){mn(Wn,er)},mouseenter:function(er){kn(Wn,er)},mouseleave:function(er){pn(Wn,er)},mouseover:function(er){In(Wn,er)},mouseout:function(er){Hn(Wn,er)},mousedown:function(er){vn(Wn,er)},mouseup:function(er){yr(Wn,er)},mouseupcaptured:function(er){Tr(Wn,er)},mousemove:function(er){rr(Wn,er)},mousemovecaptured:function(er){wr(Wn,er)},touchstart:function(er){Lr(Wn,er)},touchend:function(er){Pr(Wn,er)},touchendcaptured:function(er){lr(Wn,er)},touchmove:function(er){sr(Wn,er)},touchmovecaptured:function(er){pr(Wn,er)},touchcancel:function(er){ir(Wn,er)},gesturestart:function(er){Pn(Wn,er)},gesturechange:function(er){nn(Wn,er)},pointerover:function(er){fn(Wn,er)},MSPointerOver:function(er){fn(Wn,er)},pointerout:function(er){cn(Wn,er)},MSPointerOut:function(er){cn(Wn,er)},pointerdown:function(er){Nn(Wn,er)},MSPointerDown:function(er){Nn(Wn,er)},pointerup:function(er){On(Wn,er)},MSPointerUp:function(er){On(Wn,er)},pointermove:function(er){Qn(Wn,er)},MSPointerMove:function(er){Qn(Wn,er)},pointercancel:function(er){hr(Wn,er)},MSPointerCancel:function(er){hr(Wn,er)},pointerupcaptured:function(er){cr(Wn,er)},pointermovecaptured:function(er){Un(Wn,er)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},An.startDisabled||this.setTracking(!0)},nt.MouseTracker.prototype={destroy:function(){var An;for(wt(this),this.element=null,An=0;An<rt.length;An++)if(rt[An]===this){rt.splice(An,1);break}it[this.hash]=null,delete it[this.hash]},isTracking:function(){return it[this.hash].tracking},setTracking:function(An){return An?bt(this):wt(this),this},getActivePointersListsExceptType:function(An){for(var Sn=it[this.hash],Wn=[],er=0;er<Sn.activePointersLists.length;++er)Sn.activePointersLists[er].type!==An&&Wn.push(Sn.activePointersLists[er]);return Wn},getActivePointersListByType:function(An){var Sn=it[this.hash],Wn,er=Sn.activePointersLists.length,vr;for(Wn=0;Wn<er;Wn++)if(Sn.activePointersLists[Wn].type===An)return Sn.activePointersLists[Wn];return vr=new nt.MouseTracker.GesturePointList(An),Sn.activePointersLists.push(vr),vr},getActivePointerCount:function(){var An=it[this.hash],Sn,Wn=An.activePointersLists.length,er=0;for(Sn=0;Sn<Wn;Sn++)er+=An.activePointersLists[Sn].getLength();return er},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},nt.MouseTracker.resetAllMouseTrackers=function(){for(var An=0;An<rt.length;An++)rt[An].isTracking()&&(rt[An].setTracking(!1),rt[An].setTracking(!0))},nt.MouseTracker.gesturePointVelocityTracker=function(){var An=[],Sn=0,Wn=0,er=function(li,Or){return li.hash.toString()+Or.type+Or.id.toString()},vr=function(){var li,Or=An.length,mi,_i,Pi=nt.now(),xi,Zi,$i;for(xi=Pi-Wn,Wn=Pi,li=0;li<Or;li++)mi=An[li],_i=mi.gPoint,_i.direction=Math.atan2(_i.currentPos.y-mi.lastPos.y,_i.currentPos.x-mi.lastPos.x),Zi=mi.lastPos.distanceTo(_i.currentPos),mi.lastPos=_i.currentPos,$i=1e3*Zi/(xi+1),_i.speed=.75*$i+.25*_i.speed},ti=function(li,Or){var mi=er(li,Or);An.push({guid:mi,gPoint:Or,lastPos:Or.currentPos}),An.length===1&&(Wn=nt.now(),Sn=window.setInterval(vr,50))},_r=function(li,Or){var mi=er(li,Or),_i,Pi=An.length;for(_i=0;_i<Pi;_i++)if(An[_i].guid===mi){An.splice(_i,1),Pi--,Pi===0&&window.clearInterval(Sn);break}};return{addPoint:ti,removePoint:_r}}(),nt.MouseTracker.captureElement=document,nt.MouseTracker.wheelEventName=nt.Browser.vendor==nt.BROWSERS.IE&&nt.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",nt.MouseTracker.supportsMouseCapture=function(){var An=document.createElement("div");return nt.isFunction(An.setCapture)&&nt.isFunction(An.releaseCapture)}(),nt.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",nt.MouseTracker.wheelEventName],nt.MouseTracker.wheelEventName=="DOMMouseScroll"&&nt.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||nt.Browser.vendor!==nt.BROWSERS.IE)?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),nt.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),nt.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):(nt.MouseTracker.havePointerEvents=!1,nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?(nt.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),nt.MouseTracker.haveMouseEnter=!0):(nt.MouseTracker.subscribeEvents.push("mouseover","mouseout"),nt.MouseTracker.haveMouseEnter=!1),nt.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&nt.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&nt.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),nt.MouseTracker.mousePointerId="legacy-mouse",nt.MouseTracker.maxTouchPoints=10),nt.MouseTracker.GesturePointList=function(An){this._gPoints=[],this.type=An,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},nt.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(An){return this._gPoints.push(An)},removeById:function(An){var Sn,Wn=this._gPoints.length;for(Sn=0;Sn<Wn;Sn++)if(this._gPoints[Sn].id===An){this._gPoints.splice(Sn,1);break}return this._gPoints.length},getByIndex:function(An){return An<this._gPoints.length?this._gPoints[An]:null},getById:function(An){var Sn,Wn=this._gPoints.length;for(Sn=0;Sn<Wn;Sn++)if(this._gPoints[Sn].id===An)return this._gPoints[Sn];return null},getPrimary:function(An){var Sn,Wn=this._gPoints.length;for(Sn=0;Sn<Wn;Sn++)if(this._gPoints[Sn].isPrimary)return this._gPoints[Sn];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function st(An){var Sn=it[An.hash],Wn,er=Sn.activePointersLists.length;for(Wn=0;Wn<er;Wn++)Sn.activePointersLists[Wn].captureCount>0&&(nt.removeEvent(nt.MouseTracker.captureElement,"mousemove",Sn.mousemovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"mouseup",Sn.mouseupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",Sn.pointermovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",Sn.pointerupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchmove",Sn.touchmovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchend",Sn.touchendcaptured,!0),Sn.activePointersLists[Wn].captureCount=0);for(Wn=0;Wn<er;Wn++)Sn.activePointersLists.pop()}function bt(An){var Sn=it[An.hash],Wn,er;if(!Sn.tracking){for(er=0;er<nt.MouseTracker.subscribeEvents.length;er++)Wn=nt.MouseTracker.subscribeEvents[er],nt.addEvent(An.element,Wn,Sn[Wn],!1);st(An),Sn.tracking=!0}}function wt(An){var Sn=it[An.hash],Wn,er;if(Sn.tracking){for(er=0;er<nt.MouseTracker.subscribeEvents.length;er++)Wn=nt.MouseTracker.subscribeEvents[er],nt.removeEvent(An.element,Wn,Sn[Wn],!1);st(An),Sn.tracking=!1}}function Et(An,Sn){var Wn=it[An.hash];if(Sn==="pointerevent")return{upName:nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Wn.pointerupcaptured,moveName:nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Wn.pointermovecaptured};if(Sn==="mouse")return{upName:"mouseup",upHandler:Wn.mouseupcaptured,moveName:"mousemove",moveHandler:Wn.mousemovecaptured};if(Sn==="touch")return{upName:"touchend",upHandler:Wn.touchendcaptured,moveName:"touchmove",moveHandler:Wn.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function kt(An,Sn,Wn){var er=An.getActivePointersListByType(Sn),vr;er.captureCount+=Wn||1,er.captureCount===1&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?An.element.setCapture(!0):(vr=Et(An,nt.MouseTracker.havePointerEvents?"pointerevent":Sn),Ci&&$r(window.top)&&nt.addEvent(window.top,vr.upName,vr.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,vr.upName,vr.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,vr.moveName,vr.moveHandler,!0)))}function Lt(An,Sn,Wn){var er=An.getActivePointersListByType(Sn),vr;er.captureCount-=Wn||1,er.captureCount===0&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?An.element.releaseCapture():(vr=Et(An,nt.MouseTracker.havePointerEvents?"pointerevent":Sn),Ci&&$r(window.top)&&nt.removeEvent(window.top,vr.upName,vr.upHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,vr.moveName,vr.moveHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,vr.upName,vr.upHandler,!0)))}function Ot(An){var Sn;if(nt.MouseTracker.unprefixedPointerEvents)Sn=An.pointerType;else switch(An.pointerType){case 2:Sn="touch";break;case 3:Sn="pen";break;case 4:Sn="mouse";break;default:Sn=""}return Sn}function Rt(An){return nt.getMousePosition(An)}function Dt(An,Sn){return Bt(Rt(An),Sn)}function Bt(An,Sn){var Wn=nt.getElementOffset(Sn);return An.minus(Wn)}function Ft(An,Sn){return new nt.Point((An.x+Sn.x)/2,(An.y+Sn.y)/2)}function Yt(An,Sn){An.clickHandler&&nt.cancelEvent(Sn)}function Jt(An,Sn){An.dblClickHandler&&nt.cancelEvent(Sn)}function Wt(An,Sn){var Wn;An.keyDownHandler&&(Sn=nt.getEvent(Sn),Wn=An.keyDownHandler({eventSource:An,keyCode:Sn.keyCode?Sn.keyCode:Sn.charCode,ctrl:Sn.ctrlKey,shift:Sn.shiftKey,alt:Sn.altKey,meta:Sn.metaKey,originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Wn||nt.cancelEvent(Sn))}function Qt(An,Sn){var Wn;An.keyUpHandler&&(Sn=nt.getEvent(Sn),Wn=An.keyUpHandler({eventSource:An,keyCode:Sn.keyCode?Sn.keyCode:Sn.charCode,ctrl:Sn.ctrlKey,shift:Sn.shiftKey,alt:Sn.altKey,meta:Sn.metaKey,originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Wn||nt.cancelEvent(Sn))}function rn(An,Sn){var Wn;An.keyHandler&&(Sn=nt.getEvent(Sn),Wn=An.keyHandler({eventSource:An,keyCode:Sn.keyCode?Sn.keyCode:Sn.charCode,ctrl:Sn.ctrlKey,shift:Sn.shiftKey,alt:Sn.altKey,meta:Sn.metaKey,originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Wn||nt.cancelEvent(Sn))}function sn(An,Sn){var Wn;An.focusHandler&&(Sn=nt.getEvent(Sn),Wn=An.focusHandler({eventSource:An,originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Wn===!1&&nt.cancelEvent(Sn))}function on(An,Sn){var Wn;An.blurHandler&&(Sn=nt.getEvent(Sn),Wn=An.blurHandler({eventSource:An,originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Wn===!1&&nt.cancelEvent(Sn))}function hn(An,Sn){Cn(An,Sn,Sn)}function mn(An,Sn){Sn=nt.getEvent(Sn);var Wn={target:Sn.target||Sn.srcElement,type:"wheel",shiftKey:Sn.shiftKey||!1,clientX:Sn.clientX,clientY:Sn.clientY,pageX:Sn.pageX?Sn.pageX:Sn.clientX,pageY:Sn.pageY?Sn.pageY:Sn.clientY,deltaMode:Sn.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};nt.MouseTracker.wheelEventName=="mousewheel"?Wn.deltaY=-Sn.wheelDelta/nt.DEFAULT_SETTINGS.pixelsPerWheelLine:Wn.deltaY=Sn.detail,Cn(An,Wn,Sn)}function Cn(An,Sn,Wn){var er=0,vr;er=Sn.deltaY<0?1:-1,An.scrollHandler&&(vr=An.scrollHandler({eventSource:An,pointerType:"mouse",position:Dt(Sn,An.element),scroll:er,shift:Sn.shiftKey,isTouchEvent:!1,originalEvent:Wn,preventDefaultAction:!1,userData:An.userData}),vr===!1&&nt.cancelEvent(Wn))}function Tn(An,Sn){if(An===Sn)return!1;for(;Sn&&Sn!==An;)Sn=Sn.parentNode;return Sn===An}function kn(An,Sn){Sn=nt.getEvent(Sn),Ln(An,Sn)}function In(An,Sn){Sn=nt.getEvent(Sn),!(Sn.currentTarget===Sn.relatedTarget||Tn(Sn.currentTarget,Sn.relatedTarget))&&Ln(An,Sn)}function Ln(An,Sn){var Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(Sn),currentTime:nt.now()};br(An,Sn,[Wn])}function pn(An,Sn){Sn=nt.getEvent(Sn),yn(An,Sn)}function Hn(An,Sn){Sn=nt.getEvent(Sn),!(Sn.currentTarget===Sn.relatedTarget||Tn(Sn.currentTarget,Sn.relatedTarget))&&yn(An,Sn)}function yn(An,Sn){var Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(Sn),currentTime:nt.now()};hi(An,Sn,[Wn])}function mr(An){return nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?An===1?0:An===2?2:An===4?1:-1:An}function vn(An,Sn){var Wn;Sn=nt.getEvent(Sn),Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(Sn),currentTime:nt.now()},di(An,Sn,[Wn],mr(Sn.button))&&(nt.stopEvent(Sn),kt(An,"mouse")),(An.clickHandler||An.dblClickHandler||An.pressHandler||An.dragHandler||An.dragEndHandler)&&nt.cancelEvent(Sn)}function yr(An,Sn){Mr(An,Sn)}function Tr(An,Sn){Mr(An,Sn),nt.stopEvent(Sn)}function Mr(An,Sn){var Wn;Sn=nt.getEvent(Sn),Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(Sn),currentTime:nt.now()},vi(An,Sn,[Wn],mr(Sn.button))&&Lt(An,"mouse")}function rr(An,Sn){fr(An,Sn)}function wr(An,Sn){fr(An,Sn),nt.stopEvent(Sn)}function fr(An,Sn){var Wn;Sn=nt.getEvent(Sn),Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(Sn),currentTime:nt.now()},Ti(An,Sn,[Wn])}function gr(An,Sn,Wn){var er,vr=Wn.getLength(),ti=[];if(Wn.type==="touch"||Wn.contacts>0){for(er=0;er<vr;er++)ti.push(Wn.getByIndex(er));ti.length>0&&(vi(An,Sn,ti,0),Wn.captureCount=1,Lt(An,Wn.type),hi(An,Sn,ti))}}function Lr(An,Sn){var Wn,er,vr,ti=Sn.changedTouches.length,_r=[],li,Or=An.getActivePointersListByType("touch");for(Wn=nt.now(),Or.getLength()>Sn.touches.length-ti&&(nt.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),gr(An,Sn,Or)),er=0;er<ti;er++)_r.push({id:Sn.changedTouches[er].identifier,type:"touch",currentPos:Rt(Sn.changedTouches[er]),currentTime:Wn});for(br(An,Sn,_r),er=0;er<rt.length;er++)if(rt[er]!==An&&rt[er].isTracking()&&Tn(rt[er].element,An.element)){for(li=[],vr=0;vr<ti;vr++)li.push({id:Sn.changedTouches[vr].identifier,type:"touch",currentPos:Rt(Sn.changedTouches[vr]),currentTime:Wn});br(rt[er],Sn,li)}di(An,Sn,_r,0)&&(nt.stopEvent(Sn),kt(An,"touch",ti)),nt.cancelEvent(Sn)}function Pr(An,Sn){qr(An,Sn)}function lr(An,Sn){qr(An,Sn),nt.stopEvent(Sn)}function qr(An,Sn){var Wn,er,vr,ti=Sn.changedTouches.length,_r=[],li;for(Wn=nt.now(),er=0;er<ti;er++)_r.push({id:Sn.changedTouches[er].identifier,type:"touch",currentPos:Rt(Sn.changedTouches[er]),currentTime:Wn});for(vi(An,Sn,_r,0)&&Lt(An,"touch",ti),hi(An,Sn,_r),er=0;er<rt.length;er++)if(rt[er]!==An&&rt[er].isTracking()&&Tn(rt[er].element,An.element)){for(li=[],vr=0;vr<ti;vr++)li.push({id:Sn.changedTouches[vr].identifier,type:"touch",currentPos:Rt(Sn.changedTouches[vr]),currentTime:Wn});hi(rt[er],Sn,li)}nt.cancelEvent(Sn)}function sr(An,Sn){Er(An,Sn)}function pr(An,Sn){Er(An,Sn),nt.stopEvent(Sn)}function Er(An,Sn){var Wn,er=Sn.changedTouches.length,vr=[];for(Wn=0;Wn<er;Wn++)vr.push({id:Sn.changedTouches[Wn].identifier,type:"touch",currentPos:Rt(Sn.changedTouches[Wn]),currentTime:nt.now()});Ti(An,Sn,vr),nt.cancelEvent(Sn)}function ir(An,Sn){var Wn=An.getActivePointersListByType("touch");gr(An,Sn,Wn)}function Pn(An,Sn){return Sn.stopPropagation(),Sn.preventDefault(),!1}function nn(An,Sn){return Sn.stopPropagation(),Sn.preventDefault(),!1}function fn(An,Sn){var Wn;Sn.currentTarget===Sn.relatedTarget||Tn(Sn.currentTarget,Sn.relatedTarget)||(Wn={id:Sn.pointerId,type:Ot(Sn),isPrimary:Sn.isPrimary,currentPos:Rt(Sn),currentTime:nt.now()},br(An,Sn,[Wn]))}function cn(An,Sn){var Wn;Sn.currentTarget===Sn.relatedTarget||Tn(Sn.currentTarget,Sn.relatedTarget)||(Wn={id:Sn.pointerId,type:Ot(Sn),isPrimary:Sn.isPrimary,currentPos:Rt(Sn),currentTime:nt.now()},hi(An,Sn,[Wn]))}function Nn(An,Sn){var Wn;Wn={id:Sn.pointerId,type:Ot(Sn),isPrimary:Sn.isPrimary,currentPos:Rt(Sn),currentTime:nt.now()},di(An,Sn,[Wn],Sn.button)&&(nt.stopEvent(Sn),kt(An,Wn.type)),(An.clickHandler||An.dblClickHandler||An.pressHandler||An.dragHandler||An.dragEndHandler||An.pinchHandler)&&nt.cancelEvent(Sn)}function On(An,Sn){Bn(An,Sn)}function cr(An,Sn){var Wn=An.getActivePointersListByType(Ot(Sn));Wn.getById(Sn.pointerId)&&Bn(An,Sn),nt.stopEvent(Sn)}function Bn(An,Sn){var Wn;Wn={id:Sn.pointerId,type:Ot(Sn),isPrimary:Sn.isPrimary,currentPos:Rt(Sn),currentTime:nt.now()},vi(An,Sn,[Wn],Sn.button)&&Lt(An,Wn.type)}function Qn(An,Sn){or(An,Sn)}function Un(An,Sn){var Wn=An.getActivePointersListByType(Ot(Sn));Wn.getById(Sn.pointerId)&&or(An,Sn),nt.stopEvent(Sn)}function or(An,Sn){var Wn;Wn={id:Sn.pointerId,type:Ot(Sn),isPrimary:Sn.isPrimary,currentPos:Rt(Sn),currentTime:nt.now()},Ti(An,Sn,[Wn])}function hr(An,Sn){var Wn;Wn={id:Sn.pointerId,type:Ot(Sn)},ki(An,Sn,[Wn])}function kr(An,Sn){return Object.prototype.hasOwnProperty.call(Sn,"isPrimary")||(An.getLength()===0?Sn.isPrimary=!0:Sn.isPrimary=!1),Sn.speed=0,Sn.direction=0,Sn.contactPos=Sn.currentPos,Sn.contactTime=Sn.currentTime,Sn.lastPos=Sn.currentPos,Sn.lastTime=Sn.currentTime,An.add(Sn)}function xr(An,Sn){var Wn,er;return An.getById(Sn.id)?(Wn=An.removeById(Sn.id),Object.prototype.hasOwnProperty.call(Sn,"isPrimary")||(er=An.getPrimary(),er||(er=An.getByIndex(0),er&&(er.isPrimary=!0)))):Wn=An.getLength(),Wn}function br(An,Sn,Wn){var er=An.getActivePointersListByType(Wn[0].type),vr,ti=Wn.length,_r,li,Or;for(vr=0;vr<ti;vr++)_r=Wn[vr],li=er.getById(_r.id),li?(li.insideElement=!0,li.lastPos=li.currentPos,li.lastTime=li.currentTime,li.currentPos=_r.currentPos,li.currentTime=_r.currentTime,_r=li):(_r.captured=!1,_r.insideElementPressed=!1,_r.insideElement=!0,kr(er,_r)),An.enterHandler&&(Or=An.enterHandler({eventSource:An,pointerType:_r.type,position:Bt(_r.currentPos,An.element),buttons:er.buttons,pointers:An.getActivePointerCount(),insideElementPressed:_r.insideElementPressed,buttonDownAny:er.buttons!==0,isTouchEvent:_r.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Or===!1&&nt.cancelEvent(Sn))}function hi(An,Sn,Wn){var er=An.getActivePointersListByType(Wn[0].type),vr,ti=Wn.length,_r,li,Or;for(vr=0;vr<ti;vr++)_r=Wn[vr],li=er.getById(_r.id),li&&(li.captured?(li.insideElement=!1,li.lastPos=li.currentPos,li.lastTime=li.currentTime,li.currentPos=_r.currentPos,li.currentTime=_r.currentTime):xr(er,li),_r=li),An.exitHandler&&(Or=An.exitHandler({eventSource:An,pointerType:_r.type,position:_r.currentPos&&Bt(_r.currentPos,An.element),buttons:er.buttons,pointers:An.getActivePointerCount(),insideElementPressed:li?li.insideElementPressed:!1,buttonDownAny:er.buttons!==0,isTouchEvent:_r.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Or===!1&&nt.cancelEvent(Sn))}function di(An,Sn,Wn,er){var vr=it[An.hash],ti,_r=An.getActivePointersListByType(Wn[0].type),li,Or=Wn.length,mi,_i;typeof Sn.buttons<"u"?_r.buttons=Sn.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?er===0?_r.buttons+=1:er===1?_r.buttons+=4:er===2?_r.buttons+=2:er===3?_r.buttons+=8:er===4?_r.buttons+=16:er===5&&(_r.buttons+=32):er===0?_r.buttons|=1:er===1?_r.buttons|=4:er===2?_r.buttons|=2:er===3?_r.buttons|=8:er===4?_r.buttons|=16:er===5&&(_r.buttons|=32);var Pi=An.getActivePointersListsExceptType(Wn[0].type);for(li=0;li<Pi.length;li++)gr(An,Sn,Pi[li]);if(er!==0)return An.nonPrimaryPressHandler&&(ti=An.nonPrimaryPressHandler({eventSource:An,pointerType:Wn[0].type,position:Bt(Wn[0].currentPos,An.element),button:er,buttons:_r.buttons,isTouchEvent:Wn[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),ti===!1&&nt.cancelEvent(Sn)),!1;for(li=0;li<Or;li++)mi=Wn[li],_i=_r.getById(mi.id),_i?(_i.captured=!0,_i.insideElementPressed=!0,_i.insideElement=!0,_i.contactPos=mi.currentPos,_i.contactTime=mi.currentTime,_i.lastPos=_i.currentPos,_i.lastTime=_i.currentTime,_i.currentPos=mi.currentPos,_i.currentTime=mi.currentTime,mi=_i):(mi.captured=!0,mi.insideElementPressed=!0,mi.insideElement=!0,kr(_r,mi)),_r.addContact(),(An.dragHandler||An.dragEndHandler||An.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.addPoint(An,mi),_r.contacts===1?An.pressHandler&&(ti=An.pressHandler({eventSource:An,pointerType:mi.type,position:Bt(mi.contactPos,An.element),buttons:_r.buttons,isTouchEvent:mi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),ti===!1&&nt.cancelEvent(Sn)):_r.contacts===2&&An.pinchHandler&&mi.type==="touch"&&(vr.pinchGPoints=_r.asArray(),vr.lastPinchDist=vr.currentPinchDist=vr.pinchGPoints[0].currentPos.distanceTo(vr.pinchGPoints[1].currentPos),vr.lastPinchCenter=vr.currentPinchCenter=Ft(vr.pinchGPoints[0].currentPos,vr.pinchGPoints[1].currentPos));return!0}function vi(An,Sn,Wn,er){var vr=it[An.hash],ti=An.getActivePointersListByType(Wn[0].type),_r,li,Or,mi,_i=Wn.length,Pi,xi,Zi=!1,$i=!1,Qi;if(typeof Sn.buttons<"u"?ti.buttons=Sn.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?er===0?ti.buttons-=1:er===1?ti.buttons-=4:er===2?ti.buttons-=2:er===3?ti.buttons-=8:er===4?ti.buttons-=16:er===5&&(ti.buttons-=32):er===0?ti.buttons^=-2:er===1?ti.buttons^=-5:er===2?ti.buttons^=-3:er===3?ti.buttons^=-9:er===4?ti.buttons^=-17:er===5&&(ti.buttons^=-33),er!==0){An.nonPrimaryReleaseHandler&&(_r=An.nonPrimaryReleaseHandler({eventSource:An,pointerType:Wn[0].type,position:Bt(Wn[0].currentPos,An.element),button:er,buttons:ti.buttons,isTouchEvent:Wn[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),_r===!1&&nt.cancelEvent(Sn));var Eo=An.getActivePointersListByType("mouse");return gr(An,Sn,Eo),!1}if(typeof Wn[0].currentPos>"u")return gr(An,Sn,ti),!1;for(mi=0;mi<_i;mi++)Pi=Wn[mi],xi=ti.getById(Pi.id),xi&&(xi.captured&&(xi.captured=!1,Zi=!0,$i=!0),xi.lastPos=xi.currentPos,xi.lastTime=xi.currentTime,xi.currentPos=Pi.currentPos,xi.currentTime=Pi.currentTime,xi.insideElement||xr(ti,xi),li=xi.currentPos,Or=xi.currentTime,$i?(ti.removeContact(),(An.dragHandler||An.dragEndHandler||An.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.removePoint(An,xi),ti.contacts===0?(An.releaseHandler&&(_r=An.releaseHandler({eventSource:An,pointerType:xi.type,position:Bt(li,An.element),buttons:ti.buttons,insideElementPressed:xi.insideElementPressed,insideElementReleased:xi.insideElement,isTouchEvent:xi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),_r===!1&&nt.cancelEvent(Sn)),An.dragEndHandler&&!xi.currentPos.equals(xi.contactPos)&&(_r=An.dragEndHandler({eventSource:An,pointerType:xi.type,position:Bt(xi.currentPos,An.element),speed:xi.speed,direction:xi.direction,shift:Sn.shiftKey,isTouchEvent:xi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),_r===!1&&nt.cancelEvent(Sn)),(An.clickHandler||An.dblClickHandler)&&xi.insideElement&&(Qi=Or-xi.contactTime<=An.clickTimeThreshold&&xi.contactPos.distanceTo(li)<=An.clickDistThreshold,An.clickHandler&&(_r=An.clickHandler({eventSource:An,pointerType:xi.type,position:Bt(xi.currentPos,An.element),quick:Qi,shift:Sn.shiftKey,isTouchEvent:xi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),_r===!1&&nt.cancelEvent(Sn)),An.dblClickHandler&&Qi&&(ti.clicks++,ti.clicks===1?(vr.lastClickPos=li,vr.dblClickTimeOut=setTimeout(function(){ti.clicks=0},An.dblClickTimeThreshold)):ti.clicks===2&&(clearTimeout(vr.dblClickTimeOut),ti.clicks=0,vr.lastClickPos.distanceTo(li)<=An.dblClickDistThreshold&&(_r=An.dblClickHandler({eventSource:An,pointerType:xi.type,position:Bt(xi.currentPos,An.element),shift:Sn.shiftKey,isTouchEvent:xi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),_r===!1&&nt.cancelEvent(Sn)),vr.lastClickPos=null)))):ti.contacts===2&&An.pinchHandler&&xi.type==="touch"&&(vr.pinchGPoints=ti.asArray(),vr.lastPinchDist=vr.currentPinchDist=vr.pinchGPoints[0].currentPos.distanceTo(vr.pinchGPoints[1].currentPos),vr.lastPinchCenter=vr.currentPinchCenter=Ft(vr.pinchGPoints[0].currentPos,vr.pinchGPoints[1].currentPos))):An.releaseHandler&&(_r=An.releaseHandler({eventSource:An,pointerType:xi.type,position:Bt(li,An.element),buttons:ti.buttons,insideElementPressed:xi.insideElementPressed,insideElementReleased:xi.insideElement,isTouchEvent:xi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),_r===!1&&nt.cancelEvent(Sn)));return Zi}function Ti(An,Sn,Wn){var er=it[An.hash],vr=An.getActivePointersListByType(Wn[0].type),ti,_r=Wn.length,li,Or,mi,_i,Pi;for(typeof Sn.buttons<"u"&&(vr.buttons=Sn.buttons),ti=0;ti<_r;ti++)li=Wn[ti],Or=vr.getById(li.id),Or?(Object.prototype.hasOwnProperty.call(li,"isPrimary")&&(Or.isPrimary=li.isPrimary),Or.lastPos=Or.currentPos,Or.lastTime=Or.currentTime,Or.currentPos=li.currentPos,Or.currentTime=li.currentTime):(li.captured=!1,li.insideElementPressed=!1,li.insideElement=!0,kr(vr,li));An.stopHandler&&Wn[0].type==="mouse"&&(clearTimeout(An.stopTimeOut),An.stopTimeOut=setTimeout(function(){Di(An,Sn,Wn[0].type)},An.stopDelay)),vr.contacts===0?An.moveHandler&&(Pi=An.moveHandler({eventSource:An,pointerType:Wn[0].type,position:Bt(Wn[0].currentPos,An.element),buttons:vr.buttons,isTouchEvent:Wn[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Pi===!1&&nt.cancelEvent(Sn)):vr.contacts===1?(An.moveHandler&&(Or=vr.asArray()[0],Pi=An.moveHandler({eventSource:An,pointerType:Or.type,position:Bt(Or.currentPos,An.element),buttons:vr.buttons,isTouchEvent:Or.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Pi===!1&&nt.cancelEvent(Sn)),An.dragHandler&&(Or=vr.asArray()[0],_i=Or.currentPos.minus(Or.lastPos),Pi=An.dragHandler({eventSource:An,pointerType:Or.type,position:Bt(Or.currentPos,An.element),buttons:vr.buttons,delta:_i,speed:Or.speed,direction:Or.direction,shift:Sn.shiftKey,isTouchEvent:Or.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Pi===!1&&nt.cancelEvent(Sn))):vr.contacts===2&&(An.moveHandler&&(mi=vr.asArray(),Pi=An.moveHandler({eventSource:An,pointerType:mi[0].type,position:Bt(Ft(mi[0].currentPos,mi[1].currentPos),An.element),buttons:vr.buttons,isTouchEvent:mi[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Pi===!1&&nt.cancelEvent(Sn)),An.pinchHandler&&Wn[0].type==="touch"&&(_i=er.pinchGPoints[0].currentPos.distanceTo(er.pinchGPoints[1].currentPos),_i!=er.currentPinchDist&&(er.lastPinchDist=er.currentPinchDist,er.currentPinchDist=_i,er.lastPinchCenter=er.currentPinchCenter,er.currentPinchCenter=Ft(er.pinchGPoints[0].currentPos,er.pinchGPoints[1].currentPos),Pi=An.pinchHandler({eventSource:An,pointerType:"touch",gesturePoints:er.pinchGPoints,lastCenter:Bt(er.lastPinchCenter,An.element),center:Bt(er.currentPinchCenter,An.element),lastDistance:er.lastPinchDist,distance:er.currentPinchDist,shift:Sn.shiftKey,originalEvent:Sn,preventDefaultAction:!1,userData:An.userData}),Pi===!1&&nt.cancelEvent(Sn))))}function ki(An,Sn,Wn){vi(An,Sn,Wn,0),hi(An,Sn,Wn)}function Di(An,Sn,Wn){An.stopHandler&&An.stopHandler({eventSource:An,pointerType:Wn,position:Dt(Sn,An.element),buttons:An.getActivePointersListByType(Wn).buttons,isTouchEvent:Wn==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:An.userData})}var Ci=function(){try{return window.self!==window.top}catch{return!0}}();function $r(An){try{return An.addEventListener&&An.removeEventListener}catch{return!1}}}(OpenSeadragon),function(nt){nt.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},nt.Control=function(rt,it,st){var bt=rt.parentNode;typeof it=="number"&&(nt.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),it={anchor:it}),it.attachToViewer=typeof it.attachToViewer>"u"?!0:it.attachToViewer,this.autoFade=typeof it.autoFade>"u"?!0:it.autoFade,this.element=rt,this.anchor=it.anchor,this.container=st,this.anchor==nt.ControlAnchor.ABSOLUTE?(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof it.top=="number"?it.top+"px":it.top,this.wrapper.style.left=typeof it.left=="number"?it.left+"px":it.left,this.wrapper.style.height=typeof it.height=="number"?it.height+"px":it.height,this.wrapper.style.width=typeof it.width=="number"?it.width+"px":it.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==nt.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),it.attachToViewer?this.anchor==nt.ControlAnchor.TOP_RIGHT||this.anchor==nt.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):bt.appendChild(this.wrapper)},nt.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(rt){this.wrapper.style.display=rt?this.anchor==nt.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(rt){this.element[nt.SIGNAL]&&nt.Browser.vendor==nt.BROWSERS.IE?nt.setElementOpacity(this.element,rt,!0):nt.setElementOpacity(this.wrapper,rt,!0)}}}(OpenSeadragon),function(nt){nt.ControlDock=function(it){var st=["topleft","topright","bottomright","bottomleft"],bt,wt;for(nt.extend(!0,this,{id:"controldock-"+nt.now()+"-"+Math.floor(Math.random()*1e6),container:nt.makeNeutralElement("div"),controls:[]},it),this.container.onsubmit=function(){return!1},this.element&&(this.element=nt.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),wt=0;wt<st.length;wt++)bt=st[wt],this.controls[bt]=nt.makeNeutralElement("div"),this.controls[bt].style.position="absolute",bt.match("left")&&(this.controls[bt].style.left="0px"),bt.match("right")&&(this.controls[bt].style.right="0px"),bt.match("top")&&(this.controls[bt].style.top="0px"),bt.match("bottom")&&(this.controls[bt].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},nt.ControlDock.prototype={addControl:function(it,st){it=nt.getElement(it);var bt=null;if(!(rt(this,it)>=0)){switch(st.anchor){case nt.ControlAnchor.TOP_RIGHT:bt=this.controls.topright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.BOTTOM_RIGHT:bt=this.controls.bottomright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.BOTTOM_LEFT:bt=this.controls.bottomleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.TOP_LEFT:bt=this.controls.topleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.ABSOLUTE:bt=this.container,it.style.margin="0px",it.style.padding="0px";break;default:case nt.ControlAnchor.NONE:bt=this.container,it.style.margin="0px",it.style.padding="0px";break}this.controls.push(new nt.Control(it,st,bt)),it.style.display="inline-block"}},removeControl:function(it){it=nt.getElement(it);var st=rt(this,it);return st>=0&&(this.controls[st].destroy(),this.controls.splice(st,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var it;for(it=this.controls.length-1;it>=0;it--)if(this.controls[it].isVisible())return!0;return!1},setControlsEnabled:function(it){var st;for(st=this.controls.length-1;st>=0;st--)this.controls[st].setVisible(it);return this}};function rt(it,st){var bt=it.controls,wt;for(wt=bt.length-1;wt>=0;wt--)if(bt[wt].element==st)return wt;return-1}}(OpenSeadragon),function(nt){nt.Placement=nt.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(nt){var rt={},it=1;nt.Viewer=function(nn){var fn=arguments,cn=this,Nn;if(nt.isPlainObject(nn)||(nn={id:fn[0],xmlPath:fn.length>1?fn[1]:void 0,prefixUrl:fn.length>2?fn[2]:void 0,controls:fn.length>3?fn[3]:void 0,overlays:fn.length>4?fn[4]:void 0}),nn.config&&(nt.extend(!0,nn,nn.config),delete nn.config),nt.extend(!0,this,{id:nn.id,hash:nn.hash||it++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},nt.DEFAULT_SETTINGS,nn),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof rt[this.hash]<"u"&&nt.console.warn("Hash "+this.hash+" has already been used."),rt[this.hash]={fsBoundsDelta:new nt.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=nt.now(),nt.EventSource.call(this),this.addHandler("open-failed",function(On){var cr=nt.getString("Errors.OpenFailed",On.eventSource,On.message);cn._showMessage(cr)}),nt.ControlDock.call(this,nn),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=nt.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(On){On.width="100%",On.height="100%",On.overflow="hidden",On.position="absolute",On.top="0px",On.left="0px"}(this.canvas.style),nt.setElementTouchActionNone(this.canvas),nn.tabIndex!==""&&(this.canvas.tabIndex=nn.tabIndex===void 0?0:nn.tabIndex),this.container.className="openseadragon-container",function(On){On.width="100%",On.height="100%",On.position="relative",On.overflow="hidden",On.left="0px",On.top="0px",On.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new nt.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:nt.delegate(this,Yt),keyHandler:nt.delegate(this,Jt),clickHandler:nt.delegate(this,Wt),dblClickHandler:nt.delegate(this,Qt),dragHandler:nt.delegate(this,rn),dragEndHandler:nt.delegate(this,sn),enterHandler:nt.delegate(this,on),exitHandler:nt.delegate(this,hn),pressHandler:nt.delegate(this,mn),releaseHandler:nt.delegate(this,Cn),nonPrimaryPressHandler:nt.delegate(this,Tn),nonPrimaryReleaseHandler:nt.delegate(this,kn),scrollHandler:nt.delegate(this,Ln),pinchHandler:nt.delegate(this,In)}),this.outerTracker=new nt.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:nt.delegate(this,pn),exitHandler:nt.delegate(this,Hn)}),this.toolbar&&(this.toolbar=new nt.ControlDock({element:this.toolbar})),this.bindStandardControls(),rt[this.hash].prevContainerSize=st(this.container),this.world=new nt.World({viewer:this}),this.world.addHandler("add-item",function(On){cn.source=cn.world.getItemAt(0).source,rt[cn.hash].forceRedraw=!0,cn._updateRequestId||(cn._updateRequestId=kt(cn,yn))}),this.world.addHandler("remove-item",function(On){cn.world.getItemCount()?cn.source=cn.world.getItemAt(0).source:cn.source=null,rt[cn.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(On){cn.viewport&&cn.viewport._setContentBounds(cn.world.getHomeBounds(),cn.world.getContentFactor())}),this.world.addHandler("item-index-change",function(On){cn.source=cn.world.getItemAt(0).source}),this.viewport=new nt.Viewport({containerSize:rt[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new nt.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:nn.timeout}),this.tileCache=new nt.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new nt.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=nt.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(Nn=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(Nn,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(Nn=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(Nn,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new nt.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),Nn=0;Nn<this.customControls.length;Nn++)this.addControl(this.customControls[Nn].id,{anchor:this.customControls[Nn].anchor});nt.requestAnimationFrame(function(){Ot(cn)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},nt.extend(nt.Viewer.prototype,nt.EventSource.prototype,nt.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(nn){return nt.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(nn)},openTileSource:function(nn){return nt.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(nn)},open:function(nn,fn){var cn=this;if(this.close(),!!nn){if(this.sequenceMode&&nt.isArray(nn)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof fn<"u"&&!isNaN(fn)&&(this.initialPage=fn),this.tileSources=nn,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(nt.isArray(nn)||(nn=[nn]),!!nn.length){this._opening=!0;for(var Nn=nn.length,On=0,cr=0,Bn,Qn=function(){if(On+cr===Nn)if(On){(cn._firstOpen||!cn.preserveViewport)&&(cn.viewport.goHome(!0),cn.viewport.update()),cn._firstOpen=!1;var hr=nn[0];if(hr.tileSource&&(hr=hr.tileSource),cn.overlays&&!cn.preserveOverlays)for(var kr=0;kr<cn.overlays.length;kr++)cn.currentOverlays[kr]=wt(cn,cn.overlays[kr]);cn._drawOverlays(),cn._opening=!1,cn.raiseEvent("open",{source:hr})}else cn._opening=!1,cn.raiseEvent("open-failed",Bn)},Un=function(hr){(!nt.isPlainObject(hr)||!hr.tileSource)&&(hr={tileSource:hr}),hr.index!==void 0&&(nt.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete hr.index),hr.collectionImmediately===void 0&&(hr.collectionImmediately=!0);var kr=hr.success;hr.success=function(br){if(On++,hr.tileSource.overlays)for(var hi=0;hi<hr.tileSource.overlays.length;hi++)cn.addOverlay(hr.tileSource.overlays[hi]);kr&&kr(br),Qn()};var xr=hr.error;hr.error=function(br){cr++,Bn||(Bn=br),xr&&xr(br),Qn()},cn.addTiledImage(hr)},or=0;or<nn.length;or++)Un(nn[or]);return this}}},close:function(){return rt[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),rt[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(!!rt[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(nt.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),rt[this.hash]=null,delete rt[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(nn){return this.innerTracker.setTracking(nn),this.outerTracker.setTracking(nn),this.raiseEvent("mouse-enabled",{enabled:nn}),this},areControlsEnabled:function(){var nn=this.controls.length,fn;for(fn=0;fn<this.controls.length;fn++)nn=nn&&this.controls[fn].isVisible();return nn},setControlsEnabled:function(nn){return nn?Dt(this):Ot(this),this.raiseEvent("controls-enabled",{enabled:nn}),this},setDebugMode:function(nn){for(var fn=0;fn<this.world.getItemCount();fn++)this.world.getItemAt(fn).debugMode=nn;this.debugMode=nn,this.forceRedraw()},isFullPage:function(){return rt[this.hash].fullPage},setFullPage:function(nn){var fn=document.body,cn=fn.style,Nn=document.documentElement.style,On=this,cr,Bn;if(nn==this.isFullPage())return this;var Qn={fullPage:nn,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Qn),Qn.preventDefaultAction)return this;if(nn){for(this.elementSize=nt.getElementSize(this.element),this.pageScroll=nt.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=cn.margin,this.docMargin=Nn.margin,cn.margin="0",Nn.margin="0",this.bodyPadding=cn.padding,this.docPadding=Nn.padding,cn.padding="0",Nn.padding="0",this.bodyWidth=cn.width,this.docWidth=Nn.width,cn.width="100%",Nn.width="100%",this.bodyHeight=cn.height,this.docHeight=Nn.height,cn.height="100%",Nn.height="100%",this.previousBody=[],rt[this.hash].prevElementParent=this.element.parentNode,rt[this.hash].prevNextSibling=this.element.nextSibling,rt[this.hash].prevElementWidth=this.element.style.width,rt[this.hash].prevElementHeight=this.element.style.height,cr=fn.childNodes.length,Bn=0;Bn<cr;Bn++)this.previousBody.push(fn.childNodes[0]),fn.removeChild(fn.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,fn.appendChild(this.toolbar.element),nt.addClass(this.toolbar.element,"fullpage")),nt.addClass(this.element,"fullpage"),fn.appendChild(this.element),this.element.style.height=nt.getWindowSize().y+"px",this.element.style.width=nt.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=nt.getElementSize(this.element).y-nt.getElementSize(this.toolbar.element).y+"px"),rt[this.hash].fullPage=!0,nt.delegate(this,pn)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,cn.margin=this.bodyMargin,Nn.margin=this.docMargin,cn.padding=this.bodyPadding,Nn.padding=this.docPadding,cn.width=this.bodyWidth,Nn.width=this.docWidth,cn.height=this.bodyHeight,Nn.height=this.docHeight,fn.removeChild(this.element),cr=this.previousBody.length,Bn=0;Bn<cr;Bn++)fn.appendChild(this.previousBody.shift());nt.removeClass(this.element,"fullpage"),rt[this.hash].prevElementParent.insertBefore(this.element,rt[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(fn.removeChild(this.toolbar.element),nt.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=rt[this.hash].prevElementWidth,this.element.style.height=rt[this.hash].prevElementHeight;var Un=0,or=function(){nt.setPageScroll(On.pageScroll);var hr=nt.getPageScroll();Un++,Un<10&&(hr.x!==On.pageScroll.x||hr.y!==On.pageScroll.y)&&nt.requestAnimationFrame(or)};nt.requestAnimationFrame(or),rt[this.hash].fullPage=!1,nt.delegate(this,Hn)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:nn}),this},setFullScreen:function(nn){var fn=this;if(!nt.supportsFullScreen)return this.setFullPage(nn);if(nt.isFullScreen()===nn)return this;var cn={fullScreen:nn,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",cn),cn.preventDefaultAction)return this;if(nn){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Nn=function(){var On=nt.isFullScreen();On||(nt.removeEvent(document,nt.fullScreenEventName,Nn),nt.removeEvent(document,nt.fullScreenErrorEventName,Nn),fn.setFullPage(!1),fn.isFullPage()&&(fn.element.style.width=fn.fullPageStyleWidth,fn.element.style.height=fn.fullPageStyleHeight)),fn.navigator&&fn.viewport&&setTimeout(function(){fn.navigator.update(fn.viewport)}),fn.raiseEvent("full-screen",{fullScreen:On})};nt.addEvent(document,nt.fullScreenEventName,Nn),nt.addEvent(document,nt.fullScreenErrorEventName,Nn),nt.requestFullScreen(document.body)}else nt.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(nn){return this.container.style.visibility=nn?"":"hidden",this.raiseEvent("visible",{visible:nn}),this},addTiledImage:function(nn){nt.console.assert(nn,"[Viewer.addTiledImage] options is required"),nt.console.assert(nn.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),nt.console.assert(!nn.replace||nn.index>-1&&nn.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var fn=this;nn.replace&&(nn.replaceItem=fn.world.getItemAt(nn.index)),this._hideMessage(),nn.placeholderFillStyle===void 0&&(nn.placeholderFillStyle=this.placeholderFillStyle),nn.opacity===void 0&&(nn.opacity=this.opacity),nn.preload===void 0&&(nn.preload=this.preload),nn.compositeOperation===void 0&&(nn.compositeOperation=this.compositeOperation),nn.crossOriginPolicy===void 0&&(nn.crossOriginPolicy=nn.tileSource.crossOriginPolicy!==void 0?nn.tileSource.crossOriginPolicy:this.crossOriginPolicy),nn.ajaxWithCredentials===void 0&&(nn.ajaxWithCredentials=this.ajaxWithCredentials),nn.loadTilesWithAjax===void 0&&(nn.loadTilesWithAjax=this.loadTilesWithAjax),nn.ajaxHeaders===void 0||nn.ajaxHeaders===null?nn.ajaxHeaders=this.ajaxHeaders:nt.isPlainObject(nn.ajaxHeaders)&&nt.isPlainObject(this.ajaxHeaders)&&(nn.ajaxHeaders=nt.extend({},this.ajaxHeaders,nn.ajaxHeaders));var cn={options:nn};function Nn(Bn){for(var Qn=0;Qn<fn._loadQueue.length;Qn++)if(fn._loadQueue[Qn]===cn){fn._loadQueue.splice(Qn,1);break}fn._loadQueue.length===0&&On(cn),fn.raiseEvent("add-item-failed",Bn),nn.error&&nn.error(Bn)}function On(Bn){fn.collectionMode&&(fn.world.arrange({immediately:Bn.options.collectionImmediately,rows:fn.collectionRows,columns:fn.collectionColumns,layout:fn.collectionLayout,tileSize:fn.collectionTileSize,tileMargin:fn.collectionTileMargin}),fn.world.setAutoRefigureSizes(!0))}if(nt.isArray(nn.tileSource)){setTimeout(function(){Nn({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:nn.tileSource,options:nn})});return}this._loadQueue.push(cn);function cr(){for(var Bn,Qn,Un;fn._loadQueue.length&&(Bn=fn._loadQueue[0],!!Bn.tileSource);){if(fn._loadQueue.splice(0,1),Bn.options.replace){var or=fn.world.getIndexOfItem(Bn.options.replaceItem);or!=-1&&(Bn.options.index=or),fn.world.removeItem(Bn.options.replaceItem)}Qn=new nt.TiledImage({viewer:fn,source:Bn.tileSource,viewport:fn.viewport,drawer:fn.drawer,tileCache:fn.tileCache,imageLoader:fn.imageLoader,x:Bn.options.x,y:Bn.options.y,width:Bn.options.width,height:Bn.options.height,fitBounds:Bn.options.fitBounds,fitBoundsPlacement:Bn.options.fitBoundsPlacement,clip:Bn.options.clip,placeholderFillStyle:Bn.options.placeholderFillStyle,opacity:Bn.options.opacity,preload:Bn.options.preload,degrees:Bn.options.degrees,compositeOperation:Bn.options.compositeOperation,springStiffness:fn.springStiffness,animationTime:fn.animationTime,minZoomImageRatio:fn.minZoomImageRatio,wrapHorizontal:fn.wrapHorizontal,wrapVertical:fn.wrapVertical,immediateRender:fn.immediateRender,blendTime:fn.blendTime,alwaysBlend:fn.alwaysBlend,minPixelRatio:fn.minPixelRatio,smoothTileEdgesMinZoom:fn.smoothTileEdgesMinZoom,iOSDevice:fn.iOSDevice,crossOriginPolicy:Bn.options.crossOriginPolicy,ajaxWithCredentials:Bn.options.ajaxWithCredentials,loadTilesWithAjax:Bn.options.loadTilesWithAjax,ajaxHeaders:Bn.options.ajaxHeaders,debugMode:fn.debugMode}),fn.collectionMode&&fn.world.setAutoRefigureSizes(!1),fn.world.addItem(Qn,{index:Bn.options.index}),fn._loadQueue.length===0&&On(Bn),fn.world.getItemCount()===1&&!fn.preserveViewport&&fn.viewport.goHome(!0),fn.navigator&&(Un=nt.extend({},Bn.options,{replace:!1,originalTiledImage:Qn,tileSource:Bn.tileSource}),fn.navigator.addTiledImage(Un)),Bn.options.success&&Bn.options.success({item:Qn})}}bt(this,nn.tileSource,nn,function(Bn){cn.tileSource=Bn,cr()},function(Bn){Bn.options=nn,Nn(Bn),cr()})},addSimpleImage:function(nn){nt.console.assert(nn,"[Viewer.addSimpleImage] options is required"),nt.console.assert(nn.url,"[Viewer.addSimpleImage] options.url is required");var fn=nt.extend({},nn,{tileSource:{type:"image",url:nn.url}});delete fn.url,this.addTiledImage(fn)},addLayer:function(nn){var fn=this;nt.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var cn=nt.extend({},nn,{success:function(Nn){fn.raiseEvent("add-layer",{options:nn,drawer:Nn.item})},error:function(Nn){fn.raiseEvent("add-layer-failed",Nn)}});return this.addTiledImage(cn),this},getLayerAtLevel:function(nn){return nt.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(nn)},getLevelOfLayer:function(nn){return nt.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(nn)},getLayersCount:function(){return nt.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(nn,fn){return nt.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(nn,fn)},removeLayer:function(nn){return nt.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(nn)},forceRedraw:function(){return rt[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var nn=nt.delegate(this,Bt),fn=nt.delegate(this,Ft),cn=nt.delegate(this,Pn),Nn=nt.delegate(this,ir),On=this.navImages,cr=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(cr=!1),this.previousButton=new nt.Button({element:this.previousButton?nt.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.PreviousPage"),srcRest:yr(this.prefixUrl,On.previous.REST),srcGroup:yr(this.prefixUrl,On.previous.GROUP),srcHover:yr(this.prefixUrl,On.previous.HOVER),srcDown:yr(this.prefixUrl,On.previous.DOWN),onRelease:Nn,onFocus:nn,onBlur:fn}),this.nextButton=new nt.Button({element:this.nextButton?nt.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.NextPage"),srcRest:yr(this.prefixUrl,On.next.REST),srcGroup:yr(this.prefixUrl,On.next.GROUP),srcHover:yr(this.prefixUrl,On.next.HOVER),srcDown:yr(this.prefixUrl,On.next.DOWN),onRelease:cn,onFocus:nn,onBlur:fn}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),cr&&(this.paging=new nt.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:nt.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var nn=nt.delegate(this,Tr),fn=nt.delegate(this,rr),cn=nt.delegate(this,gr),Nn=nt.delegate(this,Mr),On=nt.delegate(this,Lr),cr=nt.delegate(this,lr),Bn=nt.delegate(this,qr),Qn=nt.delegate(this,sr),Un=nt.delegate(this,pr),or=nt.delegate(this,Er),hr=nt.delegate(this,Bt),kr=nt.delegate(this,Ft),xr=this.navImages,br=[],hi=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(hi=!1),this.showZoomControl&&(br.push(this.zoomInButton=new nt.Button({element:this.zoomInButton?nt.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomIn"),srcRest:yr(this.prefixUrl,xr.zoomIn.REST),srcGroup:yr(this.prefixUrl,xr.zoomIn.GROUP),srcHover:yr(this.prefixUrl,xr.zoomIn.HOVER),srcDown:yr(this.prefixUrl,xr.zoomIn.DOWN),onPress:nn,onRelease:fn,onClick:cn,onEnter:nn,onExit:fn,onFocus:hr,onBlur:kr})),br.push(this.zoomOutButton=new nt.Button({element:this.zoomOutButton?nt.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomOut"),srcRest:yr(this.prefixUrl,xr.zoomOut.REST),srcGroup:yr(this.prefixUrl,xr.zoomOut.GROUP),srcHover:yr(this.prefixUrl,xr.zoomOut.HOVER),srcDown:yr(this.prefixUrl,xr.zoomOut.DOWN),onPress:Nn,onRelease:fn,onClick:On,onEnter:Nn,onExit:fn,onFocus:hr,onBlur:kr}))),this.showHomeControl&&br.push(this.homeButton=new nt.Button({element:this.homeButton?nt.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Home"),srcRest:yr(this.prefixUrl,xr.home.REST),srcGroup:yr(this.prefixUrl,xr.home.GROUP),srcHover:yr(this.prefixUrl,xr.home.HOVER),srcDown:yr(this.prefixUrl,xr.home.DOWN),onRelease:cr,onFocus:hr,onBlur:kr})),this.showFullPageControl&&br.push(this.fullPageButton=new nt.Button({element:this.fullPageButton?nt.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.FullPage"),srcRest:yr(this.prefixUrl,xr.fullpage.REST),srcGroup:yr(this.prefixUrl,xr.fullpage.GROUP),srcHover:yr(this.prefixUrl,xr.fullpage.HOVER),srcDown:yr(this.prefixUrl,xr.fullpage.DOWN),onRelease:Bn,onFocus:hr,onBlur:kr})),this.showRotationControl&&(br.push(this.rotateLeftButton=new nt.Button({element:this.rotateLeftButton?nt.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateLeft"),srcRest:yr(this.prefixUrl,xr.rotateleft.REST),srcGroup:yr(this.prefixUrl,xr.rotateleft.GROUP),srcHover:yr(this.prefixUrl,xr.rotateleft.HOVER),srcDown:yr(this.prefixUrl,xr.rotateleft.DOWN),onRelease:Qn,onFocus:hr,onBlur:kr})),br.push(this.rotateRightButton=new nt.Button({element:this.rotateRightButton?nt.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateRight"),srcRest:yr(this.prefixUrl,xr.rotateright.REST),srcGroup:yr(this.prefixUrl,xr.rotateright.GROUP),srcHover:yr(this.prefixUrl,xr.rotateright.HOVER),srcDown:yr(this.prefixUrl,xr.rotateright.DOWN),onRelease:Un,onFocus:hr,onBlur:kr}))),this.showFlipControl&&br.push(this.flipButton=new nt.Button({element:this.flipButton?nt.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Flip"),srcRest:yr(this.prefixUrl,xr.flip.REST),srcGroup:yr(this.prefixUrl,xr.flip.GROUP),srcHover:yr(this.prefixUrl,xr.flip.HOVER),srcDown:yr(this.prefixUrl,xr.flip.DOWN),onRelease:or,onFocus:hr,onBlur:kr})),hi&&(this.buttons=new nt.ButtonGroup({buttons:br,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",nt.delegate(this,Pr)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(nn){return this.tileSources&&nn>=0&&nn<this.tileSources.length&&(this._sequenceIndex=nn,this._updateSequenceButtons(nn),this.open(this.tileSources[nn]),this.referenceStrip&&this.referenceStrip.setFocus(nn),this.raiseEvent("page",{page:nn})),this},addOverlay:function(nn,fn,cn,Nn){var On;if(nt.isPlainObject(nn)?On=nn:On={element:nn,location:fn,placement:cn,onDraw:Nn},nn=nt.getElement(On.element),Et(this.currentOverlays,nn)>=0)return this;var cr=wt(this,On);return this.currentOverlays.push(cr),cr.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:nn,location:On.location,placement:On.placement}),this},updateOverlay:function(nn,fn,cn){var Nn;return nn=nt.getElement(nn),Nn=Et(this.currentOverlays,nn),Nn>=0&&(this.currentOverlays[Nn].update(fn,cn),rt[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:nn,location:fn,placement:cn})),this},removeOverlay:function(nn){var fn;return nn=nt.getElement(nn),fn=Et(this.currentOverlays,nn),fn>=0&&(this.currentOverlays[fn].destroy(),this.currentOverlays.splice(fn,1),rt[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:nn})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return rt[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(nn){var fn;return nn=nt.getElement(nn),fn=Et(this.currentOverlays,nn),fn>=0?this.currentOverlays[fn]:null},_updateSequenceButtons:function(nn){this.nextButton&&(!this.tileSources||this.tileSources.length-1===nn?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(nn>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(nn){this._hideMessage();var fn=nt.makeNeutralElement("div");fn.appendChild(document.createTextNode(nn)),this.messageDiv=nt.makeCenteredNode(fn),nt.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var nn=this.messageDiv;nn&&(nn.parentNode.removeChild(nn),delete this.messageDiv)},gestureSettingsByDeviceType:function(nn){switch(nn){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var nn,fn=this.currentOverlays.length;for(nn=0;nn<fn;nn++)this.currentOverlays[nn].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new nt.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else nt.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function st(nn){return nn=nt.getElement(nn),new nt.Point(nn.clientWidth===0?1:nn.clientWidth,nn.clientHeight===0?1:nn.clientHeight)}function bt(nn,fn,cn,Nn,On){var cr=nn;if(nt.type(fn)=="string"){if(fn.match(/^\s*<.*>\s*$/))fn=nt.parseXml(fn);else if(fn.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var Bn=nt.parseJSON(fn);fn=Bn}catch{}}function Qn(Un,or){Un.ready?Nn(Un):(Un.addHandler("ready",function(){Nn(Un)}),Un.addHandler("open-failed",function(hr){On({message:hr.message,source:or})}))}setTimeout(function(){if(nt.type(fn)=="string")fn=new nt.TileSource({url:fn,crossOriginPolicy:cn.crossOriginPolicy!==void 0?cn.crossOriginPolicy:nn.crossOriginPolicy,ajaxWithCredentials:nn.ajaxWithCredentials,ajaxHeaders:nn.ajaxHeaders,useCanvas:nn.useCanvas,success:function(kr){Nn(kr.tileSource)}}),fn.addHandler("open-failed",function(kr){On(kr)});else if(nt.isPlainObject(fn)||fn.nodeType)if(fn.crossOriginPolicy===void 0&&(cn.crossOriginPolicy!==void 0||nn.crossOriginPolicy!==void 0)&&(fn.crossOriginPolicy=cn.crossOriginPolicy!==void 0?cn.crossOriginPolicy:nn.crossOriginPolicy),fn.ajaxWithCredentials===void 0&&(fn.ajaxWithCredentials=nn.ajaxWithCredentials),fn.useCanvas===void 0&&(fn.useCanvas=nn.useCanvas),nt.isFunction(fn.getTileUrl)){var Un=new nt.TileSource(fn);Un.getTileUrl=fn.getTileUrl,Nn(Un)}else{var or=nt.TileSource.determineType(cr,fn);if(!or){On({message:"Unable to load TileSource",source:fn});return}var hr=or.prototype.configure.apply(cr,[fn]);Qn(new or(hr),fn)}else Qn(fn,fn)})}function wt(nn,fn){if(fn instanceof nt.Overlay)return fn;var cn=null;if(fn.element)cn=nt.getElement(fn.element);else{var Nn=fn.id?fn.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);cn=nt.getElement(fn.id),cn||(cn=document.createElement("a"),cn.href="#/overlay/"+Nn),cn.id=Nn,nt.addClass(cn,fn.className?fn.className:"openseadragon-overlay")}var On=fn.location,cr=fn.width,Bn=fn.height;if(!On){var Qn=fn.x,Un=fn.y;if(fn.px!==void 0){var or=nn.viewport.imageToViewportRectangle(new nt.Rect(fn.px,fn.py,cr||0,Bn||0));Qn=or.x,Un=or.y,cr=cr!==void 0?or.width:void 0,Bn=Bn!==void 0?or.height:void 0}On=new nt.Point(Qn,Un)}var hr=fn.placement;return hr&&nt.type(hr)==="string"&&(hr=nt.Placement[fn.placement.toUpperCase()]),new nt.Overlay({element:cn,location:On,placement:hr,onDraw:fn.onDraw,checkResize:fn.checkResize,width:cr,height:Bn,rotationMode:fn.rotationMode})}function Et(nn,fn){var cn;for(cn=nn.length-1;cn>=0;cn--)if(nn[cn].element===fn)return cn;return-1}function kt(nn,fn){return nt.requestAnimationFrame(function(){fn(nn)})}function Lt(nn){nt.requestAnimationFrame(function(){Rt(nn)})}function Ot(nn){!nn.autoHideControls||(nn.controlsShouldFade=!0,nn.controlsFadeBeginTime=nt.now()+nn.controlsFadeDelay,window.setTimeout(function(){Lt(nn)},nn.controlsFadeDelay))}function Rt(nn){var fn,cn,Nn,On;if(nn.controlsShouldFade){for(fn=nt.now(),cn=fn-nn.controlsFadeBeginTime,Nn=1-cn/nn.controlsFadeLength,Nn=Math.min(1,Nn),Nn=Math.max(0,Nn),On=nn.controls.length-1;On>=0;On--)nn.controls[On].autoFade&&nn.controls[On].setOpacity(Nn);Nn>0&&Lt(nn)}}function Dt(nn){var fn;for(nn.controlsShouldFade=!1,fn=nn.controls.length-1;fn>=0;fn--)nn.controls[fn].setOpacity(1)}function Bt(){Dt(this)}function Ft(){Ot(this)}function Yt(nn){var fn={originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction,preventVerticalPan:nn.preventVerticalPan,preventHorizontalPan:nn.preventHorizontalPan};if(this.raiseEvent("canvas-key",fn),!fn.preventDefaultAction&&!nn.ctrl&&!nn.alt&&!nn.meta)switch(nn.keyCode){case 38:return fn.preventVerticalPan||(nn.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return fn.preventVerticalPan||(nn.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return fn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return fn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function Jt(nn){var fn={originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction,preventVerticalPan:nn.preventVerticalPan,preventHorizontalPan:nn.preventHorizontalPan};if(this.raiseEvent("canvas-key",fn),!fn.preventDefaultAction&&!nn.ctrl&&!nn.alt&&!nn.meta)switch(nn.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return fn.preventVerticalPan||(nn.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return fn.preventVerticalPan||(nn.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return fn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return fn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function Wt(nn){var fn,cn=document.activeElement==this.canvas;cn||this.canvas.focus(),this.viewport.flipped&&(nn.position.x=this.viewport.getContainerSize().x-nn.position.x);var Nn={tracker:nn.eventSource,position:nn.position,quick:nn.quick,shift:nn.shift,originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction};this.raiseEvent("canvas-click",Nn),!Nn.preventDefaultAction&&this.viewport&&nn.quick&&(fn=this.gestureSettingsByDeviceType(nn.pointerType),fn.clickToZoom&&(this.viewport.zoomBy(nn.shift?1/this.zoomPerClick:this.zoomPerClick,fn.zoomToRefPoint?this.viewport.pointFromPixel(nn.position,!0):null),this.viewport.applyConstraints()))}function Qt(nn){var fn,cn={tracker:nn.eventSource,position:nn.position,shift:nn.shift,originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction};this.raiseEvent("canvas-double-click",cn),!cn.preventDefaultAction&&this.viewport&&(fn=this.gestureSettingsByDeviceType(nn.pointerType),fn.dblClickToZoom&&(this.viewport.zoomBy(nn.shift?1/this.zoomPerClick:this.zoomPerClick,fn.zoomToRefPoint?this.viewport.pointFromPixel(nn.position,!0):null),this.viewport.applyConstraints()))}function rn(nn){var fn,cn={tracker:nn.eventSource,position:nn.position,delta:nn.delta,speed:nn.speed,direction:nn.direction,shift:nn.shift,originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction};if(this.raiseEvent("canvas-drag",cn),!cn.preventDefaultAction&&this.viewport){if(fn=this.gestureSettingsByDeviceType(nn.pointerType),this.panHorizontal||(nn.delta.x=0),this.panVertical||(nn.delta.y=0),this.viewport.flipped&&(nn.delta.x=-nn.delta.x),this.constrainDuringPan){var Nn=this.viewport.deltaPointsFromPixels(nn.delta.negate());this.viewport.centerSpringX.target.value+=Nn.x,this.viewport.centerSpringY.target.value+=Nn.y;var On=this.viewport.getBounds(),cr=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Nn.x,this.viewport.centerSpringY.target.value-=Nn.y,On.x!=cr.x&&(nn.delta.x=0),On.y!=cr.y&&(nn.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(nn.delta.negate()),fn.flickEnabled&&!this.constrainDuringPan)}}function sn(nn){if(!nn.preventDefaultAction&&this.viewport){var fn=this.gestureSettingsByDeviceType(nn.pointerType);if(fn.flickEnabled&&nn.speed>=fn.flickMinSpeed){var cn=0;this.panHorizontal&&(cn=fn.flickMomentum*nn.speed*Math.cos(nn.direction));var Nn=0;this.panVertical&&(Nn=fn.flickMomentum*nn.speed*Math.sin(nn.direction));var On=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),cr=this.viewport.pointFromPixel(new nt.Point(On.x-cn,On.y-Nn));this.viewport.panTo(cr,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:nn.eventSource,position:nn.position,speed:nn.speed,direction:nn.direction,shift:nn.shift,originalEvent:nn.originalEvent})}function on(nn){this.raiseEvent("canvas-enter",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function hn(nn){window.location!=window.parent.location&&nt.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function mn(nn){this.raiseEvent("canvas-press",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,insideElementPressed:nn.insideElementPressed,insideElementReleased:nn.insideElementReleased,originalEvent:nn.originalEvent})}function Cn(nn){this.raiseEvent("canvas-release",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,insideElementPressed:nn.insideElementPressed,insideElementReleased:nn.insideElementReleased,originalEvent:nn.originalEvent})}function Tn(nn){this.raiseEvent("canvas-nonprimary-press",{tracker:nn.eventSource,position:nn.position,pointerType:nn.pointerType,button:nn.button,buttons:nn.buttons,originalEvent:nn.originalEvent})}function kn(nn){this.raiseEvent("canvas-nonprimary-release",{tracker:nn.eventSource,position:nn.position,pointerType:nn.pointerType,button:nn.button,buttons:nn.buttons,originalEvent:nn.originalEvent})}function In(nn){var fn,cn,Nn,On;if(!nn.preventDefaultAction&&this.viewport&&(fn=this.gestureSettingsByDeviceType(nn.pointerType),fn.pinchToZoom&&(cn=this.viewport.pointFromPixel(nn.center,!0),Nn=this.viewport.pointFromPixel(nn.lastCenter,!0),On=Nn.minus(cn),this.panHorizontal||(On.x=0),this.panVertical||(On.y=0),this.viewport.zoomBy(nn.distance/nn.lastDistance,cn,!0),fn.zoomToRefPoint&&this.viewport.panBy(On,!0),this.viewport.applyConstraints()),fn.pinchRotate)){var cr=Math.atan2(nn.gesturePoints[0].currentPos.y-nn.gesturePoints[1].currentPos.y,nn.gesturePoints[0].currentPos.x-nn.gesturePoints[1].currentPos.x),Bn=Math.atan2(nn.gesturePoints[0].lastPos.y-nn.gesturePoints[1].lastPos.y,nn.gesturePoints[0].lastPos.x-nn.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(cr-Bn)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:nn.eventSource,gesturePoints:nn.gesturePoints,lastCenter:nn.lastCenter,center:nn.center,lastDistance:nn.lastDistance,distance:nn.distance,shift:nn.shift,originalEvent:nn.originalEvent}),!1}function Ln(nn){var fn,cn,Nn,On;if(Nn=nt.now(),On=Nn-this._lastScrollTime,On>this.minScrollDeltaTime){if(this._lastScrollTime=Nn,this.viewport.flipped&&(nn.position.x=this.viewport.getContainerSize().x-nn.position.x),!nn.preventDefaultAction&&this.viewport&&(fn=this.gestureSettingsByDeviceType(nn.pointerType),fn.scrollToZoom&&(cn=Math.pow(this.zoomPerScroll,nn.scroll),this.viewport.zoomBy(cn,fn.zoomToRefPoint?this.viewport.pointFromPixel(nn.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:nn.eventSource,position:nn.position,scroll:nn.scroll,shift:nn.shift,originalEvent:nn.originalEvent}),fn&&fn.scrollToZoom)return!1}else if(fn=this.gestureSettingsByDeviceType(nn.pointerType),fn&&fn.scrollToZoom)return!1}function pn(nn){rt[this.hash].mouseInside=!0,Dt(this),this.raiseEvent("container-enter",{tracker:nn.eventSource,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function Hn(nn){nn.pointers<1&&(rt[this.hash].mouseInside=!1,rt[this.hash].animating||Ot(this)),this.raiseEvent("container-exit",{tracker:nn.eventSource,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function yn(nn){mr(nn),nn.isOpen()?nn._updateRequestId=kt(nn,yn):nn._updateRequestId=!1}function mr(nn){if(!nn._opening){if(nn.autoResize){var fn=st(nn.container),cn=rt[nn.hash].prevContainerSize;if(!fn.equals(cn)){var Nn=nn.viewport;if(nn.preserveImageSizeOnResize){var On=cn.x/fn.x,cr=Nn.getZoom()*On,Bn=Nn.getCenter();Nn.resize(fn,!1),Nn.zoomTo(cr,null,!0),Nn.panTo(Bn,!0)}else{var Qn=Nn.getBounds();Nn.resize(fn,!0),Nn.fitBoundsWithConstraints(Qn,!0)}rt[nn.hash].prevContainerSize=fn,rt[nn.hash].forceRedraw=!0}}var Un=nn.viewport.update(),or=nn.world.update()||Un;Un&&nn.raiseEvent("viewport-change"),nn.referenceStrip&&(or=nn.referenceStrip.update(nn.viewport)||or),!rt[nn.hash].animating&&or&&(nn.raiseEvent("animation-start"),Dt(nn)),(or||rt[nn.hash].forceRedraw||nn.world.needsDraw())&&(vn(nn),nn._drawOverlays(),nn.navigator&&nn.navigator.update(nn.viewport),rt[nn.hash].forceRedraw=!1,or&&nn.raiseEvent("animation")),rt[nn.hash].animating&&!or&&(nn.raiseEvent("animation-finish"),rt[nn.hash].mouseInside||Ot(nn)),rt[nn.hash].animating=or}}function vn(nn){nn.imageLoader.clear(),nn.drawer.clear(),nn.world.draw(),nn.raiseEvent("update-viewport",{})}function yr(nn,fn){return nn?nn+fn:fn}function Tr(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=this.zoomPerSecond,rt[this.hash].zooming=!0,wr(this)}function Mr(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=1/this.zoomPerSecond,rt[this.hash].zooming=!0,wr(this)}function rr(){rt[this.hash].zooming=!1}function wr(nn){nt.requestAnimationFrame(nt.delegate(nn,fr))}function fr(){var nn,fn,cn;rt[this.hash].zooming&&this.viewport&&(nn=nt.now(),fn=nn-rt[this.hash].lastZoomTime,cn=Math.pow(rt[this.hash].zoomFactor,fn/1e3),this.viewport.zoomBy(cn),this.viewport.applyConstraints(),rt[this.hash].lastZoomTime=nn,wr(this))}function gr(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Lr(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Pr(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function lr(){this.viewport&&this.viewport.goHome()}function qr(){this.isFullPage()&&!nt.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function sr(){if(this.viewport){var nn=this.viewport.getRotation();this.viewport.flipped?nn=nt.positiveModulo(nn+this.rotationIncrement,360):nn=nt.positiveModulo(nn-this.rotationIncrement,360),this.viewport.setRotation(nn)}}function pr(){if(this.viewport){var nn=this.viewport.getRotation();this.viewport.flipped?nn=nt.positiveModulo(nn-this.rotationIncrement,360):nn=nt.positiveModulo(nn+this.rotationIncrement,360),this.viewport.setRotation(nn)}}function Er(){this.viewport.toggleFlip()}function ir(){var nn=this._sequenceIndex-1;this.navPrevNextWrap&&nn<0&&(nn+=this.tileSources.length),this.goToPage(nn)}function Pn(){var nn=this._sequenceIndex+1;this.navPrevNextWrap&&nn>=this.tileSources.length&&(nn=0),this.goToPage(nn)}}(OpenSeadragon),function(nt){nt.Navigator=function(kt){var Lt=kt.viewer,Ot=this,Rt,Dt;kt.id?(this.element=document.getElementById(kt.id),kt.controlOptions={anchor:nt.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(kt.id="navigator-"+nt.now(),this.element=nt.makeNeutralElement("div"),kt.controlOptions={anchor:nt.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:kt.autoFade},kt.position&&(kt.position=="BOTTOM_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_RIGHT:kt.position=="BOTTOM_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_LEFT:kt.position=="TOP_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_RIGHT:kt.position=="TOP_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_LEFT:kt.position=="ABSOLUTE"&&(kt.controlOptions.anchor=nt.ControlAnchor.ABSOLUTE,kt.controlOptions.top=kt.top,kt.controlOptions.left=kt.left,kt.controlOptions.height=kt.height,kt.controlOptions.width=kt.width))),this.element.id=kt.id,this.element.className+=" navigator",kt=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.navigatorSizeRatio},kt,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:kt.autoResize,minZoomImageRatio:1,background:kt.background,opacity:kt.opacity,borderColor:kt.borderColor,displayRegionColor:kt.displayRegionColor}),kt.minPixelRatio=this.minPixelRatio=Lt.minPixelRatio,nt.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new nt.Point(1,1),this.totalBorderWidths=new nt.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),kt.controlOptions.anchor!=nt.ControlAnchor.NONE&&function(Yt,Jt){Yt.margin="0px",Yt.border=Jt+"px solid "+kt.borderColor,Yt.padding="0px",Yt.background=kt.background,Yt.opacity=kt.opacity,Yt.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=nt.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(Yt,Jt){Yt.position="relative",Yt.top="0px",Yt.left="0px",Yt.fontSize="0px",Yt.overflow="hidden",Yt.border=Jt+"px solid "+kt.displayRegionColor,Yt.margin="0px",Yt.padding="0px",Yt.background="transparent",Yt.float="left",Yt.cssFloat="left",Yt.styleFloat="left",Yt.zIndex=999999999,Yt.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=nt.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",Lt.addControl(this.element,kt.controlOptions),this._resizeWithViewer=kt.controlOptions.anchor!=nt.ControlAnchor.ABSOLUTE&&kt.controlOptions.anchor!=nt.ControlAnchor.NONE,kt.width&&kt.height?(this.setWidth(kt.width),this.setHeight(kt.height)):this._resizeWithViewer&&(Rt=nt.getElementSize(Lt.element),this.element.style.height=Math.round(Rt.y*kt.sizeRatio)+"px",this.element.style.width=Math.round(Rt.x*kt.sizeRatio)+"px",this.oldViewerSize=Rt,Dt=nt.getElementSize(this.element),this.elementArea=Dt.x*Dt.y),this.oldContainerSize=new nt.Point(0,0),nt.Viewer.apply(this,[kt]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function Bt(Yt){wt(Ot.displayRegionContainer,Yt),wt(Ot.displayRegion,-Yt),Ot.viewport.setRotation(Yt)}if(kt.navigatorRotate){var Ft=kt.viewer.viewport?kt.viewer.viewport.getRotation():kt.viewer.degrees||0;Bt(Ft),kt.viewer.addHandler("rotate",function(Yt){Bt(Yt.degrees)})}this.innerTracker.destroy(),this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),clickHandler:nt.delegate(this,rt),releaseHandler:nt.delegate(this,st),scrollHandler:nt.delegate(this,bt)}),this.addHandler("reset-size",function(){Ot.viewport&&Ot.viewport.goHome(!0)}),Lt.world.addHandler("item-index-change",function(Yt){window.setTimeout(function(){var Jt=Ot.world.getItemAt(Yt.previousIndex);Ot.world.setItemIndex(Jt,Yt.newIndex)},1)}),Lt.world.addHandler("remove-item",function(Yt){var Jt=Yt.item,Wt=Ot._getMatchingItem(Jt);Wt&&Ot.world.removeItem(Wt)}),this.update(Lt.viewport)},nt.extend(nt.Navigator.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{updateSize:function(){if(this.viewport){var kt=new nt.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);kt.equals(this.oldContainerSize)||(this.viewport.resize(kt,!0),this.viewport.goHome(!0),this.oldContainerSize=kt,this.drawer.clear(),this.world.draw())}},setWidth:function(kt){this.width=kt,this.element.style.width=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setHeight:function(kt){this.height=kt,this.element.style.height=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setFlip:function(kt){return this.viewport.setFlip(kt),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(kt){Et(this.displayRegion,kt),Et(this.canvas,kt),Et(this.element,kt)},update:function(kt){var Lt,Ot,Rt,Dt,Bt,Ft;if(Lt=nt.getElementSize(this.viewer.element),this._resizeWithViewer&&Lt.x&&Lt.y&&!Lt.equals(this.oldViewerSize)&&(this.oldViewerSize=Lt,this.maintainSizeRatio||!this.elementArea?(Ot=Lt.x*this.sizeRatio,Rt=Lt.y*this.sizeRatio):(Ot=Math.sqrt(this.elementArea*(Lt.x/Lt.y)),Rt=this.elementArea/Ot),this.element.style.width=Math.round(Ot)+"px",this.element.style.height=Math.round(Rt)+"px",this.elementArea||(this.elementArea=Ot*Rt),this.updateSize()),kt&&this.viewport){Dt=kt.getBoundsNoRotate(!0),Bt=this.viewport.pixelFromPointNoRotate(Dt.getTopLeft(),!1),Ft=this.viewport.pixelFromPointNoRotate(Dt.getBottomRight(),!1).minus(this.totalBorderWidths);var Yt=this.displayRegion.style;Yt.display=this.world.getItemCount()?"block":"none",Yt.top=Math.round(Bt.y)+"px",Yt.left=Math.round(Bt.x)+"px";var Jt=Math.abs(Bt.x-Ft.x),Wt=Math.abs(Bt.y-Ft.y);Yt.width=Math.round(Math.max(Jt,0))+"px",Yt.height=Math.round(Math.max(Wt,0))+"px"}},addTiledImage:function(kt){var Lt=this,Ot=kt.originalTiledImage;delete kt.original;var Rt=nt.extend({},kt,{success:function(Dt){var Bt=Dt.item;Bt._originalForNavigator=Ot,Lt._matchBounds(Bt,Ot,!0);function Ft(){Lt._matchBounds(Bt,Ot)}function Yt(){Lt._matchOpacity(Bt,Ot)}function Jt(){Lt._matchCompositeOperation(Bt,Ot)}Ot.addHandler("bounds-change",Ft),Ot.addHandler("clip-change",Ft),Ot.addHandler("opacity-change",Yt),Ot.addHandler("composite-operation-change",Jt)}});return nt.Viewer.prototype.addTiledImage.apply(this,[Rt])},_getMatchingItem:function(kt){for(var Lt=this.world.getItemCount(),Ot,Rt=0;Rt<Lt;Rt++)if(Ot=this.world.getItemAt(Rt),Ot._originalForNavigator===kt)return Ot;return null},_matchBounds:function(kt,Lt,Ot){var Rt=Lt.getBoundsNoRotate();kt.setPosition(Rt.getTopLeft(),Ot),kt.setWidth(Rt.width,Ot),kt.setRotation(Lt.getRotation(),Ot),kt.setClip(Lt.getClip())},_matchOpacity:function(kt,Lt){kt.setOpacity(Lt.opacity)},_matchCompositeOperation:function(kt,Lt){kt.setCompositeOperation(Lt.compositeOperation)}});function rt(kt){var Lt={tracker:kt.eventSource,position:kt.position,quick:kt.quick,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",Lt),!Lt.preventDefaultAction&&kt.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(kt.position.x=this.viewport.getContainerSize().x-kt.position.x);var Ot=this.viewport.pointFromPixel(kt.position);this.panVertical?this.panHorizontal||(Ot.x=this.viewer.viewport.getCenter(!0).x):Ot.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(Ot),this.viewer.viewport.applyConstraints()}}function it(kt){var Lt={tracker:kt.eventSource,position:kt.position,delta:kt.delta,speed:kt.speed,direction:kt.direction,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",Lt),!Lt.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(kt.delta.x=0),this.panVertical||(kt.delta.y=0),this.viewer.viewport.flipped&&(kt.delta.x=-kt.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(kt.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function st(kt){kt.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function bt(kt){return this.viewer.raiseEvent("navigator-scroll",{tracker:kt.eventSource,position:kt.position,scroll:kt.scroll,shift:kt.shift,originalEvent:kt.originalEvent}),!1}function wt(kt,Lt){Et(kt,"rotate("+Lt+"deg)")}function Et(kt,Lt){kt.style.webkitTransform=Lt,kt.style.mozTransform=Lt,kt.style.msTransform=Lt,kt.style.oTransform=Lt,kt.style.transform=Lt}}(OpenSeadragon),function(nt){var rt={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};nt.extend(nt,{getString:function(it){var st=it.split("."),bt=null,wt=arguments,Et=rt,kt;for(kt=0;kt<st.length-1;kt++)Et=Et[st[kt]]||{};return bt=Et[st[kt]],typeof bt!="string"&&(nt.console.log("Untranslated source string:",it),bt=""),bt.replace(/\{\d+\}/g,function(Lt){var Ot=parseInt(Lt.match(/\d+/),10)+1;return Ot<wt.length?wt[Ot]:""})},setString:function(it,st){var bt=it.split("."),wt=rt,Et;for(Et=0;Et<bt.length-1;Et++)wt[bt[Et]]||(wt[bt[Et]]={}),wt=wt[bt[Et]];wt[bt[Et]]=st}})}(OpenSeadragon),function(nt){nt.Point=function(rt,it){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0},nt.Point.prototype={clone:function(){return new nt.Point(this.x,this.y)},plus:function(rt){return new nt.Point(this.x+rt.x,this.y+rt.y)},minus:function(rt){return new nt.Point(this.x-rt.x,this.y-rt.y)},times:function(rt){return new nt.Point(this.x*rt,this.y*rt)},divide:function(rt){return new nt.Point(this.x/rt,this.y/rt)},negate:function(){return new nt.Point(-this.x,-this.y)},distanceTo:function(rt){return Math.sqrt(Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2))},squaredDistanceTo:function(rt){return Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2)},apply:function(rt){return new nt.Point(rt(this.x),rt(this.y))},equals:function(rt){return rt instanceof nt.Point&&this.x===rt.x&&this.y===rt.y},rotate:function(rt,it){it=it||new nt.Point(0,0);var st,bt;if(rt%90===0){var wt=nt.positiveModulo(rt,360);switch(wt){case 0:st=1,bt=0;break;case 90:st=0,bt=1;break;case 180:st=-1,bt=0;break;case 270:st=0,bt=-1;break}}else{var Et=rt*Math.PI/180;st=Math.cos(Et),bt=Math.sin(Et)}var kt=st*(this.x-it.x)-bt*(this.y-it.y)+it.x,Lt=bt*(this.x-it.x)+st*(this.y-it.y)+it.y;return new nt.Point(kt,Lt)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(nt){nt.TileSource=function(it,st,bt,wt,Et,kt){var Lt=this,Ot=arguments,Rt,Dt;if(nt.isPlainObject(it)?Rt=it:Rt={width:Ot[0],height:Ot[1],tileSize:Ot[2],tileOverlap:Ot[3],minLevel:Ot[4],maxLevel:Ot[5]},nt.EventSource.call(this),nt.extend(!0,this,Rt),!this.success){for(Dt=0;Dt<arguments.length;Dt++)if(nt.isFunction(arguments[Dt])){this.success=arguments[Dt];break}}this.success&&this.addHandler("ready",function(Bt){Lt.success(Bt)}),nt.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new nt.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=Rt.width&&Rt.height?Rt.width/Rt.height:1,this.dimensions=new nt.Point(Rt.width,Rt.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=Rt.tileOverlap?Rt.tileOverlap:0,this.minLevel=Rt.minLevel?Rt.minLevel:0,this.maxLevel=Rt.maxLevel!==void 0&&Rt.maxLevel!==null?Rt.maxLevel:Rt.width&&Rt.height?Math.ceil(Math.log(Math.max(Rt.width,Rt.height))/Math.log(2)):0,this.success&&nt.isFunction(this.success)&&this.success(this))},nt.TileSource.prototype={getTileSize:function(it){return nt.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(it){return this._tileWidth?this._tileWidth:this.getTileSize(it)},getTileHeight:function(it){return this._tileHeight?this._tileHeight:this.getTileSize(it)},getLevelScale:function(it){var st={},bt;for(bt=0;bt<=this.maxLevel;bt++)st[bt]=1/Math.pow(2,this.maxLevel-bt);return this.getLevelScale=function(wt){return st[wt]},this.getLevelScale(it)},getNumTiles:function(it){var st=this.getLevelScale(it),bt=Math.ceil(st*this.dimensions.x/this.getTileWidth(it)),wt=Math.ceil(st*this.dimensions.y/this.getTileHeight(it));return new nt.Point(bt,wt)},getPixelRatio:function(it){var st=this.dimensions.times(this.getLevelScale(it)),bt=1/st.x,wt=1/st.y;return new nt.Point(bt,wt)},getClosestLevel:function(){var it,st;for(it=this.minLevel+1;it<=this.maxLevel&&(st=this.getNumTiles(it),!(st.x>1||st.y>1));it++);return it-1},getTileAtPoint:function(it,st){var bt=st.x>=0&&st.x<=1&&st.y>=0&&st.y<=1/this.aspectRatio;nt.console.assert(bt,"[TileSource.getTileAtPoint] must be called with a valid point.");var wt=this.dimensions.x*this.getLevelScale(it),Et=st.x*wt,kt=st.y*wt,Lt=Math.floor(Et/this.getTileWidth(it)),Ot=Math.floor(kt/this.getTileHeight(it));st.x>=1&&(Lt=this.getNumTiles(it).x-1);var Rt=1e-15;return st.y>=1/this.aspectRatio-Rt&&(Ot=this.getNumTiles(it).y-1),new nt.Point(Lt,Ot)},getTileBounds:function(it,st,bt,wt){var Et=this.dimensions.times(this.getLevelScale(it)),kt=this.getTileWidth(it),Lt=this.getTileHeight(it),Ot=st===0?0:kt*st-this.tileOverlap,Rt=bt===0?0:Lt*bt-this.tileOverlap,Dt=kt+(st===0?1:2)*this.tileOverlap,Bt=Lt+(bt===0?1:2)*this.tileOverlap,Ft=1/Et.x;return Dt=Math.min(Dt,Et.x-Ot),Bt=Math.min(Bt,Et.y-Rt),wt?new nt.Rect(0,0,Dt,Bt):new nt.Rect(Ot*Ft,Rt*Ft,Dt*Ft,Bt*Ft)},getImageInfo:function(it){var st=this,bt,wt,Et,kt,Lt,Ot,Rt;it&&(Lt=it.split("/"),Ot=Lt[Lt.length-1],Rt=Ot.lastIndexOf("."),Rt>-1&&(Lt[Lt.length-1]=Ot.slice(0,Rt))),wt=function(Dt){typeof Dt=="string"&&(Dt=nt.parseXml(Dt));var Bt=nt.TileSource.determineType(st,Dt,it);if(!Bt){st.raiseEvent("open-failed",{message:"Unable to load TileSource",source:it});return}kt=Bt.prototype.configure.apply(st,[Dt,it]),kt.ajaxWithCredentials===void 0&&(kt.ajaxWithCredentials=st.ajaxWithCredentials),Et=new Bt(kt),st.ready=!0,st.raiseEvent("ready",{tileSource:Et})},it.match(/\.js$/)?(bt=it.split("/").pop().replace(".js",""),nt.jsonp({url:it,async:!1,callbackName:bt,callback:wt})):nt.makeAjaxRequest({url:it,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(Dt){var Bt=rt(Dt);wt(Bt)},error:function(Dt,Bt){var Ft;try{Ft="HTTP "+Dt.status+" attempting to load TileSource"}catch{var Yt;typeof Bt>"u"||!Bt.toString?Yt="Unknown error":Yt=Bt.toString(),Ft=Yt+" attempting to load TileSource"}st.raiseEvent("open-failed",{message:Ft,source:it})}})},supports:function(it,st){return!1},configure:function(it,st){throw new Error("Method not implemented.")},getTileUrl:function(it,st,bt){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(it,st,bt){return{}},tileExists:function(it,st,bt){var wt=this.getNumTiles(it);return it>=this.minLevel&&it<=this.maxLevel&&st>=0&&bt>=0&&st<wt.x&&bt<wt.y}},nt.extend(!0,nt.TileSource.prototype,nt.EventSource.prototype);function rt(it){var st=it.responseText,bt=it.status,wt,Et;if(it){if(it.status!==200&&it.status!==0)throw bt=it.status,wt=bt==404?"Not Found":it.statusText,new Error(nt.getString("Errors.Status",bt,wt))}else throw new Error(nt.getString("Errors.Security"));if(st.match(/\s*<.*/))try{Et=it.responseXML&&it.responseXML.documentElement?it.responseXML:nt.parseXml(st)}catch{Et=it.responseText}else if(st.match(/\s*[\{\[].*/))try{Et=nt.parseJSON(st)}catch{Et=st}else Et=st;return Et}nt.TileSource.determineType=function(it,st,bt){var wt;for(wt in OpenSeadragon)if(wt.match(/.+TileSource$/)&&nt.isFunction(OpenSeadragon[wt])&&nt.isFunction(OpenSeadragon[wt].prototype.supports)&&OpenSeadragon[wt].prototype.supports.call(it,st,bt))return OpenSeadragon[wt];nt.console.error("No TileSource was able to open %s %s",bt,st)}}(OpenSeadragon),function(nt){nt.DziTileSource=function(st,bt,wt,Et,kt,Lt,Ot,Rt,Dt){var Bt,Ft,Yt,Jt;if(nt.isPlainObject(st)?Jt=st:Jt={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=Jt.tilesUrl,this.fileFormat=Jt.fileFormat,this.displayRects=Jt.displayRects,this.displayRects)for(Bt=this.displayRects.length-1;Bt>=0;Bt--)for(Ft=this.displayRects[Bt],Yt=Ft.minLevel;Yt<=Ft.maxLevel;Yt++)this._levelRects[Yt]||(this._levelRects[Yt]=[]),this._levelRects[Yt].push(Ft);nt.TileSource.apply(this,[Jt])},nt.extend(nt.DziTileSource.prototype,nt.TileSource.prototype,{supports:function(st,bt){var wt;return st.Image?wt=st.Image.xmlns:st.documentElement&&(st.documentElement.localName=="Image"||st.documentElement.tagName=="Image")&&(wt=st.documentElement.namespaceURI),wt=(wt||"").toLowerCase(),wt.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||wt.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(st,bt){var wt;return nt.isPlainObject(st)?wt=it(this,st):wt=rt(this,st),bt&&!wt.tilesUrl&&(wt.tilesUrl=bt.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),bt.search(/\.(dzi|xml|js)\?/)!=-1?wt.queryParams=bt.match(/\?.*/):wt.queryParams=""),wt},getTileUrl:function(st,bt,wt){return[this.tilesUrl,st,"/",bt,"_",wt,".",this.fileFormat,this.queryParams].join("")},tileExists:function(st,bt,wt){var Et=this._levelRects[st],kt,Lt,Ot,Rt,Dt,Bt,Ft;if(this.minLevel&&st<this.minLevel||this.maxLevel&&st>this.maxLevel)return!1;if(!Et||!Et.length)return!0;for(Ft=Et.length-1;Ft>=0;Ft--)if(kt=Et[Ft],!(st<kt.minLevel||st>kt.maxLevel)&&(Lt=this.getLevelScale(st),Ot=kt.x*Lt,Rt=kt.y*Lt,Dt=Ot+kt.width*Lt,Bt=Rt+kt.height*Lt,Ot=Math.floor(Ot/this._tileWidth),Rt=Math.floor(Rt/this._tileWidth),Dt=Math.ceil(Dt/this._tileWidth),Bt=Math.ceil(Bt/this._tileWidth),Ot<=bt&&bt<Dt&&Rt<=wt&&wt<Bt))return!0;return!1}});function rt(st,bt){if(!bt||!bt.documentElement)throw new Error(nt.getString("Errors.Xml"));var wt=bt.documentElement,Et=wt.localName||wt.tagName,kt=bt.documentElement.namespaceURI,Lt=null,Ot=[],Rt,Dt,Bt,Ft,Yt;if(Et=="Image")try{if(Ft=wt.getElementsByTagName("Size")[0],Ft===void 0&&(Ft=wt.getElementsByTagNameNS(kt,"Size")[0]),Lt={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:wt.getAttribute("Url"),Format:wt.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(wt.getAttribute("Overlap"),10),TileSize:parseInt(wt.getAttribute("TileSize"),10),Size:{Height:parseInt(Ft.getAttribute("Height"),10),Width:parseInt(Ft.getAttribute("Width"),10)}}},!nt.imageFormatSupported(Lt.Image.Format))throw new Error(nt.getString("Errors.ImageFormat",Lt.Image.Format.toUpperCase()));for(Rt=wt.getElementsByTagName("DisplayRect"),Rt===void 0&&(Rt=wt.getElementsByTagNameNS(kt,"DisplayRect")[0]),Yt=0;Yt<Rt.length;Yt++)Dt=Rt[Yt],Bt=Dt.getElementsByTagName("Rect")[0],Bt===void 0&&(Bt=Dt.getElementsByTagNameNS(kt,"Rect")[0]),Ot.push({Rect:{X:parseInt(Bt.getAttribute("X"),10),Y:parseInt(Bt.getAttribute("Y"),10),Width:parseInt(Bt.getAttribute("Width"),10),Height:parseInt(Bt.getAttribute("Height"),10),MinLevel:parseInt(Dt.getAttribute("MinLevel"),10),MaxLevel:parseInt(Dt.getAttribute("MaxLevel"),10)}});return Ot.length&&(Lt.Image.DisplayRect=Ot),it(st,Lt)}catch(Qt){throw Qt instanceof Error?Qt:new Error(nt.getString("Errors.Dzi"))}else{if(Et=="Collection")throw new Error(nt.getString("Errors.Dzc"));if(Et=="Error"){var Jt=wt.getElementsByTagName("Message")[0],Wt=Jt.firstChild.nodeValue;throw new Error(Wt)}}throw new Error(nt.getString("Errors.Dzi"))}function it(st,bt){var wt=bt.Image,Et=wt.Url,kt=wt.Format,Lt=wt.Size,Ot=wt.DisplayRect||[],Rt=parseInt(Lt.Width,10),Dt=parseInt(Lt.Height,10),Bt=parseInt(wt.TileSize,10),Ft=parseInt(wt.Overlap,10),Yt=[],Jt,Wt;for(Wt=0;Wt<Ot.length;Wt++)Jt=Ot[Wt].Rect,Yt.push(new nt.DisplayRect(parseInt(Jt.X,10),parseInt(Jt.Y,10),parseInt(Jt.Width,10),parseInt(Jt.Height,10),parseInt(Jt.MinLevel,10),parseInt(Jt.MaxLevel,10)));return nt.extend(!0,{width:Rt,height:Dt,tileSize:Bt,tileOverlap:Ft,minLevel:null,maxLevel:null,tilesUrl:Et,fileFormat:kt,displayRects:Yt},bt)}}(OpenSeadragon),function(nt){nt.IIIFTileSource=function(wt){if(nt.extend(!0,this,wt),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(wt.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=wt.version,this.tile_width&&this.tile_height)wt.tileWidth=this.tile_width,wt.tileHeight=this.tile_height;else if(this.tile_width)wt.tileSize=this.tile_width;else if(this.tile_height)wt.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)wt.tileWidth=this.tiles[0].width,wt.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var Et=0;Et<this.tiles.length;Et++)for(var kt=0;kt<this.tiles[Et].scaleFactors.length;kt++){var Lt=this.tiles[Et].scaleFactors[kt];this.scale_factors.push(Lt),wt.tileSizePerScaleFactor[Lt]={width:this.tiles[Et].width,height:this.tiles[Et].height||this.tiles[Et].width}}}else if(rt(wt)){for(var Ot=Math.min(this.height,this.width),Rt=[256,512,1024],Dt=[],Bt=0;Bt<Rt.length;Bt++)Rt[Bt]<=Ot&&Dt.push(Rt[Bt]);Dt.length>0?wt.tileSize=Math.max.apply(null,Dt):wt.tileSize=Ot}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,wt.levels=it(this),nt.extend(!0,wt,{width:wt.levels[wt.levels.length-1].width,height:wt.levels[wt.levels.length-1].height,tileSize:Math.max(wt.height,wt.width),tileOverlap:0,minLevel:0,maxLevel:wt.levels.length-1}),this.levels=wt.levels):nt.console.error("Nothing in the info.json to construct image pyramids from");if(!wt.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)wt.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var Ft=Math.max.apply(null,this.scale_factors);wt.maxLevel=Math.round(Math.log(Ft)*Math.LOG2E)}nt.TileSource.apply(this,[wt])},nt.extend(nt.IIIFTileSource.prototype,nt.TileSource.prototype,{supports:function(wt,Et){return wt.protocol&&wt.protocol=="http://iiif.io/api/image"||wt["@context"]&&(wt["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||wt["@context"]=="http://iiif.io/api/image/1/context.json")||wt.profile&&wt.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||wt.identifier&&wt.width&&wt.height?!0:!!(wt.documentElement&&wt.documentElement.tagName=="info"&&wt.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(wt,Et){if(nt.isPlainObject(wt)){if(!wt["@context"])wt["@context"]="http://iiif.io/api/image/1.0/context.json",wt["@id"]=Et.replace("/info.json",""),wt.version=1;else{var Lt=wt["@context"];if(Array.isArray(Lt)){for(var Ot=0;Ot<Lt.length;Ot++)if(typeof Lt[Ot]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(Lt[Ot])||Lt[Ot]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){Lt=Lt[Ot];break}}switch(Lt){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":wt.version=1;break;case"http://iiif.io/api/image/2/context.json":wt.version=2;break;case"http://iiif.io/api/image/3/context.json":wt.version=3;break;default:nt.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!wt["@id"]&&wt.id&&(wt["@id"]=wt.id),wt.preferredFormats){for(var Rt=0;Rt<wt.preferredFormats.length;Rt++)if(OpenSeadragon.imageFormatSupported(wt.preferredFormats[Rt])){wt.tileFormat=wt.preferredFormats[Rt];break}}return wt}else{var kt=st(wt);return kt["@context"]="http://iiif.io/api/image/1.0/context.json",kt["@id"]=Et.replace("/info.xml",""),kt.version=1,kt}},getTileWidth:function(wt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileWidth.call(this,wt);var Et=Math.pow(2,this.maxLevel-wt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Et]?this.tileSizePerScaleFactor[Et].width:this._tileWidth},getTileHeight:function(wt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileHeight.call(this,wt);var Et=Math.pow(2,this.maxLevel-wt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Et]?this.tileSizePerScaleFactor[Et].height:this._tileHeight},getLevelScale:function(wt){if(this.emulateLegacyImagePyramid){var Et=NaN;return this.levels.length>0&&wt>=this.minLevel&&wt<=this.maxLevel&&(Et=this.levels[wt].width/this.levels[this.maxLevel].width),Et}return nt.TileSource.prototype.getLevelScale.call(this,wt)},getNumTiles:function(wt){if(this.emulateLegacyImagePyramid){var Et=this.getLevelScale(wt);return Et?new nt.Point(1,1):new nt.Point(0,0)}return nt.TileSource.prototype.getNumTiles.call(this,wt)},getTileAtPoint:function(wt,Et){return this.emulateLegacyImagePyramid?new nt.Point(0,0):nt.TileSource.prototype.getTileAtPoint.call(this,wt,Et)},getTileUrl:function(wt,Et,kt){if(this.emulateLegacyImagePyramid){var Lt=null;return this.levels.length>0&&wt>=this.minLevel&&wt<=this.maxLevel&&(Lt=this.levels[wt].url),Lt}var Ot="0",Rt=Math.pow(.5,this.maxLevel-wt),Dt=Math.ceil(this.width*Rt),Bt=Math.ceil(this.height*Rt),Ft,Yt,Jt,Wt,Qt,rn,sn,on,hn,mn,Cn,Tn,kn,In;return Ft=this.getTileWidth(wt),Yt=this.getTileHeight(wt),Jt=Math.ceil(Ft/Rt),Wt=Math.ceil(Yt/Rt),this.version===1?kn="native."+this.tileFormat:kn="default."+this.tileFormat,Dt<Ft&&Bt<Yt?(this.version===2&&Dt===this.width||this.version===3&&Dt===this.width&&Bt===this.height?mn="max":this.version===3?mn=Dt+","+Bt:mn=Dt+",",Qt="full"):(rn=Et*Jt,sn=kt*Wt,on=Math.min(Jt,this.width-rn),hn=Math.min(Wt,this.height-sn),Et===0&&kt===0&&on===this.width&&hn===this.height?Qt="full":Qt=[rn,sn,on,hn].join(","),Cn=Math.ceil(on*Rt),Tn=Math.ceil(hn*Rt),this.version===2&&Cn===this.width||this.version===3&&Cn===this.width&&Tn===this.height?mn="max":this.version===3?mn=Cn+","+Tn:mn=Cn+","),In=[this["@id"],Qt,mn,Ot,kn].join("/"),In},__testonly__:{canBeTiled:rt,constructLevels:it}});function rt(wt){var Et=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],kt=Array.isArray(wt.profile)?wt.profile[0]:wt.profile,Lt=Et.indexOf(kt)!==-1,Ot=!1;return wt.version===2&&wt.profile.length>1&&wt.profile[1].supports&&(Ot=wt.profile[1].supports.indexOf("sizeByW")!==-1),wt.version===3&&wt.extraFeatures&&(Ot=wt.extraFeatures.indexOf("sizeByWh")!==-1),!Lt||Ot}function it(wt){for(var Et=[],kt=0;kt<wt.sizes.length;kt++)Et.push({url:wt["@id"]+"/full/"+wt.sizes[kt].width+","+(wt.version===3?wt.sizes[kt].height:"")+"/0/default."+wt.tileFormat,width:wt.sizes[kt].width,height:wt.sizes[kt].height});return Et.sort(function(Lt,Ot){return Lt.width-Ot.width})}function st(wt){if(!wt||!wt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Et=wt.documentElement,kt=Et.tagName,Lt=null;if(kt=="info")try{return Lt={},bt(Et,Lt),Lt}catch(Ot){throw Ot instanceof Error?Ot:new Error(nt.getString("Errors.IIIF"))}throw new Error(nt.getString("Errors.IIIF"))}function bt(wt,Et,kt){var Lt,Ot;if(wt.nodeType==3&&kt)Ot=wt.nodeValue.trim(),Ot.match(/^\d*$/)&&(Ot=Number(Ot)),Et[kt]?(nt.isArray(Et[kt])||(Et[kt]=[Et[kt]]),Et[kt].push(Ot)):Et[kt]=Ot;else if(wt.nodeType==1)for(Lt=0;Lt<wt.childNodes.length;Lt++)bt(wt.childNodes[Lt],Et,wt.nodeName)}}(OpenSeadragon),function(nt){nt.OsmTileSource=function(rt,it,st,bt,wt){var Et;nt.isPlainObject(rt)?Et=rt:Et={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!Et.width||!Et.height)&&(Et.width=65572864,Et.height=65572864),Et.tileSize||(Et.tileSize=256,Et.tileOverlap=0),Et.tilesUrl||(Et.tilesUrl="http://tile.openstreetmap.org/"),Et.minLevel=8,nt.TileSource.apply(this,[Et])},nt.extend(nt.OsmTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="openstreetmaps"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){return this.tilesUrl+(rt-8)+"/"+it+"/"+st+".png"}})}(OpenSeadragon),function(nt){nt.TmsTileSource=function(rt,it,st,bt,wt){var Et;nt.isPlainObject(rt)?Et=rt:Et={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var kt=Math.ceil(Et.width/256)*256,Lt=Math.ceil(Et.height/256)*256,Ot;kt>Lt?Ot=kt/256:Ot=Lt/256,Et.maxLevel=Math.ceil(Math.log(Ot)/Math.log(2))-1,Et.tileSize=256,Et.width=kt,Et.height=Lt,nt.TileSource.apply(this,[Et])},nt.extend(nt.TmsTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="tiledmapservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){var bt=this.getNumTiles(rt).y-1;return this.tilesUrl+rt+"/"+it+"/"+(bt-st)+".png"}})}(OpenSeadragon),function(nt){nt.ZoomifyTileSource=function(rt){rt.tileSize=256;var it={x:rt.width,y:rt.height};for(rt.imageSizes=[{x:rt.width,y:rt.height}],rt.gridSize=[this._getGridSize(rt.width,rt.height,rt.tileSize)];parseInt(it.x,10)>rt.tileSize||parseInt(it.y,10)>rt.tileSize;)it.x=Math.floor(it.x/2),it.y=Math.floor(it.y/2),rt.imageSizes.push({x:it.x,y:it.y}),rt.gridSize.push(this._getGridSize(it.x,it.y,rt.tileSize));rt.imageSizes.reverse(),rt.gridSize.reverse(),rt.minLevel=0,rt.maxLevel=rt.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[rt])},nt.extend(nt.ZoomifyTileSource.prototype,nt.TileSource.prototype,{_getGridSize:function(rt,it,st){return{x:Math.ceil(rt/st),y:Math.ceil(it/st)}},_calculateAbsoluteTileNumber:function(rt,it,st){for(var bt=0,wt={},Et=0;Et<rt;Et++)wt=this.gridSize[Et],bt+=wt.x*wt.y;return wt=this.gridSize[rt],bt+=wt.x*st+it,bt},supports:function(rt,it){return rt.type&&rt.type=="zoomifytileservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){var bt=0,wt=this._calculateAbsoluteTileNumber(rt,it,st);return bt=Math.floor(wt/256),this.tilesUrl+"TileGroup"+bt+"/"+rt+"-"+it+"-"+st+".jpg"}})}(OpenSeadragon),function(nt){nt.LegacyTileSource=function(bt){var wt,Et,kt;nt.isArray(bt)&&(wt={type:"legacy-image-pyramid",levels:bt}),wt.levels=rt(wt.levels),wt.levels.length>0?(Et=wt.levels[wt.levels.length-1].width,kt=wt.levels[wt.levels.length-1].height):(Et=0,kt=0,nt.console.error("No supported image formats found")),nt.extend(!0,wt,{width:Et,height:kt,tileSize:Math.max(kt,Et),tileOverlap:0,minLevel:0,maxLevel:wt.levels.length>0?wt.levels.length-1:0}),nt.TileSource.apply(this,[wt]),this.levels=wt.levels},nt.extend(nt.LegacyTileSource.prototype,nt.TileSource.prototype,{supports:function(bt,wt){return bt.type&&bt.type=="legacy-image-pyramid"||bt.documentElement&&bt.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(bt,wt){var Et;return nt.isPlainObject(bt)?Et=st(this,bt):Et=it(this,bt),Et},getLevelScale:function(bt){var wt=NaN;return this.levels.length>0&&bt>=this.minLevel&&bt<=this.maxLevel&&(wt=this.levels[bt].width/this.levels[this.maxLevel].width),wt},getNumTiles:function(bt){var wt=this.getLevelScale(bt);return wt?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(bt,wt,Et){var kt=null;return this.levels.length>0&&bt>=this.minLevel&&bt<=this.maxLevel&&(kt=this.levels[bt].url),kt}});function rt(bt){var wt=[],Et,kt;for(kt=0;kt<bt.length;kt++)Et=bt[kt],Et.height&&Et.width&&Et.url?wt.push({url:Et.url,width:Number(Et.width),height:Number(Et.height)}):nt.console.error("Unsupported image format: %s",Et.url?Et.url:"<no URL>");return wt.sort(function(Lt,Ot){return Lt.height-Ot.height})}function it(bt,wt){if(!wt||!wt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Et=wt.documentElement,kt=Et.tagName,Lt=null,Ot=[],Rt,Dt;if(kt=="image")try{for(Lt={type:Et.getAttribute("type"),levels:[]},Ot=Et.getElementsByTagName("level"),Dt=0;Dt<Ot.length;Dt++)Rt=Ot[Dt],Lt.levels.push({url:Rt.getAttribute("url"),width:parseInt(Rt.getAttribute("width"),10),height:parseInt(Rt.getAttribute("height"),10)});return st(bt,Lt)}catch(Bt){throw Bt instanceof Error?Bt:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(kt=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(kt=="error")throw new Error("Error: "+wt)}throw new Error("Unknown element "+kt)}function st(bt,wt){return wt.levels}}(OpenSeadragon),function(nt){nt.ImageTileSource=function(rt){rt=nt.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},rt),nt.TileSource.apply(this,[rt])},nt.extend(nt.ImageTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type==="image"},configure:function(rt,it){return rt},getImageInfo:function(rt){var it=this._image=new Image,st=this;this.crossOriginPolicy&&(it.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(it.useCredentials=this.ajaxWithCredentials),nt.addEvent(it,"load",function(){st.width=Object.prototype.hasOwnProperty.call(it,"naturalWidth")?it.naturalWidth:it.width,st.height=Object.prototype.hasOwnProperty.call(it,"naturalHeight")?it.naturalHeight:it.height,st.aspectRatio=st.width/st.height,st.dimensions=new nt.Point(st.width,st.height),st._tileWidth=st.width,st._tileHeight=st.height,st.tileOverlap=0,st.minLevel=0,st.levels=st._buildLevels(),st.maxLevel=st.levels.length-1,st.ready=!0,st.raiseEvent("ready",{tileSource:st})}),nt.addEvent(it,"error",function(){st.raiseEvent("open-failed",{message:"Error loading image at "+rt,source:rt})}),it.src=rt},getLevelScale:function(rt){var it=NaN;return rt>=this.minLevel&&rt<=this.maxLevel&&(it=this.levels[rt].width/this.levels[this.maxLevel].width),it},getNumTiles:function(rt){var it=this.getLevelScale(rt);return it?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(rt,it,st){var bt=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(bt=this.levels[rt].url),bt},getContext2D:function(rt,it,st){var bt=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(bt=this.levels[rt].context2D),bt},_buildLevels:function(){var rt=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!nt.supportsCanvas||!this.useCanvas)return delete this._image,rt;var it=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,st=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,bt=document.createElement("canvas"),wt=bt.getContext("2d");if(bt.width=it,bt.height=st,wt.drawImage(this._image,0,0,it,st),rt[0].context2D=wt,delete this._image,nt.isCanvasTainted(bt))return rt;for(;it>=2&&st>=2;){it=Math.floor(it/2),st=Math.floor(st/2);var Et=document.createElement("canvas"),kt=Et.getContext("2d");Et.width=it,Et.height=st,kt.drawImage(bt,0,0,it,st),rt.splice(0,0,{context2D:kt,width:it,height:st}),bt=Et,wt=kt}return rt}})}(OpenSeadragon),function(nt){nt.TileSourceCollection=function(rt,it,st,bt){nt.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(nt){nt.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},nt.Button=function(kt){var Lt=this;nt.EventSource.call(this),nt.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},kt),this.element=kt.element||nt.makeNeutralElement("div"),kt.element||(this.imgRest=nt.makeTransparentImage(this.srcRest),this.imgGroup=nt.makeTransparentImage(this.srcGroup),this.imgHover=nt.makeTransparentImage(this.srcHover),this.imgDown=nt.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",nt.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",nt.Browser.vendor==nt.BROWSERS.FIREFOX&&nt.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=nt.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Ot){Ot.insideElementPressed?(wt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("enter",{originalEvent:Ot.originalEvent})):Ot.buttonDownAny||wt(Lt,nt.ButtonState.HOVER)},focusHandler:function(Ot){this.enterHandler(Ot),Lt.raiseEvent("focus",{originalEvent:Ot.originalEvent})},exitHandler:function(Ot){Et(Lt,nt.ButtonState.GROUP),Ot.insideElementPressed&&Lt.raiseEvent("exit",{originalEvent:Ot.originalEvent})},blurHandler:function(Ot){this.exitHandler(Ot),Lt.raiseEvent("blur",{originalEvent:Ot.originalEvent})},pressHandler:function(Ot){wt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("press",{originalEvent:Ot.originalEvent})},releaseHandler:function(Ot){Ot.insideElementPressed&&Ot.insideElementReleased?(Et(Lt,nt.ButtonState.HOVER),Lt.raiseEvent("release",{originalEvent:Ot.originalEvent})):Ot.insideElementPressed?Et(Lt,nt.ButtonState.GROUP):wt(Lt,nt.ButtonState.HOVER)},clickHandler:function(Ot){Ot.quick&&Lt.raiseEvent("click",{originalEvent:Ot.originalEvent})},keyHandler:function(Ot){return Ot.keyCode===13?(Lt.raiseEvent("click",{originalEvent:Ot.originalEvent}),Lt.raiseEvent("release",{originalEvent:Ot.originalEvent}),!1):!0}}),Et(this,nt.ButtonState.REST)},nt.extend(nt.Button.prototype,nt.EventSource.prototype,{notifyGroupEnter:function(){wt(this,nt.ButtonState.GROUP)},notifyGroupExit:function(){Et(this,nt.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,nt.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,nt.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function rt(kt){nt.requestAnimationFrame(function(){it(kt)})}function it(kt){var Lt,Ot,Rt;kt.shouldFade&&(Lt=nt.now(),Ot=Lt-kt.fadeBeginTime,Rt=1-Ot/kt.fadeLength,Rt=Math.min(1,Rt),Rt=Math.max(0,Rt),kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,Rt,!0),Rt>0&&rt(kt))}function st(kt){kt.shouldFade=!0,kt.fadeBeginTime=nt.now()+kt.fadeDelay,window.setTimeout(function(){rt(kt)},kt.fadeDelay)}function bt(kt){kt.shouldFade=!1,kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,1,!0)}function wt(kt,Lt){kt.element.disabled||(Lt>=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.REST&&(bt(kt),kt.currentState=nt.ButtonState.GROUP),Lt>=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.GROUP&&(kt.imgHover&&(kt.imgHover.style.visibility=""),kt.currentState=nt.ButtonState.HOVER),Lt>=nt.ButtonState.DOWN&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgDown&&(kt.imgDown.style.visibility=""),kt.currentState=nt.ButtonState.DOWN))}function Et(kt,Lt){kt.element.disabled||(Lt<=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.DOWN&&(kt.imgDown&&(kt.imgDown.style.visibility="hidden"),kt.currentState=nt.ButtonState.HOVER),Lt<=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgHover&&(kt.imgHover.style.visibility="hidden"),kt.currentState=nt.ButtonState.GROUP),Lt<=nt.ButtonState.REST&&kt.currentState==nt.ButtonState.GROUP&&(st(kt),kt.currentState=nt.ButtonState.REST))}}(OpenSeadragon),function(nt){nt.ButtonGroup=function(rt){nt.extend(!0,this,{buttons:[],clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},rt);var it=this.buttons.concat([]),st=this,bt;if(this.element=rt.element||nt.makeNeutralElement("div"),!rt.group)for(this.element.style.display="inline-block",bt=0;bt<it.length;bt++)this.element.appendChild(it[bt].element);nt.setElementTouchActionNone(this.element),this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(wt){var Et;for(Et=0;Et<st.buttons.length;Et++)st.buttons[Et].notifyGroupEnter()},exitHandler:function(wt){var Et;if(!wt.insideElementPressed)for(Et=0;Et<st.buttons.length;Et++)st.buttons[Et].notifyGroupExit()}})},nt.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(nt){nt.Rect=function(rt,it,st,bt,wt){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0,this.width=typeof st=="number"?st:0,this.height=typeof bt=="number"?bt:0,this.degrees=typeof wt=="number"?wt:0,this.degrees=nt.positiveModulo(this.degrees,360);var Et,kt;this.degrees>=270?(Et=this.getTopRight(),this.x=Et.x,this.y=Et.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=270):this.degrees>=180?(Et=this.getBottomRight(),this.x=Et.x,this.y=Et.y,this.degrees-=180):this.degrees>=90&&(Et=this.getBottomLeft(),this.x=Et.x,this.y=Et.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=90)},nt.Rect.fromSummits=function(rt,it,st){var bt=rt.distanceTo(it),wt=rt.distanceTo(st),Et=it.minus(rt),kt=Math.atan(Et.y/Et.x);return Et.x<0?kt+=Math.PI:Et.y<0&&(kt+=2*Math.PI),new nt.Rect(rt.x,rt.y,bt,wt,kt/Math.PI*180)},nt.Rect.prototype={clone:function(){return new nt.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new nt.Point(this.x,this.y)},getBottomRight:function(){return new nt.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new nt.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new nt.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new nt.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new nt.Point(this.width,this.height)},equals:function(rt){return rt instanceof nt.Rect&&this.x===rt.x&&this.y===rt.y&&this.width===rt.width&&this.height===rt.height&&this.degrees===rt.degrees},times:function(rt){return new nt.Rect(this.x*rt,this.y*rt,this.width*rt,this.height*rt,this.degrees)},translate:function(rt){return new nt.Rect(this.x+rt.x,this.y+rt.y,this.width,this.height,this.degrees)},union:function(rt){var it=this.getBoundingBox(),st=rt.getBoundingBox(),bt=Math.min(it.x,st.x),wt=Math.min(it.y,st.y),Et=Math.max(it.x+it.width,st.x+st.width),kt=Math.max(it.y+it.height,st.y+st.height);return new nt.Rect(bt,wt,Et-bt,kt-wt)},intersection:function(rt){var it=1e-10,st=[],bt=this.getTopLeft();rt.containsPoint(bt,it)&&st.push(bt);var wt=this.getTopRight();rt.containsPoint(wt,it)&&st.push(wt);var Et=this.getBottomLeft();rt.containsPoint(Et,it)&&st.push(Et);var kt=this.getBottomRight();rt.containsPoint(kt,it)&&st.push(kt);var Lt=rt.getTopLeft();this.containsPoint(Lt,it)&&st.push(Lt);var Ot=rt.getTopRight();this.containsPoint(Ot,it)&&st.push(Ot);var Rt=rt.getBottomLeft();this.containsPoint(Rt,it)&&st.push(Rt);var Dt=rt.getBottomRight();this.containsPoint(Dt,it)&&st.push(Dt);for(var Bt=this._getSegments(),Ft=rt._getSegments(),Yt=0;Yt<Bt.length;Yt++)for(var Jt=Bt[Yt],Wt=0;Wt<Ft.length;Wt++){var Qt=Ft[Wt],rn=sn(Jt[0],Jt[1],Qt[0],Qt[1]);rn&&st.push(rn)}function sn(In,Ln,pn,Hn){var yn=Ln.minus(In),mr=Hn.minus(pn),vn=-mr.x*yn.y+yn.x*mr.y;if(vn===0)return null;var yr=(yn.x*(In.y-pn.y)-yn.y*(In.x-pn.x))/vn,Tr=(mr.x*(In.y-pn.y)-mr.y*(In.x-pn.x))/vn;return-it<=yr&&yr<=1-it&&-it<=Tr&&Tr<=1-it?new nt.Point(In.x+Tr*yn.x,In.y+Tr*yn.y):null}if(st.length===0)return null;for(var on=st[0].x,hn=st[0].x,mn=st[0].y,Cn=st[0].y,Tn=1;Tn<st.length;Tn++){var kn=st[Tn];kn.x<on&&(on=kn.x),kn.x>hn&&(hn=kn.x),kn.y<mn&&(mn=kn.y),kn.y>Cn&&(Cn=kn.y)}return new nt.Rect(on,mn,hn-on,Cn-mn)},_getSegments:function(){var rt=this.getTopLeft(),it=this.getTopRight(),st=this.getBottomLeft(),bt=this.getBottomRight();return[[rt,it],[it,bt],[bt,st],[st,rt]]},rotate:function(rt,it){if(rt=nt.positiveModulo(rt,360),rt===0)return this.clone();it=it||this.getCenter();var st=this.getTopLeft().rotate(rt,it),bt=this.getTopRight().rotate(rt,it),wt=bt.minus(st);wt=wt.apply(function(kt){var Lt=1e-15;return Math.abs(kt)<Lt?0:kt});var Et=Math.atan(wt.y/wt.x);return wt.x<0?Et+=Math.PI:wt.y<0&&(Et+=2*Math.PI),new nt.Rect(st.x,st.y,this.width,this.height,Et/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var rt=this.getTopLeft(),it=this.getTopRight(),st=this.getBottomLeft(),bt=this.getBottomRight(),wt=Math.min(rt.x,it.x,st.x,bt.x),Et=Math.max(rt.x,it.x,st.x,bt.x),kt=Math.min(rt.y,it.y,st.y,bt.y),Lt=Math.max(rt.y,it.y,st.y,bt.y);return new nt.Rect(wt,kt,Et-wt,Lt-kt)},getIntegerBoundingBox:function(){var rt=this.getBoundingBox(),it=Math.floor(rt.x),st=Math.floor(rt.y),bt=Math.ceil(rt.width+rt.x-it),wt=Math.ceil(rt.height+rt.y-st);return new nt.Rect(it,st,bt,wt)},containsPoint:function(rt,it){it=it||0;var st=this.getTopLeft(),bt=this.getTopRight(),wt=this.getBottomLeft(),Et=bt.minus(st),kt=wt.minus(st);return(rt.x-st.x)*Et.x+(rt.y-st.y)*Et.y>=-it&&(rt.x-bt.x)*Et.x+(rt.y-bt.y)*Et.y<=it&&(rt.x-st.x)*kt.x+(rt.y-st.y)*kt.y>=-it&&(rt.x-wt.x)*kt.x+(rt.y-wt.y)*kt.y<=it},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(nt){var rt={};nt.ReferenceStrip=function(Ot){var Rt=this,Dt=Ot.viewer,Bt=nt.getElementSize(Dt.element),Ft,Yt,Jt;for(Ot.id||(Ot.id="referencestrip-"+nt.now(),this.element=nt.makeNeutralElement("div"),this.element.id=Ot.id,this.element.className="referencestrip"),Ot=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.referenceStripSizeRatio,position:nt.DEFAULT_SETTINGS.referenceStripPosition,scroll:nt.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold},Ot,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),nt.extend(this,Ot),rt[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,Yt=this.element.style,Yt.marginTop="0px",Yt.marginRight="0px",Yt.marginBottom="0px",Yt.marginLeft="0px",Yt.left="0px",Yt.bottom="0px",Yt.border="0px",Yt.background="#000",Yt.position="relative",nt.setElementTouchActionNone(this.element),nt.setElementOpacity(this.element,.8),this.viewer=Dt,this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),scrollHandler:nt.delegate(this,st),enterHandler:nt.delegate(this,wt),exitHandler:nt.delegate(this,Et),keyDownHandler:nt.delegate(this,kt),keyHandler:nt.delegate(this,Lt)}),Ot.width&&Ot.height?(this.element.style.width=Ot.width+"px",this.element.style.height=Ot.height+"px",Dt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):Ot.scroll=="horizontal"?(this.element.style.width=Bt.x*Ot.sizeRatio*Dt.tileSources.length+12*Dt.tileSources.length+"px",this.element.style.height=Bt.y*Ot.sizeRatio+"px",Dt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=Bt.y*Ot.sizeRatio*Dt.tileSources.length+12*Dt.tileSources.length+"px",this.element.style.width=Bt.x*Ot.sizeRatio+"px",Dt.addControl(this.element,{anchor:nt.ControlAnchor.TOP_LEFT})),this.panelWidth=Bt.x*this.sizeRatio+8,this.panelHeight=Bt.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},Jt=0;Jt<Dt.tileSources.length;Jt++)Ft=nt.makeNeutralElement("div"),Ft.id=this.element.id+"-"+Jt,Ft.style.width=Rt.panelWidth+"px",Ft.style.height=Rt.panelHeight+"px",Ft.style.display="inline",Ft.style.float="left",Ft.style.cssFloat="left",Ft.style.styleFloat="left",Ft.style.padding="2px",nt.setElementTouchActionNone(Ft),Ft.innerTracker=new nt.MouseTracker({element:Ft,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(Wt){Wt.eventSource.dragging=nt.now()},releaseHandler:function(Wt){var Qt=Wt.eventSource,rn=Qt.element.id,sn=Number(rn.split("-")[2]),on=nt.now();Wt.insideElementPressed&&Wt.insideElementReleased&&Qt.dragging&&on-Qt.dragging<Qt.clickTimeThreshold&&(Qt.dragging=null,Dt.goToPage(sn))}}),this.element.appendChild(Ft),Ft.activePanel=!1,this.panels.push(Ft);bt(this,this.scroll=="vertical"?Bt.y:Bt.x,0),this.setFocus(0)},nt.extend(nt.ReferenceStrip.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{setFocus:function(Ot){var Rt=this.element.querySelector("#"+this.element.id+"-"+Ot),Dt=nt.getElementSize(this.viewer.canvas),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=-Number(this.element.style.marginLeft.replace("px","")),Jt=-Number(this.element.style.marginTop.replace("px","")),Wt;this.currentSelected!==Rt&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=Rt,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(Wt=Number(Ot)*(this.panelWidth+3),Wt>Yt+Dt.x-this.panelWidth?(Wt=Math.min(Wt,Bt-Dt.x),this.element.style.marginLeft=-Wt+"px",bt(this,Dt.x,-Wt)):Wt<Yt&&(Wt=Math.max(0,Wt-Dt.x/2),this.element.style.marginLeft=-Wt+"px",bt(this,Dt.x,-Wt))):(Wt=Number(Ot)*(this.panelHeight+3),Wt>Jt+Dt.y-this.panelHeight?(Wt=Math.min(Wt,Ft-Dt.y),this.element.style.marginTop=-Wt+"px",bt(this,Dt.y,-Wt)):Wt<Jt&&(Wt=Math.max(0,Wt-Dt.y/2),this.element.style.marginTop=-Wt+"px",bt(this,Dt.y,-Wt))),this.currentPage=Ot,wt.call(this,{eventSource:this.innerTracker}))},update:function(){return rt[this.id].animating?(nt.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var Ot in this.miniViewers)this.miniViewers[Ot].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function it(Ot){var Rt=Number(this.element.style.marginLeft.replace("px","")),Dt=Number(this.element.style.marginTop.replace("px","")),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=nt.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-Ot.delta.x>0?Rt>-(Bt-Yt.x)&&(this.element.style.marginLeft=Rt+Ot.delta.x*2+"px",bt(this,Yt.x,Rt+Ot.delta.x*2)):-Ot.delta.x<0&&Rt<0&&(this.element.style.marginLeft=Rt+Ot.delta.x*2+"px",bt(this,Yt.x,Rt+Ot.delta.x*2)):-Ot.delta.y>0?Dt>-(Ft-Yt.y)&&(this.element.style.marginTop=Dt+Ot.delta.y*2+"px",bt(this,Yt.y,Dt+Ot.delta.y*2)):-Ot.delta.y<0&&Dt<0&&(this.element.style.marginTop=Dt+Ot.delta.y*2+"px",bt(this,Yt.y,Dt+Ot.delta.y*2))),!1}function st(Ot){var Rt=Number(this.element.style.marginLeft.replace("px","")),Dt=Number(this.element.style.marginTop.replace("px","")),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=nt.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?Ot.scroll>0?Rt>-(Bt-Yt.x)&&(this.element.style.marginLeft=Rt-Ot.scroll*60+"px",bt(this,Yt.x,Rt-Ot.scroll*60)):Ot.scroll<0&&Rt<0&&(this.element.style.marginLeft=Rt-Ot.scroll*60+"px",bt(this,Yt.x,Rt-Ot.scroll*60)):Ot.scroll<0?Dt>Yt.y-Ft&&(this.element.style.marginTop=Dt+Ot.scroll*60+"px",bt(this,Yt.y,Dt+Ot.scroll*60)):Ot.scroll>0&&Dt<0&&(this.element.style.marginTop=Dt+Ot.scroll*60+"px",bt(this,Yt.y,Dt+Ot.scroll*60))),!1}function bt(Ot,Rt,Dt){var Bt,Ft,Yt,Jt,Wt,Qt,rn;for(Ot.scroll=="horizontal"?Bt=Ot.panelWidth:Bt=Ot.panelHeight,Ft=Math.ceil(Rt/Bt)+5,Yt=Math.ceil((Math.abs(Dt)+Rt)/Bt)+1,Ft=Yt-Ft,Ft=Ft<0?0:Ft,Qt=Ft;Qt<Yt&&Qt<Ot.panels.length;Qt++)if(rn=Ot.panels[Qt],!rn.activePanel){var sn,on=Ot.viewer.tileSources[Qt];on.referenceStripThumbnailUrl?sn={type:"image",url:on.referenceStripThumbnailUrl}:sn=on,Jt=new nt.Viewer({id:rn.id,tileSources:[sn],element:rn,navigatorSizeRatio:Ot.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:Ot.viewer.loadTilesWithAjax,ajaxHeaders:Ot.viewer.ajaxHeaders,useCanvas:Ot.useCanvas}),Jt.displayRegion=nt.makeNeutralElement("div"),Jt.displayRegion.id=rn.id+"-displayregion",Jt.displayRegion.className="displayregion",Wt=Jt.displayRegion.style,Wt.position="relative",Wt.top="0px",Wt.left="0px",Wt.fontSize="0px",Wt.overflow="hidden",Wt.float="left",Wt.cssFloat="left",Wt.styleFloat="left",Wt.zIndex=999999999,Wt.cursor="default",Wt.width=Ot.panelWidth-4+"px",Wt.height=Ot.panelHeight-4+"px",Jt.displayRegion.innerTracker=new nt.MouseTracker({element:Jt.displayRegion,startDisabled:!0}),rn.getElementsByTagName("div")[0].appendChild(Jt.displayRegion),Ot.miniViewers[rn.id]=Jt,rn.activePanel=!0}}function wt(Ot){var Rt=Ot.eventSource.element;return this.scroll=="horizontal"?Rt.style.marginBottom="0px":Rt.style.marginLeft="0px",!1}function Et(Ot){var Rt=Ot.eventSource.element;return this.scroll=="horizontal"?Rt.style.marginBottom="-"+nt.getElementSize(Rt).y/2+"px":Rt.style.marginLeft="-"+nt.getElementSize(Rt).x/2+"px",!1}function kt(Ot){if(!Ot.preventDefaultAction&&!Ot.ctrl&&!Ot.alt&&!Ot.meta)switch(Ot.keyCode){case 38:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function Lt(Ot){if(!Ot.preventDefaultAction&&!Ot.ctrl&&!Ot.alt&&!Ot.meta)switch(Ot.keyCode){case 61:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(nt){nt.DisplayRect=function(rt,it,st,bt,wt,Et){nt.Rect.apply(this,[rt,it,st,bt]),this.minLevel=wt,this.maxLevel=Et},nt.extend(nt.DisplayRect.prototype,nt.Rect.prototype)}(OpenSeadragon),function(nt){nt.Spring=function(it){var st=arguments;typeof it!="object"&&(it={initial:st.length&&typeof st[0]=="number"?st[0]:void 0,springStiffness:st.length>1?st[1].springStiffness:5,animationTime:st.length>1?st[1].animationTime:1.5}),nt.console.assert(typeof it.springStiffness=="number"&&it.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),nt.console.assert(typeof it.animationTime=="number"&&it.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),it.exponential&&(this._exponential=!0,delete it.exponential),nt.extend(!0,this,it),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:nt.now()},nt.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},nt.Spring.prototype={resetTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=it,this.start.time=this.target.time=this.current.time=nt.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=it,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(it){this.start.value+=it,this.target.value+=it,this._exponential&&(nt.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(it){this._exponential=it,this._exponential&&(nt.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=nt.now();var it,st;this._exponential?(it=this.start._logValue,st=this.target._logValue):(it=this.start.value,st=this.target.value);var bt=this.current.time>=this.target.time?st:it+(st-it)*rt(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),wt=this.current.value;return this._exponential?this.current.value=Math.exp(bt):this.current.value=bt,wt!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function rt(it,st){return(1-Math.exp(it*-st))/(1-Math.exp(-it))}}(OpenSeadragon),function(nt){function rt(st){nt.extend(!0,this,{timeout:nt.DEFAULT_SETTINGS.timeout,jobId:null},st),this.image=null}rt.prototype={errorMsg:null,start:function(){var st=this,bt=this.abort;this.image=new Image,this.image.onload=function(){st.finish(!0)},this.image.onabort=this.image.onerror=function(){st.errorMsg="Image load aborted",st.finish(!1)},this.jobId=window.setTimeout(function(){st.errorMsg="Image load exceeded timeout ("+st.timeout+" ms)",st.finish(!1)},this.timeout),this.loadWithAjax?(this.request=nt.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(wt){var Et;try{Et=new window.Blob([wt.response])}catch(Rt){var kt=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(Rt.name==="TypeError"&&kt){var Lt=new kt;Lt.append(wt.response),Et=Lt.getBlob()}}Et.size===0&&(st.errorMsg="Empty image response.",st.finish(!1));var Ot=(window.URL||window.webkitURL).createObjectURL(Et);st.image.src=Ot},error:function(wt){st.errorMsg="Image load aborted - XHR error",st.finish(!1)}}),this.abort=function(){st.request.abort(),typeof bt=="function"&&bt()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(st){this.image.onload=this.image.onerror=this.image.onabort=null,st||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},nt.ImageLoader=function(st){nt.extend(!0,this,{jobLimit:nt.DEFAULT_SETTINGS.imageLoaderLimit,timeout:nt.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},st)},nt.ImageLoader.prototype={addJob:function(st){var bt=this,wt=function(Lt){it(bt,Lt,st.callback)},Et={src:st.src,loadWithAjax:st.loadWithAjax,ajaxHeaders:st.loadWithAjax?st.ajaxHeaders:null,crossOriginPolicy:st.crossOriginPolicy,ajaxWithCredentials:st.ajaxWithCredentials,callback:wt,abort:st.abort,timeout:this.timeout},kt=new rt(Et);!this.jobLimit||this.jobsInProgress<this.jobLimit?(kt.start(),this.jobsInProgress++):this.jobQueue.push(kt)},clear:function(){for(var st=0;st<this.jobQueue.length;st++){var bt=this.jobQueue[st];typeof bt.abort=="function"&&bt.abort()}this.jobQueue=[]}};function it(st,bt,wt){var Et;st.jobsInProgress--,(!st.jobLimit||st.jobsInProgress<st.jobLimit)&&st.jobQueue.length>0&&(Et=st.jobQueue.shift(),Et.start(),st.jobsInProgress++),wt(bt.image,bt.errorMsg,bt.request)}}(OpenSeadragon),function(nt){nt.Tile=function(rt,it,st,bt,wt,Et,kt,Lt,Ot,Rt){this.level=rt,this.x=it,this.y=st,this.bounds=bt,this.sourceBounds=Rt,this.exists=wt,this.url=Et,this.context2D=kt,this.loadWithAjax=Lt,this.ajaxHeaders=Ot,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},nt.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(rt){if(!this.cacheImageRecord){nt.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=nt.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=rt&&rt.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",nt.setElementOpacity(this.element,this.opacity)},drawCanvas:function(rt,it,st,bt){var wt=this.position.times(nt.pixelDensityRatio),Et=this.size.times(nt.pixelDensityRatio),kt;if(!this.context2D&&!this.cacheImageRecord){nt.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(kt=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!kt){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}rt.save(),rt.globalAlpha=this.opacity,typeof st=="number"&&st!==1&&(wt=wt.times(st),Et=Et.times(st)),bt instanceof nt.Point&&(wt=wt.plus(bt)),rt.globalAlpha===1&&this._hasTransparencyChannel()&&rt.clearRect(wt.x,wt.y,Et.x,Et.y),it({context:rt,tile:this,rendered:kt});var Lt,Ot;this.sourceBounds?(Lt=Math.min(this.sourceBounds.width,kt.canvas.width),Ot=Math.min(this.sourceBounds.height,kt.canvas.height)):(Lt=kt.canvas.width,Ot=kt.canvas.height),rt.drawImage(kt.canvas,0,0,Lt,Ot,wt.x,wt.y,Et.x,Et.y),rt.restore()},getScaleForEdgeSmoothing:function(){var rt;if(this.cacheImageRecord)rt=this.cacheImageRecord.getRenderedContext();else if(this.context2D)rt=this.context2D;else return nt.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return rt.canvas.width/(this.size.x*nt.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(rt,it,st){var bt=Math.max(1,Math.ceil((st.x-it.x)/2)),wt=Math.max(1,Math.ceil((st.y-it.y)/2));return new nt.Point(bt,wt).minus(this.position.times(nt.pixelDensityRatio).times(rt||1).apply(function(Et){return Et%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(nt){nt.OverlayPlacement=nt.Placement,nt.OverlayRotationMode=nt.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),nt.Overlay=function(rt,it,st){var bt;nt.isPlainObject(rt)?bt=rt:bt={element:rt,location:it,placement:st},this.element=bt.element,this.style=bt.element.style,this._init(bt)},nt.Overlay.prototype={_init:function(rt){this.location=rt.location,this.placement=rt.placement===void 0?nt.Placement.TOP_LEFT:rt.placement,this.onDraw=rt.onDraw,this.checkResize=rt.checkResize===void 0?!0:rt.checkResize,this.width=rt.width===void 0?null:rt.width,this.height=rt.height===void 0?null:rt.height,this.rotationMode=rt.rotationMode||nt.OverlayRotationMode.EXACT,this.location instanceof nt.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=nt.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new nt.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(rt,it){var st=nt.Placement.properties[this.placement];!st||(st.isHorizontallyCentered?rt.x-=it.x/2:st.isRight&&(rt.x-=it.x),st.isVerticallyCentered?rt.y-=it.y/2:st.isBottom&&(rt.y-=it.y))},destroy:function(){var rt=this.element,it=this.style;rt.parentNode&&(rt.parentNode.removeChild(rt),rt.prevElementParent&&(it.display="none",document.body.appendChild(rt))),this.onDraw=null,it.top="",it.left="",it.position="",this.width!==null&&(it.width=""),this.height!==null&&(it.height="");var st=nt.getCssPropertyWithVendorPrefix("transformOrigin"),bt=nt.getCssPropertyWithVendorPrefix("transform");st&&bt&&(it[st]="",it[bt]="")},drawHTML:function(rt,it){var st=this.element;st.parentNode!==rt&&(st.prevElementParent=st.parentNode,st.prevNextSibling=st.nextSibling,rt.appendChild(st),this.style.position="absolute",this.size=nt.getElementSize(st));var bt=this._getOverlayPositionAndSize(it),wt=bt.position,Et=this.size=bt.size,kt=bt.rotate;if(this.onDraw)this.onDraw(wt,Et,this.element);else{var Lt=this.style;Lt.left=wt.x+"px",Lt.top=wt.y+"px",this.width!==null&&(Lt.width=Et.x+"px"),this.height!==null&&(Lt.height=Et.y+"px");var Ot=nt.getCssPropertyWithVendorPrefix("transformOrigin"),Rt=nt.getCssPropertyWithVendorPrefix("transform");Ot&&Rt&&(kt?(Lt[Ot]=this._getTransformOrigin(),Lt[Rt]="rotate("+kt+"deg)"):(Lt[Ot]="",Lt[Rt]="")),Lt.display!=="none"&&(Lt.display="block")}},_getOverlayPositionAndSize:function(rt){var it=rt.pixelFromPoint(this.location,!0),st=this._getSizeInPixels(rt);this.adjust(it,st);var bt=0;if(rt.degrees&&this.rotationMode!==nt.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var wt=new nt.Rect(it.x,it.y,st.x,st.y),Et=this._getBoundingBox(wt,rt.degrees);it=Et.getTopLeft(),st=Et.getSize()}else bt=rt.degrees;return{position:it,size:st,rotate:bt}},_getSizeInPixels:function(rt){var it=this.size.x,st=this.size.y;if(this.width!==null||this.height!==null){var bt=rt.deltaPixelsFromPointsNoRotate(new nt.Point(this.width||0,this.height||0),!0);this.width!==null&&(it=bt.x),this.height!==null&&(st=bt.y)}if(this.checkResize&&(this.width===null||this.height===null)){var wt=this.size=nt.getElementSize(this.element);this.width===null&&(it=wt.x),this.height===null&&(st=wt.y)}return new nt.Point(it,st)},_getBoundingBox:function(rt,it){var st=this._getPlacementPoint(rt);return rt.rotate(it,st).getBoundingBox()},_getPlacementPoint:function(rt){var it=new nt.Point(rt.x,rt.y),st=nt.Placement.properties[this.placement];return st&&(st.isHorizontallyCentered?it.x+=rt.width/2:st.isRight&&(it.x+=rt.width),st.isVerticallyCentered?it.y+=rt.height/2:st.isBottom&&(it.y+=rt.height)),it},_getTransformOrigin:function(){var rt="",it=nt.Placement.properties[this.placement];return it&&(it.isLeft?rt="left":it.isRight&&(rt="right"),it.isTop?rt+=" top":it.isBottom&&(rt+=" bottom")),rt},update:function(rt,it){var st=nt.isPlainObject(rt)?rt:{location:rt,placement:it};this._init({location:st.location||this.location,placement:st.placement!==void 0?st.placement:this.placement,onDraw:st.onDraw||this.onDraw,checkResize:st.checkResize||this.checkResize,width:st.width!==void 0?st.width:this.width,height:st.height!==void 0?st.height:this.height,rotationMode:st.rotationMode||this.rotationMode})},getBounds:function(rt){nt.console.assert(rt,"A viewport must now be passed to Overlay.getBounds.");var it=this.width,st=this.height;if(it===null||st===null){var bt=rt.deltaPointsFromPixelsNoRotate(this.size,!0);it===null&&(it=bt.x),st===null&&(st=bt.y)}var wt=this.location.clone();return this.adjust(wt,new nt.Point(it,st)),this._adjustBoundsForRotation(rt,new nt.Rect(wt.x,wt.y,it,st))},_adjustBoundsForRotation:function(rt,it){if(!rt||rt.degrees===0||this.rotationMode===nt.OverlayRotationMode.EXACT)return it;if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return it;var st=this._getOverlayPositionAndSize(rt);return rt.viewerElementToViewportRectangle(new nt.Rect(st.position.x,st.position.y,st.size.x,st.size.y))}return it.rotate(-rt.degrees,this._getPlacementPoint(it))}}}(OpenSeadragon),function(nt){nt.Drawer=function(rt){nt.console.assert(rt.viewer,"[Drawer] options.viewer is required");var it=arguments;if(nt.isPlainObject(rt)||(rt={source:it[0],viewport:it[1],element:it[2]}),nt.console.assert(rt.viewport,"[Drawer] options.viewport is required"),nt.console.assert(rt.element,"[Drawer] options.element is required"),rt.source&&nt.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=rt.viewer,this.viewport=rt.viewport,this.debugGridColor=typeof rt.debugGridColor=="string"?[rt.debugGridColor]:rt.debugGridColor||nt.DEFAULT_SETTINGS.debugGridColor,rt.opacity&&nt.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=nt.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=nt.getElement(rt.element),this.canvas=nt.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var st=this._calculateCanvasSize();this.canvas.width=st.x,this.canvas.height=st.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",nt.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},nt.Drawer.prototype={addOverlay:function(rt,it,st,bt){return nt.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(rt,it,st,bt),this},updateOverlay:function(rt,it,st){return nt.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(rt,it,st),this},removeOverlay:function(rt){return nt.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(rt),this},clearOverlays:function(){return nt.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt,!0);return new nt.Point(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio)},clipWithPolygons:function(rt,it){if(!!this.useCanvas){var st=this._getContext(it);st.beginPath(),rt.forEach(function(bt){bt.forEach(function(wt,Et){st[Et===0?"moveTo":"lineTo"](wt.x,wt.y)})}),st.clip()}},setOpacity:function(rt){nt.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var it=this.viewer.world,st=0;st<it.getItemCount();st++)it.getItemAt(st).setOpacity(rt);return this},getOpacity:function(){nt.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var rt=this.viewer.world,it=0,st=0;st<rt.getItemCount();st++){var bt=rt.getItemAt(st).getOpacity();bt>it&&(it=bt)}return it},needsUpdate:function(){return nt.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return nt.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return nt.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return nt.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var rt=this._calculateCanvasSize();if((this.canvas.width!=rt.x||this.canvas.height!=rt.y)&&(this.canvas.width=rt.x,this.canvas.height=rt.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var it=this._calculateSketchCanvasSize();this.sketchCanvas.width=it.x,this.sketchCanvas.height=it.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(rt,it){if(!!this.useCanvas){var st=this._getContext(rt);if(it)st.clearRect(it.x,it.y,it.width,it.height);else{var bt=st.canvas;st.clearRect(0,0,bt.width,bt.height)}}},viewportToDrawerRectangle:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt.getTopLeft(),!0),st=this.viewport.deltaPixelsFromPointsNoRotate(rt.getSize(),!0);return new nt.Rect(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio,st.x*nt.pixelDensityRatio,st.y*nt.pixelDensityRatio)},drawTile:function(rt,it,st,bt,wt){if(nt.console.assert(rt,"[Drawer.drawTile] tile is required"),nt.console.assert(it,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var Et=this._getContext(st);bt=bt||1,rt.drawCanvas(Et,it,bt,wt)}else rt.drawHTML(this.canvas)},_getContext:function(rt){var it=this.context;if(rt){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var st=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=st.x,this.sketchCanvas.height=st.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var bt=this;this.viewer.addHandler("rotate",function wt(){if(bt.viewport.getRotation()!==0){bt.viewer.removeHandler("rotate",wt);var Et=bt._calculateSketchCanvasSize();bt.sketchCanvas.width=Et.x,bt.sketchCanvas.height=Et.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}it=this.sketchContext}return it},saveContext:function(rt){!this.useCanvas||this._getContext(rt).save()},restoreContext:function(rt){!this.useCanvas||this._getContext(rt).restore()},setClip:function(rt,it){if(!!this.useCanvas){var st=this._getContext(it);st.beginPath(),st.rect(rt.x,rt.y,rt.width,rt.height),st.clip()}},drawRectangle:function(rt,it,st){if(!!this.useCanvas){var bt=this._getContext(st);bt.save(),bt.fillStyle=it,bt.fillRect(rt.x,rt.y,rt.width,rt.height),bt.restore()}},blendSketch:function(rt,it,st,bt){var wt=rt;if(nt.isPlainObject(wt)||(wt={opacity:rt,scale:it,translate:st,compositeOperation:bt}),!(!this.useCanvas||!this.sketchCanvas)){rt=wt.opacity,bt=wt.compositeOperation;var Et=wt.bounds;if(this.context.save(),this.context.globalAlpha=rt,bt&&(this.context.globalCompositeOperation=bt),Et)Et.x<0&&(Et.width+=Et.x,Et.x=0),Et.x+Et.width>this.canvas.width&&(Et.width=this.canvas.width-Et.x),Et.y<0&&(Et.height+=Et.y,Et.y=0),Et.y+Et.height>this.canvas.height&&(Et.height=this.canvas.height-Et.y),this.context.drawImage(this.sketchCanvas,Et.x,Et.y,Et.width,Et.height,Et.x,Et.y,Et.width,Et.height);else{it=wt.scale||1,st=wt.translate;var kt=st instanceof nt.Point?st:new nt.Point(0,0),Lt=0,Ot=0;if(st){var Rt=this.sketchCanvas.width-this.canvas.width,Dt=this.sketchCanvas.height-this.canvas.height;Lt=Math.round(Rt/2),Ot=Math.round(Dt/2)}this.context.drawImage(this.sketchCanvas,kt.x-Lt*it,kt.y-Ot*it,(this.canvas.width+2*Lt)*it,(this.canvas.height+2*Ot)*it,-Lt,-Ot,this.canvas.width+2*Lt,this.canvas.height+2*Ot)}this.context.restore()}},drawDebugInfo:function(rt,it,st,bt){if(!!this.useCanvas){var wt=this.viewer.world.getIndexOfItem(bt)%this.debugGridColor.length,Et=this.context;Et.save(),Et.lineWidth=2*nt.pixelDensityRatio,Et.font="small-caps bold "+13*nt.pixelDensityRatio+"px arial",Et.strokeStyle=this.debugGridColor[wt],Et.fillStyle=this.debugGridColor[wt],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),bt.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:bt.getRotation(!0),point:bt.viewport.pixelFromPointNoRotate(bt._getRotationPoint(!0),!0)}),bt.viewport.degrees===0&&bt.getRotation(!0)%360===0&&bt._drawer.viewer.viewport.getFlip()&&bt._drawer._flip(),Et.strokeRect(rt.position.x*nt.pixelDensityRatio,rt.position.y*nt.pixelDensityRatio,rt.size.x*nt.pixelDensityRatio,rt.size.y*nt.pixelDensityRatio);var kt=(rt.position.x+rt.size.x/2)*nt.pixelDensityRatio,Lt=(rt.position.y+rt.size.y/2)*nt.pixelDensityRatio;Et.translate(kt,Lt),Et.rotate(Math.PI/180*-this.viewport.degrees),Et.translate(-kt,-Lt),rt.x===0&&rt.y===0&&(Et.fillText("Zoom: "+this.viewport.getZoom(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-30)*nt.pixelDensityRatio),Et.fillText("Pan: "+this.viewport.getBounds().toString(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-20)*nt.pixelDensityRatio)),Et.fillText("Level: "+rt.level,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+20)*nt.pixelDensityRatio),Et.fillText("Column: "+rt.x,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+30)*nt.pixelDensityRatio),Et.fillText("Row: "+rt.y,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+40)*nt.pixelDensityRatio),Et.fillText("Order: "+st+" of "+it,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+50)*nt.pixelDensityRatio),Et.fillText("Size: "+rt.size.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+60)*nt.pixelDensityRatio),Et.fillText("Position: "+rt.position.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+70)*nt.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),bt.getRotation(!0)%360!==0&&this._restoreRotationChanges(),bt.viewport.degrees===0&&bt.getRotation(!0)%360===0&&bt._drawer.viewer.viewport.getFlip()&&bt._drawer._flip(),Et.restore()}},debugRect:function(rt){if(this.useCanvas){var it=this.context;it.save(),it.lineWidth=2*nt.pixelDensityRatio,it.strokeStyle=this.debugGridColor[0],it.fillStyle=this.debugGridColor[0],it.strokeRect(rt.x*nt.pixelDensityRatio,rt.y*nt.pixelDensityRatio,rt.width*nt.pixelDensityRatio,rt.height*nt.pixelDensityRatio),it.restore()}},setImageSmoothingEnabled:function(rt){this.useCanvas&&(this._imageSmoothingEnabled=rt,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(rt){rt.msImageSmoothingEnabled=this._imageSmoothingEnabled,rt.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(rt){var it=this._getContext(rt).canvas;return new nt.Point(it.width,it.height)},getCanvasCenter:function(){return new nt.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(rt){var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),st=this._getContext(rt.useSketch);st.save(),st.translate(it.x,it.y),this.viewer.viewport.flipped?(st.rotate(Math.PI/180*-rt.degrees),st.scale(-1,1)):st.rotate(Math.PI/180*rt.degrees),st.translate(-it.x,-it.y)},_flip:function(rt){rt=rt||{};var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),st=this._getContext(rt.useSketch);st.translate(it.x,0),st.scale(-1,1),st.translate(-it.x,0)},_restoreRotationChanges:function(rt){var it=this._getContext(rt);it.restore()},_calculateCanvasSize:function(){var rt=nt.pixelDensityRatio,it=this.viewport.getContainerSize();return{x:Math.round(it.x*rt),y:Math.round(it.y*rt)}},_calculateSketchCanvasSize:function(){var rt=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return rt;var it=Math.ceil(Math.sqrt(rt.x*rt.x+rt.y*rt.y));return{x:it,y:it}}}}(OpenSeadragon),function(nt){nt.Viewport=function(rt){var it=arguments;it.length&&it[0]instanceof nt.Point&&(rt={containerSize:it[0],contentSize:it[1],config:it[2]}),rt.config&&(nt.extend(!0,rt,rt.config),delete rt.config),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt.margins||{}),delete rt.margins,nt.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:nt.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:nt.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:nt.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:nt.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:nt.DEFAULT_SETTINGS.maxZoomLevel,degrees:nt.DEFAULT_SETTINGS.degrees,flipped:nt.DEFAULT_SETTINGS.flipped,homeFillsViewer:nt.DEFAULT_SETTINGS.homeFillsViewer},rt),this._updateContainerInnerSize(),this.centerSpringX=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new nt.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new nt.Rect(0,0,1,1),1),this.goHome(!0),this.update()},nt.Viewport.prototype={resetContentSize:function(rt){return nt.console.assert(rt,"[Viewport.resetContentSize] contentSize is required"),nt.console.assert(rt instanceof nt.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),nt.console.assert(rt.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),nt.console.assert(rt.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new nt.Rect(0,0,1,rt.y/rt.x),rt.x),this},setHomeBounds:function(rt,it){nt.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(rt,it)},_setContentBounds:function(rt,it){nt.console.assert(rt,"[Viewport._setContentBounds] bounds is required"),nt.console.assert(rt instanceof nt.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),nt.console.assert(rt.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),nt.console.assert(rt.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=rt.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(it),this._contentBounds=rt.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(it),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:it,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var rt=this._contentAspectRatio/this.getAspectRatio(),it;return this.homeFillsViewer?it=rt>=1?rt:1:it=rt>=1?1:rt,it/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var rt=this._contentBounds.getCenter(),it=1/this.getHomeZoom(),st=it/this.getAspectRatio();return new nt.Rect(rt.x-it/2,rt.y-st/2,it,st)},goHome:function(rt){return this.viewer&&this.viewer.raiseEvent("home",{immediately:rt}),this.fitBounds(this.getHomeBounds(),rt)},getMinZoom:function(){var rt=this.getHomeZoom(),it=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*rt;return it},getMaxZoom:function(){var rt=this.maxZoomLevel;return rt||(rt=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,rt/=this._contentBounds.width),Math.max(rt,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new nt.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return nt.extend({},this._margins)},setMargins:function(rt){nt.console.assert(nt.type(rt)==="object","[Viewport.setMargins] margins must be an object"),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(rt){return this.getBoundsNoRotate(rt).rotate(-this.getRotation())},getBoundsNoRotate:function(rt){var it=this.getCenter(rt),st=1/this.getZoom(rt),bt=st/this.getAspectRatio();return new nt.Rect(it.x-st/2,it.y-bt/2,st,bt)},getBoundsWithMargins:function(rt){return this.getBoundsNoRotateWithMargins(rt).rotate(-this.getRotation(),this.getCenter(rt))},getBoundsNoRotateWithMargins:function(rt){var it=this.getBoundsNoRotate(rt),st=this._containerInnerSize.x*this.getZoom(rt);return it.x-=this._margins.left/st,it.y-=this._margins.top/st,it.width+=(this._margins.left+this._margins.right)/st,it.height+=(this._margins.top+this._margins.bottom)/st,it},getCenter:function(rt){var it=new nt.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),st=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),bt,wt,Et,kt,Lt,Ot,Rt,Dt;return rt?it:this.zoomPoint?(bt=this.pixelFromPoint(this.zoomPoint,!0),wt=this.getZoom(),Et=1/wt,kt=Et/this.getAspectRatio(),Lt=new nt.Rect(it.x-Et/2,it.y-kt/2,Et,kt),Ot=this._pixelFromPoint(this.zoomPoint,Lt),Rt=Ot.minus(bt),Dt=Rt.divide(this._containerInnerSize.x*wt),st.plus(Dt)):st},getZoom:function(rt){return rt?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(rt){return Math.max(Math.min(rt,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(rt){var it=new nt.Rect(rt.x,rt.y,rt.width,rt.height);if(!this.wrapHorizontal){var st=this.visibilityRatio*it.width,bt=it.x+it.width,wt=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,Et=this._contentBoundsNoRotate.x-bt+st,kt=wt-it.x-st;st>this._contentBoundsNoRotate.width?it.x+=(Et+kt)/2:kt<0?it.x+=kt:Et>0&&(it.x+=Et)}if(!this.wrapVertical){var Lt=this.visibilityRatio*it.height,Ot=it.y+it.height,Rt=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,Dt=this._contentBoundsNoRotate.y-Ot+Lt,Bt=Rt-it.y-Lt;Lt>this._contentBoundsNoRotate.height?it.y+=(Dt+Bt)/2:Bt<0?it.y+=Bt:Dt>0&&(it.y+=Dt)}return it},_raiseConstraintsEvent:function(rt){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:rt})},applyConstraints:function(rt){var it=this.getZoom(),st=this._applyZoomConstraints(it);it!==st&&this.zoomTo(st,this.zoomPoint,rt);var bt=this.getBoundsNoRotate(),wt=this._applyBoundaryConstraints(bt);return this._raiseConstraintsEvent(rt),(bt.x!==wt.x||bt.y!==wt.y||rt)&&this.fitBounds(wt.rotate(-this.getRotation()),rt),this},ensureVisible:function(rt){return this.applyConstraints(rt)},_fitBounds:function(rt,it){it=it||{};var st=it.immediately||!1,bt=it.constraints||!1,wt=this.getAspectRatio(),Et=rt.getCenter(),kt=new nt.Rect(rt.x,rt.y,rt.width,rt.height,rt.degrees+this.getRotation()).getBoundingBox();kt.getAspectRatio()>=wt?kt.height=kt.width/wt:kt.width=kt.height*wt,kt.x=Et.x-kt.width/2,kt.y=Et.y-kt.height/2;var Lt=1/kt.width;if(bt){var Ot=kt.getAspectRatio(),Rt=this._applyZoomConstraints(Lt);Lt!==Rt&&(Lt=Rt,kt.width=1/Lt,kt.x=Et.x-kt.width/2,kt.height=kt.width/Ot,kt.y=Et.y-kt.height/2),kt=this._applyBoundaryConstraints(kt),Et=kt.getCenter(),this._raiseConstraintsEvent(st)}if(st)return this.panTo(Et,!0),this.zoomTo(Lt,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var Dt=this.getBounds(),Bt=this.getZoom();if(Bt===0||Math.abs(Lt/Bt-1)<1e-8)return this.zoomTo(Lt,!0),this.panTo(Et,st);kt=kt.rotate(-this.getRotation());var Ft=kt.getTopLeft().times(Lt).minus(Dt.getTopLeft().times(Bt)).divide(Lt-Bt);return this.zoomTo(Lt,Ft,st)},fitBounds:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!1})},fitBoundsWithConstraints:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!0})},fitVertically:function(rt){var it=new nt.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(it,rt)},fitHorizontally:function(rt){var it=new nt.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(it,rt)},getConstrainedBounds:function(rt){var it,st;return it=this.getBounds(rt),st=this._applyBoundaryConstraints(it),st},panBy:function(rt,it){var st=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(st.plus(rt),it)},panTo:function(rt,it){return it?(this.centerSpringX.resetTo(rt.x),this.centerSpringY.resetTo(rt.y)):(this.centerSpringX.springTo(rt.x),this.centerSpringY.springTo(rt.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:rt,immediately:it}),this},zoomBy:function(rt,it,st){return this.zoomTo(this.zoomSpring.target.value*rt,it,st)},zoomTo:function(rt,it,st){var bt=this;return this.zoomPoint=it instanceof nt.Point&&!isNaN(it.x)&&!isNaN(it.y)?it:null,st?this._adjustCenterSpringsForZoomPoint(function(){bt.zoomSpring.resetTo(rt)}):this.zoomSpring.springTo(rt),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:rt,refPoint:it,immediately:st}),this},setRotation:function(rt){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=nt.positiveModulo(rt,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:rt}),this)},getRotation:function(){return this.degrees},resize:function(rt,it){var st=this.getBoundsNoRotate(),bt=st,wt;return this.containerSize.x=rt.x,this.containerSize.y=rt.y,this._updateContainerInnerSize(),it&&(wt=rt.x/this.containerSize.x,bt.width=st.width*wt,bt.height=bt.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:rt,maintain:it}),this.fitBounds(bt,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new nt.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var rt=this;this._adjustCenterSpringsForZoomPoint(function(){rt.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var it=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,it},_adjustCenterSpringsForZoomPoint:function(rt){if(this.zoomPoint){var it=this.pixelFromPoint(this.zoomPoint,!0);rt();var st=this.pixelFromPoint(this.zoomPoint,!0),bt=st.minus(it),wt=this.deltaPointsFromPixels(bt,!0);this.centerSpringX.shiftBy(wt.x),this.centerSpringY.shiftBy(wt.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else rt()},deltaPixelsFromPointsNoRotate:function(rt,it){return rt.times(this._containerInnerSize.x*this.getZoom(it))},deltaPixelsFromPoints:function(rt,it){return this.deltaPixelsFromPointsNoRotate(rt.rotate(this.getRotation()),it)},deltaPointsFromPixelsNoRotate:function(rt,it){return rt.divide(this._containerInnerSize.x*this.getZoom(it))},deltaPointsFromPixels:function(rt,it){return this.deltaPointsFromPixelsNoRotate(rt,it).rotate(-this.getRotation())},pixelFromPointNoRotate:function(rt,it){return this._pixelFromPointNoRotate(rt,this.getBoundsNoRotate(it))},pixelFromPoint:function(rt,it){return this._pixelFromPoint(rt,this.getBoundsNoRotate(it))},_pixelFromPointNoRotate:function(rt,it){return rt.minus(it.getTopLeft()).times(this._containerInnerSize.x/it.width).plus(new nt.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(rt,it){return this._pixelFromPointNoRotate(rt.rotate(this.getRotation(),this.getCenter(!0)),it)},pointFromPixelNoRotate:function(rt,it){var st=this.getBoundsNoRotate(it);return rt.minus(new nt.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/st.width).plus(st.getTopLeft())},pointFromPixel:function(rt,it){return this.pointFromPixelNoRotate(rt,it).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(rt,it){var st=this._contentBoundsNoRotate.width;return new nt.Point(rt*this._contentSizeNoRotate.x/st,it*this._contentSizeNoRotate.x/st)},viewportToImageCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.viewportToImageCoordinates(rt.x,rt.y);if(this.viewer){var st=this.viewer.world.getItemCount();if(st>1)nt.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(st===1){var bt=this.viewer.world.getItemAt(0);return bt.viewportToImageCoordinates(rt,it,!0)}}return this._viewportToImageDelta(rt-this._contentBoundsNoRotate.x,it-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(rt,it){var st=this._contentBoundsNoRotate.width;return new nt.Point(rt/this._contentSizeNoRotate.x*st,it/this._contentSizeNoRotate.x*st)},imageToViewportCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.imageToViewportCoordinates(rt.x,rt.y);if(this.viewer){var st=this.viewer.world.getItemCount();if(st>1)nt.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(st===1){var bt=this.viewer.world.getItemAt(0);return bt.imageToViewportCoordinates(rt,it,!0)}}var wt=this._imageToViewportDelta(rt,it);return wt.x+=this._contentBoundsNoRotate.x,wt.y+=this._contentBoundsNoRotate.y,wt},imageToViewportRectangle:function(rt,it,st,bt){var wt=rt;if(wt instanceof nt.Rect||(wt=new nt.Rect(rt,it,st,bt)),this.viewer){var Et=this.viewer.world.getItemCount();if(Et>1)nt.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(Et===1){var kt=this.viewer.world.getItemAt(0);return kt.imageToViewportRectangle(rt,it,st,bt,!0)}}var Lt=this.imageToViewportCoordinates(wt.x,wt.y),Ot=this._imageToViewportDelta(wt.width,wt.height);return new nt.Rect(Lt.x,Lt.y,Ot.x,Ot.y,wt.degrees)},viewportToImageRectangle:function(rt,it,st,bt){var wt=rt;if(wt instanceof nt.Rect||(wt=new nt.Rect(rt,it,st,bt)),this.viewer){var Et=this.viewer.world.getItemCount();if(Et>1)nt.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(Et===1){var kt=this.viewer.world.getItemAt(0);return kt.viewportToImageRectangle(rt,it,st,bt,!0)}}var Lt=this.viewportToImageCoordinates(wt.x,wt.y),Ot=this._viewportToImageDelta(wt.width,wt.height);return new nt.Rect(Lt.x,Lt.y,Ot.x,Ot.y,wt.degrees)},viewerElementToImageCoordinates:function(rt){var it=this.pointFromPixel(rt,!0);return this.viewportToImageCoordinates(it)},imageToViewerElementCoordinates:function(rt){var it=this.imageToViewportCoordinates(rt);return this.pixelFromPoint(it,!0)},windowToImageCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(it)},imageToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var it=this.imageToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(rt){return this.pointFromPixel(rt,!0)},viewportToViewerElementCoordinates:function(rt){return this.pixelFromPoint(rt,!0)},viewerElementToViewportRectangle:function(rt){return nt.Rect.fromSummits(this.pointFromPixel(rt.getTopLeft(),!0),this.pointFromPixel(rt.getTopRight(),!0),this.pointFromPixel(rt.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(rt){return nt.Rect.fromSummits(this.pixelFromPoint(rt.getTopLeft(),!0),this.pixelFromPoint(rt.getTopRight(),!0),this.pixelFromPoint(rt.getBottomLeft(),!0))},windowToViewportCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(it)},viewportToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var it=this.viewportToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewportToImageZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(it===1){var st=this.viewer.world.getItemAt(0);return st.viewportToImageZoom(rt)}}var bt=this._contentSizeNoRotate.x,wt=this._containerInnerSize.x,Et=this._contentBoundsNoRotate.width,kt=wt/bt*Et;return rt*kt},imageToViewportZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(it===1){var st=this.viewer.world.getItemAt(0);return st.imageToViewportZoom(rt)}}var bt=this._contentSizeNoRotate.x,wt=this._containerInnerSize.x,Et=this._contentBoundsNoRotate.width,kt=bt/wt/Et;return rt*kt},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(rt){return this.flipped===rt?this:(this.flipped=rt,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:rt}),this)}}}(OpenSeadragon),function(nt){nt.TiledImage=function(Wt){var Qt=this;nt.console.assert(Wt.tileCache,"[TiledImage] options.tileCache is required"),nt.console.assert(Wt.drawer,"[TiledImage] options.drawer is required"),nt.console.assert(Wt.viewer,"[TiledImage] options.viewer is required"),nt.console.assert(Wt.imageLoader,"[TiledImage] options.imageLoader is required"),nt.console.assert(Wt.source,"[TiledImage] options.source is required"),nt.console.assert(!Wt.clip||Wt.clip instanceof nt.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),nt.EventSource.call(this),this._tileCache=Wt.tileCache,delete Wt.tileCache,this._drawer=Wt.drawer,delete Wt.drawer,this._imageLoader=Wt.imageLoader,delete Wt.imageLoader,Wt.clip instanceof nt.Rect&&(this._clip=Wt.clip.clone()),delete Wt.clip;var rn=Wt.x||0;delete Wt.x;var sn=Wt.y||0;delete Wt.y,this.normHeight=Wt.source.dimensions.y/Wt.source.dimensions.x,this.contentAspectX=Wt.source.dimensions.x/Wt.source.dimensions.y;var on=1;Wt.width?(on=Wt.width,delete Wt.width,Wt.height&&(nt.console.error("specifying both width and height to a tiledImage is not supported"),delete Wt.height)):Wt.height&&(on=Wt.height/this.normHeight,delete Wt.height);var hn=Wt.fitBounds;delete Wt.fitBounds;var mn=Wt.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete Wt.fitBoundsPlacement;var Cn=Wt.degrees||0;delete Wt.degrees,nt.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,immediateRender:nt.DEFAULT_SETTINGS.immediateRender,blendTime:nt.DEFAULT_SETTINGS.blendTime,alwaysBlend:nt.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:nt.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:nt.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:nt.DEFAULT_SETTINGS.iOSDevice,debugMode:nt.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:nt.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:nt.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:nt.DEFAULT_SETTINGS.placeholderFillStyle,opacity:nt.DEFAULT_SETTINGS.opacity,preload:nt.DEFAULT_SETTINGS.preload,compositeOperation:nt.DEFAULT_SETTINGS.compositeOperation},Wt),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new nt.Spring({initial:rn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new nt.Spring({initial:sn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new nt.Spring({initial:on,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new nt.Spring({initial:Cn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),hn&&this.fitBounds(hn,mn,!0),this._drawingHandler=function(Tn){Qt.viewer.raiseEvent("tile-drawing",nt.extend({tiledImage:Qt},Tn))}},nt.extend(nt.TiledImage.prototype,nt.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(Wt){Wt!==this._fullyLoaded&&(this._fullyLoaded=Wt,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=nt.now(),this._needsDraw=!0},update:function(){var Wt=this._xSpring.update(),Qt=this._ySpring.update(),rn=this._scaleSpring.update(),sn=this._degreesSpring.update();return Wt||Qt||rn||sn?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(Wt){return this.getBoundsNoRotate(Wt).rotate(this.getRotation(Wt),this._getRotationPoint(Wt))},getBoundsNoRotate:function(Wt){return Wt?new nt.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new nt.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return nt.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(Wt){var Qt=this.getBoundsNoRotate(Wt);if(this._clip){var rn=Wt?this._worldWidthCurrent:this._worldWidthTarget,sn=rn/this.source.dimensions.x,on=this._clip.times(sn);Qt=new nt.Rect(Qt.x+on.x,Qt.y+on.y,on.width,on.height)}return Qt.rotate(this.getRotation(Wt),this._getRotationPoint(Wt))},getContentSize:function(){return new nt.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(Wt,Qt,rn){var sn=rn?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Wt*(this.source.dimensions.x/sn),Qt*(this.source.dimensions.y*this.contentAspectX/sn))},viewportToImageCoordinates:function(Wt,Qt,rn){var sn;return Wt instanceof nt.Point?(rn=Qt,sn=Wt):sn=new nt.Point(Wt,Qt),sn=sn.rotate(-this.getRotation(rn),this._getRotationPoint(rn)),rn?this._viewportToImageDelta(sn.x-this._xSpring.current.value,sn.y-this._ySpring.current.value):this._viewportToImageDelta(sn.x-this._xSpring.target.value,sn.y-this._ySpring.target.value)},_imageToViewportDelta:function(Wt,Qt,rn){var sn=rn?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Wt/this.source.dimensions.x*sn,Qt/this.source.dimensions.y/this.contentAspectX*sn)},imageToViewportCoordinates:function(Wt,Qt,rn){Wt instanceof nt.Point&&(rn=Qt,Qt=Wt.y,Wt=Wt.x);var sn=this._imageToViewportDelta(Wt,Qt);return rn?(sn.x+=this._xSpring.current.value,sn.y+=this._ySpring.current.value):(sn.x+=this._xSpring.target.value,sn.y+=this._ySpring.target.value),sn.rotate(this.getRotation(rn),this._getRotationPoint(rn))},imageToViewportRectangle:function(Wt,Qt,rn,sn,on){var hn=Wt;hn instanceof nt.Rect?on=Qt:hn=new nt.Rect(Wt,Qt,rn,sn);var mn=this.imageToViewportCoordinates(hn.getTopLeft(),on),Cn=this._imageToViewportDelta(hn.width,hn.height,on);return new nt.Rect(mn.x,mn.y,Cn.x,Cn.y,hn.degrees+this.getRotation(on))},viewportToImageRectangle:function(Wt,Qt,rn,sn,on){var hn=Wt;Wt instanceof nt.Rect?on=Qt:hn=new nt.Rect(Wt,Qt,rn,sn);var mn=this.viewportToImageCoordinates(hn.getTopLeft(),on),Cn=this._viewportToImageDelta(hn.width,hn.height,on);return new nt.Rect(mn.x,mn.y,Cn.x,Cn.y,hn.degrees-this.getRotation(on))},viewerElementToImageCoordinates:function(Wt){var Qt=this.viewport.pointFromPixel(Wt,!0);return this.viewportToImageCoordinates(Qt)},imageToViewerElementCoordinates:function(Wt){var Qt=this.imageToViewportCoordinates(Wt);return this.viewport.pixelFromPoint(Qt,!0)},windowToImageCoordinates:function(Wt){var Qt=Wt.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Qt)},imageToWindowCoordinates:function(Wt){var Qt=this.imageToViewerElementCoordinates(Wt);return Qt.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(Wt){var Qt=this._scaleSpring.current.value;return Wt=Wt.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new nt.Rect((Wt.x-this._xSpring.current.value)/Qt,(Wt.y-this._ySpring.current.value)/Qt,Wt.width/Qt,Wt.height/Qt,Wt.degrees)},viewportToImageZoom:function(Wt){var Qt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Qt*Wt},imageToViewportZoom:function(Wt){var Qt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Wt/Qt},setPosition:function(Wt,Qt){var rn=this._xSpring.target.value===Wt.x&&this._ySpring.target.value===Wt.y;if(Qt){if(rn&&this._xSpring.current.value===Wt.x&&this._ySpring.current.value===Wt.y)return;this._xSpring.resetTo(Wt.x),this._ySpring.resetTo(Wt.y),this._needsDraw=!0}else{if(rn)return;this._xSpring.springTo(Wt.x),this._ySpring.springTo(Wt.y),this._needsDraw=!0}rn||this._raiseBoundsChange()},setWidth:function(Wt,Qt){this._setScale(Wt,Qt)},setHeight:function(Wt,Qt){this._setScale(Wt/this.normHeight,Qt)},setCroppingPolygons:function(Wt){var Qt=function(sn){return sn instanceof nt.Point||typeof sn.x=="number"&&typeof sn.y=="number"},rn=function(sn){return sn.map(function(on){try{if(Qt(on))return{x:on.x,y:on.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!nt.isArray(Wt))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=Wt.map(function(sn){return rn(sn)})}catch(sn){nt.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),nt.console.error(sn),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(Wt,Qt,rn){Qt=Qt||nt.Placement.CENTER;var sn=nt.Placement.properties[Qt],on=this.contentAspectX,hn=0,mn=0,Cn=1,Tn=1;if(this._clip&&(on=this._clip.getAspectRatio(),Cn=this._clip.width/this.source.dimensions.x,Tn=this._clip.height/this.source.dimensions.y,Wt.getAspectRatio()>on?(hn=this._clip.x/this._clip.height*Wt.height,mn=this._clip.y/this._clip.height*Wt.height):(hn=this._clip.x/this._clip.width*Wt.width,mn=this._clip.y/this._clip.width*Wt.width)),Wt.getAspectRatio()>on){var kn=Wt.height/Tn,In=0;sn.isHorizontallyCentered?In=(Wt.width-Wt.height*on)/2:sn.isRight&&(In=Wt.width-Wt.height*on),this.setPosition(new nt.Point(Wt.x-hn+In,Wt.y-mn),rn),this.setHeight(kn,rn)}else{var Ln=Wt.width/Cn,pn=0;sn.isVerticallyCentered?pn=(Wt.height-Wt.width/on)/2:sn.isBottom&&(pn=Wt.height-Wt.width/on),this.setPosition(new nt.Point(Wt.x-hn,Wt.y-mn+pn),rn),this.setWidth(Ln,rn)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(Wt){nt.console.assert(!Wt||Wt instanceof nt.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),Wt instanceof nt.Rect?this._clip=Wt.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(Wt){Wt!==this.opacity&&(this.opacity=Wt,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(Wt){this._preload=!!Wt,this._needsDraw=!0},getRotation:function(Wt){return Wt?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(Wt,Qt){this._degreesSpring.target.value===Wt&&this._degreesSpring.isAtTargetValue()||(Qt?this._degreesSpring.resetTo(Wt):this._degreesSpring.springTo(Wt),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(Wt){return this.getBoundsNoRotate(Wt).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(Wt){Wt!==this.compositeOperation&&(this.compositeOperation=Wt,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(Wt,Qt){var rn=this._scaleSpring.target.value===Wt;if(Qt){if(rn&&this._scaleSpring.current.value===Wt)return;this._scaleSpring.resetTo(Wt),this._updateForScale(),this._needsDraw=!0}else{if(rn)return;this._scaleSpring.springTo(Wt),this._updateForScale(),this._needsDraw=!0}rn||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var Wt=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),Qt=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,rn=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(Qt/this.minPixelRatio)/Math.log(2))));return rn=Math.max(rn,this.source.minLevel||0),Wt=Math.min(Wt,rn),{lowestLevel:Wt,highestLevel:rn}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var Wt=this.lastDrawn.pop();Wt.beingDrawn=!1}var Qt=this.viewport,rn=this._viewportToTiledImageRectangle(Qt.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var sn=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(rn=rn.intersection(sn),rn===null)return}for(var on=this._getLevelsInterval(),hn=on.lowestLevel,mn=on.highestLevel,Cn=null,Tn=!1,kn=nt.now(),In=mn;In>=hn;In--){var Ln=!1,pn=Qt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(In),!0).x*this._scaleSpring.current.value;if(In===hn||!Tn&&pn>=this.minPixelRatio)Ln=!0,Tn=!0;else if(!Tn)continue;var Hn=Qt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(In),!1).x*this._scaleSpring.current.value,yn=Qt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,mr=this.immediateRender?1:yn,vn=Math.min(1,(pn-.5)/.5),yr=mr/Math.abs(mr-Hn);if(Cn=rt(this,Tn,Ln,In,vn,yr,rn,kn,Cn),Ot(this.coverage,In))break}Yt(this,this.lastDrawn),Cn&&!Cn.context2D?(bt(this,Cn,kn),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(Wt,Qt,rn){var sn,on;this.wrapHorizontal?(sn=nt.positiveModulo(Qt.x,1),on=nt.positiveModulo(rn.x,1)):(sn=Math.max(0,Qt.x),on=Math.min(1,rn.x));var hn,mn,Cn=1/this.source.aspectRatio;this.wrapVertical?(hn=nt.positiveModulo(Qt.y,Cn),mn=nt.positiveModulo(rn.y,Cn)):(hn=Math.max(0,Qt.y),mn=Math.min(Cn,rn.y));var Tn=this.source.getTileAtPoint(Wt,new nt.Point(sn,hn)),kn=this.source.getTileAtPoint(Wt,new nt.Point(on,mn)),In=this.source.getNumTiles(Wt);return this.wrapHorizontal&&(Tn.x+=In.x*Math.floor(Qt.x),kn.x+=In.x*Math.floor(rn.x)),this.wrapVertical&&(Tn.y+=In.y*Math.floor(Qt.y/Cn),kn.y+=In.y*Math.floor(rn.y/Cn)),{topLeft:Tn,bottomRight:kn}}});function rt(Wt,Qt,rn,sn,on,hn,mn,Cn,Tn){var kn=mn.getBoundingBox().getTopLeft(),In=mn.getBoundingBox().getBottomRight();Wt.viewer&&Wt.viewer.raiseEvent("update-level",{tiledImage:Wt,havedrawn:Qt,level:sn,opacity:on,visibility:hn,drawArea:mn,topleft:kn,bottomright:In,currenttime:Cn,best:Tn}),Bt(Wt.coverage,sn),Bt(Wt.loadingCoverage,sn);for(var Ln=Wt._getCornerTiles(sn,kn,In),pn=Ln.topLeft,Hn=Ln.bottomRight,yn=Wt.source.getNumTiles(sn),mr=Wt.viewport.pixelFromPoint(Wt.viewport.getCenter()),vn=pn.x;vn<=Hn.x;vn++)for(var yr=pn.y;yr<=Hn.y;yr++){if(!Wt.wrapHorizontal&&!Wt.wrapVertical){var Tr=Wt.source.getTileBounds(sn,vn,yr);if(mn.intersection(Tr)===null)continue}Tn=it(Wt,rn,Qt,vn,yr,sn,on,hn,mr,yn,Cn,Tn)}return Tn}function it(Wt,Qt,rn,sn,on,hn,mn,Cn,Tn,kn,In,Ln){var pn=st(sn,on,hn,Wt,Wt.source,Wt.tilesMatrix,In,kn,Wt._worldWidthCurrent,Wt._worldHeightCurrent),Hn=rn;Wt.viewer&&Wt.viewer.raiseEvent("update-tile",{tiledImage:Wt,tile:pn}),Dt(Wt.coverage,hn,sn,on,!1);var yn=pn.loaded||pn.loading||Rt(Wt.loadingCoverage,hn,sn,on);if(Dt(Wt.loadingCoverage,hn,sn,on,yn),!pn.exists||(Qt&&!Hn&&(Rt(Wt.coverage,hn,sn,on)?Dt(Wt.coverage,hn,sn,on,!0):Hn=!0),!Hn))return Ln;if(kt(pn,Wt.source.tileOverlap,Wt.viewport,Tn,Cn,Wt),!pn.loaded)if(pn.context2D)Et(Wt,pn);else{var mr=Wt._tileCache.getImageRecord(pn.cacheKey);if(mr){var vn=mr.getImage();Et(Wt,pn,vn)}}if(pn.loaded){var yr=Lt(Wt,pn,sn,on,hn,mn,In);yr&&(Wt._needsDraw=!0)}else pn.loading?Wt._tilesLoading++:yn||(Ln=Ft(Ln,pn));return Ln}function st(Wt,Qt,rn,sn,on,hn,mn,Cn,Tn,kn){var In,Ln,pn,Hn,yn,mr,vn,yr,Tr;return hn[rn]||(hn[rn]={}),hn[rn][Wt]||(hn[rn][Wt]={}),hn[rn][Wt][Qt]||(In=(Cn.x+Wt%Cn.x)%Cn.x,Ln=(Cn.y+Qt%Cn.y)%Cn.y,pn=on.getTileBounds(rn,In,Ln),Hn=on.getTileBounds(rn,In,Ln,!0),yn=on.tileExists(rn,In,Ln),mr=on.getTileUrl(rn,In,Ln),sn.loadTilesWithAjax?(vn=on.getTileAjaxHeaders(rn,In,Ln),nt.isPlainObject(sn.ajaxHeaders)&&(vn=nt.extend({},sn.ajaxHeaders,vn))):vn=null,yr=on.getContext2D?on.getContext2D(rn,In,Ln):void 0,pn.x+=(Wt-In)/Cn.x,pn.y+=kn/Tn*((Qt-Ln)/Cn.y),Tr=new nt.Tile(rn,Wt,Qt,pn,yn,mr,yr,sn.loadTilesWithAjax,vn,Hn),In===Cn.x-1&&(Tr.isRightMost=!0),Ln===Cn.y-1&&(Tr.isBottomMost=!0),hn[rn][Wt][Qt]=Tr),Tr=hn[rn][Wt][Qt],Tr.lastTouchTime=mn,Tr}function bt(Wt,Qt,rn){Qt.loading=!0,Wt._imageLoader.addJob({src:Qt.url,loadWithAjax:Qt.loadWithAjax,ajaxHeaders:Qt.ajaxHeaders,crossOriginPolicy:Wt.crossOriginPolicy,ajaxWithCredentials:Wt.ajaxWithCredentials,callback:function(sn,on,hn){wt(Wt,Qt,rn,sn,on,hn)},abort:function(){Qt.loading=!1}})}function wt(Wt,Qt,rn,sn,on,hn){if(!sn){nt.console.log("Tile %s failed to load: %s - error: %s",Qt,Qt.url,on),Wt.viewer.raiseEvent("tile-load-failed",{tile:Qt,tiledImage:Wt,time:rn,message:on,tileRequest:hn}),Qt.loading=!1,Qt.exists=!1;return}if(rn<Wt.lastResetTime){nt.console.log("Ignoring tile %s loaded before reset: %s",Qt,Qt.url),Qt.loading=!1;return}var mn=function(){var Cn=Wt.source.getClosestLevel();Et(Wt,Qt,sn,Cn,hn)};Wt._midDraw?window.setTimeout(mn,1):mn()}function Et(Wt,Qt,rn,sn,on){var hn=0;function mn(){return hn++,Cn}function Cn(){hn--,hn===0&&(Qt.loading=!1,Qt.loaded=!0,Qt.context2D||Wt._tileCache.cacheTile({image:rn,tile:Qt,cutoff:sn,tiledImage:Wt}),Wt._needsDraw=!0)}Wt.viewer.raiseEvent("tile-loaded",{tile:Qt,tiledImage:Wt,tileRequest:on,image:rn,getCompletionCallback:mn}),mn()()}function kt(Wt,Qt,rn,sn,on,hn){var mn=Wt.bounds.getTopLeft();mn.x*=hn._scaleSpring.current.value,mn.y*=hn._scaleSpring.current.value,mn.x+=hn._xSpring.current.value,mn.y+=hn._ySpring.current.value;var Cn=Wt.bounds.getSize();Cn.x*=hn._scaleSpring.current.value,Cn.y*=hn._scaleSpring.current.value;var Tn=rn.pixelFromPointNoRotate(mn,!0),kn=rn.pixelFromPointNoRotate(mn,!1),In=rn.deltaPixelsFromPointsNoRotate(Cn,!0),Ln=rn.deltaPixelsFromPointsNoRotate(Cn,!1),pn=kn.plus(Ln.divide(2)),Hn=sn.squaredDistanceTo(pn);Qt||(In=In.plus(new nt.Point(1,1))),Wt.isRightMost&&hn.wrapHorizontal&&(In.x+=.75),Wt.isBottomMost&&hn.wrapVertical&&(In.y+=.75),Wt.position=Tn,Wt.size=In,Wt.squaredDistance=Hn,Wt.visibility=on}function Lt(Wt,Qt,rn,sn,on,hn,mn){var Cn=1e3*Wt.blendTime,Tn,kn;if(Qt.blendStart||(Qt.blendStart=mn),Tn=mn-Qt.blendStart,kn=Cn?Math.min(1,Tn/Cn):1,Wt.alwaysBlend&&(kn*=hn),Qt.opacity=kn,Wt.lastDrawn.push(Qt),kn===1)Dt(Wt.coverage,on,rn,sn,!0),Wt._hasOpaqueTile=!0;else if(Tn<Cn)return!0;return!1}function Ot(Wt,Qt,rn,sn){var on,hn,mn,Cn;if(!Wt[Qt])return!1;if(rn===void 0||sn===void 0){on=Wt[Qt];for(mn in on)if(Object.prototype.hasOwnProperty.call(on,mn)){hn=on[mn];for(Cn in hn)if(Object.prototype.hasOwnProperty.call(hn,Cn)&&!hn[Cn])return!1}return!0}return Wt[Qt][rn]===void 0||Wt[Qt][rn][sn]===void 0||Wt[Qt][rn][sn]===!0}function Rt(Wt,Qt,rn,sn){return rn===void 0||sn===void 0?Ot(Wt,Qt+1):Ot(Wt,Qt+1,2*rn,2*sn)&&Ot(Wt,Qt+1,2*rn,2*sn+1)&&Ot(Wt,Qt+1,2*rn+1,2*sn)&&Ot(Wt,Qt+1,2*rn+1,2*sn+1)}function Dt(Wt,Qt,rn,sn,on){if(!Wt[Qt]){nt.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",Qt);return}Wt[Qt][rn]||(Wt[Qt][rn]={}),Wt[Qt][rn][sn]=on}function Bt(Wt,Qt){Wt[Qt]={}}function Ft(Wt,Qt){return!Wt||Qt.visibility>Wt.visibility||Qt.visibility==Wt.visibility&&Qt.squaredDistance<Wt.squaredDistance?Qt:Wt}function Yt(Wt,Qt){if(!(Wt.opacity===0||Qt.length===0&&!Wt.placeholderFillStyle)){var rn=Qt[0],sn;rn&&(sn=Wt.opacity<1||Wt.compositeOperation&&Wt.compositeOperation!=="source-over"||!Wt._isBottomItem()&&rn._hasTransparencyChannel());var on,hn,mn=Wt.viewport.getZoom(!0),Cn=Wt.viewportToImageZoom(mn);Qt.length>1&&Cn>Wt.smoothTileEdgesMinZoom&&!Wt.iOSDevice&&Wt.getRotation(!0)%360===0&&nt.supportsCanvas&&(sn=!0,on=rn.getScaleForEdgeSmoothing(),hn=rn.getTranslationForEdgeSmoothing(on,Wt._drawer.getCanvasSize(!1),Wt._drawer.getCanvasSize(!0)));var Tn;sn&&(on||(Tn=Wt.viewport.viewportToViewerElementRectangle(Wt.getClippedBounds(!0)).getIntegerBoundingBox(),Wt._drawer.viewer.viewport.getFlip()&&(Wt.viewport.degrees!==0||Wt.getRotation(!0)%360!==0)&&(Tn.x=Wt._drawer.viewer.container.clientWidth-(Tn.x+Tn.width)),Tn=Tn.times(nt.pixelDensityRatio)),Wt._drawer._clear(!0,Tn)),on||(Wt.viewport.degrees!==0&&Wt._drawer._offsetForRotation({degrees:Wt.viewport.degrees,useSketch:sn}),Wt.getRotation(!0)%360!==0&&Wt._drawer._offsetForRotation({degrees:Wt.getRotation(!0),point:Wt.viewport.pixelFromPointNoRotate(Wt._getRotationPoint(!0),!0),useSketch:sn}),Wt.viewport.degrees===0&&Wt.getRotation(!0)%360===0&&Wt._drawer.viewer.viewport.getFlip()&&Wt._drawer._flip());var kn=!1;if(Wt._clip){Wt._drawer.saveContext(sn);var In=Wt.imageToViewportRectangle(Wt._clip,!0);In=In.rotate(-Wt.getRotation(!0),Wt._getRotationPoint(!0));var Ln=Wt._drawer.viewportToDrawerRectangle(In);on&&(Ln=Ln.times(on)),hn&&(Ln=Ln.translate(hn)),Wt._drawer.setClip(Ln,sn),kn=!0}if(Wt._croppingPolygons){Wt._drawer.saveContext(sn);try{var pn=Wt._croppingPolygons.map(function(vn){return vn.map(function(yr){var Tr=Wt.imageToViewportCoordinates(yr.x,yr.y,!0).rotate(-Wt.getRotation(!0),Wt._getRotationPoint(!0)),Mr=Wt._drawer.viewportCoordToDrawerCoord(Tr);return on&&(Mr=Mr.times(on)),Mr})});Wt._drawer.clipWithPolygons(pn,sn)}catch(vn){nt.console.error(vn)}kn=!0}if(Wt.placeholderFillStyle&&Wt._hasOpaqueTile===!1){var Hn=Wt._drawer.viewportToDrawerRectangle(Wt.getBounds(!0));on&&(Hn=Hn.times(on)),hn&&(Hn=Hn.translate(hn));var yn=null;typeof Wt.placeholderFillStyle=="function"?yn=Wt.placeholderFillStyle(Wt,Wt._drawer.context):yn=Wt.placeholderFillStyle,Wt._drawer.drawRectangle(Hn,yn,sn)}for(var mr=Qt.length-1;mr>=0;mr--)rn=Qt[mr],Wt._drawer.drawTile(rn,Wt._drawingHandler,sn,on,hn),rn.beingDrawn=!0,Wt.viewer&&Wt.viewer.raiseEvent("tile-drawn",{tiledImage:Wt,tile:rn});kn&&Wt._drawer.restoreContext(sn),on||(Wt.getRotation(!0)%360!==0&&Wt._drawer._restoreRotationChanges(sn),Wt.viewport.degrees!==0&&Wt._drawer._restoreRotationChanges(sn)),sn&&(on&&(Wt.viewport.degrees!==0&&Wt._drawer._offsetForRotation({degrees:Wt.viewport.degrees,useSketch:!1}),Wt.getRotation(!0)%360!==0&&Wt._drawer._offsetForRotation({degrees:Wt.getRotation(!0),point:Wt.viewport.pixelFromPointNoRotate(Wt._getRotationPoint(!0),!0),useSketch:!1})),Wt._drawer.blendSketch({opacity:Wt.opacity,scale:on,translate:hn,compositeOperation:Wt.compositeOperation,bounds:Tn}),on&&(Wt.getRotation(!0)%360!==0&&Wt._drawer._restoreRotationChanges(!1),Wt.viewport.degrees!==0&&Wt._drawer._restoreRotationChanges(!1))),on||Wt.viewport.degrees===0&&Wt.getRotation(!0)%360===0&&Wt._drawer.viewer.viewport.getFlip()&&Wt._drawer._flip(),Jt(Wt,Qt)}}function Jt(Wt,Qt){if(Wt.debugMode)for(var rn=Qt.length-1;rn>=0;rn--){var sn=Qt[rn];try{Wt._drawer.drawDebugInfo(sn,Qt.length,rn,Wt)}catch(on){nt.console.error(on)}}}}(OpenSeadragon),function(nt){var rt=function(st){nt.console.assert(st,"[TileCache.cacheTile] options is required"),nt.console.assert(st.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(st.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=st.tile,this.tiledImage=st.tiledImage},it=function(st){nt.console.assert(st,"[ImageRecord] options is required"),nt.console.assert(st.image,"[ImageRecord] options.image is required"),this._image=st.image,this._tiles=[]};it.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var st=document.createElement("canvas");st.width=this._image.width,st.height=this._image.height,this._renderedContext=st.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(st){nt.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=st},addTile:function(st){nt.console.assert(st,"[ImageRecord.addTile] tile is required"),this._tiles.push(st)},removeTile:function(st){for(var bt=0;bt<this._tiles.length;bt++)if(this._tiles[bt]===st){this._tiles.splice(bt,1);return}nt.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",st)},getTileCount:function(){return this._tiles.length}},nt.TileCache=function(st){st=st||{},this._maxImageCacheCount=st.maxImageCacheCount||nt.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},nt.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(st){nt.console.assert(st,"[TileCache.cacheTile] options is required"),nt.console.assert(st.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(st.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),nt.console.assert(st.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var bt=st.cutoff||0,wt=this._tilesLoaded.length,Et=this._imagesLoaded[st.tile.cacheKey];if(Et||(nt.console.assert(st.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),Et=this._imagesLoaded[st.tile.cacheKey]=new it({image:st.image}),this._imagesLoadedCount++),Et.addTile(st.tile),st.tile.cacheImageRecord=Et,this._imagesLoadedCount>this._maxImageCacheCount){for(var kt=null,Lt=-1,Ot=null,Rt,Dt,Bt,Ft,Yt,Jt,Wt=this._tilesLoaded.length-1;Wt>=0;Wt--)if(Jt=this._tilesLoaded[Wt],Rt=Jt.tile,!(Rt.level<=bt||Rt.beingDrawn)){if(!kt){kt=Rt,Lt=Wt,Ot=Jt;continue}Ft=Rt.lastTouchTime,Dt=kt.lastTouchTime,Yt=Rt.level,Bt=kt.level,(Ft<Dt||Ft==Dt&&Yt>Bt)&&(kt=Rt,Lt=Wt,Ot=Jt)}kt&&Lt>=0&&(this._unloadTile(Ot),wt=Lt)}this._tilesLoaded[wt]=new rt({tile:st.tile,tiledImage:st.tiledImage})},clearTilesFor:function(st){nt.console.assert(st,"[TileCache.clearTilesFor] tiledImage is required");for(var bt,wt=0;wt<this._tilesLoaded.length;++wt)bt=this._tilesLoaded[wt],bt.tiledImage===st&&(this._unloadTile(bt),this._tilesLoaded.splice(wt,1),wt--)},getImageRecord:function(st){return nt.console.assert(st,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[st]},_unloadTile:function(st){nt.console.assert(st,"[TileCache._unloadTile] tileRecord is required");var bt=st.tile,wt=st.tiledImage;bt.unload(),bt.cacheImageRecord=null;var Et=this._imagesLoaded[bt.cacheKey];Et.removeTile(bt),Et.getTileCount()||(Et.destroy(),delete this._imagesLoaded[bt.cacheKey],this._imagesLoadedCount--),wt.viewer.raiseEvent("tile-unloaded",{tile:bt,tiledImage:wt})}}}(OpenSeadragon),function(nt){nt.World=function(rt){var it=this;nt.console.assert(rt.viewer,"[World] options.viewer is required"),nt.EventSource.call(this),this.viewer=rt.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(st){it._autoRefigureSizes?it._figureSizes():it._needsSizesFigured=!0},this._figureSizes()},nt.extend(nt.World.prototype,nt.EventSource.prototype,{addItem:function(rt,it){if(nt.console.assert(rt,"[World.addItem] item is required"),nt.console.assert(rt instanceof nt.TiledImage,"[World.addItem] only TiledImages supported at this time"),it=it||{},it.index!==void 0){var st=Math.max(0,Math.min(this._items.length,it.index));this._items.splice(st,0,rt)}else this._items.push(rt);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,rt.addHandler("bounds-change",this._delegatedFigureSizes),rt.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:rt})},getItemAt:function(rt){return nt.console.assert(rt!==void 0,"[World.getItemAt] index is required"),this._items[rt]},getIndexOfItem:function(rt){return nt.console.assert(rt,"[World.getIndexOfItem] item is required"),nt.indexOf(this._items,rt)},getItemCount:function(){return this._items.length},setItemIndex:function(rt,it){nt.console.assert(rt,"[World.setItemIndex] item is required"),nt.console.assert(it!==void 0,"[World.setItemIndex] index is required");var st=this.getIndexOfItem(rt);if(it>=this._items.length)throw new Error("Index bigger than number of layers.");it===st||st===-1||(this._items.splice(st,1),this._items.splice(it,0,rt),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:rt,previousIndex:st,newIndex:it}))},removeItem:function(rt){nt.console.assert(rt,"[World.removeItem] item is required");var it=nt.indexOf(this._items,rt);it!==-1&&(rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy(),this._items.splice(it,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(rt))},removeAll:function(){this.viewer._cancelPendingImages();var rt,it;for(it=0;it<this._items.length;it++)rt=this._items[it],rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy();var st=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,it=0;it<st.length;it++)rt=st[it],this._raiseRemoveItem(rt)},resetItems:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].reset()},update:function(){for(var rt=!1,it=0;it<this._items.length;it++)rt=this._items[it].update()||rt;return rt},draw:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].draw();this._needsDraw=!1},needsDraw:function(){for(var rt=0;rt<this._items.length;rt++)if(this._items[rt].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(rt){this._autoRefigureSizes=rt,rt&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(rt){rt=rt||{};var it=rt.immediately||!1,st=rt.layout||nt.DEFAULT_SETTINGS.collectionLayout,bt=rt.rows||nt.DEFAULT_SETTINGS.collectionRows,wt=rt.columns||nt.DEFAULT_SETTINGS.collectionColumns,Et=rt.tileSize||nt.DEFAULT_SETTINGS.collectionTileSize,kt=rt.tileMargin||nt.DEFAULT_SETTINGS.collectionTileMargin,Lt=Et+kt,Ot;!rt.rows&&wt?Ot=wt:Ot=Math.ceil(this._items.length/bt);var Rt=0,Dt=0,Bt,Ft,Yt,Jt,Wt;this.setAutoRefigureSizes(!1);for(var Qt=0;Qt<this._items.length;Qt++)Qt&&Qt%Ot===0&&(st==="horizontal"?(Dt+=Lt,Rt=0):(Rt+=Lt,Dt=0)),Bt=this._items[Qt],Ft=Bt.getBounds(),Ft.width>Ft.height?Yt=Et:Yt=Et*(Ft.width/Ft.height),Jt=Yt*(Ft.height/Ft.width),Wt=new nt.Point(Rt+(Et-Yt)/2,Dt+(Et-Jt)/2),Bt.setPosition(Wt,it),Bt.setWidth(Yt,it),st==="horizontal"?Rt+=Lt:Dt+=Lt;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var rt=this._homeBounds?this._homeBounds.clone():null,it=this._contentSize?this._contentSize.clone():null,st=this._contentFactor||0;if(!this._items.length)this._homeBounds=new nt.Rect(0,0,1,1),this._contentSize=new nt.Point(1,1),this._contentFactor=1;else{var bt=this._items[0],wt=bt.getBounds();this._contentFactor=bt.getContentSize().x/wt.width;for(var Et=bt.getClippedBounds().getBoundingBox(),kt=Et.x,Lt=Et.y,Ot=Et.x+Et.width,Rt=Et.y+Et.height,Dt=1;Dt<this._items.length;Dt++)bt=this._items[Dt],wt=bt.getBounds(),this._contentFactor=Math.max(this._contentFactor,bt.getContentSize().x/wt.width),Et=bt.getClippedBounds().getBoundingBox(),kt=Math.min(kt,Et.x),Lt=Math.min(Lt,Et.y),Ot=Math.max(Ot,Et.x+Et.width),Rt=Math.max(Rt,Et.y+Et.height);this._homeBounds=new nt.Rect(kt,Lt,Ot-kt,Rt-Lt),this._contentSize=new nt.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==st||!this._homeBounds.equals(rt)||!this._contentSize.equals(it))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(rt){this.raiseEvent("remove-item",{item:rt})}})}(OpenSeadragon)}(openseadragon)),openseadragon.exports}var openseadragonExports=requireOpenseadragon(),openseadragonViewerinputhook={exports:{}};/*! @openseadragon-imaging/openseadragon-viewerinputhook 2.2.1 ab9b394 (clean)  @license MIT */(function(nt,rt){(function(it,st){nt.exports=st(requireOpenseadragon())})(window,function(it){return function(st){function bt(Et){if(wt[Et])return wt[Et].exports;var kt=wt[Et]={i:Et,l:!1,exports:{}};return st[Et].call(kt.exports,kt,kt.exports,bt),kt.l=!0,kt.exports}var wt={};return bt.m=st,bt.c=wt,bt.d=function(Et,kt,Lt){bt.o(Et,kt)||Object.defineProperty(Et,kt,{enumerable:!0,get:Lt})},bt.r=function(Et){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Et,"__esModule",{value:!0})},bt.t=function(Et,kt){if(1&kt&&(Et=bt(Et)),8&kt||4&kt&&typeof Et=="object"&&Et&&Et.__esModule)return Et;var Lt=Object.create(null);if(bt.r(Lt),Object.defineProperty(Lt,"default",{enumerable:!0,value:Et}),2&kt&&typeof Et!="string")for(var Ot in Et)bt.d(Lt,Ot,function(Rt){return Et[Rt]}.bind(null,Ot));return Lt},bt.n=function(Et){var kt=Et&&Et.__esModule?function(){return Et.default}:function(){return Et};return bt.d(kt,"a",kt),kt},bt.o=function(Et,kt){return Object.prototype.hasOwnProperty.call(Et,kt)},bt.p="",bt(bt.s=1)}([function(st){st.exports=it},function(st,bt,wt){wt.r(bt);var Et=wt(0),kt=wt.n(Et);bt.default=function(Lt,Ot){if(!Lt.version||1>Lt.version.major)throw new Error("OpenSeadragonViewerInputHook requires OpenSeadragon version 1.0.0+");return Lt.Viewer.prototype.addViewerInputHook=function(Rt){return(Rt=Rt||{}).viewer=this,new Ot.ViewerInputHook(Rt)},Ot.ViewerInputHook=function(Rt){var Dt,Bt;for((Rt=Rt||{}).hooks=Rt.hooks||[],this.viewer=Rt.viewer||null,this.viewerTrackers={},this.hooks=[],this.viewer&&(this.viewerTrackers.viewer=this.viewer.innerTracker,this.viewerTrackers.viewer_outer=this.viewer.outerTracker),Dt=0;Dt<Rt.hooks.length;Dt++){if(typeof Rt.hooks[Dt].tracker=="string"){if(!this.viewer)throw new Error("A viewer must be specified.");if((Bt=this.viewerTrackers[Rt.hooks[Dt].tracker])===void 0)throw new Error("Unknown tracker specified: "+Rt.hooks[Dt].tracker)}else Bt=Rt.hooks[Dt].tracker;this.hooks.push({tracker:Bt,handlerName:Rt.hooks[Dt].handler,origHandler:Bt[Rt.hooks[Dt].handler],hookHandler:Rt.hooks[Dt].hookHandler}),function(Ft,Yt,Jt,Wt){var Qt=Yt[Jt];Yt[Jt]=function(rn){return Ft._callHandlers(Wt,Qt,rn)}}(this,Bt,Rt.hooks[Dt].handler,Rt.hooks[Dt].hookHandler)}},Ot.ViewerInputHook.version={versionStr:"2.2.1",major:2,minor:2,revision:1},Ot.ViewerInputHook.prototype._callHandlers=function(Rt,Dt,Bt){var Ft=Rt(Bt);return Dt&&!Bt.stopHandlers&&(Ft=Dt(Bt)),!Bt.stopBubbling&&Ft},Ot.ViewerInputHook.prototype.destroy=function(){for(;0<this.hooks.length;){var Rt=this.hooks.pop();Rt.tracker[Rt.handlerName]=Rt.origHandler}this.viewer&&(delete this.viewerTrackers.viewer,delete this.viewerTrackers.viewer_outer,this.viewer=null)},Ot.ViewerInputHook}(kt.a||window.OpenSeadragon,window.OpenSeadragonImaging=window.OpenSeadragonImaging||{})}]).default})})(openseadragonViewerinputhook);const OpenSeadragonViewerInputHook=getDefaultExportFromCjs(openseadragonViewerinputhook.exports);var openseadragonAnnotorious_min={exports:{}};(function(nt,rt){var it=Object.defineProperty,st=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Lt=(Ft,Yt,Jt)=>Yt in Ft?it(Ft,Yt,{enumerable:!0,configurable:!0,writable:!0,value:Jt}):Ft[Yt]=Jt,Ot=(Ft,Yt)=>{for(var Jt in Yt||(Yt={}))Et.call(Yt,Jt)&&Lt(Ft,Jt,Yt[Jt]);if(wt)for(var Jt of wt(Yt))kt.call(Yt,Jt)&&Lt(Ft,Jt,Yt[Jt]);return Ft},Rt=(Ft,Yt)=>st(Ft,bt(Yt)),Dt=(Ft,Yt)=>{var Jt={};for(var Wt in Ft)Et.call(Ft,Wt)&&Yt.indexOf(Wt)<0&&(Jt[Wt]=Ft[Wt]);if(Ft!=null&&wt)for(var Wt of wt(Ft))Yt.indexOf(Wt)<0&&kt.call(Ft,Wt)&&(Jt[Wt]=Ft[Wt]);return Jt},Bt=(Ft,Yt,Jt)=>(Lt(Ft,typeof Yt!="symbol"?Yt+"":Yt,Jt),Jt);(function(Ft,Yt){nt.exports=Yt(requireOpenseadragon())})(commonjsGlobal$1,function(Ft){function Yt(It){return It&&typeof It=="object"&&"default"in It?It:{default:It}}var Jt=Yt(Ft),Wt,Qt,rn,sn,on,hn,mn,Cn={},Tn=[],kn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function In(It,$t){for(var zt in $t)It[zt]=$t[zt];return It}function Ln(It){var $t=It.parentNode;$t&&$t.removeChild(It)}function pn(It,$t,zt){var Ht,Ut,Kt,ln={};for(Kt in $t)Kt=="key"?Ht=$t[Kt]:Kt=="ref"?Ut=$t[Kt]:ln[Kt]=$t[Kt];if(arguments.length>2&&(ln.children=arguments.length>3?Wt.call(arguments,2):zt),typeof It=="function"&&It.defaultProps!=null)for(Kt in It.defaultProps)ln[Kt]===void 0&&(ln[Kt]=It.defaultProps[Kt]);return Hn(It,ln,Ht,Ut,null)}function Hn(It,$t,zt,Ht,Ut){var Kt={type:It,props:$t,key:zt,ref:Ht,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ut==null?++rn:Ut};return Qt.vnode!=null&&Qt.vnode(Kt),Kt}function yn(){return{current:null}}function mr(It){return It.children}function vn(It,$t){this.props=It,this.context=$t}function yr(It,$t){if($t==null)return It.__?yr(It.__,It.__.__k.indexOf(It)+1):null;for(var zt;$t<It.__k.length;$t++)if((zt=It.__k[$t])!=null&&zt.__e!=null)return zt.__e;return typeof It.type=="function"?yr(It):null}function Tr(It){var $t,zt;if((It=It.__)!=null&&It.__c!=null){for(It.__e=It.__c.base=null,$t=0;$t<It.__k.length;$t++)if((zt=It.__k[$t])!=null&&zt.__e!=null){It.__e=It.__c.base=zt.__e;break}return Tr(It)}}function Mr(It){(!It.__d&&(It.__d=!0)&&sn.push(It)&&!rr.__r++||hn!==Qt.debounceRendering)&&((hn=Qt.debounceRendering)||on)(rr)}function rr(){for(var It;rr.__r=sn.length;)It=sn.sort(function($t,zt){return $t.__v.__b-zt.__v.__b}),sn=[],It.some(function($t){var zt,Ht,Ut,Kt,ln,wn;$t.__d&&(ln=(Kt=(zt=$t).__v).__e,(wn=zt.__P)&&(Ht=[],(Ut=In({},Kt)).__v=Kt.__v+1,Er(wn,Kt,Ut,zt.__n,wn.ownerSVGElement!==void 0,Kt.__h!=null?[ln]:null,Ht,ln==null?yr(Kt):ln,Kt.__h),ir(Ht,Kt),Kt.__e!=ln&&Tr(Kt)))})}function wr(It,$t,zt,Ht,Ut,Kt,ln,wn,Dn,Fn){var Rn,ur,Ar,Br,Jr,gi,fi,Mi=Ht&&Ht.__k||Tn,Vi=Mi.length;for(zt.__k=[],Rn=0;Rn<$t.length;Rn++)if((Br=zt.__k[Rn]=(Br=$t[Rn])==null||typeof Br=="boolean"?null:typeof Br=="string"||typeof Br=="number"||typeof Br=="bigint"?Hn(null,Br,null,null,Br):Array.isArray(Br)?Hn(mr,{children:Br},null,null,null):Br.__b>0?Hn(Br.type,Br.props,Br.key,null,Br.__v):Br)!=null){if(Br.__=zt,Br.__b=zt.__b+1,(Ar=Mi[Rn])===null||Ar&&Br.key==Ar.key&&Br.type===Ar.type)Mi[Rn]=void 0;else for(ur=0;ur<Vi;ur++){if((Ar=Mi[ur])&&Br.key==Ar.key&&Br.type===Ar.type){Mi[ur]=void 0;break}Ar=null}Er(It,Br,Ar=Ar||Cn,Ut,Kt,ln,wn,Dn,Fn),Jr=Br.__e,(ur=Br.ref)&&Ar.ref!=ur&&(fi||(fi=[]),Ar.ref&&fi.push(Ar.ref,null,Br),fi.push(ur,Br.__c||Jr,Br)),Jr!=null?(gi==null&&(gi=Jr),typeof Br.type=="function"&&Br.__k!=null&&Br.__k===Ar.__k?Br.__d=Dn=fr(Br,Dn,It):Dn=Lr(It,Br,Ar,Mi,Jr,Dn),Fn||zt.type!=="option"?typeof zt.type=="function"&&(zt.__d=Dn):It.value=""):Dn&&Ar.__e==Dn&&Dn.parentNode!=It&&(Dn=yr(Ar))}for(zt.__e=gi,Rn=Vi;Rn--;)Mi[Rn]!=null&&(typeof zt.type=="function"&&Mi[Rn].__e!=null&&Mi[Rn].__e==zt.__d&&(zt.__d=yr(Ht,Rn+1)),fn(Mi[Rn],Mi[Rn]));if(fi)for(Rn=0;Rn<fi.length;Rn++)nn(fi[Rn],fi[++Rn],fi[++Rn])}function fr(It,$t,zt){var Ht,Ut;for(Ht=0;Ht<It.__k.length;Ht++)(Ut=It.__k[Ht])&&(Ut.__=It,$t=typeof Ut.type=="function"?fr(Ut,$t,zt):Lr(zt,Ut,Ut,It.__k,Ut.__e,$t));return $t}function gr(It,$t){return $t=$t||[],It==null||typeof It=="boolean"||(Array.isArray(It)?It.some(function(zt){gr(zt,$t)}):$t.push(It)),$t}function Lr(It,$t,zt,Ht,Ut,Kt){var ln,wn,Dn;if($t.__d!==void 0)ln=$t.__d,$t.__d=void 0;else if(zt==null||Ut!=Kt||Ut.parentNode==null)e:if(Kt==null||Kt.parentNode!==It)It.appendChild(Ut),ln=null;else{for(wn=Kt,Dn=0;(wn=wn.nextSibling)&&Dn<Ht.length;Dn+=2)if(wn==Ut)break e;It.insertBefore(Ut,Kt),ln=Kt}return ln!==void 0?ln:Ut.nextSibling}function Pr(It,$t,zt,Ht,Ut){var Kt;for(Kt in zt)Kt==="children"||Kt==="key"||Kt in $t||qr(It,Kt,null,zt[Kt],Ht);for(Kt in $t)Ut&&typeof $t[Kt]!="function"||Kt==="children"||Kt==="key"||Kt==="value"||Kt==="checked"||zt[Kt]===$t[Kt]||qr(It,Kt,$t[Kt],zt[Kt],Ht)}function lr(It,$t,zt){$t[0]==="-"?It.setProperty($t,zt):It[$t]=zt==null?"":typeof zt!="number"||kn.test($t)?zt:zt+"px"}function qr(It,$t,zt,Ht,Ut){var Kt;e:if($t==="style")if(typeof zt=="string")It.style.cssText=zt;else{if(typeof Ht=="string"&&(It.style.cssText=Ht=""),Ht)for($t in Ht)zt&&$t in zt||lr(It.style,$t,"");if(zt)for($t in zt)Ht&&zt[$t]===Ht[$t]||lr(It.style,$t,zt[$t])}else if($t[0]==="o"&&$t[1]==="n")Kt=$t!==($t=$t.replace(/Capture$/,"")),$t=$t.toLowerCase()in It?$t.toLowerCase().slice(2):$t.slice(2),It.l||(It.l={}),It.l[$t+Kt]=zt,zt?Ht||It.addEventListener($t,Kt?pr:sr,Kt):It.removeEventListener($t,Kt?pr:sr,Kt);else if($t!=="dangerouslySetInnerHTML"){if(Ut)$t=$t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if($t!=="href"&&$t!=="list"&&$t!=="form"&&$t!=="tabIndex"&&$t!=="download"&&$t in It)try{It[$t]=zt==null?"":zt;break e}catch{}typeof zt=="function"||(zt!=null&&(zt!==!1||$t[0]==="a"&&$t[1]==="r")?It.setAttribute($t,zt):It.removeAttribute($t))}}function sr(It){this.l[It.type+!1](Qt.event?Qt.event(It):It)}function pr(It){this.l[It.type+!0](Qt.event?Qt.event(It):It)}function Er(It,$t,zt,Ht,Ut,Kt,ln,wn,Dn){var Fn,Rn,ur,Ar,Br,Jr,gi,fi,Mi,Vi,zo,Lo=$t.type;if($t.constructor!==void 0)return null;zt.__h!=null&&(Dn=zt.__h,wn=$t.__e=zt.__e,$t.__h=null,Kt=[wn]),(Fn=Qt.__b)&&Fn($t);try{e:if(typeof Lo=="function"){if(fi=$t.props,Mi=(Fn=Lo.contextType)&&Ht[Fn.__c],Vi=Fn?Mi?Mi.props.value:Fn.__:Ht,zt.__c?gi=(Rn=$t.__c=zt.__c).__=Rn.__E:("prototype"in Lo&&Lo.prototype.render?$t.__c=Rn=new Lo(fi,Vi):($t.__c=Rn=new vn(fi,Vi),Rn.constructor=Lo,Rn.render=cn),Mi&&Mi.sub(Rn),Rn.props=fi,Rn.state||(Rn.state={}),Rn.context=Vi,Rn.__n=Ht,ur=Rn.__d=!0,Rn.__h=[]),Rn.__s==null&&(Rn.__s=Rn.state),Lo.getDerivedStateFromProps!=null&&(Rn.__s==Rn.state&&(Rn.__s=In({},Rn.__s)),In(Rn.__s,Lo.getDerivedStateFromProps(fi,Rn.__s))),Ar=Rn.props,Br=Rn.state,ur)Lo.getDerivedStateFromProps==null&&Rn.componentWillMount!=null&&Rn.componentWillMount(),Rn.componentDidMount!=null&&Rn.__h.push(Rn.componentDidMount);else{if(Lo.getDerivedStateFromProps==null&&fi!==Ar&&Rn.componentWillReceiveProps!=null&&Rn.componentWillReceiveProps(fi,Vi),!Rn.__e&&Rn.shouldComponentUpdate!=null&&Rn.shouldComponentUpdate(fi,Rn.__s,Vi)===!1||$t.__v===zt.__v){Rn.props=fi,Rn.state=Rn.__s,$t.__v!==zt.__v&&(Rn.__d=!1),Rn.__v=$t,$t.__e=zt.__e,$t.__k=zt.__k,$t.__k.forEach(function(Co){Co&&(Co.__=$t)}),Rn.__h.length&&ln.push(Rn);break e}Rn.componentWillUpdate!=null&&Rn.componentWillUpdate(fi,Rn.__s,Vi),Rn.componentDidUpdate!=null&&Rn.__h.push(function(){Rn.componentDidUpdate(Ar,Br,Jr)})}Rn.context=Vi,Rn.props=fi,Rn.state=Rn.__s,(Fn=Qt.__r)&&Fn($t),Rn.__d=!1,Rn.__v=$t,Rn.__P=It,Fn=Rn.render(Rn.props,Rn.state,Rn.context),Rn.state=Rn.__s,Rn.getChildContext!=null&&(Ht=In(In({},Ht),Rn.getChildContext())),ur||Rn.getSnapshotBeforeUpdate==null||(Jr=Rn.getSnapshotBeforeUpdate(Ar,Br)),zo=Fn!=null&&Fn.type===mr&&Fn.key==null?Fn.props.children:Fn,wr(It,Array.isArray(zo)?zo:[zo],$t,zt,Ht,Ut,Kt,ln,wn,Dn),Rn.base=$t.__e,$t.__h=null,Rn.__h.length&&ln.push(Rn),gi&&(Rn.__E=Rn.__=null),Rn.__e=!1}else Kt==null&&$t.__v===zt.__v?($t.__k=zt.__k,$t.__e=zt.__e):$t.__e=Pn(zt.__e,$t,zt,Ht,Ut,Kt,ln,Dn);(Fn=Qt.diffed)&&Fn($t)}catch(Co){$t.__v=null,(Dn||Kt!=null)&&($t.__e=wn,$t.__h=!!Dn,Kt[Kt.indexOf(wn)]=null),Qt.__e(Co,$t,zt)}}function ir(It,$t){Qt.__c&&Qt.__c($t,It),It.some(function(zt){try{It=zt.__h,zt.__h=[],It.some(function(Ht){Ht.call(zt)})}catch(Ht){Qt.__e(Ht,zt.__v)}})}function Pn(It,$t,zt,Ht,Ut,Kt,ln,wn){var Dn,Fn,Rn,ur=zt.props,Ar=$t.props,Br=$t.type,Jr=0;if(Br==="svg"&&(Ut=!0),Kt!=null){for(;Jr<Kt.length;Jr++)if((Dn=Kt[Jr])&&(Dn===It||(Br?Dn.localName==Br:Dn.nodeType==3))){It=Dn,Kt[Jr]=null;break}}if(It==null){if(Br===null)return document.createTextNode(Ar);It=Ut?document.createElementNS("http://www.w3.org/2000/svg",Br):document.createElement(Br,Ar.is&&Ar),Kt=null,wn=!1}if(Br===null)ur===Ar||wn&&It.data===Ar||(It.data=Ar);else{if(Kt=Kt&&Wt.call(It.childNodes),Fn=(ur=zt.props||Cn).dangerouslySetInnerHTML,Rn=Ar.dangerouslySetInnerHTML,!wn){if(Kt!=null)for(ur={},Jr=0;Jr<It.attributes.length;Jr++)ur[It.attributes[Jr].name]=It.attributes[Jr].value;(Rn||Fn)&&(Rn&&(Fn&&Rn.__html==Fn.__html||Rn.__html===It.innerHTML)||(It.innerHTML=Rn&&Rn.__html||""))}if(Pr(It,Ar,ur,Ut,wn),Rn)$t.__k=[];else if(Jr=$t.props.children,wr(It,Array.isArray(Jr)?Jr:[Jr],$t,zt,Ht,Ut&&Br!=="foreignObject",Kt,ln,Kt?Kt[0]:zt.__k&&yr(zt,0),wn),Kt!=null)for(Jr=Kt.length;Jr--;)Kt[Jr]!=null&&Ln(Kt[Jr]);wn||("value"in Ar&&(Jr=Ar.value)!==void 0&&(Jr!==It.value||Br==="progress"&&!Jr)&&qr(It,"value",Jr,ur.value,!1),"checked"in Ar&&(Jr=Ar.checked)!==void 0&&Jr!==It.checked&&qr(It,"checked",Jr,ur.checked,!1))}return It}function nn(It,$t,zt){try{typeof It=="function"?It($t):It.current=$t}catch(Ht){Qt.__e(Ht,zt)}}function fn(It,$t,zt){var Ht,Ut;if(Qt.unmount&&Qt.unmount(It),(Ht=It.ref)&&(Ht.current&&Ht.current!==It.__e||nn(Ht,null,$t)),(Ht=It.__c)!=null){if(Ht.componentWillUnmount)try{Ht.componentWillUnmount()}catch(Kt){Qt.__e(Kt,$t)}Ht.base=Ht.__P=null}if(Ht=It.__k)for(Ut=0;Ut<Ht.length;Ut++)Ht[Ut]&&fn(Ht[Ut],$t,typeof It.type!="function");zt||It.__e==null||Ln(It.__e),It.__e=It.__d=void 0}function cn(It,$t,zt){return this.constructor(It,zt)}function Nn(It,$t,zt){var Ht,Ut,Kt;Qt.__&&Qt.__(It,$t),Ut=(Ht=typeof zt=="function")?null:zt&&zt.__k||$t.__k,Kt=[],Er($t,It=(!Ht&&zt||$t).__k=pn(mr,null,[It]),Ut||Cn,Cn,$t.ownerSVGElement!==void 0,!Ht&&zt?[zt]:Ut?null:$t.firstChild?Wt.call($t.childNodes):null,Kt,!Ht&&zt?zt:Ut?Ut.__e:$t.firstChild,Ht),ir(Kt,It)}function On(It,$t){Nn(It,$t,On)}function cr(It,$t,zt){var Ht,Ut,Kt,ln=In({},It.props);for(Kt in $t)Kt=="key"?Ht=$t[Kt]:Kt=="ref"?Ut=$t[Kt]:ln[Kt]=$t[Kt];return arguments.length>2&&(ln.children=arguments.length>3?Wt.call(arguments,2):zt),Hn(It.type,ln,Ht||It.key,Ut||It.ref,null)}function Bn(It,$t){var zt={__c:$t="__cC"+mn++,__:It,Consumer:function(Ht,Ut){return Ht.children(Ut)},Provider:function(Ht){var Ut,Kt;return this.getChildContext||(Ut=[],(Kt={})[$t]=this,this.getChildContext=function(){return Kt},this.shouldComponentUpdate=function(ln){this.props.value!==ln.value&&Ut.some(Mr)},this.sub=function(ln){Ut.push(ln);var wn=ln.componentWillUnmount;ln.componentWillUnmount=function(){Ut.splice(Ut.indexOf(ln),1),wn&&wn.call(ln)}}),Ht.children}};return zt.Provider.__=zt.Consumer.contextType=zt}Wt=Tn.slice,Qt={__e:function(It,$t){for(var zt,Ht,Ut;$t=$t.__;)if((zt=$t.__c)&&!zt.__)try{if((Ht=zt.constructor)&&Ht.getDerivedStateFromError!=null&&(zt.setState(Ht.getDerivedStateFromError(It)),Ut=zt.__d),zt.componentDidCatch!=null&&(zt.componentDidCatch(It),Ut=zt.__d),Ut)return zt.__E=zt}catch(Kt){It=Kt}throw It}},rn=0,vn.prototype.setState=function(It,$t){var zt;zt=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=In({},this.state),typeof It=="function"&&(It=It(In({},zt),this.props)),It&&In(zt,It),It!=null&&this.__v&&($t&&this.__h.push($t),Mr(this))},vn.prototype.forceUpdate=function(It){this.__v&&(this.__e=!0,It&&this.__h.push(It),Mr(this))},vn.prototype.render=mr,sn=[],on=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rr.__r=0,mn=0;var Qn,Un,or,hr=0,kr=[],xr=Qt.__b,br=Qt.__r,hi=Qt.diffed,di=Qt.__c,vi=Qt.unmount;function Ti(It,$t){Qt.__h&&Qt.__h(Un,It,hr||$t),hr=0;var zt=Un.__H||(Un.__H={__:[],__h:[]});return It>=zt.__.length&&zt.__.push({}),zt.__[It]}function ki(It){return hr=1,Di(xi,It)}function Di(It,$t,zt){var Ht=Ti(Qn++,2);return Ht.t=It,Ht.__c||(Ht.__=[zt?zt($t):xi(void 0,$t),function(Ut){var Kt=Ht.t(Ht.__[0],Ut);Ht.__[0]!==Kt&&(Ht.__=[Kt,Ht.__[1]],Ht.__c.setState({}))}],Ht.__c=Un),Ht.__}function Ci(It,$t){var zt=Ti(Qn++,3);!Qt.__s&&Pi(zt.__H,$t)&&(zt.__=It,zt.__H=$t,Un.__H.__h.push(zt))}function $r(It,$t){var zt=Ti(Qn++,4);!Qt.__s&&Pi(zt.__H,$t)&&(zt.__=It,zt.__H=$t,Un.__h.push(zt))}function An(It){return hr=5,Wn(function(){return{current:It}},[])}function Sn(It,$t,zt){hr=6,$r(function(){typeof It=="function"?It($t()):It&&(It.current=$t())},zt==null?zt:zt.concat(It))}function Wn(It,$t){var zt=Ti(Qn++,7);return Pi(zt.__H,$t)&&(zt.__=It(),zt.__H=$t,zt.__h=It),zt.__}function er(It,$t){return hr=8,Wn(function(){return It},$t)}function vr(It){var $t=Un.context[It.__c],zt=Ti(Qn++,9);return zt.c=It,$t?(zt.__==null&&(zt.__=!0,$t.sub(Un)),$t.props.value):It.__}function ti(It,$t){Qt.useDebugValue&&Qt.useDebugValue($t?$t(It):It)}function _r(It){var $t=Ti(Qn++,10),zt=ki();return $t.__=It,Un.componentDidCatch||(Un.componentDidCatch=function(Ht){$t.__&&$t.__(Ht),zt[1](Ht)}),[zt[0],function(){zt[1](void 0)}]}function li(){kr.forEach(function(It){if(It.__P)try{It.__H.__h.forEach(mi),It.__H.__h.forEach(_i),It.__H.__h=[]}catch($t){It.__H.__h=[],Qt.__e($t,It.__v)}}),kr=[]}Qt.__b=function(It){Un=null,xr&&xr(It)},Qt.__r=function(It){br&&br(It),Qn=0;var $t=(Un=It.__c).__H;$t&&($t.__h.forEach(mi),$t.__h.forEach(_i),$t.__h=[])},Qt.diffed=function(It){hi&&hi(It);var $t=It.__c;$t&&$t.__H&&$t.__H.__h.length&&(kr.push($t)!==1&&or===Qt.requestAnimationFrame||((or=Qt.requestAnimationFrame)||function(zt){var Ht,Ut=function(){clearTimeout(Kt),Or&&cancelAnimationFrame(Ht),setTimeout(zt)},Kt=setTimeout(Ut,100);Or&&(Ht=requestAnimationFrame(Ut))})(li)),Un=void 0},Qt.__c=function(It,$t){$t.some(function(zt){try{zt.__h.forEach(mi),zt.__h=zt.__h.filter(function(Ht){return!Ht.__||_i(Ht)})}catch(Ht){$t.some(function(Ut){Ut.__h&&(Ut.__h=[])}),$t=[],Qt.__e(Ht,zt.__v)}}),di&&di(It,$t)},Qt.unmount=function(It){vi&&vi(It);var $t=It.__c;if($t&&$t.__H)try{$t.__H.__.forEach(mi)}catch(zt){Qt.__e(zt,$t.__v)}};var Or=typeof requestAnimationFrame=="function";function mi(It){var $t=Un;typeof It.__c=="function"&&It.__c(),Un=$t}function _i(It){var $t=Un;It.__c=It.__(),Un=$t}function Pi(It,$t){return!It||It.length!==$t.length||$t.some(function(zt,Ht){return zt!==It[Ht]})}function xi(It,$t){return typeof $t=="function"?$t(It):$t}function Zi(It,$t){for(var zt in $t)It[zt]=$t[zt];return It}function $i(It,$t){for(var zt in It)if(zt!=="__source"&&!(zt in $t))return!0;for(var Ht in $t)if(Ht!=="__source"&&It[Ht]!==$t[Ht])return!0;return!1}function Qi(It){this.props=It}function Eo(It,$t){function zt(Ut){var Kt=this.props.ref,ln=Kt==Ut.ref;return!ln&&Kt&&(Kt.call?Kt(null):Kt.current=null),$t?!$t(this.props,Ut)||!ln:$i(this.props,Ut)}function Ht(Ut){return this.shouldComponentUpdate=zt,pn(It,Ut)}return Ht.displayName="Memo("+(It.displayName||It.name)+")",Ht.prototype.isReactComponent=!0,Ht.__f=!0,Ht}(Qi.prototype=new vn).isPureReactComponent=!0,Qi.prototype.shouldComponentUpdate=function(It,$t){return $i(this.props,It)||$i(this.state,$t)};var to=Qt.__b;Qt.__b=function(It){It.type&&It.type.__f&&It.ref&&(It.props.ref=It.ref,It.ref=null),to&&to(It)};var Za=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Hs(It){function $t(zt,Ht){var Ut=Zi({},zt);return delete Ut.ref,It(Ut,(Ht=zt.ref||Ht)&&(typeof Ht!="object"||"current"in Ht)?Ht:null)}return $t.$$typeof=Za,$t.render=$t,$t.prototype.isReactComponent=$t.__f=!0,$t.displayName="ForwardRef("+(It.displayName||It.name)+")",$t}var Ai=function(It,$t){return It==null?null:gr(gr(It).map($t))},io={map:Ai,forEach:Ai,count:function(It){return It?gr(It).length:0},only:function(It){var $t=gr(It);if($t.length!==1)throw"Children.only";return $t[0]},toArray:gr},Fs=Qt.__e;Qt.__e=function(It,$t,zt){if(It.then){for(var Ht,Ut=$t;Ut=Ut.__;)if((Ht=Ut.__c)&&Ht.__c)return $t.__e==null&&($t.__e=zt.__e,$t.__k=zt.__k),Ht.__c(It,$t)}Fs(It,$t,zt)};var Xo=Qt.unmount;function os(){this.__u=0,this.t=null,this.__b=null}function Os(It){var $t=It.__.__c;return $t&&$t.__e&&$t.__e(It)}function Ns(It){var $t,zt,Ht;function Ut(Kt){if($t||($t=It()).then(function(ln){zt=ln.default||ln},function(ln){Ht=ln}),Ht)throw Ht;if(!zt)throw $t;return pn(zt,Kt)}return Ut.displayName="Lazy",Ut.__f=!0,Ut}function Rr(){this.u=null,this.o=null}Qt.unmount=function(It){var $t=It.__c;$t&&$t.__R&&$t.__R(),$t&&It.__h===!0&&(It.type=null),Xo&&Xo(It)},(os.prototype=new vn).__c=function(It,$t){var zt=$t.__c,Ht=this;Ht.t==null&&(Ht.t=[]),Ht.t.push(zt);var Ut=Os(Ht.__v),Kt=!1,ln=function(){Kt||(Kt=!0,zt.__R=null,Ut?Ut(wn):wn())};zt.__R=ln;var wn=function(){if(!--Ht.__u){if(Ht.state.__e){var Fn=Ht.state.__e;Ht.__v.__k[0]=function ur(Ar,Br,Jr){return Ar&&(Ar.__v=null,Ar.__k=Ar.__k&&Ar.__k.map(function(gi){return ur(gi,Br,Jr)}),Ar.__c&&Ar.__c.__P===Br&&(Ar.__e&&Jr.insertBefore(Ar.__e,Ar.__d),Ar.__c.__e=!0,Ar.__c.__P=Jr)),Ar}(Fn,Fn.__c.__P,Fn.__c.__O)}var Rn;for(Ht.setState({__e:Ht.__b=null});Rn=Ht.t.pop();)Rn.forceUpdate()}},Dn=$t.__h===!0;Ht.__u++||Dn||Ht.setState({__e:Ht.__b=Ht.__v.__k[0]}),It.then(ln,ln)},os.prototype.componentWillUnmount=function(){this.t=[]},os.prototype.render=function(It,$t){if(this.__b){if(this.__v.__k){var zt=document.createElement("div"),Ht=this.__v.__k[0].__c;this.__v.__k[0]=function Kt(ln,wn,Dn){return ln&&(ln.__c&&ln.__c.__H&&(ln.__c.__H.__.forEach(function(Fn){typeof Fn.__c=="function"&&Fn.__c()}),ln.__c.__H=null),(ln=Zi({},ln)).__c!=null&&(ln.__c.__P===Dn&&(ln.__c.__P=wn),ln.__c=null),ln.__k=ln.__k&&ln.__k.map(function(Fn){return Kt(Fn,wn,Dn)})),ln}(this.__b,zt,Ht.__O=Ht.__P)}this.__b=null}var Ut=$t.__e&&pn(mr,null,It.fallback);return Ut&&(Ut.__h=null),[pn(mr,null,$t.__e?null:It.children),Ut]};var Qr=function(It,$t,zt){if(++zt[1]===zt[0]&&It.o.delete($t),It.props.revealOrder&&(It.props.revealOrder[0]!=="t"||!It.o.size))for(zt=It.u;zt;){for(;zt.length>3;)zt.pop()();if(zt[1]<zt[0])break;It.u=zt=zt[2]}};function Dr(It){return this.getChildContext=function(){return It.context},It.children}function ar(It){var $t=this,zt=It.i;$t.componentWillUnmount=function(){Nn(null,$t.l),$t.l=null,$t.i=null},$t.i&&$t.i!==zt&&$t.componentWillUnmount(),It.__v?($t.l||($t.i=zt,$t.l={nodeType:1,parentNode:zt,childNodes:[],appendChild:function(Ht){this.childNodes.push(Ht),$t.i.appendChild(Ht)},insertBefore:function(Ht,Ut){this.childNodes.push(Ht),$t.i.appendChild(Ht)},removeChild:function(Ht){this.childNodes.splice(this.childNodes.indexOf(Ht)>>>1,1),$t.i.removeChild(Ht)}}),Nn(pn(Dr,{context:$t.context},It.__v),$t.l)):$t.l&&$t.componentWillUnmount()}function Ur(It,$t){return pn(ar,{__v:It,i:$t})}(Rr.prototype=new vn).__e=function(It){var $t=this,zt=Os($t.__v),Ht=$t.o.get(It);return Ht[0]++,function(Ut){var Kt=function(){$t.props.revealOrder?(Ht.push(Ut),Qr($t,It,Ht)):Ut()};zt?zt(Kt):Kt()}},Rr.prototype.render=function(It){this.u=null,this.o=new Map;var $t=gr(It.children);It.revealOrder&&It.revealOrder[0]==="b"&&$t.reverse();for(var zt=$t.length;zt--;)this.o.set($t[zt],this.u=[1,0,this.u]);return It.children},Rr.prototype.componentDidUpdate=Rr.prototype.componentDidMount=function(){var It=this;this.o.forEach(function($t,zt){Qr(It,zt,$t)})};var ci=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Po=function(It){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(It)};function bo(It,$t,zt){return $t.__k==null&&($t.textContent=""),Nn(It,$t),typeof zt=="function"&&zt(),It?It.__c:null}function ss(It,$t,zt){return On(It,$t),typeof zt=="function"&&zt(),It?It.__c:null}vn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(It){Object.defineProperty(vn.prototype,It,{configurable:!0,get:function(){return this["UNSAFE_"+It]},set:function($t){Object.defineProperty(this,It,{configurable:!0,writable:!0,value:$t})}})});var oo=Qt.event;function Do(){}function Us(){return this.cancelBubble}function aa(){return this.defaultPrevented}Qt.event=function(It){return oo&&(It=oo(It)),It.persist=Do,It.isPropagationStopped=Us,It.isDefaultPrevented=aa,It.nativeEvent=It};var ra,ji={configurable:!0,get:function(){return this.class}},so=Qt.vnode;Qt.vnode=function(It){var $t=It.type,zt=It.props,Ht=zt;if(typeof $t=="string"){for(var Ut in Ht={},zt){var Kt=zt[Ut];Ut==="value"&&"defaultValue"in zt&&Kt==null||(Ut==="defaultValue"&&"value"in zt&&zt.value==null?Ut="value":Ut==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(Ut)?Ut="ondblclick":/^onchange(textarea|input)/i.test(Ut+$t)&&!Po(zt.type)?Ut="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ut)?Ut=Ut.toLowerCase():wi.test(Ut)?Ut=Ut.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Ht[Ut]=Kt)}$t=="select"&&Ht.multiple&&Array.isArray(Ht.value)&&(Ht.value=gr(zt.children).forEach(function(ln){ln.props.selected=Ht.value.indexOf(ln.props.value)!=-1})),$t=="select"&&Ht.defaultValue!=null&&(Ht.value=gr(zt.children).forEach(function(ln){ln.props.selected=Ht.multiple?Ht.defaultValue.indexOf(ln.props.value)!=-1:Ht.defaultValue==ln.props.value})),It.props=Ht}$t&&zt.class!=zt.className&&(ji.enumerable="className"in zt,zt.className!=null&&(Ht.class=zt.className),Object.defineProperty(Ht,"className",ji)),It.$$typeof=ci,so&&so(It)};var fo=Qt.__r;Qt.__r=function(It){fo&&fo(It),ra=It.__c};var Li={ReactCurrentDispatcher:{current:{readContext:function(It){return ra.__n[It.__c].props.value}}}},ao="17.0.2";function Sr(It){return pn.bind(null,It)}function ml(It){return!!It&&It.$$typeof===ci}function Nr(It){return ml(It)?cr.apply(null,arguments):It}function ia(It){return!!It.__k&&(Nn(null,It),!0)}function _c(It){return It&&(It.base||It.nodeType===1&&It)||null}var No=function(It,$t){return It($t)},go=function(It,$t){return It($t)},Tu=mr,Fi={useState:ki,useReducer:Di,useEffect:Ci,useLayoutEffect:$r,useRef:An,useImperativeHandle:Sn,useMemo:Wn,useCallback:er,useContext:vr,useDebugValue:ti,version:"17.0.2",Children:io,render:bo,hydrate:ss,unmountComponentAtNode:ia,createPortal:Ur,createElement:pn,createContext:Bn,createFactory:Sr,cloneElement:Nr,createRef:yn,Fragment:mr,isValidElement:ml,findDOMNode:_c,Component:vn,PureComponent:Qi,memo:Eo,forwardRef:Hs,flushSync:go,unstable_batchedUpdates:No,StrictMode:mr,Suspense:os,SuspenseList:Rr,lazy:Ns,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Li},mo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fi,version:ao,Children:io,render:bo,hydrate:ss,unmountComponentAtNode:ia,createPortal:Ur,createFactory:Sr,cloneElement:Nr,isValidElement:ml,findDOMNode:_c,PureComponent:Qi,memo:Eo,forwardRef:Hs,flushSync:go,unstable_batchedUpdates:No,StrictMode:Tu,Suspense:os,SuspenseList:Rr,lazy:Ns,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Li,createElement:pn,createContext:Bn,createRef:yn,Fragment:mr,Component:vn,useState:ki,useReducer:Di,useEffect:Ci,useLayoutEffect:$r,useRef:An,useImperativeHandle:Sn,useMemo:Wn,useCallback:er,useContext:vr,useDebugValue:ti,useErrorBoundary:_r}),Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{};function ic(It){return It&&It.__esModule&&Object.prototype.hasOwnProperty.call(It,"default")?It.default:It}function Rl(It){if(It.__esModule)return It;var $t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(It).forEach(function(zt){var Ht=Object.getOwnPropertyDescriptor(It,zt);Object.defineProperty($t,zt,Ht.get?Ht:{enumerable:!0,get:function(){return It[zt]}})}),$t}var Qs={exports:{}};function Ho(){}Ho.prototype={on:function(It,$t,zt){var Ht=this.e||(this.e={});return(Ht[It]||(Ht[It]=[])).push({fn:$t,ctx:zt}),this},once:function(It,$t,zt){var Ht=this;function Ut(){Ht.off(It,Ut),$t.apply(zt,arguments)}return Ut._=$t,this.on(It,Ut,zt)},emit:function(It){var $t=[].slice.call(arguments,1),zt=((this.e||(this.e={}))[It]||[]).slice(),Ht=0,Ut=zt.length;for(Ht;Ht<Ut;Ht++)zt[Ht].fn.apply(zt[Ht].ctx,$t);return this},off:function(It,$t){var zt=this.e||(this.e={}),Ht=zt[It],Ut=[];if(Ht&&$t)for(var Kt=0,ln=Ht.length;Kt<ln;Kt++)Ht[Kt].fn!==$t&&Ht[Kt].fn._!==$t&&Ut.push(Ht[Kt]);return Ut.length?zt[It]=Ut:delete zt[It],this}},Qs.exports=Ho,Qs.exports.TinyEmitter=Ho;var jo=Qs.exports,la={exports:{}},Tl={},ya=Rl(mo),yl={exports:{}},ja="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ou=ja,Rc=ou;function bc(){}function Ja(){}Ja.resetWarningCache=bc;var ku=function(){function It(Ht,Ut,Kt,ln,wn,Dn){if(Dn!==Rc){var Fn=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Fn.name="Invariant Violation",Fn}}It.isRequired=It;function $t(){return It}var zt={array:It,bool:It,func:It,number:It,object:It,string:It,symbol:It,any:It,arrayOf:$t,element:It,elementType:It,instanceOf:$t,node:It,objectOf:$t,oneOf:$t,oneOfType:$t,shape:$t,exact:$t,checkPropTypes:Ja,resetWarningCache:bc};return zt.PropTypes=zt,zt};yl.exports=ku();function Au(It){var $t,zt,Ht="";if(typeof It=="string"||typeof It=="number")Ht+=It;else if(typeof It=="object")if(Array.isArray(It))for($t=0;$t<It.length;$t++)It[$t]&&(zt=Au(It[$t]))&&(Ht&&(Ht+=" "),Ht+=zt);else for($t in It)It[$t]&&(Ht&&(Ht+=" "),Ht+=$t);return Ht}function Lu(){for(var It=0,$t,zt,Ht="";It<arguments.length;)($t=arguments[It++])&&(zt=Au($t))&&(Ht&&(Ht+=" "),Ht+=zt);return Ht}var Bo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Lu}),va=Rl(Bo),co={},kl={};Object.defineProperty(kl,"__esModule",{value:!0}),kl.findInArray=Jh,kl.isFunction=Qh,kl.isNum=Ju,kl.int=Iu,kl.dontSetMe=Qu;function Jh(It,$t){for(var zt=0,Ht=It.length;zt<Ht;zt++)if($t.apply($t,[It[zt],zt,It]))return It[zt]}function Qh(It){return typeof It=="function"||Object.prototype.toString.call(It)==="[object Function]"}function Ju(It){return typeof It=="number"&&!isNaN(It)}function Iu(It){return parseInt(It,10)}function Qu(It,$t,zt){if(It[$t])return new Error("Invalid prop ".concat($t," passed to ").concat(zt," - do not set this, set it on the child."))}var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.getPrefix=Nc,Nl.browserPrefixToKey=su,Nl.browserPrefixToStyle=Md,Nl.default=void 0;var da=["Moz","Webkit","O","ms"];function Nc(){var It,$t,zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var Ht=(It=window.document)===null||It===void 0||($t=It.documentElement)===null||$t===void 0?void 0:$t.style;if(!Ht||zt in Ht)return"";for(var Ut=0;Ut<da.length;Ut++)if(su(zt,da[Ut])in Ht)return da[Ut];return""}function su(It,$t){return $t?"".concat($t).concat(wf(It)):It}function Md(It,$t){return $t?"-".concat($t.toLowerCase(),"-").concat(It):It}function wf(It){for(var $t="",zt=!0,Ht=0;Ht<It.length;Ht++)zt?($t+=It[Ht].toUpperCase(),zt=!1):It[Ht]==="-"?zt=!0:$t+=It[Ht];return $t}var ed=Nc();Nl.default=ed;function Al(It){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Al=function($t){return typeof $t}:Al=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Al(It)}Object.defineProperty(co,"__esModule",{value:!0}),co.matchesSelector=nh,co.matchesSelectorAndParentsTo=$d,co.addEvent=xc,co.removeEvent=Rd,co.outerHeight=td,co.outerWidth=kh,co.innerHeight=nd,co.innerWidth=Ys,co.offsetXYFromParent=Dc,co.createCSSTransform=Qa,co.createSVGTransform=Ga,co.getTranslation=Ll,co.getTouch=xo,co.getTouchIdentifier=Ef,co.addUserSelectStyles=wp,co.removeUserSelectStyles=rh,co.addClassName=oc,co.removeClassName=ql;var Ua=kl,Th=Pu(Nl);function Fo(It){if(typeof WeakMap!="function")return null;var $t=new WeakMap,zt=new WeakMap;return(Fo=function(Ht){return Ht?zt:$t})(It)}function Pu(It,$t){if(!$t&&It&&It.__esModule)return It;if(It===null||Al(It)!=="object"&&typeof It!="function")return{default:It};var zt=Fo($t);if(zt&&zt.has(It))return zt.get(It);var Ht={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Kt in It)if(Kt!=="default"&&Object.prototype.hasOwnProperty.call(It,Kt)){var ln=Ut?Object.getOwnPropertyDescriptor(It,Kt):null;ln&&(ln.get||ln.set)?Object.defineProperty(Ht,Kt,ln):Ht[Kt]=It[Kt]}return Ht.default=It,zt&&zt.set(It,Ht),Ht}function ba(It,$t){var zt=Object.keys(It);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(It);$t&&(Ht=Ht.filter(function(Ut){return Object.getOwnPropertyDescriptor(It,Ut).enumerable})),zt.push.apply(zt,Ht)}return zt}function eh(It){for(var $t=1;$t<arguments.length;$t++){var zt=arguments[$t]!=null?arguments[$t]:{};$t%2?ba(Object(zt),!0).forEach(function(Ht){th(It,Ht,zt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(zt)):ba(Object(zt)).forEach(function(Ht){Object.defineProperty(It,Ht,Object.getOwnPropertyDescriptor(zt,Ht))})}return It}function th(It,$t,zt){return $t in It?Object.defineProperty(It,$t,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[$t]=zt,It}var au="";function nh(It,$t){return au||(au=(0,Ua.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(zt){return(0,Ua.isFunction)(It[zt])})),(0,Ua.isFunction)(It[au])?It[au]($t):!1}function $d(It,$t,zt){var Ht=It;do{if(nh(Ht,$t))return!0;if(Ht===zt)return!1;Ht=Ht.parentNode}while(Ht);return!1}function xc(It,$t,zt,Ht){if(It){var Ut=eh({capture:!0},Ht);It.addEventListener?It.addEventListener($t,zt,Ut):It.attachEvent?It.attachEvent("on"+$t,zt):It["on"+$t]=zt}}function Rd(It,$t,zt,Ht){if(It){var Ut=eh({capture:!0},Ht);It.removeEventListener?It.removeEventListener($t,zt,Ut):It.detachEvent?It.detachEvent("on"+$t,zt):It["on"+$t]=null}}function td(It){var $t=It.clientHeight,zt=It.ownerDocument.defaultView.getComputedStyle(It);return $t+=(0,Ua.int)(zt.borderTopWidth),$t+=(0,Ua.int)(zt.borderBottomWidth),$t}function kh(It){var $t=It.clientWidth,zt=It.ownerDocument.defaultView.getComputedStyle(It);return $t+=(0,Ua.int)(zt.borderLeftWidth),$t+=(0,Ua.int)(zt.borderRightWidth),$t}function nd(It){var $t=It.clientHeight,zt=It.ownerDocument.defaultView.getComputedStyle(It);return $t-=(0,Ua.int)(zt.paddingTop),$t-=(0,Ua.int)(zt.paddingBottom),$t}function Ys(It){var $t=It.clientWidth,zt=It.ownerDocument.defaultView.getComputedStyle(It);return $t-=(0,Ua.int)(zt.paddingLeft),$t-=(0,Ua.int)(zt.paddingRight),$t}function Dc(It,$t,zt){var Ht=$t===$t.ownerDocument.body,Ut=Ht?{left:0,top:0}:$t.getBoundingClientRect(),Kt=(It.clientX+$t.scrollLeft-Ut.left)/zt,ln=(It.clientY+$t.scrollTop-Ut.top)/zt;return{x:Kt,y:ln}}function Qa(It,$t){var zt=Ll(It,$t,"px");return th({},(0,Th.browserPrefixToKey)("transform",Th.default),zt)}function Ga(It,$t){var zt=Ll(It,$t,"");return zt}function Ll(It,$t,zt){var Ht=It.x,Ut=It.y,Kt="translate(".concat(Ht).concat(zt,",").concat(Ut).concat(zt,")");if($t){var ln="".concat(typeof $t.x=="string"?$t.x:$t.x+zt),wn="".concat(typeof $t.y=="string"?$t.y:$t.y+zt);Kt="translate(".concat(ln,", ").concat(wn,")")+Kt}return Kt}function xo(It,$t){return It.targetTouches&&(0,Ua.findInArray)(It.targetTouches,function(zt){return $t===zt.identifier})||It.changedTouches&&(0,Ua.findInArray)(It.changedTouches,function(zt){return $t===zt.identifier})}function Ef(It){if(It.targetTouches&&It.targetTouches[0])return It.targetTouches[0].identifier;if(It.changedTouches&&It.changedTouches[0])return It.changedTouches[0].identifier}function wp(It){if(It){var $t=It.getElementById("react-draggable-style-el");$t||($t=It.createElement("style"),$t.type="text/css",$t.id="react-draggable-style-el",$t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,$t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,It.getElementsByTagName("head")[0].appendChild($t)),It.body&&oc(It.body,"react-draggable-transparent-selection")}}function rh(It){if(It)try{if(It.body&&ql(It.body,"react-draggable-transparent-selection"),It.selection)It.selection.empty();else{var $t=(It.defaultView||window).getSelection();$t&&$t.type!=="Caret"&&$t.removeAllRanges()}}catch{}}function oc(It,$t){It.classList?It.classList.add($t):It.className.match(new RegExp("(?:^|\\s)".concat($t,"(?!\\S)")))||(It.className+=" ".concat($t))}function ql(It,$t){It.classList?It.classList.remove($t):It.className=It.className.replace(new RegExp("(?:^|\\s)".concat($t,"(?!\\S)"),"g"),"")}var vl={};Object.defineProperty(vl,"__esModule",{value:!0}),vl.getBoundPosition=rd,vl.snapToGrid=Ko,vl.canDragX=Zt,vl.canDragY=dn,vl.getControlPosition=Mn,vl.createCoreData=Kn,vl.createDraggableData=dr;var Wa=kl,el=co;function rd(It,$t,zt){if(!It.props.bounds)return[$t,zt];var Ht=It.props.bounds;Ht=typeof Ht=="string"?Ht:Hr(Ht);var Ut=ri(It);if(typeof Ht=="string"){var Kt=Ut.ownerDocument,ln=Kt.defaultView,wn;if(Ht==="parent"?wn=Ut.parentNode:wn=Kt.querySelector(Ht),!(wn instanceof ln.HTMLElement))throw new Error('Bounds selector "'+Ht+'" could not find an element.');var Dn=wn,Fn=ln.getComputedStyle(Ut),Rn=ln.getComputedStyle(Dn);Ht={left:-Ut.offsetLeft+(0,Wa.int)(Rn.paddingLeft)+(0,Wa.int)(Fn.marginLeft),top:-Ut.offsetTop+(0,Wa.int)(Rn.paddingTop)+(0,Wa.int)(Fn.marginTop),right:(0,el.innerWidth)(Dn)-(0,el.outerWidth)(Ut)-Ut.offsetLeft+(0,Wa.int)(Rn.paddingRight)-(0,Wa.int)(Fn.marginRight),bottom:(0,el.innerHeight)(Dn)-(0,el.outerHeight)(Ut)-Ut.offsetTop+(0,Wa.int)(Rn.paddingBottom)-(0,Wa.int)(Fn.marginBottom)}}return(0,Wa.isNum)(Ht.right)&&($t=Math.min($t,Ht.right)),(0,Wa.isNum)(Ht.bottom)&&(zt=Math.min(zt,Ht.bottom)),(0,Wa.isNum)(Ht.left)&&($t=Math.max($t,Ht.left)),(0,Wa.isNum)(Ht.top)&&(zt=Math.max(zt,Ht.top)),[$t,zt]}function Ko(It,$t,zt){var Ht=Math.round($t/It[0])*It[0],Ut=Math.round(zt/It[1])*It[1];return[Ht,Ut]}function Zt(It){return It.props.axis==="both"||It.props.axis==="x"}function dn(It){return It.props.axis==="both"||It.props.axis==="y"}function Mn(It,$t,zt){var Ht=typeof $t=="number"?(0,el.getTouch)(It,$t):null;if(typeof $t=="number"&&!Ht)return null;var Ut=ri(zt),Kt=zt.props.offsetParent||Ut.offsetParent||Ut.ownerDocument.body;return(0,el.offsetXYFromParent)(Ht||It,Kt,zt.props.scale)}function Kn(It,$t,zt){var Ht=It.state,Ut=!(0,Wa.isNum)(Ht.lastX),Kt=ri(It);return Ut?{node:Kt,deltaX:0,deltaY:0,lastX:$t,lastY:zt,x:$t,y:zt}:{node:Kt,deltaX:$t-Ht.lastX,deltaY:zt-Ht.lastY,lastX:Ht.lastX,lastY:Ht.lastY,x:$t,y:zt}}function dr(It,$t){var zt=It.props.scale;return{node:$t.node,x:It.state.x+$t.deltaX/zt,y:It.state.y+$t.deltaY/zt,deltaX:$t.deltaX/zt,deltaY:$t.deltaY/zt,lastX:It.state.x,lastY:It.state.y}}function Hr(It){return{left:It.left,top:It.top,right:It.right,bottom:It.bottom}}function ri(It){var $t=It.findDOMNode();if(!$t)throw new Error("<DraggableCore>: Unmounted during event!");return $t}var ui={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.default=Ii;function Ii(){}function yo(It){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yo=function($t){return typeof $t}:yo=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},yo(It)}Object.defineProperty(ui,"__esModule",{value:!0}),ui.default=void 0;var lo=sd(ya),Zo=ca(yl.exports),Ds=ca(ya),Ms=co,wc=vl,Yl=kl,Bc=ca(Ri);function ca(It){return It&&It.__esModule?It:{default:It}}function od(It){if(typeof WeakMap!="function")return null;var $t=new WeakMap,zt=new WeakMap;return(od=function(Ht){return Ht?zt:$t})(It)}function sd(It,$t){if(!$t&&It&&It.__esModule)return It;if(It===null||yo(It)!=="object"&&typeof It!="function")return{default:It};var zt=od($t);if(zt&&zt.has(It))return zt.get(It);var Ht={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Kt in It)if(Kt!=="default"&&Object.prototype.hasOwnProperty.call(It,Kt)){var ln=Ut?Object.getOwnPropertyDescriptor(It,Kt):null;ln&&(ln.get||ln.set)?Object.defineProperty(Ht,Kt,ln):Ht[Kt]=It[Kt]}return Ht.default=It,zt&&zt.set(It,Ht),Ht}function Ep(It,$t){return Bm(It)||Nd(It,$t)||Sf(It,$t)||ad()}function ad(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sf(It,$t){if(It){if(typeof It=="string")return lu(It,$t);var zt=Object.prototype.toString.call(It).slice(8,-1);if(zt==="Object"&&It.constructor&&(zt=It.constructor.name),zt==="Map"||zt==="Set")return Array.from(It);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return lu(It,$t)}}function lu(It,$t){($t==null||$t>It.length)&&($t=It.length);for(var zt=0,Ht=new Array($t);zt<$t;zt++)Ht[zt]=It[zt];return Ht}function Nd(It,$t){var zt=It==null?null:typeof Symbol<"u"&&It[Symbol.iterator]||It["@@iterator"];if(zt!=null){var Ht=[],Ut=!0,Kt=!1,ln,wn;try{for(zt=zt.call(It);!(Ut=(ln=zt.next()).done)&&(Ht.push(ln.value),!($t&&Ht.length===$t));Ut=!0);}catch(Dn){Kt=!0,wn=Dn}finally{try{!Ut&&zt.return!=null&&zt.return()}finally{if(Kt)throw wn}}return Ht}}function Bm(It){if(Array.isArray(It))return It}function Sp(It,$t){if(!(It instanceof $t))throw new TypeError("Cannot call a class as a function")}function Lg(It,$t){for(var zt=0;zt<$t.length;zt++){var Ht=$t[zt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(It,Ht.key,Ht)}}function Ou(It,$t,zt){return $t&&Lg(It.prototype,$t),zt&&Lg(It,zt),It}function Fm(It,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function");It.prototype=Object.create($t&&$t.prototype,{constructor:{value:It,writable:!0,configurable:!0}}),$t&&ih(It,$t)}function ih(It,$t){return ih=Object.setPrototypeOf||function(zt,Ht){return zt.__proto__=Ht,zt},ih(It,$t)}function zm(It){var $t=Ig();return function(){var zt=ld(It),Ht;if($t){var Ut=ld(this).constructor;Ht=Reflect.construct(zt,arguments,Ut)}else Ht=zt.apply(this,arguments);return Mu(this,Ht)}}function Mu(It,$t){if($t&&(yo($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tl(It)}function tl(It){if(It===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return It}function Ig(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ld(It){return ld=Object.setPrototypeOf?Object.getPrototypeOf:function($t){return $t.__proto__||Object.getPrototypeOf($t)},ld(It)}function Dl(It,$t,zt){return $t in It?Object.defineProperty(It,$t,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[$t]=zt,It}var sc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Fc=sc.mouse,$u=function(It){Fm(zt,It);var $t=zm(zt);function zt(){var Ht;Sp(this,zt);for(var Ut=arguments.length,Kt=new Array(Ut),ln=0;ln<Ut;ln++)Kt[ln]=arguments[ln];return Ht=$t.call.apply($t,[this].concat(Kt)),Dl(tl(Ht),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Dl(tl(Ht),"mounted",!1),Dl(tl(Ht),"handleDragStart",function(wn){if(Ht.props.onMouseDown(wn),!Ht.props.allowAnyClick&&typeof wn.button=="number"&&wn.button!==0)return!1;var Dn=Ht.findDOMNode();if(!Dn||!Dn.ownerDocument||!Dn.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Fn=Dn.ownerDocument;if(!(Ht.props.disabled||!(wn.target instanceof Fn.defaultView.Node)||Ht.props.handle&&!(0,Ms.matchesSelectorAndParentsTo)(wn.target,Ht.props.handle,Dn)||Ht.props.cancel&&(0,Ms.matchesSelectorAndParentsTo)(wn.target,Ht.props.cancel,Dn))){wn.type==="touchstart"&&wn.preventDefault();var Rn=(0,Ms.getTouchIdentifier)(wn);Ht.setState({touchIdentifier:Rn});var ur=(0,wc.getControlPosition)(wn,Rn,tl(Ht));if(ur!=null){var Ar=ur.x,Br=ur.y,Jr=(0,wc.createCoreData)(tl(Ht),Ar,Br);(0,Bc.default)("DraggableCore: handleDragStart: %j",Jr),(0,Bc.default)("calling",Ht.props.onStart);var gi=Ht.props.onStart(wn,Jr);gi===!1||Ht.mounted===!1||(Ht.props.enableUserSelectHack&&(0,Ms.addUserSelectStyles)(Fn),Ht.setState({dragging:!0,lastX:Ar,lastY:Br}),(0,Ms.addEvent)(Fn,Fc.move,Ht.handleDrag),(0,Ms.addEvent)(Fn,Fc.stop,Ht.handleDragStop))}}}),Dl(tl(Ht),"handleDrag",function(wn){var Dn=(0,wc.getControlPosition)(wn,Ht.state.touchIdentifier,tl(Ht));if(Dn!=null){var Fn=Dn.x,Rn=Dn.y;if(Array.isArray(Ht.props.grid)){var ur=Fn-Ht.state.lastX,Ar=Rn-Ht.state.lastY,Br=(0,wc.snapToGrid)(Ht.props.grid,ur,Ar),Jr=Ep(Br,2);if(ur=Jr[0],Ar=Jr[1],!ur&&!Ar)return;Fn=Ht.state.lastX+ur,Rn=Ht.state.lastY+Ar}var gi=(0,wc.createCoreData)(tl(Ht),Fn,Rn);(0,Bc.default)("DraggableCore: handleDrag: %j",gi);var fi=Ht.props.onDrag(wn,gi);if(fi===!1||Ht.mounted===!1){try{Ht.handleDragStop(new MouseEvent("mouseup"))}catch{var Mi=document.createEvent("MouseEvents");Mi.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ht.handleDragStop(Mi)}return}Ht.setState({lastX:Fn,lastY:Rn})}}),Dl(tl(Ht),"handleDragStop",function(wn){if(Ht.state.dragging){var Dn=(0,wc.getControlPosition)(wn,Ht.state.touchIdentifier,tl(Ht));if(Dn!=null){var Fn=Dn.x,Rn=Dn.y,ur=(0,wc.createCoreData)(tl(Ht),Fn,Rn),Ar=Ht.props.onStop(wn,ur);if(Ar===!1||Ht.mounted===!1)return!1;var Br=Ht.findDOMNode();Br&&Ht.props.enableUserSelectHack&&(0,Ms.removeUserSelectStyles)(Br.ownerDocument),(0,Bc.default)("DraggableCore: handleDragStop: %j",ur),Ht.setState({dragging:!1,lastX:NaN,lastY:NaN}),Br&&((0,Bc.default)("DraggableCore: Removing handlers"),(0,Ms.removeEvent)(Br.ownerDocument,Fc.move,Ht.handleDrag),(0,Ms.removeEvent)(Br.ownerDocument,Fc.stop,Ht.handleDragStop))}}}),Dl(tl(Ht),"onMouseDown",function(wn){return Fc=sc.mouse,Ht.handleDragStart(wn)}),Dl(tl(Ht),"onMouseUp",function(wn){return Fc=sc.mouse,Ht.handleDragStop(wn)}),Dl(tl(Ht),"onTouchStart",function(wn){return Fc=sc.touch,Ht.handleDragStart(wn)}),Dl(tl(Ht),"onTouchEnd",function(wn){return Fc=sc.touch,Ht.handleDragStop(wn)}),Ht}return Ou(zt,[{key:"componentDidMount",value:function(){this.mounted=!0;var Ht=this.findDOMNode();Ht&&(0,Ms.addEvent)(Ht,sc.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Ht=this.findDOMNode();if(Ht){var Ut=Ht.ownerDocument;(0,Ms.removeEvent)(Ut,sc.mouse.move,this.handleDrag),(0,Ms.removeEvent)(Ut,sc.touch.move,this.handleDrag),(0,Ms.removeEvent)(Ut,sc.mouse.stop,this.handleDragStop),(0,Ms.removeEvent)(Ut,sc.touch.stop,this.handleDragStop),(0,Ms.removeEvent)(Ht,sc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ms.removeUserSelectStyles)(Ut)}}},{key:"findDOMNode",value:function(){var Ht,Ut,Kt;return(Ht=(Ut=this.props)===null||Ut===void 0||(Kt=Ut.nodeRef)===null||Kt===void 0?void 0:Kt.current)!==null&&Ht!==void 0?Ht:Ds.default.findDOMNode(this)}},{key:"render",value:function(){return lo.cloneElement(lo.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),zt}(lo.Component);ui.default=$u,Dl($u,"displayName","DraggableCore"),Dl($u,"propTypes",{allowAnyClick:Zo.default.bool,disabled:Zo.default.bool,enableUserSelectHack:Zo.default.bool,offsetParent:function(It,$t){if(It[$t]&&It[$t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Zo.default.arrayOf(Zo.default.number),handle:Zo.default.string,cancel:Zo.default.string,nodeRef:Zo.default.object,onStart:Zo.default.func,onDrag:Zo.default.func,onStop:Zo.default.func,onMouseDown:Zo.default.func,scale:Zo.default.number,className:Yl.dontSetMe,style:Yl.dontSetMe,transform:Yl.dontSetMe}),Dl($u,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(It){function $t(bi){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$t=function(zi){return typeof zi}:$t=function(zi){return zi&&typeof Symbol=="function"&&zi.constructor===Symbol&&zi!==Symbol.prototype?"symbol":typeof zi},$t(bi)}Object.defineProperty(It,"__esModule",{value:!0}),Object.defineProperty(It,"DraggableCore",{enumerable:!0,get:function(){return Fn.default}}),It.default=void 0;var zt=Jr(ya),Ht=Ar(yl.exports),Ut=Ar(ya),Kt=Ar(va),ln=co,wn=vl,Dn=kl,Fn=Ar(ui),Rn=Ar(Ri),ur=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function Ar(bi){return bi&&bi.__esModule?bi:{default:bi}}function Br(bi){if(typeof WeakMap!="function")return null;var zi=new WeakMap,Ui=new WeakMap;return(Br=function(Hi){return Hi?Ui:zi})(bi)}function Jr(bi,zi){if(!zi&&bi&&bi.__esModule)return bi;if(bi===null||$t(bi)!=="object"&&typeof bi!="function")return{default:bi};var Ui=Br(zi);if(Ui&&Ui.has(bi))return Ui.get(bi);var Hi={},Xi=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Go in bi)if(Go!=="default"&&Object.prototype.hasOwnProperty.call(bi,Go)){var Va=Xi?Object.getOwnPropertyDescriptor(bi,Go):null;Va&&(Va.get||Va.set)?Object.defineProperty(Hi,Go,Va):Hi[Go]=bi[Go]}return Hi.default=bi,Ui&&Ui.set(bi,Hi),Hi}function gi(){return gi=Object.assign||function(bi){for(var zi=1;zi<arguments.length;zi++){var Ui=arguments[zi];for(var Hi in Ui)Object.prototype.hasOwnProperty.call(Ui,Hi)&&(bi[Hi]=Ui[Hi])}return bi},gi.apply(this,arguments)}function fi(bi,zi){if(bi==null)return{};var Ui=Mi(bi,zi),Hi,Xi;if(Object.getOwnPropertySymbols){var Go=Object.getOwnPropertySymbols(bi);for(Xi=0;Xi<Go.length;Xi++)Hi=Go[Xi],!(zi.indexOf(Hi)>=0)&&(!Object.prototype.propertyIsEnumerable.call(bi,Hi)||(Ui[Hi]=bi[Hi]))}return Ui}function Mi(bi,zi){if(bi==null)return{};var Ui={},Hi=Object.keys(bi),Xi,Go;for(Go=0;Go<Hi.length;Go++)Xi=Hi[Go],!(zi.indexOf(Xi)>=0)&&(Ui[Xi]=bi[Xi]);return Ui}function Vi(bi,zi){var Ui=Object.keys(bi);if(Object.getOwnPropertySymbols){var Hi=Object.getOwnPropertySymbols(bi);zi&&(Hi=Hi.filter(function(Xi){return Object.getOwnPropertyDescriptor(bi,Xi).enumerable})),Ui.push.apply(Ui,Hi)}return Ui}function zo(bi){for(var zi=1;zi<arguments.length;zi++){var Ui=arguments[zi]!=null?arguments[zi]:{};zi%2?Vi(Object(Ui),!0).forEach(function(Hi){Ch(bi,Hi,Ui[Hi])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bi,Object.getOwnPropertyDescriptors(Ui)):Vi(Object(Ui)).forEach(function(Hi){Object.defineProperty(bi,Hi,Object.getOwnPropertyDescriptor(Ui,Hi))})}return bi}function Lo(bi,zi){return Xa(bi)||Ha(bi,zi)||Vo(bi,zi)||Co()}function Co(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vo(bi,zi){if(bi){if(typeof bi=="string")return Io(bi,zi);var Ui=Object.prototype.toString.call(bi).slice(8,-1);if(Ui==="Object"&&bi.constructor&&(Ui=bi.constructor.name),Ui==="Map"||Ui==="Set")return Array.from(bi);if(Ui==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ui))return Io(bi,zi)}}function Io(bi,zi){(zi==null||zi>bi.length)&&(zi=bi.length);for(var Ui=0,Hi=new Array(zi);Ui<zi;Ui++)Hi[Ui]=bi[Ui];return Hi}function Ha(bi,zi){var Ui=bi==null?null:typeof Symbol<"u"&&bi[Symbol.iterator]||bi["@@iterator"];if(Ui!=null){var Hi=[],Xi=!0,Go=!1,Va,Wl;try{for(Ui=Ui.call(bi);!(Xi=(Va=Ui.next()).done)&&(Hi.push(Va.value),!(zi&&Hi.length===zi));Xi=!0);}catch(ma){Go=!0,Wl=ma}finally{try{!Xi&&Ui.return!=null&&Ui.return()}finally{if(Go)throw Wl}}return Hi}}function Xa(bi){if(Array.isArray(bi))return bi}function pa(bi,zi){if(!(bi instanceof zi))throw new TypeError("Cannot call a class as a function")}function ga(bi,zi){for(var Ui=0;Ui<zi.length;Ui++){var Hi=zi[Ui];Hi.enumerable=Hi.enumerable||!1,Hi.configurable=!0,"value"in Hi&&(Hi.writable=!0),Object.defineProperty(bi,Hi.key,Hi)}}function Eh(bi,zi,Ui){return zi&&ga(bi.prototype,zi),Ui&&ga(bi,Ui),bi}function iu(bi,zi){if(typeof zi!="function"&&zi!==null)throw new TypeError("Super expression must either be null or a function");bi.prototype=Object.create(zi&&zi.prototype,{constructor:{value:bi,writable:!0,configurable:!0}}),zi&&xf(bi,zi)}function xf(bi,zi){return xf=Object.setPrototypeOf||function(Ui,Hi){return Ui.__proto__=Hi,Ui},xf(bi,zi)}function Sh(bi){var zi=pv();return function(){var Ui=kg(bi),Hi;if(zi){var Xi=kg(this).constructor;Hi=Reflect.construct(Ui,arguments,Xi)}else Hi=Ui.apply(this,arguments);return Kh(this,Hi)}}function Kh(bi,zi){if(zi&&($t(zi)==="object"||typeof zi=="function"))return zi;if(zi!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vc(bi)}function vc(bi){if(bi===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bi}function pv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kg(bi){return kg=Object.setPrototypeOf?Object.getPrototypeOf:function(zi){return zi.__proto__||Object.getPrototypeOf(zi)},kg(bi)}function Ch(bi,zi,Ui){return zi in bi?Object.defineProperty(bi,zi,{value:Ui,enumerable:!0,configurable:!0,writable:!0}):bi[zi]=Ui,bi}var Oa=function(bi){iu(Ui,bi);var zi=Sh(Ui);function Ui(Hi){var Xi;return pa(this,Ui),Xi=zi.call(this,Hi),Ch(vc(Xi),"onDragStart",function(Go,Va){(0,Rn.default)("Draggable: onDragStart: %j",Va);var Wl=Xi.props.onStart(Go,(0,wn.createDraggableData)(vc(Xi),Va));if(Wl===!1)return!1;Xi.setState({dragging:!0,dragged:!0})}),Ch(vc(Xi),"onDrag",function(Go,Va){if(!Xi.state.dragging)return!1;(0,Rn.default)("Draggable: onDrag: %j",Va);var Wl=(0,wn.createDraggableData)(vc(Xi),Va),ma={x:Wl.x,y:Wl.y};if(Xi.props.bounds){var Ag=ma.x,Od=ma.y;ma.x+=Xi.state.slackX,ma.y+=Xi.state.slackY;var xp=(0,wn.getBoundPosition)(vc(Xi),ma.x,ma.y),Dm=Lo(xp,2),gv=Dm[0],mv=Dm[1];ma.x=gv,ma.y=mv,ma.slackX=Xi.state.slackX+(Ag-ma.x),ma.slackY=Xi.state.slackY+(Od-ma.y),Wl.x=ma.x,Wl.y=ma.y,Wl.deltaX=ma.x-Xi.state.x,Wl.deltaY=ma.y-Xi.state.y}var j_=Xi.props.onDrag(Go,Wl);if(j_===!1)return!1;Xi.setState(ma)}),Ch(vc(Xi),"onDragStop",function(Go,Va){if(!Xi.state.dragging)return!1;var Wl=Xi.props.onStop(Go,(0,wn.createDraggableData)(vc(Xi),Va));if(Wl===!1)return!1;(0,Rn.default)("Draggable: onDragStop: %j",Va);var ma={dragging:!1,slackX:0,slackY:0},Ag=Boolean(Xi.props.position);if(Ag){var Od=Xi.props.position,xp=Od.x,Dm=Od.y;ma.x=xp,ma.y=Dm}Xi.setState(ma)}),Xi.state={dragging:!1,dragged:!1,x:Hi.position?Hi.position.x:Hi.defaultPosition.x,y:Hi.position?Hi.position.y:Hi.defaultPosition.y,prevPropsPosition:zo({},Hi.position),slackX:0,slackY:0,isElementSVG:!1},Hi.position&&!(Hi.onDrag||Hi.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Xi}return Eh(Ui,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Hi,Xi,Go;return(Hi=(Xi=this.props)===null||Xi===void 0||(Go=Xi.nodeRef)===null||Go===void 0?void 0:Go.current)!==null&&Hi!==void 0?Hi:Ut.default.findDOMNode(this)}},{key:"render",value:function(){var Hi,Xi=this.props;Xi.axis,Xi.bounds;var Go=Xi.children,Va=Xi.defaultPosition,Wl=Xi.defaultClassName,ma=Xi.defaultClassNameDragging,Ag=Xi.defaultClassNameDragged,Od=Xi.position,xp=Xi.positionOffset;Xi.scale;var Dm=fi(Xi,ur),gv={},mv=null,j_=Boolean(Od),Yb=!j_||this.state.dragging,Xb=Od||Va,Zb={x:(0,wn.canDragX)(this)&&Yb?this.state.x:Xb.x,y:(0,wn.canDragY)(this)&&Yb?this.state.y:Xb.y};this.state.isElementSVG?mv=(0,ln.createSVGTransform)(Zb,xp):gv=(0,ln.createCSSTransform)(Zb,xp);var jw=(0,Kt.default)(Go.props.className||"",Wl,(Hi={},Ch(Hi,ma,this.state.dragging),Ch(Hi,Ag,this.state.dragged),Hi));return zt.createElement(Fn.default,gi({},Dm,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),zt.cloneElement(zt.Children.only(Go),{className:jw,style:zo(zo({},Go.props.style),gv),transform:mv}))}}],[{key:"getDerivedStateFromProps",value:function(Hi,Xi){var Go=Hi.position,Va=Xi.prevPropsPosition;return Go&&(!Va||Go.x!==Va.x||Go.y!==Va.y)?((0,Rn.default)("Draggable: getDerivedStateFromProps %j",{position:Go,prevPropsPosition:Va}),{x:Go.x,y:Go.y,prevPropsPosition:zo({},Go)}):null}}]),Ui}(zt.Component);It.default=Oa,Ch(Oa,"displayName","Draggable"),Ch(Oa,"propTypes",zo(zo({},Fn.default.propTypes),{},{axis:Ht.default.oneOf(["both","x","y","none"]),bounds:Ht.default.oneOfType([Ht.default.shape({left:Ht.default.number,right:Ht.default.number,top:Ht.default.number,bottom:Ht.default.number}),Ht.default.string,Ht.default.oneOf([!1])]),defaultClassName:Ht.default.string,defaultClassNameDragging:Ht.default.string,defaultClassNameDragged:Ht.default.string,defaultPosition:Ht.default.shape({x:Ht.default.number,y:Ht.default.number}),positionOffset:Ht.default.shape({x:Ht.default.oneOfType([Ht.default.number,Ht.default.string]),y:Ht.default.oneOfType([Ht.default.number,Ht.default.string])}),position:Ht.default.shape({x:Ht.default.number,y:Ht.default.number}),className:Dn.dontSetMe,style:Dn.dontSetMe,transform:Dn.dontSetMe})),Ch(Oa,"defaultProps",zo(zo({},Fn.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(Tl);var Dd=Tl,Cf=Dd.default,Tf=Dd.DraggableCore;la.exports=Cf,la.exports.default=Cf,la.exports.DraggableCore=Tf;var Cp=la.exports,kf=["second","minute","hour","day","week","month","year"];function cd(It,$t){if($t===0)return["just now","right now"];var zt=kf[Math.floor($t/2)];return It>1&&(zt+="s"),[It+" "+zt+" ago","in "+It+" "+zt]}var Pg=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function Og(It,$t){if($t===0)return["\u521A\u521A","\u7247\u523B\u540E"];var zt=Pg[~~($t/2)];return[It+" "+zt+"\u524D",It+" "+zt+"\u540E"]}var Bd={},Ta=function(It,$t){Bd[It]=$t},zc=function(It){return Bd[It]||Bd.en_US},ul=[60,60,24,7,365/7/12,12];function Tp(It){return It instanceof Date?It:!isNaN(It)||/^\d+$/.test(It)?new Date(parseInt(It)):(It=(It||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(It))}function ac(It,$t){var zt=It<0?1:0;It=Math.abs(It);for(var Ht=It,Ut=0;It>=ul[Ut]&&Ut<ul.length;Ut++)It/=ul[Ut];return It=Math.floor(It),Ut*=2,It>(Ut===0?9:1)&&(Ut+=1),$t(It,Ut,Ht)[zt].replace("%s",It.toString())}function Fd(It,$t){var zt=$t?Tp($t):new Date;return(+zt-+Tp(It))/1e3}function kp(It){for(var $t=1,zt=0,Ht=Math.abs(It);It>=ul[zt]&&zt<ul.length;zt++)It/=ul[zt],$t*=ul[zt];return Ht=Ht%$t,Ht=Ht?$t-Ht:$t,Math.ceil(Ht)}var Mg=function(It,$t,zt){var Ht=Fd(It,zt&&zt.relativeDate);return ac(Ht,zc($t))},oh="timeago-id";function Hm(It){return It.getAttribute("datetime")}function Ah(It,$t){It.setAttribute(oh,$t)}function Af(It){return parseInt(It.getAttribute(oh))}var zd={},Hd=function(It){clearTimeout(It),delete zd[It]};function Hc(It,$t,zt,Ht){Hd(Af(It));var Ut=Ht.relativeDate,Kt=Ht.minInterval,ln=Fd($t,Ut);It.innerText=ac(ln,zt);var wn=setTimeout(function(){Hc(It,$t,zt,Ht)},Math.min(Math.max(kp(ln),Kt||1)*1e3,2147483647));zd[wn]=0,Ah(It,wn)}function Lf(It){It?Hd(Af(It)):Object.keys(zd).forEach(Hd)}function If(It,$t,zt){var Ht=It.length?It:[It];return Ht.forEach(function(Ut){Hc(Ut,Hm(Ut),zc($t),zt||{})}),Ht}Ta("en_US",cd),Ta("zh_CN",Og);var Lh=function(){var It=function($t,zt){return It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ht,Ut){Ht.__proto__=Ut}||function(Ht,Ut){for(var Kt in Ut)Ut.hasOwnProperty(Kt)&&(Ht[Kt]=Ut[Kt])},It($t,zt)};return function($t,zt){It($t,zt);function Ht(){this.constructor=$t}$t.prototype=zt===null?Object.create(zt):(Ht.prototype=zt.prototype,new Ht)}}(),Pf=function(){return Pf=Object.assign||function(It){for(var $t,zt=1,Ht=arguments.length;zt<Ht;zt++){$t=arguments[zt];for(var Ut in $t)Object.prototype.hasOwnProperty.call($t,Ut)&&(It[Ut]=$t[Ut])}return It},Pf.apply(this,arguments)},_l=function(It,$t){var zt={};for(var Ht in It)Object.prototype.hasOwnProperty.call(It,Ht)&&$t.indexOf(Ht)<0&&(zt[Ht]=It[Ht]);if(It!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Ht=Object.getOwnPropertySymbols(It);Ut<Ht.length;Ut++)$t.indexOf(Ht[Ut])<0&&Object.prototype.propertyIsEnumerable.call(It,Ht[Ut])&&(zt[Ht[Ut]]=It[Ht[Ut]]);return zt},Vd=function(It){return""+(It instanceof Date?It.getTime():It)},Ap=function(It){Lh($t,It);function $t(){var zt=It!==null&&It.apply(this,arguments)||this;return zt.dom=null,zt}return $t.prototype.componentDidMount=function(){this.renderTimeAgo()},$t.prototype.componentDidUpdate=function(){this.renderTimeAgo()},$t.prototype.renderTimeAgo=function(){var zt=this.props,Ht=zt.live,Ut=zt.datetime,Kt=zt.locale,ln=zt.opts;Lf(this.dom),Ht!==!1&&(this.dom.setAttribute("datetime",Vd(Ut)),If(this.dom,Kt,ln))},$t.prototype.componentWillUnmount=function(){Lf(this.dom)},$t.prototype.render=function(){var zt=this,Ht=this.props,Ut=Ht.datetime;Ht.live;var Kt=Ht.locale,ln=Ht.opts,wn=_l(Ht,["datetime","live","locale","opts"]);return pn("time",Pf({ref:function(Dn){zt.dom=Dn}},wn),Mg(Ut,Kt,ln))},$t.defaultProps={live:!0,className:""},$t}(Qi);function Lp(It,$t){const zt=Ht=>{It.current&&!It.current.contains(event.target)&&$t()};Ci(()=>(document.addEventListener("mousedown",zt),()=>document.removeEventListener("mousedown",zt)))}var Ip=Object.prototype.toString,Pp=function(It){var $t=Ip.call(It),zt=$t==="[object Arguments]";return zt||(zt=$t!=="[object Array]"&&It!==null&&typeof It=="object"&&typeof It.length=="number"&&It.length>=0&&Ip.call(It.callee)==="[object Function]"),zt},Of;if(!Object.keys){var ud=Object.prototype.hasOwnProperty,jd=Object.prototype.toString,$g=Pp,hd=Object.prototype.propertyIsEnumerable,Rg=!hd.call({toString:null},"toString"),Op=hd.call(function(){},"prototype"),Ud=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Mt=function(It){var $t=It.constructor;return $t&&$t.prototype===It},jt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},tn=function(){if(typeof window>"u")return!1;for(var It in window)try{if(!jt["$"+It]&&ud.call(window,It)&&window[It]!==null&&typeof window[It]=="object")try{Mt(window[It])}catch{return!0}}catch{return!0}return!1}(),gn=function(It){if(typeof window>"u"||!tn)return Mt(It);try{return Mt(It)}catch{return!1}};Of=function(It){var $t=It!==null&&typeof It=="object",zt=jd.call(It)==="[object Function]",Ht=$g(It),Ut=$t&&jd.call(It)==="[object String]",Kt=[];if(!$t&&!zt&&!Ht)throw new TypeError("Object.keys called on a non-object");var ln=Op&&zt;if(Ut&&It.length>0&&!ud.call(It,0))for(var wn=0;wn<It.length;++wn)Kt.push(String(wn));if(Ht&&It.length>0)for(var Dn=0;Dn<It.length;++Dn)Kt.push(String(Dn));else for(var Fn in It)!(ln&&Fn==="prototype")&&ud.call(It,Fn)&&Kt.push(String(Fn));if(Rg)for(var Rn=gn(It),ur=0;ur<Ud.length;++ur)!(Rn&&Ud[ur]==="constructor")&&ud.call(It,Ud[ur])&&Kt.push(Ud[ur]);return Kt}}var $n=Of,tr=Array.prototype.slice,Ir=Pp,Xr=Object.keys,ii=Xr?function(It){return Xr(It)}:$n,yi=Object.keys;ii.shim=function(){if(Object.keys){var It=function(){var $t=Object.keys(arguments);return $t&&$t.length===arguments.length}(1,2);It||(Object.keys=function($t){return Ir($t)?yi(tr.call($t)):yi($t)})}else Object.keys=ii;return Object.keys||ii};var Gi=ii,Oo=Gi,ps=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Xl=Object.prototype.toString,sh=Array.prototype.concat,Ih=Object.defineProperty,Ec=function(It){return typeof It=="function"&&Xl.call(It)==="[object Function]"},Mf=function(){var It={};try{Ih(It,"x",{enumerable:!1,value:It});for(var $t in It)return!1;return It.x===It}catch{return!1}},Mp=Ih&&Mf(),Ng=function(It,$t,zt,Ht){$t in It&&(!Ec(Ht)||!Ht())||(Mp?Ih(It,$t,{configurable:!0,enumerable:!1,value:zt,writable:!0}):It[$t]=zt)},$p=function(It,$t){var zt=arguments.length>2?arguments[2]:{},Ht=Oo($t);ps&&(Ht=sh.call(Ht,Object.getOwnPropertySymbols($t)));for(var Ut=0;Ut<Ht.length;Ut+=1)Ng(It,Ht[Ut],$t[Ht[Ut]],zt[Ht[Ut]])};$p.supportsDescriptors=!!Mp;var ah=$p,dd={exports:{}},$f="Function.prototype.bind called on incompatible ",ea=Array.prototype.slice,Gd=Object.prototype.toString,Dg="[object Function]",Bg=function(It){var $t=this;if(typeof $t!="function"||Gd.call($t)!==Dg)throw new TypeError($f+$t);for(var zt=ea.call(arguments,1),Ht,Ut=function(){if(this instanceof Ht){var Fn=$t.apply(this,zt.concat(ea.call(arguments)));return Object(Fn)===Fn?Fn:this}else return $t.apply(It,zt.concat(ea.call(arguments)))},Kt=Math.max(0,$t.length-zt.length),ln=[],wn=0;wn<Kt;wn++)ln.push("$"+wn);if(Ht=Function("binder","return function ("+ln.join(",")+"){ return binder.apply(this,arguments); }")(Ut),$t.prototype){var Dn=function(){};Dn.prototype=$t.prototype,Ht.prototype=new Dn,Dn.prototype=null}return Ht},fd=Bg,pd=Function.prototype.bind||fd,Rf=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var It={},$t=Symbol("test"),zt=Object($t);if(typeof $t=="string"||Object.prototype.toString.call($t)!=="[object Symbol]"||Object.prototype.toString.call(zt)!=="[object Symbol]")return!1;var Ht=42;It[$t]=Ht;for($t in It)return!1;if(typeof Object.keys=="function"&&Object.keys(It).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(It).length!==0)return!1;var Ut=Object.getOwnPropertySymbols(It);if(Ut.length!==1||Ut[0]!==$t||!Object.prototype.propertyIsEnumerable.call(It,$t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var Kt=Object.getOwnPropertyDescriptor(It,$t);if(Kt.value!==Ht||Kt.enumerable!==!0)return!1}return!0},Rp=typeof Symbol<"u"&&Symbol,Wd=Rf,Vm=function(){return typeof Rp!="function"||typeof Symbol!="function"||typeof Rp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Wd()},Nf=pd,jm=Nf.call(Function.call,Object.prototype.hasOwnProperty),Gs,Ph=SyntaxError,Np=Function,Oh=TypeError,Fg=function(It){try{return Np('"use strict"; return ('+It+").constructor;")()}catch{}},gd=Object.getOwnPropertyDescriptor;if(gd)try{gd({},"")}catch{gd=null}var Um=function(){throw new Oh},g1=gd?function(){try{return arguments.callee,Um}catch{try{return gd(arguments,"callee").get}catch{return Um}}}():Um,cu=Vm(),md=Object.getPrototypeOf||function(It){return It.__proto__},qa={},Ru=typeof Uint8Array>"u"?Gs:md(Uint8Array),Wo={"%AggregateError%":typeof AggregateError>"u"?Gs:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Gs:ArrayBuffer,"%ArrayIteratorPrototype%":cu?md([][Symbol.iterator]()):Gs,"%AsyncFromSyncIteratorPrototype%":Gs,"%AsyncFunction%":qa,"%AsyncGenerator%":qa,"%AsyncGeneratorFunction%":qa,"%AsyncIteratorPrototype%":qa,"%Atomics%":typeof Atomics>"u"?Gs:Atomics,"%BigInt%":typeof BigInt>"u"?Gs:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Gs:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Gs:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Gs:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Gs:FinalizationRegistry,"%Function%":Np,"%GeneratorFunction%":qa,"%Int8Array%":typeof Int8Array>"u"?Gs:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Gs:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Gs:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":cu?md(md([][Symbol.iterator]())):Gs,"%JSON%":typeof JSON=="object"?JSON:Gs,"%Map%":typeof Map>"u"?Gs:Map,"%MapIteratorPrototype%":typeof Map>"u"||!cu?Gs:md(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Gs:Promise,"%Proxy%":typeof Proxy>"u"?Gs:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Gs:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Gs:Set,"%SetIteratorPrototype%":typeof Set>"u"||!cu?Gs:md(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Gs:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":cu?md(""[Symbol.iterator]()):Gs,"%Symbol%":cu?Symbol:Gs,"%SyntaxError%":Ph,"%ThrowTypeError%":g1,"%TypedArray%":Ru,"%TypeError%":Oh,"%Uint8Array%":typeof Uint8Array>"u"?Gs:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Gs:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Gs:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Gs:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Gs:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Gs:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Gs:WeakSet},gs=function It($t){var zt;if($t==="%AsyncFunction%")zt=Fg("async function () {}");else if($t==="%GeneratorFunction%")zt=Fg("function* () {}");else if($t==="%AsyncGeneratorFunction%")zt=Fg("async function* () {}");else if($t==="%AsyncGenerator%"){var Ht=It("%AsyncGeneratorFunction%");Ht&&(zt=Ht.prototype)}else if($t==="%AsyncIteratorPrototype%"){var Ut=It("%AsyncGenerator%");Ut&&(zt=md(Ut.prototype))}return Wo[$t]=zt,zt},as={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Jo=pd,Qo=jm,ys=Jo.call(Function.call,Array.prototype.concat),vs=Jo.call(Function.apply,Array.prototype.splice),ls=Jo.call(Function.call,String.prototype.replace),es=Jo.call(Function.call,String.prototype.slice),_s=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bs=/\\(\\)?/g,xs=function(It){var $t=es(It,0,1),zt=es(It,-1);if($t==="%"&&zt!=="%")throw new Ph("invalid intrinsic syntax, expected closing `%`");if(zt==="%"&&$t!=="%")throw new Ph("invalid intrinsic syntax, expected opening `%`");var Ht=[];return ls(It,_s,function(Ut,Kt,ln,wn){Ht[Ht.length]=ln?ls(wn,bs,"$1"):Kt||Ut}),Ht},ws=function(It,$t){var zt=It,Ht;if(Qo(as,zt)&&(Ht=as[zt],zt="%"+Ht[0]+"%"),Qo(Wo,zt)){var Ut=Wo[zt];if(Ut===qa&&(Ut=gs(zt)),typeof Ut>"u"&&!$t)throw new Oh("intrinsic "+It+" exists, but is not available. Please file an issue!");return{alias:Ht,name:zt,value:Ut}}throw new Ph("intrinsic "+It+" does not exist!")},To=function(It,$t){if(typeof It!="string"||It.length===0)throw new Oh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $t!="boolean")throw new Oh('"allowMissing" argument must be a boolean');var zt=xs(It),Ht=zt.length>0?zt[0]:"",Ut=ws("%"+Ht+"%",$t),Kt=Ut.name,ln=Ut.value,wn=!1,Dn=Ut.alias;Dn&&(Ht=Dn[0],vs(zt,ys([0,1],Dn)));for(var Fn=1,Rn=!0;Fn<zt.length;Fn+=1){var ur=zt[Fn],Ar=es(ur,0,1),Br=es(ur,-1);if((Ar==='"'||Ar==="'"||Ar==="`"||Br==='"'||Br==="'"||Br==="`")&&Ar!==Br)throw new Ph("property names with quotes must have matching quotes");if((ur==="constructor"||!Rn)&&(wn=!0),Ht+="."+ur,Kt="%"+Ht+"%",Qo(Wo,Kt))ln=Wo[Kt];else if(ln!=null){if(!(ur in ln)){if(!$t)throw new Oh("base intrinsic for "+It+" exists, but the property is not available.");return}if(gd&&Fn+1>=zt.length){var Jr=gd(ln,ur);Rn=!!Jr,Rn&&"get"in Jr&&!("originalValue"in Jr.get)?ln=Jr.get:ln=ln[ur]}else Rn=Qo(ln,ur),ln=ln[ur];Rn&&!wn&&(Wo[Kt]=ln)}}return ln};(function(It){var $t=pd,zt=To,Ht=zt("%Function.prototype.apply%"),Ut=zt("%Function.prototype.call%"),Kt=zt("%Reflect.apply%",!0)||$t.call(Ut,Ht),ln=zt("%Object.getOwnPropertyDescriptor%",!0),wn=zt("%Object.defineProperty%",!0),Dn=zt("%Math.max%");if(wn)try{wn({},"a",{value:1})}catch{wn=null}It.exports=function(Rn){var ur=Kt($t,Ut,arguments);if(ln&&wn){var Ar=ln(ur,"length");Ar.configurable&&wn(ur,"length",{value:1+Dn(0,Rn.length-(arguments.length-1))})}return ur};var Fn=function(){return Kt($t,Ht,arguments)};wn?wn(It.exports,"apply",{value:Fn}):It.exports.apply=Fn})(dd);var cs=To,us=dd.exports,Es=us(cs("String.prototype.indexOf")),Uo=function(It,$t){var zt=cs(It,!!$t);return typeof zt=="function"&&Es(It,".prototype.")>-1?us(zt):zt},Ss=To,Cs=Ss("%TypeError%"),Ts=function(It,$t){if(It==null)throw new Cs($t||"Cannot call method on "+It);return It},ts=Ts,ks=To,hs=ks("%Array%"),Gm=!hs.isArray&&Uo("Object.prototype.toString"),Wm=hs.isArray||function(It){return Gm(It)==="[object Array]"},zg=To,qm=Uo,Ym=zg("%TypeError%"),Xm=Wm,Zm=zg("%Reflect.apply%",!0)||qm("%Function.prototype.apply%"),Km=function(It,$t){var zt=arguments.length>2?arguments[2]:[];if(!Xm(zt))throw new Ym("Assertion failed: optional `argumentsList`, if provided, must be a List");return Zm(It,$t,zt)},Yi={},qi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Yi}),uo=Rl(qi),no=typeof Map=="function"&&Map.prototype,So=Object.getOwnPropertyDescriptor&&no?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,vo=no&&So&&typeof So.get=="function"?So.get:null,As=no&&Map.prototype.forEach,ds=typeof Set=="function"&&Set.prototype,Bi=Object.getOwnPropertyDescriptor&&ds?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Jn=ds&&Bi&&typeof Bi.get=="function"?Bi.get:null,Jm=ds&&Set.prototype.forEach,vv=typeof WeakMap=="function"&&WeakMap.prototype,Dp=vv?WeakMap.prototype.has:null,_v=typeof WeakSet=="function"&&WeakSet.prototype,Bp=_v?WeakSet.prototype.has:null,bv=typeof WeakRef=="function"&&WeakRef.prototype,m1=bv?WeakRef.prototype.deref:null,xv=Boolean.prototype.valueOf,y1=Object.prototype.toString,v1=Function.prototype.toString,_1=String.prototype.match,Df=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Fp=Object.getOwnPropertySymbols,Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",e0=Object.prototype.propertyIsEnumerable,n0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(It){return It.__proto__}:null),Hg=uo.custom,r0=Hg&&s0(Hg)?Hg:null,Bl=typeof Symbol=="function"&&typeof Symbol.toStringTag<"u"?Symbol.toStringTag:null,wv=function It($t,zt,Ht,Ut){var Kt=zt||{};if(yd(Kt,"quoteStyle")&&Kt.quoteStyle!=="single"&&Kt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(yd(Kt,"maxStringLength")&&(typeof Kt.maxStringLength=="number"?Kt.maxStringLength<0&&Kt.maxStringLength!==1/0:Kt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ln=yd(Kt,"customInspect")?Kt.customInspect:!0;if(typeof ln!="boolean"&&ln!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(yd(Kt,"indent")&&Kt.indent!==null&&Kt.indent!=="	"&&!(parseInt(Kt.indent,10)===Kt.indent&&Kt.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(typeof $t>"u")return"undefined";if($t===null)return"null";if(typeof $t=="boolean")return $t?"true":"false";if(typeof $t=="string")return l0($t,Kt);if(typeof $t=="number")return $t===0?1/0/$t>0?"0":"-0":String($t);if(typeof $t=="bigint")return String($t)+"n";var wn=typeof Kt.depth>"u"?5:Kt.depth;if(typeof Ht>"u"&&(Ht=0),Ht>=wn&&wn>0&&typeof $t=="object")return Vg($t)?"[Array]":"[Object]";var Dn=A1(Kt,Ht);if(typeof Ut>"u")Ut=[];else if(a0(Ut,$t)>=0)return"[Circular]";function Fn(pa,ga,Eh){if(ga&&(Ut=Ut.slice(),Ut.push(ga)),Eh){var iu={depth:Kt.depth};return yd(Kt,"quoteStyle")&&(iu.quoteStyle=Kt.quoteStyle),It(pa,iu,Ht+1,Ut)}return It(pa,Kt,Ht+1,Ut)}if(typeof $t=="function"){var Rn=Cv($t),ur=jg($t,Fn);return"[Function"+(Rn?": "+Rn:" (anonymous)")+"]"+(ur.length>0?" { "+ur.join(", ")+" }":"")}if(s0($t)){var Ar=Bf?String($t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Qm.call($t);return typeof $t=="object"&&!Bf?zp(Ar):Ar}if(Lv($t)){for(var Br="<"+String($t.nodeName).toLowerCase(),Jr=$t.attributes||[],gi=0;gi<Jr.length;gi++)Br+=" "+Jr[gi].name+"="+i0(b1(Jr[gi].value),"double",Kt);return Br+=">",$t.childNodes&&$t.childNodes.length&&(Br+="..."),Br+="</"+String($t.nodeName).toLowerCase()+">",Br}if(Vg($t)){if($t.length===0)return"[]";var fi=jg($t,Fn);return Dn&&!Pv(fi)?"["+u0(fi,Dn)+"]":"[ "+fi.join(", ")+" ]"}if(o0($t)){var Mi=jg($t,Fn);return Mi.length===0?"["+String($t)+"]":"{ ["+String($t)+"] "+Mi.join(", ")+" }"}if(typeof $t=="object"&&ln){if(r0&&typeof $t[r0]=="function")return $t[r0]();if(ln!=="symbol"&&typeof $t.inspect=="function")return $t.inspect()}if(C1($t)){var Vi=[];return As.call($t,function(pa,ga){Vi.push(Fn(ga,$t,!0)+" => "+Fn(pa,$t))}),k1("Map",vo.call($t),Vi,Dn)}if(T1($t)){var zo=[];return Jm.call($t,function(pa){zo.push(Fn(pa,$t))}),k1("Set",Jn.call($t),zo,Dn)}if(Tv($t))return c0("WeakMap");if(Av($t))return c0("WeakSet");if(kv($t))return c0("WeakRef");if(w1($t))return zp(Fn(Number($t)));if(S1($t))return zp(Fn(Df.call($t)));if(E1($t))return zp(xv.call($t));if(Sv($t))return zp(Fn(String($t)));if(!Ev($t)&&!x1($t)){var Lo=jg($t,Fn),Co=n0?n0($t)===Object.prototype:$t instanceof Object||$t.constructor===Object,Vo=$t instanceof Object?"":"null prototype",Io=!Co&&Bl&&Object($t)===$t&&Bl in $t?Mh($t).slice(8,-1):Vo?"Object":"",Ha=Co||typeof $t.constructor!="function"?"":$t.constructor.name?$t.constructor.name+" ":"",Xa=Ha+(Io||Vo?"["+[].concat(Io||[],Vo||[]).join(": ")+"] ":"");return Lo.length===0?Xa+"{}":Dn?Xa+"{"+u0(Lo,Dn)+"}":Xa+"{ "+Lo.join(", ")+" }"}return String($t)};function i0(It,$t,zt){var Ht=(zt.quoteStyle||$t)==="double"?'"':"'";return Ht+It+Ht}function b1(It){return String(It).replace(/"/g,"&quot;")}function Vg(It){return Mh(It)==="[object Array]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function Ev(It){return Mh(It)==="[object Date]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function x1(It){return Mh(It)==="[object RegExp]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function o0(It){return Mh(It)==="[object Error]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function Sv(It){return Mh(It)==="[object String]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function w1(It){return Mh(It)==="[object Number]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function E1(It){return Mh(It)==="[object Boolean]"&&(!Bl||!(typeof It=="object"&&Bl in It))}function s0(It){if(Bf)return It&&typeof It=="object"&&It instanceof Symbol;if(typeof It=="symbol")return!0;if(!It||typeof It!="object"||!Qm)return!1;try{return Qm.call(It),!0}catch{}return!1}function S1(It){if(!It||typeof It!="object"||!Df)return!1;try{return Df.call(It),!0}catch{}return!1}var lh=Object.prototype.hasOwnProperty||function(It){return It in this};function yd(It,$t){return lh.call(It,$t)}function Mh(It){return y1.call(It)}function Cv(It){if(It.name)return It.name;var $t=_1.call(v1.call(It),/^function\s*([\w$]+)/);return $t?$t[1]:null}function a0(It,$t){if(It.indexOf)return It.indexOf($t);for(var zt=0,Ht=It.length;zt<Ht;zt++)if(It[zt]===$t)return zt;return-1}function C1(It){if(!vo||!It||typeof It!="object")return!1;try{vo.call(It);try{Jn.call(It)}catch{return!0}return It instanceof Map}catch{}return!1}function Tv(It){if(!Dp||!It||typeof It!="object")return!1;try{Dp.call(It,Dp);try{Bp.call(It,Bp)}catch{return!0}return It instanceof WeakMap}catch{}return!1}function kv(It){if(!m1||!It||typeof It!="object")return!1;try{return m1.call(It),!0}catch{}return!1}function T1(It){if(!Jn||!It||typeof It!="object")return!1;try{Jn.call(It);try{vo.call(It)}catch{return!0}return It instanceof Set}catch{}return!1}function Av(It){if(!Bp||!It||typeof It!="object")return!1;try{Bp.call(It,Bp);try{Dp.call(It,Dp)}catch{return!0}return It instanceof WeakSet}catch{}return!1}function Lv(It){return!It||typeof It!="object"?!1:typeof HTMLElement<"u"&&It instanceof HTMLElement?!0:typeof It.nodeName=="string"&&typeof It.getAttribute=="function"}function l0(It,$t){if(It.length>$t.maxStringLength){var zt=It.length-$t.maxStringLength,Ht="... "+zt+" more character"+(zt>1?"s":"");return l0(It.slice(0,$t.maxStringLength),$t)+Ht}var Ut=It.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Iv);return i0(Ut,"single",$t)}function Iv(It){var $t=It.charCodeAt(0),zt={8:"b",9:"t",10:"n",12:"f",13:"r"}[$t];return zt?"\\"+zt:"\\x"+($t<16?"0":"")+$t.toString(16).toUpperCase()}function zp(It){return"Object("+It+")"}function c0(It){return It+" { ? }"}function k1(It,$t,zt,Ht){var Ut=Ht?u0(zt,Ht):zt.join(", ");return It+" ("+$t+") {"+Ut+"}"}function Pv(It){for(var $t=0;$t<It.length;$t++)if(a0(It[$t],`
`)>=0)return!1;return!0}function A1(It,$t){var zt;if(It.indent==="	")zt="	";else if(typeof It.indent=="number"&&It.indent>0)zt=Array(It.indent+1).join(" ");else return null;return{base:zt,prev:Array($t+1).join(zt)}}function u0(It,$t){if(It.length===0)return"";var zt=`
`+$t.prev+$t.base;return zt+It.join(","+zt)+`
`+$t.prev}function jg(It,$t){var zt=Vg(It),Ht=[];if(zt){Ht.length=It.length;for(var Ut=0;Ut<It.length;Ut++)Ht[Ut]=yd(It,Ut)?$t(It[Ut],It):""}var Kt=typeof Fp=="function"?Fp(It):[],ln;if(Bf){ln={};for(var wn=0;wn<Kt.length;wn++)ln["$"+Kt[wn]]=Kt[wn]}for(var Dn in It)!yd(It,Dn)||zt&&String(Number(Dn))===Dn&&Dn<It.length||Bf&&ln["$"+Dn]instanceof Symbol||(/[^\w$]/.test(Dn)?Ht.push($t(Dn,It)+": "+$t(It[Dn],It)):Ht.push(Dn+": "+$t(It[Dn],It)));if(typeof Fp=="function")for(var Fn=0;Fn<Kt.length;Fn++)e0.call(It,Kt[Fn])&&Ht.push("["+$t(Kt[Fn])+"]: "+$t(It[Kt[Fn]],It));return Ht}var h0=function(It){return typeof It=="string"||typeof It=="symbol"},L1=function(It){if(It===null)return"Null";if(typeof It>"u")return"Undefined";if(typeof It=="function"||typeof It=="object")return"Object";if(typeof It=="number")return"Number";if(typeof It=="boolean")return"Boolean";if(typeof It=="string")return"String"},Ug=L1,vd=function(It){return typeof It=="symbol"?"Symbol":typeof It=="bigint"?"BigInt":Ug(It)},Gg=To,d0=Gg("%TypeError%"),Ov=wv,I1=h0,Mv=vd,P1=function(It,$t){if(Mv(It)!=="Object")throw new d0("Assertion failed: Type(O) is not Object");if(!I1($t))throw new d0("Assertion failed: IsPropertyKey(P) is not true, got "+Ov($t));return It[$t]},Wg=To,Hp=Wg("%TypeError%"),Vp=h0,jp=vd,O1=function(It,$t){if(jp(It)!=="Object")throw new Hp("Assertion failed: `O` must be an Object");if(!Vp($t))throw new Hp("Assertion failed: `P` must be a Property Key");return $t in It},Ff=Function.prototype.toString,ch=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,zf,qg;if(typeof ch=="function"&&typeof Object.defineProperty=="function")try{zf=Object.defineProperty({},"length",{get:function(){throw qg}}),qg={},ch(function(){throw 42},null,zf)}catch(It){It!==qg&&(ch=null)}else ch=null;var $v=/^\s*class\b/,f0=function(It){try{var $t=Ff.call(It);return $v.test($t)}catch{return!1}},M1=function(It){try{return f0(It)?!1:(Ff.call(It),!0)}catch{return!1}},Rv=Object.prototype.toString,p0="[object Function]",$1="[object GeneratorFunction]",Nv=typeof Symbol=="function"&&!!Symbol.toStringTag,qd=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{},_d=ch?function(It){if(It===qd)return!0;if(!It||typeof It!="function"&&typeof It!="object")return!1;if(typeof It=="function"&&!It.prototype)return!0;try{ch(It,null,zf)}catch($t){if($t!==qg)return!1}return!f0(It)}:function(It){if(It===qd)return!0;if(!It||typeof It!="function"&&typeof It!="object")return!1;if(typeof It=="function"&&!It.prototype)return!0;if(Nv)return M1(It);if(f0(It))return!1;var $t=Rv.call(It);return $t===p0||$t===$1},R1=_d,N1=To,D1=N1("%Math%"),g0=N1("%Number%"),Dv=g0.MAX_SAFE_INTEGER||D1.pow(2,53)-1,Bv=To,B1=Bv("%Math.abs%"),Fv=function(It){return B1(It)},Hf=Math.floor,Vc=function(It){return Hf(It)},Vf=function(It){return It===null||typeof It!="function"&&typeof It!="object"},Zl=Object.prototype.toString,ta=Vf,zv=_d,F1={"[[DefaultValue]]":function(It){var $t;if(arguments.length>1?$t=arguments[1]:$t=Zl.call(It)==="[object Date]"?String:Number,$t===String||$t===Number){var zt=$t===String?["toString","valueOf"]:["valueOf","toString"],Ht,Ut;for(Ut=0;Ut<zt.length;++Ut)if(zv(It[zt[Ut]])&&(Ht=It[zt[Ut]](),ta(Ht)))return Ht;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}},m0=function(It){return ta(It)?It:arguments.length>1?F1["[[DefaultValue]]"](It,arguments[1]):F1["[[DefaultValue]]"](It)},Hv=m0,z1=Hv,H1=function(It){var $t=z1(It,Number);if(typeof $t!="string")return+$t;var zt=$t.replace(/^[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+|[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+$/g,"");return/^0[ob]|^[+-]0x/.test(zt)?NaN:+zt},y0=Number.isNaN||function(It){return It!==It},V1=Number.isNaN||function(It){return It!==It},j1=Number.isFinite||function(It){return typeof It=="number"&&!V1(It)&&It!==1/0&&It!==-1/0},Vv=function(It){return It>=0?1:-1},jv=Fv,Uv=Vc,U1=H1,G1=y0,W1=j1,q1=Vv,Y1=function(It){var $t=U1(It);return G1($t)?0:$t===0||!W1($t)?$t:q1($t)*Uv(jv($t))},X1=To,Z1=X1("RegExp.prototype.test"),Gv=dd.exports,Wv=function(It){return Gv(Z1,It)},Up=function(It){return It===null||typeof It!="function"&&typeof It!="object"},K1=Rf,v0=function(){return K1()&&!!Symbol.toStringTag},J1=Date.prototype.getDay,Q1=function(It){try{return J1.call(It),!0}catch{return!1}},ey=Object.prototype.toString,qv="[object Date]",ty=v0(),_0=function(It){return typeof It!="object"||It===null?!1:ty?Q1(It):ey.call(It)===qv},Yg={exports:{}},b0=Object.prototype.toString,Xg=Vm();if(Xg){var x0=Symbol.prototype.toString,ny=/^Symbol\(.*\)$/,Yv=function(It){return typeof It.valueOf()!="symbol"?!1:ny.test(x0.call(It))};Yg.exports=function(It){if(typeof It=="symbol")return!0;if(b0.call(It)!=="[object Symbol]")return!1;try{return Yv(It)}catch{return!1}}}else Yg.exports=function(It){return!1};var bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",w0=Vf,$h=_d,E0=_0,S0=Yg.exports,C0=function(It,$t){if(typeof It>"u"||It===null)throw new TypeError("Cannot call method on "+It);if(typeof $t!="string"||$t!=="number"&&$t!=="string")throw new TypeError('hint must be "string" or "number"');var zt=$t==="string"?["toString","valueOf"]:["valueOf","toString"],Ht,Ut,Kt;for(Kt=0;Kt<zt.length;++Kt)if(Ht=It[zt[Kt]],$h(Ht)&&(Ut=Ht.call(It),w0(Ut)))return Ut;throw new TypeError("No default value")},T0=function(It,$t){var zt=It[$t];if(zt!==null&&typeof zt<"u"){if(!$h(zt))throw new TypeError(zt+" returned for property "+$t+" of object "+It+" is not a function");return zt}},k0=function(It){if(w0(It))return It;var $t="default";arguments.length>1&&(arguments[1]===String?$t="string":arguments[1]===Number&&($t="number"));var zt;if(bd&&(Symbol.toPrimitive?zt=T0(It,Symbol.toPrimitive):S0(It)&&(zt=Symbol.prototype.valueOf)),typeof zt<"u"){var Ht=zt.call(It,$t);if(w0(Ht))return Ht;throw new TypeError("unable to convert exotic object to primitive")}return $t==="default"&&(E0(It)||S0(It))&&($t="string"),C0(It,$t==="default"?"number":$t)},Zg=k0,A0=function(It){return arguments.length>1?Zg(It,arguments[1]):Zg(It)},lc=To,L0=lc("%TypeError%"),Kl=lc("%Number%"),Gp=lc("%RegExp%"),Kg=lc("%parseInt%"),Rh=Uo,Jg=Wv,I0=Up,ry=Rh("String.prototype.slice"),iy=Jg(/^0b[01]+$/i),Wp=Jg(/^0o[0-7]+$/i),qp=Jg(/^[-+]0x[0-9a-f]+$/i),oy=["\x85","\u200B","\uFFFE"].join(""),sy=new Gp("["+oy+"]","g"),Qg=Jg(sy),ay=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),ly=new RegExp("(^["+ay+"]+)|(["+ay+"]+$)","g"),cy=Rh("String.prototype.replace"),uh=function(It){return cy(It,ly,"")},Xv=A0,em=function It($t){var zt=I0($t)?$t:Xv($t,Kl);if(typeof zt=="symbol")throw new L0("Cannot convert a Symbol value to a number");if(typeof zt=="bigint")throw new L0("Conversion from 'BigInt' to 'number' is not allowed.");if(typeof zt=="string"){if(iy(zt))return It(Kg(ry(zt,2),2));if(Wp(zt))return It(Kg(ry(zt,2),8));if(Qg(zt)||qp(zt))return NaN;var Ht=uh(zt);if(Ht!==zt)return It(Ht)}return Kl(zt)},uy=Y1,Zv=em,hy=function(It){var $t=Zv(It);return $t!==0&&($t=uy($t)),$t===0?0:$t},dy=Dv,fy=hy,Kv=function(It){var $t=fy(It);return $t<=0?0:$t>dy?dy:$t},Jv=To,py=Jv("%TypeError%"),Qv=P1,Nu=Kv,Nh=vd,Yd=function(It){if(Nh(It)!=="Object")throw new py("Assertion failed: `obj` must be an Object");return Nu(Qv(It,"length"))},oa=To,ko=oa("%Object%"),gy=ts,Sc=function(It){return gy(It),ko(It)},Yp=To,jf=Yp("%String%"),Cc=Yp("%TypeError%"),jr=function(It){if(typeof It=="symbol")throw new Cc("Cannot convert a Symbol value to a string");return jf(It)},Xd=String.prototype.valueOf,Dh=function(It){try{return Xd.call(It),!0}catch{return!1}},Uf=Object.prototype.toString,Kr="[object String]",Xp=v0(),_o=function(It){return typeof It=="string"?!0:typeof It!="object"?!1:Xp?Dh(It):Uf.call(It)===Kr},cc=To,my=Uo,uu=cc("%TypeError%"),hu=Km,Zp=P1,oi=O1,jc=R1,Fl=Yd,yy=Sc,fs=jr,Kp=_o,vy=my("String.prototype.split"),Zd=Object("a"),hl=Zd[0]!=="a"||!(0 in Zd),Tc=function(It){var $t=yy(this),zt=hl&&Kp(this)?vy(this,""):$t,Ht=Fl(zt);if(!jc(It))throw new uu("Array.prototype.forEach callback must be a function");var Ut;arguments.length>1&&(Ut=arguments[1]);for(var Kt=0;Kt<Ht;){var ln=fs(Kt),wn=oi(zt,ln);if(wn){var Dn=Zp(zt,ln);hu(It,Ut,[Dn,Kt,zt])}Kt+=1}},eo=function(It){var $t=!0,zt=!0,Ht=!1;if(typeof It=="function"){try{It.call("f",function(Ut,Kt,ln){typeof ln!="object"&&($t=!1)}),It.call([null],function(){"use strict";zt=typeof this=="string"},"x")}catch{Ht=!0}return!Ht&&$t&&zt}return!1},_y=eo,du=Tc,Jp=function(){var It=Array.prototype.forEach;return _y(It)?It:du},hh=ah,Gf=Jp,Uc=function(){var It=Gf();return hh(Array.prototype,{forEach:It},{forEach:function(){return Array.prototype.forEach!==It}}),It},dh=ah,tm=dd.exports,$o=Uo,ua=ts,Kd=Tc,Bh=Jp,Jd=Bh(),fu=Uc,Ni=$o("Array.prototype.slice"),Qd=tm.apply(Jd),Du=function(It,$t){return ua(It),Qd(It,Ni(arguments,1))};dh(Du,{getPolyfill:Bh,implementation:Kd,shim:fu});var po=Du,Bu=ts,nm=Uo,Fu=nm("Object.prototype.propertyIsEnumerable"),kc=nm("Array.prototype.push"),zu=function(It){var $t=Bu(It),zt=[];for(var Ht in $t)Fu($t,Ht)&&kc(zt,[Ht,$t[Ht]]);return zt},Wf=zu,ef=function(){return typeof Object.entries=="function"?Object.entries:Wf},qf=ef,Yf=ah,Ma=function(){var It=qf();return Yf(Object,{entries:It},{entries:function(){return Object.entries!==It}}),It},P0=ah,Xf=dd.exports,Gc=zu,tf=ef,Oi=Ma,by=Xf(tf(),Object);P0(by,{getPolyfill:tf,implementation:Gc,shim:Oi});var Qp=by,qo=ts,rm=jr,eg=Uo,nf=eg("String.prototype.replace"),rf=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,e_=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,Zf=function(){var It=rm(qo(this));return nf(nf(It,rf,""),e_,"")},im=Zf,om="\u200B",xy=function(){return String.prototype.trim&&om.trim()===om?String.prototype.trim:im},wy=ah,Xs=xy,fh=function(){var It=Xs();return wy(String.prototype,{trim:It},{trim:function(){return String.prototype.trim!==It}}),It},O0=dd.exports,Ey=ah,bl=Zf,Kf=xy,Sy=fh,Wc=O0(Kf());Ey(Wc,{getPolyfill:Kf,implementation:bl,shim:Sy});var sm=Wc,Hu=po,Ls=Qp,Ac=jm,pu=sm,qc=function(It){},Il=String.prototype.replace,Fh=String.prototype.split,zl="||||",Jf=function(It){var $t=It%100,zt=$t%10;return $t!==11&&zt===1?0:2<=zt&&zt<=4&&!($t>=12&&$t<=14)?1:2},Cy={pluralTypes:{arabic:function(It){if(It<3)return It;var $t=It%100;return $t>=3&&$t<=10?3:$t>=11?4:5},bosnian_serbian:Jf,chinese:function(){return 0},croatian:Jf,french:function(It){return It>=2?1:0},german:function(It){return It!==1?1:0},russian:Jf,lithuanian:function(It){return It%10==1&&It%100!=11?0:It%10>=2&&It%10<=9&&(It%100<11||It%100>19)?1:2},czech:function(It){return It===1?0:It>=2&&It<=4?1:2},polish:function(It){if(It===1)return 0;var $t=It%10;return 2<=$t&&$t<=4&&(It%100<10||It%100>=20)?1:2},icelandic:function(It){return It%10!=1||It%100==11?1:0},slovenian:function(It){var $t=It%100;return $t===1?0:$t===2?1:$t===3||$t===4?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function t_(It){var $t={};return Hu(Ls(It),function(zt){var Ht=zt[0],Ut=zt[1];Hu(Ut,function(Kt){$t[Kt]=Ht})}),$t}function n_(It,$t){var zt=t_(It.pluralTypeToLanguages);return zt[$t]||zt[Fh.call($t,/-/,1)[0]]||zt.en}function r_(It,$t,zt){return It.pluralTypes[$t](zt)}function i_(){var It={};return function($t,zt){var Ht=It[zt];return Ht&&!$t.pluralTypes[Ht]&&(Ht=null,It[zt]=Ht),Ht||(Ht=n_($t,zt),Ht&&(It[zt]=Ht)),Ht}}function Ty(It){return It.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Lc(It){var $t=It&&It.prefix||"%{",zt=It&&It.suffix||"}";if($t===zl||zt===zl)throw new RangeError('"'+zl+'" token is reserved for pluralization');return new RegExp(Ty($t)+"(.*?)"+Ty(zt),"g")}var M0=i_(),xa=/%\{(.*?)\}/g;function sa(It,$t,zt,Ht,Ut){if(typeof It!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if($t==null)return It;var Kt=It,ln=Ht||xa,wn=typeof $t=="number"?{smart_count:$t}:$t;if(wn.smart_count!=null&&It){var Dn=Ut||Cy,Fn=Fh.call(It,zl),Rn=zt||"en",ur=M0(Dn,Rn),Ar=r_(Dn,ur,wn.smart_count);Kt=pu(Fn[Ar]||Fn[0])}return Kt=Il.call(Kt,ln,function(Br,Jr){return!Ac(wn,Jr)||wn[Jr]==null?Br:wn[Jr]}),Kt}function Yc(It){var $t=It||{};this.phrases={},this.extend($t.phrases||{}),this.currentLocale=$t.locale||"en";var zt=$t.allowMissing?sa:null;this.onMissingKey=typeof $t.onMissingKey=="function"?$t.onMissingKey:zt,this.warn=$t.warn||qc,this.tokenRegex=Lc($t.interpolation),this.pluralRules=$t.pluralRules||Cy}Yc.prototype.locale=function(It){return It&&(this.currentLocale=It),this.currentLocale},Yc.prototype.extend=function(It,$t){Hu(Ls(It||{}),function(zt){var Ht=zt[0],Ut=zt[1],Kt=$t?$t+"."+Ht:Ht;typeof Ut=="object"?this.extend(Ut,Kt):this.phrases[Kt]=Ut},this)},Yc.prototype.unset=function(It,$t){typeof It=="string"?delete this.phrases[It]:Hu(Ls(It||{}),function(zt){var Ht=zt[0],Ut=zt[1],Kt=$t?$t+"."+Ht:Ht;typeof Ut=="object"?this.unset(Ut,Kt):delete this.phrases[Kt]},this)},Yc.prototype.clear=function(){this.phrases={}},Yc.prototype.replace=function(It){this.clear(),this.extend(It)},Yc.prototype.t=function(It,$t){var zt,Ht,Ut=$t==null?{}:$t;if(typeof this.phrases[It]=="string")zt=this.phrases[It];else if(typeof Ut._=="string")zt=Ut._;else if(this.onMissingKey){var Kt=this.onMissingKey;Ht=Kt(It,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+It+'"'),Ht=It;return typeof zt=="string"&&(Ht=sa(zt,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)),Ht},Yc.prototype.has=function(It){return Ac(this.phrases,It)},Yc.transformPhrase=function(It,$t,zt){return sa(It,$t,zt)};var Jl=Yc,zh={"Add a comment...":"\u0625\u0636\u0627\u0641\u0629 \u062A\u0639\u0644\u064A\u0642","Add a reply...":"\u0625\u0636\u0627\u0641\u0629 \u0631\u062F","Add tag...":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0644\u0627\u0645\u0629",Cancel:"\u0625\u0644\u063A\u0627\u0621",Close:"\u0625\u063A\u0644\u0627\u0642",Edit:"Edit",Delete:"Delete",Ok:"\u062A\u0645"},$a={"Add a comment...":"Napsat koment\xE1\u0159...","Add a reply...":"Odpov\u011Bd\u011Bt...","Add tag...":"P\u0159idat \u0161t\xEDtek...",Cancel:"Zru\u0161it",Close:"Zav\u0159\xEDt",Edit:"Upravit",Delete:"Smazat",Ok:"Ok"},Qf={"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...",Cancel:"Abbrechen",Close:"Schliessen",Edit:"Bearbeiten",Delete:"L\xF6schen",Ok:"Ok"},Vu={"Add a comment...":"\u03A3\u03C7\u03BF\u03BB\u03AF\u03B1\u03C3\u03B5...","Add a reply...":"\u0391\u03C0\u03AC\u03BD\u03C4\u03B7\u03C3\u03B5...","Add tag...":"\u03A0\u03C1\u03CC\u03C3\u03B8\u03B5\u03C3\u03B5 tag...",Cancel:"\u0386\u03BA\u03C5\u03C1\u03BF",Close:"\u039A\u03BB\u03B5\u03AF\u03C3\u03B9\u03BC\u03BF",Edit:"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1",Delete:"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE",Ok:"Ok"},ju={"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Cerrar",Edit:"Editar",Delete:"Eliminar",Ok:"Ok"},Ic={"Add a comment...":"Lis\xE4\xE4 kommentti","Add a reply...":"Lis\xE4\xE4 vastaus","Add tag...":"Lis\xE4\xE4 tunniste",Cancel:"Peruuta",Close:"Sulje",Edit:"Muokkaa",Delete:"Poista",Ok:"Ok"},am={"Add a comment...":"Ajouter un commentaire...","Add a reply...":"Ajouter une r\xE9ponse...","Add tag...":"Ajouter une \xE9tiquette...",Cancel:"Annuler",Close:"Fermer",Edit:"\xC9diter",Delete:"Supprimer",Ok:"Ok"},tg={"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Pechar",Edit:"Edit",Delete:"Delete",Ok:"Ok"},ng={"Add a comment...":"\u091F\u093F\u092A\u094D\u092A\u0923\u0940 \u091C\u094B\u0921\u093C\u0947\u0902","Add a reply...":"\u091C\u0935\u093E\u092C \u0926\u0947\u0902","Add tag...":"\u091F\u0948\u0917 \u0932\u0917\u093E\u090F\u0901",Cancel:"\u0930\u0926\u094D\u0926 \u0915\u0930\u0947\u0902",Close:"\u092C\u0902\u0926 \u0915\u0930\u0947\u0902",Edit:"\u0938\u0902\u092A\u093E\u0926\u093F\u0924 \u0915\u0930\u0947\u0902",Delete:"\u0939\u091F\u093E\u090F\u0901",Ok:"\u0920\u0940\u0915 \u0939\u0948"},rg={"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...",Cancel:"Annulla",Close:"Chiudi",Edit:"Edit",Delete:"Delete",Ok:"Ok"},wa={"Add a comment...":"\uB313\uAE00 \uCD94\uAC00","Add a reply...":"\uB2F5\uAE00 \uCD94\uAC00","Add tag...":"\uD0DC\uADF8 \uCD94\uAC00",Cancel:"\uCDE8\uC18C",Close:"\uB2EB\uAE30",Edit:"\uC218\uC815",Delete:"\uC0AD\uC81C",Ok:"\uD655\uC778"},ky={"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...",Cancel:"Afbreken",Close:"Sluiten",Edit:"Bewerken",Delete:"Verwijderen",Ok:"Ok"},Uu={"Add a comment...":"Adicionar um coment\xE1rio...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Fechar",Edit:"Editar",Delete:"Apagar",Ok:"Ok"},$0={"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...",Cancel:"Cancel",Close:"St\xE4ng",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Ay={"Add a comment...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E2D\u0E21\u0E40\u0E21\u0E19\u0E15\u0E4C...","Add a reply...":"\u0E15\u0E2D\u0E1A\u0E01\u0E25\u0E31\u0E1A...","Add tag...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E41\u0E17\u0E47\u0E01...",Cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",Close:"\u0E1B\u0E34\u0E14",Edit:"\u0E41\u0E01\u0E49\u0E44\u0E02",Delete:"\u0E25\u0E1A",Ok:"\u0E15\u0E01\u0E25\u0E07"},$s={"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...",Cancel:"\u0130ptal",Close:"Kapat",Edit:"D\xFCzenle",Delete:"Sil",Ok:"Tamam"},R0={"Add a comment...":"\u062A\u0628\u0635\u0631\u06C1 \u06A9\u0631\u06CC\u06BA","Add a reply...":"\u062C\u0648\u0627\u0628 \u062F\u06CC\u06BA","Add tag...":"\u0679\u06CC\u06AF \u0644\u06AF\u0627\u0626\u06CC\u06BA",Cancel:"\u0645\u0646\u0633\u0648\u062E \u06A9\u0631\u06CC\u06BA",Close:"\u0628\u0646\u062F \u06A9\u0631\u06CC\u06BA",Edit:"\u062A\u0631\u0645\u06CC\u0645 \u06A9\u0631\u06CC\u06BA",Delete:"\u06C1\u0679\u0627\u0626\u06CC\u06BA",Ok:"\u0679\u06BE\u06CC\u06A9 \u06C1\u06D2"},Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});var ig=[["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u064A\u0646","%s \u062B\u0648\u0627\u0646","%s \u062B\u0627\u0646\u064A\u0629"],["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u064A\u0646","%s \u062F\u0642\u0627\u0626\u0642","%s \u062F\u0642\u064A\u0642\u0629"],["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","%s \u0633\u0627\u0639\u0627\u062A","%s \u0633\u0627\u0639\u0629"],["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","%s \u0623\u064A\u0627\u0645","%s \u064A\u0648\u0645\u0627\u064B"],["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","%s \u0623\u0633\u0627\u0628\u064A\u0639","%s \u0623\u0633\u0628\u0648\u0639\u0627\u064B"],["\u0634\u0647\u0631","\u0634\u0647\u0631\u064A\u0646","%s \u0623\u0634\u0647\u0631","%s \u0634\u0647\u0631\u0627\u064B"],["\u0639\u0627\u0645","\u0639\u0627\u0645\u064A\u0646","%s \u0623\u0639\u0648\u0627\u0645","%s \u0639\u0627\u0645\u0627\u064B"]];function Yo(It,$t){return $t<3?ig[It][$t-1]:$t>=3&&$t<=10?ig[It][2]:ig[It][3]}function Ly(It,$t){if($t===0)return["\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A","\u0628\u0639\u062F \u0644\u062D\u0638\u0627\u062A"];var zt=Yo(Math.floor($t/2),It);return["\u0645\u0646\u0630 "+zt,"\u0628\u0639\u062F "+zt]}var o_=Xc.default=Ly,og={};Object.defineProperty(og,"__esModule",{value:!0});function gu(It,$t){var zt=0,Ht=$t==1||$t==3||$t==5||$t==7||$t==9||$t==11||$t==13;return Ht&&It>=5&&(zt=1),[[["pr\xE1v\u011B te\u010F","pr\xE1v\u011B te\u010F"]],[["p\u0159ed %s vte\u0159inami","za %s vte\u0159iny"],["p\u0159ed %s vte\u0159inami","za %s vte\u0159in"]],[["p\u0159ed minutou","za minutu"]],[["p\u0159ed %s minutami","za %s minuty"],["p\u0159ed %s minutami","za %s minut"]],[["p\u0159ed hodinou","za hodinu"]],[["p\u0159ed %s hodinami","za %s hodiny"],["p\u0159ed %s hodinami","za %s hodin"]],[["v\u010Dera","z\xEDtra"]],[["p\u0159ed %s dny","za %s dny"],["p\u0159ed %s dny","za %s dn\u016F"]],[["minul\xFD t\xFDden","p\u0159\xED\u0161t\xED t\xFDden"]],[["p\u0159ed %s t\xFDdny","za %s t\xFDdny"],["p\u0159ed %s t\xFDdny","za %s t\xFDdn\u016F"]],[["minul\xFD m\u011Bs\xEDc","p\u0159\xEDst\xED m\u011Bs\xEDc"]],[["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDce"],["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDc\u016F"]],[["p\u0159ed rokem","p\u0159\xEDst\xED rok"]],[["p\u0159ed %s lety","za %s roky"],["p\u0159ed %s lety","za %s let"]]][$t][zt]}var ph=og.default=gu,lm={};Object.defineProperty(lm,"__esModule",{value:!0});function Iy(It,$t){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][$t]}var Ei=lm.default=Iy,sg={};Object.defineProperty(sg,"__esModule",{value:!0});function cm(It,$t){return[["\u03BC\u03CC\u03BB\u03B9\u03C2 \u03C4\u03CE\u03C1\u03B1","\u03C3\u03B5 \u03BB\u03AF\u03B3\u03BF"],["%s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"],["1 \u03BB\u03B5\u03C0\u03C4\u03CC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BB\u03B5\u03C0\u03C4\u03CC"],["%s \u03BB\u03B5\u03C0\u03C4\u03AC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BB\u03B5\u03C0\u03C4\u03AC"],["1 \u03CE\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03CE\u03C1\u03B1"],["%s \u03CE\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03CE\u03C1\u03B5\u03C2"],["1 \u03BC\u03AD\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AD\u03C1\u03B1"],["%s \u03BC\u03AD\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AD\u03C1\u03B5\u03C2"],["1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1"],["%s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"],["1 \u03BC\u03AE\u03BD\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AE\u03BD\u03B1"],["%s \u03BC\u03AE\u03BD\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AE\u03BD\u03B5\u03C2"],["1 \u03C7\u03C1\u03CC\u03BD\u03BF \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03C7\u03C1\u03CC\u03BD\u03BF"],["%s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"]][$t]}var mu=sg.default=cm,Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});function gh(It,$t){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xEDa","en 1 d\xEDa"],["hace %s d\xEDas","en %s d\xEDas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xF1o","en 1 a\xF1o"],["hace %s a\xF1os","en %s a\xF1os"]][$t]}var um=Zc.default=gh,xl={};Object.defineProperty(xl,"__esModule",{value:!0});function Zs(It,$t){return[["juuri \xE4sken","juuri nyt"],["%s sekuntia sitten","%s sekunnin p\xE4\xE4st\xE4"],["minuutti sitten","minuutin p\xE4\xE4st\xE4"],["%s minuuttia sitten","%s minuutin p\xE4\xE4st\xE4"],["tunti sitten","tunnin p\xE4\xE4st\xE4"],["%s tuntia sitten","%s tunnin p\xE4\xE4st\xE4"],["p\xE4iv\xE4 sitten","p\xE4iv\xE4n p\xE4\xE4st\xE4"],["%s p\xE4iv\xE4\xE4 sitten","%s p\xE4iv\xE4n p\xE4\xE4st\xE4"],["viikko sitten","viikon p\xE4\xE4st\xE4"],["%s viikkoa sitten","%s viikon p\xE4\xE4st\xE4"],["kuukausi sitten","kuukauden p\xE4\xE4st\xE4"],["%s kuukautta sitten","%s kuukauden p\xE4\xE4st\xE4"],["vuosi sitten","vuoden p\xE4\xE4st\xE4"],["%s vuotta sitten","%s vuoden p\xE4\xE4st\xE4"]][$t]}var zs=xl.default=Zs,Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});function s_(It,$t){return[["\xE0 l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][$t]}var a_=Ea.default=s_,Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});function hm(It,$t){return[["xusto agora","daqu\xED a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 d\xEDa","nun d\xEDa"],["hai %s d\xEDas","en %s d\xEDas"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][$t]}var yu=Ql.default=hm,Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});function ag(It,$t){return[["\u0905\u092D\u0940","\u0915\u0941\u091B \u0938\u092E\u092F"],["%s \u0938\u0947\u0915\u0902\u0921 \u092A\u0939\u0932\u0947","%s \u0938\u0947\u0915\u0902\u0921 \u092E\u0947\u0902"],["1 \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","1 \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["%s \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","%s \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["1 \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","1 \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["%s \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","%s \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["1 \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","1 \u0926\u093F\u0928 \u092E\u0947\u0902"],["%s \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","%s \u0926\u093F\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092A\u0939\u0932\u0947","1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092E\u0947\u0902"],["%s \u0939\u092B\u094D\u0924\u0947 \u092A\u0939\u0932\u0947","%s \u0939\u092B\u094D\u0924\u094B\u0902 \u092E\u0947\u0902"],["1 \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","1 \u092E\u0939\u0940\u0928\u0947 \u092E\u0947\u0902"],["%s \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","%s \u092E\u0939\u0940\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","1 \u0938\u093E\u0932 \u092E\u0947\u0902"],["%s \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","%s \u0938\u093E\u0932 \u092E\u0947\u0902"]][$t]}var wl=Vs.default=ag,dm={};Object.defineProperty(dm,"__esModule",{value:!0});function ep(It,$t){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][$t]}var ha=dm.default=ep,Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});function tp(It,$t){return[["\uBC29\uAE08","\uACE7"],["%s\uCD08 \uC804","%s\uCD08 \uD6C4"],["1\uBD84 \uC804","1\uBD84 \uD6C4"],["%s\uBD84 \uC804","%s\uBD84 \uD6C4"],["1\uC2DC\uAC04 \uC804","1\uC2DC\uAC04 \uD6C4"],["%s\uC2DC\uAC04 \uC804","%s\uC2DC\uAC04 \uD6C4"],["1\uC77C \uC804","1\uC77C \uD6C4"],["%s\uC77C \uC804","%s\uC77C \uD6C4"],["1\uC8FC\uC77C \uC804","1\uC8FC\uC77C \uD6C4"],["%s\uC8FC\uC77C \uC804","%s\uC8FC\uC77C \uD6C4"],["1\uAC1C\uC6D4 \uC804","1\uAC1C\uC6D4 \uD6C4"],["%s\uAC1C\uC6D4 \uC804","%s\uAC1C\uC6D4 \uD6C4"],["1\uB144 \uC804","1\uB144 \uD6C4"],["%s\uB144 \uC804","%s\uB144 \uD6C4"]][$t]}var Kc=Hl.default=tp,Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});function Hh(It,$t){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][$t]}var of=Gu.default=Hh,ka={};Object.defineProperty(ka,"__esModule",{value:!0});function Py(It,$t){return[["agora mesmo","agora"],["h\xE1 %s segundos","em %s segundos"],["h\xE1 um minuto","em um minuto"],["h\xE1 %s minutos","em %s minutos"],["h\xE1 uma hora","em uma hora"],["h\xE1 %s horas","em %s horas"],["h\xE1 um dia","em um dia"],["h\xE1 %s dias","em %s dias"],["h\xE1 uma semana","em uma semana"],["h\xE1 %s semanas","em %s semanas"],["h\xE1 um m\xEAs","em um m\xEAs"],["h\xE1 %s meses","em %s meses"],["h\xE1 um ano","em um ano"],["h\xE1 %s anos","em %s anos"]][$t]}var Jc=ka.default=Py,Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});function nl(It,$t){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 m\xE5nad sedan","om 1 m\xE5nad"],["%s m\xE5nader sedan","om %s m\xE5nader"],["1 \xE5r sedan","om 1 \xE5r"],["%s \xE5r sedan","om %s \xE5r"]][$t]}var fm=Sa.default=nl,Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});function np(It,$t){return[["\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48\u0E19\u0E35\u0E49","\u0E2D\u0E35\u0E01\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48"],["%s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"],["1 \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E19\u0E32\u0E17\u0E35"],["%s \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E19\u0E32\u0E17\u0E35"],["1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["%s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["1 \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E27\u0E31\u0E19"],["%s \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E31\u0E19"],["1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["%s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["1 \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E40\u0E14\u0E37\u0E2D\u0E19"],["%s \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E40\u0E14\u0E37\u0E2D\u0E19"],["1 \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E1B\u0E35"],["%s \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E1B\u0E35"]][$t]}var My=Oy.default=np,N0={};Object.defineProperty(N0,"__esModule",{value:!0});function Vl(It,$t){return[["az \xF6nce","\u015Fimdi"],["%s saniye \xF6nce","%s saniye i\xE7inde"],["1 dakika \xF6nce","1 dakika i\xE7inde"],["%s dakika \xF6nce","%s dakika i\xE7inde"],["1 saat \xF6nce","1 saat i\xE7inde"],["%s saat \xF6nce","%s saat i\xE7inde"],["1 g\xFCn \xF6nce","1 g\xFCn i\xE7inde"],["%s g\xFCn \xF6nce","%s g\xFCn i\xE7inde"],["1 hafta \xF6nce","1 hafta i\xE7inde"],["%s hafta \xF6nce","%s hafta i\xE7inde"],["1 ay \xF6nce","1 ay i\xE7inde"],["%s ay \xF6nce","%s ay i\xE7inde"],["1 y\u0131l \xF6nce","1 y\u0131l i\xE7inde"],["%s y\u0131l \xF6nce","%s y\u0131l i\xE7inde"]][$t]}var Vh=N0.default=Vl;const Ya={ar:zh,cs:$a,de:Qf,el:Vu,es:ju,fi:Ic,fr:am,gl:tg,hi:ng,it:rg,ko:wa,nl:ky,pt:Uu,sv:$0,th:Ay,tr:$s,ur:R0},Qc=new Jl({allowMissing:!0});Qc.init=(It,$t)=>{Qc.clear(),It&&(Qc.locale(It),Qc.extend(Ya[It])),$t&&Qc.extend($t)},Ta("ar",o_),Ta("cs",ph),Ta("de",Ei),Ta("el",mu),Ta("es",um),Ta("fi",zs),Ta("fr",a_),Ta("gl",yu),Ta("hi",wl),Ta("it",ha),Ta("ko",Kc),Ta("nl",of),Ta("pt",Jc),Ta("sv",fm),Ta("th",My),Ta("tr",Vh),Qc.registerMessages=(It,$t)=>{Ya[It]?Ya[It]=Ot(Ot({},Ya[It]),$t):Ya[It]=$t};var Ra=Qc,lg=It=>{const $t=An();return Lp($t,()=>It.onClickOutside()),pn("ul",{ref:$t,className:"r6o-comment-dropdown-menu"},pn("li",{onClick:It.onEdit},Ra.t("Edit")),pn("li",{onClick:It.onDelete},Ra.t("Delete")))},fa={},Ji={},pm={exports:{}};/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/(function(It,$t){(function(zt,Ht){Ht(It,$t)})(Ka,function(zt,Ht){var Ut=typeof Map=="function"?new Map:function(){var Rn=[],ur=[];return{has:function(Ar){return Rn.indexOf(Ar)>-1},get:function(Ar){return ur[Rn.indexOf(Ar)]},set:function(Ar,Br){Rn.indexOf(Ar)===-1&&(Rn.push(Ar),ur.push(Br))},delete:function(Ar){var Br=Rn.indexOf(Ar);Br>-1&&(Rn.splice(Br,1),ur.splice(Br,1))}}}(),Kt=function(Rn){return new Event(Rn,{bubbles:!0})};try{new Event("test")}catch{Kt=function(ur){var Ar=document.createEvent("Event");return Ar.initEvent(ur,!0,!1),Ar}}function ln(Rn){if(!Rn||!Rn.nodeName||Rn.nodeName!=="TEXTAREA"||Ut.has(Rn))return;var ur=null,Ar=null,Br=null;function Jr(){var Co=window.getComputedStyle(Rn,null);Co.resize==="vertical"?Rn.style.resize="none":Co.resize==="both"&&(Rn.style.resize="horizontal"),Co.boxSizing==="content-box"?ur=-(parseFloat(Co.paddingTop)+parseFloat(Co.paddingBottom)):ur=parseFloat(Co.borderTopWidth)+parseFloat(Co.borderBottomWidth),isNaN(ur)&&(ur=0),Vi()}function gi(Co){{var Vo=Rn.style.width;Rn.style.width="0px",Rn.offsetWidth,Rn.style.width=Vo}Rn.style.overflowY=Co}function fi(Co){for(var Vo=[];Co&&Co.parentNode&&Co.parentNode instanceof Element;)Co.parentNode.scrollTop&&Vo.push({node:Co.parentNode,scrollTop:Co.parentNode.scrollTop}),Co=Co.parentNode;return Vo}function Mi(){if(Rn.scrollHeight!==0){var Co=fi(Rn),Vo=document.documentElement&&document.documentElement.scrollTop;Rn.style.height="",Rn.style.height=Rn.scrollHeight+ur+"px",Ar=Rn.clientWidth,Co.forEach(function(Io){Io.node.scrollTop=Io.scrollTop}),Vo&&(document.documentElement.scrollTop=Vo)}}function Vi(){Mi();var Co=Math.round(parseFloat(Rn.style.height)),Vo=window.getComputedStyle(Rn,null),Io=Vo.boxSizing==="content-box"?Math.round(parseFloat(Vo.height)):Rn.offsetHeight;if(Io<Co?Vo.overflowY==="hidden"&&(gi("scroll"),Mi(),Io=Vo.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(Rn,null).height)):Rn.offsetHeight):Vo.overflowY!=="hidden"&&(gi("hidden"),Mi(),Io=Vo.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(Rn,null).height)):Rn.offsetHeight),Br!==Io){Br=Io;var Ha=Kt("autosize:resized");try{Rn.dispatchEvent(Ha)}catch{}}}var zo=function(){Rn.clientWidth!==Ar&&Vi()},Lo=function(Co){window.removeEventListener("resize",zo,!1),Rn.removeEventListener("input",Vi,!1),Rn.removeEventListener("keyup",Vi,!1),Rn.removeEventListener("autosize:destroy",Lo,!1),Rn.removeEventListener("autosize:update",Vi,!1),Object.keys(Co).forEach(function(Vo){Rn.style[Vo]=Co[Vo]}),Ut.delete(Rn)}.bind(Rn,{height:Rn.style.height,resize:Rn.style.resize,overflowY:Rn.style.overflowY,overflowX:Rn.style.overflowX,wordWrap:Rn.style.wordWrap});Rn.addEventListener("autosize:destroy",Lo,!1),"onpropertychange"in Rn&&"oninput"in Rn&&Rn.addEventListener("keyup",Vi,!1),window.addEventListener("resize",zo,!1),Rn.addEventListener("input",Vi,!1),Rn.addEventListener("autosize:update",Vi,!1),Rn.style.overflowX="hidden",Rn.style.wordWrap="break-word",Ut.set(Rn,{destroy:Lo,update:Vi}),Jr()}function wn(Rn){var ur=Ut.get(Rn);ur&&ur.destroy()}function Dn(Rn){var ur=Ut.get(Rn);ur&&ur.update()}var Fn=null;typeof window>"u"||typeof window.getComputedStyle!="function"?(Fn=function(Rn){return Rn},Fn.destroy=function(Rn){return Rn},Fn.update=function(Rn){return Rn}):(Fn=function(Rn,ur){return Rn&&Array.prototype.forEach.call(Rn.length?Rn:[Rn],function(Ar){return ln(Ar)}),Rn},Fn.destroy=function(Rn){return Rn&&Array.prototype.forEach.call(Rn.length?Rn:[Rn],wn),Rn},Fn.update=function(Rn){return Rn&&Array.prototype.forEach.call(Rn.length?Rn:[Rn],Dn),Rn}),Ht.default=Fn,zt.exports=Ht.default})})(pm,pm.exports);var cg=function(It,$t,zt){return zt=window.getComputedStyle,(zt?zt(It):It.currentStyle)[$t.replace(/-(\w)/gi,function(Ht,Ut){return Ut.toUpperCase()})]},ec=cg,Pc=ec;function xd(It){var $t=Pc(It,"line-height"),zt=parseFloat($t,10);if($t===zt+""){var Ht=It.style.lineHeight;It.style.lineHeight=$t+"em",$t=Pc(It,"line-height"),zt=parseFloat($t,10),Ht?It.style.lineHeight=Ht:delete It.style.lineHeight}if($t.indexOf("pt")!==-1?(zt*=4,zt/=3):$t.indexOf("mm")!==-1?(zt*=96,zt/=25.4):$t.indexOf("cm")!==-1?(zt*=96,zt/=2.54):$t.indexOf("in")!==-1?zt*=96:$t.indexOf("pc")!==-1&&(zt*=16),zt=Math.round(zt),$t==="normal"){var Ut=It.nodeName,Kt=document.createElement(Ut);Kt.innerHTML="&nbsp;",Ut.toUpperCase()==="TEXTAREA"&&Kt.setAttribute("rows","1");var ln=Pc(It,"font-size");Kt.style.fontSize=ln,Kt.style.padding="0px",Kt.style.border="0px";var wn=document.body;wn.appendChild(Kt);var Dn=Kt.offsetHeight;zt=Dn,wn.removeChild(Kt)}return zt}var ug=xd,D0=Ka&&Ka.__extends||function(){var It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($t,zt){$t.__proto__=zt}||function($t,zt){for(var Ht in zt)zt.hasOwnProperty(Ht)&&($t[Ht]=zt[Ht])};return function($t,zt){It($t,zt);function Ht(){this.constructor=$t}$t.prototype=zt===null?Object.create(zt):(Ht.prototype=zt.prototype,new Ht)}}(),gm=Ka&&Ka.__assign||Object.assign||function(It){for(var $t,zt=1,Ht=arguments.length;zt<Ht;zt++){$t=arguments[zt];for(var Ut in $t)Object.prototype.hasOwnProperty.call($t,Ut)&&(It[Ut]=$t[Ut])}return It},Rs=Ka&&Ka.__rest||function(It,$t){var zt={};for(var Ht in It)Object.prototype.hasOwnProperty.call(It,Ht)&&$t.indexOf(Ht)<0&&(zt[Ht]=It[Ht]);if(It!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Ht=Object.getOwnPropertySymbols(It);Ut<Ht.length;Ut++)$t.indexOf(Ht[Ut])<0&&(zt[Ht[Ut]]=It[Ht[Ut]]);return zt};Ji.__esModule=!0;var eu=ya,Js=yl.exports,wd=pm.exports,uc=ug,$y=uc,ns="autosize:resized",sf=function(It){D0($t,It);function $t(){var zt=It!==null&&It.apply(this,arguments)||this;return zt.state={lineHeight:null},zt.textarea=null,zt.onResize=function(Ht){zt.props.onResize&&zt.props.onResize(Ht)},zt.updateLineHeight=function(){zt.textarea&&zt.setState({lineHeight:$y(zt.textarea)})},zt.onChange=function(Ht){var Ut=zt.props.onChange;zt.currentValue=Ht.currentTarget.value,Ut&&Ut(Ht)},zt}return $t.prototype.componentDidMount=function(){var zt=this,Ht=this.props,Ut=Ht.maxRows,Kt=Ht.async;typeof Ut=="number"&&this.updateLineHeight(),typeof Ut=="number"||Kt?setTimeout(function(){return zt.textarea&&wd(zt.textarea)}):this.textarea&&wd(this.textarea),this.textarea&&this.textarea.addEventListener(ns,this.onResize)},$t.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(ns,this.onResize),wd.destroy(this.textarea))},$t.prototype.render=function(){var zt=this,Ht=this,Ut=Ht.props;Ut.onResize;var Kt=Ut.maxRows;Ut.onChange;var ln=Ut.style;Ut.innerRef;var wn=Ut.children,Dn=Rs(Ut,["onResize","maxRows","onChange","style","innerRef","children"]),Fn=Ht.state.lineHeight,Rn=Kt&&Fn?Fn*Kt:null;return eu.createElement("textarea",gm({},Dn,{onChange:this.onChange,style:Rn?gm({},ln,{maxHeight:Rn}):ln,ref:function(ur){zt.textarea=ur,typeof zt.props.innerRef=="function"?zt.props.innerRef(ur):zt.props.innerRef&&(zt.props.innerRef.current=ur)}}),wn)},$t.prototype.componentDidUpdate=function(){this.textarea&&wd.update(this.textarea)},$t.defaultProps={rows:1,async:!1},$t.propTypes={rows:Js.number,maxRows:Js.number,onResize:Js.func,innerRef:Js.any,async:Js.bool},$t}(eu.Component);Ji.TextareaAutosize=eu.forwardRef(function(It,$t){return eu.createElement(sf,gm({},It,{innerRef:$t}))}),function(It){It.__esModule=!0;var $t=Ji;It.default=$t.TextareaAutosize}(fa);var na=ic(fa);class rp extends vn{constructor($t){super($t),Bt(this,"onKeyDown",zt=>{zt.which===13&&zt.ctrlKey&&this.props.onSaveAndClose()}),this.element=yn()}componentDidMount(){this.props.focus&&this.element.current&&this.element.current.focus({preventScroll:!0})}render(){return pn(na,{ref:this.element,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||Ra.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}function ro(){return ro=Object.assign||function(It){for(var $t=1;$t<arguments.length;$t++){var zt=arguments[$t];for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(It[Ht]=zt[Ht])}return It},ro.apply(this,arguments)}function af(It){if(It.sheet)return It.sheet;for(var $t=0;$t<document.styleSheets.length;$t++)if(document.styleSheets[$t].ownerNode===It)return document.styleSheets[$t]}function Ry(It){var $t=document.createElement("style");return $t.setAttribute("data-emotion",It.key),It.nonce!==void 0&&$t.setAttribute("nonce",It.nonce),$t.appendChild(document.createTextNode("")),$t.setAttribute("data-s",""),$t}var Ed=function(){function It(zt){var Ht=this;this._insertTag=function(Ut){var Kt;Ht.tags.length===0?Ht.insertionPoint?Kt=Ht.insertionPoint.nextSibling:Ht.prepend?Kt=Ht.container.firstChild:Kt=Ht.before:Kt=Ht.tags[Ht.tags.length-1].nextSibling,Ht.container.insertBefore(Ut,Kt),Ht.tags.push(Ut)},this.isSpeedy=zt.speedy===void 0?!0:zt.speedy,this.tags=[],this.ctr=0,this.nonce=zt.nonce,this.key=zt.key,this.container=zt.container,this.prepend=zt.prepend,this.insertionPoint=zt.insertionPoint,this.before=null}var $t=It.prototype;return $t.hydrate=function(zt){zt.forEach(this._insertTag)},$t.insert=function(zt){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(Ry(this));var Ht=this.tags[this.tags.length-1];if(this.isSpeedy){var Ut=af(Ht);try{Ut.insertRule(zt,Ut.cssRules.length)}catch{}}else Ht.appendChild(document.createTextNode(zt));this.ctr++},$t.flush=function(){this.tags.forEach(function(zt){return zt.parentNode&&zt.parentNode.removeChild(zt)}),this.tags=[],this.ctr=0},It}(),Ao="-ms-",jl="-moz-",Bs="-webkit-",vu="comm",Ul="rule",rl="decl",l_="@import",Ny="@keyframes",jh=Math.abs,tc=String.fromCharCode;function Sd(It,$t){return((($t<<2^Na(It,0))<<2^Na(It,1))<<2^Na(It,2))<<2^Na(It,3)}function nc(It){return It.trim()}function _u(It,$t){return(It=$t.exec(It))?It[0]:It}function Is(It,$t,zt){return It.replace($t,zt)}function Uh(It,$t){return It.indexOf($t)}function Na(It,$t){return It.charCodeAt($t)|0}function Aa(It,$t,zt){return It.slice($t,zt)}function Wu(It){return It.length}function ip(It){return It.length}function il(It,$t){return $t.push(It),It}function Gh(It,$t){return It.map($t).join("")}var hc=1,lf=1,Pl=0,dc=0,La=0,qu="";function hg(It,$t,zt,Ht,Ut,Kt,ln){return{value:It,root:$t,parent:zt,type:Ht,props:Ut,children:Kt,line:hc,column:lf,length:ln,return:""}}function op(It,$t,zt){return hg(It,$t.root,$t.parent,zt,$t.props,$t.children,0)}function cf(){return La}function Yu(){return La=dc>0?Na(qu,--dc):0,lf--,La===10&&(lf=1,hc--),La}function qs(){return La=dc<Pl?Na(qu,dc++):0,lf++,La===10&&(lf=1,hc++),La}function fc(){return Na(qu,dc)}function ol(){return dc}function pc(It,$t){return Aa(qu,It,$t)}function bu(It){switch(It){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mm(It){return hc=lf=1,Pl=Wu(qu=It),dc=0,[]}function Cd(It){return qu="",It}function Xu(It){return nc(pc(dc-1,gc(It===91?It+2:It===40?It+1:It)))}function mh(It){for(;(La=fc())&&La<33;)qs();return bu(It)>2||bu(La)>3?"":" "}function dl(It,$t){for(;--$t&&qs()&&!(La<48||La>102||La>57&&La<65||La>70&&La<97););return pc(It,ol()+($t<6&&fc()==32&&qs()==32))}function gc(It){for(;qs();)switch(La){case It:return dc;case 34:case 39:return gc(It===34||It===39?It:La);case 40:It===41&&gc(It);break;case 92:qs();break}return dc}function Ol(It,$t){for(;qs()&&It+La!==47+10&&!(It+La===42+42&&fc()===47););return"/*"+pc($t,dc-1)+"*"+tc(It===47?It:qs())}function Dy(It){for(;!bu(fc());)qs();return pc(It,dc)}function Wh(It){return Cd(yh("",null,null,null,[""],It=mm(It),0,[0],It))}function yh(It,$t,zt,Ht,Ut,Kt,ln,wn,Dn){for(var Fn=0,Rn=0,ur=ln,Ar=0,Br=0,Jr=0,gi=1,fi=1,Mi=1,Vi=0,zo="",Lo=Ut,Co=Kt,Vo=Ht,Io=zo;fi;)switch(Jr=Vi,Vi=qs()){case 34:case 39:case 91:case 40:Io+=Xu(Vi);break;case 9:case 10:case 13:case 32:Io+=mh(Jr);break;case 92:Io+=dl(ol()-1,7);continue;case 47:switch(fc()){case 42:case 47:il(El(Ol(qs(),ol()),$t,zt),Dn);break;default:Io+="/"}break;case 123*gi:wn[Fn++]=Wu(Io)*Mi;case 125*gi:case 59:case 0:switch(Vi){case 0:case 125:fi=0;case 59+Rn:Br>0&&Wu(Io)-ur&&il(Br>32?tu(Io+";",Ht,zt,ur-1):tu(Is(Io," ","")+";",Ht,zt,ur-2),Dn);break;case 59:Io+=";";default:if(il(Vo=sl(Io,$t,zt,Fn,Rn,Ut,wn,zo,Lo=[],Co=[],ur),Kt),Vi===123)if(Rn===0)yh(Io,$t,Vo,Vo,Lo,Kt,ur,wn,Co);else switch(Ar){case 100:case 109:case 115:yh(It,Vo,Vo,Ht&&il(sl(It,Vo,Vo,0,0,Ut,wn,zo,Ut,Lo=[],ur),Co),Ut,Co,ur,wn,Ht?Lo:Co);break;default:yh(Io,Vo,Vo,Vo,[""],Co,ur,wn,Co)}}Fn=Rn=Br=0,gi=Mi=1,zo=Io="",ur=ln;break;case 58:ur=1+Wu(Io),Br=Jr;default:if(gi<1){if(Vi==123)--gi;else if(Vi==125&&gi++==0&&Yu()==125)continue}switch(Io+=tc(Vi),Vi*gi){case 38:Mi=Rn>0?1:(Io+="\f",-1);break;case 44:wn[Fn++]=(Wu(Io)-1)*Mi,Mi=1;break;case 64:fc()===45&&(Io+=Xu(qs())),Ar=fc(),Rn=Wu(zo=Io+=Dy(ol())),Vi++;break;case 45:Jr===45&&Wu(Io)==2&&(gi=0)}}return Kt}function sl(It,$t,zt,Ht,Ut,Kt,ln,wn,Dn,Fn,Rn){for(var ur=Ut-1,Ar=Ut===0?Kt:[""],Br=ip(Ar),Jr=0,gi=0,fi=0;Jr<Ht;++Jr)for(var Mi=0,Vi=Aa(It,ur+1,ur=jh(gi=ln[Jr])),zo=It;Mi<Br;++Mi)(zo=nc(gi>0?Ar[Mi]+" "+Vi:Is(Vi,/&\f/g,Ar[Mi])))&&(Dn[fi++]=zo);return hg(It,$t,zt,Ut===0?Ul:wn,Dn,Fn,Rn)}function El(It,$t,zt){return hg(It,$t,zt,vu,tc(cf()),Aa(It,2,-2),0)}function tu(It,$t,zt,Ht){return hg(It,$t,zt,rl,Aa(It,0,Ht),Aa(It,Ht+1,-1),Ht)}function mc(It,$t){switch(Sd(It,$t)){case 5103:return Bs+"print-"+It+It;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Bs+It+It;case 5349:case 4246:case 4810:case 6968:case 2756:return Bs+It+jl+It+Ao+It+It;case 6828:case 4268:return Bs+It+Ao+It+It;case 6165:return Bs+It+Ao+"flex-"+It+It;case 5187:return Bs+It+Is(It,/(\w+).+(:[^]+)/,Bs+"box-$1$2"+Ao+"flex-$1$2")+It;case 5443:return Bs+It+Ao+"flex-item-"+Is(It,/flex-|-self/,"")+It;case 4675:return Bs+It+Ao+"flex-line-pack"+Is(It,/align-content|flex-|-self/,"")+It;case 5548:return Bs+It+Ao+Is(It,"shrink","negative")+It;case 5292:return Bs+It+Ao+Is(It,"basis","preferred-size")+It;case 6060:return Bs+"box-"+Is(It,"-grow","")+Bs+It+Ao+Is(It,"grow","positive")+It;case 4554:return Bs+Is(It,/([^-])(transform)/g,"$1"+Bs+"$2")+It;case 6187:return Is(Is(Is(It,/(zoom-|grab)/,Bs+"$1"),/(image-set)/,Bs+"$1"),It,"")+It;case 5495:case 3959:return Is(It,/(image-set\([^]*)/,Bs+"$1$`$1");case 4968:return Is(Is(It,/(.+:)(flex-)?(.*)/,Bs+"box-pack:$3"+Ao+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Bs+It+It;case 4095:case 3583:case 4068:case 2532:return Is(It,/(.+)-inline(.+)/,Bs+"$1$2")+It;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wu(It)-1-$t>6)switch(Na(It,$t+1)){case 109:if(Na(It,$t+4)!==45)break;case 102:return Is(It,/(.+:)(.+)-([^]+)/,"$1"+Bs+"$2-$3$1"+jl+(Na(It,$t+3)==108?"$3":"$2-$3"))+It;case 115:return~Uh(It,"stretch")?mc(Is(It,"stretch","fill-available"),$t)+It:It}break;case 4949:if(Na(It,$t+1)!==115)break;case 6444:switch(Na(It,Wu(It)-3-(~Uh(It,"!important")&&10))){case 107:return Is(It,":",":"+Bs)+It;case 101:return Is(It,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Bs+(Na(It,14)===45?"inline-":"")+"box$3$1"+Bs+"$2$3$1"+Ao+"$2box$3")+It}break;case 5936:switch(Na(It,$t+11)){case 114:return Bs+It+Ao+Is(It,/[svh]\w+-[tblr]{2}/,"tb")+It;case 108:return Bs+It+Ao+Is(It,/[svh]\w+-[tblr]{2}/,"tb-rl")+It;case 45:return Bs+It+Ao+Is(It,/[svh]\w+-[tblr]{2}/,"lr")+It}return Bs+It+Ao+It+It}return It}function uf(It,$t){for(var zt="",Ht=ip(It),Ut=0;Ut<Ht;Ut++)zt+=$t(It[Ut],Ut,It,$t)||"";return zt}function hf(It,$t,zt,Ht){switch(It.type){case l_:case rl:return It.return=It.return||It.value;case vu:return"";case Ul:It.value=It.props.join(",")}return Wu(zt=uf(It.children,Ht))?It.return=It.value+"{"+zt+"}":""}function qh(It){var $t=ip(It);return function(zt,Ht,Ut,Kt){for(var ln="",wn=0;wn<$t;wn++)ln+=It[wn](zt,Ht,Ut,Kt)||"";return ln}}function rc(It){return function($t){$t.root||($t=$t.return)&&It($t)}}function B0(It,$t,zt,Ht){if(!It.return)switch(It.type){case rl:It.return=mc(It.value,It.length);break;case Ny:return uf([op(Is(It.value,"@","@"+Bs),It,"")],Ht);case Ul:if(It.length)return Gh(It.props,function(Ut){switch(_u(Ut,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return uf([op(Is(Ut,/:(read-\w+)/,":"+jl+"$1"),It,"")],Ht);case"::placeholder":return uf([op(Is(Ut,/:(plac\w+)/,":"+Bs+"input-$1"),It,""),op(Is(Ut,/:(plac\w+)/,":"+jl+"$1"),It,""),op(Is(Ut,/:(plac\w+)/,Ao+"input-$1"),It,"")],Ht)}return""})}}function fl(It){var $t=Object.create(null);return function(zt){return $t[zt]===void 0&&($t[zt]=It(zt)),$t[zt]}}var F0=function(It,$t,zt){for(var Ht=0,Ut=0;Ht=Ut,Ut=fc(),Ht===38&&Ut===12&&($t[zt]=1),!bu(Ut);)qs();return pc(It,dc)},xu=function(It,$t){var zt=-1,Ht=44;do switch(bu(Ht)){case 0:Ht===38&&fc()===12&&($t[zt]=1),It[zt]+=F0(dc-1,$t,zt);break;case 2:It[zt]+=Xu(Ht);break;case 4:if(Ht===44){It[++zt]=fc()===58?"&\f":"",$t[zt]=It[zt].length;break}default:It[zt]+=tc(Ht)}while(Ht=qs());return It},al=function(It,$t){return Cd(xu(mm(It),$t))},Oc=new WeakMap,Td=function(It){if(!(It.type!=="rule"||!It.parent||!It.length)){for(var $t=It.value,zt=It.parent,Ht=It.column===zt.column&&It.line===zt.line;zt.type!=="rule";)if(zt=zt.parent,!zt)return;if(!(It.props.length===1&&$t.charCodeAt(0)!==58&&!Oc.get(zt))&&!Ht){Oc.set(It,!0);for(var Ut=[],Kt=al($t,Ut),ln=zt.props,wn=0,Dn=0;wn<Kt.length;wn++)for(var Fn=0;Fn<ln.length;Fn++,Dn++)It.props[Dn]=Ut[wn]?Kt[wn].replace(/&\f/g,ln[Fn]):ln[Fn]+" "+Kt[wn]}}},df=function(It){if(It.type==="decl"){var $t=It.value;$t.charCodeAt(0)===108&&$t.charCodeAt(2)===98&&(It.return="",It.value="")}},wu=[B0],ff=function(It){var $t=It.key;if($t==="css"){var zt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(zt,function(Jr){var gi=Jr.getAttribute("data-emotion");gi.indexOf(" ")!==-1&&(document.head.appendChild(Jr),Jr.setAttribute("data-s",""))})}var Ht=It.stylisPlugins||wu,Ut={},Kt,ln=[];Kt=It.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+$t+' "]'),function(Jr){for(var gi=Jr.getAttribute("data-emotion").split(" "),fi=1;fi<gi.length;fi++)Ut[gi[fi]]=!0;ln.push(Jr)});var wn,Dn=[Td,df];{var Fn,Rn=[hf,rc(function(Jr){Fn.insert(Jr)})],ur=qh(Dn.concat(Ht,Rn)),Ar=function(Jr){return uf(Wh(Jr),ur)};wn=function(Jr,gi,fi,Mi){Fn=fi,Ar(Jr?Jr+"{"+gi.styles+"}":gi.styles),Mi&&(Br.inserted[gi.name]=!0)}}var Br={key:$t,sheet:new Ed({key:$t,container:Kt,nonce:It.nonce,speedy:It.speedy,prepend:It.prepend,insertionPoint:It.insertionPoint}),nonce:It.nonce,inserted:Ut,registered:{},insert:wn};return Br.sheet.hydrate(ln),Br},Ml={exports:{}},Ps={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var rs=typeof Symbol=="function"&&Symbol.for,ym=rs?Symbol.for("react.element"):60103,vm=rs?Symbol.for("react.portal"):60106,ll=rs?Symbol.for("react.fragment"):60107,Eu=rs?Symbol.for("react.strict_mode"):60108,sp=rs?Symbol.for("react.profiler"):60114,vh=rs?Symbol.for("react.provider"):60109,Su=rs?Symbol.for("react.context"):60110,Da=rs?Symbol.for("react.async_mode"):60111,cl=rs?Symbol.for("react.concurrent_mode"):60111,kd=rs?Symbol.for("react.forward_ref"):60112,Sl=rs?Symbol.for("react.suspense"):60113,z0=rs?Symbol.for("react.suspense_list"):60120,pf=rs?Symbol.for("react.memo"):60115,Ba=rs?Symbol.for("react.lazy"):60116,c_=rs?Symbol.for("react.block"):60121,Zu=rs?Symbol.for("react.fundamental"):60117,By=rs?Symbol.for("react.responder"):60118,dg=rs?Symbol.for("react.scope"):60119;function nu(It){if(typeof It=="object"&&It!==null){var $t=It.$$typeof;switch($t){case ym:switch(It=It.type,It){case Da:case cl:case ll:case sp:case Eu:case Sl:return It;default:switch(It=It&&It.$$typeof,It){case Su:case kd:case Ba:case pf:case vh:return It;default:return $t}}case vm:return $t}}}function Fy(It){return nu(It)===cl}Ps.AsyncMode=Da,Ps.ConcurrentMode=cl,Ps.ContextConsumer=Su,Ps.ContextProvider=vh,Ps.Element=ym,Ps.ForwardRef=kd,Ps.Fragment=ll,Ps.Lazy=Ba,Ps.Memo=pf,Ps.Portal=vm,Ps.Profiler=sp,Ps.StrictMode=Eu,Ps.Suspense=Sl,Ps.isAsyncMode=function(It){return Fy(It)||nu(It)===Da},Ps.isConcurrentMode=Fy,Ps.isContextConsumer=function(It){return nu(It)===Su},Ps.isContextProvider=function(It){return nu(It)===vh},Ps.isElement=function(It){return typeof It=="object"&&It!==null&&It.$$typeof===ym},Ps.isForwardRef=function(It){return nu(It)===kd},Ps.isFragment=function(It){return nu(It)===ll},Ps.isLazy=function(It){return nu(It)===Ba},Ps.isMemo=function(It){return nu(It)===pf},Ps.isPortal=function(It){return nu(It)===vm},Ps.isProfiler=function(It){return nu(It)===sp},Ps.isStrictMode=function(It){return nu(It)===Eu},Ps.isSuspense=function(It){return nu(It)===Sl},Ps.isValidElementType=function(It){return typeof It=="string"||typeof It=="function"||It===ll||It===cl||It===sp||It===Eu||It===Sl||It===z0||typeof It=="object"&&It!==null&&(It.$$typeof===Ba||It.$$typeof===pf||It.$$typeof===vh||It.$$typeof===Su||It.$$typeof===kd||It.$$typeof===Zu||It.$$typeof===By||It.$$typeof===dg||It.$$typeof===c_)},Ps.typeOf=nu,Ml.exports=Ps;var Cu=Ml.exports,ap={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lp={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_m={};_m[Cu.ForwardRef]=ap,_m[Cu.Memo]=lp;var cp=!0;function Yh(It,$t,zt){var Ht="";return zt.split(" ").forEach(function(Ut){It[Ut]!==void 0?$t.push(It[Ut]+";"):Ht+=Ut+" "}),Ht}var up=function(It,$t,zt){var Ht=It.key+"-"+$t.name;if((zt===!1||cp===!1)&&It.registered[Ht]===void 0&&(It.registered[Ht]=$t.styles),It.inserted[$t.name]===void 0){var Ut=$t;do It.insert($t===Ut?"."+Ht:"",Ut,It.sheet,!0),Ut=Ut.next;while(Ut!==void 0)}};function hp(It){for(var $t=0,zt,Ht=0,Ut=It.length;Ut>=4;++Ht,Ut-=4)zt=It.charCodeAt(Ht)&255|(It.charCodeAt(++Ht)&255)<<8|(It.charCodeAt(++Ht)&255)<<16|(It.charCodeAt(++Ht)&255)<<24,zt=(zt&65535)*1540483477+((zt>>>16)*59797<<16),zt^=zt>>>24,$t=(zt&65535)*1540483477+((zt>>>16)*59797<<16)^($t&65535)*1540483477+(($t>>>16)*59797<<16);switch(Ut){case 3:$t^=(It.charCodeAt(Ht+2)&255)<<16;case 2:$t^=(It.charCodeAt(Ht+1)&255)<<8;case 1:$t^=It.charCodeAt(Ht)&255,$t=($t&65535)*1540483477+(($t>>>16)*59797<<16)}return $t^=$t>>>13,$t=($t&65535)*1540483477+(($t>>>16)*59797<<16),(($t^$t>>>15)>>>0).toString(36)}var Ad={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Mo=/[A-Z]|^ms/g,Xh=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gf=function(It){return It.charCodeAt(1)===45},Zh=function(It){return It!=null&&typeof It!="boolean"},Gl=fl(function(It){return gf(It)?It:It.replace(Mo,"-$&").toLowerCase()}),H0=function(It,$t){switch(It){case"animation":case"animationName":if(typeof $t=="string")return $t.replace(Xh,function(zt,Ht,Ut){return ru={name:Ht,styles:Ut,next:ru},Ht})}return Ad[It]!==1&&!gf(It)&&typeof $t=="number"&&$t!==0?$t+"px":$t};function Cl(It,$t,zt){if(zt==null)return"";if(zt.__emotion_styles!==void 0)return zt;switch(typeof zt){case"boolean":return"";case"object":{if(zt.anim===1)return ru={name:zt.name,styles:zt.styles,next:ru},zt.name;if(zt.styles!==void 0){var Ht=zt.next;if(Ht!==void 0)for(;Ht!==void 0;)ru={name:Ht.name,styles:Ht.styles,next:ru},Ht=Ht.next;var Ut=zt.styles+";";return Ut}return Ia(It,$t,zt)}case"function":{if(It!==void 0){var Kt=ru,ln=zt(It);return ru=Kt,Cl(It,$t,ln)}break}}if($t==null)return zt;var wn=$t[zt];return wn!==void 0?wn:zt}function Ia(It,$t,zt){var Ht="";if(Array.isArray(zt))for(var Ut=0;Ut<zt.length;Ut++)Ht+=Cl(It,$t,zt[Ut])+";";else for(var Kt in zt){var ln=zt[Kt];if(typeof ln!="object")$t!=null&&$t[ln]!==void 0?Ht+=Kt+"{"+$t[ln]+"}":Zh(ln)&&(Ht+=Gl(Kt)+":"+H0(Kt,ln)+";");else if(Array.isArray(ln)&&typeof ln[0]=="string"&&($t==null||$t[ln[0]]===void 0))for(var wn=0;wn<ln.length;wn++)Zh(ln[wn])&&(Ht+=Gl(Kt)+":"+H0(Kt,ln[wn])+";");else{var Dn=Cl(It,$t,ln);switch(Kt){case"animation":case"animationName":{Ht+=Gl(Kt)+":"+Dn+";";break}default:Ht+=Kt+"{"+Dn+"}"}}}return Ht}var V0=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ru,_h=function(It,$t,zt){if(It.length===1&&typeof It[0]=="object"&&It[0]!==null&&It[0].styles!==void 0)return It[0];var Ht=!0,Ut="";ru=void 0;var Kt=It[0];Kt==null||Kt.raw===void 0?(Ht=!1,Ut+=Cl(zt,$t,Kt)):Ut+=Kt[0];for(var ln=1;ln<It.length;ln++)Ut+=Cl(zt,$t,It[ln]),Ht&&(Ut+=Kt[ln]);V0.lastIndex=0;for(var wn="",Dn;(Dn=V0.exec(Ut))!==null;)wn+="-"+Dn[1];var Fn=hp(Ut)+wn;return{name:Fn,styles:Ut,next:ru}},dp={}.hasOwnProperty,fg=Bn(typeof HTMLElement<"u"?ff({key:"css"}):null);fg.Provider;var j0=function(It){return Hs(function($t,zt){var Ht=vr(fg);return It($t,Ht,zt)})},Ca=Bn({}),js="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",bh=function(It,$t){var zt={};for(var Ht in $t)dp.call($t,Ht)&&(zt[Ht]=$t[Ht]);return zt[js]=It,zt},zy=function(){return null},xh=j0(function(It,$t,zt){var Ht=It.css;typeof Ht=="string"&&$t.registered[Ht]!==void 0&&(Ht=$t.registered[Ht]);var Ut=It[js],Kt=[Ht],ln="";typeof It.className=="string"?ln=Yh($t.registered,Kt,It.className):It.className!=null&&(ln=It.className+" ");var wn=_h(Kt,void 0,vr(Ca));up($t,wn,typeof Ut=="string"),ln+=$t.key+"-"+wn.name;var Dn={};for(var Fn in It)dp.call(It,Fn)&&Fn!=="css"&&Fn!==js&&(Dn[Fn]=It[Fn]);Dn.ref=zt,Dn.className=ln;var Rn=pn(Ut,Dn),ur=pn(zy,null);return pn(mr,null,ur,Rn)}),wo=function(It,$t){var zt=arguments;if($t==null||!dp.call($t,"css"))return pn.apply(void 0,zt);var Ht=zt.length,Ut=new Array(Ht);Ut[0]=xh,Ut[1]=bh(It,$t);for(var Kt=2;Kt<Ht;Kt++)Ut[Kt]=zt[Kt];return pn.apply(null,Ut)};function Mc(){for(var It=arguments.length,$t=new Array(It),zt=0;zt<It;zt++)$t[zt]=arguments[zt];return _h($t)}var $l=function(){var It=Mc.apply(void 0,arguments),$t="animation-"+It.name;return{name:$t,styles:"@keyframes "+$t+"{"+It.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},u_=function It($t){for(var zt=$t.length,Ht=0,Ut="";Ht<zt;Ht++){var Kt=$t[Ht];if(Kt!=null){var ln=void 0;switch(typeof Kt){case"boolean":break;case"object":{if(Array.isArray(Kt))ln=It(Kt);else{ln="";for(var wn in Kt)Kt[wn]&&wn&&(ln&&(ln+=" "),ln+=wn)}break}default:ln=Kt}ln&&(Ut&&(Ut+=" "),Ut+=ln)}}return Ut};function fp(It,$t,zt){var Ht=[],Ut=Yh(It,Ht,zt);return Ht.length<2?zt:Ut+$t(Ht)}var Fa=function(){return null},za=j0(function(It,$t){var zt=function(){for(var wn=arguments.length,Dn=new Array(wn),Fn=0;Fn<wn;Fn++)Dn[Fn]=arguments[Fn];var Rn=_h(Dn,$t.registered);return up($t,Rn,!1),$t.key+"-"+Rn.name},Ht=function(){for(var wn=arguments.length,Dn=new Array(wn),Fn=0;Fn<wn;Fn++)Dn[Fn]=arguments[Fn];return fp($t.registered,zt,u_(Dn))},Ut={css:zt,cx:Ht,theme:vr(Ca)},Kt=It.children(Ut),ln=pn(Fa,null);return pn(mr,null,ln,Kt)});function pg(It,$t){return $t||($t=It.slice(0)),Object.freeze(Object.defineProperties(It,{raw:{value:Object.freeze($t)}}))}function bm(It,$t){if(It==null)return{};var zt={},Ht=Object.keys(It),Ut,Kt;for(Kt=0;Kt<Ht.length;Kt++)Ut=Ht[Kt],!($t.indexOf(Ut)>=0)&&(zt[Ut]=It[Ut]);return zt}function Ku(It,$t){if(It==null)return{};var zt=bm(It,$t),Ht,Ut;if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(It);for(Ut=0;Ut<Kt.length;Ut++)Ht=Kt[Ut],!($t.indexOf(Ht)>=0)&&(!Object.prototype.propertyIsEnumerable.call(It,Ht)||(zt[Ht]=It[Ht]))}return zt}function Ld(It){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ld=function($t){return typeof $t}:Ld=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Ld(It)}var gg={};Object.defineProperty(gg,"__esModule",{value:!0});var xm=Object.assign||function(It){for(var $t=1;$t<arguments.length;$t++){var zt=arguments[$t];for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(It[Ht]=zt[Ht])}return It},U0=function(){function It($t,zt){for(var Ht=0;Ht<zt.length;Ht++){var Ut=zt[Ht];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty($t,Ut.key,Ut)}}return function($t,zt,Ht){return zt&&It($t.prototype,zt),Ht&&It($t,Ht),$t}}(),wm=ya,pp=mg(wm),G0=yl.exports,Pa=mg(G0);function mg(It){return It&&It.__esModule?It:{default:It}}function Em(It,$t){var zt={};for(var Ht in It)$t.indexOf(Ht)>=0||!Object.prototype.hasOwnProperty.call(It,Ht)||(zt[Ht]=It[Ht]);return zt}function W0(It,$t){if(!(It instanceof $t))throw new TypeError("Cannot call a class as a function")}function Sm(It,$t){if(!It)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:It}function q0(It,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);It.prototype=Object.create($t&&$t.prototype,{constructor:{value:It,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(It,$t):It.__proto__=$t)}var Y0={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},X0=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],Hy=function(It){return X0.forEach(function($t){return delete It[$t]}),It},Z0=function(It,$t){$t.style.fontSize=It.fontSize,$t.style.fontFamily=It.fontFamily,$t.style.fontWeight=It.fontWeight,$t.style.fontStyle=It.fontStyle,$t.style.letterSpacing=It.letterSpacing,$t.style.textTransform=It.textTransform},K0=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,J0=function(){return K0?"_"+Math.random().toString(36).substr(2,12):void 0},Cm=function(It){q0($t,It),U0($t,null,[{key:"getDerivedStateFromProps",value:function(zt,Ht){var Ut=zt.id;return Ut!==Ht.prevId?{inputId:Ut||J0(),prevId:Ut}:null}}]);function $t(zt){W0(this,$t);var Ht=Sm(this,($t.__proto__||Object.getPrototypeOf($t)).call(this,zt));return Ht.inputRef=function(Ut){Ht.input=Ut,typeof Ht.props.inputRef=="function"&&Ht.props.inputRef(Ut)},Ht.placeHolderSizerRef=function(Ut){Ht.placeHolderSizer=Ut},Ht.sizerRef=function(Ut){Ht.sizer=Ut},Ht.state={inputWidth:zt.minWidth,inputId:zt.id||J0(),prevId:zt.id},Ht}return U0($t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(zt,Ht){Ht.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var zt=this.input&&window.getComputedStyle(this.input);!zt||(Z0(zt,this.sizer),this.placeHolderSizer&&Z0(zt,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var zt=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?zt=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:zt=this.sizer.scrollWidth+2;var Ht=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;zt+=Ht,zt<this.props.minWidth&&(zt=this.props.minWidth),zt!==this.state.inputWidth&&this.setState({inputWidth:zt})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var zt=this.props.injectStyles;return K0&&zt?pp.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var zt=[this.props.defaultValue,this.props.value,""].reduce(function(ln,wn){return ln!=null?ln:wn}),Ht=xm({},this.props.style);Ht.display||(Ht.display="inline-block");var Ut=xm({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),Kt=Em(this.props,[]);return Hy(Kt),Kt.className=this.props.inputClassName,Kt.id=this.state.inputId,Kt.style=Ut,pp.default.createElement("div",{className:this.props.className,style:Ht},this.renderStyles(),pp.default.createElement("input",xm({},Kt,{ref:this.inputRef})),pp.default.createElement("div",{ref:this.sizerRef,style:Y0},zt),this.props.placeholder?pp.default.createElement("div",{ref:this.placeHolderSizerRef,style:Y0},this.props.placeholder):null)}}]),$t}(wm.Component);Cm.propTypes={className:Pa.default.string,defaultValue:Pa.default.any,extraWidth:Pa.default.oneOfType([Pa.default.number,Pa.default.string]),id:Pa.default.string,injectStyles:Pa.default.bool,inputClassName:Pa.default.string,inputRef:Pa.default.func,inputStyle:Pa.default.object,minWidth:Pa.default.oneOfType([Pa.default.number,Pa.default.string]),onAutosize:Pa.default.func,onChange:Pa.default.func,placeholder:Pa.default.string,placeholderIsMinWidth:Pa.default.bool,style:Pa.default.object,value:Pa.default.any},Cm.defaultProps={minWidth:1,injectStyles:!0};var Tm=gg.default=Cm;function mf(It,$t){if(!(It instanceof $t))throw new TypeError("Cannot call a class as a function")}function Q0(It,$t){for(var zt=0;zt<$t.length;zt++){var Ht=$t[zt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(It,Ht.key,Ht)}}function yg(It,$t,zt){return $t&&Q0(It.prototype,$t),zt&&Q0(It,zt),It}function vg(It,$t){return vg=Object.setPrototypeOf||function(zt,Ht){return zt.__proto__=Ht,zt},vg(It,$t)}function gp(It,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function");It.prototype=Object.create($t&&$t.prototype,{constructor:{value:It,writable:!0,configurable:!0}}),$t&&vg(It,$t)}function wh(It,$t,zt){return $t in It?Object.defineProperty(It,$t,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[$t]=zt,It}function Vy(It,$t,zt){return $t in It?Object.defineProperty(It,$t,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[$t]=zt,It}function mp(It,$t){var zt=Object.keys(It);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(It);$t&&(Ht=Ht.filter(function(Ut){return Object.getOwnPropertyDescriptor(It,Ut).enumerable})),zt.push.apply(zt,Ht)}return zt}function pl(It){for(var $t=1;$t<arguments.length;$t++){var zt=arguments[$t]!=null?arguments[$t]:{};$t%2?mp(Object(zt),!0).forEach(function(Ht){Vy(It,Ht,zt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(zt)):mp(Object(zt)).forEach(function(Ht){Object.defineProperty(It,Ht,Object.getOwnPropertyDescriptor(zt,Ht))})}return It}function km(It){return km=Object.setPrototypeOf?Object.getPrototypeOf:function($t){return $t.__proto__||Object.getPrototypeOf($t)},km(It)}function e1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function jy(It){if(It===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return It}function yp(It,$t){return $t&&(typeof $t=="object"||typeof $t=="function")?$t:jy(It)}function yf(It){var $t=e1();return function(){var zt=km(It),Ht;if($t){var Ut=km(this).constructor;Ht=Reflect.construct(zt,arguments,Ut)}else Ht=zt.apply(this,arguments);return yp(this,Ht)}}var Id=function(){};function Am(It,$t){return $t?$t[0]==="-"?It+$t:It+"__"+$t:It}function Uy(It,$t,zt){var Ht=[zt];if($t&&It)for(var Ut in $t)$t.hasOwnProperty(Ut)&&$t[Ut]&&Ht.push("".concat(Am(It,Ut)));return Ht.filter(function(Kt){return Kt}).map(function(Kt){return String(Kt).trim()}).join(" ")}var n1=function(It){return Array.isArray(It)?It.filter(Boolean):Ld(It)==="object"&&It!==null?[It]:[]},Gy=function(It){It.className,It.clearValue,It.cx,It.getStyles,It.getValue,It.hasValue,It.isMulti,It.isRtl,It.options,It.selectOption,It.selectProps,It.setValue,It.theme;var $t=Ku(It,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]);return pl({},$t)};function r1(It){return[document.documentElement,document.body,window].indexOf(It)>-1}function i1(It){return r1(It)?window.pageYOffset:It.scrollTop}function Lm(It,$t){if(r1(It)){window.scrollTo(0,$t);return}It.scrollTop=$t}function Wy(It){var $t=getComputedStyle(It),zt=$t.position==="absolute",Ht=/(auto|scroll)/,Ut=document.documentElement;if($t.position==="fixed")return Ut;for(var Kt=It;Kt=Kt.parentElement;)if($t=getComputedStyle(Kt),!(zt&&$t.position==="static")&&Ht.test($t.overflow+$t.overflowY+$t.overflowX))return Kt;return Ut}function o1(It,$t,zt,Ht){return zt*((It=It/Ht-1)*It*It+1)+$t}function _g(It,$t){var zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Id,Ut=i1(It),Kt=$t-Ut,ln=10,wn=0;function Dn(){wn+=ln;var Fn=o1(wn,Ut,Kt,zt);Lm(It,Fn),wn<zt?window.requestAnimationFrame(Dn):Ht(It)}Dn()}function h_(It,$t){var zt=It.getBoundingClientRect(),Ht=$t.getBoundingClientRect(),Ut=$t.offsetHeight/3;Ht.bottom+Ut>zt.bottom?Lm(It,Math.min($t.offsetTop+$t.clientHeight-It.offsetHeight+Ut,It.scrollHeight)):Ht.top-Ut<zt.top&&Lm(It,Math.max($t.offsetTop-Ut,0))}function qy(It){var $t=It.getBoundingClientRect();return{bottom:$t.bottom,height:$t.height,left:$t.left,right:$t.right,top:$t.top,width:$t.width}}function Yy(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function d_(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var s1=!1,f_={get passive(){return s1=!0}},vf=typeof window<"u"?window:{};vf.addEventListener&&vf.removeEventListener&&(vf.addEventListener("p",Id,f_),vf.removeEventListener("p",Id,!1));var Xy=s1;function Zy(It){var $t=It.maxHeight,zt=It.menuEl,Ht=It.minHeight,Ut=It.placement,Kt=It.shouldScroll,ln=It.isFixedPosition,wn=It.theme,Dn=wn.spacing,Fn=Wy(zt),Rn={placement:"bottom",maxHeight:$t};if(!zt||!zt.offsetParent)return Rn;var ur=Fn.getBoundingClientRect(),Ar=ur.height,Br=zt.getBoundingClientRect(),Jr=Br.bottom,gi=Br.height,fi=Br.top,Mi=zt.offsetParent.getBoundingClientRect(),Vi=Mi.top,zo=window.innerHeight,Lo=i1(Fn),Co=parseInt(getComputedStyle(zt).marginBottom,10),Vo=parseInt(getComputedStyle(zt).marginTop,10),Io=Vi-Vo,Ha=zo-fi,Xa=Io+Lo,pa=Ar-Lo-fi,ga=Jr-zo+Lo+Co,Eh=Lo+fi-Vo,iu=160;switch(Ut){case"auto":case"bottom":if(Ha>=gi)return{placement:"bottom",maxHeight:$t};if(pa>=gi&&!ln)return Kt&&_g(Fn,ga,iu),{placement:"bottom",maxHeight:$t};if(!ln&&pa>=Ht||ln&&Ha>=Ht){Kt&&_g(Fn,ga,iu);var xf=ln?Ha-Co:pa-Co;return{placement:"bottom",maxHeight:xf}}if(Ut==="auto"||ln){var Sh=$t,Kh=ln?Io:Xa;return Kh>=Ht&&(Sh=Math.min(Kh-Co-Dn.controlHeight,$t)),{placement:"top",maxHeight:Sh}}if(Ut==="bottom")return Kt&&Lm(Fn,ga),{placement:"bottom",maxHeight:$t};break;case"top":if(Io>=gi)return{placement:"top",maxHeight:$t};if(Xa>=gi&&!ln)return Kt&&_g(Fn,Eh,iu),{placement:"top",maxHeight:$t};if(!ln&&Xa>=Ht||ln&&Io>=Ht){var vc=$t;return(!ln&&Xa>=Ht||ln&&Io>=Ht)&&(vc=ln?Io-Vo:Xa-Vo),Kt&&_g(Fn,Eh,iu),{placement:"top",maxHeight:vc}}return{placement:"bottom",maxHeight:$t};default:throw new Error('Invalid placement provided "'.concat(Ut,'".'))}return Rn}function Ky(It){var $t={bottom:"top",top:"bottom"};return It?$t[It]:"bottom"}var _f=function(It){return It==="auto"?"bottom":It},Jy=function(It){var $t,zt=It.placement,Ht=It.theme,Ut=Ht.borderRadius,Kt=Ht.spacing,ln=Ht.colors;return $t={label:"menu"},wh($t,Ky(zt),"100%"),wh($t,"backgroundColor",ln.neutral0),wh($t,"borderRadius",Ut),wh($t,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),wh($t,"marginBottom",Kt.menuGutter),wh($t,"marginTop",Kt.menuGutter),wh($t,"position","absolute"),wh($t,"width","100%"),wh($t,"zIndex",1),$t},Qy=Bn({getPortalPlacement:null}),ev=function(It){gp(zt,It);var $t=yf(zt);function zt(){var Ht;mf(this,zt);for(var Ut=arguments.length,Kt=new Array(Ut),ln=0;ln<Ut;ln++)Kt[ln]=arguments[ln];return Ht=$t.call.apply($t,[this].concat(Kt)),Ht.state={maxHeight:Ht.props.maxMenuHeight,placement:null},Ht.getPlacement=function(wn){var Dn=Ht.props,Fn=Dn.minMenuHeight,Rn=Dn.maxMenuHeight,ur=Dn.menuPlacement,Ar=Dn.menuPosition,Br=Dn.menuShouldScrollIntoView,Jr=Dn.theme;if(wn){var gi=Ar==="fixed",fi=Br&&!gi,Mi=Zy({maxHeight:Rn,menuEl:wn,minHeight:Fn,placement:ur,shouldScroll:fi,isFixedPosition:gi,theme:Jr}),Vi=Ht.context.getPortalPlacement;Vi&&Vi(Mi),Ht.setState(Mi)}},Ht.getUpdatedProps=function(){var wn=Ht.props.menuPlacement,Dn=Ht.state.placement||_f(wn);return pl(pl({},Ht.props),{},{placement:Dn,maxHeight:Ht.state.maxHeight})},Ht}return yg(zt,[{key:"render",value:function(){var Ht=this.props.children;return Ht({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),zt}(vn);ev.contextType=Qy;var tv=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerRef,ln=It.innerProps;return wo("div",ro({css:Ut("menu",It),className:Ht({menu:!0},zt),ref:Kt},ln),$t)},p_=function(It){var $t=It.maxHeight,zt=It.theme.spacing.baseUnit;return{maxHeight:$t,overflowY:"auto",paddingBottom:zt,paddingTop:zt,position:"relative",WebkitOverflowScrolling:"touch"}},nv=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps,ln=It.innerRef,wn=It.isMulti;return wo("div",ro({css:Ut("menuList",It),className:Ht({"menu-list":!0,"menu-list--is-multi":wn},zt),ref:ln},Kt),$t)},a1=function(It){var $t=It.theme,zt=$t.spacing.baseUnit,Ht=$t.colors;return{color:Ht.neutral40,padding:"".concat(zt*2,"px ").concat(zt*3,"px"),textAlign:"center"}},vt=a1,_t=a1,xt=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps;return wo("div",ro({css:Ut("noOptionsMessage",It),className:Ht({"menu-notice":!0,"menu-notice--no-options":!0},zt)},Kt),$t)};xt.defaultProps={children:"No options"};var Tt=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps;return wo("div",ro({css:Ut("loadingMessage",It),className:Ht({"menu-notice":!0,"menu-notice--loading":!0},zt)},Kt),$t)};Tt.defaultProps={children:"Loading..."};var At=function(It){var $t=It.rect,zt=It.offset,Ht=It.position;return{left:$t.left,position:Ht,top:zt,width:$t.width,zIndex:1}},Pt=function(It){gp(zt,It);var $t=yf(zt);function zt(){var Ht;mf(this,zt);for(var Ut=arguments.length,Kt=new Array(Ut),ln=0;ln<Ut;ln++)Kt[ln]=arguments[ln];return Ht=$t.call.apply($t,[this].concat(Kt)),Ht.state={placement:null},Ht.getPortalPlacement=function(wn){var Dn=wn.placement,Fn=_f(Ht.props.menuPlacement);Dn!==Fn&&Ht.setState({placement:Dn})},Ht}return yg(zt,[{key:"render",value:function(){var Ht=this.props,Ut=Ht.appendTo,Kt=Ht.children,ln=Ht.className,wn=Ht.controlElement,Dn=Ht.cx,Fn=Ht.innerProps,Rn=Ht.menuPlacement,ur=Ht.menuPosition,Ar=Ht.getStyles,Br=ur==="fixed";if(!Ut&&!Br||!wn)return null;var Jr=this.state.placement||_f(Rn),gi=qy(wn),fi=Br?0:window.pageYOffset,Mi=gi[Jr]+fi,Vi={offset:Mi,position:ur,rect:gi},zo=wo("div",ro({css:Ar("menuPortal",Vi),className:Dn({"menu-portal":!0},ln)},Fn),Kt);return wo(Qy.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},Ut?Ur(zo,Ut):zo)}}]),zt}(vn),Nt=function(It){var $t=It.isDisabled,zt=It.isRtl;return{label:"container",direction:zt?"rtl":null,pointerEvents:$t?"none":null,position:"relative"}},Vt=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps,ln=It.isDisabled,wn=It.isRtl;return wo("div",ro({css:Ut("container",It),className:Ht({"--is-disabled":ln,"--is-rtl":wn},zt)},Kt),$t)},Gt=function(It){var $t=It.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat($t.baseUnit/2,"px ").concat($t.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},qt=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.innerProps,Kt=It.isMulti,ln=It.getStyles,wn=It.hasValue;return wo("div",ro({css:ln("valueContainer",It),className:Ht({"value-container":!0,"value-container--is-multi":Kt,"value-container--has-value":wn},zt)},Ut),$t)},en=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xt=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.innerProps,Kt=It.getStyles;return wo("div",ro({css:Kt("indicatorsContainer",It),className:Ht({indicators:!0},zt)},Ut),$t)},an,_n={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},bn=function(It){var $t=It.size,zt=Ku(It,["size"]);return wo("svg",ro({height:$t,width:$t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_n},zt))},En=function(It){return wo(bn,ro({size:20},It),wo("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},un=function(It){return wo(bn,ro({size:20},It),wo("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Vn=function(It){var $t=It.isFocused,zt=It.theme,Ht=zt.spacing.baseUnit,Ut=zt.colors;return{label:"indicatorContainer",color:$t?Ut.neutral60:Ut.neutral20,display:"flex",padding:Ht*2,transition:"color 150ms",":hover":{color:$t?Ut.neutral80:Ut.neutral40}}},nr=Vn,xn=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps;return wo("div",ro({css:Ut("dropdownIndicator",It),className:Ht({indicator:!0,"dropdown-indicator":!0},zt)},Kt),$t||wo(un,null))},zn=Vn,jn=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps;return wo("div",ro({css:Ut("clearIndicator",It),className:Ht({indicator:!0,"clear-indicator":!0},zt)},Kt),$t||wo(En,null))},qn=function(It){var $t=It.isDisabled,zt=It.theme,Ht=zt.spacing.baseUnit,Ut=zt.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:$t?Ut.neutral10:Ut.neutral20,marginBottom:Ht*2,marginTop:Ht*2,width:1}},Gn=function(It){var $t=It.className,zt=It.cx,Ht=It.getStyles,Ut=It.innerProps;return wo("span",ro({},Ut,{css:Ht("indicatorSeparator",It),className:zt({"indicator-separator":!0},$t)}))},Zr=$l(an||(an=pg([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Fr=function(It){var $t=It.isFocused,zt=It.size,Ht=It.theme,Ut=Ht.colors,Kt=Ht.spacing.baseUnit;return{label:"loadingIndicator",color:$t?Ut.neutral60:Ut.neutral20,display:"flex",padding:Kt*2,transition:"color 150ms",alignSelf:"center",fontSize:zt,lineHeight:1,marginRight:zt,textAlign:"center",verticalAlign:"middle"}},ei=function(It){var $t=It.delay,zt=It.offset;return wo("span",{css:Mc({animation:"".concat(Zr," 1s ease-in-out ").concat($t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:zt?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},zr=function(It){var $t=It.className,zt=It.cx,Ht=It.getStyles,Ut=It.innerProps,Kt=It.isRtl;return wo("div",ro({css:Ht("loadingIndicator",It),className:zt({indicator:!0,"loading-indicator":!0},$t)},Ut),wo(ei,{delay:0,offset:Kt}),wo(ei,{delay:160,offset:!0}),wo(ei,{delay:320,offset:!Kt}))};zr.defaultProps={size:4};var si=function(It){var $t=It.isDisabled,zt=It.isFocused,Ht=It.theme,Ut=Ht.colors,Kt=Ht.borderRadius,ln=Ht.spacing;return{label:"control",alignItems:"center",backgroundColor:$t?Ut.neutral5:Ut.neutral0,borderColor:$t?Ut.neutral10:zt?Ut.primary:Ut.neutral20,borderRadius:Kt,borderStyle:"solid",borderWidth:1,boxShadow:zt?"0 0 0 1px ".concat(Ut.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:ln.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:zt?Ut.primary:Ut.neutral30}}},Wr=function(It){var $t=It.children,zt=It.cx,Ht=It.getStyles,Ut=It.className,Kt=It.isDisabled,ln=It.isFocused,wn=It.innerRef,Dn=It.innerProps,Fn=It.menuIsOpen;return wo("div",ro({ref:wn,css:Ht("control",It),className:zt({control:!0,"control--is-disabled":Kt,"control--is-focused":ln,"control--menu-is-open":Fn},Ut)},Dn),$t)},Gr=function(It){var $t=It.theme.spacing;return{paddingBottom:$t.baseUnit*2,paddingTop:$t.baseUnit*2}},Vr=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.Heading,ln=It.headingProps,wn=It.innerProps,Dn=It.label,Fn=It.theme,Rn=It.selectProps;return wo("div",ro({css:Ut("group",It),className:Ht({group:!0},zt)},wn),wo(Kt,ro({},ln,{selectProps:Rn,theme:Fn,getStyles:Ut,cx:Ht}),Dn),wo("div",null,$t))},ni=function(It){var $t=It.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:$t.baseUnit*3,paddingRight:$t.baseUnit*3,textTransform:"uppercase"}},Yr=function(It){var $t=It.getStyles,zt=It.cx,Ht=It.className,Ut=Gy(It);Ut.data;var Kt=Ku(Ut,["data"]);return wo("div",ro({css:$t("groupHeading",It),className:zt({"group-heading":!0},Ht)},Kt))},ai=function(It){var $t=It.isDisabled,zt=It.theme,Ht=zt.spacing,Ut=zt.colors;return{margin:Ht.baseUnit/2,paddingBottom:Ht.baseUnit/2,paddingTop:Ht.baseUnit/2,visibility:$t?"hidden":"visible",color:Ut.neutral80}},Cr=function(It){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:It?0:1,outline:0,padding:0,color:"inherit"}},Ki=function(It){var $t=It.className,zt=It.cx,Ht=It.getStyles,Ut=Gy(It),Kt=Ut.innerRef,ln=Ut.isDisabled,wn=Ut.isHidden,Dn=Ku(Ut,["innerRef","isDisabled","isHidden"]);return wo("div",{css:Ht("input",It)},wo(Tm,ro({className:zt({input:!0},$t),inputRef:Kt,inputStyle:Cr(wn),disabled:ln},Dn)))},Si=function(It){var $t=It.theme,zt=$t.spacing,Ht=$t.borderRadius,Ut=$t.colors;return{label:"multiValue",backgroundColor:Ut.neutral10,borderRadius:Ht/2,display:"flex",margin:zt.baseUnit/2,minWidth:0}},Ro=function(It){var $t=It.theme,zt=$t.borderRadius,Ht=$t.colors,Ut=It.cropWithEllipsis;return{borderRadius:zt/2,color:Ht.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:Ut?"ellipsis":null,whiteSpace:"nowrap"}},Wi=function(It){var $t=It.theme,zt=$t.spacing,Ht=$t.borderRadius,Ut=$t.colors,Kt=It.isFocused;return{alignItems:"center",borderRadius:Ht/2,backgroundColor:Kt&&Ut.dangerLight,display:"flex",paddingLeft:zt.baseUnit,paddingRight:zt.baseUnit,":hover":{backgroundColor:Ut.dangerLight,color:Ut.danger}}},ho=function(It){var $t=It.children,zt=It.innerProps;return wo("div",zt,$t)},is=ho,Ws=ho;function gl(It){var $t=It.children,zt=It.innerProps;return wo("div",zt,$t||wo(En,{size:14}))}var bg=function(It){var $t=It.children,zt=It.className,Ht=It.components,Ut=It.cx,Kt=It.data,ln=It.getStyles,wn=It.innerProps,Dn=It.isDisabled,Fn=It.removeProps,Rn=It.selectProps,ur=Ht.Container,Ar=Ht.Label,Br=Ht.Remove;return wo(za,null,function(Jr){var gi=Jr.css,fi=Jr.cx;return wo(ur,{data:Kt,innerProps:pl({className:fi(gi(ln("multiValue",It)),Ut({"multi-value":!0,"multi-value--is-disabled":Dn},zt))},wn),selectProps:Rn},wo(Ar,{data:Kt,innerProps:{className:fi(gi(ln("multiValueLabel",It)),Ut({"multi-value__label":!0},zt))},selectProps:Rn},$t),wo(Br,{data:Kt,innerProps:pl({className:fi(gi(ln("multiValueRemove",It)),Ut({"multi-value__remove":!0},zt))},Fn),selectProps:Rn}))})};bg.defaultProps={cropWithEllipsis:!0};var Pd=function(It){var $t=It.isDisabled,zt=It.isFocused,Ht=It.isSelected,Ut=It.theme,Kt=Ut.spacing,ln=Ut.colors;return{label:"option",backgroundColor:Ht?ln.primary:zt?ln.primary25:"transparent",color:$t?ln.neutral20:Ht?ln.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(Kt.baseUnit*2,"px ").concat(Kt.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!$t&&(Ht?ln.primary:ln.primary50)}}},xg=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.isDisabled,ln=It.isFocused,wn=It.isSelected,Dn=It.innerRef,Fn=It.innerProps;return wo("div",ro({css:Ut("option",It),className:Ht({option:!0,"option--is-disabled":Kt,"option--is-focused":ln,"option--is-selected":wn},zt),ref:Dn},Fn),$t)},wg=function(It){var $t=It.theme,zt=$t.spacing,Ht=$t.colors;return{label:"placeholder",color:Ht.neutral50,marginLeft:zt.baseUnit/2,marginRight:zt.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},vp=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.innerProps;return wo("div",ro({css:Ut("placeholder",It),className:Ht({placeholder:!0},zt)},Kt),$t)},Im=function(It){var $t=It.isDisabled,zt=It.theme,Ht=zt.spacing,Ut=zt.colors;return{label:"singleValue",color:$t?Ut.neutral40:Ut.neutral80,marginLeft:Ht.baseUnit/2,marginRight:Ht.baseUnit/2,maxWidth:"calc(100% - ".concat(Ht.baseUnit*2,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},_p=function(It){var $t=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Kt=It.isDisabled,ln=It.innerProps;return wo("div",ro({css:Ut("singleValue",It),className:Ht({"single-value":!0,"single-value--is-disabled":Kt},zt)},ln),$t)},rv={ClearIndicator:jn,Control:Wr,DropdownIndicator:xn,DownChevron:un,CrossIcon:En,Group:Vr,GroupHeading:Yr,IndicatorsContainer:Xt,IndicatorSeparator:Gn,Input:Ki,LoadingIndicator:zr,Menu:tv,MenuList:nv,MenuPortal:Pt,LoadingMessage:Tt,NoOptionsMessage:xt,MultiValue:bg,MultiValueContainer:is,MultiValueLabel:Ws,MultiValueRemove:gl,Option:xg,Placeholder:vp,SelectContainer:Vt,SingleValue:_p,ValueContainer:qt},iv=function(It){return pl(pl({},rv),It.components)};function g_(It,$t){($t==null||$t>It.length)&&($t=It.length);for(var zt=0,Ht=new Array($t);zt<$t;zt++)Ht[zt]=It[zt];return Ht}function Jb(It){if(Array.isArray(It))return g_(It)}function Qb(It){if(typeof Symbol<"u"&&It[Symbol.iterator]!=null||It["@@iterator"]!=null)return Array.from(It)}function _2(It,$t){if(It){if(typeof It=="string")return g_(It,$t);var zt=Object.prototype.toString.call(It).slice(8,-1);if(zt==="Object"&&It.constructor&&(zt=It.constructor.name),zt==="Map"||zt==="Set")return Array.from(It);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return g_(It,$t)}}function C2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U_(It){return Jb(It)||Qb(It)||_2(It)||C2()}var G_=Number.isNaN||function(It){return typeof It=="number"&&It!==It};function k2(It,$t){return!!(It===$t||G_(It)&&G_($t))}function A2(It,$t){if(It.length!==$t.length)return!1;for(var zt=0;zt<It.length;zt++)if(!k2(It[zt],$t[zt]))return!1;return!0}function I2(It,$t){$t===void 0&&($t=A2);var zt,Ht=[],Ut,Kt=!1;function ln(){for(var wn=[],Dn=0;Dn<arguments.length;Dn++)wn[Dn]=arguments[Dn];return Kt&&zt===this&&$t(wn,Ht)||(Ut=It.apply(this,wn),Kt=!0,zt=this,Ht=wn),Ut}return ln}for(var P2={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},M2=function(It){return wo("span",ro({css:P2},It))},$2={guidance:function(It){var $t=It.isSearchable,zt=It.isMulti,Ht=It.isDisabled,Ut=It.tabSelectsValue,Kt=It.context;switch(Kt){case"menu":return"Use Up and Down to choose options".concat(Ht?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(Ut?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(It["aria-label"]||"Select"," is focused ").concat($t?",type to refine list":"",", press Down to open the menu, ").concat(zt?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(It){var $t=It.action,zt=It.label,Ht=zt===void 0?"":zt,Ut=It.isDisabled;switch($t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(Ht,", deselected.");case"select-option":return Ut?"option ".concat(Ht," is disabled. Select another option."):"option ".concat(Ht,", selected.");default:return""}},onFocus:function(It){var $t=It.context,zt=It.focused,Ht=zt===void 0?{}:zt,Ut=It.options,Kt=It.label,ln=Kt===void 0?"":Kt,wn=It.selectValue,Dn=It.isDisabled,Fn=It.isSelected,Rn=function(Br,Jr){return Br&&Br.length?"".concat(Br.indexOf(Jr)+1," of ").concat(Br.length):""};if($t==="value"&&wn)return"value ".concat(ln," focused, ").concat(Rn(wn,Ht),".");if($t==="menu"){var ur=Dn?" disabled":"",Ar="".concat(Fn?"selected":"focused").concat(ur);return"option ".concat(ln," ").concat(Ar,", ").concat(Rn(Ut,Ht),".")}return""},onFilter:function(It){var $t=It.inputValue,zt=It.resultsMessage;return"".concat(zt).concat($t?" for search term "+$t:"",".")}},R2=function(It){var $t=It.ariaSelection,zt=It.focusedOption,Ht=It.focusedValue,Ut=It.focusableOptions,Kt=It.isFocused,ln=It.selectValue,wn=It.selectProps,Dn=wn.ariaLiveMessages,Fn=wn.getOptionLabel,Rn=wn.inputValue,ur=wn.isMulti,Ar=wn.isOptionDisabled,Br=wn.isSearchable,Jr=wn.menuIsOpen,gi=wn.options,fi=wn.screenReaderStatus,Mi=wn.tabSelectsValue,Vi=wn["aria-label"],zo=wn["aria-live"],Lo=Wn(function(){return pl(pl({},$2),Dn||{})},[Dn]),Co=Wn(function(){var pa="";if($t&&Lo.onChange){var ga=$t.option,Eh=$t.removedValue,iu=$t.value,xf=function(vc){return Array.isArray(vc)?null:vc},Sh=Eh||ga||xf(iu),Kh=pl({isDisabled:Sh&&Ar(Sh),label:Sh?Fn(Sh):""},$t);pa=Lo.onChange(Kh)}return pa},[$t,Ar,Fn,Lo]),Vo=Wn(function(){var pa="",ga=zt||Ht,Eh=!!(zt&&ln&&ln.includes(zt));if(ga&&Lo.onFocus){var iu={focused:ga,label:Fn(ga),isDisabled:Ar(ga),isSelected:Eh,options:gi,context:ga===zt?"menu":"value",selectValue:ln};pa=Lo.onFocus(iu)}return pa},[zt,Ht,Fn,Ar,Lo,gi,ln]),Io=Wn(function(){var pa="";if(Jr&&gi.length&&Lo.onFilter){var ga=fi({count:Ut.length});pa=Lo.onFilter({inputValue:Rn,resultsMessage:ga})}return pa},[Ut,Rn,Jr,Lo,gi,fi]),Ha=Wn(function(){var pa="";if(Lo.guidance){var ga=Ht?"value":Jr?"menu":"input";pa=Lo.guidance({"aria-label":Vi,context:ga,isDisabled:zt&&Ar(zt),isMulti:ur,isSearchable:Br,tabSelectsValue:Mi})}return pa},[Vi,zt,Ht,ur,Ar,Br,Jr,Lo,Mi]),Xa="".concat(Vo," ").concat(Io," ").concat(Ha);return wo(M2,{"aria-live":zo,"aria-atomic":"false","aria-relevant":"additions text"},Kt&&wo(Fi.Fragment,null,wo("span",{id:"aria-selection"},Co),wo("span",{id:"aria-context"},Xa)))},m_=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],N2=new RegExp("["+m_.map(function(It){return It.letters}).join("")+"]","g"),W_={},y_=0;y_<m_.length;y_++)for(var v_=m_[y_],__=0;__<v_.letters.length;__++)W_[v_.letters[__]]=v_.base;var q_=function(It){return It.replace(N2,function($t){return W_[$t]})},B2=I2(q_),Y_=function(It){return It.replace(/^\s+|\s+$/g,"")},F2=function(It){return"".concat(It.label," ").concat(It.value)},z2=function(It){return function($t,zt){var Ht=pl({ignoreCase:!0,ignoreAccents:!0,stringify:F2,trim:!0,matchFrom:"any"},It),Ut=Ht.ignoreCase,Kt=Ht.ignoreAccents,ln=Ht.stringify,wn=Ht.trim,Dn=Ht.matchFrom,Fn=wn?Y_(zt):zt,Rn=wn?Y_(ln($t)):ln($t);return Ut&&(Fn=Fn.toLowerCase(),Rn=Rn.toLowerCase()),Kt&&(Fn=B2(Fn),Rn=q_(Rn)),Dn==="start"?Rn.substr(0,Fn.length)===Fn:Rn.indexOf(Fn)>-1}};function H2(It){It.in,It.out,It.onExited,It.appear,It.enter,It.exit;var $t=It.innerRef;It.emotion;var zt=Ku(It,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return wo("input",ro({ref:$t},zt,{css:Mc({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var V2=function(It){It.preventDefault(),It.stopPropagation()};function j2(It){var $t=It.isEnabled,zt=It.onBottomArrive,Ht=It.onBottomLeave,Ut=It.onTopArrive,Kt=It.onTopLeave,ln=An(!1),wn=An(!1),Dn=An(0),Fn=An(null),Rn=er(function(fi,Mi){if(Fn.current!==null){var Vi=Fn.current,zo=Vi.scrollTop,Lo=Vi.scrollHeight,Co=Vi.clientHeight,Vo=Fn.current,Io=Mi>0,Ha=Lo-Co-zo,Xa=!1;Ha>Mi&&ln.current&&(Ht&&Ht(fi),ln.current=!1),Io&&wn.current&&(Kt&&Kt(fi),wn.current=!1),Io&&Mi>Ha?(zt&&!ln.current&&zt(fi),Vo.scrollTop=Lo,Xa=!0,ln.current=!0):!Io&&-Mi>zo&&(Ut&&!wn.current&&Ut(fi),Vo.scrollTop=0,Xa=!0,wn.current=!0),Xa&&V2(fi)}},[]),ur=er(function(fi){Rn(fi,fi.deltaY)},[Rn]),Ar=er(function(fi){Dn.current=fi.changedTouches[0].clientY},[]),Br=er(function(fi){var Mi=Dn.current-fi.changedTouches[0].clientY;Rn(fi,Mi)},[Rn]),Jr=er(function(fi){if(fi){var Mi=Xy?{passive:!1}:!1;typeof fi.addEventListener=="function"&&fi.addEventListener("wheel",ur,Mi),typeof fi.addEventListener=="function"&&fi.addEventListener("touchstart",Ar,Mi),typeof fi.addEventListener=="function"&&fi.addEventListener("touchmove",Br,Mi)}},[Br,Ar,ur]),gi=er(function(fi){!fi||(typeof fi.removeEventListener=="function"&&fi.removeEventListener("wheel",ur,!1),typeof fi.removeEventListener=="function"&&fi.removeEventListener("touchstart",Ar,!1),typeof fi.removeEventListener=="function"&&fi.removeEventListener("touchmove",Br,!1))},[Br,Ar,ur]);return Ci(function(){if($t){var fi=Fn.current;return Jr(fi),function(){gi(fi)}}},[$t,Jr,gi]),function(fi){Fn.current=fi}}var X_=["boxSizing","height","overflow","paddingRight","position"],Z_={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function K_(It){It.preventDefault()}function J_(It){It.stopPropagation()}function Q_(){var It=this.scrollTop,$t=this.scrollHeight,zt=It+this.offsetHeight;It===0?this.scrollTop=1:zt===$t&&(this.scrollTop=It-1)}function eb(){return"ontouchstart"in window||navigator.maxTouchPoints}var tb=!!(typeof window<"u"&&window.document&&window.document.createElement),l1=0,Pm={capture:!1,passive:!1};function U2(It){var $t=It.isEnabled,zt=It.accountForScrollbars,Ht=zt===void 0?!0:zt,Ut=An({}),Kt=An(null),ln=er(function(Dn){if(tb){var Fn=document.body,Rn=Fn&&Fn.style;if(Ht&&X_.forEach(function(Jr){var gi=Rn&&Rn[Jr];Ut.current[Jr]=gi}),Ht&&l1<1){var ur=parseInt(Ut.current.paddingRight,10)||0,Ar=document.body?document.body.clientWidth:0,Br=window.innerWidth-Ar+ur||0;Object.keys(Z_).forEach(function(Jr){var gi=Z_[Jr];Rn&&(Rn[Jr]=gi)}),Rn&&(Rn.paddingRight="".concat(Br,"px"))}Fn&&eb()&&(Fn.addEventListener("touchmove",K_,Pm),Dn&&(Dn.addEventListener("touchstart",Q_,Pm),Dn.addEventListener("touchmove",J_,Pm))),l1+=1}},[]),wn=er(function(Dn){if(tb){var Fn=document.body,Rn=Fn&&Fn.style;l1=Math.max(l1-1,0),Ht&&l1<1&&X_.forEach(function(ur){var Ar=Ut.current[ur];Rn&&(Rn[ur]=Ar)}),Fn&&eb()&&(Fn.removeEventListener("touchmove",K_,Pm),Dn&&(Dn.removeEventListener("touchstart",Q_,Pm),Dn.removeEventListener("touchmove",J_,Pm)))}},[]);return Ci(function(){if($t){var Dn=Kt.current;return ln(Dn),function(){wn(Dn)}}},[$t,ln,wn]),function(Dn){Kt.current=Dn}}var G2=function(){return document.activeElement&&document.activeElement.blur()},W2={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function q2(It){var $t=It.children,zt=It.lockEnabled,Ht=It.captureEnabled,Ut=Ht===void 0?!0:Ht,Kt=It.onBottomArrive,ln=It.onBottomLeave,wn=It.onTopArrive,Dn=It.onTopLeave,Fn=j2({isEnabled:Ut,onBottomArrive:Kt,onBottomLeave:ln,onTopArrive:wn,onTopLeave:Dn}),Rn=U2({isEnabled:zt}),ur=function(Ar){Fn(Ar),Rn(Ar)};return wo(Fi.Fragment,null,zt&&wo("div",{onClick:G2,css:W2}),$t(ur))}var Y2=function(It){return It.label},X2=function(It){return It.label},Z2=function(It){return It.value},K2=function(It){return!!It.isDisabled},J2={clearIndicator:zn,container:Nt,control:si,dropdownIndicator:nr,group:Gr,groupHeading:ni,indicatorsContainer:en,indicatorSeparator:qn,input:ai,loadingIndicator:Fr,loadingMessage:_t,menu:Jy,menuList:p_,menuPortal:At,multiValue:Si,multiValueLabel:Ro,multiValueRemove:Wi,noOptionsMessage:vt,option:Pd,placeholder:wg,singleValue:Im,valueContainer:Gt},Q2={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},ex=4,nb=4,tx=38,nx=nb*2,rx={baseUnit:nb,controlHeight:tx,menuGutter:nx},b_={borderRadius:ex,colors:Q2,spacing:rx},ix={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Yy(),captureMenuScroll:!Yy(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:z2(),formatGroupLabel:Y2,getOptionLabel:X2,getOptionValue:Z2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:K2,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!d_(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(It){var $t=It.count;return"".concat($t," result").concat($t!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function rb(It,$t,zt,Ht){var Ut=lb(It,$t,zt),Kt=cb(It,$t,zt),ln=ab(It,$t),wn=ov(It,$t);return{type:"option",data:$t,isDisabled:Ut,isSelected:Kt,label:ln,value:wn,index:Ht}}function ib(It,$t){return It.options.map(function(zt,Ht){if(zt.options){var Ut=zt.options.map(function(ln,wn){return rb(It,ln,$t,wn)}).filter(function(ln){return sb(It,ln)});return Ut.length>0?{type:"group",data:zt,options:Ut,index:Ht}:void 0}var Kt=rb(It,zt,$t,Ht);return sb(It,Kt)?Kt:void 0}).filter(function(zt){return!!zt})}function ob(It){return It.reduce(function($t,zt){return zt.type==="group"?$t.push.apply($t,U_(zt.options.map(function(Ht){return Ht.data}))):$t.push(zt.data),$t},[])}function ox(It,$t){return ob(ib(It,$t))}function sb(It,$t){var zt=It.inputValue,Ht=zt===void 0?"":zt,Ut=$t.data,Kt=$t.isSelected,ln=$t.label,wn=$t.value;return(!hb(It)||!Kt)&&ub(It,{label:ln,value:wn,data:Ut},Ht)}function sx(It,$t){var zt=It.focusedValue,Ht=It.selectValue,Ut=Ht.indexOf(zt);if(Ut>-1){var Kt=$t.indexOf(zt);if(Kt>-1)return zt;if(Ut<$t.length)return $t[Ut]}return null}function ax(It,$t){var zt=It.focusedOption;return zt&&$t.indexOf(zt)>-1?zt:$t[0]}var ab=function(It,$t){return It.getOptionLabel($t)},ov=function(It,$t){return It.getOptionValue($t)};function lb(It,$t,zt){return typeof It.isOptionDisabled=="function"?It.isOptionDisabled($t,zt):!1}function cb(It,$t,zt){if(zt.indexOf($t)>-1)return!0;if(typeof It.isOptionSelected=="function")return It.isOptionSelected($t,zt);var Ht=ov(It,$t);return zt.some(function(Ut){return ov(It,Ut)===Ht})}function ub(It,$t,zt){return It.filterOption?It.filterOption($t,zt):!0}var hb=function(It){var $t=It.hideSelectedOptions,zt=It.isMulti;return $t===void 0?zt:$t},lx=1,db=function(It){gp(zt,It);var $t=yf(zt);function zt(Ht){var Ut;return mf(this,zt),Ut=$t.call(this,Ht),Ut.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},Ut.blockOptionHover=!1,Ut.isComposing=!1,Ut.commonProps=void 0,Ut.initialTouchX=0,Ut.initialTouchY=0,Ut.instancePrefix="",Ut.openAfterFocus=!1,Ut.scrollToFocusedOptionOnUpdate=!1,Ut.userIsDragging=void 0,Ut.controlRef=null,Ut.getControlRef=function(Kt){Ut.controlRef=Kt},Ut.focusedOptionRef=null,Ut.getFocusedOptionRef=function(Kt){Ut.focusedOptionRef=Kt},Ut.menuListRef=null,Ut.getMenuListRef=function(Kt){Ut.menuListRef=Kt},Ut.inputRef=null,Ut.getInputRef=function(Kt){Ut.inputRef=Kt},Ut.focus=Ut.focusInput,Ut.blur=Ut.blurInput,Ut.onChange=function(Kt,ln){var wn=Ut.props,Dn=wn.onChange,Fn=wn.name;ln.name=Fn,Ut.ariaOnChange(Kt,ln),Dn(Kt,ln)},Ut.setValue=function(Kt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",wn=arguments.length>2?arguments[2]:void 0,Dn=Ut.props,Fn=Dn.closeMenuOnSelect,Rn=Dn.isMulti;Ut.onInputChange("",{action:"set-value"}),Fn&&(Ut.setState({inputIsHiddenAfterUpdate:!Rn}),Ut.onMenuClose()),Ut.setState({clearFocusValueOnUpdate:!0}),Ut.onChange(Kt,{action:ln,option:wn})},Ut.selectOption=function(Kt){var ln=Ut.props,wn=ln.blurInputOnSelect,Dn=ln.isMulti,Fn=ln.name,Rn=Ut.state.selectValue,ur=Dn&&Ut.isOptionSelected(Kt,Rn),Ar=Ut.isOptionDisabled(Kt,Rn);if(ur){var Br=Ut.getOptionValue(Kt);Ut.setValue(Rn.filter(function(Jr){return Ut.getOptionValue(Jr)!==Br}),"deselect-option",Kt)}else if(!Ar)Dn?Ut.setValue([].concat(U_(Rn),[Kt]),"select-option",Kt):Ut.setValue(Kt,"select-option");else{Ut.ariaOnChange(Kt,{action:"select-option",name:Fn});return}wn&&Ut.blurInput()},Ut.removeValue=function(Kt){var ln=Ut.props.isMulti,wn=Ut.state.selectValue,Dn=Ut.getOptionValue(Kt),Fn=wn.filter(function(ur){return Ut.getOptionValue(ur)!==Dn}),Rn=ln?Fn:Fn[0]||null;Ut.onChange(Rn,{action:"remove-value",removedValue:Kt}),Ut.focusInput()},Ut.clearValue=function(){var Kt=Ut.state.selectValue;Ut.onChange(Ut.props.isMulti?[]:null,{action:"clear",removedValues:Kt})},Ut.popValue=function(){var Kt=Ut.props.isMulti,ln=Ut.state.selectValue,wn=ln[ln.length-1],Dn=ln.slice(0,ln.length-1),Fn=Kt?Dn:Dn[0]||null;Ut.onChange(Fn,{action:"pop-value",removedValue:wn})},Ut.getValue=function(){return Ut.state.selectValue},Ut.cx=function(){for(var Kt=arguments.length,ln=new Array(Kt),wn=0;wn<Kt;wn++)ln[wn]=arguments[wn];return Uy.apply(void 0,[Ut.props.classNamePrefix].concat(ln))},Ut.getOptionLabel=function(Kt){return ab(Ut.props,Kt)},Ut.getOptionValue=function(Kt){return ov(Ut.props,Kt)},Ut.getStyles=function(Kt,ln){var wn=J2[Kt](ln);wn.boxSizing="border-box";var Dn=Ut.props.styles[Kt];return Dn?Dn(wn,ln):wn},Ut.getElementId=function(Kt){return"".concat(Ut.instancePrefix,"-").concat(Kt)},Ut.getComponents=function(){return iv(Ut.props)},Ut.buildCategorizedOptions=function(){return ib(Ut.props,Ut.state.selectValue)},Ut.getCategorizedOptions=function(){return Ut.props.menuIsOpen?Ut.buildCategorizedOptions():[]},Ut.buildFocusableOptions=function(){return ob(Ut.buildCategorizedOptions())},Ut.getFocusableOptions=function(){return Ut.props.menuIsOpen?Ut.buildFocusableOptions():[]},Ut.ariaOnChange=function(Kt,ln){Ut.setState({ariaSelection:pl({value:Kt},ln)})},Ut.onMenuMouseDown=function(Kt){Kt.button===0&&(Kt.stopPropagation(),Kt.preventDefault(),Ut.focusInput())},Ut.onMenuMouseMove=function(Kt){Ut.blockOptionHover=!1},Ut.onControlMouseDown=function(Kt){var ln=Ut.props.openMenuOnClick;Ut.state.isFocused?Ut.props.menuIsOpen?Kt.target.tagName!=="INPUT"&&Kt.target.tagName!=="TEXTAREA"&&Ut.onMenuClose():ln&&Ut.openMenu("first"):(ln&&(Ut.openAfterFocus=!0),Ut.focusInput()),Kt.target.tagName!=="INPUT"&&Kt.target.tagName!=="TEXTAREA"&&Kt.preventDefault()},Ut.onDropdownIndicatorMouseDown=function(Kt){if(!(Kt&&Kt.type==="mousedown"&&Kt.button!==0)&&!Ut.props.isDisabled){var ln=Ut.props,wn=ln.isMulti,Dn=ln.menuIsOpen;Ut.focusInput(),Dn?(Ut.setState({inputIsHiddenAfterUpdate:!wn}),Ut.onMenuClose()):Ut.openMenu("first"),Kt.preventDefault(),Kt.stopPropagation()}},Ut.onClearIndicatorMouseDown=function(Kt){Kt&&Kt.type==="mousedown"&&Kt.button!==0||(Ut.clearValue(),Kt.stopPropagation(),Ut.openAfterFocus=!1,Kt.type==="touchend"?Ut.focusInput():setTimeout(function(){return Ut.focusInput()}))},Ut.onScroll=function(Kt){typeof Ut.props.closeMenuOnScroll=="boolean"?Kt.target instanceof HTMLElement&&r1(Kt.target)&&Ut.props.onMenuClose():typeof Ut.props.closeMenuOnScroll=="function"&&Ut.props.closeMenuOnScroll(Kt)&&Ut.props.onMenuClose()},Ut.onCompositionStart=function(){Ut.isComposing=!0},Ut.onCompositionEnd=function(){Ut.isComposing=!1},Ut.onTouchStart=function(Kt){var ln=Kt.touches,wn=ln&&ln.item(0);!wn||(Ut.initialTouchX=wn.clientX,Ut.initialTouchY=wn.clientY,Ut.userIsDragging=!1)},Ut.onTouchMove=function(Kt){var ln=Kt.touches,wn=ln&&ln.item(0);if(wn){var Dn=Math.abs(wn.clientX-Ut.initialTouchX),Fn=Math.abs(wn.clientY-Ut.initialTouchY),Rn=5;Ut.userIsDragging=Dn>Rn||Fn>Rn}},Ut.onTouchEnd=function(Kt){Ut.userIsDragging||(Ut.controlRef&&!Ut.controlRef.contains(Kt.target)&&Ut.menuListRef&&!Ut.menuListRef.contains(Kt.target)&&Ut.blurInput(),Ut.initialTouchX=0,Ut.initialTouchY=0)},Ut.onControlTouchEnd=function(Kt){Ut.userIsDragging||Ut.onControlMouseDown(Kt)},Ut.onClearIndicatorTouchEnd=function(Kt){Ut.userIsDragging||Ut.onClearIndicatorMouseDown(Kt)},Ut.onDropdownIndicatorTouchEnd=function(Kt){Ut.userIsDragging||Ut.onDropdownIndicatorMouseDown(Kt)},Ut.handleInputChange=function(Kt){var ln=Kt.currentTarget.value;Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange(ln,{action:"input-change"}),Ut.props.menuIsOpen||Ut.onMenuOpen()},Ut.onInputFocus=function(Kt){Ut.props.onFocus&&Ut.props.onFocus(Kt),Ut.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(Ut.openAfterFocus||Ut.props.openMenuOnFocus)&&Ut.openMenu("first"),Ut.openAfterFocus=!1},Ut.onInputBlur=function(Kt){if(Ut.menuListRef&&Ut.menuListRef.contains(document.activeElement)){Ut.inputRef.focus();return}Ut.props.onBlur&&Ut.props.onBlur(Kt),Ut.onInputChange("",{action:"input-blur"}),Ut.onMenuClose(),Ut.setState({focusedValue:null,isFocused:!1})},Ut.onOptionHover=function(Kt){Ut.blockOptionHover||Ut.state.focusedOption===Kt||Ut.setState({focusedOption:Kt})},Ut.shouldHideSelectedOptions=function(){return hb(Ut.props)},Ut.onKeyDown=function(Kt){var ln=Ut.props,wn=ln.isMulti,Dn=ln.backspaceRemovesValue,Fn=ln.escapeClearsValue,Rn=ln.inputValue,ur=ln.isClearable,Ar=ln.isDisabled,Br=ln.menuIsOpen,Jr=ln.onKeyDown,gi=ln.tabSelectsValue,fi=ln.openMenuOnFocus,Mi=Ut.state,Vi=Mi.focusedOption,zo=Mi.focusedValue,Lo=Mi.selectValue;if(!Ar&&!(typeof Jr=="function"&&(Jr(Kt),Kt.defaultPrevented))){switch(Ut.blockOptionHover=!0,Kt.key){case"ArrowLeft":if(!wn||Rn)return;Ut.focusValue("previous");break;case"ArrowRight":if(!wn||Rn)return;Ut.focusValue("next");break;case"Delete":case"Backspace":if(Rn)return;if(zo)Ut.removeValue(zo);else{if(!Dn)return;wn?Ut.popValue():ur&&Ut.clearValue()}break;case"Tab":if(Ut.isComposing||Kt.shiftKey||!Br||!gi||!Vi||fi&&Ut.isOptionSelected(Vi,Lo))return;Ut.selectOption(Vi);break;case"Enter":if(Kt.keyCode===229)break;if(Br){if(!Vi||Ut.isComposing)return;Ut.selectOption(Vi);break}return;case"Escape":Br?(Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange("",{action:"menu-close"}),Ut.onMenuClose()):ur&&Fn&&Ut.clearValue();break;case" ":if(Rn)return;if(!Br){Ut.openMenu("first");break}if(!Vi)return;Ut.selectOption(Vi);break;case"ArrowUp":Br?Ut.focusOption("up"):Ut.openMenu("last");break;case"ArrowDown":Br?Ut.focusOption("down"):Ut.openMenu("first");break;case"PageUp":if(!Br)return;Ut.focusOption("pageup");break;case"PageDown":if(!Br)return;Ut.focusOption("pagedown");break;case"Home":if(!Br)return;Ut.focusOption("first");break;case"End":if(!Br)return;Ut.focusOption("last");break;default:return}Kt.preventDefault()}},Ut.instancePrefix="react-select-"+(Ut.props.instanceId||++lx),Ut.state.selectValue=n1(Ht.value),Ut}return yg(zt,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(Ht){var Ut=this.props,Kt=Ut.isDisabled,ln=Ut.menuIsOpen,wn=this.state.isFocused;(wn&&!Kt&&Ht.isDisabled||wn&&ln&&!Ht.menuIsOpen)&&this.focusInput(),wn&&Kt&&!Ht.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(h_(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(Ht,Ut){this.props.onInputChange(Ht,Ut)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(Ht){var Ut=this,Kt=this.state,ln=Kt.selectValue,wn=Kt.isFocused,Dn=this.buildFocusableOptions(),Fn=Ht==="first"?0:Dn.length-1;if(!this.props.isMulti){var Rn=Dn.indexOf(ln[0]);Rn>-1&&(Fn=Rn)}this.scrollToFocusedOptionOnUpdate=!(wn&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:Dn[Fn]},function(){return Ut.onMenuOpen()})}},{key:"focusValue",value:function(Ht){var Ut=this.state,Kt=Ut.selectValue,ln=Ut.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var wn=Kt.indexOf(ln);ln||(wn=-1);var Dn=Kt.length-1,Fn=-1;if(Kt.length){switch(Ht){case"previous":wn===0?Fn=0:wn===-1?Fn=Dn:Fn=wn-1;break;case"next":wn>-1&&wn<Dn&&(Fn=wn+1);break}this.setState({inputIsHidden:Fn!==-1,focusedValue:Kt[Fn]})}}}},{key:"focusOption",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",Ut=this.props.pageSize,Kt=this.state.focusedOption,ln=this.getFocusableOptions();if(ln.length){var wn=0,Dn=ln.indexOf(Kt);Kt||(Dn=-1),Ht==="up"?wn=Dn>0?Dn-1:ln.length-1:Ht==="down"?wn=(Dn+1)%ln.length:Ht==="pageup"?(wn=Dn-Ut,wn<0&&(wn=0)):Ht==="pagedown"?(wn=Dn+Ut,wn>ln.length-1&&(wn=ln.length-1)):Ht==="last"&&(wn=ln.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:ln[wn],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(b_):pl(pl({},b_),this.props.theme):b_}},{key:"getCommonProps",value:function(){var Ht=this.clearValue,Ut=this.cx,Kt=this.getStyles,ln=this.getValue,wn=this.selectOption,Dn=this.setValue,Fn=this.props,Rn=Fn.isMulti,ur=Fn.isRtl,Ar=Fn.options,Br=this.hasValue();return{clearValue:Ht,cx:Ut,getStyles:Kt,getValue:ln,hasValue:Br,isMulti:Rn,isRtl:ur,options:Ar,selectOption:wn,selectProps:Fn,setValue:Dn,theme:this.getTheme()}}},{key:"hasValue",value:function(){var Ht=this.state.selectValue;return Ht.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var Ht=this.props,Ut=Ht.isClearable,Kt=Ht.isMulti;return Ut===void 0?Kt:Ut}},{key:"isOptionDisabled",value:function(Ht,Ut){return lb(this.props,Ht,Ut)}},{key:"isOptionSelected",value:function(Ht,Ut){return cb(this.props,Ht,Ut)}},{key:"filterOption",value:function(Ht,Ut){return ub(this.props,Ht,Ut)}},{key:"formatOptionLabel",value:function(Ht,Ut){if(typeof this.props.formatOptionLabel=="function"){var Kt=this.props.inputValue,ln=this.state.selectValue;return this.props.formatOptionLabel(Ht,{context:Ut,inputValue:Kt,selectValue:ln})}else return this.getOptionLabel(Ht)}},{key:"formatGroupLabel",value:function(Ht){return this.props.formatGroupLabel(Ht)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var Ht=this.props,Ut=Ht.isDisabled,Kt=Ht.isSearchable,ln=Ht.inputId,wn=Ht.inputValue,Dn=Ht.tabIndex,Fn=Ht.form,Rn=this.getComponents(),ur=Rn.Input,Ar=this.state.inputIsHidden,Br=this.commonProps,Jr=ln||this.getElementId("input"),gi={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return Kt?Fi.createElement(ur,ro({},Br,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Jr,innerRef:this.getInputRef,isDisabled:Ut,isHidden:Ar,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:Dn,form:Fn,type:"text",value:wn},gi)):Fi.createElement(H2,ro({id:Jr,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Id,onFocus:this.onInputFocus,readOnly:!0,disabled:Ut,tabIndex:Dn,form:Fn,value:""},gi))}},{key:"renderPlaceholderOrValue",value:function(){var Ht=this,Ut=this.getComponents(),Kt=Ut.MultiValue,ln=Ut.MultiValueContainer,wn=Ut.MultiValueLabel,Dn=Ut.MultiValueRemove,Fn=Ut.SingleValue,Rn=Ut.Placeholder,ur=this.commonProps,Ar=this.props,Br=Ar.controlShouldRenderValue,Jr=Ar.isDisabled,gi=Ar.isMulti,fi=Ar.inputValue,Mi=Ar.placeholder,Vi=this.state,zo=Vi.selectValue,Lo=Vi.focusedValue,Co=Vi.isFocused;if(!this.hasValue()||!Br)return fi?null:Fi.createElement(Rn,ro({},ur,{key:"placeholder",isDisabled:Jr,isFocused:Co}),Mi);if(gi){var Vo=zo.map(function(Ha,Xa){var pa=Ha===Lo;return Fi.createElement(Kt,ro({},ur,{components:{Container:ln,Label:wn,Remove:Dn},isFocused:pa,isDisabled:Jr,key:"".concat(Ht.getOptionValue(Ha)).concat(Xa),index:Xa,removeProps:{onClick:function(){return Ht.removeValue(Ha)},onTouchEnd:function(){return Ht.removeValue(Ha)},onMouseDown:function(ga){ga.preventDefault(),ga.stopPropagation()}},data:Ha}),Ht.formatOptionLabel(Ha,"value"))});return Vo}if(fi)return null;var Io=zo[0];return Fi.createElement(Fn,ro({},ur,{data:Io,isDisabled:Jr}),this.formatOptionLabel(Io,"value"))}},{key:"renderClearIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.ClearIndicator,Kt=this.commonProps,ln=this.props,wn=ln.isDisabled,Dn=ln.isLoading,Fn=this.state.isFocused;if(!this.isClearable()||!Ut||wn||!this.hasValue()||Dn)return null;var Rn={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Fi.createElement(Ut,ro({},Kt,{innerProps:Rn,isFocused:Fn}))}},{key:"renderLoadingIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.LoadingIndicator,Kt=this.commonProps,ln=this.props,wn=ln.isDisabled,Dn=ln.isLoading,Fn=this.state.isFocused;if(!Ut||!Dn)return null;var Rn={"aria-hidden":"true"};return Fi.createElement(Ut,ro({},Kt,{innerProps:Rn,isDisabled:wn,isFocused:Fn}))}},{key:"renderIndicatorSeparator",value:function(){var Ht=this.getComponents(),Ut=Ht.DropdownIndicator,Kt=Ht.IndicatorSeparator;if(!Ut||!Kt)return null;var ln=this.commonProps,wn=this.props.isDisabled,Dn=this.state.isFocused;return Fi.createElement(Kt,ro({},ln,{isDisabled:wn,isFocused:Dn}))}},{key:"renderDropdownIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.DropdownIndicator;if(!Ut)return null;var Kt=this.commonProps,ln=this.props.isDisabled,wn=this.state.isFocused,Dn={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Fi.createElement(Ut,ro({},Kt,{innerProps:Dn,isDisabled:ln,isFocused:wn}))}},{key:"renderMenu",value:function(){var Ht=this,Ut=this.getComponents(),Kt=Ut.Group,ln=Ut.GroupHeading,wn=Ut.Menu,Dn=Ut.MenuList,Fn=Ut.MenuPortal,Rn=Ut.LoadingMessage,ur=Ut.NoOptionsMessage,Ar=Ut.Option,Br=this.commonProps,Jr=this.state.focusedOption,gi=this.props,fi=gi.captureMenuScroll,Mi=gi.inputValue,Vi=gi.isLoading,zo=gi.loadingMessage,Lo=gi.minMenuHeight,Co=gi.maxMenuHeight,Vo=gi.menuIsOpen,Io=gi.menuPlacement,Ha=gi.menuPosition,Xa=gi.menuPortalTarget,pa=gi.menuShouldBlockScroll,ga=gi.menuShouldScrollIntoView,Eh=gi.noOptionsMessage,iu=gi.onMenuScrollToTop,xf=gi.onMenuScrollToBottom;if(!Vo)return null;var Sh=function(Oa,bi){var zi=Oa.type,Ui=Oa.data,Hi=Oa.isDisabled,Xi=Oa.isSelected,Go=Oa.label,Va=Oa.value,Wl=Jr===Ui,ma=Hi?void 0:function(){return Ht.onOptionHover(Ui)},Ag=Hi?void 0:function(){return Ht.selectOption(Ui)},Od="".concat(Ht.getElementId("option"),"-").concat(bi),xp={id:Od,onClick:Ag,onMouseMove:ma,onMouseOver:ma,tabIndex:-1};return Fi.createElement(Ar,ro({},Br,{innerProps:xp,data:Ui,isDisabled:Hi,isSelected:Xi,key:Od,label:Go,type:zi,value:Va,isFocused:Wl,innerRef:Wl?Ht.getFocusedOptionRef:void 0}),Ht.formatOptionLabel(Oa.data,"menu"))},Kh;if(this.hasOptions())Kh=this.getCategorizedOptions().map(function(Oa){if(Oa.type==="group"){var bi=Oa.data,zi=Oa.options,Ui=Oa.index,Hi="".concat(Ht.getElementId("group"),"-").concat(Ui),Xi="".concat(Hi,"-heading");return Fi.createElement(Kt,ro({},Br,{key:Hi,data:bi,options:zi,Heading:ln,headingProps:{id:Xi,data:Oa.data},label:Ht.formatGroupLabel(Oa.data)}),Oa.options.map(function(Go){return Sh(Go,"".concat(Ui,"-").concat(Go.index))}))}else if(Oa.type==="option")return Sh(Oa,"".concat(Oa.index))});else if(Vi){var vc=zo({inputValue:Mi});if(vc===null)return null;Kh=Fi.createElement(Rn,Br,vc)}else{var pv=Eh({inputValue:Mi});if(pv===null)return null;Kh=Fi.createElement(ur,Br,pv)}var kg={minMenuHeight:Lo,maxMenuHeight:Co,menuPlacement:Io,menuPosition:Ha,menuShouldScrollIntoView:ga},Ch=Fi.createElement(ev,ro({},Br,kg),function(Oa){var bi=Oa.ref,zi=Oa.placerProps,Ui=zi.placement,Hi=zi.maxHeight;return Fi.createElement(wn,ro({},Br,kg,{innerRef:bi,innerProps:{onMouseDown:Ht.onMenuMouseDown,onMouseMove:Ht.onMenuMouseMove},isLoading:Vi,placement:Ui}),Fi.createElement(q2,{captureEnabled:fi,onTopArrive:iu,onBottomArrive:xf,lockEnabled:pa},function(Xi){return Fi.createElement(Dn,ro({},Br,{innerRef:function(Go){Ht.getMenuListRef(Go),Xi(Go)},isLoading:Vi,maxHeight:Hi,focusedOption:Jr}),Kh)}))});return Xa||Ha==="fixed"?Fi.createElement(Fn,ro({},Br,{appendTo:Xa,controlElement:this.controlRef,menuPlacement:Io,menuPosition:Ha}),Ch):Ch}},{key:"renderFormField",value:function(){var Ht=this,Ut=this.props,Kt=Ut.delimiter,ln=Ut.isDisabled,wn=Ut.isMulti,Dn=Ut.name,Fn=this.state.selectValue;if(!(!Dn||ln))if(wn)if(Kt){var Rn=Fn.map(function(Br){return Ht.getOptionValue(Br)}).join(Kt);return Fi.createElement("input",{name:Dn,type:"hidden",value:Rn})}else{var ur=Fn.length>0?Fn.map(function(Br,Jr){return Fi.createElement("input",{key:"i-".concat(Jr),name:Dn,type:"hidden",value:Ht.getOptionValue(Br)})}):Fi.createElement("input",{name:Dn,type:"hidden"});return Fi.createElement("div",null,ur)}else{var Ar=Fn[0]?this.getOptionValue(Fn[0]):"";return Fi.createElement("input",{name:Dn,type:"hidden",value:Ar})}}},{key:"renderLiveRegion",value:function(){var Ht=this.commonProps,Ut=this.state,Kt=Ut.ariaSelection,ln=Ut.focusedOption,wn=Ut.focusedValue,Dn=Ut.isFocused,Fn=Ut.selectValue,Rn=this.getFocusableOptions();return Fi.createElement(R2,ro({},Ht,{ariaSelection:Kt,focusedOption:ln,focusedValue:wn,isFocused:Dn,selectValue:Fn,focusableOptions:Rn}))}},{key:"render",value:function(){var Ht=this.getComponents(),Ut=Ht.Control,Kt=Ht.IndicatorsContainer,ln=Ht.SelectContainer,wn=Ht.ValueContainer,Dn=this.props,Fn=Dn.className,Rn=Dn.id,ur=Dn.isDisabled,Ar=Dn.menuIsOpen,Br=this.state.isFocused,Jr=this.commonProps=this.getCommonProps();return Fi.createElement(ln,ro({},Jr,{className:Fn,innerProps:{id:Rn,onKeyDown:this.onKeyDown},isDisabled:ur,isFocused:Br}),this.renderLiveRegion(),Fi.createElement(Ut,ro({},Jr,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:ur,isFocused:Br,menuIsOpen:Ar}),Fi.createElement(wn,ro({},Jr,{isDisabled:ur}),this.renderPlaceholderOrValue(),this.renderInput()),Fi.createElement(Kt,ro({},Jr,{isDisabled:ur}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(Ht,Ut){var Kt=Ut.prevProps,ln=Ut.clearFocusValueOnUpdate,wn=Ut.inputIsHiddenAfterUpdate,Dn=Ht.options,Fn=Ht.value,Rn=Ht.menuIsOpen,ur=Ht.inputValue,Ar={};if(Kt&&(Fn!==Kt.value||Dn!==Kt.options||Rn!==Kt.menuIsOpen||ur!==Kt.inputValue)){var Br=n1(Fn),Jr=Rn?ox(Ht,Br):[],gi=ln?sx(Ut,Br):null,fi=ax(Ut,Jr);Ar={selectValue:Br,focusedOption:fi,focusedValue:gi,clearFocusValueOnUpdate:!1}}var Mi=wn!=null&&Ht!==Kt?{inputIsHidden:wn,inputIsHiddenAfterUpdate:void 0}:{};return pl(pl(pl({},Ar),Mi),{},{prevProps:Ht})}}]),zt}(vn);db.defaultProps=ix;var cx={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},ux=function(It){var $t,zt;return zt=$t=function(Ht){gp(Kt,Ht);var Ut=yf(Kt);function Kt(){var ln;mf(this,Kt);for(var wn=arguments.length,Dn=new Array(wn),Fn=0;Fn<wn;Fn++)Dn[Fn]=arguments[Fn];return ln=Ut.call.apply(Ut,[this].concat(Dn)),ln.select=void 0,ln.state={inputValue:ln.props.inputValue!==void 0?ln.props.inputValue:ln.props.defaultInputValue,menuIsOpen:ln.props.menuIsOpen!==void 0?ln.props.menuIsOpen:ln.props.defaultMenuIsOpen,value:ln.props.value!==void 0?ln.props.value:ln.props.defaultValue},ln.onChange=function(Rn,ur){ln.callProp("onChange",Rn,ur),ln.setState({value:Rn})},ln.onInputChange=function(Rn,ur){var Ar=ln.callProp("onInputChange",Rn,ur);ln.setState({inputValue:Ar!==void 0?Ar:Rn})},ln.onMenuOpen=function(){ln.callProp("onMenuOpen"),ln.setState({menuIsOpen:!0})},ln.onMenuClose=function(){ln.callProp("onMenuClose"),ln.setState({menuIsOpen:!1})},ln}return yg(Kt,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(ln){return this.props[ln]!==void 0?this.props[ln]:this.state[ln]}},{key:"callProp",value:function(ln){if(typeof this.props[ln]=="function"){for(var wn,Dn=arguments.length,Fn=new Array(Dn>1?Dn-1:0),Rn=1;Rn<Dn;Rn++)Fn[Rn-1]=arguments[Rn];return(wn=this.props)[ln].apply(wn,Fn)}}},{key:"render",value:function(){var ln=this,wn=this.props;wn.defaultInputValue,wn.defaultMenuIsOpen,wn.defaultValue;var Dn=Ku(wn,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return Fi.createElement(It,ro({},Dn,{ref:function(Fn){ln.select=Fn},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),Kt}(vn),$t.defaultProps=cx,zt},hx=ux(db),dx=hx;const x_=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"},{value:"supplementing",label:"Transcription"}];var fb=It=>{const $t=It.content?x_.find(zt=>zt.value===It.content):null;return pn("div",{className:"r6o-purposedropdown"},pn(dx,{value:$t,onChange:It.onChange,options:x_,isDisabled:!It.editable}))};const fx=It=>pn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:It.width},pn("metadata",null,"IcoFont Icons"),pn("title",null,"simple-down"),pn("glyph",{glyphName:"simple-down",unicode:"\uEAB2",horizAdvX:"1000"}),pn("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"})),px=It=>pn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:It.width},pn("metadata",null,"IcoFont Icons"),pn("title",null,"close"),pn("glyph",{glyphName:"close",unicode:"\uEEE4",horizAdvX:"1000"}),pn("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"})),gx=It=>pn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:It.width},pn("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}));var mx=It=>{const[$t,zt]=ki(!1),[Ht,Ut]=ki(!1),Kt=ur=>{zt(!0),Ut(!1)},ln=ur=>{It.onDelete(It.body),Ut(!1)},wn=ur=>It.onUpdate(It.body,Rt(Ot({},It.body),{value:ur.target.value})),Dn=ur=>It.onUpdate(It.body,Rt(Ot({},It.body),{purpose:ur.value})),Fn=It.body.modified||It.body.created,Rn=It.body.creator&&pn("div",{className:"r6o-lastmodified"},pn("span",{className:"r6o-lastmodified-by"},It.body.creator.name||It.body.creator.id),It.body.created&&pn("span",{className:"r6o-lastmodified-at"},pn(Ap,{datetime:It.env.toClientTime(Fn),locale:Ra.locale()})));return It.readOnly?pn("div",{className:"r6o-widget comment"},pn("div",{className:"r6o-readonly-comment"},It.body.value),Rn):pn("div",{className:$t?"r6o-widget comment editable":"r6o-widget comment"},pn(rp,{editable:$t,content:It.body.value,onChange:wn,onSaveAndClose:It.onSaveAndClose}),!$t&&Rn,It.purposeSelector&&pn(fb,{editable:$t,content:It.body.purpose,onChange:Dn,onSaveAndClose:It.onSaveAndClose}),pn("div",{className:Ht?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:()=>Ut(!Ht)},pn(fx,{width:12})),Ht&&pn(lg,{onEdit:Kt,onDelete:ln,onClickOutside:()=>Ut(!1)}))};const yx=x_.map(It=>It.value),pb=(It,$t)=>{const zt=$t?yx.indexOf(It.purpose)>-1:It.purpose=="commenting"||It.purpose=="replying";return It.type==="TextualBody"&&(!It.hasOwnProperty("purpose")||zt)},gb=(It,$t)=>{var zt,Ht;if($t.editable===!0)return!1;if($t.editable===!1)return!0;if($t.editable==="MINE_ONLY"){const Ut=(zt=It.creator)==null?void 0:zt.id;return((Ht=$t.env.user)==null?void 0:Ht.id)!==Ut}return $t.readOnly},vx=(It,$t)=>It||{type:"TextualBody",value:"",purpose:$t?"replying":"commenting",draft:!0},mb=It=>{const $t=It.annotation?It.annotation.bodies.filter(ln=>pb(ln,It.purposeSelector)):[],zt=vx($t.find(ln=>ln.draft==!0),$t.length>1),Ht=$t.filter(ln=>ln!=zt),Ut=ln=>{const wn=zt.value,Dn=ln.target.value;wn.length===0&&Dn.length>0?It.onAppendBody(Rt(Ot({},zt),{value:Dn})):wn.length>0&&Dn.length===0?It.onRemoveBody(zt):It.onUpdateBody(zt,Rt(Ot({},zt),{value:Dn}))},Kt=ln=>It.onUpdateBody(zt,Rt(Ot({},zt),{purpose:ln.value}));return pn(mr,null,Ht.map((ln,wn)=>pn(mx,{key:wn,env:It.env,purposeSelector:It.purposeSelector,readOnly:gb(ln,It),body:ln,onUpdate:It.onUpdateBody,onDelete:It.onRemoveBody,onSaveAndClose:It.onSaveAndClose})),!It.readOnly&&It.annotation&&pn("div",{className:"r6o-widget comment editable"},pn(rp,{focus:It.focus,content:zt.value,editable:!0,placeholder:Ht.length>0?Ra.t("Add a reply..."):Ra.t("Add a comment..."),onChange:Ut,onSaveAndClose:()=>It.onSaveAndClose()}),It.purposeSelector&&zt.value.length>0&&pn(fb,{editable:!0,content:zt.purpose,onChange:Kt,onSaveAndClose:()=>It.onSaveAndClose()})))};mb.disableDelete=(It,$t)=>It.bodies.filter(zt=>pb(zt,$t.purposeSelector)).some(zt=>gb(zt,$t));var yb=mb;function vb(It,$t){It.prototype=Object.create($t.prototype),It.prototype.constructor=It,vg(It,$t)}function _x(It,$t){return It.classList?!!$t&&It.classList.contains($t):(" "+(It.className.baseVal||It.className)+" ").indexOf(" "+$t+" ")!==-1}function bx(It,$t){It.classList?It.classList.add($t):_x(It,$t)||(typeof It.className=="string"?It.className=It.className+" "+$t:It.setAttribute("class",(It.className&&It.className.baseVal||"")+" "+$t))}function _b(It,$t){return It.replace(new RegExp("(^|\\s)"+$t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function xx(It,$t){It.classList?It.classList.remove($t):typeof It.className=="string"?It.className=_b(It.className,$t):It.setAttribute("class",_b(It.className&&It.className.baseVal||"",$t))}var bb={disabled:!1},xb=Fi.createContext(null),c1="unmounted",Eg="exited",Sg="entering",Om="entered",w_="exiting",bf=function(It){vb($t,It);function $t(Ht,Ut){var Kt;Kt=It.call(this,Ht,Ut)||this;var ln=Ut,wn=ln&&!ln.isMounting?Ht.enter:Ht.appear,Dn;return Kt.appearStatus=null,Ht.in?wn?(Dn=Eg,Kt.appearStatus=Sg):Dn=Om:Ht.unmountOnExit||Ht.mountOnEnter?Dn=c1:Dn=Eg,Kt.state={status:Dn},Kt.nextCallback=null,Kt}$t.getDerivedStateFromProps=function(Ht,Ut){var Kt=Ht.in;return Kt&&Ut.status===c1?{status:Eg}:null};var zt=$t.prototype;return zt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},zt.componentDidUpdate=function(Ht){var Ut=null;if(Ht!==this.props){var Kt=this.state.status;this.props.in?Kt!==Sg&&Kt!==Om&&(Ut=Sg):(Kt===Sg||Kt===Om)&&(Ut=w_)}this.updateStatus(!1,Ut)},zt.componentWillUnmount=function(){this.cancelNextCallback()},zt.getTimeouts=function(){var Ht=this.props.timeout,Ut,Kt,ln;return Ut=Kt=ln=Ht,Ht!=null&&typeof Ht!="number"&&(Ut=Ht.exit,Kt=Ht.enter,ln=Ht.appear!==void 0?Ht.appear:Kt),{exit:Ut,enter:Kt,appear:ln}},zt.updateStatus=function(Ht,Ut){Ht===void 0&&(Ht=!1),Ut!==null?(this.cancelNextCallback(),Ut===Sg?this.performEnter(Ht):this.performExit()):this.props.unmountOnExit&&this.state.status===Eg&&this.setState({status:c1})},zt.performEnter=function(Ht){var Ut=this,Kt=this.props.enter,ln=this.context?this.context.isMounting:Ht,wn=this.props.nodeRef?[ln]:[Fi.findDOMNode(this),ln],Dn=wn[0],Fn=wn[1],Rn=this.getTimeouts(),ur=ln?Rn.appear:Rn.enter;if(!Ht&&!Kt||bb.disabled){this.safeSetState({status:Om},function(){Ut.props.onEntered(Dn)});return}this.props.onEnter(Dn,Fn),this.safeSetState({status:Sg},function(){Ut.props.onEntering(Dn,Fn),Ut.onTransitionEnd(ur,function(){Ut.safeSetState({status:Om},function(){Ut.props.onEntered(Dn,Fn)})})})},zt.performExit=function(){var Ht=this,Ut=this.props.exit,Kt=this.getTimeouts(),ln=this.props.nodeRef?void 0:Fi.findDOMNode(this);if(!Ut||bb.disabled){this.safeSetState({status:Eg},function(){Ht.props.onExited(ln)});return}this.props.onExit(ln),this.safeSetState({status:w_},function(){Ht.props.onExiting(ln),Ht.onTransitionEnd(Kt.exit,function(){Ht.safeSetState({status:Eg},function(){Ht.props.onExited(ln)})})})},zt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},zt.safeSetState=function(Ht,Ut){Ut=this.setNextCallback(Ut),this.setState(Ht,Ut)},zt.setNextCallback=function(Ht){var Ut=this,Kt=!0;return this.nextCallback=function(ln){Kt&&(Kt=!1,Ut.nextCallback=null,Ht(ln))},this.nextCallback.cancel=function(){Kt=!1},this.nextCallback},zt.onTransitionEnd=function(Ht,Ut){this.setNextCallback(Ut);var Kt=this.props.nodeRef?this.props.nodeRef.current:Fi.findDOMNode(this),ln=Ht==null&&!this.props.addEndListener;if(!Kt||ln){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var wn=this.props.nodeRef?[this.nextCallback]:[Kt,this.nextCallback],Dn=wn[0],Fn=wn[1];this.props.addEndListener(Dn,Fn)}Ht!=null&&setTimeout(this.nextCallback,Ht)},zt.render=function(){var Ht=this.state.status;if(Ht===c1)return null;var Ut=this.props,Kt=Ut.children;Ut.in,Ut.mountOnEnter,Ut.unmountOnExit,Ut.appear,Ut.enter,Ut.exit,Ut.timeout,Ut.addEndListener,Ut.onEnter,Ut.onEntering,Ut.onEntered,Ut.onExit,Ut.onExiting,Ut.onExited,Ut.nodeRef;var ln=bm(Ut,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Fi.createElement(xb.Provider,{value:null},typeof Kt=="function"?Kt(Ht,ln):Fi.cloneElement(Fi.Children.only(Kt),ln))},$t}(Fi.Component);bf.contextType=xb,bf.propTypes={};function Mm(){}bf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mm,onEntering:Mm,onEntered:Mm,onExit:Mm,onExiting:Mm,onExited:Mm},bf.UNMOUNTED=c1,bf.EXITED=Eg,bf.ENTERING=Sg,bf.ENTERED=Om,bf.EXITING=w_;var wx=bf,Ex=function(It,$t){return It&&$t&&$t.split(" ").forEach(function(zt){return bx(It,zt)})},E_=function(It,$t){return It&&$t&&$t.split(" ").forEach(function(zt){return xx(It,zt)})},S_=function(It){vb($t,It);function $t(){for(var Ht,Ut=arguments.length,Kt=new Array(Ut),ln=0;ln<Ut;ln++)Kt[ln]=arguments[ln];return Ht=It.call.apply(It,[this].concat(Kt))||this,Ht.appliedClasses={appear:{},enter:{},exit:{}},Ht.onEnter=function(wn,Dn){var Fn=Ht.resolveArguments(wn,Dn),Rn=Fn[0],ur=Fn[1];Ht.removeClasses(Rn,"exit"),Ht.addClass(Rn,ur?"appear":"enter","base"),Ht.props.onEnter&&Ht.props.onEnter(wn,Dn)},Ht.onEntering=function(wn,Dn){var Fn=Ht.resolveArguments(wn,Dn),Rn=Fn[0],ur=Fn[1],Ar=ur?"appear":"enter";Ht.addClass(Rn,Ar,"active"),Ht.props.onEntering&&Ht.props.onEntering(wn,Dn)},Ht.onEntered=function(wn,Dn){var Fn=Ht.resolveArguments(wn,Dn),Rn=Fn[0],ur=Fn[1],Ar=ur?"appear":"enter";Ht.removeClasses(Rn,Ar),Ht.addClass(Rn,Ar,"done"),Ht.props.onEntered&&Ht.props.onEntered(wn,Dn)},Ht.onExit=function(wn){var Dn=Ht.resolveArguments(wn),Fn=Dn[0];Ht.removeClasses(Fn,"appear"),Ht.removeClasses(Fn,"enter"),Ht.addClass(Fn,"exit","base"),Ht.props.onExit&&Ht.props.onExit(wn)},Ht.onExiting=function(wn){var Dn=Ht.resolveArguments(wn),Fn=Dn[0];Ht.addClass(Fn,"exit","active"),Ht.props.onExiting&&Ht.props.onExiting(wn)},Ht.onExited=function(wn){var Dn=Ht.resolveArguments(wn),Fn=Dn[0];Ht.removeClasses(Fn,"exit"),Ht.addClass(Fn,"exit","done"),Ht.props.onExited&&Ht.props.onExited(wn)},Ht.resolveArguments=function(wn,Dn){return Ht.props.nodeRef?[Ht.props.nodeRef.current,wn]:[wn,Dn]},Ht.getClassNames=function(wn){var Dn=Ht.props.classNames,Fn=typeof Dn=="string",Rn=Fn&&Dn?Dn+"-":"",ur=Fn?""+Rn+wn:Dn[wn],Ar=Fn?ur+"-active":Dn[wn+"Active"],Br=Fn?ur+"-done":Dn[wn+"Done"];return{baseClassName:ur,activeClassName:Ar,doneClassName:Br}},Ht}var zt=$t.prototype;return zt.addClass=function(Ht,Ut,Kt){var ln=this.getClassNames(Ut)[Kt+"ClassName"],wn=this.getClassNames("enter"),Dn=wn.doneClassName;Ut==="appear"&&Kt==="done"&&Dn&&(ln+=" "+Dn),Kt==="active"&&Ht&&Ht.scrollTop,ln&&(this.appliedClasses[Ut][Kt]=ln,Ex(Ht,ln))},zt.removeClasses=function(Ht,Ut){var Kt=this.appliedClasses[Ut],ln=Kt.base,wn=Kt.active,Dn=Kt.done;this.appliedClasses[Ut]={},ln&&E_(Ht,ln),wn&&E_(Ht,wn),Dn&&E_(Ht,Dn)},zt.render=function(){var Ht=this.props;Ht.classNames;var Ut=bm(Ht,["classNames"]);return Fi.createElement(wx,ro({},Ut,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},$t}(Fi.Component);S_.defaultProps={classNames:""},S_.propTypes={};var Sx=S_;const Cx=(It,$t)=>$t.filter(zt=>(zt.label?zt.label:zt).toLowerCase().startsWith(It.toLowerCase())),Tx=(It,$t)=>$t(It);var kx=It=>{const $t=An(),[zt,Ht]=ki(It.initialValue||""),[Ut,Kt]=ki([]),[ln,wn]=ki(null);Ci(()=>{It.focus&&$t.current.querySelector("input").focus({preventScroll:!0})},[]),Ci(()=>{It.onChange&&It.onChange(zt)},[zt]);const Dn=Rn=>{if(typeof It.vocabulary=="function"){const ur=Tx(Rn,It.vocabulary);ur.then?ur.then(Kt):Kt(ur)}else{const ur=Cx(Rn,It.vocabulary);Kt(ur)}},Fn=()=>{if(ln!==null)It.onSubmit(Ut[ln]);else{const Rn=zt.trim();if(Rn){const ur=Array.isArray(It.vocabulary)?It.vocabulary.find(Ar=>(Ar.label||Ar).toLowerCase()===Rn.toLowerCase()):null;ur?It.onSubmit(ur):It.onSubmit(Rn)}}Ht(""),Kt([]),wn(null)};return pn("div",{ref:$t,className:"r6o-autocomplete"},pn("div",null,pn("input",{onKeyDown:Rn=>{if(Rn.which===13)Fn();else if(Rn.which===27)It.onCancel&&It.onCancel();else if(Ut.length>0){if(Rn.which===38)if(ln===null)wn(0);else{const ur=Math.max(0,ln-1);wn(ur)}else if(Rn.which===40)if(ln===null)wn(0);else{const ur=Math.min(Ut.length-1,ln+1);wn(ur)}}else Rn.which===40&&Array.isArray(It.vocabulary)&&Kt(It.vocabulary)},onChange:Rn=>{const{value:ur}=Rn.target;Ht(ur),wn(null),ur?Dn(ur):Kt([])},value:zt,placeholder:It.placeholder})),pn("ul",null,Ut.length>0&&Ut.map((Rn,ur)=>pn("li",{key:`${Rn.label?Rn.label:Rn}${ur}`,onClick:Fn,onMouseEnter:()=>wn(ur),style:ln===ur?{backgroundColor:"#bde4ff"}:{}},Rn.label?Rn.label:Rn))))};const Ax=It=>It||{type:"TextualBody",value:"",purpose:"tagging",draft:!0};var wb=It=>{const $t=It.annotation?It.annotation.bodies.filter(Rn=>Rn.type==="TextualBody"&&Rn.purpose==="tagging"):[],zt=Ax($t.slice().reverse().find(Rn=>Rn.draft)),Ht=$t.filter(Rn=>Rn!=zt),[Ut,Kt]=ki(!1),ln=Rn=>ur=>{Kt(Ut===Rn?!1:Rn)},wn=Rn=>{const ur=zt.value.trim(),Ar=Rn.trim();ur.length===0&&Ar.length>0?It.onAppendBody(Rt(Ot({},zt),{value:Ar})):ur.length>0&&Ar.length===0?It.onRemoveBody(zt):It.onUpdateBody(zt,Rt(Ot({},zt),{value:Ar}))},Dn=Rn=>ur=>{ur.stopPropagation(),It.onRemoveBody(Rn)},Fn=Rn=>{const ur=Rn.label?Rt(Ot({},zt),{value:Rn.label,source:Rn.uri}):Rt(Ot({},zt),{value:Rn}),Ar=Dt(ur,["draft"]);zt.value.trim().length===0?It.onAppendBody(Ar):It.onUpdateBody(zt,Ar)};return pn("div",{className:"r6o-widget r6o-tag"},Ht.length>0&&pn("ul",{className:"r6o-taglist"},Ht.map(Rn=>pn("li",{key:Rn.value,onClick:ln(Rn.value)},pn("span",{className:"r6o-label"},Rn.value),!It.readOnly&&pn(Sx,{in:Ut===Rn.value,timeout:200,classNames:"r6o-delete"},pn("span",{className:"r6o-delete-wrapper",onClick:Dn(Rn)},pn("span",{className:"r6o-delete"},pn(px,{width:12}))))))),!It.readOnly&&pn(kx,{focus:It.focus,placeholder:Ra.t("Add tag..."),vocabulary:It.vocabulary||[],onChange:wn,onSubmit:Fn}))};class Eb extends vn{constructor($t){super($t),this.element=Fi.createRef()}renderWidget($t){const zt=this.props.widget(Rt(Ot({annotation:$t.annotation,readOnly:$t.readOnly},$t.config),{onAppendBody:(Ht,Ut)=>$t.onAppendBody(Ht,Ut),onUpdateBody:(Ht,Ut,Kt)=>$t.onUpdateBody(Ht,Ut,Kt),onUpsertBody:(Ht,Ut,Kt)=>$t.onUpsertBody(Ht,Ut,Kt),onRemoveBody:(Ht,Ut)=>$t.onRemoveBody(Ht,Ut),onBatchModify:(Ht,Ut)=>$t.onBatchModify(Ht,Ut),onSetProperty:(Ht,Ut)=>$t.onSetProperty(Ht,Ut),onSaveAndClose:()=>$t.onSaveAndClose()}));for(;this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild(zt)}componentDidMount(){this.renderWidget(this.props)}componentWillReceiveProps($t){this.element.current&&this.props.annotation!==$t.annotation&&this.renderWidget($t)}render(){return pn("div",{ref:this.element,className:"widget"})}}window.React=Fi,window.ReactDOM=Fi;const Lx={COMMENT:yb,TAG:wb},Ix=[pn(yb,null),pn(wb,null)],Px=It=>{const $t=Ht=>{var Ut;return typeof Ht=="function"&&!!((Ut=Ht.prototype)!=null&&Ut.isReactComponent)},zt=Ht=>typeof Ht=="function"&&(String(Ht).match(/return .+\(['|"].+['|"],\s*\{/g)||String(Ht).match(/return .+preact_compat/)||String(Ht).match(/return .+\.createElement/g));return $t(It)||zt(It)},Ox=It=>{const $t=(zt,Ht,Ut)=>{if(typeof zt=="string"||zt instanceof String)return Fi.createElement(Lx[zt],Ht);if((Ut==null?void 0:Ut.toLowerCase())==="react")return Fi.createElement(zt,Ht);if((Ut==null?void 0:Ut.toLowerCase())==="plainjs")return pn(Eb,{widget:zt,config:Ht});if(Px(zt))return Fi.createElement(zt,Ht);if(typeof zt=="function"||zt instanceof Function)return pn(Eb,{widget:zt,config:Ht});throw`${zt} is not a valid plugin`};if(It.widget){const zt=It,{widget:Ht,force:Ut}=zt,Kt=Dt(zt,["widget","force"]);return $t(Ht,Kt,Ut)}else return $t(It)},Sb=14;var Cb=(It,$t,zt,Ht)=>{const Ut=It.getBoundingClientRect();$t.className="r6o-editor r6o-arrow-top r6o-arrow-left";const{left:Kt,top:ln,right:wn,bottom:Dn}=zt.getBoundingClientRect();if($t.style.top=`${Dn-Ut.top+Sb}px`,$t.style.left=`${Kt-Ut.left}px`,Ht){const Fn=$t.children[1].getBoundingClientRect();if(Fn.right>window.innerWidth&&($t.classList.remove("r6o-arrow-left"),$t.classList.add("r6o-arrow-right"),$t.style.left=`${wn-Fn.width-Ut.left}px`),Fn.bottom>window.innerHeight){$t.classList.remove("r6o-arrow-top"),$t.classList.add("r6o-arrow-bottom");const ur=$t.children[1].getBoundingClientRect().height;$t.style.top=`${ln-Ut.top-ur-Sb}px`}const Rn=$t.children[1].getBoundingClientRect();if(Rn.top<0){$t.classList.add("pushed","down"),$t.style.top=`${-Ut.top}px`;const ur=Dn-Ut.top;Rn.height-Ut.top>ur&&$t.classList.remove("r6o-arrow-bottom")}Rn.left<0&&($t.classList.add("pushed","right"),$t.style.left=`${-Ut.left}px`),requestAnimationFrame(()=>$t.style.opacity=1)}};const Tb=It=>{const{top:$t,left:zt,width:Ht,height:Ut}=It.getBoundingClientRect();return`${$t}, ${zt}, ${Ht}, ${Ut}`};class Mx extends vn{constructor($t){super($t),Bt(this,"initResizeObserver",()=>{const zt=this.props.autoPosition===void 0?!0:this.props.autoPosition;if(window!=null&&window.ResizeObserver){const Ht=new ResizeObserver(()=>{this.state.dragged||Cb(this.props.wrapperEl,this.element.current,this.props.selectedElement,zt)});return Ht.observe(this.props.wrapperEl),()=>Ht.disconnect()}else this.state.dragged||Cb(this.props.wrapperEl,this.element.current,this.props.selectedElement,zt)}),Bt(this,"creationMeta",zt=>{const Ht={},{user:Ut}=this.props.env;return Ut&&(Ht.creator={},Ut.id&&(Ht.creator.id=Ut.id),Ut.displayName&&(Ht.creator.name=Ut.displayName),Ht[zt.created?"modified":"created"]=this.props.env.getCurrentTimeAdjusted()),Ht}),Bt(this,"getCurrentAnnotation",()=>this.state.currentAnnotation.clone()),Bt(this,"updateCurrentAnnotation",(zt,Ht)=>this.setState({currentAnnotation:this.state.currentAnnotation.clone(zt)},()=>{Ht&&this.onOk()})),Bt(this,"onAppendBody",(zt,Ht)=>this.updateCurrentAnnotation({body:[...this.state.currentAnnotation.bodies,Ot(Ot({},zt),this.creationMeta(zt))]},Ht)),Bt(this,"onUpdateBody",(zt,Ht,Ut)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.map(Kt=>Kt===zt?Ot(Ot({},Ht),this.creationMeta(Ht)):Kt)},Ut)),Bt(this,"onRemoveBody",(zt,Ht)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.filter(Ut=>Ut!==zt)},Ht)),Bt(this,"onUpsertBody",(zt,Ht,Ut)=>{if(zt==null&&Ht!=null)this.onAppendBody(Ht,Ut);else if(zt!=null&&Ht!=null)this.onUpdateBody(zt,Ht,Ut);else if(zt!=null&&Ht==null){const Kt=this.state.currentAnnotation.bodies.find(ln=>ln.purpose===zt.purpose);Kt?this.onUpdateBody(Kt,zt,Ut):this.onAppendBody(zt,Ut)}}),Bt(this,"onBatchModify",(zt,Ht)=>{const Ut=zt.filter(Fn=>Fn.action==="upsert"&&Fn.body).map(Fn=>({previous:this.state.currentAnnotation.bodies.find(Rn=>Rn.purpose===Fn.body.purpose),updated:Ot(Ot({},Fn.body),this.creationMeta(Fn.body))})),Kt=zt.filter(Fn=>Fn.action==="remove").map(Fn=>Fn.body),ln=[...zt.filter(Fn=>Fn.action==="append"||Fn.action==="upsert"&&Fn.updated&&!Fn.previous).map(Fn=>Ot(Ot({},Fn.body),this.creationMeta(Fn.body))),...Ut.filter(Fn=>!Fn.previous).map(Fn=>Fn.updated)],wn=[...zt.filter(Fn=>Fn.action==="update"||Fn.action==="upsert"&&Fn.updated&&Fn.previous).map(Fn=>({previous:Fn.previous,updated:Ot(Ot({},Fn.updated),this.creationMeta(Fn.updated))})),...Ut.filter(Fn=>Fn.previous)],Dn=[...this.state.currentAnnotation.bodies.filter(Fn=>!Kt.includes(Fn)).map(Fn=>{const Rn=wn.find(ur=>ur.previous===Fn);return Rn?Rn.updated:Fn}),...ln];this.updateCurrentAnnotation({body:Dn},Ht)}),Bt(this,"onSetProperty",(zt,Ht)=>{if(["@context","id","type","body","target"].includes(zt))throw new Exception(`Cannot set ${zt} - not allowed`);if(Ht)this.updateCurrentAnnotation({[zt]:Ht});else{const Ut=this.currentAnnotation.clone();delete Ut[zt],this.setState({currentAnnotation:Ut})}}),Bt(this,"onCancel",()=>this.props.onCancel(this.props.annotation)),Bt(this,"onOk",()=>{const zt=Ut=>Ut.clone({body:Ut.bodies.map(Kt=>{var ln=Kt,wn=Dt(ln,["draft"]);return wn})}),{currentAnnotation:Ht}=this.state;Ht.bodies.length===0&&!this.props.allowEmpty?Ht.isSelection?this.onCancel():this.props.onAnnotationDeleted(this.props.annotation):Ht.isSelection?this.props.onAnnotationCreated(zt(Ht).toAnnotation()):this.props.onAnnotationUpdated(zt(Ht),this.props.annotation)}),Bt(this,"onDelete",()=>this.props.onAnnotationDeleted(this.props.annotation)),this.element=Fi.createRef(),this.state={currentAnnotation:$t.annotation,dragged:!1,selectionBounds:Tb($t.selectedElement)}}componentWillReceiveProps($t){var zt;const{selectionBounds:Ht}=this.state,Ut=Tb($t.selectedElement);(zt=this.props.annotation)!=null&&zt.isEqual($t.annotation)?this.setState({selectionBounds:Ut}):this.setState({currentAnnotation:$t.annotation,selectionBounds:Ut}),this.props.modifiedTarget!=$t.modifiedTarget&&this.state.currentAnnotation&&this.updateCurrentAnnotation({target:this.props.modifiedTarget}),Ht!=Ut&&this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}componentDidMount(){this.removeObserver=this.initResizeObserver(),new MutationObserver(()=>{this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}).observe(this.element.current,{childList:!0,subtree:!0})}componentWillUnmount(){this.removeObserver&&this.removeObserver()}render(){const{currentAnnotation:$t}=this.state,zt=this.props.widgets?this.props.widgets.map(Ox):Ix,Ht=Kt=>Kt.type.disableDelete?Kt.type.disableDelete($t,Rt(Ot({},Kt.props),{readOnly:this.props.readOnly,env:this.props.env})):!1,Ut=$t&&($t.bodies.length>0||this.props.allowEmpty)&&!this.props.readOnly&&!$t.isSelection&&!zt.some(Ht);return pn(Cp,{disabled:!this.props.detachable,handle:".r6o-draggable",cancel:".r6o-btn, .r6o-btn *",onDrag:()=>this.setState({dragged:!0})},pn("div",{ref:this.element,className:this.state.dragged?"r6o-editor dragged":"r6o-editor"},pn("div",{className:"r6o-arrow"}),pn("div",{className:"r6o-editor-inner"},zt.map((Kt,ln)=>Fi.cloneElement(Kt,{key:`${ln}`,focus:ln===0,annotation:$t,readOnly:this.props.readOnly,env:this.props.env,onAppendBody:this.onAppendBody,onUpdateBody:this.onUpdateBody,onRemoveBody:this.onRemoveBody,onUpsertBody:this.onUpsertBody,onBatchModify:this.onBatchModify,onSetProperty:this.onSetProperty,onSaveAndClose:this.onOk})),this.props.readOnly?pn("div",{className:"r6o-footer"},pn("button",{className:"r6o-btn",onClick:this.onCancel},Ra.t("Close"))):pn("div",{className:this.props.detachable?"r6o-footer r6o-draggable":"r6o-footer"},Ut&&pn("button",{className:"r6o-btn left delete-annotation",title:Ra.t("Delete"),onClick:this.onDelete},pn(gx,{width:12})),pn("button",{className:"r6o-btn outline",onClick:this.onCancel},Ra.t("Cancel")),pn("button",{className:"r6o-btn ",onClick:this.onOk},Ra.t("Ok"))))))}}var sv,$x=new Uint8Array(16);function Rx(){if(!sv&&(sv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sv($x)}var Nx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dx(It){return typeof It=="string"&&Nx.test(It)}for(var yc=[],C_=0;C_<256;++C_)yc.push((C_+256).toString(16).substr(1));function Bx(It){var $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,zt=(yc[It[$t+0]]+yc[It[$t+1]]+yc[It[$t+2]]+yc[It[$t+3]]+"-"+yc[It[$t+4]]+yc[It[$t+5]]+"-"+yc[It[$t+6]]+yc[It[$t+7]]+"-"+yc[It[$t+8]]+yc[It[$t+9]]+"-"+yc[It[$t+10]]+yc[It[$t+11]]+yc[It[$t+12]]+yc[It[$t+13]]+yc[It[$t+14]]+yc[It[$t+15]]).toLowerCase();if(!Dx(zt))throw TypeError("Stringified UUID is invalid");return zt}function kb(It,$t,zt){It=It||{};var Ht=It.random||(It.rng||Rx)();if(Ht[6]=Ht[6]&15|64,Ht[8]=Ht[8]&63|128,$t){zt=zt||0;for(var Ut=0;Ut<16;++Ut)$t[zt+Ut]=Ht[Ut];return $t}return Bx(Ht)}var Fx=function It($t,zt){if($t===zt)return!0;if($t&&zt&&typeof $t=="object"&&typeof zt=="object"){if($t.constructor!==zt.constructor)return!1;var Ht,Ut,Kt;if(Array.isArray($t)){if(Ht=$t.length,Ht!=zt.length)return!1;for(Ut=Ht;Ut--!=0;)if(!It($t[Ut],zt[Ut]))return!1;return!0}if($t.constructor===RegExp)return $t.source===zt.source&&$t.flags===zt.flags;if($t.valueOf!==Object.prototype.valueOf)return $t.valueOf()===zt.valueOf();if($t.toString!==Object.prototype.toString)return $t.toString()===zt.toString();if(Kt=Object.keys($t),Ht=Kt.length,Ht!==Object.keys(zt).length)return!1;for(Ut=Ht;Ut--!=0;)if(!Object.prototype.hasOwnProperty.call(zt,Kt[Ut]))return!1;for(Ut=Ht;Ut--!=0;){var ln=Kt[Ut];if(!It($t[ln],zt[ln]))return!1}return!0}return $t!==$t&&zt!==zt},Ab=Fx;const T_=class{constructor(It,$t){Bt(this,"clone",(zt,Ht)=>new T_(Ot(Ot({},this.underlying),zt),Ot(Ot({},this.opts),Ht))),Bt(this,"selector",zt=>{const{target:Ht}=this.underlying;if(Ht.selector)return(Array.isArray(Ht.selector)?Ht.selector:[Ht.selector]).find(Ut=>Ut.type===zt)}),this.underlying=It,this.opts=$t}isEqual(It){return(It==null?void 0:It.type)!=="Annotation"?!1:this.underlying===It.underlying?!0:!this.underlying.id||!It.underlying.id?!1:Ab(this.underlying,It.underlying)}get readOnly(){var It;return(It=this.opts)==null?void 0:It.readOnly}get id(){return this.underlying.id}get type(){return this.underlying.type}get motivation(){return this.underlying.motivation}get body(){return this.underlying.body}get target(){return this.underlying.target}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}set bodies(It){this.underlying.body=It}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}get quote(){return this.selector("TextQuoteSelector").exact}get start(){return this.selector("TextPositionSelector").start}get end(){return this.selector("TextPositionSelector").end}};let Cg=T_;Bt(Cg,"create",It=>{const $t={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${kb()}`,body:[]};return new T_(Ot(Ot({},$t),It))});class u1{constructor($t,zt){Bt(this,"clone",Ht=>{const Ut=new u1;return Ut.underlying=JSON.parse(JSON.stringify(this.underlying)),Ht&&(Ut.underlying=Ot(Ot({},Ut.underlying),Ht)),Ut}),Bt(this,"selector",Ht=>{const{target:Ut}=this.underlying;if(Ut.selector)return(Array.isArray(Ut.selector)?Ut.selector:[Ut.selector]).find(Kt=>Kt.type===Ht)}),Bt(this,"toAnnotation",()=>{const Ht=Object.assign({},this.underlying,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${kb()}`});return new Cg(Ht)}),this.underlying={type:"Selection",body:zt||[],target:$t}}get type(){return this.underlying.type}get body(){return this.underlying.body}get target(){return this.underlying.target}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}isEqual($t){return $t?Ab(this.underlying,$t.underlying):!1}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}get quote(){return this.selector("TextQuoteSelector").exact}get isSelection(){return!0}}let k_=0;var zx=()=>({setServerTime:It=>{const $t=Date.now();k_=It-$t},getCurrentTimeAdjusted:()=>new Date(Date.now()+k_).toISOString(),toClientTime:It=>Date.parse(It)-k_});const Hx=(It,$t)=>{if(It){const zt=It==="auto"?window.navigator.userLanguage||window.navigator.language:It;try{Ra.init(zt.split("-")[0].toLowerCase(),$t)}catch{console.warn(`Unsupported locale '${zt}'. Falling back to default en.`)}}else Ra.init(null,$t)},Ks="http://www.w3.org/2000/svg",A_=It=>{const $t=It.getAttribute("class");return $t?new Set($t.split(" ")):new Set},bp=(It,$t)=>{const zt=A_(It);zt.add($t),It.setAttribute("class",Array.from(zt).join(" "))},Vx=(It,$t)=>{const zt=A_(It);zt.delete($t),zt.size===0?It.removeAttribute("class"):It.setAttribute("class",Array.from(zt).join(" "))},L_=(It,$t)=>A_(It).has($t),Tg=(It,$t)=>{const zt=It.selector("FragmentSelector");if(zt!=null&&zt.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){const{value:Ht}=zt,Ut=Ht.includes(":")?Ht.substring(Ht.indexOf("=")+1,Ht.indexOf(":")):"pixel",Kt=Ht.includes(":")?Ht.substring(Ht.indexOf(":")+1):Ht.substring(Ht.indexOf("=")+1);let[ln,wn,Dn,Fn]=Kt.split(",").map(parseFloat);return Ut.toLowerCase()==="percent"&&(ln=ln*$t.naturalWidth/100,wn=wn*$t.naturalHeight/100,Dn=Dn*$t.naturalWidth/100,Fn=Fn*$t.naturalHeight/100),{x:ln,y:wn,w:Dn,h:Fn}}},jx=(It,$t,zt,Ht,Ut)=>({source:Ut==null?void 0:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${It},${$t},${zt},${Ht}`}}),Ux=(It,$t,zt,Ht,Ut)=>{const Kt=It/Ut.naturalWidth*100,ln=$t/Ut.naturalHeight*100,wn=zt/Ut.naturalWidth*100,Dn=Ht/Ut.naturalHeight*100;return{source:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=percent:${Kt},${ln},${wn},${Dn}`}}},h1=(It,$t,zt,Ht,Ut,Kt)=>(Kt==null?void 0:Kt.toLowerCase())==="percent"?Ux(It,$t,zt,Ht,Ut):jx(It,$t,zt,Ht,Ut),av=(It,$t,zt,Ht,Ut)=>{It.setAttribute("x",$t),It.setAttribute("y",zt),It.setAttribute("width",Ht),It.setAttribute("height",Ut)},lv=(It,$t,zt)=>{It.setAttribute("cx",$t),It.setAttribute("cy",zt),It.setAttribute("r",7)},Lb=(It,$t,zt,Ht,Ut)=>{const Kt=document.createElementNS(Ks,"path");Kt.setAttribute("fill-rule","evenodd");const{naturalWidth:ln,naturalHeight:wn}=It;return Kt.setAttribute("d",`M0 0 h${ln} v${wn} h-${ln} z M${$t} ${zt} h${Ht} v${Ut} h-${Ht} z`),Kt},I_=(It,$t,zt,Ht,Ut,Kt)=>{const{naturalWidth:ln,naturalHeight:wn}=$t;It.setAttribute("d",`M0 0 h${ln} v${wn} h-${ln} z M${zt} ${Ht} h${Ut} v${Kt} h-${Ut} z`)},P_=(It,$t,zt,Ht)=>{const{x:Ut,y:Kt,w:ln,h:wn}=It.type==="Annotation"||It.type==="Selection"?Tg(It,$t):{x:It,y:$t,w:zt,h:Ht},Dn=document.createElementNS(Ks,"g");if(ln===0&&wn===0){bp(Dn,"a9s-point"),bp(Dn,"a9s-non-scaling"),Dn.setAttribute("transform-origin",`${Ut} ${Kt}`);const Fn=document.createElementNS(Ks,"circle"),Rn=document.createElementNS(Ks,"circle");Rn.setAttribute("class","a9s-inner"),lv(Rn,Ut,Kt),Fn.setAttribute("class","a9s-outer"),lv(Fn,Ut,Kt),Dn.appendChild(Fn),Dn.appendChild(Rn)}else{const Fn=document.createElementNS(Ks,"rect"),Rn=document.createElementNS(Ks,"rect");Rn.setAttribute("class","a9s-inner"),av(Rn,Ut,Kt,ln,wn),Fn.setAttribute("class","a9s-outer"),av(Fn,Ut,Kt,ln,wn),Dn.appendChild(Fn),Dn.appendChild(Rn)}return Dn},Ib=It=>{const $t=It.querySelector(".a9s-outer");if($t.nodeName==="rect"){const zt=parseFloat($t.getAttribute("x")),Ht=parseFloat($t.getAttribute("y")),Ut=parseFloat($t.getAttribute("width")),Kt=parseFloat($t.getAttribute("height"));return{x:zt,y:Ht,w:Ut,h:Kt}}else{const zt=parseFloat($t.getAttribute("cx")),Ht=parseFloat($t.getAttribute("cy"));return{x:zt,y:Ht,w:0,h:0}}},O_=(It,$t,zt,Ht,Ut)=>{const Kt=It.querySelector(".a9s-inner"),ln=It.querySelector(".a9s-outer");ln.nodeName==="rect"?(av(Kt,$t,zt,Ht,Ut),av(ln,$t,zt,Ht,Ut)):(lv(Kt,$t,zt),lv(ln,$t,zt))},Gx=(It,$t)=>{const{w:zt,h:Ht}=Tg(It,$t);return zt*Ht};class Wx{constructor($t,zt,Ht,Ut,Kt){Bt(this,"dragTo",(ln,wn)=>{this.group.style.display=null,this.opposite=[ln,wn];const{x:Dn,y:Fn,w:Rn,h:ur}=this.bbox;I_(this.mask,this.env.image,Dn,Fn,Rn,ur),O_(this.rect,Dn,Fn,Rn,ur)}),Bt(this,"getBoundingClientRect",()=>this.rect.getBoundingClientRect()),Bt(this,"toSelection",()=>{const{x:ln,y:wn,w:Dn,h:Fn}=this.bbox;return new u1(h1(ln,wn,Dn,Fn,this.env.image,this.config.fragmentUnit))}),Bt(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.mask=null,this.rect=null,this.group=null}),this.anchor=[$t,zt],this.opposite=[$t,zt],this.config=Ut,this.env=Kt,this.group=document.createElementNS(Ks,"g"),this.mask=Lb(Kt.image,$t,zt,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=P_($t,zt,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),Ht.appendChild(this.group)}get bbox(){const $t=this.opposite[0]-this.anchor[0],zt=this.opposite[1]-this.anchor[1];return{x:$t>0?this.anchor[0]:this.opposite[0],y:zt>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs($t)),h:Math.max(1,Math.abs(zt))}}get element(){return this.rect}}const qx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},M_=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Yx=It=>{let $t=null;const zt=(Ut,Kt)=>new MouseEvent(Ut,{screenX:Kt.screenX,screenY:Kt.screenY,clientX:Kt.clientX,clientY:Kt.clientY,pageX:Kt.pageX,pageY:Kt.pageY,bubbles:!0}),Ht=Ut=>{const Kt=Ut.changedTouches[0],ln=zt(qx[Ut.type],Kt);Kt.target.dispatchEvent(ln),Ut.preventDefault(),(Ut.type==="touchstart"||Ut.type==="touchmove")&&($t&&clearTimeout($t),$t=setTimeout(()=>{const wn=zt("dblclick",Kt);Kt.target.dispatchEvent(wn)},800)),Ut.type==="touchend"&&$t&&clearTimeout($t)};It.addEventListener("touchstart",Ht,!0),It.addEventListener("touchmove",Ht,!0),It.addEventListener("touchend",Ht,!0),It.addEventListener("touchcancel",Ht,!0)},cv="An implementation is missing",Xx=M_();class Pb extends jo{constructor($t,zt,Ht){super(),Bt(this,"enableResponsive",()=>{window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{const Kt=this.svg.getBoundingClientRect(),{width:ln,height:wn}=this.svg.viewBox.baseVal;this.scale=Math.max(ln/Kt.width,wn/Kt.height),this.onScaleChanged&&this.onScaleChanged(this.scale)}),this.resizeObserver.observe(this.svg.parentNode))}),Bt(this,"getSVGPoint",Kt=>{const ln=this.svg.createSVGPoint();if(Xx){const wn=this.svg.getBoundingClientRect(),Dn=Kt.clientX-wn.x,Fn=Kt.clientY-wn.y,{left:Rn,top:ur}=this.svg.getBoundingClientRect();return ln.x=Dn+Rn,ln.y=Fn+ur,ln.matrixTransform(this.g.getScreenCTM().inverse())}else return ln.x=Kt.offsetX,ln.y=Kt.offsetY,ln.matrixTransform(this.g.getCTM().inverse())}),Bt(this,"drawHandle",(Kt,ln)=>{const wn=document.createElementNS(Ks,"g");wn.setAttribute("class","a9s-handle");const Dn=document.createElementNS(Ks,"g"),Fn=Br=>{const Jr=document.createElementNS(Ks,"circle");return Jr.setAttribute("cx",Kt),Jr.setAttribute("cy",ln),Jr.setAttribute("r",Br),Jr},Rn=this.config.handleRadius||6,ur=Fn(Rn);ur.setAttribute("class","a9s-handle-inner");const Ar=Fn(Rn+1);return Ar.setAttribute("class","a9s-handle-outer"),Dn.appendChild(Ar),Dn.appendChild(ur),wn.appendChild(Dn),wn}),Bt(this,"setHandleXY",(Kt,ln,wn)=>{const Dn=Kt.querySelector(".a9s-handle-inner");Dn.setAttribute("cx",ln),Dn.setAttribute("cy",wn);const Fn=Kt.querySelector(".a9s-handle-outer");Fn.setAttribute("cx",ln),Fn.setAttribute("cy",wn)}),Bt(this,"getHandleXY",Kt=>{const ln=Kt.querySelector(".a9s-handle-outer");return{x:parseFloat(ln.getAttribute("cx")),y:parseFloat(ln.getAttribute("cy"))}}),Bt(this,"scaleHandle",Kt=>{const ln=Kt.querySelector(".a9s-handle-inner"),wn=Kt.querySelector(".a9s-handle-outer"),Dn=this.scale*(this.config.handleRadius||6);ln.setAttribute("r",Dn),wn.setAttribute("r",Dn)}),this.svg=$t.closest("svg"),this.g=$t,this.config=zt,this.env=Ht,this.scale=1;const{image:Ut}=Ht;(Ut instanceof Element||Ut instanceof HTMLDocument)&&this.enableResponsive()}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}class $_ extends Pb{constructor($t,zt,Ht){super($t,zt,Ht),Bt(this,"attachListeners",({mouseMove:Ut,mouseUp:Kt,dblClick:ln})=>{Ut&&(this.mouseMove=wn=>{const{x:Dn,y:Fn}=this.getSVGPoint(wn);this.started||(this.emit("startSelection",{x:Dn,y:Fn}),this.started=!0),Ut(Dn,Fn,wn)},this.svg.addEventListener("mousemove",this.mouseMove)),Kt&&(this.mouseUp=wn=>{if(wn.button!==0)return;const{x:Dn,y:Fn}=this.getSVGPoint(wn);Kt(Dn,Fn,wn)},document.addEventListener("mouseup",this.mouseUp)),ln&&(this.dblClick=wn=>{const{x:Dn,y:Fn}=this.getSVGPoint(wn);ln(Dn,Fn,wn)},document.addEventListener("dblclick",this.dblClick))}),Bt(this,"detachListeners",()=>{this.mouseMove&&this.svg.removeEventListener("mousemove",this.mouseMove),this.mouseUp&&document.removeEventListener("mouseup",this.mouseUp),this.dblClick&&document.removeEventListener("dblclick",this.dblClick)}),Bt(this,"start",(Ut,Kt)=>{const{x:ln,y:wn}=this.getSVGPoint(Ut);this.startDrawing(ln,wn,Kt,Ut)}),Bt(this,"startDrawing",Ut=>{throw new Error(cv)}),Bt(this,"createEditableShape",Ut=>{throw new Error(cv)}),this.started=!1}get isDrawing(){throw new Error(cv)}}$_.supports=It=>{throw new Error(cv)};const Ob="An implementation is missing";class Mb extends Pb{constructor($t,zt,Ht,Ut){super(zt,Ht,Ut),Bt(this,"updateState",Kt=>{throw new Error(Ob)}),this.annotation=$t}get element(){throw new Error(Ob)}}const Zx=/firefox/i.test(navigator.userAgent),$b=(It,$t,zt,Ht,Ut)=>{It.setAttribute("width",Ht),It.setAttribute("height",Ut),Zx?(It.setAttribute("x",0),It.setAttribute("y",0),It.setAttribute("transform",`translate(${$t}, ${zt})`)):(It.setAttribute("x",$t),It.setAttribute("y",zt))},Rb=(It,$t)=>{const{x:zt,y:Ht,width:Ut,height:Kt}=$t.getBBox(),ln=document.createElementNS(Ks,"svg");ln.setAttribute("class","a9s-formatter-el"),$b(ln,zt,Ht,Ut,Kt);const wn=document.createElementNS(Ks,"g");wn.appendChild(It),ln.appendChild(wn),$t.append(ln)},uv=(It,$t,zt)=>{if(!zt)return It;const Ht=zt($t);if(!Ht)return It;if(typeof Ht=="string"||Ht instanceof String)bp(It,Ht);else if(Ht.nodeType===Node.ELEMENT_NODE)Rb(Ht,It);else{const{className:Ut,style:Kt,element:ln}=Ht;if(Ut&&bp(It,Ut),Kt){const wn=It.querySelector(".a9s-outer"),Dn=It.querySelector(".a9s-inner");wn&&Dn?(wn.setAttribute("style","display:none"),Dn.setAttribute("style",Kt)):It.setAttribute("style",Kt)}ln&&Rb(ln,It);for(const wn in Ht)Ht.hasOwnProperty(wn)&&wn.startsWith("data-")&&It.setAttribute(wn,Ht[wn])}},R_=(It,$t,zt,Ht,Ut)=>{const Kt=It.querySelector(".a9s-formatter-el");Kt&&$b(Kt,$t,zt,Ht,Ut)};class Kx extends Mb{constructor($t,zt,Ht,Ut){super($t,zt,Ht,Ut),Bt(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Bt(this,"setSize",(Fn,Rn,ur,Ar)=>{O_(this.rectangle,Fn,Rn,ur,Ar),I_(this.mask,this.env.image,Fn,Rn,ur,Ar),R_(this.elementGroup,Fn,Rn,ur,Ar);const[Br,Jr,gi,fi]=this.handles;this.setHandleXY(Br,Fn,Rn),this.setHandleXY(Jr,Fn+ur,Rn),this.setHandleXY(gi,Fn+ur,Rn+Ar),this.setHandleXY(fi,Fn,Rn+Ar)}),Bt(this,"stretchCorners",(Fn,Rn,ur)=>{const Ar=this.getHandleXY(Rn),Br=ur.x-Ar.x,Jr=ur.y-Ar.y,gi=Br>0?Ar.x:ur.x,fi=Jr>0?Ar.y:ur.y,Mi=Math.abs(Br),Vi=Math.abs(Jr);O_(this.rectangle,gi,fi,Mi,Vi),I_(this.mask,this.env.image,gi,fi,Mi,Vi),R_(this.elementGroup,gi,fi,Mi,Vi),this.setHandleXY(this.handles[Fn],ur.x,ur.y);const zo=this.handles[(Fn+3)%4];this.setHandleXY(zo,Ar.x,ur.y);const Lo=this.handles[(Fn+5)%4];return this.setHandleXY(Lo,ur.x,Ar.y),{x:gi,y:fi,w:Mi,h:Vi}}),Bt(this,"onGrab",Fn=>Rn=>{if(Rn.button!==0)return;this.grabbedElem=Fn;const ur=this.getSVGPoint(Rn),{x:Ar,y:Br}=Ib(this.rectangle);this.mouseOffset={x:ur.x-Ar,y:ur.y-Br}}),Bt(this,"onMouseMove",Fn=>{if(Fn.button!==0)return;const Rn=(ur,Ar)=>ur<0?0:ur>Ar?Ar:ur;if(this.grabbedElem){const ur=this.getSVGPoint(Fn);if(this.grabbedElem===this.rectangle){const{w:Ar,h:Br}=Ib(this.rectangle),{naturalWidth:Jr,naturalHeight:gi}=this.env.image,fi=Rn(ur.x-this.mouseOffset.x,Jr-Ar),Mi=Rn(ur.y-this.mouseOffset.y,gi-Br);this.setSize(fi,Mi,Ar,Br),this.emit("update",h1(fi,Mi,Ar,Br,this.env.image,this.config.fragmentUnit))}else{const Ar=this.handles.indexOf(this.grabbedElem),Br=Ar<2?this.handles[Ar+2]:this.handles[Ar-2],{x:Jr,y:gi,w:fi,h:Mi}=this.stretchCorners(Ar,Br,ur);this.emit("update",h1(Jr,gi,fi,Mi,this.env.image,this.config.fragmentUnit))}}}),Bt(this,"onMouseUp",Fn=>{this.grabbedElem=null,this.mouseOffset=null}),Bt(this,"updateState",Fn=>{const{x:Rn,y:ur,w:Ar,h:Br}=Tg(Fn,this.env.image);this.setSize(Rn,ur,Ar,Br)}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp);const{x:Kt,y:ln,w:wn,h:Dn}=Tg($t,Ut.image);this.containerGroup=document.createElementNS(Ks,"g"),this.mask=Lb(Ut.image,Kt,ln,wn,Dn),this.mask.setAttribute("class","a9s-selection-mask"),this.containerGroup.appendChild(this.mask),this.elementGroup=document.createElementNS(Ks,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.rectangle=P_(Kt,ln,wn,Dn),this.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.rectangle)),this.elementGroup.appendChild(this.rectangle),this.handles=[[Kt,ln],[Kt+wn,ln],[Kt+wn,ln+Dn],[Kt,ln+Dn]].map(Fn=>{const[Rn,ur]=Fn,Ar=this.drawHandle(Rn,ur);return Ar.addEventListener("mousedown",this.onGrab(Ar)),this.elementGroup.appendChild(Ar),Ar}),this.containerGroup.appendChild(this.elementGroup),zt.appendChild(this.containerGroup),uv(this.rectangle,$t,Ht.formatter),this.grabbedElem=null,this.mouseOffset=null}get element(){return this.elementGroup}destroy(){this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}}class hv extends $_{constructor($t,zt,Ht){super($t,zt,Ht),Bt(this,"startDrawing",(Ut,Kt)=>{this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp}),this.rubberband=new Wx(Ut,Kt,this.g,this.config,this.env)}),Bt(this,"stop",()=>{this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Bt(this,"onMouseMove",(Ut,Kt)=>this.rubberband.dragTo(Ut,Kt)),Bt(this,"onMouseUp",()=>{this.detachListeners(),this.started=!1;const{width:Ut,height:Kt}=this.rubberband.getBoundingClientRect(),ln=this.config.minSelectionWidth||4,wn=this.config.minSelectionHeight||4;if(Ut>=ln&&Kt>=wn){const{element:Dn}=this.rubberband;Dn.annotation=this.rubberband.toSelection(),this.emit("complete",Dn)}else this.emit("cancel");this.stop()}),Bt(this,"createEditableShape",Ut=>new Kx(Ut,this.g,this.config,this.env)),this.rubberband=null}get isDrawing(){return this.rubberband!=null}}hv.identifier="rect",hv.supports=It=>{const $t=It.selector("FragmentSelector");return $t==null?void 0:$t.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};const Jx=It=>{const $t=new XMLSerializer().serializeToString(It.documentElement).replace("<svg>",`<svg xmlns="${Ks}">`);return new DOMParser().parseFromString($t,"image/svg+xml").documentElement},Nb=It=>{const $t=Ht=>{Array.from(Ht.attributes).forEach(Ut=>{Ut.name.startsWith("on")&&Ht.removeAttribute(Ut.name)})},zt=It.getElementsByTagName("script");return Array.from(zt).reverse().forEach(Ht=>Ht.parentNode.removeChild(Ht)),$t(It),Array.from(It.querySelectorAll("*")).forEach($t),It},$m=It=>{const $t=It.selector("SvgSelector");if($t){const zt=new DOMParser,{value:Ht}=$t,Ut=zt.parseFromString(Ht,"image/svg+xml"),Kt=Ut.lookupPrefix(Ks),ln=Ut.lookupNamespaceURI(null);return Kt||ln?Nb(Ut).firstChild:Nb(Jx(Ut)).firstChild}},Db=It=>{const $t=$m(It),zt=document.createElementNS(Ks,"g"),Ht=$t.cloneNode(!0);Ht.setAttribute("class","a9s-inner");const Ut=$t.cloneNode(!0);return Ut.setAttribute("class","a9s-outer"),zt.appendChild(Ut),zt.appendChild(Ht),zt},N_=(It,$t)=>{const zt=It.querySelector(".a9s-inner").cloneNode(!0);zt.removeAttribute("class"),zt.removeAttribute("xmlns");let Ht=zt.outerHTML||new XMLSerializer().serializeToString(zt);return Ht=Ht.replace(` xmlns="${Ks}"`,""),{source:$t==null?void 0:$t.src,selector:{type:"SvgSelector",value:`<svg>${Ht}</svg>`}}},Qx=It=>{const $t=$m(It),zt=$t.nodeName.toLowerCase();if(zt==="polygon")return ew($t);if(zt==="circle")return tw($t);if(zt==="ellipse")return nw($t);if(zt=="path")return rw($t);throw`Unsupported SVG shape type: ${zt}`},ew=It=>{const $t=It.getAttribute("points").split(" ").map(Ut=>Ut.split(",").map(Kt=>parseFloat(Kt.trim())));let zt=0,Ht=$t.length-1;for(let Ut=0;Ut<$t.length;Ut++)zt+=($t[Ht][0]+$t[Ut][0])*($t[Ht][1]-$t[Ut][1]),Ht=Ut;return Math.abs(.5*zt)},tw=It=>{const $t=It.getAttribute("r");return $t*$t*Math.PI},nw=It=>{const $t=It.getAttribute("rx"),zt=It.getAttribute("ry");return $t*zt*Math.PI},rw=It=>{const $t=It.getAttribute("d").split("L");let zt=0;if($t.length>1){var Ht=$t[$t.length-1].trim().split(" ");let Ut=parseFloat(Ht[0]),Kt=parseFloat(Ht[1]);Ht=$t[0].substring(1).trim().split(" ");let ln=parseFloat(Ht[0]),wn=parseFloat(Ht[1]);zt+=(Ut+ln)*(Kt-wn),Ut=ln,Kt=wn;for(let Dn=1;Dn<$t.length;Dn++)Ht=$t[Dn].trim().split(" "),ln=parseFloat(Ht[0]),wn=parseFloat(Ht[1]),zt+=(Ut+ln)*(Kt-wn),Ut=ln,Kt=wn}return Math.abs(.5*zt)};class Bb{constructor($t,zt){Bt(this,"redraw",()=>{this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}),Bt(this,"destroy",()=>this.mask.parentNode.removeChild(this.mask)),this.w=$t.naturalWidth,this.h=$t.naturalHeight,this.polygon=zt,this.mask=document.createElementNS(Ks,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}get element(){return this.mask}}class iw{constructor($t,zt,Ht){Bt(this,"setPoints",Ut=>{const Kt=Ut.map(ln=>`${ln[0]},${ln[1]}`).join(" ");this.outer.setAttribute("points",Kt),this.inner.setAttribute("points",Kt)}),Bt(this,"getBoundingClientRect",()=>this.outer.getBoundingClientRect()),Bt(this,"dragTo",Ut=>{this.group.style.display=null,this.mousepos=Ut;const Kt=[...this.points,Ut];this.setPoints(Kt),this.mask.redraw()}),Bt(this,"addPoint",()=>{const[Ut,Kt]=this.mousepos,ln=this.points[this.points.length-1];Math.pow(Ut-ln[0],2)+Math.pow(Kt-ln[1],2)>4&&(this.points=[...this.points,this.mousepos],this.setPoints(this.points),this.mask.redraw())}),Bt(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.polygon=null,this.group=null}),Bt(this,"toSelection",()=>new u1(N_(this.group,this.env.image))),this.points=[$t],this.env=Ht,this.mousepos=$t,this.group=document.createElementNS(Ks,"g"),this.polygon=document.createElementNS(Ks,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(Ks,"polygon"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(Ks,"polygon"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new Bb(Ht.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),zt.appendChild(this.group)}get element(){return this.polygon}}const D_=It=>{const $t=It.querySelector(".a9s-inner").points,zt=[];for(let Ht=0;Ht<$t.numberOfItems;Ht++)zt.push($t.getItem(Ht));return zt},ow=It=>It.querySelector(".a9s-inner").getBBox();class sw extends Mb{constructor($t,zt,Ht,Ut){super($t,zt,Ht,Ut),Bt(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Bt(this,"setPoints",Kt=>{const ln=Br=>Math.round(10*Br)/10,wn=Kt.map(Br=>`${ln(Br.x)},${ln(Br.y)}`).join(" ");this.shape.querySelector(".a9s-inner").setAttribute("points",wn);const Dn=this.shape.querySelector(".a9s-outer");Dn.setAttribute("points",wn),this.mask.redraw();const{x:Fn,y:Rn,width:ur,height:Ar}=Dn.getBBox();R_(this.elementGroup,Fn,Rn,ur,Ar)}),Bt(this,"onGrab",Kt=>ln=>{ln.button===0&&(this.grabbedElem=Kt,this.grabbedAt=this.getSVGPoint(ln))}),Bt(this,"onMouseMove",Kt=>{const ln=(wn,Dn,Fn)=>wn+Dn<0?-wn:wn+Dn>Fn?Fn-wn:Dn;if(this.grabbedElem){const wn=this.getSVGPoint(Kt);if(this.grabbedElem===this.shape){const{x:Dn,y:Fn,width:Rn,height:ur}=ow(this.shape),{naturalWidth:Ar,naturalHeight:Br}=this.env.image,Jr=ln(Dn,wn.x-this.grabbedAt.x,Ar-Rn),gi=ln(Fn,wn.y-this.grabbedAt.y,Br-ur),fi=D_(this.shape).map(Mi=>({x:Mi.x+Jr,y:Mi.y+gi}));this.grabbedAt=wn,this.setPoints(fi),fi.forEach((Mi,Vi)=>this.setHandleXY(this.handles[Vi],Mi.x,Mi.y)),this.emit("update",N_(this.shape,this.env.image))}else{const Dn=this.handles.indexOf(this.grabbedElem),Fn=D_(this.shape).map((Rn,ur)=>ur===Dn?wn:Rn);this.setPoints(Fn),this.setHandleXY(this.handles[Dn],wn.x,wn.y),this.emit("update",N_(this.shape,this.env.image))}}}),Bt(this,"onMouseUp",Kt=>{this.grabbedElem=null,this.grabbedAt=null}),Bt(this,"updateState",Kt=>{const ln=$m(Kt).getAttribute("points").split(" ").map(wn=>{const[Dn,Fn]=wn.split(",").map(Rn=>parseFloat(Rn.trim()));return{x:Dn,y:Fn}});this.setPoints(ln),ln.forEach((wn,Dn)=>this.setHandleXY(this.handles[Dn],wn.x,wn.y))}),Bt(this,"destroy",()=>{this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp),this.containerGroup=document.createElementNS(Ks,"g"),this.shape=Db($t),this.shape.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.shape)),this.mask=new Bb(Ut.image,this.shape.querySelector(".a9s-inner")),this.containerGroup.appendChild(this.mask.element),this.elementGroup=document.createElementNS(Ks,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.elementGroup.appendChild(this.shape),this.handles=D_(this.shape).map(Kt=>{const ln=this.drawHandle(Kt.x,Kt.y);return ln.addEventListener("mousedown",this.onGrab(ln)),this.elementGroup.appendChild(ln),ln}),this.containerGroup.appendChild(this.elementGroup),zt.appendChild(this.containerGroup),uv(this.shape,$t,Ht.formatter),this.grabbedElem=null,this.grabbedAt=null}get element(){return this.elementGroup}}class B_ extends $_{constructor($t,zt,Ht){super($t,zt,Ht),Bt(this,"startDrawing",(Ut,Kt,ln)=>{this._isDrawing=!0,this._startOnSingleClick=ln,this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp,dblClick:this.onDblClick}),this.rubberband=new iw([Ut,Kt],this.g,this.env)}),Bt(this,"stop",()=>{this.detachListeners(),this._isDrawing=!1,this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Bt(this,"onMouseMove",(Ut,Kt)=>this.rubberband.dragTo([Ut,Kt])),Bt(this,"onMouseUp",()=>{const{width:Ut,height:Kt}=this.rubberband.getBoundingClientRect(),ln=this.config.minSelectionWidth||4,wn=this.config.minSelectionHeight||4;Ut>=ln||Kt>=wn?this.rubberband.addPoint():this._startOnSingleClick||(this.emit("cancel"),this.stop())}),Bt(this,"onDblClick",()=>{this._isDrawing=!1;const Ut=this.rubberband.element;Ut.annotation=this.rubberband.toSelection(),this.emit("complete",Ut),this.stop()}),Bt(this,"createEditableShape",Ut=>new sw(Ut,this.g,this.config,this.env)),this._isDrawing=!1,this._startOnSingleClick=!1}get isDrawing(){return this._isDrawing}}B_.identifier="polygon",B_.supports=It=>{var $t;const zt=It.selector("SvgSelector");if(zt)return($t=zt.value)==null?void 0:$t.match(/^<svg.*<polygon/g)};class aw extends jo{constructor($t,zt,Ht){super(),Bt(this,"listTools",()=>this._registered.map(Ut=>Ut.identifier)),Bt(this,"registerTool",Ut=>{const Kt=Ut.identifier;this.listTools().includes(Kt)&&this.unregisterTool(Kt),this._registered.push(Ut)}),Bt(this,"unregisterTool",Ut=>this._registered=this._registered.filter(Kt=>Kt.identifier!==Ut)),Bt(this,"setCurrent",Ut=>{const Kt=typeof Ut=="string"||Ut instanceof String?this._registered.find(ln=>ln.identifier===Ut):Ut;this._current=new Kt(this._g,this._config,this._env),this._current.on("startSelection",ln=>this.emit("startSelection",ln)),this._current.on("complete",ln=>this.emit("complete",ln)),this._current.on("cancel",ln=>this.emit("cancel",ln))}),Bt(this,"forAnnotation",Ut=>{var Kt;const[ln,...wn]=Ut.targets,Dn=(Kt=ln.renderedVia)==null?void 0:Kt.name,Fn=Dn?this._registered.find(Rn=>Rn.identifier===Dn):this._registered.find(Rn=>Rn.supports(Ut));return Fn?new Fn(this._g,this._config,this._env):null}),this._g=$t,this._config=zt,this._env=Ht,this._registered=[hv,B_],this.setCurrent(hv)}get current(){return this._current}}class lw{constructor($t,zt,Ht){this.svg=$t.closest("svg"),this.g=document.createElementNS(Ks,"g"),this.g.setAttribute("class","a9s-crosshair");const Ut=document.createElementNS(Ks,"line"),Kt=document.createElementNS(Ks,"line");this.g.appendChild(Ut),this.g.appendChild(Kt),$t.appendChild(this.g);const ln=wn=>{const Dn=this.svg.getBoundingClientRect(),Fn=wn.clientX-Dn.x,Rn=wn.clientY-Dn.y,ur=this.svg.createSVGPoint(),{left:Ar,top:Br}=this.svg.getBoundingClientRect();return ur.x=Fn+Ar,ur.y=Rn+Br,ur.matrixTransform($t.getScreenCTM().inverse())};this.svg.addEventListener("mousemove",wn=>{const{x:Dn,y:Fn}=ln(wn);Ut.setAttribute("x1",0),Ut.setAttribute("y1",Fn),Ut.setAttribute("x2",zt),Ut.setAttribute("y2",Fn),Kt.setAttribute("x1",Dn),Kt.setAttribute("y1",0),Kt.setAttribute("x2",Dn),Kt.setAttribute("y2",Ht)})}}const cw={FragmentSelector:P_,SvgSelector:Db},uw={FragmentSelector:Gx,SvgSelector:Qx},Fb=It=>{const $t=It.targets[0];if($t)return Array.isArray($t.selector)?$t.selector[0]:$t.selector},F_=(It,$t)=>cw[Fb(It).type](It,$t),zb=(It,$t)=>uw[Fb(It).type](It,$t);function hw(It,$t,zt,Ht,Ut){Hb(It,$t,zt||0,Ht||It.length-1,Ut||dw)}function Hb(It,$t,zt,Ht,Ut){for(;Ht>zt;){if(Ht-zt>600){var Kt=Ht-zt+1,ln=$t-zt+1,wn=Math.log(Kt),Dn=.5*Math.exp(2*wn/3),Fn=.5*Math.sqrt(wn*Dn*(Kt-Dn)/Kt)*(ln-Kt/2<0?-1:1),Rn=Math.max(zt,Math.floor($t-ln*Dn/Kt+Fn)),ur=Math.min(Ht,Math.floor($t+(Kt-ln)*Dn/Kt+Fn));Hb(It,$t,Rn,ur,Ut)}var Ar=It[$t],Br=zt,Jr=Ht;for(d1(It,zt,$t),Ut(It[Ht],Ar)>0&&d1(It,zt,Ht);Br<Jr;){for(d1(It,Br,Jr),Br++,Jr--;Ut(It[Br],Ar)<0;)Br++;for(;Ut(It[Jr],Ar)>0;)Jr--}Ut(It[zt],Ar)===0?d1(It,zt,Jr):(Jr++,d1(It,Jr,Ht)),Jr<=$t&&(zt=Jr+1),$t<=Jr&&(Ht=Jr-1)}}function d1(It,$t,zt){var Ht=It[$t];It[$t]=It[zt],It[zt]=Ht}function dw(It,$t){return It<$t?-1:It>$t?1:0}class fw{constructor($t=9){this._maxEntries=Math.max(4,$t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search($t){let zt=this.data;const Ht=[];if(!fv($t,zt))return Ht;const Ut=this.toBBox,Kt=[];for(;zt;){for(let ln=0;ln<zt.children.length;ln++){const wn=zt.children[ln],Dn=zt.leaf?Ut(wn):wn;fv($t,Dn)&&(zt.leaf?Ht.push(wn):H_($t,Dn)?this._all(wn,Ht):Kt.push(wn))}zt=Kt.pop()}return Ht}collides($t){let zt=this.data;if(!fv($t,zt))return!1;const Ht=[];for(;zt;){for(let Ut=0;Ut<zt.children.length;Ut++){const Kt=zt.children[Ut],ln=zt.leaf?this.toBBox(Kt):Kt;if(fv($t,ln)){if(zt.leaf||H_($t,ln))return!0;Ht.push(Kt)}}zt=Ht.pop()}return!1}load($t){if(!($t&&$t.length))return this;if($t.length<this._minEntries){for(let Ht=0;Ht<$t.length;Ht++)this.insert($t[Ht]);return this}let zt=this._build($t.slice(),0,$t.length-1,0);if(!this.data.children.length)this.data=zt;else if(this.data.height===zt.height)this._splitRoot(this.data,zt);else{if(this.data.height<zt.height){const Ht=this.data;this.data=zt,zt=Ht}this._insert(zt,this.data.height-zt.height-1,!0)}return this}insert($t){return $t&&this._insert($t,this.data.height-1),this}clear(){return this.data=Nm([]),this}remove($t,zt){if(!$t)return this;let Ht=this.data;const Ut=this.toBBox($t),Kt=[],ln=[];let wn,Dn,Fn;for(;Ht||Kt.length;){if(Ht||(Ht=Kt.pop(),Dn=Kt[Kt.length-1],wn=ln.pop(),Fn=!0),Ht.leaf){const Rn=pw($t,Ht.children,zt);if(Rn!==-1)return Ht.children.splice(Rn,1),Kt.push(Ht),this._condense(Kt),this}!Fn&&!Ht.leaf&&H_(Ht,Ut)?(Kt.push(Ht),ln.push(wn),wn=0,Dn=Ht,Ht=Ht.children[0]):Dn?(wn++,Ht=Dn.children[wn],Fn=!1):Ht=null}return this}toBBox($t){return $t}compareMinX($t,zt){return $t.minX-zt.minX}compareMinY($t,zt){return $t.minY-zt.minY}toJSON(){return this.data}fromJSON($t){return this.data=$t,this}_all($t,zt){const Ht=[];for(;$t;)$t.leaf?zt.push(...$t.children):Ht.push(...$t.children),$t=Ht.pop();return zt}_build($t,zt,Ht,Ut){const Kt=Ht-zt+1;let ln=this._maxEntries,wn;if(Kt<=ln)return wn=Nm($t.slice(zt,Ht+1)),Rm(wn,this.toBBox),wn;Ut||(Ut=Math.ceil(Math.log(Kt)/Math.log(ln)),ln=Math.ceil(Kt/Math.pow(ln,Ut-1))),wn=Nm([]),wn.leaf=!1,wn.height=Ut;const Dn=Math.ceil(Kt/ln),Fn=Dn*Math.ceil(Math.sqrt(ln));Vb($t,zt,Ht,Fn,this.compareMinX);for(let Rn=zt;Rn<=Ht;Rn+=Fn){const ur=Math.min(Rn+Fn-1,Ht);Vb($t,Rn,ur,Dn,this.compareMinY);for(let Ar=Rn;Ar<=ur;Ar+=Dn){const Br=Math.min(Ar+Dn-1,ur);wn.children.push(this._build($t,Ar,Br,Ut-1))}}return Rm(wn,this.toBBox),wn}_chooseSubtree($t,zt,Ht,Ut){for(;Ut.push(zt),!(zt.leaf||Ut.length-1===Ht);){let Kt=1/0,ln=1/0,wn;for(let Dn=0;Dn<zt.children.length;Dn++){const Fn=zt.children[Dn],Rn=z_(Fn),ur=yw($t,Fn)-Rn;ur<ln?(ln=ur,Kt=Rn<Kt?Rn:Kt,wn=Fn):ur===ln&&Rn<Kt&&(Kt=Rn,wn=Fn)}zt=wn||zt.children[0]}return zt}_insert($t,zt,Ht){const Ut=Ht?$t:this.toBBox($t),Kt=[],ln=this._chooseSubtree(Ut,this.data,zt,Kt);for(ln.children.push($t),p1(ln,Ut);zt>=0&&Kt[zt].children.length>this._maxEntries;)this._split(Kt,zt),zt--;this._adjustParentBBoxes(Ut,Kt,zt)}_split($t,zt){const Ht=$t[zt],Ut=Ht.children.length,Kt=this._minEntries;this._chooseSplitAxis(Ht,Kt,Ut);const ln=this._chooseSplitIndex(Ht,Kt,Ut),wn=Nm(Ht.children.splice(ln,Ht.children.length-ln));wn.height=Ht.height,wn.leaf=Ht.leaf,Rm(Ht,this.toBBox),Rm(wn,this.toBBox),zt?$t[zt-1].children.push(wn):this._splitRoot(Ht,wn)}_splitRoot($t,zt){this.data=Nm([$t,zt]),this.data.height=$t.height+1,this.data.leaf=!1,Rm(this.data,this.toBBox)}_chooseSplitIndex($t,zt,Ht){let Ut,Kt=1/0,ln=1/0;for(let wn=zt;wn<=Ht-zt;wn++){const Dn=f1($t,0,wn,this.toBBox),Fn=f1($t,wn,Ht,this.toBBox),Rn=vw(Dn,Fn),ur=z_(Dn)+z_(Fn);Rn<Kt?(Kt=Rn,Ut=wn,ln=ur<ln?ur:ln):Rn===Kt&&ur<ln&&(ln=ur,Ut=wn)}return Ut||Ht-zt}_chooseSplitAxis($t,zt,Ht){const Ut=$t.leaf?this.compareMinX:gw,Kt=$t.leaf?this.compareMinY:mw,ln=this._allDistMargin($t,zt,Ht,Ut),wn=this._allDistMargin($t,zt,Ht,Kt);ln<wn&&$t.children.sort(Ut)}_allDistMargin($t,zt,Ht,Ut){$t.children.sort(Ut);const Kt=this.toBBox,ln=f1($t,0,zt,Kt),wn=f1($t,Ht-zt,Ht,Kt);let Dn=dv(ln)+dv(wn);for(let Fn=zt;Fn<Ht-zt;Fn++){const Rn=$t.children[Fn];p1(ln,$t.leaf?Kt(Rn):Rn),Dn+=dv(ln)}for(let Fn=Ht-zt-1;Fn>=zt;Fn--){const Rn=$t.children[Fn];p1(wn,$t.leaf?Kt(Rn):Rn),Dn+=dv(wn)}return Dn}_adjustParentBBoxes($t,zt,Ht){for(let Ut=Ht;Ut>=0;Ut--)p1(zt[Ut],$t)}_condense($t){for(let zt=$t.length-1,Ht;zt>=0;zt--)$t[zt].children.length===0?zt>0?(Ht=$t[zt-1].children,Ht.splice(Ht.indexOf($t[zt]),1)):this.clear():Rm($t[zt],this.toBBox)}}function pw(It,$t,zt){if(!zt)return $t.indexOf(It);for(let Ht=0;Ht<$t.length;Ht++)if(zt(It,$t[Ht]))return Ht;return-1}function Rm(It,$t){f1(It,0,It.children.length,$t,It)}function f1(It,$t,zt,Ht,Ut){Ut||(Ut=Nm(null)),Ut.minX=1/0,Ut.minY=1/0,Ut.maxX=-1/0,Ut.maxY=-1/0;for(let Kt=$t;Kt<zt;Kt++){const ln=It.children[Kt];p1(Ut,It.leaf?Ht(ln):ln)}return Ut}function p1(It,$t){return It.minX=Math.min(It.minX,$t.minX),It.minY=Math.min(It.minY,$t.minY),It.maxX=Math.max(It.maxX,$t.maxX),It.maxY=Math.max(It.maxY,$t.maxY),It}function gw(It,$t){return It.minX-$t.minX}function mw(It,$t){return It.minY-$t.minY}function z_(It){return(It.maxX-It.minX)*(It.maxY-It.minY)}function dv(It){return It.maxX-It.minX+(It.maxY-It.minY)}function yw(It,$t){return(Math.max($t.maxX,It.maxX)-Math.min($t.minX,It.minX))*(Math.max($t.maxY,It.maxY)-Math.min($t.minY,It.minY))}function vw(It,$t){const zt=Math.max(It.minX,$t.minX),Ht=Math.max(It.minY,$t.minY),Ut=Math.min(It.maxX,$t.maxX),Kt=Math.min(It.maxY,$t.maxY);return Math.max(0,Ut-zt)*Math.max(0,Kt-Ht)}function H_(It,$t){return It.minX<=$t.minX&&It.minY<=$t.minY&&$t.maxX<=It.maxX&&$t.maxY<=It.maxY}function fv(It,$t){return $t.minX<=It.maxX&&$t.minY<=It.maxY&&$t.maxX>=It.minX&&$t.maxY>=It.minY}function Nm(It){return{children:It,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Vb(It,$t,zt,Ht,Ut){const Kt=[$t,zt];for(;Kt.length;){if(zt=Kt.pop(),$t=Kt.pop(),zt-$t<=Ht)continue;const ln=$t+Math.ceil((zt-$t)/Ht/2)*Ht;hw(It,ln,$t,zt,Ut),Kt.push($t,ln,ln,zt)}}const jb=It=>{const $t=F_(It),zt=document.createElementNS(Ks,"svg");zt.style.position="absolute",zt.style.opacity=0,zt.style.top=0,zt.style.left=0,zt.appendChild($t),document.body.appendChild(zt);const{x:Ht,y:Ut,width:Kt,height:ln}=$t.getBBox();return document.body.removeChild(zt),{minX:Ht,minY:Ut,maxX:Ht+Kt,maxY:Ut+ln}};class _w{constructor($t){Bt(this,"getAnnotationAt",(zt,Ht,Ut)=>{const Kt=Ut?5/Ut:5,ln=this.spatial_index.search({minX:zt-Kt,minY:Ht-Kt,maxX:zt+Kt,maxY:Ht+Kt}).map(wn=>wn.annotation);if(ln.length>0)return ln.sort((wn,Dn)=>zb(wn,this.env.image)-zb(Dn,this.env.image)),ln[0]}),Bt(this,"getAnnotationsIntersecting",zt=>this.spatial_index.search(zt).map(Ht=>Ht.annotation)),Bt(this,"insert",zt=>{(Array.isArray(zt)?zt:[zt]).forEach(Ht=>{this.spatial_index.insert(Rt(Ot({},jb(Ht)),{annotation:Ht}))})}),Bt(this,"remove",zt=>{const Ht=Rt(Ot({},jb(zt)),{annotation:zt});this.spatial_index.remove(Ht,(Ut,Kt)=>Ut.annotation.id===Kt.annotation.id)}),this.env=$t,this.spatial_index=new fw}}const bw=(It,$t)=>{const zt=L_($t,".a9s-annotation")?$t:$t.querySelector(".a9s-annotation"),{canvas:Ht}=It.drawer,Ut=Ht.getBoundingClientRect(),Kt=Ht.width/Ut.width,ln=Ht.height/Ut.height,wn=zt.getBoundingClientRect(),Dn=wn.x-Ut.x,Fn=wn.y-Ut.y,{width:Rn,height:ur}=wn,Ar=document.createElement("CANVAS"),Br=Ar.getContext("2d");Ar.width=Rn,Ar.height=ur,Br.drawImage(Ht,Dn*Kt,Fn*ln,Rn*Kt,ur*ln,0,0,Rn,ur);const Jr=It.viewport.viewportToImageCoordinates(wn.x,wn.y),gi=It.viewport.viewportToImageZoom(It.viewport.getZoom());return{snippet:Ar,transform:fi=>{const Mi=Jr.x+fi[0]/Kt/gi,Vi=Jr.y+fi[1]/ln/gi;return[Mi,Vi]}}},xw=M_();class Ub extends jo{constructor($t){super(),Bt(this,"_getShapeAt",Ht=>{const Ut=Dn=>{const Fn=this.svg.createSVGPoint();if(window.TouchEvent&&Dn instanceof TouchEvent){const Rn=this.svg.getBoundingClientRect(),ur=Dn.touches[0],Ar=ur.clientX-Rn.x,Br=ur.clientY-Rn.y,{left:Jr,top:gi}=this.svg.getBoundingClientRect();return Fn.x=Ar+Jr,Fn.y=Br+gi,Fn.matrixTransform(this.g.getScreenCTM().inverse())}else return Fn.x=Dn.offsetX,Fn.y=Dn.offsetY,Fn.matrixTransform(this.g.getCTM().inverse())},{x:Kt,y:ln}=Ut(Ht),wn=this.store.getAnnotationAt(Kt,ln,this.currentScale());if(wn)return this.findShape(wn)}),Bt(this,"_initDrawingTools",Ht=>{this.tools=new aw(this.g,this.config,this.env),this.tools.on("complete",this.onDrawingComplete);let Ut=!1;this.mouseTracker=new Jt.default.MouseTracker({element:this.svg,pressHandler:Kt=>{this.tools.current.isDrawing||(this.tools.current.start(Kt.originalEvent,this.drawOnSingleClick&&!this.hoveredShape),Ht||this.scaleTool(this.tools.current))},moveHandler:Kt=>{if(this.tools.current.isDrawing){const{x:ln,y:wn}=this.tools.current.getSVGPoint(Kt.originalEvent);this.tools.current.onMouseMove(ln,wn,Kt.originalEvent),Ut||(this.emit("startSelection",{x:ln,y:wn}),Ut=!0)}},releaseHandler:Kt=>{if(this.tools.current.isDrawing){const{x:ln,y:wn}=this.tools.current.getSVGPoint(Kt.originalEvent);this.tools.current.onMouseUp(ln,wn,Kt.originalEvent)}Ut=!1}}).setTracking(!1),this.onKeyDown&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyUp&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyDown=Kt=>{Kt.which===16&&!this.selectedShape&&this.mouseTracker.setTracking(!this.readOnly)},this.onKeyUp=Kt=>{Kt.which===16&&!this.tools.current.isDrawing&&this.mouseTracker.setTracking(!1)},document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}),Bt(this,"_initMouseEvents",()=>{let Ht=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom;this.svg.addEventListener("mousemove",ln=>{var wn,Dn;if(!((wn=this.tools)!=null&&wn.current.isDrawing)&&!ln.target.closest(".a9s-annotation.editable.selected")){const Fn=this._getShapeAt(ln);if((Fn==null?void 0:Fn.annotation)!==((Dn=this.hoveredShape)==null?void 0:Dn.annotation)){if(this.hoveredShape){this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=Ht;const Rn=this.hoveredShape.element||this.hoveredShape;Vx(Rn,"hover"),this.emit("mouseLeaveAnnotation",this.hoveredShape.annotation,this.hoveredShape)}Fn&&(Ht=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom,this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=!1,bp(Fn,"hover"),this.emit("mouseEnterAnnotation",Fn.annotation,Fn))}this.hoveredShape=Fn}});let Ut=null;new Jt.default.MouseTracker({element:this.viewer.canvas,pressHandler:()=>{Ut=new Date().getTime()}}),this.svg.addEventListener("mousedown",()=>{Ut=new Date().getTime()});const Kt=ln=>{var wn;if(!(((wn=this.tools.current)==null?void 0:wn.isDrawing)||this.disableSelect)&&new Date().getTime()-Ut<250){const Dn=ln.target.closest(".a9s-annotation.editable.selected")?this.selectedShape:this._getShapeAt(ln);Dn?this.selectShape(Dn):Dn||(this.deselect(),this.emit("select",{}))}this.disableSelect&&this.emit("clickAnnotation",this.hoveredShape.annotation,this.hoveredShape)};this.svg.addEventListener("click",Kt),this.svg.addEventListener("touchstart",Kt)}),Bt(this,"_refreshNonScalingAnnotations",()=>{const Ht=this.currentScale();Array.from(this.svg.querySelectorAll(".a9s-non-scaling")).forEach(Ut=>Ut.setAttribute("transform",`scale(${1/Ht})`))}),Bt(this,"addAnnotation",(Ht,Ut)=>{const Kt=Ut||this.g,ln=F_(Ht,this.env.image);return bp(ln,"a9s-annotation"),ln.setAttribute("data-id",Ht.id),ln.annotation=Ht,Kt.appendChild(ln),uv(ln,Ht,this.formatter),this.scaleFormatterElements(ln),ln}),Bt(this,"addDrawingTool",Ht=>this.tools.registerTool(Ht)),Bt(this,"addOrUpdateAnnotation",(Ht,Ut)=>{var Kt,ln;(((Kt=this.selectedShape)==null?void 0:Kt.annotation)===Ht||((ln=this.selectedShape)==null?void 0:ln.annotation)==Ut)&&this.deselect(),Ut&&this.removeAnnotation(Ht),this.removeAnnotation(Ht);const wn=this.addAnnotation(Ht);L_(wn,"a9s-non-scaling")&&wn.setAttribute("transform",`scale(${1/this.currentScale()})`),this.store.insert(Ht)}),Bt(this,"currentScale",()=>{const Ht=this.viewer.viewport.getContainerSize().x;return this.viewer.viewport.getZoom(!0)*Ht/this.viewer.world.getContentFactor()}),Bt(this,"deselect",()=>{var Ht;if((Ht=this.tools)==null||Ht.current.stop(),this.selectedShape){const{annotation:Ut}=this.selectedShape;if(this.selectedShape.destroy&&(this.selectedShape.mouseTracker.destroy(),this.selectedShape.destroy(),!Ut.isSelection)){const Kt=this.addAnnotation(Ut);L_(Kt,"a9s-non-scaling")&&Kt.setAttribute("transform",`scale(${1/this.currentScale()})`)}this.selectedShape=null}}),Bt(this,"destroy",()=>{this.deselect(),this.svg.parentNode.removeChild(this.svg)}),Bt(this,"findShape",Ht=>{const Ut=Ht!=null&&Ht.id?Ht.id:Ht;return this.g.querySelector(`.a9s-annotation[data-id="${Ut}"]`)}),Bt(this,"fitBounds",(Ht,Ut)=>{const Kt=this.findShape(Ht);if(Kt){const{x:ln,y:wn,width:Dn,height:Fn}=Kt.getBBox(),Rn=this.viewer.viewport.imageToViewportRectangle(ln,wn,Dn,Fn);this.viewer.viewport.fitBounds(Rn,Ut)}}),Bt(this,"getAnnotations",()=>Array.from(this.g.querySelectorAll(".a9s-annotation")).map(Ht=>Ht.annotation)),Bt(this,"getSelectedImageSnippet",()=>{var Ht;if(this.selectedShape){const Ut=(Ht=this.selectedShape.element)!=null?Ht:this.selectedShape;return bw(this.viewer,Ut)}}),Bt(this,"init",Ht=>{this.deselect(),Array.from(this.g.querySelectorAll(".a9s-annotation")).forEach(Ut=>this.g.removeChild(Ut)),console.time("Took"),console.log("Drawing..."),this.loaded||(this.g.style.display="none"),Ht.forEach(Ut=>this.addAnnotation(Ut)),console.log("Indexing..."),this.store.insert(Ht),console.timeEnd("Took"),this.resize()}),Bt(this,"listDrawingTools",()=>this.tools.listTools()),Bt(this,"overrideId",(Ht,Ut)=>{const Kt=this.findShape(Ht);Kt.setAttribute("data-id",Ut);const{annotation:ln}=Kt,wn=ln.clone({id:Ut});return Kt.annotation=wn,this.store.remove(ln),this.store.insert(wn),wn}),Bt(this,"panTo",(Ht,Ut)=>{const Kt=this.findShape(Ht);if(Kt){const{top:ln,left:wn,width:Dn,height:Fn}=Kt.getBoundingClientRect(),Rn=wn+Dn/2+window.scrollX,ur=ln+Fn/2+window.scrollY,Ar=this.viewer.viewport.windowToViewportCoordinates(new Jt.default.Point(Rn,ur));this.viewer.viewport.panTo(Ar,Ut)}}),Bt(this,"removeAnnotation",Ht=>{var Ut,Kt;const ln=Ht.type?Ht.id:Ht;((Ut=this.selectedShape)==null?void 0:Ut.annotation.id)===ln&&this.deselect();const wn=this.findShape(Ht);if(wn){const{annotation:Dn}=wn;((Kt=this.selectedShape)==null?void 0:Kt.annotation)===Dn&&this.deselect(),wn.parentNode.removeChild(wn),this.store.remove(Dn)}}),Bt(this,"removeDrawingTool",Ht=>{var Ut;return(Ut=this.tools)==null?void 0:Ut.unregisterTool(Ht)}),Bt(this,"scaleFormatterElements",Ht=>{const Ut=1/this.currentScale();if(Ht){const Kt=Ht.querySelector(".a9s-formatter-el");Kt&&Kt.firstChild.setAttribute("transform",`scale(${Ut})`)}else Array.from(this.g.querySelectorAll(".a9s-formatter-el")).forEach(Kt=>Kt.firstChild.setAttribute("transform",`scale(${Ut})`))}),Bt(this,"scaleTool",Ht=>{if(Ht){const Ut=1/this.currentScale();Ht.scale=Ut,Ht.onScaleChanged&&Ht.onScaleChanged(Ut)}}),Bt(this,"selectAnnotation",(Ht,Ut)=>{this.selectedShape&&this.deselect();const Kt=this.findShape(Ht);if(Kt){this.selectShape(Kt,Ut);const ln=this.selectedShape.element?this.selectedShape.element:this.selectedShape;return{annotation:Kt.annotation,element:ln}}else this.deselect()}),Bt(this,"selectShape",(Ht,Ut)=>{var Kt;if(!Ut&&!Ht.annotation.isSelection&&this.emit("clickAnnotation",Ht.annotation,Ht),((Kt=this.selectedShape)==null?void 0:Kt.annotation)===Ht.annotation)return;this.selectedShape&&this.selectedShape.annotation!==Ht.annotation&&this.deselect();const{annotation:ln}=Ht;if(this.readOnly||ln.readOnly||this.headless)this.selectedShape=Ht,Ut||this.emit("select",{annotation:ln,element:Ht,skipEvent:Ut});else{const wn=this.tools.forAnnotation(ln);if(wn){setTimeout(()=>{Ht.parentNode.removeChild(Ht),Ut||this.emit("select",{annotation:ln,element:this.selectedShape.element})},1),this.selectedShape=wn.createEditableShape(ln),this.scaleTool(this.selectedShape),this.scaleFormatterElements(this.selectedShape.element),this.selectedShape.element.annotation=ln;const Dn=new Jt.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",()=>{this.hoveredShape=this.selectedShape,Dn.setTracking(!0)}),this.selectedShape.element.addEventListener("mouseleave",()=>{this.hoveredShape=null,Dn.setTracking(!1)}),this.selectedShape.mouseTracker=Dn,this.selectedShape.on("update",Fn=>this.emit("updateTarget",this.selectedShape.element,Fn))}else this.selectedShape=Ht,Ut||this.emit("select",{annotation:ln,element:this.selectedShape})}}),Bt(this,"setDrawingEnabled",Ht=>{var Ut;return(Ut=this.mouseTracker)==null?void 0:Ut.setTracking(Ht&&!this.readOnly)}),Bt(this,"setDrawingTool",Ht=>{var Ut;this.tools&&((Ut=this.tools.current)==null||Ut.stop(),this.tools.setCurrent(Ht))}),Bt(this,"setVisible",Ht=>{Ht?this.svg.style.display=null:(this.deselect(),this.svg.style.display="none")}),Bt(this,"stopDrawing",()=>{var Ht,Ut;return(Ut=(Ht=this.tools)==null?void 0:Ht.current)==null?void 0:Ut.stop()}),this.viewer=$t.viewer,this.config=$t.config,this.env=$t.env,this.readOnly=$t.config.readOnly,this.headless=$t.config.headless,this.formatter=$t.config.formatter,this.disableSelect=$t.disableSelect,this.drawOnSingleClick=$t.config.drawOnSingleClick,this.svg=document.createElementNS(Ks,"svg"),xw?(this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),Yx(this.svg)):this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),this.g=document.createElementNS(Ks,"g"),this.svg.appendChild(this.g),this.viewer.canvas.appendChild(this.svg),this.viewer.addHandler("animation",()=>this.resize()),this.viewer.addHandler("rotate",()=>this.resize()),this.viewer.addHandler("resize",()=>this.resize()),this.viewer.addHandler("flip",()=>this.resize()),this.loaded=!1;const zt=()=>{const{x:Ht,y:Ut}=this.viewer.world.getItemAt(0).source.dimensions;this.env.image={src:this.viewer.world.getItemAt(0).source["@id"]||new URL(this.viewer.world.getItemAt(0).source.url,document.baseURI).href,naturalWidth:Ht,naturalHeight:Ut},$t.config.crosshair&&(this.crosshair=new lw(this.g,Ht,Ut),bp(this.svg,"has-crosshair")),this.loaded=!0,this.g.style.display="inline",this.resize()};this.viewer.addHandler("open",zt),this.viewer.world.addHandler("add-item",zt),this.viewer.world.getItemAt(0)&&zt(),this.store=new _w(this.env),this.selectedShape=null,this.hoveredShape=null,this._initMouseEvents()}resize(){var $t;const zt=this.viewer.viewport.getFlip(),Ht=this.viewer.viewport.pixelFromPoint(new Jt.default.Point(0,0),!0);zt&&(Ht.x=this.viewer.viewport._containerInnerSize.x-Ht.x);const Ut=this.currentScale(),Kt=zt?-Ut:Ut,ln=this.viewer.viewport.getRotation();this.g.setAttribute("transform",`translate(${Ht.x}, ${Ht.y}) scale(${Kt}, ${Ut}) rotate(${ln})`),this._refreshNonScalingAnnotations(),this.scaleFormatterElements(),this.selectedShape&&(this.selectedShape.element?(this.scaleTool(this.selectedShape),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape)),($t=this.tools)!=null&&$t.current.isDrawing&&this.scaleTool(this.tools.current)}}class ww extends Ub{constructor($t){super($t),Bt(this,"onDrawingComplete",zt=>{this.selectShape(zt),this.emit("createSelection",zt.annotation),this.mouseTracker.setTracking(!1)}),this._initDrawingTools()}}const V_=It=>{const $t=It.viewport.viewportToImageRectangle(It.viewport.getBounds(!0)),zt=It.viewport.getContainerSize().x,Ht=It.viewport.getZoom(!0)*zt/It.world.getContentFactor();return{extent:$t,scale:Ht}},Ew=It=>{var $t;const zt=It.targets[0];return zt?Array.isArray(zt.selector)?zt.selector[0].type:($t=zt.selector)==null?void 0:$t.type:null},Gb=(It,$t)=>{const{extent:zt,scale:Ht}=V_(It),{selector:Ut}=$t,Kt=Cg.create({target:$t});if(Ut.type==="SvgSelector"){const ln=$m(Kt),wn=ln.nodeName.toLowerCase();let Dn=null;if(wn==="polygon")Dn=Sw(ln,zt,Ht);else if(wn==="circle")Dn=Cw(ln,zt,Ht);else if(wn==="ellipse")Dn=Tw(ln,zt,Ht);else if(wn==="path")Dn=kw(ln,zt,Ht);else throw`Unsupported SVG shape type: ${wn}`;let Fn=Dn.outerHTML||new XMLSerializer().serializeToString(Dn);return Fn=Fn.replace(` xmlns="${Ks}"`,""),Rt(Ot({},$t),{selector:{type:"SvgSelector",value:`<svg>${Fn}</svg>`}})}else if(Ut.type==="FragmentSelector"){const{x:ln,y:wn,w:Dn,h:Fn}=Tg(Kt),Rn=zt.x+ln/Ht,ur=zt.y+wn/Ht,Ar=Dn/Ht,Br=Fn/Ht;return h1(Rn,ur,Ar,Br)}else throw`Unsupported selector type: ${Ut.type}`},Sw=(It,$t,zt)=>{const Ht=Array.from(It.points).map(Ut=>{const Kt=$t.x+Ut.x/zt,ln=$t.y+Ut.y/zt;return Kt+","+ln}).join(" ");return It.setAttribute("points",Ht),It},Cw=(It,$t,zt)=>{const Ht=parseFloat(It.getAttribute("cx")),Ut=parseFloat(It.getAttribute("cy")),Kt=parseFloat(It.getAttribute("r"));return It.setAttribute("cx",$t.x+Ht/zt),It.setAttribute("cy",$t.y+Ut/zt),It.setAttribute("r",Kt/zt),It},Tw=(It,$t,zt)=>{const Ht=parseFloat(It.getAttribute("cx")),Ut=parseFloat(It.getAttribute("cy")),Kt=parseFloat(It.getAttribute("rx")),ln=parseFloat(It.getAttribute("ry"));return It.setAttribute("cx",$t.x+Ht/zt),It.setAttribute("cy",$t.y+Ut/zt),It.setAttribute("rx",Kt/zt),It.setAttribute("ry",ln/zt),It},kw=(It,$t,zt)=>{const Ht=It.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Kt=Ut.substring(0,1);if(Kt.toLowerCase()==="z")return Kt;{const ln=Ut.substring(1).split(" ").map(Rn=>parseFloat(Rn.trim())),wn=Kt===Kt.toUpperCase(),Dn=wn?$t.x+ln[0]/zt:ln[0]/zt,Fn=wn?$t.y+ln[1]/zt:ln[1]/zt;return Kt+" "+Dn+" "+Fn}}).join(" ");return It.setAttribute("d",Ht),It},Wb=(It,$t)=>{const{extent:zt,scale:Ht}=V_(It),Ut=$t.selector("FragmentSelector");if($t.selector("SvgSelector")){const Kt=$m($t),ln=Kt.nodeName.toLowerCase();let wn=null;if(ln==="polygon")wn=Aw(Kt,zt,Ht);else if(ln==="circle")wn=Lw(Kt,zt,Ht);else if(ln==="ellipse")wn=Iw(Kt,zt,Ht);else if(ln==="path")wn=Pw(Kt,zt,Ht);else throw`Unsupported SVG shape type: ${ln}`;let Dn=wn.outerHTML||new XMLSerializer().serializeToString(wn);Dn=Dn.replace(` xmlns="${Ks}"`,"");const Fn={selector:{type:"SvgSelector",value:`<svg>${Dn}</svg>`}};return $t.clone({target:Fn})}else if(Ut){const{x:Kt,y:ln,w:wn,h:Dn}=Tg($t),Fn=(Kt-zt.x)*Ht,Rn=(ln-zt.y)*Ht,ur=h1(Fn,Rn,wn*Ht,Dn*Ht);return $t.clone({target:ur})}},Aw=(It,$t,zt)=>{const Ht=Array.from(It.points).map(Ut=>{const Kt=zt*(Ut.x-$t.x),ln=zt*(Ut.y-$t.y);return Kt+","+ln}).join(" ");return It.setAttribute("points",Ht),It},Lw=(It,$t,zt)=>{const Ht=It.getAttribute("cx"),Ut=It.getAttribute("cy"),Kt=It.getAttribute("r");return It.setAttribute("cx",zt*(Ht-$t.x)),It.setAttribute("cy",zt*(Ut-$t.y)),It.setAttribute("r",Kt*zt),It},Iw=(It,$t,zt)=>{const Ht=It.getAttribute("cx"),Ut=It.getAttribute("cy"),Kt=It.getAttribute("rx"),ln=It.getAttribute("ry");return It.setAttribute("cx",zt*(Ht-$t.x)),It.setAttribute("cy",zt*(Ut-$t.y)),It.setAttribute("rx",Kt*zt),It.setAttribute("ry",ln*zt),It},Pw=(It,$t,zt)=>{const Ht=It.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Kt=Ut.substring(0,1);if(Kt.toLowerCase()==="z")return Kt;{const ln=Ut.substring(1).split(" ").filter(Rn=>Rn).map(Rn=>parseFloat(Rn.trim())),wn=Kt===Kt.toUpperCase(),Dn=wn?zt*(ln[0]-$t.x):zt*ln[0],Fn=wn?zt*(ln[1]-$t.y):zt*ln[1];return Kt+" "+Dn+" "+Fn}}).join(" ");return It.setAttribute("d",Ht),It},qb=(It,$t)=>{const{extent:zt,scale:Ht}=V_(It),Ut=Ew($t.annotation);if(Ut==="FragmentSelector")Ow($t,zt,Ht);else if(Ut==="SvgSelector")Mw($t,zt,Ht);else throw`Unsupported selector type type: ${Ut}`},Ow=(It,$t,zt)=>{const{x:Ht,y:Ut,w:Kt,h:ln}=Tg(It.annotation),wn=It.querySelector(".a9s-outer"),Dn=It.querySelector(".a9s-inner"),Fn=zt*(Ht-$t.x),Rn=zt*(Ut-$t.y);Kt===0&&ln===0?[wn,Dn].forEach(ur=>{ur.setAttribute("cx",Fn),ur.setAttribute("cy",Rn)}):[wn,Dn].forEach(ur=>{ur.setAttribute("x",Fn),ur.setAttribute("y",Rn),ur.setAttribute("width",Kt*zt),ur.setAttribute("height",ln*zt)})},Mw=(It,$t,zt)=>{const Ht=$m(It.annotation),Ut=Ht.nodeName.toLowerCase();if(Ut==="polygon")$w(It,Ht,$t,zt);else if(Ut==="circle")Rw(It,Ht,$t,zt);else if(Ut==="ellipse")Nw(It,Ht,$t,zt);else if(Ut==="path")Dw(It,Ht,$t,zt);else throw`Unsupported SVG shape type: ${Ut}`},$w=(It,$t,zt,Ht)=>{const Ut=Array.from($t.points).map(Kt=>{const ln=Ht*(Kt.x-zt.x),wn=Ht*(Kt.y-zt.y);return ln+","+wn}).join(" ");It.querySelector(".a9s-outer").setAttribute("points",Ut),It.querySelector(".a9s-inner").setAttribute("points",Ut)},Rw=(It,$t,zt,Ht)=>{const Ut=Ht*($t.getAttribute("cx")-zt.x),Kt=Ht*($t.getAttribute("cy")-zt.y),ln=Ht*$t.getAttribute("r"),wn=It.querySelector(".a9s-outer");wn.setAttribute("cx",Ut),wn.setAttribute("cy",Kt),wn.setAttribute("r",ln);const Dn=It.querySelector(".a9s-inner");Dn.setAttribute("cx",Ut),Dn.setAttribute("cy",Kt),Dn.setAttribute("r",ln)},Nw=(It,$t,zt,Ht)=>{const Ut=Ht*($t.getAttribute("cx")-zt.x),Kt=Ht*($t.getAttribute("cy")-zt.y),ln=Ht*$t.getAttribute("rx"),wn=Ht*$t.getAttribute("ry"),Dn=It.querySelector(".a9s-outer");Dn.setAttribute("cx",Ut),Dn.setAttribute("cy",Kt),Dn.setAttribute("rx",ln),Dn.setAttribute("ry",wn);const Fn=It.querySelector(".a9s-inner");Fn.setAttribute("cx",Ut),Fn.setAttribute("cy",Kt),Fn.setAttribute("rx",ln),Fn.setAttribute("ry",wn)},Dw=(It,$t,zt,Ht)=>{const Ut=$t.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Kt=>Kt.trim()).map(Kt=>{const ln=Kt.substring(0,1);if(ln.toLowerCase()==="z")return ln;{const wn=Kt.substring(1).split(" ").filter(ur=>ur).map(ur=>parseFloat(ur.trim())),Dn=ln===ln.toUpperCase(),Fn=Dn?Ht*(wn[0]-zt.x):Ht*wn[0],Rn=Dn?Ht*(wn[1]-zt.y):Ht*wn[1];return ln+" "+Fn+" "+Rn}}).join(" ");It.querySelector(".a9s-inner").setAttribute("d",Ut),It.querySelector(".a9s-outer").setAttribute("d",Ut)},Bw=M_();class Fw extends Ub{constructor($t){super($t),Bt(this,"onDrawingComplete",zt=>{const Ht=zt.annotation.clone({target:Gb(this.viewer,zt.annotation.target)});zt.annotation=Ht,this.selectShape(zt),this.emit("createSelection",zt.annotation),this.mouseTracker.setTracking(!1)}),Bt(this,"addAnnotation",(zt,Ht)=>{const Ut=Ht||this.g,Kt=F_(zt,this.env.image);return bp(Kt,"a9s-annotation"),Kt.setAttribute("data-id",zt.id),Kt.annotation=zt,qb(this.viewer,Kt),Ut.appendChild(Kt),uv(Kt,zt,this.formatter),Kt}),Bt(this,"_getShapeAt",zt=>{const Ht=Dn=>{if(Bw){const Fn=this.svg.getBoundingClientRect(),Rn=Dn.clientX-Fn.x,ur=Dn.clientY-Fn.y;return new Jt.default.Point(Rn,ur)}else return new Jt.default.Point(Dn.offsetX,Dn.offsetY)},Ut=this.viewer.viewport.viewerElementToViewportCoordinates(Ht(zt)),{x:Kt,y:ln}=this.viewer.viewport.viewportToImageCoordinates(Ut.x,Ut.y),wn=this.store.getAnnotationAt(Kt,ln,this.currentScale());if(wn)return this.findShape(wn)}),Bt(this,"selectShape",(zt,Ht)=>{var Ut;if(!Ht&&!zt.annotation.isSelection&&this.emit("clickAnnotation",zt.annotation,zt),((Ut=this.selectedShape)==null?void 0:Ut.annotation)===zt.annotation)return;this.selectedShape&&this.selectedShape.annotation!==zt.annotation&&this.deselect(!0);const{annotation:Kt}=zt;if(this.readOnly||Kt.readOnly||this.headless)this.selectedShape=zt,Ht||this.emit("select",{annotation:Kt,element:zt,skipEvent:Ht});else{setTimeout(()=>{zt.parentNode.removeChild(zt),Ht||this.emit("select",{annotation:Kt,element:this.selectedShape.element})},1);const ln=this.tools.forAnnotation(Kt);this.selectedShape=ln.createEditableShape(Kt),this.selectedShape.element.annotation=Kt;const wn=Wb(this.viewer,Kt);this.selectedShape.updateState(wn);const Dn=new Jt.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",Fn=>Dn.setTracking(!0)),this.selectedShape.element.addEventListener("mouseleave",Fn=>Dn.setTracking(!1)),this.selectedShape.mouseTracker=Dn,this.selectedShape.on("update",Fn=>{const Rn=Gb(this.viewer,Fn);this.selectedShape.element.annotation=this.selectedShape.annotation.clone({target:Rn}),this.emit("updateTarget",this.selectedShape.element,Rn)})}}),this._initDrawingTools(!0)}resize(){const $t=this.viewer.viewport.getBounds(!0),{x:zt,y:Ht,width:Ut,height:Kt}=this.viewer.viewport.viewportToImageRectangle($t),ln={minX:zt,minY:Ht,maxX:zt+Ut,maxY:Ht+Kt},wn=new Set(this.store.getAnnotationsIntersecting(ln).map(Dn=>Dn.id));if(wn.size>0&&Array.from(this.g.querySelectorAll(".a9s-annotation:not(.selected)")).forEach(Dn=>{wn.has(Dn.annotation.id)?(Dn.removeAttribute("visibility"),qb(this.viewer,Dn)):Dn.hasAttribute("visibility")||Dn.setAttribute("visibility","hidden")}),this.selectedShape)if(this.selectedShape.element){const Dn=Wb(this.viewer,this.selectedShape.element.annotation);this.selectedShape.updateState&&this.selectedShape.updateState(Dn),this.emit("viewportChange",this.selectedShape.element)}else this.emit("viewportChange",this.selectedShape)}}class zw extends vn{constructor($t){super($t),Bt(this,"clearState",zt=>this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},zt)),Bt(this,"forwardEvent",(zt,Ht)=>{this.annotationLayer.on(zt,(Ut,Kt)=>{this.props[Ht](Ut.clone(),Kt)})}),Bt(this,"escapeKeyCancel",zt=>{if(zt.which===27){this.annotationLayer.stopDrawing();const{selectedAnnotation:Ht}=this.state;Ht&&(this.cancelSelected(),this.props.onCancelSelected(Ht))}}),Bt(this,"handleStartSelect",zt=>this.props.onSelectionStarted(zt)),Bt(this,"handleSelect",(zt,Ht)=>{this.state.editorDisabled?this.onHeadlessSelect(zt,Ht):this.onNormalSelect(zt,Ht)}),Bt(this,"onNormalSelect",(zt,Ht)=>{const{annotation:Ut,element:Kt}=zt;if(Ut){const ln=()=>{this.setState({selectedAnnotation:Ut,selectedDOMElement:Kt,modifiedTarget:null},()=>{Ht||(Ut.isSelection?this.props.onSelectionCreated(Ut.clone()):this.props.onAnnotationSelected(Ut.clone(),Kt))})},{selectedAnnotation:wn}=this.state;wn&&!wn.isEqual(Ut)?this.clearState(()=>{this.props.onCancelSelected(wn),ln()}):ln()}else{const{selectedAnnotation:ln}=this.state;ln?this.clearState(()=>this.props.onCancelSelected(ln)):this.clearState()}}),Bt(this,"onHeadlessSelect",(zt,Ht)=>{this.saveSelected().then(()=>{this.onNormalSelect(zt,Ht)})}),Bt(this,"handleUpdateTarget",(zt,Ht)=>{this.setState({selectedDOMElement:zt,modifiedTarget:Ht});const Ut=JSON.parse(JSON.stringify(Ht));this.props.onSelectionTargetChanged(Ut)}),Bt(this,"handleViewportChange",zt=>this.setState({selectedDOMElement:zt})),Bt(this,"overrideAnnotationId",zt=>Ht=>{const{id:Ut}=zt;this.state.selectedAnnotation?this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},()=>{this.annotationLayer.overrideId(Ut,Ht)}):this.annotationLayer.overrideId(Ut,Ht)}),Bt(this,"onCreateOrUpdateAnnotation",(zt,Ht)=>(Ut,Kt)=>{let ln=Ut.isSelection?Ut.toAnnotation():Ut;ln=this.state.modifiedTarget?ln.clone({target:this.state.modifiedTarget}):ln.clone(),this.clearState(()=>{this.annotationLayer.deselect(),this.annotationLayer.addOrUpdateAnnotation(ln,Kt),Kt?this.props[zt](ln,Kt.clone()):this.props[zt](ln,this.overrideAnnotationId(Ut)),Ht&&Ht()})}),Bt(this,"onDeleteAnnotation",zt=>{this.clearState(),this.annotationLayer.removeAnnotation(zt),this.props.onAnnotationDeleted(zt)}),Bt(this,"onCancelAnnotation",(zt,Ht)=>{this.state.editorDisabled||this.annotationLayer.deselect(),this.props.onCancelSelected(zt),this.clearState(Ht)}),Bt(this,"addAnnotation",zt=>{var Ht;zt.id===((Ht=this.state.selectedAnnotation)==null?void 0:Ht.id)&&(this.annotationLayer.deselect(),this.clearState()),this.annotationLayer.addOrUpdateAnnotation(zt.clone())}),Bt(this,"addDrawingTool",zt=>this.annotationLayer.addDrawingTool(zt)),Bt(this,"cancelSelected",()=>new Promise(zt=>{this.annotationLayer.deselect(),this.state.selectedAnnotation?this.clearState(zt):zt()})),Bt(this,"fitBounds",(zt,Ht)=>this.annotationLayer.fitBounds(zt,Ht)),Bt(this,"getAnnotationById",zt=>{var Ht;return(Ht=this.annotationLayer.findShape(zt))==null?void 0:Ht.annotation}),Bt(this,"getAnnotations",()=>this.annotationLayer.getAnnotations().map(zt=>zt.clone())),Bt(this,"getSelected",()=>{var zt;if(this.state.selectedAnnotation)return this.state.editorDisabled?this.state.selectedAnnotation:(zt=this._editor.current)==null?void 0:zt.getCurrentAnnotation()}),Bt(this,"getSelectedImageSnippet",()=>this.annotationLayer.getSelectedImageSnippet()),Bt(this,"listDrawingTools",()=>this.annotationLayer.listDrawingTools()),Bt(this,"panTo",(zt,Ht)=>this.annotationLayer.panTo(zt,Ht)),Bt(this,"removeAnnotation",zt=>this.annotationLayer.removeAnnotation(zt)),Bt(this,"removeDrawingTool",zt=>this.annotationLayer.removeDrawingTool(zt)),Bt(this,"saveSelected",()=>new Promise(zt=>{const Ht=this.state.selectedAnnotation;if(Ht)if(Ht.isSelection)Ht.bodies.length>0||this.props.config.allowEmpty?this.onCreateOrUpdateAnnotation("onAnnotationCreated",zt)(Ht,Ht):(this.annotationLayer.deselect(),zt());else{const{beforeHeadlessModify:Ut,modifiedTarget:Kt}=this.state;Ut?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",zt)(Ht,Ut):Kt?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",zt)(Ht,Ht):this.onCancelAnnotation(Ht,zt)}else zt()})),Bt(this,"selectAnnotation",zt=>{const Ht=this.annotationLayer.selectAnnotation(zt,!0);if(Ht)return this.handleSelect(Ht,!0),Ht.annotation.clone();this.clearState()}),Bt(this,"setAnnotations",zt=>this.annotationLayer.init(zt.map(Ht=>Ht.clone()))),Bt(this,"setDrawingEnabled",zt=>this.annotationLayer.setDrawingEnabled(zt)),Bt(this,"setDrawingTool",zt=>this.annotationLayer.setDrawingTool(zt)),Bt(this,"setVisible",zt=>{this.annotationLayer.setVisible(zt),zt||this.clearState()}),Bt(this,"updateSelected",(zt,Ht)=>new Promise(Ut=>{this.state.selectedAnnotation&&(Ht?this.state.selectedAnnotation.isSelection?this.onCreateOrUpdateAnnotation("onAnnotationCreated",Ut)(zt):this.onCreateOrUpdateAnnotation("onAnnotationUpdated",Ut)(zt,this.state.selectedAnnotation):this.setState({selectedAnnotation:zt,beforeHeadlessModify:this.state.beforeHeadlessModify||this.state.selectedAnnotation},Ut))})),this.state={selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:$t.config.readOnly,editorDisabled:$t.config.disableEditor,widgets:$t.config.widgets,beforeHeadlessModify:null},this._editor=Fi.createRef()}componentDidMount(){this.annotationLayer=this.props.config.gigapixelMode?new Fw(this.props):new ww(this.props),this.annotationLayer.on("startSelection",this.handleStartSelect),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.forwardEvent("mouseEnterAnnotation","onMouseEnterAnnotation"),this.forwardEvent("mouseLeaveAnnotation","onMouseLeaveAnnotation"),this.forwardEvent("clickAnnotation","onClickAnnotation"),document.addEventListener("keyup",this.escapeKeyCancel)}componentWillUnmount(){this.annotationLayer.destroy(),document.removeEventListener("keyup",this.escapeKeyCancel)}get disableEditor(){return this.state.editorDisabled}set disableEditor($t){this.setState({editorDisabled:$t},()=>{$t?document.addEventListener("keyup",this.escapeKeyCancel):document.removeEventListener("keyup",this.escapeKeyCancel)})}get disableSelect(){return this.annotationLayer.disableSelect}set disableSelect($t){this.annotationLayer.disableSelect=$t}get readOnly(){return this.state.readOnly}set readOnly($t){this.annotationLayer.readOnly=$t,this.setState({readOnly:$t})}get widgets(){return this.state.widgets}set widgets($t){this.setState({widgets:$t})}render(){var $t;const zt=this.state.selectedAnnotation&&!this.state.editorDisabled,Ht=this.state.readOnly||(($t=this.state.selectedAnnotation)==null?void 0:$t.readOnly);return zt&&pn(Mx,{ref:this._editor,detachable:!0,wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:Ht,allowEmpty:this.props.config.allowEmpty,widgets:this.state.widgets,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}class Hw{constructor($t,zt){Bt(this,"handleAnnotationCreated",(Ut,Kt)=>this._emitter.emit("createAnnotation",Ut.underlying,Kt)),Bt(this,"handleAnnotationDeleted",Ut=>this._emitter.emit("deleteAnnotation",Ut.underlying)),Bt(this,"handleAnnotationSelected",(Ut,Kt)=>this._emitter.emit("selectAnnotation",Ut.underlying,Kt)),Bt(this,"handleAnnotationUpdated",(Ut,Kt)=>this._emitter.emit("updateAnnotation",Ut.underlying,Kt.underlying)),Bt(this,"handleCancelSelected",Ut=>this._emitter.emit("cancelSelected",Ut.underlying)),Bt(this,"handleClickAnnotation",(Ut,Kt)=>this._emitter.emit("clickAnnotation",Ut.underlying,Kt)),Bt(this,"handleSelectionCreated",Ut=>this._emitter.emit("createSelection",Ut.underlying)),Bt(this,"handleSelectionStarted",Ut=>this._emitter.emit("startSelection",Ut)),Bt(this,"handleSelectionTargetChanged",Ut=>this._emitter.emit("changeSelectionTarget",Ut)),Bt(this,"handleMouseEnterAnnotation",(Ut,Kt)=>this._emitter.emit("mouseEnterAnnotation",Ut.underlying,Kt)),Bt(this,"handleMouseLeaveAnnotation",(Ut,Kt)=>this._emitter.emit("mouseLeaveAnnotation",Ut.underlying,Kt)),Bt(this,"_wrap",Ut=>(Ut==null?void 0:Ut.type)==="Annotation"?new Cg(Ut):Ut),Bt(this,"addAnnotation",Ut=>this._app.current.addAnnotation(new Cg(Ut))),Bt(this,"addDrawingTool",Ut=>this._app.current.addDrawingTool(Ut)),Bt(this,"cancelSelected",()=>this._app.current.cancelSelected()),Bt(this,"clearAnnotations",()=>this.setAnnotations([])),Bt(this,"clearAuthInfo",()=>this._env.user=null),Bt(this,"destroy",()=>Fi.unmountComponentAtNode(this.appContainerEl)),Bt(this,"fitBounds",(Ut,Kt)=>this._app.current.fitBounds(this._wrap(Ut),Kt)),Bt(this,"getAnnotationById",Ut=>{const Kt=this._app.current.getAnnotationById(Ut);return Kt==null?void 0:Kt.underlying}),Bt(this,"getAnnotations",()=>this._app.current.getAnnotations().map(Ut=>Ut.underlying)),Bt(this,"getSelected",()=>{const Ut=this._app.current.getSelected();return Ut==null?void 0:Ut.underlying}),Bt(this,"getSelectedImageSnippet",()=>this._app.current.getSelectedImageSnippet()),Bt(this,"listDrawingTools",()=>this._app.current.listDrawingTools()),Bt(this,"loadAnnotations",Ut=>fetch(Ut).then(Kt=>Kt.json()).then(Kt=>(this.setAnnotations(Kt),Kt))),Bt(this,"off",(Ut,Kt)=>this._emitter.off(Ut,Kt)),Bt(this,"on",(Ut,Kt)=>this._emitter.on(Ut,Kt)),Bt(this,"once",(Ut,Kt)=>this._emitter.once(Ut,Kt)),Bt(this,"panTo",(Ut,Kt)=>this._app.current.panTo(this._wrap(Ut),Kt)),Bt(this,"removeAnnotation",Ut=>this._app.current.removeAnnotation(this._wrap(Ut))),Bt(this,"removeDrawingTool",Ut=>this._app.current.removeDrawingTool(Ut)),Bt(this,"saveSelected",()=>this._app.current.saveSelected()),Bt(this,"selectAnnotation",Ut=>{const Kt=this._app.current.selectAnnotation(this._wrap(Ut));return Kt==null?void 0:Kt.underlying}),Bt(this,"setAnnotations",Ut=>{const Kt=(Ut||[]).map(ln=>new Cg(ln));this._app.current.setAnnotations(Kt)}),Bt(this,"setAuthInfo",Ut=>this._env.user=Ut),Bt(this,"setDrawingEnabled",Ut=>this._app.current.setDrawingEnabled(Ut)),Bt(this,"setDrawingTool",Ut=>this._app.current.setDrawingTool(Ut)),Bt(this,"setServerTime",Ut=>this._env.setServerTime(Ut)),Bt(this,"setVisible",Ut=>this._app.current.setVisible(Ut)),Bt(this,"updateSelected",(Ut,Kt)=>{let ln=null;Ut.type==="Annotation"?ln=new Cg(Ut):Ut.type==="Selection"&&(ln=new u1(Ut.target,Ut.body)),ln&&this._app.current.updateSelected(ln,Kt)});const Ht=zt||{};this._app=Fi.createRef(),this._emitter=new jo,this._env=zx(),this._element=$t.element,window.getComputedStyle(this._element).getPropertyValue("position")==="static"&&(this._element.style.position="relative"),Hx(Ht.locale,Ht.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),Fi.render(pn(zw,{ref:this._app,viewer:$t,wrapperEl:this._element,config:Ht,env:this._env,onSelectionStarted:this.handleSelectionStarted,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onClickAnnotation:this.handleClickAnnotation,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}get disableEditor(){return this._app.current.disableEditor}set disableEditor($t){this._app.current.disableEditor=$t}get disableSelect(){return this._app.current.disableSelect}set disableSelect($t){this._app.current.disableSelect=$t}get readOnly(){return this._app.current.readOnly}set readOnly($t){this._app.current.readOnly=$t}get widgets(){return this._app.current.widgets}set widgets($t){this._app.current.widgets=$t}}var Vw=(It,$t)=>new Hw(It,$t);return Vw})})(openseadragonAnnotorious_min);const Annotorious=getDefaultExportFromCjs(openseadragonAnnotorious_min.exports);class Annotator{constructor(rt,it="",st=!0){$c(this,"ghClient");$c(this,"osd");$c(this,"base");$c(this,"acct");$c(this,"repo");$c(this,"ref","main");$c(this,"basePath");$c(this,"imageId","");$c(this,"sha","");$c(this,"annotorious");$c(this,"visible",!1);$c(this,"ghAuthToken","");$c(this,"selected",null);this.osd=rt,this.base=it;let[bt,wt,...Et]=this.base.split("/");this.acct=bt,this.repo=wt,this.basePath=Et.join("/"),this.annotorious=Annotorious(rt,{readOnly:!st}),this.annotorious.on("createAnnotation",async kt=>this.createAnnotation(kt)),this.annotorious.on("updateAnnotation",async kt=>this.updateAnnotation(kt)),this.annotorious.on("deleteAnnotation",async kt=>this.deleteAnnotation(kt)),this.annotorious.on("selectAnnotation",async kt=>this.onSelect(kt)),this.setVisible(!0),this.ghAuthToken=localStorage.getItem("gh-auth-token")||"",this.ghAuthToken&&(this.ghClient=new GithubClient(this.ghAuthToken))}async loadAnnotations(rt){this.imageId=rt,this.setVisible(!1);let it=[],st=await this.ghClient.getFile(this.acct,this.repo,`${this.basePath}/${this.imageId}.json`,this.ref);return st.content&&(it=JSON.parse(st.content),this.sha=st.sha),console.log(`Adding ${it.length} annotations`),this.annotorious.setAnnotations(it),this.annotorious.readOnly&&it.forEach(bt=>{let wt=this.annoEl(bt.id);wt&&(wt.addEventListener("mouseenter",()=>this.select(bt.id)),wt.addEventListener("mouseleave",()=>this.deselect()),wt.addEventListener("click",()=>navigator.clipboard.writeText(bt.id)))}),it}setVisible(rt){if(this.selected)this.deselect();else{this.visible=rt;let it=this.osd.element.querySelector(".a9s-annotationlayer");it&&(it.style.visibility=this.visible?"visible":"hidden"),Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(st=>st.style.visibility=this.visible?"visible":"hidden")}}toggleVisibility(rt){rt&&rt.stopPropagation(),this.setVisible(!this.visible)}onSelect(rt){this.selected=rt.id,navigator.clipboard&&navigator.clipboard.writeText(this.selected)}annoEl(rt){return this.osd.element.querySelector(`[data-id="${rt}"]`)}select(rt){var it;if(rt!==((it=this.selected)==null?void 0:it.id)){if(this.deselect(),this.selected=this.annotorious.selectAnnotation(rt),this.selected){let st=this.annoEl(rt);st&&(st.style.visibility="visible");let bt=this.osd.element.querySelector(".a9s-annotation.selected");bt&&(bt.style.visibility="visible")}}else this.deselect()}deselect(){Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(rt=>rt.style.visibility=this.visible?"visible":"hidden"),this.annotorious.selectAnnotation(),this.selected=void 0}async saveAnnotations(){let rt=JSON.stringify(this.annotorious.getAnnotations(),null,2);await this.ghClient.putFile(this.acct,this.repo,`${this.basePath}/${this.imageId}.json`,rt,this.ref,!1,this.sha)}async createAnnotation(rt){rt.id=sha256(rt.id).slice(0,8),rt.target.id=this.imageId,this.saveAnnotations(),navigator.clipboard&&navigator.clipboard.writeText(rt.id)}async updateAnnotation(rt){rt.target.id=this.imageId,this.saveAnnotations(),navigator.clipboard&&navigator.clipboard.writeText(rt.id)}async deleteAnnotation(rt){this.saveAnnotations()}}var badge_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-flex;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: max(12px, 0.75em);
    font-weight: var(--sl-font-weight-semibold);
    letter-spacing: var(--sl-letter-spacing-normal);
    line-height: 1;
    border-radius: var(--sl-border-radius-small);
    border: solid 1px var(--sl-color-neutral-0);
    white-space: nowrap;
    padding: 0.35em 0.6em;
    user-select: none;
    cursor: inherit;
  }

  /* Variant modifiers */
  .badge--primary {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--success {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--neutral {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--warning {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--danger {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /* Pill modifier */
  .badge--pill {
    border-radius: var(--sl-border-radius-pill);
  }

  /* Pulse modifier */
  .badge--pulse {
    animation: pulse 1.5s infinite;
  }

  .badge--pulse.badge--primary {
    --pulse-color: var(--sl-color-primary-600);
  }

  .badge--pulse.badge--success {
    --pulse-color: var(--sl-color-success-600);
  }

  .badge--pulse.badge--neutral {
    --pulse-color: var(--sl-color-neutral-600);
  }

  .badge--pulse.badge--warning {
    --pulse-color: var(--sl-color-warning-600);
  }

  .badge--pulse.badge--danger {
    --pulse-color: var(--sl-color-danger-600);
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--pulse-color);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }
`,SlBadge=class extends ShoelaceElement{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return y$2`
      <slot
        part="base"
        class=${o$1({badge:!0,"badge--primary":this.variant==="primary","badge--success":this.variant==="success","badge--neutral":this.variant==="neutral","badge--warning":this.variant==="warning","badge--danger":this.variant==="danger","badge--pill":this.pill,"badge--pulse":this.pulse})}
        role="status"
      ></slot>
    `}};SlBadge.styles=badge_styles_default;__decorateClass([e2$2({reflect:!0})],SlBadge.prototype,"variant",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlBadge.prototype,"pill",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlBadge.prototype,"pulse",2);SlBadge=__decorateClass([e$1("sl-badge")],SlBadge);var image_comparer_styles_default=i$4`
  ${component_styles_default}

  :host {
    --divider-width: 2px;
    --handle-size: 2.5rem;

    display: inline-block;
    position: relative;
  }

  .image-comparer {
    max-width: 100%;
    max-height: 100%;
    overflow: hidden;
  }

  .image-comparer__before,
  .image-comparer__after {
    display: block;
    pointer-events: none;
  }

  .image-comparer__before::slotted(img),
  .image-comparer__after::slotted(img),
  .image-comparer__before::slotted(svg),
  .image-comparer__after::slotted(svg) {
    display: block;
    max-width: 100% !important;
    height: auto;
  }

  .image-comparer__after {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
  }

  .image-comparer__divider {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    width: var(--divider-width);
    height: 100%;
    background-color: var(--sl-color-neutral-0);
    translate: calc(var(--divider-width) / -2);
    cursor: ew-resize;
  }

  .image-comparer__handle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: calc(50% - (var(--handle-size) / 2));
    width: var(--handle-size);
    height: var(--handle-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: var(--sl-border-radius-circle);
    font-size: calc(var(--handle-size) * 0.5);
    color: var(--sl-color-neutral-700);
    cursor: inherit;
    z-index: 10;
  }

  .image-comparer__handle:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }
`;function drag(nt,rt){function it(bt){const wt=nt.getBoundingClientRect(),Et=nt.ownerDocument.defaultView,kt=wt.left+Et.pageXOffset,Lt=wt.top+Et.pageYOffset,Ot=bt.pageX-kt,Rt=bt.pageY-Lt;rt!=null&&rt.onMove&&rt.onMove(Ot,Rt)}function st(){document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",st),rt!=null&&rt.onStop&&rt.onStop()}document.addEventListener("pointermove",it,{passive:!0}),document.addEventListener("pointerup",st),(rt==null?void 0:rt.initialEvent)instanceof PointerEvent&&it(rt.initialEvent)}function clamp(nt,rt,it){return nt<rt?rt:nt>it?it:nt}var i2=e$2(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t$2.ATTRIBUTE||nt.name!=="style"||((rt=nt.strings)===null||rt===void 0?void 0:rt.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(nt){return Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return st==null?rt:rt+`${it=it.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${st};`},"")}update(nt,[rt]){const{style:it}=nt.element;if(this.vt===void 0){this.vt=new Set;for(const st in rt)this.vt.add(st);return this.render(rt)}this.vt.forEach(st=>{rt[st]==null&&(this.vt.delete(st),st.includes("-")?it.removeProperty(st):it[st]="")});for(const st in rt){const bt=rt[st];bt!=null&&(this.vt.add(st),st.includes("-")?it.setProperty(st,bt):it[st]=bt)}return x$2}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlImageComparer=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.position=50}handleDrag(nt){const{width:rt}=this.base.getBoundingClientRect(),it=this.localize.dir()==="rtl";nt.preventDefault(),drag(this.base,{onMove:st=>{this.position=parseFloat(clamp(st/rt*100,0,100).toFixed(2)),it&&(this.position=100-this.position)},initialEvent:nt})}handleKeyDown(nt){const rt=this.localize.dir()==="ltr",it=this.localize.dir()==="rtl";if(["ArrowLeft","ArrowRight","Home","End"].includes(nt.key)){const st=nt.shiftKey?10:1;let bt=this.position;nt.preventDefault(),(rt&&nt.key==="ArrowLeft"||it&&nt.key==="ArrowRight")&&(bt-=st),(rt&&nt.key==="ArrowRight"||it&&nt.key==="ArrowLeft")&&(bt+=st),nt.key==="Home"&&(bt=0),nt.key==="End"&&(bt=100),bt=clamp(bt,0,100),this.position=bt}}handlePositionChange(){this.emit("sl-change")}render(){const nt=this.localize.dir()==="rtl";return y$2`
      <div
        part="base"
        id="image-comparer"
        class=${o$1({"image-comparer":!0,"image-comparer--rtl":nt})}
        @keydown=${this.handleKeyDown}
      >
        <div class="image-comparer__image">
          <slot name="before" part="before" class="image-comparer__before"></slot>

          <slot
            name="after"
            part="after"
            class="image-comparer__after"
            style=${i2({clipPath:nt?`inset(0 0 0 ${100-this.position}%)`:`inset(0 ${100-this.position}% 0 0)`})}
          ></slot>
        </div>

        <div
          part="divider"
          class="image-comparer__divider"
          style=${i2({left:nt?`${100-this.position}%`:`${this.position}%`})}
          @mousedown=${this.handleDrag}
          @touchstart=${this.handleDrag}
        >
          <slot
            name="handle"
            part="handle"
            class="image-comparer__handle"
            role="scrollbar"
            aria-valuenow=${this.position}
            aria-valuemin="0"
            aria-valuemax="100"
            aria-controls="image-comparer"
            tabindex="0"
          >
            <sl-icon library="system" name="grip-vertical"></sl-icon>
          </slot>
        </div>
      </div>
    `}};SlImageComparer.styles=image_comparer_styles_default;__decorateClass([i2$2(".image-comparer")],SlImageComparer.prototype,"base",2);__decorateClass([i2$2(".image-comparer__handle")],SlImageComparer.prototype,"handle",2);__decorateClass([e2$2({type:Number,reflect:!0})],SlImageComparer.prototype,"position",2);__decorateClass([watch("position",{waitUntilFirstUpdate:!0})],SlImageComparer.prototype,"handlePositionChange",1);SlImageComparer=__decorateClass([e$1("sl-image-comparer")],SlImageComparer);const _hoisted_1$c=["draggable"],_hoisted_2$a={id:"content"},_hoisted_3$9={key:0,class:"image-wrapper media-item"},_hoisted_4$8=["src"],_hoisted_5$6=["src"],_hoisted_6$5={key:2,id:"osd"},_hoisted_7$4=["manifest"],_hoisted_8$4=["manifest"],_hoisted_9$3={key:1},_hoisted_10$2=["draggable","onDragstart"],_hoisted_11$1=["data-id","src","onClick"],_hoisted_12$1=["src","onClick"],_hoisted_13$1=["manifest"],_hoisted_14$1={key:2},_hoisted_15$1=["slot","src","alt"],_hoisted_16$1={key:3,class:"media-item"},_hoisted_17$1={id:"html5-player",controls:""},_hoisted_18$1=["src","type"],_hoisted_19$1=["manifest"],_hoisted_20$1={key:4,class:"media-item"},_hoisted_21$1={key:0,id:"youtube-placeholder"},_hoisted_22$1={key:1,id:"ve-video-vimeo","data-vimeo-playsinline":"true"},_hoisted_23$1=["muted","autoplay","poster"],_hoisted_24$1=["src","type"],_hoisted_25$1=["manifest"],_hoisted_26$1=["total","current"],_hoisted_27$1={key:0,name:"chat-square",label:"Hide annotations"},_hoisted_28$1={key:1,name:"pencil",label:"Edit annotations"},_hoisted_29$1={key:2,variant:"danger",pill:""},_hoisted_30$1={key:0,name:"chat-square",label:"Hide annotations"},_hoisted_31$1={key:1,name:"chat-square-text",label:"Show annotations"},_hoisted_32$1={key:2,variant:"danger",pill:""},_hoisted_33$1=["innerHTML"],_hoisted_34$1=["innerHTML"],_hoisted_35={id:"media-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},_hoisted_36=["src"],_sfc_main$e=defineComponent({__name:"MediaViewer.ce",props:{manifest:{type:String},src:{type:String},seq:{type:Number,default:1},annoBase:{type:String},base:{type:String},region:{type:String},size:{type:String},rotation:{type:String},quality:{type:String},format:{type:String},options:{type:String},alt:{type:String},caption:{type:String},fit:{type:String},entities:{type:String},zoomOnScroll:{type:Boolean},noCaption:{type:Boolean},noInfoIcon:{type:Boolean},editable:{type:Boolean},static:{type:Boolean},grid:{type:Boolean},cards:{type:Boolean},compare:{type:Boolean},small:{type:Boolean},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String},autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!0},start:{type:Number},end:{type:Number},poster:{type:String},class:{type:String}},setup(nt){const rt=nt;function it(Rr,Qr){var ar;Qr.stopPropagation();let Dr=`https://iiif.juncture-digital.org/?manifest=${Rr.id}`;(ar=Qr.dataTransfer)==null||ar.setData("text/uri-list",Dr)}const st=ref(null),bt=computed(()=>{var Rr;return(Rr=st==null?void 0:st.value)==null?void 0:Rr.parentNode}),wt=computed(()=>{var Rr,Qr;return(Qr=(Rr=st.value)==null?void 0:Rr.getRootNode())==null?void 0:Qr.host}),Et=computed(()=>{var Rr;return(Rr=bt.value)==null?void 0:Rr.querySelector("#content")}),kt=computed(()=>{var Rr;return(Rr=bt.value)==null?void 0:Rr.querySelector("#outer")}),Lt=computed(()=>{var Rr;return(Rr=bt.value)==null?void 0:Rr.querySelector("#inner")}),Ot=ref([]);onMounted(()=>Bt());const Rt=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");function Dt(Rr=16/9){rt.sticky&&(makeSticky(wt.value),Lt.value.style.paddingTop="6px",kt.value.style.paddingBottom="6px"),wr.value=lr.value?Number((lr.value.width/lr.value.height).toFixed(4)):Rr,wt.value.classList.add("ve-component"),wt.value.classList.add(Rt),Rt==="full"||(wt.value.style.float=Rt,wt.value.style.width="calc(50% - 12px)"),wt.value.style.width=window.getComputedStyle(wt.value).width,Et.value&&(Lt.value.style.width=isMobile()?"100%":rt.width||"100%"),nextTick(()=>{if(Mr.value=parseInt(window.getComputedStyle(Et.value).width.slice(0,-2)),Et.value.style.width=`${Mr.value}px`,Et.value.style.height=rt.height||(qr.value==="image-grid"?"":qr.value==="audio"?"80px":`${Math.round((Mr==null?void 0:Mr.value)/wr.value)}px`),rr.value=parseInt(window.getComputedStyle(Et.value).height.slice(0,-2)),rt.sticky&&Rt==="full"&&!(rt.width||rt.height)){let Qr=Math.round(window.innerHeight*.4),Dr=Math.ceil(Qr*wr.value);qr.value==="image"&&(Et.value.style.height=`${Qr}px`),qr.value!=="image-grid"&&Lt.value.classList.add("drop-shadow"),Lt.value.style.width=`${Dr}px`}nextTick(()=>{Mr.value=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),rr.value=parseInt(window.getComputedStyle(Et.value).height.slice(0,-2))})})}function Bt(){var Rr;if(Ot.value=rt.entities?rt.entities.split(/\s+/).filter(Qr=>Qr):[],rt.src)if(((Rr=rt.src)==null?void 0:Rr.indexOf("http"))===0){let Qr=new URL(rt.src),Dr=Qr.hostname.replace(/^www\./,"");Wn.has(Dr)?(qr.value="video",Or=!0,ti.value=Qr.searchParams.get("v"),nextTick(()=>Eo())):er.has(Dr)?(qr.value="video",mi=!0,ti.value=Qr.pathname.slice(1),nextTick(()=>to())):fr.value=Bn()}else fr.value=Bn();else fr.value=Bn();nn()}function Ft(Rr){const Qr=Rr.target.parentElement;Qr&&(Qr.active=!Qr.active)}const Yt=ref();watch$1(Yt,()=>{if(Yt.value){let Rr=Yt.value;setTimeout(()=>In(),100),Rr.addHandler("viewport-change",()=>kn()),(rt.base||rt.annoBase)&&(rn.value=new Annotator(Rr,rt.base||rt.annoBase,hn.value));let Qr=Rr.world.getItemAt(0);Qr?(rt.rotation&&Qr.setRotation(parseInt(rt.rotation),!0),Qr.getFullyLoaded()?Wt():Qr.addHandler("fully-loaded-change",Dr=>{Dr.fullyLoaded&&Wt()})):Rr.world.addHandler("add-item",()=>{let Dr=Rr.world.getItemAt(0);rt.rotation&&Dr.setRotation(parseInt(rt.rotation),!0),Dr.getFullyLoaded()?Wt():Dr.addHandler("fully-loaded-change",ar=>{ar.fullyLoaded&&Wt()})})}});let Jt;function Wt(Rr){var ar;let Qr=fr.value[0],Dr=sha256(lr.value.id||lr.value["@id"]).slice(0,8);Dr!==Jt&&(rn.value&&rn.value.loadAnnotations(Dr).then(Ur=>sn.value=Ur),!Jt&&Qr.seq===vn.value&&Qr.region&&((ar=Yt.value)==null||ar.viewport.fitBounds(parseRegionString(Qr.region,Yt.value),!0)),Jt=Dr)}function Qt(Rr){return getItemInfo(Rr).format==="image/gif"}const rn=ref(),sn=ref([]),on=ref(!1),hn=ref(window.location.pathname.split("/")[1]==="editor"||rt.editable);function mn(){on.value=!on.value}watch$1(on,()=>{var Qr;rn.value.setVisible(on.value);let Rr=(Qr=bt.value)==null?void 0:Qr.querySelector("#annotations-icon");hn.value&&on.value?Rr==null||Rr.classList.add("editable"):Rr==null||Rr.classList.remove("editable")});const Cn=ref();let Tn=null;function kn(){Tn!==null&&(clearTimeout(Tn),Tn=null),Tn=window.setTimeout(()=>In(),100)}function In(){var Qr,Dr;const Rr=Yt&&((Qr=Yt.value)==null?void 0:Qr.world.getItemAt(0));if(Rr){let ar=(Dr=Yt.value)==null?void 0:Dr.viewport.getBounds();const Ur=ar?Rr.viewportToImageRectangle(ar):null;Cn.value=Ur?`${Math.ceil(Ur.x)},${Math.ceil(Ur.y)},${Math.ceil(Ur.width)},${Math.ceil(Ur.height)}`:""}}const Ln=ref();watch$1(bt,()=>{var Rr;Ln.value=(Rr=bt.value)==null?void 0:Rr.querySelector("#media-dialog")}),watch$1(Ln,Rr=>{Rr==null||Rr.addEventListener("sl-after-hide",()=>pn.value=null),Rr==null||Rr.addEventListener("sl-show",()=>{Ln.value&&(Ln.value.panel.style.width=isMobile()?"100%":`${yn()}px`)})});const pn=ref();watch$1(pn,Rr=>{var Qr,Dr;Rr?(Qr=Ln.value)==null||Qr.show():(Dr=Ln.value)==null||Dr.hide()});function Hn(Rr=null){pn.value=pn.value?null:Rr.src||Rr.id}function yn(){var Ur;let Rr=Math.round(window.innerWidth-100),Qr=Math.round(window.innerHeight-150),Dr=((Ur=pn.value)==null?void 0:Ur.indexOf("http"))===0?pn.value:`https://iiif.juncture-digital.org/${pn.value}/manifest.json`,ar=gr.value.find(ci=>decodeURIComponent(ci.id)===Dr);if(ar){let ci=getItemInfo(ar),wi=Number((ci.width/ci.height).toFixed(4));Rr=wi>=1?Rr/wi>Qr?Rr=Qr*wi:Rr:Math.round(Qr*wi)}return Rr}const mr=ref(rt.caption),vn=ref(rt.seq),yr=ref(rt.seq);function Tr(Rr){vn.value=Rr.detail}const Mr=ref(0),rr=ref(0),wr=ref(0),fr=ref([]),gr=ref([]),Lr=ref(null),Pr=ref(null),lr=ref(null),qr=ref(null),sr=ref(null),pr=computed(()=>Object.fromEntries(gr.value.map(Rr=>[sha256(decodeURIComponent(Rr.id)).slice(0,8),Rr])));watch$1(fr,()=>{let Rr=fr.value.filter(Qr=>Qr.iiif).map(Qr=>Qr.src);loadManifests(Rr).then(Qr=>{gr.value=Qr,rt.grid?qr.value="image-grid":gr.value.length>1&&(qr.value=gr.value.length===2?"image-compare":"image-grid")})}),watch$1(gr,()=>{Lr.value=gr.value.length>0&&gr.value[0],Pr.value=fr.value[0]}),watch$1(Lr,()=>{yr.value=imageCount(Lr.value),lr.value=Lr.value?getItemInfo(Lr.value,vn.value):null}),watch$1(vn,()=>lr.value=Lr.value?getItemInfo(Lr.value,vn.value):null);const Er=ref([]),ir=computed(()=>{var Rr;return(Rr=lr.value)==null?void 0:Rr.id}),Pn=computed(()=>{var Qr;let Rr=(Qr=ir.value)==null?void 0:Qr.split("#")[0].split(".").pop();return Rr==="mp4"?"video/mp4":Rr==="webm"?"video/webm":"application/ogg"});watch$1(lr,()=>{var Rr,Qr;qr.value=qr.value||((Qr=(Rr=lr.value)==null?void 0:Rr.type)==null?void 0:Qr.split(":").pop().toLowerCase()),sr.value=(qr==null?void 0:qr.value.indexOf("image"))===0?lr.value.service?`${lr.value.service[0].id||lr.value.service[0]["@id"]}/info.json`:{url:lr.value.id,type:"image",buildPyramid:!0}:null,Yt.value&&Yt.value.open(sr.value),Mr.value||nextTick(()=>Dt())}),watch$1(qr,()=>{vi(),nextTick(()=>{qr.value==="image"&&!Qt(Lr.value)&&!rt.static?Un():(qr.value==="video"&&fr.value.length>0||qr.value==="audio")&&Za(),!mr.value&&qr.value==="image"&&(mr.value=label(Lr.value))})}),watch$1(rr,()=>{qr.value==="image-compare"&&(Er.value=Qn())});function nn(){let Rr=wt.value.parentElement.querySelector("ve-media > ul, ve-media > span");if(Rr){const Qr=ar=>{for(let Ur of ar)Ur.type==="childList"||Ur.type;fr.value=Bn()};new MutationObserver(Qr).observe(Rr,{childList:!0,subtree:!0,characterData:!0})}}const fn=RegExp(/^(?<region>(pct:)?([0-9.]+,[0-9.]+,[0-9.]+,[0-9.]+)|full|square)(\/(?<size>full|max|((pct:)?[\d,.!]+)))?(\/(?<rotation>!?\d+))?(\/(?<quality>color|gray|bitonal|default))?(\/(?<format>jpg|tif|png|gif|jp2|pdf|webp))?/),cn=RegExp(/^(?<mirror>!?)(?<rotation>0|90|180|270){1}/);function Nn(Rr){return fn.test(Rr)}function On(Rr){return/^[0-9]+$/.test(Rr)}function cr(Rr){return cn.test(Rr)}function Bn(){let Rr=[],Qr=rt.manifest||rt.src,Dr=Array.from(wt.value.querySelectorAll("li")).filter(ar=>ar.innerText.trim()!=="");if(!Qr&&Dr.length===0&&Ot.value.length>0&&(Qr=`wd:${Ot.value[0]}`),Qr){let ar={};ar.src=Qr,ar.src=ar.src.indexOf("http")===0?ar.src:`https://iiif.juncture-digital.org/${ar.src}/manifest.json`,ar.id=sha256(ar.src).slice(0,8);let ci=new URL(ar.src).hostname.replace(/^www\./,"");if(ar.iiif=!Wn.has(ci)&&!er.has(ci),rt.options&&Nn(rt.options)){let wi=rt.options.match(fn);wi&&(ar={...ar,...wi.groups})}ar.seq=rt.seq,ar.region=rt.region||ar.region,ar.size=rt.size||ar.size,ar.rotation=rt.rotation||ar.rotation,ar.quality=rt.quality||ar.quality,ar.format=rt.format||ar.format,ar.fit=rt.fit,Rr.push(ar)}else Rr=Dr.map(ar=>{var ss,oo;let Ur=[],ci=(ss=ar.textContent)==null?void 0:ss.replace(/“/,'"').replace(/”/,'"').replace(/’/,"'").trim();(oo=ci==null?void 0:ci.match(/[^\s"]+|"([^"]*)"/gmi))==null||oo.forEach(Do=>{Ur.length>0&&Ur[Ur.length-1].indexOf("=")===Ur[Ur.length-1].length-1?Ur[Ur.length-1]=`${Ur[Ur.length-1]}${Do}`:Ur.push(Do)});let wi={};Ur.length>0&&(wi.src=Ur[0].indexOf("http")===0?Ur[0]:Ur[0].indexOf("manifest")===0?`https://iiif.juncture-digital.org/${Ur[0]}`:`https://iiif.juncture-digital.org/${Ur[0]}/manifest.json`),wi.id=sha256(decodeURIComponent(wi.src)).slice(0,8);let Po=new URL(wi.src),bo=Po.hostname.replace(/^www\./,"");Wn.has(bo)?(wi.youtube=!0,wi.videoid=Po.searchParams.get("v")):er.has(bo)?wi.vimeo=!0:wi.iiif=!0,wi.iiif=!Wn.has(bo)&&!er.has(bo);for(let Do=1;Do<Ur.length;Do++){let Us=Ur[Do];if(Us.indexOf("=")>0){let aa=Us.split("=");wi[aa[0]]=aa[1]}else if(On(Us))wi.seq=Us;else if(Nn(Us)){let aa=Us.match(fn);aa&&(wi={...wi,...aa.groups})}else if(Us==="cover"||Us==="contain")wi.fit=Us;else if(cr(Us)){let aa=Us.match(cn);aa&&(wi={...wi,...aa.groups})}else Us==="mirror"?wi.mirror=!0:wi.caption=Us[0]==='"'&&Us[Us.length-1]==='"'?Us.slice(1,-1):Us}return wi});return Rr}function Qn(){let Rr=Mr.value,Qr=rr.value,Dr=wr.value;return fr.value.map((ar,Ur)=>{let ci=getItemInfo(gr.value[Ur],ar.seq),wi,Po,bo,ss;ar.region&&([wi,Po,bo,ss]=ar.region.split(":").pop().split(",").map(ml=>parseFloat(ml)),ar.region.split(":")[0]==="pct"&&(wi=Math.round(wi*ci.width/100),Po=Math.round(Po*ci.height/100),bo=Math.round(bo*ci.width/100),ss=Math.round(ss*ci.height/100)));const oo=bo||ci.width,Do=ss||ci.height,Us=Number((oo/Do).toFixed(4));let aa=oo,ra=Do;Us>Dr?(aa=Math.round(Do*Dr),ra=Math.round(aa/Dr)):(ra=Math.round(oo/Dr),aa=Math.round(ra*Dr));let ji=ci.service[0].id||ci.service[0]["@id"];const so=(wi||0)+Math.abs(Math.round((aa-oo)*.5)),fo=(Po||0)+Math.abs(Math.round((ra-Do)*.5));let Li=`${so},${fo},${aa},${ra}`;return`${ji}/${Li}/${Rr},${Qr}/${ar.mirror?"!":""}${ar.rotation||0}/${ar.quality||"default"}.${ar.format||"jpg"}`})}function Un(){Yt.value=or(),hr(),sr.value&&Yt.value.open(sr.value)}function or(){var ar;const Dr={element:((ar=st.value)==null?void 0:ar.parentNode).querySelector("#osd"),prefixUrl:"https://openseadragon.github.io/openseadragon/images/",homeFillsViewer:rt.fit==="cover",showNavigationControl:!0,minZoomImageRatio:1,maxZoomPixelRatio:10,showRotationControl:!0,showHomeControl:!0,showZoomControl:!0,showFullPageControl:!0,showNavigator:!1,sequenceMode:!0,showReferenceStrip:!0,animationTime:.5,springStiffness:10,visibilityRatio:1,constrainDuringPan:!0};return openseadragonExports(Dr)}function hr(){rt.zoomOnScroll||new OpenSeadragonViewerInputHook({viewer:Yt.value,hooks:[{tracker:"viewer",handler:"scrollHandler",hookHandler:Rr=>{var Qr;return!((Qr=Yt.value)!=null&&Qr.isFullPage())&&!Rr.originalEvent.ctrlKey&&(Rr.preventDefaultAction=!0,Rr.stopHandlers=!0),!0}}]})}function kr(Rr){navigator.clipboard&&navigator.clipboard.writeText(Rr)}function xr(Rr){let Qr=Rr.name.toLowerCase(),Dr=Rr.value;return(Qr==="enter"||Qr==="exit")&&Dr.indexOf("|")>0&&([Qr,Dr]=Dr.split("|")),["zoom","zoomto"].indexOf(Qr.toLowerCase())===0||/^((pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?\|?([0-9a-f]{8})?$/.test(Dr)}function br(Rr){let Qr=Rr.name.toLowerCase(),Dr=Rr.value;return(Qr==="enter"||Qr==="exit")&&Dr.indexOf("|")>0&&([Qr,Dr]=Dr.split("|")),Qr.toLowerCase()==="play"||/^([0-9:]+)+,?([0-9:]+)?$/.test(Dr)}function hi(Rr){let Qr=Rr.name.toLowerCase(),Dr=Rr.value.toLowerCase();return Qr==="pause"||Dr==="pause"}const di=new Set(["anno","play","start","zoomto"]);function vi(){Array.from(wt.value.querySelectorAll("[enter],[exit]")).forEach(Qr=>{Ti(Qr)&&ki(Qr)});let Rr=wt.value.parentElement;for(;Rr.parentElement&&Rr.tagName!=="BODY";)Rr=Rr.parentElement;Array.from(Rr.querySelectorAll("mark, ve-trigger")).forEach(Qr=>{let Dr=Array.from(Qr.attributes).find(ar=>di.has(ar.name));Dr&&Ti(Qr.parentElement)&&(Qr.classList.add(Dr.name),Qr.addEventListener("click",()=>{(Dr==null?void 0:Dr.name)==="anno"?Sn(Dr.value):(Dr==null?void 0:Dr.name)==="zoomto"?An(Dr.value):(Dr==null?void 0:Dr.name)==="play"?Di(Dr.value):Ci()}))})}function Ti(Rr){let Qr=Rr.previousSibling;for(;Qr;){if(Qr.nodeName==="VE-MEDIA")return Qr===wt.value?Qr:null;Qr=Qr.previousSibling}for(;Rr.parentElement&&Rr.tagName!=="MAIN";){Rr=Rr.parentElement;let Dr=Rr.querySelector(":scope > ve-media, :scope > p > ve-media");if(Dr)return Dr===wt.value?Dr:null}}function ki(Rr){let Qr=Rr.classList.contains("active");new MutationObserver(ar=>{ar.forEach(Ur=>{if(Ur.attributeName=="class"){let ci=Ur.target.classList.contains("active");if(Qr!==ci){Qr=ci;let wi=Rr.attributes.getNamedItem(ci?"enter":"exit");wi&&(qr.value==="image"&&xr(wi)&&An(wi.value),qr.value!=="image"&&(br(wi)?Di(wi.value):hi(wi)&&Ci()))}}})}).observe(Rr,{attributes:!0})}function Di(Rr){Rr=Rr.replace(/^play\|/i,"");const Qr=Rr.match(/^([0-9:]+)+,?([0-9:]+)?$/);Qr&&Ns(Qr[1],Qr[2])}function Ci(){Ai()}let $r="";function An(Rr){var Dr,ar,Ur,ci,wi,Po,bo;Rr=Rr.replace(/^zoomto\|/i,"");const Qr=Rr==null?void 0:Rr.match(/^(?<region>(pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?,?(?<annoid>[0-9a-f]{8})?$/);if(Qr){let ss=(Dr=Qr==null?void 0:Qr.groups)==null?void 0:Dr.region,oo=(ar=Qr==null?void 0:Qr.groups)==null?void 0:ar.annoid;ss?($r===ss?((Ur=Yt.value)==null||Ur.viewport.goHome(),$r=""):($r=ss,(ci=rn.value)==null||ci.deselect(),(wi=Yt.value)==null||wi.viewport.fitBounds(parseRegionString(ss,Yt.value),!1)),oo&&rn.value.select(oo)):oo&&(((Po=rn.value.selected)==null?void 0:Po.id)===oo?rn.value.deselect():((bo=Yt.value)==null||bo.viewport.goHome(),oo&&rn.value.select(oo)))}}function Sn(Rr){var Dr,ar,Ur,ci,wi;const Qr=Rr==null?void 0:Rr.match(/^(?<annoid>[0-9a-f]{8})$/);if(Qr){let Po=(Dr=Qr==null?void 0:Qr.groups)==null?void 0:Dr.annoid;Po&&((ar=rn.value.selected)==null?void 0:ar.id)===Po?((Ur=rn.value)==null||Ur.deselect(),(ci=Yt.value)==null||ci.viewport.goHome()):((wi=Yt.value)==null||wi.viewport.goHome(),rn.value.select(Po))}}const Wn=new Set(["youtube.com","youtube.co.uk","youtu.be"]),er=new Set(["vimeo.com"]);let vr=null;const ti=ref(),_r=ref(!0),li=ref(!1);let Or=!1,mi=!1,_i=!1,Pi=null,xi=!0,Zi={};function $i(){Zi.value=Object.fromEntries(Array.from(wt.value.parentElement.querySelectorAll("p[data-start]")).map(Rr=>[Os(Rr.dataset.start||"0"),Rr]))}async function Qi(Rr){let Dr=`https://youtube.com/oembed?url=${encodeURI(`https://www.youtube.com/watch?v=${Rr}`)}&format=json`,Ur=await(await fetch(Dr)).json();return Ur.aspect=Ur.width/Ur.height,Ur}async function Eo(){let Rr=await Qi(ti.value);$i(),nextTick(()=>{Dt(Rr.aspect),nextTick(()=>{var Ur;let Qr=(Ur=bt.value)==null?void 0:Ur.querySelector("#youtube-placeholder"),Dr=parseInt(window.getComputedStyle(Qr).width.slice(0,-2));Qr.style.height=`${Dr/Rr.aspect}px`;let ar={color:"white",rel:0,modestbranding:1,playsinline:1};vr=YouTubePlayer(Qr,{videoId:ti.value,width:Dr,playerVars:ar}),vr.on("ready",ci=>{Hs(),rt.autoplay&&Ns(`${rt.start||""}`,`${rt.end||""}`)})})})}async function to(){var Qr;Dt();let Rr=(Qr=bt.value)==null?void 0:Qr.querySelector("#ve-video-vimeo");vr=new Player(Rr,{id:ti.value,width:parseInt(window.getComputedStyle(Rr).width.slice(0,-2))}),vr.on("loaded",()=>{Dt(Rr.clientWidth/Rr.clientHeight-5),Hs()})}function Za(){$i(),_i=!0,nextTick(()=>{var Rr;vr=(Rr=bt.value)==null?void 0:Rr.querySelector("#html5-player"),Hs()}),Dt()}async function Hs(){let Rr=wt.value.parentElement.querySelector("ve-media"),Qr=!1;setInterval(async()=>{if(_r.value=await Xo(),li.value=await Fs(),li.value&&rt.sticky&&Object.keys(Zi.value).length>0&&!Qr){let Dr=Rr.getBoundingClientRect().top+window.scrollY-top$1();window.scrollTo(0,Dr),Qr=!0}li.value&&io().then(Dr=>{if(Dr=Math.round(Dr),Zi.value[Dr]){let Ur=Zi.value[Dr].getBoundingClientRect();window.scrollTo(0,Ur.top+window.scrollY-Rr.getBoundingClientRect().bottom)}})},1e3)}function Ai(){Or?vr.pauseVideo():(mi||_i)&&vr.pause()}async function io(){if(Or)return vr.getCurrentTime();if(mi)return await vr.getCurrentTime();if(_i)return vr.currentTime}async function Fs(){return Or?await vr.getPlayerState()===1:mi?!(await vr.getEnded()||await vr.getPaused()):_i?!(vr.ended||vr.paused):!1}async function Xo(){return Or?await vr.isMuted():mi?await vr.getMuted():await rt.muted}function os(Rr){Or?Rr?vr.mute():vr.unMute():mi?vr.setMuted(Rr):_i&&(vr.muted=Rr)}function Os(Rr){var Qr=Rr.split(":").slice(0,3).map(Ur=>parseInt(Ur,10));let Dr=0,ar=1;for(;Qr.length>0;){let Ur=Qr.pop()||0;Dr+=ar*Ur,ar*=60}return Dr}function Ns(Rr,Qr=""){let Dr=Os(Rr),ar=Qr?Os(Qr)+1:-1;Pi&&(clearTimeout(Pi),Pi=null);let Ur=_r.value;if(Or?(vr.playVideo(),vr.seekTo(Dr).then(ci=>{ar>=Dr&&(Pi=setTimeout(()=>{vr.pauseVideo().then(wi=>{Pi=null,!Ur&&xi&&os(!1)})},ar===Dr?200:(ar-Dr)*1e3))})):mi?(vr.setCurrentTime(Dr),vr.play().then(ci=>{ar>=Dr&&(Pi=setTimeout(()=>{vr.pause().then(wi=>{Pi=null,!Ur&&xi&&os(!1)})},ar===Dr?200:(ar-Dr)*1e3))})):_i&&setTimeout(()=>{vr.play(),vr.currentTime=Dr,ar>=Dr&&(Pi=setTimeout(()=>{Pi=null,vr.pause(),!Ur&&xi&&os(!1)},ar===Dr?200:(ar-Dr)*1e3))},200),Zi.value[Dr]){let wi=Zi.value[Dr].getBoundingClientRect(),Po=wt.value.parentElement.querySelector("ve-media");window.scrollTo(0,wi.top+window.scrollY-Po.getBoundingClientRect().bottom)}}return(Rr,Qr)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",mergeProps({ref_key:"root",ref:st},Rr.$attrs),null,16),createBaseVNode("div",{id:"outer",class:normalizeClass(hn.value?"edit":"view"),draggable:qr.value==="image",onDragstart:Qr[2]||(Qr[2]=Dr=>it(Lr.value,Dr))},[createBaseVNode("div",{id:"inner",class:normalizeClass(qr.value)},[createBaseVNode("div",_hoisted_2$a,[qr.value==="image"?(openBlock(),createElementBlock("div",_hoisted_3$9,[Qt(gr.value[0])?(openBlock(),createElementBlock("ve-gif",{key:0,src:lr.value.id,alt:"Animated GIF","initially-paused":"","restart-on-play":""},null,8,_hoisted_4$8)):nt.static?(openBlock(),createElementBlock("img",{key:1,src:unref(staticImage)(Lr.value,Pr.value,Mr.value),style:{width:"100%"},onClick:Qr[0]||(Qr[0]=Dr=>Hn(Lr.value))},null,8,_hoisted_5$6)):(openBlock(),createElementBlock("div",_hoisted_6$5)),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:3,manifest:gr.value[0].id},null,8,_hoisted_7$4))])):qr.value==="image-grid"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`grid-wrapper${rt.small?" small":""}`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(fr.value,(Dr,ar)=>(openBlock(),createElementBlock(Fragment,null,[rt.cards?(openBlock(),createElementBlock("ve-media-card",{key:0,style:{width:"100%",height:"100%"},manifest:Dr.src},null,8,_hoisted_8$4)):(openBlock(),createElementBlock("div",_hoisted_9$3,[createBaseVNode("div",{class:"media-item",draggable:qr.value==="image",onDragstart:Ur=>it(unref(pr)[Dr.id],Ur)},[Dr.iiif?(openBlock(),createElementBlock("img",{key:0,"data-id":Dr.id,src:unref(thumbnail)(unref(pr)[Dr.id],400,Dr.seq||1),onClick:Ur=>Hn(Dr)},null,8,_hoisted_11$1)):Dr.youtube?(openBlock(),createElementBlock("img",{key:1,src:`https://img.youtube.com/vi/${Dr.videoid}/0.jpg`,onClick:Ur=>Hn(Dr)},null,8,_hoisted_12$1)):createCommentVNode("",!0),Dr.iiif?(openBlock(),createElementBlock("ve-manifest-popup",{key:2,manifest:Dr.src},null,8,_hoisted_13$1)):createCommentVNode("",!0)],40,_hoisted_10$2)]))],64))),256))],2)):qr.value==="image-compare"?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("sl-image-comparer",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Er.value,(Dr,ar)=>(openBlock(),createElementBlock("img",{key:`img-${ar}`,slot:ar===0?"before":"after",src:Dr,alt:unref(label)(gr.value[ar])},null,8,_hoisted_15$1))),128))])])):qr.value==="audio"?(openBlock(),createElementBlock("div",_hoisted_16$1,[createBaseVNode("audio",_hoisted_17$1,[createBaseVNode("source",{src:unref(ir),type:unref(Pn)},null,8,_hoisted_18$1)]),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:0,manifest:gr.value[0].id},null,8,_hoisted_19$1))])):qr.value==="video"?(openBlock(),createElementBlock("div",_hoisted_20$1,[unref(Or)?(openBlock(),createElementBlock("div",_hoisted_21$1)):unref(mi)?(openBlock(),createElementBlock("div",_hoisted_22$1)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("video",{id:"html5-player",controls:"",playsinline:"",muted:rt.muted,autoplay:rt.autoplay,poster:rt.poster},[createBaseVNode("source",{src:unref(ir),type:unref(Pn)},null,8,_hoisted_24$1)],8,_hoisted_23$1),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:0,manifest:gr.value[0].id},null,8,_hoisted_25$1))],64))])):createCommentVNode("",!0)]),qr.value==="image"&&yr.value>1?(openBlock(),createElementBlock("ve-pager",{key:0,total:yr.value,current:vn.value,onImageSelected:Tr},null,40,_hoisted_26$1)):createCommentVNode("",!0),mr.value&&!rt.noCaption?(openBlock(),createElementBlock("div",{key:1,id:"caption-bar",onClick:Ft},[qr.value==="image"?(openBlock(),createElementBlock("div",{key:0,id:"annotations-icon",class:"button-icon-with-badge",onClick:mn},[hn.value?(openBlock(),createElementBlock(Fragment,{key:0},[on.value?(openBlock(),createElementBlock("sl-icon-button",_hoisted_27$1)):(openBlock(),createElementBlock("sl-icon-button",_hoisted_28$1)),!on.value&&sn.value.length>0?(openBlock(),createElementBlock("sl-badge",_hoisted_29$1,toDisplayString(sn.value.length),1)):createCommentVNode("",!0)],64)):sn.value.length>0?(openBlock(),createElementBlock(Fragment,{key:1},[on.value?(openBlock(),createElementBlock("sl-icon-button",_hoisted_30$1)):(openBlock(),createElementBlock("sl-icon-button",_hoisted_31$1)),on.value?createCommentVNode("",!0):(openBlock(),createElementBlock("sl-badge",_hoisted_32$1,toDisplayString(sn.value.length),1))],64)):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",{class:"label",innerHTML:mr.value},null,8,_hoisted_33$1)])):createCommentVNode("",!0),Cn.value?(openBlock(),createElementBlock("div",{key:2,id:"coords",innerHTML:Cn.value,onClick:Qr[1]||(Qr[1]=Dr=>kr(Cn.value||""))},null,8,_hoisted_34$1)):createCommentVNode("",!0)],2),createBaseVNode("sl-dialog",_hoisted_35,[pn.value?(openBlock(),createElementBlock("ve-media",{key:0,src:pn.value,"zoom-on-scroll":""},null,8,_hoisted_36)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:Hn,variant:"primary"},"Close")])],42,_hoisted_1$c)],64))}}),_style_0$8=`.r6o-editor{top:0;left:0;margin-left:-19px}.a9s-annotationlayer{position:absolute;top:0;left:0;width:100%;height:100%;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.a9s-annotationlayer.no-cursor,.a9s-annotationlayer.no-cursor *{cursor:none!important}.a9s-crosshair line{stroke-width:1px;stroke:#00000080;pointer-events:none;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.a9s-selection-mask{stroke:none;fill:transparent;pointer-events:none}.a9s-annotation rect,.a9s-annotation circle,.a9s-annotation ellipse,.a9s-annotation path,.a9s-annotation polygon,.a9s-annotation line,.a9s-selection rect,.a9s-selection circle,.a9s-selection ellipse,.a9s-selection path,.a9s-selection polygon,.a9s-selection line{fill:transparent;cursor:pointer;vector-effect:non-scaling-stroke}.a9s-annotation .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff;stroke-width:1px;fill:transparent}.a9s-annotation .a9s-inner:hover,.a9s-selection .a9s-inner:hover{stroke:#fff000}.a9s-annotation .a9s-outer,.a9s-selection .a9s-outer{stroke:#000000b3;stroke-width:3px;fill:none}.a9s-annotation .a9s-formatter-el,.a9s-selection .a9s-formatter-el{overflow:visible}.a9s-annotation.a9s-point .a9s-inner{display:none}.a9s-annotation.a9s-point .a9s-outer{stroke:#5a5a5a;stroke-width:1.5px;fill:#ffffff80}.a9s-annotation.a9s-point .a9s-outer:hover{fill:#fff000}.a9s-annotation.selected .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff000}.a9s-annotation.editable .a9s-inner{stroke:#fff000;cursor:move!important}.a9s-annotation.editable .a9s-inner:hover{fill:#fff0001a}.a9s-handle{cursor:move}.a9s-handle .a9s-handle-inner{stroke:#fff000;fill:#000}.a9s-handle .a9s-handle-outer{stroke:#000;fill:#fff}.a9s-handle:hover .a9s-handle-inner{fill:#fff000}.r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle;cursor:pointer}.r6o-btn .r6o-icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2!important;background-color:#a3c2e2!important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-autocomplete{display:inline;position:relative}.r6o-autocomplete div[role=combobox]{display:inline}.r6o-autocomplete input{outline:none;border:none;width:80px;height:100%;line-height:14px;white-space:pre;box-sizing:border-box;background-color:transparent;font-size:14px;color:#3f3f3f}.r6o-autocomplete ul{position:absolute;margin:0;padding:0;list-style-type:none;background-color:#fff;border-radius:3px;border:1px solid #d6d7d9;box-sizing:border-box;box-shadow:0 0 20px #00000040}.r6o-autocomplete ul:empty{display:none}.r6o-autocomplete li{box-sizing:border-box;padding:2px 12px;width:100%;cursor:pointer}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:Lato,sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative}.r6o-widget.comment .r6o-editable-text,.r6o-widget.comment .r6o-readonly-comment{padding:10px;width:100%;box-sizing:border-box;outline:none;border:none;background-color:transparent;resize:none}.r6o-widget.comment .r6o-readonly-comment{white-space:pre-line}.r6o-widget.comment .r6o-editable-text::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text::-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-ms-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;margin:0 10px 8px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .r6o-lastmodified .r6o-lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .r6o-arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .r6o-arrow-down.r6o-menu-open{border-color:#4483c4}.r6o-widget.comment .r6o-comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px #0003}.r6o-widget.comment .r6o-comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .r6o-comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment .r6o-purposedropdown{position:relative;z-index:2}.r6o-widget.comment.editable{background-color:#ecf0f1}.r6o-widget.r6o-tag:empty{display:none}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.r6o-widget.tag .r6o-taglist li{height:27px}.r6o-widget.tag .r6o-taglist li .r6o-delete-wrapper .r6o-delete{position:relative;top:-4px}}.r6o-widget.r6o-tag{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px;display:flex}.r6o-widget.r6o-tag ul{margin:0;padding:0;list-style-type:none;z-index:1}.r6o-widget.r6o-tag ul.r6o-taglist{flex:0;white-space:nowrap}.r6o-widget.r6o-tag ul.r6o-taglist li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,.1);-moz-box-shadow:0 0 4px rgba(0,0,0,.1);box-shadow:0 0 4px #0000001a}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-label{padding:2px 8px;display:inline-block}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper .r6o-delete{padding:2px 6px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper svg{vertical-align:text-top}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-active{width:24px;transition:width .2s}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-done,.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit{width:24px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit-active{width:0;transition:width .2s}.r6o-widget.r6o-tag .r6o-autocomplete{flex:1;position:relative}.r6o-widget.r6o-tag .r6o-autocomplete li{font-size:14px}.r6o-widget.r6o-tag input{width:100%;padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.r6o-widget.r6o-tag input::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input::-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-ms-input-placeholder{color:#c2c2c2}.r6o-editor{position:absolute;z-index:99999;width:400px;color:#3f3f3f;opacity:0;font-family:Lato,sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity .2s ease-in;-moz-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.r6o-editor .r6o-arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px;display:none}.r6o-editor .r6o-arrow:after{content:"";position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .r6o-editor-inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,.4);box-shadow:2px 2px 42px #0006}.r6o-editor .r6o-editor-inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .r6o-editor-inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .r6o-footer{position:relative;text-align:right;padding:8px 0}.r6o-editor .r6o-footer .r6o-btn{margin-right:8px}.r6o-editor .r6o-footer .r6o-btn.delete-annotation{position:absolute;top:7px;left:7px;background-color:transparent;border:none;color:#4483c4;width:32px;height:32px;min-width:0;border-radius:100%;padding:0;display:flex;justify-content:center;align-items:center;-webkit-transition:all .1s ease-in;-moz-transition:all .1s ease-in;-o-transition:all .1s ease-in;transition:all .1s ease-in}.r6o-editor .r6o-footer .r6o-btn.delete-annotation:hover{color:#fff;background-color:#ef352c}@media (max-width: 640px){.r6o-editor{width:260px}}.r6o-editor.r6o-arrow-top .r6o-arrow{display:block}.r6o-editor.r6o-arrow-right{margin-left:8px}.r6o-editor.r6o-arrow-right .r6o-arrow{left:auto;right:12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow{display:block;top:auto;bottom:-12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow:after{top:-11px;box-shadow:none}.r6o-editor.pushed .r6o-arrow,.r6o-editor.dragged .r6o-arrow{display:none}.r6o-editor .r6o-draggable{cursor:move}.r6o-purposedropdown{width:150px;display:inline-block}.r6o-noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.a9s-annotation.hover .a9s-inner{stroke:#fff000}.a9s-annotation:not(.hover):hover .a9s-inner{stroke:#fff}*{box-sizing:border-box}:host{display:block;padding-bottom:6px;background-color:inherit}.info-icon{position:absolute;top:12px;right:12px;width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center;visibility:hidden}.media-item:hover .info-icon{visibility:visible;transition:all .3s ease-in}.manifest-popover{background-color:#fff;border-radius:6px;width:300px;height:400px;overflow-y:scroll;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#outer{position:relative;width:100%;background-color:inherit;display:flex;justify-items:center}#outer{margin-bottom:12px}#inner{margin:auto;width:100%}#inner.image,.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#content{width:100%}#osd,video{width:100%;height:100%}#caption-bar{display:flex;gap:6px;width:100%;align-items:center;height:32px;background-color:#555}#caption-bar .label{color:#fff;padding:0 9px;font-size:1.1rem;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:pointer}.image-wrapper{position:relative;height:100%;width:100%}.grid-wrapper{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper.small{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper>.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}.grid-wrapper img{border:1px solid #ccc;box-shadow:2px 2px 6px #0000004d;max-width:100%;cursor:pointer}#coords{position:absolute;display:flex;align-items:center;justify-content:flex-end;font-family:sans-serif;bottom:0;right:0;width:130px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#coords:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy}.info-icon span{position:absolute;top:20px;right:20px;font-size:24px;z-index:2;opacity:0;border-radius:50%;border:1px solid white;background-color:#0003}.media-item{position:relative}.media-item:hover .info-icon span{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:pointer;color:#fff}.info-icon:hover svg{fill:#000}.view .r6o-footer{display:none}.r6o-widget.comment .r6o-readonly-comment{display:inline;padding:0}.view .r6o-editor,.view .r6o-editor-inner,.view .r6o-widget{display:inline-block;min-height:unset!important;line-height:1.4;padding:0;border-bottom:none}.r6o-tag,.comment.editable:nth-of-type(2){display:none!important}.edit .r6o-editor{width:216px}.r6o-widget.comment{padding:6px 6px 4px;border-radius:4px}svg.a9s-annotationlayer .a9s-selection .a9s-inner,svg.a9s-annotationlayer .a9s-annotation .a9s-inner{stroke-width:3;stroke:#ff0}ul.annotations{list-style:none;padding-left:0}.annotations li{display:flex;align-items:center;gap:6px;padding:6px 0}.annotations li:hover{background-color:#fff3;cursor:pointer}.compare{height:100%;width:100%;position:relative;overflow:hidden;border:5px solid #bfc0c1;box-shadow:-3px 5px 15px #000}.compare img{width:100%;height:100%;position:absolute}#compare-img-2{clip-path:polygon(0 0,50% 0,50% 100%,0 100%)}#slider{position:relative;-webkit-appearance:none;width:calc(100% + 40px);height:100%;margin-left:-20px;background-color:transparent;outline:none}#slider::-webkit-slider-thumb{-webkit-appearance:none;height:45px;width:45px;background:rgba(255,255,255,.3);border:4px solid white;border-radius:50%;background-size:contain;cursor:pointer}audio#html5-player{width:calc(100% - 60px);max-width:50vh}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.popup-overview sl-popup{--arrow-color: var(--sl-color-primary-600)}.popup-overview span[slot=anchor]{display:inline-block;width:150px;height:150px;border:dashed 2px var(--sl-color-neutral-600);margin:50px}.popup-overview .box{width:100px;height:50px;background:var(--sl-color-primary-600);border-radius:var(--sl-border-radius-medium)}.popup-overview-options{display:flex;flex-wrap:wrap;align-items:end;gap:1rem}.popup-overview-options sl-select{width:160px}.popup-overview-options sl-input{width:100px}.popup-overview-options+.popup-overview-options{margin-top:1rem}sl-popup{--arrow-color: var(--sl-color-primary-600)}.media-item .box{width:300px;height:600px;background:white;border-radius:var(--sl-border-radius-medium)}#annotations-icon{position:relative;cursor:pointer}#annotations-icon sl-icon-button::part(base){color:#fff;font-size:1.2rem;padding:3px}.button-icon-with-badge{display:inline-block;position:relative;margin:0 6px}.button-icon-with-badge sl-badge{position:absolute;left:70%;top:0;cursor:pointer}.button-icon-with-badge sl-badge::part(base){font-size:.7rem;background-color:#ff0;color:#000;font-weight:700;padding:4px 5px 1px;border:unset}#youtube-placeholder,#ve-video-vimeo{width:100%}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,MediaViewer=_export_sfc(_sfc_main$e,[["styles",[_style_0$8]]]),_hoisted_1$b=createBaseVNode("input",{class:"menu-btn",type:"checkbox",id:"menu-btn"},null,-1),_hoisted_2$9={key:0,class:"wrapper"},_hoisted_3$8=createBaseVNode("label",{class:"menu-icon",htmlFor:"menu-btn"},[createBaseVNode("span",{class:"navicon"})],-1),_hoisted_4$7=["data-item","onClick"],_hoisted_5$5=["name","label"],_hoisted_6$4=["contact","title","subject"],_sfc_main$d=defineComponent({__name:"Menu.ce",props:{background:{type:String},position:{type:String,default:"left"},contact:{type:String},contactFormTitle:{type:String},contactSubject:{type:String}},setup(nt){const rt=nt,it={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","beta.juncture-digital.org":"f30ce4168a0bb95ecaa3","dev.juncture-digital.org":"bb290b5a738cb6fe31c7","tools.juncture-digital.org":"0b40086fe912d97c03e6"},st={about:{icon:"info-circle-fill"},contact:{icon:"envelope-fill"},documentation:{icon:"book"},docs:{icon:"book"},editor:{icon:"pencil",loginRequired:!0},essays:{icon:"pencil"},help:{icon:"question-circle"},home:{icon:"house-fill"},"how to":{icon:"book-fill"},link:{icon:"link-45deg"},login:{icon:"person-circle"},logout:{icon:"person-circle"},markdown:{icon:"markdown"},media:{icon:"images",loginRequired:!0},showcase:{icon:"easel2"},tools:{icon:"tools",loginRequired:!0}},bt=ref(null),wt=computed(()=>{var hn,mn;return(mn=(hn=bt.value)==null?void 0:hn.getRootNode())==null?void 0:mn.host}),Et=computed(()=>{var hn;return(hn=bt==null?void 0:bt.value)==null?void 0:hn.parentNode}),kt=ref(!1),Lt=ref([]),Ot=ref();let Rt,Dt;onMounted(()=>{Bt(),nextTick(()=>{var mn;let hn=Array.from(((mn=wt.value.children[0])==null?void 0:mn.children)||[]);hn.length>0&&(Lt.value=hn.map(Cn=>{if(Cn.firstChild.nodeName==="A"){let Tn=Cn.firstChild;return{label:Tn.textContent,href:Tn.href,newWindow:Tn.getAttribute("target")==="_blank"}}else{let Tn=Cn.firstChild.textContent;return Tn.toLowerCase()==="auth"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:{label:Tn}}}).filter(Cn=>Cn.label.toLowerCase().indexOf("contact")!==0||rt.contact))})});function Bt(){kt.value=Ft()!==null;let hn=new URL(window.location.href).searchParams.get("code");hn&&(window.history.replaceState({},"",window.location.pathname),fetch(`/gh-token?code=${hn}&hostname=${window.location.hostname}`).then(mn=>mn.text()).then(mn=>{mn&&(kt.value=!0,localStorage.setItem("gh-auth-token",mn),window.dispatchEvent(new Event("storage")))}).catch(mn=>console.log("err",mn))),wt.value.classList.add(rt.position)}watch$1(Lt,()=>{Ot.value=Lt.value.filter(hn=>{var Cn;let mn=hn.href?hn.href.split("/").filter(Tn=>Tn).pop().toLowerCase():"link";return!st[mn]||!((Cn=st[mn])!=null&&Cn.loginRequired)||kt.value}).map(hn=>hn.label==="Login"||hn.label==="Logout"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:hn)}),watch$1(kt,()=>{Ot.value=Lt.value.filter(hn=>{var Cn;let mn=hn.href?hn.href.split("/").filter(Tn=>Tn).pop().toLowerCase():"link";return!st[mn]||!((Cn=st[mn])!=null&&Cn.loginRequired)||kt.value}).map(hn=>hn.label==="Login"||hn.label==="Logout"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:hn)});function Ft(){return localStorage.getItem("gh-auth-token")}function Yt(){var mn;let hn=(mn=Et.value)==null?void 0:mn.querySelector("ve-contact");hn._instance.exposed.show.value=!0}function Jt(){Rt&&Rt.close();let hn="toolbar=yes,location=yes,left=0,top=0,width=1040,height=1200,scrollbars=yes,status=yes";Rt=window.open("/help","_blank",hn)}function Wt(){var mn;let hn=(mn=Et.value)==null?void 0:mn.querySelector("#markdown");hn.show=!hn.show}function Qt(){let hn=new URL(window.location.href).hostname,Cn=hn==="localhost"||hn.indexOf("192.168.")===0?`${window.location.pathname}?code=testing`:it[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${it[location.hostname]}&scope=repo&state=juncture&redirect_uri=${location.href}`:null;Cn&&(window.location.href=Cn)}function rn(){Object.keys(localStorage).forEach(hn=>localStorage.removeItem(hn)),window.dispatchEvent(new Event("storage")),kt.value=!1}function sn(hn){let mn="",Cn=hn.label.toLowerCase();return Object.keys(st).forEach(Tn=>{Cn.indexOf(Tn)>=0&&(mn=st[Tn].icon)}),mn||"link"}function on(hn){var Cn;console.log("menuItemSelected",hn);let mn=hn.href?hn.href.split("/").pop().toLowerCase():"";if(console.log(`action=${mn}`),(mn.indexOf("contact")>-1||hn.label.toLowerCase().indexOf("contact")===0)&&rt.contact)Yt();else if(mn==="login")Qt();else if(mn==="logout")rn();else if(mn==="help")Jt();else if(mn==="markdown")Wt();else if(hn.href)if(hn.newWindow)Dt&&Dt.close(),Dt=window.open(hn.href,"_blank","toolbar=yes,location=yes,left=0,top=0,width=1024,height=1200,scrollbars=yes,status=yes");else if(hn.href.indexOf("/window.")>0){let Tn=hn.href.split("/window.").pop();window[Tn]()}else location.href=hn.href;((Cn=Et.value)==null?void 0:Cn.querySelector("#menu-btn")).checked=!1}return(hn,mn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:bt},[createBaseVNode("div",{class:"nav",style:normalizeStyle({backgroundColor:rt.background})},[_hoisted_1$b,Ot.value?(openBlock(),createElementBlock("div",_hoisted_2$9,[_hoisted_3$8,createBaseVNode("ul",{class:"menu",style:normalizeStyle({backgroundColor:rt.background||"#444"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ot.value,(Cn,Tn)=>(openBlock(),createElementBlock("li",{"data-item":JSON.stringify(Cn),key:`nav-${Tn}`,onClick:kn=>on(Cn)},[createBaseVNode("sl-icon",{slot:"prefix",name:sn(Cn),label:Cn.label},null,8,_hoisted_5$5),createTextVNode(" "+toDisplayString(Cn.label),1)],8,_hoisted_4$7))),128))],4)])):createCommentVNode("",!0)],4),createBaseVNode("ve-contact",{contact:rt.contact,title:rt.contactFormTitle,subject:rt.contactSubject},null,8,_hoisted_6$4)],512))}}),_style_0$7=`:host,ve-menu{height:100%}:host(.right) .menu,ve-menu.right .menu{right:0}.hydrated ul{display:none}.nav{display:inline-block;position:relative;z-index:10;height:100%;background-color:inherit}.menu{display:none;clear:both;max-height:0;transition:max-height .2s ease-out;position:absolute;top:58px;width:200px;background-color:#0009;color:#fff}ul.menu{padding:0;list-style:none}.menu li{display:flex;padding:10px 20px;text-decoration:none;cursor:pointer;font-size:1rem}.menu li:hover{text-decoration:underline;background-color:inherit;filter:brightness(150%)}.menu-icon{cursor:pointer;display:inline-block;padding:34px 20px;position:relative;user-select:none}.menu-icon .navicon,.menu-icon .navicon:before,.menu-icon .navicon:after{background:#fff}.menu-icon .navicon{display:block;height:4px;border-radius:2px;position:relative;transition:background .2s ease-out;width:32px}.menu-icon .navicon:before,.menu-icon .navicon:after{content:"";display:block;height:100%;position:absolute;transition:all .2s ease-out;width:100%;border-radius:2px}.menu-icon .navicon:before{top:10px}.menu-icon .navicon:after{top:-10px}.menu sl-icon{padding-right:12px}.menu-btn{display:none}.menu-btn:checked~.wrapper{filter:brightness(150%);background-color:inherit}.menu-btn:checked~.wrapper .menu{max-height:unset;display:block}.menu-btn:checked~.wrapper .menu-icon .navicon{background:transparent}.menu-btn:checked~.wrapper .menu-icon .navicon:before{transform:rotate(-45deg)}.menu-btn:checked~.wrapper .menu-icon .navicon:after{transform:rotate(45deg)}.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:before,.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:after{top:0}
`,Menu=_export_sfc(_sfc_main$d,[["styles",[_style_0$7]]]);function commonjsRequire(nt){throw new Error('Could not dynamically require "'+nt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var moment_min={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it;function st(){return it.apply(null,arguments)}function bt(Zt){return Zt instanceof Array||Object.prototype.toString.call(Zt)==="[object Array]"}function wt(Zt){return Zt!=null&&Object.prototype.toString.call(Zt)==="[object Object]"}function Et(Zt,dn){return Object.prototype.hasOwnProperty.call(Zt,dn)}function kt(Zt){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(Zt).length===0;for(var dn in Zt)if(Et(Zt,dn))return;return 1}function Lt(Zt){return Zt===void 0}function Ot(Zt){return typeof Zt=="number"||Object.prototype.toString.call(Zt)==="[object Number]"}function Rt(Zt){return Zt instanceof Date||Object.prototype.toString.call(Zt)==="[object Date]"}function Dt(Zt,dn){for(var Mn=[],Kn=Zt.length,dr=0;dr<Kn;++dr)Mn.push(dn(Zt[dr],dr));return Mn}function Bt(Zt,dn){for(var Mn in dn)Et(dn,Mn)&&(Zt[Mn]=dn[Mn]);return Et(dn,"toString")&&(Zt.toString=dn.toString),Et(dn,"valueOf")&&(Zt.valueOf=dn.valueOf),Zt}function Ft(Zt,dn,Mn,Kn){return Ho(Zt,dn,Mn,Kn,!0).utc()}function Yt(Zt){return Zt._pf==null&&(Zt._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),Zt._pf}function Jt(Zt){if(Zt._isValid==null){var dn=Yt(Zt),Mn=Qt.call(dn.parsedDateParts,function(Kn){return Kn!=null}),Mn=!isNaN(Zt._d.getTime())&&dn.overflow<0&&!dn.empty&&!dn.invalidEra&&!dn.invalidMonth&&!dn.invalidWeekday&&!dn.weekdayMismatch&&!dn.nullInput&&!dn.invalidFormat&&!dn.userInvalidated&&(!dn.meridiem||dn.meridiem&&Mn);if(Zt._strict&&(Mn=Mn&&dn.charsLeftOver===0&&dn.unusedTokens.length===0&&dn.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(Zt))return Mn;Zt._isValid=Mn}return Zt._isValid}function Wt(Zt){var dn=Ft(NaN);return Zt!=null?Bt(Yt(dn),Zt):Yt(dn).userInvalidated=!0,dn}var Qt=Array.prototype.some||function(Zt){for(var dn=Object(this),Mn=dn.length>>>0,Kn=0;Kn<Mn;Kn++)if(Kn in dn&&Zt.call(this,dn[Kn],Kn,dn))return!0;return!1},rn=st.momentProperties=[],sn=!1;function on(Zt,dn){var Mn,Kn,dr,Hr=rn.length;if(Lt(dn._isAMomentObject)||(Zt._isAMomentObject=dn._isAMomentObject),Lt(dn._i)||(Zt._i=dn._i),Lt(dn._f)||(Zt._f=dn._f),Lt(dn._l)||(Zt._l=dn._l),Lt(dn._strict)||(Zt._strict=dn._strict),Lt(dn._tzm)||(Zt._tzm=dn._tzm),Lt(dn._isUTC)||(Zt._isUTC=dn._isUTC),Lt(dn._offset)||(Zt._offset=dn._offset),Lt(dn._pf)||(Zt._pf=Yt(dn)),Lt(dn._locale)||(Zt._locale=dn._locale),0<Hr)for(Mn=0;Mn<Hr;Mn++)Lt(dr=dn[Kn=rn[Mn]])||(Zt[Kn]=dr);return Zt}function hn(Zt){on(this,Zt),this._d=new Date(Zt._d!=null?Zt._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),sn===!1&&(sn=!0,st.updateOffset(this),sn=!1)}function mn(Zt){return Zt instanceof hn||Zt!=null&&Zt._isAMomentObject!=null}function Cn(Zt){st.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+Zt)}function Tn(Zt,dn){var Mn=!0;return Bt(function(){if(st.deprecationHandler!=null&&st.deprecationHandler(null,Zt),Mn){for(var Kn,dr,Hr=[],ri=arguments.length,ui=0;ui<ri;ui++){if(Kn="",typeof arguments[ui]=="object"){for(dr in Kn+=`
[`+ui+"] ",arguments[0])Et(arguments[0],dr)&&(Kn+=dr+": "+arguments[0][dr]+", ");Kn=Kn.slice(0,-2)}else Kn=arguments[ui];Hr.push(Kn)}Cn(Zt+`
Arguments: `+Array.prototype.slice.call(Hr).join("")+`
`+new Error().stack),Mn=!1}return dn.apply(this,arguments)},dn)}var kn={};function In(Zt,dn){st.deprecationHandler!=null&&st.deprecationHandler(Zt,dn),kn[Zt]||(Cn(dn),kn[Zt]=!0)}function Ln(Zt){return typeof Function<"u"&&Zt instanceof Function||Object.prototype.toString.call(Zt)==="[object Function]"}function pn(Zt,dn){var Mn,Kn=Bt({},Zt);for(Mn in dn)Et(dn,Mn)&&(wt(Zt[Mn])&&wt(dn[Mn])?(Kn[Mn]={},Bt(Kn[Mn],Zt[Mn]),Bt(Kn[Mn],dn[Mn])):dn[Mn]!=null?Kn[Mn]=dn[Mn]:delete Kn[Mn]);for(Mn in Zt)Et(Zt,Mn)&&!Et(dn,Mn)&&wt(Zt[Mn])&&(Kn[Mn]=Bt({},Kn[Mn]));return Kn}function Hn(Zt){Zt!=null&&this.set(Zt)}st.suppressDeprecationWarnings=!1,st.deprecationHandler=null;var yn=Object.keys||function(Zt){var dn,Mn=[];for(dn in Zt)Et(Zt,dn)&&Mn.push(dn);return Mn};function mr(Zt,dn,Mn){var Kn=""+Math.abs(Zt);return(0<=Zt?Mn?"+":"":"-")+Math.pow(10,Math.max(0,dn-Kn.length)).toString().substr(1)+Kn}var vn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,yr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Tr={},Mr={};function rr(Zt,dn,Mn,Kn){var dr=typeof Kn=="string"?function(){return this[Kn]()}:Kn;Zt&&(Mr[Zt]=dr),dn&&(Mr[dn[0]]=function(){return mr(dr.apply(this,arguments),dn[1],dn[2])}),Mn&&(Mr[Mn]=function(){return this.localeData().ordinal(dr.apply(this,arguments),Zt)})}function wr(Zt,dn){return Zt.isValid()?(dn=fr(dn,Zt.localeData()),Tr[dn]=Tr[dn]||function(Mn){for(var Kn,dr=Mn.match(vn),Hr=0,ri=dr.length;Hr<ri;Hr++)Mr[dr[Hr]]?dr[Hr]=Mr[dr[Hr]]:dr[Hr]=(Kn=dr[Hr]).match(/\[[\s\S]/)?Kn.replace(/^\[|\]$/g,""):Kn.replace(/\\/g,"");return function(ui){for(var Ri="",Ii=0;Ii<ri;Ii++)Ri+=Ln(dr[Ii])?dr[Ii].call(ui,Mn):dr[Ii];return Ri}}(dn),Tr[dn](Zt)):Zt.localeData().invalidDate()}function fr(Zt,dn){var Mn=5;function Kn(dr){return dn.longDateFormat(dr)||dr}for(yr.lastIndex=0;0<=Mn&&yr.test(Zt);)Zt=Zt.replace(yr,Kn),yr.lastIndex=0,--Mn;return Zt}var gr={};function Lr(Zt,dn){var Mn=Zt.toLowerCase();gr[Mn]=gr[Mn+"s"]=gr[dn]=Zt}function Pr(Zt){return typeof Zt=="string"?gr[Zt]||gr[Zt.toLowerCase()]:void 0}function lr(Zt){var dn,Mn,Kn={};for(Mn in Zt)Et(Zt,Mn)&&(dn=Pr(Mn))&&(Kn[dn]=Zt[Mn]);return Kn}var qr={};function sr(Zt,dn){qr[Zt]=dn}function pr(Zt){return Zt%4==0&&Zt%100!=0||Zt%400==0}function Er(Zt){return Zt<0?Math.ceil(Zt)||0:Math.floor(Zt)}function ir(dn){var dn=+dn,Mn=0;return Mn=dn!=0&&isFinite(dn)?Er(dn):Mn}function Pn(Zt,dn){return function(Mn){return Mn!=null?(fn(this,Zt,Mn),st.updateOffset(this,dn),this):nn(this,Zt)}}function nn(Zt,dn){return Zt.isValid()?Zt._d["get"+(Zt._isUTC?"UTC":"")+dn]():NaN}function fn(Zt,dn,Mn){Zt.isValid()&&!isNaN(Mn)&&(dn==="FullYear"&&pr(Zt.year())&&Zt.month()===1&&Zt.date()===29?(Mn=ir(Mn),Zt._d["set"+(Zt._isUTC?"UTC":"")+dn](Mn,Zt.month(),Or(Mn,Zt.month()))):Zt._d["set"+(Zt._isUTC?"UTC":"")+dn](Mn))}var cn=/\d/,xo=/\d\d/,Nn=/\d{3}/,Pu=/\d{4}/,Qa=/[+-]?\d{6}/,On=/\d\d?/,cr=/\d\d\d\d?/,Bn=/\d\d\d\d\d\d?/,Qn=/\d{1,3}/,Ga=/\d{1,4}/,ba=/[+-]?\d{1,6}/,Un=/\d+/,or=/[+-]?\d+/,hr=/Z|[+-]\d\d:?\d\d/gi,kr=/Z|[+-]\d\d(?::?\d\d)?/gi,xr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function br(Zt,dn,Mn){vi[Zt]=Ln(dn)?dn:function(Kn,dr){return Kn&&Mn?Mn:dn}}function hi(Zt,dn){return Et(vi,Zt)?vi[Zt](dn._strict,dn._locale):new RegExp(di(Zt.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(Mn,Kn,dr,Hr,ri){return Kn||dr||Hr||ri})))}function di(Zt){return Zt.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var vi={},Ti={};function ki(Zt,dn){var Mn,Kn,dr=dn;for(typeof Zt=="string"&&(Zt=[Zt]),Ot(dn)&&(dr=function(Hr,ri){ri[dn]=ir(Hr)}),Kn=Zt.length,Mn=0;Mn<Kn;Mn++)Ti[Zt[Mn]]=dr}function Di(Zt,dn){ki(Zt,function(Mn,Kn,dr,Hr){dr._w=dr._w||{},dn(Mn,dr._w,dr,Hr)})}var Ci,$r=0,An=1,Sn=2,Wn=3,er=4,vr=5,ti=6,_r=7,li=8;function Or(Zt,dn){if(isNaN(Zt)||isNaN(dn))return NaN;var Mn=(dn%(Mn=12)+Mn)%Mn;return Zt+=(dn-Mn)/12,Mn==1?pr(Zt)?29:28:31-Mn%7%2}Ci=Array.prototype.indexOf||function(Zt){for(var dn=0;dn<this.length;++dn)if(this[dn]===Zt)return dn;return-1},rr("M",["MM",2],"Mo",function(){return this.month()+1}),rr("MMM",0,0,function(Zt){return this.localeData().monthsShort(this,Zt)}),rr("MMMM",0,0,function(Zt){return this.localeData().months(this,Zt)}),Lr("month","M"),sr("month",8),br("M",On),br("MM",On,xo),br("MMM",function(Zt,dn){return dn.monthsShortRegex(Zt)}),br("MMMM",function(Zt,dn){return dn.monthsRegex(Zt)}),ki(["M","MM"],function(Zt,dn){dn[An]=ir(Zt)-1}),ki(["MMM","MMMM"],function(Zt,dn,Mn,Kn){Kn=Mn._locale.monthsParse(Zt,Kn,Mn._strict),Kn!=null?dn[An]=Kn:Yt(Mn).invalidMonth=Zt});var mi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),_i="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xi=xr,Zi=xr;function $i(Zt,dn){var Mn;if(Zt.isValid()){if(typeof dn=="string"){if(/^\d+$/.test(dn))dn=ir(dn);else if(!Ot(dn=Zt.localeData().monthsParse(dn)))return}Mn=Math.min(Zt.date(),Or(Zt.year(),dn)),Zt._d["set"+(Zt._isUTC?"UTC":"")+"Month"](dn,Mn)}}function Qi(Zt){return Zt!=null?($i(this,Zt),st.updateOffset(this,!0),this):nn(this,"Month")}function Eo(){function Zt(ri,ui){return ui.length-ri.length}for(var dn,Mn=[],Kn=[],dr=[],Hr=0;Hr<12;Hr++)dn=Ft([2e3,Hr]),Mn.push(this.monthsShort(dn,"")),Kn.push(this.months(dn,"")),dr.push(this.months(dn,"")),dr.push(this.monthsShort(dn,""));for(Mn.sort(Zt),Kn.sort(Zt),dr.sort(Zt),Hr=0;Hr<12;Hr++)Mn[Hr]=di(Mn[Hr]),Kn[Hr]=di(Kn[Hr]);for(Hr=0;Hr<24;Hr++)dr[Hr]=di(dr[Hr]);this._monthsRegex=new RegExp("^("+dr.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+Kn.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+Mn.join("|")+")","i")}function to(Zt){return pr(Zt)?366:365}rr("Y",0,0,function(){var Zt=this.year();return Zt<=9999?mr(Zt,4):"+"+Zt}),rr(0,["YY",2],0,function(){return this.year()%100}),rr(0,["YYYY",4],0,"year"),rr(0,["YYYYY",5],0,"year"),rr(0,["YYYYYY",6,!0],0,"year"),Lr("year","y"),sr("year",1),br("Y",or),br("YY",On,xo),br("YYYY",Ga,Pu),br("YYYYY",ba,Qa),br("YYYYYY",ba,Qa),ki(["YYYYY","YYYYYY"],$r),ki("YYYY",function(Zt,dn){dn[$r]=Zt.length===2?st.parseTwoDigitYear(Zt):ir(Zt)}),ki("YY",function(Zt,dn){dn[$r]=st.parseTwoDigitYear(Zt)}),ki("Y",function(Zt,dn){dn[$r]=parseInt(Zt,10)}),st.parseTwoDigitYear=function(Zt){return ir(Zt)+(68<ir(Zt)?1900:2e3)};var Ll=Pn("FullYear",!0);function Za(Zt,dn,Mn,Kn,dr,Hr,ri){var ui;return Zt<100&&0<=Zt?(ui=new Date(Zt+400,dn,Mn,Kn,dr,Hr,ri),isFinite(ui.getFullYear())&&ui.setFullYear(Zt)):ui=new Date(Zt,dn,Mn,Kn,dr,Hr,ri),ui}function Hs(Zt){var dn;return Zt<100&&0<=Zt?((dn=Array.prototype.slice.call(arguments))[0]=Zt+400,dn=new Date(Date.UTC.apply(null,dn)),isFinite(dn.getUTCFullYear())&&dn.setUTCFullYear(Zt)):dn=new Date(Date.UTC.apply(null,arguments)),dn}function Ai(Zt,dn,Mn){return Mn=7+dn-Mn,Mn-(7+Hs(Zt,0,Mn).getUTCDay()-dn)%7-1}function io(Zt,ri,ui,Kn,dr){var Hr,ri=1+7*(ri-1)+(7+ui-Kn)%7+Ai(Zt,Kn,dr),ui=ri<=0?to(Hr=Zt-1)+ri:ri>to(Zt)?(Hr=Zt+1,ri-to(Zt)):(Hr=Zt,ri);return{year:Hr,dayOfYear:ui}}function Fs(Zt,dn,Mn){var Kn,dr,Hr=Ai(Zt.year(),dn,Mn),Hr=Math.floor((Zt.dayOfYear()-Hr-1)/7)+1;return Hr<1?Kn=Hr+Xo(dr=Zt.year()-1,dn,Mn):Hr>Xo(Zt.year(),dn,Mn)?(Kn=Hr-Xo(Zt.year(),dn,Mn),dr=Zt.year()+1):(dr=Zt.year(),Kn=Hr),{week:Kn,year:dr}}function Xo(Zt,dr,Mn){var Kn=Ai(Zt,dr,Mn),dr=Ai(Zt+1,dr,Mn);return(to(Zt)-Kn+dr)/7}rr("w",["ww",2],"wo","week"),rr("W",["WW",2],"Wo","isoWeek"),Lr("week","w"),Lr("isoWeek","W"),sr("week",5),sr("isoWeek",5),br("w",On),br("ww",On,xo),br("W",On),br("WW",On,xo),Di(["w","ww","W","WW"],function(Zt,dn,Mn,Kn){dn[Kn.substr(0,1)]=ir(Zt)});function os(Zt,dn){return Zt.slice(dn,7).concat(Zt.slice(0,dn))}rr("d",0,"do","day"),rr("dd",0,0,function(Zt){return this.localeData().weekdaysMin(this,Zt)}),rr("ddd",0,0,function(Zt){return this.localeData().weekdaysShort(this,Zt)}),rr("dddd",0,0,function(Zt){return this.localeData().weekdays(this,Zt)}),rr("e",0,0,"weekday"),rr("E",0,0,"isoWeekday"),Lr("day","d"),Lr("weekday","e"),Lr("isoWeekday","E"),sr("day",11),sr("weekday",11),sr("isoWeekday",11),br("d",On),br("e",On),br("E",On),br("dd",function(Zt,dn){return dn.weekdaysMinRegex(Zt)}),br("ddd",function(Zt,dn){return dn.weekdaysShortRegex(Zt)}),br("dddd",function(Zt,dn){return dn.weekdaysRegex(Zt)}),Di(["dd","ddd","dddd"],function(Zt,dn,Mn,Kn){Kn=Mn._locale.weekdaysParse(Zt,Kn,Mn._strict),Kn!=null?dn.d=Kn:Yt(Mn).invalidWeekday=Zt}),Di(["d","e","E"],function(Zt,dn,Mn,Kn){dn[Kn]=ir(Zt)});var Os="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ns="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qr=xr,Dr=xr,ar=xr;function Ur(){function Zt(Ii,yo){return yo.length-Ii.length}for(var dn,Mn,Kn,dr=[],Hr=[],ri=[],ui=[],Ri=0;Ri<7;Ri++)Kn=Ft([2e3,1]).day(Ri),dn=di(this.weekdaysMin(Kn,"")),Mn=di(this.weekdaysShort(Kn,"")),Kn=di(this.weekdays(Kn,"")),dr.push(dn),Hr.push(Mn),ri.push(Kn),ui.push(dn),ui.push(Mn),ui.push(Kn);dr.sort(Zt),Hr.sort(Zt),ri.sort(Zt),ui.sort(Zt),this._weekdaysRegex=new RegExp("^("+ui.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+ri.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+Hr.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+dr.join("|")+")","i")}function ci(){return this.hours()%12||12}function wi(Zt,dn){rr(Zt,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),dn)})}function Po(Zt,dn){return dn._meridiemParse}rr("H",["HH",2],0,"hour"),rr("h",["hh",2],0,ci),rr("k",["kk",2],0,function(){return this.hours()||24}),rr("hmm",0,0,function(){return""+ci.apply(this)+mr(this.minutes(),2)}),rr("hmmss",0,0,function(){return""+ci.apply(this)+mr(this.minutes(),2)+mr(this.seconds(),2)}),rr("Hmm",0,0,function(){return""+this.hours()+mr(this.minutes(),2)}),rr("Hmmss",0,0,function(){return""+this.hours()+mr(this.minutes(),2)+mr(this.seconds(),2)}),wi("a",!0),wi("A",!1),Lr("hour","h"),sr("hour",13),br("a",Po),br("A",Po),br("H",On),br("h",On),br("k",On),br("HH",On,xo),br("hh",On,xo),br("kk",On,xo),br("hmm",cr),br("hmmss",Bn),br("Hmm",cr),br("Hmmss",Bn),ki(["H","HH"],Wn),ki(["k","kk"],function(Zt,dn,Mn){Zt=ir(Zt),dn[Wn]=Zt===24?0:Zt}),ki(["a","A"],function(Zt,dn,Mn){Mn._isPm=Mn._locale.isPM(Zt),Mn._meridiem=Zt}),ki(["h","hh"],function(Zt,dn,Mn){dn[Wn]=ir(Zt),Yt(Mn).bigHour=!0}),ki("hmm",function(Zt,dn,Mn){var Kn=Zt.length-2;dn[Wn]=ir(Zt.substr(0,Kn)),dn[er]=ir(Zt.substr(Kn)),Yt(Mn).bigHour=!0}),ki("hmmss",function(Zt,dn,Mn){var Kn=Zt.length-4,dr=Zt.length-2;dn[Wn]=ir(Zt.substr(0,Kn)),dn[er]=ir(Zt.substr(Kn,2)),dn[vr]=ir(Zt.substr(dr)),Yt(Mn).bigHour=!0}),ki("Hmm",function(Zt,dn,Mn){var Kn=Zt.length-2;dn[Wn]=ir(Zt.substr(0,Kn)),dn[er]=ir(Zt.substr(Kn))}),ki("Hmmss",function(Zt,dn,Mn){var Kn=Zt.length-4,dr=Zt.length-2;dn[Wn]=ir(Zt.substr(0,Kn)),dn[er]=ir(Zt.substr(Kn,2)),dn[vr]=ir(Zt.substr(dr))}),xr=Pn("Hours",!0);var bo,ss={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:mi,monthsShort:_i,week:{dow:0,doy:6},weekdays:Os,weekdaysMin:Rr,weekdaysShort:Ns,meridiemParse:/[ap]\.?m?\.?/i},oo={},Do={};function Us(Zt){return Zt&&Zt.toLowerCase().replace("_","-")}function aa(Zt){for(var dn,Mn,Kn,dr,Hr=0;Hr<Zt.length;){for(dn=(dr=Us(Zt[Hr]).split("-")).length,Mn=(Mn=Us(Zt[Hr+1]))?Mn.split("-"):null;0<dn;){if(Kn=ra(dr.slice(0,dn).join("-")))return Kn;if(Mn&&Mn.length>=dn&&function(ri,ui){for(var Ri=Math.min(ri.length,ui.length),Ii=0;Ii<Ri;Ii+=1)if(ri[Ii]!==ui[Ii])return Ii;return Ri}(dr,Mn)>=dn-1)break;dn--}Hr++}return bo}function ra(Zt){var dn;if(oo[Zt]===void 0&&!0&&nt&&nt.exports&&Zt.match("^[^/\\\\]*$")!=null)try{dn=bo._abbr,commonjsRequire("./locale/"+Zt),ji(dn)}catch{oo[Zt]=null}return oo[Zt]}function ji(Zt,dn){return Zt&&((dn=Lt(dn)?fo(Zt):so(Zt,dn))?bo=dn:typeof console<"u"&&console.warn&&console.warn("Locale "+Zt+" not found. Did you forget to load it?")),bo._abbr}function so(Zt,dn){if(dn===null)return delete oo[Zt],null;var Mn,Kn=ss;if(dn.abbr=Zt,oo[Zt]!=null)In("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),Kn=oo[Zt]._config;else if(dn.parentLocale!=null)if(oo[dn.parentLocale]!=null)Kn=oo[dn.parentLocale]._config;else{if((Mn=ra(dn.parentLocale))==null)return Do[dn.parentLocale]||(Do[dn.parentLocale]=[]),Do[dn.parentLocale].push({name:Zt,config:dn}),null;Kn=Mn._config}return oo[Zt]=new Hn(pn(Kn,dn)),Do[Zt]&&Do[Zt].forEach(function(dr){so(dr.name,dr.config)}),ji(Zt),oo[Zt]}function fo(Zt){var dn;if(!(Zt=Zt&&Zt._locale&&Zt._locale._abbr?Zt._locale._abbr:Zt))return bo;if(!bt(Zt)){if(dn=ra(Zt))return dn;Zt=[Zt]}return aa(Zt)}function Li(Zt){var dn=Zt._a;return dn&&Yt(Zt).overflow===-2&&(dn=dn[An]<0||11<dn[An]?An:dn[Sn]<1||dn[Sn]>Or(dn[$r],dn[An])?Sn:dn[Wn]<0||24<dn[Wn]||dn[Wn]===24&&(dn[er]!==0||dn[vr]!==0||dn[ti]!==0)?Wn:dn[er]<0||59<dn[er]?er:dn[vr]<0||59<dn[vr]?vr:dn[ti]<0||999<dn[ti]?ti:-1,Yt(Zt)._overflowDayOfYear&&(dn<$r||Sn<dn)&&(dn=Sn),Yt(Zt)._overflowWeeks&&dn===-1&&(dn=_r),Yt(Zt)._overflowWeekday&&dn===-1&&(dn=li),Yt(Zt).overflow=dn),Zt}var ao=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ml=/Z|[+-]\d\d(?::?\d\d)?/,Nr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ia=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_c=/^\/?Date\((-?\d+)/i,No=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,go={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Tu(Zt){var dn,Mn,Kn,dr,Hr,ri,Ri=Zt._i,ui=ao.exec(Ri)||Sr.exec(Ri),Ri=Nr.length,Ii=ia.length;if(ui){for(Yt(Zt).iso=!0,dn=0,Mn=Ri;dn<Mn;dn++)if(Nr[dn][1].exec(ui[1])){dr=Nr[dn][0],Kn=Nr[dn][2]!==!1;break}if(dr==null)Zt._isValid=!1;else{if(ui[3]){for(dn=0,Mn=Ii;dn<Mn;dn++)if(ia[dn][1].exec(ui[3])){Hr=(ui[2]||" ")+ia[dn][0];break}if(Hr==null)return void(Zt._isValid=!1)}if(Kn||Hr==null){if(ui[4]){if(!ml.exec(ui[4]))return void(Zt._isValid=!1);ri="Z"}Zt._f=dr+(Hr||"")+(ri||""),Rl(Zt)}else Zt._isValid=!1}}else Zt._isValid=!1}function Fi(Zt,dn,Mn,Kn,dr,Hr){return Zt=[function(ri){ri=parseInt(ri,10);{if(ri<=49)return 2e3+ri;if(ri<=999)return 1900+ri}return ri}(Zt),_i.indexOf(dn),parseInt(Mn,10),parseInt(Kn,10),parseInt(dr,10)],Hr&&Zt.push(parseInt(Hr,10)),Zt}function mo(Zt){var dn,Mn,Kn,dr,Hr=No.exec(Zt._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));Hr?(dn=Fi(Hr[4],Hr[3],Hr[2],Hr[5],Hr[6],Hr[7]),Mn=Hr[1],Kn=dn,dr=Zt,Mn&&Ns.indexOf(Mn)!==new Date(Kn[0],Kn[1],Kn[2]).getDay()?(Yt(dr).weekdayMismatch=!0,dr._isValid=!1):(Zt._a=dn,Zt._tzm=(Mn=Hr[8],Kn=Hr[9],dr=Hr[10],Mn?go[Mn]:Kn?0:60*(((Mn=parseInt(dr,10))-(Kn=Mn%100))/100)+Kn),Zt._d=Hs.apply(null,Zt._a),Zt._d.setUTCMinutes(Zt._d.getUTCMinutes()-Zt._tzm),Yt(Zt).rfc2822=!0)):Zt._isValid=!1}function Ka(Zt,dn,Mn){return Zt!=null?Zt:dn!=null?dn:Mn}function ic(Zt){var dn,Mn,Kn,dr,Hr,ri,ui,Ri,Ii,yo,lo,Zo=[];if(!Zt._d){for(Kn=Zt,dr=new Date(st.now()),Mn=Kn._useUTC?[dr.getUTCFullYear(),dr.getUTCMonth(),dr.getUTCDate()]:[dr.getFullYear(),dr.getMonth(),dr.getDate()],Zt._w&&Zt._a[Sn]==null&&Zt._a[An]==null&&((dr=(Kn=Zt)._w).GG!=null||dr.W!=null||dr.E!=null?(Ri=1,Ii=4,Hr=Ka(dr.GG,Kn._a[$r],Fs(jo(),1,4).year),ri=Ka(dr.W,1),((ui=Ka(dr.E,1))<1||7<ui)&&(yo=!0)):(Ri=Kn._locale._week.dow,Ii=Kn._locale._week.doy,lo=Fs(jo(),Ri,Ii),Hr=Ka(dr.gg,Kn._a[$r],lo.year),ri=Ka(dr.w,lo.week),dr.d!=null?((ui=dr.d)<0||6<ui)&&(yo=!0):dr.e!=null?(ui=dr.e+Ri,(dr.e<0||6<dr.e)&&(yo=!0)):ui=Ri),ri<1||ri>Xo(Hr,Ri,Ii)?Yt(Kn)._overflowWeeks=!0:yo!=null?Yt(Kn)._overflowWeekday=!0:(lo=io(Hr,ri,ui,Ri,Ii),Kn._a[$r]=lo.year,Kn._dayOfYear=lo.dayOfYear)),Zt._dayOfYear!=null&&(dr=Ka(Zt._a[$r],Mn[$r]),(Zt._dayOfYear>to(dr)||Zt._dayOfYear===0)&&(Yt(Zt)._overflowDayOfYear=!0),yo=Hs(dr,0,Zt._dayOfYear),Zt._a[An]=yo.getUTCMonth(),Zt._a[Sn]=yo.getUTCDate()),dn=0;dn<3&&Zt._a[dn]==null;++dn)Zt._a[dn]=Zo[dn]=Mn[dn];for(;dn<7;dn++)Zt._a[dn]=Zo[dn]=Zt._a[dn]==null?dn===2?1:0:Zt._a[dn];Zt._a[Wn]===24&&Zt._a[er]===0&&Zt._a[vr]===0&&Zt._a[ti]===0&&(Zt._nextDay=!0,Zt._a[Wn]=0),Zt._d=(Zt._useUTC?Hs:Za).apply(null,Zo),Hr=Zt._useUTC?Zt._d.getUTCDay():Zt._d.getDay(),Zt._tzm!=null&&Zt._d.setUTCMinutes(Zt._d.getUTCMinutes()-Zt._tzm),Zt._nextDay&&(Zt._a[Wn]=24),Zt._w&&Zt._w.d!==void 0&&Zt._w.d!==Hr&&(Yt(Zt).weekdayMismatch=!0)}}function Rl(Zt){if(Zt._f===st.ISO_8601)Tu(Zt);else if(Zt._f===st.RFC_2822)mo(Zt);else{Zt._a=[],Yt(Zt).empty=!0;for(var dn,Mn,Kn,dr,Hr,ri=""+Zt._i,ui=ri.length,Ri=0,Ii=fr(Zt._f,Zt._locale).match(vn)||[],yo=Ii.length,lo=0;lo<yo;lo++)Mn=Ii[lo],(dn=(ri.match(hi(Mn,Zt))||[])[0])&&(0<(Kn=ri.substr(0,ri.indexOf(dn))).length&&Yt(Zt).unusedInput.push(Kn),ri=ri.slice(ri.indexOf(dn)+dn.length),Ri+=dn.length),Mr[Mn]?(dn?Yt(Zt).empty=!1:Yt(Zt).unusedTokens.push(Mn),Kn=Mn,Hr=Zt,(dr=dn)!=null&&Et(Ti,Kn)&&Ti[Kn](dr,Hr._a,Hr,Kn)):Zt._strict&&!dn&&Yt(Zt).unusedTokens.push(Mn);Yt(Zt).charsLeftOver=ui-Ri,0<ri.length&&Yt(Zt).unusedInput.push(ri),Zt._a[Wn]<=12&&Yt(Zt).bigHour===!0&&0<Zt._a[Wn]&&(Yt(Zt).bigHour=void 0),Yt(Zt).parsedDateParts=Zt._a.slice(0),Yt(Zt).meridiem=Zt._meridiem,Zt._a[Wn]=function(Zo,Ds,Ms){return Ms==null?Ds:Zo.meridiemHour!=null?Zo.meridiemHour(Ds,Ms):Zo.isPM!=null?((Zo=Zo.isPM(Ms))&&Ds<12&&(Ds+=12),Ds=Zo||Ds!==12?Ds:0):Ds}(Zt._locale,Zt._a[Wn],Zt._meridiem),(ui=Yt(Zt).era)!==null&&(Zt._a[$r]=Zt._locale.erasConvertYear(ui,Zt._a[$r])),ic(Zt),Li(Zt)}}function Qs(Zt){var dn,Mn,Kn,dr=Zt._i,Hr=Zt._f;return Zt._locale=Zt._locale||fo(Zt._l),dr===null||Hr===void 0&&dr===""?Wt({nullInput:!0}):(typeof dr=="string"&&(Zt._i=dr=Zt._locale.preparse(dr)),mn(dr)?new hn(Li(dr)):(Rt(dr)?Zt._d=dr:bt(Hr)?function(ri){var ui,Ri,Ii,yo,lo,Zo,Ds=!1,Ms=ri._f.length;if(Ms===0)return Yt(ri).invalidFormat=!0,ri._d=new Date(NaN);for(yo=0;yo<Ms;yo++)lo=0,Zo=!1,ui=on({},ri),ri._useUTC!=null&&(ui._useUTC=ri._useUTC),ui._f=ri._f[yo],Rl(ui),Jt(ui)&&(Zo=!0),lo=(lo+=Yt(ui).charsLeftOver)+10*Yt(ui).unusedTokens.length,Yt(ui).score=lo,Ds?lo<Ii&&(Ii=lo,Ri=ui):(Ii==null||lo<Ii||Zo)&&(Ii=lo,Ri=ui,Zo&&(Ds=!0));Bt(ri,Ri||ui)}(Zt):Hr?Rl(Zt):Lt(Hr=(dr=Zt)._i)?dr._d=new Date(st.now()):Rt(Hr)?dr._d=new Date(Hr.valueOf()):typeof Hr=="string"?(Mn=dr,(dn=_c.exec(Mn._i))!==null?Mn._d=new Date(+dn[1]):(Tu(Mn),Mn._isValid===!1&&(delete Mn._isValid,mo(Mn),Mn._isValid===!1&&(delete Mn._isValid,Mn._strict?Mn._isValid=!1:st.createFromInputFallback(Mn))))):bt(Hr)?(dr._a=Dt(Hr.slice(0),function(ri){return parseInt(ri,10)}),ic(dr)):wt(Hr)?(dn=dr)._d||(Kn=(Mn=lr(dn._i)).day===void 0?Mn.date:Mn.day,dn._a=Dt([Mn.year,Mn.month,Kn,Mn.hour,Mn.minute,Mn.second,Mn.millisecond],function(ri){return ri&&parseInt(ri,10)}),ic(dn)):Ot(Hr)?dr._d=new Date(Hr):st.createFromInputFallback(dr),Jt(Zt)||(Zt._d=null),Zt))}function Ho(Zt,dn,Mn,Kn,dr){var Hr={};return dn!==!0&&dn!==!1||(Kn=dn,dn=void 0),Mn!==!0&&Mn!==!1||(Kn=Mn,Mn=void 0),(wt(Zt)&&kt(Zt)||bt(Zt)&&Zt.length===0)&&(Zt=void 0),Hr._isAMomentObject=!0,Hr._useUTC=Hr._isUTC=dr,Hr._l=Mn,Hr._i=Zt,Hr._f=dn,Hr._strict=Kn,(dr=new hn(Li(Qs(dr=Hr))))._nextDay&&(dr.add(1,"d"),dr._nextDay=void 0),dr}function jo(Zt,dn,Mn,Kn){return Ho(Zt,dn,Mn,Kn,!1)}st.createFromInputFallback=Tn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(Zt){Zt._d=new Date(Zt._i+(Zt._useUTC?" UTC":""))}),st.ISO_8601=function(){},st.RFC_2822=function(){},cr=Tn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Zt=jo.apply(null,arguments);return this.isValid()&&Zt.isValid()?Zt<this?this:Zt:Wt()}),Bn=Tn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Zt=jo.apply(null,arguments);return this.isValid()&&Zt.isValid()?this<Zt?this:Zt:Wt()});function la(Zt,dn){var Mn,Kn;if(!(dn=dn.length===1&&bt(dn[0])?dn[0]:dn).length)return jo();for(Mn=dn[0],Kn=1;Kn<dn.length;++Kn)dn[Kn].isValid()&&!dn[Kn][Zt](Mn)||(Mn=dn[Kn]);return Mn}var Tl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ya(dn){var dn=lr(dn),Mn=dn.year||0,Kn=dn.quarter||0,dr=dn.month||0,Hr=dn.week||dn.isoWeek||0,ri=dn.day||0,ui=dn.hour||0,Ri=dn.minute||0,Ii=dn.second||0,yo=dn.millisecond||0;this._isValid=function(lo){var Zo,Ds,Ms=!1,wc=Tl.length;for(Zo in lo)if(Et(lo,Zo)&&(Ci.call(Tl,Zo)===-1||lo[Zo]!=null&&isNaN(lo[Zo])))return!1;for(Ds=0;Ds<wc;++Ds)if(lo[Tl[Ds]]){if(Ms)return!1;parseFloat(lo[Tl[Ds]])!==ir(lo[Tl[Ds]])&&(Ms=!0)}return!0}(dn),this._milliseconds=+yo+1e3*Ii+6e4*Ri+1e3*ui*60*60,this._days=+ri+7*Hr,this._months=+dr+3*Kn+12*Mn,this._data={},this._locale=fo(),this._bubble()}function yl(Zt){return Zt instanceof ya}function ja(Zt){return Zt<0?-1*Math.round(-1*Zt):Math.round(Zt)}function ou(Zt,dn){rr(Zt,0,0,function(){var Mn=this.utcOffset(),Kn="+";return Mn<0&&(Mn=-Mn,Kn="-"),Kn+mr(~~(Mn/60),2)+dn+mr(~~Mn%60,2)})}ou("Z",":"),ou("ZZ",""),br("Z",kr),br("ZZ",kr),ki(["Z","ZZ"],function(Zt,dn,Mn){Mn._useUTC=!0,Mn._tzm=bc(kr,Zt)});var Rc=/([\+\-]|\d\d)/gi;function bc(Zt,Mn){var Mn=(Mn||"").match(Zt);return Mn===null?null:(Mn=60*(Zt=((Mn[Mn.length-1]||[])+"").match(Rc)||["-",0,0])[1]+ir(Zt[2]))===0?0:Zt[0]==="+"?Mn:-Mn}function Ja(Zt,dn){var Mn;return dn._isUTC?(dn=dn.clone(),Mn=(mn(Zt)||Rt(Zt)?Zt:jo(Zt)).valueOf()-dn.valueOf(),dn._d.setTime(dn._d.valueOf()+Mn),st.updateOffset(dn,!1),dn):jo(Zt).local()}function ku(Zt){return-Math.round(Zt._d.getTimezoneOffset())}function Au(){return!!this.isValid()&&this._isUTC&&this._offset===0}st.updateOffset=function(){};var Lu=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Bo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function va(Zt,dn){var Mn,Kn=Zt,dr=null;return yl(Zt)?Kn={ms:Zt._milliseconds,d:Zt._days,M:Zt._months}:Ot(Zt)||!isNaN(+Zt)?(Kn={},dn?Kn[dn]=+Zt:Kn.milliseconds=+Zt):(dr=Lu.exec(Zt))?(Mn=dr[1]==="-"?-1:1,Kn={y:0,d:ir(dr[Sn])*Mn,h:ir(dr[Wn])*Mn,m:ir(dr[er])*Mn,s:ir(dr[vr])*Mn,ms:ir(ja(1e3*dr[ti]))*Mn}):(dr=Bo.exec(Zt))?(Mn=dr[1]==="-"?-1:1,Kn={y:co(dr[2],Mn),M:co(dr[3],Mn),w:co(dr[4],Mn),d:co(dr[5],Mn),h:co(dr[6],Mn),m:co(dr[7],Mn),s:co(dr[8],Mn)}):Kn==null?Kn={}:typeof Kn=="object"&&("from"in Kn||"to"in Kn)&&(dn=function(Hr,ri){var ui;return!Hr.isValid()||!ri.isValid()?{milliseconds:0,months:0}:(ri=Ja(ri,Hr),Hr.isBefore(ri)?ui=kl(Hr,ri):((ui=kl(ri,Hr)).milliseconds=-ui.milliseconds,ui.months=-ui.months),ui)}(jo(Kn.from),jo(Kn.to)),(Kn={}).ms=dn.milliseconds,Kn.M=dn.months),dr=new ya(Kn),yl(Zt)&&Et(Zt,"_locale")&&(dr._locale=Zt._locale),yl(Zt)&&Et(Zt,"_isValid")&&(dr._isValid=Zt._isValid),dr}function co(Zt,dn){return Zt=Zt&&parseFloat(Zt.replace(",",".")),(isNaN(Zt)?0:Zt)*dn}function kl(Zt,dn){var Mn={};return Mn.months=dn.month()-Zt.month()+12*(dn.year()-Zt.year()),Zt.clone().add(Mn.months,"M").isAfter(dn)&&--Mn.months,Mn.milliseconds=+dn-+Zt.clone().add(Mn.months,"M"),Mn}function Jh(Zt,dn){return function(Mn,Kn){var dr;return Kn===null||isNaN(+Kn)||(In(dn,"moment()."+dn+"(period, number) is deprecated. Please use moment()."+dn+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),dr=Mn,Mn=Kn,Kn=dr),Qh(this,va(Mn,Kn),Zt),this}}function Qh(Zt,ri,Mn,Kn){var dr=ri._milliseconds,Hr=ja(ri._days),ri=ja(ri._months);Zt.isValid()&&(Kn=Kn==null||Kn,ri&&$i(Zt,nn(Zt,"Month")+ri*Mn),Hr&&fn(Zt,"Date",nn(Zt,"Date")+Hr*Mn),dr&&Zt._d.setTime(Zt._d.valueOf()+dr*Mn),Kn&&st.updateOffset(Zt,Hr||ri))}va.fn=ya.prototype,va.invalid=function(){return va(NaN)},mi=Jh(1,"add"),Os=Jh(-1,"subtract");function Ju(Zt){return typeof Zt=="string"||Zt instanceof String}function Iu(Zt){return mn(Zt)||Rt(Zt)||Ju(Zt)||Ot(Zt)||function(dn){var Mn=bt(dn),Kn=!1;return Mn&&(Kn=dn.filter(function(dr){return!Ot(dr)&&Ju(dn)}).length===0),Mn&&Kn}(Zt)||function(dn){var Mn,Kn,dr=wt(dn)&&!kt(dn),Hr=!1,ri=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],ui=ri.length;for(Mn=0;Mn<ui;Mn+=1)Kn=ri[Mn],Hr=Hr||Et(dn,Kn);return dr&&Hr}(Zt)||Zt==null}function Qu(Zt,dr){if(Zt.date()<dr.date())return-Qu(dr,Zt);var Mn=12*(dr.year()-Zt.year())+(dr.month()-Zt.month()),Kn=Zt.clone().add(Mn,"months"),dr=dr-Kn<0?(dr-Kn)/(Kn-Zt.clone().add(Mn-1,"months")):(dr-Kn)/(Zt.clone().add(1+Mn,"months")-Kn);return-(Mn+dr)||0}function Nl(Zt){return Zt===void 0?this._locale._abbr:((Zt=fo(Zt))!=null&&(this._locale=Zt),this)}st.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",st.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Rr=Tn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(Zt){return Zt===void 0?this.localeData():this.locale(Zt)});function da(){return this._locale}var Nc=126227808e5;function su(Zt,dn){return(Zt%dn+dn)%dn}function Md(Zt,dn,Mn){return Zt<100&&0<=Zt?new Date(Zt+400,dn,Mn)-Nc:new Date(Zt,dn,Mn).valueOf()}function wf(Zt,dn,Mn){return Zt<100&&0<=Zt?Date.UTC(Zt+400,dn,Mn)-Nc:Date.UTC(Zt,dn,Mn)}function ed(Zt,dn){return dn.erasAbbrRegex(Zt)}function Al(){for(var Zt=[],dn=[],Mn=[],Kn=[],dr=this.eras(),Hr=0,ri=dr.length;Hr<ri;++Hr)dn.push(di(dr[Hr].name)),Zt.push(di(dr[Hr].abbr)),Mn.push(di(dr[Hr].narrow)),Kn.push(di(dr[Hr].name)),Kn.push(di(dr[Hr].abbr)),Kn.push(di(dr[Hr].narrow));this._erasRegex=new RegExp("^("+Kn.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+dn.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+Zt.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+Mn.join("|")+")","i")}function Ua(Zt,dn){rr(0,[Zt,Zt.length],0,dn)}function Th(Zt,dn,Mn,Kn,dr){var Hr;return Zt==null?Fs(this,Kn,dr).year:(Hr=Xo(Zt,Kn,dr),function(ri,ui,Ri,Ii,yo){return ri=io(ri,ui,Ri,Ii,yo),ui=Hs(ri.year,0,ri.dayOfYear),this.year(ui.getUTCFullYear()),this.month(ui.getUTCMonth()),this.date(ui.getUTCDate()),this}.call(this,Zt,dn=Hr<dn?Hr:dn,Mn,Kn,dr))}rr("N",0,0,"eraAbbr"),rr("NN",0,0,"eraAbbr"),rr("NNN",0,0,"eraAbbr"),rr("NNNN",0,0,"eraName"),rr("NNNNN",0,0,"eraNarrow"),rr("y",["y",1],"yo","eraYear"),rr("y",["yy",2],0,"eraYear"),rr("y",["yyy",3],0,"eraYear"),rr("y",["yyyy",4],0,"eraYear"),br("N",ed),br("NN",ed),br("NNN",ed),br("NNNN",function(Zt,dn){return dn.erasNameRegex(Zt)}),br("NNNNN",function(Zt,dn){return dn.erasNarrowRegex(Zt)}),ki(["N","NN","NNN","NNNN","NNNNN"],function(Zt,dn,Mn,Kn){Kn=Mn._locale.erasParse(Zt,Kn,Mn._strict),Kn?Yt(Mn).era=Kn:Yt(Mn).invalidEra=Zt}),br("y",Un),br("yy",Un),br("yyy",Un),br("yyyy",Un),br("yo",function(Zt,dn){return dn._eraYearOrdinalRegex||Un}),ki(["y","yy","yyy","yyyy"],$r),ki(["yo"],function(Zt,dn,Mn,Kn){var dr;Mn._locale._eraYearOrdinalRegex&&(dr=Zt.match(Mn._locale._eraYearOrdinalRegex)),Mn._locale.eraYearOrdinalParse?dn[$r]=Mn._locale.eraYearOrdinalParse(Zt,dr):dn[$r]=parseInt(Zt,10)}),rr(0,["gg",2],0,function(){return this.weekYear()%100}),rr(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ua("gggg","weekYear"),Ua("ggggg","weekYear"),Ua("GGGG","isoWeekYear"),Ua("GGGGG","isoWeekYear"),Lr("weekYear","gg"),Lr("isoWeekYear","GG"),sr("weekYear",1),sr("isoWeekYear",1),br("G",or),br("g",or),br("GG",On,xo),br("gg",On,xo),br("GGGG",Ga,Pu),br("gggg",Ga,Pu),br("GGGGG",ba,Qa),br("ggggg",ba,Qa),Di(["gggg","ggggg","GGGG","GGGGG"],function(Zt,dn,Mn,Kn){dn[Kn.substr(0,2)]=ir(Zt)}),Di(["gg","GG"],function(Zt,dn,Mn,Kn){dn[Kn]=st.parseTwoDigitYear(Zt)}),rr("Q",0,"Qo","quarter"),Lr("quarter","Q"),sr("quarter",7),br("Q",cn),ki("Q",function(Zt,dn){dn[An]=3*(ir(Zt)-1)}),rr("D",["DD",2],"Do","date"),Lr("date","D"),sr("date",9),br("D",On),br("DD",On,xo),br("Do",function(Zt,dn){return Zt?dn._dayOfMonthOrdinalParse||dn._ordinalParse:dn._dayOfMonthOrdinalParseLenient}),ki(["D","DD"],Sn),ki("Do",function(Zt,dn){dn[Sn]=ir(Zt.match(On)[0])}),Ga=Pn("Date",!0),rr("DDD",["DDDD",3],"DDDo","dayOfYear"),Lr("dayOfYear","DDD"),sr("dayOfYear",4),br("DDD",Qn),br("DDDD",Nn),ki(["DDD","DDDD"],function(Zt,dn,Mn){Mn._dayOfYear=ir(Zt)}),rr("m",["mm",2],0,"minute"),Lr("minute","m"),sr("minute",14),br("m",On),br("mm",On,xo),ki(["m","mm"],er);var Fo,Pu=Pn("Minutes",!1),ba=(rr("s",["ss",2],0,"second"),Lr("second","s"),sr("second",15),br("s",On),br("ss",On,xo),ki(["s","ss"],vr),Pn("Seconds",!1));for(rr("S",0,0,function(){return~~(this.millisecond()/100)}),rr(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),rr(0,["SSS",3],0,"millisecond"),rr(0,["SSSS",4],0,function(){return 10*this.millisecond()}),rr(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),rr(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),rr(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),rr(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),rr(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Lr("millisecond","ms"),sr("millisecond",16),br("S",Qn,cn),br("SS",Qn,xo),br("SSS",Qn,Nn),Fo="SSSS";Fo.length<=9;Fo+="S")br(Fo,Un);function eh(Zt,dn){dn[ti]=ir(1e3*("0."+Zt))}for(Fo="S";Fo.length<=9;Fo+="S")ki(Fo,eh);Qa=Pn("Milliseconds",!1),rr("z",0,0,"zoneAbbr"),rr("zz",0,0,"zoneName"),cn=hn.prototype;function th(Zt){return Zt}cn.add=mi,cn.calendar=function(Mn,dr){arguments.length===1&&(arguments[0]?Iu(arguments[0])?(Mn=arguments[0],dr=void 0):function(Hr){for(var ri=wt(Hr)&&!kt(Hr),ui=!1,Ri=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Ii=0;Ii<Ri.length;Ii+=1)ui=ui||Et(Hr,Ri[Ii]);return ri&&ui}(arguments[0])&&(dr=arguments[0],Mn=void 0):dr=Mn=void 0);var Mn=Mn||jo(),Kn=Ja(Mn,this).startOf("day"),Kn=st.calendarFormat(this,Kn)||"sameElse",dr=dr&&(Ln(dr[Kn])?dr[Kn].call(this,Mn):dr[Kn]);return this.format(dr||this.localeData().calendar(Kn,this,jo(Mn)))},cn.clone=function(){return new hn(this)},cn.diff=function(Zt,dn,Mn){var Kn,dr,Hr;if(!this.isValid())return NaN;if(!(Kn=Ja(Zt,this)).isValid())return NaN;switch(dr=6e4*(Kn.utcOffset()-this.utcOffset()),dn=Pr(dn)){case"year":Hr=Qu(this,Kn)/12;break;case"month":Hr=Qu(this,Kn);break;case"quarter":Hr=Qu(this,Kn)/3;break;case"second":Hr=(this-Kn)/1e3;break;case"minute":Hr=(this-Kn)/6e4;break;case"hour":Hr=(this-Kn)/36e5;break;case"day":Hr=(this-Kn-dr)/864e5;break;case"week":Hr=(this-Kn-dr)/6048e5;break;default:Hr=this-Kn}return Mn?Hr:Er(Hr)},cn.endOf=function(Zt){var dn,Mn;if((Zt=Pr(Zt))===void 0||Zt==="millisecond"||!this.isValid())return this;switch(Mn=this._isUTC?wf:Md,Zt){case"year":dn=Mn(this.year()+1,0,1)-1;break;case"quarter":dn=Mn(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":dn=Mn(this.year(),this.month()+1,1)-1;break;case"week":dn=Mn(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":dn=Mn(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":dn=Mn(this.year(),this.month(),this.date()+1)-1;break;case"hour":dn=this._d.valueOf(),dn+=36e5-su(dn+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":dn=this._d.valueOf(),dn+=6e4-su(dn,6e4)-1;break;case"second":dn=this._d.valueOf(),dn+=1e3-su(dn,1e3)-1;break}return this._d.setTime(dn),st.updateOffset(this,!0),this},cn.format=function(Zt){return Zt=Zt||(this.isUtc()?st.defaultFormatUtc:st.defaultFormat),Zt=wr(this,Zt),this.localeData().postformat(Zt)},cn.from=function(Zt,dn){return this.isValid()&&(mn(Zt)&&Zt.isValid()||jo(Zt).isValid())?va({to:this,from:Zt}).locale(this.locale()).humanize(!dn):this.localeData().invalidDate()},cn.fromNow=function(Zt){return this.from(jo(),Zt)},cn.to=function(Zt,dn){return this.isValid()&&(mn(Zt)&&Zt.isValid()||jo(Zt).isValid())?va({from:this,to:Zt}).locale(this.locale()).humanize(!dn):this.localeData().invalidDate()},cn.toNow=function(Zt){return this.to(jo(),Zt)},cn.get=function(Zt){return Ln(this[Zt=Pr(Zt)])?this[Zt]():this},cn.invalidAt=function(){return Yt(this).overflow},cn.isAfter=function(Zt,dn){return Zt=mn(Zt)?Zt:jo(Zt),!(!this.isValid()||!Zt.isValid())&&((dn=Pr(dn)||"millisecond")==="millisecond"?this.valueOf()>Zt.valueOf():Zt.valueOf()<this.clone().startOf(dn).valueOf())},cn.isBefore=function(Zt,dn){return Zt=mn(Zt)?Zt:jo(Zt),!(!this.isValid()||!Zt.isValid())&&((dn=Pr(dn)||"millisecond")==="millisecond"?this.valueOf()<Zt.valueOf():this.clone().endOf(dn).valueOf()<Zt.valueOf())},cn.isBetween=function(Zt,dn,Mn,Kn){return Zt=mn(Zt)?Zt:jo(Zt),dn=mn(dn)?dn:jo(dn),!!(this.isValid()&&Zt.isValid()&&dn.isValid())&&((Kn=Kn||"()")[0]==="("?this.isAfter(Zt,Mn):!this.isBefore(Zt,Mn))&&(Kn[1]===")"?this.isBefore(dn,Mn):!this.isAfter(dn,Mn))},cn.isSame=function(Mn,dn){var Mn=mn(Mn)?Mn:jo(Mn);return!(!this.isValid()||!Mn.isValid())&&((dn=Pr(dn)||"millisecond")==="millisecond"?this.valueOf()===Mn.valueOf():(Mn=Mn.valueOf(),this.clone().startOf(dn).valueOf()<=Mn&&Mn<=this.clone().endOf(dn).valueOf()))},cn.isSameOrAfter=function(Zt,dn){return this.isSame(Zt,dn)||this.isAfter(Zt,dn)},cn.isSameOrBefore=function(Zt,dn){return this.isSame(Zt,dn)||this.isBefore(Zt,dn)},cn.isValid=function(){return Jt(this)},cn.lang=Rr,cn.locale=Nl,cn.localeData=da,cn.max=Bn,cn.min=cr,cn.parsingFlags=function(){return Bt({},Yt(this))},cn.set=function(Zt,dn){if(typeof Zt=="object")for(var Mn=function(Hr){var ri,ui=[];for(ri in Hr)Et(Hr,ri)&&ui.push({unit:ri,priority:qr[ri]});return ui.sort(function(Ri,Ii){return Ri.priority-Ii.priority}),ui}(Zt=lr(Zt)),Kn=Mn.length,dr=0;dr<Kn;dr++)this[Mn[dr].unit](Zt[Mn[dr].unit]);else if(Ln(this[Zt=Pr(Zt)]))return this[Zt](dn);return this},cn.startOf=function(Zt){var dn,Mn;if((Zt=Pr(Zt))===void 0||Zt==="millisecond"||!this.isValid())return this;switch(Mn=this._isUTC?wf:Md,Zt){case"year":dn=Mn(this.year(),0,1);break;case"quarter":dn=Mn(this.year(),this.month()-this.month()%3,1);break;case"month":dn=Mn(this.year(),this.month(),1);break;case"week":dn=Mn(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":dn=Mn(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":dn=Mn(this.year(),this.month(),this.date());break;case"hour":dn=this._d.valueOf(),dn-=su(dn+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":dn=this._d.valueOf(),dn-=su(dn,6e4);break;case"second":dn=this._d.valueOf(),dn-=su(dn,1e3);break}return this._d.setTime(dn),st.updateOffset(this,!0),this},cn.subtract=Os,cn.toArray=function(){var Zt=this;return[Zt.year(),Zt.month(),Zt.date(),Zt.hour(),Zt.minute(),Zt.second(),Zt.millisecond()]},cn.toObject=function(){var Zt=this;return{years:Zt.year(),months:Zt.month(),date:Zt.date(),hours:Zt.hours(),minutes:Zt.minutes(),seconds:Zt.seconds(),milliseconds:Zt.milliseconds()}},cn.toDate=function(){return new Date(this.valueOf())},cn.toISOString=function(Zt){if(!this.isValid())return null;var dn=(Zt=Zt!==!0)?this.clone().utc():this;return dn.year()<0||9999<dn.year()?wr(dn,Zt?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ln(Date.prototype.toISOString)?Zt?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",wr(dn,"Z")):wr(dn,Zt?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},cn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var Zt,dn="moment",Mn="";return this.isLocal()||(dn=this.utcOffset()===0?"moment.utc":"moment.parseZone",Mn="Z"),dn="["+dn+'("]',Zt=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(dn+Zt+"-MM-DD[T]HH:mm:ss.SSS"+(Mn+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(cn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),cn.toJSON=function(){return this.isValid()?this.toISOString():null},cn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},cn.unix=function(){return Math.floor(this.valueOf()/1e3)},cn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},cn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},cn.eraName=function(){for(var Zt,dn=this.localeData().eras(),Mn=0,Kn=dn.length;Mn<Kn;++Mn)if(Zt=this.clone().startOf("day").valueOf(),dn[Mn].since<=Zt&&Zt<=dn[Mn].until||dn[Mn].until<=Zt&&Zt<=dn[Mn].since)return dn[Mn].name;return""},cn.eraNarrow=function(){for(var Zt,dn=this.localeData().eras(),Mn=0,Kn=dn.length;Mn<Kn;++Mn)if(Zt=this.clone().startOf("day").valueOf(),dn[Mn].since<=Zt&&Zt<=dn[Mn].until||dn[Mn].until<=Zt&&Zt<=dn[Mn].since)return dn[Mn].narrow;return""},cn.eraAbbr=function(){for(var Zt,dn=this.localeData().eras(),Mn=0,Kn=dn.length;Mn<Kn;++Mn)if(Zt=this.clone().startOf("day").valueOf(),dn[Mn].since<=Zt&&Zt<=dn[Mn].until||dn[Mn].until<=Zt&&Zt<=dn[Mn].since)return dn[Mn].abbr;return""},cn.eraYear=function(){for(var Zt,dn,Mn=this.localeData().eras(),Kn=0,dr=Mn.length;Kn<dr;++Kn)if(Zt=Mn[Kn].since<=Mn[Kn].until?1:-1,dn=this.clone().startOf("day").valueOf(),Mn[Kn].since<=dn&&dn<=Mn[Kn].until||Mn[Kn].until<=dn&&dn<=Mn[Kn].since)return(this.year()-st(Mn[Kn].since).year())*Zt+Mn[Kn].offset;return this.year()},cn.year=Ll,cn.isLeapYear=function(){return pr(this.year())},cn.weekYear=function(Zt){return Th.call(this,Zt,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},cn.isoWeekYear=function(Zt){return Th.call(this,Zt,this.isoWeek(),this.isoWeekday(),1,4)},cn.quarter=cn.quarters=function(Zt){return Zt==null?Math.ceil((this.month()+1)/3):this.month(3*(Zt-1)+this.month()%3)},cn.month=Qi,cn.daysInMonth=function(){return Or(this.year(),this.month())},cn.week=cn.weeks=function(Zt){var dn=this.localeData().week(this);return Zt==null?dn:this.add(7*(Zt-dn),"d")},cn.isoWeek=cn.isoWeeks=function(Zt){var dn=Fs(this,1,4).week;return Zt==null?dn:this.add(7*(Zt-dn),"d")},cn.weeksInYear=function(){var Zt=this.localeData()._week;return Xo(this.year(),Zt.dow,Zt.doy)},cn.weeksInWeekYear=function(){var Zt=this.localeData()._week;return Xo(this.weekYear(),Zt.dow,Zt.doy)},cn.isoWeeksInYear=function(){return Xo(this.year(),1,4)},cn.isoWeeksInISOWeekYear=function(){return Xo(this.isoWeekYear(),1,4)},cn.date=Ga,cn.day=cn.days=function(Zt){if(!this.isValid())return Zt!=null?this:NaN;var dn,Mn,Kn=this._isUTC?this._d.getUTCDay():this._d.getDay();return Zt!=null?(dn=Zt,Mn=this.localeData(),Zt=typeof dn!="string"?dn:isNaN(dn)?typeof(dn=Mn.weekdaysParse(dn))=="number"?dn:null:parseInt(dn,10),this.add(Zt-Kn,"d")):Kn},cn.weekday=function(Zt){if(!this.isValid())return Zt!=null?this:NaN;var dn=(this.day()+7-this.localeData()._week.dow)%7;return Zt==null?dn:this.add(Zt-dn,"d")},cn.isoWeekday=function(Zt){return this.isValid()?Zt!=null?(dn=Zt,Mn=this.localeData(),Mn=typeof dn=="string"?Mn.weekdaysParse(dn)%7||7:isNaN(dn)?null:dn,this.day(this.day()%7?Mn:Mn-7)):this.day()||7:Zt!=null?this:NaN;var dn,Mn},cn.dayOfYear=function(Zt){var dn=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return Zt==null?dn:this.add(Zt-dn,"d")},cn.hour=cn.hours=xr,cn.minute=cn.minutes=Pu,cn.second=cn.seconds=ba,cn.millisecond=cn.milliseconds=Qa,cn.utcOffset=function(Zt,dn,Mn){var Kn,dr=this._offset||0;if(!this.isValid())return Zt!=null?this:NaN;if(Zt==null)return this._isUTC?dr:ku(this);if(typeof Zt=="string"){if((Zt=bc(kr,Zt))===null)return this}else Math.abs(Zt)<16&&!Mn&&(Zt*=60);return!this._isUTC&&dn&&(Kn=ku(this)),this._offset=Zt,this._isUTC=!0,Kn!=null&&this.add(Kn,"m"),dr!==Zt&&(!dn||this._changeInProgress?Qh(this,va(Zt-dr,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,st.updateOffset(this,!0),this._changeInProgress=null)),this},cn.utc=function(Zt){return this.utcOffset(0,Zt)},cn.local=function(Zt){return this._isUTC&&(this.utcOffset(0,Zt),this._isUTC=!1,Zt&&this.subtract(ku(this),"m")),this},cn.parseZone=function(){var Zt;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((Zt=bc(hr,this._i))!=null?this.utcOffset(Zt):this.utcOffset(0,!0)),this},cn.hasAlignedHourOffset=function(Zt){return!!this.isValid()&&(Zt=Zt?jo(Zt).utcOffset():0,(this.utcOffset()-Zt)%60==0)},cn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},cn.isLocal=function(){return!!this.isValid()&&!this._isUTC},cn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},cn.isUtc=Au,cn.isUTC=Au,cn.zoneAbbr=function(){return this._isUTC?"UTC":""},cn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},cn.dates=Tn("dates accessor is deprecated. Use date instead.",Ga),cn.months=Tn("months accessor is deprecated. Use month instead",Qi),cn.years=Tn("years accessor is deprecated. Use year instead",Ll),cn.zone=Tn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(Zt,dn){return Zt!=null?(this.utcOffset(Zt=typeof Zt!="string"?-Zt:Zt,dn),this):-this.utcOffset()}),cn.isDSTShifted=Tn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!Lt(this._isDSTShifted))return this._isDSTShifted;var Zt,dn={};return on(dn,this),(dn=Qs(dn))._a?(Zt=(dn._isUTC?Ft:jo)(dn._a),this._isDSTShifted=this.isValid()&&0<function(Mn,Kn,dr){for(var Hr=Math.min(Mn.length,Kn.length),ri=Math.abs(Mn.length-Kn.length),ui=0,Ri=0;Ri<Hr;Ri++)(dr&&Mn[Ri]!==Kn[Ri]||!dr&&ir(Mn[Ri])!==ir(Kn[Ri]))&&ui++;return ui+ri}(dn._a,Zt.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),xo=Hn.prototype;function au(Zt,dn,Mn,Hr){var dr=fo(),Hr=Ft().set(Hr,dn);return dr[Mn](Hr,Zt)}function nh(Zt,dn,Mn){if(Ot(Zt)&&(dn=Zt,Zt=void 0),Zt=Zt||"",dn!=null)return au(Zt,dn,Mn,"month");for(var Kn=[],dr=0;dr<12;dr++)Kn[dr]=au(Zt,dr,Mn,"month");return Kn}function $d(Zt,dn,Mn,Kn){dn=(typeof Zt=="boolean"?Ot(dn)&&(Mn=dn,dn=void 0):(dn=Zt,Zt=!1,Ot(Mn=dn)&&(Mn=dn,dn=void 0)),dn||"");var dr,Hr=fo(),ri=Zt?Hr._week.dow:0,ui=[];if(Mn!=null)return au(dn,(Mn+ri)%7,Kn,"day");for(dr=0;dr<7;dr++)ui[dr]=au(dn,(dr+ri)%7,Kn,"day");return ui}xo.calendar=function(Zt,dn,Mn){return Ln(Zt=this._calendar[Zt]||this._calendar.sameElse)?Zt.call(dn,Mn):Zt},xo.longDateFormat=function(Zt){var dn=this._longDateFormat[Zt],Mn=this._longDateFormat[Zt.toUpperCase()];return dn||!Mn?dn:(this._longDateFormat[Zt]=Mn.match(vn).map(function(Kn){return Kn==="MMMM"||Kn==="MM"||Kn==="DD"||Kn==="dddd"?Kn.slice(1):Kn}).join(""),this._longDateFormat[Zt])},xo.invalidDate=function(){return this._invalidDate},xo.ordinal=function(Zt){return this._ordinal.replace("%d",Zt)},xo.preparse=th,xo.postformat=th,xo.relativeTime=function(Zt,dn,Mn,Kn){var dr=this._relativeTime[Mn];return Ln(dr)?dr(Zt,dn,Mn,Kn):dr.replace(/%d/i,Zt)},xo.pastFuture=function(Zt,dn){return Ln(Zt=this._relativeTime[0<Zt?"future":"past"])?Zt(dn):Zt.replace(/%s/i,dn)},xo.set=function(Zt){var dn,Mn;for(Mn in Zt)Et(Zt,Mn)&&(Ln(dn=Zt[Mn])?this[Mn]=dn:this["_"+Mn]=dn);this._config=Zt,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},xo.eras=function(Zt,dn){for(var Mn,Kn=this._eras||fo("en")._eras,dr=0,Hr=Kn.length;dr<Hr;++dr){switch(typeof Kn[dr].since){case"string":Mn=st(Kn[dr].since).startOf("day"),Kn[dr].since=Mn.valueOf();break}switch(typeof Kn[dr].until){case"undefined":Kn[dr].until=1/0;break;case"string":Mn=st(Kn[dr].until).startOf("day").valueOf(),Kn[dr].until=Mn.valueOf();break}}return Kn},xo.erasParse=function(Zt,dn,Mn){var Kn,dr,Hr,ri,ui,Ri=this.eras();for(Zt=Zt.toUpperCase(),Kn=0,dr=Ri.length;Kn<dr;++Kn)if(Hr=Ri[Kn].name.toUpperCase(),ri=Ri[Kn].abbr.toUpperCase(),ui=Ri[Kn].narrow.toUpperCase(),Mn)switch(dn){case"N":case"NN":case"NNN":if(ri===Zt)return Ri[Kn];break;case"NNNN":if(Hr===Zt)return Ri[Kn];break;case"NNNNN":if(ui===Zt)return Ri[Kn];break}else if(0<=[Hr,ri,ui].indexOf(Zt))return Ri[Kn]},xo.erasConvertYear=function(Zt,dn){var Mn=Zt.since<=Zt.until?1:-1;return dn===void 0?st(Zt.since).year():st(Zt.since).year()+(dn-Zt.offset)*Mn},xo.erasAbbrRegex=function(Zt){return Et(this,"_erasAbbrRegex")||Al.call(this),Zt?this._erasAbbrRegex:this._erasRegex},xo.erasNameRegex=function(Zt){return Et(this,"_erasNameRegex")||Al.call(this),Zt?this._erasNameRegex:this._erasRegex},xo.erasNarrowRegex=function(Zt){return Et(this,"_erasNarrowRegex")||Al.call(this),Zt?this._erasNarrowRegex:this._erasRegex},xo.months=function(Zt,dn){return Zt?(bt(this._months)?this._months:this._months[(this._months.isFormat||Pi).test(dn)?"format":"standalone"])[Zt.month()]:bt(this._months)?this._months:this._months.standalone},xo.monthsShort=function(Zt,dn){return Zt?(bt(this._monthsShort)?this._monthsShort:this._monthsShort[Pi.test(dn)?"format":"standalone"])[Zt.month()]:bt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},xo.monthsParse=function(Zt,dn,Mn){var Kn,dr;if(this._monthsParseExact)return function(lo,ri,ui){var Ri,Ii,yo,lo=lo.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Ri=0;Ri<12;++Ri)yo=Ft([2e3,Ri]),this._shortMonthsParse[Ri]=this.monthsShort(yo,"").toLocaleLowerCase(),this._longMonthsParse[Ri]=this.months(yo,"").toLocaleLowerCase();return ui?ri==="MMM"?(Ii=Ci.call(this._shortMonthsParse,lo))!==-1?Ii:null:(Ii=Ci.call(this._longMonthsParse,lo))!==-1?Ii:null:ri==="MMM"?(Ii=Ci.call(this._shortMonthsParse,lo))!==-1||(Ii=Ci.call(this._longMonthsParse,lo))!==-1?Ii:null:(Ii=Ci.call(this._longMonthsParse,lo))!==-1||(Ii=Ci.call(this._shortMonthsParse,lo))!==-1?Ii:null}.call(this,Zt,dn,Mn);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Kn=0;Kn<12;Kn++)if(dr=Ft([2e3,Kn]),Mn&&!this._longMonthsParse[Kn]&&(this._longMonthsParse[Kn]=new RegExp("^"+this.months(dr,"").replace(".","")+"$","i"),this._shortMonthsParse[Kn]=new RegExp("^"+this.monthsShort(dr,"").replace(".","")+"$","i")),Mn||this._monthsParse[Kn]||(dr="^"+this.months(dr,"")+"|^"+this.monthsShort(dr,""),this._monthsParse[Kn]=new RegExp(dr.replace(".",""),"i")),Mn&&dn==="MMMM"&&this._longMonthsParse[Kn].test(Zt)||Mn&&dn==="MMM"&&this._shortMonthsParse[Kn].test(Zt)||!Mn&&this._monthsParse[Kn].test(Zt))return Kn},xo.monthsRegex=function(Zt){return this._monthsParseExact?(Et(this,"_monthsRegex")||Eo.call(this),Zt?this._monthsStrictRegex:this._monthsRegex):(Et(this,"_monthsRegex")||(this._monthsRegex=Zi),this._monthsStrictRegex&&Zt?this._monthsStrictRegex:this._monthsRegex)},xo.monthsShortRegex=function(Zt){return this._monthsParseExact?(Et(this,"_monthsRegex")||Eo.call(this),Zt?this._monthsShortStrictRegex:this._monthsShortRegex):(Et(this,"_monthsShortRegex")||(this._monthsShortRegex=xi),this._monthsShortStrictRegex&&Zt?this._monthsShortStrictRegex:this._monthsShortRegex)},xo.week=function(Zt){return Fs(Zt,this._week.dow,this._week.doy).week},xo.firstDayOfYear=function(){return this._week.doy},xo.firstDayOfWeek=function(){return this._week.dow},xo.weekdays=function(Zt,dn){return dn=bt(this._weekdays)?this._weekdays:this._weekdays[Zt&&Zt!==!0&&this._weekdays.isFormat.test(dn)?"format":"standalone"],Zt===!0?os(dn,this._week.dow):Zt?dn[Zt.day()]:dn},xo.weekdaysMin=function(Zt){return Zt===!0?os(this._weekdaysMin,this._week.dow):Zt?this._weekdaysMin[Zt.day()]:this._weekdaysMin},xo.weekdaysShort=function(Zt){return Zt===!0?os(this._weekdaysShort,this._week.dow):Zt?this._weekdaysShort[Zt.day()]:this._weekdaysShort},xo.weekdaysParse=function(Zt,dn,Mn){var Kn,dr;if(this._weekdaysParseExact)return function(lo,ri,ui){var Ri,Ii,yo,lo=lo.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Ri=0;Ri<7;++Ri)yo=Ft([2e3,1]).day(Ri),this._minWeekdaysParse[Ri]=this.weekdaysMin(yo,"").toLocaleLowerCase(),this._shortWeekdaysParse[Ri]=this.weekdaysShort(yo,"").toLocaleLowerCase(),this._weekdaysParse[Ri]=this.weekdays(yo,"").toLocaleLowerCase();return ui?ri==="dddd"?(Ii=Ci.call(this._weekdaysParse,lo))!==-1?Ii:null:ri==="ddd"?(Ii=Ci.call(this._shortWeekdaysParse,lo))!==-1?Ii:null:(Ii=Ci.call(this._minWeekdaysParse,lo))!==-1?Ii:null:ri==="dddd"?(Ii=Ci.call(this._weekdaysParse,lo))!==-1||(Ii=Ci.call(this._shortWeekdaysParse,lo))!==-1||(Ii=Ci.call(this._minWeekdaysParse,lo))!==-1?Ii:null:ri==="ddd"?(Ii=Ci.call(this._shortWeekdaysParse,lo))!==-1||(Ii=Ci.call(this._weekdaysParse,lo))!==-1||(Ii=Ci.call(this._minWeekdaysParse,lo))!==-1?Ii:null:(Ii=Ci.call(this._minWeekdaysParse,lo))!==-1||(Ii=Ci.call(this._weekdaysParse,lo))!==-1||(Ii=Ci.call(this._shortWeekdaysParse,lo))!==-1?Ii:null}.call(this,Zt,dn,Mn);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Kn=0;Kn<7;Kn++)if(dr=Ft([2e3,1]).day(Kn),Mn&&!this._fullWeekdaysParse[Kn]&&(this._fullWeekdaysParse[Kn]=new RegExp("^"+this.weekdays(dr,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Kn]=new RegExp("^"+this.weekdaysShort(dr,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Kn]=new RegExp("^"+this.weekdaysMin(dr,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[Kn]||(dr="^"+this.weekdays(dr,"")+"|^"+this.weekdaysShort(dr,"")+"|^"+this.weekdaysMin(dr,""),this._weekdaysParse[Kn]=new RegExp(dr.replace(".",""),"i")),Mn&&dn==="dddd"&&this._fullWeekdaysParse[Kn].test(Zt)||Mn&&dn==="ddd"&&this._shortWeekdaysParse[Kn].test(Zt)||Mn&&dn==="dd"&&this._minWeekdaysParse[Kn].test(Zt)||!Mn&&this._weekdaysParse[Kn].test(Zt))return Kn},xo.weekdaysRegex=function(Zt){return this._weekdaysParseExact?(Et(this,"_weekdaysRegex")||Ur.call(this),Zt?this._weekdaysStrictRegex:this._weekdaysRegex):(Et(this,"_weekdaysRegex")||(this._weekdaysRegex=Qr),this._weekdaysStrictRegex&&Zt?this._weekdaysStrictRegex:this._weekdaysRegex)},xo.weekdaysShortRegex=function(Zt){return this._weekdaysParseExact?(Et(this,"_weekdaysRegex")||Ur.call(this),Zt?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Et(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Dr),this._weekdaysShortStrictRegex&&Zt?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},xo.weekdaysMinRegex=function(Zt){return this._weekdaysParseExact?(Et(this,"_weekdaysRegex")||Ur.call(this),Zt?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Et(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ar),this._weekdaysMinStrictRegex&&Zt?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},xo.isPM=function(Zt){return(Zt+"").toLowerCase().charAt(0)==="p"},xo.meridiem=function(Zt,dn,Mn){return 11<Zt?Mn?"pm":"PM":Mn?"am":"AM"},ji("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(Zt){var dn=Zt%10;return Zt+(ir(Zt%100/10)===1?"th":dn==1?"st":dn==2?"nd":dn==3?"rd":"th")}}),st.lang=Tn("moment.lang is deprecated. Use moment.locale instead.",ji),st.langData=Tn("moment.langData is deprecated. Use moment.localeData instead.",fo);var xc=Math.abs;function Rd(Zt,dn,Mn,Kn){return dn=va(dn,Mn),Zt._milliseconds+=Kn*dn._milliseconds,Zt._days+=Kn*dn._days,Zt._months+=Kn*dn._months,Zt._bubble()}function td(Zt){return Zt<0?Math.floor(Zt):Math.ceil(Zt)}function kh(Zt){return 4800*Zt/146097}function nd(Zt){return 146097*Zt/4800}function Ys(Zt){return function(){return this.as(Zt)}}Qn=Ys("ms"),Nn=Ys("s"),mi=Ys("m"),Bn=Ys("h"),cr=Ys("d"),Os=Ys("w"),xr=Ys("M"),Pu=Ys("Q"),ba=Ys("y");function Dc(Zt){return function(){return this.isValid()?this._data[Zt]:NaN}}var Qa=Dc("milliseconds"),Ga=Dc("seconds"),Ll=Dc("minutes"),xo=Dc("hours"),Ef=Dc("days"),wp=Dc("months"),rh=Dc("years"),oc=Math.round,ql={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function vl(Zt,dn,Mn,Kn){var Ii=va(Zt).abs(),yo=oc(Ii.as("s")),dr=oc(Ii.as("m")),Hr=oc(Ii.as("h")),ri=oc(Ii.as("d")),ui=oc(Ii.as("M")),Ri=oc(Ii.as("w")),Ii=oc(Ii.as("y")),yo=(yo<=Mn.ss?["s",yo]:yo<Mn.s&&["ss",yo])||dr<=1&&["m"]||dr<Mn.m&&["mm",dr]||Hr<=1&&["h"]||Hr<Mn.h&&["hh",Hr]||ri<=1&&["d"]||ri<Mn.d&&["dd",ri];return(yo=(yo=Mn.w!=null?yo||Ri<=1&&["w"]||Ri<Mn.w&&["ww",Ri]:yo)||ui<=1&&["M"]||ui<Mn.M&&["MM",ui]||Ii<=1&&["y"]||["yy",Ii])[2]=dn,yo[3]=0<+Zt,yo[4]=Kn,function(lo,Zo,Ds,Ms,wc){return wc.relativeTime(Zo||1,!!Ds,lo,Ms)}.apply(null,yo)}var Wa=Math.abs;function el(Zt){return(0<Zt)-(Zt<0)||+Zt}function rd(){if(!this.isValid())return this.localeData().invalidDate();var Zt,dn,Mn,Kn,dr,Hr,ri,ui=Wa(this._milliseconds)/1e3,Ri=Wa(this._days),Ii=Wa(this._months),yo=this.asSeconds();return yo?(Zt=Er(ui/60),dn=Er(Zt/60),ui%=60,Zt%=60,Mn=Er(Ii/12),Ii%=12,Kn=ui?ui.toFixed(3).replace(/\.?0+$/,""):"",dr=el(this._months)!==el(yo)?"-":"",Hr=el(this._days)!==el(yo)?"-":"",ri=el(this._milliseconds)!==el(yo)?"-":"",(yo<0?"-":"")+"P"+(Mn?dr+Mn+"Y":"")+(Ii?dr+Ii+"M":"")+(Ri?Hr+Ri+"D":"")+(dn||Zt||ui?"T":"")+(dn?ri+dn+"H":"")+(Zt?ri+Zt+"M":"")+(ui?ri+Kn+"S":"")):"P0D"}var Ko=ya.prototype;return Ko.isValid=function(){return this._isValid},Ko.abs=function(){var Zt=this._data;return this._milliseconds=xc(this._milliseconds),this._days=xc(this._days),this._months=xc(this._months),Zt.milliseconds=xc(Zt.milliseconds),Zt.seconds=xc(Zt.seconds),Zt.minutes=xc(Zt.minutes),Zt.hours=xc(Zt.hours),Zt.months=xc(Zt.months),Zt.years=xc(Zt.years),this},Ko.add=function(Zt,dn){return Rd(this,Zt,dn,1)},Ko.subtract=function(Zt,dn){return Rd(this,Zt,dn,-1)},Ko.as=function(Zt){if(!this.isValid())return NaN;var dn,Mn,Kn=this._milliseconds;if((Zt=Pr(Zt))==="month"||Zt==="quarter"||Zt==="year")switch(dn=this._days+Kn/864e5,Mn=this._months+kh(dn),Zt){case"month":return Mn;case"quarter":return Mn/3;case"year":return Mn/12}else switch(dn=this._days+Math.round(nd(this._months)),Zt){case"week":return dn/7+Kn/6048e5;case"day":return dn+Kn/864e5;case"hour":return 24*dn+Kn/36e5;case"minute":return 1440*dn+Kn/6e4;case"second":return 86400*dn+Kn/1e3;case"millisecond":return Math.floor(864e5*dn)+Kn;default:throw new Error("Unknown unit "+Zt)}},Ko.asMilliseconds=Qn,Ko.asSeconds=Nn,Ko.asMinutes=mi,Ko.asHours=Bn,Ko.asDays=cr,Ko.asWeeks=Os,Ko.asMonths=xr,Ko.asQuarters=Pu,Ko.asYears=ba,Ko.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ir(this._months/12):NaN},Ko._bubble=function(){var Zt=this._milliseconds,dn=this._days,Mn=this._months,Kn=this._data;return 0<=Zt&&0<=dn&&0<=Mn||Zt<=0&&dn<=0&&Mn<=0||(Zt+=864e5*td(nd(Mn)+dn),Mn=dn=0),Kn.milliseconds=Zt%1e3,Zt=Er(Zt/1e3),Kn.seconds=Zt%60,Zt=Er(Zt/60),Kn.minutes=Zt%60,Zt=Er(Zt/60),Kn.hours=Zt%24,dn+=Er(Zt/24),Mn+=Zt=Er(kh(dn)),dn-=td(nd(Zt)),Zt=Er(Mn/12),Mn%=12,Kn.days=dn,Kn.months=Mn,Kn.years=Zt,this},Ko.clone=function(){return va(this)},Ko.get=function(Zt){return Zt=Pr(Zt),this.isValid()?this[Zt+"s"]():NaN},Ko.milliseconds=Qa,Ko.seconds=Ga,Ko.minutes=Ll,Ko.hours=xo,Ko.days=Ef,Ko.weeks=function(){return Er(this.days()/7)},Ko.months=wp,Ko.years=rh,Ko.humanize=function(Zt,dn){if(!this.isValid())return this.localeData().invalidDate();var Mn=!1,Kn=ql;return typeof Zt=="object"&&(dn=Zt,Zt=!1),typeof Zt=="boolean"&&(Mn=Zt),typeof dn=="object"&&(Kn=Object.assign({},ql,dn),dn.s!=null&&dn.ss==null&&(Kn.ss=dn.s-1)),Zt=this.localeData(),dn=vl(this,!Mn,Kn,Zt),Mn&&(dn=Zt.pastFuture(+this,dn)),Zt.postformat(dn)},Ko.toISOString=rd,Ko.toString=rd,Ko.toJSON=rd,Ko.locale=Nl,Ko.localeData=da,Ko.toIsoString=Tn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rd),Ko.lang=Rr,rr("X",0,0,"unix"),rr("x",0,0,"valueOf"),br("x",or),br("X",/[+-]?\d+(\.\d{1,3})?/),ki("X",function(Zt,dn,Mn){Mn._d=new Date(1e3*parseFloat(Zt))}),ki("x",function(Zt,dn,Mn){Mn._d=new Date(ir(Zt))}),st.version="2.29.4",it=jo,st.fn=cn,st.min=function(){return la("isBefore",[].slice.call(arguments,0))},st.max=function(){return la("isAfter",[].slice.call(arguments,0))},st.now=function(){return Date.now?Date.now():+new Date},st.utc=Ft,st.unix=function(Zt){return jo(1e3*Zt)},st.months=function(Zt,dn){return nh(Zt,dn,"months")},st.isDate=Rt,st.locale=ji,st.invalid=Wt,st.duration=va,st.isMoment=mn,st.weekdays=function(Zt,dn,Mn){return $d(Zt,dn,Mn,"weekdays")},st.parseZone=function(){return jo.apply(null,arguments).parseZone()},st.localeData=fo,st.isDuration=yl,st.monthsShort=function(Zt,dn){return nh(Zt,dn,"monthsShort")},st.weekdaysMin=function(Zt,dn,Mn){return $d(Zt,dn,Mn,"weekdaysMin")},st.defineLocale=so,st.updateLocale=function(Zt,dn){var Mn,Kn;return dn!=null?(Kn=ss,oo[Zt]!=null&&oo[Zt].parentLocale!=null?oo[Zt].set(pn(oo[Zt]._config,dn)):(dn=pn(Kn=(Mn=ra(Zt))!=null?Mn._config:Kn,dn),Mn==null&&(dn.abbr=Zt),(Kn=new Hn(dn)).parentLocale=oo[Zt],oo[Zt]=Kn),ji(Zt)):oo[Zt]!=null&&(oo[Zt].parentLocale!=null?(oo[Zt]=oo[Zt].parentLocale,Zt===ji()&&ji(Zt)):oo[Zt]!=null&&delete oo[Zt]),oo[Zt]},st.locales=function(){return yn(oo)},st.weekdaysShort=function(Zt,dn,Mn){return $d(Zt,dn,Mn,"weekdaysShort")},st.normalizeUnits=Pr,st.relativeTimeRounding=function(Zt){return Zt===void 0?oc:typeof Zt=="function"&&(oc=Zt,!0)},st.relativeTimeThreshold=function(Zt,dn){return ql[Zt]!==void 0&&(dn===void 0?ql[Zt]:(ql[Zt]=dn,Zt==="s"&&(ql.ss=dn-1),!0))},st.calendarFormat=function(Zt,dn){return(Zt=Zt.diff(dn,"days",!0))<-6?"sameElse":Zt<-1?"lastWeek":Zt<0?"lastDay":Zt<1?"sameDay":Zt<2?"nextDay":Zt<7?"nextWeek":"sameElse"},st.prototype=cn,st.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},st})})(moment_min);const moment=moment_min.exports;var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var sanitizeUrl_1=dist.sanitizeUrl=void 0,invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,htmlCtrlEntityRegex=/&(newline|tab);/gi,ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,urlSchemeRegex=/^.+(:|&colon;)/gim,relativeFirstCharacters=[".","/"];function isRelativeUrlWithoutProtocol(nt){return relativeFirstCharacters.indexOf(nt[0])>-1}function decodeHtmlCharacters(nt){return nt.replace(htmlEntitiesRegex,function(rt,it){return String.fromCharCode(it)})}function sanitizeUrl(nt){var rt=decodeHtmlCharacters(nt||"").replace(htmlCtrlEntityRegex,"").replace(ctrlCharactersRegex,"").trim();if(!rt)return"about:blank";if(isRelativeUrlWithoutProtocol(rt))return rt;var it=rt.match(urlSchemeRegex);if(!it)return rt;var st=it[0];return invalidProtocolRegex.test(st)?"about:blank":rt}sanitizeUrl_1=dist.sanitizeUrl=sanitizeUrl;function ascending$1(nt,rt){return nt==null||rt==null?NaN:nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function descending$1(nt,rt){return nt==null||rt==null?NaN:rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function bisector(nt){let rt,it,st;nt.length!==2?(rt=ascending$1,it=(kt,Lt)=>ascending$1(nt(kt),Lt),st=(kt,Lt)=>nt(kt)-Lt):(rt=nt===ascending$1||nt===descending$1?nt:zero$1,it=nt,st=nt);function bt(kt,Lt,Ot=0,Rt=kt.length){if(Ot<Rt){if(rt(Lt,Lt)!==0)return Rt;do{const Dt=Ot+Rt>>>1;it(kt[Dt],Lt)<0?Ot=Dt+1:Rt=Dt}while(Ot<Rt)}return Ot}function wt(kt,Lt,Ot=0,Rt=kt.length){if(Ot<Rt){if(rt(Lt,Lt)!==0)return Rt;do{const Dt=Ot+Rt>>>1;it(kt[Dt],Lt)<=0?Ot=Dt+1:Rt=Dt}while(Ot<Rt)}return Ot}function Et(kt,Lt,Ot=0,Rt=kt.length){const Dt=bt(kt,Lt,Ot,Rt-1);return Dt>Ot&&st(kt[Dt-1],Lt)>-st(kt[Dt],Lt)?Dt-1:Dt}return{left:bt,center:Et,right:wt}}function zero$1(){return 0}function number$3(nt){return nt===null?NaN:+nt}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$3).center;const bisect=bisectRight;class InternMap extends Map{constructor(rt,it=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:it}}),rt!=null)for(const[st,bt]of rt)this.set(st,bt)}get(rt){return super.get(intern_get(this,rt))}has(rt){return super.has(intern_get(this,rt))}set(rt,it){return super.set(intern_set(this,rt),it)}delete(rt){return super.delete(intern_delete(this,rt))}}function intern_get({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)?nt.get(st):it}function intern_set({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)?nt.get(st):(nt.set(st,it),it)}function intern_delete({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)&&(it=nt.get(st),nt.delete(st)),it}function keyof(nt){return nt!==null&&typeof nt=="object"?nt.valueOf():nt}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(nt,rt,it){var st,bt=-1,wt,Et,kt;if(rt=+rt,nt=+nt,it=+it,nt===rt&&it>0)return[nt];if((st=rt<nt)&&(wt=nt,nt=rt,rt=wt),(kt=tickIncrement(nt,rt,it))===0||!isFinite(kt))return[];if(kt>0){let Lt=Math.round(nt/kt),Ot=Math.round(rt/kt);for(Lt*kt<nt&&++Lt,Ot*kt>rt&&--Ot,Et=new Array(wt=Ot-Lt+1);++bt<wt;)Et[bt]=(Lt+bt)*kt}else{kt=-kt;let Lt=Math.round(nt*kt),Ot=Math.round(rt*kt);for(Lt/kt<nt&&++Lt,Ot/kt>rt&&--Ot,Et=new Array(wt=Ot-Lt+1);++bt<wt;)Et[bt]=(Lt+bt)/kt}return st&&Et.reverse(),Et}function tickIncrement(nt,rt,it){var st=(rt-nt)/Math.max(0,it),bt=Math.floor(Math.log(st)/Math.LN10),wt=st/Math.pow(10,bt);return bt>=0?(wt>=e10?10:wt>=e5?5:wt>=e2?2:1)*Math.pow(10,bt):-Math.pow(10,-bt)/(wt>=e10?10:wt>=e5?5:wt>=e2?2:1)}function tickStep(nt,rt,it){var st=Math.abs(rt-nt)/Math.max(0,it),bt=Math.pow(10,Math.floor(Math.log(st)/Math.LN10)),wt=st/bt;return wt>=e10?bt*=10:wt>=e5?bt*=5:wt>=e2&&(bt*=2),rt<nt?-bt:bt}function max$2(nt,rt){let it;if(rt===void 0)for(const st of nt)st!=null&&(it<st||it===void 0&&st>=st)&&(it=st);else{let st=-1;for(let bt of nt)(bt=rt(bt,++st,nt))!=null&&(it<bt||it===void 0&&bt>=bt)&&(it=bt)}return it}function min$2(nt,rt){let it;if(rt===void 0)for(const st of nt)st!=null&&(it>st||it===void 0&&st>=st)&&(it=st);else{let st=-1;for(let bt of nt)(bt=rt(bt,++st,nt))!=null&&(it>bt||it===void 0&&bt>=bt)&&(it=bt)}return it}function identity$5(nt){return nt}var top=1,right=2,bottom=3,left=4,epsilon$2=1e-6;function translateX(nt){return"translate("+nt+",0)"}function translateY(nt){return"translate(0,"+nt+")"}function number$2(nt){return rt=>+nt(rt)}function center(nt,rt){return rt=Math.max(0,nt.bandwidth()-rt*2)/2,nt.round()&&(rt=Math.round(rt)),it=>+nt(it)+rt}function entering(){return!this.__axis}function axis(nt,rt){var it=[],st=null,bt=null,wt=6,Et=6,kt=3,Lt=typeof window<"u"&&window.devicePixelRatio>1?0:.5,Ot=nt===top||nt===left?-1:1,Rt=nt===left||nt===right?"x":"y",Dt=nt===top||nt===bottom?translateX:translateY;function Bt(Ft){var Yt=st==null?rt.ticks?rt.ticks.apply(rt,it):rt.domain():st,Jt=bt==null?rt.tickFormat?rt.tickFormat.apply(rt,it):identity$5:bt,Wt=Math.max(wt,0)+kt,Qt=rt.range(),rn=+Qt[0]+Lt,sn=+Qt[Qt.length-1]+Lt,on=(rt.bandwidth?center:number$2)(rt.copy(),Lt),hn=Ft.selection?Ft.selection():Ft,mn=hn.selectAll(".domain").data([null]),Cn=hn.selectAll(".tick").data(Yt,rt).order(),Tn=Cn.exit(),kn=Cn.enter().append("g").attr("class","tick"),In=Cn.select("line"),Ln=Cn.select("text");mn=mn.merge(mn.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Cn=Cn.merge(kn),In=In.merge(kn.append("line").attr("stroke","currentColor").attr(Rt+"2",Ot*wt)),Ln=Ln.merge(kn.append("text").attr("fill","currentColor").attr(Rt,Ot*Wt).attr("dy",nt===top?"0em":nt===bottom?"0.71em":"0.32em")),Ft!==hn&&(mn=mn.transition(Ft),Cn=Cn.transition(Ft),In=In.transition(Ft),Ln=Ln.transition(Ft),Tn=Tn.transition(Ft).attr("opacity",epsilon$2).attr("transform",function(pn){return isFinite(pn=on(pn))?Dt(pn+Lt):this.getAttribute("transform")}),kn.attr("opacity",epsilon$2).attr("transform",function(pn){var Hn=this.parentNode.__axis;return Dt((Hn&&isFinite(Hn=Hn(pn))?Hn:on(pn))+Lt)})),Tn.remove(),mn.attr("d",nt===left||nt===right?Et?"M"+Ot*Et+","+rn+"H"+Lt+"V"+sn+"H"+Ot*Et:"M"+Lt+","+rn+"V"+sn:Et?"M"+rn+","+Ot*Et+"V"+Lt+"H"+sn+"V"+Ot*Et:"M"+rn+","+Lt+"H"+sn),Cn.attr("opacity",1).attr("transform",function(pn){return Dt(on(pn)+Lt)}),In.attr(Rt+"2",Ot*wt),Ln.attr(Rt,Ot*Wt).text(Jt),hn.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",nt===right?"start":nt===left?"end":"middle"),hn.each(function(){this.__axis=on})}return Bt.scale=function(Ft){return arguments.length?(rt=Ft,Bt):rt},Bt.ticks=function(){return it=Array.from(arguments),Bt},Bt.tickArguments=function(Ft){return arguments.length?(it=Ft==null?[]:Array.from(Ft),Bt):it.slice()},Bt.tickValues=function(Ft){return arguments.length?(st=Ft==null?null:Array.from(Ft),Bt):st&&st.slice()},Bt.tickFormat=function(Ft){return arguments.length?(bt=Ft,Bt):bt},Bt.tickSize=function(Ft){return arguments.length?(wt=Et=+Ft,Bt):wt},Bt.tickSizeInner=function(Ft){return arguments.length?(wt=+Ft,Bt):wt},Bt.tickSizeOuter=function(Ft){return arguments.length?(Et=+Ft,Bt):Et},Bt.tickPadding=function(Ft){return arguments.length?(kt=+Ft,Bt):kt},Bt.offset=function(Ft){return arguments.length?(Lt=+Ft,Bt):Lt},Bt}function axisTop(nt){return axis(top,nt)}function axisBottom(nt){return axis(bottom,nt)}var noop$2={value:()=>{}};function dispatch(){for(var nt=0,rt=arguments.length,it={},st;nt<rt;++nt){if(!(st=arguments[nt]+"")||st in it||/[\s.]/.test(st))throw new Error("illegal type: "+st);it[st]=[]}return new Dispatch(it)}function Dispatch(nt){this._=nt}function parseTypenames$1(nt,rt){return nt.trim().split(/^|\s+/).map(function(it){var st="",bt=it.indexOf(".");if(bt>=0&&(st=it.slice(bt+1),it=it.slice(0,bt)),it&&!rt.hasOwnProperty(it))throw new Error("unknown type: "+it);return{type:it,name:st}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(nt,rt){var it=this._,st=parseTypenames$1(nt+"",it),bt,wt=-1,Et=st.length;if(arguments.length<2){for(;++wt<Et;)if((bt=(nt=st[wt]).type)&&(bt=get$3(it[bt],nt.name)))return bt;return}if(rt!=null&&typeof rt!="function")throw new Error("invalid callback: "+rt);for(;++wt<Et;)if(bt=(nt=st[wt]).type)it[bt]=set$2(it[bt],nt.name,rt);else if(rt==null)for(bt in it)it[bt]=set$2(it[bt],nt.name,null);return this},copy:function(){var nt={},rt=this._;for(var it in rt)nt[it]=rt[it].slice();return new Dispatch(nt)},call:function(nt,rt){if((bt=arguments.length-2)>0)for(var it=new Array(bt),st=0,bt,wt;st<bt;++st)it[st]=arguments[st+2];if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(wt=this._[nt],st=0,bt=wt.length;st<bt;++st)wt[st].value.apply(rt,it)},apply:function(nt,rt,it){if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(var st=this._[nt],bt=0,wt=st.length;bt<wt;++bt)st[bt].value.apply(rt,it)}};function get$3(nt,rt){for(var it=0,st=nt.length,bt;it<st;++it)if((bt=nt[it]).name===rt)return bt.value}function set$2(nt,rt,it){for(var st=0,bt=nt.length;st<bt;++st)if(nt[st].name===rt){nt[st]=noop$2,nt=nt.slice(0,st).concat(nt.slice(st+1));break}return it!=null&&nt.push({name:rt,value:it}),nt}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(nt){var rt=nt+="",it=rt.indexOf(":");return it>=0&&(rt=nt.slice(0,it))!=="xmlns"&&(nt=nt.slice(it+1)),namespaces.hasOwnProperty(rt)?{space:namespaces[rt],local:nt}:nt}function creatorInherit(nt){return function(){var rt=this.ownerDocument,it=this.namespaceURI;return it===xhtml&&rt.documentElement.namespaceURI===xhtml?rt.createElement(nt):rt.createElementNS(it,nt)}}function creatorFixed(nt){return function(){return this.ownerDocument.createElementNS(nt.space,nt.local)}}function creator(nt){var rt=namespace(nt);return(rt.local?creatorFixed:creatorInherit)(rt)}function none(){}function selector(nt){return nt==null?none:function(){return this.querySelector(nt)}}function selection_select(nt){typeof nt!="function"&&(nt=selector(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),bt=0;bt<it;++bt)for(var wt=rt[bt],Et=wt.length,kt=st[bt]=new Array(Et),Lt,Ot,Rt=0;Rt<Et;++Rt)(Lt=wt[Rt])&&(Ot=nt.call(Lt,Lt.__data__,Rt,wt))&&("__data__"in Lt&&(Ot.__data__=Lt.__data__),kt[Rt]=Ot);return new Selection$1(st,this._parents)}function array$1(nt){return nt==null?[]:Array.isArray(nt)?nt:Array.from(nt)}function empty(){return[]}function selectorAll(nt){return nt==null?empty:function(){return this.querySelectorAll(nt)}}function arrayAll(nt){return function(){return array$1(nt.apply(this,arguments))}}function selection_selectAll(nt){typeof nt=="function"?nt=arrayAll(nt):nt=selectorAll(nt);for(var rt=this._groups,it=rt.length,st=[],bt=[],wt=0;wt<it;++wt)for(var Et=rt[wt],kt=Et.length,Lt,Ot=0;Ot<kt;++Ot)(Lt=Et[Ot])&&(st.push(nt.call(Lt,Lt.__data__,Ot,Et)),bt.push(Lt));return new Selection$1(st,bt)}function matcher(nt){return function(){return this.matches(nt)}}function childMatcher(nt){return function(rt){return rt.matches(nt)}}var find$2=Array.prototype.find;function childFind(nt){return function(){return find$2.call(this.children,nt)}}function childFirst(){return this.firstElementChild}function selection_selectChild(nt){return this.select(nt==null?childFirst:childFind(typeof nt=="function"?nt:childMatcher(nt)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(nt){return function(){return filter$1.call(this.children,nt)}}function selection_selectChildren(nt){return this.selectAll(nt==null?children:childrenFilter(typeof nt=="function"?nt:childMatcher(nt)))}function selection_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),bt=0;bt<it;++bt)for(var wt=rt[bt],Et=wt.length,kt=st[bt]=[],Lt,Ot=0;Ot<Et;++Ot)(Lt=wt[Ot])&&nt.call(Lt,Lt.__data__,Ot,wt)&&kt.push(Lt);return new Selection$1(st,this._parents)}function sparse(nt){return new Array(nt.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(nt,rt){this.ownerDocument=nt.ownerDocument,this.namespaceURI=nt.namespaceURI,this._next=null,this._parent=nt,this.__data__=rt}EnterNode.prototype={constructor:EnterNode,appendChild:function(nt){return this._parent.insertBefore(nt,this._next)},insertBefore:function(nt,rt){return this._parent.insertBefore(nt,rt)},querySelector:function(nt){return this._parent.querySelector(nt)},querySelectorAll:function(nt){return this._parent.querySelectorAll(nt)}};function constant$3(nt){return function(){return nt}}function bindIndex(nt,rt,it,st,bt,wt){for(var Et=0,kt,Lt=rt.length,Ot=wt.length;Et<Ot;++Et)(kt=rt[Et])?(kt.__data__=wt[Et],st[Et]=kt):it[Et]=new EnterNode(nt,wt[Et]);for(;Et<Lt;++Et)(kt=rt[Et])&&(bt[Et]=kt)}function bindKey(nt,rt,it,st,bt,wt,Et){var kt,Lt,Ot=new Map,Rt=rt.length,Dt=wt.length,Bt=new Array(Rt),Ft;for(kt=0;kt<Rt;++kt)(Lt=rt[kt])&&(Bt[kt]=Ft=Et.call(Lt,Lt.__data__,kt,rt)+"",Ot.has(Ft)?bt[kt]=Lt:Ot.set(Ft,Lt));for(kt=0;kt<Dt;++kt)Ft=Et.call(nt,wt[kt],kt,wt)+"",(Lt=Ot.get(Ft))?(st[kt]=Lt,Lt.__data__=wt[kt],Ot.delete(Ft)):it[kt]=new EnterNode(nt,wt[kt]);for(kt=0;kt<Rt;++kt)(Lt=rt[kt])&&Ot.get(Bt[kt])===Lt&&(bt[kt]=Lt)}function datum(nt){return nt.__data__}function selection_data(nt,rt){if(!arguments.length)return Array.from(this,datum);var it=rt?bindKey:bindIndex,st=this._parents,bt=this._groups;typeof nt!="function"&&(nt=constant$3(nt));for(var wt=bt.length,Et=new Array(wt),kt=new Array(wt),Lt=new Array(wt),Ot=0;Ot<wt;++Ot){var Rt=st[Ot],Dt=bt[Ot],Bt=Dt.length,Ft=arraylike(nt.call(Rt,Rt&&Rt.__data__,Ot,st)),Yt=Ft.length,Jt=kt[Ot]=new Array(Yt),Wt=Et[Ot]=new Array(Yt),Qt=Lt[Ot]=new Array(Bt);it(Rt,Dt,Jt,Wt,Qt,Ft,rt);for(var rn=0,sn=0,on,hn;rn<Yt;++rn)if(on=Jt[rn]){for(rn>=sn&&(sn=rn+1);!(hn=Wt[sn])&&++sn<Yt;);on._next=hn||null}}return Et=new Selection$1(Et,st),Et._enter=kt,Et._exit=Lt,Et}function arraylike(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(nt,rt,it){var st=this.enter(),bt=this,wt=this.exit();return typeof nt=="function"?(st=nt(st),st&&(st=st.selection())):st=st.append(nt+""),rt!=null&&(bt=rt(bt),bt&&(bt=bt.selection())),it==null?wt.remove():it(wt),st&&bt?st.merge(bt).order():bt}function selection_merge(nt){for(var rt=nt.selection?nt.selection():nt,it=this._groups,st=rt._groups,bt=it.length,wt=st.length,Et=Math.min(bt,wt),kt=new Array(bt),Lt=0;Lt<Et;++Lt)for(var Ot=it[Lt],Rt=st[Lt],Dt=Ot.length,Bt=kt[Lt]=new Array(Dt),Ft,Yt=0;Yt<Dt;++Yt)(Ft=Ot[Yt]||Rt[Yt])&&(Bt[Yt]=Ft);for(;Lt<bt;++Lt)kt[Lt]=it[Lt];return new Selection$1(kt,this._parents)}function selection_order(){for(var nt=this._groups,rt=-1,it=nt.length;++rt<it;)for(var st=nt[rt],bt=st.length-1,wt=st[bt],Et;--bt>=0;)(Et=st[bt])&&(wt&&Et.compareDocumentPosition(wt)^4&&wt.parentNode.insertBefore(Et,wt),wt=Et);return this}function selection_sort(nt){nt||(nt=ascending);function rt(Dt,Bt){return Dt&&Bt?nt(Dt.__data__,Bt.__data__):!Dt-!Bt}for(var it=this._groups,st=it.length,bt=new Array(st),wt=0;wt<st;++wt){for(var Et=it[wt],kt=Et.length,Lt=bt[wt]=new Array(kt),Ot,Rt=0;Rt<kt;++Rt)(Ot=Et[Rt])&&(Lt[Rt]=Ot);Lt.sort(rt)}return new Selection$1(bt,this._parents).order()}function ascending(nt,rt){return nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function selection_call(){var nt=arguments[0];return arguments[0]=this,nt.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var st=nt[rt],bt=0,wt=st.length;bt<wt;++bt){var Et=st[bt];if(Et)return Et}return null}function selection_size(){let nt=0;for(const rt of this)++nt;return nt}function selection_empty(){return!this.node()}function selection_each(nt){for(var rt=this._groups,it=0,st=rt.length;it<st;++it)for(var bt=rt[it],wt=0,Et=bt.length,kt;wt<Et;++wt)(kt=bt[wt])&&nt.call(kt,kt.__data__,wt,bt);return this}function attrRemove$1(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS$1(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant$1(nt,rt){return function(){this.setAttribute(nt,rt)}}function attrConstantNS$1(nt,rt){return function(){this.setAttributeNS(nt.space,nt.local,rt)}}function attrFunction$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttribute(nt):this.setAttribute(nt,it)}}function attrFunctionNS$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttributeNS(nt.space,nt.local):this.setAttributeNS(nt.space,nt.local,it)}}function selection_attr(nt,rt){var it=namespace(nt);if(arguments.length<2){var st=this.node();return it.local?st.getAttributeNS(it.space,it.local):st.getAttribute(it)}return this.each((rt==null?it.local?attrRemoveNS$1:attrRemove$1:typeof rt=="function"?it.local?attrFunctionNS$1:attrFunction$1:it.local?attrConstantNS$1:attrConstant$1)(it,rt))}function defaultView(nt){return nt.ownerDocument&&nt.ownerDocument.defaultView||nt.document&&nt||nt.defaultView}function styleRemove$1(nt){return function(){this.style.removeProperty(nt)}}function styleConstant$1(nt,rt,it){return function(){this.style.setProperty(nt,rt,it)}}function styleFunction$1(nt,rt,it){return function(){var st=rt.apply(this,arguments);st==null?this.style.removeProperty(nt):this.style.setProperty(nt,st,it)}}function selection_style(nt,rt,it){return arguments.length>1?this.each((rt==null?styleRemove$1:typeof rt=="function"?styleFunction$1:styleConstant$1)(nt,rt,it==null?"":it)):styleValue(this.node(),nt)}function styleValue(nt,rt){return nt.style.getPropertyValue(rt)||defaultView(nt).getComputedStyle(nt,null).getPropertyValue(rt)}function propertyRemove(nt){return function(){delete this[nt]}}function propertyConstant(nt,rt){return function(){this[nt]=rt}}function propertyFunction(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?delete this[nt]:this[nt]=it}}function selection_property(nt,rt){return arguments.length>1?this.each((rt==null?propertyRemove:typeof rt=="function"?propertyFunction:propertyConstant)(nt,rt)):this.node()[nt]}function classArray(nt){return nt.trim().split(/^|\s+/)}function classList(nt){return nt.classList||new ClassList(nt)}function ClassList(nt){this._node=nt,this._names=classArray(nt.getAttribute("class")||"")}ClassList.prototype={add:function(nt){var rt=this._names.indexOf(nt);rt<0&&(this._names.push(nt),this._node.setAttribute("class",this._names.join(" ")))},remove:function(nt){var rt=this._names.indexOf(nt);rt>=0&&(this._names.splice(rt,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(nt){return this._names.indexOf(nt)>=0}};function classedAdd(nt,rt){for(var it=classList(nt),st=-1,bt=rt.length;++st<bt;)it.add(rt[st])}function classedRemove(nt,rt){for(var it=classList(nt),st=-1,bt=rt.length;++st<bt;)it.remove(rt[st])}function classedTrue(nt){return function(){classedAdd(this,nt)}}function classedFalse(nt){return function(){classedRemove(this,nt)}}function classedFunction(nt,rt){return function(){(rt.apply(this,arguments)?classedAdd:classedRemove)(this,nt)}}function selection_classed(nt,rt){var it=classArray(nt+"");if(arguments.length<2){for(var st=classList(this.node()),bt=-1,wt=it.length;++bt<wt;)if(!st.contains(it[bt]))return!1;return!0}return this.each((typeof rt=="function"?classedFunction:rt?classedTrue:classedFalse)(it,rt))}function textRemove(){this.textContent=""}function textConstant$1(nt){return function(){this.textContent=nt}}function textFunction$1(nt){return function(){var rt=nt.apply(this,arguments);this.textContent=rt==null?"":rt}}function selection_text(nt){return arguments.length?this.each(nt==null?textRemove:(typeof nt=="function"?textFunction$1:textConstant$1)(nt)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(nt){return function(){this.innerHTML=nt}}function htmlFunction(nt){return function(){var rt=nt.apply(this,arguments);this.innerHTML=rt==null?"":rt}}function selection_html(nt){return arguments.length?this.each(nt==null?htmlRemove:(typeof nt=="function"?htmlFunction:htmlConstant)(nt)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(nt){var rt=typeof nt=="function"?nt:creator(nt);return this.select(function(){return this.appendChild(rt.apply(this,arguments))})}function constantNull(){return null}function selection_insert(nt,rt){var it=typeof nt=="function"?nt:creator(nt),st=rt==null?constantNull:typeof rt=="function"?rt:selector(rt);return this.select(function(){return this.insertBefore(it.apply(this,arguments),st.apply(this,arguments)||null)})}function remove(){var nt=this.parentNode;nt&&nt.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var nt=this.cloneNode(!1),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_cloneDeep(){var nt=this.cloneNode(!0),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_clone(nt){return this.select(nt?selection_cloneDeep:selection_cloneShallow)}function selection_datum(nt){return arguments.length?this.property("__data__",nt):this.node().__data__}function contextListener(nt){return function(rt){nt.call(this,rt,this.__data__)}}function parseTypenames(nt){return nt.trim().split(/^|\s+/).map(function(rt){var it="",st=rt.indexOf(".");return st>=0&&(it=rt.slice(st+1),rt=rt.slice(0,st)),{type:rt,name:it}})}function onRemove(nt){return function(){var rt=this.__on;if(!!rt){for(var it=0,st=-1,bt=rt.length,wt;it<bt;++it)wt=rt[it],(!nt.type||wt.type===nt.type)&&wt.name===nt.name?this.removeEventListener(wt.type,wt.listener,wt.options):rt[++st]=wt;++st?rt.length=st:delete this.__on}}}function onAdd(nt,rt,it){return function(){var st=this.__on,bt,wt=contextListener(rt);if(st){for(var Et=0,kt=st.length;Et<kt;++Et)if((bt=st[Et]).type===nt.type&&bt.name===nt.name){this.removeEventListener(bt.type,bt.listener,bt.options),this.addEventListener(bt.type,bt.listener=wt,bt.options=it),bt.value=rt;return}}this.addEventListener(nt.type,wt,it),bt={type:nt.type,name:nt.name,value:rt,listener:wt,options:it},st?st.push(bt):this.__on=[bt]}}function selection_on(nt,rt,it){var st=parseTypenames(nt+""),bt,wt=st.length,Et;if(arguments.length<2){var kt=this.node().__on;if(kt){for(var Lt=0,Ot=kt.length,Rt;Lt<Ot;++Lt)for(bt=0,Rt=kt[Lt];bt<wt;++bt)if((Et=st[bt]).type===Rt.type&&Et.name===Rt.name)return Rt.value}return}for(kt=rt?onAdd:onRemove,bt=0;bt<wt;++bt)this.each(kt(st[bt],rt,it));return this}function dispatchEvent(nt,rt,it){var st=defaultView(nt),bt=st.CustomEvent;typeof bt=="function"?bt=new bt(rt,it):(bt=st.document.createEvent("Event"),it?(bt.initEvent(rt,it.bubbles,it.cancelable),bt.detail=it.detail):bt.initEvent(rt,!1,!1)),nt.dispatchEvent(bt)}function dispatchConstant(nt,rt){return function(){return dispatchEvent(this,nt,rt)}}function dispatchFunction(nt,rt){return function(){return dispatchEvent(this,nt,rt.apply(this,arguments))}}function selection_dispatch(nt,rt){return this.each((typeof rt=="function"?dispatchFunction:dispatchConstant)(nt,rt))}function*selection_iterator(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var st=nt[rt],bt=0,wt=st.length,Et;bt<wt;++bt)(Et=st[bt])&&(yield Et)}var root$2=[null];function Selection$1(nt,rt){this._groups=nt,this._parents=rt}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(nt){return typeof nt=="string"?new Selection$1([[document.querySelector(nt)]],[document.documentElement]):new Selection$1([[nt]],root$2)}function selectAll(nt){return typeof nt=="string"?new Selection$1([document.querySelectorAll(nt)],[document.documentElement]):new Selection$1([array$1(nt)],root$2)}function define$1(nt,rt,it){nt.prototype=rt.prototype=it,it.constructor=nt}function extend$1(nt,rt){var it=Object.create(nt.prototype);for(var st in rt)it[st]=rt[st];return it}function Color$2(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$2,color,{copy(nt){return Object.assign(new this.constructor,this,nt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(nt){var rt,it;return nt=(nt+"").trim().toLowerCase(),(rt=reHex.exec(nt))?(it=rt[1].length,rt=parseInt(rt[1],16),it===6?rgbn(rt):it===3?new Rgb(rt>>8&15|rt>>4&240,rt>>4&15|rt&240,(rt&15)<<4|rt&15,1):it===8?rgba$2(rt>>24&255,rt>>16&255,rt>>8&255,(rt&255)/255):it===4?rgba$2(rt>>12&15|rt>>8&240,rt>>8&15|rt>>4&240,rt>>4&15|rt&240,((rt&15)<<4|rt&15)/255):null):(rt=reRgbInteger.exec(nt))?new Rgb(rt[1],rt[2],rt[3],1):(rt=reRgbPercent.exec(nt))?new Rgb(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,1):(rt=reRgbaInteger.exec(nt))?rgba$2(rt[1],rt[2],rt[3],rt[4]):(rt=reRgbaPercent.exec(nt))?rgba$2(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,rt[4]):(rt=reHslPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,1):(rt=reHslaPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,rt[4]):named.hasOwnProperty(nt)?rgbn(named[nt]):nt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(nt){return new Rgb(nt>>16&255,nt>>8&255,nt&255,1)}function rgba$2(nt,rt,it,st){return st<=0&&(nt=rt=it=NaN),new Rgb(nt,rt,it,st)}function rgbConvert(nt){return nt instanceof Color$2||(nt=color(nt)),nt?(nt=nt.rgb(),new Rgb(nt.r,nt.g,nt.b,nt.opacity)):new Rgb}function rgb(nt,rt,it,st){return arguments.length===1?rgbConvert(nt):new Rgb(nt,rt,it,st==null?1:st)}function Rgb(nt,rt,it,st){this.r=+nt,this.g=+rt,this.b=+it,this.opacity=+st}define$1(Rgb,rgb,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const nt=clampa(this.opacity);return`${nt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${nt===1?")":`, ${nt})`}`}function clampa(nt){return isNaN(nt)?1:Math.max(0,Math.min(1,nt))}function clampi(nt){return Math.max(0,Math.min(255,Math.round(nt)||0))}function hex(nt){return nt=clampi(nt),(nt<16?"0":"")+nt.toString(16)}function hsla(nt,rt,it,st){return st<=0?nt=rt=it=NaN:it<=0||it>=1?nt=rt=NaN:rt<=0&&(nt=NaN),new Hsl(nt,rt,it,st)}function hslConvert(nt){if(nt instanceof Hsl)return new Hsl(nt.h,nt.s,nt.l,nt.opacity);if(nt instanceof Color$2||(nt=color(nt)),!nt)return new Hsl;if(nt instanceof Hsl)return nt;nt=nt.rgb();var rt=nt.r/255,it=nt.g/255,st=nt.b/255,bt=Math.min(rt,it,st),wt=Math.max(rt,it,st),Et=NaN,kt=wt-bt,Lt=(wt+bt)/2;return kt?(rt===wt?Et=(it-st)/kt+(it<st)*6:it===wt?Et=(st-rt)/kt+2:Et=(rt-it)/kt+4,kt/=Lt<.5?wt+bt:2-wt-bt,Et*=60):kt=Lt>0&&Lt<1?0:Et,new Hsl(Et,kt,Lt,nt.opacity)}function hsl(nt,rt,it,st){return arguments.length===1?hslConvert(nt):new Hsl(nt,rt,it,st==null?1:st)}function Hsl(nt,rt,it,st){this.h=+nt,this.s=+rt,this.l=+it,this.opacity=+st}define$1(Hsl,hsl,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},rgb(){var nt=this.h%360+(this.h<0)*360,rt=isNaN(nt)||isNaN(this.s)?0:this.s,it=this.l,st=it+(it<.5?it:1-it)*rt,bt=2*it-st;return new Rgb(hsl2rgb(nt>=240?nt-240:nt+120,bt,st),hsl2rgb(nt,bt,st),hsl2rgb(nt<120?nt+240:nt-120,bt,st),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const nt=clampa(this.opacity);return`${nt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${nt===1?")":`, ${nt})`}`}}));function clamph(nt){return nt=(nt||0)%360,nt<0?nt+360:nt}function clampt(nt){return Math.max(0,Math.min(1,nt||0))}function hsl2rgb(nt,rt,it){return(nt<60?rt+(it-rt)*nt/60:nt<180?it:nt<240?rt+(it-rt)*(240-nt)/60:rt)*255}const radians=Math.PI/180,degrees$1=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(nt){if(nt instanceof Lab)return new Lab(nt.l,nt.a,nt.b,nt.opacity);if(nt instanceof Hcl)return hcl2lab(nt);nt instanceof Rgb||(nt=rgbConvert(nt));var rt=rgb2lrgb(nt.r),it=rgb2lrgb(nt.g),st=rgb2lrgb(nt.b),bt=xyz2lab((.2225045*rt+.7168786*it+.0606169*st)/Yn),wt,Et;return rt===it&&it===st?wt=Et=bt:(wt=xyz2lab((.4360747*rt+.3850649*it+.1430804*st)/Xn),Et=xyz2lab((.0139322*rt+.0971045*it+.7141733*st)/Zn)),new Lab(116*bt-16,500*(wt-bt),200*(bt-Et),nt.opacity)}function lab(nt,rt,it,st){return arguments.length===1?labConvert(nt):new Lab(nt,rt,it,st==null?1:st)}function Lab(nt,rt,it,st){this.l=+nt,this.a=+rt,this.b=+it,this.opacity=+st}define$1(Lab,lab,extend$1(Color$2,{brighter(nt){return new Lab(this.l+K*(nt==null?1:nt),this.a,this.b,this.opacity)},darker(nt){return new Lab(this.l-K*(nt==null?1:nt),this.a,this.b,this.opacity)},rgb(){var nt=(this.l+16)/116,rt=isNaN(this.a)?nt:nt+this.a/500,it=isNaN(this.b)?nt:nt-this.b/200;return rt=Xn*lab2xyz(rt),nt=Yn*lab2xyz(nt),it=Zn*lab2xyz(it),new Rgb(lrgb2rgb(3.1338561*rt-1.6168667*nt-.4906146*it),lrgb2rgb(-.9787684*rt+1.9161415*nt+.033454*it),lrgb2rgb(.0719453*rt-.2289914*nt+1.4052427*it),this.opacity)}}));function xyz2lab(nt){return nt>t3?Math.pow(nt,1/3):nt/t2+t0$1}function lab2xyz(nt){return nt>t1$1?nt*nt*nt:t2*(nt-t0$1)}function lrgb2rgb(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function rgb2lrgb(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function hclConvert(nt){if(nt instanceof Hcl)return new Hcl(nt.h,nt.c,nt.l,nt.opacity);if(nt instanceof Lab||(nt=labConvert(nt)),nt.a===0&&nt.b===0)return new Hcl(NaN,0<nt.l&&nt.l<100?0:NaN,nt.l,nt.opacity);var rt=Math.atan2(nt.b,nt.a)*degrees$1;return new Hcl(rt<0?rt+360:rt,Math.sqrt(nt.a*nt.a+nt.b*nt.b),nt.l,nt.opacity)}function hcl$1(nt,rt,it,st){return arguments.length===1?hclConvert(nt):new Hcl(nt,rt,it,st==null?1:st)}function Hcl(nt,rt,it,st){this.h=+nt,this.c=+rt,this.l=+it,this.opacity=+st}function hcl2lab(nt){if(isNaN(nt.h))return new Lab(nt.l,0,0,nt.opacity);var rt=nt.h*radians;return new Lab(nt.l,Math.cos(rt)*nt.c,Math.sin(rt)*nt.c,nt.opacity)}define$1(Hcl,hcl$1,extend$1(Color$2,{brighter(nt){return new Hcl(this.h,this.c,this.l+K*(nt==null?1:nt),this.opacity)},darker(nt){return new Hcl(this.h,this.c,this.l-K*(nt==null?1:nt),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));const constant$2=nt=>()=>nt;function linear$1(nt,rt){return function(it){return nt+it*rt}}function exponential(nt,rt,it){return nt=Math.pow(nt,it),rt=Math.pow(rt,it)-nt,it=1/it,function(st){return Math.pow(nt+st*rt,it)}}function hue(nt,rt){var it=rt-nt;return it?linear$1(nt,it>180||it<-180?it-360*Math.round(it/360):it):constant$2(isNaN(nt)?rt:nt)}function gamma(nt){return(nt=+nt)==1?nogamma:function(rt,it){return it-rt?exponential(rt,it,nt):constant$2(isNaN(rt)?it:rt)}}function nogamma(nt,rt){var it=rt-nt;return it?linear$1(nt,it):constant$2(isNaN(nt)?rt:nt)}const interpolateRgb=function nt(rt){var it=gamma(rt);function st(bt,wt){var Et=it((bt=rgb(bt)).r,(wt=rgb(wt)).r),kt=it(bt.g,wt.g),Lt=it(bt.b,wt.b),Ot=nogamma(bt.opacity,wt.opacity);return function(Rt){return bt.r=Et(Rt),bt.g=kt(Rt),bt.b=Lt(Rt),bt.opacity=Ot(Rt),bt+""}}return st.gamma=nt,st}(1);function numberArray(nt,rt){rt||(rt=[]);var it=nt?Math.min(rt.length,nt.length):0,st=rt.slice(),bt;return function(wt){for(bt=0;bt<it;++bt)st[bt]=nt[bt]*(1-wt)+rt[bt]*wt;return st}}function isNumberArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function genericArray(nt,rt){var it=rt?rt.length:0,st=nt?Math.min(it,nt.length):0,bt=new Array(st),wt=new Array(it),Et;for(Et=0;Et<st;++Et)bt[Et]=interpolate$1(nt[Et],rt[Et]);for(;Et<it;++Et)wt[Et]=rt[Et];return function(kt){for(Et=0;Et<st;++Et)wt[Et]=bt[Et](kt);return wt}}function date$1(nt,rt){var it=new Date;return nt=+nt,rt=+rt,function(st){return it.setTime(nt*(1-st)+rt*st),it}}function interpolateNumber(nt,rt){return nt=+nt,rt=+rt,function(it){return nt*(1-it)+rt*it}}function object(nt,rt){var it={},st={},bt;(nt===null||typeof nt!="object")&&(nt={}),(rt===null||typeof rt!="object")&&(rt={});for(bt in rt)bt in nt?it[bt]=interpolate$1(nt[bt],rt[bt]):st[bt]=rt[bt];return function(wt){for(bt in it)st[bt]=it[bt](wt);return st}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(nt){return function(){return nt}}function one(nt){return function(rt){return nt(rt)+""}}function interpolateString(nt,rt){var it=reA.lastIndex=reB.lastIndex=0,st,bt,wt,Et=-1,kt=[],Lt=[];for(nt=nt+"",rt=rt+"";(st=reA.exec(nt))&&(bt=reB.exec(rt));)(wt=bt.index)>it&&(wt=rt.slice(it,wt),kt[Et]?kt[Et]+=wt:kt[++Et]=wt),(st=st[0])===(bt=bt[0])?kt[Et]?kt[Et]+=bt:kt[++Et]=bt:(kt[++Et]=null,Lt.push({i:Et,x:interpolateNumber(st,bt)})),it=reB.lastIndex;return it<rt.length&&(wt=rt.slice(it),kt[Et]?kt[Et]+=wt:kt[++Et]=wt),kt.length<2?Lt[0]?one(Lt[0].x):zero(rt):(rt=Lt.length,function(Ot){for(var Rt=0,Dt;Rt<rt;++Rt)kt[(Dt=Lt[Rt]).i]=Dt.x(Ot);return kt.join("")})}function interpolate$1(nt,rt){var it=typeof rt,st;return rt==null||it==="boolean"?constant$2(rt):(it==="number"?interpolateNumber:it==="string"?(st=color(rt))?(rt=st,interpolateRgb):interpolateString:rt instanceof color?interpolateRgb:rt instanceof Date?date$1:isNumberArray(rt)?numberArray:Array.isArray(rt)?genericArray:typeof rt.valueOf!="function"&&typeof rt.toString!="function"||isNaN(rt)?object:interpolateNumber)(nt,rt)}function interpolateRound(nt,rt){return nt=+nt,rt=+rt,function(it){return Math.round(nt*(1-it)+rt*it)}}var degrees=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(nt,rt,it,st,bt,wt){var Et,kt,Lt;return(Et=Math.sqrt(nt*nt+rt*rt))&&(nt/=Et,rt/=Et),(Lt=nt*it+rt*st)&&(it-=nt*Lt,st-=rt*Lt),(kt=Math.sqrt(it*it+st*st))&&(it/=kt,st/=kt,Lt/=kt),nt*st<rt*it&&(nt=-nt,rt=-rt,Lt=-Lt,Et=-Et),{translateX:bt,translateY:wt,rotate:Math.atan2(rt,nt)*degrees,skewX:Math.atan(Lt)*degrees,scaleX:Et,scaleY:kt}}var svgNode;function parseCss(nt){const rt=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(nt+"");return rt.isIdentity?identity$4:decompose(rt.a,rt.b,rt.c,rt.d,rt.e,rt.f)}function parseSvg(nt){return nt==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",nt),!(nt=svgNode.transform.baseVal.consolidate()))?identity$4:(nt=nt.matrix,decompose(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f))}function interpolateTransform(nt,rt,it,st){function bt(Ot){return Ot.length?Ot.pop()+" ":""}function wt(Ot,Rt,Dt,Bt,Ft,Yt){if(Ot!==Dt||Rt!==Bt){var Jt=Ft.push("translate(",null,rt,null,it);Yt.push({i:Jt-4,x:interpolateNumber(Ot,Dt)},{i:Jt-2,x:interpolateNumber(Rt,Bt)})}else(Dt||Bt)&&Ft.push("translate("+Dt+rt+Bt+it)}function Et(Ot,Rt,Dt,Bt){Ot!==Rt?(Ot-Rt>180?Rt+=360:Rt-Ot>180&&(Ot+=360),Bt.push({i:Dt.push(bt(Dt)+"rotate(",null,st)-2,x:interpolateNumber(Ot,Rt)})):Rt&&Dt.push(bt(Dt)+"rotate("+Rt+st)}function kt(Ot,Rt,Dt,Bt){Ot!==Rt?Bt.push({i:Dt.push(bt(Dt)+"skewX(",null,st)-2,x:interpolateNumber(Ot,Rt)}):Rt&&Dt.push(bt(Dt)+"skewX("+Rt+st)}function Lt(Ot,Rt,Dt,Bt,Ft,Yt){if(Ot!==Dt||Rt!==Bt){var Jt=Ft.push(bt(Ft)+"scale(",null,",",null,")");Yt.push({i:Jt-4,x:interpolateNumber(Ot,Dt)},{i:Jt-2,x:interpolateNumber(Rt,Bt)})}else(Dt!==1||Bt!==1)&&Ft.push(bt(Ft)+"scale("+Dt+","+Bt+")")}return function(Ot,Rt){var Dt=[],Bt=[];return Ot=nt(Ot),Rt=nt(Rt),wt(Ot.translateX,Ot.translateY,Rt.translateX,Rt.translateY,Dt,Bt),Et(Ot.rotate,Rt.rotate,Dt,Bt),kt(Ot.skewX,Rt.skewX,Dt,Bt),Lt(Ot.scaleX,Ot.scaleY,Rt.scaleX,Rt.scaleY,Dt,Bt),Ot=Rt=null,function(Ft){for(var Yt=-1,Jt=Bt.length,Wt;++Yt<Jt;)Dt[(Wt=Bt[Yt]).i]=Wt.x(Ft);return Dt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hcl(nt){return function(rt,it){var st=nt((rt=hcl$1(rt)).h,(it=hcl$1(it)).h),bt=nogamma(rt.c,it.c),wt=nogamma(rt.l,it.l),Et=nogamma(rt.opacity,it.opacity);return function(kt){return rt.h=st(kt),rt.c=bt(kt),rt.l=wt(kt),rt.opacity=Et(kt),rt+""}}}const interpolateHcl=hcl(hue);var frame$1=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(nt){setTimeout(nt,17)};function now$2(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(nt,rt,it){if(typeof nt!="function")throw new TypeError("callback is not a function");it=(it==null?now$2():+it)+(rt==null?0:+rt),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=nt,this._time=it,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(nt,rt,it){var st=new Timer;return st.restart(nt,rt,it),st}function timerFlush(){now$2(),++frame$1;for(var nt=taskHead,rt;nt;)(rt=clockNow-nt._time)>=0&&nt._call.call(void 0,rt),nt=nt._next;--frame$1}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$1=timeout$1=0;try{timerFlush()}finally{frame$1=0,nap(),clockNow=0}}function poke(){var nt=clock.now(),rt=nt-clockLast;rt>pokeDelay&&(clockSkew-=rt,clockLast=nt)}function nap(){for(var nt,rt=taskHead,it,st=1/0;rt;)rt._call?(st>rt._time&&(st=rt._time),nt=rt,rt=rt._next):(it=rt._next,rt._next=null,rt=nt?nt._next=it:taskHead=it);taskTail=nt,sleep(st)}function sleep(nt){if(!frame$1){timeout$1&&(timeout$1=clearTimeout(timeout$1));var rt=nt-clockNow;rt>24?(nt<1/0&&(timeout$1=setTimeout(wake,nt-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame$1=1,setFrame(wake))}}function timeout(nt,rt,it){var st=new Timer;return rt=rt==null?0:+rt,st.restart(bt=>{st.stop(),nt(bt+rt)},rt,it),st}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(nt,rt,it,st,bt,wt){var Et=nt.__transition;if(!Et)nt.__transition={};else if(it in Et)return;create$1(nt,it,{name:rt,index:st,group:bt,on:emptyOn,tween:emptyTween,time:wt.time,delay:wt.delay,duration:wt.duration,ease:wt.ease,timer:null,state:CREATED})}function init$2(nt,rt){var it=get$2(nt,rt);if(it.state>CREATED)throw new Error("too late; already scheduled");return it}function set(nt,rt){var it=get$2(nt,rt);if(it.state>STARTED)throw new Error("too late; already running");return it}function get$2(nt,rt){var it=nt.__transition;if(!it||!(it=it[rt]))throw new Error("transition not found");return it}function create$1(nt,rt,it){var st=nt.__transition,bt;st[rt]=it,it.timer=timer(wt,0,it.time);function wt(Ot){it.state=SCHEDULED,it.timer.restart(Et,it.delay,it.time),it.delay<=Ot&&Et(Ot-it.delay)}function Et(Ot){var Rt,Dt,Bt,Ft;if(it.state!==SCHEDULED)return Lt();for(Rt in st)if(Ft=st[Rt],Ft.name===it.name){if(Ft.state===STARTED)return timeout(Et);Ft.state===RUNNING?(Ft.state=ENDED,Ft.timer.stop(),Ft.on.call("interrupt",nt,nt.__data__,Ft.index,Ft.group),delete st[Rt]):+Rt<rt&&(Ft.state=ENDED,Ft.timer.stop(),Ft.on.call("cancel",nt,nt.__data__,Ft.index,Ft.group),delete st[Rt])}if(timeout(function(){it.state===STARTED&&(it.state=RUNNING,it.timer.restart(kt,it.delay,it.time),kt(Ot))}),it.state=STARTING,it.on.call("start",nt,nt.__data__,it.index,it.group),it.state===STARTING){for(it.state=STARTED,bt=new Array(Bt=it.tween.length),Rt=0,Dt=-1;Rt<Bt;++Rt)(Ft=it.tween[Rt].value.call(nt,nt.__data__,it.index,it.group))&&(bt[++Dt]=Ft);bt.length=Dt+1}}function kt(Ot){for(var Rt=Ot<it.duration?it.ease.call(null,Ot/it.duration):(it.timer.restart(Lt),it.state=ENDING,1),Dt=-1,Bt=bt.length;++Dt<Bt;)bt[Dt].call(nt,Rt);it.state===ENDING&&(it.on.call("end",nt,nt.__data__,it.index,it.group),Lt())}function Lt(){it.state=ENDED,it.timer.stop(),delete st[rt];for(var Ot in st)return;delete nt.__transition}}function interrupt(nt,rt){var it=nt.__transition,st,bt,wt=!0,Et;if(!!it){rt=rt==null?null:rt+"";for(Et in it){if((st=it[Et]).name!==rt){wt=!1;continue}bt=st.state>STARTING&&st.state<ENDING,st.state=ENDED,st.timer.stop(),st.on.call(bt?"interrupt":"cancel",nt,nt.__data__,st.index,st.group),delete it[Et]}wt&&delete nt.__transition}}function selection_interrupt(nt){return this.each(function(){interrupt(this,nt)})}function tweenRemove(nt,rt){var it,st;return function(){var bt=set(this,nt),wt=bt.tween;if(wt!==it){st=it=wt;for(var Et=0,kt=st.length;Et<kt;++Et)if(st[Et].name===rt){st=st.slice(),st.splice(Et,1);break}}bt.tween=st}}function tweenFunction(nt,rt,it){var st,bt;if(typeof it!="function")throw new Error;return function(){var wt=set(this,nt),Et=wt.tween;if(Et!==st){bt=(st=Et).slice();for(var kt={name:rt,value:it},Lt=0,Ot=bt.length;Lt<Ot;++Lt)if(bt[Lt].name===rt){bt[Lt]=kt;break}Lt===Ot&&bt.push(kt)}wt.tween=bt}}function transition_tween(nt,rt){var it=this._id;if(nt+="",arguments.length<2){for(var st=get$2(this.node(),it).tween,bt=0,wt=st.length,Et;bt<wt;++bt)if((Et=st[bt]).name===nt)return Et.value;return null}return this.each((rt==null?tweenRemove:tweenFunction)(it,nt,rt))}function tweenValue(nt,rt,it){var st=nt._id;return nt.each(function(){var bt=set(this,st);(bt.value||(bt.value={}))[rt]=it.apply(this,arguments)}),function(bt){return get$2(bt,st).value[rt]}}function interpolate(nt,rt){var it;return(typeof rt=="number"?interpolateNumber:rt instanceof color?interpolateRgb:(it=color(rt))?(rt=it,interpolateRgb):interpolateString)(nt,rt)}function attrRemove(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant(nt,rt,it){var st,bt=it+"",wt;return function(){var Et=this.getAttribute(nt);return Et===bt?null:Et===st?wt:wt=rt(st=Et,it)}}function attrConstantNS(nt,rt,it){var st,bt=it+"",wt;return function(){var Et=this.getAttributeNS(nt.space,nt.local);return Et===bt?null:Et===st?wt:wt=rt(st=Et,it)}}function attrFunction(nt,rt,it){var st,bt,wt;return function(){var Et,kt=it(this),Lt;return kt==null?void this.removeAttribute(nt):(Et=this.getAttribute(nt),Lt=kt+"",Et===Lt?null:Et===st&&Lt===bt?wt:(bt=Lt,wt=rt(st=Et,kt)))}}function attrFunctionNS(nt,rt,it){var st,bt,wt;return function(){var Et,kt=it(this),Lt;return kt==null?void this.removeAttributeNS(nt.space,nt.local):(Et=this.getAttributeNS(nt.space,nt.local),Lt=kt+"",Et===Lt?null:Et===st&&Lt===bt?wt:(bt=Lt,wt=rt(st=Et,kt)))}}function transition_attr(nt,rt){var it=namespace(nt),st=it==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(nt,typeof rt=="function"?(it.local?attrFunctionNS:attrFunction)(it,st,tweenValue(this,"attr."+nt,rt)):rt==null?(it.local?attrRemoveNS:attrRemove)(it):(it.local?attrConstantNS:attrConstant)(it,st,rt))}function attrInterpolate(nt,rt){return function(it){this.setAttribute(nt,rt.call(this,it))}}function attrInterpolateNS(nt,rt){return function(it){this.setAttributeNS(nt.space,nt.local,rt.call(this,it))}}function attrTweenNS(nt,rt){var it,st;function bt(){var wt=rt.apply(this,arguments);return wt!==st&&(it=(st=wt)&&attrInterpolateNS(nt,wt)),it}return bt._value=rt,bt}function attrTween(nt,rt){var it,st;function bt(){var wt=rt.apply(this,arguments);return wt!==st&&(it=(st=wt)&&attrInterpolate(nt,wt)),it}return bt._value=rt,bt}function transition_attrTween(nt,rt){var it="attr."+nt;if(arguments.length<2)return(it=this.tween(it))&&it._value;if(rt==null)return this.tween(it,null);if(typeof rt!="function")throw new Error;var st=namespace(nt);return this.tween(it,(st.local?attrTweenNS:attrTween)(st,rt))}function delayFunction(nt,rt){return function(){init$2(this,nt).delay=+rt.apply(this,arguments)}}function delayConstant(nt,rt){return rt=+rt,function(){init$2(this,nt).delay=rt}}function transition_delay(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?delayFunction:delayConstant)(rt,nt)):get$2(this.node(),rt).delay}function durationFunction(nt,rt){return function(){set(this,nt).duration=+rt.apply(this,arguments)}}function durationConstant(nt,rt){return rt=+rt,function(){set(this,nt).duration=rt}}function transition_duration(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?durationFunction:durationConstant)(rt,nt)):get$2(this.node(),rt).duration}function easeConstant(nt,rt){if(typeof rt!="function")throw new Error;return function(){set(this,nt).ease=rt}}function transition_ease(nt){var rt=this._id;return arguments.length?this.each(easeConstant(rt,nt)):get$2(this.node(),rt).ease}function easeVarying(nt,rt){return function(){var it=rt.apply(this,arguments);if(typeof it!="function")throw new Error;set(this,nt).ease=it}}function transition_easeVarying(nt){if(typeof nt!="function")throw new Error;return this.each(easeVarying(this._id,nt))}function transition_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),bt=0;bt<it;++bt)for(var wt=rt[bt],Et=wt.length,kt=st[bt]=[],Lt,Ot=0;Ot<Et;++Ot)(Lt=wt[Ot])&&nt.call(Lt,Lt.__data__,Ot,wt)&&kt.push(Lt);return new Transition(st,this._parents,this._name,this._id)}function transition_merge(nt){if(nt._id!==this._id)throw new Error;for(var rt=this._groups,it=nt._groups,st=rt.length,bt=it.length,wt=Math.min(st,bt),Et=new Array(st),kt=0;kt<wt;++kt)for(var Lt=rt[kt],Ot=it[kt],Rt=Lt.length,Dt=Et[kt]=new Array(Rt),Bt,Ft=0;Ft<Rt;++Ft)(Bt=Lt[Ft]||Ot[Ft])&&(Dt[Ft]=Bt);for(;kt<st;++kt)Et[kt]=rt[kt];return new Transition(Et,this._parents,this._name,this._id)}function start$1(nt){return(nt+"").trim().split(/^|\s+/).every(function(rt){var it=rt.indexOf(".");return it>=0&&(rt=rt.slice(0,it)),!rt||rt==="start"})}function onFunction(nt,rt,it){var st,bt,wt=start$1(rt)?init$2:set;return function(){var Et=wt(this,nt),kt=Et.on;kt!==st&&(bt=(st=kt).copy()).on(rt,it),Et.on=bt}}function transition_on(nt,rt){var it=this._id;return arguments.length<2?get$2(this.node(),it).on.on(nt):this.each(onFunction(it,nt,rt))}function removeFunction(nt){return function(){var rt=this.parentNode;for(var it in this.__transition)if(+it!==nt)return;rt&&rt.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selector(nt));for(var st=this._groups,bt=st.length,wt=new Array(bt),Et=0;Et<bt;++Et)for(var kt=st[Et],Lt=kt.length,Ot=wt[Et]=new Array(Lt),Rt,Dt,Bt=0;Bt<Lt;++Bt)(Rt=kt[Bt])&&(Dt=nt.call(Rt,Rt.__data__,Bt,kt))&&("__data__"in Rt&&(Dt.__data__=Rt.__data__),Ot[Bt]=Dt,schedule(Ot[Bt],rt,it,Bt,Ot,get$2(Rt,it)));return new Transition(wt,this._parents,rt,it)}function transition_selectAll(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selectorAll(nt));for(var st=this._groups,bt=st.length,wt=[],Et=[],kt=0;kt<bt;++kt)for(var Lt=st[kt],Ot=Lt.length,Rt,Dt=0;Dt<Ot;++Dt)if(Rt=Lt[Dt]){for(var Bt=nt.call(Rt,Rt.__data__,Dt,Lt),Ft,Yt=get$2(Rt,it),Jt=0,Wt=Bt.length;Jt<Wt;++Jt)(Ft=Bt[Jt])&&schedule(Ft,rt,it,Jt,Bt,Yt);wt.push(Bt),Et.push(Rt)}return new Transition(wt,Et,rt,it)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(nt,rt){var it,st,bt;return function(){var wt=styleValue(this,nt),Et=(this.style.removeProperty(nt),styleValue(this,nt));return wt===Et?null:wt===it&&Et===st?bt:bt=rt(it=wt,st=Et)}}function styleRemove(nt){return function(){this.style.removeProperty(nt)}}function styleConstant(nt,rt,it){var st,bt=it+"",wt;return function(){var Et=styleValue(this,nt);return Et===bt?null:Et===st?wt:wt=rt(st=Et,it)}}function styleFunction(nt,rt,it){var st,bt,wt;return function(){var Et=styleValue(this,nt),kt=it(this),Lt=kt+"";return kt==null&&(Lt=kt=(this.style.removeProperty(nt),styleValue(this,nt))),Et===Lt?null:Et===st&&Lt===bt?wt:(bt=Lt,wt=rt(st=Et,kt))}}function styleMaybeRemove(nt,rt){var it,st,bt,wt="style."+rt,Et="end."+wt,kt;return function(){var Lt=set(this,nt),Ot=Lt.on,Rt=Lt.value[wt]==null?kt||(kt=styleRemove(rt)):void 0;(Ot!==it||bt!==Rt)&&(st=(it=Ot).copy()).on(Et,bt=Rt),Lt.on=st}}function transition_style(nt,rt,it){var st=(nt+="")=="transform"?interpolateTransformCss:interpolate;return rt==null?this.styleTween(nt,styleNull(nt,st)).on("end.style."+nt,styleRemove(nt)):typeof rt=="function"?this.styleTween(nt,styleFunction(nt,st,tweenValue(this,"style."+nt,rt))).each(styleMaybeRemove(this._id,nt)):this.styleTween(nt,styleConstant(nt,st,rt),it).on("end.style."+nt,null)}function styleInterpolate(nt,rt,it){return function(st){this.style.setProperty(nt,rt.call(this,st),it)}}function styleTween(nt,rt,it){var st,bt;function wt(){var Et=rt.apply(this,arguments);return Et!==bt&&(st=(bt=Et)&&styleInterpolate(nt,Et,it)),st}return wt._value=rt,wt}function transition_styleTween(nt,rt,it){var st="style."+(nt+="");if(arguments.length<2)return(st=this.tween(st))&&st._value;if(rt==null)return this.tween(st,null);if(typeof rt!="function")throw new Error;return this.tween(st,styleTween(nt,rt,it==null?"":it))}function textConstant(nt){return function(){this.textContent=nt}}function textFunction(nt){return function(){var rt=nt(this);this.textContent=rt==null?"":rt}}function transition_text(nt){return this.tween("text",typeof nt=="function"?textFunction(tweenValue(this,"text",nt)):textConstant(nt==null?"":nt+""))}function textInterpolate(nt){return function(rt){this.textContent=nt.call(this,rt)}}function textTween(nt){var rt,it;function st(){var bt=nt.apply(this,arguments);return bt!==it&&(rt=(it=bt)&&textInterpolate(bt)),rt}return st._value=nt,st}function transition_textTween(nt){var rt="text";if(arguments.length<1)return(rt=this.tween(rt))&&rt._value;if(nt==null)return this.tween(rt,null);if(typeof nt!="function")throw new Error;return this.tween(rt,textTween(nt))}function transition_transition(){for(var nt=this._name,rt=this._id,it=newId(),st=this._groups,bt=st.length,wt=0;wt<bt;++wt)for(var Et=st[wt],kt=Et.length,Lt,Ot=0;Ot<kt;++Ot)if(Lt=Et[Ot]){var Rt=get$2(Lt,rt);schedule(Lt,nt,it,Ot,Et,{time:Rt.time+Rt.delay+Rt.duration,delay:0,duration:Rt.duration,ease:Rt.ease})}return new Transition(st,this._parents,nt,it)}function transition_end(){var nt,rt,it=this,st=it._id,bt=it.size();return new Promise(function(wt,Et){var kt={value:Et},Lt={value:function(){--bt===0&&wt()}};it.each(function(){var Ot=set(this,st),Rt=Ot.on;Rt!==nt&&(rt=(nt=Rt).copy(),rt._.cancel.push(kt),rt._.interrupt.push(kt),rt._.end.push(Lt)),Ot.on=rt}),bt===0&&wt()})}var id$2=0;function Transition(nt,rt,it,st){this._groups=nt,this._parents=rt,this._name=it,this._id=st}function newId(){return++id$2}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(nt){return((nt*=2)<=1?nt*nt*nt:(nt-=2)*nt*nt+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(nt,rt){for(var it;!(it=nt.__transition)||!(it=it[rt]);)if(!(nt=nt.parentNode))throw new Error(`transition ${rt} not found`);return it}function selection_transition(nt){var rt,it;nt instanceof Transition?(rt=nt._id,nt=nt._name):(rt=newId(),(it=defaultTiming).time=now$2(),nt=nt==null?null:nt+"");for(var st=this._groups,bt=st.length,wt=0;wt<bt;++wt)for(var Et=st[wt],kt=Et.length,Lt,Ot=0;Ot<kt;++Ot)(Lt=Et[Ot])&&schedule(Lt,nt,rt,Ot,Et,it||inherit(Lt,rt));return new Transition(st,this._parents,nt,rt)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append$1(nt){this._+=nt[0];for(let rt=1,it=nt.length;rt<it;++rt)this._+=arguments[rt]+nt[rt]}function appendRound(nt){let rt=Math.floor(nt);if(!(rt>=0))throw new Error(`invalid digits: ${nt}`);if(rt>15)return append$1;const it=10**rt;return function(st){this._+=st[0];for(let bt=1,wt=st.length;bt<wt;++bt)this._+=Math.round(arguments[bt]*it)/it+st[bt]}}class Path{constructor(rt){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=rt==null?append$1:appendRound(rt)}moveTo(rt,it){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(rt,it){this._append`L${this._x1=+rt},${this._y1=+it}`}quadraticCurveTo(rt,it,st,bt){this._append`Q${+rt},${+it},${this._x1=+st},${this._y1=+bt}`}bezierCurveTo(rt,it,st,bt,wt,Et){this._append`C${+rt},${+it},${+st},${+bt},${this._x1=+wt},${this._y1=+Et}`}arcTo(rt,it,st,bt,wt){if(rt=+rt,it=+it,st=+st,bt=+bt,wt=+wt,wt<0)throw new Error(`negative radius: ${wt}`);let Et=this._x1,kt=this._y1,Lt=st-rt,Ot=bt-it,Rt=Et-rt,Dt=kt-it,Bt=Rt*Rt+Dt*Dt;if(this._x1===null)this._append`M${this._x1=rt},${this._y1=it}`;else if(Bt>epsilon$1)if(!(Math.abs(Dt*Lt-Ot*Rt)>epsilon$1)||!wt)this._append`L${this._x1=rt},${this._y1=it}`;else{let Ft=st-Et,Yt=bt-kt,Jt=Lt*Lt+Ot*Ot,Wt=Ft*Ft+Yt*Yt,Qt=Math.sqrt(Jt),rn=Math.sqrt(Bt),sn=wt*Math.tan((pi$1-Math.acos((Jt+Bt-Wt)/(2*Qt*rn)))/2),on=sn/rn,hn=sn/Qt;Math.abs(on-1)>epsilon$1&&this._append`L${rt+on*Rt},${it+on*Dt}`,this._append`A${wt},${wt},0,0,${+(Dt*Ft>Rt*Yt)},${this._x1=rt+hn*Lt},${this._y1=it+hn*Ot}`}}arc(rt,it,st,bt,wt,Et){if(rt=+rt,it=+it,st=+st,Et=!!Et,st<0)throw new Error(`negative radius: ${st}`);let kt=st*Math.cos(bt),Lt=st*Math.sin(bt),Ot=rt+kt,Rt=it+Lt,Dt=1^Et,Bt=Et?bt-wt:wt-bt;this._x1===null?this._append`M${Ot},${Rt}`:(Math.abs(this._x1-Ot)>epsilon$1||Math.abs(this._y1-Rt)>epsilon$1)&&this._append`L${Ot},${Rt}`,st&&(Bt<0&&(Bt=Bt%tau$1+tau$1),Bt>tauEpsilon?this._append`A${st},${st},0,1,${Dt},${rt-kt},${it-Lt}A${st},${st},0,1,${Dt},${this._x1=Ot},${this._y1=Rt}`:Bt>epsilon$1&&this._append`A${st},${st},0,${+(Bt>=pi$1)},${Dt},${this._x1=rt+st*Math.cos(wt)},${this._y1=it+st*Math.sin(wt)}`)}rect(rt,it,st,bt){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}h${st=+st}v${+bt}h${-st}Z`}toString(){return this._}}function responseText(nt){if(!nt.ok)throw new Error(nt.status+" "+nt.statusText);return nt.text()}function text$1(nt,rt){return fetch(nt,rt).then(responseText)}function parser$c(nt){return(rt,it)=>text$1(rt,it).then(st=>new DOMParser().parseFromString(st,nt))}var svg$2=parser$c("image/svg+xml");function formatDecimal(nt){return Math.abs(nt=Math.round(nt))>=1e21?nt.toLocaleString("en").replace(/,/g,""):nt.toString(10)}function formatDecimalParts(nt,rt){if((it=(nt=rt?nt.toExponential(rt-1):nt.toExponential()).indexOf("e"))<0)return null;var it,st=nt.slice(0,it);return[st.length>1?st[0]+st.slice(2):st,+nt.slice(it+1)]}function exponent(nt){return nt=formatDecimalParts(Math.abs(nt)),nt?nt[1]:NaN}function formatGroup(nt,rt){return function(it,st){for(var bt=it.length,wt=[],Et=0,kt=nt[0],Lt=0;bt>0&&kt>0&&(Lt+kt+1>st&&(kt=Math.max(1,st-Lt)),wt.push(it.substring(bt-=kt,bt+kt)),!((Lt+=kt+1)>st));)kt=nt[Et=(Et+1)%nt.length];return wt.reverse().join(rt)}}function formatNumerals(nt){return function(rt){return rt.replace(/[0-9]/g,function(it){return nt[+it]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(nt){if(!(rt=re.exec(nt)))throw new Error("invalid format: "+nt);var rt;return new FormatSpecifier({fill:rt[1],align:rt[2],sign:rt[3],symbol:rt[4],zero:rt[5],width:rt[6],comma:rt[7],precision:rt[8]&&rt[8].slice(1),trim:rt[9],type:rt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(nt){this.fill=nt.fill===void 0?" ":nt.fill+"",this.align=nt.align===void 0?">":nt.align+"",this.sign=nt.sign===void 0?"-":nt.sign+"",this.symbol=nt.symbol===void 0?"":nt.symbol+"",this.zero=!!nt.zero,this.width=nt.width===void 0?void 0:+nt.width,this.comma=!!nt.comma,this.precision=nt.precision===void 0?void 0:+nt.precision,this.trim=!!nt.trim,this.type=nt.type===void 0?"":nt.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(nt){e:for(var rt=nt.length,it=1,st=-1,bt;it<rt;++it)switch(nt[it]){case".":st=bt=it;break;case"0":st===0&&(st=it),bt=it;break;default:if(!+nt[it])break e;st>0&&(st=0);break}return st>0?nt.slice(0,st)+nt.slice(bt+1):nt}var prefixExponent;function formatPrefixAuto(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var st=it[0],bt=it[1],wt=bt-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(bt/3)))*3)+1,Et=st.length;return wt===Et?st:wt>Et?st+new Array(wt-Et+1).join("0"):wt>0?st.slice(0,wt)+"."+st.slice(wt):"0."+new Array(1-wt).join("0")+formatDecimalParts(nt,Math.max(0,rt+wt-1))[0]}function formatRounded(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var st=it[0],bt=it[1];return bt<0?"0."+new Array(-bt).join("0")+st:st.length>bt+1?st.slice(0,bt+1)+"."+st.slice(bt+1):st+new Array(bt-st.length+2).join("0")}const formatTypes={"%":(nt,rt)=>(nt*100).toFixed(rt),b:nt=>Math.round(nt).toString(2),c:nt=>nt+"",d:formatDecimal,e:(nt,rt)=>nt.toExponential(rt),f:(nt,rt)=>nt.toFixed(rt),g:(nt,rt)=>nt.toPrecision(rt),o:nt=>Math.round(nt).toString(8),p:(nt,rt)=>formatRounded(nt*100,rt),r:formatRounded,s:formatPrefixAuto,X:nt=>Math.round(nt).toString(16).toUpperCase(),x:nt=>Math.round(nt).toString(16)};function identity$3(nt){return nt}var map$2=Array.prototype.map,prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(nt){var rt=nt.grouping===void 0||nt.thousands===void 0?identity$3:formatGroup(map$2.call(nt.grouping,Number),nt.thousands+""),it=nt.currency===void 0?"":nt.currency[0]+"",st=nt.currency===void 0?"":nt.currency[1]+"",bt=nt.decimal===void 0?".":nt.decimal+"",wt=nt.numerals===void 0?identity$3:formatNumerals(map$2.call(nt.numerals,String)),Et=nt.percent===void 0?"%":nt.percent+"",kt=nt.minus===void 0?"\u2212":nt.minus+"",Lt=nt.nan===void 0?"NaN":nt.nan+"";function Ot(Dt){Dt=formatSpecifier(Dt);var Bt=Dt.fill,Ft=Dt.align,Yt=Dt.sign,Jt=Dt.symbol,Wt=Dt.zero,Qt=Dt.width,rn=Dt.comma,sn=Dt.precision,on=Dt.trim,hn=Dt.type;hn==="n"?(rn=!0,hn="g"):formatTypes[hn]||(sn===void 0&&(sn=12),on=!0,hn="g"),(Wt||Bt==="0"&&Ft==="=")&&(Wt=!0,Bt="0",Ft="=");var mn=Jt==="$"?it:Jt==="#"&&/[boxX]/.test(hn)?"0"+hn.toLowerCase():"",Cn=Jt==="$"?st:/[%p]/.test(hn)?Et:"",Tn=formatTypes[hn],kn=/[defgprs%]/.test(hn);sn=sn===void 0?6:/[gprs]/.test(hn)?Math.max(1,Math.min(21,sn)):Math.max(0,Math.min(20,sn));function In(Ln){var pn=mn,Hn=Cn,yn,mr,vn;if(hn==="c")Hn=Tn(Ln)+Hn,Ln="";else{Ln=+Ln;var yr=Ln<0||1/Ln<0;if(Ln=isNaN(Ln)?Lt:Tn(Math.abs(Ln),sn),on&&(Ln=formatTrim(Ln)),yr&&+Ln==0&&Yt!=="+"&&(yr=!1),pn=(yr?Yt==="("?Yt:kt:Yt==="-"||Yt==="("?"":Yt)+pn,Hn=(hn==="s"?prefixes[8+prefixExponent/3]:"")+Hn+(yr&&Yt==="("?")":""),kn){for(yn=-1,mr=Ln.length;++yn<mr;)if(vn=Ln.charCodeAt(yn),48>vn||vn>57){Hn=(vn===46?bt+Ln.slice(yn+1):Ln.slice(yn))+Hn,Ln=Ln.slice(0,yn);break}}}rn&&!Wt&&(Ln=rt(Ln,1/0));var Tr=pn.length+Ln.length+Hn.length,Mr=Tr<Qt?new Array(Qt-Tr+1).join(Bt):"";switch(rn&&Wt&&(Ln=rt(Mr+Ln,Mr.length?Qt-Hn.length:1/0),Mr=""),Ft){case"<":Ln=pn+Ln+Hn+Mr;break;case"=":Ln=pn+Mr+Ln+Hn;break;case"^":Ln=Mr.slice(0,Tr=Mr.length>>1)+pn+Ln+Hn+Mr.slice(Tr);break;default:Ln=Mr+pn+Ln+Hn;break}return wt(Ln)}return In.toString=function(){return Dt+""},In}function Rt(Dt,Bt){var Ft=Ot((Dt=formatSpecifier(Dt),Dt.type="f",Dt)),Yt=Math.max(-8,Math.min(8,Math.floor(exponent(Bt)/3)))*3,Jt=Math.pow(10,-Yt),Wt=prefixes[8+Yt/3];return function(Qt){return Ft(Jt*Qt)+Wt}}return{format:Ot,formatPrefix:Rt}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(nt){return locale$1=formatLocale$1(nt),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(nt){return Math.max(0,-exponent(Math.abs(nt)))}function precisionPrefix(nt,rt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(rt)/3)))*3-exponent(Math.abs(nt)))}function precisionRound(nt,rt){return nt=Math.abs(nt),rt=Math.abs(rt)-nt,Math.max(0,exponent(rt)-exponent(nt))+1}function initRange(nt,rt){switch(arguments.length){case 0:break;case 1:this.range(nt);break;default:this.range(rt).domain(nt);break}return this}const implicit=Symbol("implicit");function ordinal(){var nt=new InternMap,rt=[],it=[],st=implicit;function bt(wt){let Et=nt.get(wt);if(Et===void 0){if(st!==implicit)return st;nt.set(wt,Et=rt.push(wt)-1)}return it[Et%it.length]}return bt.domain=function(wt){if(!arguments.length)return rt.slice();rt=[],nt=new InternMap;for(const Et of wt)nt.has(Et)||nt.set(Et,rt.push(Et)-1);return bt},bt.range=function(wt){return arguments.length?(it=Array.from(wt),bt):it.slice()},bt.unknown=function(wt){return arguments.length?(st=wt,bt):st},bt.copy=function(){return ordinal(rt,it).unknown(st)},initRange.apply(bt,arguments),bt}function constants$1(nt){return function(){return nt}}function number$1(nt){return+nt}var unit$1=[0,1];function identity$2(nt){return nt}function normalize(nt,rt){return(rt-=nt=+nt)?function(it){return(it-nt)/rt}:constants$1(isNaN(rt)?NaN:.5)}function clamper(nt,rt){var it;return nt>rt&&(it=nt,nt=rt,rt=it),function(st){return Math.max(nt,Math.min(rt,st))}}function bimap(nt,rt,it){var st=nt[0],bt=nt[1],wt=rt[0],Et=rt[1];return bt<st?(st=normalize(bt,st),wt=it(Et,wt)):(st=normalize(st,bt),wt=it(wt,Et)),function(kt){return wt(st(kt))}}function polymap(nt,rt,it){var st=Math.min(nt.length,rt.length)-1,bt=new Array(st),wt=new Array(st),Et=-1;for(nt[st]<nt[0]&&(nt=nt.slice().reverse(),rt=rt.slice().reverse());++Et<st;)bt[Et]=normalize(nt[Et],nt[Et+1]),wt[Et]=it(rt[Et],rt[Et+1]);return function(kt){var Lt=bisect(nt,kt,1,st)-1;return wt[Lt](bt[Lt](kt))}}function copy$1(nt,rt){return rt.domain(nt.domain()).range(nt.range()).interpolate(nt.interpolate()).clamp(nt.clamp()).unknown(nt.unknown())}function transformer(){var nt=unit$1,rt=unit$1,it=interpolate$1,st,bt,wt,Et=identity$2,kt,Lt,Ot;function Rt(){var Bt=Math.min(nt.length,rt.length);return Et!==identity$2&&(Et=clamper(nt[0],nt[Bt-1])),kt=Bt>2?polymap:bimap,Lt=Ot=null,Dt}function Dt(Bt){return Bt==null||isNaN(Bt=+Bt)?wt:(Lt||(Lt=kt(nt.map(st),rt,it)))(st(Et(Bt)))}return Dt.invert=function(Bt){return Et(bt((Ot||(Ot=kt(rt,nt.map(st),interpolateNumber)))(Bt)))},Dt.domain=function(Bt){return arguments.length?(nt=Array.from(Bt,number$1),Rt()):nt.slice()},Dt.range=function(Bt){return arguments.length?(rt=Array.from(Bt),Rt()):rt.slice()},Dt.rangeRound=function(Bt){return rt=Array.from(Bt),it=interpolateRound,Rt()},Dt.clamp=function(Bt){return arguments.length?(Et=Bt?!0:identity$2,Rt()):Et!==identity$2},Dt.interpolate=function(Bt){return arguments.length?(it=Bt,Rt()):it},Dt.unknown=function(Bt){return arguments.length?(wt=Bt,Dt):wt},function(Bt,Ft){return st=Bt,bt=Ft,Rt()}}function continuous(){return transformer()(identity$2,identity$2)}function tickFormat(nt,rt,it,st){var bt=tickStep(nt,rt,it),wt;switch(st=formatSpecifier(st==null?",f":st),st.type){case"s":{var Et=Math.max(Math.abs(nt),Math.abs(rt));return st.precision==null&&!isNaN(wt=precisionPrefix(bt,Et))&&(st.precision=wt),formatPrefix(st,Et)}case"":case"e":case"g":case"p":case"r":{st.precision==null&&!isNaN(wt=precisionRound(bt,Math.max(Math.abs(nt),Math.abs(rt))))&&(st.precision=wt-(st.type==="e"));break}case"f":case"%":{st.precision==null&&!isNaN(wt=precisionFixed(bt))&&(st.precision=wt-(st.type==="%")*2);break}}return format$1(st)}function linearish(nt){var rt=nt.domain;return nt.ticks=function(it){var st=rt();return ticks(st[0],st[st.length-1],it==null?10:it)},nt.tickFormat=function(it,st){var bt=rt();return tickFormat(bt[0],bt[bt.length-1],it==null?10:it,st)},nt.nice=function(it){it==null&&(it=10);var st=rt(),bt=0,wt=st.length-1,Et=st[bt],kt=st[wt],Lt,Ot,Rt=10;for(kt<Et&&(Ot=Et,Et=kt,kt=Ot,Ot=bt,bt=wt,wt=Ot);Rt-- >0;){if(Ot=tickIncrement(Et,kt,it),Ot===Lt)return st[bt]=Et,st[wt]=kt,rt(st);if(Ot>0)Et=Math.floor(Et/Ot)*Ot,kt=Math.ceil(kt/Ot)*Ot;else if(Ot<0)Et=Math.ceil(Et*Ot)/Ot,kt=Math.floor(kt*Ot)/Ot;else break;Lt=Ot}return nt},nt}function linear(){var nt=continuous();return nt.copy=function(){return copy$1(nt,linear())},initRange.apply(nt,arguments),linearish(nt)}function nice(nt,rt){nt=nt.slice();var it=0,st=nt.length-1,bt=nt[it],wt=nt[st],Et;return wt<bt&&(Et=it,it=st,st=Et,Et=bt,bt=wt,wt=Et),nt[it]=rt.floor(bt),nt[st]=rt.ceil(wt),nt}const t0=new Date,t1=new Date;function timeInterval(nt,rt,it,st){function bt(wt){return nt(wt=arguments.length===0?new Date:new Date(+wt)),wt}return bt.floor=wt=>(nt(wt=new Date(+wt)),wt),bt.ceil=wt=>(nt(wt=new Date(wt-1)),rt(wt,1),nt(wt),wt),bt.round=wt=>{const Et=bt(wt),kt=bt.ceil(wt);return wt-Et<kt-wt?Et:kt},bt.offset=(wt,Et)=>(rt(wt=new Date(+wt),Et==null?1:Math.floor(Et)),wt),bt.range=(wt,Et,kt)=>{const Lt=[];if(wt=bt.ceil(wt),kt=kt==null?1:Math.floor(kt),!(wt<Et)||!(kt>0))return Lt;let Ot;do Lt.push(Ot=new Date(+wt)),rt(wt,kt),nt(wt);while(Ot<wt&&wt<Et);return Lt},bt.filter=wt=>timeInterval(Et=>{if(Et>=Et)for(;nt(Et),!wt(Et);)Et.setTime(Et-1)},(Et,kt)=>{if(Et>=Et)if(kt<0)for(;++kt<=0;)for(;rt(Et,-1),!wt(Et););else for(;--kt>=0;)for(;rt(Et,1),!wt(Et););}),it&&(bt.count=(wt,Et)=>(t0.setTime(+wt),t1.setTime(+Et),nt(t0),nt(t1),Math.floor(it(t0,t1))),bt.every=wt=>(wt=Math.floor(wt),!isFinite(wt)||!(wt>0)?null:wt>1?bt.filter(st?Et=>st(Et)%wt===0:Et=>bt.count(0,Et)%wt===0):bt)),bt}const millisecond=timeInterval(()=>{},(nt,rt)=>{nt.setTime(+nt+rt)},(nt,rt)=>rt-nt);millisecond.every=nt=>(nt=Math.floor(nt),!isFinite(nt)||!(nt>0)?null:nt>1?timeInterval(rt=>{rt.setTime(Math.floor(rt/nt)*nt)},(rt,it)=>{rt.setTime(+rt+it*nt)},(rt,it)=>(it-rt)/nt):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds())},(nt,rt)=>{nt.setTime(+nt+rt*durationSecond)},(nt,rt)=>(rt-nt)/durationSecond,nt=>nt.getUTCSeconds());second.range;const timeMinute=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getMinutes());timeMinute.range;const utcMinute=timeInterval(nt=>{nt.setUTCSeconds(0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond-nt.getMinutes()*durationMinute)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getHours());timeHour.range;const utcHour=timeInterval(nt=>{nt.setUTCMinutes(0,0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getUTCHours());utcHour.range;const timeDay=timeInterval(nt=>nt.setHours(0,0,0,0),(nt,rt)=>nt.setDate(nt.getDate()+rt),(nt,rt)=>(rt-nt-(rt.getTimezoneOffset()-nt.getTimezoneOffset())*durationMinute)/durationDay,nt=>nt.getDate()-1);timeDay.range;const utcDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>nt.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>Math.floor(nt/durationDay));unixDay.range;function timeWeekday(nt){return timeInterval(rt=>{rt.setDate(rt.getDate()-(rt.getDay()+7-nt)%7),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setDate(rt.getDate()+it*7)},(rt,it)=>(it-rt-(it.getTimezoneOffset()-rt.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(nt){return timeInterval(rt=>{rt.setUTCDate(rt.getUTCDate()-(rt.getUTCDay()+7-nt)%7),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCDate(rt.getUTCDate()+it*7)},(rt,it)=>(it-rt)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(nt=>{nt.setDate(1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setMonth(nt.getMonth()+rt)},(nt,rt)=>rt.getMonth()-nt.getMonth()+(rt.getFullYear()-nt.getFullYear())*12,nt=>nt.getMonth());timeMonth.range;const utcMonth=timeInterval(nt=>{nt.setUTCDate(1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCMonth(nt.getUTCMonth()+rt)},(nt,rt)=>rt.getUTCMonth()-nt.getUTCMonth()+(rt.getUTCFullYear()-nt.getUTCFullYear())*12,nt=>nt.getUTCMonth());utcMonth.range;const timeYear=timeInterval(nt=>{nt.setMonth(0,1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setFullYear(nt.getFullYear()+rt)},(nt,rt)=>rt.getFullYear()-nt.getFullYear(),nt=>nt.getFullYear());timeYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setFullYear(Math.floor(rt.getFullYear()/nt)*nt),rt.setMonth(0,1),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setFullYear(rt.getFullYear()+it*nt)});timeYear.range;const utcYear=timeInterval(nt=>{nt.setUTCMonth(0,1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCFullYear(nt.getUTCFullYear()+rt)},(nt,rt)=>rt.getUTCFullYear()-nt.getUTCFullYear(),nt=>nt.getUTCFullYear());utcYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setUTCFullYear(Math.floor(rt.getUTCFullYear()/nt)*nt),rt.setUTCMonth(0,1),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCFullYear(rt.getUTCFullYear()+it*nt)});utcYear.range;function ticker(nt,rt,it,st,bt,wt){const Et=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[wt,1,durationMinute],[wt,5,5*durationMinute],[wt,15,15*durationMinute],[wt,30,30*durationMinute],[bt,1,durationHour],[bt,3,3*durationHour],[bt,6,6*durationHour],[bt,12,12*durationHour],[st,1,durationDay],[st,2,2*durationDay],[it,1,durationWeek],[rt,1,durationMonth],[rt,3,3*durationMonth],[nt,1,durationYear]];function kt(Ot,Rt,Dt){const Bt=Rt<Ot;Bt&&([Ot,Rt]=[Rt,Ot]);const Ft=Dt&&typeof Dt.range=="function"?Dt:Lt(Ot,Rt,Dt),Yt=Ft?Ft.range(Ot,+Rt+1):[];return Bt?Yt.reverse():Yt}function Lt(Ot,Rt,Dt){const Bt=Math.abs(Rt-Ot)/Dt,Ft=bisector(([,,Wt])=>Wt).right(Et,Bt);if(Ft===Et.length)return nt.every(tickStep(Ot/durationYear,Rt/durationYear,Dt));if(Ft===0)return millisecond.every(Math.max(tickStep(Ot,Rt,Dt),1));const[Yt,Jt]=Et[Bt/Et[Ft-1][2]<Et[Ft][2]/Bt?Ft-1:Ft];return Yt.every(Jt)}return[kt,Lt]}ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute);const[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L);return rt.setFullYear(nt.y),rt}return new Date(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L)}function utcDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(Date.UTC(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L));return rt.setUTCFullYear(nt.y),rt}return new Date(Date.UTC(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L))}function newDate(nt,rt,it){return{y:nt,m:rt,d:it,H:0,M:0,S:0,L:0}}function formatLocale(nt){var rt=nt.dateTime,it=nt.date,st=nt.time,bt=nt.periods,wt=nt.days,Et=nt.shortDays,kt=nt.months,Lt=nt.shortMonths,Ot=formatRe(bt),Rt=formatLookup(bt),Dt=formatRe(wt),Bt=formatLookup(wt),Ft=formatRe(Et),Yt=formatLookup(Et),Jt=formatRe(kt),Wt=formatLookup(kt),Qt=formatRe(Lt),rn=formatLookup(Lt),sn={a:yr,A:Tr,b:Mr,B:rr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:wr,q:fr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},on={a:gr,A:Lr,b:Pr,B:lr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:qr,q:sr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},hn={a:In,A:Ln,b:pn,B:Hn,c:yn,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:kn,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:mr,X:vn,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};sn.x=mn(it,sn),sn.X=mn(st,sn),sn.c=mn(rt,sn),on.x=mn(it,on),on.X=mn(st,on),on.c=mn(rt,on);function mn(pr,Er){return function(ir){var Pn=[],nn=-1,fn=0,cn=pr.length,Nn,On,cr;for(ir instanceof Date||(ir=new Date(+ir));++nn<cn;)pr.charCodeAt(nn)===37&&(Pn.push(pr.slice(fn,nn)),(On=pads[Nn=pr.charAt(++nn)])!=null?Nn=pr.charAt(++nn):On=Nn==="e"?" ":"0",(cr=Er[Nn])&&(Nn=cr(ir,On)),Pn.push(Nn),fn=nn+1);return Pn.push(pr.slice(fn,nn)),Pn.join("")}}function Cn(pr,Er){return function(ir){var Pn=newDate(1900,void 0,1),nn=Tn(Pn,pr,ir+="",0),fn,cn;if(nn!=ir.length)return null;if("Q"in Pn)return new Date(Pn.Q);if("s"in Pn)return new Date(Pn.s*1e3+("L"in Pn?Pn.L:0));if(Er&&!("Z"in Pn)&&(Pn.Z=0),"p"in Pn&&(Pn.H=Pn.H%12+Pn.p*12),Pn.m===void 0&&(Pn.m="q"in Pn?Pn.q:0),"V"in Pn){if(Pn.V<1||Pn.V>53)return null;"w"in Pn||(Pn.w=1),"Z"in Pn?(fn=utcDate(newDate(Pn.y,0,1)),cn=fn.getUTCDay(),fn=cn>4||cn===0?utcMonday.ceil(fn):utcMonday(fn),fn=utcDay.offset(fn,(Pn.V-1)*7),Pn.y=fn.getUTCFullYear(),Pn.m=fn.getUTCMonth(),Pn.d=fn.getUTCDate()+(Pn.w+6)%7):(fn=localDate(newDate(Pn.y,0,1)),cn=fn.getDay(),fn=cn>4||cn===0?timeMonday.ceil(fn):timeMonday(fn),fn=timeDay.offset(fn,(Pn.V-1)*7),Pn.y=fn.getFullYear(),Pn.m=fn.getMonth(),Pn.d=fn.getDate()+(Pn.w+6)%7)}else("W"in Pn||"U"in Pn)&&("w"in Pn||(Pn.w="u"in Pn?Pn.u%7:"W"in Pn?1:0),cn="Z"in Pn?utcDate(newDate(Pn.y,0,1)).getUTCDay():localDate(newDate(Pn.y,0,1)).getDay(),Pn.m=0,Pn.d="W"in Pn?(Pn.w+6)%7+Pn.W*7-(cn+5)%7:Pn.w+Pn.U*7-(cn+6)%7);return"Z"in Pn?(Pn.H+=Pn.Z/100|0,Pn.M+=Pn.Z%100,utcDate(Pn)):localDate(Pn)}}function Tn(pr,Er,ir,Pn){for(var nn=0,fn=Er.length,cn=ir.length,Nn,On;nn<fn;){if(Pn>=cn)return-1;if(Nn=Er.charCodeAt(nn++),Nn===37){if(Nn=Er.charAt(nn++),On=hn[Nn in pads?Er.charAt(nn++):Nn],!On||(Pn=On(pr,ir,Pn))<0)return-1}else if(Nn!=ir.charCodeAt(Pn++))return-1}return Pn}function kn(pr,Er,ir){var Pn=Ot.exec(Er.slice(ir));return Pn?(pr.p=Rt.get(Pn[0].toLowerCase()),ir+Pn[0].length):-1}function In(pr,Er,ir){var Pn=Ft.exec(Er.slice(ir));return Pn?(pr.w=Yt.get(Pn[0].toLowerCase()),ir+Pn[0].length):-1}function Ln(pr,Er,ir){var Pn=Dt.exec(Er.slice(ir));return Pn?(pr.w=Bt.get(Pn[0].toLowerCase()),ir+Pn[0].length):-1}function pn(pr,Er,ir){var Pn=Qt.exec(Er.slice(ir));return Pn?(pr.m=rn.get(Pn[0].toLowerCase()),ir+Pn[0].length):-1}function Hn(pr,Er,ir){var Pn=Jt.exec(Er.slice(ir));return Pn?(pr.m=Wt.get(Pn[0].toLowerCase()),ir+Pn[0].length):-1}function yn(pr,Er,ir){return Tn(pr,rt,Er,ir)}function mr(pr,Er,ir){return Tn(pr,it,Er,ir)}function vn(pr,Er,ir){return Tn(pr,st,Er,ir)}function yr(pr){return Et[pr.getDay()]}function Tr(pr){return wt[pr.getDay()]}function Mr(pr){return Lt[pr.getMonth()]}function rr(pr){return kt[pr.getMonth()]}function wr(pr){return bt[+(pr.getHours()>=12)]}function fr(pr){return 1+~~(pr.getMonth()/3)}function gr(pr){return Et[pr.getUTCDay()]}function Lr(pr){return wt[pr.getUTCDay()]}function Pr(pr){return Lt[pr.getUTCMonth()]}function lr(pr){return kt[pr.getUTCMonth()]}function qr(pr){return bt[+(pr.getUTCHours()>=12)]}function sr(pr){return 1+~~(pr.getUTCMonth()/3)}return{format:function(pr){var Er=mn(pr+="",sn);return Er.toString=function(){return pr},Er},parse:function(pr){var Er=Cn(pr+="",!1);return Er.toString=function(){return pr},Er},utcFormat:function(pr){var Er=mn(pr+="",on);return Er.toString=function(){return pr},Er},utcParse:function(pr){var Er=Cn(pr+="",!0);return Er.toString=function(){return pr},Er}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(nt,rt,it){var st=nt<0?"-":"",bt=(st?-nt:nt)+"",wt=bt.length;return st+(wt<it?new Array(it-wt+1).join(rt)+bt:bt)}function requote(nt){return nt.replace(requoteRe,"\\$&")}function formatRe(nt){return new RegExp("^(?:"+nt.map(requote).join("|")+")","i")}function formatLookup(nt){return new Map(nt.map((rt,it)=>[rt.toLowerCase(),it]))}function parseWeekdayNumberSunday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.w=+st[0],it+st[0].length):-1}function parseWeekdayNumberMonday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.u=+st[0],it+st[0].length):-1}function parseWeekNumberSunday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.U=+st[0],it+st[0].length):-1}function parseWeekNumberISO(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.V=+st[0],it+st[0].length):-1}function parseWeekNumberMonday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.W=+st[0],it+st[0].length):-1}function parseFullYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+4));return st?(nt.y=+st[0],it+st[0].length):-1}function parseYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.y=+st[0]+(+st[0]>68?1900:2e3),it+st[0].length):-1}function parseZone(nt,rt,it){var st=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(rt.slice(it,it+6));return st?(nt.Z=st[1]?0:-(st[2]+(st[3]||"00")),it+st[0].length):-1}function parseQuarter(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.q=st[0]*3-3,it+st[0].length):-1}function parseMonthNumber(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.m=st[0]-1,it+st[0].length):-1}function parseDayOfMonth(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.d=+st[0],it+st[0].length):-1}function parseDayOfYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+3));return st?(nt.m=0,nt.d=+st[0],it+st[0].length):-1}function parseHour24(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.H=+st[0],it+st[0].length):-1}function parseMinutes(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.M=+st[0],it+st[0].length):-1}function parseSeconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.S=+st[0],it+st[0].length):-1}function parseMilliseconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+3));return st?(nt.L=+st[0],it+st[0].length):-1}function parseMicroseconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+6));return st?(nt.L=Math.floor(st[0]/1e3),it+st[0].length):-1}function parseLiteralPercent(nt,rt,it){var st=percentRe.exec(rt.slice(it,it+1));return st?it+st[0].length:-1}function parseUnixTimestamp(nt,rt,it){var st=numberRe.exec(rt.slice(it));return st?(nt.Q=+st[0],it+st[0].length):-1}function parseUnixTimestampSeconds(nt,rt,it){var st=numberRe.exec(rt.slice(it));return st?(nt.s=+st[0],it+st[0].length):-1}function formatDayOfMonth(nt,rt){return pad(nt.getDate(),rt,2)}function formatHour24(nt,rt){return pad(nt.getHours(),rt,2)}function formatHour12(nt,rt){return pad(nt.getHours()%12||12,rt,2)}function formatDayOfYear(nt,rt){return pad(1+timeDay.count(timeYear(nt),nt),rt,3)}function formatMilliseconds(nt,rt){return pad(nt.getMilliseconds(),rt,3)}function formatMicroseconds(nt,rt){return formatMilliseconds(nt,rt)+"000"}function formatMonthNumber(nt,rt){return pad(nt.getMonth()+1,rt,2)}function formatMinutes(nt,rt){return pad(nt.getMinutes(),rt,2)}function formatSeconds(nt,rt){return pad(nt.getSeconds(),rt,2)}function formatWeekdayNumberMonday(nt){var rt=nt.getDay();return rt===0?7:rt}function formatWeekNumberSunday(nt,rt){return pad(timeSunday.count(timeYear(nt)-1,nt),rt,2)}function dISO(nt){var rt=nt.getDay();return rt>=4||rt===0?timeThursday(nt):timeThursday.ceil(nt)}function formatWeekNumberISO(nt,rt){return nt=dISO(nt),pad(timeThursday.count(timeYear(nt),nt)+(timeYear(nt).getDay()===4),rt,2)}function formatWeekdayNumberSunday(nt){return nt.getDay()}function formatWeekNumberMonday(nt,rt){return pad(timeMonday.count(timeYear(nt)-1,nt),rt,2)}function formatYear(nt,rt){return pad(nt.getFullYear()%100,rt,2)}function formatYearISO(nt,rt){return nt=dISO(nt),pad(nt.getFullYear()%100,rt,2)}function formatFullYear(nt,rt){return pad(nt.getFullYear()%1e4,rt,4)}function formatFullYearISO(nt,rt){var it=nt.getDay();return nt=it>=4||it===0?timeThursday(nt):timeThursday.ceil(nt),pad(nt.getFullYear()%1e4,rt,4)}function formatZone(nt){var rt=nt.getTimezoneOffset();return(rt>0?"-":(rt*=-1,"+"))+pad(rt/60|0,"0",2)+pad(rt%60,"0",2)}function formatUTCDayOfMonth(nt,rt){return pad(nt.getUTCDate(),rt,2)}function formatUTCHour24(nt,rt){return pad(nt.getUTCHours(),rt,2)}function formatUTCHour12(nt,rt){return pad(nt.getUTCHours()%12||12,rt,2)}function formatUTCDayOfYear(nt,rt){return pad(1+utcDay.count(utcYear(nt),nt),rt,3)}function formatUTCMilliseconds(nt,rt){return pad(nt.getUTCMilliseconds(),rt,3)}function formatUTCMicroseconds(nt,rt){return formatUTCMilliseconds(nt,rt)+"000"}function formatUTCMonthNumber(nt,rt){return pad(nt.getUTCMonth()+1,rt,2)}function formatUTCMinutes(nt,rt){return pad(nt.getUTCMinutes(),rt,2)}function formatUTCSeconds(nt,rt){return pad(nt.getUTCSeconds(),rt,2)}function formatUTCWeekdayNumberMonday(nt){var rt=nt.getUTCDay();return rt===0?7:rt}function formatUTCWeekNumberSunday(nt,rt){return pad(utcSunday.count(utcYear(nt)-1,nt),rt,2)}function UTCdISO(nt){var rt=nt.getUTCDay();return rt>=4||rt===0?utcThursday(nt):utcThursday.ceil(nt)}function formatUTCWeekNumberISO(nt,rt){return nt=UTCdISO(nt),pad(utcThursday.count(utcYear(nt),nt)+(utcYear(nt).getUTCDay()===4),rt,2)}function formatUTCWeekdayNumberSunday(nt){return nt.getUTCDay()}function formatUTCWeekNumberMonday(nt,rt){return pad(utcMonday.count(utcYear(nt)-1,nt),rt,2)}function formatUTCYear(nt,rt){return pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCYearISO(nt,rt){return nt=UTCdISO(nt),pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCFullYear(nt,rt){return pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCFullYearISO(nt,rt){var it=nt.getUTCDay();return nt=it>=4||it===0?utcThursday(nt):utcThursday.ceil(nt),pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(nt){return+nt}function formatUnixTimestampSeconds(nt){return Math.floor(+nt/1e3)}var locale,timeFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(nt){return locale=formatLocale(nt),timeFormat=locale.format,locale.parse,locale.utcFormat,locale.utcParse,locale}function date(nt){return new Date(nt)}function number(nt){return nt instanceof Date?+nt:+new Date(+nt)}function calendar(nt,rt,it,st,bt,wt,Et,kt,Lt,Ot){var Rt=continuous(),Dt=Rt.invert,Bt=Rt.domain,Ft=Ot(".%L"),Yt=Ot(":%S"),Jt=Ot("%I:%M"),Wt=Ot("%I %p"),Qt=Ot("%a %d"),rn=Ot("%b %d"),sn=Ot("%B"),on=Ot("%Y");function hn(mn){return(Lt(mn)<mn?Ft:kt(mn)<mn?Yt:Et(mn)<mn?Jt:wt(mn)<mn?Wt:st(mn)<mn?bt(mn)<mn?Qt:rn:it(mn)<mn?sn:on)(mn)}return Rt.invert=function(mn){return new Date(Dt(mn))},Rt.domain=function(mn){return arguments.length?Bt(Array.from(mn,number)):Bt().map(date)},Rt.ticks=function(mn){var Cn=Bt();return nt(Cn[0],Cn[Cn.length-1],mn==null?10:mn)},Rt.tickFormat=function(mn,Cn){return Cn==null?hn:Ot(Cn)},Rt.nice=function(mn){var Cn=Bt();return(!mn||typeof mn.range!="function")&&(mn=rt(Cn[0],Cn[Cn.length-1],mn==null?10:mn)),mn?Bt(nice(Cn,mn)):Rt},Rt.copy=function(){return copy$1(Rt,calendar(nt,rt,it,st,bt,wt,Et,kt,Lt,Ot))},Rt}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function constant$1(nt){return function(){return nt}}const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(nt){return nt>1?0:nt<-1?pi:Math.acos(nt)}function asin(nt){return nt>=1?halfPi:nt<=-1?-halfPi:Math.asin(nt)}function withPath(nt){let rt=3;return nt.digits=function(it){if(!arguments.length)return rt;if(it==null)rt=null;else{const st=Math.floor(it);if(!(st>=0))throw new RangeError(`invalid digits: ${it}`);rt=st}return nt},()=>new Path(rt)}function arcInnerRadius(nt){return nt.innerRadius}function arcOuterRadius(nt){return nt.outerRadius}function arcStartAngle(nt){return nt.startAngle}function arcEndAngle(nt){return nt.endAngle}function arcPadAngle(nt){return nt&&nt.padAngle}function intersect$1(nt,rt,it,st,bt,wt,Et,kt){var Lt=it-nt,Ot=st-rt,Rt=Et-bt,Dt=kt-wt,Bt=Dt*Lt-Rt*Ot;if(!(Bt*Bt<epsilon))return Bt=(Rt*(rt-wt)-Dt*(nt-bt))/Bt,[nt+Bt*Lt,rt+Bt*Ot]}function cornerTangents(nt,rt,it,st,bt,wt,Et){var kt=nt-it,Lt=rt-st,Ot=(Et?wt:-wt)/sqrt(kt*kt+Lt*Lt),Rt=Ot*Lt,Dt=-Ot*kt,Bt=nt+Rt,Ft=rt+Dt,Yt=it+Rt,Jt=st+Dt,Wt=(Bt+Yt)/2,Qt=(Ft+Jt)/2,rn=Yt-Bt,sn=Jt-Ft,on=rn*rn+sn*sn,hn=bt-wt,mn=Bt*Jt-Yt*Ft,Cn=(sn<0?-1:1)*sqrt(max$1(0,hn*hn*on-mn*mn)),Tn=(mn*sn-rn*Cn)/on,kn=(-mn*rn-sn*Cn)/on,In=(mn*sn+rn*Cn)/on,Ln=(-mn*rn+sn*Cn)/on,pn=Tn-Wt,Hn=kn-Qt,yn=In-Wt,mr=Ln-Qt;return pn*pn+Hn*Hn>yn*yn+mr*mr&&(Tn=In,kn=Ln),{cx:Tn,cy:kn,x01:-Rt,y01:-Dt,x11:Tn*(bt/hn-1),y11:kn*(bt/hn-1)}}function arc(){var nt=arcInnerRadius,rt=arcOuterRadius,it=constant$1(0),st=null,bt=arcStartAngle,wt=arcEndAngle,Et=arcPadAngle,kt=null,Lt=withPath(Ot);function Ot(){var Rt,Dt,Bt=+nt.apply(this,arguments),Ft=+rt.apply(this,arguments),Yt=bt.apply(this,arguments)-halfPi,Jt=wt.apply(this,arguments)-halfPi,Wt=abs$1(Jt-Yt),Qt=Jt>Yt;if(kt||(kt=Rt=Lt()),Ft<Bt&&(Dt=Ft,Ft=Bt,Bt=Dt),!(Ft>epsilon))kt.moveTo(0,0);else if(Wt>tau-epsilon)kt.moveTo(Ft*cos(Yt),Ft*sin(Yt)),kt.arc(0,0,Ft,Yt,Jt,!Qt),Bt>epsilon&&(kt.moveTo(Bt*cos(Jt),Bt*sin(Jt)),kt.arc(0,0,Bt,Jt,Yt,Qt));else{var rn=Yt,sn=Jt,on=Yt,hn=Jt,mn=Wt,Cn=Wt,Tn=Et.apply(this,arguments)/2,kn=Tn>epsilon&&(st?+st.apply(this,arguments):sqrt(Bt*Bt+Ft*Ft)),In=min$1(abs$1(Ft-Bt)/2,+it.apply(this,arguments)),Ln=In,pn=In,Hn,yn;if(kn>epsilon){var mr=asin(kn/Bt*sin(Tn)),vn=asin(kn/Ft*sin(Tn));(mn-=mr*2)>epsilon?(mr*=Qt?1:-1,on+=mr,hn-=mr):(mn=0,on=hn=(Yt+Jt)/2),(Cn-=vn*2)>epsilon?(vn*=Qt?1:-1,rn+=vn,sn-=vn):(Cn=0,rn=sn=(Yt+Jt)/2)}var yr=Ft*cos(rn),Tr=Ft*sin(rn),Mr=Bt*cos(hn),rr=Bt*sin(hn);if(In>epsilon){var wr=Ft*cos(sn),fr=Ft*sin(sn),gr=Bt*cos(on),Lr=Bt*sin(on),Pr;if(Wt<pi)if(Pr=intersect$1(yr,Tr,gr,Lr,wr,fr,Mr,rr)){var lr=yr-Pr[0],qr=Tr-Pr[1],sr=wr-Pr[0],pr=fr-Pr[1],Er=1/sin(acos((lr*sr+qr*pr)/(sqrt(lr*lr+qr*qr)*sqrt(sr*sr+pr*pr)))/2),ir=sqrt(Pr[0]*Pr[0]+Pr[1]*Pr[1]);Ln=min$1(In,(Bt-ir)/(Er-1)),pn=min$1(In,(Ft-ir)/(Er+1))}else Ln=pn=0}Cn>epsilon?pn>epsilon?(Hn=cornerTangents(gr,Lr,yr,Tr,Ft,pn,Qt),yn=cornerTangents(wr,fr,Mr,rr,Ft,pn,Qt),kt.moveTo(Hn.cx+Hn.x01,Hn.cy+Hn.y01),pn<In?kt.arc(Hn.cx,Hn.cy,pn,atan2(Hn.y01,Hn.x01),atan2(yn.y01,yn.x01),!Qt):(kt.arc(Hn.cx,Hn.cy,pn,atan2(Hn.y01,Hn.x01),atan2(Hn.y11,Hn.x11),!Qt),kt.arc(0,0,Ft,atan2(Hn.cy+Hn.y11,Hn.cx+Hn.x11),atan2(yn.cy+yn.y11,yn.cx+yn.x11),!Qt),kt.arc(yn.cx,yn.cy,pn,atan2(yn.y11,yn.x11),atan2(yn.y01,yn.x01),!Qt))):(kt.moveTo(yr,Tr),kt.arc(0,0,Ft,rn,sn,!Qt)):kt.moveTo(yr,Tr),!(Bt>epsilon)||!(mn>epsilon)?kt.lineTo(Mr,rr):Ln>epsilon?(Hn=cornerTangents(Mr,rr,wr,fr,Bt,-Ln,Qt),yn=cornerTangents(yr,Tr,gr,Lr,Bt,-Ln,Qt),kt.lineTo(Hn.cx+Hn.x01,Hn.cy+Hn.y01),Ln<In?kt.arc(Hn.cx,Hn.cy,Ln,atan2(Hn.y01,Hn.x01),atan2(yn.y01,yn.x01),!Qt):(kt.arc(Hn.cx,Hn.cy,Ln,atan2(Hn.y01,Hn.x01),atan2(Hn.y11,Hn.x11),!Qt),kt.arc(0,0,Bt,atan2(Hn.cy+Hn.y11,Hn.cx+Hn.x11),atan2(yn.cy+yn.y11,yn.cx+yn.x11),Qt),kt.arc(yn.cx,yn.cy,Ln,atan2(yn.y11,yn.x11),atan2(yn.y01,yn.x01),!Qt))):kt.arc(0,0,Bt,hn,on,Qt)}if(kt.closePath(),Rt)return kt=null,Rt+""||null}return Ot.centroid=function(){var Rt=(+nt.apply(this,arguments)+ +rt.apply(this,arguments))/2,Dt=(+bt.apply(this,arguments)+ +wt.apply(this,arguments))/2-pi/2;return[cos(Dt)*Rt,sin(Dt)*Rt]},Ot.innerRadius=function(Rt){return arguments.length?(nt=typeof Rt=="function"?Rt:constant$1(+Rt),Ot):nt},Ot.outerRadius=function(Rt){return arguments.length?(rt=typeof Rt=="function"?Rt:constant$1(+Rt),Ot):rt},Ot.cornerRadius=function(Rt){return arguments.length?(it=typeof Rt=="function"?Rt:constant$1(+Rt),Ot):it},Ot.padRadius=function(Rt){return arguments.length?(st=Rt==null?null:typeof Rt=="function"?Rt:constant$1(+Rt),Ot):st},Ot.startAngle=function(Rt){return arguments.length?(bt=typeof Rt=="function"?Rt:constant$1(+Rt),Ot):bt},Ot.endAngle=function(Rt){return arguments.length?(wt=typeof Rt=="function"?Rt:constant$1(+Rt),Ot):wt},Ot.padAngle=function(Rt){return arguments.length?(Et=typeof Rt=="function"?Rt:constant$1(+Rt),Ot):Et},Ot.context=function(Rt){return arguments.length?(kt=Rt==null?null:Rt,Ot):kt},Ot}function array(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function Linear(nt){this._context=nt}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:this._context.lineTo(nt,rt);break}}};function curveLinear(nt){return new Linear(nt)}function x(nt){return nt[0]}function y(nt){return nt[1]}function line$1(nt,rt){var it=constant$1(!0),st=null,bt=curveLinear,wt=null,Et=withPath(kt);nt=typeof nt=="function"?nt:nt===void 0?x:constant$1(nt),rt=typeof rt=="function"?rt:rt===void 0?y:constant$1(rt);function kt(Lt){var Ot,Rt=(Lt=array(Lt)).length,Dt,Bt=!1,Ft;for(st==null&&(wt=bt(Ft=Et())),Ot=0;Ot<=Rt;++Ot)!(Ot<Rt&&it(Dt=Lt[Ot],Ot,Lt))===Bt&&((Bt=!Bt)?wt.lineStart():wt.lineEnd()),Bt&&wt.point(+nt(Dt,Ot,Lt),+rt(Dt,Ot,Lt));if(Ft)return wt=null,Ft+""||null}return kt.x=function(Lt){return arguments.length?(nt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):nt},kt.y=function(Lt){return arguments.length?(rt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):rt},kt.defined=function(Lt){return arguments.length?(it=typeof Lt=="function"?Lt:constant$1(!!Lt),kt):it},kt.curve=function(Lt){return arguments.length?(bt=Lt,st!=null&&(wt=bt(st)),kt):bt},kt.context=function(Lt){return arguments.length?(Lt==null?st=wt=null:wt=bt(st=Lt),kt):st},kt}function descending(nt,rt){return rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function identity$1(nt){return nt}function pie(){var nt=identity$1,rt=descending,it=null,st=constant$1(0),bt=constant$1(tau),wt=constant$1(0);function Et(kt){var Lt,Ot=(kt=array(kt)).length,Rt,Dt,Bt=0,Ft=new Array(Ot),Yt=new Array(Ot),Jt=+st.apply(this,arguments),Wt=Math.min(tau,Math.max(-tau,bt.apply(this,arguments)-Jt)),Qt,rn=Math.min(Math.abs(Wt)/Ot,wt.apply(this,arguments)),sn=rn*(Wt<0?-1:1),on;for(Lt=0;Lt<Ot;++Lt)(on=Yt[Ft[Lt]=Lt]=+nt(kt[Lt],Lt,kt))>0&&(Bt+=on);for(rt!=null?Ft.sort(function(hn,mn){return rt(Yt[hn],Yt[mn])}):it!=null&&Ft.sort(function(hn,mn){return it(kt[hn],kt[mn])}),Lt=0,Dt=Bt?(Wt-Ot*sn)/Bt:0;Lt<Ot;++Lt,Jt=Qt)Rt=Ft[Lt],on=Yt[Rt],Qt=Jt+(on>0?on*Dt:0)+sn,Yt[Rt]={data:kt[Rt],index:Lt,value:on,startAngle:Jt,endAngle:Qt,padAngle:rn};return Yt}return Et.value=function(kt){return arguments.length?(nt=typeof kt=="function"?kt:constant$1(+kt),Et):nt},Et.sortValues=function(kt){return arguments.length?(rt=kt,it=null,Et):rt},Et.sort=function(kt){return arguments.length?(it=kt,rt=null,Et):it},Et.startAngle=function(kt){return arguments.length?(st=typeof kt=="function"?kt:constant$1(+kt),Et):st},Et.endAngle=function(kt){return arguments.length?(bt=typeof kt=="function"?kt:constant$1(+kt),Et):bt},Et.padAngle=function(kt){return arguments.length?(wt=typeof kt=="function"?kt:constant$1(+kt),Et):wt},Et}function noop$1(){}function point$2(nt,rt,it){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+rt)/6,(nt._y0+4*nt._y1+it)/6)}function Basis(nt){this._context=nt}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasis(nt){return new Basis(nt)}function BasisClosed(nt){this._context=nt}BasisClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._x2=nt,this._y2=rt;break;case 1:this._point=2,this._x3=nt,this._y3=rt;break;case 2:this._point=3,this._x4=nt,this._y4=rt,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+rt)/6);break;default:point$2(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisClosed(nt){return new BasisClosed(nt)}function BasisOpen(nt){this._context=nt}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var it=(this._x0+4*this._x1+nt)/6,st=(this._y0+4*this._y1+rt)/6;this._line?this._context.lineTo(it,st):this._context.moveTo(it,st);break;case 3:this._point=4;default:point$2(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisOpen(nt){return new BasisOpen(nt)}function LinearClosed(nt){this._context=nt}LinearClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,rt){nt=+nt,rt=+rt,this._point?this._context.lineTo(nt,rt):(this._point=1,this._context.moveTo(nt,rt))}};function curveLinearClosed(nt){return new LinearClosed(nt)}function sign(nt){return nt<0?-1:1}function slope3(nt,rt,it){var st=nt._x1-nt._x0,bt=rt-nt._x1,wt=(nt._y1-nt._y0)/(st||bt<0&&-0),Et=(it-nt._y1)/(bt||st<0&&-0),kt=(wt*bt+Et*st)/(st+bt);return(sign(wt)+sign(Et))*Math.min(Math.abs(wt),Math.abs(Et),.5*Math.abs(kt))||0}function slope2(nt,rt){var it=nt._x1-nt._x0;return it?(3*(nt._y1-nt._y0)/it-rt)/2:rt}function point$1(nt,rt,it){var st=nt._x0,bt=nt._y0,wt=nt._x1,Et=nt._y1,kt=(wt-st)/3;nt._context.bezierCurveTo(st+kt,bt+kt*rt,wt-kt,Et-kt*it,wt,Et)}function MonotoneX(nt){this._context=nt}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){var it=NaN;if(nt=+nt,rt=+rt,!(nt===this._x1&&rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,it=slope3(this,nt,rt)),it);break;default:point$1(this,this._t0,it=slope3(this,nt,rt));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt,this._t0=it}}};function MonotoneY(nt){this._context=new ReflectContext(nt)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(nt,rt){MonotoneX.prototype.point.call(this,rt,nt)};function ReflectContext(nt){this._context=nt}ReflectContext.prototype={moveTo:function(nt,rt){this._context.moveTo(rt,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,rt){this._context.lineTo(rt,nt)},bezierCurveTo:function(nt,rt,it,st,bt,wt){this._context.bezierCurveTo(rt,nt,st,it,wt,bt)}};function monotoneX(nt){return new MonotoneX(nt)}function monotoneY(nt){return new MonotoneY(nt)}function Natural(nt){this._context=nt}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,rt=this._y,it=nt.length;if(it)if(this._line?this._context.lineTo(nt[0],rt[0]):this._context.moveTo(nt[0],rt[0]),it===2)this._context.lineTo(nt[1],rt[1]);else for(var st=controlPoints(nt),bt=controlPoints(rt),wt=0,Et=1;Et<it;++wt,++Et)this._context.bezierCurveTo(st[0][wt],bt[0][wt],st[1][wt],bt[1][wt],nt[Et],rt[Et]);(this._line||this._line!==0&&it===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,rt){this._x.push(+nt),this._y.push(+rt)}};function controlPoints(nt){var rt,it=nt.length-1,st,bt=new Array(it),wt=new Array(it),Et=new Array(it);for(bt[0]=0,wt[0]=2,Et[0]=nt[0]+2*nt[1],rt=1;rt<it-1;++rt)bt[rt]=1,wt[rt]=4,Et[rt]=4*nt[rt]+2*nt[rt+1];for(bt[it-1]=2,wt[it-1]=7,Et[it-1]=8*nt[it-1]+nt[it],rt=1;rt<it;++rt)st=bt[rt]/wt[rt-1],wt[rt]-=st,Et[rt]-=st*Et[rt-1];for(bt[it-1]=Et[it-1]/wt[it-1],rt=it-2;rt>=0;--rt)bt[rt]=(Et[rt]-bt[rt+1])/wt[rt];for(wt[it-1]=(nt[it]+bt[it-1])/2,rt=0;rt<it-1;++rt)wt[rt]=2*nt[rt+1]-bt[rt+1];return[bt,wt]}function curveNatural(nt){return new Natural(nt)}function Step(nt,rt){this._context=nt,this._t=rt}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,rt),this._context.lineTo(nt,rt);else{var it=this._x*(1-this._t)+nt*this._t;this._context.lineTo(it,this._y),this._context.lineTo(it,rt)}break}}this._x=nt,this._y=rt}};function curveStep(nt){return new Step(nt,.5)}function stepBefore(nt){return new Step(nt,0)}function stepAfter(nt){return new Step(nt,1)}function Transform(nt,rt,it){this.k=nt,this.x=rt,this.y=it}Transform.prototype={constructor:Transform,scale:function(nt){return nt===1?this:new Transform(this.k*nt,this.x,this.y)},translate:function(nt,rt){return nt===0&rt===0?this:new Transform(this.k,this.x+this.k*nt,this.y+this.k*rt)},apply:function(nt){return[nt[0]*this.k+this.x,nt[1]*this.k+this.y]},applyX:function(nt){return nt*this.k+this.x},applyY:function(nt){return nt*this.k+this.y},invert:function(nt){return[(nt[0]-this.x)/this.k,(nt[1]-this.y)/this.k]},invertX:function(nt){return(nt-this.x)/this.k},invertY:function(nt){return(nt-this.y)/this.k},rescaleX:function(nt){return nt.copy().domain(nt.range().map(this.invertX,this).map(nt.invert,nt))},rescaleY:function(nt){return nt.copy().domain(nt.range().map(this.invertY,this).map(nt.invert,nt))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Transform(1,0,0);Transform.prototype;/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function _typeof(nt){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof(nt)}function _setPrototypeOf(nt,rt){return _setPrototypeOf=Object.setPrototypeOf||function(st,bt){return st.__proto__=bt,st},_setPrototypeOf(nt,rt)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(nt,rt,it){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(bt,wt,Et){var kt=[null];kt.push.apply(kt,wt);var Lt=Function.bind.apply(bt,kt),Ot=new Lt;return Et&&_setPrototypeOf(Ot,Et.prototype),Ot},_construct.apply(null,arguments)}function _toConsumableArray(nt){return _arrayWithoutHoles(nt)||_iterableToArray(nt)||_unsupportedIterableToArray(nt)||_nonIterableSpread()}function _arrayWithoutHoles(nt){if(Array.isArray(nt))return _arrayLikeToArray(nt)}function _iterableToArray(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}function _unsupportedIterableToArray(nt,rt){if(!!nt){if(typeof nt=="string")return _arrayLikeToArray(nt,rt);var it=Object.prototype.toString.call(nt).slice(8,-1);if(it==="Object"&&nt.constructor&&(it=nt.constructor.name),it==="Map"||it==="Set")return Array.from(nt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return _arrayLikeToArray(nt,rt)}}function _arrayLikeToArray(nt,rt){(rt==null||rt>nt.length)&&(rt=nt.length);for(var it=0,st=new Array(rt);it<rt;it++)st[it]=nt[it];return st}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty$g=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply$2=_ref.apply,construct=_ref.construct;apply$2||(apply$2=function(rt,it,st){return rt.apply(it,st)});freeze||(freeze=function(rt){return rt});seal||(seal=function(rt){return rt});construct||(construct=function(rt,it){return _construct(rt,_toConsumableArray(it))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush$1=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(nt){return function(rt){for(var it=arguments.length,st=new Array(it>1?it-1:0),bt=1;bt<it;bt++)st[bt-1]=arguments[bt];return apply$2(nt,rt,st)}}function unconstruct(nt){return function(){for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return construct(nt,it)}}function addToSet(nt,rt,it){it=it||stringToLowerCase,setPrototypeOf&&setPrototypeOf(nt,null);for(var st=rt.length;st--;){var bt=rt[st];if(typeof bt=="string"){var wt=it(bt);wt!==bt&&(isFrozen(rt)||(rt[st]=wt),bt=wt)}nt[bt]=!0}return nt}function clone$2(nt){var rt=create(null),it;for(it in nt)apply$2(hasOwnProperty$g,nt,[it])&&(rt[it]=nt[it]);return rt}function lookupGetter(nt,rt){for(;nt!==null;){var it=getOwnPropertyDescriptor(nt,rt);if(it){if(it.get)return unapply(it.get);if(typeof it.value=="function")return unapply(it.value)}nt=getPrototypeOf(nt)}function st(bt){return console.warn("fallback value for",bt),null}return st}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function nt(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function nt(rt,it){if(_typeof(rt)!=="object"||typeof rt.createPolicy!="function")return null;var st=null,bt="data-tt-policy-suffix";it.currentScript&&it.currentScript.hasAttribute(bt)&&(st=it.currentScript.getAttribute(bt));var wt="dompurify"+(st?"#"+st:"");try{return rt.createPolicy(wt,{createHTML:function(kt){return kt},createScriptURL:function(kt){return kt}})}catch{return console.warn("TrustedTypes policy "+wt+" could not be created."),null}};function createDOMPurify(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),rt=function(ar){return createDOMPurify(ar)};if(rt.version="2.4.1",rt.removed=[],!nt||!nt.document||nt.document.nodeType!==9)return rt.isSupported=!1,rt;var it=nt.document,st=nt.document,bt=nt.DocumentFragment,wt=nt.HTMLTemplateElement,Et=nt.Node,kt=nt.Element,Lt=nt.NodeFilter,Ot=nt.NamedNodeMap,Rt=Ot===void 0?nt.NamedNodeMap||nt.MozNamedAttrMap:Ot,Dt=nt.HTMLFormElement,Bt=nt.DOMParser,Ft=nt.trustedTypes,Yt=kt.prototype,Jt=lookupGetter(Yt,"cloneNode"),Wt=lookupGetter(Yt,"nextSibling"),Qt=lookupGetter(Yt,"childNodes"),rn=lookupGetter(Yt,"parentNode");if(typeof wt=="function"){var sn=st.createElement("template");sn.content&&sn.content.ownerDocument&&(st=sn.content.ownerDocument)}var on=_createTrustedTypesPolicy(Ft,it),hn=on?on.createHTML(""):"",mn=st,Cn=mn.implementation,Tn=mn.createNodeIterator,kn=mn.createDocumentFragment,In=mn.getElementsByTagName,Ln=it.importNode,pn={};try{pn=clone$2(st).documentMode?st.documentMode:{}}catch{}var Hn={};rt.isSupported=typeof rn=="function"&&Cn&&typeof Cn.createHTMLDocument<"u"&&pn!==9;var yn=MUSTACHE_EXPR,mr=ERB_EXPR,vn=TMPLIT_EXPR,yr=DATA_ATTR,Tr=ARIA_ATTR,Mr=IS_SCRIPT_OR_DATA,rr=ATTR_WHITESPACE,wr=IS_ALLOWED_URI,fr=null,gr=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),Lr=null,Pr=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),lr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),qr=null,sr=null,pr=!0,Er=!0,ir=!1,Pn=!1,nn=!1,fn=!1,cn=!1,Nn=!1,On=!1,cr=!1,Bn=!0,Qn=!1,Un="user-content-",or=!0,hr=!1,kr={},xr=null,br=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),hi=null,di=addToSet({},["audio","video","img","source","image","track"]),vi=null,Ti=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ki="http://www.w3.org/1998/Math/MathML",Di="http://www.w3.org/2000/svg",Ci="http://www.w3.org/1999/xhtml",$r=Ci,An=!1,Sn=null,Wn=addToSet({},[ki,Di,Ci],stringToString),er,vr=["application/xhtml+xml","text/html"],ti="text/html",_r,li=null,Or=st.createElement("form"),mi=function(ar){return ar instanceof RegExp||ar instanceof Function},_i=function(ar){li&&li===ar||((!ar||_typeof(ar)!=="object")&&(ar={}),ar=clone$2(ar),er=vr.indexOf(ar.PARSER_MEDIA_TYPE)===-1?er=ti:er=ar.PARSER_MEDIA_TYPE,_r=er==="application/xhtml+xml"?stringToString:stringToLowerCase,fr="ALLOWED_TAGS"in ar?addToSet({},ar.ALLOWED_TAGS,_r):gr,Lr="ALLOWED_ATTR"in ar?addToSet({},ar.ALLOWED_ATTR,_r):Pr,Sn="ALLOWED_NAMESPACES"in ar?addToSet({},ar.ALLOWED_NAMESPACES,stringToString):Wn,vi="ADD_URI_SAFE_ATTR"in ar?addToSet(clone$2(Ti),ar.ADD_URI_SAFE_ATTR,_r):Ti,hi="ADD_DATA_URI_TAGS"in ar?addToSet(clone$2(di),ar.ADD_DATA_URI_TAGS,_r):di,xr="FORBID_CONTENTS"in ar?addToSet({},ar.FORBID_CONTENTS,_r):br,qr="FORBID_TAGS"in ar?addToSet({},ar.FORBID_TAGS,_r):{},sr="FORBID_ATTR"in ar?addToSet({},ar.FORBID_ATTR,_r):{},kr="USE_PROFILES"in ar?ar.USE_PROFILES:!1,pr=ar.ALLOW_ARIA_ATTR!==!1,Er=ar.ALLOW_DATA_ATTR!==!1,ir=ar.ALLOW_UNKNOWN_PROTOCOLS||!1,Pn=ar.SAFE_FOR_TEMPLATES||!1,nn=ar.WHOLE_DOCUMENT||!1,Nn=ar.RETURN_DOM||!1,On=ar.RETURN_DOM_FRAGMENT||!1,cr=ar.RETURN_TRUSTED_TYPE||!1,cn=ar.FORCE_BODY||!1,Bn=ar.SANITIZE_DOM!==!1,Qn=ar.SANITIZE_NAMED_PROPS||!1,or=ar.KEEP_CONTENT!==!1,hr=ar.IN_PLACE||!1,wr=ar.ALLOWED_URI_REGEXP||wr,$r=ar.NAMESPACE||Ci,ar.CUSTOM_ELEMENT_HANDLING&&mi(ar.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(lr.tagNameCheck=ar.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ar.CUSTOM_ELEMENT_HANDLING&&mi(ar.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(lr.attributeNameCheck=ar.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ar.CUSTOM_ELEMENT_HANDLING&&typeof ar.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(lr.allowCustomizedBuiltInElements=ar.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pn&&(Er=!1),On&&(Nn=!0),kr&&(fr=addToSet({},_toConsumableArray(text)),Lr=[],kr.html===!0&&(addToSet(fr,html$1),addToSet(Lr,html)),kr.svg===!0&&(addToSet(fr,svg$1),addToSet(Lr,svg),addToSet(Lr,xml)),kr.svgFilters===!0&&(addToSet(fr,svgFilters),addToSet(Lr,svg),addToSet(Lr,xml)),kr.mathMl===!0&&(addToSet(fr,mathMl$1),addToSet(Lr,mathMl),addToSet(Lr,xml))),ar.ADD_TAGS&&(fr===gr&&(fr=clone$2(fr)),addToSet(fr,ar.ADD_TAGS,_r)),ar.ADD_ATTR&&(Lr===Pr&&(Lr=clone$2(Lr)),addToSet(Lr,ar.ADD_ATTR,_r)),ar.ADD_URI_SAFE_ATTR&&addToSet(vi,ar.ADD_URI_SAFE_ATTR,_r),ar.FORBID_CONTENTS&&(xr===br&&(xr=clone$2(xr)),addToSet(xr,ar.FORBID_CONTENTS,_r)),or&&(fr["#text"]=!0),nn&&addToSet(fr,["html","head","body"]),fr.table&&(addToSet(fr,["tbody"]),delete qr.tbody),freeze&&freeze(ar),li=ar)},Pi=addToSet({},["mi","mo","mn","ms","mtext"]),xi=addToSet({},["foreignobject","desc","title","annotation-xml"]),Zi=addToSet({},["title","style","font","a","script"]),$i=addToSet({},svg$1);addToSet($i,svgFilters),addToSet($i,svgDisallowed);var Qi=addToSet({},mathMl$1);addToSet(Qi,mathMlDisallowed);var Eo=function(ar){var Ur=rn(ar);(!Ur||!Ur.tagName)&&(Ur={namespaceURI:$r,tagName:"template"});var ci=stringToLowerCase(ar.tagName),wi=stringToLowerCase(Ur.tagName);return Sn[ar.namespaceURI]?ar.namespaceURI===Di?Ur.namespaceURI===Ci?ci==="svg":Ur.namespaceURI===ki?ci==="svg"&&(wi==="annotation-xml"||Pi[wi]):Boolean($i[ci]):ar.namespaceURI===ki?Ur.namespaceURI===Ci?ci==="math":Ur.namespaceURI===Di?ci==="math"&&xi[wi]:Boolean(Qi[ci]):ar.namespaceURI===Ci?Ur.namespaceURI===Di&&!xi[wi]||Ur.namespaceURI===ki&&!Pi[wi]?!1:!Qi[ci]&&(Zi[ci]||!$i[ci]):!!(er==="application/xhtml+xml"&&Sn[ar.namespaceURI]):!1},to=function(ar){arrayPush$1(rt.removed,{element:ar});try{ar.parentNode.removeChild(ar)}catch{try{ar.outerHTML=hn}catch{ar.remove()}}},Za=function(ar,Ur){try{arrayPush$1(rt.removed,{attribute:Ur.getAttributeNode(ar),from:Ur})}catch{arrayPush$1(rt.removed,{attribute:null,from:Ur})}if(Ur.removeAttribute(ar),ar==="is"&&!Lr[ar])if(Nn||On)try{to(Ur)}catch{}else try{Ur.setAttribute(ar,"")}catch{}},Hs=function(ar){var Ur,ci;if(cn)ar="<remove></remove>"+ar;else{var wi=stringMatch(ar,/^[\r\n\t ]+/);ci=wi&&wi[0]}er==="application/xhtml+xml"&&$r===Ci&&(ar='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ar+"</body></html>");var Po=on?on.createHTML(ar):ar;if($r===Ci)try{Ur=new Bt().parseFromString(Po,er)}catch{}if(!Ur||!Ur.documentElement){Ur=Cn.createDocument($r,"template",null);try{Ur.documentElement.innerHTML=An?"":Po}catch{}}var bo=Ur.body||Ur.documentElement;return ar&&ci&&bo.insertBefore(st.createTextNode(ci),bo.childNodes[0]||null),$r===Ci?In.call(Ur,nn?"html":"body")[0]:nn?Ur.documentElement:bo},Ai=function(ar){return Tn.call(ar.ownerDocument||ar,ar,Lt.SHOW_ELEMENT|Lt.SHOW_COMMENT|Lt.SHOW_TEXT,null,!1)},io=function(ar){return ar instanceof Dt&&(typeof ar.nodeName!="string"||typeof ar.textContent!="string"||typeof ar.removeChild!="function"||!(ar.attributes instanceof Rt)||typeof ar.removeAttribute!="function"||typeof ar.setAttribute!="function"||typeof ar.namespaceURI!="string"||typeof ar.insertBefore!="function"||typeof ar.hasChildNodes!="function")},Fs=function(ar){return _typeof(Et)==="object"?ar instanceof Et:ar&&_typeof(ar)==="object"&&typeof ar.nodeType=="number"&&typeof ar.nodeName=="string"},Xo=function(ar,Ur,ci){!Hn[ar]||arrayForEach(Hn[ar],function(wi){wi.call(rt,Ur,ci,li)})},os=function(ar){var Ur;if(Xo("beforeSanitizeElements",ar,null),io(ar)||regExpTest(/[\u0080-\uFFFF]/,ar.nodeName))return to(ar),!0;var ci=_r(ar.nodeName);if(Xo("uponSanitizeElement",ar,{tagName:ci,allowedTags:fr}),ar.hasChildNodes()&&!Fs(ar.firstElementChild)&&(!Fs(ar.content)||!Fs(ar.content.firstElementChild))&&regExpTest(/<[/\w]/g,ar.innerHTML)&&regExpTest(/<[/\w]/g,ar.textContent)||ci==="select"&&regExpTest(/<template/i,ar.innerHTML))return to(ar),!0;if(!fr[ci]||qr[ci]){if(!qr[ci]&&Ns(ci)&&(lr.tagNameCheck instanceof RegExp&&regExpTest(lr.tagNameCheck,ci)||lr.tagNameCheck instanceof Function&&lr.tagNameCheck(ci)))return!1;if(or&&!xr[ci]){var wi=rn(ar)||ar.parentNode,Po=Qt(ar)||ar.childNodes;if(Po&&wi)for(var bo=Po.length,ss=bo-1;ss>=0;--ss)wi.insertBefore(Jt(Po[ss],!0),Wt(ar))}return to(ar),!0}return ar instanceof kt&&!Eo(ar)||(ci==="noscript"||ci==="noembed")&&regExpTest(/<\/no(script|embed)/i,ar.innerHTML)?(to(ar),!0):(Pn&&ar.nodeType===3&&(Ur=ar.textContent,Ur=stringReplace(Ur,yn," "),Ur=stringReplace(Ur,mr," "),Ur=stringReplace(Ur,vn," "),ar.textContent!==Ur&&(arrayPush$1(rt.removed,{element:ar.cloneNode()}),ar.textContent=Ur)),Xo("afterSanitizeElements",ar,null),!1)},Os=function(ar,Ur,ci){if(Bn&&(Ur==="id"||Ur==="name")&&(ci in st||ci in Or))return!1;if(!(Er&&!sr[Ur]&&regExpTest(yr,Ur))){if(!(pr&&regExpTest(Tr,Ur))){if(!Lr[Ur]||sr[Ur]){if(!(Ns(ar)&&(lr.tagNameCheck instanceof RegExp&&regExpTest(lr.tagNameCheck,ar)||lr.tagNameCheck instanceof Function&&lr.tagNameCheck(ar))&&(lr.attributeNameCheck instanceof RegExp&&regExpTest(lr.attributeNameCheck,Ur)||lr.attributeNameCheck instanceof Function&&lr.attributeNameCheck(Ur))||Ur==="is"&&lr.allowCustomizedBuiltInElements&&(lr.tagNameCheck instanceof RegExp&&regExpTest(lr.tagNameCheck,ci)||lr.tagNameCheck instanceof Function&&lr.tagNameCheck(ci))))return!1}else if(!vi[Ur]){if(!regExpTest(wr,stringReplace(ci,rr,""))){if(!((Ur==="src"||Ur==="xlink:href"||Ur==="href")&&ar!=="script"&&stringIndexOf(ci,"data:")===0&&hi[ar])){if(!(ir&&!regExpTest(Mr,stringReplace(ci,rr,"")))){if(ci)return!1}}}}}}return!0},Ns=function(ar){return ar.indexOf("-")>0},Rr=function(ar){var Ur,ci,wi,Po;Xo("beforeSanitizeAttributes",ar,null);var bo=ar.attributes;if(!!bo){var ss={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Lr};for(Po=bo.length;Po--;){Ur=bo[Po];var oo=Ur,Do=oo.name,Us=oo.namespaceURI;if(ci=Do==="value"?Ur.value:stringTrim(Ur.value),wi=_r(Do),ss.attrName=wi,ss.attrValue=ci,ss.keepAttr=!0,ss.forceKeepAttr=void 0,Xo("uponSanitizeAttribute",ar,ss),ci=ss.attrValue,!ss.forceKeepAttr&&(Za(Do,ar),!!ss.keepAttr)){if(regExpTest(/\/>/i,ci)){Za(Do,ar);continue}Pn&&(ci=stringReplace(ci,yn," "),ci=stringReplace(ci,mr," "),ci=stringReplace(ci,vn," "));var aa=_r(ar.nodeName);if(!!Os(aa,wi,ci)){if(Qn&&(wi==="id"||wi==="name")&&(Za(Do,ar),ci=Un+ci),on&&_typeof(Ft)==="object"&&typeof Ft.getAttributeType=="function"&&!Us)switch(Ft.getAttributeType(aa,wi)){case"TrustedHTML":ci=on.createHTML(ci);break;case"TrustedScriptURL":ci=on.createScriptURL(ci);break}try{Us?ar.setAttributeNS(Us,Do,ci):ar.setAttribute(Do,ci),arrayPop(rt.removed)}catch{}}}}Xo("afterSanitizeAttributes",ar,null)}},Qr=function Dr(ar){var Ur,ci=Ai(ar);for(Xo("beforeSanitizeShadowDOM",ar,null);Ur=ci.nextNode();)Xo("uponSanitizeShadowNode",Ur,null),!os(Ur)&&(Ur.content instanceof bt&&Dr(Ur.content),Rr(Ur));Xo("afterSanitizeShadowDOM",ar,null)};return rt.sanitize=function(Dr){var ar=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ur,ci,wi,Po,bo;if(An=!Dr,An&&(Dr="<!-->"),typeof Dr!="string"&&!Fs(Dr)){if(typeof Dr.toString!="function")throw typeErrorCreate("toString is not a function");if(Dr=Dr.toString(),typeof Dr!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!rt.isSupported){if(_typeof(nt.toStaticHTML)==="object"||typeof nt.toStaticHTML=="function"){if(typeof Dr=="string")return nt.toStaticHTML(Dr);if(Fs(Dr))return nt.toStaticHTML(Dr.outerHTML)}return Dr}if(fn||_i(ar),rt.removed=[],typeof Dr=="string"&&(hr=!1),hr){if(Dr.nodeName){var ss=_r(Dr.nodeName);if(!fr[ss]||qr[ss])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Dr instanceof Et)Ur=Hs("<!---->"),ci=Ur.ownerDocument.importNode(Dr,!0),ci.nodeType===1&&ci.nodeName==="BODY"||ci.nodeName==="HTML"?Ur=ci:Ur.appendChild(ci);else{if(!Nn&&!Pn&&!nn&&Dr.indexOf("<")===-1)return on&&cr?on.createHTML(Dr):Dr;if(Ur=Hs(Dr),!Ur)return Nn?null:cr?hn:""}Ur&&cn&&to(Ur.firstChild);for(var oo=Ai(hr?Dr:Ur);wi=oo.nextNode();)wi.nodeType===3&&wi===Po||os(wi)||(wi.content instanceof bt&&Qr(wi.content),Rr(wi),Po=wi);if(Po=null,hr)return Dr;if(Nn){if(On)for(bo=kn.call(Ur.ownerDocument);Ur.firstChild;)bo.appendChild(Ur.firstChild);else bo=Ur;return Lr.shadowroot&&(bo=Ln.call(it,bo,!0)),bo}var Do=nn?Ur.outerHTML:Ur.innerHTML;return nn&&fr["!doctype"]&&Ur.ownerDocument&&Ur.ownerDocument.doctype&&Ur.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,Ur.ownerDocument.doctype.name)&&(Do="<!DOCTYPE "+Ur.ownerDocument.doctype.name+`>
`+Do),Pn&&(Do=stringReplace(Do,yn," "),Do=stringReplace(Do,mr," "),Do=stringReplace(Do,vn," ")),on&&cr?on.createHTML(Do):Do},rt.setConfig=function(Dr){_i(Dr),fn=!0},rt.clearConfig=function(){li=null,fn=!1},rt.isValidAttribute=function(Dr,ar,Ur){li||_i({});var ci=_r(Dr),wi=_r(ar);return Os(ci,wi,Ur)},rt.addHook=function(Dr,ar){typeof ar=="function"&&(Hn[Dr]=Hn[Dr]||[],arrayPush$1(Hn[Dr],ar))},rt.removeHook=function(Dr){if(Hn[Dr])return arrayPop(Hn[Dr])},rt.removeHooks=function(Dr){Hn[Dr]&&(Hn[Dr]=[])},rt.removeAllHooks=function(){Hn={}},rt}var purify=createDOMPurify();const Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:nt=>nt>=255?255:nt<0?0:nt,g:nt=>nt>=255?255:nt<0?0:nt,b:nt=>nt>=255?255:nt<0?0:nt,h:nt=>nt%360,s:nt=>nt>=100?100:nt<0?0:nt,l:nt=>nt>=100?100:nt<0?0:nt,a:nt=>nt>=1?1:nt<0?0:nt},toLinear:nt=>{const rt=nt/255;return nt>.03928?Math.pow((rt+.055)/1.055,2.4):rt/12.92},hue2rgb:(nt,rt,it)=>(it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*(2/3-it)*6:nt),hsl2rgb:({h:nt,s:rt,l:it},st)=>{if(!rt)return it*2.55;nt/=360,rt/=100,it/=100;const bt=it<.5?it*(1+rt):it+rt-it*rt,wt=2*it-bt;switch(st){case"r":return Channel.hue2rgb(wt,bt,nt+1/3)*255;case"g":return Channel.hue2rgb(wt,bt,nt)*255;case"b":return Channel.hue2rgb(wt,bt,nt-1/3)*255}},rgb2hsl:({r:nt,g:rt,b:it},st)=>{nt/=255,rt/=255,it/=255;const bt=Math.max(nt,rt,it),wt=Math.min(nt,rt,it),Et=(bt+wt)/2;if(st==="l")return Et*100;if(bt===wt)return 0;const kt=bt-wt,Lt=Et>.5?kt/(2-bt-wt):kt/(bt+wt);if(st==="s")return Lt*100;switch(bt){case nt:return((rt-it)/kt+(rt<it?6:0))*60;case rt:return((it-nt)/kt+2)*60;case it:return((nt-rt)/kt+4)*60;default:return-1}}},channel=Channel,Lang={clamp:(nt,rt,it)=>rt>it?Math.min(rt,Math.max(it,nt)):Math.min(it,Math.max(rt,nt)),round:nt=>Math.round(nt*1e10)/1e10},lang=Lang,Unit={dec2hex:nt=>{const rt=Math.round(nt).toString(16);return rt.length>1?rt:`0${rt}`}},unit=Unit,Utils={channel,lang,unit},_=Utils,DEC2HEX={};for(let nt=0;nt<=255;nt++)DEC2HEX[nt]=_.unit.dec2hex(nt);const TYPE={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE.ALL}get(){return this.type}set(rt){if(this.type&&this.type!==rt)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=rt}reset(){this.type=TYPE.ALL}is(rt){return this.type===rt}}const Type$2=Type;class Channels{constructor(rt,it){this.color=it,this.changed=!1,this.data=rt,this.type=new Type$2}set(rt,it){return this.color=it,this.changed=!1,this.data=rt,this.type.type=TYPE.ALL,this}_ensureHSL(){const rt=this.data,{h:it,s:st,l:bt}=rt;it===void 0&&(rt.h=_.channel.rgb2hsl(rt,"h")),st===void 0&&(rt.s=_.channel.rgb2hsl(rt,"s")),bt===void 0&&(rt.l=_.channel.rgb2hsl(rt,"l"))}_ensureRGB(){const rt=this.data,{r:it,g:st,b:bt}=rt;it===void 0&&(rt.r=_.channel.hsl2rgb(rt,"r")),st===void 0&&(rt.g=_.channel.hsl2rgb(rt,"g")),bt===void 0&&(rt.b=_.channel.hsl2rgb(rt,"b"))}get r(){const rt=this.data,it=rt.r;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"r"))}get g(){const rt=this.data,it=rt.g;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"g"))}get b(){const rt=this.data,it=rt.b;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"b"))}get h(){const rt=this.data,it=rt.h;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"h"))}get s(){const rt=this.data,it=rt.s;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"s"))}get l(){const rt=this.data,it=rt.l;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"l"))}get a(){return this.data.a}set r(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=rt}set g(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=rt}set b(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=rt}set h(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=rt}set s(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=rt}set l(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=rt}set a(rt){this.changed=!0,this.data.a=rt}}const Channels$1=Channels,channels=new Channels$1({r:0,g:0,b:0,a:0},"transparent"),ChannelsReusable=channels,Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:nt=>{if(nt.charCodeAt(0)!==35)return;const rt=nt.match(Hex.re);if(!rt)return;const it=rt[1],st=parseInt(it,16),bt=it.length,wt=bt%4===0,Et=bt>4,kt=Et?1:17,Lt=Et?8:4,Ot=wt?0:-1,Rt=Et?255:15;return ChannelsReusable.set({r:(st>>Lt*(Ot+3)&Rt)*kt,g:(st>>Lt*(Ot+2)&Rt)*kt,b:(st>>Lt*(Ot+1)&Rt)*kt,a:wt?(st&Rt)*kt/255:1},nt)},stringify:nt=>{const{r:rt,g:it,b:st,a:bt}=nt;return bt<1?`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(st)]}${DEC2HEX[Math.round(bt*255)]}`:`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(st)]}`}},Hex$1=Hex,HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:nt=>{const rt=nt.match(HSL.hueRe);if(rt){const[,it,st]=rt;switch(st){case"grad":return _.channel.clamp.h(parseFloat(it)*.9);case"rad":return _.channel.clamp.h(parseFloat(it)*180/Math.PI);case"turn":return _.channel.clamp.h(parseFloat(it)*360)}}return _.channel.clamp.h(parseFloat(nt))},parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==104&&rt!==72)return;const it=nt.match(HSL.re);if(!it)return;const[,st,bt,wt,Et,kt]=it;return ChannelsReusable.set({h:HSL._hue2deg(st),s:_.channel.clamp.s(parseFloat(bt)),l:_.channel.clamp.l(parseFloat(wt)),a:Et?_.channel.clamp.a(kt?parseFloat(Et)/100:parseFloat(Et)):1},nt)},stringify:nt=>{const{h:rt,s:it,l:st,a:bt}=nt;return bt<1?`hsla(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(st)}%, ${bt})`:`hsl(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(st)}%)`}},HSL$1=HSL,Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:nt=>{nt=nt.toLowerCase();const rt=Keyword.colors[nt];if(!!rt)return Hex$1.parse(rt)},stringify:nt=>{const rt=Hex$1.stringify(nt);for(const it in Keyword.colors)if(Keyword.colors[it]===rt)return it}},Keyword$1=Keyword,RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==114&&rt!==82)return;const it=nt.match(RGB.re);if(!it)return;const[,st,bt,wt,Et,kt,Lt,Ot,Rt]=it;return ChannelsReusable.set({r:_.channel.clamp.r(bt?parseFloat(st)*2.55:parseFloat(st)),g:_.channel.clamp.g(Et?parseFloat(wt)*2.55:parseFloat(wt)),b:_.channel.clamp.b(Lt?parseFloat(kt)*2.55:parseFloat(kt)),a:Ot?_.channel.clamp.a(Rt?parseFloat(Ot)/100:parseFloat(Ot)):1},nt)},stringify:nt=>{const{r:rt,g:it,b:st,a:bt}=nt;return bt<1?`rgba(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(st)}, ${_.lang.round(bt)})`:`rgb(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(st)})`}},RGB$1=RGB,Color={format:{keyword:Keyword$1,hex:Hex$1,rgb:RGB$1,rgba:RGB$1,hsl:HSL$1,hsla:HSL$1},parse:nt=>{if(typeof nt!="string")return nt;const rt=Hex$1.parse(nt)||RGB$1.parse(nt)||HSL$1.parse(nt)||Keyword$1.parse(nt);if(rt)return rt;throw new Error(`Unsupported color format: "${nt}"`)},stringify:nt=>!nt.changed&&nt.color?nt.color:nt.type.is(TYPE.HSL)||nt.data.r===void 0?HSL$1.stringify(nt):nt.a<1||!Number.isInteger(nt.r)||!Number.isInteger(nt.g)||!Number.isInteger(nt.b)?RGB$1.stringify(nt):Hex$1.stringify(nt)},Color$1=Color,change=(nt,rt)=>{const it=Color$1.parse(nt);for(const st in rt)it[st]=_.channel.clamp[st](rt[st]);return Color$1.stringify(it)},change$1=change,rgba=(nt,rt,it=0,st=1)=>{if(typeof nt!="number")return change$1(nt,{a:rt});const bt=ChannelsReusable.set({r:_.channel.clamp.r(nt),g:_.channel.clamp.g(rt),b:_.channel.clamp.b(it),a:_.channel.clamp.a(st)});return Color$1.stringify(bt)},rgba$1=rgba,adjustChannel=(nt,rt,it)=>{const st=Color$1.parse(nt),bt=st[rt],wt=_.channel.clamp[rt](bt+it);return bt!==wt&&(st[rt]=wt),Color$1.stringify(st)},adjustChannel$1=adjustChannel,lighten=(nt,rt)=>adjustChannel$1(nt,"l",rt),lighten$1=lighten,darken=(nt,rt)=>adjustChannel$1(nt,"l",-rt),darken$1=darken,adjust$1=(nt,rt)=>{const it=Color$1.parse(nt),st={};for(const bt in rt)!rt[bt]||(st[bt]=it[bt]+rt[bt]);return change$1(nt,st)},adjust$2=adjust$1,mix=(nt,rt,it=50)=>{const{r:st,g:bt,b:wt,a:Et}=Color$1.parse(nt),{r:kt,g:Lt,b:Ot,a:Rt}=Color$1.parse(rt),Dt=it/100,Bt=Dt*2-1,Ft=Et-Rt,Jt=((Bt*Ft===-1?Bt:(Bt+Ft)/(1+Bt*Ft))+1)/2,Wt=1-Jt,Qt=st*Jt+kt*Wt,rn=bt*Jt+Lt*Wt,sn=wt*Jt+Ot*Wt,on=Et*Dt+Rt*(1-Dt);return rgba$1(Qt,rn,sn,on)},mix$1=mix,invert=(nt,rt=100)=>{const it=Color$1.parse(nt);return it.r=255-it.r,it.g=255-it.g,it.b=255-it.b,mix$1(it,nt,rt)},invert$1=invert;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(nt){var rt=hasOwnProperty$f.call(nt,symToStringTag$1),it=nt[symToStringTag$1];try{nt[symToStringTag$1]=void 0;var st=!0}catch{}var bt=nativeObjectToString$1.call(nt);return st&&(rt?nt[symToStringTag$1]=it:delete nt[symToStringTag$1]),bt}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString(nt){return nativeObjectToString.call(nt)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(nt){return nt==null?nt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(nt)?getRawTag(nt):objectToString(nt)}function isObject$1(nt){var rt=typeof nt;return nt!=null&&(rt=="object"||rt=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(nt){if(!isObject$1(nt))return!1;var rt=baseGetTag(nt);return rt==funcTag$2||rt==genTag$1||rt==asyncTag||rt==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var nt=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return nt?"Symbol(src)_1."+nt:""}();function isMasked(nt){return!!maskSrcKey&&maskSrcKey in nt}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(nt){if(nt!=null){try{return funcToString$2.call(nt)}catch{}try{return nt+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(nt){if(!isObject$1(nt)||isMasked(nt))return!1;var rt=isFunction(nt)?reIsNative:reIsHostCtor;return rt.test(toSource(nt))}function getValue(nt,rt){return nt==null?void 0:nt[rt]}function getNative(nt,rt){var it=getValue(nt,rt);return baseIsNative(it)?it:void 0}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(nt){var rt=this.has(nt)&&delete this.__data__[nt];return this.size-=rt?1:0,rt}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function hashGet(nt){var rt=this.__data__;if(nativeCreate$1){var it=rt[nt];return it===HASH_UNDEFINED$2?void 0:it}return hasOwnProperty$d.call(rt,nt)?rt[nt]:void 0}var objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty;function hashHas(nt){var rt=this.__data__;return nativeCreate$1?rt[nt]!==void 0:hasOwnProperty$c.call(rt,nt)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(nt,rt){var it=this.__data__;return this.size+=this.has(nt)?0:1,it[nt]=nativeCreate$1&&rt===void 0?HASH_UNDEFINED$1:rt,this}function Hash(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function eq(nt,rt){return nt===rt||nt!==nt&&rt!==rt}function assocIndexOf(nt,rt){for(var it=nt.length;it--;)if(eq(nt[it][0],rt))return it;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);if(it<0)return!1;var st=rt.length-1;return it==st?rt.pop():splice.call(rt,it,1),--this.size,!0}function listCacheGet(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);return it<0?void 0:rt[it][1]}function listCacheHas(nt){return assocIndexOf(this.__data__,nt)>-1}function listCacheSet(nt,rt){var it=this.__data__,st=assocIndexOf(it,nt);return st<0?(++this.size,it.push([nt,rt])):it[st][1]=rt,this}function ListCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(nt){var rt=typeof nt;return rt=="string"||rt=="number"||rt=="symbol"||rt=="boolean"?nt!=="__proto__":nt===null}function getMapData(nt,rt){var it=nt.__data__;return isKeyable(rt)?it[typeof rt=="string"?"string":"hash"]:it.map}function mapCacheDelete(nt){var rt=getMapData(this,nt).delete(nt);return this.size-=rt?1:0,rt}function mapCacheGet(nt){return getMapData(this,nt).get(nt)}function mapCacheHas(nt){return getMapData(this,nt).has(nt)}function mapCacheSet(nt,rt){var it=getMapData(this,nt),st=it.size;return it.set(nt,rt),this.size+=it.size==st?0:1,this}function MapCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(nt,rt){if(typeof nt!="function"||rt!=null&&typeof rt!="function")throw new TypeError(FUNC_ERROR_TEXT);var it=function(){var st=arguments,bt=rt?rt.apply(this,st):st[0],wt=it.cache;if(wt.has(bt))return wt.get(bt);var Et=nt.apply(this,st);return it.cache=wt.set(bt,Et)||wt,Et};return it.cache=new(memoize.Cache||MapCache),it}memoize.Cache=MapCache;var COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode;function trim$1(nt){return nt.trim()}function replace(nt,rt,it){return nt.replace(rt,it)}function indexof(nt,rt){return nt.indexOf(rt)}function charat(nt,rt){return nt.charCodeAt(rt)|0}function substr(nt,rt,it){return nt.slice(rt,it)}function strlen(nt){return nt.length}function sizeof(nt){return nt.length}function append(nt,rt){return rt.push(nt),nt}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(nt,rt,it,st,bt,wt,Et){return{value:nt,root:rt,parent:it,type:st,props:bt,children:wt,line,column,length:Et,return:""}}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(nt,rt){return substr(characters,nt,rt)}function token(nt){switch(nt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(nt){return line=column=1,length=strlen(characters=nt),position$1=0,[]}function dealloc(nt){return characters="",nt}function delimit(nt){return trim$1(slice(position$1-1,delimiter(nt===91?nt+2:nt===40?nt+1:nt)))}function whitespace(nt){for(;(character=peek())&&character<33;)next();return token(nt)>2||token(character)>3?"":" "}function escaping(nt,rt){for(;--rt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(nt,caret()+(rt<6&&peek()==32&&next()==32))}function delimiter(nt){for(;next();)switch(character){case nt:return position$1;case 34:case 39:nt!==34&&nt!==39&&delimiter(character);break;case 40:nt===41&&delimiter(nt);break;case 92:next();break}return position$1}function commenter(nt,rt){for(;next()&&nt+character!==47+10;)if(nt+character===42+42&&peek()===47)break;return"/*"+slice(rt,position$1-1)+"*"+from(nt===47?nt:next())}function identifier(nt){for(;!token(peek());)next();return slice(nt,position$1)}function compile(nt){return dealloc(parse$2("",null,null,null,[""],nt=alloc(nt),0,[0],nt))}function parse$2(nt,rt,it,st,bt,wt,Et,kt,Lt){for(var Ot=0,Rt=0,Dt=Et,Bt=0,Ft=0,Yt=0,Jt=1,Wt=1,Qt=1,rn=0,sn="",on=bt,hn=wt,mn=st,Cn=sn;Wt;)switch(Yt=rn,rn=next()){case 40:if(Yt!=108&&charat(Cn,Dt-1)==58){indexof(Cn+=replace(delimit(rn),"&","&\f"),"&\f")!=-1&&(Qt=-1);break}case 34:case 39:case 91:Cn+=delimit(rn);break;case 9:case 10:case 13:case 32:Cn+=whitespace(Yt);break;case 92:Cn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),rt,it),Lt);break;default:Cn+="/"}break;case 123*Jt:kt[Ot++]=strlen(Cn)*Qt;case 125*Jt:case 59:case 0:switch(rn){case 0:case 125:Wt=0;case 59+Rt:Ft>0&&strlen(Cn)-Dt&&append(Ft>32?declaration(Cn+";",st,it,Dt-1):declaration(replace(Cn," ","")+";",st,it,Dt-2),Lt);break;case 59:Cn+=";";default:if(append(mn=ruleset(Cn,rt,it,Ot,Rt,bt,kt,sn,on=[],hn=[],Dt),wt),rn===123)if(Rt===0)parse$2(Cn,rt,mn,mn,on,wt,Dt,kt,hn);else switch(Bt===99&&charat(Cn,3)===110?100:Bt){case 100:case 109:case 115:parse$2(nt,mn,mn,st&&append(ruleset(nt,mn,mn,0,0,bt,kt,sn,bt,on=[],Dt),hn),bt,hn,Dt,kt,st?on:hn);break;default:parse$2(Cn,mn,mn,mn,[""],hn,0,kt,hn)}}Ot=Rt=Ft=0,Jt=Qt=1,sn=Cn="",Dt=Et;break;case 58:Dt=1+strlen(Cn),Ft=Yt;default:if(Jt<1){if(rn==123)--Jt;else if(rn==125&&Jt++==0&&prev()==125)continue}switch(Cn+=from(rn),rn*Jt){case 38:Qt=Rt>0?1:(Cn+="\f",-1);break;case 44:kt[Ot++]=(strlen(Cn)-1)*Qt,Qt=1;break;case 64:peek()===45&&(Cn+=delimit(next())),Bt=peek(),Rt=Dt=strlen(sn=Cn+=identifier(caret())),rn++;break;case 45:Yt===45&&strlen(Cn)==2&&(Jt=0)}}return wt}function ruleset(nt,rt,it,st,bt,wt,Et,kt,Lt,Ot,Rt){for(var Dt=bt-1,Bt=bt===0?wt:[""],Ft=sizeof(Bt),Yt=0,Jt=0,Wt=0;Yt<st;++Yt)for(var Qt=0,rn=substr(nt,Dt+1,Dt=abs(Jt=Et[Yt])),sn=nt;Qt<Ft;++Qt)(sn=trim$1(Jt>0?Bt[Qt]+" "+rn:replace(rn,/&\f/g,Bt[Qt])))&&(Lt[Wt++]=sn);return node(nt,rt,it,bt===0?RULESET:kt,Lt,Ot,Rt)}function comment(nt,rt,it){return node(nt,rt,it,COMMENT,from(char()),substr(nt,2,-2),0)}function declaration(nt,rt,it,st){return node(nt,rt,it,DECLARATION,substr(nt,0,st),substr(nt,st+1,-1),st)}function serialize(nt,rt){for(var it="",st=sizeof(nt),bt=0;bt<st;bt++)it+=rt(nt[bt],bt,nt,rt)||"";return it}function stringify(nt,rt,it,st){switch(nt.type){case IMPORT:case DECLARATION:return nt.return=nt.return||nt.value;case COMMENT:return"";case KEYFRAMES:return nt.return=nt.value+"{"+serialize(nt.children,st)+"}";case RULESET:nt.value=nt.props.join(",")}return strlen(it=serialize(nt.children,st))?nt.return=nt.value+"{"+it+"}":""}function isObjectLike(nt){return nt!=null&&typeof nt=="object"}var symbolTag$3="[object Symbol]";function isSymbol(nt){return typeof nt=="symbol"||isObjectLike(nt)&&baseGetTag(nt)==symbolTag$3}function arrayMap(nt,rt){for(var it=-1,st=nt==null?0:nt.length,bt=Array(st);++it<st;)bt[it]=rt(nt[it],it,nt);return bt}var isArray=Array.isArray;const isArray$1=isArray;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(nt){if(typeof nt=="string")return nt;if(isArray$1(nt))return arrayMap(nt,baseToString)+"";if(isSymbol(nt))return symbolToString?symbolToString.call(nt):"";var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$3?"-0":rt}var reWhitespace=/\s/;function trimmedEndIndex(nt){for(var rt=nt.length;rt--&&reWhitespace.test(nt.charAt(rt)););return rt}var reTrimStart=/^\s+/;function baseTrim(nt){return nt&&nt.slice(0,trimmedEndIndex(nt)+1).replace(reTrimStart,"")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(nt){if(typeof nt=="number")return nt;if(isSymbol(nt))return NAN;if(isObject$1(nt)){var rt=typeof nt.valueOf=="function"?nt.valueOf():nt;nt=isObject$1(rt)?rt+"":rt}if(typeof nt!="string")return nt===0?nt:+nt;nt=baseTrim(nt);var it=reIsBinary.test(nt);return it||reIsOctal.test(nt)?freeParseInt(nt.slice(2),it?2:8):reIsBadHex.test(nt)?NAN:+nt}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(nt){if(!nt)return nt===0?nt:0;if(nt=toNumber(nt),nt===INFINITY$2||nt===-INFINITY$2){var rt=nt<0?-1:1;return rt*MAX_INTEGER}return nt===nt?nt:0}function toInteger(nt){var rt=toFinite(nt),it=rt%1;return rt===rt?it?rt-it:rt:0}function identity(nt){return nt}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function nt(){}return function(rt){if(!isObject$1(rt))return{};if(objectCreate)return objectCreate(rt);nt.prototype=rt;var it=new nt;return nt.prototype=void 0,it}}();const baseCreate$1=baseCreate;function apply$1(nt,rt,it){switch(it.length){case 0:return nt.call(rt);case 1:return nt.call(rt,it[0]);case 2:return nt.call(rt,it[0],it[1]);case 3:return nt.call(rt,it[0],it[1],it[2])}return nt.apply(rt,it)}function noop(){}function copyArray(nt,rt){var it=-1,st=nt.length;for(rt||(rt=Array(st));++it<st;)rt[it]=nt[it];return rt}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(nt){var rt=0,it=0;return function(){var st=nativeNow(),bt=HOT_SPAN-(st-it);if(it=st,bt>0){if(++rt>=HOT_COUNT)return arguments[0]}else rt=0;return nt.apply(void 0,arguments)}}function constant(nt){return function(){return nt}}var defineProperty=function(){try{var nt=getNative(Object,"defineProperty");return nt({},"",{}),nt}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(nt,rt){return defineProperty$1(nt,"toString",{configurable:!0,enumerable:!1,value:constant(rt),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(nt,rt){for(var it=-1,st=nt==null?0:nt.length;++it<st&&rt(nt[it],it,nt)!==!1;);return nt}function baseFindIndex(nt,rt,it,st){for(var bt=nt.length,wt=it+(st?1:-1);st?wt--:++wt<bt;)if(rt(nt[wt],wt,nt))return wt;return-1}function baseIsNaN(nt){return nt!==nt}function strictIndexOf(nt,rt,it){for(var st=it-1,bt=nt.length;++st<bt;)if(nt[st]===rt)return st;return-1}function baseIndexOf(nt,rt,it){return rt===rt?strictIndexOf(nt,rt,it):baseFindIndex(nt,baseIsNaN,it)}function arrayIncludes(nt,rt){var it=nt==null?0:nt.length;return!!it&&baseIndexOf(nt,rt,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(nt,rt){var it=typeof nt;return rt=rt==null?MAX_SAFE_INTEGER$1:rt,!!rt&&(it=="number"||it!="symbol"&&reIsUint.test(nt))&&nt>-1&&nt%1==0&&nt<rt}function baseAssignValue(nt,rt,it){rt=="__proto__"&&defineProperty$1?defineProperty$1(nt,rt,{configurable:!0,enumerable:!0,value:it,writable:!0}):nt[rt]=it}var objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function assignValue(nt,rt,it){var st=nt[rt];(!(hasOwnProperty$b.call(nt,rt)&&eq(st,it))||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function copyObject(nt,rt,it,st){var bt=!it;it||(it={});for(var wt=-1,Et=rt.length;++wt<Et;){var kt=rt[wt],Lt=st?st(it[kt],nt[kt],kt,it,nt):void 0;Lt===void 0&&(Lt=nt[kt]),bt?baseAssignValue(it,kt,Lt):assignValue(it,kt,Lt)}return it}var nativeMax$2=Math.max;function overRest(nt,rt,it){return rt=nativeMax$2(rt===void 0?nt.length-1:rt,0),function(){for(var st=arguments,bt=-1,wt=nativeMax$2(st.length-rt,0),Et=Array(wt);++bt<wt;)Et[bt]=st[rt+bt];bt=-1;for(var kt=Array(rt+1);++bt<rt;)kt[bt]=st[bt];return kt[rt]=it(Et),apply$1(nt,this,kt)}}function baseRest(nt,rt){return setToString$1(overRest(nt,rt,identity),nt+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=MAX_SAFE_INTEGER}function isArrayLike(nt){return nt!=null&&isLength(nt.length)&&!isFunction(nt)}function isIterateeCall(nt,rt,it){if(!isObject$1(it))return!1;var st=typeof rt;return(st=="number"?isArrayLike(it)&&isIndex(rt,it.length):st=="string"&&rt in it)?eq(it[rt],nt):!1}function createAssigner(nt){return baseRest(function(rt,it){var st=-1,bt=it.length,wt=bt>1?it[bt-1]:void 0,Et=bt>2?it[2]:void 0;for(wt=nt.length>3&&typeof wt=="function"?(bt--,wt):void 0,Et&&isIterateeCall(it[0],it[1],Et)&&(wt=bt<3?void 0:wt,bt=1),rt=Object(rt);++st<bt;){var kt=it[st];kt&&nt(rt,kt,st,wt)}return rt})}var objectProto$c=Object.prototype;function isPrototype(nt){var rt=nt&&nt.constructor,it=typeof rt=="function"&&rt.prototype||objectProto$c;return nt===it}function baseTimes(nt,rt){for(var it=-1,st=Array(nt);++it<nt;)st[it]=rt(it);return st}var argsTag$3="[object Arguments]";function baseIsArguments(nt){return isObjectLike(nt)&&baseGetTag(nt)==argsTag$3}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(nt){return isObjectLike(nt)&&hasOwnProperty$a.call(nt,"callee")&&!propertyIsEnumerable$1.call(nt,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(nt){return isObjectLike(nt)&&isLength(nt.length)&&!!typedArrayTags[baseGetTag(nt)]}function baseUnary(nt){return function(rt){return nt(rt)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var nt=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return nt||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function arrayLikeKeys(nt,rt){var it=isArray$1(nt),st=!it&&isArguments$1(nt),bt=!it&&!st&&isBuffer$1(nt),wt=!it&&!st&&!bt&&isTypedArray$1(nt),Et=it||st||bt||wt,kt=Et?baseTimes(nt.length,String):[],Lt=kt.length;for(var Ot in nt)(rt||hasOwnProperty$9.call(nt,Ot))&&!(Et&&(Ot=="length"||bt&&(Ot=="offset"||Ot=="parent")||wt&&(Ot=="buffer"||Ot=="byteLength"||Ot=="byteOffset")||isIndex(Ot,Lt)))&&kt.push(Ot);return kt}function overArg(nt,rt){return function(it){return nt(rt(it))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function baseKeys(nt){if(!isPrototype(nt))return nativeKeys$1(nt);var rt=[];for(var it in Object(nt))hasOwnProperty$8.call(nt,it)&&it!="constructor"&&rt.push(it);return rt}function keys(nt){return isArrayLike(nt)?arrayLikeKeys(nt):baseKeys(nt)}function nativeKeysIn(nt){var rt=[];if(nt!=null)for(var it in Object(nt))rt.push(it);return rt}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeysIn(nt){if(!isObject$1(nt))return nativeKeysIn(nt);var rt=isPrototype(nt),it=[];for(var st in nt)st=="constructor"&&(rt||!hasOwnProperty$7.call(nt,st))||it.push(st);return it}function keysIn(nt){return isArrayLike(nt)?arrayLikeKeys(nt,!0):baseKeysIn(nt)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(nt,rt){if(isArray$1(nt))return!1;var it=typeof nt;return it=="number"||it=="symbol"||it=="boolean"||nt==null||isSymbol(nt)?!0:reIsPlainProp.test(nt)||!reIsDeepProp.test(nt)||rt!=null&&nt in Object(rt)}var MAX_MEMOIZE_SIZE=500;function memoizeCapped(nt){var rt=memoize(nt,function(st){return it.size===MAX_MEMOIZE_SIZE&&it.clear(),st}),it=rt.cache;return rt}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(nt){var rt=[];return nt.charCodeAt(0)===46&&rt.push(""),nt.replace(rePropName,function(it,st,bt,wt){rt.push(bt?wt.replace(reEscapeChar,"$1"):st||it)}),rt});const stringToPath$1=stringToPath;function toString(nt){return nt==null?"":baseToString(nt)}function castPath(nt,rt){return isArray$1(nt)?nt:isKey(nt,rt)?[nt]:stringToPath$1(toString(nt))}var INFINITY$1=1/0;function toKey(nt){if(typeof nt=="string"||isSymbol(nt))return nt;var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$1?"-0":rt}function baseGet(nt,rt){rt=castPath(rt,nt);for(var it=0,st=rt.length;nt!=null&&it<st;)nt=nt[toKey(rt[it++])];return it&&it==st?nt:void 0}function get$1(nt,rt,it){var st=nt==null?void 0:baseGet(nt,rt);return st===void 0?it:st}function arrayPush(nt,rt){for(var it=-1,st=rt.length,bt=nt.length;++it<st;)nt[bt+it]=rt[it];return nt}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(nt){return isArray$1(nt)||isArguments$1(nt)||!!(spreadableSymbol&&nt&&nt[spreadableSymbol])}function baseFlatten(nt,rt,it,st,bt){var wt=-1,Et=nt.length;for(it||(it=isFlattenable),bt||(bt=[]);++wt<Et;){var kt=nt[wt];rt>0&&it(kt)?rt>1?baseFlatten(kt,rt-1,it,st,bt):arrayPush(bt,kt):st||(bt[bt.length]=kt)}return bt}function flatten$1(nt){var rt=nt==null?0:nt.length;return rt?baseFlatten(nt,1):[]}function flatRest(nt){return setToString$1(overRest(nt,void 0,flatten$1),nt+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(nt){if(!isObjectLike(nt)||baseGetTag(nt)!=objectTag$3)return!1;var rt=getPrototype$1(nt);if(rt===null)return!0;var it=hasOwnProperty$6.call(rt,"constructor")&&rt.constructor;return typeof it=="function"&&it instanceof it&&funcToString.call(it)==objectCtorString}function arrayReduce(nt,rt,it,st){var bt=-1,wt=nt==null?0:nt.length;for(st&&wt&&(it=nt[++bt]);++bt<wt;)it=rt(it,nt[bt],bt,nt);return it}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(nt){var rt=this.__data__,it=rt.delete(nt);return this.size=rt.size,it}function stackGet(nt){return this.__data__.get(nt)}function stackHas(nt){return this.__data__.has(nt)}var LARGE_ARRAY_SIZE$1=200;function stackSet(nt,rt){var it=this.__data__;if(it instanceof ListCache){var st=it.__data__;if(!Map$2||st.length<LARGE_ARRAY_SIZE$1-1)return st.push([nt,rt]),this.size=++it.size,this;it=this.__data__=new MapCache(st)}return it.set(nt,rt),this.size=it.size,this}function Stack(nt){var rt=this.__data__=new ListCache(nt);this.size=rt.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(nt,rt){return nt&&copyObject(rt,keys(rt),nt)}function baseAssignIn(nt,rt){return nt&&copyObject(rt,keysIn(rt),nt)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(nt,rt){if(rt)return nt.slice();var it=nt.length,st=allocUnsafe?allocUnsafe(it):new nt.constructor(it);return nt.copy(st),st}function arrayFilter(nt,rt){for(var it=-1,st=nt==null?0:nt.length,bt=0,wt=[];++it<st;){var Et=nt[it];rt(Et,it,nt)&&(wt[bt++]=Et)}return wt}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(nt){return nt==null?[]:(nt=Object(nt),arrayFilter(nativeGetSymbols$1(nt),function(rt){return propertyIsEnumerable.call(nt,rt)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(nt,rt){return copyObject(nt,getSymbols$1(nt),rt)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(nt){for(var rt=[];nt;)arrayPush(rt,getSymbols$1(nt)),nt=getPrototype$1(nt);return rt}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(nt,rt){return copyObject(nt,getSymbolsIn$1(nt),rt)}function baseGetAllKeys(nt,rt,it){var st=rt(nt);return isArray$1(nt)?st:arrayPush(st,it(nt))}function getAllKeys(nt){return baseGetAllKeys(nt,keys,getSymbols$1)}function getAllKeysIn(nt){return baseGetAllKeys(nt,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(nt){var rt=baseGetTag(nt),it=rt==objectTag$2?nt.constructor:void 0,st=it?toSource(it):"";if(st)switch(st){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return rt});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function initCloneArray(nt){var rt=nt.length,it=new nt.constructor(rt);return rt&&typeof nt[0]=="string"&&hasOwnProperty$5.call(nt,"index")&&(it.index=nt.index,it.input=nt.input),it}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(nt){var rt=new nt.constructor(nt.byteLength);return new Uint8Array$2(rt).set(new Uint8Array$2(nt)),rt}function cloneDataView(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.byteLength)}var reFlags=/\w*$/;function cloneRegExp(nt){var rt=new nt.constructor(nt.source,reFlags.exec(nt));return rt.lastIndex=nt.lastIndex,rt}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(nt){return symbolValueOf$1?Object(symbolValueOf$1.call(nt)):{}}function cloneTypedArray(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(nt,rt,it){var st=nt.constructor;switch(rt){case arrayBufferTag$2:return cloneArrayBuffer(nt);case boolTag$2:case dateTag$2:return new st(+nt);case dataViewTag$2:return cloneDataView(nt,it);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(nt,it);case mapTag$4:return new st;case numberTag$2:case stringTag$2:return new st(nt);case regexpTag$2:return cloneRegExp(nt);case setTag$4:return new st;case symbolTag$2:return cloneSymbol(nt)}}function initCloneObject(nt){return typeof nt.constructor=="function"&&!isPrototype(nt)?baseCreate$1(getPrototype$1(nt)):{}}var mapTag$3="[object Map]";function baseIsMap(nt){return isObjectLike(nt)&&getTag$1(nt)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(nt){return isObjectLike(nt)&&getTag$1(nt)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(nt,rt,it,st,bt,wt){var Et,kt=rt&CLONE_DEEP_FLAG$1,Lt=rt&CLONE_FLAT_FLAG,Ot=rt&CLONE_SYMBOLS_FLAG$2;if(it&&(Et=bt?it(nt,st,bt,wt):it(nt)),Et!==void 0)return Et;if(!isObject$1(nt))return nt;var Rt=isArray$1(nt);if(Rt){if(Et=initCloneArray(nt),!kt)return copyArray(nt,Et)}else{var Dt=getTag$1(nt),Bt=Dt==funcTag||Dt==genTag;if(isBuffer$1(nt))return cloneBuffer(nt,kt);if(Dt==objectTag$1||Dt==argsTag$1||Bt&&!bt){if(Et=Lt||Bt?{}:initCloneObject(nt),!kt)return Lt?copySymbolsIn(nt,baseAssignIn(Et,nt)):copySymbols(nt,baseAssign(Et,nt))}else{if(!cloneableTags[Dt])return bt?nt:{};Et=initCloneByTag(nt,Dt,kt)}}wt||(wt=new Stack);var Ft=wt.get(nt);if(Ft)return Ft;wt.set(nt,Et),isSet$1(nt)?nt.forEach(function(Wt){Et.add(baseClone(Wt,rt,it,Wt,nt,wt))}):isMap$1(nt)&&nt.forEach(function(Wt,Qt){Et.set(Qt,baseClone(Wt,rt,it,Qt,nt,wt))});var Yt=Ot?Lt?getAllKeysIn:getAllKeys:Lt?keysIn:keys,Jt=Rt?void 0:Yt(nt);return arrayEach(Jt||nt,function(Wt,Qt){Jt&&(Qt=Wt,Wt=nt[Qt]),assignValue(Et,Qt,baseClone(Wt,rt,it,Qt,nt,wt))}),Et}var CLONE_SYMBOLS_FLAG$1=4;function clone$1(nt){return baseClone(nt,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(nt){return baseClone(nt,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(nt){return this.__data__.set(nt,HASH_UNDEFINED),this}function setCacheHas(nt){return this.__data__.has(nt)}function SetCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.__data__=new MapCache;++rt<it;)this.add(nt[rt])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(nt,rt){for(var it=-1,st=nt==null?0:nt.length;++it<st;)if(rt(nt[it],it,nt))return!0;return!1}function cacheHas(nt,rt){return nt.has(rt)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(nt,rt,it,st,bt,wt){var Et=it&COMPARE_PARTIAL_FLAG$5,kt=nt.length,Lt=rt.length;if(kt!=Lt&&!(Et&&Lt>kt))return!1;var Ot=wt.get(nt),Rt=wt.get(rt);if(Ot&&Rt)return Ot==rt&&Rt==nt;var Dt=-1,Bt=!0,Ft=it&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(wt.set(nt,rt),wt.set(rt,nt);++Dt<kt;){var Yt=nt[Dt],Jt=rt[Dt];if(st)var Wt=Et?st(Jt,Yt,Dt,rt,nt,wt):st(Yt,Jt,Dt,nt,rt,wt);if(Wt!==void 0){if(Wt)continue;Bt=!1;break}if(Ft){if(!arraySome(rt,function(Qt,rn){if(!cacheHas(Ft,rn)&&(Yt===Qt||bt(Yt,Qt,it,st,wt)))return Ft.push(rn)})){Bt=!1;break}}else if(!(Yt===Jt||bt(Yt,Jt,it,st,wt))){Bt=!1;break}}return wt.delete(nt),wt.delete(rt),Bt}function mapToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(st,bt){it[++rt]=[bt,st]}),it}function setToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(st){it[++rt]=st}),it}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(nt,rt,it,st,bt,wt,Et){switch(it){case dataViewTag:if(nt.byteLength!=rt.byteLength||nt.byteOffset!=rt.byteOffset)return!1;nt=nt.buffer,rt=rt.buffer;case arrayBufferTag:return!(nt.byteLength!=rt.byteLength||!wt(new Uint8Array$2(nt),new Uint8Array$2(rt)));case boolTag:case dateTag:case numberTag:return eq(+nt,+rt);case errorTag:return nt.name==rt.name&&nt.message==rt.message;case regexpTag:case stringTag:return nt==rt+"";case mapTag$1:var kt=mapToArray;case setTag$1:var Lt=st&COMPARE_PARTIAL_FLAG$4;if(kt||(kt=setToArray),nt.size!=rt.size&&!Lt)return!1;var Ot=Et.get(nt);if(Ot)return Ot==rt;st|=COMPARE_UNORDERED_FLAG$2,Et.set(nt,rt);var Rt=equalArrays(kt(nt),kt(rt),st,bt,wt,Et);return Et.delete(nt),Rt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(nt)==symbolValueOf.call(rt)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects(nt,rt,it,st,bt,wt){var Et=it&COMPARE_PARTIAL_FLAG$3,kt=getAllKeys(nt),Lt=kt.length,Ot=getAllKeys(rt),Rt=Ot.length;if(Lt!=Rt&&!Et)return!1;for(var Dt=Lt;Dt--;){var Bt=kt[Dt];if(!(Et?Bt in rt:hasOwnProperty$4.call(rt,Bt)))return!1}var Ft=wt.get(nt),Yt=wt.get(rt);if(Ft&&Yt)return Ft==rt&&Yt==nt;var Jt=!0;wt.set(nt,rt),wt.set(rt,nt);for(var Wt=Et;++Dt<Lt;){Bt=kt[Dt];var Qt=nt[Bt],rn=rt[Bt];if(st)var sn=Et?st(rn,Qt,Bt,rt,nt,wt):st(Qt,rn,Bt,nt,rt,wt);if(!(sn===void 0?Qt===rn||bt(Qt,rn,it,st,wt):sn)){Jt=!1;break}Wt||(Wt=Bt=="constructor")}if(Jt&&!Wt){var on=nt.constructor,hn=rt.constructor;on!=hn&&"constructor"in nt&&"constructor"in rt&&!(typeof on=="function"&&on instanceof on&&typeof hn=="function"&&hn instanceof hn)&&(Jt=!1)}return wt.delete(nt),wt.delete(rt),Jt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep(nt,rt,it,st,bt,wt){var Et=isArray$1(nt),kt=isArray$1(rt),Lt=Et?arrayTag:getTag$1(nt),Ot=kt?arrayTag:getTag$1(rt);Lt=Lt==argsTag?objectTag:Lt,Ot=Ot==argsTag?objectTag:Ot;var Rt=Lt==objectTag,Dt=Ot==objectTag,Bt=Lt==Ot;if(Bt&&isBuffer$1(nt)){if(!isBuffer$1(rt))return!1;Et=!0,Rt=!1}if(Bt&&!Rt)return wt||(wt=new Stack),Et||isTypedArray$1(nt)?equalArrays(nt,rt,it,st,bt,wt):equalByTag(nt,rt,Lt,it,st,bt,wt);if(!(it&COMPARE_PARTIAL_FLAG$2)){var Ft=Rt&&hasOwnProperty$3.call(nt,"__wrapped__"),Yt=Dt&&hasOwnProperty$3.call(rt,"__wrapped__");if(Ft||Yt){var Jt=Ft?nt.value():nt,Wt=Yt?rt.value():rt;return wt||(wt=new Stack),bt(Jt,Wt,it,st,wt)}}return Bt?(wt||(wt=new Stack),equalObjects(nt,rt,it,st,bt,wt)):!1}function baseIsEqual(nt,rt,it,st,bt){return nt===rt?!0:nt==null||rt==null||!isObjectLike(nt)&&!isObjectLike(rt)?nt!==nt&&rt!==rt:baseIsEqualDeep(nt,rt,it,st,baseIsEqual,bt)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(nt,rt,it,st){var bt=it.length,wt=bt,Et=!st;if(nt==null)return!wt;for(nt=Object(nt);bt--;){var kt=it[bt];if(Et&&kt[2]?kt[1]!==nt[kt[0]]:!(kt[0]in nt))return!1}for(;++bt<wt;){kt=it[bt];var Lt=kt[0],Ot=nt[Lt],Rt=kt[1];if(Et&&kt[2]){if(Ot===void 0&&!(Lt in nt))return!1}else{var Dt=new Stack;if(st)var Bt=st(Ot,Rt,Lt,nt,rt,Dt);if(!(Bt===void 0?baseIsEqual(Rt,Ot,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,st,Dt):Bt))return!1}}return!0}function isStrictComparable(nt){return nt===nt&&!isObject$1(nt)}function getMatchData(nt){for(var rt=keys(nt),it=rt.length;it--;){var st=rt[it],bt=nt[st];rt[it]=[st,bt,isStrictComparable(bt)]}return rt}function matchesStrictComparable(nt,rt){return function(it){return it==null?!1:it[nt]===rt&&(rt!==void 0||nt in Object(it))}}function baseMatches(nt){var rt=getMatchData(nt);return rt.length==1&&rt[0][2]?matchesStrictComparable(rt[0][0],rt[0][1]):function(it){return it===nt||baseIsMatch(it,nt,rt)}}function baseHasIn(nt,rt){return nt!=null&&rt in Object(nt)}function hasPath(nt,rt,it){rt=castPath(rt,nt);for(var st=-1,bt=rt.length,wt=!1;++st<bt;){var Et=toKey(rt[st]);if(!(wt=nt!=null&&it(nt,Et)))break;nt=nt[Et]}return wt||++st!=bt?wt:(bt=nt==null?0:nt.length,!!bt&&isLength(bt)&&isIndex(Et,bt)&&(isArray$1(nt)||isArguments$1(nt)))}function hasIn(nt,rt){return nt!=null&&hasPath(nt,rt,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(nt,rt){return isKey(nt)&&isStrictComparable(rt)?matchesStrictComparable(toKey(nt),rt):function(it){var st=get$1(it,nt);return st===void 0&&st===rt?hasIn(it,nt):baseIsEqual(rt,st,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(nt){return function(rt){return rt==null?void 0:rt[nt]}}function basePropertyDeep(nt){return function(rt){return baseGet(rt,nt)}}function property(nt){return isKey(nt)?baseProperty(toKey(nt)):basePropertyDeep(nt)}function baseIteratee(nt){return typeof nt=="function"?nt:nt==null?identity:typeof nt=="object"?isArray$1(nt)?baseMatchesProperty(nt[0],nt[1]):baseMatches(nt):property(nt)}function createBaseFor(nt){return function(rt,it,st){for(var bt=-1,wt=Object(rt),Et=st(rt),kt=Et.length;kt--;){var Lt=Et[nt?kt:++bt];if(it(wt[Lt],Lt,wt)===!1)break}return rt}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(nt,rt){return nt&&baseFor$1(nt,rt,keys)}function createBaseEach(nt,rt){return function(it,st){if(it==null)return it;if(!isArrayLike(it))return nt(it,st);for(var bt=it.length,wt=rt?bt:-1,Et=Object(it);(rt?wt--:++wt<bt)&&st(Et[wt],wt,Et)!==!1;);return it}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest(function(nt,rt){nt=Object(nt);var it=-1,st=rt.length,bt=st>2?rt[2]:void 0;for(bt&&isIterateeCall(rt[0],rt[1],bt)&&(st=1);++it<st;)for(var wt=rt[it],Et=keysIn(wt),kt=-1,Lt=Et.length;++kt<Lt;){var Ot=Et[kt],Rt=nt[Ot];(Rt===void 0||eq(Rt,objectProto$2[Ot])&&!hasOwnProperty$2.call(nt,Ot))&&(nt[Ot]=wt[Ot])}return nt});const defaults$1=defaults;function assignMergeValue(nt,rt,it){(it!==void 0&&!eq(nt[rt],it)||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function isArrayLikeObject(nt){return isObjectLike(nt)&&isArrayLike(nt)}function safeGet(nt,rt){if(!(rt==="constructor"&&typeof nt[rt]=="function")&&rt!="__proto__")return nt[rt]}function toPlainObject(nt){return copyObject(nt,keysIn(nt))}function baseMergeDeep(nt,rt,it,st,bt,wt,Et){var kt=safeGet(nt,it),Lt=safeGet(rt,it),Ot=Et.get(Lt);if(Ot){assignMergeValue(nt,it,Ot);return}var Rt=wt?wt(kt,Lt,it+"",nt,rt,Et):void 0,Dt=Rt===void 0;if(Dt){var Bt=isArray$1(Lt),Ft=!Bt&&isBuffer$1(Lt),Yt=!Bt&&!Ft&&isTypedArray$1(Lt);Rt=Lt,Bt||Ft||Yt?isArray$1(kt)?Rt=kt:isArrayLikeObject(kt)?Rt=copyArray(kt):Ft?(Dt=!1,Rt=cloneBuffer(Lt,!0)):Yt?(Dt=!1,Rt=cloneTypedArray(Lt,!0)):Rt=[]:isPlainObject(Lt)||isArguments$1(Lt)?(Rt=kt,isArguments$1(kt)?Rt=toPlainObject(kt):(!isObject$1(kt)||isFunction(kt))&&(Rt=initCloneObject(Lt))):Dt=!1}Dt&&(Et.set(Lt,Rt),bt(Rt,Lt,st,wt,Et),Et.delete(Lt)),assignMergeValue(nt,it,Rt)}function baseMerge(nt,rt,it,st,bt){nt!==rt&&baseFor$1(rt,function(wt,Et){if(bt||(bt=new Stack),isObject$1(wt))baseMergeDeep(nt,rt,Et,it,baseMerge,st,bt);else{var kt=st?st(safeGet(nt,Et),wt,Et+"",nt,rt,bt):void 0;kt===void 0&&(kt=wt),assignMergeValue(nt,Et,kt)}},keysIn)}function arrayIncludesWith(nt,rt,it){for(var st=-1,bt=nt==null?0:nt.length;++st<bt;)if(it(rt,nt[st]))return!0;return!1}function last(nt){var rt=nt==null?0:nt.length;return rt?nt[rt-1]:void 0}function castFunction(nt){return typeof nt=="function"?nt:identity}function forEach(nt,rt){var it=isArray$1(nt)?arrayEach:baseEach$1;return it(nt,castFunction(rt))}function baseFilter(nt,rt){var it=[];return baseEach$1(nt,function(st,bt,wt){rt(st,bt,wt)&&it.push(st)}),it}function filter(nt,rt){var it=isArray$1(nt)?arrayFilter:baseFilter;return it(nt,baseIteratee(rt))}function createFind(nt){return function(rt,it,st){var bt=Object(rt);if(!isArrayLike(rt)){var wt=baseIteratee(it);rt=keys(rt),it=function(kt){return wt(bt[kt],kt,bt)}}var Et=nt(rt,it,st);return Et>-1?bt[wt?rt[Et]:Et]:void 0}}var nativeMax$1=Math.max;function findIndex(nt,rt,it){var st=nt==null?0:nt.length;if(!st)return-1;var bt=it==null?0:toInteger(it);return bt<0&&(bt=nativeMax$1(st+bt,0)),baseFindIndex(nt,baseIteratee(rt),bt)}var find=createFind(findIndex);const find$1=find;function baseMap(nt,rt){var it=-1,st=isArrayLike(nt)?Array(nt.length):[];return baseEach$1(nt,function(bt,wt,Et){st[++it]=rt(bt,wt,Et)}),st}function map$1(nt,rt){var it=isArray$1(nt)?arrayMap:baseMap;return it(nt,baseIteratee(rt))}function forIn(nt,rt){return nt==null?nt:baseFor$1(nt,castFunction(rt),keysIn)}function baseGt(nt,rt){return nt>rt}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas(nt,rt){return nt!=null&&hasOwnProperty$1.call(nt,rt)}function has(nt,rt){return nt!=null&&hasPath(nt,rt,baseHas)}function baseValues(nt,rt){return arrayMap(rt,function(it){return nt[it]})}function values(nt){return nt==null?[]:baseValues(nt,keys(nt))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(nt){if(nt==null)return!0;if(isArrayLike(nt)&&(isArray$1(nt)||typeof nt=="string"||typeof nt.splice=="function"||isBuffer$1(nt)||isTypedArray$1(nt)||isArguments$1(nt)))return!nt.length;var rt=getTag$1(nt);if(rt==mapTag||rt==setTag)return!nt.size;if(isPrototype(nt))return!baseKeys(nt).length;for(var it in nt)if(hasOwnProperty.call(nt,it))return!1;return!0}function isUndefined(nt){return nt===void 0}function baseLt(nt,rt){return nt<rt}function mapValues(nt,rt){var it={};return rt=baseIteratee(rt),baseForOwn(nt,function(st,bt,wt){baseAssignValue(it,bt,rt(st,bt,wt))}),it}function baseExtremum(nt,rt,it){for(var st=-1,bt=nt.length;++st<bt;){var wt=nt[st],Et=rt(wt);if(Et!=null&&(kt===void 0?Et===Et&&!isSymbol(Et):it(Et,kt)))var kt=Et,Lt=wt}return Lt}function max(nt){return nt&&nt.length?baseExtremum(nt,identity,baseGt):void 0}var merge$2=createAssigner(function(nt,rt,it){baseMerge(nt,rt,it)});const merge$3=merge$2;function min(nt){return nt&&nt.length?baseExtremum(nt,identity,baseLt):void 0}function minBy(nt,rt){return nt&&nt.length?baseExtremum(nt,baseIteratee(rt),baseLt):void 0}function baseSet(nt,rt,it,st){if(!isObject$1(nt))return nt;rt=castPath(rt,nt);for(var bt=-1,wt=rt.length,Et=wt-1,kt=nt;kt!=null&&++bt<wt;){var Lt=toKey(rt[bt]),Ot=it;if(Lt==="__proto__"||Lt==="constructor"||Lt==="prototype")return nt;if(bt!=Et){var Rt=kt[Lt];Ot=st?st(Rt,Lt,kt):void 0,Ot===void 0&&(Ot=isObject$1(Rt)?Rt:isIndex(rt[bt+1])?[]:{})}assignValue(kt,Lt,Ot),kt=kt[Lt]}return nt}function basePickBy(nt,rt,it){for(var st=-1,bt=rt.length,wt={};++st<bt;){var Et=rt[st],kt=baseGet(nt,Et);it(kt,Et)&&baseSet(wt,castPath(Et,nt),kt)}return wt}function baseSortBy(nt,rt){var it=nt.length;for(nt.sort(rt);it--;)nt[it]=nt[it].value;return nt}function compareAscending(nt,rt){if(nt!==rt){var it=nt!==void 0,st=nt===null,bt=nt===nt,wt=isSymbol(nt),Et=rt!==void 0,kt=rt===null,Lt=rt===rt,Ot=isSymbol(rt);if(!kt&&!Ot&&!wt&&nt>rt||wt&&Et&&Lt&&!kt&&!Ot||st&&Et&&Lt||!it&&Lt||!bt)return 1;if(!st&&!wt&&!Ot&&nt<rt||Ot&&it&&bt&&!st&&!wt||kt&&it&&bt||!Et&&bt||!Lt)return-1}return 0}function compareMultiple(nt,rt,it){for(var st=-1,bt=nt.criteria,wt=rt.criteria,Et=bt.length,kt=it.length;++st<Et;){var Lt=compareAscending(bt[st],wt[st]);if(Lt){if(st>=kt)return Lt;var Ot=it[st];return Lt*(Ot=="desc"?-1:1)}}return nt.index-rt.index}function baseOrderBy(nt,rt,it){rt.length?rt=arrayMap(rt,function(wt){return isArray$1(wt)?function(Et){return baseGet(Et,wt.length===1?wt[0]:wt)}:wt}):rt=[identity];var st=-1;rt=arrayMap(rt,baseUnary(baseIteratee));var bt=baseMap(nt,function(wt,Et,kt){var Lt=arrayMap(rt,function(Ot){return Ot(wt)});return{criteria:Lt,index:++st,value:wt}});return baseSortBy(bt,function(wt,Et){return compareMultiple(wt,Et,it)})}function basePick(nt,rt){return basePickBy(nt,rt,function(it,st){return hasIn(nt,st)})}var pick=flatRest(function(nt,rt){return nt==null?{}:basePick(nt,rt)});const pick$1=pick;var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(nt,rt,it,st){for(var bt=-1,wt=nativeMax(nativeCeil((rt-nt)/(it||1)),0),Et=Array(wt);wt--;)Et[st?wt:++bt]=nt,nt+=it;return Et}function createRange(nt){return function(rt,it,st){return st&&typeof st!="number"&&isIterateeCall(rt,it,st)&&(it=st=void 0),rt=toFinite(rt),it===void 0?(it=rt,rt=0):it=toFinite(it),st=st===void 0?rt<it?1:-1:toFinite(st),baseRange(rt,it,st,nt)}}var range=createRange();const range$1=range;function baseReduce(nt,rt,it,st,bt){return bt(nt,function(wt,Et,kt){it=st?(st=!1,wt):rt(it,wt,Et,kt)}),it}function reduce(nt,rt,it){var st=isArray$1(nt)?arrayReduce:baseReduce,bt=arguments.length<3;return st(nt,baseIteratee(rt),it,bt,baseEach$1)}var sortBy=baseRest(function(nt,rt){if(nt==null)return[];var it=rt.length;return it>1&&isIterateeCall(nt,rt[0],rt[1])?rt=[]:it>2&&isIterateeCall(rt[0],rt[1],rt[2])&&(rt=[rt[0]]),baseOrderBy(nt,baseFlatten(rt,1),[])});const sortBy$1=sortBy;var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(nt){return new Set$2(nt)}:noop;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(nt,rt,it){var st=-1,bt=arrayIncludes,wt=nt.length,Et=!0,kt=[],Lt=kt;if(it)Et=!1,bt=arrayIncludesWith;else if(wt>=LARGE_ARRAY_SIZE){var Ot=rt?null:createSet$1(nt);if(Ot)return setToArray(Ot);Et=!1,bt=cacheHas,Lt=new SetCache}else Lt=rt?[]:kt;e:for(;++st<wt;){var Rt=nt[st],Dt=rt?rt(Rt):Rt;if(Rt=it||Rt!==0?Rt:0,Et&&Dt===Dt){for(var Bt=Lt.length;Bt--;)if(Lt[Bt]===Dt)continue e;rt&&Lt.push(Dt),kt.push(Rt)}else bt(Lt,Dt,it)||(Lt!==kt&&Lt.push(Dt),kt.push(Rt))}return kt}var union=baseRest(function(nt){return baseUniq(baseFlatten(nt,1,isArrayLikeObject,!0))});const union$1=union;var idCounter=0;function uniqueId(nt){var rt=++idCounter;return toString(nt)+rt}function baseZipObject(nt,rt,it){for(var st=-1,bt=nt.length,wt=rt.length,Et={};++st<bt;){var kt=st<wt?rt[st]:void 0;it(Et,nt[st],kt)}return Et}function zipObject(nt,rt){return baseZipObject(nt||[],rt||[],assignValue)}var DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";class Graph{constructor(rt={}){this._isDirected=has(rt,"directed")?rt.directed:!0,this._isMultigraph=has(rt,"multigraph")?rt.multigraph:!1,this._isCompound=has(rt,"compound")?rt.compound:!1,this._label=void 0,this._defaultNodeLabelFn=constant(void 0),this._defaultEdgeLabelFn=constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(rt){return this._label=rt,this}graph(){return this._label}setDefaultNodeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultNodeLabelFn=rt,this}nodeCount(){return this._nodeCount}nodes(){return keys(this._nodes)}sources(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._in[it])})}sinks(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._out[it])})}setNodes(rt,it){var st=arguments,bt=this;return forEach(rt,function(wt){st.length>1?bt.setNode(wt,it):bt.setNode(wt)}),this}setNode(rt,it){return has(this._nodes,rt)?(arguments.length>1&&(this._nodes[rt]=it),this):(this._nodes[rt]=arguments.length>1?it:this._defaultNodeLabelFn(rt),this._isCompound&&(this._parent[rt]=GRAPH_NODE,this._children[rt]={},this._children[GRAPH_NODE][rt]=!0),this._in[rt]={},this._preds[rt]={},this._out[rt]={},this._sucs[rt]={},++this._nodeCount,this)}node(rt){return this._nodes[rt]}hasNode(rt){return has(this._nodes,rt)}removeNode(rt){var it=this;if(has(this._nodes,rt)){var st=function(bt){it.removeEdge(it._edgeObjs[bt])};delete this._nodes[rt],this._isCompound&&(this._removeFromParentsChildList(rt),delete this._parent[rt],forEach(this.children(rt),function(bt){it.setParent(bt)}),delete this._children[rt]),forEach(keys(this._in[rt]),st),delete this._in[rt],delete this._preds[rt],forEach(keys(this._out[rt]),st),delete this._out[rt],delete this._sucs[rt],--this._nodeCount}return this}setParent(rt,it){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined(it))it=GRAPH_NODE;else{it+="";for(var st=it;!isUndefined(st);st=this.parent(st))if(st===rt)throw new Error("Setting "+it+" as parent of "+rt+" would create a cycle");this.setNode(it)}return this.setNode(rt),this._removeFromParentsChildList(rt),this._parent[rt]=it,this._children[it][rt]=!0,this}_removeFromParentsChildList(rt){delete this._children[this._parent[rt]][rt]}parent(rt){if(this._isCompound){var it=this._parent[rt];if(it!==GRAPH_NODE)return it}}children(rt){if(isUndefined(rt)&&(rt=GRAPH_NODE),this._isCompound){var it=this._children[rt];if(it)return keys(it)}else{if(rt===GRAPH_NODE)return this.nodes();if(this.hasNode(rt))return[]}}predecessors(rt){var it=this._preds[rt];if(it)return keys(it)}successors(rt){var it=this._sucs[rt];if(it)return keys(it)}neighbors(rt){var it=this.predecessors(rt);if(it)return union$1(it,this.successors(rt))}isLeaf(rt){var it;return this.isDirected()?it=this.successors(rt):it=this.neighbors(rt),it.length===0}filterNodes(rt){var it=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});it.setGraph(this.graph());var st=this;forEach(this._nodes,function(Et,kt){rt(kt)&&it.setNode(kt,Et)}),forEach(this._edgeObjs,function(Et){it.hasNode(Et.v)&&it.hasNode(Et.w)&&it.setEdge(Et,st.edge(Et))});var bt={};function wt(Et){var kt=st.parent(Et);return kt===void 0||it.hasNode(kt)?(bt[Et]=kt,kt):kt in bt?bt[kt]:wt(kt)}return this._isCompound&&forEach(it.nodes(),function(Et){it.setParent(Et,wt(Et))}),it}setDefaultEdgeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultEdgeLabelFn=rt,this}edgeCount(){return this._edgeCount}edges(){return values(this._edgeObjs)}setPath(rt,it){var st=this,bt=arguments;return reduce(rt,function(wt,Et){return bt.length>1?st.setEdge(wt,Et,it):st.setEdge(wt,Et),Et}),this}setEdge(){var rt,it,st,bt,wt=!1,Et=arguments[0];typeof Et=="object"&&Et!==null&&"v"in Et?(rt=Et.v,it=Et.w,st=Et.name,arguments.length===2&&(bt=arguments[1],wt=!0)):(rt=Et,it=arguments[1],st=arguments[3],arguments.length>2&&(bt=arguments[2],wt=!0)),rt=""+rt,it=""+it,isUndefined(st)||(st=""+st);var kt=edgeArgsToId(this._isDirected,rt,it,st);if(has(this._edgeLabels,kt))return wt&&(this._edgeLabels[kt]=bt),this;if(!isUndefined(st)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(rt),this.setNode(it),this._edgeLabels[kt]=wt?bt:this._defaultEdgeLabelFn(rt,it,st);var Lt=edgeArgsToObj(this._isDirected,rt,it,st);return rt=Lt.v,it=Lt.w,Object.freeze(Lt),this._edgeObjs[kt]=Lt,incrementOrInitEntry(this._preds[it],rt),incrementOrInitEntry(this._sucs[rt],it),this._in[it][kt]=Lt,this._out[rt][kt]=Lt,this._edgeCount++,this}edge(rt,it,st){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st);return this._edgeLabels[bt]}hasEdge(rt,it,st){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st);return has(this._edgeLabels,bt)}removeEdge(rt,it,st){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st),wt=this._edgeObjs[bt];return wt&&(rt=wt.v,it=wt.w,delete this._edgeLabels[bt],delete this._edgeObjs[bt],decrementOrRemoveEntry(this._preds[it],rt),decrementOrRemoveEntry(this._sucs[rt],it),delete this._in[it][bt],delete this._out[rt][bt],this._edgeCount--),this}inEdges(rt,it){var st=this._in[rt];if(st){var bt=values(st);return it?filter(bt,function(wt){return wt.v===it}):bt}}outEdges(rt,it){var st=this._out[rt];if(st){var bt=values(st);return it?filter(bt,function(wt){return wt.w===it}):bt}}nodeEdges(rt,it){var st=this.inEdges(rt,it);if(st)return st.concat(this.outEdges(rt,it))}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;function incrementOrInitEntry(nt,rt){nt[rt]?nt[rt]++:nt[rt]=1}function decrementOrRemoveEntry(nt,rt){--nt[rt]||delete nt[rt]}function edgeArgsToId(nt,rt,it,st){var bt=""+rt,wt=""+it;if(!nt&&bt>wt){var Et=bt;bt=wt,wt=Et}return bt+EDGE_KEY_DELIM+wt+EDGE_KEY_DELIM+(isUndefined(st)?DEFAULT_EDGE_NAME:st)}function edgeArgsToObj(nt,rt,it,st){var bt=""+rt,wt=""+it;if(!nt&&bt>wt){var Et=bt;bt=wt,wt=Et}var kt={v:bt,w:wt};return st&&(kt.name=st),kt}function edgeObjToId(nt,rt){return edgeArgsToId(nt,rt.v,rt.w,rt.name)}class List{constructor(){var rt={};rt._next=rt._prev=rt,this._sentinel=rt}dequeue(){var rt=this._sentinel,it=rt._prev;if(it!==rt)return unlink(it),it}enqueue(rt){var it=this._sentinel;rt._prev&&rt._next&&unlink(rt),rt._next=it._next,it._next._prev=rt,it._next=rt,rt._prev=it}toString(){for(var rt=[],it=this._sentinel,st=it._prev;st!==it;)rt.push(JSON.stringify(st,filterOutLinks)),st=st._prev;return"["+rt.join(", ")+"]"}}function unlink(nt){nt._prev._next=nt._next,nt._next._prev=nt._prev,delete nt._next,delete nt._prev}function filterOutLinks(nt,rt){if(nt!=="_next"&&nt!=="_prev")return rt}var DEFAULT_WEIGHT_FN=constant(1);function greedyFAS(nt,rt){if(nt.nodeCount()<=1)return[];var it=buildState(nt,rt||DEFAULT_WEIGHT_FN),st=doGreedyFAS(it.graph,it.buckets,it.zeroIdx);return flatten$1(map$1(st,function(bt){return nt.outEdges(bt.v,bt.w)}))}function doGreedyFAS(nt,rt,it){for(var st=[],bt=rt[rt.length-1],wt=rt[0],Et;nt.nodeCount();){for(;Et=wt.dequeue();)removeNode(nt,rt,it,Et);for(;Et=bt.dequeue();)removeNode(nt,rt,it,Et);if(nt.nodeCount()){for(var kt=rt.length-2;kt>0;--kt)if(Et=rt[kt].dequeue(),Et){st=st.concat(removeNode(nt,rt,it,Et,!0));break}}}return st}function removeNode(nt,rt,it,st,bt){var wt=bt?[]:void 0;return forEach(nt.inEdges(st.v),function(Et){var kt=nt.edge(Et),Lt=nt.node(Et.v);bt&&wt.push({v:Et.v,w:Et.w}),Lt.out-=kt,assignBucket(rt,it,Lt)}),forEach(nt.outEdges(st.v),function(Et){var kt=nt.edge(Et),Lt=Et.w,Ot=nt.node(Lt);Ot.in-=kt,assignBucket(rt,it,Ot)}),nt.removeNode(st.v),wt}function buildState(nt,rt){var it=new Graph,st=0,bt=0;forEach(nt.nodes(),function(kt){it.setNode(kt,{v:kt,in:0,out:0})}),forEach(nt.edges(),function(kt){var Lt=it.edge(kt.v,kt.w)||0,Ot=rt(kt),Rt=Lt+Ot;it.setEdge(kt.v,kt.w,Rt),bt=Math.max(bt,it.node(kt.v).out+=Ot),st=Math.max(st,it.node(kt.w).in+=Ot)});var wt=range$1(bt+st+3).map(function(){return new List}),Et=st+1;return forEach(it.nodes(),function(kt){assignBucket(wt,Et,it.node(kt))}),{graph:it,buckets:wt,zeroIdx:Et}}function assignBucket(nt,rt,it){it.out?it.in?nt[it.out-it.in+rt].enqueue(it):nt[nt.length-1].enqueue(it):nt[0].enqueue(it)}function run$2(nt){var rt=nt.graph().acyclicer==="greedy"?greedyFAS(nt,it(nt)):dfsFAS(nt);forEach(rt,function(st){var bt=nt.edge(st);nt.removeEdge(st),bt.forwardName=st.name,bt.reversed=!0,nt.setEdge(st.w,st.v,bt,uniqueId("rev"))});function it(st){return function(bt){return st.edge(bt).weight}}}function dfsFAS(nt){var rt=[],it={},st={};function bt(wt){has(st,wt)||(st[wt]=!0,it[wt]=!0,forEach(nt.outEdges(wt),function(Et){has(it,Et.w)?rt.push(Et):bt(Et.w)}),delete it[wt])}return forEach(nt.nodes(),bt),rt}function undo$2(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.reversed){nt.removeEdge(rt);var st=it.forwardName;delete it.reversed,delete it.forwardName,nt.setEdge(rt.w,rt.v,it,st)}})}function addDummyNode(nt,rt,it,st){var bt;do bt=uniqueId(st);while(nt.hasNode(bt));return it.dummy=rt,nt.setNode(bt,it),bt}function simplify(nt){var rt=new Graph().setGraph(nt.graph());return forEach(nt.nodes(),function(it){rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){var st=rt.edge(it.v,it.w)||{weight:0,minlen:1},bt=nt.edge(it);rt.setEdge(it.v,it.w,{weight:st.weight+bt.weight,minlen:Math.max(st.minlen,bt.minlen)})}),rt}function asNonCompoundGraph(nt){var rt=new Graph({multigraph:nt.isMultigraph()}).setGraph(nt.graph());return forEach(nt.nodes(),function(it){nt.children(it).length||rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){rt.setEdge(it,nt.edge(it))}),rt}function intersectRect$3(nt,rt){var it=nt.x,st=nt.y,bt=rt.x-it,wt=rt.y-st,Et=nt.width/2,kt=nt.height/2;if(!bt&&!wt)throw new Error("Not possible to find intersection inside of the rectangle");var Lt,Ot;return Math.abs(wt)*Et>Math.abs(bt)*kt?(wt<0&&(kt=-kt),Lt=kt*bt/wt,Ot=kt):(bt<0&&(Et=-Et),Lt=Et,Ot=Et*wt/bt),{x:it+Lt,y:st+Ot}}function buildLayerMatrix(nt){var rt=map$1(range$1(maxRank(nt)+1),function(){return[]});return forEach(nt.nodes(),function(it){var st=nt.node(it),bt=st.rank;isUndefined(bt)||(rt[bt][st.order]=it)}),rt}function normalizeRanks(nt){var rt=min(map$1(nt.nodes(),function(it){return nt.node(it).rank}));forEach(nt.nodes(),function(it){var st=nt.node(it);has(st,"rank")&&(st.rank-=rt)})}function removeEmptyRanks(nt){var rt=min(map$1(nt.nodes(),function(wt){return nt.node(wt).rank})),it=[];forEach(nt.nodes(),function(wt){var Et=nt.node(wt).rank-rt;it[Et]||(it[Et]=[]),it[Et].push(wt)});var st=0,bt=nt.graph().nodeRankFactor;forEach(it,function(wt,Et){isUndefined(wt)&&Et%bt!==0?--st:st&&forEach(wt,function(kt){nt.node(kt).rank+=st})})}function addBorderNode$1(nt,rt,it,st){var bt={width:0,height:0};return arguments.length>=4&&(bt.rank=it,bt.order=st),addDummyNode(nt,"border",bt,rt)}function maxRank(nt){return max(map$1(nt.nodes(),function(rt){var it=nt.node(rt).rank;if(!isUndefined(it))return it}))}function partition(nt,rt){var it={lhs:[],rhs:[]};return forEach(nt,function(st){rt(st)?it.lhs.push(st):it.rhs.push(st)}),it}function time(nt,rt){var it=now$1();try{return rt()}finally{console.log(nt+" time: "+(now$1()-it)+"ms")}}function notime(nt,rt){return rt()}function addBorderSegments(nt){function rt(it){var st=nt.children(it),bt=nt.node(it);if(st.length&&forEach(st,rt),has(bt,"minRank")){bt.borderLeft=[],bt.borderRight=[];for(var wt=bt.minRank,Et=bt.maxRank+1;wt<Et;++wt)addBorderNode(nt,"borderLeft","_bl",it,bt,wt),addBorderNode(nt,"borderRight","_br",it,bt,wt)}}forEach(nt.children(),rt)}function addBorderNode(nt,rt,it,st,bt,wt){var Et={width:0,height:0,rank:wt,borderType:rt},kt=bt[rt][wt-1],Lt=addDummyNode(nt,"border",Et,it);bt[rt][wt]=Lt,nt.setParent(Lt,st),kt&&nt.setEdge(kt,Lt,{weight:1})}function adjust(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="lr"||rt==="rl")&&swapWidthHeight(nt)}function undo$1(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="bt"||rt==="rl")&&reverseY(nt),(rt==="lr"||rt==="rl")&&(swapXY(nt),swapWidthHeight(nt))}function swapWidthHeight(nt){forEach(nt.nodes(),function(rt){swapWidthHeightOne(nt.node(rt))}),forEach(nt.edges(),function(rt){swapWidthHeightOne(nt.edge(rt))})}function swapWidthHeightOne(nt){var rt=nt.width;nt.width=nt.height,nt.height=rt}function reverseY(nt){forEach(nt.nodes(),function(rt){reverseYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,reverseYOne),has(it,"y")&&reverseYOne(it)})}function reverseYOne(nt){nt.y=-nt.y}function swapXY(nt){forEach(nt.nodes(),function(rt){swapXYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,swapXYOne),has(it,"x")&&swapXYOne(it)})}function swapXYOne(nt){var rt=nt.x;nt.x=nt.y,nt.y=rt}function run$1(nt){var rt=addDummyNode(nt,"root",{},"_root"),it=treeDepths(nt),st=max(values(it))-1,bt=2*st+1;nt.graph().nestingRoot=rt,forEach(nt.edges(),function(Et){nt.edge(Et).minlen*=bt});var wt=sumWeights(nt)+1;forEach(nt.children(),function(Et){dfs$1(nt,rt,bt,wt,st,it,Et)}),nt.graph().nodeRankFactor=bt}function dfs$1(nt,rt,it,st,bt,wt,Et){var kt=nt.children(Et);if(!kt.length){Et!==rt&&nt.setEdge(rt,Et,{weight:0,minlen:it});return}var Lt=addBorderNode$1(nt,"_bt"),Ot=addBorderNode$1(nt,"_bb"),Rt=nt.node(Et);nt.setParent(Lt,Et),Rt.borderTop=Lt,nt.setParent(Ot,Et),Rt.borderBottom=Ot,forEach(kt,function(Dt){dfs$1(nt,rt,it,st,bt,wt,Dt);var Bt=nt.node(Dt),Ft=Bt.borderTop?Bt.borderTop:Dt,Yt=Bt.borderBottom?Bt.borderBottom:Dt,Jt=Bt.borderTop?st:2*st,Wt=Ft!==Yt?1:bt-wt[Et]+1;nt.setEdge(Lt,Ft,{weight:Jt,minlen:Wt,nestingEdge:!0}),nt.setEdge(Yt,Ot,{weight:Jt,minlen:Wt,nestingEdge:!0})}),nt.parent(Et)||nt.setEdge(rt,Lt,{weight:0,minlen:bt+wt[Et]})}function treeDepths(nt){var rt={};function it(st,bt){var wt=nt.children(st);wt&&wt.length&&forEach(wt,function(Et){it(Et,bt+1)}),rt[st]=bt}return forEach(nt.children(),function(st){it(st,1)}),rt}function sumWeights(nt){return reduce(nt.edges(),function(rt,it){return rt+nt.edge(it).weight},0)}function cleanup(nt){var rt=nt.graph();nt.removeNode(rt.nestingRoot),delete rt.nestingRoot,forEach(nt.edges(),function(it){var st=nt.edge(it);st.nestingEdge&&nt.removeEdge(it)})}function addSubgraphConstraints(nt,rt,it){var st={},bt;forEach(it,function(wt){for(var Et=nt.parent(wt),kt,Lt;Et;){if(kt=nt.parent(Et),kt?(Lt=st[kt],st[kt]=Et):(Lt=bt,bt=Et),Lt&&Lt!==Et){rt.setEdge(Lt,Et);return}Et=kt}})}function buildLayerGraph(nt,rt,it){var st=createRootNode(nt),bt=new Graph({compound:!0}).setGraph({root:st}).setDefaultNodeLabel(function(wt){return nt.node(wt)});return forEach(nt.nodes(),function(wt){var Et=nt.node(wt),kt=nt.parent(wt);(Et.rank===rt||Et.minRank<=rt&&rt<=Et.maxRank)&&(bt.setNode(wt),bt.setParent(wt,kt||st),forEach(nt[it](wt),function(Lt){var Ot=Lt.v===wt?Lt.w:Lt.v,Rt=bt.edge(Ot,wt),Dt=isUndefined(Rt)?0:Rt.weight;bt.setEdge(Ot,wt,{weight:nt.edge(Lt).weight+Dt})}),has(Et,"minRank")&&bt.setNode(wt,{borderLeft:Et.borderLeft[rt],borderRight:Et.borderRight[rt]}))}),bt}function createRootNode(nt){for(var rt;nt.hasNode(rt=uniqueId("_root")););return rt}function crossCount(nt,rt){for(var it=0,st=1;st<rt.length;++st)it+=twoLayerCrossCount(nt,rt[st-1],rt[st]);return it}function twoLayerCrossCount(nt,rt,it){for(var st=zipObject(it,map$1(it,function(Ot,Rt){return Rt})),bt=flatten$1(map$1(rt,function(Ot){return sortBy$1(map$1(nt.outEdges(Ot),function(Rt){return{pos:st[Rt.w],weight:nt.edge(Rt).weight}}),"pos")})),wt=1;wt<it.length;)wt<<=1;var Et=2*wt-1;wt-=1;var kt=map$1(new Array(Et),function(){return 0}),Lt=0;return forEach(bt.forEach(function(Ot){var Rt=Ot.pos+wt;kt[Rt]+=Ot.weight;for(var Dt=0;Rt>0;)Rt%2&&(Dt+=kt[Rt+1]),Rt=Rt-1>>1,kt[Rt]+=Ot.weight;Lt+=Ot.weight*Dt})),Lt}function initOrder(nt){var rt={},it=filter(nt.nodes(),function(kt){return!nt.children(kt).length}),st=max(map$1(it,function(kt){return nt.node(kt).rank})),bt=map$1(range$1(st+1),function(){return[]});function wt(kt){if(!has(rt,kt)){rt[kt]=!0;var Lt=nt.node(kt);bt[Lt.rank].push(kt),forEach(nt.successors(kt),wt)}}var Et=sortBy$1(it,function(kt){return nt.node(kt).rank});return forEach(Et,wt),bt}function barycenter(nt,rt){return map$1(rt,function(it){var st=nt.inEdges(it);if(st.length){var bt=reduce(st,function(wt,Et){var kt=nt.edge(Et),Lt=nt.node(Et.v);return{sum:wt.sum+kt.weight*Lt.order,weight:wt.weight+kt.weight}},{sum:0,weight:0});return{v:it,barycenter:bt.sum/bt.weight,weight:bt.weight}}else return{v:it}})}function resolveConflicts(nt,rt){var it={};forEach(nt,function(bt,wt){var Et=it[bt.v]={indegree:0,in:[],out:[],vs:[bt.v],i:wt};isUndefined(bt.barycenter)||(Et.barycenter=bt.barycenter,Et.weight=bt.weight)}),forEach(rt.edges(),function(bt){var wt=it[bt.v],Et=it[bt.w];!isUndefined(wt)&&!isUndefined(Et)&&(Et.indegree++,wt.out.push(it[bt.w]))});var st=filter(it,function(bt){return!bt.indegree});return doResolveConflicts(st)}function doResolveConflicts(nt){var rt=[];function it(wt){return function(Et){Et.merged||(isUndefined(Et.barycenter)||isUndefined(wt.barycenter)||Et.barycenter>=wt.barycenter)&&mergeEntries(wt,Et)}}function st(wt){return function(Et){Et.in.push(wt),--Et.indegree===0&&nt.push(Et)}}for(;nt.length;){var bt=nt.pop();rt.push(bt),forEach(bt.in.reverse(),it(bt)),forEach(bt.out,st(bt))}return map$1(filter(rt,function(wt){return!wt.merged}),function(wt){return pick$1(wt,["vs","i","barycenter","weight"])})}function mergeEntries(nt,rt){var it=0,st=0;nt.weight&&(it+=nt.barycenter*nt.weight,st+=nt.weight),rt.weight&&(it+=rt.barycenter*rt.weight,st+=rt.weight),nt.vs=rt.vs.concat(nt.vs),nt.barycenter=it/st,nt.weight=st,nt.i=Math.min(rt.i,nt.i),rt.merged=!0}function sort(nt,rt){var it=partition(nt,function(Rt){return has(Rt,"barycenter")}),st=it.lhs,bt=sortBy$1(it.rhs,function(Rt){return-Rt.i}),wt=[],Et=0,kt=0,Lt=0;st.sort(compareWithBias(!!rt)),Lt=consumeUnsortable(wt,bt,Lt),forEach(st,function(Rt){Lt+=Rt.vs.length,wt.push(Rt.vs),Et+=Rt.barycenter*Rt.weight,kt+=Rt.weight,Lt=consumeUnsortable(wt,bt,Lt)});var Ot={vs:flatten$1(wt)};return kt&&(Ot.barycenter=Et/kt,Ot.weight=kt),Ot}function consumeUnsortable(nt,rt,it){for(var st;rt.length&&(st=last(rt)).i<=it;)rt.pop(),nt.push(st.vs),it++;return it}function compareWithBias(nt){return function(rt,it){return rt.barycenter<it.barycenter?-1:rt.barycenter>it.barycenter?1:nt?it.i-rt.i:rt.i-it.i}}function sortSubgraph(nt,rt,it,st){var bt=nt.children(rt),wt=nt.node(rt),Et=wt?wt.borderLeft:void 0,kt=wt?wt.borderRight:void 0,Lt={};Et&&(bt=filter(bt,function(Yt){return Yt!==Et&&Yt!==kt}));var Ot=barycenter(nt,bt);forEach(Ot,function(Yt){if(nt.children(Yt.v).length){var Jt=sortSubgraph(nt,Yt.v,it,st);Lt[Yt.v]=Jt,has(Jt,"barycenter")&&mergeBarycenters(Yt,Jt)}});var Rt=resolveConflicts(Ot,it);expandSubgraphs(Rt,Lt);var Dt=sort(Rt,st);if(Et&&(Dt.vs=flatten$1([Et,Dt.vs,kt]),nt.predecessors(Et).length)){var Bt=nt.node(nt.predecessors(Et)[0]),Ft=nt.node(nt.predecessors(kt)[0]);has(Dt,"barycenter")||(Dt.barycenter=0,Dt.weight=0),Dt.barycenter=(Dt.barycenter*Dt.weight+Bt.order+Ft.order)/(Dt.weight+2),Dt.weight+=2}return Dt}function expandSubgraphs(nt,rt){forEach(nt,function(it){it.vs=flatten$1(it.vs.map(function(st){return rt[st]?rt[st].vs:st}))})}function mergeBarycenters(nt,rt){isUndefined(nt.barycenter)?(nt.barycenter=rt.barycenter,nt.weight=rt.weight):(nt.barycenter=(nt.barycenter*nt.weight+rt.barycenter*rt.weight)/(nt.weight+rt.weight),nt.weight+=rt.weight)}function order(nt){var rt=maxRank(nt),it=buildLayerGraphs(nt,range$1(1,rt+1),"inEdges"),st=buildLayerGraphs(nt,range$1(rt-1,-1,-1),"outEdges"),bt=initOrder(nt);assignOrder(nt,bt);for(var wt=Number.POSITIVE_INFINITY,Et,kt=0,Lt=0;Lt<4;++kt,++Lt){sweepLayerGraphs(kt%2?it:st,kt%4>=2),bt=buildLayerMatrix(nt);var Ot=crossCount(nt,bt);Ot<wt&&(Lt=0,Et=cloneDeep(bt),wt=Ot)}assignOrder(nt,Et)}function buildLayerGraphs(nt,rt,it){return map$1(rt,function(st){return buildLayerGraph(nt,st,it)})}function sweepLayerGraphs(nt,rt){var it=new Graph;forEach(nt,function(st){var bt=st.graph().root,wt=sortSubgraph(st,bt,it,rt);forEach(wt.vs,function(Et,kt){st.node(Et).order=kt}),addSubgraphConstraints(st,it,wt.vs)})}function assignOrder(nt,rt){forEach(rt,function(it){forEach(it,function(st,bt){nt.node(st).order=bt})})}function parentDummyChains(nt){var rt=postorder$1(nt);forEach(nt.graph().dummyChains,function(it){for(var st=nt.node(it),bt=st.edgeObj,wt=findPath(nt,rt,bt.v,bt.w),Et=wt.path,kt=wt.lca,Lt=0,Ot=Et[Lt],Rt=!0;it!==bt.w;){if(st=nt.node(it),Rt){for(;(Ot=Et[Lt])!==kt&&nt.node(Ot).maxRank<st.rank;)Lt++;Ot===kt&&(Rt=!1)}if(!Rt){for(;Lt<Et.length-1&&nt.node(Ot=Et[Lt+1]).minRank<=st.rank;)Lt++;Ot=Et[Lt]}nt.setParent(it,Ot),it=nt.successors(it)[0]}})}function findPath(nt,rt,it,st){var bt=[],wt=[],Et=Math.min(rt[it].low,rt[st].low),kt=Math.max(rt[it].lim,rt[st].lim),Lt,Ot;Lt=it;do Lt=nt.parent(Lt),bt.push(Lt);while(Lt&&(rt[Lt].low>Et||kt>rt[Lt].lim));for(Ot=Lt,Lt=st;(Lt=nt.parent(Lt))!==Ot;)wt.push(Lt);return{path:bt.concat(wt.reverse()),lca:Ot}}function postorder$1(nt){var rt={},it=0;function st(bt){var wt=it;forEach(nt.children(bt),st),rt[bt]={low:wt,lim:it++}}return forEach(nt.children(),st),rt}function findType1Conflicts(nt,rt){var it={};function st(bt,wt){var Et=0,kt=0,Lt=bt.length,Ot=last(wt);return forEach(wt,function(Rt,Dt){var Bt=findOtherInnerSegmentNode(nt,Rt),Ft=Bt?nt.node(Bt).order:Lt;(Bt||Rt===Ot)&&(forEach(wt.slice(kt,Dt+1),function(Yt){forEach(nt.predecessors(Yt),function(Jt){var Wt=nt.node(Jt),Qt=Wt.order;(Qt<Et||Ft<Qt)&&!(Wt.dummy&&nt.node(Yt).dummy)&&addConflict(it,Jt,Yt)})}),kt=Dt+1,Et=Ft)}),wt}return reduce(rt,st),it}function findType2Conflicts(nt,rt){var it={};function st(wt,Et,kt,Lt,Ot){var Rt;forEach(range$1(Et,kt),function(Dt){Rt=wt[Dt],nt.node(Rt).dummy&&forEach(nt.predecessors(Rt),function(Bt){var Ft=nt.node(Bt);Ft.dummy&&(Ft.order<Lt||Ft.order>Ot)&&addConflict(it,Bt,Rt)})})}function bt(wt,Et){var kt=-1,Lt,Ot=0;return forEach(Et,function(Rt,Dt){if(nt.node(Rt).dummy==="border"){var Bt=nt.predecessors(Rt);Bt.length&&(Lt=nt.node(Bt[0]).order,st(Et,Ot,Dt,kt,Lt),Ot=Dt,kt=Lt)}st(Et,Ot,Et.length,Lt,wt.length)}),Et}return reduce(rt,bt),it}function findOtherInnerSegmentNode(nt,rt){if(nt.node(rt).dummy)return find$1(nt.predecessors(rt),function(it){return nt.node(it).dummy})}function addConflict(nt,rt,it){if(rt>it){var st=rt;rt=it,it=st}var bt=nt[rt];bt||(nt[rt]=bt={}),bt[it]=!0}function hasConflict(nt,rt,it){if(rt>it){var st=rt;rt=it,it=st}return has(nt[rt],it)}function verticalAlignment(nt,rt,it,st){var bt={},wt={},Et={};return forEach(rt,function(kt){forEach(kt,function(Lt,Ot){bt[Lt]=Lt,wt[Lt]=Lt,Et[Lt]=Ot})}),forEach(rt,function(kt){var Lt=-1;forEach(kt,function(Ot){var Rt=st(Ot);if(Rt.length){Rt=sortBy$1(Rt,function(Jt){return Et[Jt]});for(var Dt=(Rt.length-1)/2,Bt=Math.floor(Dt),Ft=Math.ceil(Dt);Bt<=Ft;++Bt){var Yt=Rt[Bt];wt[Ot]===Ot&&Lt<Et[Yt]&&!hasConflict(it,Ot,Yt)&&(wt[Yt]=Ot,wt[Ot]=bt[Ot]=bt[Yt],Lt=Et[Yt])}}})}),{root:bt,align:wt}}function horizontalCompaction(nt,rt,it,st,bt){var wt={},Et=buildBlockGraph(nt,rt,it,bt),kt=bt?"borderLeft":"borderRight";function Lt(Dt,Bt){for(var Ft=Et.nodes(),Yt=Ft.pop(),Jt={};Yt;)Jt[Yt]?Dt(Yt):(Jt[Yt]=!0,Ft.push(Yt),Ft=Ft.concat(Bt(Yt))),Yt=Ft.pop()}function Ot(Dt){wt[Dt]=Et.inEdges(Dt).reduce(function(Bt,Ft){return Math.max(Bt,wt[Ft.v]+Et.edge(Ft))},0)}function Rt(Dt){var Bt=Et.outEdges(Dt).reduce(function(Yt,Jt){return Math.min(Yt,wt[Jt.w]-Et.edge(Jt))},Number.POSITIVE_INFINITY),Ft=nt.node(Dt);Bt!==Number.POSITIVE_INFINITY&&Ft.borderType!==kt&&(wt[Dt]=Math.max(wt[Dt],Bt))}return Lt(Ot,Et.predecessors.bind(Et)),Lt(Rt,Et.successors.bind(Et)),forEach(st,function(Dt){wt[Dt]=wt[it[Dt]]}),wt}function buildBlockGraph(nt,rt,it,st){var bt=new Graph,wt=nt.graph(),Et=sep(wt.nodesep,wt.edgesep,st);return forEach(rt,function(kt){var Lt;forEach(kt,function(Ot){var Rt=it[Ot];if(bt.setNode(Rt),Lt){var Dt=it[Lt],Bt=bt.edge(Dt,Rt);bt.setEdge(Dt,Rt,Math.max(Et(nt,Ot,Lt),Bt||0))}Lt=Ot})}),bt}function findSmallestWidthAlignment(nt,rt){return minBy(values(rt),function(it){var st=Number.NEGATIVE_INFINITY,bt=Number.POSITIVE_INFINITY;return forIn(it,function(wt,Et){var kt=width$1(nt,Et)/2;st=Math.max(wt+kt,st),bt=Math.min(wt-kt,bt)}),st-bt})}function alignCoordinates(nt,rt){var it=values(rt),st=min(it),bt=max(it);forEach(["u","d"],function(wt){forEach(["l","r"],function(Et){var kt=wt+Et,Lt=nt[kt],Ot;if(Lt!==rt){var Rt=values(Lt);Ot=Et==="l"?st-min(Rt):bt-max(Rt),Ot&&(nt[kt]=mapValues(Lt,function(Dt){return Dt+Ot}))}})})}function balance(nt,rt){return mapValues(nt.ul,function(it,st){if(rt)return nt[rt.toLowerCase()][st];var bt=sortBy$1(map$1(nt,st));return(bt[1]+bt[2])/2})}function positionX(nt){var rt=buildLayerMatrix(nt),it=merge$3(findType1Conflicts(nt,rt),findType2Conflicts(nt,rt)),st={},bt;forEach(["u","d"],function(Et){bt=Et==="u"?rt:values(rt).reverse(),forEach(["l","r"],function(kt){kt==="r"&&(bt=map$1(bt,function(Dt){return values(Dt).reverse()}));var Lt=(Et==="u"?nt.predecessors:nt.successors).bind(nt),Ot=verticalAlignment(nt,bt,it,Lt),Rt=horizontalCompaction(nt,bt,Ot.root,Ot.align,kt==="r");kt==="r"&&(Rt=mapValues(Rt,function(Dt){return-Dt})),st[Et+kt]=Rt})});var wt=findSmallestWidthAlignment(nt,st);return alignCoordinates(st,wt),balance(st,nt.graph().align)}function sep(nt,rt,it){return function(st,bt,wt){var Et=st.node(bt),kt=st.node(wt),Lt=0,Ot;if(Lt+=Et.width/2,has(Et,"labelpos"))switch(Et.labelpos.toLowerCase()){case"l":Ot=-Et.width/2;break;case"r":Ot=Et.width/2;break}if(Ot&&(Lt+=it?Ot:-Ot),Ot=0,Lt+=(Et.dummy?rt:nt)/2,Lt+=(kt.dummy?rt:nt)/2,Lt+=kt.width/2,has(kt,"labelpos"))switch(kt.labelpos.toLowerCase()){case"l":Ot=kt.width/2;break;case"r":Ot=-kt.width/2;break}return Ot&&(Lt+=it?Ot:-Ot),Ot=0,Lt}}function width$1(nt,rt){return nt.node(rt).width}function position(nt){nt=asNonCompoundGraph(nt),positionY(nt),forEach(positionX(nt),function(rt,it){nt.node(it).x=rt})}function positionY(nt){var rt=buildLayerMatrix(nt),it=nt.graph().ranksep,st=0;forEach(rt,function(bt){var wt=max(map$1(bt,function(Et){return nt.node(Et).height}));forEach(bt,function(Et){nt.node(Et).y=st+wt/2}),st+=wt+it})}function layout(nt,rt){var it=rt&&rt.debugTiming?time:notime;it("layout",function(){var st=it("  buildLayoutGraph",function(){return buildLayoutGraph(nt)});it("  runLayout",function(){runLayout(st,it)}),it("  updateInputGraph",function(){updateInputGraph(nt,st)})})}function runLayout(nt,rt){rt("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(nt)}),rt("    removeSelfEdges",function(){removeSelfEdges(nt)}),rt("    acyclic",function(){run$2(nt)}),rt("    nestingGraph.run",function(){run$1(nt)}),rt("    rank",function(){rank(asNonCompoundGraph(nt))}),rt("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(nt)}),rt("    removeEmptyRanks",function(){removeEmptyRanks(nt)}),rt("    nestingGraph.cleanup",function(){cleanup(nt)}),rt("    normalizeRanks",function(){normalizeRanks(nt)}),rt("    assignRankMinMax",function(){assignRankMinMax(nt)}),rt("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(nt)}),rt("    normalize.run",function(){run(nt)}),rt("    parentDummyChains",function(){parentDummyChains(nt)}),rt("    addBorderSegments",function(){addBorderSegments(nt)}),rt("    order",function(){order(nt)}),rt("    insertSelfEdges",function(){insertSelfEdges(nt)}),rt("    adjustCoordinateSystem",function(){adjust(nt)}),rt("    position",function(){position(nt)}),rt("    positionSelfEdges",function(){positionSelfEdges(nt)}),rt("    removeBorderNodes",function(){removeBorderNodes(nt)}),rt("    normalize.undo",function(){undo(nt)}),rt("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(nt)}),rt("    undoCoordinateSystem",function(){undo$1(nt)}),rt("    translateGraph",function(){translateGraph(nt)}),rt("    assignNodeIntersects",function(){assignNodeIntersects(nt)}),rt("    reversePoints",function(){reversePointsForReversedEdges(nt)}),rt("    acyclic.undo",function(){undo$2(nt)})}function updateInputGraph(nt,rt){forEach(nt.nodes(),function(it){var st=nt.node(it),bt=rt.node(it);st&&(st.x=bt.x,st.y=bt.y,rt.children(it).length&&(st.width=bt.width,st.height=bt.height))}),forEach(nt.edges(),function(it){var st=nt.edge(it),bt=rt.edge(it);st.points=bt.points,has(bt,"x")&&(st.x=bt.x,st.y=bt.y)}),nt.graph().width=rt.graph().width,nt.graph().height=rt.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(nt){var rt=new Graph({multigraph:!0,compound:!0}),it=canonicalize$1(nt.graph());return rt.setGraph(merge$3({},graphDefaults,selectNumberAttrs(it,graphNumAttrs),pick$1(it,graphAttrs))),forEach(nt.nodes(),function(st){var bt=canonicalize$1(nt.node(st));rt.setNode(st,defaults$1(selectNumberAttrs(bt,nodeNumAttrs),nodeDefaults)),rt.setParent(st,nt.parent(st))}),forEach(nt.edges(),function(st){var bt=canonicalize$1(nt.edge(st));rt.setEdge(st,merge$3({},edgeDefaults,selectNumberAttrs(bt,edgeNumAttrs),pick$1(bt,edgeAttrs)))}),rt}function makeSpaceForEdgeLabels(nt){var rt=nt.graph();rt.ranksep/=2,forEach(nt.edges(),function(it){var st=nt.edge(it);st.minlen*=2,st.labelpos.toLowerCase()!=="c"&&(rt.rankdir==="TB"||rt.rankdir==="BT"?st.width+=st.labeloffset:st.height+=st.labeloffset)})}function injectEdgeLabelProxies(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.width&&it.height){var st=nt.node(rt.v),bt=nt.node(rt.w),wt={rank:(bt.rank-st.rank)/2+st.rank,e:rt};addDummyNode(nt,"edge-proxy",wt,"_ep")}})}function assignRankMinMax(nt){var rt=0;forEach(nt.nodes(),function(it){var st=nt.node(it);st.borderTop&&(st.minRank=nt.node(st.borderTop).rank,st.maxRank=nt.node(st.borderBottom).rank,rt=max(rt,st.maxRank))}),nt.graph().maxRank=rt}function removeEdgeLabelProxies(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);it.dummy==="edge-proxy"&&(nt.edge(it.e).labelRank=it.rank,nt.removeNode(rt))})}function translateGraph(nt){var rt=Number.POSITIVE_INFINITY,it=0,st=Number.POSITIVE_INFINITY,bt=0,wt=nt.graph(),Et=wt.marginx||0,kt=wt.marginy||0;function Lt(Ot){var Rt=Ot.x,Dt=Ot.y,Bt=Ot.width,Ft=Ot.height;rt=Math.min(rt,Rt-Bt/2),it=Math.max(it,Rt+Bt/2),st=Math.min(st,Dt-Ft/2),bt=Math.max(bt,Dt+Ft/2)}forEach(nt.nodes(),function(Ot){Lt(nt.node(Ot))}),forEach(nt.edges(),function(Ot){var Rt=nt.edge(Ot);has(Rt,"x")&&Lt(Rt)}),rt-=Et,st-=kt,forEach(nt.nodes(),function(Ot){var Rt=nt.node(Ot);Rt.x-=rt,Rt.y-=st}),forEach(nt.edges(),function(Ot){var Rt=nt.edge(Ot);forEach(Rt.points,function(Dt){Dt.x-=rt,Dt.y-=st}),has(Rt,"x")&&(Rt.x-=rt),has(Rt,"y")&&(Rt.y-=st)}),wt.width=it-rt+Et,wt.height=bt-st+kt}function assignNodeIntersects(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt),st=nt.node(rt.v),bt=nt.node(rt.w),wt,Et;it.points?(wt=it.points[0],Et=it.points[it.points.length-1]):(it.points=[],wt=bt,Et=st),it.points.unshift(intersectRect$3(st,wt)),it.points.push(intersectRect$3(bt,Et))})}function fixupEdgeLabelCoords(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function reversePointsForReversedEdges(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);it.reversed&&it.points.reverse()})}function removeBorderNodes(nt){forEach(nt.nodes(),function(rt){if(nt.children(rt).length){var it=nt.node(rt),st=nt.node(it.borderTop),bt=nt.node(it.borderBottom),wt=nt.node(last(it.borderLeft)),Et=nt.node(last(it.borderRight));it.width=Math.abs(Et.x-wt.x),it.height=Math.abs(bt.y-st.y),it.x=wt.x+it.width/2,it.y=st.y+it.height/2}}),forEach(nt.nodes(),function(rt){nt.node(rt).dummy==="border"&&nt.removeNode(rt)})}function removeSelfEdges(nt){forEach(nt.edges(),function(rt){if(rt.v===rt.w){var it=nt.node(rt.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:rt,label:nt.edge(rt)}),nt.removeEdge(rt)}})}function insertSelfEdges(nt){var rt=buildLayerMatrix(nt);forEach(rt,function(it){var st=0;forEach(it,function(bt,wt){var Et=nt.node(bt);Et.order=wt+st,forEach(Et.selfEdges,function(kt){addDummyNode(nt,"selfedge",{width:kt.label.width,height:kt.label.height,rank:Et.rank,order:wt+ ++st,e:kt.e,label:kt.label},"_se")}),delete Et.selfEdges})})}function positionSelfEdges(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);if(it.dummy==="selfedge"){var st=nt.node(it.e.v),bt=st.x+st.width/2,wt=st.y,Et=it.x-bt,kt=st.height/2;nt.setEdge(it.e,it.label),nt.removeNode(rt),it.label.points=[{x:bt+2*Et/3,y:wt-kt},{x:bt+5*Et/6,y:wt-kt},{x:bt+Et,y:wt},{x:bt+5*Et/6,y:wt+kt},{x:bt+2*Et/3,y:wt+kt}],it.label.x=it.x,it.label.y=it.y}})}function selectNumberAttrs(nt,rt){return mapValues(pick$1(nt,rt),Number)}function canonicalize$1(nt){var rt={};return forEach(nt,function(it,st){rt[st.toLowerCase()]=it}),rt}function run(nt){nt.graph().dummyChains=[],forEach(nt.edges(),function(rt){normalizeEdge(nt,rt)})}function normalizeEdge(nt,rt){var it=rt.v,st=nt.node(it).rank,bt=rt.w,wt=nt.node(bt).rank,Et=rt.name,kt=nt.edge(rt),Lt=kt.labelRank;if(wt!==st+1){nt.removeEdge(rt);var Ot,Rt,Dt;for(Dt=0,++st;st<wt;++Dt,++st)kt.points=[],Rt={width:0,height:0,edgeLabel:kt,edgeObj:rt,rank:st},Ot=addDummyNode(nt,"edge",Rt,"_d"),st===Lt&&(Rt.width=kt.width,Rt.height=kt.height,Rt.dummy="edge-label",Rt.labelpos=kt.labelpos),nt.setEdge(it,Ot,{weight:kt.weight},Et),Dt===0&&nt.graph().dummyChains.push(Ot),it=Ot;nt.setEdge(it,bt,{weight:kt.weight},Et)}}function undo(nt){forEach(nt.graph().dummyChains,function(rt){var it=nt.node(rt),st=it.edgeLabel,bt;for(nt.setEdge(it.edgeObj,st);it.dummy;)bt=nt.successors(rt)[0],nt.removeNode(rt),st.points.push({x:it.x,y:it.y}),it.dummy==="edge-label"&&(st.x=it.x,st.y=it.y,st.width=it.width,st.height=it.height),rt=bt,it=nt.node(rt)})}function longestPath(nt){var rt={};function it(st){var bt=nt.node(st);if(has(rt,st))return bt.rank;rt[st]=!0;var wt=min(map$1(nt.outEdges(st),function(Et){return it(Et.w)-nt.edge(Et).minlen}));return(wt===Number.POSITIVE_INFINITY||wt===void 0||wt===null)&&(wt=0),bt.rank=wt}forEach(nt.sources(),it)}function slack(nt,rt){return nt.node(rt.w).rank-nt.node(rt.v).rank-nt.edge(rt).minlen}function feasibleTree(nt){var rt=new Graph({directed:!1}),it=nt.nodes()[0],st=nt.nodeCount();rt.setNode(it,{});for(var bt,wt;tightTree(rt,nt)<st;)bt=findMinSlackEdge(rt,nt),wt=rt.hasNode(bt.v)?slack(nt,bt):-slack(nt,bt),shiftRanks(rt,nt,wt);return rt}function tightTree(nt,rt){function it(st){forEach(rt.nodeEdges(st),function(bt){var wt=bt.v,Et=st===wt?bt.w:wt;!nt.hasNode(Et)&&!slack(rt,bt)&&(nt.setNode(Et,{}),nt.setEdge(st,Et,{}),it(Et))})}return forEach(nt.nodes(),it),nt.nodeCount()}function findMinSlackEdge(nt,rt){return minBy(rt.edges(),function(it){if(nt.hasNode(it.v)!==nt.hasNode(it.w))return slack(rt,it)})}function shiftRanks(nt,rt,it){forEach(nt.nodes(),function(st){rt.node(st).rank+=it})}function CycleException(){}CycleException.prototype=new Error;function dfs(nt,rt,it){isArray$1(rt)||(rt=[rt]);var st=(nt.isDirected()?nt.successors:nt.neighbors).bind(nt),bt=[],wt={};return forEach(rt,function(Et){if(!nt.hasNode(Et))throw new Error("Graph does not have node: "+Et);doDfs(nt,Et,it==="post",wt,st,bt)}),bt}function doDfs(nt,rt,it,st,bt,wt){has(st,rt)||(st[rt]=!0,it||wt.push(rt),forEach(bt(rt),function(Et){doDfs(nt,Et,it,st,bt,wt)}),it&&wt.push(rt))}function postorder(nt,rt){return dfs(nt,rt,"post")}function preorder(nt,rt){return dfs(nt,rt,"pre")}networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex(nt){nt=simplify(nt),longestPath(nt);var rt=feasibleTree(nt);initLowLimValues(rt),initCutValues(rt,nt);for(var it,st;it=leaveEdge(rt);)st=enterEdge(rt,nt,it),exchangeEdges(rt,nt,it,st)}function initCutValues(nt,rt){var it=postorder(nt,nt.nodes());it=it.slice(0,it.length-1),forEach(it,function(st){assignCutValue(nt,rt,st)})}function assignCutValue(nt,rt,it){var st=nt.node(it),bt=st.parent;nt.edge(it,bt).cutvalue=calcCutValue(nt,rt,it)}function calcCutValue(nt,rt,it){var st=nt.node(it),bt=st.parent,wt=!0,Et=rt.edge(it,bt),kt=0;return Et||(wt=!1,Et=rt.edge(bt,it)),kt=Et.weight,forEach(rt.nodeEdges(it),function(Lt){var Ot=Lt.v===it,Rt=Ot?Lt.w:Lt.v;if(Rt!==bt){var Dt=Ot===wt,Bt=rt.edge(Lt).weight;if(kt+=Dt?Bt:-Bt,isTreeEdge(nt,it,Rt)){var Ft=nt.edge(it,Rt).cutvalue;kt+=Dt?-Ft:Ft}}}),kt}function initLowLimValues(nt,rt){arguments.length<2&&(rt=nt.nodes()[0]),dfsAssignLowLim(nt,{},1,rt)}function dfsAssignLowLim(nt,rt,it,st,bt){var wt=it,Et=nt.node(st);return rt[st]=!0,forEach(nt.neighbors(st),function(kt){has(rt,kt)||(it=dfsAssignLowLim(nt,rt,it,kt,st))}),Et.low=wt,Et.lim=it++,bt?Et.parent=bt:delete Et.parent,it}function leaveEdge(nt){return find$1(nt.edges(),function(rt){return nt.edge(rt).cutvalue<0})}function enterEdge(nt,rt,it){var st=it.v,bt=it.w;rt.hasEdge(st,bt)||(st=it.w,bt=it.v);var wt=nt.node(st),Et=nt.node(bt),kt=wt,Lt=!1;wt.lim>Et.lim&&(kt=Et,Lt=!0);var Ot=filter(rt.edges(),function(Rt){return Lt===isDescendant$1(nt,nt.node(Rt.v),kt)&&Lt!==isDescendant$1(nt,nt.node(Rt.w),kt)});return minBy(Ot,function(Rt){return slack(rt,Rt)})}function exchangeEdges(nt,rt,it,st){var bt=it.v,wt=it.w;nt.removeEdge(bt,wt),nt.setEdge(st.v,st.w,{}),initLowLimValues(nt),initCutValues(nt,rt),updateRanks(nt,rt)}function updateRanks(nt,rt){var it=find$1(nt.nodes(),function(bt){return!rt.node(bt).parent}),st=preorder(nt,it);st=st.slice(1),forEach(st,function(bt){var wt=nt.node(bt).parent,Et=rt.edge(bt,wt),kt=!1;Et||(Et=rt.edge(wt,bt),kt=!0),rt.node(bt).rank=rt.node(wt).rank+(kt?Et.minlen:-Et.minlen)})}function isTreeEdge(nt,rt,it){return nt.hasEdge(rt,it)}function isDescendant$1(nt,rt,it){return it.low<=rt.lim&&rt.lim<=it.lim}function rank(nt){switch(nt.graph().ranker){case"network-simplex":networkSimplexRanker(nt);break;case"tight-tree":tightTreeRanker(nt);break;case"longest-path":longestPathRanker(nt);break;default:networkSimplexRanker(nt)}}var longestPathRanker=longestPath;function tightTreeRanker(nt){longestPath(nt),feasibleTree(nt)}function networkSimplexRanker(nt){networkSimplex(nt)}function write(nt){var rt={options:{directed:nt.isDirected(),multigraph:nt.isMultigraph(),compound:nt.isCompound()},nodes:writeNodes(nt),edges:writeEdges(nt)};return isUndefined(nt.graph())||(rt.value=clone$1(nt.graph())),rt}function writeNodes(nt){return map$1(nt.nodes(),function(rt){var it=nt.node(rt),st=nt.parent(rt),bt={v:rt};return isUndefined(it)||(bt.value=it),isUndefined(st)||(bt.parent=st),bt})}function writeEdges(nt){return map$1(nt.edges(),function(rt){var it=nt.edge(rt),st={v:rt.v,w:rt.w};return isUndefined(rt.name)||(st.name=rt.name),isUndefined(it)||(st.value=it),st})}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let nt=0;nt<256;++nt)byteToHex.push((nt+256).toString(16).slice(1));function unsafeStringify(nt,rt=0){return(byteToHex[nt[rt+0]]+byteToHex[nt[rt+1]]+byteToHex[nt[rt+2]]+byteToHex[nt[rt+3]]+"-"+byteToHex[nt[rt+4]]+byteToHex[nt[rt+5]]+"-"+byteToHex[nt[rt+6]]+byteToHex[nt[rt+7]]+"-"+byteToHex[nt[rt+8]]+byteToHex[nt[rt+9]]+"-"+byteToHex[nt[rt+10]]+byteToHex[nt[rt+11]]+byteToHex[nt[rt+12]]+byteToHex[nt[rt+13]]+byteToHex[nt[rt+14]]+byteToHex[nt[rt+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(nt,rt,it){if(native.randomUUID&&!rt&&!nt)return native.randomUUID();nt=nt||{};const st=nt.random||(nt.rng||rng)();if(st[6]=st[6]&15|64,st[8]=st[8]&63|128,rt){it=it||0;for(let bt=0;bt<16;++bt)rt[it+bt]=st[bt];return rt}return unsafeStringify(st)}function isSubgraph(nt,rt){return!!nt.children(rt).length}function edgeToId(nt){return escapeId(nt.v)+":"+escapeId(nt.w)+":"+escapeId(nt.name)}var ID_DELIM=/:/g;function escapeId(nt){return nt?String(nt).replace(ID_DELIM,"\\:"):""}function applyStyle$1(nt,rt){rt&&nt.attr("style",rt)}function applyClass(nt,rt,it){rt&&nt.attr("class",rt).attr("class",it+" "+nt.attr("class"))}function applyTransition(nt,rt){var it=rt.graph();if(isPlainObject(it)){var st=it.transition;if(isFunction(st))return st(nt)}return nt}var arrows={normal,vee,undirected};function setArrows(nt){arrows=nt}function normal(nt,rt,it,st){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),wt=bt.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(wt,it[st+"Style"]),it[st+"Class"]&&wt.attr("class",it[st+"Class"])}function vee(nt,rt,it,st){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),wt=bt.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(wt,it[st+"Style"]),it[st+"Class"]&&wt.attr("class",it[st+"Class"])}function undirected(nt,rt,it,st){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),wt=bt.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(wt,it[st+"Style"]),it[st+"Class"]&&wt.attr("class",it[st+"Class"])}function addHtmlLabel$1(nt,rt){var it=nt.append("foreignObject").attr("width","100000"),st=it.append("xhtml:div");st.attr("xmlns","http://www.w3.org/1999/xhtml");var bt=rt.label;switch(typeof bt){case"function":st.insert(bt);break;case"object":st.insert(function(){return bt});break;default:st.html(bt)}applyStyle$1(st,rt.labelStyle),st.style("display","inline-block"),st.style("white-space","nowrap");var wt=st.node().getBoundingClientRect();return it.attr("width",wt.width).attr("height",wt.height),it}function addSVGLabel(nt,rt){var it=nt;return it.node().appendChild(rt.label),applyStyle$1(it,rt.labelStyle),it}function addTextLabel(nt,rt){for(var it=nt.append("text"),st=processEscapeSequences(rt.label).split(`
`),bt=0;bt<st.length;bt++)it.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(st[bt]);return applyStyle$1(it,rt.labelStyle),it}function processEscapeSequences(nt){for(var rt="",it=!1,st,bt=0;bt<nt.length;++bt)if(st=nt[bt],it){switch(st){case"n":rt+=`
`;break;default:rt+=st}it=!1}else st==="\\"?it=!0:rt+=st;return rt}function addLabel(nt,rt,it){var st=rt.label,bt=nt.append("g");rt.labelType==="svg"?addSVGLabel(bt,rt):typeof st!="string"||rt.labelType==="html"?addHtmlLabel$1(bt,rt):addTextLabel(bt,rt);var wt=bt.node().getBBox(),Et;switch(it){case"top":Et=-rt.height/2;break;case"bottom":Et=rt.height/2-wt.height;break;default:Et=-wt.height/2}return bt.attr("transform","translate("+-wt.width/2+","+Et+")"),bt}var createClusters=function(nt,rt){var it=rt.nodes().filter(function(wt){return isSubgraph(rt,wt)}),st=nt.selectAll("g.cluster").data(it,function(wt){return wt});applyTransition(st.exit(),rt).style("opacity",0).remove();var bt=st.enter().append("g").attr("class","cluster").attr("id",function(wt){var Et=rt.node(wt);return Et.id}).style("opacity",0).each(function(wt){var Et=rt.node(wt),kt=select(this);select(this).append("rect");var Lt=kt.append("g").attr("class","label");addLabel(Lt,Et,Et.clusterLabelPos)});return st=st.merge(bt),st=applyTransition(st,rt).style("opacity",1),st.selectAll("rect").each(function(wt){var Et=rt.node(wt),kt=select(this);applyStyle$1(kt,Et.style)}),st};function setCreateClusters(nt){createClusters=nt}let createEdgeLabels=function(nt,rt){var it=nt.selectAll("g.edgeLabel").data(rt.edges(),function(bt){return edgeToId(bt)}).classed("update",!0);it.exit().remove(),it.enter().append("g").classed("edgeLabel",!0).style("opacity",0),it=nt.selectAll("g.edgeLabel"),it.each(function(bt){var wt=select(this);wt.select(".label").remove();var Et=rt.edge(bt),kt=addLabel(wt,rt.edge(bt),0).classed("label",!0),Lt=kt.node().getBBox();Et.labelId&&kt.attr("id",Et.labelId),has(Et,"width")||(Et.width=Lt.width),has(Et,"height")||(Et.height=Lt.height)});var st;return it.exit?st=it.exit():st=it.selectAll(null),applyTransition(st,rt).style("opacity",0).remove(),it};function setCreateEdgeLabels(nt){createEdgeLabels=nt}function intersectNode$1(nt,rt){return nt.intersect(rt)}var createEdgePaths=function(nt,rt,it){var st=nt.selectAll("g.edgePath").data(rt.edges(),function(Et){return edgeToId(Et)}).classed("update",!0),bt=enter(st,rt);exit(st,rt);var wt=st.merge!==void 0?st.merge(bt):st;return applyTransition(wt,rt).style("opacity",1),wt.each(function(Et){var kt=select(this),Lt=rt.edge(Et);Lt.elem=this,Lt.id&&kt.attr("id",Lt.id),applyClass(kt,Lt.class,(kt.classed("update")?"update ":"")+"edgePath")}),wt.selectAll("path.path").each(function(Et){var kt=rt.edge(Et);kt.arrowheadId=uniqueId("arrowhead");var Lt=select(this).attr("marker-end",function(){return"url("+makeFragmentRef(location.href,kt.arrowheadId)+")"}).style("fill","none");applyTransition(Lt,rt).attr("d",function(Ot){return calcPoints(rt,Ot)}),applyStyle$1(Lt,kt.style)}),wt.selectAll("defs *").remove(),wt.selectAll("defs").each(function(Et){var kt=rt.edge(Et),Lt=it[kt.arrowhead];Lt(select(this),kt.arrowheadId,kt,"arrowhead")}),wt};function setCreateEdgePaths(nt){createEdgePaths=nt}function makeFragmentRef(nt,rt){var it=nt.split("#")[0];return it+"#"+rt}function calcPoints(nt,rt){var it=nt.edge(rt),st=nt.node(rt.v),bt=nt.node(rt.w),wt=it.points.slice(1,it.points.length-1);return wt.unshift(intersectNode$1(st,wt[0])),wt.push(intersectNode$1(bt,wt[wt.length-1])),createLine(it,wt)}function createLine(nt,rt){var it=(line$1||svg$2.line)().x(function(st){return st.x}).y(function(st){return st.y});return(it.curve||it.interpolate)(nt.curve),it(rt)}function getCoords(nt){var rt=nt.getBBox(),it=nt.ownerSVGElement.getScreenCTM().inverse().multiply(nt.getScreenCTM()).translate(rt.width/2,rt.height/2);return{x:it.e,y:it.f}}function enter(nt,rt){var it=nt.enter().append("g").attr("class","edgePath").style("opacity",0);return it.append("path").attr("class","path").attr("d",function(st){var bt=rt.edge(st),wt=rt.node(st.v).elem,Et=range$1(bt.points.length).map(function(){return getCoords(wt)});return createLine(bt,Et)}),it.append("defs"),it}function exit(nt,rt){var it=nt.exit();applyTransition(it,rt).style("opacity",0).remove()}var createNodes=function(nt,rt,it){var st=rt.nodes().filter(function(Et){return!isSubgraph(rt,Et)}),bt=nt.selectAll("g.node").data(st,function(Et){return Et}).classed("update",!0);bt.exit().remove(),bt.enter().append("g").attr("class","node").style("opacity",0),bt=nt.selectAll("g.node"),bt.each(function(Et){var kt=rt.node(Et),Lt=select(this);applyClass(Lt,kt.class,(Lt.classed("update")?"update ":"")+"node"),Lt.select("g.label").remove();var Ot=Lt.append("g").attr("class","label"),Rt=addLabel(Ot,kt),Dt=it[kt.shape],Bt=pick$1(Rt.node().getBBox(),"width","height");kt.elem=this,kt.id&&Lt.attr("id",kt.id),kt.labelId&&Ot.attr("id",kt.labelId),has(kt,"width")&&(Bt.width=kt.width),has(kt,"height")&&(Bt.height=kt.height),Bt.width+=kt.paddingLeft+kt.paddingRight,Bt.height+=kt.paddingTop+kt.paddingBottom,Ot.attr("transform","translate("+(kt.paddingLeft-kt.paddingRight)/2+","+(kt.paddingTop-kt.paddingBottom)/2+")");var Ft=select(this);Ft.select(".label-container").remove();var Yt=Dt(Ft,Bt,kt).classed("label-container",!0);applyStyle$1(Yt,kt.style);var Jt=Yt.node().getBBox();kt.width=Jt.width,kt.height=Jt.height});var wt;return bt.exit?wt=bt.exit():wt=bt.selectAll(null),applyTransition(wt,rt).style("opacity",0).remove(),bt};function setCreateNodes(nt){createNodes=nt}function positionClusters(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(bt){var wt=rt.node(bt);return"translate("+wt.x+","+wt.y+")"}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st),applyTransition(it.selectAll("rect"),rt).attr("width",function(bt){return rt.node(bt).width}).attr("height",function(bt){return rt.node(bt).height}).attr("x",function(bt){var wt=rt.node(bt);return-wt.width/2}).attr("y",function(bt){var wt=rt.node(bt);return-wt.height/2})}function positionEdgeLabels(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(bt){var wt=rt.edge(bt);return has(wt,"x")?"translate("+wt.x+","+wt.y+")":""}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st)}function positionNodes(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(bt){var wt=rt.node(bt);return"translate("+wt.x+","+wt.y+")"}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st)}function intersectEllipse$1(nt,rt,it,st){var bt=nt.x,wt=nt.y,Et=bt-st.x,kt=wt-st.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Et*Et),Ot=Math.abs(rt*it*Et/Lt);st.x<bt&&(Ot=-Ot);var Rt=Math.abs(rt*it*kt/Lt);return st.y<wt&&(Rt=-Rt),{x:bt+Ot,y:wt+Rt}}function intersectCircle$1(nt,rt,it){return intersectEllipse$1(nt,rt,rt,it)}function intersectLine$1(nt,rt,it,st){var bt,wt,Et,kt,Lt,Ot,Rt,Dt,Bt,Ft,Yt,Jt,Wt,Qt,rn;if(bt=rt.y-nt.y,Et=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Bt=bt*it.x+Et*it.y+Lt,Ft=bt*st.x+Et*st.y+Lt,!(Bt!==0&&Ft!==0&&sameSign$1(Bt,Ft))&&(wt=st.y-it.y,kt=it.x-st.x,Ot=st.x*it.y-it.x*st.y,Rt=wt*nt.x+kt*nt.y+Ot,Dt=wt*rt.x+kt*rt.y+Ot,!(Rt!==0&&Dt!==0&&sameSign$1(Rt,Dt))&&(Yt=bt*kt-wt*Et,Yt!==0)))return Jt=Math.abs(Yt/2),Wt=Et*Ot-kt*Lt,Qt=Wt<0?(Wt-Jt)/Yt:(Wt+Jt)/Yt,Wt=wt*Lt-bt*Ot,rn=Wt<0?(Wt-Jt)/Yt:(Wt+Jt)/Yt,{x:Qt,y:rn}}function sameSign$1(nt,rt){return nt*rt>0}function intersectPolygon$1(nt,rt,it){var st=nt.x,bt=nt.y,wt=[],Et=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;rt.forEach(function(Yt){Et=Math.min(Et,Yt.x),kt=Math.min(kt,Yt.y)});for(var Lt=st-nt.width/2-Et,Ot=bt-nt.height/2-kt,Rt=0;Rt<rt.length;Rt++){var Dt=rt[Rt],Bt=rt[Rt<rt.length-1?Rt+1:0],Ft=intersectLine$1(nt,it,{x:Lt+Dt.x,y:Ot+Dt.y},{x:Lt+Bt.x,y:Ot+Bt.y});Ft&&wt.push(Ft)}return wt.length?(wt.length>1&&wt.sort(function(Yt,Jt){var Wt=Yt.x-it.x,Qt=Yt.y-it.y,rn=Math.sqrt(Wt*Wt+Qt*Qt),sn=Jt.x-it.x,on=Jt.y-it.y,hn=Math.sqrt(sn*sn+on*on);return rn<hn?-1:rn===hn?0:1}),wt[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",nt),nt)}function intersectRect$2(nt,rt){var it=nt.x,st=nt.y,bt=rt.x-it,wt=rt.y-st,Et=nt.width/2,kt=nt.height/2,Lt,Ot;return Math.abs(wt)*Et>Math.abs(bt)*kt?(wt<0&&(kt=-kt),Lt=wt===0?0:kt*bt/wt,Ot=kt):(bt<0&&(Et=-Et),Lt=Et,Ot=bt===0?0:Et*wt/bt),{x:it+Lt,y:st+Ot}}var shapes$2={rect:rect$2,ellipse,circle:circle$2,diamond};function setShapes(nt){shapes$2=nt}function rect$2(nt,rt,it){var st=nt.insert("rect",":first-child").attr("rx",it.rx).attr("ry",it.ry).attr("x",-rt.width/2).attr("y",-rt.height/2).attr("width",rt.width).attr("height",rt.height);return it.intersect=function(bt){return intersectRect$2(it,bt)},st}function ellipse(nt,rt,it){var st=rt.width/2,bt=rt.height/2,wt=nt.insert("ellipse",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("rx",st).attr("ry",bt);return it.intersect=function(Et){return intersectEllipse$1(it,st,bt,Et)},wt}function circle$2(nt,rt,it){var st=Math.max(rt.width,rt.height)/2,bt=nt.insert("circle",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("r",st);return it.intersect=function(wt){return intersectCircle$1(it,st,wt)},bt}function diamond(nt,rt,it){var st=rt.width*Math.SQRT2/2,bt=rt.height*Math.SQRT2/2,wt=[{x:0,y:-bt},{x:-st,y:0},{x:0,y:bt},{x:st,y:0}],Et=nt.insert("polygon",":first-child").attr("points",wt.map(function(kt){return kt.x+","+kt.y}).join(" "));return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function render$2(){var nt=function(rt,it){preProcessGraph(it);var st=createOrSelectGroup(rt,"output"),bt=createOrSelectGroup(st,"clusters"),wt=createOrSelectGroup(st,"edgePaths"),Et=createEdgeLabels(createOrSelectGroup(st,"edgeLabels"),it),kt=createNodes(createOrSelectGroup(st,"nodes"),it,shapes$2);layout(it),positionNodes(kt,it),positionEdgeLabels(Et,it),createEdgePaths(wt,it,arrows);var Lt=createClusters(bt,it);positionClusters(Lt,it),postProcessGraph(it)};return nt.createNodes=function(rt){return arguments.length?(setCreateNodes(rt),nt):createNodes},nt.createClusters=function(rt){return arguments.length?(setCreateClusters(rt),nt):createClusters},nt.createEdgeLabels=function(rt){return arguments.length?(setCreateEdgeLabels(rt),nt):createEdgeLabels},nt.createEdgePaths=function(rt){return arguments.length?(setCreateEdgePaths(rt),nt):createEdgePaths},nt.shapes=function(rt){return arguments.length?(setShapes(rt),nt):shapes$2},nt.arrows=function(rt){return arguments.length?(setArrows(rt),nt):arrows},nt}var NODE_DEFAULT_ATTRS={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},EDGE_DEFAULT_ATTRS={arrowhead:"normal",curve:curveLinear};function preProcessGraph(nt){nt.nodes().forEach(function(rt){var it=nt.node(rt);!has(it,"label")&&!nt.children(rt).length&&(it.label=rt),has(it,"paddingX")&&defaults$1(it,{paddingLeft:it.paddingX,paddingRight:it.paddingX}),has(it,"paddingY")&&defaults$1(it,{paddingTop:it.paddingY,paddingBottom:it.paddingY}),has(it,"padding")&&defaults$1(it,{paddingLeft:it.padding,paddingRight:it.padding,paddingTop:it.padding,paddingBottom:it.padding}),defaults$1(it,NODE_DEFAULT_ATTRS),forEach(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(st){it[st]=Number(it[st])}),has(it,"width")&&(it._prevWidth=it.width),has(it,"height")&&(it._prevHeight=it.height)}),nt.edges().forEach(function(rt){var it=nt.edge(rt);has(it,"label")||(it.label=""),defaults$1(it,EDGE_DEFAULT_ATTRS)})}function postProcessGraph(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);has(it,"_prevWidth")?it.width=it._prevWidth:delete it.width,has(it,"_prevHeight")?it.height=it._prevHeight:delete it.height,delete it._prevWidth,delete it._prevHeight})}function createOrSelectGroup(nt,rt){var it=nt.select("g."+rt);return it.empty()&&(it=nt.append("g").attr("class",rt)),it}var __defProp=Object.defineProperty,__defNormalProp=(nt,rt,it)=>rt in nt?__defProp(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__publicField=(nt,rt,it)=>(__defNormalProp(nt,typeof rt!="symbol"?rt+"":rt,it),it);const LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log$1={trace:(...nt)=>{},debug:(...nt)=>{},info:(...nt)=>{},warn:(...nt)=>{},error:(...nt)=>{},fatal:(...nt)=>{}},setLogLevel$1=function(nt="fatal"){let rt=LEVELS.fatal;typeof nt=="string"?(nt=nt.toLowerCase(),nt in LEVELS&&(rt=LEVELS[nt])):typeof nt=="number"&&(rt=nt),log$1.trace=()=>{},log$1.debug=()=>{},log$1.info=()=>{},log$1.warn=()=>{},log$1.error=()=>{},log$1.fatal=()=>{},rt<=LEVELS.fatal&&(log$1.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format("FATAL"))),rt<=LEVELS.error&&(log$1.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format("ERROR"))),rt<=LEVELS.warn&&(log$1.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format("WARN"))),rt<=LEVELS.info&&(log$1.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format("INFO"))),rt<=LEVELS.debug&&(log$1.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("DEBUG"))),rt<=LEVELS.trace&&(log$1.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("TRACE")))},format=nt=>`%c${moment().format("ss.SSS")} : ${nt} : `,getRows=nt=>nt?breakToPlaceholder(nt).replace(/\\n/g,"#br#").split("#br#"):[""],removeScript=nt=>purify.sanitize(nt),sanitizeMore=(nt,rt)=>{var it;if(((it=rt.flowchart)==null?void 0:it.htmlLabels)!==!1){const st=rt.securityLevel;st==="antiscript"||st==="strict"?nt=removeScript(nt):st!=="loose"&&(nt=breakToPlaceholder(nt),nt=nt.replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=nt.replace(/=/g,"&equals;"),nt=placeholderToBreak(nt))}return nt},sanitizeText$5=(nt,rt)=>nt&&(rt.dompurifyConfig?nt=purify.sanitize(sanitizeMore(nt,rt),rt.dompurifyConfig).toString():nt=purify.sanitize(sanitizeMore(nt,rt),{FORBID_TAGS:["style"]}).toString(),nt),sanitizeTextOrArray=(nt,rt)=>typeof nt=="string"?sanitizeText$5(nt,rt):nt.flat().map(it=>sanitizeText$5(it,rt)),lineBreakRegex=/<br\s*\/?>/gi,hasBreaks=nt=>lineBreakRegex.test(nt),splitBreaks=nt=>nt.split(lineBreakRegex),placeholderToBreak=nt=>nt.replace(/#br#/g,"<br/>"),breakToPlaceholder=nt=>nt.replace(lineBreakRegex,"#br#"),getUrl=nt=>{let rt="";return nt&&(rt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,rt=rt.replaceAll(/\(/g,"\\("),rt=rt.replaceAll(/\)/g,"\\)")),rt},evaluate=nt=>!(nt===!1||["false","null","0"].includes(String(nt).trim().toLowerCase())),parseGenericTypes=function(nt){let rt=nt;return nt.includes("~")?(rt=rt.replace(/~([^~].*)/,"<$1"),rt=rt.replace(/~([^~]*)$/,">$1"),parseGenericTypes(rt)):rt},common$1={getRows,sanitizeText:sanitizeText$5,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate},mkBorder=(nt,rt)=>rt?adjust$2(nt,{s:-40,l:10}):adjust$2(nt,{s:-40,l:-10}),oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2";class Theme$4{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust$2(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust$2(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert$1(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert$1(this.tertiaryColor),this.lineColor=this.lineColor||invert$1(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken$1(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert$1(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten$1(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this.darkMode)for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],75);else for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this.darkMode?this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10):this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust$2(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust$2(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust$2(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust$2(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust$2(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables$4=nt=>{const rt=new Theme$4;return rt.calculate(nt),rt};class Theme$3{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten$1(this.primaryColor,16),this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=invert$1(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten$1(invert$1("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=rgba$1(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken$1("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=rgba$1(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba$1(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=lighten$1(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten$1(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten$1(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten$1(this.secondaryColor,20),this.git1=lighten$1(this.pie2||this.secondaryColor,20),this.git2=lighten$1(this.pie3||this.tertiaryColor,20),this.git3=lighten$1(this.pie4||adjust$2(this.primaryColor,{h:-30}),20),this.git4=lighten$1(this.pie5||adjust$2(this.primaryColor,{h:-60}),20),this.git5=lighten$1(this.pie6||adjust$2(this.primaryColor,{h:-90}),10),this.git6=lighten$1(this.pie7||adjust$2(this.primaryColor,{h:60}),10),this.git7=lighten$1(this.pie8||adjust$2(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten$1(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten$1(this.background,2)}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables$3=nt=>{const rt=new Theme$3;return rt.calculate(nt),rt};class Theme$2{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust$2(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=rgba$1(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert$1(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert$1(this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust$2(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||darken$1(invert$1(this.git0),25),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert$1(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert$1(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables$2=nt=>{const rt=new Theme$2;return rt.calculate(nt),rt};class Theme$1{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten$1("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.primaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=darken$1(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables$1=nt=>{const rt=new Theme$1;return rt.calculate(nt),rt};class Theme{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten$1(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=lighten$1(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this.darkMode?this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10):this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=lighten$1(this.contrast,30),this.sectionBkgColor2=lighten$1(this.contrast,30),this.taskBorderColor=darken$1(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten$1(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken$1(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken$1(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust$2(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust$2(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust$2(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust$2(this.primaryColor,{h:60}),this.git7=this.pie8||adjust$2(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables=nt=>{const rt=new Theme;return rt.calculate(nt),rt},theme={base:{getThemeVariables:getThemeVariables$4},dark:{getThemeVariables:getThemeVariables$3},default:{getThemeVariables:getThemeVariables$2},forest:{getThemeVariables:getThemeVariables$1},neutral:{getThemeVariables}},config$1={theme:"default",themeVariables:theme.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};config$1.class&&(config$1.class.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);config$1.gitGraph&&(config$1.gitGraph.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);const keyify=(nt,rt="")=>Object.keys(nt).reduce((it,st)=>Array.isArray(nt[st])?it:typeof nt[st]=="object"&&nt[st]!==null?[...it,rt+st,...keyify(nt[st],"")]:[...it,rt+st],[]),configKeys=keyify(config$1,""),config$2=config$1;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(nt){return typeof nt>"u"||nt===null}function isObject(nt){return typeof nt=="object"&&nt!==null}function toArray(nt){return Array.isArray(nt)?nt:isNothing(nt)?[]:[nt]}function extend(nt,rt){var it,st,bt,wt;if(rt)for(wt=Object.keys(rt),it=0,st=wt.length;it<st;it+=1)bt=wt[it],nt[bt]=rt[bt];return nt}function repeat(nt,rt){var it="",st;for(st=0;st<rt;st+=1)it+=nt;return it}function isNegativeZero(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(nt,rt){var it="",st=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),st+" "+it):st}function YAMLException$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=function nt(rt){return this.name+": "+formatError(this,rt)};var exception=YAMLException$1;function getLine(nt,rt,it,st,bt){var wt="",Et="",kt=Math.floor(bt/2)-1;return st-rt>kt&&(wt=" ... ",rt=st-kt+wt.length),it-st>kt&&(Et=" ...",it=st+kt-Et.length),{str:wt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Et,pos:st-rt+wt.length}}function padStart(nt,rt){return common.repeat(" ",rt-nt.length)+nt}function makeSnippet(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,st=[0],bt=[],wt,Et=-1;wt=it.exec(nt.buffer);)bt.push(wt.index),st.push(wt.index+wt[0].length),nt.position<=wt.index&&Et<0&&(Et=st.length-2);Et<0&&(Et=st.length-1);var kt="",Lt,Ot,Rt=Math.min(nt.line+rt.linesAfter,bt.length).toString().length,Dt=rt.maxLength-(rt.indent+Rt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Et-Lt<0);Lt++)Ot=getLine(nt.buffer,st[Et-Lt],bt[Et-Lt],nt.position-(st[Et]-st[Et-Lt]),Dt),kt=common.repeat(" ",rt.indent)+padStart((nt.line-Lt+1).toString(),Rt)+" | "+Ot.str+`
`+kt;for(Ot=getLine(nt.buffer,st[Et],bt[Et],nt.position,Dt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+1).toString(),Rt)+" | "+Ot.str+`
`,kt+=common.repeat("-",rt.indent+Rt+3+Ot.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Et+Lt>=bt.length);Lt++)Ot=getLine(nt.buffer,st[Et+Lt],bt[Et+Lt],nt.position-(st[Et]-st[Et+Lt]),Dt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+Lt+1).toString(),Rt)+" | "+Ot.str+`
`;return kt.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(st){rt[String(st)]=it})}),rt}function Type$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(it)===-1)throw new exception('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases(rt.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type=Type$1;function compileList(nt,rt){var it=[];return nt[rt].forEach(function(st){var bt=it.length;it.forEach(function(wt,Et){wt.tag===st.tag&&wt.kind===st.kind&&wt.multi===st.multi&&(bt=Et)}),it[bt]=st}),it}function compileMap(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function st(bt){bt.multi?(nt.multi[bt.kind].push(bt),nt.multi.fallback.push(bt)):nt[bt.kind][bt.tag]=nt.fallback[bt.tag]=bt}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(st);return nt}function Schema$1(nt){return this.extend(nt)}Schema$1.prototype.extend=function nt(rt){var it=[],st=[];if(rt instanceof type)st.push(rt);else if(Array.isArray(rt))st=st.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(st=st.concat(rt.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(wt){if(!(wt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(wt.loadKind&&wt.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(wt.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(wt){if(!(wt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Schema$1.prototype);return bt.implicit=(this.implicit||[]).concat(it),bt.explicit=(this.explicit||[]).concat(st),bt.compiledImplicit=compileList(bt,"implicit"),bt.compiledExplicit=compileList(bt,"explicit"),bt.compiledTypeMap=compileMap(bt.compiledImplicit,bt.compiledExplicit),bt};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$1=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe=new schema({explicit:[str,seq$1,map]});function resolveYamlNull(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull(){return null}function isNull(nt){return nt===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode(nt){return 48<=nt&&nt<=55}function isDecCode(nt){return 48<=nt&&nt<=57}function resolveYamlInteger(nt){if(nt===null)return!1;var rt=nt.length,it=0,st=!1,bt;if(!rt)return!1;if(bt=nt[it],(bt==="-"||bt==="+")&&(bt=nt[++it]),bt==="0"){if(it+1===rt)return!0;if(bt=nt[++it],bt==="b"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(bt!=="0"&&bt!=="1")return!1;st=!0}return st&&bt!=="_"}if(bt==="x"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isHexCode(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}if(bt==="o"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isOctCode(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}}if(bt==="_")return!1;for(;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isDecCode(nt.charCodeAt(it)))return!1;st=!0}return!(!st||bt==="_")}function constructYamlInteger(nt){var rt=nt,it=1,st;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),st=rt[0],(st==="-"||st==="+")&&(st==="-"&&(it=-1),rt=rt.slice(1),st=rt[0]),rt==="0")return 0;if(st==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common.isNegativeZero(nt)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(nt){return!(nt===null||!YAML_FLOAT_PATTERN.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT.test(it)?it.replace("e",".e"):it}function isFloat(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common.isNegativeZero(nt))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(nt){return nt===null?!1:YAML_DATE_REGEXP.exec(nt)!==null||YAML_TIMESTAMP_REGEXP.exec(nt)!==null}function constructYamlTimestamp(nt){var rt,it,st,bt,wt,Et,kt,Lt=0,Ot=null,Rt,Dt,Bt;if(rt=YAML_DATE_REGEXP.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],st=+rt[2]-1,bt=+rt[3],!rt[4])return new Date(Date.UTC(it,st,bt));if(wt=+rt[4],Et=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Rt=+rt[10],Dt=+(rt[11]||0),Ot=(Rt*60+Dt)*6e4,rt[9]==="-"&&(Ot=-Ot)),Bt=new Date(Date.UTC(it,st,bt,wt,Et,kt,Lt)),Ot&&Bt.setTime(Bt.getTime()-Ot),Bt}function representYamlTimestamp(nt){return nt.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(nt){return nt==="<<"||nt===null}var merge$1=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(nt){if(nt===null)return!1;var rt,it,st=0,bt=nt.length,wt=BASE64_MAP;for(it=0;it<bt;it++)if(rt=wt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;st+=6}return st%8===0}function constructYamlBinary(nt){var rt,it,st=nt.replace(/[\r\n=]/g,""),bt=st.length,wt=BASE64_MAP,Et=0,kt=[];for(rt=0;rt<bt;rt++)rt%4===0&&rt&&(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)),Et=Et<<6|wt.indexOf(st.charAt(rt));return it=bt%4*6,it===0?(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)):it===18?(kt.push(Et>>10&255),kt.push(Et>>2&255)):it===12&&kt.push(Et>>4&255),new Uint8Array(kt)}function representYamlBinary(nt){var rt="",it=0,st,bt,wt=nt.length,Et=BASE64_MAP;for(st=0;st<wt;st++)st%3===0&&st&&(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]),it=(it<<8)+nt[st];return bt=wt%3,bt===0?(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]):bt===2?(rt+=Et[it>>10&63],rt+=Et[it>>4&63],rt+=Et[it<<2&63],rt+=Et[64]):bt===1&&(rt+=Et[it>>2&63],rt+=Et[it<<4&63],rt+=Et[64],rt+=Et[64]),rt}function isBinary(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(nt){if(nt===null)return!0;var rt=[],it,st,bt,wt,Et,kt=nt;for(it=0,st=kt.length;it<st;it+=1){if(bt=kt[it],Et=!1,_toString$2.call(bt)!=="[object Object]")return!1;for(wt in bt)if(_hasOwnProperty$3.call(bt,wt))if(!Et)Et=!0;else return!1;if(!Et)return!1;if(rt.indexOf(wt)===-1)rt.push(wt);else return!1}return!0}function constructYamlOmap(nt){return nt!==null?nt:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(nt){if(nt===null)return!0;var rt,it,st,bt,wt,Et=nt;for(wt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1){if(st=Et[rt],_toString$1.call(st)!=="[object Object]"||(bt=Object.keys(st),bt.length!==1))return!1;wt[rt]=[bt[0],st[bt[0]]]}return!0}function constructYamlPairs(nt){if(nt===null)return[];var rt,it,st,bt,wt,Et=nt;for(wt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1)st=Et[rt],bt=Object.keys(st),wt[rt]=[bt[0],st[bt[0]]];return wt}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet(nt){return nt!==null?nt:{}}var set$1=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge$1],explicit:[binary,omap,pairs,set$1]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(nt){return Object.prototype.toString.call(nt)}function is_EOL(nt){return nt===10||nt===13}function is_WHITE_SPACE(nt){return nt===9||nt===32}function is_WS_OR_EOL(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet(it),new exception(rt,it)}function throwError(nt,rt){throw generateError(nt,rt)}function throwWarning(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError(nt,rt))}var directiveHandlers={YAML:function nt(rt,it,st){var bt,wt,Et;rt.version!==null&&throwError(rt,"duplication of %YAML directive"),st.length!==1&&throwError(rt,"YAML directive accepts exactly one argument"),bt=/^([0-9]+)\.([0-9]+)$/.exec(st[0]),bt===null&&throwError(rt,"ill-formed argument of the YAML directive"),wt=parseInt(bt[1],10),Et=parseInt(bt[2],10),wt!==1&&throwError(rt,"unacceptable YAML version of the document"),rt.version=st[0],rt.checkLineBreaks=Et<2,Et!==1&&Et!==2&&throwWarning(rt,"unsupported YAML version of the document")},TAG:function nt(rt,it,st){var bt,wt;st.length!==2&&throwError(rt,"TAG directive accepts exactly two arguments"),bt=st[0],wt=st[1],PATTERN_TAG_HANDLE.test(bt)||throwError(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(rt.tagMap,bt)&&throwError(rt,'there is a previously declared suffix for "'+bt+'" tag handle'),PATTERN_TAG_URI.test(wt)||throwError(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{wt=decodeURIComponent(wt)}catch{throwError(rt,"tag prefix is malformed: "+wt)}rt.tagMap[bt]=wt}};function captureSegment(nt,rt,it,st){var bt,wt,Et,kt;if(rt<it){if(kt=nt.input.slice(rt,it),st)for(bt=0,wt=kt.length;bt<wt;bt+=1)Et=kt.charCodeAt(bt),Et===9||32<=Et&&Et<=1114111||throwError(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(kt)&&throwError(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings(nt,rt,it,st){var bt,wt,Et,kt;for(common.isObject(it)||throwError(nt,"cannot merge mappings; the provided source object is unacceptable"),bt=Object.keys(it),Et=0,kt=bt.length;Et<kt;Et+=1)wt=bt[Et],_hasOwnProperty$1.call(rt,wt)||(rt[wt]=it[wt],st[wt]=!0)}function storeMappingPair(nt,rt,it,st,bt,wt,Et,kt,Lt){var Ot,Rt;if(Array.isArray(bt))for(bt=Array.prototype.slice.call(bt),Ot=0,Rt=bt.length;Ot<Rt;Ot+=1)Array.isArray(bt[Ot])&&throwError(nt,"nested arrays are not supported inside keys"),typeof bt=="object"&&_class(bt[Ot])==="[object Object]"&&(bt[Ot]="[object Object]");if(typeof bt=="object"&&_class(bt)==="[object Object]"&&(bt="[object Object]"),bt=String(bt),rt===null&&(rt={}),st==="tag:yaml.org,2002:merge")if(Array.isArray(wt))for(Ot=0,Rt=wt.length;Ot<Rt;Ot+=1)mergeMappings(nt,rt,wt[Ot],it);else mergeMappings(nt,rt,wt,it);else!nt.json&&!_hasOwnProperty$1.call(it,bt)&&_hasOwnProperty$1.call(rt,bt)&&(nt.line=Et||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError(nt,"duplicated mapping key")),bt==="__proto__"?Object.defineProperty(rt,bt,{configurable:!0,enumerable:!0,writable:!0,value:wt}):rt[bt]=wt,delete it[bt];return rt}function readLineBreak(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace(nt,rt,it){for(var st=0,bt=nt.input.charCodeAt(nt.position);bt!==0;){for(;is_WHITE_SPACE(bt);)bt===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),bt=nt.input.charCodeAt(++nt.position);if(rt&&bt===35)do bt=nt.input.charCodeAt(++nt.position);while(bt!==10&&bt!==13&&bt!==0);if(is_EOL(bt))for(readLineBreak(nt),bt=nt.input.charCodeAt(nt.position),st++,nt.lineIndent=0;bt===32;)nt.lineIndent++,bt=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&st!==0&&nt.lineIndent<it&&throwWarning(nt,"deficient indentation"),st}function testDocumentSeparator(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL(it)))}function writeFoldedLines(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common.repeat(`
`,rt-1))}function readPlainScalar(nt,rt,it){var st,bt,wt,Et,kt,Lt,Ot,Rt,Dt=nt.kind,Bt=nt.result,Ft;if(Ft=nt.input.charCodeAt(nt.position),is_WS_OR_EOL(Ft)||is_FLOW_INDICATOR(Ft)||Ft===35||Ft===38||Ft===42||Ft===33||Ft===124||Ft===62||Ft===39||Ft===34||Ft===37||Ft===64||Ft===96||(Ft===63||Ft===45)&&(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(bt)||it&&is_FLOW_INDICATOR(bt)))return!1;for(nt.kind="scalar",nt.result="",wt=Et=nt.position,kt=!1;Ft!==0;){if(Ft===58){if(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(bt)||it&&is_FLOW_INDICATOR(bt))break}else if(Ft===35){if(st=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL(st))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator(nt)||it&&is_FLOW_INDICATOR(Ft))break;if(is_EOL(Ft))if(Lt=nt.line,Ot=nt.lineStart,Rt=nt.lineIndent,skipSeparationSpace(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Ft=nt.input.charCodeAt(nt.position);continue}else{nt.position=Et,nt.line=Lt,nt.lineStart=Ot,nt.lineIndent=Rt;break}}kt&&(captureSegment(nt,wt,Et,!1),writeFoldedLines(nt,nt.line-Lt),wt=Et=nt.position,kt=!1),is_WHITE_SPACE(Ft)||(Et=nt.position+1),Ft=nt.input.charCodeAt(++nt.position)}return captureSegment(nt,wt,Et,!1),nt.result?!0:(nt.kind=Dt,nt.result=Bt,!1)}function readSingleQuotedScalar(nt,rt){var it,st,bt;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,st=bt=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment(nt,st,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)st=nt.position,nt.position++,bt=nt.position;else return!0;else is_EOL(it)?(captureSegment(nt,st,bt,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),st=bt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,bt=nt.position);throwError(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(nt,rt){var it,st,bt,wt,Et,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=st=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL(kt))skipSeparationSpace(nt,!1,rt);else if(kt<256&&simpleEscapeCheck[kt])nt.result+=simpleEscapeMap[kt],nt.position++;else if((Et=escapedHexLen(kt))>0){for(bt=Et,wt=0;bt>0;bt--)kt=nt.input.charCodeAt(++nt.position),(Et=fromHexCode(kt))>=0?wt=(wt<<4)+Et:throwError(nt,"expected hexadecimal character");nt.result+=charFromCodepoint(wt),nt.position++}else throwError(nt,"unknown escape sequence");it=st=nt.position}else is_EOL(kt)?(captureSegment(nt,it,st,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),it=st=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,st=nt.position)}throwError(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(nt,rt){var it=!0,st,bt,wt,Et=nt.tag,kt,Lt=nt.anchor,Ot,Rt,Dt,Bt,Ft,Yt=Object.create(null),Jt,Wt,Qt,rn;if(rn=nt.input.charCodeAt(nt.position),rn===91)Rt=93,Ft=!1,kt=[];else if(rn===123)Rt=125,Ft=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),rn=nt.input.charCodeAt(++nt.position);rn!==0;){if(skipSeparationSpace(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===Rt)return nt.position++,nt.tag=Et,nt.anchor=Lt,nt.kind=Ft?"mapping":"sequence",nt.result=kt,!0;it?rn===44&&throwError(nt,"expected the node content, but found ','"):throwError(nt,"missed comma between flow collection entries"),Wt=Jt=Qt=null,Dt=Bt=!1,rn===63&&(Ot=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(Ot)&&(Dt=Bt=!0,nt.position++,skipSeparationSpace(nt,!0,rt))),st=nt.line,bt=nt.lineStart,wt=nt.position,composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Wt=nt.tag,Jt=nt.result,skipSeparationSpace(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),(Bt||nt.line===st)&&rn===58&&(Dt=!0,rn=nt.input.charCodeAt(++nt.position),skipSeparationSpace(nt,!0,rt),composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Qt=nt.result),Ft?storeMappingPair(nt,kt,Yt,Wt,Jt,Qt,st,bt,wt):Dt?kt.push(storeMappingPair(nt,null,Yt,Wt,Jt,Qt,st,bt,wt)):kt.push(Jt),skipSeparationSpace(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===44?(it=!0,rn=nt.input.charCodeAt(++nt.position)):it=!1}throwError(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar(nt,rt){var it,st,bt=CHOMPING_CLIP,wt=!1,Et=!1,kt=rt,Lt=0,Ot=!1,Rt,Dt;if(Dt=nt.input.charCodeAt(nt.position),Dt===124)st=!1;else if(Dt===62)st=!0;else return!1;for(nt.kind="scalar",nt.result="";Dt!==0;)if(Dt=nt.input.charCodeAt(++nt.position),Dt===43||Dt===45)CHOMPING_CLIP===bt?bt=Dt===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(nt,"repeat of a chomping mode identifier");else if((Rt=fromDecimalCode(Dt))>=0)Rt===0?throwError(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Et?throwError(nt,"repeat of an indentation width identifier"):(kt=rt+Rt-1,Et=!0);else break;if(is_WHITE_SPACE(Dt)){do Dt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE(Dt));if(Dt===35)do Dt=nt.input.charCodeAt(++nt.position);while(!is_EOL(Dt)&&Dt!==0)}for(;Dt!==0;){for(readLineBreak(nt),nt.lineIndent=0,Dt=nt.input.charCodeAt(nt.position);(!Et||nt.lineIndent<kt)&&Dt===32;)nt.lineIndent++,Dt=nt.input.charCodeAt(++nt.position);if(!Et&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL(Dt)){Lt++;continue}if(nt.lineIndent<kt){bt===CHOMPING_KEEP?nt.result+=common.repeat(`
`,wt?1+Lt:Lt):bt===CHOMPING_CLIP&&wt&&(nt.result+=`
`);break}for(st?is_WHITE_SPACE(Dt)?(Ot=!0,nt.result+=common.repeat(`
`,wt?1+Lt:Lt)):Ot?(Ot=!1,nt.result+=common.repeat(`
`,Lt+1)):Lt===0?wt&&(nt.result+=" "):nt.result+=common.repeat(`
`,Lt):nt.result+=common.repeat(`
`,wt?1+Lt:Lt),wt=!0,Et=!0,Lt=0,it=nt.position;!is_EOL(Dt)&&Dt!==0;)Dt=nt.input.charCodeAt(++nt.position);captureSegment(nt,it,nt.position,!1)}return!0}function readBlockSequence(nt,rt){var it,st=nt.tag,bt=nt.anchor,wt=[],Et,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=wt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Et=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL(Et))));){if(kt=!0,nt.position++,skipSeparationSpace(nt,!0,-1)&&nt.lineIndent<=rt){wt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode(nt,rt,CONTEXT_BLOCK_IN,!1,!0),wt.push(nt.result),skipSeparationSpace(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=st,nt.anchor=bt,nt.kind="sequence",nt.result=wt,!0):!1}function readBlockMapping(nt,rt,it){var st,bt,wt,Et,kt,Lt,Ot=nt.tag,Rt=nt.anchor,Dt={},Bt=Object.create(null),Ft=null,Yt=null,Jt=null,Wt=!1,Qt=!1,rn;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=Dt),rn=nt.input.charCodeAt(nt.position);rn!==0;){if(!Wt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),st=nt.input.charCodeAt(nt.position+1),wt=nt.line,(rn===63||rn===58)&&is_WS_OR_EOL(st))rn===63?(Wt&&(storeMappingPair(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Jt=null),Qt=!0,Wt=!0,bt=!0):Wt?(Wt=!1,bt=!0):throwError(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,rn=st;else{if(Et=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode(nt,it,CONTEXT_FLOW_OUT,!1,!0))break;if(nt.line===wt){for(rn=nt.input.charCodeAt(nt.position);is_WHITE_SPACE(rn);)rn=nt.input.charCodeAt(++nt.position);if(rn===58)rn=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL(rn)||throwError(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Wt&&(storeMappingPair(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Jt=null),Qt=!0,Wt=!1,bt=!1,Ft=nt.tag,Yt=nt.result;else if(Qt)throwError(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=Ot,nt.anchor=Rt,!0}else if(Qt)throwError(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=Ot,nt.anchor=Rt,!0}if((nt.line===wt||nt.lineIndent>rt)&&(Wt&&(Et=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode(nt,rt,CONTEXT_BLOCK_OUT,!0,bt)&&(Wt?Yt=nt.result:Jt=nt.result),Wt||(storeMappingPair(nt,Dt,Bt,Ft,Yt,Jt,Et,kt,Lt),Ft=Yt=Jt=null),skipSeparationSpace(nt,!0,-1),rn=nt.input.charCodeAt(nt.position)),(nt.line===wt||nt.lineIndent>rt)&&rn!==0)throwError(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Wt&&storeMappingPair(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Qt&&(nt.tag=Ot,nt.anchor=Rt,nt.kind="mapping",nt.result=Dt),Qt}function readTagProperty(nt){var rt,it=!1,st=!1,bt,wt,Et;if(Et=nt.input.charCodeAt(nt.position),Et!==33)return!1;if(nt.tag!==null&&throwError(nt,"duplication of a tag property"),Et=nt.input.charCodeAt(++nt.position),Et===60?(it=!0,Et=nt.input.charCodeAt(++nt.position)):Et===33?(st=!0,bt="!!",Et=nt.input.charCodeAt(++nt.position)):bt="!",rt=nt.position,it){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&Et!==62);nt.position<nt.length?(wt=nt.input.slice(rt,nt.position),Et=nt.input.charCodeAt(++nt.position)):throwError(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Et!==0&&!is_WS_OR_EOL(Et);)Et===33&&(st?throwError(nt,"tag suffix cannot contain exclamation marks"):(bt=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE.test(bt)||throwError(nt,"named tag handle cannot contain such characters"),st=!0,rt=nt.position+1)),Et=nt.input.charCodeAt(++nt.position);wt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS.test(wt)&&throwError(nt,"tag suffix cannot contain flow indicator characters")}wt&&!PATTERN_TAG_URI.test(wt)&&throwError(nt,"tag name cannot contain such characters: "+wt);try{wt=decodeURIComponent(wt)}catch{throwError(nt,"tag name is malformed: "+wt)}return it?nt.tag=wt:_hasOwnProperty$1.call(nt.tagMap,bt)?nt.tag=nt.tagMap[bt]+wt:bt==="!"?nt.tag="!"+wt:bt==="!!"?nt.tag="tag:yaml.org,2002:"+wt:throwError(nt,'undeclared tag handle "'+bt+'"'),!0}function readAnchorProperty(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL(it)&&!is_FLOW_INDICATOR(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias(nt){var rt,it,st;if(st=nt.input.charCodeAt(nt.position),st!==42)return!1;for(st=nt.input.charCodeAt(++nt.position),rt=nt.position;st!==0&&!is_WS_OR_EOL(st)&&!is_FLOW_INDICATOR(st);)st=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1.call(nt.anchorMap,it)||throwError(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace(nt,!0,-1),!0}function composeNode(nt,rt,it,st,bt){var wt,Et,kt,Lt=1,Ot=!1,Rt=!1,Dt,Bt,Ft,Yt,Jt,Wt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,wt=Et=kt=CONTEXT_BLOCK_OUT===it||CONTEXT_BLOCK_IN===it,st&&skipSeparationSpace(nt,!0,-1)&&(Ot=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty(nt)||readAnchorProperty(nt);)skipSeparationSpace(nt,!0,-1)?(Ot=!0,kt=wt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=Ot||bt),(Lt===1||CONTEXT_BLOCK_OUT===it)&&(CONTEXT_FLOW_IN===it||CONTEXT_FLOW_OUT===it?Jt=rt:Jt=rt+1,Wt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence(nt,Wt)||readBlockMapping(nt,Wt,Jt))||readFlowCollection(nt,Jt)?Rt=!0:(Et&&readBlockScalar(nt,Jt)||readSingleQuotedScalar(nt,Jt)||readDoubleQuotedScalar(nt,Jt)?Rt=!0:readAlias(nt)?(Rt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError(nt,"alias node should not have any properties")):readPlainScalar(nt,Jt,CONTEXT_FLOW_IN===it)&&(Rt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Rt=kt&&readBlockSequence(nt,Wt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),Dt=0,Bt=nt.implicitTypes.length;Dt<Bt;Dt+=1)if(Yt=nt.implicitTypes[Dt],Yt.resolve(nt.result)){nt.result=Yt.construct(nt.result),nt.tag=Yt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Yt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Yt=null,Ft=nt.typeMap.multi[nt.kind||"fallback"],Dt=0,Bt=Ft.length;Dt<Bt;Dt+=1)if(nt.tag.slice(0,Ft[Dt].tag.length)===Ft[Dt].tag){Yt=Ft[Dt];break}Yt||throwError(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Yt.kind!==nt.kind&&throwError(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Yt.kind+'", not "'+nt.kind+'"'),Yt.resolve(nt.result,nt.tag)?(nt.result=Yt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Rt}function readDocument(nt){var rt=nt.position,it,st,bt,wt=!1,Et;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Et=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace(nt,!0,-1),Et=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Et!==37));){for(wt=!0,Et=nt.input.charCodeAt(++nt.position),it=nt.position;Et!==0&&!is_WS_OR_EOL(Et);)Et=nt.input.charCodeAt(++nt.position);for(st=nt.input.slice(it,nt.position),bt=[],st.length<1&&throwError(nt,"directive name must not be less than one character in length");Et!==0;){for(;is_WHITE_SPACE(Et);)Et=nt.input.charCodeAt(++nt.position);if(Et===35){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&!is_EOL(Et));break}if(is_EOL(Et))break;for(it=nt.position;Et!==0&&!is_WS_OR_EOL(Et);)Et=nt.input.charCodeAt(++nt.position);bt.push(nt.input.slice(it,nt.position))}Et!==0&&readLineBreak(nt),_hasOwnProperty$1.call(directiveHandlers,st)?directiveHandlers[st](nt,st,bt):throwWarning(nt,'unknown document directive "'+st+'"')}if(skipSeparationSpace(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace(nt,!0,-1)):wt&&throwError(nt,"directives end mark is expected"),composeNode(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(nt.input.slice(rt,nt.position))&&throwWarning(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace(nt,!0,-1));return}if(nt.position<nt.length-1)throwError(nt,"end of the stream or a document separator is expected");else return}function loadDocuments(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1(nt,rt),st=nt.indexOf("\0");for(st!==-1&&(it.position=st,throwError(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument(it);return it.documents}function loadAll$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var st=loadDocuments(nt,it);if(typeof rt!="function")return st;for(var bt=0,wt=st.length;bt<wt;bt+=1)rt(st[bt])}function load$1(nt,rt){var it=loadDocuments(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader={loadAll:loadAll_1,load:load_1},FAILSAFE_SCHEMA=failsafe,load=loader.load;const frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function extractFrontMatter(nt,rt){var it;const st=nt.match(frontMatterRegex);if(st){const bt=load(st[1],{schema:FAILSAFE_SCHEMA});return bt!=null&&bt.title&&((it=rt.setDiagramTitle)==null||it.call(rt,bt.title)),nt.slice(st[0].length)}else return nt}const directive$1=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyComment=/\s*%%.*\n/gm,detectors={},detectType=function(nt,rt){nt=nt.replace(frontMatterRegex,"").replace(directive$1,"").replace(anyComment,`
`);for(const[it,{detector:st}]of Object.entries(detectors))if(st(nt,rt))return it;throw new Error(`No diagram type detected for text: ${nt}`)},addDetector=(nt,rt,it)=>{if(detectors[nt])throw new Error(`Detector with key ${nt} already exists`);detectors[nt]={detector:rt,loader:it},log$1.debug(`Detector with key ${nt} added${it?" with loader":""}`)},getDiagramLoader=nt=>detectors[nt].loader,assignWithDepth=function(nt,rt,it){const{depth:st,clobber:bt}=Object.assign({depth:2,clobber:!1},it);return Array.isArray(rt)&&!Array.isArray(nt)?(rt.forEach(wt=>assignWithDepth(nt,wt,it)),nt):Array.isArray(rt)&&Array.isArray(nt)?(rt.forEach(wt=>{nt.includes(wt)||nt.push(wt)}),nt):nt===void 0||st<=0?nt!=null&&typeof nt=="object"&&typeof rt=="object"?Object.assign(nt,rt):rt:(rt!==void 0&&typeof nt=="object"&&typeof rt=="object"&&Object.keys(rt).forEach(wt=>{typeof rt[wt]=="object"&&(nt[wt]===void 0||typeof nt[wt]=="object")?(nt[wt]===void 0&&(nt[wt]=Array.isArray(rt[wt])?[]:{}),nt[wt]=assignWithDepth(nt[wt],rt[wt],{depth:st-1,clobber:bt})):(bt||typeof nt[wt]!="object"&&typeof rt[wt]!="object")&&(nt[wt]=rt[wt])}),nt)},assignWithDepth$1=assignWithDepth,d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directive=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=function(nt,rt){const it=detectDirective(nt,/(?:init\b)|(?:initialize\b)/);let st={};if(Array.isArray(it)){const bt=it.map(wt=>wt.args);directiveSanitizer(bt),st=assignWithDepth$1(st,[...bt])}else st=it.args;if(st){let bt=detectType(nt,rt);["config"].forEach(wt=>{st[wt]!==void 0&&(bt==="flowchart-v2"&&(bt="flowchart"),st[bt]=st[wt],delete st[wt])})}return st},detectDirective=function(nt,rt=null){try{const it=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");nt=nt.trim().replace(it,"").replace(/'/gm,'"'),log$1.debug(`Detecting diagram directive${rt!==null?" type:"+rt:""} based on the text:${nt}`);let st;const bt=[];for(;(st=directive.exec(nt))!==null;)if(st.index===directive.lastIndex&&directive.lastIndex++,st&&!rt||rt&&st[1]&&st[1].match(rt)||rt&&st[2]&&st[2].match(rt)){const wt=st[1]?st[1]:st[2],Et=st[3]?st[3].trim():st[4]?JSON.parse(st[4].trim()):null;bt.push({type:wt,args:Et})}return bt.length===0&&bt.push({type:nt,args:null}),bt.length===1?bt[0]:bt}catch(it){return log$1.error(`ERROR: ${it.message} - Unable to parse directive
      ${rt!==null?" type:"+rt:""} based on the text:${nt}`),{type:null,args:null}}},isSubstringInArray=function(nt,rt){for(const[it,st]of rt.entries())if(st.match(nt))return it;return-1};function interpolateToCurve(nt,rt){if(!nt)return rt;const it=`curve${nt.charAt(0).toUpperCase()+nt.slice(1)}`;return d3CurveTypes[it]||rt}function formatUrl(nt,rt){const it=nt.trim();if(it)return rt.securityLevel!=="loose"?sanitizeUrl_1(it):it}const runFunc=(nt,...rt)=>{const it=nt.split("."),st=it.length-1,bt=it[st];let wt=window;for(let Et=0;Et<st;Et++)if(wt=wt[it[Et]],!wt)return;wt[bt](...rt)};function distance(nt,rt){return nt&&rt?Math.sqrt(Math.pow(rt.x-nt.x,2)+Math.pow(rt.y-nt.y,2)):0}function traverseEdge(nt){let rt,it=0;nt.forEach(wt=>{it+=distance(wt,rt),rt=wt});let st=it/2,bt;return rt=void 0,nt.forEach(wt=>{if(rt&&!bt){const Et=distance(wt,rt);if(Et<st)st-=Et;else{const kt=st/Et;kt<=0&&(bt=rt),kt>=1&&(bt={x:wt.x,y:wt.y}),kt>0&&kt<1&&(bt={x:(1-kt)*rt.x+kt*wt.x,y:(1-kt)*rt.y+kt*wt.y})}}rt=wt}),bt}function calcLabelPosition(nt){return nt.length===1?nt[0]:traverseEdge(nt)}const calcCardinalityPosition=(nt,rt,it)=>{let st;log$1.info(`our points ${JSON.stringify(rt)}`),rt[0]!==it&&(rt=rt.reverse());let wt=25,Et;st=void 0,rt.forEach(Rt=>{if(st&&!Et){const Dt=distance(Rt,st);if(Dt<wt)wt-=Dt;else{const Bt=wt/Dt;Bt<=0&&(Et=st),Bt>=1&&(Et={x:Rt.x,y:Rt.y}),Bt>0&&Bt<1&&(Et={x:(1-Bt)*st.x+Bt*Rt.x,y:(1-Bt)*st.y+Bt*Rt.y})}}st=Rt});const kt=nt?10:5,Lt=Math.atan2(rt[0].y-Et.y,rt[0].x-Et.x),Ot={x:0,y:0};return Ot.x=Math.sin(Lt)*kt+(rt[0].x+Et.x)/2,Ot.y=-Math.cos(Lt)*kt+(rt[0].y+Et.y)/2,Ot};function calcTerminalLabelPosition(nt,rt,it){let st=JSON.parse(JSON.stringify(it)),bt;log$1.info("our points",st),rt!=="start_left"&&rt!=="start_right"&&(st=st.reverse()),st.forEach(Dt=>{bt=Dt});let Et=25+nt,kt;bt=void 0,st.forEach(Dt=>{if(bt&&!kt){const Bt=distance(Dt,bt);if(Bt<Et)Et-=Bt;else{const Ft=Et/Bt;Ft<=0&&(kt=bt),Ft>=1&&(kt={x:Dt.x,y:Dt.y}),Ft>0&&Ft<1&&(kt={x:(1-Ft)*bt.x+Ft*Dt.x,y:(1-Ft)*bt.y+Ft*Dt.y})}}bt=Dt});const Lt=10+nt*.5,Ot=Math.atan2(st[0].y-kt.y,st[0].x-kt.x),Rt={x:0,y:0};return Rt.x=Math.sin(Ot)*Lt+(st[0].x+kt.x)/2,Rt.y=-Math.cos(Ot)*Lt+(st[0].y+kt.y)/2,rt==="start_left"&&(Rt.x=Math.sin(Ot+Math.PI)*Lt+(st[0].x+kt.x)/2,Rt.y=-Math.cos(Ot+Math.PI)*Lt+(st[0].y+kt.y)/2),rt==="end_right"&&(Rt.x=Math.sin(Ot-Math.PI)*Lt+(st[0].x+kt.x)/2-5,Rt.y=-Math.cos(Ot-Math.PI)*Lt+(st[0].y+kt.y)/2-5),rt==="end_left"&&(Rt.x=Math.sin(Ot)*Lt+(st[0].x+kt.x)/2-5,Rt.y=-Math.cos(Ot)*Lt+(st[0].y+kt.y)/2-5),Rt}function getStylesFromArray(nt){let rt="",it="";for(const st of nt)st!==void 0&&(st.startsWith("color:")||st.startsWith("text-align:")?it=it+st+";":rt=rt+st+";");return{style:rt,labelStyle:it}}let cnt=0;const generateId$1=()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt);function makeid(nt){let rt="";const it="0123456789abcdef",st=it.length;for(let bt=0;bt<nt;bt++)rt+=it.charAt(Math.floor(Math.random()*st));return rt}const random=nt=>makeid(nt.length),getTextObj$2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},drawSimpleText=function(nt,rt){const it=rt.text.replace(common$1.lineBreakRegex," "),st=nt.append("text");st.attr("x",rt.x),st.attr("y",rt.y),st.style("text-anchor",rt.anchor),st.style("font-family",rt.fontFamily),st.style("font-size",rt.fontSize),st.style("font-weight",rt.fontWeight),st.attr("fill",rt.fill),rt.class!==void 0&&st.attr("class",rt.class);const bt=st.append("tspan");return bt.attr("x",rt.x+rt.textMargin*2),bt.attr("fill",rt.fill),bt.text(it),st},wrapLabel=memoize((nt,rt,it)=>{if(!nt||(it=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},it),common$1.lineBreakRegex.test(nt)))return nt;const st=nt.split(" "),bt=[];let wt="";return st.forEach((Et,kt)=>{const Lt=calculateTextWidth(`${Et} `,it),Ot=calculateTextWidth(wt,it);if(Lt>rt){const{hyphenatedStrings:Bt,remainingWord:Ft}=breakString(Et,rt,"-",it);bt.push(wt,...Bt),wt=Ft}else Ot+Lt>=rt?(bt.push(wt),wt=Et):wt=[wt,Et].filter(Boolean).join(" ");kt+1===st.length&&bt.push(wt)}),bt.filter(Et=>Et!=="").join(it.joinWith)},(nt,rt,it)=>`${nt}${rt}${it.fontSize}${it.fontWeight}${it.fontFamily}${it.joinWith}`),breakString=memoize((nt,rt,it="-",st)=>{st=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},st);const bt=[...nt],wt=[];let Et="";return bt.forEach((kt,Lt)=>{const Ot=`${Et}${kt}`;if(calculateTextWidth(Ot,st)>=rt){const Dt=Lt+1,Bt=bt.length===Dt,Ft=`${Ot}${it}`;wt.push(Bt?Ot:Ft),Et=""}else Et=Ot}),{hyphenatedStrings:wt,remainingWord:Et}},(nt,rt,it="-",st)=>`${nt}${rt}${it}${st.fontSize}${st.fontWeight}${st.fontFamily}`);function calculateTextHeight(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},rt),calculateTextDimensions(nt,rt).height}function calculateTextWidth(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt),calculateTextDimensions(nt,rt).width}const calculateTextDimensions=memoize((nt,rt)=>{rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt);const{fontSize:it,fontFamily:st,fontWeight:bt}=rt;if(!nt)return{width:0,height:0};const wt=["sans-serif",st],Et=nt.split(common$1.lineBreakRegex),kt=[],Lt=select("body");if(!Lt.remove)return{width:0,height:0,lineHeight:0};const Ot=Lt.append("svg");for(const Dt of wt){let Bt=0;const Ft={width:0,height:0,lineHeight:0};for(const Yt of Et){const Jt=getTextObj$2();Jt.text=Yt;const Wt=drawSimpleText(Ot,Jt).style("font-size",it).style("font-weight",bt).style("font-family",Dt),Qt=(Wt._groups||Wt)[0][0].getBBox();Ft.width=Math.round(Math.max(Ft.width,Qt.width)),Bt=Math.round(Qt.height),Ft.height+=Bt,Ft.lineHeight=Math.round(Math.max(Ft.lineHeight,Bt))}kt.push(Ft)}Ot.remove();const Rt=isNaN(kt[1].height)||isNaN(kt[1].width)||isNaN(kt[1].lineHeight)||kt[0].height>kt[1].height&&kt[0].width>kt[1].width&&kt[0].lineHeight>kt[1].lineHeight?0:1;return kt[Rt]},(nt,rt)=>`${nt}${rt.fontSize}${rt.fontWeight}${rt.fontFamily}`),initIdGenerator=class{constructor(rt,it){this.deterministic=rt,this.seed=it,this.count=it?it.length:0}next(){return this.deterministic?this.count++:Date.now()}};let decoder;const entityDecode=function(nt){return decoder=decoder||document.createElement("div"),nt=escape(nt).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=nt,unescape(decoder.textContent)},directiveSanitizer=nt=>{if(log$1.debug("directiveSanitizer called with",nt),typeof nt=="object"&&(nt.length?nt.forEach(rt=>directiveSanitizer(rt)):Object.keys(nt).forEach(rt=>{log$1.debug("Checking key",rt),rt.startsWith("__")&&(log$1.debug("sanitize deleting __ option",rt),delete nt[rt]),rt.includes("proto")&&(log$1.debug("sanitize deleting proto option",rt),delete nt[rt]),rt.includes("constr")&&(log$1.debug("sanitize deleting constr option",rt),delete nt[rt]),rt.includes("themeCSS")&&(log$1.debug("sanitizing themeCss option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("fontFamily")&&(log$1.debug("sanitizing fontFamily option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("altFontFamily")&&(log$1.debug("sanitizing altFontFamily option"),nt[rt]=sanitizeCss(nt[rt])),configKeys.includes(rt)?typeof nt[rt]=="object"&&(log$1.debug("sanitize deleting object",rt),directiveSanitizer(nt[rt])):(log$1.debug("sanitize deleting option",rt),delete nt[rt])})),nt.themeVariables){const rt=Object.keys(nt.themeVariables);for(const it of rt){const st=nt.themeVariables[it];st&&st.match&&!st.match(/^[\d "#%(),.;A-Za-z]+$/)&&(nt.themeVariables[it]="")}}log$1.debug("After sanitization",nt)},sanitizeCss=nt=>{let rt=0,it=0;for(const st of nt){if(rt<it)return"{ /* ERROR: Unbalanced CSS */ }";st==="{"?rt++:st==="}"&&it++}return rt!==it?"{ /* ERROR: Unbalanced CSS */ }":nt};function isDetailedError(nt){return"str"in nt}function getErrorMessage(nt){return nt instanceof Error?nt.message:String(nt)}const insertTitle=(nt,rt,it,st)=>{if(!st)return;const bt=nt.node().getBBox();nt.append("text").text(st).attr("x",bt.x+bt.width/2).attr("y",-it).attr("class",rt)},utils={assignWithDepth:assignWithDepth$1,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId:generateId$1,random,runFunc,entityDecode,initIdGenerator,directiveSanitizer,sanitizeCss,insertTitle},name="mermaid",version$1="9.3.0",description$1="Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main="./dist/mermaid.min.js",module$1="./dist/mermaid.core.mjs",types$8="./dist/mermaid.d.ts",exports$1={".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords=["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts={clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},repository={type:"git",url:"https://github.com/mermaid-js/mermaid"},author="Knut Sveidqvist",license="MIT",standard={ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies={"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies={"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},files=["dist","README.md"],sideEffects=["**/*.css","**/*.scss"],pkg={name,version:version$1,description:description$1,main,module:module$1,types:types$8,exports:exports$1,keywords,scripts,repository,author,license,standard,dependencies,devDependencies,files,sideEffects},defaultConfig=Object.freeze(config$2);let siteConfig=assignWithDepth$1({},defaultConfig),configFromInitialize,directives=[],currentConfig=assignWithDepth$1({},defaultConfig);const updateCurrentConfig=(nt,rt)=>{let it=assignWithDepth$1({},nt),st={};for(const bt of rt)sanitize(bt),st=assignWithDepth$1(st,bt);if(it=assignWithDepth$1(it,st),st.theme&&st.theme in theme){const bt=assignWithDepth$1({},configFromInitialize),wt=assignWithDepth$1(bt.themeVariables||{},st.themeVariables);it.theme&&it.theme in theme&&(it.themeVariables=theme[it.theme].getThemeVariables(wt))}return currentConfig=it,checkConfig(currentConfig),currentConfig},setSiteConfig=nt=>(siteConfig=assignWithDepth$1({},defaultConfig),siteConfig=assignWithDepth$1(siteConfig,nt),nt.theme&&theme[nt.theme]&&(siteConfig.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),saveConfigFromInitialize=nt=>{configFromInitialize=assignWithDepth$1({},nt)},updateSiteConfig=nt=>(siteConfig=assignWithDepth$1(siteConfig,nt),updateCurrentConfig(siteConfig,directives),siteConfig),getSiteConfig=()=>assignWithDepth$1({},siteConfig),setConfig=nt=>(checkConfig(nt),assignWithDepth$1(currentConfig,nt),getConfig$1()),getConfig$1=()=>assignWithDepth$1({},currentConfig),sanitize=nt=>{var rt;["secure",...(rt=siteConfig.secure)!=null?rt:[]].forEach(it=>{nt[it]!==void 0&&(log$1.debug(`Denied attempt to modify a secure key ${it}`,nt[it]),delete nt[it])}),Object.keys(nt).forEach(it=>{it.indexOf("__")===0&&delete nt[it]}),Object.keys(nt).forEach(it=>{typeof nt[it]=="string"&&(nt[it].includes("<")||nt[it].includes(">")||nt[it].includes("url(data:"))&&delete nt[it],typeof nt[it]=="object"&&sanitize(nt[it])})},addDirective=nt=>{nt.fontFamily&&(nt.themeVariables?nt.themeVariables.fontFamily||(nt.themeVariables={fontFamily:nt.fontFamily}):nt.themeVariables={fontFamily:nt.fontFamily}),directives.push(nt),updateCurrentConfig(siteConfig,directives)},reset=(nt=siteConfig)=>{directives=[],updateCurrentConfig(nt,directives)};var ConfigWarning=(nt=>(nt.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",nt))(ConfigWarning||{});const issuedWarnings={},issueWarning=nt=>{issuedWarnings[nt]||(log$1.warn(ConfigWarning[nt]),issuedWarnings[nt]=!0)},checkConfig=nt=>{!nt||(nt.lazyLoadedDiagrams||nt.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},d3Attrs=function(nt,rt){for(let it of rt)nt.attr(it[0],it[1])},calculateSvgSizeAttrs=function(nt,rt,it){let st=new Map;return it?(st.set("width","100%"),st.set("style",`max-width: ${rt}px;`)):(st.set("height",nt),st.set("width",rt)),st},configureSvgSize=function(nt,rt,it,st){const bt=calculateSvgSizeAttrs(rt,it,st);d3Attrs(nt,bt)},setupGraphViewbox$1=function(nt,rt,it,st){const bt=rt.node().getBBox(),wt=bt.width,Et=bt.height;log$1.info(`SVG bounds: ${wt}x${Et}`,bt);let kt=0,Lt=0;log$1.info(`Graph bounds: ${kt}x${Lt}`,nt),kt=wt+it*2,Lt=Et+it*2,log$1.info(`Calculated bounds: ${kt}x${Lt}`),configureSvgSize(rt,Lt,kt,st);const Ot=`${bt.x-it} ${bt.y-it} ${bt.width+2*it} ${bt.height+2*it}`;rt.attr("viewBox",Ot)},getStyles$e=nt=>`g.classGroup text {
  fill: ${nt.nodeBorder};
  fill: ${nt.classText};
  stroke: none;
  font-family: ${nt.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${nt.classText};
}
.edgeLabel .label rect {
  fill: ${nt.mainBkg};
}
.label text {
  fill: ${nt.classText};
}
.edgeLabel .label span {
  background: ${nt.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${nt.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.classGroup line {
  stroke: ${nt.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${nt.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${nt.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,classStyles=getStyles$e,getStyles$d=nt=>`
  .entityBox {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${nt.attributeBackgroundColorOdd};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${nt.attributeBackgroundColorEven};
    stroke: ${nt.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${nt.tertiaryColor};
    opacity: 0.7;
    background-color: ${nt.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${nt.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }    
`,erStyles=getStyles$d,getStyles$c=()=>"",errorStyles=getStyles$c,getStyles$b=nt=>`.label {
    font-family: ${nt.fontFamily};
    color: ${nt.nodeTextColor||nt.textColor};
  }
  .cluster-label text {
    fill: ${nt.titleColor};
  }
  .cluster-label span {
    color: ${nt.titleColor};
  }

  .label text,span {
    fill: ${nt.nodeTextColor||nt.textColor};
    color: ${nt.nodeTextColor||nt.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${nt.edgeLabelBackground};
      fill: ${nt.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${nt.clusterBkg};
    stroke: ${nt.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  .cluster span {
    color: ${nt.titleColor};
  }
  /* .cluster div {
    color: ${nt.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${nt.fontFamily};
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
`,flowStyles=getStyles$b,getStyles$a=nt=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${nt.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${nt.sectionBkgColor};
  }

  .section2 {
    fill: ${nt.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${nt.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${nt.titleColor};
  }

  .sectionTitle1 {
    fill: ${nt.titleColor};
  }

  .sectionTitle2 {
    fill: ${nt.titleColor};
  }

  .sectionTitle3 {
    fill: ${nt.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${nt.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${nt.fontFamily};
      fill: ${nt.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${nt.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${nt.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${nt.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${nt.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${nt.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${nt.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${nt.taskBkgColor};
    stroke: ${nt.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${nt.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${nt.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${nt.activeTaskBkgColor};
    stroke: ${nt.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${nt.doneTaskBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,ganttStyles=getStyles$a,getStyles$9=()=>"",infoStyles=getStyles$9,getStyles$8=nt=>`
  .pieCircle{
    stroke: ${nt.pieStrokeColor};
    stroke-width : ${nt.pieStrokeWidth};
    opacity : ${nt.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${nt.pieTitleTextSize};
    fill: ${nt.pieTitleTextColor};
    font-family: ${nt.fontFamily};
  }
  .slice {
    font-family: ${nt.fontFamily};
    fill: ${nt.pieSectionTextColor};
    font-size:${nt.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${nt.pieLegendTextColor};
    font-family: ${nt.fontFamily};
    font-size: ${nt.pieLegendTextSize};
  }
`,pieStyles=getStyles$8,getStyles$7=nt=>`

  marker {
    fill: ${nt.relationColor};
    stroke: ${nt.relationColor};
  }

  marker.cross {
    stroke: ${nt.lineColor};
  }

  svg {
    font-family: ${nt.fontFamily};
    font-size: ${nt.fontSize};
  }

  .reqBox {
    fill: ${nt.requirementBackground};
    fill-opacity: 100%;
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${nt.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${nt.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${nt.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${nt.relationLabelColor};
  }

`,requirementStyles=getStyles$7,getStyles$6=nt=>`.actor {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }

  text.actor > tspan {
    fill: ${nt.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${nt.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${nt.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${nt.signalColor};
  }

  #arrowhead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .sequenceNumber {
    fill: ${nt.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${nt.signalColor};
  }

  #crosshead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .messageText {
    fill: ${nt.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${nt.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${nt.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${nt.noteBorderColor};
    fill: ${nt.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${nt.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation1 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation2 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${nt.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
    stroke-width: 2px;
  }
`,sequenceStyles=getStyles$6,getStyles$5=nt=>`
defs #statediagram-barbEnd {
    fill: ${nt.transitionColor};
    stroke: ${nt.transitionColor};
  }
g.stateGroup text {
  fill: ${nt.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${nt.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${nt.stateLabelColor};
}

g.stateGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.stateGroup line {
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${nt.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${nt.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${nt.noteBorderColor};
  fill: ${nt.noteBkgColor};

  text {
    fill: ${nt.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${nt.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}

.stateLabel text {
  fill: ${nt.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node .fork-join {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node circle.state-end {
  fill: ${nt.innerEndBackground};
  stroke: ${nt.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${nt.compositeBackground||nt.background};
  // stroke: ${nt.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${nt.stateBkg||nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${nt.lineColor};
}

.statediagram-cluster rect {
  fill: ${nt.compositeTitleBackground};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${nt.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${nt.stateBorder||nt.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${nt.compositeBackground||nt.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${nt.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${nt.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${nt.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${nt.lineColor};
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,stateStyles=getStyles$5,getStyles$4=nt=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${nt.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${nt.textColor}
  }

  .legend {
    fill: ${nt.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${nt.textColor}
  }

  .face {
    ${nt.faceColor?`fill: ${nt.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${nt.fillType0?`fill: ${nt.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${nt.fillType0?`fill: ${nt.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${nt.fillType0?`fill: ${nt.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${nt.fillType0?`fill: ${nt.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${nt.fillType0?`fill: ${nt.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${nt.fillType0?`fill: ${nt.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${nt.fillType0?`fill: ${nt.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${nt.fillType0?`fill: ${nt.fillType7}`:""};
  }

  .actor-0 {
    ${nt.actor0?`fill: ${nt.actor0}`:""};
  }
  .actor-1 {
    ${nt.actor1?`fill: ${nt.actor1}`:""};
  }
  .actor-2 {
    ${nt.actor2?`fill: ${nt.actor2}`:""};
  }
  .actor-3 {
    ${nt.actor3?`fill: ${nt.actor3}`:""};
  }
  .actor-4 {
    ${nt.actor4?`fill: ${nt.actor4}`:""};
  }
  .actor-5 {
    ${nt.actor5?`fill: ${nt.actor5}`:""};
  }
`,journeyStyles=getStyles$4,getStyles$3=nt=>`.person {
    stroke: ${nt.personBorder};
    fill: ${nt.personBkg};
  }
`,c4Styles=getStyles$3,themes={flowchart:flowStyles,"flowchart-v2":flowStyles,sequence:sequenceStyles,gantt:ganttStyles,classDiagram:classStyles,"classDiagram-v2":classStyles,class:classStyles,stateDiagram:stateStyles,state:stateStyles,info:infoStyles,pie:pieStyles,er:erStyles,error:errorStyles,journey:journeyStyles,requirement:requirementStyles,c4:c4Styles},getStyles$1=(nt,rt,it)=>{let st="";return nt in themes&&themes[nt]?st=themes[nt](it):log$1.warn(`No theme found for ${nt}`),` & {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
    fill: ${it.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${it.errorBkgColor};
  }
  & .error-text {
    fill: ${it.errorTextColor};
    stroke: ${it.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${it.lineColor};
    stroke: ${it.lineColor};
  }
  & .marker.cross {
    stroke: ${it.lineColor};
  }

  & svg {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
  }

  ${st}

  ${rt}
`},addStylesForDiagram=(nt,rt)=>{themes[nt]=rt},getStyles$2=getStyles$1,log=log$1,setLogLevel=setLogLevel$1,getConfig=getConfig$1,sanitizeText$4=nt=>sanitizeText$5(nt,getConfig()),setupGraphViewbox=setupGraphViewbox$1,diagrams={},registerDiagram=(nt,rt,it)=>{if(diagrams[nt])throw new Error(`Diagram ${nt} already registered.`);diagrams[nt]=rt,it&&addDetector(nt,it),addStylesForDiagram(nt,rt.styles),rt.injectUtils&&rt.injectUtils(log,setLogLevel,getConfig,sanitizeText$4,setupGraphViewbox)},getDiagram=nt=>{if(nt in diagrams)return diagrams[nt];throw new Error(`Diagram ${nt} not found.`)};var parser$b=function(){var nt=function(Tn,kn,In,Ln){for(In=In||{},Ln=Tn.length;Ln--;In[Tn[Ln]]=kn);return In},rt=[1,4],it=[1,7],st=[1,5],bt=[1,9],wt=[1,6],Et=[2,6],kt=[1,16],Lt=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],Ot=[8,14,20,22,24,25,27,29,32,37,40],Rt=[8,13,14,20,22,24,25,27,29,32,37,40],Dt=[1,26],Bt=[6,8,14,50,55],Ft=[8,14,55],Yt=[1,53],Jt=[1,52],Wt=[8,14,30,33,35,38,55],Qt=[1,67],rn=[1,68],sn=[1,69],on=[8,14,33,35,42,55],hn={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(kn,In,Ln,pn,Hn,yn,mr){var vn=yn.length-1;switch(Hn){case 3:return yn[vn];case 4:return yn[vn-1];case 5:return pn.setDirection(yn[vn-3]),yn[vn-1];case 7:pn.setOptions(yn[vn-1]),this.$=yn[vn];break;case 8:yn[vn-1]+=yn[vn],this.$=yn[vn-1];break;case 10:this.$=[];break;case 11:yn[vn-1].push(yn[vn]),this.$=yn[vn-1];break;case 12:this.$=yn[vn-1];break;case 17:this.$=yn[vn].trim(),pn.setAccTitle(this.$);break;case 18:case 19:this.$=yn[vn].trim(),pn.setAccDescription(this.$);break;case 20:pn.addSection(yn[vn].substr(8)),this.$=yn[vn].substr(8);break;case 22:pn.checkout(yn[vn]);break;case 23:pn.branch(yn[vn]);break;case 24:pn.branch(yn[vn-2],yn[vn]);break;case 25:pn.cherryPick(yn[vn],"",void 0);break;case 26:pn.cherryPick(yn[vn-2],"",yn[vn]);break;case 27:case 29:pn.cherryPick(yn[vn-2],"","");break;case 28:pn.cherryPick(yn[vn],"",yn[vn-2]);break;case 30:pn.merge(yn[vn],"","","");break;case 31:pn.merge(yn[vn-2],yn[vn],"","");break;case 32:pn.merge(yn[vn-2],"",yn[vn],"");break;case 33:pn.merge(yn[vn-2],"","",yn[vn]);break;case 34:pn.merge(yn[vn-4],yn[vn],"",yn[vn-2]);break;case 35:pn.merge(yn[vn-4],"",yn[vn],yn[vn-2]);break;case 36:pn.merge(yn[vn-4],"",yn[vn-2],yn[vn]);break;case 37:pn.merge(yn[vn-4],yn[vn-2],yn[vn],"");break;case 38:pn.merge(yn[vn-4],yn[vn-2],"",yn[vn]);break;case 39:pn.merge(yn[vn-4],yn[vn],yn[vn-2],"");break;case 40:pn.merge(yn[vn-6],yn[vn-4],yn[vn-2],yn[vn]);break;case 41:pn.merge(yn[vn-6],yn[vn],yn[vn-4],yn[vn-2]);break;case 42:pn.merge(yn[vn-6],yn[vn-4],yn[vn],yn[vn-2]);break;case 43:pn.merge(yn[vn-6],yn[vn-2],yn[vn-4],yn[vn]);break;case 44:pn.merge(yn[vn-6],yn[vn],yn[vn-2],yn[vn-4]);break;case 45:pn.merge(yn[vn-6],yn[vn-2],yn[vn],yn[vn-4]);break;case 46:pn.commit(yn[vn]);break;case 47:pn.commit("","",pn.commitType.NORMAL,yn[vn]);break;case 48:pn.commit("","",yn[vn],"");break;case 49:pn.commit("","",yn[vn],yn[vn-2]);break;case 50:pn.commit("","",yn[vn-2],yn[vn]);break;case 51:pn.commit("",yn[vn],pn.commitType.NORMAL,"");break;case 52:pn.commit("",yn[vn-2],pn.commitType.NORMAL,yn[vn]);break;case 53:pn.commit("",yn[vn],pn.commitType.NORMAL,yn[vn-2]);break;case 54:pn.commit("",yn[vn-2],yn[vn],"");break;case 55:pn.commit("",yn[vn],yn[vn-2],"");break;case 56:pn.commit("",yn[vn-4],yn[vn-2],yn[vn]);break;case 57:pn.commit("",yn[vn-4],yn[vn],yn[vn-2]);break;case 58:pn.commit("",yn[vn-2],yn[vn-4],yn[vn]);break;case 59:pn.commit("",yn[vn],yn[vn-4],yn[vn-2]);break;case 60:pn.commit("",yn[vn],yn[vn-2],yn[vn-4]);break;case 61:pn.commit("",yn[vn-2],yn[vn],yn[vn-4]);break;case 62:pn.commit(yn[vn],"",pn.commitType.NORMAL,"");break;case 63:pn.commit(yn[vn],"",pn.commitType.NORMAL,yn[vn-2]);break;case 64:pn.commit(yn[vn-2],"",pn.commitType.NORMAL,yn[vn]);break;case 65:pn.commit(yn[vn-2],"",yn[vn],"");break;case 66:pn.commit(yn[vn],"",yn[vn-2],"");break;case 67:pn.commit(yn[vn],yn[vn-2],pn.commitType.NORMAL,"");break;case 68:pn.commit(yn[vn-2],yn[vn],pn.commitType.NORMAL,"");break;case 69:pn.commit(yn[vn-4],"",yn[vn-2],yn[vn]);break;case 70:pn.commit(yn[vn-4],"",yn[vn],yn[vn-2]);break;case 71:pn.commit(yn[vn-2],"",yn[vn-4],yn[vn]);break;case 72:pn.commit(yn[vn],"",yn[vn-4],yn[vn-2]);break;case 73:pn.commit(yn[vn],"",yn[vn-2],yn[vn-4]);break;case 74:pn.commit(yn[vn-2],"",yn[vn],yn[vn-4]);break;case 75:pn.commit(yn[vn-4],yn[vn],yn[vn-2],"");break;case 76:pn.commit(yn[vn-4],yn[vn-2],yn[vn],"");break;case 77:pn.commit(yn[vn-2],yn[vn],yn[vn-4],"");break;case 78:pn.commit(yn[vn],yn[vn-2],yn[vn-4],"");break;case 79:pn.commit(yn[vn],yn[vn-4],yn[vn-2],"");break;case 80:pn.commit(yn[vn-2],yn[vn-4],yn[vn],"");break;case 81:pn.commit(yn[vn-4],yn[vn],pn.commitType.NORMAL,yn[vn-2]);break;case 82:pn.commit(yn[vn-4],yn[vn-2],pn.commitType.NORMAL,yn[vn]);break;case 83:pn.commit(yn[vn-2],yn[vn],pn.commitType.NORMAL,yn[vn-4]);break;case 84:pn.commit(yn[vn],yn[vn-2],pn.commitType.NORMAL,yn[vn-4]);break;case 85:pn.commit(yn[vn],yn[vn-4],pn.commitType.NORMAL,yn[vn-2]);break;case 86:pn.commit(yn[vn-2],yn[vn-4],pn.commitType.NORMAL,yn[vn]);break;case 87:pn.commit(yn[vn-6],yn[vn-4],yn[vn-2],yn[vn]);break;case 88:pn.commit(yn[vn-6],yn[vn-4],yn[vn],yn[vn-2]);break;case 89:pn.commit(yn[vn-6],yn[vn-2],yn[vn-4],yn[vn]);break;case 90:pn.commit(yn[vn-6],yn[vn],yn[vn-4],yn[vn-2]);break;case 91:pn.commit(yn[vn-6],yn[vn-2],yn[vn],yn[vn-4]);break;case 92:pn.commit(yn[vn-6],yn[vn],yn[vn-2],yn[vn-4]);break;case 93:pn.commit(yn[vn-4],yn[vn-6],yn[vn-2],yn[vn]);break;case 94:pn.commit(yn[vn-4],yn[vn-6],yn[vn],yn[vn-2]);break;case 95:pn.commit(yn[vn-2],yn[vn-6],yn[vn-4],yn[vn]);break;case 96:pn.commit(yn[vn],yn[vn-6],yn[vn-4],yn[vn-2]);break;case 97:pn.commit(yn[vn-2],yn[vn-6],yn[vn],yn[vn-4]);break;case 98:pn.commit(yn[vn],yn[vn-6],yn[vn-2],yn[vn-4]);break;case 99:pn.commit(yn[vn],yn[vn-4],yn[vn-2],yn[vn-6]);break;case 100:pn.commit(yn[vn-2],yn[vn-4],yn[vn],yn[vn-6]);break;case 101:pn.commit(yn[vn],yn[vn-2],yn[vn-4],yn[vn-6]);break;case 102:pn.commit(yn[vn-2],yn[vn],yn[vn-4],yn[vn-6]);break;case 103:pn.commit(yn[vn-4],yn[vn-2],yn[vn],yn[vn-6]);break;case 104:pn.commit(yn[vn-4],yn[vn],yn[vn-2],yn[vn-6]);break;case 105:pn.commit(yn[vn-2],yn[vn-4],yn[vn-6],yn[vn]);break;case 106:pn.commit(yn[vn],yn[vn-4],yn[vn-6],yn[vn-2]);break;case 107:pn.commit(yn[vn-2],yn[vn],yn[vn-6],yn[vn-4]);break;case 108:pn.commit(yn[vn],yn[vn-2],yn[vn-6],yn[vn-4]);break;case 109:pn.commit(yn[vn-4],yn[vn-2],yn[vn-6],yn[vn]);break;case 110:pn.commit(yn[vn-4],yn[vn],yn[vn-6],yn[vn-2]);break;case 111:this.$="";break;case 112:this.$=yn[vn];break;case 113:this.$=pn.commitType.NORMAL;break;case 114:this.$=pn.commitType.REVERSE;break;case 115:this.$=pn.commitType.HIGHLIGHT;break;case 118:pn.parseDirective("%%{","open_directive");break;case 119:pn.parseDirective(yn[vn],"type_directive");break;case 120:yn[vn]=yn[vn].trim().replace(/'/g,'"'),pn.parseDirective(yn[vn],"arg_directive");break;case 121:pn.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:rt,8:it,14:st,46:8,50:bt,55:wt},{1:[3]},{3:10,4:2,5:3,6:rt,8:it,14:st,46:8,50:bt,55:wt},{3:11,4:2,5:3,6:rt,8:it,14:st,46:8,50:bt,55:wt},{7:12,8:Et,9:[1,13],10:[1,14],11:15,14:kt},nt(Lt,[2,124]),nt(Lt,[2,125]),nt(Lt,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:Et,11:15,14:kt},{9:[1,21]},nt(Ot,[2,10],{12:22,13:[1,23]}),nt(Rt,[2,9]),{9:[1,25],48:24,53:Dt},nt([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:Et,11:15,14:kt},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},nt(Rt,[2,8]),nt(Bt,[2,116]),{49:45,52:[1,46]},nt(Bt,[2,121]),{1:[2,4]},{8:[1,47]},nt(Ot,[2,11]),{4:48,8:it,14:st,55:wt},nt(Ot,[2,13]),nt(Ft,[2,14]),nt(Ft,[2,15]),nt(Ft,[2,16]),{21:[1,49]},{23:[1,50]},nt(Ft,[2,19]),nt(Ft,[2,20]),nt(Ft,[2,21]),{28:51,34:Yt,54:Jt},nt(Ft,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:Yt,54:Jt},{33:[1,61],35:[1,62]},{28:63,34:Yt,54:Jt},{48:64,53:Dt},{53:[2,120]},{1:[2,5]},nt(Ot,[2,12]),nt(Ft,[2,17]),nt(Ft,[2,18]),nt(Ft,[2,22]),nt(Wt,[2,122]),nt(Wt,[2,123]),nt(Ft,[2,46]),{34:[1,65]},{39:66,43:Qt,44:rn,45:sn},{34:[1,70]},{34:[1,71]},nt(Ft,[2,112]),nt(Ft,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},nt(Ft,[2,23],{30:[1,78]}),nt(Bt,[2,117]),nt(Ft,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),nt(Ft,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),nt(on,[2,113]),nt(on,[2,114]),nt(on,[2,115]),nt(Ft,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),nt(Ft,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:Qt,44:rn,45:sn},{34:[1,93]},nt(Ft,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:Qt,44:rn,45:sn},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:Qt,44:rn,45:sn},{34:[1,106]},{34:[1,107]},{39:108,43:Qt,44:rn,45:sn},{34:[1,109]},nt(Ft,[2,31],{35:[1,111],38:[1,110]}),nt(Ft,[2,32],{33:[1,113],35:[1,112]}),nt(Ft,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},nt(Ft,[2,24]),nt(Ft,[2,49],{33:[1,120],42:[1,121]}),nt(Ft,[2,53],{38:[1,122],42:[1,123]}),nt(Ft,[2,63],{33:[1,125],38:[1,124]}),nt(Ft,[2,50],{33:[1,126],42:[1,127]}),nt(Ft,[2,55],{35:[1,128],42:[1,129]}),nt(Ft,[2,66],{33:[1,131],35:[1,130]}),nt(Ft,[2,52],{38:[1,132],42:[1,133]}),nt(Ft,[2,54],{35:[1,134],42:[1,135]}),nt(Ft,[2,67],{35:[1,137],38:[1,136]}),nt(Ft,[2,64],{33:[1,139],38:[1,138]}),nt(Ft,[2,65],{33:[1,141],35:[1,140]}),nt(Ft,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:Qt,44:rn,45:sn},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:Qt,44:rn,45:sn},nt(Ft,[2,26]),nt(Ft,[2,27]),nt(Ft,[2,28]),nt(Ft,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:Qt,44:rn,45:sn},{34:[1,153]},{39:154,43:Qt,44:rn,45:sn},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:Qt,44:rn,45:sn},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:Qt,44:rn,45:sn},{34:[1,167]},{39:168,43:Qt,44:rn,45:sn},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:Qt,44:rn,45:sn},{34:[1,173]},nt(Ft,[2,37],{35:[1,174]}),nt(Ft,[2,38],{38:[1,175]}),nt(Ft,[2,36],{33:[1,176]}),nt(Ft,[2,39],{35:[1,177]}),nt(Ft,[2,34],{38:[1,178]}),nt(Ft,[2,35],{33:[1,179]}),nt(Ft,[2,60],{42:[1,180]}),nt(Ft,[2,73],{33:[1,181]}),nt(Ft,[2,61],{42:[1,182]}),nt(Ft,[2,84],{38:[1,183]}),nt(Ft,[2,74],{33:[1,184]}),nt(Ft,[2,83],{38:[1,185]}),nt(Ft,[2,59],{42:[1,186]}),nt(Ft,[2,72],{33:[1,187]}),nt(Ft,[2,58],{42:[1,188]}),nt(Ft,[2,78],{35:[1,189]}),nt(Ft,[2,71],{33:[1,190]}),nt(Ft,[2,77],{35:[1,191]}),nt(Ft,[2,57],{42:[1,192]}),nt(Ft,[2,85],{38:[1,193]}),nt(Ft,[2,56],{42:[1,194]}),nt(Ft,[2,79],{35:[1,195]}),nt(Ft,[2,80],{35:[1,196]}),nt(Ft,[2,86],{38:[1,197]}),nt(Ft,[2,70],{33:[1,198]}),nt(Ft,[2,81],{38:[1,199]}),nt(Ft,[2,69],{33:[1,200]}),nt(Ft,[2,75],{35:[1,201]}),nt(Ft,[2,76],{35:[1,202]}),nt(Ft,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:Qt,44:rn,45:sn},{34:[1,206]},{34:[1,207]},{39:208,43:Qt,44:rn,45:sn},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:Qt,44:rn,45:sn},{34:[1,214]},{39:215,43:Qt,44:rn,45:sn},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:Qt,44:rn,45:sn},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:Qt,44:rn,45:sn},{34:[1,228]},{39:229,43:Qt,44:rn,45:sn},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:Qt,44:rn,45:sn},nt(Ft,[2,40]),nt(Ft,[2,42]),nt(Ft,[2,41]),nt(Ft,[2,43]),nt(Ft,[2,45]),nt(Ft,[2,44]),nt(Ft,[2,101]),nt(Ft,[2,102]),nt(Ft,[2,99]),nt(Ft,[2,100]),nt(Ft,[2,104]),nt(Ft,[2,103]),nt(Ft,[2,108]),nt(Ft,[2,107]),nt(Ft,[2,106]),nt(Ft,[2,105]),nt(Ft,[2,110]),nt(Ft,[2,109]),nt(Ft,[2,98]),nt(Ft,[2,97]),nt(Ft,[2,96]),nt(Ft,[2,95]),nt(Ft,[2,93]),nt(Ft,[2,94]),nt(Ft,[2,92]),nt(Ft,[2,91]),nt(Ft,[2,90]),nt(Ft,[2,89]),nt(Ft,[2,87]),nt(Ft,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(kn,In){if(In.recoverable)this.trace(kn);else{var Ln=new Error(kn);throw Ln.hash=In,Ln}},parse:function(kn){var In=this,Ln=[0],pn=[],Hn=[null],yn=[],mr=this.table,vn="",yr=0,Tr=0,Mr=2,rr=1,wr=yn.slice.call(arguments,1),fr=Object.create(this.lexer),gr={yy:{}};for(var Lr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Lr)&&(gr.yy[Lr]=this.yy[Lr]);fr.setInput(kn,gr.yy),gr.yy.lexer=fr,gr.yy.parser=this,typeof fr.yylloc>"u"&&(fr.yylloc={});var Pr=fr.yylloc;yn.push(Pr);var lr=fr.options&&fr.options.ranges;typeof gr.yy.parseError=="function"?this.parseError=gr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function qr(){var cr;return cr=pn.pop()||fr.lex()||rr,typeof cr!="number"&&(cr instanceof Array&&(pn=cr,cr=pn.pop()),cr=In.symbols_[cr]||cr),cr}for(var sr,pr,Er,ir,Pn={},nn,fn,cn,Nn;;){if(pr=Ln[Ln.length-1],this.defaultActions[pr]?Er=this.defaultActions[pr]:((sr===null||typeof sr>"u")&&(sr=qr()),Er=mr[pr]&&mr[pr][sr]),typeof Er>"u"||!Er.length||!Er[0]){var On="";Nn=[];for(nn in mr[pr])this.terminals_[nn]&&nn>Mr&&Nn.push("'"+this.terminals_[nn]+"'");fr.showPosition?On="Parse error on line "+(yr+1)+`:
`+fr.showPosition()+`
Expecting `+Nn.join(", ")+", got '"+(this.terminals_[sr]||sr)+"'":On="Parse error on line "+(yr+1)+": Unexpected "+(sr==rr?"end of input":"'"+(this.terminals_[sr]||sr)+"'"),this.parseError(On,{text:fr.match,token:this.terminals_[sr]||sr,line:fr.yylineno,loc:Pr,expected:Nn})}if(Er[0]instanceof Array&&Er.length>1)throw new Error("Parse Error: multiple actions possible at state: "+pr+", token: "+sr);switch(Er[0]){case 1:Ln.push(sr),Hn.push(fr.yytext),yn.push(fr.yylloc),Ln.push(Er[1]),sr=null,Tr=fr.yyleng,vn=fr.yytext,yr=fr.yylineno,Pr=fr.yylloc;break;case 2:if(fn=this.productions_[Er[1]][1],Pn.$=Hn[Hn.length-fn],Pn._$={first_line:yn[yn.length-(fn||1)].first_line,last_line:yn[yn.length-1].last_line,first_column:yn[yn.length-(fn||1)].first_column,last_column:yn[yn.length-1].last_column},lr&&(Pn._$.range=[yn[yn.length-(fn||1)].range[0],yn[yn.length-1].range[1]]),ir=this.performAction.apply(Pn,[vn,Tr,yr,gr.yy,Er[1],Hn,yn].concat(wr)),typeof ir<"u")return ir;fn&&(Ln=Ln.slice(0,-1*fn*2),Hn=Hn.slice(0,-1*fn),yn=yn.slice(0,-1*fn)),Ln.push(this.productions_[Er[1]][0]),Hn.push(Pn.$),yn.push(Pn._$),cn=mr[Ln[Ln.length-2]][Ln[Ln.length-1]],Ln.push(cn);break;case 3:return!0}}return!0}},mn=function(){var Tn={EOF:1,parseError:function(In,Ln){if(this.yy.parser)this.yy.parser.parseError(In,Ln);else throw new Error(In)},setInput:function(kn,In){return this.yy=In||this.yy||{},this._input=kn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var kn=this._input[0];this.yytext+=kn,this.yyleng++,this.offset++,this.match+=kn,this.matched+=kn;var In=kn.match(/(?:\r\n?|\n).*/g);return In?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),kn},unput:function(kn){var In=kn.length,Ln=kn.split(/(?:\r\n?|\n)/g);this._input=kn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-In),this.offset-=In;var pn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ln.length-1&&(this.yylineno-=Ln.length-1);var Hn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ln?(Ln.length===pn.length?this.yylloc.first_column:0)+pn[pn.length-Ln.length].length-Ln[0].length:this.yylloc.first_column-In},this.options.ranges&&(this.yylloc.range=[Hn[0],Hn[0]+this.yyleng-In]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(kn){this.unput(this.match.slice(kn))},pastInput:function(){var kn=this.matched.substr(0,this.matched.length-this.match.length);return(kn.length>20?"...":"")+kn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var kn=this.match;return kn.length<20&&(kn+=this._input.substr(0,20-kn.length)),(kn.substr(0,20)+(kn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var kn=this.pastInput(),In=new Array(kn.length+1).join("-");return kn+this.upcomingInput()+`
`+In+"^"},test_match:function(kn,In){var Ln,pn,Hn;if(this.options.backtrack_lexer&&(Hn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Hn.yylloc.range=this.yylloc.range.slice(0))),pn=kn[0].match(/(?:\r\n?|\n).*/g),pn&&(this.yylineno+=pn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pn?pn[pn.length-1].length-pn[pn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+kn[0].length},this.yytext+=kn[0],this.match+=kn[0],this.matches=kn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(kn[0].length),this.matched+=kn[0],Ln=this.performAction.call(this,this.yy,this,In,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ln)return Ln;if(this._backtrack){for(var yn in Hn)this[yn]=Hn[yn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var kn,In,Ln,pn;this._more||(this.yytext="",this.match="");for(var Hn=this._currentRules(),yn=0;yn<Hn.length;yn++)if(Ln=this._input.match(this.rules[Hn[yn]]),Ln&&(!In||Ln[0].length>In[0].length)){if(In=Ln,pn=yn,this.options.backtrack_lexer){if(kn=this.test_match(Ln,Hn[yn]),kn!==!1)return kn;if(this._backtrack){In=!1;continue}else return!1}else if(!this.options.flex)break}return In?(kn=this.test_match(In,Hn[pn]),kn!==!1?kn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var In=this.next();return In||this.lex()},begin:function(In){this.conditionStack.push(In)},popState:function(){var In=this.conditionStack.length-1;return In>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(In){return In=this.conditionStack.length-1-Math.abs(In||0),In>=0?this.conditionStack[In]:"INITIAL"},pushState:function(In){this.begin(In)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(In,Ln,pn,Hn){switch(pn){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return Tn}();hn.lexer=mn;function Cn(){this.yy={}}return Cn.prototype=hn,hn.Parser=Cn,new Cn}();parser$b.parser=parser$b;const gitGraphParser=parser$b,gitGraphDetector=nt=>nt.match(/^\s*gitGraph/)!==null;let title$1="",diagramTitle="",description="";const sanitizeText$3=nt=>sanitizeText$5(nt,getConfig$1()),clear$g=function(){title$1="",description="",diagramTitle=""},setAccTitle=function(nt){title$1=sanitizeText$3(nt).replace(/^\s+/g,"")},getAccTitle=function(){return title$1||diagramTitle},setAccDescription=function(nt){description=sanitizeText$3(nt).replace(/\n\s+/g,`
`)},getAccDescription=function(){return description},setDiagramTitle=function(nt){diagramTitle=sanitizeText$3(nt)},getDiagramTitle=function(){return diagramTitle};let mainBranchName=getConfig$1().gitGraph.mainBranchName,mainBranchOrder=getConfig$1().gitGraph.mainBranchOrder,commits={},head=null,branchesConfig={};branchesConfig[mainBranchName]={name:mainBranchName,order:mainBranchOrder};let branches={};branches[mainBranchName]=head;let curBranch=mainBranchName,direction$3="LR",seq=0;function getId(){return random({length:7})}const parseDirective$b=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)};function uniqBy(nt,rt){const it=Object.create(null);return nt.reduce((st,bt)=>{const wt=rt(bt);return it[wt]||(it[wt]=!0,st.push(bt)),st},[])}const setDirection$3=function(nt){direction$3=nt};let options={};const setOptions=function(nt){log$1.debug("options str",nt),nt=nt&&nt.trim(),nt=nt||"{}";try{options=JSON.parse(nt)}catch(rt){log$1.error("error while parsing gitGraph options",rt.message)}},getOptions=function(){return options},commit=function(nt,rt,it,st){log$1.debug("Entering commit:",nt,rt,it,st),rt=common$1.sanitizeText(rt,getConfig$1()),nt=common$1.sanitizeText(nt,getConfig$1()),st=common$1.sanitizeText(st,getConfig$1());const bt={id:rt||seq+"-"+getId(),message:nt,seq:seq++,type:it||commitType$1.NORMAL,tag:st||"",parents:head==null?[]:[head.id],branch:curBranch};head=bt,commits[bt.id]=bt,branches[curBranch]=bt.id,log$1.debug("in pushCommit "+bt.id)},branch=function(nt,rt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0)branches[nt]=head!=null?head.id:null,branchesConfig[nt]={name:nt,order:rt?parseInt(rt,10):null},checkout(nt),log$1.debug("in createBranch");else{let it=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+nt+'")');throw it.hash={text:"branch "+nt,token:"branch "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+nt+'"']},it}},merge=function(nt,rt,it,st){nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1());const bt=commits[branches[curBranch]],wt=commits[branches[nt]];if(curBranch===nt){let kt=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(bt===void 0||!bt){let kt=new Error('Incorrect usage of "merge". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},kt}else if(branches[nt]===void 0){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") does not exist");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+nt]},kt}else if(wt===void 0||!wt){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},kt}else if(bt===wt){let kt=new Error('Incorrect usage of "merge". Both branches have same head');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(rt&&commits[rt]!==void 0){let kt=new Error('Incorrect usage of "merge". Commit with id:'+rt+" already exists, use different custom Id");throw kt.hash={text:"merge "+nt+rt+it+st,token:"merge "+nt+rt+it+st,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+nt+" "+rt+"_UNIQUE "+it+" "+st]},kt}const Et={id:rt||seq+"-"+getId(),message:"merged branch "+nt+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,branches[nt]],branch:curBranch,type:commitType$1.MERGE,customType:it,customId:!!rt,tag:st||""};head=Et,commits[Et.id]=Et,branches[curBranch]=Et.id,log$1.debug(branches),log$1.debug("in mergeBranch")},cherryPick=function(nt,rt,it){if(log$1.debug("Entering cherryPick:",nt,rt,it),nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1()),it=common$1.sanitizeText(it,getConfig$1()),!nt||commits[nt]===void 0){let wt=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw wt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},wt}let st=commits[nt],bt=st.branch;if(st.type===commitType$1.MERGE){let wt=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw wt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},wt}if(!rt||commits[rt]===void 0){if(bt===curBranch){let kt=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const wt=commits[branches[curBranch]];if(wt===void 0||!wt){let kt=new Error('Incorrect usage of "cherry-pick". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const Et={id:seq+"-"+getId(),message:"cherry-picked "+st+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,st.id],branch:curBranch,type:commitType$1.CHERRY_PICK,tag:it!=null?it:"cherry-pick:"+st.id};head=Et,commits[Et.id]=Et,branches[curBranch]=Et.id,log$1.debug(branches),log$1.debug("in cherryPick")}},checkout=function(nt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0){let rt=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+nt+'")');throw rt.hash={text:"checkout "+nt,token:"checkout "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+nt+'"']},rt}else{curBranch=nt;const rt=branches[curBranch];head=commits[rt]}};function upsert(nt,rt,it){const st=nt.indexOf(rt);st===-1?nt.push(it):nt.splice(st,1,it)}function prettyPrintCommitHistory(nt){const rt=nt.reduce((bt,wt)=>bt.seq>wt.seq?bt:wt,nt[0]);let it="";nt.forEach(function(bt){bt===rt?it+="	*":it+="	|"});const st=[it,rt.id,rt.seq];for(let bt in branches)branches[bt]===rt.id&&st.push(bt);if(log$1.debug(st.join(" ")),rt.parents&&rt.parents.length==2){const bt=commits[rt.parents[0]];upsert(nt,rt,bt),nt.push(commits[rt.parents[1]])}else{if(rt.parents.length==0)return;{const bt=commits[rt.parents];upsert(nt,rt,bt)}}nt=uniqBy(nt,bt=>bt.id),prettyPrintCommitHistory(nt)}const prettyPrint=function(){log$1.debug(commits);const nt=getCommitsArray()[0];prettyPrintCommitHistory([nt])},clear$f=function(){commits={},head=null;let nt=getConfig$1().gitGraph.mainBranchName,rt=getConfig$1().gitGraph.mainBranchOrder;branches={},branches[nt]=null,branchesConfig={},branchesConfig[nt]={name:nt,order:rt},curBranch=nt,seq=0,clear$g()},getBranchesAsObjArray=function(){return Object.values(branchesConfig).map((rt,it)=>rt.order!==null?rt:{...rt,order:parseFloat(`0.${it}`,10)}).sort((rt,it)=>rt.order-it.order).map(({name:rt})=>({name:rt}))},getBranches=function(){return branches},getCommits=function(){return commits},getCommitsArray=function(){const nt=Object.keys(commits).map(function(rt){return commits[rt]});return nt.forEach(function(rt){log$1.debug(rt.id)}),nt.sort((rt,it)=>rt.seq-it.seq),nt},getCurrentBranch=function(){return curBranch},getDirection$3=function(){return direction$3},getHead=function(){return head},commitType$1={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},gitGraphDb={parseDirective:parseDirective$b,getConfig:()=>getConfig$1().gitGraph,setDirection:setDirection$3,setOptions,getOptions,commit,branch,merge,cherryPick,checkout,prettyPrint,clear:clear$f,getBranchesAsObjArray,getBranches,getCommits,getCommitsArray,getCurrentBranch,getDirection:getDirection$3,getHead,setAccTitle,getAccTitle,getAccDescription,setAccDescription,setDiagramTitle,getDiagramTitle,commitType:commitType$1};let allCommitsDict={};const commitType={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},THEME_COLOR_LIMIT=8;let branchPos={},commitPos={},lanes=[],maxPos=0;const clear$e=()=>{branchPos={},commitPos={},allCommitsDict={},maxPos=0,lanes=[]},drawText$2=nt=>{const rt=document.createElementNS("http://www.w3.org/2000/svg","text");let it=[];typeof nt=="string"?it=nt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(nt)?it=nt:it=[];for(const st of it){const bt=document.createElementNS("http://www.w3.org/2000/svg","tspan");bt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),bt.setAttribute("dy","1em"),bt.setAttribute("x","0"),bt.setAttribute("class","row"),bt.textContent=st.trim(),rt.appendChild(bt)}return rt},drawCommits=(nt,rt,it)=>{const st=getConfig().gitGraph,bt=nt.append("g").attr("class","commit-bullets"),wt=nt.append("g").attr("class","commit-labels");let Et=0;Object.keys(rt).sort((Ot,Rt)=>rt[Ot].seq-rt[Rt].seq).forEach(Ot=>{const Rt=rt[Ot],Dt=branchPos[Rt.branch].pos,Bt=Et+10;if(it){let Ft,Yt=Rt.customType!==void 0&&Rt.customType!==""?Rt.customType:Rt.type;switch(Yt){case commitType.NORMAL:Ft="commit-normal";break;case commitType.REVERSE:Ft="commit-reverse";break;case commitType.HIGHLIGHT:Ft="commit-highlight";break;case commitType.MERGE:Ft="commit-merge";break;case commitType.CHERRY_PICK:Ft="commit-cherry-pick";break;default:Ft="commit-normal"}if(Yt===commitType.HIGHLIGHT){const Jt=bt.append("rect");Jt.attr("x",Bt-10),Jt.attr("y",Dt-10),Jt.attr("height",20),Jt.attr("width",20),Jt.attr("class",`commit ${Rt.id} commit-highlight${branchPos[Rt.branch].index%THEME_COLOR_LIMIT} ${Ft}-outer`),bt.append("rect").attr("x",Bt-6).attr("y",Dt-6).attr("height",12).attr("width",12).attr("class",`commit ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT} ${Ft}-inner`)}else if(Yt===commitType.CHERRY_PICK)bt.append("circle").attr("cx",Bt).attr("cy",Dt).attr("r",10).attr("class",`commit ${Rt.id} ${Ft}`),bt.append("circle").attr("cx",Bt-3).attr("cy",Dt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Rt.id} ${Ft}`),bt.append("circle").attr("cx",Bt+3).attr("cy",Dt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Rt.id} ${Ft}`),bt.append("line").attr("x1",Bt+3).attr("y1",Dt+1).attr("x2",Bt).attr("y2",Dt-5).attr("stroke","#fff").attr("class",`commit ${Rt.id} ${Ft}`),bt.append("line").attr("x1",Bt-3).attr("y1",Dt+1).attr("x2",Bt).attr("y2",Dt-5).attr("stroke","#fff").attr("class",`commit ${Rt.id} ${Ft}`);else{const Jt=bt.append("circle");if(Jt.attr("cx",Bt),Jt.attr("cy",Dt),Jt.attr("r",Rt.type===commitType.MERGE?9:10),Jt.attr("class",`commit ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`),Yt===commitType.MERGE){const Wt=bt.append("circle");Wt.attr("cx",Bt),Wt.attr("cy",Dt),Wt.attr("r",6),Wt.attr("class",`commit ${Ft} ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`)}Yt===commitType.REVERSE&&bt.append("path").attr("d",`M ${Bt-5},${Dt-5}L${Bt+5},${Dt+5}M${Bt-5},${Dt+5}L${Bt+5},${Dt-5}`).attr("class",`commit ${Ft} ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`)}}if(commitPos[Rt.id]={x:Et+10,y:Dt},it){if(Rt.type!==commitType.CHERRY_PICK&&(Rt.customId&&Rt.type===commitType.MERGE||Rt.type!==commitType.MERGE)&&st.showCommitLabel){const Jt=wt.append("g"),Wt=Jt.insert("rect").attr("class","commit-label-bkg"),Qt=Jt.append("text").attr("x",Et).attr("y",Dt+25).attr("class","commit-label").text(Rt.id);let rn=Qt.node().getBBox();if(Wt.attr("x",Et+10-rn.width/2-2).attr("y",Dt+13.5).attr("width",rn.width+2*2).attr("height",rn.height+2*2),Qt.attr("x",Et+10-rn.width/2),st.rotateCommitLabel){let sn=-7.5-(rn.width+10)/25*9.5,on=10+rn.width/25*8.5;Jt.attr("transform","translate("+sn+", "+on+") rotate("+-45+", "+Et+", "+Dt+")")}}if(Rt.tag){const Jt=wt.insert("polygon"),Wt=wt.append("circle"),Qt=wt.append("text").attr("y",Dt-16).attr("class","tag-label").text(Rt.tag);let rn=Qt.node().getBBox();Qt.attr("x",Et+10-rn.width/2);const sn=rn.height/2,on=Dt-19.2;Jt.attr("class","tag-label-bkg").attr("points",`
          ${Et-rn.width/2-4/2},${on+2}
          ${Et-rn.width/2-4/2},${on-2}
          ${Et+10-rn.width/2-4},${on-sn-2}
          ${Et+10+rn.width/2+4},${on-sn-2}
          ${Et+10+rn.width/2+4},${on+sn+2}
          ${Et+10-rn.width/2-4},${on+sn+2}`),Wt.attr("cx",Et-rn.width/2+4/2).attr("cy",on).attr("r",1.5).attr("class","tag-hole")}}Et+=50,Et>maxPos&&(maxPos=Et)})},hasOverlappingCommits=(nt,rt,it)=>Object.keys(it).filter(wt=>it[wt].branch===rt.branch&&it[wt].seq>nt.seq&&it[wt].seq<rt.seq).length>0,findLane=(nt,rt,it=0)=>{const st=nt+Math.abs(nt-rt)/2;if(it>5)return st;if(lanes.every(Et=>Math.abs(Et-st)>=10))return lanes.push(st),st;const wt=Math.abs(nt-rt);return findLane(nt,rt-wt/5,it+1)},drawArrow=(nt,rt,it,st)=>{const bt=commitPos[rt.id],wt=commitPos[it.id],Et=hasOverlappingCommits(rt,it,st);let kt="",Lt="",Ot=0,Rt=0,Dt=branchPos[it.branch].index,Bt;if(Et){kt="A 10 10, 0, 0, 0,",Lt="A 10 10, 0, 0, 1,",Ot=10,Rt=10,Dt=branchPos[it.branch].index;const Ft=bt.y<wt.y?findLane(bt.y,wt.y):findLane(wt.y,bt.y);bt.y<wt.y?Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${Ft-Ot} ${kt} ${bt.x+Rt} ${Ft} L ${wt.x-Ot} ${Ft} ${Lt} ${wt.x} ${Ft+Rt} L ${wt.x} ${wt.y}`:Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${Ft+Ot} ${Lt} ${bt.x+Rt} ${Ft} L ${wt.x-Ot} ${Ft} ${kt} ${wt.x} ${Ft-Rt} L ${wt.x} ${wt.y}`}else bt.y<wt.y&&(kt="A 20 20, 0, 0, 0,",Ot=20,Rt=20,Dt=branchPos[it.branch].index,Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${wt.y-Ot} ${kt} ${bt.x+Rt} ${wt.y} L ${wt.x} ${wt.y}`),bt.y>wt.y&&(kt="A 20 20, 0, 0, 0,",Ot=20,Rt=20,Dt=branchPos[rt.branch].index,Bt=`M ${bt.x} ${bt.y} L ${wt.x-Ot} ${bt.y} ${kt} ${wt.x} ${bt.y-Rt} L ${wt.x} ${wt.y}`),bt.y===wt.y&&(Dt=branchPos[rt.branch].index,Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${wt.y-Ot} ${kt} ${bt.x+Rt} ${wt.y} L ${wt.x} ${wt.y}`);nt.append("path").attr("d",Bt).attr("class","arrow arrow"+Dt%THEME_COLOR_LIMIT)},drawArrows=(nt,rt)=>{const it=nt.append("g").attr("class","commit-arrows");Object.keys(rt).forEach(st=>{const bt=rt[st];bt.parents&&bt.parents.length>0&&bt.parents.forEach(wt=>{drawArrow(it,rt[wt],bt,rt)})})},drawBranches=(nt,rt)=>{const it=getConfig().gitGraph,st=nt.append("g");rt.forEach((bt,wt)=>{const Et=wt%THEME_COLOR_LIMIT,kt=branchPos[bt.name].pos,Lt=st.append("line");Lt.attr("x1",0),Lt.attr("y1",kt),Lt.attr("x2",maxPos),Lt.attr("y2",kt),Lt.attr("class","branch branch"+Et),lanes.push(kt);let Ot=bt.name;const Rt=drawText$2(Ot),Dt=st.insert("rect"),Ft=st.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+Et);Ft.node().appendChild(Rt);let Yt=Rt.getBBox();Dt.attr("class","branchLabelBkg label"+Et).attr("rx",4).attr("ry",4).attr("x",-Yt.width-4-(it.rotateCommitLabel===!0?30:0)).attr("y",-Yt.height/2+8).attr("width",Yt.width+18).attr("height",Yt.height+4),Ft.attr("transform","translate("+(-Yt.width-14-(it.rotateCommitLabel===!0?30:0))+", "+(kt-Yt.height/2-1)+")"),Dt.attr("transform","translate("+-19+", "+(kt-Yt.height/2)+")")})},draw$f=function(nt,rt,it,st){var bt;clear$e();const wt=getConfig(),Et=wt.gitGraph;log$1.debug("in gitgraph renderer",nt+`
`,"id:",rt,it),allCommitsDict=st.db.getCommits();const kt=st.db.getBranchesAsObjArray();let Lt=0;kt.forEach((Rt,Dt)=>{branchPos[Rt.name]={pos:Lt,index:Dt},Lt+=50+(Et.rotateCommitLabel?40:0)});const Ot=select(`[id="${rt}"]`);drawCommits(Ot,allCommitsDict,!1),Et.showBranches&&drawBranches(Ot,kt),drawArrows(Ot,allCommitsDict),drawCommits(Ot,allCommitsDict,!0),utils.insertTitle(Ot,"gitTitleText",Et.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox(void 0,Ot,Et.diagramPadding,(bt=Et.useMaxWidth)!=null?bt:wt.useMaxWidth)},gitGraphRenderer={draw:draw$f},getStyles=nt=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(rt=>`
        .branch-label${rt} { fill: ${nt["gitBranchLabel"+rt]}; }
        .commit${rt} { stroke: ${nt["git"+rt]}; fill: ${nt["git"+rt]}; }
        .commit-highlight${rt} { stroke: ${nt["gitInv"+rt]}; fill: ${nt["gitInv"+rt]}; }
        .label${rt}  { fill: ${nt["git"+rt]}; }
        .arrow${rt} { stroke: ${nt["git"+rt]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${nt.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelColor};}
  .commit-label-bkg { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${nt.tagLabelFontSize}; fill: ${nt.tagLabelColor};}
  .tag-label-bkg { fill: ${nt.tagLabelBackground}; stroke: ${nt.tagLabelBorder}; }
  .tag-hole { fill: ${nt.textColor}; }

  .commit-merge {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }
  .commit-reverse {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
  }
`,gitGraphStyles=getStyles;var parser$a=function(){var nt=function(An,Sn,Wn,er){for(Wn=Wn||{},er=An.length;er--;Wn[An[er]]=Sn);return Wn},rt=[1,6],it=[1,7],st=[1,8],bt=[1,9],wt=[1,16],Et=[1,11],kt=[1,12],Lt=[1,13],Ot=[1,14],Rt=[1,15],Dt=[1,27],Bt=[1,33],Ft=[1,34],Yt=[1,35],Jt=[1,36],Wt=[1,37],Qt=[1,72],rn=[1,73],sn=[1,74],on=[1,75],hn=[1,76],mn=[1,77],Cn=[1,78],Tn=[1,38],kn=[1,39],In=[1,40],Ln=[1,41],pn=[1,42],Hn=[1,43],yn=[1,44],mr=[1,45],vn=[1,46],yr=[1,47],Tr=[1,48],Mr=[1,49],rr=[1,50],wr=[1,51],fr=[1,52],gr=[1,53],Lr=[1,54],Pr=[1,55],lr=[1,56],qr=[1,57],sr=[1,59],pr=[1,60],Er=[1,61],ir=[1,62],Pn=[1,63],nn=[1,64],fn=[1,65],cn=[1,66],Nn=[1,67],On=[1,68],cr=[1,69],Bn=[24,52],Qn=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Un=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],or=[1,94],hr=[1,95],kr=[1,96],xr=[1,97],br=[15,24,52],hi=[7,8,9,10,18,22,25,26,27,28],di=[15,24,43,52],vi=[15,24,43,52,86,87,89,90],Ti=[15,43],ki=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Di={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(Sn,Wn,er,vr,ti,_r,li){var Or=_r.length-1;switch(ti){case 4:vr.setDirection("TB");break;case 5:vr.setDirection("BT");break;case 6:vr.setDirection("RL");break;case 7:vr.setDirection("LR");break;case 11:vr.parseDirective("%%{","open_directive");break;case 12:break;case 13:_r[Or]=_r[Or].trim().replace(/'/g,'"'),vr.parseDirective(_r[Or],"arg_directive");break;case 14:vr.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:vr.setC4Type(_r[Or-3]);break;case 26:vr.setTitle(_r[Or].substring(6)),this.$=_r[Or].substring(6);break;case 27:vr.setAccDescription(_r[Or].substring(15)),this.$=_r[Or].substring(15);break;case 28:this.$=_r[Or].trim(),vr.setTitle(this.$);break;case 29:case 30:this.$=_r[Or].trim(),vr.setAccDescription(this.$);break;case 35:case 36:_r[Or].splice(2,0,"ENTERPRISE"),vr.addPersonOrSystemBoundary(..._r[Or]),this.$=_r[Or];break;case 37:vr.addPersonOrSystemBoundary(..._r[Or]),this.$=_r[Or];break;case 38:_r[Or].splice(2,0,"CONTAINER"),vr.addContainerBoundary(..._r[Or]),this.$=_r[Or];break;case 39:vr.addDeploymentNode("node",..._r[Or]),this.$=_r[Or];break;case 40:vr.addDeploymentNode("nodeL",..._r[Or]),this.$=_r[Or];break;case 41:vr.addDeploymentNode("nodeR",..._r[Or]),this.$=_r[Or];break;case 42:vr.popBoundaryParseStack();break;case 46:vr.addPersonOrSystem("person",..._r[Or]),this.$=_r[Or];break;case 47:vr.addPersonOrSystem("external_person",..._r[Or]),this.$=_r[Or];break;case 48:vr.addPersonOrSystem("system",..._r[Or]),this.$=_r[Or];break;case 49:vr.addPersonOrSystem("system_db",..._r[Or]),this.$=_r[Or];break;case 50:vr.addPersonOrSystem("system_queue",..._r[Or]),this.$=_r[Or];break;case 51:vr.addPersonOrSystem("external_system",..._r[Or]),this.$=_r[Or];break;case 52:vr.addPersonOrSystem("external_system_db",..._r[Or]),this.$=_r[Or];break;case 53:vr.addPersonOrSystem("external_system_queue",..._r[Or]),this.$=_r[Or];break;case 54:vr.addContainer("container",..._r[Or]),this.$=_r[Or];break;case 55:vr.addContainer("container_db",..._r[Or]),this.$=_r[Or];break;case 56:vr.addContainer("container_queue",..._r[Or]),this.$=_r[Or];break;case 57:vr.addContainer("external_container",..._r[Or]),this.$=_r[Or];break;case 58:vr.addContainer("external_container_db",..._r[Or]),this.$=_r[Or];break;case 59:vr.addContainer("external_container_queue",..._r[Or]),this.$=_r[Or];break;case 60:vr.addComponent("component",..._r[Or]),this.$=_r[Or];break;case 61:vr.addComponent("component_db",..._r[Or]),this.$=_r[Or];break;case 62:vr.addComponent("component_queue",..._r[Or]),this.$=_r[Or];break;case 63:vr.addComponent("external_component",..._r[Or]),this.$=_r[Or];break;case 64:vr.addComponent("external_component_db",..._r[Or]),this.$=_r[Or];break;case 65:vr.addComponent("external_component_queue",..._r[Or]),this.$=_r[Or];break;case 67:vr.addRel("rel",..._r[Or]),this.$=_r[Or];break;case 68:vr.addRel("birel",..._r[Or]),this.$=_r[Or];break;case 69:vr.addRel("rel_u",..._r[Or]),this.$=_r[Or];break;case 70:vr.addRel("rel_d",..._r[Or]),this.$=_r[Or];break;case 71:vr.addRel("rel_l",..._r[Or]),this.$=_r[Or];break;case 72:vr.addRel("rel_r",..._r[Or]),this.$=_r[Or];break;case 73:vr.addRel("rel_b",..._r[Or]),this.$=_r[Or];break;case 74:_r[Or].splice(0,1),vr.addRel("rel",..._r[Or]),this.$=_r[Or];break;case 75:vr.updateElStyle("update_el_style",..._r[Or]),this.$=_r[Or];break;case 76:vr.updateRelStyle("update_rel_style",..._r[Or]),this.$=_r[Or];break;case 77:vr.updateLayoutConfig("update_layout_config",..._r[Or]),this.$=_r[Or];break;case 78:this.$=[_r[Or]];break;case 79:_r[Or].unshift(_r[Or-1]),this.$=_r[Or];break;case 80:case 82:this.$=_r[Or].trim();break;case 81:let mi={};mi[_r[Or-1].trim()]=_r[Or].trim(),this.$=mi;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:rt,8:it,9:st,10:bt,11:5,12:10,18:wt,22:Et,25:kt,26:Lt,27:Ot,28:Rt},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:rt,8:it,9:st,10:bt,11:5,12:10,18:wt,22:Et,25:kt,26:Lt,27:Ot,28:Rt},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:Dt},nt([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt,39:58,40:70,42:71,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,53:32,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr},{23:79,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt,39:58,40:70,42:71,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,53:32,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr},{23:80,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt,39:58,40:70,42:71,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,53:32,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr},{23:81,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt,39:58,40:70,42:71,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,53:32,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr},{23:82,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt,39:58,40:70,42:71,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,53:32,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},nt(Bn,[2,20],{53:32,39:58,40:70,42:71,30:87,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr}),nt(Bn,[2,21]),nt(Qn,[2,23],{15:[1,88]}),nt(Bn,[2,43],{15:[1,89]}),nt(Un,[2,26]),nt(Un,[2,27]),{35:[1,90]},{37:[1,91]},nt(Un,[2,30]),{45:92,85:93,86:or,87:hr,89:kr,90:xr},{45:98,85:93,86:or,87:hr,89:kr,90:xr},{45:99,85:93,86:or,87:hr,89:kr,90:xr},{45:100,85:93,86:or,87:hr,89:kr,90:xr},{45:101,85:93,86:or,87:hr,89:kr,90:xr},{45:102,85:93,86:or,87:hr,89:kr,90:xr},{45:103,85:93,86:or,87:hr,89:kr,90:xr},{45:104,85:93,86:or,87:hr,89:kr,90:xr},{45:105,85:93,86:or,87:hr,89:kr,90:xr},{45:106,85:93,86:or,87:hr,89:kr,90:xr},{45:107,85:93,86:or,87:hr,89:kr,90:xr},{45:108,85:93,86:or,87:hr,89:kr,90:xr},{45:109,85:93,86:or,87:hr,89:kr,90:xr},{45:110,85:93,86:or,87:hr,89:kr,90:xr},{45:111,85:93,86:or,87:hr,89:kr,90:xr},{45:112,85:93,86:or,87:hr,89:kr,90:xr},{45:113,85:93,86:or,87:hr,89:kr,90:xr},{45:114,85:93,86:or,87:hr,89:kr,90:xr},{45:115,85:93,86:or,87:hr,89:kr,90:xr},{45:116,85:93,86:or,87:hr,89:kr,90:xr},nt(br,[2,66]),{45:117,85:93,86:or,87:hr,89:kr,90:xr},{45:118,85:93,86:or,87:hr,89:kr,90:xr},{45:119,85:93,86:or,87:hr,89:kr,90:xr},{45:120,85:93,86:or,87:hr,89:kr,90:xr},{45:121,85:93,86:or,87:hr,89:kr,90:xr},{45:122,85:93,86:or,87:hr,89:kr,90:xr},{45:123,85:93,86:or,87:hr,89:kr,90:xr},{45:124,85:93,86:or,87:hr,89:kr,90:xr},{45:125,85:93,86:or,87:hr,89:kr,90:xr},{45:126,85:93,86:or,87:hr,89:kr,90:xr},{45:127,85:93,86:or,87:hr,89:kr,90:xr},{30:128,39:58,40:70,42:71,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,53:32,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr},{15:[1,130],43:[1,129]},{45:131,85:93,86:or,87:hr,89:kr,90:xr},{45:132,85:93,86:or,87:hr,89:kr,90:xr},{45:133,85:93,86:or,87:hr,89:kr,90:xr},{45:134,85:93,86:or,87:hr,89:kr,90:xr},{45:135,85:93,86:or,87:hr,89:kr,90:xr},{45:136,85:93,86:or,87:hr,89:kr,90:xr},{45:137,85:93,86:or,87:hr,89:kr,90:xr},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},nt(hi,[2,9]),{14:142,21:Dt},{21:[2,13]},{1:[2,15]},nt(Bn,[2,22]),nt(Qn,[2,24],{31:31,29:143,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt}),nt(Bn,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:Bt,33:Ft,34:Yt,36:Jt,38:Wt,44:Qt,46:rn,47:sn,48:on,49:hn,50:mn,51:Cn,54:Tn,55:kn,56:In,57:Ln,58:pn,59:Hn,60:yn,61:mr,62:vn,63:yr,64:Tr,65:Mr,66:rr,67:wr,68:fr,69:gr,70:Lr,71:Pr,72:lr,73:qr,74:sr,75:pr,76:Er,77:ir,78:Pn,79:nn,80:fn,81:cn,82:Nn,83:On,84:cr}),nt(Un,[2,28]),nt(Un,[2,29]),nt(br,[2,46]),nt(di,[2,78],{85:93,45:145,86:or,87:hr,89:kr,90:xr}),nt(vi,[2,80]),{88:[1,146]},nt(vi,[2,82]),nt(vi,[2,83]),nt(br,[2,47]),nt(br,[2,48]),nt(br,[2,49]),nt(br,[2,50]),nt(br,[2,51]),nt(br,[2,52]),nt(br,[2,53]),nt(br,[2,54]),nt(br,[2,55]),nt(br,[2,56]),nt(br,[2,57]),nt(br,[2,58]),nt(br,[2,59]),nt(br,[2,60]),nt(br,[2,61]),nt(br,[2,62]),nt(br,[2,63]),nt(br,[2,64]),nt(br,[2,65]),nt(br,[2,67]),nt(br,[2,68]),nt(br,[2,69]),nt(br,[2,70]),nt(br,[2,71]),nt(br,[2,72]),nt(br,[2,73]),nt(br,[2,74]),nt(br,[2,75]),nt(br,[2,76]),nt(br,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},nt(Ti,[2,35]),nt(Ti,[2,36]),nt(Ti,[2,37]),nt(Ti,[2,38]),nt(Ti,[2,39]),nt(Ti,[2,40]),nt(Ti,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},nt(Qn,[2,25]),nt(Bn,[2,45]),nt(di,[2,79]),nt(vi,[2,81]),nt(br,[2,31]),nt(br,[2,42]),nt(ki,[2,32]),nt(ki,[2,33],{15:[1,152]}),nt(hi,[2,10]),nt(ki,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(Sn,Wn){if(Wn.recoverable)this.trace(Sn);else{var er=new Error(Sn);throw er.hash=Wn,er}},parse:function(Sn){var Wn=this,er=[0],vr=[],ti=[null],_r=[],li=this.table,Or="",mi=0,_i=0,Pi=2,xi=1,Zi=_r.slice.call(arguments,1),$i=Object.create(this.lexer),Qi={yy:{}};for(var Eo in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Eo)&&(Qi.yy[Eo]=this.yy[Eo]);$i.setInput(Sn,Qi.yy),Qi.yy.lexer=$i,Qi.yy.parser=this,typeof $i.yylloc>"u"&&($i.yylloc={});var to=$i.yylloc;_r.push(to);var Za=$i.options&&$i.options.ranges;typeof Qi.yy.parseError=="function"?this.parseError=Qi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Hs(){var ar;return ar=vr.pop()||$i.lex()||xi,typeof ar!="number"&&(ar instanceof Array&&(vr=ar,ar=vr.pop()),ar=Wn.symbols_[ar]||ar),ar}for(var Ai,io,Fs,Xo,os={},Os,Ns,Rr,Qr;;){if(io=er[er.length-1],this.defaultActions[io]?Fs=this.defaultActions[io]:((Ai===null||typeof Ai>"u")&&(Ai=Hs()),Fs=li[io]&&li[io][Ai]),typeof Fs>"u"||!Fs.length||!Fs[0]){var Dr="";Qr=[];for(Os in li[io])this.terminals_[Os]&&Os>Pi&&Qr.push("'"+this.terminals_[Os]+"'");$i.showPosition?Dr="Parse error on line "+(mi+1)+`:
`+$i.showPosition()+`
Expecting `+Qr.join(", ")+", got '"+(this.terminals_[Ai]||Ai)+"'":Dr="Parse error on line "+(mi+1)+": Unexpected "+(Ai==xi?"end of input":"'"+(this.terminals_[Ai]||Ai)+"'"),this.parseError(Dr,{text:$i.match,token:this.terminals_[Ai]||Ai,line:$i.yylineno,loc:to,expected:Qr})}if(Fs[0]instanceof Array&&Fs.length>1)throw new Error("Parse Error: multiple actions possible at state: "+io+", token: "+Ai);switch(Fs[0]){case 1:er.push(Ai),ti.push($i.yytext),_r.push($i.yylloc),er.push(Fs[1]),Ai=null,_i=$i.yyleng,Or=$i.yytext,mi=$i.yylineno,to=$i.yylloc;break;case 2:if(Ns=this.productions_[Fs[1]][1],os.$=ti[ti.length-Ns],os._$={first_line:_r[_r.length-(Ns||1)].first_line,last_line:_r[_r.length-1].last_line,first_column:_r[_r.length-(Ns||1)].first_column,last_column:_r[_r.length-1].last_column},Za&&(os._$.range=[_r[_r.length-(Ns||1)].range[0],_r[_r.length-1].range[1]]),Xo=this.performAction.apply(os,[Or,_i,mi,Qi.yy,Fs[1],ti,_r].concat(Zi)),typeof Xo<"u")return Xo;Ns&&(er=er.slice(0,-1*Ns*2),ti=ti.slice(0,-1*Ns),_r=_r.slice(0,-1*Ns)),er.push(this.productions_[Fs[1]][0]),ti.push(os.$),_r.push(os._$),Rr=li[er[er.length-2]][er[er.length-1]],er.push(Rr);break;case 3:return!0}}return!0}},Ci=function(){var An={EOF:1,parseError:function(Wn,er){if(this.yy.parser)this.yy.parser.parseError(Wn,er);else throw new Error(Wn)},setInput:function(Sn,Wn){return this.yy=Wn||this.yy||{},this._input=Sn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Sn=this._input[0];this.yytext+=Sn,this.yyleng++,this.offset++,this.match+=Sn,this.matched+=Sn;var Wn=Sn.match(/(?:\r\n?|\n).*/g);return Wn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Sn},unput:function(Sn){var Wn=Sn.length,er=Sn.split(/(?:\r\n?|\n)/g);this._input=Sn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Wn),this.offset-=Wn;var vr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var ti=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===vr.length?this.yylloc.first_column:0)+vr[vr.length-er.length].length-er[0].length:this.yylloc.first_column-Wn},this.options.ranges&&(this.yylloc.range=[ti[0],ti[0]+this.yyleng-Wn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Sn){this.unput(this.match.slice(Sn))},pastInput:function(){var Sn=this.matched.substr(0,this.matched.length-this.match.length);return(Sn.length>20?"...":"")+Sn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Sn=this.match;return Sn.length<20&&(Sn+=this._input.substr(0,20-Sn.length)),(Sn.substr(0,20)+(Sn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Sn=this.pastInput(),Wn=new Array(Sn.length+1).join("-");return Sn+this.upcomingInput()+`
`+Wn+"^"},test_match:function(Sn,Wn){var er,vr,ti;if(this.options.backtrack_lexer&&(ti={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ti.yylloc.range=this.yylloc.range.slice(0))),vr=Sn[0].match(/(?:\r\n?|\n).*/g),vr&&(this.yylineno+=vr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:vr?vr[vr.length-1].length-vr[vr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Sn[0].length},this.yytext+=Sn[0],this.match+=Sn[0],this.matches=Sn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Sn[0].length),this.matched+=Sn[0],er=this.performAction.call(this,this.yy,this,Wn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var _r in ti)this[_r]=ti[_r];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Sn,Wn,er,vr;this._more||(this.yytext="",this.match="");for(var ti=this._currentRules(),_r=0;_r<ti.length;_r++)if(er=this._input.match(this.rules[ti[_r]]),er&&(!Wn||er[0].length>Wn[0].length)){if(Wn=er,vr=_r,this.options.backtrack_lexer){if(Sn=this.test_match(er,ti[_r]),Sn!==!1)return Sn;if(this._backtrack){Wn=!1;continue}else return!1}else if(!this.options.flex)break}return Wn?(Sn=this.test_match(Wn,ti[vr]),Sn!==!1?Sn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Wn=this.next();return Wn||this.lex()},begin:function(Wn){this.conditionStack.push(Wn)},popState:function(){var Wn=this.conditionStack.length-1;return Wn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Wn){return Wn=this.conditionStack.length-1-Math.abs(Wn||0),Wn>=0?this.conditionStack[Wn]:"INITIAL"},pushState:function(Wn){this.begin(Wn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Wn,er,vr,ti){switch(vr){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return An}();Di.lexer=Ci;function $r(){this.yy={}}return $r.prototype=Di,Di.Parser=$r,new $r}();parser$a.parser=parser$a;const c4Parser=parser$a,c4Detector=nt=>nt.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let c4ShapeArray=[],boundaryParseStack=[""],currentBoundaryParse="global",parentBoundaryParse="",boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],rels=[],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2;var c4Type;const getC4Type=function(){return c4Type},setC4Type=function(nt){c4Type=sanitizeText$5(nt,getConfig$1())},parseDirective$a=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRel=function(nt,rt,it,st,bt,wt,Et,kt,Lt){if(nt==null||rt===void 0||rt===null||it===void 0||it===null||st===void 0||st===null)return;let Ot={};const Rt=rels.find(Dt=>Dt.from===rt&&Dt.to===it);if(Rt?Ot=Rt:rels.push(Ot),Ot.type=nt,Ot.from=rt,Ot.to=it,Ot.label={text:st},bt==null)Ot.techn={text:""};else if(typeof bt=="object"){let[Dt,Bt]=Object.entries(bt)[0];Ot[Dt]={text:Bt}}else Ot.techn={text:bt};if(wt==null)Ot.descr={text:""};else if(typeof wt=="object"){let[Dt,Bt]=Object.entries(wt)[0];Ot[Dt]={text:Bt}}else Ot.descr={text:wt};if(typeof Et=="object"){let[Dt,Bt]=Object.entries(Et)[0];Ot[Dt]=Bt}else Ot.sprite=Et;if(typeof kt=="object"){let[Dt,Bt]=Object.entries(kt)[0];Ot[Dt]=Bt}else Ot.tags=kt;if(typeof Lt=="object"){let[Dt,Bt]=Object.entries(Lt)[0];Ot[Dt]=Bt}else Ot.link=Lt;Ot.wrap=autoWrap$1()},addPersonOrSystem=function(nt,rt,it,st,bt,wt,Et){if(rt===null||it===null)return;let kt={};const Lt=c4ShapeArray.find(Ot=>Ot.alias===rt);if(Lt&&rt===Lt.alias?kt=Lt:(kt.alias=rt,c4ShapeArray.push(kt)),it==null?kt.label={text:""}:kt.label={text:it},st==null)kt.descr={text:""};else if(typeof st=="object"){let[Ot,Rt]=Object.entries(st)[0];kt[Ot]={text:Rt}}else kt.descr={text:st};if(typeof bt=="object"){let[Ot,Rt]=Object.entries(bt)[0];kt[Ot]=Rt}else kt.sprite=bt;if(typeof wt=="object"){let[Ot,Rt]=Object.entries(wt)[0];kt[Ot]=Rt}else kt.tags=wt;if(typeof Et=="object"){let[Ot,Rt]=Object.entries(Et)[0];kt[Ot]=Rt}else kt.link=Et;kt.typeC4Shape={text:nt},kt.parentBoundary=currentBoundaryParse,kt.wrap=autoWrap$1()},addContainer=function(nt,rt,it,st,bt,wt,Et,kt){if(rt===null||it===null)return;let Lt={};const Ot=c4ShapeArray.find(Rt=>Rt.alias===rt);if(Ot&&rt===Ot.alias?Lt=Ot:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.techn={text:""};else if(typeof st=="object"){let[Rt,Dt]=Object.entries(st)[0];Lt[Rt]={text:Dt}}else Lt.techn={text:st};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Rt,Dt]=Object.entries(bt)[0];Lt[Rt]={text:Dt}}else Lt.descr={text:bt};if(typeof wt=="object"){let[Rt,Dt]=Object.entries(wt)[0];Lt[Rt]=Dt}else Lt.sprite=wt;if(typeof Et=="object"){let[Rt,Dt]=Object.entries(Et)[0];Lt[Rt]=Dt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Dt]=Object.entries(kt)[0];Lt[Rt]=Dt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addComponent=function(nt,rt,it,st,bt,wt,Et,kt){if(rt===null||it===null)return;let Lt={};const Ot=c4ShapeArray.find(Rt=>Rt.alias===rt);if(Ot&&rt===Ot.alias?Lt=Ot:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.techn={text:""};else if(typeof st=="object"){let[Rt,Dt]=Object.entries(st)[0];Lt[Rt]={text:Dt}}else Lt.techn={text:st};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Rt,Dt]=Object.entries(bt)[0];Lt[Rt]={text:Dt}}else Lt.descr={text:bt};if(typeof wt=="object"){let[Rt,Dt]=Object.entries(wt)[0];Lt[Rt]=Dt}else Lt.sprite=wt;if(typeof Et=="object"){let[Rt,Dt]=Object.entries(Et)[0];Lt[Rt]=Dt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Dt]=Object.entries(kt)[0];Lt[Rt]=Dt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addPersonOrSystemBoundary=function(nt,rt,it,st,bt){if(nt===null||rt===null)return;let wt={};const Et=boundarys.find(kt=>kt.alias===nt);if(Et&&nt===Et.alias?wt=Et:(wt.alias=nt,boundarys.push(wt)),rt==null?wt.label={text:""}:wt.label={text:rt},it==null)wt.type={text:"system"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];wt[kt]={text:Lt}}else wt.type={text:it};if(typeof st=="object"){let[kt,Lt]=Object.entries(st)[0];wt[kt]=Lt}else wt.tags=st;if(typeof bt=="object"){let[kt,Lt]=Object.entries(bt)[0];wt[kt]=Lt}else wt.link=bt;wt.parentBoundary=currentBoundaryParse,wt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addContainerBoundary=function(nt,rt,it,st,bt){if(nt===null||rt===null)return;let wt={};const Et=boundarys.find(kt=>kt.alias===nt);if(Et&&nt===Et.alias?wt=Et:(wt.alias=nt,boundarys.push(wt)),rt==null?wt.label={text:""}:wt.label={text:rt},it==null)wt.type={text:"container"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];wt[kt]={text:Lt}}else wt.type={text:it};if(typeof st=="object"){let[kt,Lt]=Object.entries(st)[0];wt[kt]=Lt}else wt.tags=st;if(typeof bt=="object"){let[kt,Lt]=Object.entries(bt)[0];wt[kt]=Lt}else wt.link=bt;wt.parentBoundary=currentBoundaryParse,wt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addDeploymentNode=function(nt,rt,it,st,bt,wt,Et,kt){if(rt===null||it===null)return;let Lt={};const Ot=boundarys.find(Rt=>Rt.alias===rt);if(Ot&&rt===Ot.alias?Lt=Ot:(Lt.alias=rt,boundarys.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.type={text:"node"};else if(typeof st=="object"){let[Rt,Dt]=Object.entries(st)[0];Lt[Rt]={text:Dt}}else Lt.type={text:st};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Rt,Dt]=Object.entries(bt)[0];Lt[Rt]={text:Dt}}else Lt.descr={text:bt};if(typeof Et=="object"){let[Rt,Dt]=Object.entries(Et)[0];Lt[Rt]=Dt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Dt]=Object.entries(kt)[0];Lt[Rt]=Dt}else Lt.link=kt;Lt.nodeType=nt,Lt.parentBoundary=currentBoundaryParse,Lt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=rt,boundaryParseStack.push(parentBoundaryParse)},popBoundaryParseStack=function(){currentBoundaryParse=parentBoundaryParse,boundaryParseStack.pop(),parentBoundaryParse=boundaryParseStack.pop(),boundaryParseStack.push(parentBoundaryParse)},updateElStyle=function(nt,rt,it,st,bt,wt,Et,kt,Lt,Ot,Rt){let Dt=c4ShapeArray.find(Bt=>Bt.alias===rt);if(!(Dt===void 0&&(Dt=boundarys.find(Bt=>Bt.alias===rt),Dt===void 0))){if(it!=null)if(typeof it=="object"){let[Bt,Ft]=Object.entries(it)[0];Dt[Bt]=Ft}else Dt.bgColor=it;if(st!=null)if(typeof st=="object"){let[Bt,Ft]=Object.entries(st)[0];Dt[Bt]=Ft}else Dt.fontColor=st;if(bt!=null)if(typeof bt=="object"){let[Bt,Ft]=Object.entries(bt)[0];Dt[Bt]=Ft}else Dt.borderColor=bt;if(wt!=null)if(typeof wt=="object"){let[Bt,Ft]=Object.entries(wt)[0];Dt[Bt]=Ft}else Dt.shadowing=wt;if(Et!=null)if(typeof Et=="object"){let[Bt,Ft]=Object.entries(Et)[0];Dt[Bt]=Ft}else Dt.shape=Et;if(kt!=null)if(typeof kt=="object"){let[Bt,Ft]=Object.entries(kt)[0];Dt[Bt]=Ft}else Dt.sprite=kt;if(Lt!=null)if(typeof Lt=="object"){let[Bt,Ft]=Object.entries(Lt)[0];Dt[Bt]=Ft}else Dt.techn=Lt;if(Ot!=null)if(typeof Ot=="object"){let[Bt,Ft]=Object.entries(Ot)[0];Dt[Bt]=Ft}else Dt.legendText=Ot;if(Rt!=null)if(typeof Rt=="object"){let[Bt,Ft]=Object.entries(Rt)[0];Dt[Bt]=Ft}else Dt.legendSprite=Rt}},updateRelStyle=function(nt,rt,it,st,bt,wt,Et){const kt=rels.find(Lt=>Lt.from===rt&&Lt.to===it);if(kt!==void 0){if(st!=null)if(typeof st=="object"){let[Lt,Ot]=Object.entries(st)[0];kt[Lt]=Ot}else kt.textColor=st;if(bt!=null)if(typeof bt=="object"){let[Lt,Ot]=Object.entries(bt)[0];kt[Lt]=Ot}else kt.lineColor=bt;if(wt!=null)if(typeof wt=="object"){let[Lt,Ot]=Object.entries(wt)[0];kt[Lt]=parseInt(Ot)}else kt.offsetX=parseInt(wt);if(Et!=null)if(typeof Et=="object"){let[Lt,Ot]=Object.entries(Et)[0];kt[Lt]=parseInt(Ot)}else kt.offsetY=parseInt(Et)}},updateLayoutConfig=function(nt,rt,it){let st=c4ShapeInRow$1,bt=c4BoundaryInRow$1;if(typeof rt=="object"){const wt=Object.values(rt)[0];st=parseInt(wt)}else st=parseInt(rt);if(typeof it=="object"){const wt=Object.values(it)[0];bt=parseInt(wt)}else bt=parseInt(it);st>=1&&(c4ShapeInRow$1=st),bt>=1&&(c4BoundaryInRow$1=bt)},getC4ShapeInRow=function(){return c4ShapeInRow$1},getC4BoundaryInRow=function(){return c4BoundaryInRow$1},getCurrentBoundaryParse=function(){return currentBoundaryParse},getParentBoundaryParse=function(){return parentBoundaryParse},getC4ShapeArray=function(nt){return nt==null?c4ShapeArray:c4ShapeArray.filter(rt=>rt.parentBoundary===nt)},getC4Shape=function(nt){return c4ShapeArray.find(rt=>rt.alias===nt)},getC4ShapeKeys=function(nt){return Object.keys(getC4ShapeArray(nt))},getBoundarys=function(nt){return nt==null?boundarys:boundarys.filter(rt=>rt.parentBoundary===nt)},getRels=function(){return rels},getTitle=function(){return title},setWrap$1=function(nt){wrapEnabled$1=nt},autoWrap$1=function(){return wrapEnabled$1},clear$d=function(){c4ShapeArray=[],boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],parentBoundaryParse="",currentBoundaryParse="global",boundaryParseStack=[""],rels=[],boundaryParseStack=[""],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2},LINETYPE$1={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE$1={FILLED:0,OPEN:1},PLACEMENT$1={LEFTOF:0,RIGHTOF:1,OVER:2},setTitle=function(nt){title=sanitizeText$5(nt,getConfig$1())},c4Db={addPersonOrSystem,addPersonOrSystemBoundary,addContainer,addContainerBoundary,addComponent,addDeploymentNode,popBoundaryParseStack,addRel,updateElStyle,updateRelStyle,updateLayoutConfig,autoWrap:autoWrap$1,setWrap:setWrap$1,getC4ShapeArray,getC4Shape,getC4ShapeKeys,getBoundarys,getCurrentBoundaryParse,getParentBoundaryParse,getRels,getTitle,getC4Type,getC4ShapeInRow,getC4BoundaryInRow,setAccTitle,getAccTitle,getAccDescription,setAccDescription,parseDirective:parseDirective$a,getConfig:()=>getConfig$1().c4,clear:clear$d,LINETYPE:LINETYPE$1,ARROWTYPE:ARROWTYPE$1,PLACEMENT:PLACEMENT$1,setTitle,setC4Type},drawRect$2=function(nt,rt){const it=nt.append("rect");if(it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.attrs!=="undefined"&&rt.attrs!==null)for(let st in rt.attrs)it.attr(st,rt.attrs[st]);return rt.class!=="undefined"&&it.attr("class",rt.class),it},drawImage$1=function(nt,rt,it,st,bt,wt){const Et=nt.append("image");Et.attr("width",rt),Et.attr("height",it),Et.attr("x",st),Et.attr("y",bt);let kt=wt.startsWith("data:image/png;base64")?wt:sanitizeUrl_1(wt);Et.attr("xlink:href",kt)},drawRels$1=(nt,rt,it)=>{const st=nt.append("g");let bt=0;for(let wt of rt){let Et=wt.textColor?wt.textColor:"#444444",kt=wt.lineColor?wt.lineColor:"#444444",Lt=wt.offsetX?parseInt(wt.offsetX):0,Ot=wt.offsetY?parseInt(wt.offsetY):0,Rt="";if(bt===0){let Bt=st.append("line");Bt.attr("x1",wt.startPoint.x),Bt.attr("y1",wt.startPoint.y),Bt.attr("x2",wt.endPoint.x),Bt.attr("y2",wt.endPoint.y),Bt.attr("stroke-width","1"),Bt.attr("stroke",kt),Bt.style("fill","none"),wt.type!=="rel_b"&&Bt.attr("marker-end","url("+Rt+"#arrowhead)"),(wt.type==="birel"||wt.type==="rel_b")&&Bt.attr("marker-start","url("+Rt+"#arrowend)"),bt=-1}else{let Bt=st.append("path");Bt.attr("fill","none").attr("stroke-width","1").attr("stroke",kt).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",wt.startPoint.x).replaceAll("starty",wt.startPoint.y).replaceAll("controlx",wt.startPoint.x+(wt.endPoint.x-wt.startPoint.x)/2-(wt.endPoint.x-wt.startPoint.x)/4).replaceAll("controly",wt.startPoint.y+(wt.endPoint.y-wt.startPoint.y)/2).replaceAll("stopx",wt.endPoint.x).replaceAll("stopy",wt.endPoint.y)),wt.type!=="rel_b"&&Bt.attr("marker-end","url("+Rt+"#arrowhead)"),(wt.type==="birel"||wt.type==="rel_b")&&Bt.attr("marker-start","url("+Rt+"#arrowend)")}let Dt=it.messageFont();_drawTextCandidateFunc$2(it)(wt.label.text,st,Math.min(wt.startPoint.x,wt.endPoint.x)+Math.abs(wt.endPoint.x-wt.startPoint.x)/2+Lt,Math.min(wt.startPoint.y,wt.endPoint.y)+Math.abs(wt.endPoint.y-wt.startPoint.y)/2+Ot,wt.label.width,wt.label.height,{fill:Et},Dt),wt.techn&&wt.techn.text!==""&&(Dt=it.messageFont(),_drawTextCandidateFunc$2(it)("["+wt.techn.text+"]",st,Math.min(wt.startPoint.x,wt.endPoint.x)+Math.abs(wt.endPoint.x-wt.startPoint.x)/2+Lt,Math.min(wt.startPoint.y,wt.endPoint.y)+Math.abs(wt.endPoint.y-wt.startPoint.y)/2+it.messageFontSize+5+Ot,Math.max(wt.label.width,wt.techn.width),wt.techn.height,{fill:Et,"font-style":"italic"},Dt))}},drawBoundary$1=function(nt,rt,it){const st=nt.append("g");let bt=rt.bgColor?rt.bgColor:"none",wt=rt.borderColor?rt.borderColor:"#444444",Et=rt.fontColor?rt.fontColor:"black",kt={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};rt.nodeType&&(kt={"stroke-width":1});let Lt={x:rt.x,y:rt.y,fill:bt,stroke:wt,width:rt.width,height:rt.height,rx:2.5,ry:2.5,attrs:kt};drawRect$2(st,Lt);let Ot=it.boundaryFont();Ot.fontWeight="bold",Ot.fontSize=Ot.fontSize+2,Ot.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.label.text,st,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:"#444444"},Ot),rt.type&&rt.type.text!==""&&(Ot=it.boundaryFont(),Ot.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.type.text,st,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:"#444444"},Ot)),rt.descr&&rt.descr.text!==""&&(Ot=it.boundaryFont(),Ot.fontSize=Ot.fontSize-2,Ot.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.descr.text,st,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:"#444444"},Ot))},drawC4Shape=function(nt,rt,it){let st=rt.bgColor?rt.bgColor:it[rt.typeC4Shape.text+"_bg_color"],bt=rt.borderColor?rt.borderColor:it[rt.typeC4Shape.text+"_border_color"],wt=rt.fontColor?rt.fontColor:"#FFFFFF",Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(rt.typeC4Shape.text){case"person":Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const kt=nt.append("g");kt.attr("class","person-man");const Lt=getNoteRect$2();switch(rt.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":Lt.x=rt.x,Lt.y=rt.y,Lt.fill=st,Lt.width=rt.width,Lt.height=rt.height,Lt.style="stroke:"+bt+";stroke-width:0.5;",Lt.rx=2.5,Lt.ry=2.5,drawRect$2(kt,Lt);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":kt.append("path").attr("fill",st).attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2).replaceAll("height",rt.height)),kt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":kt.append("path").attr("fill",st).attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("width",rt.width).replaceAll("half",rt.height/2)),kt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",rt.x+rt.width).replaceAll("starty",rt.y).replaceAll("half",rt.height/2));break}let Ot=getC4ShapeFont(it,rt.typeC4Shape.text);switch(kt.append("text").attr("fill",wt).attr("font-family",Ot.fontFamily).attr("font-size",Ot.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",rt.typeC4Shape.width).attr("x",rt.x+rt.width/2-rt.typeC4Shape.width/2).attr("y",rt.y+rt.typeC4Shape.Y).text("<<"+rt.typeC4Shape.text+">>"),rt.typeC4Shape.text){case"person":case"external_person":drawImage$1(kt,48,48,rt.x+rt.width/2-24,rt.y+rt.image.Y,Et);break}let Rt=it[rt.typeC4Shape.text+"Font"]();return Rt.fontWeight="bold",Rt.fontSize=Rt.fontSize+2,Rt.fontColor=wt,_drawTextCandidateFunc$2(it)(rt.label.text,kt,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:wt},Rt),Rt=it[rt.typeC4Shape.text+"Font"](),Rt.fontColor=wt,rt.thchn&&rt.thchn.text!==""?_drawTextCandidateFunc$2(it)(rt.thchn.text,kt,rt.x,rt.y+rt.thchn.Y,rt.width,rt.height,{fill:wt,"font-style":"italic"},Rt):rt.type&&rt.type.text!==""&&_drawTextCandidateFunc$2(it)(rt.type.text,kt,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:wt,"font-style":"italic"},Rt),rt.descr&&rt.descr.text!==""&&(Rt=it.personFont(),Rt.fontColor=wt,_drawTextCandidateFunc$2(it)(rt.descr.text,kt,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:wt},Rt)),rt.height},insertDatabaseIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead$1=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowEnd=function(nt){nt.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},insertArrowFilledHead$1=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertDynamicNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead$1=function(nt){const it=nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);it.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),it.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},getNoteRect$2=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},getC4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),_drawTextCandidateFunc$2=function(){function nt(bt,wt,Et,kt,Lt,Ot,Rt){const Dt=wt.append("text").attr("x",Et+Lt/2).attr("y",kt+Ot/2+5).style("text-anchor","middle").text(bt);st(Dt,Rt)}function rt(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const{fontSize:Bt,fontFamily:Ft,fontWeight:Yt}=Dt,Jt=bt.split(common$1.lineBreakRegex);for(let Wt=0;Wt<Jt.length;Wt++){const Qt=Wt*Bt-Bt*(Jt.length-1)/2,rn=wt.append("text").attr("x",Et+Lt/2).attr("y",kt).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);rn.append("tspan").attr("dy",Qt).text(Jt[Wt]).attr("alignment-baseline","mathematical"),st(rn,Rt)}}function it(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const Bt=wt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Ot).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Ot,Rt,Dt),st(Yt,Rt)}function st(bt,wt){for(const Et in wt)wt.hasOwnProperty(Et)&&bt.attr(Et,wt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),svgDraw$3={drawRect:drawRect$2,drawBoundary:drawBoundary$1,drawC4Shape,drawRels:drawRels$1,drawImage:drawImage$1,insertArrowHead:insertArrowHead$1,insertArrowEnd,insertArrowFilledHead:insertArrowFilledHead$1,insertDynamicNumber,insertArrowCrossHead:insertArrowCrossHead$1,insertDatabaseIcon:insertDatabaseIcon$1,insertComputerIcon:insertComputerIcon$1,insertClockIcon:insertClockIcon$1,getNoteRect:getNoteRect$2,sanitizeUrl:sanitizeUrl_1};let globalBoundaryMaxX=0,globalBoundaryMaxY=0,c4ShapeInRow=4,c4BoundaryInRow=2;parser$a.yy=c4Db;let conf$a={};class Bounds{constructor(rt){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,setConf$a(rt.db.getConfig())}setData(rt,it,st,bt){this.nextData.startx=this.data.startx=rt,this.nextData.stopx=this.data.stopx=it,this.nextData.starty=this.data.starty=st,this.nextData.stopy=this.data.stopy=bt}updateVal(rt,it,st,bt){rt[it]===void 0?rt[it]=st:rt[it]=bt(st,rt[it])}insert(rt){this.nextData.cnt=this.nextData.cnt+1;let it=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+rt.margin:this.nextData.stopx+rt.margin*2,st=it+rt.width,bt=this.nextData.starty+rt.margin*2,wt=bt+rt.height;(it>=this.data.widthLimit||st>=this.data.widthLimit||this.nextData.cnt>c4ShapeInRow)&&(it=this.nextData.startx+rt.margin+conf$a.nextLinePaddingX,bt=this.nextData.stopy+rt.margin*2,this.nextData.stopx=st=it+rt.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=wt=bt+rt.height,this.nextData.cnt=1),rt.x=it,rt.y=bt,this.updateVal(this.data,"startx",it,Math.min),this.updateVal(this.data,"starty",bt,Math.min),this.updateVal(this.data,"stopx",st,Math.max),this.updateVal(this.data,"stopy",wt,Math.max),this.updateVal(this.nextData,"startx",it,Math.min),this.updateVal(this.nextData,"starty",bt,Math.min),this.updateVal(this.nextData,"stopx",st,Math.max),this.updateVal(this.nextData,"stopy",wt,Math.max)}init(rt){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},setConf$a(rt.db.getConfig())}bumpLastMargin(rt){this.data.stopx+=rt,this.data.stopy+=rt}}const setConf$a=function(nt){assignWithDepth$1(conf$a,nt),nt.fontFamily&&(conf$a.personFontFamily=conf$a.systemFontFamily=conf$a.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$a.personFontSize=conf$a.systemFontSize=conf$a.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$a.personFontWeight=conf$a.systemFontWeight=conf$a.messageFontWeight=nt.fontWeight)},c4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),boundaryFont=nt=>({fontFamily:nt.boundaryFontFamily,fontSize:nt.boundaryFontSize,fontWeight:nt.boundaryFontWeight}),messageFont$1=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight});function calcC4ShapeTextWH(nt,rt,it,st,bt){if(!rt[nt].width)if(it)rt[nt].text=wrapLabel(rt[nt].text,bt,st),rt[nt].textLines=rt[nt].text.split(common$1.lineBreakRegex).length,rt[nt].width=bt,rt[nt].height=calculateTextHeight(rt[nt].text,st);else{let wt=rt[nt].text.split(common$1.lineBreakRegex);rt[nt].textLines=wt.length;let Et=0;rt[nt].height=0,rt[nt].width=0;for(const kt of wt)rt[nt].width=Math.max(calculateTextWidth(kt,st),rt[nt].width),Et=calculateTextHeight(kt,st),rt[nt].height=rt[nt].height+Et}}const drawBoundary=function(nt,rt,it){rt.x=it.data.startx,rt.y=it.data.starty,rt.width=it.data.stopx-it.data.startx,rt.height=it.data.stopy-it.data.starty,rt.label.y=conf$a.c4ShapeMargin-35;let st=rt.wrap&&conf$a.wrap,bt=boundaryFont(conf$a);bt.fontSize=bt.fontSize+2,bt.fontWeight="bold";let wt=calculateTextWidth(rt.label.text,bt);calcC4ShapeTextWH("label",rt,st,bt,wt),svgDraw$3.drawBoundary(nt,rt,conf$a)},drawC4ShapeArray=function(nt,rt,it,st){let bt=0;for(const wt of st){bt=0;const Et=it[wt];let kt=c4ShapeFont(conf$a,Et.typeC4Shape.text);switch(kt.fontSize=kt.fontSize-2,Et.typeC4Shape.width=calculateTextWidth("<<"+Et.typeC4Shape.text+">>",kt),Et.typeC4Shape.height=kt.fontSize+2,Et.typeC4Shape.Y=conf$a.c4ShapePadding,bt=Et.typeC4Shape.Y+Et.typeC4Shape.height-4,Et.image={width:0,height:0,Y:0},Et.typeC4Shape.text){case"person":case"external_person":Et.image.width=48,Et.image.height=48,Et.image.Y=bt,bt=Et.image.Y+Et.image.height;break}Et.sprite&&(Et.image.width=48,Et.image.height=48,Et.image.Y=bt,bt=Et.image.Y+Et.image.height);let Lt=Et.wrap&&conf$a.wrap,Ot=conf$a.width-conf$a.c4ShapePadding*2,Rt=c4ShapeFont(conf$a,Et.typeC4Shape.text);if(Rt.fontSize=Rt.fontSize+2,Rt.fontWeight="bold",calcC4ShapeTextWH("label",Et,Lt,Rt,Ot),Et.label.Y=bt+8,bt=Et.label.Y+Et.label.height,Et.type&&Et.type.text!==""){Et.type.text="["+Et.type.text+"]";let Ft=c4ShapeFont(conf$a,Et.typeC4Shape.text);calcC4ShapeTextWH("type",Et,Lt,Ft,Ot),Et.type.Y=bt+5,bt=Et.type.Y+Et.type.height}else if(Et.techn&&Et.techn.text!==""){Et.techn.text="["+Et.techn.text+"]";let Ft=c4ShapeFont(conf$a,Et.techn.text);calcC4ShapeTextWH("techn",Et,Lt,Ft,Ot),Et.techn.Y=bt+5,bt=Et.techn.Y+Et.techn.height}let Dt=bt,Bt=Et.label.width;if(Et.descr&&Et.descr.text!==""){let Ft=c4ShapeFont(conf$a,Et.typeC4Shape.text);calcC4ShapeTextWH("descr",Et,Lt,Ft,Ot),Et.descr.Y=bt+20,bt=Et.descr.Y+Et.descr.height,Bt=Math.max(Et.label.width,Et.descr.width),Dt=bt-Et.descr.textLines*5}Bt=Bt+conf$a.c4ShapePadding,Et.width=Math.max(Et.width||conf$a.width,Bt,conf$a.width),Et.height=Math.max(Et.height||conf$a.height,Dt,conf$a.height),Et.margin=Et.margin||conf$a.c4ShapeMargin,nt.insert(Et),svgDraw$3.drawC4Shape(rt,Et,conf$a)}nt.bumpLastMargin(conf$a.c4ShapeMargin)};class Point{constructor(rt,it){this.x=rt,this.y=it}}let getIntersectPoint=function(nt,rt){let it=nt.x,st=nt.y,bt=rt.x,wt=rt.y,Et=it+nt.width/2,kt=st+nt.height/2,Lt=Math.abs(it-bt),Ot=Math.abs(st-wt),Rt=Ot/Lt,Dt=nt.height/nt.width,Bt=null;return st==wt&&it<bt?Bt=new Point(it+nt.width,kt):st==wt&&it>bt?Bt=new Point(it,kt):it==bt&&st<wt?Bt=new Point(Et,st+nt.height):it==bt&&st>wt&&(Bt=new Point(Et,st)),it>bt&&st<wt?Dt>=Rt?Bt=new Point(it,kt+Rt*nt.width/2):Bt=new Point(Et-Lt/Ot*nt.height/2,st+nt.height):it<bt&&st<wt?Dt>=Rt?Bt=new Point(it+nt.width,kt+Rt*nt.width/2):Bt=new Point(Et+Lt/Ot*nt.height/2,st+nt.height):it<bt&&st>wt?Dt>=Rt?Bt=new Point(it+nt.width,kt-Rt*nt.width/2):Bt=new Point(Et+nt.height/2*Lt/Ot,st):it>bt&&st>wt&&(Dt>=Rt?Bt=new Point(it,kt-nt.width/2*Rt):Bt=new Point(Et-nt.height/2*Lt/Ot,st)),Bt},getIntersectPoints=function(nt,rt){let it={x:0,y:0};it.x=rt.x+rt.width/2,it.y=rt.y+rt.height/2;let st=getIntersectPoint(nt,it);it.x=nt.x+nt.width/2,it.y=nt.y+nt.height/2;let bt=getIntersectPoint(rt,it);return{startPoint:st,endPoint:bt}};const drawRels=function(nt,rt,it,st){let bt=0;for(let wt of rt){bt=bt+1;let Et=wt.wrap&&conf$a.wrap,kt=messageFont$1(conf$a);st.db.getC4Type()==="C4Dynamic"&&(wt.label.text=bt+": "+wt.label.text);let Ot=calculateTextWidth(wt.label.text,kt);calcC4ShapeTextWH("label",wt,Et,kt,Ot),wt.techn&&wt.techn.text!==""&&(Ot=calculateTextWidth(wt.techn.text,kt),calcC4ShapeTextWH("techn",wt,Et,kt,Ot)),wt.descr&&wt.descr.text!==""&&(Ot=calculateTextWidth(wt.descr.text,kt),calcC4ShapeTextWH("descr",wt,Et,kt,Ot));let Rt=it(wt.from),Dt=it(wt.to),Bt=getIntersectPoints(Rt,Dt);wt.startPoint=Bt.startPoint,wt.endPoint=Bt.endPoint}svgDraw$3.drawRels(nt,rt,conf$a)};function drawInsideBoundary(nt,rt,it,st,bt){let wt=new Bounds(bt);wt.data.widthLimit=it.data.widthLimit/Math.min(c4BoundaryInRow,st.length);for(let[Et,kt]of st.entries()){let Lt=0;kt.image={width:0,height:0,Y:0},kt.sprite&&(kt.image.width=48,kt.image.height=48,kt.image.Y=Lt,Lt=kt.image.Y+kt.image.height);let Ot=kt.wrap&&conf$a.wrap,Rt=boundaryFont(conf$a);if(Rt.fontSize=Rt.fontSize+2,Rt.fontWeight="bold",calcC4ShapeTextWH("label",kt,Ot,Rt,wt.data.widthLimit),kt.label.Y=Lt+8,Lt=kt.label.Y+kt.label.height,kt.type&&kt.type.text!==""){kt.type.text="["+kt.type.text+"]";let Yt=boundaryFont(conf$a);calcC4ShapeTextWH("type",kt,Ot,Yt,wt.data.widthLimit),kt.type.Y=Lt+5,Lt=kt.type.Y+kt.type.height}if(kt.descr&&kt.descr.text!==""){let Yt=boundaryFont(conf$a);Yt.fontSize=Yt.fontSize-2,calcC4ShapeTextWH("descr",kt,Ot,Yt,wt.data.widthLimit),kt.descr.Y=Lt+20,Lt=kt.descr.Y+kt.descr.height}if(Et==0||Et%c4BoundaryInRow===0){let Yt=it.data.startx+conf$a.diagramMarginX,Jt=it.data.stopy+conf$a.diagramMarginY+Lt;wt.setData(Yt,Yt,Jt,Jt)}else{let Yt=wt.data.stopx!==wt.data.startx?wt.data.stopx+conf$a.diagramMarginX:wt.data.startx,Jt=wt.data.starty;wt.setData(Yt,Yt,Jt,Jt)}wt.name=kt.alias;let Dt=bt.db.getC4ShapeArray(kt.alias),Bt=bt.db.getC4ShapeKeys(kt.alias);Bt.length>0&&drawC4ShapeArray(wt,nt,Dt,Bt),rt=kt.alias;let Ft=bt.db.getBoundarys(rt);Ft.length>0&&drawInsideBoundary(nt,rt,wt,Ft,bt),kt.alias!=="global"&&drawBoundary(nt,kt,wt),it.data.stopy=Math.max(wt.data.stopy+conf$a.c4ShapeMargin,it.data.stopy),it.data.stopx=Math.max(wt.data.stopx+conf$a.c4ShapeMargin,it.data.stopx),globalBoundaryMaxX=Math.max(globalBoundaryMaxX,it.data.stopx),globalBoundaryMaxY=Math.max(globalBoundaryMaxY,it.data.stopy)}}const draw$e=function(nt,rt,it,st){conf$a=getConfig$1().c4;const bt=getConfig$1().securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const Et=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body");let kt=st.db;st.db.setWrap(conf$a.wrap),c4ShapeInRow=kt.getC4ShapeInRow(),c4BoundaryInRow=kt.getC4BoundaryInRow(),log$1.debug(`C:${JSON.stringify(conf$a,null,2)}`);const Lt=bt==="sandbox"?Et.select(`[id="${rt}"]`):select(`[id="${rt}"]`);svgDraw$3.insertComputerIcon(Lt),svgDraw$3.insertDatabaseIcon(Lt),svgDraw$3.insertClockIcon(Lt);let Ot=new Bounds(st);Ot.setData(conf$a.diagramMarginX,conf$a.diagramMarginX,conf$a.diagramMarginY,conf$a.diagramMarginY),Ot.data.widthLimit=screen.availWidth,globalBoundaryMaxX=conf$a.diagramMarginX,globalBoundaryMaxY=conf$a.diagramMarginY;const Rt=st.db.getTitle();let Dt=st.db.getBoundarys("");drawInsideBoundary(Lt,"",Ot,Dt,st),svgDraw$3.insertArrowHead(Lt),svgDraw$3.insertArrowEnd(Lt),svgDraw$3.insertArrowCrossHead(Lt),svgDraw$3.insertArrowFilledHead(Lt),drawRels(Lt,st.db.getRels(),st.db.getC4Shape,st),Ot.data.stopx=globalBoundaryMaxX,Ot.data.stopy=globalBoundaryMaxY;const Bt=Ot.data;let Yt=Bt.stopy-Bt.starty+2*conf$a.diagramMarginY;const Wt=Bt.stopx-Bt.startx+2*conf$a.diagramMarginX;Rt&&Lt.append("text").text(Rt).attr("x",(Bt.stopx-Bt.startx)/2-4*conf$a.diagramMarginX).attr("y",Bt.starty+conf$a.diagramMarginY),configureSvgSize(Lt,Yt,Wt,conf$a.useMaxWidth);const Qt=Rt?60:0;Lt.attr("viewBox",Bt.startx-conf$a.diagramMarginX+" -"+(conf$a.diagramMarginY+Qt)+" "+Wt+" "+(Yt+Qt)),log$1.debug("models:",Bt)},c4Renderer={drawPersonOrSystemArray:drawC4ShapeArray,drawBoundary,setConf:setConf$a,draw:draw$e};var parser$9=function(){var nt=function(ir,Pn,nn,fn){for(nn=nn||{},fn=ir.length;fn--;nn[ir[fn]]=Pn);return nn},rt=[1,3],it=[1,7],st=[1,8],bt=[1,9],wt=[1,10],Et=[1,13],kt=[1,12],Lt=[1,16,25],Ot=[1,20],Rt=[1,32],Dt=[1,33],Bt=[1,34],Ft=[1,36],Yt=[1,39],Jt=[1,37],Wt=[1,38],Qt=[1,44],rn=[1,45],sn=[1,40],on=[1,41],hn=[1,42],mn=[1,43],Cn=[1,48],Tn=[1,49],kn=[1,50],In=[1,51],Ln=[16,25],pn=[1,65],Hn=[1,66],yn=[1,67],mr=[1,68],vn=[1,69],yr=[1,70],Tr=[1,71],Mr=[1,80],rr=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],wr=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],fr=[5,8,9,10,11,16,19,23,25],gr=[54,88,89,90,91],Lr=[54,65,66,88,89,90,91],Pr=[54,60,61,62,63,64,88,89,90,91],lr=[16,25,32],qr=[1,107],sr={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(Pn,nn,fn,cn,Nn,On,cr){var Bn=On.length-1;switch(Nn){case 5:cn.setDirection("TB");break;case 6:cn.setDirection("BT");break;case 7:cn.setDirection("RL");break;case 8:cn.setDirection("LR");break;case 12:cn.parseDirective("%%{","open_directive");break;case 13:cn.parseDirective(On[Bn],"type_directive");break;case 14:On[Bn]=On[Bn].trim().replace(/'/g,'"'),cn.parseDirective(On[Bn],"arg_directive");break;case 15:cn.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=On[Bn];break;case 22:this.$=On[Bn-1]+On[Bn];break;case 23:case 24:this.$=On[Bn-1]+"~"+On[Bn];break;case 25:cn.addRelation(On[Bn]);break;case 26:On[Bn-1].title=cn.cleanupLabel(On[Bn]),cn.addRelation(On[Bn-1]);break;case 35:this.$=On[Bn].trim(),cn.setAccTitle(this.$);break;case 36:case 37:this.$=On[Bn].trim(),cn.setAccDescription(this.$);break;case 38:cn.addClass(On[Bn]);break;case 39:cn.addClass(On[Bn-2]),cn.setCssClass(On[Bn-2],On[Bn]);break;case 40:cn.addClass(On[Bn-3]),cn.addMembers(On[Bn-3],On[Bn-1]);break;case 41:cn.addClass(On[Bn-5]),cn.setCssClass(On[Bn-5],On[Bn-3]),cn.addMembers(On[Bn-5],On[Bn-1]);break;case 42:cn.addAnnotation(On[Bn],On[Bn-2]);break;case 43:this.$=[On[Bn]];break;case 44:On[Bn].push(On[Bn-1]),this.$=On[Bn];break;case 45:break;case 46:cn.addMember(On[Bn-1],cn.cleanupLabel(On[Bn]));break;case 47:break;case 48:break;case 49:this.$={id1:On[Bn-2],id2:On[Bn],relation:On[Bn-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:On[Bn-3],id2:On[Bn],relation:On[Bn-1],relationTitle1:On[Bn-2],relationTitle2:"none"};break;case 51:this.$={id1:On[Bn-3],id2:On[Bn],relation:On[Bn-2],relationTitle1:"none",relationTitle2:On[Bn-1]};break;case 52:this.$={id1:On[Bn-4],id2:On[Bn],relation:On[Bn-2],relationTitle1:On[Bn-3],relationTitle2:On[Bn-1]};break;case 53:cn.addNote(On[Bn],On[Bn-1]);break;case 54:cn.addNote(On[Bn]);break;case 55:this.$={type1:On[Bn-2],type2:On[Bn],lineType:On[Bn-1]};break;case 56:this.$={type1:"none",type2:On[Bn],lineType:On[Bn-1]};break;case 57:this.$={type1:On[Bn-1],type2:"none",lineType:On[Bn]};break;case 58:this.$={type1:"none",type2:"none",lineType:On[Bn]};break;case 59:this.$=cn.relationType.AGGREGATION;break;case 60:this.$=cn.relationType.EXTENSION;break;case 61:this.$=cn.relationType.COMPOSITION;break;case 62:this.$=cn.relationType.DEPENDENCY;break;case 63:this.$=cn.relationType.LOLLIPOP;break;case 64:this.$=cn.lineType.LINE;break;case 65:this.$=cn.lineType.DOTTED_LINE;break;case 66:case 72:this.$=On[Bn-2],cn.setClickEvent(On[Bn-1],On[Bn]);break;case 67:case 73:this.$=On[Bn-3],cn.setClickEvent(On[Bn-2],On[Bn-1]),cn.setTooltip(On[Bn-2],On[Bn]);break;case 68:case 76:this.$=On[Bn-2],cn.setLink(On[Bn-1],On[Bn]);break;case 69:this.$=On[Bn-3],cn.setLink(On[Bn-2],On[Bn-1],On[Bn]);break;case 70:case 78:this.$=On[Bn-3],cn.setLink(On[Bn-2],On[Bn-1]),cn.setTooltip(On[Bn-2],On[Bn]);break;case 71:case 79:this.$=On[Bn-4],cn.setLink(On[Bn-3],On[Bn-2],On[Bn]),cn.setTooltip(On[Bn-3],On[Bn-1]);break;case 74:this.$=On[Bn-3],cn.setClickEvent(On[Bn-2],On[Bn-1],On[Bn]);break;case 75:this.$=On[Bn-4],cn.setClickEvent(On[Bn-3],On[Bn-2],On[Bn-1]),cn.setTooltip(On[Bn-3],On[Bn]);break;case 77:this.$=On[Bn-3],cn.setLink(On[Bn-2],On[Bn-1],On[Bn]);break;case 80:cn.setCssClass(On[Bn-1],On[Bn]);break}},table:[{3:1,4:2,5:rt,6:4,7:5,8:it,9:st,10:bt,11:wt,12:6,13:11,19:Et,23:kt},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:rt,6:4,7:5,8:it,9:st,10:bt,11:wt,12:6,13:11,19:Et,23:kt},{1:[2,9]},nt(Lt,[2,5]),nt(Lt,[2,6]),nt(Lt,[2,7]),nt(Lt,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:Ot},nt([17,22],[2,13]),{6:31,7:30,8:it,9:st,10:bt,11:wt,13:11,19:Et,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Rt,41:Dt,43:Bt,44:Ft,49:Yt,51:Jt,52:Wt,55:Qt,57:rn,67:sn,68:on,70:hn,74:mn,88:Cn,89:Tn,90:kn,91:In},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},nt(Ln,[2,25],{32:[1,57]}),nt(Ln,[2,27]),nt(Ln,[2,28]),nt(Ln,[2,29]),nt(Ln,[2,30]),nt(Ln,[2,31]),nt(Ln,[2,32]),nt(Ln,[2,33]),nt(Ln,[2,34]),{40:[1,58]},{42:[1,59]},nt(Ln,[2,37]),nt(Ln,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:pn,61:Hn,62:yn,63:mr,64:vn,65:yr,66:Tr}),{27:72,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},nt(Ln,[2,47]),nt(Ln,[2,48]),{28:73,88:Cn,89:Tn,90:kn},{27:74,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},{27:75,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},{27:76,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},{54:[1,77]},{27:78,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},{54:Mr,56:79},nt(rr,[2,20],{28:46,29:47,27:81,30:[1,82],88:Cn,89:Tn,90:kn,91:In}),nt(rr,[2,21],{30:[1,83]}),nt(wr,[2,94]),nt(wr,[2,95]),nt(wr,[2,96]),nt([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),nt(fr,[2,10]),{15:84,22:Ot},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:it,9:st,10:bt,11:wt,13:11,19:Et,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Rt,41:Dt,43:Bt,44:Ft,49:Yt,51:Jt,52:Wt,55:Qt,57:rn,67:sn,68:on,70:hn,74:mn,88:Cn,89:Tn,90:kn,91:In},nt(Ln,[2,26]),nt(Ln,[2,35]),nt(Ln,[2,36]),{27:86,28:46,29:47,54:[1,87],88:Cn,89:Tn,90:kn,91:In},{53:88,58:63,59:64,60:pn,61:Hn,62:yn,63:mr,64:vn,65:yr,66:Tr},nt(Ln,[2,46]),{59:89,65:yr,66:Tr},nt(gr,[2,58],{58:90,60:pn,61:Hn,62:yn,63:mr,64:vn}),nt(Lr,[2,59]),nt(Lr,[2,60]),nt(Lr,[2,61]),nt(Lr,[2,62]),nt(Lr,[2,63]),nt(Pr,[2,64]),nt(Pr,[2,65]),nt(Ln,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:Cn,89:Tn,90:kn},{54:Mr,56:99},nt(Ln,[2,54]),nt(Ln,[2,98]),nt(rr,[2,22]),nt(rr,[2,23]),nt(rr,[2,24]),{16:[1,100]},{25:[2,19]},nt(lr,[2,49]),{27:101,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},{27:102,28:46,29:47,54:[1,103],88:Cn,89:Tn,90:kn,91:In},nt(gr,[2,57],{58:104,60:pn,61:Hn,62:yn,63:mr,64:vn}),nt(gr,[2,56]),{28:105,88:Cn,89:Tn,90:kn},{47:106,51:qr},{27:108,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},nt(Ln,[2,66],{54:[1,109]}),nt(Ln,[2,68],{54:[1,111],69:[1,110]}),nt(Ln,[2,72],{54:[1,112],72:[1,113]}),nt(Ln,[2,76],{54:[1,115],69:[1,114]}),nt(Ln,[2,80]),nt(Ln,[2,53]),nt(fr,[2,11]),nt(lr,[2,51]),nt(lr,[2,50]),{27:116,28:46,29:47,88:Cn,89:Tn,90:kn,91:In},nt(gr,[2,55]),nt(Ln,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:qr},nt(Ln,[2,42]),nt(Ln,[2,67]),nt(Ln,[2,69]),nt(Ln,[2,70],{69:[1,120]}),nt(Ln,[2,73]),nt(Ln,[2,74],{54:[1,121]}),nt(Ln,[2,77]),nt(Ln,[2,78],{69:[1,122]}),nt(lr,[2,52]),{47:123,51:qr},nt(Ln,[2,40]),{48:[2,44]},nt(Ln,[2,71]),nt(Ln,[2,75]),nt(Ln,[2,79]),{48:[1,124]},nt(Ln,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(Pn,nn){if(nn.recoverable)this.trace(Pn);else{var fn=new Error(Pn);throw fn.hash=nn,fn}},parse:function(Pn){var nn=this,fn=[0],cn=[],Nn=[null],On=[],cr=this.table,Bn="",Qn=0,Un=0,or=2,hr=1,kr=On.slice.call(arguments,1),xr=Object.create(this.lexer),br={yy:{}};for(var hi in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hi)&&(br.yy[hi]=this.yy[hi]);xr.setInput(Pn,br.yy),br.yy.lexer=xr,br.yy.parser=this,typeof xr.yylloc>"u"&&(xr.yylloc={});var di=xr.yylloc;On.push(di);var vi=xr.options&&xr.options.ranges;typeof br.yy.parseError=="function"?this.parseError=br.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ti(){var _r;return _r=cn.pop()||xr.lex()||hr,typeof _r!="number"&&(_r instanceof Array&&(cn=_r,_r=cn.pop()),_r=nn.symbols_[_r]||_r),_r}for(var ki,Di,Ci,$r,An={},Sn,Wn,er,vr;;){if(Di=fn[fn.length-1],this.defaultActions[Di]?Ci=this.defaultActions[Di]:((ki===null||typeof ki>"u")&&(ki=Ti()),Ci=cr[Di]&&cr[Di][ki]),typeof Ci>"u"||!Ci.length||!Ci[0]){var ti="";vr=[];for(Sn in cr[Di])this.terminals_[Sn]&&Sn>or&&vr.push("'"+this.terminals_[Sn]+"'");xr.showPosition?ti="Parse error on line "+(Qn+1)+`:
`+xr.showPosition()+`
Expecting `+vr.join(", ")+", got '"+(this.terminals_[ki]||ki)+"'":ti="Parse error on line "+(Qn+1)+": Unexpected "+(ki==hr?"end of input":"'"+(this.terminals_[ki]||ki)+"'"),this.parseError(ti,{text:xr.match,token:this.terminals_[ki]||ki,line:xr.yylineno,loc:di,expected:vr})}if(Ci[0]instanceof Array&&Ci.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Di+", token: "+ki);switch(Ci[0]){case 1:fn.push(ki),Nn.push(xr.yytext),On.push(xr.yylloc),fn.push(Ci[1]),ki=null,Un=xr.yyleng,Bn=xr.yytext,Qn=xr.yylineno,di=xr.yylloc;break;case 2:if(Wn=this.productions_[Ci[1]][1],An.$=Nn[Nn.length-Wn],An._$={first_line:On[On.length-(Wn||1)].first_line,last_line:On[On.length-1].last_line,first_column:On[On.length-(Wn||1)].first_column,last_column:On[On.length-1].last_column},vi&&(An._$.range=[On[On.length-(Wn||1)].range[0],On[On.length-1].range[1]]),$r=this.performAction.apply(An,[Bn,Un,Qn,br.yy,Ci[1],Nn,On].concat(kr)),typeof $r<"u")return $r;Wn&&(fn=fn.slice(0,-1*Wn*2),Nn=Nn.slice(0,-1*Wn),On=On.slice(0,-1*Wn)),fn.push(this.productions_[Ci[1]][0]),Nn.push(An.$),On.push(An._$),er=cr[fn[fn.length-2]][fn[fn.length-1]],fn.push(er);break;case 3:return!0}}return!0}},pr=function(){var ir={EOF:1,parseError:function(nn,fn){if(this.yy.parser)this.yy.parser.parseError(nn,fn);else throw new Error(nn)},setInput:function(Pn,nn){return this.yy=nn||this.yy||{},this._input=Pn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Pn=this._input[0];this.yytext+=Pn,this.yyleng++,this.offset++,this.match+=Pn,this.matched+=Pn;var nn=Pn.match(/(?:\r\n?|\n).*/g);return nn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pn},unput:function(Pn){var nn=Pn.length,fn=Pn.split(/(?:\r\n?|\n)/g);this._input=Pn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-nn),this.offset-=nn;var cn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),fn.length-1&&(this.yylineno-=fn.length-1);var Nn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:fn?(fn.length===cn.length?this.yylloc.first_column:0)+cn[cn.length-fn.length].length-fn[0].length:this.yylloc.first_column-nn},this.options.ranges&&(this.yylloc.range=[Nn[0],Nn[0]+this.yyleng-nn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Pn){this.unput(this.match.slice(Pn))},pastInput:function(){var Pn=this.matched.substr(0,this.matched.length-this.match.length);return(Pn.length>20?"...":"")+Pn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Pn=this.match;return Pn.length<20&&(Pn+=this._input.substr(0,20-Pn.length)),(Pn.substr(0,20)+(Pn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Pn=this.pastInput(),nn=new Array(Pn.length+1).join("-");return Pn+this.upcomingInput()+`
`+nn+"^"},test_match:function(Pn,nn){var fn,cn,Nn;if(this.options.backtrack_lexer&&(Nn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Nn.yylloc.range=this.yylloc.range.slice(0))),cn=Pn[0].match(/(?:\r\n?|\n).*/g),cn&&(this.yylineno+=cn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:cn?cn[cn.length-1].length-cn[cn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pn[0].length},this.yytext+=Pn[0],this.match+=Pn[0],this.matches=Pn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pn[0].length),this.matched+=Pn[0],fn=this.performAction.call(this,this.yy,this,nn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),fn)return fn;if(this._backtrack){for(var On in Nn)this[On]=Nn[On];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Pn,nn,fn,cn;this._more||(this.yytext="",this.match="");for(var Nn=this._currentRules(),On=0;On<Nn.length;On++)if(fn=this._input.match(this.rules[Nn[On]]),fn&&(!nn||fn[0].length>nn[0].length)){if(nn=fn,cn=On,this.options.backtrack_lexer){if(Pn=this.test_match(fn,Nn[On]),Pn!==!1)return Pn;if(this._backtrack){nn=!1;continue}else return!1}else if(!this.options.flex)break}return nn?(Pn=this.test_match(nn,Nn[cn]),Pn!==!1?Pn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var nn=this.next();return nn||this.lex()},begin:function(nn){this.conditionStack.push(nn)},popState:function(){var nn=this.conditionStack.length-1;return nn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(nn){return nn=this.conditionStack.length-1-Math.abs(nn||0),nn>=0?this.conditionStack[nn]:"INITIAL"},pushState:function(nn){this.begin(nn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(nn,fn,cn,Nn){switch(cn){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return ir}();sr.lexer=pr;function Er(){this.yy={}}return Er.prototype=sr,sr.Parser=Er,new Er}();parser$9.parser=parser$9;const classParser=parser$9,classDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*classDiagram/)!==null},classDetectorV2=(nt,rt)=>{var it;return nt.match(/^\s*classDiagram/)!==null&&((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!0:nt.match(/^\s*classDiagram-v2/)!==null},MERMAID_DOM_ID_PREFIX$1="classid-";let relations$1=[],classes$2={},notes=[],classCounter=0,funs$2=[];const sanitizeText$2=nt=>common$1.sanitizeText(nt,getConfig$1()),parseDirective$9=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},splitClassNameAndType=function(nt){let rt="",it=nt;if(nt.indexOf("~")>0){let st=nt.split("~");it=st[0],rt=common$1.sanitizeText(st[1],getConfig$1())}return{className:it,type:rt}},addClass$1=function(nt){let rt=splitClassNameAndType(nt);classes$2[rt.className]===void 0&&(classes$2[rt.className]={id:rt.className,type:rt.type,cssClasses:[],methods:[],members:[],annotations:[],domId:MERMAID_DOM_ID_PREFIX$1+rt.className+"-"+classCounter},classCounter++)},lookUpDomId$1=function(nt){const rt=Object.keys(classes$2);for(const it of rt)if(classes$2[it].id===nt)return classes$2[it].domId},clear$c=function(){relations$1=[],classes$2={},notes=[],funs$2=[],funs$2.push(setupToolTips$1),clear$g()},getClass=function(nt){return classes$2[nt]},getClasses$5=function(){return classes$2},getRelations$1=function(){return relations$1},getNotes=function(){return notes},addRelation$1=function(nt){log$1.debug("Adding relation: "+JSON.stringify(nt)),addClass$1(nt.id1),addClass$1(nt.id2),nt.id1=splitClassNameAndType(nt.id1).className,nt.id2=splitClassNameAndType(nt.id2).className,nt.relationTitle1=common$1.sanitizeText(nt.relationTitle1.trim(),getConfig$1()),nt.relationTitle2=common$1.sanitizeText(nt.relationTitle2.trim(),getConfig$1()),relations$1.push(nt)},addAnnotation=function(nt,rt){const it=splitClassNameAndType(nt).className;classes$2[it].annotations.push(rt)},addMember=function(nt,rt){const it=splitClassNameAndType(nt).className,st=classes$2[it];if(typeof rt=="string"){const bt=rt.trim();bt.startsWith("<<")&&bt.endsWith(">>")?st.annotations.push(sanitizeText$2(bt.substring(2,bt.length-2))):bt.indexOf(")")>0?st.methods.push(sanitizeText$2(bt)):bt&&st.members.push(sanitizeText$2(bt))}},addMembers=function(nt,rt){Array.isArray(rt)&&(rt.reverse(),rt.forEach(it=>addMember(nt,it)))},addNote$1=function(nt,rt){const it={id:`note${notes.length}`,class:rt,text:nt};notes.push(it)},cleanupLabel$1=function(nt){return nt.substring(0,1)===":"?common$1.sanitizeText(nt.substr(1).trim(),getConfig$1()):sanitizeText$2(nt.trim())},setCssClass$1=function(nt,rt){nt.split(",").forEach(function(it){let st=it;it[0].match(/\d/)&&(st=MERMAID_DOM_ID_PREFIX$1+st),classes$2[st]!==void 0&&classes$2[st].cssClasses.push(rt)})},setTooltip$1=function(nt,rt){const it=getConfig$1();nt.split(",").forEach(function(st){rt!==void 0&&(classes$2[st].tooltip=common$1.sanitizeText(rt,it))})},getTooltip$1=function(nt){return classes$2[nt].tooltip},setLink$2=function(nt,rt,it){const st=getConfig$1();nt.split(",").forEach(function(bt){let wt=bt;bt[0].match(/\d/)&&(wt=MERMAID_DOM_ID_PREFIX$1+wt),classes$2[wt]!==void 0&&(classes$2[wt].link=utils.formatUrl(rt,st),st.securityLevel==="sandbox"?classes$2[wt].linkTarget="_top":typeof it=="string"?classes$2[wt].linkTarget=sanitizeText$2(it):classes$2[wt].linkTarget="_blank")}),setCssClass$1(nt,"clickable")},setClickEvent$2=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFunc(st,rt,it),classes$2[st].haveCallback=!0}),setCssClass$1(nt,"clickable")},setClickFunc=function(nt,rt,it){const st=getConfig$1();let bt=nt,wt=lookUpDomId$1(bt);if(st.securityLevel==="loose"&&rt!==void 0&&classes$2[bt]!==void 0){let Et=[];if(typeof it=="string"){Et=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let kt=0;kt<Et.length;kt++){let Lt=Et[kt].trim();Lt.charAt(0)==='"'&&Lt.charAt(Lt.length-1)==='"'&&(Lt=Lt.substr(1,Lt.length-2)),Et[kt]=Lt}}Et.length===0&&Et.push(wt),funs$2.push(function(){const kt=document.querySelector(`[id="${wt}"]`);kt!==null&&kt.addEventListener("click",function(){utils.runFunc(rt,...Et)},!1)})}},bindFunctions$2=function(nt){funs$2.forEach(function(rt){rt(nt)})},lineType$1={LINE:0,DOTTED_LINE:1},relationType$1={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setupToolTips$1=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const bt=select(this);if(bt.attr("title")===null)return;const Et=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(bt.attr("title")).style("left",window.scrollX+Et.left+(Et.right-Et.left)/2+"px").style("top",window.scrollY+Et.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),bt.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$2.push(setupToolTips$1);let direction$2="TB";const getDirection$2=()=>direction$2,setDirection$2=nt=>{direction$2=nt},classDb={parseDirective:parseDirective$9,setAccTitle,getAccTitle,getAccDescription,setAccDescription,getConfig:()=>getConfig$1().class,addClass:addClass$1,bindFunctions:bindFunctions$2,clear:clear$c,getClass,getClasses:getClasses$5,getNotes,addAnnotation,addNote:addNote$1,getRelations:getRelations$1,addRelation:addRelation$1,getDirection:getDirection$2,setDirection:setDirection$2,addMember,addMembers,cleanupLabel:cleanupLabel$1,lineType:lineType$1,relationType:relationType$1,setClickEvent:setClickEvent$2,setCssClass:setCssClass$1,setLink:setLink$2,getTooltip:getTooltip$1,setTooltip:setTooltip$1,lookUpDomId:lookUpDomId$1,setDiagramTitle,getDiagramTitle};let edgeCount$1=0;const drawEdge$1=function(nt,rt,it,st,bt){const wt=function(rn){switch(rn){case bt.db.relationType.AGGREGATION:return"aggregation";case bt.db.relationType.EXTENSION:return"extension";case bt.db.relationType.COMPOSITION:return"composition";case bt.db.relationType.DEPENDENCY:return"dependency";case bt.db.relationType.LOLLIPOP:return"lollipop"}};rt.points=rt.points.filter(rn=>!Number.isNaN(rn.y));const Et=rt.points,kt=line$1().x(function(rn){return rn.x}).y(function(rn){return rn.y}).curve(curveBasis),Lt=nt.append("path").attr("d",kt(Et)).attr("id","edge"+edgeCount$1).attr("class","relation");let Ot="";st.arrowMarkerAbsolute&&(Ot=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Ot=Ot.replace(/\(/g,"\\("),Ot=Ot.replace(/\)/g,"\\)")),it.relation.lineType==1&&Lt.attr("class","relation dashed-line"),it.relation.lineType==10&&Lt.attr("class","relation dotted-line"),it.relation.type1!=="none"&&Lt.attr("marker-start","url("+Ot+"#"+wt(it.relation.type1)+"Start)"),it.relation.type2!=="none"&&Lt.attr("marker-end","url("+Ot+"#"+wt(it.relation.type2)+"End)");let Rt,Dt;const Bt=rt.points.length;let Ft=utils.calcLabelPosition(rt.points);Rt=Ft.x,Dt=Ft.y;let Yt,Jt,Wt,Qt;if(Bt%2!==0&&Bt>1){let rn=utils.calcCardinalityPosition(it.relation.type1!=="none",rt.points,rt.points[0]),sn=utils.calcCardinalityPosition(it.relation.type2!=="none",rt.points,rt.points[Bt-1]);log$1.debug("cardinality_1_point "+JSON.stringify(rn)),log$1.debug("cardinality_2_point "+JSON.stringify(sn)),Yt=rn.x,Jt=rn.y,Wt=sn.x,Qt=sn.y}if(it.title!==void 0){const rn=nt.append("g").attr("class","classLabel"),sn=rn.append("text").attr("class","label").attr("x",Rt).attr("y",Dt).attr("fill","red").attr("text-anchor","middle").text(it.title);window.label=sn;const on=sn.node().getBBox();rn.insert("rect",":first-child").attr("class","box").attr("x",on.x-st.padding/2).attr("y",on.y-st.padding/2).attr("width",on.width+st.padding).attr("height",on.height+st.padding)}log$1.info("Rendering relation "+JSON.stringify(it)),it.relationTitle1!==void 0&&it.relationTitle1!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",Yt).attr("y",Jt).attr("fill","black").attr("font-size","6").text(it.relationTitle1),it.relationTitle2!==void 0&&it.relationTitle2!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",Wt).attr("y",Qt).attr("fill","black").attr("font-size","6").text(it.relationTitle2),edgeCount$1++},drawClass=function(nt,rt,it,st){log$1.debug("Rendering class ",rt,it);const bt=rt.id,wt={id:bt,label:rt.id,width:0,height:0},Et=nt.append("g").attr("id",st.db.lookUpDomId(bt)).attr("class","classGroup");let kt;rt.link?kt=Et.append("svg:a").attr("xlink:href",rt.link).attr("target",rt.linkTarget).append("text").attr("y",it.textHeight+it.padding).attr("x",0):kt=Et.append("text").attr("y",it.textHeight+it.padding).attr("x",0);let Lt=!0;rt.annotations.forEach(function(hn){const mn=kt.append("tspan").text("\xAB"+hn+"\xBB");Lt||mn.attr("dy",it.textHeight),Lt=!1});let Ot=rt.id;rt.type!==void 0&&rt.type!==""&&(Ot+="<"+rt.type+">");const Rt=kt.append("tspan").text(Ot).attr("class","title");Lt||Rt.attr("dy",it.textHeight);const Dt=kt.node().getBBox().height,Bt=Et.append("line").attr("x1",0).attr("y1",it.padding+Dt+it.dividerMargin/2).attr("y2",it.padding+Dt+it.dividerMargin/2),Ft=Et.append("text").attr("x",it.padding).attr("y",Dt+it.dividerMargin+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.members.forEach(function(hn){addTspan(Ft,hn,Lt,it),Lt=!1});const Yt=Ft.node().getBBox(),Jt=Et.append("line").attr("x1",0).attr("y1",it.padding+Dt+it.dividerMargin+Yt.height).attr("y2",it.padding+Dt+it.dividerMargin+Yt.height),Wt=Et.append("text").attr("x",it.padding).attr("y",Dt+2*it.dividerMargin+Yt.height+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.methods.forEach(function(hn){addTspan(Wt,hn,Lt,it),Lt=!1});const Qt=Et.node().getBBox();var rn=" ";rt.cssClasses.length>0&&(rn=rn+rt.cssClasses.join(" "));const on=Et.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Qt.width+2*it.padding).attr("height",Qt.height+it.padding+.5*it.dividerMargin).attr("class",rn).node().getBBox().width;return kt.node().childNodes.forEach(function(hn){hn.setAttribute("x",(on-hn.getBBox().width)/2)}),rt.tooltip&&kt.insert("title").text(rt.tooltip),Bt.attr("x2",on),Jt.attr("x2",on),wt.width=on,wt.height=Qt.height+it.padding+.5*it.dividerMargin,wt},drawNote$2=function(nt,rt,it,st){log$1.debug("Rendering note ",rt,it);const bt=rt.id,wt={id:bt,text:rt.text,width:0,height:0},Et=nt.append("g").attr("id",bt).attr("class","classGroup");let kt=Et.append("text").attr("y",it.textHeight+it.padding).attr("x",0);const Lt=JSON.parse(`"${rt.text}"`).split(`
`);Lt.forEach(function(Bt){log$1.debug(`Adding line: ${Bt}`),kt.append("tspan").text(Bt).attr("class","title").attr("dy",it.textHeight)});const Ot=Et.node().getBBox(),Dt=Et.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Ot.width+2*it.padding).attr("height",Ot.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin).node().getBBox().width;return kt.node().childNodes.forEach(function(Bt){Bt.setAttribute("x",(Dt-Bt.getBBox().width)/2)}),wt.width=Dt,wt.height=Ot.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin,wt},parseMember=function(nt){const rt=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,it=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let st=nt.match(rt),bt=nt.match(it);return st&&!bt?buildFieldDisplay(st):bt?buildMethodDisplay(bt):buildLegacyDisplay(nt)},buildFieldDisplay=function(nt){let rt="",it="";try{let st=nt[1]?nt[1].trim():"",bt=nt[2]?nt[2].trim():"",wt=nt[3]?parseGenericTypes(nt[3].trim()):"",Et=nt[4]?nt[4].trim():"",kt=nt[5]?nt[5].trim():"";it=st+bt+wt+" "+Et,rt=parseClassifier(kt)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildMethodDisplay=function(nt){let rt="",it="";try{let st=nt[1]?nt[1].trim():"",bt=nt[2]?nt[2].trim():"",wt=nt[3]?parseGenericTypes(nt[3].trim()):"",Et=nt[4]?nt[4].trim():"",kt=nt[5]?" : "+parseGenericTypes(nt[5]).trim():"";it=st+bt+"("+wt+")"+kt,rt=parseClassifier(Et)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildLegacyDisplay=function(nt){let rt="",it="",st="",bt=nt.indexOf("("),wt=nt.indexOf(")");if(bt>1&&wt>bt&&wt<=nt.length){let Et="",kt="",Lt=nt.substring(0,1);Lt.match(/\w/)?kt=nt.substring(0,bt).trim():(Lt.match(/[#+~-]/)&&(Et=Lt),kt=nt.substring(1,bt).trim());const Ot=nt.substring(bt+1,wt);nt.substring(wt+1,1),it=parseClassifier(nt.substring(wt+1,wt+2)),rt=Et+kt+"("+parseGenericTypes(Ot.trim())+")",wt<nt.length&&(st=nt.substring(wt+2).trim(),st!==""&&(st=" : "+parseGenericTypes(st),rt+=st))}else rt=parseGenericTypes(nt);return{displayText:rt,cssStyle:it}},addTspan=function(nt,rt,it,st){let bt=parseMember(rt);const wt=nt.append("tspan").attr("x",st.padding).text(bt.displayText);bt.cssStyle!==""&&wt.attr("style",bt.cssStyle),it||wt.attr("dy",st.textHeight)},parseClassifier=function(nt){switch(nt){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},svgDraw$2={drawClass,drawEdge:drawEdge$1,drawNote:drawNote$2,parseMember};let idCache$2={};const padding=20,getGraphId=function(nt){const rt=Object.entries(idCache$2).find(it=>it[1].label===nt);if(rt)return rt[0]},insertMarkers$4=function(nt){nt.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),nt.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},draw$d=function(nt,rt,it,st){const bt=getConfig$1().class;idCache$2={},log$1.info("Rendering diagram "+nt);const wt=getConfig$1().securityLevel;let Et;wt==="sandbox"&&(Et=select("#i"+rt));const kt=select(wt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=kt.select(`[id='${rt}']`);insertMarkers$4(Lt);const Ot=new Graph({multigraph:!0});Ot.setGraph({isMultiGraph:!0}),Ot.setDefaultEdgeLabel(function(){return{}});const Rt=st.db.getClasses(),Dt=Object.keys(Rt);for(const rn of Dt){const sn=Rt[rn],on=svgDraw$2.drawClass(Lt,sn,bt,st);idCache$2[on.id]=on,Ot.setNode(on.id,on),log$1.info("Org height: "+on.height)}st.db.getRelations().forEach(function(rn){log$1.info("tjoho"+getGraphId(rn.id1)+getGraphId(rn.id2)+JSON.stringify(rn)),Ot.setEdge(getGraphId(rn.id1),getGraphId(rn.id2),{relation:rn},rn.title||"DEFAULT")}),st.db.getNotes().forEach(function(rn){log$1.debug(`Adding note: ${JSON.stringify(rn)}`);const sn=svgDraw$2.drawNote(Lt,rn,bt,st);idCache$2[sn.id]=sn,Ot.setNode(sn.id,sn),rn.class&&rn.class in Rt&&Ot.setEdge(rn.id,getGraphId(rn.class),{relation:{id1:rn.id,id2:rn.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),layout(Ot),Ot.nodes().forEach(function(rn){rn!==void 0&&Ot.node(rn)!==void 0&&(log$1.debug("Node "+rn+": "+JSON.stringify(Ot.node(rn))),kt.select("#"+(st.db.lookUpDomId(rn)||rn)).attr("transform","translate("+(Ot.node(rn).x-Ot.node(rn).width/2)+","+(Ot.node(rn).y-Ot.node(rn).height/2)+" )"))}),Ot.edges().forEach(function(rn){rn!==void 0&&Ot.edge(rn)!==void 0&&(log$1.debug("Edge "+rn.v+" -> "+rn.w+": "+JSON.stringify(Ot.edge(rn))),svgDraw$2.drawEdge(Lt,Ot.edge(rn),Ot.edge(rn).relation,bt,st))});const Yt=Lt.node().getBBox(),Jt=Yt.width+padding*2,Wt=Yt.height+padding*2;configureSvgSize(Lt,Wt,Jt,bt.useMaxWidth);const Qt=`${Yt.x-padding} ${Yt.y-padding} ${Jt} ${Wt}`;log$1.debug(`viewBox ${Qt}`),Lt.attr("viewBox",Qt)},classRenderer={draw:draw$d},insertMarkers$2=(nt,rt,it,st)=>{rt.forEach(bt=>{markers$1[bt](nt,it,st)})},extension=(nt,rt,it)=>{log$1.trace("Making markers for ",it),nt.append("defs").append("marker").attr("id",rt+"-extensionStart").attr("class","marker extension "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id",rt+"-extensionEnd").attr("class","marker extension "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-compositionStart").attr("class","marker composition "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-compositionEnd").attr("class","marker composition "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-aggregationStart").attr("class","marker aggregation "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-aggregationEnd").attr("class","marker aggregation "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-dependencyStart").attr("class","marker dependency "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-dependencyEnd").attr("class","marker dependency "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-lollipopStart").attr("class","marker lollipop "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point=(nt,rt)=>{nt.append("marker").attr("id",rt+"-pointEnd").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-pointStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle$1=(nt,rt)=>{nt.append("marker").attr("id",rt+"-circleEnd").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-circleStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross=(nt,rt)=>{nt.append("marker").attr("id",rt+"-crossEnd").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-crossStart").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},markers$1={extension,composition,aggregation,dependency,lollipop,point,circle:circle$1,cross,barb},insertMarkers$3=insertMarkers$2;function applyStyle(nt,rt){rt&&nt.attr("style",rt)}function addHtmlLabel(nt){const rt=select(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),it=rt.append("xhtml:div"),st=nt.label,bt=nt.isNode?"nodeLabel":"edgeLabel";return it.html('<span class="'+bt+'" '+(nt.labelStyle?'style="'+nt.labelStyle+'"':"")+">"+st+"</span>"),applyStyle(it,nt.labelStyle),it.style("display","inline-block"),it.style("white-space","nowrap"),it.attr("xmlns","http://www.w3.org/1999/xhtml"),rt.node()}const createLabel=(nt,rt,it,st)=>{let bt=nt||"";if(typeof bt=="object"&&(bt=bt[0]),evaluate(getConfig$1().flowchart.htmlLabels)){bt=bt.replace(/\\n|\n/g,"<br />"),log$1.info("vertexText"+bt);const wt={isNode:st,label:decodeEntities(bt).replace(/fa[blrs]?:fa-[\w-]+/g,kt=>`<i class='${kt.replace(":"," ")}'></i>`),labelStyle:rt.replace("fill:","color:")};return addHtmlLabel(wt)}else{const wt=document.createElementNS("http://www.w3.org/2000/svg","text");wt.setAttribute("style",rt.replace("color:","fill:"));let Et=[];typeof bt=="string"?Et=bt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(bt)?Et=bt:Et=[];for(const kt of Et){const Lt=document.createElementNS("http://www.w3.org/2000/svg","tspan");Lt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Lt.setAttribute("dy","1em"),Lt.setAttribute("x","0"),it?Lt.setAttribute("class","title-row"):Lt.setAttribute("class","row"),Lt.textContent=kt.trim(),wt.appendChild(Lt)}return wt}},createLabel$1=createLabel,labelHelper=(nt,rt,it,st)=>{let bt;it?bt=it:bt="node default";const wt=nt.insert("g").attr("class",bt).attr("id",rt.domId||rt.id),Et=wt.insert("g").attr("class","label").attr("style",rt.labelStyle);let kt;rt.labelText===void 0?kt="":kt=typeof rt.labelText=="string"?rt.labelText:rt.labelText[0];const Lt=Et.node().appendChild(createLabel$1(sanitizeText$5(decodeEntities(kt),getConfig$1()),rt.labelStyle,!1,st));let Ot=Lt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Dt=Lt.children[0],Bt=select(Lt);Ot=Dt.getBoundingClientRect(),Bt.attr("width",Ot.width),Bt.attr("height",Ot.height)}const Rt=rt.padding/2;return Et.attr("transform","translate("+-Ot.width/2+", "+-Ot.height/2+")"),{shapeSvg:wt,bbox:Ot,halfPadding:Rt,label:Et}},updateNodeBounds=(nt,rt)=>{const it=rt.node().getBBox();nt.width=it.width,nt.height=it.height};function insertPolygonShape$1(nt,rt,it,st){return nt.insert("polygon",":first-child").attr("points",st.map(function(bt){return bt.x+","+bt.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-rt/2+","+it/2+")")}let clusterDb={},descendants={},parents={};const clear$b=()=>{descendants={},parents={},clusterDb={}},isDescendant=(nt,rt)=>(log$1.trace("In isDecendant",rt," ",nt," = ",descendants[rt].includes(nt)),!!descendants[rt].includes(nt)),edgeInCluster=(nt,rt)=>(log$1.info("Decendants of ",rt," is ",descendants[rt]),log$1.info("Edge is ",nt),nt.v===rt||nt.w===rt?!1:descendants[rt]?descendants[rt].includes(nt.v)||isDescendant(nt.v,rt)||isDescendant(nt.w,rt)||descendants[rt].includes(nt.w):(log$1.debug("Tilt, ",rt,",not in decendants"),!1)),copy=(nt,rt,it,st)=>{log$1.warn("Copying children of ",nt,"root",st,"data",rt.node(nt),st);const bt=rt.children(nt)||[];nt!==st&&bt.push(nt),log$1.warn("Copying (nodes) clusterId",nt,"nodes",bt),bt.forEach(wt=>{if(rt.children(wt).length>0)copy(wt,rt,it,st);else{const Et=rt.node(wt);log$1.info("cp ",wt," to ",st," with parent ",nt),it.setNode(wt,Et),st!==rt.parent(wt)&&(log$1.warn("Setting parent",wt,rt.parent(wt)),it.setParent(wt,rt.parent(wt))),nt!==st&&wt!==nt?(log$1.debug("Setting parent",wt,nt),it.setParent(wt,nt)):(log$1.info("In copy ",nt,"root",st,"data",rt.node(nt),st),log$1.debug("Not Setting parent for node=",wt,"cluster!==rootId",nt!==st,"node!==clusterId",wt!==nt));const kt=rt.edges(wt);log$1.debug("Copying Edges",kt),kt.forEach(Lt=>{log$1.info("Edge",Lt);const Ot=rt.edge(Lt.v,Lt.w,Lt.name);log$1.info("Edge data",Ot,st);try{edgeInCluster(Lt,st)?(log$1.info("Copying as ",Lt.v,Lt.w,Ot,Lt.name),it.setEdge(Lt.v,Lt.w,Ot,Lt.name),log$1.info("newGraph edges ",it.edges(),it.edge(it.edges()[0]))):log$1.info("Skipping copy of edge ",Lt.v,"-->",Lt.w," rootId: ",st," clusterId:",nt)}catch(Rt){log$1.error(Rt)}})}log$1.debug("Removing node",wt),rt.removeNode(wt)})},extractDescendants=(nt,rt)=>{const it=rt.children(nt);let st=[...it];for(const bt of it)parents[bt]=nt,st=[...st,...extractDescendants(bt,rt)];return st},findNonClusterChild=(nt,rt)=>{log$1.trace("Searching",nt);const it=rt.children(nt);if(log$1.trace("Searching children of id ",nt,it),it.length<1)return log$1.trace("This is a valid node",nt),nt;for(const st of it){const bt=findNonClusterChild(st,rt);if(bt)return log$1.trace("Found replacement for",nt," => ",bt),bt}},getAnchorId=nt=>!clusterDb[nt]||!clusterDb[nt].externalConnections?nt:clusterDb[nt]?clusterDb[nt].id:nt,adjustClustersAndEdges=(nt,rt)=>{if(!nt||rt>10){log$1.debug("Opting out, no graph ");return}else log$1.debug("Opting in, graph ");nt.nodes().forEach(function(it){nt.children(it).length>0&&(log$1.warn("Cluster identified",it," Replacement id in edges: ",findNonClusterChild(it,nt)),descendants[it]=extractDescendants(it,nt),clusterDb[it]={id:findNonClusterChild(it,nt),clusterData:nt.node(it)})}),nt.nodes().forEach(function(it){const st=nt.children(it),bt=nt.edges();st.length>0?(log$1.debug("Cluster identified",it,descendants),bt.forEach(wt=>{if(wt.v!==it&&wt.w!==it){const Et=isDescendant(wt.v,it),kt=isDescendant(wt.w,it);Et^kt&&(log$1.warn("Edge: ",wt," leaves cluster ",it),log$1.warn("Decendants of XXX ",it,": ",descendants[it]),clusterDb[it].externalConnections=!0)}})):log$1.debug("Not a cluster ",it,descendants)}),nt.edges().forEach(function(it){const st=nt.edge(it);log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(it)),log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(nt.edge(it)));let bt=it.v,wt=it.w;if(log$1.warn("Fix XXX",clusterDb,"ids:",it.v,it.w,"Translating: ",clusterDb[it.v]," --- ",clusterDb[it.w]),clusterDb[it.v]&&clusterDb[it.w]&&clusterDb[it.v]===clusterDb[it.w]){log$1.warn("Fixing and trixing link to self - removing XXX",it.v,it.w,it.name),log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),bt=getAnchorId(it.v),wt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name);const Et=it.w+"---"+it.v;nt.setNode(Et,{domId:Et,id:Et,labelStyle:"",labelText:st.label,padding:0,shape:"labelRect",style:""});const kt=JSON.parse(JSON.stringify(st)),Lt=JSON.parse(JSON.stringify(st));kt.label="",kt.arrowTypeEnd="none",Lt.label="",kt.fromCluster=it.v,Lt.toCluster=it.v,nt.setEdge(bt,Et,kt,it.name+"-cyclic-special"),nt.setEdge(Et,wt,Lt,it.name+"-cyclic-special")}else(clusterDb[it.v]||clusterDb[it.w])&&(log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),bt=getAnchorId(it.v),wt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name),bt!==it.v&&(st.fromCluster=it.v),wt!==it.w&&(st.toCluster=it.w),log$1.warn("Fix Replacing with XXX",bt,wt,it.name),nt.setEdge(bt,wt,st,it.name))}),log$1.warn("Adjusted Graph",write(nt)),extractor(nt,0),log$1.trace(clusterDb)},extractor=(nt,rt)=>{if(log$1.warn("extractor - ",rt,write(nt),nt.children("D")),rt>10){log$1.error("Bailing out");return}let it=nt.nodes(),st=!1;for(const bt of it){const wt=nt.children(bt);st=st||wt.length>0}if(!st){log$1.debug("Done, no node has children",nt.nodes());return}log$1.debug("Nodes = ",it,rt);for(const bt of it)if(log$1.debug("Extracting node",bt,clusterDb,clusterDb[bt]&&!clusterDb[bt].externalConnections,!nt.parent(bt),nt.node(bt),nt.children("D")," Depth ",rt),!clusterDb[bt])log$1.debug("Not a cluster",bt,rt);else if(!clusterDb[bt].externalConnections&&nt.children(bt)&&nt.children(bt).length>0){log$1.warn("Cluster without external connections, without a parent and with children",bt,rt);let Et=nt.graph().rankdir==="TB"?"LR":"TB";clusterDb[bt]&&clusterDb[bt].clusterData&&clusterDb[bt].clusterData.dir&&(Et=clusterDb[bt].clusterData.dir,log$1.warn("Fixing dir",clusterDb[bt].clusterData.dir,Et));const kt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Et,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});log$1.warn("Old graph before copy",write(nt)),copy(bt,nt,kt,bt),nt.setNode(bt,{clusterNode:!0,id:bt,clusterData:clusterDb[bt].clusterData,labelText:clusterDb[bt].labelText,graph:kt}),log$1.warn("New graph after copy node: (",bt,")",write(kt)),log$1.debug("Old graph after copy",write(nt))}else log$1.warn("Cluster ** ",bt," **not meeting the criteria !externalConnections:",!clusterDb[bt].externalConnections," no parent: ",!nt.parent(bt)," children ",nt.children(bt)&&nt.children(bt).length>0,nt.children("D"),rt),log$1.debug(clusterDb);it=nt.nodes(),log$1.warn("New list of nodes",it);for(const bt of it){const wt=nt.node(bt);log$1.warn(" Now next level",bt,wt),wt.clusterNode&&extractor(wt.graph,rt+1)}},sorter=(nt,rt)=>{if(rt.length===0)return[];let it=Object.assign(rt);return rt.forEach(st=>{const bt=nt.children(st),wt=sorter(nt,bt);it=[...it,...wt]}),it},sortNodesByHierarchy=nt=>sorter(nt,nt.children());function intersectNode(nt,rt){return nt.intersect(rt)}function intersectEllipse(nt,rt,it,st){var bt=nt.x,wt=nt.y,Et=bt-st.x,kt=wt-st.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Et*Et),Ot=Math.abs(rt*it*Et/Lt);st.x<bt&&(Ot=-Ot);var Rt=Math.abs(rt*it*kt/Lt);return st.y<wt&&(Rt=-Rt),{x:bt+Ot,y:wt+Rt}}function intersectCircle(nt,rt,it){return intersectEllipse(nt,rt,rt,it)}function intersectLine(nt,rt,it,st){var bt,wt,Et,kt,Lt,Ot,Rt,Dt,Bt,Ft,Yt,Jt,Wt,Qt,rn;if(bt=rt.y-nt.y,Et=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Bt=bt*it.x+Et*it.y+Lt,Ft=bt*st.x+Et*st.y+Lt,!(Bt!==0&&Ft!==0&&sameSign(Bt,Ft))&&(wt=st.y-it.y,kt=it.x-st.x,Ot=st.x*it.y-it.x*st.y,Rt=wt*nt.x+kt*nt.y+Ot,Dt=wt*rt.x+kt*rt.y+Ot,!(Rt!==0&&Dt!==0&&sameSign(Rt,Dt))&&(Yt=bt*kt-wt*Et,Yt!==0)))return Jt=Math.abs(Yt/2),Wt=Et*Ot-kt*Lt,Qt=Wt<0?(Wt-Jt)/Yt:(Wt+Jt)/Yt,Wt=wt*Lt-bt*Ot,rn=Wt<0?(Wt-Jt)/Yt:(Wt+Jt)/Yt,{x:Qt,y:rn}}function sameSign(nt,rt){return nt*rt>0}function intersectPolygon(nt,rt,it){var st=nt.x,bt=nt.y,wt=[],Et=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;typeof rt.forEach=="function"?rt.forEach(function(Yt){Et=Math.min(Et,Yt.x),kt=Math.min(kt,Yt.y)}):(Et=Math.min(Et,rt.x),kt=Math.min(kt,rt.y));for(var Lt=st-nt.width/2-Et,Ot=bt-nt.height/2-kt,Rt=0;Rt<rt.length;Rt++){var Dt=rt[Rt],Bt=rt[Rt<rt.length-1?Rt+1:0],Ft=intersectLine(nt,it,{x:Lt+Dt.x,y:Ot+Dt.y},{x:Lt+Bt.x,y:Ot+Bt.y});Ft&&wt.push(Ft)}return wt.length?(wt.length>1&&wt.sort(function(Yt,Jt){var Wt=Yt.x-it.x,Qt=Yt.y-it.y,rn=Math.sqrt(Wt*Wt+Qt*Qt),sn=Jt.x-it.x,on=Jt.y-it.y,hn=Math.sqrt(sn*sn+on*on);return rn<hn?-1:rn===hn?0:1}),wt[0]):nt}const intersectRect=(nt,rt)=>{var it=nt.x,st=nt.y,bt=rt.x-it,wt=rt.y-st,Et=nt.width/2,kt=nt.height/2,Lt,Ot;return Math.abs(wt)*Et>Math.abs(bt)*kt?(wt<0&&(kt=-kt),Lt=wt===0?0:kt*bt/wt,Ot=kt):(bt<0&&(Et=-Et),Lt=Et,Ot=bt===0?0:Et*wt/bt),{x:it+Lt,y:st+Ot}},intersectRect$1=intersectRect,intersect={node:intersectNode,circle:intersectCircle,ellipse:intersectEllipse,polygon:intersectPolygon,rect:intersectRect$1},note=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.info("Classes = ",rt.classes);const wt=it.insert("rect",":first-child");return wt.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-st.width/2-bt).attr("y",-st.height/2-bt).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),updateNodeBounds(rt,wt),rt.intersect=function(Et){return intersect.rect(rt,Et)},it},note$1=note,question$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=bt+wt,kt=[{x:Et/2,y:0},{x:Et,y:-Et/2},{x:Et/2,y:-Et},{x:0,y:-Et/2}];log$1.info("Question main (Circle)");const Lt=insertPolygonShape$1(it,Et,Et,kt);return Lt.attr("style",rt.style),updateNodeBounds(rt,Lt),rt.intersect=function(Ot){return log$1.warn("Intersect called"),intersect.polygon(rt,kt,Ot)},it},choice=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=28,bt=[{x:0,y:st/2},{x:st/2,y:0},{x:0,y:-st/2},{x:-st/2,y:0}];return it.insert("polygon",":first-child").attr("points",bt.map(function(Et){return Et.x+","+Et.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),rt.width=28,rt.height=28,rt.intersect=function(Et){return intersect.circle(rt,14,Et)},it},hexagon$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=4,wt=st.height+rt.padding,Et=wt/bt,kt=st.width+2*Et+rt.padding,Lt=[{x:Et,y:0},{x:kt-Et,y:0},{x:kt,y:-wt/2},{x:kt-Et,y:-wt},{x:Et,y:-wt},{x:0,y:-wt/2}],Ot=insertPolygonShape$1(it,kt,wt,Lt);return Ot.attr("style",rt.style),updateNodeBounds(rt,Ot),rt.intersect=function(Rt){return intersect.polygon(rt,Lt,Rt)},it},rect_left_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:-wt/2,y:0},{x:bt,y:0},{x:bt,y:-wt},{x:-wt/2,y:-wt},{x:0,y:-wt/2}];return insertPolygonShape$1(it,bt,wt,Et).attr("style",rt.style),rt.width=bt+wt,rt.height=wt,rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},lean_right$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:-2*wt/6,y:0},{x:bt-wt/6,y:0},{x:bt+2*wt/6,y:-wt},{x:wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},lean_left$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:2*wt/6,y:0},{x:bt+wt/6,y:0},{x:bt-2*wt/6,y:-wt},{x:-wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:-2*wt/6,y:0},{x:bt+2*wt/6,y:0},{x:bt-wt/6,y:-wt},{x:wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},inv_trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:wt/6,y:0},{x:bt-wt/6,y:0},{x:bt+2*wt/6,y:-wt},{x:-2*wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},rect_right_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:0,y:0},{x:bt+wt/2,y:0},{x:bt,y:-wt/2},{x:bt+wt/2,y:-wt},{x:0,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},cylinder$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=bt/2,Et=wt/(2.5+bt/50),kt=st.height+Et+rt.padding,Lt="M 0,"+Et+" a "+wt+","+Et+" 0,0,0 "+bt+" 0 a "+wt+","+Et+" 0,0,0 "+-bt+" 0 l 0,"+kt+" a "+wt+","+Et+" 0,0,0 "+bt+" 0 l 0,"+-kt,Ot=it.attr("label-offset-y",Et).insert("path",":first-child").attr("style",rt.style).attr("d",Lt).attr("transform","translate("+-bt/2+","+-(kt/2+Et)+")");return updateNodeBounds(rt,Ot),rt.intersect=function(Rt){const Dt=intersect.rect(rt,Rt),Bt=Dt.x-rt.x;if(wt!=0&&(Math.abs(Bt)<rt.width/2||Math.abs(Bt)==rt.width/2&&Math.abs(Dt.y-rt.y)>rt.height/2-Et)){let Ft=Et*Et*(1-Bt*Bt/(wt*wt));Ft!=0&&(Ft=Math.sqrt(Ft)),Ft=Et-Ft,Rt.y-rt.y>0&&(Ft=-Ft),Dt.y+=Ft}return Dt},it},rect$1=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.trace("Classes = ",rt.classes);const wt=it.insert("rect",":first-child"),Et=st.width+rt.padding,kt=st.height+rt.padding;if(wt.attr("class","basic label-container").attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-st.width/2-bt).attr("y",-st.height/2-bt).attr("width",Et).attr("height",kt),rt.props){const Lt=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(wt,rt.props.borders,Et,kt),Lt.delete("borders")),Lt.forEach(Ot=>{log$1.warn(`Unknown node property ${Ot}`)})}return updateNodeBounds(rt,wt),rt.intersect=function(Lt){return intersect.rect(rt,Lt)},it},labelRect=(nt,rt)=>{const{shapeSvg:it}=labelHelper(nt,rt,"label",!0);log$1.trace("Classes = ",rt.classes);const st=it.insert("rect",":first-child"),bt=0,wt=0;if(st.attr("width",bt).attr("height",wt),it.attr("class","label edgeLabel"),rt.props){const Et=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(st,rt.props.borders,bt,wt),Et.delete("borders")),Et.forEach(kt=>{log$1.warn(`Unknown node property ${kt}`)})}return updateNodeBounds(rt,st),rt.intersect=function(Et){return intersect.rect(rt,Et)},it};function applyNodePropertyBorders(nt,rt,it,st){const bt=[],wt=kt=>{bt.push(kt,0)},Et=kt=>{bt.push(0,kt)};rt.includes("t")?(log$1.debug("add top border"),wt(it)):Et(it),rt.includes("r")?(log$1.debug("add right border"),wt(st)):Et(st),rt.includes("b")?(log$1.debug("add bottom border"),wt(it)):Et(it),rt.includes("l")?(log$1.debug("add left border"),wt(st)):Et(st),nt.attr("stroke-dasharray",bt.join(" "))}const rectWithTitle=(nt,rt)=>{let it;rt.classes?it="node "+rt.classes:it="node default";const st=nt.insert("g").attr("class",it).attr("id",rt.domId||rt.id),bt=st.insert("rect",":first-child"),wt=st.insert("line"),Et=st.insert("g").attr("class","label"),kt=rt.labelText.flat?rt.labelText.flat():rt.labelText;let Lt="";typeof kt=="object"?Lt=kt[0]:Lt=kt,log$1.info("Label text abc79",Lt,kt,typeof kt=="object");const Ot=Et.node().appendChild(createLabel$1(Lt,rt.labelStyle,!0,!0));let Rt={width:0,height:0};if(evaluate(getConfig$1().flowchart.htmlLabels)){const Jt=Ot.children[0],Wt=select(Ot);Rt=Jt.getBoundingClientRect(),Wt.attr("width",Rt.width),Wt.attr("height",Rt.height)}log$1.info("Text 2",kt);const Dt=kt.slice(1,kt.length);let Bt=Ot.getBBox();const Ft=Et.node().appendChild(createLabel$1(Dt.join?Dt.join("<br/>"):Dt,rt.labelStyle,!0,!0));if(evaluate(getConfig$1().flowchart.htmlLabels)){const Jt=Ft.children[0],Wt=select(Ft);Rt=Jt.getBoundingClientRect(),Wt.attr("width",Rt.width),Wt.attr("height",Rt.height)}const Yt=rt.padding/2;return select(Ft).attr("transform","translate( "+(Rt.width>Bt.width?0:(Bt.width-Rt.width)/2)+", "+(Bt.height+Yt+5)+")"),select(Ot).attr("transform","translate( "+(Rt.width<Bt.width?0:-(Bt.width-Rt.width)/2)+", "+0+")"),Rt=Et.node().getBBox(),Et.attr("transform","translate("+-Rt.width/2+", "+(-Rt.height/2-Yt+3)+")"),bt.attr("class","outer title-state").attr("x",-Rt.width/2-Yt).attr("y",-Rt.height/2-Yt).attr("width",Rt.width+rt.padding).attr("height",Rt.height+rt.padding),wt.attr("class","divider").attr("x1",-Rt.width/2-Yt).attr("x2",Rt.width/2+Yt).attr("y1",-Rt.height/2-Yt+Bt.height+Yt).attr("y2",-Rt.height/2-Yt+Bt.height+Yt),updateNodeBounds(rt,bt),rt.intersect=function(Jt){return intersect.rect(rt,Jt)},st},stadium$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.height+rt.padding,wt=st.width+bt/4+rt.padding,Et=it.insert("rect",":first-child").attr("style",rt.style).attr("rx",bt/2).attr("ry",bt/2).attr("x",-wt/2).attr("y",-bt/2).attr("width",wt).attr("height",bt);return updateNodeBounds(rt,Et),rt.intersect=function(kt){return intersect.rect(rt,kt)},it},circle=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,void 0,!0),wt=it.insert("circle",":first-child");return wt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+bt).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),log$1.info("Circle main"),updateNodeBounds(rt,wt),rt.intersect=function(Et){return log$1.info("Circle intersect",rt,st.width/2+bt,Et),intersect.circle(rt,st.width/2+bt,Et)},it},doublecircle=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,void 0,!0),wt=5,Et=it.insert("g",":first-child"),kt=Et.insert("circle"),Lt=Et.insert("circle");return kt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+bt+wt).attr("width",st.width+rt.padding+wt*2).attr("height",st.height+rt.padding+wt*2),Lt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+bt).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),log$1.info("DoubleCircle main"),updateNodeBounds(rt,kt),rt.intersect=function(Ot){return log$1.info("DoubleCircle intersect",rt,st.width/2+bt+wt,Ot),intersect.circle(rt,st.width/2+bt+wt,Ot)},it},subroutine$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,wt=st.height+rt.padding,Et=[{x:0,y:0},{x:bt,y:0},{x:bt,y:-wt},{x:0,y:-wt},{x:0,y:0},{x:-8,y:0},{x:bt+8,y:0},{x:bt+8,y:-wt},{x:-8,y:-wt},{x:-8,y:0}],kt=insertPolygonShape$1(it,bt,wt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},start=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=it.insert("circle",":first-child");return st.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),updateNodeBounds(rt,st),rt.intersect=function(bt){return intersect.circle(rt,7,bt)},it},forkJoin=(nt,rt,it)=>{const st=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id);let bt=70,wt=10;it==="LR"&&(bt=10,wt=70);const Et=st.append("rect").attr("x",-1*bt/2).attr("y",-1*wt/2).attr("width",bt).attr("height",wt).attr("class","fork-join");return updateNodeBounds(rt,Et),rt.height=rt.height+rt.padding/2,rt.width=rt.width+rt.padding/2,rt.intersect=function(kt){return intersect.rect(rt,kt)},st},end=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=it.insert("circle",":first-child"),bt=it.insert("circle",":first-child");return bt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),st.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),updateNodeBounds(rt,bt),rt.intersect=function(wt){return intersect.circle(rt,7,wt)},it},class_box=(nt,rt)=>{const it=rt.padding/2,st=4,bt=8;let wt;rt.classes?wt="node "+rt.classes:wt="node default";const Et=nt.insert("g").attr("class",wt).attr("id",rt.domId||rt.id),kt=Et.insert("rect",":first-child"),Lt=Et.insert("line"),Ot=Et.insert("line");let Rt=0,Dt=st;const Bt=Et.insert("g").attr("class","label");let Ft=0;const Yt=rt.classData.annotations&&rt.classData.annotations[0],Jt=rt.classData.annotations[0]?"\xAB"+rt.classData.annotations[0]+"\xBB":"",Wt=Bt.node().appendChild(createLabel$1(Jt,rt.labelStyle,!0,!0));let Qt=Wt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Tn=Wt.children[0],kn=select(Wt);Qt=Tn.getBoundingClientRect(),kn.attr("width",Qt.width),kn.attr("height",Qt.height)}rt.classData.annotations[0]&&(Dt+=Qt.height+st,Rt+=Qt.width);let rn=rt.classData.id;rt.classData.type!==void 0&&rt.classData.type!==""&&(getConfig$1().flowchart.htmlLabels?rn+="&lt;"+rt.classData.type+"&gt;":rn+="<"+rt.classData.type+">");const sn=Bt.node().appendChild(createLabel$1(rn,rt.labelStyle,!0,!0));select(sn).attr("class","classTitle");let on=sn.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Tn=sn.children[0],kn=select(sn);on=Tn.getBoundingClientRect(),kn.attr("width",on.width),kn.attr("height",on.height)}Dt+=on.height+st,on.width>Rt&&(Rt=on.width);const hn=[];rt.classData.members.forEach(Tn=>{const kn=parseMember(Tn);let In=kn.displayText;getConfig$1().flowchart.htmlLabels&&(In=In.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Ln=Bt.node().appendChild(createLabel$1(In,kn.cssStyle?kn.cssStyle:rt.labelStyle,!0,!0));let pn=Ln.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Hn=Ln.children[0],yn=select(Ln);pn=Hn.getBoundingClientRect(),yn.attr("width",pn.width),yn.attr("height",pn.height)}pn.width>Rt&&(Rt=pn.width),Dt+=pn.height+st,hn.push(Ln)}),Dt+=bt;const mn=[];if(rt.classData.methods.forEach(Tn=>{const kn=parseMember(Tn);let In=kn.displayText;getConfig$1().flowchart.htmlLabels&&(In=In.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Ln=Bt.node().appendChild(createLabel$1(In,kn.cssStyle?kn.cssStyle:rt.labelStyle,!0,!0));let pn=Ln.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Hn=Ln.children[0],yn=select(Ln);pn=Hn.getBoundingClientRect(),yn.attr("width",pn.width),yn.attr("height",pn.height)}pn.width>Rt&&(Rt=pn.width),Dt+=pn.height+st,mn.push(Ln)}),Dt+=bt,Yt){let Tn=(Rt-Qt.width)/2;select(Wt).attr("transform","translate( "+(-1*Rt/2+Tn)+", "+-1*Dt/2+")"),Ft=Qt.height+st}let Cn=(Rt-on.width)/2;return select(sn).attr("transform","translate( "+(-1*Rt/2+Cn)+", "+(-1*Dt/2+Ft)+")"),Ft+=on.height+st,Lt.attr("class","divider").attr("x1",-Rt/2-it).attr("x2",Rt/2+it).attr("y1",-Dt/2-it+bt+Ft).attr("y2",-Dt/2-it+bt+Ft),Ft+=bt,hn.forEach(Tn=>{select(Tn).attr("transform","translate( "+-Rt/2+", "+(-1*Dt/2+Ft+bt/2)+")"),Ft+=on.height+st}),Ft+=bt,Ot.attr("class","divider").attr("x1",-Rt/2-it).attr("x2",Rt/2+it).attr("y1",-Dt/2-it+bt+Ft).attr("y2",-Dt/2-it+bt+Ft),Ft+=bt,mn.forEach(Tn=>{select(Tn).attr("transform","translate( "+-Rt/2+", "+(-1*Dt/2+Ft)+")"),Ft+=on.height+st}),kt.attr("class","outer title-state").attr("x",-Rt/2-it).attr("y",-(Dt/2)-it).attr("width",Rt+rt.padding).attr("height",Dt+rt.padding),updateNodeBounds(rt,kt),rt.intersect=function(Tn){return intersect.rect(rt,Tn)},Et},shapes$1={question:question$1,rect:rect$1,labelRect,rectWithTitle,choice,circle,doublecircle,stadium:stadium$1,hexagon:hexagon$1,rect_left_inv_arrow:rect_left_inv_arrow$1,lean_right:lean_right$1,lean_left:lean_left$1,trapezoid:trapezoid$1,inv_trapezoid:inv_trapezoid$1,rect_right_inv_arrow:rect_right_inv_arrow$1,cylinder:cylinder$1,start,end,note:note$1,subroutine:subroutine$1,fork:forkJoin,join:forkJoin,class_box};let nodeElems={};const insertNode=(nt,rt,it)=>{let st,bt;if(rt.link){let wt;getConfig$1().securityLevel==="sandbox"?wt="_top":rt.linkTarget&&(wt=rt.linkTarget||"_blank"),st=nt.insert("svg:a").attr("xlink:href",rt.link).attr("target",wt),bt=shapes$1[rt.shape](st,rt,it)}else bt=shapes$1[rt.shape](nt,rt,it),st=bt;rt.tooltip&&bt.attr("title",rt.tooltip),rt.class&&bt.attr("class","node default "+rt.class),nodeElems[rt.id]=st,rt.haveCallback&&nodeElems[rt.id].attr("class",nodeElems[rt.id].attr("class")+" clickable")},setNodeElem=(nt,rt)=>{nodeElems[rt.id]=nt},clear$a=()=>{nodeElems={}},positionNode=nt=>{const rt=nodeElems[nt.id];log$1.trace("Transforming node",nt.diff,nt,"translate("+(nt.x-nt.width/2-5)+", "+nt.width/2+")");const it=8,st=nt.diff||0;return nt.clusterNode?rt.attr("transform","translate("+(nt.x+st-nt.width/2)+", "+(nt.y-nt.height/2-it)+")"):rt.attr("transform","translate("+nt.x+", "+nt.y+")"),st},rect=(nt,rt)=>{log$1.trace("Creating subgraph rect for ",rt.id,rt);const it=nt.insert("g").attr("class","cluster"+(rt.class?" "+rt.class:"")).attr("id",rt.id),st=it.insert("rect",":first-child"),bt=it.insert("g").attr("class","cluster-label"),wt=bt.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let Et=wt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Dt=wt.children[0],Bt=select(wt);Et=Dt.getBoundingClientRect(),Bt.attr("width",Et.width),Bt.attr("height",Et.height)}const kt=0*rt.padding,Lt=kt/2,Ot=rt.width<=Et.width+kt?Et.width+kt:rt.width;rt.width<=Et.width+kt?rt.diff=(Et.width-rt.width)/2-rt.padding/2:rt.diff=-rt.padding/2,log$1.trace("Data ",rt,JSON.stringify(rt)),st.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-Ot/2).attr("y",rt.y-rt.height/2-Lt).attr("width",Ot).attr("height",rt.height+kt),bt.attr("transform","translate("+(rt.x-Et.width/2)+", "+(rt.y-rt.height/2)+")");const Rt=st.node().getBBox();return rt.width=Rt.width,rt.height=Rt.height,rt.intersect=function(Dt){return intersectRect$1(rt,Dt)},it},noteGroup=(nt,rt)=>{const it=nt.insert("g").attr("class","note-cluster").attr("id",rt.id),st=it.insert("rect",":first-child"),bt=0*rt.padding,wt=bt/2;st.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-rt.width/2-wt).attr("y",rt.y-rt.height/2-wt).attr("width",rt.width+bt).attr("height",rt.height+bt).attr("fill","none");const Et=st.node().getBBox();return rt.width=Et.width,rt.height=Et.height,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},roundedWithTitle=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),st=it.insert("rect",":first-child"),bt=it.insert("g").attr("class","cluster-label"),wt=it.append("rect"),Et=bt.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let kt=Et.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Bt=Et.children[0],Ft=select(Et);kt=Bt.getBoundingClientRect(),Ft.attr("width",kt.width),Ft.attr("height",kt.height)}kt=Et.getBBox();const Lt=0*rt.padding,Ot=Lt/2,Rt=rt.width<=kt.width+rt.padding?kt.width+rt.padding:rt.width;rt.width<=kt.width+rt.padding?rt.diff=(kt.width+rt.padding*0-rt.width)/2:rt.diff=-rt.padding/2,st.attr("class","outer").attr("x",rt.x-Rt/2-Ot).attr("y",rt.y-rt.height/2-Ot).attr("width",Rt+Lt).attr("height",rt.height+Lt),wt.attr("class","inner").attr("x",rt.x-Rt/2-Ot).attr("y",rt.y-rt.height/2-Ot+kt.height-1).attr("width",Rt+Lt).attr("height",rt.height+Lt-kt.height-3),bt.attr("transform","translate("+(rt.x-kt.width/2)+", "+(rt.y-rt.height/2-rt.padding/3+(evaluate(getConfig$1().flowchart.htmlLabels)?5:3))+")");const Dt=st.node().getBBox();return rt.height=Dt.height,rt.intersect=function(Bt){return intersectRect$1(rt,Bt)},it},divider=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),st=it.insert("rect",":first-child"),bt=0*rt.padding,wt=bt/2;st.attr("class","divider").attr("x",rt.x-rt.width/2-wt).attr("y",rt.y-rt.height/2).attr("width",rt.width+bt).attr("height",rt.height+bt);const Et=st.node().getBBox();return rt.width=Et.width,rt.height=Et.height,rt.diff=-rt.padding/2,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},shapes={rect,roundedWithTitle,noteGroup,divider};let clusterElems={};const insertCluster=(nt,rt)=>{log$1.trace("Inserting cluster");const it=rt.shape||"rect";clusterElems[rt.id]=shapes[it](nt,rt)},clear$9=()=>{clusterElems={}};let edgeLabels={},terminalLabels={};const clear$8=()=>{edgeLabels={},terminalLabels={}},insertEdgeLabel=(nt,rt)=>{const it=createLabel$1(rt.label,rt.labelStyle),st=nt.insert("g").attr("class","edgeLabel"),bt=st.insert("g").attr("class","label");bt.node().appendChild(it);let wt=it.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const kt=it.children[0],Lt=select(it);wt=kt.getBoundingClientRect(),Lt.attr("width",wt.width),Lt.attr("height",wt.height)}bt.attr("transform","translate("+-wt.width/2+", "+-wt.height/2+")"),edgeLabels[rt.id]=st,rt.width=wt.width,rt.height=wt.height;let Et;if(rt.startLabelLeft){const kt=createLabel$1(rt.startLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Ot=Lt.insert("g").attr("class","inner");Et=Ot.node().appendChild(kt);const Rt=kt.getBBox();Ot.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startLeft=Lt,setTerminalWidth(Et,rt.startLabelLeft)}if(rt.startLabelRight){const kt=createLabel$1(rt.startLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Ot=Lt.insert("g").attr("class","inner");Et=Lt.node().appendChild(kt),Ot.node().appendChild(kt);const Rt=kt.getBBox();Ot.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startRight=Lt,setTerminalWidth(Et,rt.startLabelRight)}if(rt.endLabelLeft){const kt=createLabel$1(rt.endLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Ot=Lt.insert("g").attr("class","inner");Et=Ot.node().appendChild(kt);const Rt=kt.getBBox();Ot.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endLeft=Lt,setTerminalWidth(Et,rt.endLabelLeft)}if(rt.endLabelRight){const kt=createLabel$1(rt.endLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Ot=Lt.insert("g").attr("class","inner");Et=Ot.node().appendChild(kt);const Rt=kt.getBBox();Ot.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endRight=Lt,setTerminalWidth(Et,rt.endLabelRight)}};function setTerminalWidth(nt,rt){getConfig$1().flowchart.htmlLabels&&nt&&(nt.style.width=rt.length*9+"px",nt.style.height="12px")}const positionEdgeLabel=(nt,rt)=>{log$1.info("Moving label abc78 ",nt.id,nt.label,edgeLabels[nt.id]);let it=rt.updatedPath?rt.updatedPath:rt.originalPath;if(nt.label){const st=edgeLabels[nt.id];let bt=nt.x,wt=nt.y;if(it){const Et=utils.calcLabelPosition(it);log$1.info("Moving label "+nt.label+" from (",bt,",",wt,") to (",Et.x,",",Et.y,") abc78"),rt.updatedPath&&(bt=Et.x,wt=Et.y)}st.attr("transform","translate("+bt+", "+wt+")")}if(nt.startLabelLeft){const st=terminalLabels[nt.id].startLeft;let bt=nt.x,wt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_left",it);bt=Et.x,wt=Et.y}st.attr("transform","translate("+bt+", "+wt+")")}if(nt.startLabelRight){const st=terminalLabels[nt.id].startRight;let bt=nt.x,wt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_right",it);bt=Et.x,wt=Et.y}st.attr("transform","translate("+bt+", "+wt+")")}if(nt.endLabelLeft){const st=terminalLabels[nt.id].endLeft;let bt=nt.x,wt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_left",it);bt=Et.x,wt=Et.y}st.attr("transform","translate("+bt+", "+wt+")")}if(nt.endLabelRight){const st=terminalLabels[nt.id].endRight;let bt=nt.x,wt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_right",it);bt=Et.x,wt=Et.y}st.attr("transform","translate("+bt+", "+wt+")")}},outsideNode=(nt,rt)=>{const it=nt.x,st=nt.y,bt=Math.abs(rt.x-it),wt=Math.abs(rt.y-st),Et=nt.width/2,kt=nt.height/2;return bt>=Et||wt>=kt},intersection=(nt,rt,it)=>{log$1.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(rt)}
  insidePoint : ${JSON.stringify(it)}
  node        : x:${nt.x} y:${nt.y} w:${nt.width} h:${nt.height}`);const st=nt.x,bt=nt.y,wt=Math.abs(st-it.x),Et=nt.width/2;let kt=it.x<rt.x?Et-wt:Et+wt;const Lt=nt.height/2,Ot=Math.abs(rt.y-it.y),Rt=Math.abs(rt.x-it.x);if(Math.abs(bt-rt.y)*Et>Math.abs(st-rt.x)*Lt){let Dt=it.y<rt.y?rt.y-Lt-bt:bt-Lt-rt.y;kt=Rt*Dt/Ot;const Bt={x:it.x<rt.x?it.x+kt:it.x-Rt+kt,y:it.y<rt.y?it.y+Ot-Dt:it.y-Ot+Dt};return kt===0&&(Bt.x=rt.x,Bt.y=rt.y),Rt===0&&(Bt.x=rt.x),Ot===0&&(Bt.y=rt.y),log$1.warn(`abc89 topp/bott calc, Q ${Ot}, q ${Dt}, R ${Rt}, r ${kt}`,Bt),Bt}else{it.x<rt.x?kt=rt.x-Et-st:kt=st-Et-rt.x;let Dt=Ot*kt/Rt,Bt=it.x<rt.x?it.x+Rt-kt:it.x-Rt+kt,Ft=it.y<rt.y?it.y+Dt:it.y-Dt;return log$1.warn(`sides calc abc89, Q ${Ot}, q ${Dt}, R ${Rt}, r ${kt}`,{_x:Bt,_y:Ft}),kt===0&&(Bt=rt.x,Ft=rt.y),Rt===0&&(Bt=rt.x),Ot===0&&(Ft=rt.y),{x:Bt,y:Ft}}},cutPathAtIntersect=(nt,rt)=>{log$1.warn("abc88 cutPathAtIntersect",nt,rt);let it=[],st=nt[0],bt=!1;return nt.forEach(wt=>{if(log$1.info("abc88 checking point",wt,rt),!outsideNode(rt,wt)&&!bt){const Et=intersection(rt,st,wt);log$1.warn("abc88 inside",wt,st,Et),log$1.warn("abc88 intersection",Et);let kt=!1;it.forEach(Lt=>{kt=kt||Lt.x===Et.x&&Lt.y===Et.y}),it.some(Lt=>Lt.x===Et.x&&Lt.y===Et.y)?log$1.warn("abc88 no intersect",Et,it):it.push(Et),bt=!0}else log$1.warn("abc88 outside",wt,st),st=wt,bt||it.push(wt)}),log$1.warn("abc88 returning points",it),it},insertEdge=function(nt,rt,it,st,bt,wt){let Et=it.points,kt=!1;const Lt=wt.node(rt.v);var Ot=wt.node(rt.w);log$1.info("abc88 InsertEdge: ",it),Ot.intersect&&Lt.intersect&&(Et=Et.slice(1,it.points.length-1),Et.unshift(Lt.intersect(Et[0])),log$1.info("Last point",Et[Et.length-1],Ot,Ot.intersect(Et[Et.length-1])),Et.push(Ot.intersect(Et[Et.length-1]))),it.toCluster&&(log$1.info("to cluster abc88",st[it.toCluster]),Et=cutPathAtIntersect(it.points,st[it.toCluster].node),kt=!0),it.fromCluster&&(log$1.info("from cluster abc88",st[it.fromCluster]),Et=cutPathAtIntersect(Et.reverse(),st[it.fromCluster].node).reverse(),kt=!0);const Rt=Et.filter(Qt=>!Number.isNaN(Qt.y));let Dt;bt==="graph"||bt==="flowchart"?Dt=it.curve||curveBasis:Dt=curveBasis;const Bt=line$1().x(function(Qt){return Qt.x}).y(function(Qt){return Qt.y}).curve(Dt);let Ft;switch(it.thickness){case"normal":Ft="edge-thickness-normal";break;case"thick":Ft="edge-thickness-thick";break;default:Ft=""}switch(it.pattern){case"solid":Ft+=" edge-pattern-solid";break;case"dotted":Ft+=" edge-pattern-dotted";break;case"dashed":Ft+=" edge-pattern-dashed";break}const Yt=nt.append("path").attr("d",Bt(Rt)).attr("id",it.id).attr("class"," "+Ft+(it.classes?" "+it.classes:"")).attr("style",it.style);let Jt="";switch((getConfig$1().flowchart.arrowMarkerAbsolute||getConfig$1().state.arrowMarkerAbsolute)&&(Jt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Jt=Jt.replace(/\(/g,"\\("),Jt=Jt.replace(/\)/g,"\\)")),log$1.info("arrowTypeStart",it.arrowTypeStart),log$1.info("arrowTypeEnd",it.arrowTypeEnd),it.arrowTypeStart){case"arrow_cross":Yt.attr("marker-start","url("+Jt+"#"+bt+"-crossStart)");break;case"arrow_point":Yt.attr("marker-start","url("+Jt+"#"+bt+"-pointStart)");break;case"arrow_barb":Yt.attr("marker-start","url("+Jt+"#"+bt+"-barbStart)");break;case"arrow_circle":Yt.attr("marker-start","url("+Jt+"#"+bt+"-circleStart)");break;case"aggregation":Yt.attr("marker-start","url("+Jt+"#"+bt+"-aggregationStart)");break;case"extension":Yt.attr("marker-start","url("+Jt+"#"+bt+"-extensionStart)");break;case"composition":Yt.attr("marker-start","url("+Jt+"#"+bt+"-compositionStart)");break;case"dependency":Yt.attr("marker-start","url("+Jt+"#"+bt+"-dependencyStart)");break;case"lollipop":Yt.attr("marker-start","url("+Jt+"#"+bt+"-lollipopStart)");break}switch(it.arrowTypeEnd){case"arrow_cross":Yt.attr("marker-end","url("+Jt+"#"+bt+"-crossEnd)");break;case"arrow_point":Yt.attr("marker-end","url("+Jt+"#"+bt+"-pointEnd)");break;case"arrow_barb":Yt.attr("marker-end","url("+Jt+"#"+bt+"-barbEnd)");break;case"arrow_circle":Yt.attr("marker-end","url("+Jt+"#"+bt+"-circleEnd)");break;case"aggregation":Yt.attr("marker-end","url("+Jt+"#"+bt+"-aggregationEnd)");break;case"extension":Yt.attr("marker-end","url("+Jt+"#"+bt+"-extensionEnd)");break;case"composition":Yt.attr("marker-end","url("+Jt+"#"+bt+"-compositionEnd)");break;case"dependency":Yt.attr("marker-end","url("+Jt+"#"+bt+"-dependencyEnd)");break;case"lollipop":Yt.attr("marker-end","url("+Jt+"#"+bt+"-lollipopEnd)");break}let Wt={};return kt&&(Wt.updatedPath=Et),Wt.originalPath=it.points,Wt},recursiveRender=(nt,rt,it,st)=>{log$1.info("Graph in recursive render: XXX",write(rt),st);const bt=rt.graph().rankdir;log$1.trace("Dir in recursive render - dir:",bt);const wt=nt.insert("g").attr("class","root");rt.nodes()?log$1.info("Recursive render XXX",rt.nodes()):log$1.info("No nodes found for",rt),rt.edges().length>0&&log$1.trace("Recursive edges",rt.edge(rt.edges()[0]));const Et=wt.insert("g").attr("class","clusters"),kt=wt.insert("g").attr("class","edgePaths"),Lt=wt.insert("g").attr("class","edgeLabels"),Ot=wt.insert("g").attr("class","nodes");rt.nodes().forEach(function(Dt){const Bt=rt.node(Dt);if(st!==void 0){const Ft=JSON.parse(JSON.stringify(st.clusterData));log$1.info("Setting data for cluster XXX (",Dt,") ",Ft,st),rt.setNode(st.id,Ft),rt.parent(Dt)||(log$1.trace("Setting parent",Dt,st.id),rt.setParent(Dt,st.id,Ft))}if(log$1.info("(Insert) Node XXX"+Dt+": "+JSON.stringify(rt.node(Dt))),Bt&&Bt.clusterNode){log$1.info("Cluster identified",Dt,Bt.width,rt.node(Dt));const Ft=recursiveRender(Ot,Bt.graph,it,rt.node(Dt)),Yt=Ft.elem;updateNodeBounds(Bt,Yt),Bt.diff=Ft.diff||0,log$1.info("Node bounds (abc123)",Dt,Bt,Bt.width,Bt.x,Bt.y),setNodeElem(Yt,Bt),log$1.warn("Recursive render complete ",Yt,Bt)}else rt.children(Dt).length>0?(log$1.info("Cluster - the non recursive path XXX",Dt,Bt.id,Bt,rt),log$1.info(findNonClusterChild(Bt.id,rt)),clusterDb[Bt.id]={id:findNonClusterChild(Bt.id,rt),node:Bt}):(log$1.info("Node - the non recursive path",Dt,Bt.id,Bt),insertNode(Ot,rt.node(Dt),bt))}),rt.edges().forEach(function(Dt){const Bt=rt.edge(Dt.v,Dt.w,Dt.name);log$1.info("Edge "+Dt.v+" -> "+Dt.w+": "+JSON.stringify(Dt)),log$1.info("Edge "+Dt.v+" -> "+Dt.w+": ",Dt," ",JSON.stringify(rt.edge(Dt))),log$1.info("Fix",clusterDb,"ids:",Dt.v,Dt.w,"Translateing: ",clusterDb[Dt.v],clusterDb[Dt.w]),insertEdgeLabel(Lt,Bt)}),rt.edges().forEach(function(Dt){log$1.info("Edge "+Dt.v+" -> "+Dt.w+": "+JSON.stringify(Dt))}),log$1.info("#############################################"),log$1.info("###                Layout                 ###"),log$1.info("#############################################"),log$1.info(rt),layout(rt),log$1.info("Graph after layout:",write(rt));let Rt=0;return sortNodesByHierarchy(rt).forEach(function(Dt){const Bt=rt.node(Dt);log$1.info("Position "+Dt+": "+JSON.stringify(rt.node(Dt))),log$1.info("Position "+Dt+": ("+Bt.x,","+Bt.y,") width: ",Bt.width," height: ",Bt.height),Bt&&Bt.clusterNode?positionNode(Bt):rt.children(Dt).length>0?(insertCluster(Et,Bt),clusterDb[Bt.id].node=Bt):positionNode(Bt)}),rt.edges().forEach(function(Dt){const Bt=rt.edge(Dt);log$1.info("Edge "+Dt.v+" -> "+Dt.w+": "+JSON.stringify(Bt),Bt);const Ft=insertEdge(kt,Dt,Bt,clusterDb,it,rt);positionEdgeLabel(Bt,Ft)}),rt.nodes().forEach(function(Dt){const Bt=rt.node(Dt);log$1.info(Dt,Bt.type,Bt.diff),Bt.type==="group"&&(Rt=Bt.diff)}),{elem:wt,diff:Rt}},render$1=(nt,rt,it,st,bt)=>{insertMarkers$3(nt,it,st,bt),clear$a(),clear$8(),clear$9(),clear$b(),log$1.warn("Graph at first:",write(rt)),adjustClustersAndEdges(rt),log$1.warn("Graph after:",write(rt)),recursiveRender(nt,rt,st)},sanitizeText$1=nt=>common$1.sanitizeText(nt,getConfig$1());let conf$9={dividerMargin:10,padding:5,textHeight:10};const addClasses=function(nt,rt,it,st){const bt=Object.keys(nt);log$1.info("keys:",bt),log$1.info(nt),bt.forEach(function(wt){const Et=nt[wt];let kt="";Et.cssClasses.length>0&&(kt=kt+" "+Et.cssClasses.join(" "));const Lt={labelStyle:""};let Ot=Et.text!==void 0?Et.text:Et.id,Rt=0,Dt="";switch(Et.type){case"class":Dt="class_box";break;default:Dt="class_box"}rt.setNode(Et.id,{labelStyle:Lt.labelStyle,shape:Dt,labelText:sanitizeText$1(Ot),classData:Et,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,domId:Et.domId,tooltip:st.db.getTooltip(Et.id)||"",haveCallback:Et.haveCallback,link:Et.link,width:Et.type==="group"?500:void 0,type:Et.type,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:Dt,labelText:Ot,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,width:Et.type==="group"?500:void 0,type:Et.type,padding:getConfig$1().flowchart.padding})})},addNotes=function(nt,rt,it,st){log$1.info(nt),nt.forEach(function(bt,wt){const Et=bt;let kt="";const Lt={labelStyle:"",style:""};let Ot=Et.text,Rt=0,Dt="note";if(rt.setNode(Et.id,{labelStyle:Lt.labelStyle,shape:Dt,labelText:sanitizeText$1(Ot),noteData:Et,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,domId:Et.id,tooltip:"",type:"note",padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:Dt,labelText:Ot,rx:Rt,ry:Rt,style:Lt.style,id:Et.id,type:"note",padding:getConfig$1().flowchart.padding}),!Et.class||!(Et.class in st))return;const Bt=it+wt,Ft={};Ft.classes="relation",Ft.pattern="dotted",Ft.id=`edgeNote${Bt}`,Ft.arrowhead="none",log$1.info(`Note edge: ${JSON.stringify(Ft)}, ${JSON.stringify(Et)}`),Ft.startLabelRight="",Ft.endLabelLeft="",Ft.arrowTypeStart="none",Ft.arrowTypeEnd="none";let Yt="fill:none",Jt="";Ft.style=Yt,Ft.labelStyle=Jt,Ft.curve=interpolateToCurve(conf$9.curve,curveLinear),rt.setEdge(Et.id,Et.class,Ft,Bt)})},addRelations=function(nt,rt){const it=getConfig$1().flowchart;let st=0;nt.forEach(function(bt){st++;const wt={};wt.classes="relation",wt.pattern=bt.relation.lineType==1?"dashed":"solid",wt.id="id"+st,bt.type==="arrow_open"?wt.arrowhead="none":wt.arrowhead="normal",log$1.info(wt,bt),wt.startLabelRight=bt.relationTitle1==="none"?"":bt.relationTitle1,wt.endLabelLeft=bt.relationTitle2==="none"?"":bt.relationTitle2,wt.arrowTypeStart=getArrowMarker(bt.relation.type1),wt.arrowTypeEnd=getArrowMarker(bt.relation.type2);let Et="",kt="";if(bt.style!==void 0){const Lt=getStylesFromArray(bt.style);Et=Lt.style,kt=Lt.labelStyle}else Et="fill:none";wt.style=Et,wt.labelStyle=kt,bt.interpolate!==void 0?wt.curve=interpolateToCurve(bt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?wt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):wt.curve=interpolateToCurve(it.curve,curveLinear),bt.text=bt.title,bt.text===void 0?bt.style!==void 0&&(wt.arrowheadStyle="fill: #333"):(wt.arrowheadStyle="fill: #333",wt.labelpos="c",getConfig$1().flowchart.htmlLabels?(wt.labelType="html",wt.label='<span class="edgeLabel">'+bt.text+"</span>"):(wt.labelType="text",wt.label=bt.text.replace(common$1.lineBreakRegex,`
`),bt.style===void 0&&(wt.style=wt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),wt.labelStyle=wt.labelStyle.replace("color:","fill:"))),rt.setEdge(bt.id1,bt.id2,wt,st)})},setConf$9=function(nt){Object.keys(nt).forEach(function(it){conf$9[it]=nt[it]})},draw$c=function(nt,rt,it,st){log$1.info("Drawing class - ",rt);const bt=getConfig$1().flowchart,wt=getConfig$1().securityLevel;log$1.info("config:",bt);const Et=bt.nodeSpacing||50,kt=bt.rankSpacing||50,Lt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:st.db.getDirection(),nodesep:Et,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),Ot=st.db.getClasses(),Rt=st.db.getRelations(),Dt=st.db.getNotes();log$1.info(Rt),addClasses(Ot,Lt,rt,st),addRelations(Rt,Lt),addNotes(Dt,Lt,Rt.length+1,Ot);let Bt;wt==="sandbox"&&(Bt=select("#i"+rt));const Ft=select(wt==="sandbox"?Bt.nodes()[0].contentDocument.body:"body"),Yt=Ft.select(`[id="${rt}"]`),Jt=Ft.select("#"+rt+" g");if(render$1(Jt,Lt,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",rt),utils.insertTitle(Yt,"classTitleText",bt.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox$1(Lt,Yt,bt.diagramPadding,bt.useMaxWidth),!bt.htmlLabels){const Wt=wt==="sandbox"?Bt.nodes()[0].contentDocument:document,Qt=Wt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const rn of Qt){const sn=rn.getBBox(),on=Wt.createElementNS("http://www.w3.org/2000/svg","rect");on.setAttribute("rx",0),on.setAttribute("ry",0),on.setAttribute("width",sn.width),on.setAttribute("height",sn.height),rn.insertBefore(on,rn.firstChild)}}};function getArrowMarker(nt){let rt;switch(nt){case 0:rt="aggregation";break;case 1:rt="extension";break;case 2:rt="composition";break;case 3:rt="dependency";break;case 4:rt="lollipop";break;default:rt="none"}return rt}const classRendererV2={setConf:setConf$9,draw:draw$c};var parser$8=function(){var nt=function(kn,In,Ln,pn){for(Ln=Ln||{},pn=kn.length;pn--;Ln[kn[pn]]=In);return Ln},rt=[1,2],it=[1,5],st=[6,9,11,23,25,27,29,30,31,49],bt=[1,17],wt=[1,18],Et=[1,19],kt=[1,20],Lt=[1,21],Ot=[1,22],Rt=[1,25],Dt=[1,30],Bt=[1,31],Ft=[1,32],Yt=[1,33],Jt=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],Wt=[1,45],Qt=[30,31,46,47],rn=[4,6,9,11,23,25,27,29,30,31,49],sn=[42,43,44,45],on=[22,37],hn=[1,64],mn={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(In,Ln,pn,Hn,yn,mr,vn){var yr=mr.length-1;switch(yn){case 1:break;case 3:this.$=[];break;case 4:mr[yr-1].push(mr[yr]),this.$=mr[yr-1];break;case 5:case 6:this.$=mr[yr];break;case 7:case 8:this.$=[];break;case 12:Hn.addEntity(mr[yr-4]),Hn.addEntity(mr[yr-2]),Hn.addRelationship(mr[yr-4],mr[yr],mr[yr-2],mr[yr-3]);break;case 13:Hn.addEntity(mr[yr-3]),Hn.addAttributes(mr[yr-3],mr[yr-1]);break;case 14:Hn.addEntity(mr[yr-2]);break;case 15:Hn.addEntity(mr[yr]);break;case 16:case 17:this.$=mr[yr].trim(),Hn.setAccTitle(this.$);break;case 18:case 19:this.$=mr[yr].trim(),Hn.setAccDescription(this.$);break;case 20:case 41:this.$=mr[yr];break;case 21:case 39:case 40:this.$=mr[yr].replace(/"/g,"");break;case 22:this.$=[mr[yr]];break;case 23:mr[yr].push(mr[yr-1]),this.$=mr[yr];break;case 24:this.$={attributeType:mr[yr-1],attributeName:mr[yr]};break;case 25:this.$={attributeType:mr[yr-2],attributeName:mr[yr-1],attributeKeyType:mr[yr]};break;case 26:this.$={attributeType:mr[yr-2],attributeName:mr[yr-1],attributeComment:mr[yr]};break;case 27:this.$={attributeType:mr[yr-3],attributeName:mr[yr-2],attributeKeyType:mr[yr-1],attributeComment:mr[yr]};break;case 28:case 29:case 30:this.$=mr[yr];break;case 31:this.$=mr[yr].replace(/"/g,"");break;case 32:this.$={cardA:mr[yr],relType:mr[yr-1],cardB:mr[yr-2]};break;case 33:this.$=Hn.Cardinality.ZERO_OR_ONE;break;case 34:this.$=Hn.Cardinality.ZERO_OR_MORE;break;case 35:this.$=Hn.Cardinality.ONE_OR_MORE;break;case 36:this.$=Hn.Cardinality.ONLY_ONE;break;case 37:this.$=Hn.Identification.NON_IDENTIFYING;break;case 38:this.$=Hn.Identification.IDENTIFYING;break;case 42:Hn.parseDirective("%%{","open_directive");break;case 43:Hn.parseDirective(mr[yr],"type_directive");break;case 44:mr[yr]=mr[yr].trim().replace(/'/g,'"'),Hn.parseDirective(mr[yr],"arg_directive");break;case 45:Hn.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:rt,7:3,12:4,49:it},{1:[3]},nt(st,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,49:it},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:bt,25:wt,27:Et,29:kt,30:Lt,31:Ot,49:it},{1:[2,2]},{14:23,15:[1,24],52:Rt},nt([15,52],[2,43]),nt(st,[2,8],{1:[2,1]}),nt(st,[2,4]),{7:15,10:26,12:4,17:16,23:bt,25:wt,27:Et,29:kt,30:Lt,31:Ot,49:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,11]),nt(st,[2,15],{18:27,40:29,20:[1,28],42:Dt,43:Bt,44:Ft,45:Yt}),{24:[1,34]},{26:[1,35]},{28:[1,36]},nt(st,[2,19]),nt(Jt,[2,20]),nt(Jt,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},nt(st,[2,5]),{17:40,30:Lt,31:Ot},{21:41,22:[1,42],32:43,33:44,37:Wt},{41:46,46:[1,47],47:[1,48]},nt(Qt,[2,33]),nt(Qt,[2,34]),nt(Qt,[2,35]),nt(Qt,[2,36]),nt(st,[2,16]),nt(st,[2,17]),nt(st,[2,18]),nt(rn,[2,9]),{14:49,52:Rt},{52:[2,44]},{15:[1,50]},{22:[1,51]},nt(st,[2,14]),{21:52,22:[2,22],32:43,33:44,37:Wt},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:Dt,43:Bt,44:Ft,45:Yt},nt(sn,[2,37]),nt(sn,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},nt(st,[2,13]),{22:[2,23]},nt(on,[2,24],{35:61,36:62,38:[1,63],39:hn}),nt([22,37,38,39],[2,29]),nt([30,31],[2,32]),nt(rn,[2,10]),nt(st,[2,12]),nt(st,[2,39]),nt(st,[2,40]),nt(st,[2,41]),nt(on,[2,25],{36:65,39:hn}),nt(on,[2,26]),nt([22,37,39],[2,30]),nt(on,[2,31]),nt(on,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(In,Ln){if(Ln.recoverable)this.trace(In);else{var pn=new Error(In);throw pn.hash=Ln,pn}},parse:function(In){var Ln=this,pn=[0],Hn=[],yn=[null],mr=[],vn=this.table,yr="",Tr=0,Mr=0,rr=2,wr=1,fr=mr.slice.call(arguments,1),gr=Object.create(this.lexer),Lr={yy:{}};for(var Pr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Pr)&&(Lr.yy[Pr]=this.yy[Pr]);gr.setInput(In,Lr.yy),Lr.yy.lexer=gr,Lr.yy.parser=this,typeof gr.yylloc>"u"&&(gr.yylloc={});var lr=gr.yylloc;mr.push(lr);var qr=gr.options&&gr.options.ranges;typeof Lr.yy.parseError=="function"?this.parseError=Lr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function sr(){var Bn;return Bn=Hn.pop()||gr.lex()||wr,typeof Bn!="number"&&(Bn instanceof Array&&(Hn=Bn,Bn=Hn.pop()),Bn=Ln.symbols_[Bn]||Bn),Bn}for(var pr,Er,ir,Pn,nn={},fn,cn,Nn,On;;){if(Er=pn[pn.length-1],this.defaultActions[Er]?ir=this.defaultActions[Er]:((pr===null||typeof pr>"u")&&(pr=sr()),ir=vn[Er]&&vn[Er][pr]),typeof ir>"u"||!ir.length||!ir[0]){var cr="";On=[];for(fn in vn[Er])this.terminals_[fn]&&fn>rr&&On.push("'"+this.terminals_[fn]+"'");gr.showPosition?cr="Parse error on line "+(Tr+1)+`:
`+gr.showPosition()+`
Expecting `+On.join(", ")+", got '"+(this.terminals_[pr]||pr)+"'":cr="Parse error on line "+(Tr+1)+": Unexpected "+(pr==wr?"end of input":"'"+(this.terminals_[pr]||pr)+"'"),this.parseError(cr,{text:gr.match,token:this.terminals_[pr]||pr,line:gr.yylineno,loc:lr,expected:On})}if(ir[0]instanceof Array&&ir.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Er+", token: "+pr);switch(ir[0]){case 1:pn.push(pr),yn.push(gr.yytext),mr.push(gr.yylloc),pn.push(ir[1]),pr=null,Mr=gr.yyleng,yr=gr.yytext,Tr=gr.yylineno,lr=gr.yylloc;break;case 2:if(cn=this.productions_[ir[1]][1],nn.$=yn[yn.length-cn],nn._$={first_line:mr[mr.length-(cn||1)].first_line,last_line:mr[mr.length-1].last_line,first_column:mr[mr.length-(cn||1)].first_column,last_column:mr[mr.length-1].last_column},qr&&(nn._$.range=[mr[mr.length-(cn||1)].range[0],mr[mr.length-1].range[1]]),Pn=this.performAction.apply(nn,[yr,Mr,Tr,Lr.yy,ir[1],yn,mr].concat(fr)),typeof Pn<"u")return Pn;cn&&(pn=pn.slice(0,-1*cn*2),yn=yn.slice(0,-1*cn),mr=mr.slice(0,-1*cn)),pn.push(this.productions_[ir[1]][0]),yn.push(nn.$),mr.push(nn._$),Nn=vn[pn[pn.length-2]][pn[pn.length-1]],pn.push(Nn);break;case 3:return!0}}return!0}},Cn=function(){var kn={EOF:1,parseError:function(Ln,pn){if(this.yy.parser)this.yy.parser.parseError(Ln,pn);else throw new Error(Ln)},setInput:function(In,Ln){return this.yy=Ln||this.yy||{},this._input=In,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var In=this._input[0];this.yytext+=In,this.yyleng++,this.offset++,this.match+=In,this.matched+=In;var Ln=In.match(/(?:\r\n?|\n).*/g);return Ln?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),In},unput:function(In){var Ln=In.length,pn=In.split(/(?:\r\n?|\n)/g);this._input=In+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ln),this.offset-=Ln;var Hn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pn.length-1&&(this.yylineno-=pn.length-1);var yn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pn?(pn.length===Hn.length?this.yylloc.first_column:0)+Hn[Hn.length-pn.length].length-pn[0].length:this.yylloc.first_column-Ln},this.options.ranges&&(this.yylloc.range=[yn[0],yn[0]+this.yyleng-Ln]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(In){this.unput(this.match.slice(In))},pastInput:function(){var In=this.matched.substr(0,this.matched.length-this.match.length);return(In.length>20?"...":"")+In.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var In=this.match;return In.length<20&&(In+=this._input.substr(0,20-In.length)),(In.substr(0,20)+(In.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var In=this.pastInput(),Ln=new Array(In.length+1).join("-");return In+this.upcomingInput()+`
`+Ln+"^"},test_match:function(In,Ln){var pn,Hn,yn;if(this.options.backtrack_lexer&&(yn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(yn.yylloc.range=this.yylloc.range.slice(0))),Hn=In[0].match(/(?:\r\n?|\n).*/g),Hn&&(this.yylineno+=Hn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Hn?Hn[Hn.length-1].length-Hn[Hn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+In[0].length},this.yytext+=In[0],this.match+=In[0],this.matches=In,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(In[0].length),this.matched+=In[0],pn=this.performAction.call(this,this.yy,this,Ln,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pn)return pn;if(this._backtrack){for(var mr in yn)this[mr]=yn[mr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var In,Ln,pn,Hn;this._more||(this.yytext="",this.match="");for(var yn=this._currentRules(),mr=0;mr<yn.length;mr++)if(pn=this._input.match(this.rules[yn[mr]]),pn&&(!Ln||pn[0].length>Ln[0].length)){if(Ln=pn,Hn=mr,this.options.backtrack_lexer){if(In=this.test_match(pn,yn[mr]),In!==!1)return In;if(this._backtrack){Ln=!1;continue}else return!1}else if(!this.options.flex)break}return Ln?(In=this.test_match(Ln,yn[Hn]),In!==!1?In:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ln=this.next();return Ln||this.lex()},begin:function(Ln){this.conditionStack.push(Ln)},popState:function(){var Ln=this.conditionStack.length-1;return Ln>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ln){return Ln=this.conditionStack.length-1-Math.abs(Ln||0),Ln>=0?this.conditionStack[Ln]:"INITIAL"},pushState:function(Ln){this.begin(Ln)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Ln,pn,Hn,yn){switch(Hn){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return pn.yytext[0];case 29:return 42;case 30:return 44;case 31:return 44;case 32:return 44;case 33:return 42;case 34:return 42;case 35:return 43;case 36:return 43;case 37:return 43;case 38:return 43;case 39:return 43;case 40:return 44;case 41:return 43;case 42:return 44;case 43:return 45;case 44:return 45;case 45:return 45;case 46:return 45;case 47:return 42;case 48:return 43;case 49:return 44;case 50:return 46;case 51:return 47;case 52:return 47;case 53:return 46;case 54:return 46;case 55:return 46;case 56:return 30;case 57:return pn.yytext[0];case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return kn}();mn.lexer=Cn;function Tn(){this.yy={}}return Tn.prototype=mn,mn.Parser=Tn,new Tn}();parser$8.parser=parser$8;const erParser=parser$8,erDetector=nt=>nt.match(/^\s*erDiagram/)!==null;let entities={},relationships=[];const Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective$8=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addEntity=function(nt){return entities[nt]===void 0&&(entities[nt]={attributes:[]},log$1.info("Added new entity :",nt)),entities[nt]},getEntities=()=>entities,addAttributes=function(nt,rt){let it=addEntity(nt),st;for(st=rt.length-1;st>=0;st--)it.attributes.push(rt[st]),log$1.debug("Added attribute ",rt[st].attributeName)},addRelationship$1=function(nt,rt,it,st){let bt={entityA:nt,roleA:rt,entityB:it,relSpec:st};relationships.push(bt),log$1.debug("Added new relationship :",bt)},getRelationships$1=()=>relationships,clear$7=function(){entities={},relationships=[],clear$g()},erDb={Cardinality,Identification,parseDirective:parseDirective$8,getConfig:()=>getConfig$1().er,addEntity,addAttributes,getEntities,addRelationship:addRelationship$1,getRelationships:getRelationships$1,clear:clear$7,setAccTitle,getAccTitle,setAccDescription,getAccDescription,setDiagramTitle,getDiagramTitle},ERMarkers={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},insertMarkers$1=function(nt,rt){let it;nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,0 L21,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},erMarkers={ERMarkers,insertMarkers:insertMarkers$1},BAD_ID_CHARS_REGEXP=/[^\dA-Za-z](\W)*/g;let conf$8={},entityNameIds=new Map;const setConf$8=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$8[it]=nt[it]},drawAttributes=(nt,rt,it)=>{const st=conf$8.entityPadding/3,bt=conf$8.entityPadding/3,wt=conf$8.fontSize*.85,Et=rt.node().getBBox(),kt=[];let Lt=!1,Ot=!1,Rt=0,Dt=0,Bt=0,Ft=0,Yt=Et.height+st*2,Jt=1;it.forEach(sn=>{sn.attributeKeyType!==void 0&&(Lt=!0),sn.attributeComment!==void 0&&(Ot=!0)}),it.forEach(sn=>{const on=`${rt.node().id}-attr-${Jt}`;let hn=0;const mn=parseGenericTypes(sn.attributeType),Cn=nt.append("text").classed("er entityLabel",!0).attr("id",`${on}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(mn),Tn=nt.append("text").classed("er entityLabel",!0).attr("id",`${on}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(sn.attributeName),kn={};kn.tn=Cn,kn.nn=Tn;const In=Cn.node().getBBox(),Ln=Tn.node().getBBox();if(Rt=Math.max(Rt,In.width),Dt=Math.max(Dt,Ln.width),hn=Math.max(In.height,Ln.height),Lt){const pn=nt.append("text").classed("er entityLabel",!0).attr("id",`${on}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(sn.attributeKeyType||"");kn.kn=pn;const Hn=pn.node().getBBox();Bt=Math.max(Bt,Hn.width),hn=Math.max(hn,Hn.height)}if(Ot){const pn=nt.append("text").classed("er entityLabel",!0).attr("id",`${on}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(sn.attributeComment||"");kn.cn=pn;const Hn=pn.node().getBBox();Ft=Math.max(Ft,Hn.width),hn=Math.max(hn,Hn.height)}kn.height=hn,kt.push(kn),Yt+=hn+st*2,Jt+=1});let Wt=4;Lt&&(Wt+=2),Ot&&(Wt+=2);const Qt=Rt+Dt+Bt+Ft,rn={width:Math.max(conf$8.minEntityWidth,Math.max(Et.width+conf$8.entityPadding*2,Qt+bt*Wt)),height:it.length>0?Yt:Math.max(conf$8.minEntityHeight,Et.height+conf$8.entityPadding*2)};if(it.length>0){const sn=Math.max(0,(rn.width-Qt-bt*Wt)/(Wt/2));rt.attr("transform","translate("+rn.width/2+","+(st+Et.height/2)+")");let on=Et.height+st*2,hn="attributeBoxOdd";kt.forEach(mn=>{const Cn=on+st+mn.height/2;mn.tn.attr("transform","translate("+bt+","+Cn+")");const Tn=nt.insert("rect","#"+mn.tn.node().id).classed(`er ${hn}`,!0).attr("x",0).attr("y",on).attr("width",Rt+bt*2+sn).attr("height",mn.height+st*2),kn=parseFloat(Tn.attr("x"))+parseFloat(Tn.attr("width"));mn.nn.attr("transform","translate("+(kn+bt)+","+Cn+")");const In=nt.insert("rect","#"+mn.nn.node().id).classed(`er ${hn}`,!0).attr("x",kn).attr("y",on).attr("width",Dt+bt*2+sn).attr("height",mn.height+st*2);let Ln=parseFloat(In.attr("x"))+parseFloat(In.attr("width"));if(Lt){mn.kn.attr("transform","translate("+(Ln+bt)+","+Cn+")");const pn=nt.insert("rect","#"+mn.kn.node().id).classed(`er ${hn}`,!0).attr("x",Ln).attr("y",on).attr("width",Bt+bt*2+sn).attr("height",mn.height+st*2);Ln=parseFloat(pn.attr("x"))+parseFloat(pn.attr("width"))}Ot&&(mn.cn.attr("transform","translate("+(Ln+bt)+","+Cn+")"),nt.insert("rect","#"+mn.cn.node().id).classed(`er ${hn}`,"true").attr("x",Ln).attr("y",on).attr("width",Ft+bt*2+sn).attr("height",mn.height+st*2)),on+=mn.height+st*2,hn=hn==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else rn.height=Math.max(conf$8.minEntityHeight,Yt),rt.attr("transform","translate("+rn.width/2+","+rn.height/2+")");return rn},drawEntities=function(nt,rt,it){const st=Object.keys(rt);let bt;return st.forEach(function(wt){const Et=generateId(wt,"entity");entityNameIds.set(wt,Et);const kt=nt.append("g").attr("id",Et);bt=bt===void 0?Et:bt;const Lt="text-"+Et,Ot=kt.append("text").classed("er entityLabel",!0).attr("id",Lt).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(wt),{width:Rt,height:Dt}=drawAttributes(kt,Ot,rt[wt].attributes),Ft=kt.insert("rect","#"+Lt).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",Rt).attr("height",Dt).node().getBBox();it.setNode(Et,{width:Ft.width,height:Ft.height,shape:"rect",id:Et})}),bt},adjustEntities$1=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )")})},getEdgeName=function(nt){return(nt.entityA+nt.roleA+nt.entityB).replace(/\s/g,"")},addRelationships$1=function(nt,rt){return nt.forEach(function(it){rt.setEdge(entityNameIds.get(it.entityA),entityNameIds.get(it.entityB),{relationship:it},getEdgeName(it))}),nt};let relCnt$1=0;const drawRelationshipFromLayout$1=function(nt,rt,it,st,bt){relCnt$1++;const wt=it.edge(entityNameIds.get(rt.entityA),entityNameIds.get(rt.entityB),getEdgeName(rt)),Et=line$1().x(function(Yt){return Yt.x}).y(function(Yt){return Yt.y}).curve(curveBasis),kt=nt.insert("path","#"+st).classed("er relationshipLine",!0).attr("d",Et(wt.points)).style("stroke",conf$8.stroke).style("fill","none");rt.relSpec.relType===bt.db.Identification.NON_IDENTIFYING&&kt.attr("stroke-dasharray","8,8");let Lt="";switch(conf$8.arrowMarkerAbsolute&&(Lt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Lt=Lt.replace(/\(/g,"\\("),Lt=Lt.replace(/\)/g,"\\)")),rt.relSpec.cardA){case bt.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_END+")");break;case bt.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_END+")");break;case bt.db.Cardinality.ONE_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_END+")");break;case bt.db.Cardinality.ONLY_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_END+")");break}switch(rt.relSpec.cardB){case bt.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_START+")");break;case bt.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_START+")");break;case bt.db.Cardinality.ONE_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_START+")");break;case bt.db.Cardinality.ONLY_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_START+")");break}const Ot=kt.node().getTotalLength(),Rt=kt.node().getPointAtLength(Ot*.5),Dt="rel"+relCnt$1,Ft=nt.append("text").classed("er relationshipLabel",!0).attr("id",Dt).attr("x",Rt.x).attr("y",Rt.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(rt.roleA).node().getBBox();nt.insert("rect","#"+Dt).classed("er relationshipLabelBox",!0).attr("x",Rt.x-Ft.width/2).attr("y",Rt.y-Ft.height/2).attr("width",Ft.width).attr("height",Ft.height)},draw$b=function(nt,rt,it,st){conf$8=getConfig$1().er,log$1.info("Drawing ER diagram");const bt=getConfig$1().securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const kt=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);erMarkers.insertMarkers(kt,conf$8);let Lt;Lt=new Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:conf$8.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const Ot=drawEntities(kt,st.db.getEntities(),Lt),Rt=addRelationships$1(st.db.getRelationships(),Lt);layout(Lt),adjustEntities$1(kt,Lt),Rt.forEach(function(Jt){drawRelationshipFromLayout$1(kt,Jt,Lt,Ot,st)});const Dt=conf$8.diagramPadding;utils.insertTitle(kt,"entityTitleText",conf$8.titleTopMargin,st.db.getDiagramTitle());const Bt=kt.node().getBBox(),Ft=Bt.width+Dt*2,Yt=Bt.height+Dt*2;configureSvgSize(kt,Yt,Ft,conf$8.useMaxWidth),kt.attr("viewBox",`${Bt.x-Dt} ${Bt.y-Dt} ${Ft} ${Yt}`)};function generateId(nt="",rt=""){const it=nt.replace(BAD_ID_CHARS_REGEXP,"");return`${strWithHyphen(rt)}${strWithHyphen(it)}${v4()}`}function strWithHyphen(nt=""){return nt.length>0?`${nt}-`:""}const erRenderer={setConf:setConf$8,draw:draw$b};var parser$7=function(){var nt=function(ra,ji,so,fo){for(so=so||{},fo=ra.length;fo--;so[ra[fo]]=ji);return so},rt=[1,9],it=[1,7],st=[1,6],bt=[1,8],wt=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Et=[2,10],kt=[1,20],Lt=[1,21],Ot=[1,22],Rt=[1,23],Dt=[1,30],Bt=[1,32],Ft=[1,33],Yt=[1,34],Jt=[1,62],Wt=[1,48],Qt=[1,52],rn=[1,36],sn=[1,37],on=[1,38],hn=[1,39],mn=[1,40],Cn=[1,56],Tn=[1,63],kn=[1,51],In=[1,53],Ln=[1,55],pn=[1,59],Hn=[1,60],yn=[1,41],mr=[1,42],vn=[1,43],yr=[1,44],Tr=[1,61],Mr=[1,50],rr=[1,54],wr=[1,57],fr=[1,58],gr=[1,49],Lr=[1,66],Pr=[1,71],lr=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],qr=[1,75],sr=[1,74],pr=[1,76],Er=[20,21,23,81,82],ir=[1,99],Pn=[1,104],nn=[1,107],fn=[1,108],cn=[1,101],Nn=[1,106],On=[1,109],cr=[1,102],Bn=[1,114],Qn=[1,113],Un=[1,103],or=[1,105],hr=[1,110],kr=[1,111],xr=[1,112],br=[1,115],hi=[20,21,22,23,81,82],di=[20,21,22,23,53,81,82],vi=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ti=[20,21,23],ki=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Di=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ci=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],$r=[1,149],An=[1,157],Sn=[1,158],Wn=[1,159],er=[1,160],vr=[1,144],ti=[1,145],_r=[1,141],li=[1,152],Or=[1,153],mi=[1,154],_i=[1,155],Pi=[1,156],xi=[1,161],Zi=[1,162],$i=[1,147],Qi=[1,150],Eo=[1,146],to=[1,143],Za=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Hs=[1,165],Ai=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],io=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],Fs=[12,21,22,24],Xo=[22,106],os=[1,250],Os=[1,245],Ns=[1,246],Rr=[1,254],Qr=[1,251],Dr=[1,248],ar=[1,247],Ur=[1,249],ci=[1,252],wi=[1,253],Po=[1,255],bo=[1,273],ss=[20,21,23,106],oo=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],Do={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(ji,so,fo,Li,ao,Sr,ml){var Nr=Sr.length-1;switch(ao){case 5:Li.parseDirective("%%{","open_directive");break;case 6:Li.parseDirective(Sr[Nr],"type_directive");break;case 7:Sr[Nr]=Sr[Nr].trim().replace(/'/g,'"'),Li.parseDirective(Sr[Nr],"arg_directive");break;case 8:Li.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(Sr[Nr])||Sr[Nr].length>0)&&Sr[Nr-1].push(Sr[Nr]),this.$=Sr[Nr-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=Sr[Nr];break;case 19:Li.setDirection("TB"),this.$="TB";break;case 20:Li.setDirection(Sr[Nr-1]),this.$=Sr[Nr-1];break;case 35:this.$=Sr[Nr-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=Li.addSubGraph(Sr[Nr-6],Sr[Nr-1],Sr[Nr-4]);break;case 42:this.$=Li.addSubGraph(Sr[Nr-3],Sr[Nr-1],Sr[Nr-3]);break;case 43:this.$=Li.addSubGraph(void 0,Sr[Nr-1],void 0);break;case 45:this.$=Sr[Nr].trim(),Li.setAccTitle(this.$);break;case 46:case 47:this.$=Sr[Nr].trim(),Li.setAccDescription(this.$);break;case 51:Li.addLink(Sr[Nr-2].stmt,Sr[Nr],Sr[Nr-1]),this.$={stmt:Sr[Nr],nodes:Sr[Nr].concat(Sr[Nr-2].nodes)};break;case 52:Li.addLink(Sr[Nr-3].stmt,Sr[Nr-1],Sr[Nr-2]),this.$={stmt:Sr[Nr-1],nodes:Sr[Nr-1].concat(Sr[Nr-3].nodes)};break;case 53:this.$={stmt:Sr[Nr-1],nodes:Sr[Nr-1]};break;case 54:this.$={stmt:Sr[Nr],nodes:Sr[Nr]};break;case 55:this.$=[Sr[Nr]];break;case 56:this.$=Sr[Nr-4].concat(Sr[Nr]);break;case 57:this.$=[Sr[Nr-2]],Li.setClass(Sr[Nr-2],Sr[Nr]);break;case 58:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"square");break;case 59:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"doublecircle");break;case 60:this.$=Sr[Nr-5],Li.addVertex(Sr[Nr-5],Sr[Nr-2],"circle");break;case 61:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"ellipse");break;case 62:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"stadium");break;case 63:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"subroutine");break;case 64:this.$=Sr[Nr-7],Li.addVertex(Sr[Nr-7],Sr[Nr-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Sr[Nr-5],Sr[Nr-3]]]));break;case 65:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"cylinder");break;case 66:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"round");break;case 67:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"diamond");break;case 68:this.$=Sr[Nr-5],Li.addVertex(Sr[Nr-5],Sr[Nr-2],"hexagon");break;case 69:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"odd");break;case 70:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"trapezoid");break;case 71:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"inv_trapezoid");break;case 72:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"lean_right");break;case 73:this.$=Sr[Nr-3],Li.addVertex(Sr[Nr-3],Sr[Nr-1],"lean_left");break;case 74:this.$=Sr[Nr],Li.addVertex(Sr[Nr]);break;case 75:Sr[Nr-1].text=Sr[Nr],this.$=Sr[Nr-1];break;case 76:case 77:Sr[Nr-2].text=Sr[Nr-1],this.$=Sr[Nr-2];break;case 78:this.$=Sr[Nr];break;case 79:var ia=Li.destructLink(Sr[Nr],Sr[Nr-2]);this.$={type:ia.type,stroke:ia.stroke,length:ia.length,text:Sr[Nr-1]};break;case 80:var ia=Li.destructLink(Sr[Nr]);this.$={type:ia.type,stroke:ia.stroke,length:ia.length};break;case 81:this.$=Sr[Nr-1];break;case 83:case 97:case 153:this.$=Sr[Nr-1]+""+Sr[Nr];break;case 98:case 99:this.$=Sr[Nr-4],Li.addClass(Sr[Nr-2],Sr[Nr]);break;case 100:this.$=Sr[Nr-4],Li.setClass(Sr[Nr-2],Sr[Nr]);break;case 101:case 109:this.$=Sr[Nr-1],Li.setClickEvent(Sr[Nr-1],Sr[Nr]);break;case 102:case 110:this.$=Sr[Nr-3],Li.setClickEvent(Sr[Nr-3],Sr[Nr-2]),Li.setTooltip(Sr[Nr-3],Sr[Nr]);break;case 103:this.$=Sr[Nr-2],Li.setClickEvent(Sr[Nr-2],Sr[Nr-1],Sr[Nr]);break;case 104:this.$=Sr[Nr-4],Li.setClickEvent(Sr[Nr-4],Sr[Nr-3],Sr[Nr-2]),Li.setTooltip(Sr[Nr-4],Sr[Nr]);break;case 105:case 111:this.$=Sr[Nr-1],Li.setLink(Sr[Nr-1],Sr[Nr]);break;case 106:case 112:this.$=Sr[Nr-3],Li.setLink(Sr[Nr-3],Sr[Nr-2]),Li.setTooltip(Sr[Nr-3],Sr[Nr]);break;case 107:case 113:this.$=Sr[Nr-3],Li.setLink(Sr[Nr-3],Sr[Nr-2],Sr[Nr]);break;case 108:case 114:this.$=Sr[Nr-5],Li.setLink(Sr[Nr-5],Sr[Nr-4],Sr[Nr]),Li.setTooltip(Sr[Nr-5],Sr[Nr-2]);break;case 115:this.$=Sr[Nr-4],Li.addVertex(Sr[Nr-2],void 0,void 0,Sr[Nr]);break;case 116:case 118:this.$=Sr[Nr-4],Li.updateLink(Sr[Nr-2],Sr[Nr]);break;case 117:this.$=Sr[Nr-4],Li.updateLink([Sr[Nr-2]],Sr[Nr]);break;case 119:this.$=Sr[Nr-8],Li.updateLinkInterpolate([Sr[Nr-6]],Sr[Nr-2]),Li.updateLink([Sr[Nr-6]],Sr[Nr]);break;case 120:this.$=Sr[Nr-8],Li.updateLinkInterpolate(Sr[Nr-6],Sr[Nr-2]),Li.updateLink(Sr[Nr-6],Sr[Nr]);break;case 121:this.$=Sr[Nr-6],Li.updateLinkInterpolate([Sr[Nr-4]],Sr[Nr]);break;case 122:this.$=Sr[Nr-6],Li.updateLinkInterpolate(Sr[Nr-4],Sr[Nr]);break;case 123:case 125:this.$=[Sr[Nr]];break;case 124:case 126:Sr[Nr-2].push(Sr[Nr]),this.$=Sr[Nr-2];break;case 128:this.$=Sr[Nr-1]+Sr[Nr];break;case 150:this.$=Sr[Nr];break;case 151:this.$=Sr[Nr-1]+""+Sr[Nr];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:rt,16:4,21:it,22:st,24:bt},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:rt,16:4,21:it,22:st,24:bt},nt(wt,Et,{17:11}),{7:12,13:[1,13]},{16:14,21:it,22:st,24:bt},{16:15,21:it,22:st,24:bt},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:kt,21:Lt,22:Ot,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Jt,54:46,66:Wt,67:Qt,86:rn,87:sn,88:on,89:hn,90:mn,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,118:yn,119:mr,120:vn,121:yr,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},{8:64,10:[1,65],15:Lr},nt([10,15],[2,6]),nt(wt,[2,17]),nt(wt,[2,18]),nt(wt,[2,19]),{20:[1,68],21:[1,69],22:Pr,27:67,30:70},nt(lr,[2,11]),nt(lr,[2,12]),nt(lr,[2,13]),nt(lr,[2,14]),nt(lr,[2,15]),nt(lr,[2,16]),{9:72,20:qr,21:sr,23:pr,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:qr,21:sr,23:pr},{9:81,20:qr,21:sr,23:pr},{9:82,20:qr,21:sr,23:pr},{9:83,20:qr,21:sr,23:pr},{9:84,20:qr,21:sr,23:pr},{9:86,20:qr,21:sr,22:[1,85],23:pr},nt(lr,[2,44]),{45:[1,87]},{47:[1,88]},nt(lr,[2,47]),nt(Er,[2,54],{30:89,22:Pr}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:ir,52:Pn,66:nn,67:fn,84:[1,97],91:cn,97:96,98:[1,94],100:[1,95],105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(lr,[2,158]),nt(lr,[2,159]),nt(lr,[2,160]),nt(lr,[2,161]),nt(hi,[2,55],{53:[1,116]}),nt(di,[2,74],{116:129,40:[1,117],52:Jt,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Wt,67:Qt,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr}),nt(vi,[2,150]),nt(vi,[2,175]),nt(vi,[2,176]),nt(vi,[2,177]),nt(vi,[2,178]),nt(vi,[2,179]),nt(vi,[2,180]),nt(vi,[2,181]),nt(vi,[2,182]),nt(vi,[2,183]),nt(vi,[2,184]),nt(vi,[2,185]),nt(vi,[2,186]),nt(vi,[2,187]),nt(vi,[2,188]),nt(vi,[2,189]),nt(vi,[2,190]),{9:130,20:qr,21:sr,23:pr},{11:131,14:[1,132]},nt(Ti,[2,8]),nt(wt,[2,20]),nt(wt,[2,26]),nt(wt,[2,27]),{21:[1,133]},nt(ki,[2,34],{30:134,22:Pr}),nt(lr,[2,35]),{50:135,51:45,52:Jt,54:46,66:Wt,67:Qt,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},nt(Di,[2,48]),nt(Di,[2,49]),nt(Di,[2,50]),nt(Ci,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:$r,24:An,26:Sn,38:Wn,39:139,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),nt(lr,[2,36]),nt(lr,[2,37]),nt(lr,[2,38]),nt(lr,[2,39]),nt(lr,[2,40]),{22:$r,24:An,26:Sn,38:Wn,39:163,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(Za,Et,{17:164}),nt(lr,[2,45]),nt(lr,[2,46]),nt(Er,[2,53],{52:Hs}),{26:ir,52:Pn,66:nn,67:fn,91:cn,97:166,102:[1,167],105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{95:[1,168],103:169,105:[1,170]},{26:ir,52:Pn,66:nn,67:fn,91:cn,95:[1,171],97:172,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{26:ir,52:Pn,66:nn,67:fn,91:cn,97:173,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(Ti,[2,101],{22:[1,174],99:[1,175]}),nt(Ti,[2,105],{22:[1,176]}),nt(Ti,[2,109],{115:100,117:178,22:[1,177],26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,122:Un,123:or,124:hr,125:kr,126:xr,127:br}),nt(Ti,[2,111],{22:[1,179]}),nt(Ai,[2,152]),nt(Ai,[2,154]),nt(Ai,[2,155]),nt(Ai,[2,156]),nt(Ai,[2,157]),nt(io,[2,162]),nt(io,[2,163]),nt(io,[2,164]),nt(io,[2,165]),nt(io,[2,166]),nt(io,[2,167]),nt(io,[2,168]),nt(io,[2,169]),nt(io,[2,170]),nt(io,[2,171]),nt(io,[2,172]),nt(io,[2,173]),nt(io,[2,174]),{52:Jt,54:180,66:Wt,67:Qt,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},{22:$r,24:An,26:Sn,38:Wn,39:181,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:182,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:184,42:er,52:Pn,57:[1,183],66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:185,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:186,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:187,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{66:[1,188]},{22:$r,24:An,26:Sn,38:Wn,39:189,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:190,42:er,52:Pn,66:nn,67:fn,71:[1,191],73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:192,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:193,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:194,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(vi,[2,151]),nt(Fs,[2,3]),{8:195,15:Lr},{15:[2,7]},nt(wt,[2,28]),nt(ki,[2,33]),nt(Er,[2,51],{30:196,22:Pr}),nt(Ci,[2,75],{22:[1,197]}),{22:[1,198]},{22:$r,24:An,26:Sn,38:Wn,39:199,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,82:[1,200],83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(io,[2,82]),nt(io,[2,84]),nt(io,[2,140]),nt(io,[2,141]),nt(io,[2,142]),nt(io,[2,143]),nt(io,[2,144]),nt(io,[2,145]),nt(io,[2,146]),nt(io,[2,147]),nt(io,[2,148]),nt(io,[2,149]),nt(io,[2,85]),nt(io,[2,86]),nt(io,[2,87]),nt(io,[2,88]),nt(io,[2,89]),nt(io,[2,90]),nt(io,[2,91]),nt(io,[2,92]),nt(io,[2,93]),nt(io,[2,94]),nt(io,[2,95]),{9:203,20:qr,21:sr,22:$r,23:pr,24:An,26:Sn,38:Wn,40:[1,202],42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{18:18,19:19,20:kt,21:Lt,22:Ot,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,42:[1,204],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Jt,54:46,66:Wt,67:Qt,86:rn,87:sn,88:on,89:hn,90:mn,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,118:yn,119:mr,120:vn,121:yr,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},{22:Pr,30:205},{22:[1,206],26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:178,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},nt(Xo,[2,123]),{22:[1,211]},{22:[1,212],26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:178,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:[1,213],26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:178,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{84:[1,214]},nt(Ti,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},nt(Ai,[2,153]),{84:[1,219],101:[1,220]},nt(hi,[2,57],{116:129,52:Jt,66:Wt,67:Qt,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr}),{22:$r,24:An,26:Sn,38:Wn,41:[1,221],42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,56:[1,222],66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:223,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,58:[1,224],66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,60:[1,225],66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,62:[1,226],66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,64:[1,227],66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{67:[1,228]},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,70:[1,229],73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,72:[1,230],73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,39:231,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,41:[1,232],42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,73:vr,75:[1,233],77:[1,234],81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,73:vr,75:[1,236],77:[1,235],81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{9:237,20:qr,21:sr,23:pr},nt(Er,[2,52],{52:Hs}),nt(Ci,[2,77]),nt(Ci,[2,76]),{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,68:[1,238],73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(Ci,[2,79]),nt(io,[2,83]),{22:$r,24:An,26:Sn,38:Wn,39:239,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(Za,Et,{17:240}),nt(lr,[2,43]),{51:241,52:Jt,54:46,66:Wt,67:Qt,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},{22:os,66:Os,67:Ns,86:Rr,96:242,102:Qr,105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{22:os,66:Os,67:Ns,86:Rr,96:256,102:Qr,105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{22:os,66:Os,67:Ns,86:Rr,96:257,102:Qr,104:[1,258],105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{22:os,66:Os,67:Ns,86:Rr,96:259,102:Qr,104:[1,260],105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{105:[1,261]},{22:os,66:Os,67:Ns,86:Rr,96:262,102:Qr,105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{22:os,66:Os,67:Ns,86:Rr,96:263,102:Qr,105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{26:ir,52:Pn,66:nn,67:fn,91:cn,97:264,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(Ti,[2,102]),{84:[1,265]},nt(Ti,[2,106],{22:[1,266]}),nt(Ti,[2,107]),nt(Ti,[2,110]),nt(Ti,[2,112],{22:[1,267]}),nt(Ti,[2,113]),nt(di,[2,58]),nt(di,[2,59]),{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,58:[1,268],66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(di,[2,66]),nt(di,[2,61]),nt(di,[2,62]),nt(di,[2,63]),{66:[1,269]},nt(di,[2,65]),nt(di,[2,67]),{22:$r,24:An,26:Sn,38:Wn,42:er,52:Pn,66:nn,67:fn,72:[1,270],73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(di,[2,69]),nt(di,[2,70]),nt(di,[2,72]),nt(di,[2,71]),nt(di,[2,73]),nt(Fs,[2,4]),nt([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:$r,24:An,26:Sn,38:Wn,41:[1,271],42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{18:18,19:19,20:kt,21:Lt,22:Ot,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,42:[1,272],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Jt,54:46,66:Wt,67:Qt,86:rn,87:sn,88:on,89:hn,90:mn,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,118:yn,119:mr,120:vn,121:yr,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},nt(hi,[2,56]),nt(Ti,[2,115],{106:bo}),nt(ss,[2,125],{108:274,22:os,66:Os,67:Ns,86:Rr,102:Qr,105:Dr,109:ar,110:Ur,111:ci,112:wi,113:Po}),nt(oo,[2,127]),nt(oo,[2,129]),nt(oo,[2,130]),nt(oo,[2,131]),nt(oo,[2,132]),nt(oo,[2,133]),nt(oo,[2,134]),nt(oo,[2,135]),nt(oo,[2,136]),nt(oo,[2,137]),nt(oo,[2,138]),nt(oo,[2,139]),nt(Ti,[2,116],{106:bo}),nt(Ti,[2,117],{106:bo}),{22:[1,275]},nt(Ti,[2,118],{106:bo}),{22:[1,276]},nt(Xo,[2,124]),nt(Ti,[2,98],{106:bo}),nt(Ti,[2,99],{106:bo}),nt(Ti,[2,100],{115:100,117:178,26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,122:Un,123:or,124:hr,125:kr,126:xr,127:br}),nt(Ti,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:qr,21:sr,23:pr},nt(lr,[2,42]),{22:os,66:Os,67:Ns,86:Rr,102:Qr,105:Dr,107:283,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},nt(oo,[2,128]),{26:ir,52:Pn,66:nn,67:fn,91:cn,97:284,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{26:ir,52:Pn,66:nn,67:fn,91:cn,97:285,105:Nn,106:On,109:cr,111:Bn,112:Qn,115:100,117:98,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(Ti,[2,108]),nt(Ti,[2,114]),nt(di,[2,60]),{22:$r,24:An,26:Sn,38:Wn,39:286,42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:140,84:_r,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},nt(di,[2,68]),nt(Za,Et,{17:287}),nt(ss,[2,126],{108:274,22:os,66:Os,67:Ns,86:Rr,102:Qr,105:Dr,109:ar,110:Ur,111:ci,112:wi,113:Po}),nt(Ti,[2,121],{115:100,117:178,22:[1,288],26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,122:Un,123:or,124:hr,125:kr,126:xr,127:br}),nt(Ti,[2,122],{115:100,117:178,22:[1,289],26:ir,52:Pn,66:nn,67:fn,91:cn,105:Nn,106:On,109:cr,111:Bn,112:Qn,122:Un,123:or,124:hr,125:kr,126:xr,127:br}),{22:$r,24:An,26:Sn,38:Wn,41:[1,290],42:er,52:Pn,66:nn,67:fn,73:vr,81:ti,83:201,85:151,86:li,87:Or,88:mi,89:_i,90:Pi,91:xi,92:Zi,94:142,95:$i,105:Nn,106:On,109:Qi,111:Bn,112:Qn,113:Eo,114:to,115:148,122:Un,123:or,124:hr,125:kr,126:xr,127:br},{18:18,19:19,20:kt,21:Lt,22:Ot,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,42:[1,291],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Jt,54:46,66:Wt,67:Qt,86:rn,87:sn,88:on,89:hn,90:mn,91:Cn,95:Tn,105:kn,106:In,109:Ln,111:pn,112:Hn,116:47,118:yn,119:mr,120:vn,121:yr,122:Tr,123:Mr,124:rr,125:wr,126:fr,127:gr},{22:os,66:Os,67:Ns,86:Rr,96:292,102:Qr,105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},{22:os,66:Os,67:Ns,86:Rr,96:293,102:Qr,105:Dr,107:243,108:244,109:ar,110:Ur,111:ci,112:wi,113:Po},nt(di,[2,64]),nt(lr,[2,41]),nt(Ti,[2,119],{106:bo}),nt(Ti,[2,120],{106:bo})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(ji,so){if(so.recoverable)this.trace(ji);else{var fo=new Error(ji);throw fo.hash=so,fo}},parse:function(ji){var so=this,fo=[0],Li=[],ao=[null],Sr=[],ml=this.table,Nr="",ia=0,_c=0,No=2,go=1,Tu=Sr.slice.call(arguments,1),Fi=Object.create(this.lexer),mo={yy:{}};for(var Ka in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ka)&&(mo.yy[Ka]=this.yy[Ka]);Fi.setInput(ji,mo.yy),mo.yy.lexer=Fi,mo.yy.parser=this,typeof Fi.yylloc>"u"&&(Fi.yylloc={});var ic=Fi.yylloc;Sr.push(ic);var Rl=Fi.options&&Fi.options.ranges;typeof mo.yy.parseError=="function"?this.parseError=mo.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Qs(){var Ja;return Ja=Li.pop()||Fi.lex()||go,typeof Ja!="number"&&(Ja instanceof Array&&(Li=Ja,Ja=Li.pop()),Ja=so.symbols_[Ja]||Ja),Ja}for(var Ho,jo,la,Tl,ya={},yl,ja,ou,Rc;;){if(jo=fo[fo.length-1],this.defaultActions[jo]?la=this.defaultActions[jo]:((Ho===null||typeof Ho>"u")&&(Ho=Qs()),la=ml[jo]&&ml[jo][Ho]),typeof la>"u"||!la.length||!la[0]){var bc="";Rc=[];for(yl in ml[jo])this.terminals_[yl]&&yl>No&&Rc.push("'"+this.terminals_[yl]+"'");Fi.showPosition?bc="Parse error on line "+(ia+1)+`:
`+Fi.showPosition()+`
Expecting `+Rc.join(", ")+", got '"+(this.terminals_[Ho]||Ho)+"'":bc="Parse error on line "+(ia+1)+": Unexpected "+(Ho==go?"end of input":"'"+(this.terminals_[Ho]||Ho)+"'"),this.parseError(bc,{text:Fi.match,token:this.terminals_[Ho]||Ho,line:Fi.yylineno,loc:ic,expected:Rc})}if(la[0]instanceof Array&&la.length>1)throw new Error("Parse Error: multiple actions possible at state: "+jo+", token: "+Ho);switch(la[0]){case 1:fo.push(Ho),ao.push(Fi.yytext),Sr.push(Fi.yylloc),fo.push(la[1]),Ho=null,_c=Fi.yyleng,Nr=Fi.yytext,ia=Fi.yylineno,ic=Fi.yylloc;break;case 2:if(ja=this.productions_[la[1]][1],ya.$=ao[ao.length-ja],ya._$={first_line:Sr[Sr.length-(ja||1)].first_line,last_line:Sr[Sr.length-1].last_line,first_column:Sr[Sr.length-(ja||1)].first_column,last_column:Sr[Sr.length-1].last_column},Rl&&(ya._$.range=[Sr[Sr.length-(ja||1)].range[0],Sr[Sr.length-1].range[1]]),Tl=this.performAction.apply(ya,[Nr,_c,ia,mo.yy,la[1],ao,Sr].concat(Tu)),typeof Tl<"u")return Tl;ja&&(fo=fo.slice(0,-1*ja*2),ao=ao.slice(0,-1*ja),Sr=Sr.slice(0,-1*ja)),fo.push(this.productions_[la[1]][0]),ao.push(ya.$),Sr.push(ya._$),ou=ml[fo[fo.length-2]][fo[fo.length-1]],fo.push(ou);break;case 3:return!0}}return!0}},Us=function(){var ra={EOF:1,parseError:function(so,fo){if(this.yy.parser)this.yy.parser.parseError(so,fo);else throw new Error(so)},setInput:function(ji,so){return this.yy=so||this.yy||{},this._input=ji,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ji=this._input[0];this.yytext+=ji,this.yyleng++,this.offset++,this.match+=ji,this.matched+=ji;var so=ji.match(/(?:\r\n?|\n).*/g);return so?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ji},unput:function(ji){var so=ji.length,fo=ji.split(/(?:\r\n?|\n)/g);this._input=ji+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-so),this.offset-=so;var Li=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),fo.length-1&&(this.yylineno-=fo.length-1);var ao=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:fo?(fo.length===Li.length?this.yylloc.first_column:0)+Li[Li.length-fo.length].length-fo[0].length:this.yylloc.first_column-so},this.options.ranges&&(this.yylloc.range=[ao[0],ao[0]+this.yyleng-so]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ji){this.unput(this.match.slice(ji))},pastInput:function(){var ji=this.matched.substr(0,this.matched.length-this.match.length);return(ji.length>20?"...":"")+ji.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ji=this.match;return ji.length<20&&(ji+=this._input.substr(0,20-ji.length)),(ji.substr(0,20)+(ji.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ji=this.pastInput(),so=new Array(ji.length+1).join("-");return ji+this.upcomingInput()+`
`+so+"^"},test_match:function(ji,so){var fo,Li,ao;if(this.options.backtrack_lexer&&(ao={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ao.yylloc.range=this.yylloc.range.slice(0))),Li=ji[0].match(/(?:\r\n?|\n).*/g),Li&&(this.yylineno+=Li.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Li?Li[Li.length-1].length-Li[Li.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ji[0].length},this.yytext+=ji[0],this.match+=ji[0],this.matches=ji,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ji[0].length),this.matched+=ji[0],fo=this.performAction.call(this,this.yy,this,so,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),fo)return fo;if(this._backtrack){for(var Sr in ao)this[Sr]=ao[Sr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ji,so,fo,Li;this._more||(this.yytext="",this.match="");for(var ao=this._currentRules(),Sr=0;Sr<ao.length;Sr++)if(fo=this._input.match(this.rules[ao[Sr]]),fo&&(!so||fo[0].length>so[0].length)){if(so=fo,Li=Sr,this.options.backtrack_lexer){if(ji=this.test_match(fo,ao[Sr]),ji!==!1)return ji;if(this._backtrack){so=!1;continue}else return!1}else if(!this.options.flex)break}return so?(ji=this.test_match(so,ao[Li]),ji!==!1?ji:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var so=this.next();return so||this.lex()},begin:function(so){this.conditionStack.push(so)},popState:function(){var so=this.conditionStack.length-1;return so>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(so){return so=this.conditionStack.length-1-Math.abs(so||0),so>=0?this.conditionStack[so]:"INITIAL"},pushState:function(so){this.begin(so)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(so,fo,Li,ao){switch(Li){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return so.lex.firstGraph()&&this.begin("dir"),24;case 36:return so.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 81;case 70:return 81;case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:return 125;case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};return ra}();Do.lexer=Us;function aa(){this.yy={}}return aa.prototype=Do,Do.Parser=aa,new aa}();parser$7.parser=parser$7;const flowParser=parser$7,flowDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*graph/)!==null},flowDetectorV2=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-wrapper"&&nt.match(/^\s*graph/)!==null?!0:nt.match(/^\s*flowchart/)!==null},MERMAID_DOM_ID_PREFIX="flowchart-";let vertexCounter=0,config=getConfig$1(),vertices={},edges=[],classes$1={},subGraphs=[],subGraphLookup={},tooltips={},subCount=0,firstGraphFlag=!0,direction$1,version,funs$1=[];const sanitizeText=nt=>common$1.sanitizeText(nt,config),parseDirective$7=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},lookUpDomId=function(nt){const rt=Object.keys(vertices);for(const it of rt)if(vertices[it].id===nt)return vertices[it].domId;return nt},addVertex=function(nt,rt,it,st,bt,wt,Et={}){let kt,Lt=nt;Lt!==void 0&&Lt.trim().length!==0&&(vertices[Lt]===void 0&&(vertices[Lt]={id:Lt,domId:MERMAID_DOM_ID_PREFIX+Lt+"-"+vertexCounter,styles:[],classes:[]}),vertexCounter++,rt!==void 0?(config=getConfig$1(),kt=sanitizeText(rt.trim()),kt[0]==='"'&&kt[kt.length-1]==='"'&&(kt=kt.substring(1,kt.length-1)),vertices[Lt].text=kt):vertices[Lt].text===void 0&&(vertices[Lt].text=nt),it!==void 0&&(vertices[Lt].type=it),st!=null&&st.forEach(function(Ot){vertices[Lt].styles.push(Ot)}),bt!=null&&bt.forEach(function(Ot){vertices[Lt].classes.push(Ot)}),wt!==void 0&&(vertices[Lt].dir=wt),vertices[Lt].props===void 0?vertices[Lt].props=Et:Et!==void 0&&Object.assign(vertices[Lt].props,Et))},addSingleLink=function(nt,rt,it,st){const Et={start:nt,end:rt,type:void 0,text:""};st=it.text,st!==void 0&&(Et.text=sanitizeText(st.trim()),Et.text[0]==='"'&&Et.text[Et.text.length-1]==='"'&&(Et.text=Et.text.substring(1,Et.text.length-1))),it!==void 0&&(Et.type=it.type,Et.stroke=it.stroke,Et.length=it.length),edges.push(Et)},addLink=function(nt,rt,it,st){let bt,wt;for(bt=0;bt<nt.length;bt++)for(wt=0;wt<rt.length;wt++)addSingleLink(nt[bt],rt[wt],it,st)},updateLinkInterpolate=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultInterpolate=rt:edges[it].interpolate=rt})},updateLink=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultStyle=rt:(utils.isSubstringInArray("fill",rt)===-1&&rt.push("fill:none"),edges[it].style=rt)})},addClass=function(nt,rt){classes$1[nt]===void 0&&(classes$1[nt]={id:nt,styles:[],textStyles:[]}),rt!=null&&rt.forEach(function(it){if(it.match("color")){const bt=it.replace("fill","bgFill").replace("color","fill");classes$1[nt].textStyles.push(bt)}classes$1[nt].styles.push(it)})},setDirection$1=function(nt){direction$1=nt,direction$1.match(/.*</)&&(direction$1="RL"),direction$1.match(/.*\^/)&&(direction$1="BT"),direction$1.match(/.*>/)&&(direction$1="LR"),direction$1.match(/.*v/)&&(direction$1="TB")},setClass$1=function(nt,rt){nt.split(",").forEach(function(it){let st=it;vertices[st]!==void 0&&vertices[st].classes.push(rt),subGraphLookup[st]!==void 0&&subGraphLookup[st].classes.push(rt)})},setTooltip=function(nt,rt){nt.split(",").forEach(function(it){rt!==void 0&&(tooltips[version==="gen-1"?lookUpDomId(it):it]=sanitizeText(rt))})},setClickFun$1=function(nt,rt,it){let st=lookUpDomId(nt);if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let bt=[];if(typeof it=="string"){bt=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let wt=0;wt<bt.length;wt++){let Et=bt[wt].trim();Et.charAt(0)==='"'&&Et.charAt(Et.length-1)==='"'&&(Et=Et.substr(1,Et.length-2)),bt[wt]=Et}}bt.length===0&&bt.push(nt),vertices[nt]!==void 0&&(vertices[nt].haveCallback=!0,funs$1.push(function(){const wt=document.querySelector(`[id="${st}"]`);wt!==null&&wt.addEventListener("click",function(){utils.runFunc(rt,...bt)},!1)}))},setLink$1=function(nt,rt,it){nt.split(",").forEach(function(st){vertices[st]!==void 0&&(vertices[st].link=utils.formatUrl(rt,config),vertices[st].linkTarget=it)}),setClass$1(nt,"clickable")},getTooltip=function(nt){return tooltips[nt]},setClickEvent$1=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFun$1(st,rt,it)}),setClass$1(nt,"clickable")},bindFunctions$1=function(nt){funs$1.forEach(function(rt){rt(nt)})},getDirection$1=function(){return direction$1.trim()},getVertices=function(){return vertices},getEdges=function(){return edges},getClasses$4=function(){return classes$1},setupToolTips=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const bt=select(this);if(bt.attr("title")===null)return;const Et=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(bt.attr("title")).style("left",window.scrollX+Et.left+(Et.right-Et.left)/2+"px").style("top",window.scrollY+Et.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),bt.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$1.push(setupToolTips);const clear$6=function(nt="gen-1"){vertices={},classes$1={},edges=[],funs$1=[setupToolTips],subGraphs=[],subGraphLookup={},subCount=0,tooltips=[],firstGraphFlag=!0,version=nt,clear$g()},setGen=nt=>{version=nt||"gen-1"},defaultStyle=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph=function(nt,rt,it){let st=nt.trim(),bt=it;nt===it&&it.match(/\s/)&&(st=void 0);function wt(Rt){const Dt={boolean:{},number:{},string:{}},Bt=[];let Ft;return{nodeList:Rt.filter(function(Jt){const Wt=typeof Jt;return Jt.stmt&&Jt.stmt==="dir"?(Ft=Jt.value,!1):Jt.trim()===""?!1:Wt in Dt?Dt[Wt].hasOwnProperty(Jt)?!1:Dt[Wt][Jt]=!0:Bt.includes(Jt)?!1:Bt.push(Jt)}),dir:Ft}}let Et=[];const{nodeList:kt,dir:Lt}=wt(Et.concat.apply(Et,rt));if(Et=kt,version==="gen-1")for(let Rt=0;Rt<Et.length;Rt++)Et[Rt]=lookUpDomId(Et[Rt]);st=st||"subGraph"+subCount,bt=bt||"",bt=sanitizeText(bt),subCount=subCount+1;const Ot={id:st,nodes:Et,title:bt.trim(),classes:[],dir:Lt};return log$1.info("Adding",Ot.id,Ot.nodes,Ot.dir),Ot.nodes=makeUniq(Ot,subGraphs).nodes,subGraphs.push(Ot),subGraphLookup[st]=Ot,st},getPosForId=function(nt){for(const[rt,it]of subGraphs.entries())if(it.id===nt)return rt;return-1};let secCount=-1;const posCrossRef=[],indexNodes2=function(nt,rt){const it=subGraphs[rt].nodes;if(secCount=secCount+1,secCount>2e3)return;if(posCrossRef[secCount]=rt,subGraphs[rt].id===nt)return{result:!0,count:0};let st=0,bt=1;for(;st<it.length;){const wt=getPosForId(it[st]);if(wt>=0){const Et=indexNodes2(nt,wt);if(Et.result)return{result:!0,count:bt+Et.count};bt=bt+Et.count}st=st+1}return{result:!1,count:bt}},getDepthFirstPos=function(nt){return posCrossRef[nt]},indexNodes=function(){secCount=-1,subGraphs.length>0&&indexNodes2("none",subGraphs.length-1)},getSubGraphs=function(){return subGraphs},firstGraph=()=>firstGraphFlag?(firstGraphFlag=!1,!0):!1,destructStartLink=nt=>{let rt=nt.trim(),it="arrow_open";switch(rt[0]){case"<":it="arrow_point",rt=rt.slice(1);break;case"x":it="arrow_cross",rt=rt.slice(1);break;case"o":it="arrow_circle",rt=rt.slice(1);break}let st="normal";return rt.includes("=")&&(st="thick"),rt.includes(".")&&(st="dotted"),{type:it,stroke:st}},countChar=(nt,rt)=>{const it=rt.length;let st=0;for(let bt=0;bt<it;++bt)rt[bt]===nt&&++st;return st},destructEndLink=nt=>{const rt=nt.trim();let it=rt.slice(0,-1),st="arrow_open";switch(rt.slice(-1)){case"x":st="arrow_cross",rt[0]==="x"&&(st="double_"+st,it=it.slice(1));break;case">":st="arrow_point",rt[0]==="<"&&(st="double_"+st,it=it.slice(1));break;case"o":st="arrow_circle",rt[0]==="o"&&(st="double_"+st,it=it.slice(1));break}let bt="normal",wt=it.length-1;it[0]==="="&&(bt="thick");let Et=countChar(".",it);return Et&&(bt="dotted",wt=Et),{type:st,stroke:bt,length:wt}},destructLink=(nt,rt)=>{const it=destructEndLink(nt);let st;if(rt){if(st=destructStartLink(rt),st.stroke!==it.stroke)return{type:"INVALID",stroke:"INVALID"};if(st.type==="arrow_open")st.type=it.type;else{if(st.type!==it.type)return{type:"INVALID",stroke:"INVALID"};st.type="double_"+st.type}return st.type==="double_arrow"&&(st.type="double_arrow_point"),st.length=it.length,st}return it},exists=(nt,rt)=>{let it=!1;return nt.forEach(st=>{st.nodes.indexOf(rt)>=0&&(it=!0)}),it},makeUniq=(nt,rt)=>{const it=[];return nt.nodes.forEach((st,bt)=>{exists(rt,st)||it.push(nt.nodes[bt])}),{nodes:it}},flowDb={parseDirective:parseDirective$7,defaultConfig:()=>defaultConfig.flowchart,setAccTitle,getAccTitle,getAccDescription,setAccDescription,addVertex,lookUpDomId,addLink,updateLinkInterpolate,updateLink,addClass,setDirection:setDirection$1,setClass:setClass$1,setTooltip,getTooltip,setClickEvent:setClickEvent$1,setLink:setLink$1,bindFunctions:bindFunctions$1,getDirection:getDirection$1,getVertices,getEdges,getClasses:getClasses$4,clear:clear$6,setGen,defaultStyle,addSubGraph,getDepthFirstPos,indexNodes,getSubGraphs,destructLink,lex:{firstGraph},exists,makeUniq,setDiagramTitle,getDiagramTitle};function question(nt,rt,it){const st=rt.width,bt=rt.height,wt=(st+bt)*.9,Et=[{x:wt/2,y:0},{x:wt,y:-wt/2},{x:wt/2,y:-wt},{x:0,y:-wt/2}],kt=insertPolygonShape(nt,wt,wt,Et);return it.intersect=function(Lt){return intersectPolygon$1(it,Et,Lt)},kt}function hexagon(nt,rt,it){const bt=rt.height,wt=bt/4,Et=rt.width+2*wt,kt=[{x:wt,y:0},{x:Et-wt,y:0},{x:Et,y:-bt/2},{x:Et-wt,y:-bt},{x:wt,y:-bt},{x:0,y:-bt/2}],Lt=insertPolygonShape(nt,Et,bt,kt);return it.intersect=function(Ot){return intersectPolygon$1(it,kt,Ot)},Lt}function rect_left_inv_arrow(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:-bt/2,y:0},{x:st,y:0},{x:st,y:-bt},{x:-bt/2,y:-bt},{x:0,y:-bt/2}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function lean_right(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:-2*bt/6,y:0},{x:st-bt/6,y:0},{x:st+2*bt/6,y:-bt},{x:bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function lean_left(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:2*bt/6,y:0},{x:st+bt/6,y:0},{x:st-2*bt/6,y:-bt},{x:-bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function trapezoid(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:-2*bt/6,y:0},{x:st+2*bt/6,y:0},{x:st-bt/6,y:-bt},{x:bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function inv_trapezoid(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:bt/6,y:0},{x:st-bt/6,y:0},{x:st+2*bt/6,y:-bt},{x:-2*bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function rect_right_inv_arrow(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:0,y:0},{x:st+bt/2,y:0},{x:st,y:-bt/2},{x:st+bt/2,y:-bt},{x:0,y:-bt}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function stadium(nt,rt,it){const st=rt.height,bt=rt.width+st/4,wt=nt.insert("rect",":first-child").attr("rx",st/2).attr("ry",st/2).attr("x",-bt/2).attr("y",-st/2).attr("width",bt).attr("height",st);return it.intersect=function(Et){return intersectRect$2(it,Et)},wt}function subroutine(nt,rt,it){const st=rt.width,bt=rt.height,wt=[{x:0,y:0},{x:st,y:0},{x:st,y:-bt},{x:0,y:-bt},{x:0,y:0},{x:-8,y:0},{x:st+8,y:0},{x:st+8,y:-bt},{x:-8,y:-bt},{x:-8,y:0}],Et=insertPolygonShape(nt,st,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Et}function cylinder(nt,rt,it){const st=rt.width,bt=st/2,wt=bt/(2.5+st/50),Et=rt.height+wt,kt="M 0,"+wt+" a "+bt+","+wt+" 0,0,0 "+st+" 0 a "+bt+","+wt+" 0,0,0 "+-st+" 0 l 0,"+Et+" a "+bt+","+wt+" 0,0,0 "+st+" 0 l 0,"+-Et,Lt=nt.attr("label-offset-y",wt).insert("path",":first-child").attr("d",kt).attr("transform","translate("+-st/2+","+-(Et/2+wt)+")");return it.intersect=function(Ot){const Rt=intersectRect$2(it,Ot),Dt=Rt.x-it.x;if(bt!=0&&(Math.abs(Dt)<it.width/2||Math.abs(Dt)==it.width/2&&Math.abs(Rt.y-it.y)>it.height/2-wt)){let Bt=wt*wt*(1-Dt*Dt/(bt*bt));Bt!=0&&(Bt=Math.sqrt(Bt)),Bt=wt-Bt,Ot.y-it.y>0&&(Bt=-Bt),Rt.y+=Bt}return Rt},Lt}function addToRender(nt){nt.shapes().question=question,nt.shapes().hexagon=hexagon,nt.shapes().stadium=stadium,nt.shapes().subroutine=subroutine,nt.shapes().cylinder=cylinder,nt.shapes().rect_left_inv_arrow=rect_left_inv_arrow,nt.shapes().lean_right=lean_right,nt.shapes().lean_left=lean_left,nt.shapes().trapezoid=trapezoid,nt.shapes().inv_trapezoid=inv_trapezoid,nt.shapes().rect_right_inv_arrow=rect_right_inv_arrow}function addToRenderV2(nt){nt({question}),nt({hexagon}),nt({stadium}),nt({subroutine}),nt({cylinder}),nt({rect_left_inv_arrow}),nt({lean_right}),nt({lean_left}),nt({trapezoid}),nt({inv_trapezoid}),nt({rect_right_inv_arrow})}function insertPolygonShape(nt,rt,it,st){return nt.insert("polygon",":first-child").attr("points",st.map(function(bt){return bt.x+","+bt.y}).join(" ")).attr("transform","translate("+-rt/2+","+it/2+")")}const flowChartShapes={addToRender,addToRenderV2},conf$7={},setConf$7=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$7[it]=nt[it]},addVertices$1=function(nt,rt,it,st,bt,wt){const Et=st?st.select(`[id="${it}"]`):select(`[id="${it}"]`),kt=bt||document;Object.keys(nt).forEach(function(Ot){const Rt=nt[Ot];let Dt="default";Rt.classes.length>0&&(Dt=Rt.classes.join(" "));const Bt=getStylesFromArray(Rt.styles);let Ft=Rt.text!==void 0?Rt.text:Rt.id,Yt;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Qt={label:Ft.replace(/fa[blrs]?:fa-[\w-]+/g,rn=>`<i class='${rn.replace(":"," ")}'></i>`)};Yt=addHtmlLabel$1(Et,Qt).node(),Yt.parentNode.removeChild(Yt)}else{const Qt=kt.createElementNS("http://www.w3.org/2000/svg","text");Qt.setAttribute("style",Bt.labelStyle.replace("color:","fill:"));const rn=Ft.split(common$1.lineBreakRegex);for(const sn of rn){const on=kt.createElementNS("http://www.w3.org/2000/svg","tspan");on.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),on.setAttribute("dy","1em"),on.setAttribute("x","1"),on.textContent=sn,Qt.appendChild(on)}Yt=Qt}let Jt=0,Wt="";switch(Rt.type){case"round":Jt=5,Wt="rect";break;case"square":Wt="rect";break;case"diamond":Wt="question";break;case"hexagon":Wt="hexagon";break;case"odd":Wt="rect_left_inv_arrow";break;case"lean_right":Wt="lean_right";break;case"lean_left":Wt="lean_left";break;case"trapezoid":Wt="trapezoid";break;case"inv_trapezoid":Wt="inv_trapezoid";break;case"odd_right":Wt="rect_left_inv_arrow";break;case"circle":Wt="circle";break;case"ellipse":Wt="ellipse";break;case"stadium":Wt="stadium";break;case"subroutine":Wt="subroutine";break;case"cylinder":Wt="cylinder";break;case"group":Wt="rect";break;default:Wt="rect"}log$1.warn("Adding node",Rt.id,Rt.domId),rt.setNode(wt.db.lookUpDomId(Rt.id),{labelType:"svg",labelStyle:Bt.labelStyle,shape:Wt,label:Yt,rx:Jt,ry:Jt,class:Dt,style:Bt.style,id:wt.db.lookUpDomId(Rt.id)})})},addEdges$1=function(nt,rt,it){let st=0,bt,wt;if(nt.defaultStyle!==void 0){const Et=getStylesFromArray(nt.defaultStyle);bt=Et.style,wt=Et.labelStyle}nt.forEach(function(Et){st++;var kt="L-"+Et.start+"-"+Et.end,Lt="LS-"+Et.start,Ot="LE-"+Et.end;const Rt={};Et.type==="arrow_open"?Rt.arrowhead="none":Rt.arrowhead="normal";let Dt="",Bt="";if(Et.style!==void 0){const Ft=getStylesFromArray(Et.style);Dt=Ft.style,Bt=Ft.labelStyle}else switch(Et.stroke){case"normal":Dt="fill:none",bt!==void 0&&(Dt=bt),wt!==void 0&&(Bt=wt);break;case"dotted":Dt="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Dt=" stroke-width: 3.5px;fill:none";break}Rt.style=Dt,Rt.labelStyle=Bt,Et.interpolate!==void 0?Rt.curve=interpolateToCurve(Et.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Rt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Rt.curve=interpolateToCurve(conf$7.curve,curveLinear),Et.text===void 0?Et.style!==void 0&&(Rt.arrowheadStyle="fill: #333"):(Rt.arrowheadStyle="fill: #333",Rt.labelpos="c",evaluate(getConfig$1().flowchart.htmlLabels)?(Rt.labelType="html",Rt.label=`<span id="L-${kt}" class="edgeLabel L-${Lt}' L-${Ot}" style="${Rt.labelStyle}">${Et.text.replace(/fa[blrs]?:fa-[\w-]+/g,Ft=>`<i class='${Ft.replace(":"," ")}'></i>`)}</span>`):(Rt.labelType="text",Rt.label=Et.text.replace(common$1.lineBreakRegex,`
`),Et.style===void 0&&(Rt.style=Rt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),Rt.labelStyle=Rt.labelStyle.replace("color:","fill:"))),Rt.id=kt,Rt.class=Lt+" "+Ot,Rt.minlen=Et.length||1,rt.setEdge(it.db.lookUpDomId(Et.start),it.db.lookUpDomId(Et.end),Rt,st)})},getClasses$3=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch(it){return log$1.error(it),{}}},draw$a=function(nt,rt,it,st){log$1.info("Drawing flowchart"),st.db.clear();const{securityLevel:bt,flowchart:wt}=getConfig$1();let Et;bt==="sandbox"&&(Et=select("#i"+rt));const kt=select(bt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=bt==="sandbox"?Et.nodes()[0].contentDocument:document;try{st.parser.parse(nt)}catch{log$1.debug("Parsing failed")}let Ot=st.db.getDirection();Ot===void 0&&(Ot="TD");const Rt=wt.nodeSpacing||50,Dt=wt.rankSpacing||50,Bt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Ot,nodesep:Rt,ranksep:Dt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let Ft;const Yt=st.db.getSubGraphs();for(let mn=Yt.length-1;mn>=0;mn--)Ft=Yt[mn],st.db.addVertex(Ft.id,Ft.title,"group",void 0,Ft.classes);const Jt=st.db.getVertices();log$1.warn("Get vertices",Jt);const Wt=st.db.getEdges();let Qt=0;for(Qt=Yt.length-1;Qt>=0;Qt--){Ft=Yt[Qt],selectAll("cluster").append("text");for(let mn=0;mn<Ft.nodes.length;mn++)log$1.warn("Setting subgraph",Ft.nodes[mn],st.db.lookUpDomId(Ft.nodes[mn]),st.db.lookUpDomId(Ft.id)),Bt.setParent(st.db.lookUpDomId(Ft.nodes[mn]),st.db.lookUpDomId(Ft.id))}addVertices$1(Jt,Bt,rt,kt,Lt,st),addEdges$1(Wt,Bt,st);const rn=new render$2;flowChartShapes.addToRender(rn),rn.arrows().none=function(Cn,Tn,kn,In){const pn=Cn.append("marker").attr("id",Tn).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");applyStyle$1(pn,kn[In+"Style"])},rn.arrows().normal=function(Cn,Tn){Cn.append("marker").attr("id",Tn).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const sn=kt.select(`[id="${rt}"]`),on=kt.select("#"+rt+" g");for(rn(on,Bt),on.selectAll("g.node").attr("title",function(){return st.db.getTooltip(this.id)}),st.db.indexNodes("subGraph"+Qt),Qt=0;Qt<Yt.length;Qt++)if(Ft=Yt[Qt],Ft.title!=="undefined"){const mn=Lt.querySelectorAll("#"+rt+' [id="'+st.db.lookUpDomId(Ft.id)+'"] rect'),Cn=Lt.querySelectorAll("#"+rt+' [id="'+st.db.lookUpDomId(Ft.id)+'"]'),Tn=mn[0].x.baseVal.value,kn=mn[0].y.baseVal.value,In=mn[0].width.baseVal.value,pn=select(Cn[0]).select(".label");pn.attr("transform",`translate(${Tn+In/2}, ${kn+14})`),pn.attr("id",rt+"Text");for(let Hn=0;Hn<Ft.classes.length;Hn++)Cn[0].classList.add(Ft.classes[Hn])}if(!wt.htmlLabels){const mn=Lt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const Cn of mn){const Tn=Cn.getBBox(),kn=Lt.createElementNS("http://www.w3.org/2000/svg","rect");kn.setAttribute("rx",0),kn.setAttribute("ry",0),kn.setAttribute("width",Tn.width),kn.setAttribute("height",Tn.height),Cn.insertBefore(kn,Cn.firstChild)}}setupGraphViewbox$1(Bt,sn,wt.diagramPadding,wt.useMaxWidth),Object.keys(Jt).forEach(function(mn){const Cn=Jt[mn];if(Cn.link){const Tn=kt.select("#"+rt+' [id="'+st.db.lookUpDomId(mn)+'"]');if(Tn){const kn=Lt.createElementNS("http://www.w3.org/2000/svg","a");kn.setAttributeNS("http://www.w3.org/2000/svg","class",Cn.classes.join(" ")),kn.setAttributeNS("http://www.w3.org/2000/svg","href",Cn.link),kn.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),bt==="sandbox"?kn.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):Cn.linkTarget&&kn.setAttributeNS("http://www.w3.org/2000/svg","target",Cn.linkTarget);const In=Tn.insert(function(){return kn},":first-child"),Ln=Tn.select(".label-container");Ln&&In.append(function(){return Ln.node()});const pn=Tn.select(".label");pn&&In.append(function(){return pn.node()})}}})},flowRenderer={setConf:setConf$7,addVertices:addVertices$1,addEdges:addEdges$1,getClasses:getClasses$3,draw:draw$a},conf$6={},setConf$6=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$6[it]=nt[it]},addVertices=function(nt,rt,it,st,bt,wt){const Et=st.select(`[id="${it}"]`);Object.keys(nt).forEach(function(Lt){const Ot=nt[Lt];let Rt="default";Ot.classes.length>0&&(Rt=Ot.classes.join(" "));const Dt=getStylesFromArray(Ot.styles);let Bt=Ot.text!==void 0?Ot.text:Ot.id,Ft;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Wt={label:Bt.replace(/fa[blrs]?:fa-[\w-]+/g,Qt=>`<i class='${Qt.replace(":"," ")}'></i>`)};Ft=addHtmlLabel$1(Et,Wt).node(),Ft.parentNode.removeChild(Ft)}else{const Wt=bt.createElementNS("http://www.w3.org/2000/svg","text");Wt.setAttribute("style",Dt.labelStyle.replace("color:","fill:"));const Qt=Bt.split(common$1.lineBreakRegex);for(const rn of Qt){const sn=bt.createElementNS("http://www.w3.org/2000/svg","tspan");sn.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),sn.setAttribute("dy","1em"),sn.setAttribute("x","1"),sn.textContent=rn,Wt.appendChild(sn)}Ft=Wt}let Yt=0,Jt="";switch(Ot.type){case"round":Yt=5,Jt="rect";break;case"square":Jt="rect";break;case"diamond":Jt="question";break;case"hexagon":Jt="hexagon";break;case"odd":Jt="rect_left_inv_arrow";break;case"lean_right":Jt="lean_right";break;case"lean_left":Jt="lean_left";break;case"trapezoid":Jt="trapezoid";break;case"inv_trapezoid":Jt="inv_trapezoid";break;case"odd_right":Jt="rect_left_inv_arrow";break;case"circle":Jt="circle";break;case"ellipse":Jt="ellipse";break;case"stadium":Jt="stadium";break;case"subroutine":Jt="subroutine";break;case"cylinder":Jt="cylinder";break;case"group":Jt="rect";break;case"doublecircle":Jt="doublecircle";break;default:Jt="rect"}rt.setNode(Ot.id,{labelStyle:Dt.labelStyle,shape:Jt,labelText:Bt,rx:Yt,ry:Yt,class:Rt,style:Dt.style,id:Ot.id,link:Ot.link,linkTarget:Ot.linkTarget,tooltip:wt.db.getTooltip(Ot.id)||"",domId:wt.db.lookUpDomId(Ot.id),haveCallback:Ot.haveCallback,width:Ot.type==="group"?500:void 0,dir:Ot.dir,type:Ot.type,props:Ot.props,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Dt.labelStyle,shape:Jt,labelText:Bt,rx:Yt,ry:Yt,class:Rt,style:Dt.style,id:Ot.id,domId:wt.db.lookUpDomId(Ot.id),width:Ot.type==="group"?500:void 0,type:Ot.type,dir:Ot.dir,props:Ot.props,padding:getConfig$1().flowchart.padding})})},addEdges=function(nt,rt,it){log$1.info("abc78 edges = ",nt);let st=0,bt={},wt,Et;if(nt.defaultStyle!==void 0){const kt=getStylesFromArray(nt.defaultStyle);wt=kt.style,Et=kt.labelStyle}nt.forEach(function(kt){st++;var Lt="L-"+kt.start+"-"+kt.end;bt[Lt]===void 0?(bt[Lt]=0,log$1.info("abc78 new entry",Lt,bt[Lt])):(bt[Lt]++,log$1.info("abc78 new entry",Lt,bt[Lt]));let Ot=Lt+"-"+bt[Lt];log$1.info("abc78 new link id to be used is",Lt,Ot,bt[Lt]);var Rt="LS-"+kt.start,Dt="LE-"+kt.end;const Bt={style:"",labelStyle:""};switch(Bt.minlen=kt.length||1,kt.type==="arrow_open"?Bt.arrowhead="none":Bt.arrowhead="normal",Bt.arrowTypeStart="arrow_open",Bt.arrowTypeEnd="arrow_open",kt.type){case"double_arrow_cross":Bt.arrowTypeStart="arrow_cross";case"arrow_cross":Bt.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":Bt.arrowTypeStart="arrow_point";case"arrow_point":Bt.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":Bt.arrowTypeStart="arrow_circle";case"arrow_circle":Bt.arrowTypeEnd="arrow_circle";break}let Ft="",Yt="";switch(kt.stroke){case"normal":Ft="fill:none;",wt!==void 0&&(Ft=wt),Et!==void 0&&(Yt=Et),Bt.thickness="normal",Bt.pattern="solid";break;case"dotted":Bt.thickness="normal",Bt.pattern="dotted",Bt.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Bt.thickness="thick",Bt.pattern="solid",Bt.style="stroke-width: 3.5px;fill:none;";break}if(kt.style!==void 0){const Jt=getStylesFromArray(kt.style);Ft=Jt.style,Yt=Jt.labelStyle}Bt.style=Bt.style+=Ft,Bt.labelStyle=Bt.labelStyle+=Yt,kt.interpolate!==void 0?Bt.curve=interpolateToCurve(kt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Bt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Bt.curve=interpolateToCurve(conf$6.curve,curveLinear),kt.text===void 0?kt.style!==void 0&&(Bt.arrowheadStyle="fill: #333"):(Bt.arrowheadStyle="fill: #333",Bt.labelpos="c"),Bt.labelType="text",Bt.label=kt.text.replace(common$1.lineBreakRegex,`
`),kt.style===void 0&&(Bt.style=Bt.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),Bt.labelStyle=Bt.labelStyle.replace("color:","fill:"),Bt.id=Ot,Bt.classes="flowchart-link "+Rt+" "+Dt,rt.setEdge(kt.start,kt.end,Bt,st)})},getClasses$2=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch{return}},draw$9=function(nt,rt,it,st){log$1.info("Drawing flowchart"),st.db.clear(),flowDb.setGen("gen-2"),st.parser.parse(nt);let bt=st.db.getDirection();bt===void 0&&(bt="TD");const{securityLevel:wt,flowchart:Et}=getConfig$1(),kt=Et.nodeSpacing||50,Lt=Et.rankSpacing||50;let Ot;wt==="sandbox"&&(Ot=select("#i"+rt));const Rt=select(wt==="sandbox"?Ot.nodes()[0].contentDocument.body:"body"),Dt=wt==="sandbox"?Ot.nodes()[0].contentDocument:document,Bt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:bt,nodesep:kt,ranksep:Lt,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let Ft;const Yt=st.db.getSubGraphs();log$1.info("Subgraphs - ",Yt);for(let hn=Yt.length-1;hn>=0;hn--)Ft=Yt[hn],log$1.info("Subgraph - ",Ft),st.db.addVertex(Ft.id,Ft.title,"group",void 0,Ft.classes,Ft.dir);const Jt=st.db.getVertices(),Wt=st.db.getEdges();log$1.info(Wt);let Qt=0;for(Qt=Yt.length-1;Qt>=0;Qt--){Ft=Yt[Qt],selectAll("cluster").append("text");for(let hn=0;hn<Ft.nodes.length;hn++)log$1.info("Setting up subgraphs",Ft.nodes[hn],Ft.id),Bt.setParent(Ft.nodes[hn],Ft.id)}addVertices(Jt,Bt,rt,Rt,Dt,st),addEdges(Wt,Bt);const rn=Rt.select(`[id="${rt}"]`),sn=Rt.select("#"+rt+" g");if(render$1(sn,Bt,["point","circle","cross"],"flowchart",rt),utils.insertTitle(rn,"flowchartTitleText",Et.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox$1(Bt,rn,Et.diagramPadding,Et.useMaxWidth),st.db.indexNodes("subGraph"+Qt),!Et.htmlLabels){const hn=Dt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const mn of hn){const Cn=mn.getBBox(),Tn=Dt.createElementNS("http://www.w3.org/2000/svg","rect");Tn.setAttribute("rx",0),Tn.setAttribute("ry",0),Tn.setAttribute("width",Cn.width),Tn.setAttribute("height",Cn.height),mn.insertBefore(Tn,mn.firstChild)}}Object.keys(Jt).forEach(function(hn){const mn=Jt[hn];if(mn.link){const Cn=select("#"+rt+' [id="'+hn+'"]');if(Cn){const Tn=Dt.createElementNS("http://www.w3.org/2000/svg","a");Tn.setAttributeNS("http://www.w3.org/2000/svg","class",mn.classes.join(" ")),Tn.setAttributeNS("http://www.w3.org/2000/svg","href",mn.link),Tn.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),wt==="sandbox"?Tn.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):mn.linkTarget&&Tn.setAttributeNS("http://www.w3.org/2000/svg","target",mn.linkTarget);const kn=Cn.insert(function(){return Tn},":first-child"),In=Cn.select(".label-container");In&&kn.append(function(){return In.node()});const Ln=Cn.select(".label");Ln&&kn.append(function(){return Ln.node()})}}})},flowRendererV2={setConf:setConf$6,addVertices,addEdges,getClasses:getClasses$2,draw:draw$9};var parser$6=function(){var nt=function(Tn,kn,In,Ln){for(In=In||{},Ln=Tn.length;Ln--;In[Tn[Ln]]=kn);return In},rt=[1,3],it=[1,5],st=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],bt=[1,15],wt=[1,16],Et=[1,17],kt=[1,18],Lt=[1,19],Ot=[1,20],Rt=[1,21],Dt=[1,22],Bt=[1,23],Ft=[1,24],Yt=[1,25],Jt=[1,26],Wt=[1,27],Qt=[1,29],rn=[1,31],sn=[1,34],on=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],hn={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(kn,In,Ln,pn,Hn,yn,mr){var vn=yn.length-1;switch(Hn){case 2:return yn[vn-1];case 3:this.$=[];break;case 4:yn[vn-1].push(yn[vn]),this.$=yn[vn-1];break;case 5:case 6:this.$=yn[vn];break;case 7:case 8:this.$=[];break;case 9:pn.setDateFormat(yn[vn].substr(11)),this.$=yn[vn].substr(11);break;case 10:pn.enableInclusiveEndDates(),this.$=yn[vn].substr(18);break;case 11:pn.TopAxis(),this.$=yn[vn].substr(8);break;case 12:pn.setAxisFormat(yn[vn].substr(11)),this.$=yn[vn].substr(11);break;case 13:pn.setTickInterval(yn[vn].substr(13)),this.$=yn[vn].substr(13);break;case 14:pn.setExcludes(yn[vn].substr(9)),this.$=yn[vn].substr(9);break;case 15:pn.setIncludes(yn[vn].substr(9)),this.$=yn[vn].substr(9);break;case 16:pn.setTodayMarker(yn[vn].substr(12)),this.$=yn[vn].substr(12);break;case 17:pn.setDiagramTitle(yn[vn].substr(6)),this.$=yn[vn].substr(6);break;case 18:this.$=yn[vn].trim(),pn.setAccTitle(this.$);break;case 19:case 20:this.$=yn[vn].trim(),pn.setAccDescription(this.$);break;case 21:pn.addSection(yn[vn].substr(8)),this.$=yn[vn].substr(8);break;case 23:pn.addTask(yn[vn-1],yn[vn]),this.$="task";break;case 27:this.$=yn[vn-1],pn.setClickEvent(yn[vn-1],yn[vn],null);break;case 28:this.$=yn[vn-2],pn.setClickEvent(yn[vn-2],yn[vn-1],yn[vn]);break;case 29:this.$=yn[vn-2],pn.setClickEvent(yn[vn-2],yn[vn-1],null),pn.setLink(yn[vn-2],yn[vn]);break;case 30:this.$=yn[vn-3],pn.setClickEvent(yn[vn-3],yn[vn-2],yn[vn-1]),pn.setLink(yn[vn-3],yn[vn]);break;case 31:this.$=yn[vn-2],pn.setClickEvent(yn[vn-2],yn[vn],null),pn.setLink(yn[vn-2],yn[vn-1]);break;case 32:this.$=yn[vn-3],pn.setClickEvent(yn[vn-3],yn[vn-1],yn[vn]),pn.setLink(yn[vn-3],yn[vn-2]);break;case 33:this.$=yn[vn-1],pn.setLink(yn[vn-1],yn[vn]);break;case 34:case 40:this.$=yn[vn-1]+" "+yn[vn];break;case 35:case 36:case 38:this.$=yn[vn-2]+" "+yn[vn-1]+" "+yn[vn];break;case 37:case 39:this.$=yn[vn-3]+" "+yn[vn-2]+" "+yn[vn-1]+" "+yn[vn];break;case 41:pn.parseDirective("%%{","open_directive");break;case 42:pn.parseDirective(yn[vn],"type_directive");break;case 43:yn[vn]=yn[vn].trim().replace(/'/g,'"'),pn.parseDirective(yn[vn],"arg_directive");break;case 44:pn.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:rt,30:4,40:it},{1:[3]},{3:6,4:2,5:rt,30:4,40:it},nt(st,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:bt,13:wt,14:Et,15:kt,16:Lt,17:Ot,18:Rt,19:Dt,20:Bt,21:Ft,23:Yt,25:Jt,26:Wt,27:28,28:Qt,30:4,35:rn,40:it},{32:32,33:[1,33],43:sn},nt([33,43],[2,42]),nt(st,[2,8],{1:[2,2]}),nt(st,[2,4]),{4:30,10:35,12:bt,13:wt,14:Et,15:kt,16:Lt,17:Ot,18:Rt,19:Dt,20:Bt,21:Ft,23:Yt,25:Jt,26:Wt,27:28,28:Qt,30:4,35:rn,40:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,9]),nt(st,[2,10]),nt(st,[2,11]),nt(st,[2,12]),nt(st,[2,13]),nt(st,[2,14]),nt(st,[2,15]),nt(st,[2,16]),nt(st,[2,17]),{22:[1,36]},{24:[1,37]},nt(st,[2,20]),nt(st,[2,21]),nt(st,[2,22]),{29:[1,38]},nt(st,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},nt(st,[2,5]),nt(st,[2,18]),nt(st,[2,19]),nt(st,[2,23]),nt(st,[2,27],{37:[1,44],38:[1,45]}),nt(st,[2,33],{36:[1,46]}),nt(on,[2,25]),{32:47,43:sn},{43:[2,43]},nt(st,[2,28],{38:[1,48]}),nt(st,[2,29]),nt(st,[2,31],{37:[1,49]}),{11:[1,50]},nt(st,[2,30]),nt(st,[2,32]),nt(on,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(kn,In){if(In.recoverable)this.trace(kn);else{var Ln=new Error(kn);throw Ln.hash=In,Ln}},parse:function(kn){var In=this,Ln=[0],pn=[],Hn=[null],yn=[],mr=this.table,vn="",yr=0,Tr=0,Mr=2,rr=1,wr=yn.slice.call(arguments,1),fr=Object.create(this.lexer),gr={yy:{}};for(var Lr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Lr)&&(gr.yy[Lr]=this.yy[Lr]);fr.setInput(kn,gr.yy),gr.yy.lexer=fr,gr.yy.parser=this,typeof fr.yylloc>"u"&&(fr.yylloc={});var Pr=fr.yylloc;yn.push(Pr);var lr=fr.options&&fr.options.ranges;typeof gr.yy.parseError=="function"?this.parseError=gr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function qr(){var cr;return cr=pn.pop()||fr.lex()||rr,typeof cr!="number"&&(cr instanceof Array&&(pn=cr,cr=pn.pop()),cr=In.symbols_[cr]||cr),cr}for(var sr,pr,Er,ir,Pn={},nn,fn,cn,Nn;;){if(pr=Ln[Ln.length-1],this.defaultActions[pr]?Er=this.defaultActions[pr]:((sr===null||typeof sr>"u")&&(sr=qr()),Er=mr[pr]&&mr[pr][sr]),typeof Er>"u"||!Er.length||!Er[0]){var On="";Nn=[];for(nn in mr[pr])this.terminals_[nn]&&nn>Mr&&Nn.push("'"+this.terminals_[nn]+"'");fr.showPosition?On="Parse error on line "+(yr+1)+`:
`+fr.showPosition()+`
Expecting `+Nn.join(", ")+", got '"+(this.terminals_[sr]||sr)+"'":On="Parse error on line "+(yr+1)+": Unexpected "+(sr==rr?"end of input":"'"+(this.terminals_[sr]||sr)+"'"),this.parseError(On,{text:fr.match,token:this.terminals_[sr]||sr,line:fr.yylineno,loc:Pr,expected:Nn})}if(Er[0]instanceof Array&&Er.length>1)throw new Error("Parse Error: multiple actions possible at state: "+pr+", token: "+sr);switch(Er[0]){case 1:Ln.push(sr),Hn.push(fr.yytext),yn.push(fr.yylloc),Ln.push(Er[1]),sr=null,Tr=fr.yyleng,vn=fr.yytext,yr=fr.yylineno,Pr=fr.yylloc;break;case 2:if(fn=this.productions_[Er[1]][1],Pn.$=Hn[Hn.length-fn],Pn._$={first_line:yn[yn.length-(fn||1)].first_line,last_line:yn[yn.length-1].last_line,first_column:yn[yn.length-(fn||1)].first_column,last_column:yn[yn.length-1].last_column},lr&&(Pn._$.range=[yn[yn.length-(fn||1)].range[0],yn[yn.length-1].range[1]]),ir=this.performAction.apply(Pn,[vn,Tr,yr,gr.yy,Er[1],Hn,yn].concat(wr)),typeof ir<"u")return ir;fn&&(Ln=Ln.slice(0,-1*fn*2),Hn=Hn.slice(0,-1*fn),yn=yn.slice(0,-1*fn)),Ln.push(this.productions_[Er[1]][0]),Hn.push(Pn.$),yn.push(Pn._$),cn=mr[Ln[Ln.length-2]][Ln[Ln.length-1]],Ln.push(cn);break;case 3:return!0}}return!0}},mn=function(){var Tn={EOF:1,parseError:function(In,Ln){if(this.yy.parser)this.yy.parser.parseError(In,Ln);else throw new Error(In)},setInput:function(kn,In){return this.yy=In||this.yy||{},this._input=kn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var kn=this._input[0];this.yytext+=kn,this.yyleng++,this.offset++,this.match+=kn,this.matched+=kn;var In=kn.match(/(?:\r\n?|\n).*/g);return In?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),kn},unput:function(kn){var In=kn.length,Ln=kn.split(/(?:\r\n?|\n)/g);this._input=kn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-In),this.offset-=In;var pn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ln.length-1&&(this.yylineno-=Ln.length-1);var Hn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ln?(Ln.length===pn.length?this.yylloc.first_column:0)+pn[pn.length-Ln.length].length-Ln[0].length:this.yylloc.first_column-In},this.options.ranges&&(this.yylloc.range=[Hn[0],Hn[0]+this.yyleng-In]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(kn){this.unput(this.match.slice(kn))},pastInput:function(){var kn=this.matched.substr(0,this.matched.length-this.match.length);return(kn.length>20?"...":"")+kn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var kn=this.match;return kn.length<20&&(kn+=this._input.substr(0,20-kn.length)),(kn.substr(0,20)+(kn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var kn=this.pastInput(),In=new Array(kn.length+1).join("-");return kn+this.upcomingInput()+`
`+In+"^"},test_match:function(kn,In){var Ln,pn,Hn;if(this.options.backtrack_lexer&&(Hn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Hn.yylloc.range=this.yylloc.range.slice(0))),pn=kn[0].match(/(?:\r\n?|\n).*/g),pn&&(this.yylineno+=pn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pn?pn[pn.length-1].length-pn[pn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+kn[0].length},this.yytext+=kn[0],this.match+=kn[0],this.matches=kn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(kn[0].length),this.matched+=kn[0],Ln=this.performAction.call(this,this.yy,this,In,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ln)return Ln;if(this._backtrack){for(var yn in Hn)this[yn]=Hn[yn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var kn,In,Ln,pn;this._more||(this.yytext="",this.match="");for(var Hn=this._currentRules(),yn=0;yn<Hn.length;yn++)if(Ln=this._input.match(this.rules[Hn[yn]]),Ln&&(!In||Ln[0].length>In[0].length)){if(In=Ln,pn=yn,this.options.backtrack_lexer){if(kn=this.test_match(Ln,Hn[yn]),kn!==!1)return kn;if(this._backtrack){In=!1;continue}else return!1}else if(!this.options.flex)break}return In?(kn=this.test_match(In,Hn[pn]),kn!==!1?kn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var In=this.next();return In||this.lex()},begin:function(In){this.conditionStack.push(In)},popState:function(){var In=this.conditionStack.length-1;return In>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(In){return In=this.conditionStack.length-1-Math.abs(In||0),In>=0?this.conditionStack[In]:"INITIAL"},pushState:function(In){this.begin(In)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(In,Ln,pn,Hn){switch(pn){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return Tn}();hn.lexer=mn;function Cn(){this.yy={}}return Cn.prototype=hn,hn.Parser=Cn,new Cn}();parser$6.parser=parser$6;const ganttParser=parser$6,ganttDetector=nt=>nt.match(/^\s*gantt/)!==null;let dateFormat="",axisFormat="",tickInterval,todayMarker="",includes=[],excludes=[],links={},sections$2=[],tasks$1=[],currentSection$1="";const tags=["active","done","crit","milestone"];let funs=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0;const parseDirective$6=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear$5=function(){sections$2=[],tasks$1=[],currentSection$1="",funs=[],taskCnt=0,lastTask=void 0,lastTaskID=void 0,rawTasks$1=[],dateFormat="",axisFormat="",tickInterval=void 0,todayMarker="",includes=[],excludes=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0,links={},clear$g()},setAxisFormat=function(nt){axisFormat=nt},getAxisFormat=function(){return axisFormat},setTickInterval=function(nt){tickInterval=nt},getTickInterval=function(){return tickInterval},setTodayMarker=function(nt){todayMarker=nt},getTodayMarker=function(){return todayMarker},setDateFormat=function(nt){dateFormat=nt},enableInclusiveEndDates=function(){inclusiveEndDates=!0},endDatesAreInclusive=function(){return inclusiveEndDates},enableTopAxis=function(){topAxis=!0},topAxisEnabled=function(){return topAxis},getDateFormat=function(){return dateFormat},setIncludes=function(nt){includes=nt.toLowerCase().split(/[\s,]+/)},getIncludes=function(){return includes},setExcludes=function(nt){excludes=nt.toLowerCase().split(/[\s,]+/)},getExcludes=function(){return excludes},getLinks=function(){return links},addSection$2=function(nt){currentSection$1=nt,sections$2.push(nt)},getSections$2=function(){return sections$2},getTasks$1=function(){let nt=compileTasks$1();const rt=10;let it=0;for(;!nt&&it<rt;)nt=compileTasks$1(),it++;return tasks$1=rawTasks$1,tasks$1},isInvalidDate=function(nt,rt,it,st){return st.includes(nt.format(rt.trim()))?!1:nt.isoWeekday()>=6&&it.includes("weekends")||it.includes(nt.format("dddd").toLowerCase())?!0:it.includes(nt.format(rt.trim()))},checkTaskDates=function(nt,rt,it,st){if(!it.length||nt.manualEndTime)return;let bt=moment(nt.startTime,rt,!0);bt.add(1,"d");let wt=moment(nt.endTime,rt,!0),Et=fixTaskDates(bt,wt,rt,it,st);nt.endTime=wt.toDate(),nt.renderEndTime=Et},fixTaskDates=function(nt,rt,it,st,bt){let wt=!1,Et=null;for(;nt<=rt;)wt||(Et=rt.toDate()),wt=isInvalidDate(nt,it,st,bt),wt&&rt.add(1,"d"),nt.add(1,"d");return Et},getStartDate=function(nt,rt,it){it=it.trim();const bt=/^after\s+([\d\w- ]+)/.exec(it.trim());if(bt!==null){let Et=null;if(bt[1].split(" ").forEach(function(kt){let Lt=findTaskById(kt);Lt!==void 0&&(Et?Lt.endTime>Et.endTime&&(Et=Lt):Et=Lt)}),Et)return Et.endTime;{const kt=new Date;return kt.setHours(0,0,0,0),kt}}let wt=moment(it,rt.trim(),!0);if(wt.isValid())return wt.toDate();{log$1.debug("Invalid date:"+it),log$1.debug("With date format:"+rt.trim());const Et=new Date(it);if(Et===void 0||isNaN(Et.getTime()))throw new Error("Invalid date:"+it);return Et}},parseDuration=function(nt){const rt=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(nt.trim());return rt!==null?moment.duration(Number.parseFloat(rt[1]),rt[2]):moment.duration.invalid()},getEndDate=function(nt,rt,it,st=!1){it=it.trim();let bt=moment(it,rt.trim(),!0);if(bt.isValid())return st&&bt.add(1,"d"),bt.toDate();const wt=moment(nt),Et=parseDuration(it);return Et.isValid()&&wt.add(Et),wt.toDate()};let taskCnt=0;const parseId=function(nt){return nt===void 0?(taskCnt=taskCnt+1,"task"+taskCnt):nt},compileData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const st=it.split(","),bt={};getTaskTags(st,bt,tags);for(let Et=0;Et<st.length;Et++)st[Et]=st[Et].trim();let wt="";switch(st.length){case 1:bt.id=parseId(),bt.startTime=nt.endTime,wt=st[0];break;case 2:bt.id=parseId(),bt.startTime=getStartDate(void 0,dateFormat,st[0]),wt=st[1];break;case 3:bt.id=parseId(st[0]),bt.startTime=getStartDate(void 0,dateFormat,st[1]),wt=st[2];break}return wt&&(bt.endTime=getEndDate(bt.startTime,dateFormat,wt,inclusiveEndDates),bt.manualEndTime=moment(wt,"YYYY-MM-DD",!0).isValid(),checkTaskDates(bt,dateFormat,excludes,includes)),bt},parseData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const st=it.split(","),bt={};getTaskTags(st,bt,tags);for(let wt=0;wt<st.length;wt++)st[wt]=st[wt].trim();switch(st.length){case 1:bt.id=parseId(),bt.startTime={type:"prevTaskEnd",id:nt},bt.endTime={data:st[0]};break;case 2:bt.id=parseId(),bt.startTime={type:"getStartDate",startData:st[0]},bt.endTime={data:st[1]};break;case 3:bt.id=parseId(st[0]),bt.startTime={type:"getStartDate",startData:st[1]},bt.endTime={data:st[2]};break}return bt};let lastTask,lastTaskID,rawTasks$1=[];const taskDb={},addTask$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:rt},task:nt,classes:[]},st=parseData(lastTaskID,rt);it.raw.startTime=st.startTime,it.raw.endTime=st.endTime,it.id=st.id,it.prevTaskId=lastTaskID,it.active=st.active,it.done=st.done,it.crit=st.crit,it.milestone=st.milestone,it.order=lastOrder,lastOrder++;const bt=rawTasks$1.push(it);lastTaskID=it.id,taskDb[it.id]=bt-1},findTaskById=function(nt){const rt=taskDb[nt];return rawTasks$1[rt]},addTaskOrg$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,description:nt,task:nt,classes:[]},st=compileData(lastTask,rt);it.startTime=st.startTime,it.endTime=st.endTime,it.id=st.id,it.active=st.active,it.done=st.done,it.crit=st.crit,it.milestone=st.milestone,lastTask=it,tasks$1.push(it)},compileTasks$1=function(){const nt=function(it){const st=rawTasks$1[it];let bt="";switch(rawTasks$1[it].raw.startTime.type){case"prevTaskEnd":{const wt=findTaskById(st.prevTaskId);st.startTime=wt.endTime;break}case"getStartDate":bt=getStartDate(void 0,dateFormat,rawTasks$1[it].raw.startTime.startData),bt&&(rawTasks$1[it].startTime=bt);break}return rawTasks$1[it].startTime&&(rawTasks$1[it].endTime=getEndDate(rawTasks$1[it].startTime,dateFormat,rawTasks$1[it].raw.endTime.data,inclusiveEndDates),rawTasks$1[it].endTime&&(rawTasks$1[it].processed=!0,rawTasks$1[it].manualEndTime=moment(rawTasks$1[it].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),checkTaskDates(rawTasks$1[it],dateFormat,excludes,includes))),rawTasks$1[it].processed};let rt=!0;for(const[it,st]of rawTasks$1.entries())nt(it),rt=rt&&st.processed;return rt},setLink=function(nt,rt){let it=rt;getConfig$1().securityLevel!=="loose"&&(it=sanitizeUrl_1(rt)),nt.split(",").forEach(function(st){findTaskById(st)!==void 0&&(pushFun(st,()=>{window.open(it,"_self")}),links[st]=it)}),setClass(nt,"clickable")},setClass=function(nt,rt){nt.split(",").forEach(function(it){let st=findTaskById(it);st!==void 0&&st.classes.push(rt)})},setClickFun=function(nt,rt,it){if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let st=[];if(typeof it=="string"){st=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let wt=0;wt<st.length;wt++){let Et=st[wt].trim();Et.charAt(0)==='"'&&Et.charAt(Et.length-1)==='"'&&(Et=Et.substr(1,Et.length-2)),st[wt]=Et}}st.length===0&&st.push(nt),findTaskById(nt)!==void 0&&pushFun(nt,()=>{utils.runFunc(rt,...st)})},pushFun=function(nt,rt){funs.push(function(){const it=document.querySelector(`[id="${nt}"]`);it!==null&&it.addEventListener("click",function(){rt()})},function(){const it=document.querySelector(`[id="${nt}-text"]`);it!==null&&it.addEventListener("click",function(){rt()})})},setClickEvent=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFun(st,rt,it)}),setClass(nt,"clickable")},bindFunctions=function(nt){funs.forEach(function(rt){rt(nt)})},ganttDb={parseDirective:parseDirective$6,getConfig:()=>getConfig$1().gantt,clear:clear$5,setDateFormat,getDateFormat,enableInclusiveEndDates,endDatesAreInclusive,enableTopAxis,topAxisEnabled,setAxisFormat,getAxisFormat,setTickInterval,getTickInterval,setTodayMarker,getTodayMarker,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setAccDescription,getAccDescription,addSection:addSection$2,getSections:getSections$2,getTasks:getTasks$1,addTask:addTask$1,findTaskById,addTaskOrg:addTaskOrg$1,setIncludes,getIncludes,setExcludes,getExcludes,setClickEvent,setLink,getLinks,bindFunctions,parseDuration,isInvalidDate};function getTaskTags(nt,rt,it){let st=!0;for(;st;)st=!1,it.forEach(function(bt){const wt="^\\s*"+bt+"\\s*$",Et=new RegExp(wt);nt[0].match(Et)&&(rt[bt]=!0,nt.shift(1),st=!0)})}const setConf$5=function(){log$1.debug("Something is calling, setConf, remove the call")};let w;const draw$8=function(nt,rt,it,st){const bt=getConfig$1().gantt,wt=getConfig$1().securityLevel;let Et;wt==="sandbox"&&(Et=select("#i"+rt));const kt=select(wt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=wt==="sandbox"?Et.nodes()[0].contentDocument:document,Ot=Lt.getElementById(rt);w=Ot.parentElement.offsetWidth,w===void 0&&(w=1200),bt.useWidth!==void 0&&(w=bt.useWidth);const Rt=st.db.getTasks(),Dt=Rt.length*(bt.barHeight+bt.barGap)+2*bt.topPadding;Ot.setAttribute("viewBox","0 0 "+w+" "+Dt);const Bt=kt.select(`[id="${rt}"]`),Ft=time$1().domain([min$2(Rt,function(In){return In.startTime}),max$2(Rt,function(In){return In.endTime})]).rangeRound([0,w-bt.leftPadding-bt.rightPadding]);let Yt=[];for(const In of Rt)Yt.push(In.type);const Jt=Yt;Yt=Cn(Yt);function Wt(In,Ln){const pn=In.startTime,Hn=Ln.startTime;let yn=0;return pn>Hn?yn=1:pn<Hn&&(yn=-1),yn}Rt.sort(Wt),Qt(Rt,w,Dt),configureSvgSize(Bt,Dt,w,bt.useMaxWidth),Bt.append("text").text(st.db.getDiagramTitle()).attr("x",w/2).attr("y",bt.titleTopMargin).attr("class","titleText");function Qt(In,Ln,pn){const Hn=bt.barHeight,yn=Hn+bt.barGap,mr=bt.topPadding,vn=bt.leftPadding,yr=linear().domain([0,Yt.length]).range(["#00B9FA","#F95002"]).interpolate(interpolateHcl);sn(yn,mr,vn,Ln,pn,In,st.db.getExcludes(),st.db.getIncludes()),on(vn,mr,Ln,pn),rn(In,yn,mr,vn,Hn,yr,Ln),hn(yn,mr),mn(vn,mr,Ln,pn)}function rn(In,Ln,pn,Hn,yn,mr,vn){Bt.append("g").selectAll("rect").data(In).enter().append("rect").attr("x",0).attr("y",function(rr,wr){return wr=rr.order,wr*Ln+pn-2}).attr("width",function(){return vn-bt.rightPadding/2}).attr("height",Ln).attr("class",function(rr){for(const[wr,fr]of Yt.entries())if(rr.type===fr)return"section section"+wr%bt.numberSectionStyles;return"section section0"});const yr=Bt.append("g").selectAll("rect").data(In).enter(),Tr=st.db.getLinks();if(yr.append("rect").attr("id",function(rr){return rr.id}).attr("rx",3).attr("ry",3).attr("x",function(rr){return rr.milestone?Ft(rr.startTime)+Hn+.5*(Ft(rr.endTime)-Ft(rr.startTime))-.5*yn:Ft(rr.startTime)+Hn}).attr("y",function(rr,wr){return wr=rr.order,wr*Ln+pn}).attr("width",function(rr){return rr.milestone?yn:Ft(rr.renderEndTime||rr.endTime)-Ft(rr.startTime)}).attr("height",yn).attr("transform-origin",function(rr,wr){return wr=rr.order,(Ft(rr.startTime)+Hn+.5*(Ft(rr.endTime)-Ft(rr.startTime))).toString()+"px "+(wr*Ln+pn+.5*yn).toString()+"px"}).attr("class",function(rr){const wr="task";let fr="";rr.classes.length>0&&(fr=rr.classes.join(" "));let gr=0;for(const[Pr,lr]of Yt.entries())rr.type===lr&&(gr=Pr%bt.numberSectionStyles);let Lr="";return rr.active?rr.crit?Lr+=" activeCrit":Lr=" active":rr.done?rr.crit?Lr=" doneCrit":Lr=" done":rr.crit&&(Lr+=" crit"),Lr.length===0&&(Lr=" task"),rr.milestone&&(Lr=" milestone "+Lr),Lr+=gr,Lr+=" "+fr,wr+Lr}),yr.append("text").attr("id",function(rr){return rr.id+"-text"}).text(function(rr){return rr.task}).attr("font-size",bt.fontSize).attr("x",function(rr){let wr=Ft(rr.startTime),fr=Ft(rr.renderEndTime||rr.endTime);rr.milestone&&(wr+=.5*(Ft(rr.endTime)-Ft(rr.startTime))-.5*yn),rr.milestone&&(fr=wr+yn);const gr=this.getBBox().width;return gr>fr-wr?fr+gr+1.5*bt.leftPadding>vn?wr+Hn-5:fr+Hn+5:(fr-wr)/2+wr+Hn}).attr("y",function(rr,wr){return wr=rr.order,wr*Ln+bt.barHeight/2+(bt.fontSize/2-2)+pn}).attr("text-height",yn).attr("class",function(rr){const wr=Ft(rr.startTime);let fr=Ft(rr.endTime);rr.milestone&&(fr=wr+yn);const gr=this.getBBox().width;let Lr="";rr.classes.length>0&&(Lr=rr.classes.join(" "));let Pr=0;for(const[qr,sr]of Yt.entries())rr.type===sr&&(Pr=qr%bt.numberSectionStyles);let lr="";return rr.active&&(rr.crit?lr="activeCritText"+Pr:lr="activeText"+Pr),rr.done?rr.crit?lr=lr+" doneCritText"+Pr:lr=lr+" doneText"+Pr:rr.crit&&(lr=lr+" critText"+Pr),rr.milestone&&(lr+=" milestoneText"),gr>fr-wr?fr+gr+1.5*bt.leftPadding>vn?Lr+" taskTextOutsideLeft taskTextOutside"+Pr+" "+lr:Lr+" taskTextOutsideRight taskTextOutside"+Pr+" "+lr+" width-"+gr:Lr+" taskText taskText"+Pr+" "+lr+" width-"+gr}),getConfig$1().securityLevel==="sandbox"){let rr;rr=select("#i"+rt);const wr=rr.nodes()[0].contentDocument;yr.filter(function(fr){return Tr[fr.id]!==void 0}).each(function(fr){var gr=wr.querySelector("#"+fr.id),Lr=wr.querySelector("#"+fr.id+"-text");const Pr=gr.parentNode;var lr=wr.createElement("a");lr.setAttribute("xlink:href",Tr[fr.id]),lr.setAttribute("target","_top"),Pr.appendChild(lr),lr.appendChild(gr),lr.appendChild(Lr)})}}function sn(In,Ln,pn,Hn,yn,mr,vn,yr){const Tr=mr.reduce((Pr,{startTime:lr})=>Pr?Math.min(Pr,lr):lr,0),Mr=mr.reduce((Pr,{endTime:lr})=>Pr?Math.max(Pr,lr):lr,0),rr=st.db.getDateFormat();if(!Tr||!Mr)return;const wr=[];let fr=null,gr=moment(Tr);for(;gr.valueOf()<=Mr;)st.db.isInvalidDate(gr,rr,vn,yr)?fr?fr.end=gr.clone():fr={start:gr.clone(),end:gr.clone()}:fr&&(wr.push(fr),fr=null),gr.add(1,"d");Bt.append("g").selectAll("rect").data(wr).enter().append("rect").attr("id",function(Pr){return"exclude-"+Pr.start.format("YYYY-MM-DD")}).attr("x",function(Pr){return Ft(Pr.start)+pn}).attr("y",bt.gridLineStartPadding).attr("width",function(Pr){const lr=Pr.end.clone().add(1,"day");return Ft(lr)-Ft(Pr.start)}).attr("height",yn-Ln-bt.gridLineStartPadding).attr("transform-origin",function(Pr,lr){return(Ft(Pr.start)+pn+.5*(Ft(Pr.end)-Ft(Pr.start))).toString()+"px "+(lr*In+.5*yn).toString()+"px"}).attr("class","exclude-range")}function on(In,Ln,pn,Hn){let yn=axisBottom(Ft).tickSize(-Hn+Ln+bt.gridLineStartPadding).tickFormat(timeFormat(st.db.getAxisFormat()||bt.axisFormat||"%Y-%m-%d"));const vn=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(st.db.getTickInterval()||bt.tickInterval);if(vn!==null){const yr=vn[1];switch(vn[2]){case"minute":yn.ticks(timeMinute.every(yr));break;case"hour":yn.ticks(timeHour.every(yr));break;case"day":yn.ticks(timeDay.every(yr));break;case"week":yn.ticks(timeSunday.every(yr));break;case"month":yn.ticks(timeMonth.every(yr));break}}if(Bt.append("g").attr("class","grid").attr("transform","translate("+In+", "+(Hn-50)+")").call(yn).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),st.db.topAxisEnabled()||bt.topAxis){let yr=axisTop(Ft).tickSize(-Hn+Ln+bt.gridLineStartPadding).tickFormat(timeFormat(st.db.getAxisFormat()||bt.axisFormat||"%Y-%m-%d"));if(vn!==null){const Tr=vn[1];switch(vn[2]){case"minute":yr.ticks(timeMinute.every(Tr));break;case"hour":yr.ticks(timeHour.every(Tr));break;case"day":yr.ticks(timeDay.every(Tr));break;case"week":yr.ticks(timeSunday.every(Tr));break;case"month":yr.ticks(timeMonth.every(Tr));break}}Bt.append("g").attr("class","grid").attr("transform","translate("+In+", "+Ln+")").call(yr).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function hn(In,Ln){const pn=[];let Hn=0;for(const[yn,mr]of Yt.entries())pn[yn]=[mr,kn(mr,Jt)];Bt.append("g").selectAll("text").data(pn).enter().append(function(yn){const mr=yn[0].split(common$1.lineBreakRegex),vn=-(mr.length-1)/2,yr=Lt.createElementNS("http://www.w3.org/2000/svg","text");yr.setAttribute("dy",vn+"em");for(const[Tr,Mr]of mr.entries()){const rr=Lt.createElementNS("http://www.w3.org/2000/svg","tspan");rr.setAttribute("alignment-baseline","central"),rr.setAttribute("x","10"),Tr>0&&rr.setAttribute("dy","1em"),rr.textContent=Mr,yr.appendChild(rr)}return yr}).attr("x",10).attr("y",function(yn,mr){if(mr>0)for(let vn=0;vn<mr;vn++)return Hn+=pn[mr-1][1],yn[1]*In/2+Hn*In+Ln;else return yn[1]*In/2+Ln}).attr("font-size",bt.sectionFontSize).attr("font-size",bt.sectionFontSize).attr("class",function(yn){for(const[mr,vn]of Yt.entries())if(yn[0]===vn)return"sectionTitle sectionTitle"+mr%bt.numberSectionStyles;return"sectionTitle"})}function mn(In,Ln,pn,Hn){const yn=st.db.getTodayMarker();if(yn==="off")return;const mr=Bt.append("g").attr("class","today"),vn=new Date,yr=mr.append("line");yr.attr("x1",Ft(vn)+In).attr("x2",Ft(vn)+In).attr("y1",bt.titleTopMargin).attr("y2",Hn-bt.titleTopMargin).attr("class","today"),yn!==""&&yr.attr("style",yn.replace(/,/g,";"))}function Cn(In){const Ln={},pn=[];for(let Hn=0,yn=In.length;Hn<yn;++Hn)Object.prototype.hasOwnProperty.call(Ln,In[Hn])||(Ln[In[Hn]]=!0,pn.push(In[Hn]));return pn}function Tn(In){let Ln=In.length;const pn={};for(;Ln;)pn[In[--Ln]]=(pn[In[Ln]]||0)+1;return pn}function kn(In,Ln){return Tn(Ln)[In]||0}},ganttRenderer={setConf:setConf$5,draw:draw$8};var parser$5=function(){var nt=function(wt,Et,kt,Lt){for(kt=kt||{},Lt=wt.length;Lt--;kt[wt[Lt]]=Et);return kt},rt=[6,9,10],it={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(Et,kt,Lt,Ot,Rt,Dt,Bt){switch(Dt.length-1,Rt){case 1:return Ot;case 4:break;case 6:Ot.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},nt(rt,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},nt(rt,[2,3]),nt(rt,[2,4]),nt(rt,[2,5]),nt(rt,[2,6])],defaultActions:{4:[2,1]},parseError:function(Et,kt){if(kt.recoverable)this.trace(Et);else{var Lt=new Error(Et);throw Lt.hash=kt,Lt}},parse:function(Et){var kt=this,Lt=[0],Ot=[],Rt=[null],Dt=[],Bt=this.table,Ft="",Yt=0,Jt=0,Wt=2,Qt=1,rn=Dt.slice.call(arguments,1),sn=Object.create(this.lexer),on={yy:{}};for(var hn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hn)&&(on.yy[hn]=this.yy[hn]);sn.setInput(Et,on.yy),on.yy.lexer=sn,on.yy.parser=this,typeof sn.yylloc>"u"&&(sn.yylloc={});var mn=sn.yylloc;Dt.push(mn);var Cn=sn.options&&sn.options.ranges;typeof on.yy.parseError=="function"?this.parseError=on.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Tn(){var Mr;return Mr=Ot.pop()||sn.lex()||Qt,typeof Mr!="number"&&(Mr instanceof Array&&(Ot=Mr,Mr=Ot.pop()),Mr=kt.symbols_[Mr]||Mr),Mr}for(var kn,In,Ln,pn,Hn={},yn,mr,vn,yr;;){if(In=Lt[Lt.length-1],this.defaultActions[In]?Ln=this.defaultActions[In]:((kn===null||typeof kn>"u")&&(kn=Tn()),Ln=Bt[In]&&Bt[In][kn]),typeof Ln>"u"||!Ln.length||!Ln[0]){var Tr="";yr=[];for(yn in Bt[In])this.terminals_[yn]&&yn>Wt&&yr.push("'"+this.terminals_[yn]+"'");sn.showPosition?Tr="Parse error on line "+(Yt+1)+`:
`+sn.showPosition()+`
Expecting `+yr.join(", ")+", got '"+(this.terminals_[kn]||kn)+"'":Tr="Parse error on line "+(Yt+1)+": Unexpected "+(kn==Qt?"end of input":"'"+(this.terminals_[kn]||kn)+"'"),this.parseError(Tr,{text:sn.match,token:this.terminals_[kn]||kn,line:sn.yylineno,loc:mn,expected:yr})}if(Ln[0]instanceof Array&&Ln.length>1)throw new Error("Parse Error: multiple actions possible at state: "+In+", token: "+kn);switch(Ln[0]){case 1:Lt.push(kn),Rt.push(sn.yytext),Dt.push(sn.yylloc),Lt.push(Ln[1]),kn=null,Jt=sn.yyleng,Ft=sn.yytext,Yt=sn.yylineno,mn=sn.yylloc;break;case 2:if(mr=this.productions_[Ln[1]][1],Hn.$=Rt[Rt.length-mr],Hn._$={first_line:Dt[Dt.length-(mr||1)].first_line,last_line:Dt[Dt.length-1].last_line,first_column:Dt[Dt.length-(mr||1)].first_column,last_column:Dt[Dt.length-1].last_column},Cn&&(Hn._$.range=[Dt[Dt.length-(mr||1)].range[0],Dt[Dt.length-1].range[1]]),pn=this.performAction.apply(Hn,[Ft,Jt,Yt,on.yy,Ln[1],Rt,Dt].concat(rn)),typeof pn<"u")return pn;mr&&(Lt=Lt.slice(0,-1*mr*2),Rt=Rt.slice(0,-1*mr),Dt=Dt.slice(0,-1*mr)),Lt.push(this.productions_[Ln[1]][0]),Rt.push(Hn.$),Dt.push(Hn._$),vn=Bt[Lt[Lt.length-2]][Lt[Lt.length-1]],Lt.push(vn);break;case 3:return!0}}return!0}},st=function(){var wt={EOF:1,parseError:function(kt,Lt){if(this.yy.parser)this.yy.parser.parseError(kt,Lt);else throw new Error(kt)},setInput:function(Et,kt){return this.yy=kt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var kt=Et.match(/(?:\r\n?|\n).*/g);return kt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var kt=Et.length,Lt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-kt),this.offset-=kt;var Ot=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Lt.length-1&&(this.yylineno-=Lt.length-1);var Rt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Lt?(Lt.length===Ot.length?this.yylloc.first_column:0)+Ot[Ot.length-Lt.length].length-Lt[0].length:this.yylloc.first_column-kt},this.options.ranges&&(this.yylloc.range=[Rt[0],Rt[0]+this.yyleng-kt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),kt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+kt+"^"},test_match:function(Et,kt){var Lt,Ot,Rt;if(this.options.backtrack_lexer&&(Rt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Rt.yylloc.range=this.yylloc.range.slice(0))),Ot=Et[0].match(/(?:\r\n?|\n).*/g),Ot&&(this.yylineno+=Ot.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ot?Ot[Ot.length-1].length-Ot[Ot.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Lt=this.performAction.call(this,this.yy,this,kt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Lt)return Lt;if(this._backtrack){for(var Dt in Rt)this[Dt]=Rt[Dt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,kt,Lt,Ot;this._more||(this.yytext="",this.match="");for(var Rt=this._currentRules(),Dt=0;Dt<Rt.length;Dt++)if(Lt=this._input.match(this.rules[Rt[Dt]]),Lt&&(!kt||Lt[0].length>kt[0].length)){if(kt=Lt,Ot=Dt,this.options.backtrack_lexer){if(Et=this.test_match(Lt,Rt[Dt]),Et!==!1)return Et;if(this._backtrack){kt=!1;continue}else return!1}else if(!this.options.flex)break}return kt?(Et=this.test_match(kt,Rt[Ot]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var kt=this.next();return kt||this.lex()},begin:function(kt){this.conditionStack.push(kt)},popState:function(){var kt=this.conditionStack.length-1;return kt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(kt){return kt=this.conditionStack.length-1-Math.abs(kt||0),kt>=0?this.conditionStack[kt]:"INITIAL"},pushState:function(kt){this.begin(kt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(kt,Lt,Ot,Rt){switch(Ot){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return wt}();it.lexer=st;function bt(){this.yy={}}return bt.prototype=it,it.Parser=bt,new bt}();parser$5.parser=parser$5;const infoParser=parser$5;var message="",info=!1;const setMessage=nt=>{log$1.debug("Setting message to: "+nt),message=nt},getMessage=()=>message,setInfo=nt=>{info=nt},getInfo=()=>info,infoDb={setMessage,getMessage,setInfo,getInfo,clear:clear$g},draw$7=(nt,rt,it)=>{try{log$1.debug(`Rendering info diagram
`+nt);const st=getConfig$1().securityLevel;let bt;st==="sandbox"&&(bt=select("#i"+rt));const Et=select(st==="sandbox"?bt.nodes()[0].contentDocument.body:"body").select("#"+rt);Et.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+it),Et.attr("height",100),Et.attr("width",400)}catch(st){log$1.error("Error while rendering info diagram"),log$1.error(st.message)}},infoRenderer={draw:draw$7},infoDetector=nt=>nt.match(/^\s*info/)!==null;var parser$4=function(){var nt=function(mn,Cn,Tn,kn){for(Tn=Tn||{},kn=mn.length;kn--;Tn[mn[kn]]=Cn);return Tn},rt=[1,4],it=[1,5],st=[1,6],bt=[1,7],wt=[1,9],Et=[1,11,13,15,17,19,20,26,27,28,29],kt=[2,5],Lt=[1,6,11,13,15,17,19,20,26,27,28,29],Ot=[26,27,28],Rt=[2,8],Dt=[1,18],Bt=[1,19],Ft=[1,20],Yt=[1,21],Jt=[1,22],Wt=[1,23],Qt=[1,28],rn=[6,26,27,28,29],sn={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(Cn,Tn,kn,In,Ln,pn,Hn){var yn=pn.length-1;switch(Ln){case 4:In.setShowData(!0);break;case 7:this.$=pn[yn-1];break;case 9:In.addSection(pn[yn-1],In.cleanupValue(pn[yn]));break;case 10:this.$=pn[yn].trim(),In.setDiagramTitle(this.$);break;case 11:this.$=pn[yn].trim(),In.setAccTitle(this.$);break;case 12:case 13:this.$=pn[yn].trim(),In.setAccDescription(this.$);break;case 14:In.addSection(pn[yn].substr(8)),this.$=pn[yn].substr(8);break;case 21:In.parseDirective("%%{","open_directive");break;case 22:In.parseDirective(pn[yn],"type_directive");break;case 23:pn[yn]=pn[yn].trim().replace(/'/g,'"'),In.parseDirective(pn[yn],"arg_directive");break;case 24:In.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:rt,21:8,26:it,27:st,28:bt,29:wt},{1:[3]},{3:10,4:2,5:3,6:rt,21:8,26:it,27:st,28:bt,29:wt},{3:11,4:2,5:3,6:rt,21:8,26:it,27:st,28:bt,29:wt},nt(Et,kt,{7:12,8:[1,13]}),nt(Lt,[2,18]),nt(Lt,[2,19]),nt(Lt,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},nt(Ot,Rt,{21:8,9:16,10:17,5:24,1:[2,3],11:Dt,13:Bt,15:Ft,17:Yt,19:Jt,20:Wt,29:wt}),nt(Et,kt,{7:25}),{23:26,24:[1,27],32:Qt},nt([24,32],[2,22]),nt(Et,[2,6]),{4:29,26:it,27:st,28:bt},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},nt(Ot,[2,13]),nt(Ot,[2,14]),nt(Ot,[2,15]),nt(Ot,Rt,{21:8,9:16,10:17,5:24,1:[2,4],11:Dt,13:Bt,15:Ft,17:Yt,19:Jt,20:Wt,29:wt}),nt(rn,[2,16]),{25:34,31:[1,35]},nt(rn,[2,24]),nt(Et,[2,7]),nt(Ot,[2,9]),nt(Ot,[2,10]),nt(Ot,[2,11]),nt(Ot,[2,12]),{23:36,32:Qt},{32:[2,23]},nt(rn,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(Cn,Tn){if(Tn.recoverable)this.trace(Cn);else{var kn=new Error(Cn);throw kn.hash=Tn,kn}},parse:function(Cn){var Tn=this,kn=[0],In=[],Ln=[null],pn=[],Hn=this.table,yn="",mr=0,vn=0,yr=2,Tr=1,Mr=pn.slice.call(arguments,1),rr=Object.create(this.lexer),wr={yy:{}};for(var fr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,fr)&&(wr.yy[fr]=this.yy[fr]);rr.setInput(Cn,wr.yy),wr.yy.lexer=rr,wr.yy.parser=this,typeof rr.yylloc>"u"&&(rr.yylloc={});var gr=rr.yylloc;pn.push(gr);var Lr=rr.options&&rr.options.ranges;typeof wr.yy.parseError=="function"?this.parseError=wr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Pr(){var Nn;return Nn=In.pop()||rr.lex()||Tr,typeof Nn!="number"&&(Nn instanceof Array&&(In=Nn,Nn=In.pop()),Nn=Tn.symbols_[Nn]||Nn),Nn}for(var lr,qr,sr,pr,Er={},ir,Pn,nn,fn;;){if(qr=kn[kn.length-1],this.defaultActions[qr]?sr=this.defaultActions[qr]:((lr===null||typeof lr>"u")&&(lr=Pr()),sr=Hn[qr]&&Hn[qr][lr]),typeof sr>"u"||!sr.length||!sr[0]){var cn="";fn=[];for(ir in Hn[qr])this.terminals_[ir]&&ir>yr&&fn.push("'"+this.terminals_[ir]+"'");rr.showPosition?cn="Parse error on line "+(mr+1)+`:
`+rr.showPosition()+`
Expecting `+fn.join(", ")+", got '"+(this.terminals_[lr]||lr)+"'":cn="Parse error on line "+(mr+1)+": Unexpected "+(lr==Tr?"end of input":"'"+(this.terminals_[lr]||lr)+"'"),this.parseError(cn,{text:rr.match,token:this.terminals_[lr]||lr,line:rr.yylineno,loc:gr,expected:fn})}if(sr[0]instanceof Array&&sr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qr+", token: "+lr);switch(sr[0]){case 1:kn.push(lr),Ln.push(rr.yytext),pn.push(rr.yylloc),kn.push(sr[1]),lr=null,vn=rr.yyleng,yn=rr.yytext,mr=rr.yylineno,gr=rr.yylloc;break;case 2:if(Pn=this.productions_[sr[1]][1],Er.$=Ln[Ln.length-Pn],Er._$={first_line:pn[pn.length-(Pn||1)].first_line,last_line:pn[pn.length-1].last_line,first_column:pn[pn.length-(Pn||1)].first_column,last_column:pn[pn.length-1].last_column},Lr&&(Er._$.range=[pn[pn.length-(Pn||1)].range[0],pn[pn.length-1].range[1]]),pr=this.performAction.apply(Er,[yn,vn,mr,wr.yy,sr[1],Ln,pn].concat(Mr)),typeof pr<"u")return pr;Pn&&(kn=kn.slice(0,-1*Pn*2),Ln=Ln.slice(0,-1*Pn),pn=pn.slice(0,-1*Pn)),kn.push(this.productions_[sr[1]][0]),Ln.push(Er.$),pn.push(Er._$),nn=Hn[kn[kn.length-2]][kn[kn.length-1]],kn.push(nn);break;case 3:return!0}}return!0}},on=function(){var mn={EOF:1,parseError:function(Tn,kn){if(this.yy.parser)this.yy.parser.parseError(Tn,kn);else throw new Error(Tn)},setInput:function(Cn,Tn){return this.yy=Tn||this.yy||{},this._input=Cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Cn=this._input[0];this.yytext+=Cn,this.yyleng++,this.offset++,this.match+=Cn,this.matched+=Cn;var Tn=Cn.match(/(?:\r\n?|\n).*/g);return Tn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Cn},unput:function(Cn){var Tn=Cn.length,kn=Cn.split(/(?:\r\n?|\n)/g);this._input=Cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Tn),this.offset-=Tn;var In=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),kn.length-1&&(this.yylineno-=kn.length-1);var Ln=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:kn?(kn.length===In.length?this.yylloc.first_column:0)+In[In.length-kn.length].length-kn[0].length:this.yylloc.first_column-Tn},this.options.ranges&&(this.yylloc.range=[Ln[0],Ln[0]+this.yyleng-Tn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Cn){this.unput(this.match.slice(Cn))},pastInput:function(){var Cn=this.matched.substr(0,this.matched.length-this.match.length);return(Cn.length>20?"...":"")+Cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Cn=this.match;return Cn.length<20&&(Cn+=this._input.substr(0,20-Cn.length)),(Cn.substr(0,20)+(Cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Cn=this.pastInput(),Tn=new Array(Cn.length+1).join("-");return Cn+this.upcomingInput()+`
`+Tn+"^"},test_match:function(Cn,Tn){var kn,In,Ln;if(this.options.backtrack_lexer&&(Ln={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ln.yylloc.range=this.yylloc.range.slice(0))),In=Cn[0].match(/(?:\r\n?|\n).*/g),In&&(this.yylineno+=In.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:In?In[In.length-1].length-In[In.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Cn[0].length},this.yytext+=Cn[0],this.match+=Cn[0],this.matches=Cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Cn[0].length),this.matched+=Cn[0],kn=this.performAction.call(this,this.yy,this,Tn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),kn)return kn;if(this._backtrack){for(var pn in Ln)this[pn]=Ln[pn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Cn,Tn,kn,In;this._more||(this.yytext="",this.match="");for(var Ln=this._currentRules(),pn=0;pn<Ln.length;pn++)if(kn=this._input.match(this.rules[Ln[pn]]),kn&&(!Tn||kn[0].length>Tn[0].length)){if(Tn=kn,In=pn,this.options.backtrack_lexer){if(Cn=this.test_match(kn,Ln[pn]),Cn!==!1)return Cn;if(this._backtrack){Tn=!1;continue}else return!1}else if(!this.options.flex)break}return Tn?(Cn=this.test_match(Tn,Ln[In]),Cn!==!1?Cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Tn=this.next();return Tn||this.lex()},begin:function(Tn){this.conditionStack.push(Tn)},popState:function(){var Tn=this.conditionStack.length-1;return Tn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Tn){return Tn=this.conditionStack.length-1-Math.abs(Tn||0),Tn>=0?this.conditionStack[Tn]:"INITIAL"},pushState:function(Tn){this.begin(Tn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Tn,kn,In,Ln){switch(In){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return mn}();sn.lexer=on;function hn(){this.yy={}}return hn.prototype=sn,sn.Parser=hn,new hn}();parser$4.parser=parser$4;const pieParser=parser$4,pieDetector=nt=>nt.match(/^\s*pie/)!==null||nt.match(/^\s*bar/)!==null;let sections$1={},showData=!1;const parseDirective$5=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addSection$1=function(nt,rt){nt=common$1.sanitizeText(nt,getConfig$1()),sections$1[nt]===void 0&&(sections$1[nt]=rt,log$1.debug("Added new section :",nt))},getSections$1=()=>sections$1,setShowData=function(nt){showData=nt},getShowData=function(){return showData},cleanupValue=function(nt){return nt.substring(0,1)===":"&&(nt=nt.substring(1).trim()),Number(nt.trim())},clear$4=function(){sections$1={},showData=!1,clear$g()},pieDb={parseDirective:parseDirective$5,getConfig:()=>getConfig$1().pie,addSection:addSection$1,getSections:getSections$1,cleanupValue,clear:clear$4,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setShowData,getShowData,getAccDescription,setAccDescription};let conf$5=getConfig$1(),width;const height=450,draw$6=(nt,rt,it,st)=>{try{conf$5=getConfig$1(),log$1.debug(`Rendering info diagram
`+nt);const rn=getConfig$1().securityLevel;let sn;rn==="sandbox"&&(sn=select("#i"+rt));const on=select(rn==="sandbox"?sn.nodes()[0].contentDocument.body:"body"),hn=rn==="sandbox"?sn.nodes()[0].contentDocument:document;st.db.clear(),st.parser.parse(nt),log$1.debug("Parsed info diagram");const mn=hn.getElementById(rt);width=mn.parentElement.offsetWidth,width===void 0&&(width=1200),conf$5.useWidth!==void 0&&(width=conf$5.useWidth),conf$5.pie.useWidth!==void 0&&(width=conf$5.pie.useWidth);const Cn=on.select("#"+rt);configureSvgSize(Cn,height,width,conf$5.pie.useMaxWidth),mn.setAttribute("viewBox","0 0 "+width+" "+height);var bt=40,wt=18,Et=4,kt=Math.min(width,height)/2-bt,Lt=Cn.append("g").attr("transform","translate("+width/2+","+height/2+")"),Ot=st.db.getSections(),Rt=0;Object.keys(Ot).forEach(function(kn){Rt+=Ot[kn]});const Tn=conf$5.themeVariables;var Dt=[Tn.pie1,Tn.pie2,Tn.pie3,Tn.pie4,Tn.pie5,Tn.pie6,Tn.pie7,Tn.pie8,Tn.pie9,Tn.pie10,Tn.pie11,Tn.pie12],Bt=ordinal().range(Dt),Ft=Object.entries(Ot).map(function(kn,In){return{order:In,name:kn[0],value:kn[1]}}),Yt=pie().value(function(kn){return kn.value}).sort(function(kn,In){return kn.order-In.order}),Jt=Yt(Ft),Wt=arc().innerRadius(0).outerRadius(kt);Lt.selectAll("mySlices").data(Jt).enter().append("path").attr("d",Wt).attr("fill",function(kn){return Bt(kn.data.name)}).attr("class","pieCircle"),Lt.selectAll("mySlices").data(Jt).enter().append("text").text(function(kn){return(kn.data.value/Rt*100).toFixed(0)+"%"}).attr("transform",function(kn){return"translate("+Wt.centroid(kn)+")"}).style("text-anchor","middle").attr("class","slice"),Lt.append("text").text(st.db.getDiagramTitle()).attr("x",0).attr("y",-(height-50)/2).attr("class","pieTitleText");var Qt=Lt.selectAll(".legend").data(Bt.domain()).enter().append("g").attr("class","legend").attr("transform",function(kn,In){const Ln=wt+Et,pn=Ln*Bt.domain().length/2,Hn=12*wt,yn=In*Ln-pn;return"translate("+Hn+","+yn+")"});Qt.append("rect").attr("width",wt).attr("height",wt).style("fill",Bt).style("stroke",Bt),Qt.data(Jt).append("text").attr("x",wt+Et).attr("y",wt-Et).text(function(kn){return st.db.getShowData()||conf$5.showData||conf$5.pie.showData?kn.data.name+" ["+kn.data.value+"]":kn.data.name})}catch(rn){log$1.error("Error while rendering info diagram"),log$1.error(rn)}},pieRenderer={draw:draw$6};var parser$3=function(){var nt=function(qr,sr,pr,Er){for(pr=pr||{},Er=qr.length;Er--;pr[qr[Er]]=sr);return pr},rt=[1,3],it=[1,5],st=[1,6],bt=[1,7],wt=[1,8],Et=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],kt=[1,22],Lt=[2,13],Ot=[1,26],Rt=[1,27],Dt=[1,28],Bt=[1,29],Ft=[1,30],Yt=[1,31],Jt=[1,24],Wt=[1,32],Qt=[1,33],rn=[1,36],sn=[71,72],on=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],hn=[1,56],mn=[1,57],Cn=[1,58],Tn=[1,59],kn=[1,60],In=[1,61],Ln=[1,62],pn=[62,63],Hn=[1,74],yn=[1,70],mr=[1,71],vn=[1,72],yr=[1,73],Tr=[1,75],Mr=[1,79],rr=[1,80],wr=[1,77],fr=[1,78],gr=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Lr={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(sr,pr,Er,ir,Pn,nn,fn){var cn=nn.length-1;switch(Pn){case 6:this.$=nn[cn].trim(),ir.setAccTitle(this.$);break;case 7:case 8:this.$=nn[cn].trim(),ir.setAccDescription(this.$);break;case 9:ir.parseDirective("%%{","open_directive");break;case 10:ir.parseDirective(nn[cn],"type_directive");break;case 11:nn[cn]=nn[cn].trim().replace(/'/g,'"'),ir.parseDirective(nn[cn],"arg_directive");break;case 12:ir.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:ir.addRequirement(nn[cn-3],nn[cn-4]);break;case 20:ir.setNewReqId(nn[cn-2]);break;case 21:ir.setNewReqText(nn[cn-2]);break;case 22:ir.setNewReqRisk(nn[cn-2]);break;case 23:ir.setNewReqVerifyMethod(nn[cn-2]);break;case 26:this.$=ir.RequirementType.REQUIREMENT;break;case 27:this.$=ir.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=ir.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=ir.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=ir.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=ir.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=ir.RiskLevel.LOW_RISK;break;case 33:this.$=ir.RiskLevel.MED_RISK;break;case 34:this.$=ir.RiskLevel.HIGH_RISK;break;case 35:this.$=ir.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=ir.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=ir.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=ir.VerifyType.VERIFY_TEST;break;case 39:ir.addElement(nn[cn-3]);break;case 40:ir.setNewElementType(nn[cn-2]);break;case 41:ir.setNewElementDocRef(nn[cn-2]);break;case 44:ir.addRelationship(nn[cn-2],nn[cn],nn[cn-4]);break;case 45:ir.addRelationship(nn[cn-2],nn[cn-4],nn[cn]);break;case 46:this.$=ir.Relationships.CONTAINS;break;case 47:this.$=ir.Relationships.COPIES;break;case 48:this.$=ir.Relationships.DERIVES;break;case 49:this.$=ir.Relationships.SATISFIES;break;case 50:this.$=ir.Relationships.VERIFIES;break;case 51:this.$=ir.Relationships.REFINES;break;case 52:this.$=ir.Relationships.TRACES;break}},table:[{3:1,4:2,6:rt,9:4,14:it,16:st,18:bt,19:wt},{1:[3]},{3:10,4:2,5:[1,9],6:rt,9:4,14:it,16:st,18:bt,19:wt},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},nt(Et,[2,8]),{20:[2,9]},{3:16,4:2,6:rt,9:4,14:it,16:st,18:bt,19:wt},{1:[2,2]},{4:21,5:kt,7:17,8:Lt,9:4,14:it,16:st,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Ot,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Jt,71:Wt,72:Qt},{11:34,12:[1,35],22:rn},nt([12,22],[2,10]),nt(Et,[2,6]),nt(Et,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:kt,7:38,8:Lt,9:4,14:it,16:st,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Ot,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Jt,71:Wt,72:Qt},{4:21,5:kt,7:39,8:Lt,9:4,14:it,16:st,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Ot,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Jt,71:Wt,72:Qt},{4:21,5:kt,7:40,8:Lt,9:4,14:it,16:st,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Ot,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Jt,71:Wt,72:Qt},{4:21,5:kt,7:41,8:Lt,9:4,14:it,16:st,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Ot,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Jt,71:Wt,72:Qt},{4:21,5:kt,7:42,8:Lt,9:4,14:it,16:st,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Ot,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Jt,71:Wt,72:Qt},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},nt(sn,[2,26]),nt(sn,[2,27]),nt(sn,[2,28]),nt(sn,[2,29]),nt(sn,[2,30]),nt(sn,[2,31]),nt(on,[2,55]),nt(on,[2,56]),nt(Et,[2,4]),{13:51,21:[1,52]},nt(Et,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:hn,65:mn,66:Cn,67:Tn,68:kn,69:In,70:Ln},{61:63,64:hn,65:mn,66:Cn,67:Tn,68:kn,69:In,70:Ln},{11:64,22:rn},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},nt(pn,[2,46]),nt(pn,[2,47]),nt(pn,[2,48]),nt(pn,[2,49]),nt(pn,[2,50]),nt(pn,[2,51]),nt(pn,[2,52]),{63:[1,68]},nt(Et,[2,5]),{5:Hn,29:69,30:yn,33:mr,35:vn,37:yr,39:Tr},{5:Mr,39:rr,55:76,56:wr,58:fr},{32:81,71:Wt,72:Qt},{32:82,71:Wt,72:Qt},nt(gr,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:Hn,29:87,30:yn,33:mr,35:vn,37:yr,39:Tr},nt(gr,[2,25]),nt(gr,[2,39]),{31:[1,88]},{31:[1,89]},{5:Mr,39:rr,55:90,56:wr,58:fr},nt(gr,[2,43]),nt(gr,[2,44]),nt(gr,[2,45]),{32:91,71:Wt,72:Qt},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},nt(gr,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},nt(gr,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:Hn,29:116,30:yn,33:mr,35:vn,37:yr,39:Tr},{5:Hn,29:117,30:yn,33:mr,35:vn,37:yr,39:Tr},{5:Hn,29:118,30:yn,33:mr,35:vn,37:yr,39:Tr},{5:Hn,29:119,30:yn,33:mr,35:vn,37:yr,39:Tr},{5:Mr,39:rr,55:120,56:wr,58:fr},{5:Mr,39:rr,55:121,56:wr,58:fr},nt(gr,[2,20]),nt(gr,[2,21]),nt(gr,[2,22]),nt(gr,[2,23]),nt(gr,[2,40]),nt(gr,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(sr,pr){if(pr.recoverable)this.trace(sr);else{var Er=new Error(sr);throw Er.hash=pr,Er}},parse:function(sr){var pr=this,Er=[0],ir=[],Pn=[null],nn=[],fn=this.table,cn="",Nn=0,On=0,cr=2,Bn=1,Qn=nn.slice.call(arguments,1),Un=Object.create(this.lexer),or={yy:{}};for(var hr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hr)&&(or.yy[hr]=this.yy[hr]);Un.setInput(sr,or.yy),or.yy.lexer=Un,or.yy.parser=this,typeof Un.yylloc>"u"&&(Un.yylloc={});var kr=Un.yylloc;nn.push(kr);var xr=Un.options&&Un.options.ranges;typeof or.yy.parseError=="function"?this.parseError=or.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function br(){var Wn;return Wn=ir.pop()||Un.lex()||Bn,typeof Wn!="number"&&(Wn instanceof Array&&(ir=Wn,Wn=ir.pop()),Wn=pr.symbols_[Wn]||Wn),Wn}for(var hi,di,vi,Ti,ki={},Di,Ci,$r,An;;){if(di=Er[Er.length-1],this.defaultActions[di]?vi=this.defaultActions[di]:((hi===null||typeof hi>"u")&&(hi=br()),vi=fn[di]&&fn[di][hi]),typeof vi>"u"||!vi.length||!vi[0]){var Sn="";An=[];for(Di in fn[di])this.terminals_[Di]&&Di>cr&&An.push("'"+this.terminals_[Di]+"'");Un.showPosition?Sn="Parse error on line "+(Nn+1)+`:
`+Un.showPosition()+`
Expecting `+An.join(", ")+", got '"+(this.terminals_[hi]||hi)+"'":Sn="Parse error on line "+(Nn+1)+": Unexpected "+(hi==Bn?"end of input":"'"+(this.terminals_[hi]||hi)+"'"),this.parseError(Sn,{text:Un.match,token:this.terminals_[hi]||hi,line:Un.yylineno,loc:kr,expected:An})}if(vi[0]instanceof Array&&vi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+di+", token: "+hi);switch(vi[0]){case 1:Er.push(hi),Pn.push(Un.yytext),nn.push(Un.yylloc),Er.push(vi[1]),hi=null,On=Un.yyleng,cn=Un.yytext,Nn=Un.yylineno,kr=Un.yylloc;break;case 2:if(Ci=this.productions_[vi[1]][1],ki.$=Pn[Pn.length-Ci],ki._$={first_line:nn[nn.length-(Ci||1)].first_line,last_line:nn[nn.length-1].last_line,first_column:nn[nn.length-(Ci||1)].first_column,last_column:nn[nn.length-1].last_column},xr&&(ki._$.range=[nn[nn.length-(Ci||1)].range[0],nn[nn.length-1].range[1]]),Ti=this.performAction.apply(ki,[cn,On,Nn,or.yy,vi[1],Pn,nn].concat(Qn)),typeof Ti<"u")return Ti;Ci&&(Er=Er.slice(0,-1*Ci*2),Pn=Pn.slice(0,-1*Ci),nn=nn.slice(0,-1*Ci)),Er.push(this.productions_[vi[1]][0]),Pn.push(ki.$),nn.push(ki._$),$r=fn[Er[Er.length-2]][Er[Er.length-1]],Er.push($r);break;case 3:return!0}}return!0}},Pr=function(){var qr={EOF:1,parseError:function(pr,Er){if(this.yy.parser)this.yy.parser.parseError(pr,Er);else throw new Error(pr)},setInput:function(sr,pr){return this.yy=pr||this.yy||{},this._input=sr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var sr=this._input[0];this.yytext+=sr,this.yyleng++,this.offset++,this.match+=sr,this.matched+=sr;var pr=sr.match(/(?:\r\n?|\n).*/g);return pr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),sr},unput:function(sr){var pr=sr.length,Er=sr.split(/(?:\r\n?|\n)/g);this._input=sr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pr),this.offset-=pr;var ir=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Er.length-1&&(this.yylineno-=Er.length-1);var Pn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Er?(Er.length===ir.length?this.yylloc.first_column:0)+ir[ir.length-Er.length].length-Er[0].length:this.yylloc.first_column-pr},this.options.ranges&&(this.yylloc.range=[Pn[0],Pn[0]+this.yyleng-pr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(sr){this.unput(this.match.slice(sr))},pastInput:function(){var sr=this.matched.substr(0,this.matched.length-this.match.length);return(sr.length>20?"...":"")+sr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var sr=this.match;return sr.length<20&&(sr+=this._input.substr(0,20-sr.length)),(sr.substr(0,20)+(sr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var sr=this.pastInput(),pr=new Array(sr.length+1).join("-");return sr+this.upcomingInput()+`
`+pr+"^"},test_match:function(sr,pr){var Er,ir,Pn;if(this.options.backtrack_lexer&&(Pn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Pn.yylloc.range=this.yylloc.range.slice(0))),ir=sr[0].match(/(?:\r\n?|\n).*/g),ir&&(this.yylineno+=ir.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ir?ir[ir.length-1].length-ir[ir.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+sr[0].length},this.yytext+=sr[0],this.match+=sr[0],this.matches=sr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(sr[0].length),this.matched+=sr[0],Er=this.performAction.call(this,this.yy,this,pr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Er)return Er;if(this._backtrack){for(var nn in Pn)this[nn]=Pn[nn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var sr,pr,Er,ir;this._more||(this.yytext="",this.match="");for(var Pn=this._currentRules(),nn=0;nn<Pn.length;nn++)if(Er=this._input.match(this.rules[Pn[nn]]),Er&&(!pr||Er[0].length>pr[0].length)){if(pr=Er,ir=nn,this.options.backtrack_lexer){if(sr=this.test_match(Er,Pn[nn]),sr!==!1)return sr;if(this._backtrack){pr=!1;continue}else return!1}else if(!this.options.flex)break}return pr?(sr=this.test_match(pr,Pn[ir]),sr!==!1?sr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var pr=this.next();return pr||this.lex()},begin:function(pr){this.conditionStack.push(pr)},popState:function(){var pr=this.conditionStack.length-1;return pr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(pr){return pr=this.conditionStack.length-1-Math.abs(pr||0),pr>=0?this.conditionStack[pr]:"INITIAL"},pushState:function(pr){this.begin(pr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(pr,Er,ir,Pn){switch(ir){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return Er.yytext=Er.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return qr}();Lr.lexer=Pr;function lr(){this.yy={}}return lr.prototype=Lr,Lr.Parser=lr,new lr}();parser$3.parser=parser$3;const requirementParser=parser$3,requirementDetector=nt=>nt.match(/^\s*requirement(Diagram)?/)!==null;let relations=[],latestRequirement={},requirements={},latestElement={},elements={};const RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective$4=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRequirement=(nt,rt)=>(requirements[nt]===void 0&&(requirements[nt]={name:nt,type:rt,id:latestRequirement.id,text:latestRequirement.text,risk:latestRequirement.risk,verifyMethod:latestRequirement.verifyMethod}),latestRequirement={},requirements[nt]),getRequirements=()=>requirements,setNewReqId=nt=>{latestRequirement!==void 0&&(latestRequirement.id=nt)},setNewReqText=nt=>{latestRequirement!==void 0&&(latestRequirement.text=nt)},setNewReqRisk=nt=>{latestRequirement!==void 0&&(latestRequirement.risk=nt)},setNewReqVerifyMethod=nt=>{latestRequirement!==void 0&&(latestRequirement.verifyMethod=nt)},addElement=nt=>(elements[nt]===void 0&&(elements[nt]={name:nt,type:latestElement.type,docRef:latestElement.docRef},log$1.info("Added new requirement: ",nt)),latestElement={},elements[nt]),getElements=()=>elements,setNewElementType=nt=>{latestElement!==void 0&&(latestElement.type=nt)},setNewElementDocRef=nt=>{latestElement!==void 0&&(latestElement.docRef=nt)},addRelationship=(nt,rt,it)=>{relations.push({type:nt,src:rt,dst:it})},getRelationships=()=>relations,clear$3=()=>{relations=[],latestRequirement={},requirements={},latestElement={},elements={},clear$g()},requirementDb={RequirementType,RiskLevel,VerifyType,Relationships,parseDirective:parseDirective$4,getConfig:()=>getConfig$1().req,addRequirement,getRequirements,setNewReqId,setNewReqText,setNewReqRisk,setNewReqVerifyMethod,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addElement,getElements,setNewElementType,setNewElementDocRef,addRelationship,getRelationships,clear:clear$3},ReqMarkers={CONTAINS:"contains",ARROW:"arrow"},insertLineEndings=(nt,rt)=>{let it=nt.append("defs").append("marker").attr("id",ReqMarkers.CONTAINS+"_line_ending").attr("refX",0).attr("refY",rt.line_height/2).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("g");it.append("circle").attr("cx",rt.line_height/2).attr("cy",rt.line_height/2).attr("r",rt.line_height/2).attr("fill","none"),it.append("line").attr("x1",0).attr("x2",rt.line_height).attr("y1",rt.line_height/2).attr("y2",rt.line_height/2).attr("stroke-width",1),it.append("line").attr("y1",0).attr("y2",rt.line_height).attr("x1",rt.line_height/2).attr("x2",rt.line_height/2).attr("stroke-width",1),nt.append("defs").append("marker").attr("id",ReqMarkers.ARROW+"_line_ending").attr("refX",rt.line_height).attr("refY",.5*rt.line_height).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${rt.line_height},${rt.line_height/2}
      M${rt.line_height},${rt.line_height/2}
      L0,${rt.line_height}`).attr("stroke-width",1)},markers={ReqMarkers,insertLineEndings};let conf$4={},relCnt=0;const newRectNode=(nt,rt)=>nt.insert("rect","#"+rt).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",conf$4.rect_min_width+"px").attr("height",conf$4.rect_min_height+"px"),newTitleNode=(nt,rt,it)=>{let st=conf$4.rect_min_width/2,bt=nt.append("text").attr("class","req reqLabel reqTitle").attr("id",rt).attr("x",st).attr("y",conf$4.rect_padding).attr("dominant-baseline","hanging"),wt=0;it.forEach(Ot=>{wt==0?bt.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",0).text(Ot):bt.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",conf$4.line_height*.75).text(Ot),wt++});let Et=1.5*conf$4.rect_padding,kt=wt*conf$4.line_height*.75,Lt=Et+kt;return nt.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",conf$4.rect_min_width).attr("y1",Lt).attr("y2",Lt),{titleNode:bt,y:Lt}},newBodyNode=(nt,rt,it,st)=>{let bt=nt.append("text").attr("class","req reqLabel").attr("id",rt).attr("x",conf$4.rect_padding).attr("y",st).attr("dominant-baseline","hanging"),wt=0;const Et=30;let kt=[];return it.forEach(Lt=>{let Ot=Lt.length;for(;Ot>Et&&wt<3;){let Rt=Lt.substring(0,Et);Lt=Lt.substring(Et,Lt.length),Ot=Lt.length,kt[kt.length]=Rt,wt++}if(wt==3){let Rt=kt[kt.length-1];kt[kt.length-1]=Rt.substring(0,Rt.length-4)+"..."}else kt[kt.length]=Lt;wt=0}),kt.forEach(Lt=>{bt.append("tspan").attr("x",conf$4.rect_padding).attr("dy",conf$4.line_height).text(Lt)}),bt},addEdgeLabel=(nt,rt,it,st)=>{const bt=rt.node().getTotalLength(),wt=rt.node().getPointAtLength(bt*.5),Et="rel"+relCnt;relCnt++;const Lt=nt.append("text").attr("class","req relationshipLabel").attr("id",Et).attr("x",wt.x).attr("y",wt.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(st).node().getBBox();nt.insert("rect","#"+Et).attr("class","req reqLabelBox").attr("x",wt.x-Lt.width/2).attr("y",wt.y-Lt.height/2).attr("width",Lt.width).attr("height",Lt.height).attr("fill","white").attr("fill-opacity","85%")},drawRelationshipFromLayout=function(nt,rt,it,st,bt){const wt=it.edge(elementString(rt.src),elementString(rt.dst)),Et=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}),kt=nt.insert("path","#"+st).attr("class","er relationshipLine").attr("d",Et(wt.points)).attr("fill","none");rt.type==bt.db.Relationships.CONTAINS?kt.attr("marker-start","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+rt.type+"_line_ending)"):(kt.attr("stroke-dasharray","10,7"),kt.attr("marker-end","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+markers.ReqMarkers.ARROW+"_line_ending)")),addEdgeLabel(nt,kt,conf$4,`<<${rt.type}>>`)},drawReqs=(nt,rt,it)=>{Object.keys(nt).forEach(st=>{let bt=nt[st];st=elementString(st),log$1.info("Added new requirement: ",st);const wt=it.append("g").attr("id",st),Et="req-"+st,kt=newRectNode(wt,Et);let Lt=newTitleNode(wt,st+"_title",[`<<${bt.type}>>`,`${bt.name}`]);newBodyNode(wt,st+"_body",[`Id: ${bt.id}`,`Text: ${bt.text}`,`Risk: ${bt.risk}`,`Verification: ${bt.verifyMethod}`],Lt.y);const Ot=kt.node().getBBox();rt.setNode(st,{width:Ot.width,height:Ot.height,shape:"rect",id:st})})},drawElements=(nt,rt,it)=>{Object.keys(nt).forEach(st=>{let bt=nt[st];const wt=elementString(st),Et=it.append("g").attr("id",wt),kt="element-"+wt,Lt=newRectNode(Et,kt);let Ot=newTitleNode(Et,kt+"_title",["<<Element>>",`${st}`]);newBodyNode(Et,kt+"_body",[`Type: ${bt.type||"Not Specified"}`,`Doc Ref: ${bt.docRef||"None"}`],Ot.y);const Rt=Lt.node().getBBox();rt.setNode(wt,{width:Rt.width,height:Rt.height,shape:"rect",id:wt})})},addRelationships=(nt,rt)=>(nt.forEach(function(it){let st=elementString(it.src),bt=elementString(it.dst);rt.setEdge(st,bt,{relationship:it})}),nt),adjustEntities=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&(nt.select("#"+it),nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )"))})},elementString=nt=>nt.replace(/\s/g,"").replace(/\./g,"_"),draw$5=(nt,rt,it,st)=>{conf$4=getConfig$1().requirement,st.db.clear(),st.parser.parse(nt);const bt=conf$4.securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const kt=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);markers.insertLineEndings(kt,conf$4);const Lt=new Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:conf$4.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let Ot=st.db.getRequirements(),Rt=st.db.getElements(),Dt=st.db.getRelationships();drawReqs(Ot,Lt,kt),drawElements(Rt,Lt,kt),addRelationships(Dt,Lt),layout(Lt),adjustEntities(kt,Lt),Dt.forEach(function(Wt){drawRelationshipFromLayout(kt,Wt,Lt,rt,st)});const Bt=conf$4.rect_padding,Ft=kt.node().getBBox(),Yt=Ft.width+Bt*2,Jt=Ft.height+Bt*2;configureSvgSize(kt,Jt,Yt,conf$4.useMaxWidth),kt.attr("viewBox",`${Ft.x-Bt} ${Ft.y-Bt} ${Yt} ${Jt}`)},requirementRenderer={draw:draw$5};var parser$2=function(){var nt=function(qr,sr,pr,Er){for(pr=pr||{},Er=qr.length;Er--;pr[qr[Er]]=sr);return pr},rt=[1,2],it=[1,3],st=[1,5],bt=[1,7],wt=[2,5],Et=[1,15],kt=[1,17],Lt=[1,18],Ot=[1,19],Rt=[1,21],Dt=[1,22],Bt=[1,23],Ft=[1,29],Yt=[1,30],Jt=[1,31],Wt=[1,32],Qt=[1,33],rn=[1,34],sn=[1,35],on=[1,36],hn=[1,37],mn=[1,38],Cn=[1,39],Tn=[1,40],kn=[1,43],In=[1,44],Ln=[1,45],pn=[1,46],Hn=[1,47],yn=[1,48],mr=[1,51],vn=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],yr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],Tr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],Mr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],rr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],wr=[67,68,69],fr=[1,121],gr=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Lr={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(sr,pr,Er,ir,Pn,nn,fn){var cn=nn.length-1;switch(Pn){case 4:return ir.apply(nn[cn]),nn[cn];case 5:this.$=[];break;case 6:nn[cn-1].push(nn[cn]),this.$=nn[cn-1];break;case 7:case 8:this.$=nn[cn];break;case 9:this.$=[];break;case 12:nn[cn-3].type="addParticipant",nn[cn-3].description=ir.parseMessage(nn[cn-1]),this.$=nn[cn-3];break;case 13:nn[cn-1].type="addParticipant",this.$=nn[cn-1];break;case 14:nn[cn-3].type="addActor",nn[cn-3].description=ir.parseMessage(nn[cn-1]),this.$=nn[cn-3];break;case 15:nn[cn-1].type="addActor",this.$=nn[cn-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(nn[cn-2]),sequenceIndexStep:Number(nn[cn-1]),sequenceVisible:!0,signalType:ir.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(nn[cn-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:ir.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:ir.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:ir.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:ir.LINETYPE.ACTIVE_START,actor:nn[cn-1]};break;case 22:this.$={type:"activeEnd",signalType:ir.LINETYPE.ACTIVE_END,actor:nn[cn-1]};break;case 28:ir.setDiagramTitle(nn[cn].substring(6)),this.$=nn[cn].substring(6);break;case 29:ir.setDiagramTitle(nn[cn].substring(7)),this.$=nn[cn].substring(7);break;case 30:this.$=nn[cn].trim(),ir.setAccTitle(this.$);break;case 31:case 32:this.$=nn[cn].trim(),ir.setAccDescription(this.$);break;case 33:nn[cn-1].unshift({type:"loopStart",loopText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.LOOP_START}),nn[cn-1].push({type:"loopEnd",loopText:nn[cn-2],signalType:ir.LINETYPE.LOOP_END}),this.$=nn[cn-1];break;case 34:nn[cn-1].unshift({type:"rectStart",color:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.RECT_START}),nn[cn-1].push({type:"rectEnd",color:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.RECT_END}),this.$=nn[cn-1];break;case 35:nn[cn-1].unshift({type:"optStart",optText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.OPT_START}),nn[cn-1].push({type:"optEnd",optText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.OPT_END}),this.$=nn[cn-1];break;case 36:nn[cn-1].unshift({type:"altStart",altText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.ALT_START}),nn[cn-1].push({type:"altEnd",signalType:ir.LINETYPE.ALT_END}),this.$=nn[cn-1];break;case 37:nn[cn-1].unshift({type:"parStart",parText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.PAR_START}),nn[cn-1].push({type:"parEnd",signalType:ir.LINETYPE.PAR_END}),this.$=nn[cn-1];break;case 38:nn[cn-1].unshift({type:"criticalStart",criticalText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.CRITICAL_START}),nn[cn-1].push({type:"criticalEnd",signalType:ir.LINETYPE.CRITICAL_END}),this.$=nn[cn-1];break;case 39:nn[cn-1].unshift({type:"breakStart",breakText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.BREAK_START}),nn[cn-1].push({type:"breakEnd",optText:ir.parseMessage(nn[cn-2]),signalType:ir.LINETYPE.BREAK_END}),this.$=nn[cn-1];break;case 42:this.$=nn[cn-3].concat([{type:"option",optionText:ir.parseMessage(nn[cn-1]),signalType:ir.LINETYPE.CRITICAL_OPTION},nn[cn]]);break;case 44:this.$=nn[cn-3].concat([{type:"and",parText:ir.parseMessage(nn[cn-1]),signalType:ir.LINETYPE.PAR_AND},nn[cn]]);break;case 46:this.$=nn[cn-3].concat([{type:"else",altText:ir.parseMessage(nn[cn-1]),signalType:ir.LINETYPE.ALT_ELSE},nn[cn]]);break;case 47:this.$=[nn[cn-1],{type:"addNote",placement:nn[cn-2],actor:nn[cn-1].actor,text:nn[cn]}];break;case 48:nn[cn-2]=[].concat(nn[cn-1],nn[cn-1]).slice(0,2),nn[cn-2][0]=nn[cn-2][0].actor,nn[cn-2][1]=nn[cn-2][1].actor,this.$=[nn[cn-1],{type:"addNote",placement:ir.PLACEMENT.OVER,actor:nn[cn-2].slice(0,2),text:nn[cn]}];break;case 49:this.$=[nn[cn-1],{type:"addLinks",actor:nn[cn-1].actor,text:nn[cn]}];break;case 50:this.$=[nn[cn-1],{type:"addALink",actor:nn[cn-1].actor,text:nn[cn]}];break;case 51:this.$=[nn[cn-1],{type:"addProperties",actor:nn[cn-1].actor,text:nn[cn]}];break;case 52:this.$=[nn[cn-1],{type:"addDetails",actor:nn[cn-1].actor,text:nn[cn]}];break;case 55:this.$=[nn[cn-2],nn[cn]];break;case 56:this.$=nn[cn];break;case 57:this.$=ir.PLACEMENT.LEFTOF;break;case 58:this.$=ir.PLACEMENT.RIGHTOF;break;case 59:this.$=[nn[cn-4],nn[cn-1],{type:"addMessage",from:nn[cn-4].actor,to:nn[cn-1].actor,signalType:nn[cn-3],msg:nn[cn]},{type:"activeStart",signalType:ir.LINETYPE.ACTIVE_START,actor:nn[cn-1]}];break;case 60:this.$=[nn[cn-4],nn[cn-1],{type:"addMessage",from:nn[cn-4].actor,to:nn[cn-1].actor,signalType:nn[cn-3],msg:nn[cn]},{type:"activeEnd",signalType:ir.LINETYPE.ACTIVE_END,actor:nn[cn-4]}];break;case 61:this.$=[nn[cn-3],nn[cn-1],{type:"addMessage",from:nn[cn-3].actor,to:nn[cn-1].actor,signalType:nn[cn-2],msg:nn[cn]}];break;case 62:this.$={type:"addParticipant",actor:nn[cn]};break;case 63:this.$=ir.LINETYPE.SOLID_OPEN;break;case 64:this.$=ir.LINETYPE.DOTTED_OPEN;break;case 65:this.$=ir.LINETYPE.SOLID;break;case 66:this.$=ir.LINETYPE.DOTTED;break;case 67:this.$=ir.LINETYPE.SOLID_CROSS;break;case 68:this.$=ir.LINETYPE.DOTTED_CROSS;break;case 69:this.$=ir.LINETYPE.SOLID_POINT;break;case 70:this.$=ir.LINETYPE.DOTTED_POINT;break;case 71:this.$=ir.parseMessage(nn[cn].trim().substring(1));break;case 72:ir.parseDirective("%%{","open_directive");break;case 73:ir.parseDirective(nn[cn],"type_directive");break;case 74:nn[cn]=nn[cn].trim().replace(/'/g,'"'),ir.parseDirective(nn[cn],"arg_directive");break;case 75:ir.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:rt,5:it,6:4,7:st,11:6,79:bt},{1:[3]},{3:8,4:rt,5:it,6:4,7:st,11:6,79:bt},{3:9,4:rt,5:it,6:4,7:st,11:6,79:bt},{3:10,4:rt,5:it,6:4,7:st,11:6,79:bt},nt([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],wt,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{13:49,14:[1,50],82:mr},nt([14,82],[2,73]),nt(vn,[2,6]),{6:41,10:52,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},nt(vn,[2,8]),nt(vn,[2,9]),{17:53,69:yn},{17:54,69:yn},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:yn},{17:60,69:yn},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},nt(vn,[2,28]),nt(vn,[2,29]),{35:[1,66]},{37:[1,67]},nt(vn,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},nt(vn,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:yn},{17:89,69:yn},{17:90,69:yn},{17:91,69:yn},nt([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},nt(vn,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},nt(vn,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},nt(vn,[2,20]),{5:[1,102]},{5:[1,103]},nt(vn,[2,23]),nt(vn,[2,24]),nt(vn,[2,25]),nt(vn,[2,26]),nt(vn,[2,27]),nt(vn,[2,30]),nt(vn,[2,31]),nt(yr,wt,{8:104}),nt(yr,wt,{8:105}),nt(yr,wt,{8:106}),nt(Tr,wt,{44:107,8:108}),nt(Mr,wt,{46:109,8:110}),nt(rr,wt,{48:111,8:112}),nt(yr,wt,{8:113}),{17:116,67:[1,114],68:[1,115],69:yn},nt(wr,[2,63]),nt(wr,[2,64]),nt(wr,[2,65]),nt(wr,[2,66]),nt(wr,[2,67]),nt(wr,[2,68]),nt(wr,[2,69]),nt(wr,[2,70]),{17:117,69:yn},{17:119,57:118,69:yn},{69:[2,57]},{69:[2,58]},{55:120,78:fr},{55:122,78:fr},{55:123,78:fr},{55:124,78:fr},nt(gr,[2,10]),{13:125,82:mr},{82:[2,74]},{19:[1,126]},nt(vn,[2,13]),{19:[1,127]},nt(vn,[2,15]),{5:[1,128]},nt(vn,[2,18]),nt(vn,[2,19]),nt(vn,[2,21]),nt(vn,[2,22]),{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[1,129],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[1,130],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[1,131],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{40:[1,132]},{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[2,45],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,52:[1,133],53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{40:[1,134]},{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[2,43],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,51:[1,135],53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{40:[1,136]},{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[2,41],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,50:[1,137],53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{4:Et,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Ot,21:20,22:Rt,25:Dt,26:Bt,27:24,28:25,29:26,30:27,31:28,32:Ft,33:Yt,34:Jt,36:Wt,38:Qt,39:rn,40:[1,138],41:sn,42:on,43:hn,45:mn,47:Cn,49:Tn,53:kn,58:In,59:Ln,60:pn,61:Hn,69:yn,79:bt},{17:139,69:yn},{17:140,69:yn},{55:141,78:fr},{55:142,78:fr},{55:143,78:fr},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},nt(vn,[2,17]),nt(vn,[2,33]),nt(vn,[2,34]),nt(vn,[2,35]),nt(vn,[2,36]),{19:[1,148]},nt(vn,[2,37]),{19:[1,149]},nt(vn,[2,38]),{19:[1,150]},nt(vn,[2,39]),{55:151,78:fr},{55:152,78:fr},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:yn},nt(gr,[2,11]),nt(vn,[2,12]),nt(vn,[2,14]),nt(Tr,wt,{8:108,44:154}),nt(Mr,wt,{8:110,46:155}),nt(rr,wt,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(sr,pr){if(pr.recoverable)this.trace(sr);else{var Er=new Error(sr);throw Er.hash=pr,Er}},parse:function(sr){var pr=this,Er=[0],ir=[],Pn=[null],nn=[],fn=this.table,cn="",Nn=0,On=0,cr=2,Bn=1,Qn=nn.slice.call(arguments,1),Un=Object.create(this.lexer),or={yy:{}};for(var hr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hr)&&(or.yy[hr]=this.yy[hr]);Un.setInput(sr,or.yy),or.yy.lexer=Un,or.yy.parser=this,typeof Un.yylloc>"u"&&(Un.yylloc={});var kr=Un.yylloc;nn.push(kr);var xr=Un.options&&Un.options.ranges;typeof or.yy.parseError=="function"?this.parseError=or.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function br(){var Wn;return Wn=ir.pop()||Un.lex()||Bn,typeof Wn!="number"&&(Wn instanceof Array&&(ir=Wn,Wn=ir.pop()),Wn=pr.symbols_[Wn]||Wn),Wn}for(var hi,di,vi,Ti,ki={},Di,Ci,$r,An;;){if(di=Er[Er.length-1],this.defaultActions[di]?vi=this.defaultActions[di]:((hi===null||typeof hi>"u")&&(hi=br()),vi=fn[di]&&fn[di][hi]),typeof vi>"u"||!vi.length||!vi[0]){var Sn="";An=[];for(Di in fn[di])this.terminals_[Di]&&Di>cr&&An.push("'"+this.terminals_[Di]+"'");Un.showPosition?Sn="Parse error on line "+(Nn+1)+`:
`+Un.showPosition()+`
Expecting `+An.join(", ")+", got '"+(this.terminals_[hi]||hi)+"'":Sn="Parse error on line "+(Nn+1)+": Unexpected "+(hi==Bn?"end of input":"'"+(this.terminals_[hi]||hi)+"'"),this.parseError(Sn,{text:Un.match,token:this.terminals_[hi]||hi,line:Un.yylineno,loc:kr,expected:An})}if(vi[0]instanceof Array&&vi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+di+", token: "+hi);switch(vi[0]){case 1:Er.push(hi),Pn.push(Un.yytext),nn.push(Un.yylloc),Er.push(vi[1]),hi=null,On=Un.yyleng,cn=Un.yytext,Nn=Un.yylineno,kr=Un.yylloc;break;case 2:if(Ci=this.productions_[vi[1]][1],ki.$=Pn[Pn.length-Ci],ki._$={first_line:nn[nn.length-(Ci||1)].first_line,last_line:nn[nn.length-1].last_line,first_column:nn[nn.length-(Ci||1)].first_column,last_column:nn[nn.length-1].last_column},xr&&(ki._$.range=[nn[nn.length-(Ci||1)].range[0],nn[nn.length-1].range[1]]),Ti=this.performAction.apply(ki,[cn,On,Nn,or.yy,vi[1],Pn,nn].concat(Qn)),typeof Ti<"u")return Ti;Ci&&(Er=Er.slice(0,-1*Ci*2),Pn=Pn.slice(0,-1*Ci),nn=nn.slice(0,-1*Ci)),Er.push(this.productions_[vi[1]][0]),Pn.push(ki.$),nn.push(ki._$),$r=fn[Er[Er.length-2]][Er[Er.length-1]],Er.push($r);break;case 3:return!0}}return!0}},Pr=function(){var qr={EOF:1,parseError:function(pr,Er){if(this.yy.parser)this.yy.parser.parseError(pr,Er);else throw new Error(pr)},setInput:function(sr,pr){return this.yy=pr||this.yy||{},this._input=sr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var sr=this._input[0];this.yytext+=sr,this.yyleng++,this.offset++,this.match+=sr,this.matched+=sr;var pr=sr.match(/(?:\r\n?|\n).*/g);return pr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),sr},unput:function(sr){var pr=sr.length,Er=sr.split(/(?:\r\n?|\n)/g);this._input=sr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pr),this.offset-=pr;var ir=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Er.length-1&&(this.yylineno-=Er.length-1);var Pn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Er?(Er.length===ir.length?this.yylloc.first_column:0)+ir[ir.length-Er.length].length-Er[0].length:this.yylloc.first_column-pr},this.options.ranges&&(this.yylloc.range=[Pn[0],Pn[0]+this.yyleng-pr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(sr){this.unput(this.match.slice(sr))},pastInput:function(){var sr=this.matched.substr(0,this.matched.length-this.match.length);return(sr.length>20?"...":"")+sr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var sr=this.match;return sr.length<20&&(sr+=this._input.substr(0,20-sr.length)),(sr.substr(0,20)+(sr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var sr=this.pastInput(),pr=new Array(sr.length+1).join("-");return sr+this.upcomingInput()+`
`+pr+"^"},test_match:function(sr,pr){var Er,ir,Pn;if(this.options.backtrack_lexer&&(Pn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Pn.yylloc.range=this.yylloc.range.slice(0))),ir=sr[0].match(/(?:\r\n?|\n).*/g),ir&&(this.yylineno+=ir.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ir?ir[ir.length-1].length-ir[ir.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+sr[0].length},this.yytext+=sr[0],this.match+=sr[0],this.matches=sr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(sr[0].length),this.matched+=sr[0],Er=this.performAction.call(this,this.yy,this,pr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Er)return Er;if(this._backtrack){for(var nn in Pn)this[nn]=Pn[nn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var sr,pr,Er,ir;this._more||(this.yytext="",this.match="");for(var Pn=this._currentRules(),nn=0;nn<Pn.length;nn++)if(Er=this._input.match(this.rules[Pn[nn]]),Er&&(!pr||Er[0].length>pr[0].length)){if(pr=Er,ir=nn,this.options.backtrack_lexer){if(sr=this.test_match(Er,Pn[nn]),sr!==!1)return sr;if(this._backtrack){pr=!1;continue}else return!1}else if(!this.options.flex)break}return pr?(sr=this.test_match(pr,Pn[ir]),sr!==!1?sr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var pr=this.next();return pr||this.lex()},begin:function(pr){this.conditionStack.push(pr)},popState:function(){var pr=this.conditionStack.length-1;return pr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(pr){return pr=this.conditionStack.length-1-Math.abs(pr||0),pr>=0?this.conditionStack[pr]:"INITIAL"},pushState:function(pr){this.begin(pr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(pr,Er,ir,Pn){switch(ir){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return Er.yytext=Er.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return Er.yytext=Er.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return qr}();Lr.lexer=Pr;function lr(){this.yy={}}return lr.prototype=Lr,Lr.Parser=lr,new lr}();parser$2.parser=parser$2;const sequenceParser=parser$2,sequenceDetector=nt=>nt.match(/^\s*sequenceDiagram/)!==null;let prevActor,actors$1={},messages=[],sequenceNumbersEnabled=!1,wrapEnabled;const parseDirective$3=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addActor=function(nt,rt,it,st){const bt=actors$1[nt];bt&&rt===bt.name&&it==null||((it==null||it.text==null)&&(it={text:rt,wrap:null,type:st}),(st==null||it.text==null)&&(it={text:rt,wrap:null,type:st}),actors$1[nt]={name:rt,description:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:st||"participant"},prevActor&&actors$1[prevActor]&&(actors$1[prevActor].nextActor=nt),prevActor=nt)},activationCount=nt=>{let rt,it=0;for(rt=0;rt<messages.length;rt++)messages[rt].type===LINETYPE.ACTIVE_START&&messages[rt].from.actor===nt&&it++,messages[rt].type===LINETYPE.ACTIVE_END&&messages[rt].from.actor===nt&&it--;return it},addMessage=function(nt,rt,it,st){messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,answer:st})},addSignal=function(nt,rt,it={text:void 0,wrap:void 0},st){if(st===LINETYPE.ACTIVE_END&&activationCount(nt.actor)<1){let wt=new Error("Trying to inactivate an inactive participant ("+nt.actor+")");throw wt.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},wt}return messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:st}),!0},getMessages=function(){return messages},getActors$1=function(){return actors$1},getActor=function(nt){return actors$1[nt]},getActorKeys=function(){return Object.keys(actors$1)},enableSequenceNumbers=function(){sequenceNumbersEnabled=!0},disableSequenceNumbers=function(){sequenceNumbersEnabled=!1},showSequenceNumbers=()=>sequenceNumbersEnabled,setWrap=function(nt){wrapEnabled=nt},autoWrap=()=>wrapEnabled!==void 0?wrapEnabled:getConfig$1().sequence.wrap,clear$2=function(){actors$1={},messages=[],sequenceNumbersEnabled=!1,clear$g()},parseMessage=function(nt){const rt=nt.trim(),it={text:rt.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:rt.match(/^:?wrap:/)!==null?!0:rt.match(/^:?nowrap:/)!==null?!1:void 0};return log$1.debug("parseMessage:",it),it},LINETYPE={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},ARROWTYPE={FILLED:0,OPEN:1},PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2},addNote=function(nt,rt,it){it.text,it.wrap===void 0&&autoWrap()||it.wrap;const st=[].concat(nt,nt);messages.push({from:st[0],to:st[1],message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:LINETYPE.NOTE,placement:rt})},addLinks=function(nt,rt){const it=getActor(nt);try{let st=sanitizeText$5(rt.text,getConfig$1());st=st.replace(/&amp;/g,"&"),st=st.replace(/&equals;/g,"=");const bt=JSON.parse(st);insertLinks(it,bt)}catch(st){log$1.error("error while parsing actor link text",st)}},addALink=function(nt,rt){const it=getActor(nt);try{const Et={};let kt=sanitizeText$5(rt.text,getConfig$1());var st=kt.indexOf("@");kt=kt.replace(/&amp;/g,"&"),kt=kt.replace(/&equals;/g,"=");var bt=kt.slice(0,st-1).trim(),wt=kt.slice(st+1).trim();Et[bt]=wt,insertLinks(it,Et)}catch(Et){log$1.error("error while parsing actor link text",Et)}};function insertLinks(nt,rt){if(nt.links==null)nt.links=rt;else for(let it in rt)nt.links[it]=rt[it]}const addProperties=function(nt,rt){const it=getActor(nt);try{let st=sanitizeText$5(rt.text,getConfig$1());const bt=JSON.parse(st);insertProperties(it,bt)}catch(st){log$1.error("error while parsing actor properties text",st)}};function insertProperties(nt,rt){if(nt.properties==null)nt.properties=rt;else for(let it in rt)nt.properties[it]=rt[it]}const addDetails=function(nt,rt){const it=getActor(nt),st=document.getElementById(rt.text);try{const bt=st.innerHTML,wt=JSON.parse(bt);wt.properties&&insertProperties(it,wt.properties),wt.links&&insertLinks(it,wt.links)}catch(bt){log$1.error("error while parsing actor details text",bt)}},getActorProperty=function(nt,rt){if(nt!==void 0&&nt.properties!==void 0)return nt.properties[rt]},apply=function(nt){if(Array.isArray(nt))nt.forEach(function(rt){apply(rt)});else switch(nt.type){case"sequenceIndex":messages.push({from:void 0,to:void 0,message:{start:nt.sequenceIndex,step:nt.sequenceIndexStep,visible:nt.sequenceVisible},wrap:!1,type:nt.signalType});break;case"addParticipant":addActor(nt.actor,nt.actor,nt.description,"participant");break;case"addActor":addActor(nt.actor,nt.actor,nt.description,"actor");break;case"activeStart":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"activeEnd":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"addNote":addNote(nt.actor,nt.placement,nt.text);break;case"addLinks":addLinks(nt.actor,nt.text);break;case"addALink":addALink(nt.actor,nt.text);break;case"addProperties":addProperties(nt.actor,nt.text);break;case"addDetails":addDetails(nt.actor,nt.text);break;case"addMessage":addSignal(nt.from,nt.to,nt.msg,nt.signalType);break;case"loopStart":addSignal(void 0,void 0,nt.loopText,nt.signalType);break;case"loopEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"rectStart":addSignal(void 0,void 0,nt.color,nt.signalType);break;case"rectEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"optStart":addSignal(void 0,void 0,nt.optText,nt.signalType);break;case"optEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"altStart":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"else":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"altEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"setAccTitle":setAccTitle(nt.text);break;case"parStart":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"and":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"parEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"criticalStart":addSignal(void 0,void 0,nt.criticalText,nt.signalType);break;case"option":addSignal(void 0,void 0,nt.optionText,nt.signalType);break;case"criticalEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"breakStart":addSignal(void 0,void 0,nt.breakText,nt.signalType);break;case"breakEnd":addSignal(void 0,void 0,void 0,nt.signalType);break}},sequenceDb={addActor,addMessage,addSignal,addLinks,addDetails,addProperties,autoWrap,setWrap,enableSequenceNumbers,disableSequenceNumbers,showSequenceNumbers,getMessages,getActors:getActors$1,getActor,getActorKeys,getActorProperty,getAccTitle,getDiagramTitle,setDiagramTitle,parseDirective:parseDirective$3,getConfig:()=>getConfig$1().sequence,clear:clear$2,parseMessage,LINETYPE,ARROWTYPE,PLACEMENT,addNote,setAccTitle,apply,setAccDescription,getAccDescription};let interactionFunctions=[];const addFunction=nt=>{interactionFunctions.push(nt)},attachFunctions=()=>{interactionFunctions.forEach(nt=>{nt()}),interactionFunctions=[]},drawRect$1=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},addPopupInteraction=(nt,rt)=>{addFunction(()=>{const it=document.querySelectorAll(nt);it.length!==0&&(it[0].addEventListener("mouseover",function(){popupMenuUpFunc("actor"+rt+"_popup")}),it[0].addEventListener("mouseout",function(){popupMenuDownFunc("actor"+rt+"_popup")}))})},drawPopup=function(nt,rt,it,st,bt){if(rt.links===void 0||rt.links===null||Object.keys(rt.links).length===0)return{height:0,width:0};const wt=rt.links,Et=rt.actorCnt,kt=rt.rectData;var Lt="none";bt&&(Lt="block !important");const Ot=nt.append("g");Ot.attr("id","actor"+Et+"_popup"),Ot.attr("class","actorPopupMenu"),Ot.attr("display",Lt),addPopupInteraction("#actor"+Et+"_popup",Et);var Rt="";kt.class!==void 0&&(Rt=" "+kt.class);let Dt=kt.width>it?kt.width:it;const Bt=Ot.append("rect");if(Bt.attr("class","actorPopupMenuPanel"+Rt),Bt.attr("x",kt.x),Bt.attr("y",kt.height),Bt.attr("fill",kt.fill),Bt.attr("stroke",kt.stroke),Bt.attr("width",Dt),Bt.attr("height",kt.height),Bt.attr("rx",kt.rx),Bt.attr("ry",kt.ry),wt!=null){var Ft=20;for(let Wt in wt){var Yt=Ot.append("a"),Jt=sanitizeUrl_1(wt[Wt]);Yt.attr("xlink:href",Jt),Yt.attr("target","_blank"),_drawMenuItemTextCandidateFunc(st)(Wt,Yt,kt.x+10,kt.height+Ft,Dt,20,{class:"actor"},st),Ft+=30}}return Bt.attr("height",Ft),{height:kt.height+Ft,width:Dt}},drawImage=function(nt,rt,it,st){const bt=nt.append("image");bt.attr("x",rt),bt.attr("y",it);var wt=sanitizeUrl_1(st);bt.attr("xlink:href",wt)},drawEmbeddedImage=function(nt,rt,it,st){const bt=nt.append("use");bt.attr("x",rt),bt.attr("y",it);var wt=sanitizeUrl_1(st);bt.attr("xlink:href","#"+wt)},popupMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'none'; }"},popupMenuUpFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="block")},popupMenuDownFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="none")},drawText$1=function(nt,rt){let it=0,st=0;const bt=rt.text.split(common$1.lineBreakRegex);let wt=[],Et=0,kt=()=>rt.y;if(rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0)switch(rt.valign){case"top":case"start":kt=()=>Math.round(rt.y+rt.textMargin);break;case"middle":case"center":kt=()=>Math.round(rt.y+(it+st+rt.textMargin)/2);break;case"bottom":case"end":kt=()=>Math.round(rt.y+(it+st+2*rt.textMargin)-rt.textMargin);break}if(rt.anchor!==void 0&&rt.textMargin!==void 0&&rt.width!==void 0)switch(rt.anchor){case"left":case"start":rt.x=Math.round(rt.x+rt.textMargin),rt.anchor="start",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"middle":case"center":rt.x=Math.round(rt.x+rt.width/2),rt.anchor="middle",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"right":case"end":rt.x=Math.round(rt.x+rt.width-rt.textMargin),rt.anchor="end",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break}for(let[Lt,Ot]of bt.entries()){rt.textMargin!==void 0&&rt.textMargin===0&&rt.fontSize!==void 0&&(Et=Lt*rt.fontSize);const Rt=nt.append("text");if(Rt.attr("x",rt.x),Rt.attr("y",kt()),rt.anchor!==void 0&&Rt.attr("text-anchor",rt.anchor).attr("dominant-baseline",rt.dominantBaseline).attr("alignment-baseline",rt.alignmentBaseline),rt.fontFamily!==void 0&&Rt.style("font-family",rt.fontFamily),rt.fontSize!==void 0&&Rt.style("font-size",rt.fontSize),rt.fontWeight!==void 0&&Rt.style("font-weight",rt.fontWeight),rt.fill!==void 0&&Rt.attr("fill",rt.fill),rt.class!==void 0&&Rt.attr("class",rt.class),rt.dy!==void 0?Rt.attr("dy",rt.dy):Et!==0&&Rt.attr("dy",Et),rt.tspan){const Dt=Rt.append("tspan");Dt.attr("x",rt.x),rt.fill!==void 0&&Dt.attr("fill",rt.fill),Dt.text(Ot)}else Rt.text(Ot);rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0&&(st+=(Rt._groups||Rt)[0][0].getBBox().height,it=st),wt.push(Rt)}return wt},drawLabel$1=function(nt,rt){function it(bt,wt,Et,kt,Lt){return bt+","+wt+" "+(bt+Et)+","+wt+" "+(bt+Et)+","+(wt+kt-Lt)+" "+(bt+Et-Lt*1.2)+","+(wt+kt)+" "+bt+","+(wt+kt)}const st=nt.append("polygon");return st.attr("points",it(rt.x,rt.y,rt.width,rt.height,7)),st.attr("class","labelBox"),rt.y=rt.y+rt.height/2,drawText$1(nt,rt),st};let actorCnt=-1;const fixLifeLineHeights=(nt,rt)=>{!nt.selectAll||nt.selectAll(".actor-line").attr("class","200").attr("y2",rt-55)},drawActorTypeParticipant=function(nt,rt,it){const st=rt.x+rt.width/2,bt=nt.append("g");var wt=bt;rt.y===0&&(actorCnt++,wt.append("line").attr("id","actor"+actorCnt).attr("x1",st).attr("y1",5).attr("x2",st).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),wt=bt.append("g"),rt.actorCnt=actorCnt,rt.links!=null&&(wt.attr("id","root-"+actorCnt),addPopupInteraction("#root-"+actorCnt,actorCnt)));const Et=getNoteRect$1();var kt="actor";rt.properties!=null&&rt.properties.class?kt=rt.properties.class:Et.fill="#eaeaea",Et.x=rt.x,Et.y=rt.y,Et.width=rt.width,Et.height=rt.height,Et.class=kt,Et.rx=3,Et.ry=3;const Lt=drawRect$1(wt,Et);if(rt.rectData=Et,rt.properties!=null&&rt.properties.icon){const Rt=rt.properties.icon.trim();Rt.charAt(0)==="@"?drawEmbeddedImage(wt,Et.x+Et.width-20,Et.y+10,Rt.substr(1)):drawImage(wt,Et.x+Et.width-20,Et.y+10,Rt)}_drawTextCandidateFunc$1(it)(rt.description,wt,Et.x,Et.y,Et.width,Et.height,{class:"actor"},it);let Ot=rt.height;if(Lt.node){const Rt=Lt.node().getBBox();rt.height=Rt.height,Ot=Rt.height}return Ot},drawActorTypeActor=function(nt,rt,it){const st=rt.x+rt.width/2;rt.y===0&&(actorCnt++,nt.append("line").attr("id","actor"+actorCnt).attr("x1",st).attr("y1",80).attr("x2",st).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const bt=nt.append("g");bt.attr("class","actor-man");const wt=getNoteRect$1();wt.x=rt.x,wt.y=rt.y,wt.fill="#eaeaea",wt.width=rt.width,wt.height=rt.height,wt.class="actor",wt.rx=3,wt.ry=3,bt.append("line").attr("id","actor-man-torso"+actorCnt).attr("x1",st).attr("y1",rt.y+25).attr("x2",st).attr("y2",rt.y+45),bt.append("line").attr("id","actor-man-arms"+actorCnt).attr("x1",st-18).attr("y1",rt.y+33).attr("x2",st+18).attr("y2",rt.y+33),bt.append("line").attr("x1",st-18).attr("y1",rt.y+60).attr("x2",st).attr("y2",rt.y+45),bt.append("line").attr("x1",st).attr("y1",rt.y+45).attr("x2",st+16).attr("y2",rt.y+60);const Et=bt.append("circle");Et.attr("cx",rt.x+rt.width/2),Et.attr("cy",rt.y+10),Et.attr("r",15),Et.attr("width",rt.width),Et.attr("height",rt.height);const kt=bt.node().getBBox();return rt.height=kt.height,_drawTextCandidateFunc$1(it)(rt.description,bt,wt.x,wt.y+35,wt.width,wt.height,{class:"actor"},it),rt.height},drawActor=function(nt,rt,it){switch(rt.type){case"actor":return drawActorTypeActor(nt,rt,it);case"participant":return drawActorTypeParticipant(nt,rt,it)}},anchorElement=function(nt){return nt.append("g")},drawActivation=function(nt,rt,it,st,bt){const wt=getNoteRect$1(),Et=rt.anchored;wt.x=rt.startx,wt.y=rt.starty,wt.class="activation"+bt%3,wt.width=rt.stopx-rt.startx,wt.height=it-rt.starty,drawRect$1(Et,wt)},drawLoop=function(nt,rt,it,st){const{boxMargin:bt,boxTextMargin:wt,labelBoxHeight:Et,labelBoxWidth:kt,messageFontFamily:Lt,messageFontSize:Ot,messageFontWeight:Rt}=st,Dt=nt.append("g"),Bt=function(Jt,Wt,Qt,rn){return Dt.append("line").attr("x1",Jt).attr("y1",Wt).attr("x2",Qt).attr("y2",rn).attr("class","loopLine")};Bt(rt.startx,rt.starty,rt.stopx,rt.starty),Bt(rt.stopx,rt.starty,rt.stopx,rt.stopy),Bt(rt.startx,rt.stopy,rt.stopx,rt.stopy),Bt(rt.startx,rt.starty,rt.startx,rt.stopy),rt.sections!==void 0&&rt.sections.forEach(function(Jt){Bt(rt.startx,Jt.y,rt.stopx,Jt.y).style("stroke-dasharray","3, 3")});let Ft=getTextObj$1();Ft.text=it,Ft.x=rt.startx,Ft.y=rt.starty,Ft.fontFamily=Lt,Ft.fontSize=Ot,Ft.fontWeight=Rt,Ft.anchor="middle",Ft.valign="middle",Ft.tspan=!1,Ft.width=kt||50,Ft.height=Et||20,Ft.textMargin=wt,Ft.class="labelText",drawLabel$1(Dt,Ft),Ft=getTextObj$1(),Ft.text=rt.title,Ft.x=rt.startx+kt/2+(rt.stopx-rt.startx)/2,Ft.y=rt.starty+bt+wt,Ft.anchor="middle",Ft.valign="middle",Ft.textMargin=wt,Ft.class="loopText",Ft.fontFamily=Lt,Ft.fontSize=Ot,Ft.fontWeight=Rt,Ft.wrap=!0;let Yt=drawText$1(Dt,Ft);return rt.sectionTitles!==void 0&&rt.sectionTitles.forEach(function(Jt,Wt){if(Jt.message){Ft.text=Jt.message,Ft.x=rt.startx+(rt.stopx-rt.startx)/2,Ft.y=rt.sections[Wt].y+bt+wt,Ft.class="loopText",Ft.anchor="middle",Ft.valign="middle",Ft.tspan=!1,Ft.fontFamily=Lt,Ft.fontSize=Ot,Ft.fontWeight=Rt,Ft.wrap=rt.wrap,Yt=drawText$1(Dt,Ft);let Qt=Math.round(Yt.map(rn=>(rn._groups||rn)[0][0].getBBox().height).reduce((rn,sn)=>rn+sn));rt.sections[Wt].height+=Qt-(bt+wt)}}),rt.height=Math.round(rt.stopy-rt.starty),Dt},drawBackgroundRect$1=function(nt,rt){drawRect$1(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,class:"rect"}).lower()},insertDatabaseIcon=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead=function(nt){nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},getTextObj$1=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},getNoteRect$1=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc$1=function(){function nt(bt,wt,Et,kt,Lt,Ot,Rt){const Dt=wt.append("text").attr("x",Et+Lt/2).attr("y",kt+Ot/2+5).style("text-anchor","middle").text(bt);st(Dt,Rt)}function rt(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const{actorFontSize:Bt,actorFontFamily:Ft,actorFontWeight:Yt}=Dt;let Jt=Bt&&Bt.replace?Bt.replace("px",""):Bt;const Wt=bt.split(common$1.lineBreakRegex);for(let Qt=0;Qt<Wt.length;Qt++){const rn=Qt*Jt-Jt*(Wt.length-1)/2,sn=wt.append("text").attr("x",Et+Lt/2).attr("y",kt).style("text-anchor","middle").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);sn.append("tspan").attr("x",Et+Lt/2).attr("dy",rn).text(Wt[Qt]),sn.attr("y",kt+Ot/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(sn,Rt)}}function it(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const Bt=wt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Ot).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Ot,Rt,Dt),st(Yt,Rt)}function st(bt,wt){for(const Et in wt)wt.hasOwnProperty(Et)&&bt.attr(Et,wt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),_drawMenuItemTextCandidateFunc=function(){function nt(bt,wt,Et,kt,Lt,Ot,Rt){const Dt=wt.append("text").attr("x",Et).attr("y",kt).style("text-anchor","start").text(bt);st(Dt,Rt)}function rt(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const{actorFontSize:Bt,actorFontFamily:Ft,actorFontWeight:Yt}=Dt,Jt=bt.split(common$1.lineBreakRegex);for(let Wt=0;Wt<Jt.length;Wt++){const Qt=Wt*Bt-Bt*(Jt.length-1)/2,rn=wt.append("text").attr("x",Et).attr("y",kt).style("text-anchor","start").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);rn.append("tspan").attr("x",Et).attr("dy",Qt).text(Jt[Wt]),rn.attr("y",kt+Ot/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(rn,Rt)}}function it(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const Bt=wt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Ot).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Ot,Rt,Dt),st(Yt,Rt)}function st(bt,wt){for(const Et in wt)wt.hasOwnProperty(Et)&&bt.attr(Et,wt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),svgDraw$1={drawRect:drawRect$1,drawText:drawText$1,drawLabel:drawLabel$1,drawActor,drawPopup,drawImage,drawEmbeddedImage,anchorElement,drawActivation,drawLoop,drawBackgroundRect:drawBackgroundRect$1,insertArrowHead,insertArrowFilledHead,insertSequenceNumber,insertArrowCrossHead,insertDatabaseIcon,insertComputerIcon,insertClockIcon,getTextObj:getTextObj$1,getNoteRect:getNoteRect$1,popupMenu,popdownMenu,fixLifeLineHeights,sanitizeUrl:sanitizeUrl_1};let conf$3={};const bounds$1={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(nt=>nt.height||0))+(this.loops.length===0?0:this.loops.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.messages.length===0?0:this.messages.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.notes.length===0?0:this.notes.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(nt){this.actors.push(nt)},addLoop:function(nt){this.loops.push(nt)},addMessage:function(nt){this.messages.push(nt)},addNote:function(nt){this.notes.push(nt)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,setConf$4(getConfig$1())},updateVal:function(nt,rt,it,st){nt[rt]===void 0?nt[rt]=it:nt[rt]=st(it,nt[rt])},updateBounds:function(nt,rt,it,st){const bt=this;let wt=0;function Et(kt){return function(Ot){wt++;const Rt=bt.sequenceItems.length-wt+1;bt.updateVal(Ot,"starty",rt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(Ot,"stopy",st+Rt*conf$3.boxMargin,Math.max),bt.updateVal(bounds$1.data,"startx",nt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(bounds$1.data,"stopx",it+Rt*conf$3.boxMargin,Math.max),kt!=="activation"&&(bt.updateVal(Ot,"startx",nt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(Ot,"stopx",it+Rt*conf$3.boxMargin,Math.max),bt.updateVal(bounds$1.data,"starty",rt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(bounds$1.data,"stopy",st+Rt*conf$3.boxMargin,Math.max))}}this.sequenceItems.forEach(Et()),this.activations.forEach(Et("activation"))},insert:function(nt,rt,it,st){const bt=Math.min(nt,it),wt=Math.max(nt,it),Et=Math.min(rt,st),kt=Math.max(rt,st);this.updateVal(bounds$1.data,"startx",bt,Math.min),this.updateVal(bounds$1.data,"starty",Et,Math.min),this.updateVal(bounds$1.data,"stopx",wt,Math.max),this.updateVal(bounds$1.data,"stopy",kt,Math.max),this.updateBounds(bt,Et,wt,kt)},newActivation:function(nt,rt,it){const st=it[nt.from.actor],bt=actorActivations(nt.from.actor).length||0,wt=st.x+st.width/2+(bt-1)*conf$3.activationWidth/2;this.activations.push({startx:wt,starty:this.verticalPos+2,stopx:wt+conf$3.activationWidth,stopy:void 0,actor:nt.from.actor,anchored:svgDraw$1.anchorElement(rt)})},endActivation:function(nt){const rt=this.activations.map(function(it){return it.actor}).lastIndexOf(nt.from.actor);return this.activations.splice(rt,1)[0]},createLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:nt.message,wrap:nt.wrap,width:nt.width,height:0,fill:rt}},newLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){this.sequenceItems.push(this.createLoop(nt,rt))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(nt){const rt=this.sequenceItems.pop();rt.sections=rt.sections||[],rt.sectionTitles=rt.sectionTitles||[],rt.sections.push({y:bounds$1.getVerticalPos(),height:0}),rt.sectionTitles.push(nt),this.sequenceItems.push(rt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},drawNote$1=function(nt,rt){bounds$1.bumpVerticalPos(conf$3.boxMargin),rt.height=conf$3.boxMargin,rt.starty=bounds$1.getVerticalPos();const it=svgDraw$1.getNoteRect();it.x=rt.startx,it.y=rt.starty,it.width=rt.width||conf$3.width,it.class="note";const st=nt.append("g"),bt=svgDraw$1.drawRect(st,it),wt=svgDraw$1.getTextObj();wt.x=rt.startx,wt.y=rt.starty,wt.width=it.width,wt.dy="1em",wt.text=rt.message,wt.class="noteText",wt.fontFamily=conf$3.noteFontFamily,wt.fontSize=conf$3.noteFontSize,wt.fontWeight=conf$3.noteFontWeight,wt.anchor=conf$3.noteAlign,wt.textMargin=conf$3.noteMargin,wt.valign="center";const Et=drawText$1(st,wt),kt=Math.round(Et.map(Lt=>(Lt._groups||Lt)[0][0].getBBox().height).reduce((Lt,Ot)=>Lt+Ot));bt.attr("height",kt+2*conf$3.noteMargin),rt.height+=kt+2*conf$3.noteMargin,bounds$1.bumpVerticalPos(kt+2*conf$3.noteMargin),rt.stopy=rt.starty+kt+2*conf$3.noteMargin,rt.stopx=rt.startx+it.width,bounds$1.insert(rt.startx,rt.starty,rt.stopx,rt.stopy),bounds$1.models.addNote(rt)},messageFont=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight}),noteFont=nt=>({fontFamily:nt.noteFontFamily,fontSize:nt.noteFontSize,fontWeight:nt.noteFontWeight}),actorFont=nt=>({fontFamily:nt.actorFontFamily,fontSize:nt.actorFontSize,fontWeight:nt.actorFontWeight});function boundMessage(nt,rt){bounds$1.bumpVerticalPos(10);const{startx:it,stopx:st,message:bt}=rt,wt=common$1.splitBreaks(bt).length,Et=utils.calculateTextDimensions(bt,messageFont(conf$3)),kt=Et.height/wt;rt.height+=kt,bounds$1.bumpVerticalPos(kt);let Lt,Ot=Et.height-10;const Rt=Et.width;if(it===st){Lt=bounds$1.getVerticalPos()+Ot,conf$3.rightAngles||(Ot+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+Ot),Ot+=30;const Dt=Math.max(Rt/2,conf$3.width/2);bounds$1.insert(it-Dt,bounds$1.getVerticalPos()-10+Ot,st+Dt,bounds$1.getVerticalPos()+30+Ot)}else Ot+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+Ot,bounds$1.insert(it,Lt-10,st,Lt);return bounds$1.bumpVerticalPos(Ot),rt.height+=Ot,rt.stopy=rt.starty+rt.height,bounds$1.insert(rt.fromBounds,rt.starty,rt.toBounds,rt.stopy),Lt}const drawMessage=function(nt,rt,it,st){const{startx:bt,stopx:wt,starty:Et,message:kt,type:Lt,sequenceIndex:Ot,sequenceVisible:Rt}=rt,Dt=utils.calculateTextDimensions(kt,messageFont(conf$3)),Bt=svgDraw$1.getTextObj();Bt.x=bt,Bt.y=Et+10,Bt.width=wt-bt,Bt.class="messageText",Bt.dy="1em",Bt.text=kt,Bt.fontFamily=conf$3.messageFontFamily,Bt.fontSize=conf$3.messageFontSize,Bt.fontWeight=conf$3.messageFontWeight,Bt.anchor=conf$3.messageAlign,Bt.valign="center",Bt.textMargin=conf$3.wrapPadding,Bt.tspan=!1,drawText$1(nt,Bt);const Ft=Dt.width;let Yt;bt===wt?conf$3.rightAngles?Yt=nt.append("path").attr("d",`M  ${bt},${it} H ${bt+Math.max(conf$3.width/2,Ft/2)} V ${it+25} H ${bt}`):Yt=nt.append("path").attr("d","M "+bt+","+it+" C "+(bt+60)+","+(it-10)+" "+(bt+60)+","+(it+30)+" "+bt+","+(it+20)):(Yt=nt.append("line"),Yt.attr("x1",bt),Yt.attr("y1",it),Yt.attr("x2",wt),Yt.attr("y2",it)),Lt===st.db.LINETYPE.DOTTED||Lt===st.db.LINETYPE.DOTTED_CROSS||Lt===st.db.LINETYPE.DOTTED_POINT||Lt===st.db.LINETYPE.DOTTED_OPEN?(Yt.style("stroke-dasharray","3, 3"),Yt.attr("class","messageLine1")):Yt.attr("class","messageLine0");let Jt="";conf$3.arrowMarkerAbsolute&&(Jt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Jt=Jt.replace(/\(/g,"\\("),Jt=Jt.replace(/\)/g,"\\)")),Yt.attr("stroke-width",2),Yt.attr("stroke","none"),Yt.style("fill","none"),(Lt===st.db.LINETYPE.SOLID||Lt===st.db.LINETYPE.DOTTED)&&Yt.attr("marker-end","url("+Jt+"#arrowhead)"),(Lt===st.db.LINETYPE.SOLID_POINT||Lt===st.db.LINETYPE.DOTTED_POINT)&&Yt.attr("marker-end","url("+Jt+"#filled-head)"),(Lt===st.db.LINETYPE.SOLID_CROSS||Lt===st.db.LINETYPE.DOTTED_CROSS)&&Yt.attr("marker-end","url("+Jt+"#crosshead)"),(Rt||conf$3.showSequenceNumbers)&&(Yt.attr("marker-start","url("+Jt+"#sequencenumber)"),nt.append("text").attr("x",bt).attr("y",it+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(Ot))},drawActors=function(nt,rt,it,st,bt,wt){if(bt.hideUnusedParticipants===!0){const Ot=new Set;wt.forEach(Rt=>{Ot.add(Rt.from),Ot.add(Rt.to)}),it=it.filter(Rt=>Ot.has(Rt))}let Et=0,kt=0,Lt=0;for(const Ot of it){const Rt=rt[Ot];Rt.width=Rt.width||conf$3.width,Rt.height=Math.max(Rt.height||conf$3.height,conf$3.height),Rt.margin=Rt.margin||conf$3.actorMargin,Rt.x=Et+kt,Rt.y=st;const Dt=svgDraw$1.drawActor(nt,Rt,conf$3);Lt=Math.max(Lt,Dt),bounds$1.insert(Rt.x,st,Rt.x+Rt.width,Rt.height),Et+=Rt.width,kt+=Rt.margin,bounds$1.models.addActor(Rt)}bounds$1.bumpVerticalPos(Lt)},drawActorsPopup=function(nt,rt,it,st){let bt=0,wt=0;for(const Et of it){const kt=rt[Et],Lt=getRequiredPopupWidth(kt),Ot=svgDraw$1.drawPopup(nt,kt,Lt,conf$3,conf$3.forceMenus,st);Ot.height>bt&&(bt=Ot.height),Ot.width+kt.x>wt&&(wt=Ot.width+kt.x)}return{maxHeight:bt,maxWidth:wt}},setConf$4=function(nt){assignWithDepth$1(conf$3,nt),nt.fontFamily&&(conf$3.actorFontFamily=conf$3.noteFontFamily=conf$3.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$3.actorFontSize=conf$3.noteFontSize=conf$3.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$3.actorFontWeight=conf$3.noteFontWeight=conf$3.messageFontWeight=nt.fontWeight)},actorActivations=function(nt){return bounds$1.activations.filter(function(rt){return rt.actor===nt})},activationBounds=function(nt,rt){const it=rt[nt],st=actorActivations(nt),bt=st.reduce(function(Et,kt){return Math.min(Et,kt.startx)},it.x+it.width/2),wt=st.reduce(function(Et,kt){return Math.max(Et,kt.stopx)},it.x+it.width/2);return[bt,wt]};function adjustLoopHeightForWrap(nt,rt,it,st,bt){bounds$1.bumpVerticalPos(it);let wt=st;if(rt.id&&rt.message&&nt[rt.id]){const Et=nt[rt.id].width,kt=messageFont(conf$3);rt.message=utils.wrapLabel(`[${rt.message}]`,Et-2*conf$3.wrapPadding,kt),rt.width=Et,rt.wrap=!0;const Lt=utils.calculateTextDimensions(rt.message,kt),Ot=Math.max(Lt.height,conf$3.labelBoxHeight);wt=st+Ot,log$1.debug(`${Ot} - ${rt.message}`)}bt(rt),bounds$1.bumpVerticalPos(wt)}const draw$4=function(nt,rt,it,st){const{securityLevel:bt,sequence:wt}=getConfig$1();conf$3=wt;let Et;bt==="sandbox"&&(Et=select("#i"+rt));const kt=select(bt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=bt==="sandbox"?Et.nodes()[0].contentDocument:document;bounds$1.init(),log$1.debug(st.db);const Ot=bt==="sandbox"?kt.select(`[id="${rt}"]`):select(`[id="${rt}"]`),Rt=st.db.getActors(),Dt=st.db.getActorKeys(),Bt=st.db.getMessages(),Ft=st.db.getDiagramTitle(),Yt=getMaxMessageWidthPerActor(Rt,Bt,st);conf$3.height=calculateActorMargins(Rt,Yt),svgDraw$1.insertComputerIcon(Ot),svgDraw$1.insertDatabaseIcon(Ot),svgDraw$1.insertClockIcon(Ot),drawActors(Ot,Rt,Dt,0,conf$3,Bt);const Jt=calculateLoopBounds(Bt,Rt,Yt,st);svgDraw$1.insertArrowHead(Ot),svgDraw$1.insertArrowCrossHead(Ot),svgDraw$1.insertArrowFilledHead(Ot),svgDraw$1.insertSequenceNumber(Ot);function Wt(pn,Hn){const yn=bounds$1.endActivation(pn);yn.starty+18>Hn&&(yn.starty=Hn-6,Hn+=12),svgDraw$1.drawActivation(Ot,yn,Hn,conf$3,actorActivations(pn.from.actor).length),bounds$1.insert(yn.startx,Hn-10,yn.stopx,Hn)}let Qt=1,rn=1;const sn=[];Bt.forEach(function(pn){let Hn,yn,mr;switch(pn.type){case st.db.LINETYPE.NOTE:yn=pn.noteModel,drawNote$1(Ot,yn);break;case st.db.LINETYPE.ACTIVE_START:bounds$1.newActivation(pn,Ot,Rt);break;case st.db.LINETYPE.ACTIVE_END:Wt(pn,bounds$1.getVerticalPos());break;case st.db.LINETYPE.LOOP_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,vn=>bounds$1.newLoop(vn));break;case st.db.LINETYPE.LOOP_END:Hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Ot,Hn,"loop",conf$3),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Hn);break;case st.db.LINETYPE.RECT_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin,vn=>bounds$1.newLoop(void 0,vn.message));break;case st.db.LINETYPE.RECT_END:Hn=bounds$1.endLoop(),svgDraw$1.drawBackgroundRect(Ot,Hn),bounds$1.models.addLoop(Hn),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos());break;case st.db.LINETYPE.OPT_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,vn=>bounds$1.newLoop(vn));break;case st.db.LINETYPE.OPT_END:Hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Ot,Hn,"opt",conf$3),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Hn);break;case st.db.LINETYPE.ALT_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,vn=>bounds$1.newLoop(vn));break;case st.db.LINETYPE.ALT_ELSE:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,vn=>bounds$1.addSectionToLoop(vn));break;case st.db.LINETYPE.ALT_END:Hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Ot,Hn,"alt",conf$3),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Hn);break;case st.db.LINETYPE.PAR_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,vn=>bounds$1.newLoop(vn));break;case st.db.LINETYPE.PAR_AND:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,vn=>bounds$1.addSectionToLoop(vn));break;case st.db.LINETYPE.PAR_END:Hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Ot,Hn,"par",conf$3),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Hn);break;case st.db.LINETYPE.AUTONUMBER:Qt=pn.message.start||Qt,rn=pn.message.step||rn,pn.message.visible?st.db.enableSequenceNumbers():st.db.disableSequenceNumbers();break;case st.db.LINETYPE.CRITICAL_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,vn=>bounds$1.newLoop(vn));break;case st.db.LINETYPE.CRITICAL_OPTION:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,vn=>bounds$1.addSectionToLoop(vn));break;case st.db.LINETYPE.CRITICAL_END:Hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Ot,Hn,"critical",conf$3),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Hn);break;case st.db.LINETYPE.BREAK_START:adjustLoopHeightForWrap(Jt,pn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,vn=>bounds$1.newLoop(vn));break;case st.db.LINETYPE.BREAK_END:Hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Ot,Hn,"break",conf$3),bounds$1.bumpVerticalPos(Hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Hn);break;default:try{mr=pn.msgModel,mr.starty=bounds$1.getVerticalPos(),mr.sequenceIndex=Qt,mr.sequenceVisible=st.db.showSequenceNumbers();const vn=boundMessage(Ot,mr);sn.push({messageModel:mr,lineStartY:vn}),bounds$1.models.addMessage(mr)}catch(vn){log$1.error("error while drawing message",vn)}}[st.db.LINETYPE.SOLID_OPEN,st.db.LINETYPE.DOTTED_OPEN,st.db.LINETYPE.SOLID,st.db.LINETYPE.DOTTED,st.db.LINETYPE.SOLID_CROSS,st.db.LINETYPE.DOTTED_CROSS,st.db.LINETYPE.SOLID_POINT,st.db.LINETYPE.DOTTED_POINT].includes(pn.type)&&(Qt=Qt+rn)}),sn.forEach(pn=>drawMessage(Ot,pn.messageModel,pn.lineStartY,st)),conf$3.mirrorActors&&(bounds$1.bumpVerticalPos(conf$3.boxMargin*2),drawActors(Ot,Rt,Dt,bounds$1.getVerticalPos(),conf$3,Bt),bounds$1.bumpVerticalPos(conf$3.boxMargin),fixLifeLineHeights(Ot,bounds$1.getVerticalPos()));const on=drawActorsPopup(Ot,Rt,Dt,Lt),{bounds:hn}=bounds$1.getBounds();log$1.debug("For line height fix Querying: #"+rt+" .actor-line"),selectAll("#"+rt+" .actor-line").attr("y2",hn.stopy);let Cn=hn.stopy-hn.starty;Cn<on.maxHeight&&(Cn=on.maxHeight);let Tn=Cn+2*conf$3.diagramMarginY;conf$3.mirrorActors&&(Tn=Tn-conf$3.boxMargin+conf$3.bottomMarginAdj);let kn=hn.stopx-hn.startx;kn<on.maxWidth&&(kn=on.maxWidth);const In=kn+2*conf$3.diagramMarginX;Ft&&Ot.append("text").text(Ft).attr("x",(hn.stopx-hn.startx)/2-2*conf$3.diagramMarginX).attr("y",-25),configureSvgSize(Ot,Tn,In,conf$3.useMaxWidth);const Ln=Ft?40:0;Ot.attr("viewBox",hn.startx-conf$3.diagramMarginX+" -"+(conf$3.diagramMarginY+Ln)+" "+In+" "+(Tn+Ln)),log$1.debug("models:",bounds$1.models)};function getMaxMessageWidthPerActor(nt,rt,it){const st={};return rt.forEach(function(bt){if(nt[bt.to]&&nt[bt.from]){const wt=nt[bt.to];if(bt.placement===it.db.PLACEMENT.LEFTOF&&!wt.prevActor||bt.placement===it.db.PLACEMENT.RIGHTOF&&!wt.nextActor)return;const Et=bt.placement!==void 0,kt=!Et,Lt=Et?noteFont(conf$3):messageFont(conf$3),Ot=bt.wrap?utils.wrapLabel(bt.message,conf$3.width-2*conf$3.wrapPadding,Lt):bt.message,Dt=utils.calculateTextDimensions(Ot,Lt).width+2*conf$3.wrapPadding;kt&&bt.from===wt.nextActor?st[bt.to]=Math.max(st[bt.to]||0,Dt):kt&&bt.from===wt.prevActor?st[bt.from]=Math.max(st[bt.from]||0,Dt):kt&&bt.from===bt.to?(st[bt.from]=Math.max(st[bt.from]||0,Dt/2),st[bt.to]=Math.max(st[bt.to]||0,Dt/2)):bt.placement===it.db.PLACEMENT.RIGHTOF?st[bt.from]=Math.max(st[bt.from]||0,Dt):bt.placement===it.db.PLACEMENT.LEFTOF?st[wt.prevActor]=Math.max(st[wt.prevActor]||0,Dt):bt.placement===it.db.PLACEMENT.OVER&&(wt.prevActor&&(st[wt.prevActor]=Math.max(st[wt.prevActor]||0,Dt/2)),wt.nextActor&&(st[bt.from]=Math.max(st[bt.from]||0,Dt/2)))}}),log$1.debug("maxMessageWidthPerActor:",st),st}const getRequiredPopupWidth=function(nt){let rt=0;const it=actorFont(conf$3);for(const st in nt.links){const wt=utils.calculateTextDimensions(st,it).width+2*conf$3.wrapPadding+2*conf$3.boxMargin;rt<wt&&(rt=wt)}return rt};function calculateActorMargins(nt,rt){let it=0;Object.keys(nt).forEach(st=>{const bt=nt[st];bt.wrap&&(bt.description=utils.wrapLabel(bt.description,conf$3.width-2*conf$3.wrapPadding,actorFont(conf$3)));const wt=utils.calculateTextDimensions(bt.description,actorFont(conf$3));bt.width=bt.wrap?conf$3.width:Math.max(conf$3.width,wt.width+2*conf$3.wrapPadding),bt.height=bt.wrap?Math.max(wt.height,conf$3.height):conf$3.height,it=Math.max(it,bt.height)});for(const st in rt){const bt=nt[st];if(!bt)continue;const wt=nt[bt.nextActor];if(!wt)continue;const kt=rt[st]+conf$3.actorMargin-bt.width/2-wt.width/2;bt.margin=Math.max(kt,conf$3.actorMargin)}return Math.max(it,conf$3.height)}const buildNoteModel=function(nt,rt,it){const st=rt[nt.from].x,bt=rt[nt.to].x,wt=nt.wrap&&nt.message;let Et=utils.calculateTextDimensions(wt?utils.wrapLabel(nt.message,conf$3.width,noteFont(conf$3)):nt.message,noteFont(conf$3));const kt={width:wt?conf$3.width:Math.max(conf$3.width,Et.width+2*conf$3.noteMargin),height:0,startx:rt[nt.from].x,stopx:0,starty:0,stopy:0,message:nt.message};return nt.placement===it.db.PLACEMENT.RIGHTOF?(kt.width=wt?Math.max(conf$3.width,Et.width):Math.max(rt[nt.from].width/2+rt[nt.to].width/2,Et.width+2*conf$3.noteMargin),kt.startx=st+(rt[nt.from].width+conf$3.actorMargin)/2):nt.placement===it.db.PLACEMENT.LEFTOF?(kt.width=Math.max(wt?conf$3.width:rt[nt.from].width/2+rt[nt.to].width/2,Et.width+2*conf$3.noteMargin),kt.startx=st-kt.width+(rt[nt.from].width-conf$3.actorMargin)/2):nt.to===nt.from?(Et=utils.calculateTextDimensions(wt?utils.wrapLabel(nt.message,Math.max(conf$3.width,rt[nt.from].width),noteFont(conf$3)):nt.message,noteFont(conf$3)),kt.width=wt?Math.max(conf$3.width,rt[nt.from].width):Math.max(rt[nt.from].width,conf$3.width,Et.width+2*conf$3.noteMargin),kt.startx=st+(rt[nt.from].width-kt.width)/2):(kt.width=Math.abs(st+rt[nt.from].width/2-(bt+rt[nt.to].width/2))+conf$3.actorMargin,kt.startx=st<bt?st+rt[nt.from].width/2-conf$3.actorMargin/2:bt+rt[nt.to].width/2-conf$3.actorMargin/2),wt&&(kt.message=utils.wrapLabel(nt.message,kt.width-2*conf$3.wrapPadding,noteFont(conf$3))),log$1.debug(`NM:[${kt.startx},${kt.stopx},${kt.starty},${kt.stopy}:${kt.width},${kt.height}=${nt.message}]`),kt},buildMessageModel=function(nt,rt,it){let st=!1;if([it.db.LINETYPE.SOLID_OPEN,it.db.LINETYPE.DOTTED_OPEN,it.db.LINETYPE.SOLID,it.db.LINETYPE.DOTTED,it.db.LINETYPE.SOLID_CROSS,it.db.LINETYPE.DOTTED_CROSS,it.db.LINETYPE.SOLID_POINT,it.db.LINETYPE.DOTTED_POINT].includes(nt.type)&&(st=!0),!st)return{};const bt=activationBounds(nt.from,rt),wt=activationBounds(nt.to,rt),Et=bt[0]<=wt[0]?1:0,kt=bt[0]<wt[0]?0:1,Lt=[...bt,...wt],Ot=Math.abs(wt[kt]-bt[Et]);nt.wrap&&nt.message&&(nt.message=utils.wrapLabel(nt.message,Math.max(Ot+2*conf$3.wrapPadding,conf$3.width),messageFont(conf$3)));const Rt=utils.calculateTextDimensions(nt.message,messageFont(conf$3));return{width:Math.max(nt.wrap?0:Rt.width+2*conf$3.wrapPadding,Ot+2*conf$3.wrapPadding,conf$3.width),height:0,startx:bt[Et],stopx:wt[kt],starty:0,stopy:0,message:nt.message,type:nt.type,wrap:nt.wrap,fromBounds:Math.min.apply(null,Lt),toBounds:Math.max.apply(null,Lt)}},calculateLoopBounds=function(nt,rt,it,st){const bt={},wt=[];let Et,kt,Lt;return nt.forEach(function(Ot){switch(Ot.id=utils.random({length:10}),Ot.type){case st.db.LINETYPE.LOOP_START:case st.db.LINETYPE.ALT_START:case st.db.LINETYPE.OPT_START:case st.db.LINETYPE.PAR_START:case st.db.LINETYPE.CRITICAL_START:case st.db.LINETYPE.BREAK_START:wt.push({id:Ot.id,msg:Ot.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case st.db.LINETYPE.ALT_ELSE:case st.db.LINETYPE.PAR_AND:case st.db.LINETYPE.CRITICAL_OPTION:Ot.message&&(Et=wt.pop(),bt[Et.id]=Et,bt[Ot.id]=Et,wt.push(Et));break;case st.db.LINETYPE.LOOP_END:case st.db.LINETYPE.ALT_END:case st.db.LINETYPE.OPT_END:case st.db.LINETYPE.PAR_END:case st.db.LINETYPE.CRITICAL_END:case st.db.LINETYPE.BREAK_END:Et=wt.pop(),bt[Et.id]=Et;break;case st.db.LINETYPE.ACTIVE_START:{const Dt=rt[Ot.from?Ot.from.actor:Ot.to.actor],Bt=actorActivations(Ot.from?Ot.from.actor:Ot.to.actor).length,Ft=Dt.x+Dt.width/2+(Bt-1)*conf$3.activationWidth/2,Yt={startx:Ft,stopx:Ft+conf$3.activationWidth,actor:Ot.from.actor,enabled:!0};bounds$1.activations.push(Yt)}break;case st.db.LINETYPE.ACTIVE_END:{const Dt=bounds$1.activations.map(Bt=>Bt.actor).lastIndexOf(Ot.from.actor);delete bounds$1.activations.splice(Dt,1)[0]}break}Ot.placement!==void 0?(kt=buildNoteModel(Ot,rt,st),Ot.noteModel=kt,wt.forEach(Dt=>{Et=Dt,Et.from=Math.min(Et.from,kt.startx),Et.to=Math.max(Et.to,kt.startx+kt.width),Et.width=Math.max(Et.width,Math.abs(Et.from-Et.to))-conf$3.labelBoxWidth})):(Lt=buildMessageModel(Ot,rt,st),Ot.msgModel=Lt,Lt.startx&&Lt.stopx&&wt.length>0&&wt.forEach(Dt=>{if(Et=Dt,Lt.startx===Lt.stopx){const Bt=rt[Ot.from],Ft=rt[Ot.to];Et.from=Math.min(Bt.x-Lt.width/2,Bt.x-Bt.width/2,Et.from),Et.to=Math.max(Ft.x+Lt.width/2,Ft.x+Bt.width/2,Et.to),Et.width=Math.max(Et.width,Math.abs(Et.to-Et.from))-conf$3.labelBoxWidth}else Et.from=Math.min(Lt.startx,Et.from),Et.to=Math.max(Lt.stopx,Et.to),Et.width=Math.max(Et.width,Lt.width)-conf$3.labelBoxWidth}))}),bounds$1.activations=[],log$1.debug("Loop type widths:",bt),bt},sequenceRenderer={bounds:bounds$1,drawActors,drawActorsPopup,setConf:setConf$4,draw:draw$4};var parser$1=function(){var nt=function(rr,wr,fr,gr){for(fr=fr||{},gr=rr.length;gr--;fr[rr[gr]]=wr);return fr},rt=[1,2],it=[1,3],st=[1,5],bt=[1,7],wt=[2,5],Et=[1,15],kt=[1,17],Lt=[1,21],Ot=[1,22],Rt=[1,23],Dt=[1,24],Bt=[1,37],Ft=[1,25],Yt=[1,26],Jt=[1,27],Wt=[1,28],Qt=[1,29],rn=[1,32],sn=[1,33],on=[1,34],hn=[1,35],mn=[1,36],Cn=[1,39],Tn=[1,40],kn=[1,41],In=[1,42],Ln=[1,38],pn=[1,45],Hn=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],yn=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],mr=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],vn=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],yr={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(wr,fr,gr,Lr,Pr,lr,qr){var sr=lr.length-1;switch(Pr){case 4:return Lr.setRootDoc(lr[sr]),lr[sr];case 5:this.$=[];break;case 6:lr[sr]!="nl"&&(lr[sr-1].push(lr[sr]),this.$=lr[sr-1]);break;case 7:case 8:this.$=lr[sr];break;case 9:this.$="nl";break;case 12:this.$=lr[sr];break;case 13:const Pn=lr[sr-1];Pn.description=Lr.trimColon(lr[sr]),this.$=Pn;break;case 14:this.$={stmt:"relation",state1:lr[sr-2],state2:lr[sr]};break;case 15:const nn=Lr.trimColon(lr[sr]);this.$={stmt:"relation",state1:lr[sr-3],state2:lr[sr-1],description:nn};break;case 19:this.$={stmt:"state",id:lr[sr-3],type:"default",description:"",doc:lr[sr-1]};break;case 20:var pr=lr[sr],Er=lr[sr-2].trim();if(lr[sr].match(":")){var ir=lr[sr].split(":");pr=ir[0],Er=[Er,ir[1]]}this.$={stmt:"state",id:pr,type:"default",description:Er};break;case 21:this.$={stmt:"state",id:lr[sr-3],type:"default",description:lr[sr-5],doc:lr[sr-1]};break;case 22:this.$={stmt:"state",id:lr[sr],type:"fork"};break;case 23:this.$={stmt:"state",id:lr[sr],type:"join"};break;case 24:this.$={stmt:"state",id:lr[sr],type:"choice"};break;case 25:this.$={stmt:"state",id:Lr.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:lr[sr-1].trim(),note:{position:lr[sr-2].trim(),text:lr[sr].trim()}};break;case 30:this.$=lr[sr].trim(),Lr.setAccTitle(this.$);break;case 31:case 32:this.$=lr[sr].trim(),Lr.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:lr[sr-1].trim(),classes:lr[sr].trim()};break;case 35:this.$={stmt:"applyClass",id:lr[sr-1].trim(),styleClass:lr[sr].trim()};break;case 38:Lr.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:Lr.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:Lr.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:Lr.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:lr[sr].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:lr[sr-2].trim(),classes:[lr[sr].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:lr[sr-2].trim(),classes:[lr[sr].trim()],type:"default",description:""};break;case 50:Lr.parseDirective("%%{","open_directive");break;case 51:Lr.parseDirective(lr[sr],"type_directive");break;case 52:lr[sr]=lr[sr].trim().replace(/'/g,'"'),Lr.parseDirective(lr[sr],"arg_directive");break;case 53:Lr.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:rt,5:it,6:4,7:st,45:6,60:bt},{1:[3]},{3:8,4:rt,5:it,6:4,7:st,45:6,60:bt},{3:9,4:rt,5:it,6:4,7:st,45:6,60:bt},{3:10,4:rt,5:it,6:4,7:st,45:6,60:bt},nt([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],wt,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Ot,19:Rt,22:Dt,24:Bt,25:Ft,26:Yt,27:Jt,28:Wt,29:Qt,32:31,33:rn,35:sn,37:on,38:hn,42:mn,45:6,50:Cn,51:Tn,52:kn,53:In,56:Ln,60:bt},{47:43,48:[1,44],63:pn},nt([48,63],[2,51]),nt(Hn,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:Lt,17:Ot,19:Rt,22:Dt,24:Bt,25:Ft,26:Yt,27:Jt,28:Wt,29:Qt,32:31,33:rn,35:sn,37:on,38:hn,42:mn,45:6,50:Cn,51:Tn,52:kn,53:In,56:Ln,60:bt},nt(Hn,[2,8]),nt(Hn,[2,9]),nt(Hn,[2,10]),nt(Hn,[2,11]),nt(Hn,[2,12],{14:[1,47],15:[1,48]}),nt(Hn,[2,16]),{18:[1,49]},nt(Hn,[2,18],{20:[1,50]}),{23:[1,51]},nt(Hn,[2,22]),nt(Hn,[2,23]),nt(Hn,[2,24]),nt(Hn,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},nt(Hn,[2,28]),nt(Hn,[2,29]),{34:[1,56]},{36:[1,57]},nt(Hn,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},nt(yn,[2,44],{57:[1,61]}),nt(yn,[2,45],{57:[1,62]}),nt(Hn,[2,38]),nt(Hn,[2,39]),nt(Hn,[2,40]),nt(Hn,[2,41]),nt(mr,[2,36]),{49:63,62:[1,64]},nt(mr,[2,53]),nt(Hn,[2,7]),nt(Hn,[2,13]),{13:65,24:Bt,56:Ln},nt(Hn,[2,17]),nt(vn,wt,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},nt(Hn,[2,30]),nt(Hn,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:pn},{63:[2,52]},nt(Hn,[2,14],{14:[1,76]}),{4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Ot,19:Rt,21:[1,77],22:Dt,24:Bt,25:Ft,26:Yt,27:Jt,28:Wt,29:Qt,32:31,33:rn,35:sn,37:on,38:hn,42:mn,45:6,50:Cn,51:Tn,52:kn,53:In,56:Ln,60:bt},nt(Hn,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},nt(Hn,[2,33]),nt(Hn,[2,34]),nt(Hn,[2,35]),nt(yn,[2,46]),nt(yn,[2,47]),nt(mr,[2,37]),nt(Hn,[2,15]),nt(Hn,[2,19]),nt(vn,wt,{8:81}),nt(Hn,[2,26]),nt(Hn,[2,27]),{4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Ot,19:Rt,21:[1,82],22:Dt,24:Bt,25:Ft,26:Yt,27:Jt,28:Wt,29:Qt,32:31,33:rn,35:sn,37:on,38:hn,42:mn,45:6,50:Cn,51:Tn,52:kn,53:In,56:Ln,60:bt},nt(Hn,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(wr,fr){if(fr.recoverable)this.trace(wr);else{var gr=new Error(wr);throw gr.hash=fr,gr}},parse:function(wr){var fr=this,gr=[0],Lr=[],Pr=[null],lr=[],qr=this.table,sr="",pr=0,Er=0,ir=2,Pn=1,nn=lr.slice.call(arguments,1),fn=Object.create(this.lexer),cn={yy:{}};for(var Nn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Nn)&&(cn.yy[Nn]=this.yy[Nn]);fn.setInput(wr,cn.yy),cn.yy.lexer=fn,cn.yy.parser=this,typeof fn.yylloc>"u"&&(fn.yylloc={});var On=fn.yylloc;lr.push(On);var cr=fn.options&&fn.options.ranges;typeof cn.yy.parseError=="function"?this.parseError=cn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Bn(){var Ti;return Ti=Lr.pop()||fn.lex()||Pn,typeof Ti!="number"&&(Ti instanceof Array&&(Lr=Ti,Ti=Lr.pop()),Ti=fr.symbols_[Ti]||Ti),Ti}for(var Qn,Un,or,hr,kr={},xr,br,hi,di;;){if(Un=gr[gr.length-1],this.defaultActions[Un]?or=this.defaultActions[Un]:((Qn===null||typeof Qn>"u")&&(Qn=Bn()),or=qr[Un]&&qr[Un][Qn]),typeof or>"u"||!or.length||!or[0]){var vi="";di=[];for(xr in qr[Un])this.terminals_[xr]&&xr>ir&&di.push("'"+this.terminals_[xr]+"'");fn.showPosition?vi="Parse error on line "+(pr+1)+`:
`+fn.showPosition()+`
Expecting `+di.join(", ")+", got '"+(this.terminals_[Qn]||Qn)+"'":vi="Parse error on line "+(pr+1)+": Unexpected "+(Qn==Pn?"end of input":"'"+(this.terminals_[Qn]||Qn)+"'"),this.parseError(vi,{text:fn.match,token:this.terminals_[Qn]||Qn,line:fn.yylineno,loc:On,expected:di})}if(or[0]instanceof Array&&or.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Un+", token: "+Qn);switch(or[0]){case 1:gr.push(Qn),Pr.push(fn.yytext),lr.push(fn.yylloc),gr.push(or[1]),Qn=null,Er=fn.yyleng,sr=fn.yytext,pr=fn.yylineno,On=fn.yylloc;break;case 2:if(br=this.productions_[or[1]][1],kr.$=Pr[Pr.length-br],kr._$={first_line:lr[lr.length-(br||1)].first_line,last_line:lr[lr.length-1].last_line,first_column:lr[lr.length-(br||1)].first_column,last_column:lr[lr.length-1].last_column},cr&&(kr._$.range=[lr[lr.length-(br||1)].range[0],lr[lr.length-1].range[1]]),hr=this.performAction.apply(kr,[sr,Er,pr,cn.yy,or[1],Pr,lr].concat(nn)),typeof hr<"u")return hr;br&&(gr=gr.slice(0,-1*br*2),Pr=Pr.slice(0,-1*br),lr=lr.slice(0,-1*br)),gr.push(this.productions_[or[1]][0]),Pr.push(kr.$),lr.push(kr._$),hi=qr[gr[gr.length-2]][gr[gr.length-1]],gr.push(hi);break;case 3:return!0}}return!0}},Tr=function(){var rr={EOF:1,parseError:function(fr,gr){if(this.yy.parser)this.yy.parser.parseError(fr,gr);else throw new Error(fr)},setInput:function(wr,fr){return this.yy=fr||this.yy||{},this._input=wr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var wr=this._input[0];this.yytext+=wr,this.yyleng++,this.offset++,this.match+=wr,this.matched+=wr;var fr=wr.match(/(?:\r\n?|\n).*/g);return fr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),wr},unput:function(wr){var fr=wr.length,gr=wr.split(/(?:\r\n?|\n)/g);this._input=wr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-fr),this.offset-=fr;var Lr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),gr.length-1&&(this.yylineno-=gr.length-1);var Pr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:gr?(gr.length===Lr.length?this.yylloc.first_column:0)+Lr[Lr.length-gr.length].length-gr[0].length:this.yylloc.first_column-fr},this.options.ranges&&(this.yylloc.range=[Pr[0],Pr[0]+this.yyleng-fr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(wr){this.unput(this.match.slice(wr))},pastInput:function(){var wr=this.matched.substr(0,this.matched.length-this.match.length);return(wr.length>20?"...":"")+wr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var wr=this.match;return wr.length<20&&(wr+=this._input.substr(0,20-wr.length)),(wr.substr(0,20)+(wr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var wr=this.pastInput(),fr=new Array(wr.length+1).join("-");return wr+this.upcomingInput()+`
`+fr+"^"},test_match:function(wr,fr){var gr,Lr,Pr;if(this.options.backtrack_lexer&&(Pr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Pr.yylloc.range=this.yylloc.range.slice(0))),Lr=wr[0].match(/(?:\r\n?|\n).*/g),Lr&&(this.yylineno+=Lr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Lr?Lr[Lr.length-1].length-Lr[Lr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+wr[0].length},this.yytext+=wr[0],this.match+=wr[0],this.matches=wr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(wr[0].length),this.matched+=wr[0],gr=this.performAction.call(this,this.yy,this,fr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),gr)return gr;if(this._backtrack){for(var lr in Pr)this[lr]=Pr[lr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var wr,fr,gr,Lr;this._more||(this.yytext="",this.match="");for(var Pr=this._currentRules(),lr=0;lr<Pr.length;lr++)if(gr=this._input.match(this.rules[Pr[lr]]),gr&&(!fr||gr[0].length>fr[0].length)){if(fr=gr,Lr=lr,this.options.backtrack_lexer){if(wr=this.test_match(gr,Pr[lr]),wr!==!1)return wr;if(this._backtrack){fr=!1;continue}else return!1}else if(!this.options.flex)break}return fr?(wr=this.test_match(fr,Pr[Lr]),wr!==!1?wr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var fr=this.next();return fr||this.lex()},begin:function(fr){this.conditionStack.push(fr)},popState:function(){var fr=this.conditionStack.length-1;return fr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(fr){return fr=this.conditionStack.length-1-Math.abs(fr||0),fr>=0?this.conditionStack[fr]:"INITIAL"},pushState:function(fr){this.begin(fr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(fr,gr,Lr,Pr){switch(Lr){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),gr.yytext=gr.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),gr.yytext=gr.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),gr.yytext=gr.yytext.substr(2).trim(),31;case 69:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return gr.yytext=gr.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return rr}();yr.lexer=Tr;function Mr(){this.yy={}}return Mr.prototype=yr,yr.Parser=Mr,new Mr}();parser$1.parser=parser$1;const stateParser=parser$1,stateDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*stateDiagram/)!==null},stateDetectorV2=(nt,rt)=>{var it;return!!(nt.match(/^\s*stateDiagram-v2/)!==null||nt.match(/^\s*stateDiagram/)&&((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper")},DEFAULT_DIAGRAM_DIRECTION="LR",DEFAULT_NESTED_DOC_DIR="TB",STMT_STATE="state",STMT_RELATION="relation",STMT_CLASSDEF="classDef",STMT_APPLYCLASS="applyClass",DEFAULT_STATE_TYPE="default",DIVIDER_TYPE="divider",START_NODE="[*]",START_TYPE="start",END_NODE=START_NODE,END_TYPE="end",COLOR_KEYWORD="color",FILL_KEYWORD="fill",BG_FILL="bgFill",STYLECLASS_SEP=",";function newClassesList(){return{}}let direction=DEFAULT_DIAGRAM_DIRECTION,rootDoc=[],classes=newClassesList();const newDoc=()=>({relations:[],states:{},documents:{}});let documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,dividerCnt=0;const lineType={LINE:0,DOTTED_LINE:1},relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},clone=nt=>JSON.parse(JSON.stringify(nt)),parseDirective$2=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},setRootDoc=nt=>{log$1.info("Setting root doc",nt),rootDoc=nt},getRootDoc=()=>rootDoc,docTranslator=(nt,rt,it)=>{if(rt.stmt===STMT_RELATION)docTranslator(nt,rt.state1,!0),docTranslator(nt,rt.state2,!1);else if(rt.stmt===STMT_STATE&&rt.id==="[*]"&&(rt.id=it?nt.id+"_start":nt.id+"_end",rt.start=it),rt.doc){const st=[];let bt=[],wt;for(wt=0;wt<rt.doc.length;wt++)if(rt.doc[wt].type===DIVIDER_TYPE){const Et=clone(rt.doc[wt]);Et.doc=clone(bt),st.push(Et),bt=[]}else bt.push(rt.doc[wt]);if(st.length>0&&bt.length>0){const Et={stmt:STMT_STATE,id:generateId$1(),type:"divider",doc:clone(bt)};st.push(clone(Et)),rt.doc=st}rt.doc.forEach(Et=>docTranslator(rt,Et,!0))}},getRootDocV2=()=>(docTranslator({id:"root"},{id:"root",doc:rootDoc},!0),{id:"root",doc:rootDoc}),extract=nt=>{let rt;nt.doc?rt=nt.doc:rt=nt,log$1.info(rt),clear$1(!0),log$1.info("Extract",rt),rt.forEach(it=>{switch(it.stmt){case STMT_STATE:addState(it.id,it.type,it.doc,it.description,it.note,it.classes,it.styles,it.textStyles);break;case STMT_RELATION:addRelation(it.state1,it.state2,it.description);break;case STMT_CLASSDEF:addStyleClass(it.id,it.classes);break;case STMT_APPLYCLASS:setCssClass(it.id,it.styleClass);break}})},addState=function(nt,rt=DEFAULT_STATE_TYPE,it=null,st=null,bt=null,wt=null,Et=null,kt=null){currentDocument.states[nt]===void 0?(log$1.info("Adding state ",nt,st),currentDocument.states[nt]={id:nt,descriptions:[],type:rt,doc:it,note:bt,classes:[],styles:[],textStyles:[]}):(currentDocument.states[nt].doc||(currentDocument.states[nt].doc=it),currentDocument.states[nt].type||(currentDocument.states[nt].type=rt)),st&&(log$1.info("Setting state description",nt,st),typeof st=="string"&&addDescription(nt,st.trim()),typeof st=="object"&&st.forEach(Lt=>addDescription(nt,Lt.trim()))),bt&&(currentDocument.states[nt].note=bt,currentDocument.states[nt].note.text=common$1.sanitizeText(currentDocument.states[nt].note.text,getConfig$1())),wt&&(log$1.info("Setting state classes",nt,wt),(typeof wt=="string"?[wt]:wt).forEach(Ot=>setCssClass(nt,Ot.trim()))),Et&&(log$1.info("Setting state styles",nt,Et),(typeof Et=="string"?[Et]:Et).forEach(Ot=>setStyle(nt,Ot.trim()))),kt&&(log$1.info("Setting state styles",nt,Et),(typeof kt=="string"?[kt]:kt).forEach(Ot=>setTextStyle(nt,Ot.trim())))},clear$1=function(nt){documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,classes=newClassesList(),nt||clear$g()},getState=function(nt){return currentDocument.states[nt]},getStates=function(){return currentDocument.states},logDocuments=function(){log$1.info("Documents = ",documents)},getRelations=function(){return currentDocument.relations};function startIdIfNeeded(nt=""){let rt=nt;return nt===START_NODE&&(startEndCount++,rt=`${START_TYPE}${startEndCount}`),rt}function startTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===START_NODE?START_TYPE:rt}function endIdIfNeeded(nt=""){let rt=nt;return nt===END_NODE&&(startEndCount++,rt=`${END_TYPE}${startEndCount}`),rt}function endTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===END_NODE?END_TYPE:rt}function addRelationObjs(nt,rt,it){let st=startIdIfNeeded(nt.id),bt=startTypeIfNeeded(nt.id,nt.type),wt=startIdIfNeeded(rt.id),Et=startTypeIfNeeded(rt.id,rt.type);addState(st,bt,nt.doc,nt.description,nt.note,nt.classes,nt.styles,nt.textStyles),addState(wt,Et,rt.doc,rt.description,rt.note,rt.classes,rt.styles,rt.textStyles),currentDocument.relations.push({id1:st,id2:wt,relationTitle:common$1.sanitizeText(it,getConfig$1())})}const addRelation=function(nt,rt,it){if(typeof nt=="object")addRelationObjs(nt,rt,it);else{const st=startIdIfNeeded(nt),bt=startTypeIfNeeded(nt),wt=endIdIfNeeded(rt),Et=endTypeIfNeeded(rt);addState(st,bt),addState(wt,Et),currentDocument.relations.push({id1:st,id2:wt,title:common$1.sanitizeText(it,getConfig$1())})}},addDescription=function(nt,rt){const it=currentDocument.states[nt],st=rt.startsWith(":")?rt.replace(":","").trim():rt;it.descriptions.push(common$1.sanitizeText(st,getConfig$1()))},cleanupLabel=function(nt){return nt.substring(0,1)===":"?nt.substr(2).trim():nt.trim()},getDividerId=()=>(dividerCnt++,"divider-id-"+dividerCnt),addStyleClass=function(nt,rt=""){classes[nt]===void 0&&(classes[nt]={id:nt,styles:[],textStyles:[]});const it=classes[nt];rt!=null&&rt.split(STYLECLASS_SEP).forEach(st=>{const bt=st.replace(/([^;]*);/,"$1").trim();if(st.match(COLOR_KEYWORD)){const Et=bt.replace(FILL_KEYWORD,BG_FILL).replace(COLOR_KEYWORD,FILL_KEYWORD);it.textStyles.push(Et)}it.styles.push(bt)})},getClasses$1=function(){return classes},setCssClass=function(nt,rt){nt.split(",").forEach(function(it){let st=getState(it);if(st===void 0){const bt=it.trim();addState(bt),st=getState(bt)}st.classes.push(rt)})},setStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},setTextStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},getDirection=()=>direction,setDirection=nt=>{direction=nt},trimColon=nt=>nt&&nt[0]===":"?nt.substr(1).trim():nt.trim(),stateDb={parseDirective:parseDirective$2,getConfig:()=>getConfig$1().state,addState,clear:clear$1,getState,getStates,getRelations,getClasses:getClasses$1,getDirection,addRelation,getDividerId,setDirection,cleanupLabel,lineType,relationType,logDocuments,getRootDoc,setRootDoc,getRootDocV2,extract,trimColon,getAccTitle,setAccTitle,getAccDescription,setAccDescription,addStyleClass,setCssClass,addDescription,setDiagramTitle,getDiagramTitle},drawStartState=nt=>nt.append("circle").attr("class","start-state").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit),drawDivider=nt=>nt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",getConfig$1().state.textHeight).attr("class","divider").attr("x2",getConfig$1().state.textHeight*2).attr("y1",0).attr("y2",0),drawSimpleState=(nt,rt)=>{const it=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+2*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),st=it.node().getBBox();return nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",st.width+2*getConfig$1().state.padding).attr("height",st.height+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),it},drawDescrState=(nt,rt)=>{const it=function(Bt,Ft,Yt){const Jt=Bt.append("tspan").attr("x",2*getConfig$1().state.padding).text(Ft);Yt||Jt.attr("dy",getConfig$1().state.textHeight)},bt=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+1.3*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.descriptions[0]).node().getBBox(),wt=bt.height,Et=nt.append("text").attr("x",getConfig$1().state.padding).attr("y",wt+getConfig$1().state.padding*.4+getConfig$1().state.dividerMargin+getConfig$1().state.textHeight).attr("class","state-description");let kt=!0,Lt=!0;rt.descriptions.forEach(function(Bt){kt||(it(Et,Bt,Lt),Lt=!1),kt=!1});const Ot=nt.append("line").attr("x1",getConfig$1().state.padding).attr("y1",getConfig$1().state.padding+wt+getConfig$1().state.dividerMargin/2).attr("y2",getConfig$1().state.padding+wt+getConfig$1().state.dividerMargin/2).attr("class","descr-divider"),Rt=Et.node().getBBox(),Dt=Math.max(Rt.width,bt.width);return Ot.attr("x2",Dt+3*getConfig$1().state.padding),nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",Dt+2*getConfig$1().state.padding).attr("height",Rt.height+wt+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),nt},addTitleAndBox=(nt,rt,it)=>{const st=getConfig$1().state.padding,bt=2*getConfig$1().state.padding,wt=nt.node().getBBox(),Et=wt.width,kt=wt.x,Lt=nt.append("text").attr("x",0).attr("y",getConfig$1().state.titleShift).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),Rt=Lt.node().getBBox().width+bt;let Dt=Math.max(Rt,Et);Dt===Et&&(Dt=Dt+bt);let Bt;const Ft=nt.node().getBBox();rt.doc,Bt=kt-st,Rt>Et&&(Bt=(Et-Dt)/2+st),Math.abs(kt-Ft.x)<st&&Rt>Et&&(Bt=kt-(Rt-Et)/2);const Yt=1-getConfig$1().state.textHeight;return nt.insert("rect",":first-child").attr("x",Bt).attr("y",Yt).attr("class",it?"alt-composit":"composit").attr("width",Dt).attr("height",Ft.height+getConfig$1().state.textHeight+getConfig$1().state.titleShift+1).attr("rx","0"),Lt.attr("x",Bt+st),Rt<=Et&&Lt.attr("x",kt+(Dt-bt)/2-Rt/2+st),nt.insert("rect",":first-child").attr("x",Bt).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",Dt).attr("height",getConfig$1().state.textHeight*3).attr("rx",getConfig$1().state.radius),nt.insert("rect",":first-child").attr("x",Bt).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",Dt).attr("height",Ft.height+3+2*getConfig$1().state.textHeight).attr("rx",getConfig$1().state.radius),nt},drawEndState=nt=>(nt.append("circle").attr("class","end-state-outer").attr("r",getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding),nt.append("circle").attr("class","end-state-inner").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2)),drawForkJoinState=(nt,rt)=>{let it=getConfig$1().state.forkWidth,st=getConfig$1().state.forkHeight;if(rt.parentId){let bt=it;it=st,st=bt}return nt.append("rect").style("stroke","black").style("fill","black").attr("width",it).attr("height",st).attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding)},_drawLongText=(nt,rt,it,st)=>{let bt=0;const wt=st.append("text");wt.style("text-anchor","start"),wt.attr("class","noteText");let Et=nt.replace(/\r\n/g,"<br/>");Et=Et.replace(/\n/g,"<br/>");const kt=Et.split(common$1.lineBreakRegex);let Lt=1.25*getConfig$1().state.noteMargin;for(const Ot of kt){const Rt=Ot.trim();if(Rt.length>0){const Dt=wt.append("tspan");if(Dt.text(Rt),Lt===0){const Bt=Dt.node().getBBox();Lt+=Bt.height}bt+=Lt,Dt.attr("x",rt+getConfig$1().state.noteMargin),Dt.attr("y",it+bt+1.25*getConfig$1().state.noteMargin)}}return{textWidth:wt.node().getBBox().width,textHeight:bt}},drawNote=(nt,rt)=>{rt.attr("class","state-note");const it=rt.append("rect").attr("x",0).attr("y",getConfig$1().state.padding),st=rt.append("g"),{textWidth:bt,textHeight:wt}=_drawLongText(nt,0,0,st);return it.attr("height",wt+2*getConfig$1().state.noteMargin),it.attr("width",bt+getConfig$1().state.noteMargin*2),it},drawState=function(nt,rt){const it=rt.id,st={id:it,label:rt.id,width:0,height:0},bt=nt.append("g").attr("id",it).attr("class","stateGroup");rt.type==="start"&&drawStartState(bt),rt.type==="end"&&drawEndState(bt),(rt.type==="fork"||rt.type==="join")&&drawForkJoinState(bt,rt),rt.type==="note"&&drawNote(rt.note.text,bt),rt.type==="divider"&&drawDivider(bt),rt.type==="default"&&rt.descriptions.length===0&&drawSimpleState(bt,rt),rt.type==="default"&&rt.descriptions.length>0&&drawDescrState(bt,rt);const wt=bt.node().getBBox();return st.width=wt.width+2*getConfig$1().state.padding,st.height=wt.height+2*getConfig$1().state.padding,st};let edgeCount=0;const drawEdge=function(nt,rt,it){const st=function(Lt){switch(Lt){case stateDb.relationType.AGGREGATION:return"aggregation";case stateDb.relationType.EXTENSION:return"extension";case stateDb.relationType.COMPOSITION:return"composition";case stateDb.relationType.DEPENDENCY:return"dependency"}};rt.points=rt.points.filter(Lt=>!Number.isNaN(Lt.y));const bt=rt.points,wt=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}).curve(curveBasis),Et=nt.append("path").attr("d",wt(bt)).attr("id","edge"+edgeCount).attr("class","transition");let kt="";if(getConfig$1().state.arrowMarkerAbsolute&&(kt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,kt=kt.replace(/\(/g,"\\("),kt=kt.replace(/\)/g,"\\)")),Et.attr("marker-end","url("+kt+"#"+st(stateDb.relationType.DEPENDENCY)+"End)"),it.title!==void 0){const Lt=nt.append("g").attr("class","stateLabel"),{x:Ot,y:Rt}=utils.calcLabelPosition(rt.points),Dt=common$1.getRows(it.title);let Bt=0;const Ft=[];let Yt=0,Jt=0;for(let rn=0;rn<=Dt.length;rn++){const sn=Lt.append("text").attr("text-anchor","middle").text(Dt[rn]).attr("x",Ot).attr("y",Rt+Bt),on=sn.node().getBBox();Yt=Math.max(Yt,on.width),Jt=Math.min(Jt,on.x),log$1.info(on.x,Ot,Rt+Bt),Bt===0&&(Bt=sn.node().getBBox().height,log$1.info("Title height",Bt,Rt)),Ft.push(sn)}let Wt=Bt*Dt.length;if(Dt.length>1){const rn=(Dt.length-1)*Bt*.5;Ft.forEach((sn,on)=>sn.attr("y",Rt+on*Bt-rn)),Wt=Bt*Dt.length}const Qt=Lt.node().getBBox();Lt.insert("rect",":first-child").attr("class","box").attr("x",Ot-Yt/2-getConfig$1().state.padding/2).attr("y",Rt-Wt/2-getConfig$1().state.padding/2-3.5).attr("width",Yt+getConfig$1().state.padding).attr("height",Wt+getConfig$1().state.padding),log$1.info(Qt)}edgeCount++};let conf$2;const transformationLog={},setConf$3=function(){},insertMarkers=function(nt){nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},draw$3=function(nt,rt,it,st){conf$2=getConfig$1().state;const bt=getConfig$1().securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const Et=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body"),kt=bt==="sandbox"?wt.nodes()[0].contentDocument:document;log$1.debug("Rendering diagram "+nt);const Lt=Et.select(`[id='${rt}']`);insertMarkers(Lt),new Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const Rt=st.db.getRootDoc();renderDoc(Rt,Lt,void 0,!1,Et,kt,st);const Dt=conf$2.padding,Bt=Lt.node().getBBox(),Ft=Bt.width+Dt*2,Yt=Bt.height+Dt*2,Jt=Ft*1.75;configureSvgSize(Lt,Yt,Jt,conf$2.useMaxWidth),Lt.attr("viewBox",`${Bt.x-conf$2.padding}  ${Bt.y-conf$2.padding} `+Ft+" "+Yt)},getLabelWidth=nt=>nt?nt.length*conf$2.fontSizeFactor:1,renderDoc=(nt,rt,it,st,bt,wt,Et)=>{const kt=new Graph({compound:!0,multigraph:!0});let Lt,Ot=!0;for(Lt=0;Lt<nt.length;Lt++)if(nt[Lt].stmt==="relation"){Ot=!1;break}it?kt.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:Ot?1:conf$2.edgeLengthFactor,nodeSep:Ot?1:50,isMultiGraph:!0}):kt.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:Ot?1:conf$2.edgeLengthFactor,nodeSep:Ot?1:50,ranker:"tight-tree",isMultiGraph:!0}),kt.setDefaultEdgeLabel(function(){return{}}),Et.db.extract(nt);const Rt=Et.db.getStates(),Dt=Et.db.getRelations(),Bt=Object.keys(Rt);for(const Qt of Bt){const rn=Rt[Qt];it&&(rn.parentId=it);let sn;if(rn.doc){let on=rt.append("g").attr("id",rn.id).attr("class","stateGroup");sn=renderDoc(rn.doc,on,rn.id,!st,bt,wt,Et);{on=addTitleAndBox(on,rn,st);let hn=on.node().getBBox();sn.width=hn.width,sn.height=hn.height+conf$2.padding/2,transformationLog[rn.id]={y:conf$2.compositTitleSize}}}else sn=drawState(rt,rn);if(rn.note){const on={descriptions:[],id:rn.id+"-note",note:rn.note,type:"note"},hn=drawState(rt,on);rn.note.position==="left of"?(kt.setNode(sn.id+"-note",hn),kt.setNode(sn.id,sn)):(kt.setNode(sn.id,sn),kt.setNode(sn.id+"-note",hn)),kt.setParent(sn.id,sn.id+"-group"),kt.setParent(sn.id+"-note",sn.id+"-group")}else kt.setNode(sn.id,sn)}log$1.debug("Count=",kt.nodeCount(),kt);let Ft=0;Dt.forEach(function(Qt){Ft++,log$1.debug("Setting edge",Qt),kt.setEdge(Qt.id1,Qt.id2,{relation:Qt,width:getLabelWidth(Qt.title),height:conf$2.labelHeight*common$1.getRows(Qt.title).length,labelpos:"c"},"id"+Ft)}),layout(kt),log$1.debug("Graph after layout",kt.nodes());const Yt=rt.node();kt.nodes().forEach(function(Qt){Qt!==void 0&&kt.node(Qt)!==void 0?(log$1.warn("Node "+Qt+": "+JSON.stringify(kt.node(Qt))),bt.select("#"+Yt.id+" #"+Qt).attr("transform","translate("+(kt.node(Qt).x-kt.node(Qt).width/2)+","+(kt.node(Qt).y+(transformationLog[Qt]?transformationLog[Qt].y:0)-kt.node(Qt).height/2)+" )"),bt.select("#"+Yt.id+" #"+Qt).attr("data-x-shift",kt.node(Qt).x-kt.node(Qt).width/2),wt.querySelectorAll("#"+Yt.id+" #"+Qt+" .divider").forEach(sn=>{const on=sn.parentElement;let hn=0,mn=0;on&&(on.parentElement&&(hn=on.parentElement.getBBox().width),mn=parseInt(on.getAttribute("data-x-shift"),10),Number.isNaN(mn)&&(mn=0)),sn.setAttribute("x1",0-mn+8),sn.setAttribute("x2",hn-mn-8)})):log$1.debug("No Node "+Qt+": "+JSON.stringify(kt.node(Qt)))});let Jt=Yt.getBBox();kt.edges().forEach(function(Qt){Qt!==void 0&&kt.edge(Qt)!==void 0&&(log$1.debug("Edge "+Qt.v+" -> "+Qt.w+": "+JSON.stringify(kt.edge(Qt))),drawEdge(rt,kt.edge(Qt),kt.edge(Qt).relation))}),Jt=Yt.getBBox();const Wt={id:it||"root",label:it||"root",width:0,height:0};return Wt.width=Jt.width+2*conf$2.padding,Wt.height=Jt.height+2*conf$2.padding,log$1.debug("Doc rendered",Wt,kt),Wt},stateRenderer={setConf:setConf$3,draw:draw$3},SHAPE_STATE="rect",SHAPE_STATE_WITH_DESC="rectWithTitle",SHAPE_START="start",SHAPE_END="end",SHAPE_DIVIDER="divider",SHAPE_GROUP="roundedWithTitle",SHAPE_NOTE="note",SHAPE_NOTEGROUP="noteGroup",CSS_DIAGRAM="statediagram",CSS_STATE="state",CSS_DIAGRAM_STATE=`${CSS_DIAGRAM}-${CSS_STATE}`,CSS_EDGE="transition",CSS_NOTE="note",CSS_NOTE_EDGE="note-edge",CSS_EDGE_NOTE_EDGE=`${CSS_EDGE} ${CSS_NOTE_EDGE}`,CSS_DIAGRAM_NOTE=`${CSS_DIAGRAM}-${CSS_NOTE}`,CSS_CLUSTER="cluster",CSS_DIAGRAM_CLUSTER=`${CSS_DIAGRAM}-${CSS_CLUSTER}`,CSS_CLUSTER_ALT="cluster-alt",CSS_DIAGRAM_CLUSTER_ALT=`${CSS_DIAGRAM}-${CSS_CLUSTER_ALT}`,PARENT="parent",NOTE="note",DOMID_STATE="state",DOMID_TYPE_SPACER="----",NOTE_ID=`${DOMID_TYPE_SPACER}${NOTE}`,PARENT_ID=`${DOMID_TYPE_SPACER}${PARENT}`,G_EDGE_STYLE="fill:none",G_EDGE_ARROWHEADSTYLE="fill: #333",G_EDGE_LABELPOS="c",G_EDGE_LABELTYPE="text",G_EDGE_THICKNESS="normal";let nodeDb={},graphItemCount=0;const setConf$2=function(nt){const rt=Object.keys(nt);for(const it of rt)nt[it]},getClasses=function(nt,rt){log$1.trace("Extracting classes"),rt.db.clear();try{return rt.parser.parse(nt),rt.db.extract(rt.db.getRootDocV2()),rt.db.getClasses()}catch(it){return it}};function getClassesFromDbInfo(nt){return nt==null?"":nt.classes?nt.classes.join(" "):""}function stateDomId(nt="",rt=0,it="",st=DOMID_TYPE_SPACER){const bt=it!==null&&it.length>0?`${st}${it}`:"";return`${DOMID_STATE}-${nt}${bt}-${rt}`}const setupNode=(nt,rt,it,st,bt,wt)=>{const Et=it.id,kt=getClassesFromDbInfo(st[Et]);if(Et!=="root"){let Lt=SHAPE_STATE;it.start===!0&&(Lt=SHAPE_START),it.start===!1&&(Lt=SHAPE_END),it.type!==DEFAULT_STATE_TYPE&&(Lt=it.type),nodeDb[Et]||(nodeDb[Et]={id:Et,shape:Lt,description:common$1.sanitizeText(Et,getConfig$1()),classes:`${kt} ${CSS_DIAGRAM_STATE}`});const Ot=nodeDb[Et];it.description&&(Array.isArray(Ot.description)?(Ot.shape=SHAPE_STATE_WITH_DESC,Ot.description.push(it.description)):Ot.description.length>0?(Ot.shape=SHAPE_STATE_WITH_DESC,Ot.description===Et?Ot.description=[it.description]:Ot.description=[Ot.description,it.description]):(Ot.shape=SHAPE_STATE,Ot.description=it.description),Ot.description=common$1.sanitizeTextOrArray(Ot.description,getConfig$1())),Ot.description.length===1&&Ot.shape===SHAPE_STATE_WITH_DESC&&(Ot.shape=SHAPE_STATE),!Ot.type&&it.doc&&(log$1.info("Setting cluster for ",Et,getDir(it)),Ot.type="group",Ot.dir=getDir(it),Ot.shape=it.type===DIVIDER_TYPE?SHAPE_DIVIDER:SHAPE_GROUP,Ot.classes=Ot.classes+" "+CSS_DIAGRAM_CLUSTER+" "+(wt?CSS_DIAGRAM_CLUSTER_ALT:""));const Rt={labelStyle:"",shape:Ot.shape,labelText:Ot.description,classes:Ot.classes,style:"",id:Et,dir:Ot.dir,domId:stateDomId(Et,graphItemCount),type:Ot.type,padding:15};if(it.note){const Dt={labelStyle:"",shape:SHAPE_NOTE,labelText:it.note.text,classes:CSS_DIAGRAM_NOTE,style:"",id:Et+NOTE_ID+"-"+graphItemCount,domId:stateDomId(Et,graphItemCount,NOTE),type:Ot.type,padding:15},Bt={labelStyle:"",shape:SHAPE_NOTEGROUP,labelText:it.note.text,classes:Ot.classes,style:"",id:Et+PARENT_ID,domId:stateDomId(Et,graphItemCount,PARENT),type:"group",padding:0};graphItemCount++;const Ft=Et+PARENT_ID;nt.setNode(Ft,Bt),nt.setNode(Dt.id,Dt),nt.setNode(Et,Rt),nt.setParent(Et,Ft),nt.setParent(Dt.id,Ft);let Yt=Et,Jt=Dt.id;it.note.position==="left of"&&(Yt=Dt.id,Jt=Et),nt.setEdge(Yt,Jt,{arrowhead:"none",arrowType:"",style:G_EDGE_STYLE,labelStyle:"",classes:CSS_EDGE_NOTE_EDGE,arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS})}else nt.setNode(Et,Rt)}rt&&rt.id!=="root"&&(log$1.trace("Setting node ",Et," to be child of its parent ",rt.id),nt.setParent(Et,rt.id)),it.doc&&(log$1.trace("Adding nodes children "),setupDoc(nt,it,it.doc,st,bt,!wt))},setupDoc=(nt,rt,it,st,bt,wt)=>{log$1.trace("items",it),it.forEach(Et=>{switch(Et.stmt){case STMT_STATE:setupNode(nt,rt,Et,st,bt,wt);break;case DEFAULT_STATE_TYPE:setupNode(nt,rt,Et,st,bt,wt);break;case STMT_RELATION:{setupNode(nt,rt,Et.state1,st,bt,wt),setupNode(nt,rt,Et.state2,st,bt,wt);const kt={id:"edge"+graphItemCount,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:G_EDGE_STYLE,labelStyle:"",label:common$1.sanitizeText(Et.description,getConfig$1()),arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS,classes:CSS_EDGE};nt.setEdge(Et.state1.id,Et.state2.id,kt,graphItemCount),graphItemCount++}break}})},getDir=(nt,rt=DEFAULT_NESTED_DOC_DIR)=>{let it=rt;if(nt.doc)for(let st=0;st<nt.doc.length;st++){const bt=nt.doc[st];bt.stmt==="dir"&&(it=bt.value)}return it},draw$2=function(nt,rt,it,st){log$1.info("Drawing state diagram (v2)",rt),nodeDb={},st.db.getDirection();const{securityLevel:bt,state:wt}=getConfig$1(),Et=wt.nodeSpacing||50,kt=wt.rankSpacing||50;log$1.info(st.db.getRootDocV2()),st.db.extract(st.db.getRootDocV2()),log$1.info(st.db.getRootDocV2());const Lt=st.db.getStates(),Ot=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:getDir(st.db.getRootDocV2()),nodesep:Et,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});setupNode(Ot,void 0,st.db.getRootDocV2(),Lt,st.db,!0);let Rt;bt==="sandbox"&&(Rt=select("#i"+rt));const Dt=select(bt==="sandbox"?Rt.nodes()[0].contentDocument.body:"body"),Bt=Dt.select(`[id="${rt}"]`),Ft=Dt.select("#"+rt+" g");render$1(Ft,Ot,["barb"],CSS_DIAGRAM,rt);const Yt=8;utils.insertTitle(Bt,"statediagramTitleText",wt.titleTopMargin,st.db.getDiagramTitle());const Jt=Bt.node().getBBox(),Wt=Jt.width+Yt*2,Qt=Jt.height+Yt*2;Bt.attr("class",CSS_DIAGRAM);const rn=Bt.node().getBBox();configureSvgSize(Bt,Qt,Wt,wt.useMaxWidth);const sn=`${rn.x-Yt} ${rn.y-Yt} ${Wt} ${Qt}`;log$1.debug(`viewBox ${sn}`),Bt.attr("viewBox",sn);const on=document.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const hn of on){const mn=hn.getBBox(),Cn=document.createElementNS("http://www.w3.org/2000/svg",SHAPE_STATE);Cn.setAttribute("rx",0),Cn.setAttribute("ry",0),Cn.setAttribute("width",mn.width),Cn.setAttribute("height",mn.height),hn.insertBefore(Cn,hn.firstChild)}},stateRendererV2={setConf:setConf$2,getClasses,draw:draw$2};var parser=function(){var nt=function(Jt,Wt,Qt,rn){for(Qt=Qt||{},rn=Jt.length;rn--;Qt[Jt[rn]]=Wt);return Qt},rt=[1,2],it=[1,5],st=[6,9,11,17,18,20,22,23,24,26],bt=[1,15],wt=[1,16],Et=[1,17],kt=[1,18],Lt=[1,19],Ot=[1,20],Rt=[1,24],Dt=[4,6,9,11,17,18,20,22,23,24,26],Bt={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(Wt,Qt,rn,sn,on,hn,mn){var Cn=hn.length-1;switch(on){case 1:return hn[Cn-1];case 3:this.$=[];break;case 4:hn[Cn-1].push(hn[Cn]),this.$=hn[Cn-1];break;case 5:case 6:this.$=hn[Cn];break;case 7:case 8:this.$=[];break;case 11:sn.setDiagramTitle(hn[Cn].substr(6)),this.$=hn[Cn].substr(6);break;case 12:this.$=hn[Cn].trim(),sn.setAccTitle(this.$);break;case 13:case 14:this.$=hn[Cn].trim(),sn.setAccDescription(this.$);break;case 15:sn.addSection(hn[Cn].substr(8)),this.$=hn[Cn].substr(8);break;case 16:sn.addTask(hn[Cn-1],hn[Cn]),this.$="task";break;case 18:sn.parseDirective("%%{","open_directive");break;case 19:sn.parseDirective(hn[Cn],"type_directive");break;case 20:hn[Cn]=hn[Cn].trim().replace(/'/g,'"'),sn.parseDirective(hn[Cn],"arg_directive");break;case 21:sn.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:rt,7:3,12:4,26:it},{1:[3]},nt(st,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,26:it},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:bt,18:wt,20:Et,22:kt,23:Lt,24:Ot,26:it},{1:[2,2]},{14:22,15:[1,23],29:Rt},nt([15,29],[2,19]),nt(st,[2,8],{1:[2,1]}),nt(st,[2,4]),{7:21,10:25,12:4,17:bt,18:wt,20:Et,22:kt,23:Lt,24:Ot,26:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,11]),{19:[1,26]},{21:[1,27]},nt(st,[2,14]),nt(st,[2,15]),{25:[1,28]},nt(st,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},nt(st,[2,5]),nt(st,[2,12]),nt(st,[2,13]),nt(st,[2,16]),nt(Dt,[2,9]),{14:32,29:Rt},{29:[2,20]},{11:[1,33]},nt(Dt,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(Wt,Qt){if(Qt.recoverable)this.trace(Wt);else{var rn=new Error(Wt);throw rn.hash=Qt,rn}},parse:function(Wt){var Qt=this,rn=[0],sn=[],on=[null],hn=[],mn=this.table,Cn="",Tn=0,kn=0,In=2,Ln=1,pn=hn.slice.call(arguments,1),Hn=Object.create(this.lexer),yn={yy:{}};for(var mr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mr)&&(yn.yy[mr]=this.yy[mr]);Hn.setInput(Wt,yn.yy),yn.yy.lexer=Hn,yn.yy.parser=this,typeof Hn.yylloc>"u"&&(Hn.yylloc={});var vn=Hn.yylloc;hn.push(vn);var yr=Hn.options&&Hn.options.ranges;typeof yn.yy.parseError=="function"?this.parseError=yn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Tr(){var pr;return pr=sn.pop()||Hn.lex()||Ln,typeof pr!="number"&&(pr instanceof Array&&(sn=pr,pr=sn.pop()),pr=Qt.symbols_[pr]||pr),pr}for(var Mr,rr,wr,fr,gr={},Lr,Pr,lr,qr;;){if(rr=rn[rn.length-1],this.defaultActions[rr]?wr=this.defaultActions[rr]:((Mr===null||typeof Mr>"u")&&(Mr=Tr()),wr=mn[rr]&&mn[rr][Mr]),typeof wr>"u"||!wr.length||!wr[0]){var sr="";qr=[];for(Lr in mn[rr])this.terminals_[Lr]&&Lr>In&&qr.push("'"+this.terminals_[Lr]+"'");Hn.showPosition?sr="Parse error on line "+(Tn+1)+`:
`+Hn.showPosition()+`
Expecting `+qr.join(", ")+", got '"+(this.terminals_[Mr]||Mr)+"'":sr="Parse error on line "+(Tn+1)+": Unexpected "+(Mr==Ln?"end of input":"'"+(this.terminals_[Mr]||Mr)+"'"),this.parseError(sr,{text:Hn.match,token:this.terminals_[Mr]||Mr,line:Hn.yylineno,loc:vn,expected:qr})}if(wr[0]instanceof Array&&wr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+rr+", token: "+Mr);switch(wr[0]){case 1:rn.push(Mr),on.push(Hn.yytext),hn.push(Hn.yylloc),rn.push(wr[1]),Mr=null,kn=Hn.yyleng,Cn=Hn.yytext,Tn=Hn.yylineno,vn=Hn.yylloc;break;case 2:if(Pr=this.productions_[wr[1]][1],gr.$=on[on.length-Pr],gr._$={first_line:hn[hn.length-(Pr||1)].first_line,last_line:hn[hn.length-1].last_line,first_column:hn[hn.length-(Pr||1)].first_column,last_column:hn[hn.length-1].last_column},yr&&(gr._$.range=[hn[hn.length-(Pr||1)].range[0],hn[hn.length-1].range[1]]),fr=this.performAction.apply(gr,[Cn,kn,Tn,yn.yy,wr[1],on,hn].concat(pn)),typeof fr<"u")return fr;Pr&&(rn=rn.slice(0,-1*Pr*2),on=on.slice(0,-1*Pr),hn=hn.slice(0,-1*Pr)),rn.push(this.productions_[wr[1]][0]),on.push(gr.$),hn.push(gr._$),lr=mn[rn[rn.length-2]][rn[rn.length-1]],rn.push(lr);break;case 3:return!0}}return!0}},Ft=function(){var Jt={EOF:1,parseError:function(Qt,rn){if(this.yy.parser)this.yy.parser.parseError(Qt,rn);else throw new Error(Qt)},setInput:function(Wt,Qt){return this.yy=Qt||this.yy||{},this._input=Wt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Wt=this._input[0];this.yytext+=Wt,this.yyleng++,this.offset++,this.match+=Wt,this.matched+=Wt;var Qt=Wt.match(/(?:\r\n?|\n).*/g);return Qt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Wt},unput:function(Wt){var Qt=Wt.length,rn=Wt.split(/(?:\r\n?|\n)/g);this._input=Wt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Qt),this.offset-=Qt;var sn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),rn.length-1&&(this.yylineno-=rn.length-1);var on=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:rn?(rn.length===sn.length?this.yylloc.first_column:0)+sn[sn.length-rn.length].length-rn[0].length:this.yylloc.first_column-Qt},this.options.ranges&&(this.yylloc.range=[on[0],on[0]+this.yyleng-Qt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Wt){this.unput(this.match.slice(Wt))},pastInput:function(){var Wt=this.matched.substr(0,this.matched.length-this.match.length);return(Wt.length>20?"...":"")+Wt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Wt=this.match;return Wt.length<20&&(Wt+=this._input.substr(0,20-Wt.length)),(Wt.substr(0,20)+(Wt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Wt=this.pastInput(),Qt=new Array(Wt.length+1).join("-");return Wt+this.upcomingInput()+`
`+Qt+"^"},test_match:function(Wt,Qt){var rn,sn,on;if(this.options.backtrack_lexer&&(on={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(on.yylloc.range=this.yylloc.range.slice(0))),sn=Wt[0].match(/(?:\r\n?|\n).*/g),sn&&(this.yylineno+=sn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:sn?sn[sn.length-1].length-sn[sn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Wt[0].length},this.yytext+=Wt[0],this.match+=Wt[0],this.matches=Wt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Wt[0].length),this.matched+=Wt[0],rn=this.performAction.call(this,this.yy,this,Qt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),rn)return rn;if(this._backtrack){for(var hn in on)this[hn]=on[hn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Wt,Qt,rn,sn;this._more||(this.yytext="",this.match="");for(var on=this._currentRules(),hn=0;hn<on.length;hn++)if(rn=this._input.match(this.rules[on[hn]]),rn&&(!Qt||rn[0].length>Qt[0].length)){if(Qt=rn,sn=hn,this.options.backtrack_lexer){if(Wt=this.test_match(rn,on[hn]),Wt!==!1)return Wt;if(this._backtrack){Qt=!1;continue}else return!1}else if(!this.options.flex)break}return Qt?(Wt=this.test_match(Qt,on[sn]),Wt!==!1?Wt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Qt=this.next();return Qt||this.lex()},begin:function(Qt){this.conditionStack.push(Qt)},popState:function(){var Qt=this.conditionStack.length-1;return Qt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Qt){return Qt=this.conditionStack.length-1-Math.abs(Qt||0),Qt>=0?this.conditionStack[Qt]:"INITIAL"},pushState:function(Qt){this.begin(Qt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Qt,rn,sn,on){switch(sn){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return Jt}();Bt.lexer=Ft;function Yt(){this.yy={}}return Yt.prototype=Bt,Bt.Parser=Yt,new Yt}();parser.parser=parser;const journeyParser=parser,journeyDetector=nt=>nt.match(/^\s*journey/)!==null;let currentSection="";const sections=[],tasks=[],rawTasks=[],parseDirective$1=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear=function(){sections.length=0,tasks.length=0,currentSection="",rawTasks.length=0,clear$g()},addSection=function(nt){currentSection=nt,sections.push(nt)},getSections=function(){return sections},getTasks=function(){let nt=compileTasks();const rt=100;let it=0;for(;!nt&&it<rt;)nt=compileTasks(),it++;return tasks.push(...rawTasks),tasks},updateActors=function(){const nt=[];return tasks.forEach(it=>{it.people&&nt.push(...it.people)}),[...new Set(nt)].sort()},addTask=function(nt,rt){const it=rt.substr(1).split(":");let st=0,bt=[];it.length===1?(st=Number(it[0]),bt=[]):(st=Number(it[0]),bt=it[1].split(","));const wt=bt.map(kt=>kt.trim()),Et={section:currentSection,type:currentSection,people:wt,task:nt,score:st};rawTasks.push(Et)},addTaskOrg=function(nt){const rt={section:currentSection,type:currentSection,description:nt,task:nt,classes:[]};tasks.push(rt)},compileTasks=function(){const nt=function(it){return rawTasks[it].processed};let rt=!0;for(const[it,st]of rawTasks.entries())nt(it),rt=rt&&st.processed;return rt},getActors=function(){return updateActors()},journeyDb={parseDirective:parseDirective$1,getConfig:()=>getConfig$1().journey,clear,setDiagramTitle,getDiagramTitle,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addSection,getSections,getTasks,addTask,addTaskOrg,getActors},drawRect=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},drawFace=function(nt,rt){const st=nt.append("circle").attr("cx",rt.cx).attr("cy",rt.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),bt=nt.append("g");bt.append("circle").attr("cx",rt.cx-15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),bt.append("circle").attr("cx",rt.cx+15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function wt(Lt){const Ot=arc().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",Ot).attr("transform","translate("+rt.cx+","+(rt.cy+2)+")")}function Et(Lt){const Ot=arc().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",Ot).attr("transform","translate("+rt.cx+","+(rt.cy+7)+")")}function kt(Lt){Lt.append("line").attr("class","mouth").attr("stroke",2).attr("x1",rt.cx-5).attr("y1",rt.cy+7).attr("x2",rt.cx+5).attr("y2",rt.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return rt.score>3?wt(bt):rt.score<3?Et(bt):kt(bt),st},drawCircle=function(nt,rt){const it=nt.append("circle");return it.attr("cx",rt.cx),it.attr("cy",rt.cy),it.attr("class","actor-"+rt.pos),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("r",rt.r),it.class!==void 0&&it.attr("class",it.class),rt.title!==void 0&&it.append("title").text(rt.title),it},drawText=function(nt,rt){const it=rt.text.replace(/<br\s*\/?>/gi," "),st=nt.append("text");st.attr("x",rt.x),st.attr("y",rt.y),st.attr("class","legend"),st.style("text-anchor",rt.anchor),rt.class!==void 0&&st.attr("class",rt.class);const bt=st.append("tspan");return bt.attr("x",rt.x+rt.textMargin*2),bt.text(it),st},drawLabel=function(nt,rt){function it(bt,wt,Et,kt,Lt){return bt+","+wt+" "+(bt+Et)+","+wt+" "+(bt+Et)+","+(wt+kt-Lt)+" "+(bt+Et-Lt*1.2)+","+(wt+kt)+" "+bt+","+(wt+kt)}const st=nt.append("polygon");st.attr("points",it(rt.x,rt.y,50,20,7)),st.attr("class","labelBox"),rt.y=rt.y+rt.labelMargin,rt.x=rt.x+.5*rt.labelMargin,drawText(nt,rt)},drawSection=function(nt,rt,it){const st=nt.append("g"),bt=getNoteRect();bt.x=rt.x,bt.y=rt.y,bt.fill=rt.fill,bt.width=it.width,bt.height=it.height,bt.class="journey-section section-type-"+rt.num,bt.rx=3,bt.ry=3,drawRect(st,bt),_drawTextCandidateFunc(it)(rt.text,st,bt.x,bt.y,bt.width,bt.height,{class:"journey-section section-type-"+rt.num},it,rt.colour)};let taskCount=-1;const drawTask=function(nt,rt,it){const st=rt.x+it.width/2,bt=nt.append("g");taskCount++;const wt=300+5*30;bt.append("line").attr("id","task"+taskCount).attr("x1",st).attr("y1",rt.y).attr("x2",st).attr("y2",wt).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),drawFace(bt,{cx:st,cy:300+(5-rt.score)*30,score:rt.score});const Et=getNoteRect();Et.x=rt.x,Et.y=rt.y,Et.fill=rt.fill,Et.width=it.width,Et.height=it.height,Et.class="task task-type-"+rt.num,Et.rx=3,Et.ry=3,drawRect(bt,Et);let kt=rt.x+14;rt.people.forEach(Lt=>{const Ot=rt.actors[Lt].color,Rt={cx:kt,cy:rt.y,r:7,fill:Ot,stroke:"#000",title:Lt,pos:rt.actors[Lt].position};drawCircle(bt,Rt),kt+=10}),_drawTextCandidateFunc(it)(rt.task,bt,Et.x,Et.y,Et.width,Et.height,{class:"task"},it,rt.colour)},drawBackgroundRect=function(nt,rt){drawRect(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,class:"rect"}).lower()},getTextObj=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},getNoteRect=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc=function(){function nt(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const Bt=wt.append("text").attr("x",Et+Lt/2).attr("y",kt+Ot/2+5).style("font-color",Dt).style("text-anchor","middle").text(bt);st(Bt,Rt)}function rt(bt,wt,Et,kt,Lt,Ot,Rt,Dt,Bt){const{taskFontSize:Ft,taskFontFamily:Yt}=Dt,Jt=bt.split(/<br\s*\/?>/gi);for(let Wt=0;Wt<Jt.length;Wt++){const Qt=Wt*Ft-Ft*(Jt.length-1)/2,rn=wt.append("text").attr("x",Et+Lt/2).attr("y",kt).attr("fill",Bt).style("text-anchor","middle").style("font-size",Ft).style("font-family",Yt);rn.append("tspan").attr("x",Et+Lt/2).attr("dy",Qt).text(Jt[Wt]),rn.attr("y",kt+Ot/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(rn,Rt)}}function it(bt,wt,Et,kt,Lt,Ot,Rt,Dt){const Bt=wt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Ot).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Ot,Rt,Dt),st(Yt,Rt)}function st(bt,wt){for(const Et in wt)Et in wt&&bt.attr(Et,wt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),initGraphics=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},svgDraw={drawRect,drawCircle,drawSection,drawText,drawLabel,drawTask,drawBackgroundRect,getTextObj,getNoteRect,initGraphics},setConf$1=function(nt){Object.keys(nt).forEach(function(it){conf$1[it]=nt[it]})},actors={};function drawActorLegend(nt){const rt=getConfig$1().journey;let it=60;Object.keys(actors).forEach(st=>{const bt=actors[st].color,wt={cx:20,cy:it,r:7,fill:bt,stroke:"#000",pos:actors[st].position};svgDraw.drawCircle(nt,wt);const Et={x:40,y:it+7,fill:"#666",text:st,textMargin:rt.boxTextMargin|5};svgDraw.drawText(nt,Et),it+=20})}const conf$1=getConfig$1().journey,LEFT_MARGIN=conf$1.leftMargin,draw$1=function(nt,rt,it,st){const bt=getConfig$1().journey;st.db.clear(),st.parser.parse(nt+`
`);const wt=getConfig$1().securityLevel;let Et;wt==="sandbox"&&(Et=select("#i"+rt));const kt=select(wt==="sandbox"?Et.nodes()[0].contentDocument.body:"body");bounds.init();const Lt=kt.select("#"+rt);svgDraw.initGraphics(Lt);const Ot=st.db.getTasks(),Rt=st.db.getDiagramTitle(),Dt=st.db.getActors();for(const Qt in actors)delete actors[Qt];let Bt=0;Dt.forEach(Qt=>{actors[Qt]={color:bt.actorColours[Bt%bt.actorColours.length],position:Bt},Bt++}),drawActorLegend(Lt),bounds.insert(0,0,LEFT_MARGIN,Object.keys(actors).length*50),drawTasks(Lt,Ot,0);const Ft=bounds.getBounds();Rt&&Lt.append("text").text(Rt).attr("x",LEFT_MARGIN).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const Yt=Ft.stopy-Ft.starty+2*bt.diagramMarginY,Jt=LEFT_MARGIN+Ft.stopx+2*bt.diagramMarginX;configureSvgSize(Lt,Yt,Jt,bt.useMaxWidth),Lt.append("line").attr("x1",LEFT_MARGIN).attr("y1",bt.height*4).attr("x2",Jt-LEFT_MARGIN-4).attr("y2",bt.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const Wt=Rt?70:0;Lt.attr("viewBox",`${Ft.startx} -25 ${Jt} ${Yt+Wt}`),Lt.attr("preserveAspectRatio","xMinYMin meet"),Lt.attr("height",Yt+Wt+25)},bounds={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(nt,rt,it,st){nt[rt]===void 0?nt[rt]=it:nt[rt]=st(it,nt[rt])},updateBounds:function(nt,rt,it,st){const bt=getConfig$1().journey,wt=this;let Et=0;function kt(Lt){return function(Rt){Et++;const Dt=wt.sequenceItems.length-Et+1;wt.updateVal(Rt,"starty",rt-Dt*bt.boxMargin,Math.min),wt.updateVal(Rt,"stopy",st+Dt*bt.boxMargin,Math.max),wt.updateVal(bounds.data,"startx",nt-Dt*bt.boxMargin,Math.min),wt.updateVal(bounds.data,"stopx",it+Dt*bt.boxMargin,Math.max),Lt!=="activation"&&(wt.updateVal(Rt,"startx",nt-Dt*bt.boxMargin,Math.min),wt.updateVal(Rt,"stopx",it+Dt*bt.boxMargin,Math.max),wt.updateVal(bounds.data,"starty",rt-Dt*bt.boxMargin,Math.min),wt.updateVal(bounds.data,"stopy",st+Dt*bt.boxMargin,Math.max))}}this.sequenceItems.forEach(kt())},insert:function(nt,rt,it,st){const bt=Math.min(nt,it),wt=Math.max(nt,it),Et=Math.min(rt,st),kt=Math.max(rt,st);this.updateVal(bounds.data,"startx",bt,Math.min),this.updateVal(bounds.data,"starty",Et,Math.min),this.updateVal(bounds.data,"stopx",wt,Math.max),this.updateVal(bounds.data,"stopy",kt,Math.max),this.updateBounds(bt,Et,wt,kt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},fills=conf$1.sectionFills,textColours=conf$1.sectionColours,drawTasks=function(nt,rt,it){const st=getConfig$1().journey;let bt="";const wt=st.height*2+st.diagramMarginY,Et=it+wt;let kt=0,Lt="#CCC",Ot="black",Rt=0;for(const[Dt,Bt]of rt.entries()){if(bt!==Bt.section){Lt=fills[kt%fills.length],Rt=kt%fills.length,Ot=textColours[kt%textColours.length];const Yt={x:Dt*st.taskMargin+Dt*st.width+LEFT_MARGIN,y:50,text:Bt.section,fill:Lt,num:Rt,colour:Ot};svgDraw.drawSection(nt,Yt,st),bt=Bt.section,kt++}const Ft=Bt.people.reduce((Yt,Jt)=>(actors[Jt]&&(Yt[Jt]=actors[Jt]),Yt),{});Bt.x=Dt*st.taskMargin+Dt*st.width+LEFT_MARGIN,Bt.y=Et,Bt.width=st.diagramMarginX,Bt.height=st.diagramMarginY,Bt.colour=Ot,Bt.fill=Lt,Bt.num=Rt,Bt.actors=Ft,svgDraw.drawTask(nt,Bt,st),bounds.insert(Bt.x,Bt.y,Bt.x+Bt.width+st.taskMargin,300+5*30)}},journeyRenderer={setConf:setConf$1,draw:draw$1};let conf={};const setConf=function(nt){conf={...conf,...nt}},draw=(nt,rt,it)=>{try{log$1.debug(`Renering svg for syntax error
`);const st=select("#"+rt),bt=st.append("g");bt.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),bt.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),bt.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),bt.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),bt.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),bt.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),bt.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),bt.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+it),st.attr("height",100),st.attr("width",500),st.attr("viewBox","768 0 912 512")}catch(st){log$1.error("Error while rendering info diagram"),log$1.error(getErrorMessage(st))}},errorRenderer={setConf,draw};let hasLoadedDiagrams=!1;const addDiagrams=()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerDiagram("error",{db:{clear:()=>{}},styles:errorStyles,renderer:errorRenderer,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},nt=>nt.toLowerCase().trim()==="error"),registerDiagram("c4",{parser:c4Parser,db:c4Db,renderer:c4Renderer,styles:c4Styles,init:nt=>{c4Renderer.setConf(nt.c4)}},c4Detector),registerDiagram("class",{parser:classParser,db:classDb,renderer:classRenderer,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetector),registerDiagram("classDiagram",{parser:classParser,db:classDb,renderer:classRendererV2,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetectorV2),registerDiagram("er",{parser:erParser,db:erDb,renderer:erRenderer,styles:erStyles},erDetector),registerDiagram("gantt",{parser:ganttParser,db:ganttDb,renderer:ganttRenderer,styles:ganttStyles},ganttDetector),registerDiagram("info",{parser:infoParser,db:infoDb,renderer:infoRenderer,styles:infoStyles},infoDetector),registerDiagram("pie",{parser:pieParser,db:pieDb,renderer:pieRenderer,styles:pieStyles},pieDetector),registerDiagram("requirement",{parser:requirementParser,db:requirementDb,renderer:requirementRenderer,styles:requirementStyles},requirementDetector),registerDiagram("sequence",{parser:sequenceParser,db:sequenceDb,renderer:sequenceRenderer,styles:sequenceStyles,init:nt=>{if(nt.sequence||(nt.sequence={}),nt.sequence.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,"sequenceDiagram"in nt)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");sequenceDb.setWrap(nt.wrap),sequenceRenderer.setConf(nt.sequence)}},sequenceDetector),registerDiagram("state",{parser:stateParser,db:stateDb,renderer:stateRenderer,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetector),registerDiagram("stateDiagram",{parser:stateParser,db:stateDb,renderer:stateRendererV2,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetectorV2),registerDiagram("journey",{parser:journeyParser,db:journeyDb,renderer:journeyRenderer,styles:journeyStyles,init:nt=>{journeyRenderer.setConf(nt.journey),journeyDb.clear()}},journeyDetector),registerDiagram("flowchart",{parser:flowParser,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,flowRenderer.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-1")}},flowDetector),registerDiagram("flowchart-v2",{parser:flowParser,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,setConfig({flowchart:{arrowMarkerAbsolute:nt.arrowMarkerAbsolute}}),flowRendererV2.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-2")}},flowDetectorV2),registerDiagram("gitGraph",{parser:gitGraphParser,db:gitGraphDb,renderer:gitGraphRenderer,styles:gitGraphStyles},gitGraphDetector))};class Diagram{constructor(rt,it){__publicField(this,"type","graph"),__publicField(this,"parser"),__publicField(this,"renderer"),__publicField(this,"db"),__publicField(this,"detectTypeFailed",!1);var st,bt;this.txt=rt;const wt=getConfig$1();this.txt=rt;try{this.type=detectType(rt,wt)}catch(Lt){this.handleError(Lt,it),this.type="error",this.detectTypeFailed=!0}const Et=getDiagram(this.type);log$1.debug("Type "+this.type),this.db=Et.db,(bt=(st=this.db).clear)==null||bt.call(st),this.renderer=Et.renderer,this.parser=Et.parser;const kt=this.parser.parse.bind(this.parser);this.parser.parse=Lt=>kt(extractFrontMatter(Lt,this.db)),this.parser.parser.yy=this.db,Et.init&&(Et.init(wt),log$1.debug("Initialized diagram "+this.type,wt)),this.txt+=`
`,this.parse(this.txt,it)}parse(rt,it){var st,bt;if(this.detectTypeFailed)return!1;try{return rt=rt+`
`,(bt=(st=this.db).clear)==null||bt.call(st),this.parser.parse(rt),!0}catch(wt){this.handleError(wt,it)}return!1}handleError(rt,it){if(it===void 0)throw rt;if(isDetailedError(rt)){it(rt.str,rt.hash);return}it(rt)}getParser(){return this.parser}getType(){return this.type}}const getDiagramFromText=(nt,rt)=>{const it=detectType(nt,getConfig$1());try{getDiagram(it)}catch{const bt=getDiagramLoader(it);if(!bt)throw new Error(`Diagram ${it} not found.`);return bt().then(({diagram:wt})=>(registerDiagram(it,wt,void 0),new Diagram(nt,rt)))}return new Diagram(nt,rt)},Diagram$1=Diagram;function setA11yDiagramInfo(nt,rt){isEmpty(rt)||nt.attr("aria-roledescription",rt)}function addSVGa11yTitleDescription(nt,rt,it,st){if(nt.insert!==void 0)if(rt||it){if(it){const bt="chart-desc-"+st;nt.attr("aria-describedby",bt),nt.insert("desc",":first-child").attr("id",bt).text(it)}if(rt){const bt="chart-title-"+st;nt.attr("aria-labelledby",bt),nt.insert("title",":first-child").attr("id",bt).text(rt)}}else return}const CLASSDEF_DIAGRAMS=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function parse$1(nt,rt){return addDiagrams(),new Diagram$1(nt,rt).parse(nt,rt)}async function parseAsync$1(nt,rt){return addDiagrams(),(await getDiagramFromText(nt,rt)).parse(nt,rt)}const encodeEntities=function(nt){let rt=nt;return rt=rt.replace(/style.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/classDef.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/#\w+;/g,function(it){const st=it.substring(1,it.length-1);return/^\+?\d+$/.test(st)?"\uFB02\xB0\xB0"+st+"\xB6\xDF":"\uFB02\xB0"+st+"\xB6\xDF"}),rt},decodeEntities=function(nt){let rt=nt;return rt=rt.replace(/ﬂ°°/g,"&#"),rt=rt.replace(/ﬂ°/g,"&"),rt=rt.replace(/¶ß/g,";"),rt},cssImportantStyles=(nt,rt,it=[])=>`
.${nt} ${rt} { ${it.join(" !important; ")} !important; }`,createCssStyles=(nt,rt,it={})=>{var st;let bt="";if(nt.themeCSS!==void 0&&(bt+=`
${nt.themeCSS}`),nt.fontFamily!==void 0&&(bt+=`
:root { --mermaid-font-family: ${nt.fontFamily}}`),nt.altFontFamily!==void 0&&(bt+=`
:root { --mermaid-alt-font-family: ${nt.altFontFamily}}`),!isEmpty(it)&&CLASSDEF_DIAGRAMS.includes(rt)){const Lt=nt.htmlLabels||((st=nt.flowchart)==null?void 0:st.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const Ot in it){const Rt=it[Ot];isEmpty(Rt.styles)||Lt.forEach(Dt=>{bt+=cssImportantStyles(Rt.id,Dt,Rt.styles)}),isEmpty(Rt.textStyles)||(bt+=cssImportantStyles(Rt.id,"tspan",Rt.textStyles))}}return bt},createUserStyles=(nt,rt,it,st)=>{const bt=createCssStyles(nt,rt,it),wt=getStyles$2(rt,bt,nt.themeVariables);return serialize(compile(`${st}{${wt}}`),stringify)},cleanUpSvgCode=(nt="",rt,it)=>{let st=nt;return!it&&!rt&&(st=st.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),st=decodeEntities(st),st=st.replace(/<br>/g,"<br/>"),st},putIntoIFrame=(nt="",rt)=>{const it=rt?rt.viewBox.baseVal.height+"px":IFRAME_HEIGHT,st=btoa('<body style="'+IFRAME_BODY_STYLE+'">'+nt+"</body>");return`<iframe style="width:${IFRAME_WIDTH};height:${it};${IFRAME_STYLES}" src="data:text/html;base64,${st}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},appendDivSvgG=(nt,rt,it,st,bt)=>{const wt=nt.append("div");wt.attr("id",it),st&&wt.attr("style",st);const Et=wt.append("svg").attr("id",rt).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return bt&&Et.attr("xmlns:xlink",bt),Et.append("g"),nt};function sandboxedIframe(nt,rt){return nt.append("iframe").attr("id",rt).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const removeExistingElements=(nt,rt,it,st)=>{var bt,wt,Et;(bt=nt.getElementById(rt))==null||bt.remove(),(wt=nt.getElementById(it))==null||wt.remove(),(Et=nt.getElementById(st))==null||Et.remove()},render=function(nt,rt,it,st){var bt,wt,Et,kt,Lt;addDiagrams(),reset();const Ot=utils.detectInit(rt);Ot&&(directiveSanitizer(Ot),addDirective(Ot));const Rt=getConfig$1();log$1.debug(Rt),rt.length>((bt=Rt==null?void 0:Rt.maxTextSize)!=null?bt:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const Dt="#"+nt,Bt="i"+nt,Ft="#"+Bt,Yt="d"+nt,Jt="#"+Yt;let Wt=select("body");const Qt=Rt.securityLevel===SECURITY_LVL_SANDBOX,rn=Rt.securityLevel===SECURITY_LVL_LOOSE,sn=Rt.fontFamily;if(st!==void 0){if(st&&(st.innerHTML=""),Qt){const Mr=sandboxedIframe(select(st),Bt);Wt=select(Mr.nodes()[0].contentDocument.body),Wt.node().style.margin=0}else Wt=select(st);appendDivSvgG(Wt,nt,Yt,`font-family: ${sn}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Yt,Bt),Qt){const Mr=sandboxedIframe(select("body"),Bt);Wt=select(Mr.nodes()[0].contentDocument.body),Wt.node().style.margin=0}else Wt=select("body");appendDivSvgG(Wt,nt,Yt)}rt=encodeEntities(rt);let on,hn;try{if(on=getDiagramFromText(rt),"then"in on)throw new Error("Diagram is a promise. Use renderAsync.")}catch(Mr){on=new Diagram$1("error"),hn=Mr}const mn=Wt.select(Jt).node(),Cn=on.type,Tn=mn.firstChild,kn=Tn.firstChild,In=CLASSDEF_DIAGRAMS.includes(Cn)?on.renderer.getClasses(rt,on):{},Ln=createUserStyles(Rt,Cn,In,Dt),pn=document.createElement("style");pn.innerHTML=Ln,Tn.insertBefore(pn,kn);try{on.renderer.draw(rt,nt,pkg.version,on)}catch(Mr){throw errorRenderer.draw(rt,nt,pkg.version),Mr}const Hn=Wt.select(`${Jt} svg`),yn=(Et=(wt=on.db).getAccTitle)==null?void 0:Et.call(wt),mr=(Lt=(kt=on.db).getAccDescription)==null?void 0:Lt.call(kt);addA11yInfo(Cn,Hn,yn,mr),Wt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let vn=Wt.select(Jt).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",Rt.arrowMarkerAbsolute),vn=cleanUpSvgCode(vn,Qt,evaluate(Rt.arrowMarkerAbsolute)),Qt){const Mr=Wt.select(Jt+" svg").node();vn=putIntoIFrame(vn,Mr)}else rn||(vn=purify.sanitize(vn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(Cn){case"flowchart":case"flowchart-v2":it(vn,flowDb.bindFunctions);break;case"gantt":it(vn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(vn,classDb.bindFunctions);break;default:it(vn)}else log$1.debug("CB = undefined!");attachFunctions();const Tr=select(Qt?Ft:Jt).node();if(Tr&&"remove"in Tr&&Tr.remove(),hn)throw hn;return vn},renderAsync$1=async function(nt,rt,it,st){var bt,wt,Et,kt,Lt;addDiagrams(),reset();const Ot=utils.detectInit(rt);Ot&&(directiveSanitizer(Ot),addDirective(Ot));const Rt=getConfig$1();log$1.debug(Rt),rt.length>((bt=Rt==null?void 0:Rt.maxTextSize)!=null?bt:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const Dt="#"+nt,Bt="i"+nt,Ft="#"+Bt,Yt="d"+nt,Jt="#"+Yt;let Wt=select("body");const Qt=Rt.securityLevel===SECURITY_LVL_SANDBOX,rn=Rt.securityLevel===SECURITY_LVL_LOOSE,sn=Rt.fontFamily;if(st!==void 0){if(st&&(st.innerHTML=""),Qt){const Mr=sandboxedIframe(select(st),Bt);Wt=select(Mr.nodes()[0].contentDocument.body),Wt.node().style.margin=0}else Wt=select(st);appendDivSvgG(Wt,nt,Yt,`font-family: ${sn}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Yt,Bt),Qt){const Mr=sandboxedIframe(select("body"),Bt);Wt=select(Mr.nodes()[0].contentDocument.body),Wt.node().style.margin=0}else Wt=select("body");appendDivSvgG(Wt,nt,Yt)}rt=encodeEntities(rt);let on,hn;try{on=await getDiagramFromText(rt)}catch(Mr){on=new Diagram$1("error"),hn=Mr}const mn=Wt.select(Jt).node(),Cn=on.type,Tn=mn.firstChild,kn=Tn.firstChild,In=CLASSDEF_DIAGRAMS.includes(Cn)?on.renderer.getClasses(rt,on):{},Ln=createUserStyles(Rt,Cn,In,Dt),pn=document.createElement("style");pn.innerHTML=Ln,Tn.insertBefore(pn,kn);try{await on.renderer.draw(rt,nt,pkg.version,on)}catch(Mr){throw errorRenderer.draw(rt,nt,pkg.version),Mr}const Hn=Wt.select(`${Jt} svg`),yn=(Et=(wt=on.db).getAccTitle)==null?void 0:Et.call(wt),mr=(Lt=(kt=on.db).getAccDescription)==null?void 0:Lt.call(kt);addA11yInfo(Cn,Hn,yn,mr),Wt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let vn=Wt.select(Jt).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",Rt.arrowMarkerAbsolute),vn=cleanUpSvgCode(vn,Qt,evaluate(Rt.arrowMarkerAbsolute)),Qt){const Mr=Wt.select(Jt+" svg").node();vn=putIntoIFrame(vn,Mr)}else rn||(vn=purify.sanitize(vn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(Cn){case"flowchart":case"flowchart-v2":it(vn,flowDb.bindFunctions);break;case"gantt":it(vn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(vn,classDb.bindFunctions);break;default:it(vn)}else log$1.debug("CB = undefined!");attachFunctions();const Tr=select(Qt?Ft:Jt).node();if(Tr&&"remove"in Tr&&Tr.remove(),hn)throw hn;return vn};let currentDirective={};const parseDirective=function(nt,rt,it,st){try{if(rt!==void 0)switch(rt=rt.trim(),it){case"open_directive":currentDirective={};break;case"type_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.type=rt.toLowerCase();break;case"arg_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.args=JSON.parse(rt);break;case"close_directive":handleDirective(nt,currentDirective,st),currentDirective=void 0;break}}catch(bt){log$1.error(`Error while rendering sequenceDiagram directive: ${rt} jison context: ${it}`),log$1.error(bt.message)}},handleDirective=function(nt,rt,it){switch(log$1.debug(`Directive type=${rt.type} with args:`,rt.args),rt.type){case"init":case"initialize":{["config"].forEach(st=>{rt.args[st]!==void 0&&(it==="flowchart-v2"&&(it="flowchart"),rt.args[it]=rt.args[st],delete rt.args[st])}),log$1.debug("sanitize in handleDirective",rt.args),directiveSanitizer(rt.args),log$1.debug("sanitize in handleDirective (done)",rt.args),addDirective(rt.args);break}case"wrap":case"nowrap":nt&&nt.setWrap&&nt.setWrap(rt.type==="wrap");break;case"themeCss":log$1.warn("themeCss encountered");break;default:log$1.warn(`Unhandled directive: source: '%%{${rt.type}: ${JSON.stringify(rt.args?rt.args:{})}}%%`,rt);break}};function initialize$1(nt={}){var rt;(nt==null?void 0:nt.fontFamily)&&!((rt=nt.themeVariables)!=null&&rt.fontFamily)&&(nt.themeVariables={fontFamily:nt.fontFamily}),saveConfigFromInitialize(nt),(nt==null?void 0:nt.theme)&&nt.theme in theme?nt.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables):nt&&(nt.themeVariables=theme.default.getThemeVariables(nt.themeVariables));const it=typeof nt=="object"?setSiteConfig(nt):getSiteConfig();setLogLevel$1(it.logLevel),addDiagrams()}function addA11yInfo(nt,rt,it,st){setA11yDiagramInfo(rt,nt),addSVGa11yTitleDescription(rt,it,st,rt.attr("id"))}const mermaidAPI=Object.freeze({render,renderAsync:renderAsync$1,parse:parse$1,parseAsync:parseAsync$1,parseDirective,initialize:initialize$1,getConfig:getConfig$1,setConfig,getSiteConfig,updateSiteConfig,reset:()=>{reset()},globalReset:()=>{reset(defaultConfig)},defaultConfig});setLogLevel$1(getConfig$1().logLevel);reset(getConfig$1());let externalDiagramsRegistered=!1;const init$1=async function(nt,rt,it){try{externalDiagramsRegistered?await initThrowsErrorsAsync(nt,rt,it):initThrowsErrors(nt,rt,it)}catch(st){log$1.warn("Syntax Error rendering"),isDetailedError(st)&&log$1.warn(st.str),mermaid.parseError&&mermaid.parseError(st)}},handleError=(nt,rt,it)=>{log$1.warn(nt),isDetailedError(nt)?(it&&it(nt.str,nt.hash),rt.push({...nt,message:nt.str,error:nt})):(it&&it(nt),nt instanceof Error&&rt.push({str:nt.message,message:nt.message,hash:nt.name,error:nt}))},initThrowsErrors=function(nt,rt,it){const st=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let bt;if(rt===void 0)bt=document.querySelectorAll(".mermaid");else if(typeof rt=="string")bt=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)bt=[rt];else if(rt instanceof NodeList)bt=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${bt.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const wt=new utils.initIdGenerator(st.deterministicIds,st.deterministicIDSeed);let Et;const kt=[];for(const Lt of Array.from(bt)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const Ot=`mermaid-${wt.next()}`;Et=Lt.innerHTML,Et=utils.entityDecode(Et).trim().replace(/<br\s*\/?>/gi,"<br/>");const Rt=utils.detectInit(Et);Rt&&log$1.debug("Detected early reinit: ",Rt);try{mermaidAPI.render(Ot,Et,(Dt,Bt)=>{Lt.innerHTML=Dt,it!==void 0&&it(Ot),Bt&&Bt(Lt)},Lt)}catch(Dt){handleError(Dt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},registerLazyLoadedDiagrams=nt=>{for(const{id:rt,detector:it,loader:st}of nt)addDetector(rt,it,st)},loadExternalDiagrams=async nt=>{log$1.debug(`Loading ${nt.length} external diagrams`);const it=(await Promise.allSettled(nt.map(async({id:st,detector:bt,loader:wt})=>{const{diagram:Et}=await wt();registerDiagram(st,Et,bt)}))).filter(st=>st.status==="rejected");if(it.length>0){log$1.error(`Failed to load ${it.length} external diagrams`);for(const st of it)log$1.error(st);throw new Error(`Failed to load ${it.length} external diagrams`)}},initThrowsErrorsAsync=async function(nt,rt,it){const st=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let bt;if(rt===void 0)bt=document.querySelectorAll(".mermaid");else if(typeof rt=="string")bt=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)bt=[rt];else if(rt instanceof NodeList)bt=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${bt.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const wt=new utils.initIdGenerator(st.deterministicIds,st.deterministicIDSeed);let Et;const kt=[];for(const Lt of Array.from(bt)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const Ot=`mermaid-${wt.next()}`;Et=Lt.innerHTML,Et=utils.entityDecode(Et).trim().replace(/<br\s*\/?>/gi,"<br/>");const Rt=utils.detectInit(Et);Rt&&log$1.debug("Detected early reinit: ",Rt);try{await mermaidAPI.renderAsync(Ot,Et,(Dt,Bt)=>{Lt.innerHTML=Dt,it!==void 0&&it(Ot),Bt&&Bt(Lt)},Lt)}catch(Dt){handleError(Dt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},initialize=function(nt){mermaidAPI.initialize(nt)},registerExternalDiagrams=async(nt,{lazyLoad:rt=!0}={})=>{rt?registerLazyLoadedDiagrams(nt):await loadExternalDiagrams(nt),externalDiagramsRegistered=!0},contentLoaded=function(){if(mermaid.startOnLoad){const{startOnLoad:nt}=mermaidAPI.getConfig();nt&&mermaid.init()}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",contentLoaded,!1)}const setParseErrorHandler=function(nt){mermaid.parseError=nt},parse=nt=>mermaidAPI.parse(nt,mermaid.parseError),executionQueue=[];let executionQueueRunning=!1;const executeQueue=async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const nt=executionQueue.shift();if(nt)try{await nt()}catch(rt){log$1.error("Error executing queue",rt)}}executionQueueRunning=!1}},parseAsync=nt=>new Promise((rt,it)=>{const st=()=>new Promise((bt,wt)=>{mermaidAPI.parseAsync(nt,mermaid.parseError).then(Et=>{bt(Et),rt(Et)},Et=>{log$1.error("Error parsing",Et),wt(Et),it(Et)})});executionQueue.push(st),executeQueue()}),renderAsync=(nt,rt,it,st)=>new Promise((bt,wt)=>{const Et=()=>new Promise((kt,Lt)=>{mermaidAPI.renderAsync(nt,rt,it,st).then(Ot=>{kt(Ot),bt(Ot)},Ot=>{log$1.error("Error parsing",Ot),Lt(Ot),wt(Ot)})});executionQueue.push(Et),executeQueue()}),mermaid={startOnLoad:!0,diagrams:{},mermaidAPI,parse,parseAsync,render:mermaidAPI.render,renderAsync,init:init$1,initThrowsErrors,initThrowsErrorsAsync,registerExternalDiagrams,initialize,parseError:void 0,contentLoaded,setParseErrorHandler},_hoisted_1$a={class:"content"},_hoisted_2$8=createBaseVNode("div",{id:"diagram"},null,-1),_hoisted_3$7={key:0,id:"caption-bar"},_hoisted_4$6=["innerHTML"],_sfc_main$c=defineComponent({__name:"Mermaid.ce",props:{type:{type:String},caption:{type:String},width:{type:String},height:{type:String},position:{type:String},right:{type:Boolean},left:{type:Boolean},full:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ot;return(Ot=it==null?void 0:it.value)==null?void 0:Ot.parentNode}),bt=computed(()=>{var Ot,Rt;return(Rt=(Ot=it.value)==null?void 0:Ot.getRootNode())==null?void 0:Rt.host}),wt=computed(()=>{var Ot;return(Ot=st.value)==null?void 0:Ot.querySelector(".content")});watch$1(bt,()=>kt());const Et=rt.position||(rt.right?"right":rt.left?"left":"full");function kt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Et),Et==="full"?bt.value.style.width="100%":(bt.value.style.float=Et,bt.value.style.width="50%"),bt.value.style.width=window.getComputedStyle(bt.value).width,wt.value.style.width=rt.width||"100%";let Ot=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2));wt.value.style.width=`${Ot}px`,Lt()}function Lt(){let Ot=bt.value.textContent.trim();mermaid.initialize({startOnLoad:!1}),async function(){var Bt;let Rt=(Bt=st.value)==null?void 0:Bt.querySelector("#diagram");const Dt=function(Ft){Rt&&(Rt.innerHTML=Ft)};await mermaid.render("diagram",Ot,Dt)}()}return(Ot,Rt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createBaseVNode("div",_hoisted_1$a,[_hoisted_2$8,rt.caption?(openBlock(),createElementBlock("div",_hoisted_3$7,[createBaseVNode("div",{class:"label",innerHTML:nt.caption},null,8,_hoisted_4$6)])):createCommentVNode("",!0)])],512))}}),_style_0$6=`*{box-sizing:border-box}.content{display:flex;flex-direction:column;justify-content:center;align-content:center;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#diagram{display:block;margin:auto;width:100%;padding:12px 0}#caption-bar{display:flex;align-items:center;height:32px;width:100%;background-color:#555;color:#fff;padding:0 12px}.entityBox:hover{fill:#ff0}
`,Mermaid=_export_sfc(_sfc_main$c,[["styles",[_style_0$6]]]),_hoisted_1$9=["name"],_hoisted_2$7=["label"],_hoisted_3$6=["innerHTML"],_sfc_main$b=defineComponent({__name:"Modal.ce",props:{src:{type:String},prefix:{type:String},label:{type:String},buttonLabel:{type:String,default:"Show me"},buttonIcon:{type:String},width:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ft;return(Ft=it==null?void 0:it.value)==null?void 0:Ft.parentNode}),bt=computed(()=>{var Ft,Yt;return(Yt=(Ft=it.value)==null?void 0:Ft.getRootNode())==null?void 0:Yt.host}),wt=computed(()=>{var Ft;return(Ft=st.value)==null?void 0:Ft.querySelector("#main")}),Et=ref("80vw"),kt=ref(!1);watch$1(kt,()=>{Lt.open=kt.value,Rt.value||Dt()});let Lt;const Ot=ref(),Rt=ref();watch$1(bt,()=>{Et.value=rt.width||(isMobile()?"100vw":"80vh");let Ft=bt.value.textContent.split(`
`),Yt=[];if(Ft.forEach(Jt=>{(Jt.trim().length>0||Yt.length>0)&&Yt.push(Jt)}),Yt.length>0){let Jt=(Yt[0].match(/(^\s+)/)||[""])[0].length;Ot.value=Yt.map(Wt=>(Wt.match(/(^\s+)/)||[""])[0].length>=Jt?Wt.slice(Jt):Wt).join(`
`)}}),watch$1(wt,()=>{var Ft;Lt=(Ft=st.value)==null?void 0:Ft.querySelector(".dialog"),Lt.addEventListener("sl-hide",Yt=>{Yt.target===Lt&&(kt.value=!1)})});function Dt(){if(Rt.value="",rt.src){let Ft=`/${rt.src}`,[Yt,Jt,...Wt]=rt.src.split("/");Yt==="juncture-digital"&&Jt==="juncture"&&(location.hostname==="dev.juncture-digital.org"||location.hostname==="localhost")&&(Ft+="?ref=dev"),fetch(Ft).then(Qt=>Qt.text()).then(Qt=>{var on;let sn=(on=new DOMParser().parseFromString(Qt,"text/html").children[0].children[1].querySelector("main"))==null?void 0:on.outerHTML;sn&&(Rt.value=sn),nextTick(()=>initTippy(st.value,!0))})}else fetch("/html/?inline=true",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix}`,path:"",markdown:Ot.value})}).then(Ft=>Ft.text()).then(Ft=>{var Wt;let Jt=(Wt=new DOMParser().parseFromString(Ft,"text/html").children[0].children[1].querySelector("main"))==null?void 0:Wt.outerHTML;Jt&&(Rt.value=Jt),nextTick(()=>initTippy(st.value,!0))})}function Bt(Ft){var Jt;let Yt=Ot.value;Yt&&((Jt=Ft.dataTransfer)==null||Jt.setData("text/plain",Yt))}return(Ft,Yt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createBaseVNode("sl-button",{onClick:Yt[0]||(Yt[0]=Jt=>kt.value=!kt.value)},[rt.buttonIcon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.buttonIcon,style:{"font-size":"20px"}},null,8,_hoisted_1$9)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)]),createBaseVNode("sl-dialog",{label:nt.label,class:"dialog",style:normalizeStyle({"--width":Et.value})},[createBaseVNode("div",{id:"content",innerHTML:Rt.value,draggable:"true",onDragstart:Bt},null,40,_hoisted_3$6),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Yt[1]||(Yt[1]=Jt=>kt.value=!1)},"Close")],12,_hoisted_2$7)],512))}}),_style_1$3=`*{box-sizing:border-box}:host{display:inline-block}sl-dialog::part(body){padding-top:0}sl-dialog::part(panel){max-width:unset}
`,Modal=_export_sfc(_sfc_main$b,[["styles",[_style_0$o,_style_1$3]]]),_hoisted_1$8=["href"],_hoisted_2$6=["src"],_hoisted_3$5=["src"],_hoisted_4$5={class:"title-panel"},_hoisted_5$4=["innerHTML"],_hoisted_6$3=["innerHTML"],_hoisted_7$3={class:"controls"},_hoisted_8$3=["search-domain"],_hoisted_9$2=["background","contact","contact-form-title","contact-subject"],_hoisted_10$1=["innerHTML"],_sfc_main$a=defineComponent({__name:"Navbar.ce",props:{label:{type:String},subtitle:{type:String},background:{type:String},logo:{type:String},url:{type:String},alpha:{type:Number},contact:{type:String},contactFormTitle:{type:String},contactSubject:{type:String},sticky:{type:Boolean,default:!1},height:{type:Number,default:80},offset:{type:Number,default:0},searchDomain:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var kt,Lt;return(Lt=(kt=it.value)==null?void 0:kt.getRootNode())==null?void 0:Lt.host}),bt=computed(()=>{var kt,Lt;return(Lt=(kt=it==null?void 0:it.value)==null?void 0:kt.parentNode)==null?void 0:Lt.querySelector(".ve-navbar")}),wt=ref();onMounted(()=>{Et(),nextTick(()=>{var kt;return wt.value=(kt=st.value.querySelector("ul"))==null?void 0:kt.innerHTML})}),watch$1(rt,()=>Et());function Et(){if(bt.value.style.height=`${rt.height}px`,rt.background&&(st.value.style.backgroundColor=rt.background),rt.offset&&(bt.value.style.marginTop=`-${rt.offset}px`),rt.sticky&&(st.value.classList.add("sticky"),st.value.style.position="sticky",st.value.style.top="0",rt.alpha&&(st.value.style.background=`rgba(0, 0, 0, ${rt.alpha})`),st.value.style.marginTop=`-${rt.offset}px`),rt.label){let kt=document.querySelector("title");kt||(kt=document.createElement("title"),document.head.appendChild(kt)),kt.innerText=rt.label}}return(kt,Lt)=>(openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-navbar",style:normalizeStyle({height:`${rt.height}px`})},[rt.logo?(openBlock(),createElementBlock(Fragment,{key:0},[rt.url?(openBlock(),createElementBlock("a",{key:0,href:rt.url},[createBaseVNode("img",{src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_2$6)],8,_hoisted_1$8)):(openBlock(),createElementBlock("img",{key:1,src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_3$5))],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$5,[createBaseVNode("div",{class:"title",innerHTML:rt.label},null,8,_hoisted_5$4),rt.subtitle?(openBlock(),createElementBlock("div",{key:0,class:"subtitle",innerHTML:rt.subtitle},null,8,_hoisted_6$3)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7$3,[rt.searchDomain?(openBlock(),createElementBlock("ve-site-search",{key:0,"search-domain":rt.searchDomain},null,8,_hoisted_8$3)):createCommentVNode("",!0),wt.value?(openBlock(),createElementBlock("ve-menu",{key:1,background:rt.background,position:"right",contact:rt.contact,"contact-form-title":rt.contactFormTitle,"contact-subject":rt.contactSubject},[createBaseVNode("ul",{innerHTML:wt.value},null,8,_hoisted_10$1)],8,_hoisted_9$2)):createCommentVNode("",!0)])],4))}}),_style_0$5=`*{box-sizing:border-box}:host,ve-navbar{display:block;position:relative;width:100%;z-index:10}.ve-navbar{display:flex;width:100%;height:100%;padding:0;align-items:center;background-color:inherit}.logo{margin-left:20px;background-color:inherit}img.logo{max-height:50px}.controls{display:flex;align-items:center;margin-left:auto}.title-panel{display:flex;flex-direction:column;gap:6px;margin-left:1rem}.title,.subtitle{color:#fff}.title{font-size:2rem;line-height:1.8rem;padding-top:0;font-weight:700}.subtitle{font-size:1.4rem}@media (max-width: 480px){.title{font-size:1.6rem}}
`,Navbar=_export_sfc(_sfc_main$a,[["styles",[_style_0$5]]]),_hoisted_1$7={ref:"root",class:"pagination"},_hoisted_2$5=["disabled"],_hoisted_3$4=["innerHTML"],_hoisted_4$4=["innerHTML"],_hoisted_5$3=["disabled"],_sfc_main$9=defineComponent({__name:"Pager.ce",props:{total:{type:Number,required:!0},current:{type:Number,default:1}},emits:["image-selected"],setup(nt,{emit:rt}){const it=nt,st=ref();return st.value=it.current,watch$1(st,()=>rt("image-selected",st.value)),(bt,wt)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("span",{class:"prev",onClick:wt[0]||(wt[0]=Et=>st.value>1&&--st.value),disabled:st.value===1},"\xAB",8,_hoisted_2$5),createBaseVNode("span",{class:"current",innerHTML:st.value},null,8,_hoisted_3$4),createTextVNode(" / "),createBaseVNode("span",{class:"total",innerHTML:it.total},null,8,_hoisted_4$4),createBaseVNode("span",{class:"next",onClick:wt[1]||(wt[1]=Et=>st.value<it.total&&++st.value),disabled:st.value===it.total},"\xBB",8,_hoisted_5$3)],512))}}),_style_0$4=`.pagination{display:flex;align-items:center;justify-content:center;background-color:#eee;height:30px;color:#444}.current,.total{padding:0 12px;font-size:1.3rem}.prev[disabled=true],.next[disabled=true]{color:#ccc;cursor:unset}.prev,.next{height:100%;float:left;padding:0 8px;text-decoration:none;transition:background-color .3s;cursor:pointer;font-size:40px;margin-top:-28px}.prev[disabled=false]:hover,.next[disabled=false]:hover{color:var(--sl-color-primary-700)}
`,Pager=_export_sfc(_sfc_main$9,[["styles",[_style_0$4]]]);var rdfCanonize={exports:{}},lib={},IdentifierIssuer_1=class Kb{constructor(rt,it=new Map,st=0){this.prefix=rt,this._existing=it,this.counter=st}clone(){const{prefix:rt,_existing:it,counter:st}=this;return new Kb(rt,new Map(it),st)}getId(rt){const it=rt&&this._existing.get(rt);if(it)return it;const st=this.prefix+this.counter;return this.counter++,rt&&this._existing.set(rt,st),st}hasId(rt){return this._existing.has(rt)}getOldIds(){return[...this._existing.keys()]}};(function(nt,rt){if(nt.setImmediate)return;var it=1,st={},bt=!1,wt=nt.document,Et;function kt(rn){typeof rn!="function"&&(rn=new Function(""+rn));for(var sn=new Array(arguments.length-1),on=0;on<sn.length;on++)sn[on]=arguments[on+1];var hn={callback:rn,args:sn};return st[it]=hn,Et(it),it++}function Lt(rn){delete st[rn]}function Ot(rn){var sn=rn.callback,on=rn.args;switch(on.length){case 0:sn();break;case 1:sn(on[0]);break;case 2:sn(on[0],on[1]);break;case 3:sn(on[0],on[1],on[2]);break;default:sn.apply(rt,on);break}}function Rt(rn){if(bt)setTimeout(Rt,0,rn);else{var sn=st[rn];if(sn){bt=!0;try{Ot(sn)}finally{Lt(rn),bt=!1}}}}function Dt(){Et=function(rn){process.nextTick(function(){Rt(rn)})}}function Bt(){if(nt.postMessage&&!nt.importScripts){var rn=!0,sn=nt.onmessage;return nt.onmessage=function(){rn=!1},nt.postMessage("","*"),nt.onmessage=sn,rn}}function Ft(){var rn="setImmediate$"+Math.random()+"$",sn=function(on){on.source===nt&&typeof on.data=="string"&&on.data.indexOf(rn)===0&&Rt(+on.data.slice(rn.length))};nt.addEventListener?nt.addEventListener("message",sn,!1):nt.attachEvent("onmessage",sn),Et=function(on){nt.postMessage(rn+on,"*")}}function Yt(){var rn=new MessageChannel;rn.port1.onmessage=function(sn){var on=sn.data;Rt(on)},Et=function(sn){rn.port2.postMessage(sn)}}function Jt(){var rn=wt.documentElement;Et=function(sn){var on=wt.createElement("script");on.onreadystatechange=function(){Rt(sn),on.onreadystatechange=null,rn.removeChild(on),on=null},rn.appendChild(on)}}function Wt(){Et=function(rn){setTimeout(Rt,0,rn)}}var Qt=Object.getPrototypeOf&&Object.getPrototypeOf(nt);Qt=Qt&&Qt.setTimeout?Qt:nt,{}.toString.call(nt.process)==="[object process]"?Dt():Bt()?Ft():nt.MessageChannel?Yt():wt&&"onreadystatechange"in wt.createElement("script")?Jt():Wt(),Qt.setImmediate=kt,Qt.clearImmediate=Lt})(typeof self>"u"?commonjsGlobal$1:self);/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const crypto$1=self.crypto||self.msCrypto;var MessageDigestBrowser=class{constructor(rt){if(!(crypto$1&&crypto$1.subtle))throw new Error("crypto.subtle not found.");if(rt==="sha256")this.algorithm={name:"SHA-256"};else if(rt==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${rt}".`);this._content=""}update(rt){this._content+=rt}async digest(){const rt=new TextEncoder().encode(this._content),it=new Uint8Array(await crypto$1.subtle.digest(this.algorithm,rt));let st="";for(let bt=0;bt<it.length;++bt)st+=it[bt].toString(16).padStart(2,"0");return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Permuter_1=class{constructor(rt){this.current=rt.sort(),this.done=!1,this.dir=new Map;for(let it=0;it<rt.length;++it)this.dir.set(rt[it],!0)}hasNext(){return!this.done}next(){const{current:rt,dir:it}=this,st=rt.slice();let bt=null,wt=0;const Et=rt.length;for(let kt=0;kt<Et;++kt){const Lt=rt[kt],Ot=it.get(Lt);(bt===null||Lt>bt)&&(Ot&&kt>0&&Lt>rt[kt-1]||!Ot&&kt<Et-1&&Lt>rt[kt+1])&&(bt=Lt,wt=kt)}if(bt===null)this.done=!0;else{const kt=it.get(bt)?wt-1:wt+1;rt[wt]=rt[kt],rt[kt]=bt;for(const Lt of rt)Lt>bt&&it.set(Lt,!it.get(Lt))}return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const RDF$1="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING$1=RDF$1+"langString",XSD_STRING$2="http://www.w3.org/2001/XMLSchema#string",TYPE_NAMED_NODE="NamedNode",TYPE_BLANK_NODE="BlankNode",TYPE_LITERAL="Literal",TYPE_DEFAULT_GRAPH="DefaultGraph",REGEX={};(()=>{const nt="(?:<([^:]+:[^>]*)>)",it="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",st=it+"0-9-\xB7\u0300-\u036F\u203F-\u2040",wt="(_:(?:["+it+"0-9])(?:(?:["+st+".])*(?:["+st+"]))?)",Et='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',kt="(?:\\^\\^"+nt+")",Lt="(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))",Ot="(?:"+Et+"(?:"+kt+"|"+Lt+")?)",Rt="[ \\t]+",Dt="[ \\t]*",Bt="(?:"+nt+"|"+wt+")"+Rt,Ft=nt+Rt,Yt="(?:"+nt+"|"+wt+"|"+Ot+")"+Dt,Jt="(?:\\.|(?:(?:"+nt+"|"+wt+")"+Dt+"\\.))";REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^"+Dt+"$"),REGEX.quad=new RegExp("^"+Dt+Bt+Ft+Yt+Jt+Dt+"$")})();var NQuads_1=class yv{static parse(rt){const it=[],st={},bt=rt.split(REGEX.eoln);let wt=0;for(const Et of bt){if(wt++,REGEX.empty.test(Et))continue;const kt=Et.match(REGEX.quad);if(kt===null)throw new Error("N-Quads parse error on line "+wt+".");const Lt={subject:null,predicate:null,object:null,graph:null};if(kt[1]!==void 0?Lt.subject={termType:TYPE_NAMED_NODE,value:kt[1]}:Lt.subject={termType:TYPE_BLANK_NODE,value:kt[2]},Lt.predicate={termType:TYPE_NAMED_NODE,value:kt[3]},kt[4]!==void 0?Lt.object={termType:TYPE_NAMED_NODE,value:kt[4]}:kt[5]!==void 0?Lt.object={termType:TYPE_BLANK_NODE,value:kt[5]}:(Lt.object={termType:TYPE_LITERAL,value:void 0,datatype:{termType:TYPE_NAMED_NODE}},kt[7]!==void 0?Lt.object.datatype.value=kt[7]:kt[8]!==void 0?(Lt.object.datatype.value=RDF_LANGSTRING$1,Lt.object.language=kt[8]):Lt.object.datatype.value=XSD_STRING$2,Lt.object.value=_unescape(kt[6])),kt[9]!==void 0?Lt.graph={termType:TYPE_NAMED_NODE,value:kt[9]}:kt[10]!==void 0?Lt.graph={termType:TYPE_BLANK_NODE,value:kt[10]}:Lt.graph={termType:TYPE_DEFAULT_GRAPH,value:""},!(Lt.graph.value in st))st[Lt.graph.value]=[Lt],it.push(Lt);else{let Ot=!0;const Rt=st[Lt.graph.value];for(const Dt of Rt)if(_compareTriples(Dt,Lt)){Ot=!1;break}Ot&&(Rt.push(Lt),it.push(Lt))}}return it}static serialize(rt){Array.isArray(rt)||(rt=yv.legacyDatasetToQuads(rt));const it=[];for(const st of rt)it.push(yv.serializeQuad(st));return it.sort().join("")}static serializeQuadComponents(rt,it,st,bt){let wt="";return rt.termType===TYPE_NAMED_NODE?wt+=`<${rt.value}>`:wt+=`${rt.value}`,wt+=` <${it.value}> `,st.termType===TYPE_NAMED_NODE?wt+=`<${st.value}>`:st.termType===TYPE_BLANK_NODE?wt+=st.value:(wt+=`"${_escape(st.value)}"`,st.datatype.value===RDF_LANGSTRING$1?st.language&&(wt+=`@${st.language}`):st.datatype.value!==XSD_STRING$2&&(wt+=`^^<${st.datatype.value}>`)),bt.termType===TYPE_NAMED_NODE?wt+=` <${bt.value}>`:bt.termType===TYPE_BLANK_NODE&&(wt+=` ${bt.value}`),wt+=` .
`,wt}static serializeQuad(rt){return yv.serializeQuadComponents(rt.subject,rt.predicate,rt.object,rt.graph)}static legacyDatasetToQuads(rt){const it=[],st={"blank node":TYPE_BLANK_NODE,IRI:TYPE_NAMED_NODE,literal:TYPE_LITERAL};for(const bt in rt)rt[bt].forEach(Et=>{const kt={};for(const Lt in Et){const Ot=Et[Lt],Rt={termType:st[Ot.type],value:Ot.value};Rt.termType===TYPE_LITERAL&&(Rt.datatype={termType:TYPE_NAMED_NODE},"datatype"in Ot&&(Rt.datatype.value=Ot.datatype),"language"in Ot?("datatype"in Ot||(Rt.datatype.value=RDF_LANGSTRING$1),Rt.language=Ot.language):"datatype"in Ot||(Rt.datatype.value=XSD_STRING$2)),kt[Lt]=Rt}bt==="@default"?kt.graph={termType:TYPE_DEFAULT_GRAPH,value:""}:kt.graph={termType:bt.startsWith("_:")?TYPE_BLANK_NODE:TYPE_NAMED_NODE,value:bt},it.push(kt)});return it}};function _compareTriples(nt,rt){return!(nt.subject.termType===rt.subject.termType&&nt.object.termType===rt.object.termType)||!(nt.subject.value===rt.subject.value&&nt.predicate.value===rt.predicate.value&&nt.object.value===rt.object.value)?!1:nt.object.termType!==TYPE_LITERAL?!0:nt.object.datatype.termType===rt.object.datatype.termType&&nt.object.language===rt.object.language&&nt.object.datatype.value===rt.object.datatype.value}const _escapeRegex=/["\\\n\r]/g;function _escape(nt){return nt.replace(_escapeRegex,function(rt){switch(rt){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(nt){return nt.replace(_unescapeRegex,function(rt,it,st,bt){if(it)switch(it){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(st)return String.fromCharCode(parseInt(st,16));if(bt)throw new Error("Unsupported U escape")})}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$3=IdentifierIssuer_1,MessageDigest$3=MessageDigestBrowser,Permuter$1=Permuter_1,NQuads$3=NQuads_1;var URDNA2015_1=class{constructor({createMessageDigest:rt=()=>new MessageDigest$3("sha256"),maxDeepIterations:it=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$3("_:c14n"),this.createMessageDigest=rt,this.maxDeepIterations=it,this.quads=null,this.deepIterations=null}async main(rt){this.deepIterations=new Map,this.quads=rt;for(const Lt of rt)this._addBlankNodeQuadInfo({quad:Lt,component:Lt.subject}),this._addBlankNodeQuadInfo({quad:Lt,component:Lt.object}),this._addBlankNodeQuadInfo({quad:Lt,component:Lt.graph});const it=new Map,st=[...this.blankNodeInfo.keys()];let bt=0;for(const Lt of st)++bt%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:Lt,hashToBlankNodes:it});const wt=[...it.keys()].sort(),Et=[];for(const Lt of wt){const Ot=it.get(Lt);if(Ot.length>1){Et.push(Ot);continue}const Rt=Ot[0];this.canonicalIssuer.getId(Rt)}for(const Lt of Et){const Ot=[];for(const Rt of Lt){if(this.canonicalIssuer.hasId(Rt))continue;const Dt=new IdentifierIssuer$3("_:b");Dt.getId(Rt);const Bt=await this.hashNDegreeQuads(Rt,Dt);Ot.push(Bt)}Ot.sort(_stringHashCompare$1);for(const Rt of Ot){const Dt=Rt.issuer.getOldIds();for(const Bt of Dt)this.canonicalIssuer.getId(Bt)}}const kt=[];for(const Lt of this.quads){const Ot=NQuads$3.serializeQuadComponents(this._componentWithCanonicalId(Lt.subject),Lt.predicate,this._componentWithCanonicalId(Lt.object),this._componentWithCanonicalId(Lt.graph));kt.push(Ot)}return kt.sort(),kt.join("")}async hashFirstDegreeQuads(rt){const it=[],st=this.blankNodeInfo.get(rt),bt=st.quads;for(const Et of bt){const kt={subject:null,predicate:Et.predicate,object:null,graph:null};kt.subject=this.modifyFirstDegreeComponent(rt,Et.subject,"subject"),kt.object=this.modifyFirstDegreeComponent(rt,Et.object,"object"),kt.graph=this.modifyFirstDegreeComponent(rt,Et.graph,"graph"),it.push(NQuads$3.serializeQuad(kt))}it.sort();const wt=this.createMessageDigest();for(const Et of it)wt.update(Et);return st.hash=await wt.digest(),st.hash}async hashRelatedBlankNode(rt,it,st,bt){let wt;this.canonicalIssuer.hasId(rt)?wt=this.canonicalIssuer.getId(rt):st.hasId(rt)?wt=st.getId(rt):wt=this.blankNodeInfo.get(rt).hash;const Et=this.createMessageDigest();return Et.update(bt),bt!=="g"&&Et.update(this.getRelatedPredicate(it)),Et.update(wt),Et.digest()}async hashNDegreeQuads(rt,it){const st=this.deepIterations.get(rt)||0;if(st>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(rt,st+1);const bt=this.createMessageDigest(),wt=await this.createHashToRelated(rt,it),Et=[...wt.keys()].sort();for(const kt of Et){bt.update(kt);let Lt="",Ot;const Rt=new Permuter$1(wt.get(kt));let Dt=0;for(;Rt.hasNext();){const Bt=Rt.next();++Dt%3===0&&await this._yield();let Ft=it.clone(),Yt="";const Jt=[];let Wt=!1;for(const Qt of Bt)if(this.canonicalIssuer.hasId(Qt)?Yt+=this.canonicalIssuer.getId(Qt):(Ft.hasId(Qt)||Jt.push(Qt),Yt+=Ft.getId(Qt)),Lt.length!==0&&Yt>Lt){Wt=!0;break}if(!Wt){for(const Qt of Jt){const rn=await this.hashNDegreeQuads(Qt,Ft);if(Yt+=Ft.getId(Qt),Yt+=`<${rn.hash}>`,Ft=rn.issuer,Lt.length!==0&&Yt>Lt){Wt=!0;break}}Wt||(Lt.length===0||Yt<Lt)&&(Lt=Yt,Ot=Ft)}}bt.update(Lt),it=Ot}return{hash:await bt.digest(),issuer:it}}modifyFirstDegreeComponent(rt,it){return it.termType!=="BlankNode"?it:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return`<${rt.predicate.value}>`}async createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;let wt=0;for(const Et of bt)++wt%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:Et,component:Et.subject,position:"s",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:Et,component:Et.object,position:"o",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:Et,component:Et.graph,position:"g",id:rt,issuer:it,hashToRelated:st})]);return st}async _hashAndTrackBlankNode({id:rt,hashToBlankNodes:it}){const st=await this.hashFirstDegreeQuads(rt),bt=it.get(st);bt?bt.push(rt):it.set(st,[rt])}_addBlankNodeQuadInfo({quad:rt,component:it}){if(it.termType!=="BlankNode")return;const st=it.value,bt=this.blankNodeInfo.get(st);bt?bt.quads.add(rt):this.blankNodeInfo.set(st,{quads:new Set([rt]),hash:null})}async _addRelatedBlankNodeHash({quad:rt,component:it,position:st,id:bt,issuer:wt,hashToRelated:Et}){if(!(it.termType==="BlankNode"&&it.value!==bt))return;const kt=it.value,Lt=await this.hashRelatedBlankNode(kt,rt,wt,st),Ot=Et.get(Lt);Ot?Ot.push(kt):Et.set(Lt,[kt])}_componentWithCanonicalId(rt){return rt.termType==="BlankNode"&&!rt.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(rt.value)}:rt}async _yield(){return new Promise(rt=>setImmediate(rt))}};function _stringHashCompare$1(nt,rt){return nt.hash<rt.hash?-1:nt.hash>rt.hash?1:0}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest$2=MessageDigestBrowser,URDNA2015=URDNA2015_1;var URGNA2012=class extends URDNA2015{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest$2("sha1")}modifyFirstDegreeComponent(rt,it,st){return it.termType!=="BlankNode"?it:st==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return rt.predicate.value}async createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;let wt=0;for(const Et of bt){let kt,Lt;if(Et.subject.termType==="BlankNode"&&Et.subject.value!==rt)Lt=Et.subject.value,kt="p";else if(Et.object.termType==="BlankNode"&&Et.object.value!==rt)Lt=Et.object.value,kt="r";else continue;++wt%100===0&&await this._yield();const Ot=await this.hashRelatedBlankNode(Lt,Et,it,kt),Rt=st.get(Ot);Rt?Rt.push(Lt):st.set(Ot,[Lt])}return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$2=IdentifierIssuer_1,MessageDigest$1=MessageDigestBrowser,Permuter=Permuter_1,NQuads$2=NQuads_1;var URDNA2015Sync_1=class{constructor({createMessageDigest:rt=()=>new MessageDigest$1("sha256"),maxDeepIterations:it=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$2("_:c14n"),this.createMessageDigest=rt,this.maxDeepIterations=it,this.quads=null,this.deepIterations=null}main(rt){this.deepIterations=new Map,this.quads=rt;for(const kt of rt)this._addBlankNodeQuadInfo({quad:kt,component:kt.subject}),this._addBlankNodeQuadInfo({quad:kt,component:kt.object}),this._addBlankNodeQuadInfo({quad:kt,component:kt.graph});const it=new Map,st=[...this.blankNodeInfo.keys()];for(const kt of st)this._hashAndTrackBlankNode({id:kt,hashToBlankNodes:it});const bt=[...it.keys()].sort(),wt=[];for(const kt of bt){const Lt=it.get(kt);if(Lt.length>1){wt.push(Lt);continue}const Ot=Lt[0];this.canonicalIssuer.getId(Ot)}for(const kt of wt){const Lt=[];for(const Ot of kt){if(this.canonicalIssuer.hasId(Ot))continue;const Rt=new IdentifierIssuer$2("_:b");Rt.getId(Ot);const Dt=this.hashNDegreeQuads(Ot,Rt);Lt.push(Dt)}Lt.sort(_stringHashCompare);for(const Ot of Lt){const Rt=Ot.issuer.getOldIds();for(const Dt of Rt)this.canonicalIssuer.getId(Dt)}}const Et=[];for(const kt of this.quads){const Lt=NQuads$2.serializeQuadComponents(this._componentWithCanonicalId({component:kt.subject}),kt.predicate,this._componentWithCanonicalId({component:kt.object}),this._componentWithCanonicalId({component:kt.graph}));Et.push(Lt)}return Et.sort(),Et.join("")}hashFirstDegreeQuads(rt){const it=[],st=this.blankNodeInfo.get(rt),bt=st.quads;for(const Et of bt){const kt={subject:null,predicate:Et.predicate,object:null,graph:null};kt.subject=this.modifyFirstDegreeComponent(rt,Et.subject,"subject"),kt.object=this.modifyFirstDegreeComponent(rt,Et.object,"object"),kt.graph=this.modifyFirstDegreeComponent(rt,Et.graph,"graph"),it.push(NQuads$2.serializeQuad(kt))}it.sort();const wt=this.createMessageDigest();for(const Et of it)wt.update(Et);return st.hash=wt.digest(),st.hash}hashRelatedBlankNode(rt,it,st,bt){let wt;this.canonicalIssuer.hasId(rt)?wt=this.canonicalIssuer.getId(rt):st.hasId(rt)?wt=st.getId(rt):wt=this.blankNodeInfo.get(rt).hash;const Et=this.createMessageDigest();return Et.update(bt),bt!=="g"&&Et.update(this.getRelatedPredicate(it)),Et.update(wt),Et.digest()}hashNDegreeQuads(rt,it){const st=this.deepIterations.get(rt)||0;if(st>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(rt,st+1);const bt=this.createMessageDigest(),wt=this.createHashToRelated(rt,it),Et=[...wt.keys()].sort();for(const kt of Et){bt.update(kt);let Lt="",Ot;const Rt=new Permuter(wt.get(kt));for(;Rt.hasNext();){const Dt=Rt.next();let Bt=it.clone(),Ft="";const Yt=[];let Jt=!1;for(const Wt of Dt)if(this.canonicalIssuer.hasId(Wt)?Ft+=this.canonicalIssuer.getId(Wt):(Bt.hasId(Wt)||Yt.push(Wt),Ft+=Bt.getId(Wt)),Lt.length!==0&&Ft>Lt){Jt=!0;break}if(!Jt){for(const Wt of Yt){const Qt=this.hashNDegreeQuads(Wt,Bt);if(Ft+=Bt.getId(Wt),Ft+=`<${Qt.hash}>`,Bt=Qt.issuer,Lt.length!==0&&Ft>Lt){Jt=!0;break}}Jt||(Lt.length===0||Ft<Lt)&&(Lt=Ft,Ot=Bt)}}bt.update(Lt),it=Ot}return{hash:bt.digest(),issuer:it}}modifyFirstDegreeComponent(rt,it){return it.termType!=="BlankNode"?it:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return`<${rt.predicate.value}>`}createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;for(const wt of bt)this._addRelatedBlankNodeHash({quad:wt,component:wt.subject,position:"s",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:wt,component:wt.object,position:"o",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:wt,component:wt.graph,position:"g",id:rt,issuer:it,hashToRelated:st});return st}_hashAndTrackBlankNode({id:rt,hashToBlankNodes:it}){const st=this.hashFirstDegreeQuads(rt),bt=it.get(st);bt?bt.push(rt):it.set(st,[rt])}_addBlankNodeQuadInfo({quad:rt,component:it}){if(it.termType!=="BlankNode")return;const st=it.value,bt=this.blankNodeInfo.get(st);bt?bt.quads.add(rt):this.blankNodeInfo.set(st,{quads:new Set([rt]),hash:null})}_addRelatedBlankNodeHash({quad:rt,component:it,position:st,id:bt,issuer:wt,hashToRelated:Et}){if(!(it.termType==="BlankNode"&&it.value!==bt))return;const kt=it.value,Lt=this.hashRelatedBlankNode(kt,rt,wt,st),Ot=Et.get(Lt);Ot?Ot.push(kt):Et.set(Lt,[kt])}_componentWithCanonicalId({component:rt}){return rt.termType==="BlankNode"&&!rt.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(rt.value)}:rt}};function _stringHashCompare(nt,rt){return nt.hash<rt.hash?-1:nt.hash>rt.hash?1:0}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest=MessageDigestBrowser,URDNA2015Sync=URDNA2015Sync_1;var URGNA2012Sync=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest("sha1")}modifyFirstDegreeComponent(rt,it,st){return it.termType!=="BlankNode"?it:st==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return rt.predicate.value}createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;for(const wt of bt){let Et,kt;if(wt.subject.termType==="BlankNode"&&wt.subject.value!==rt)kt=wt.subject.value,Et="p";else if(wt.object.termType==="BlankNode"&&wt.object.value!==rt)kt=wt.object.value,Et="r";else continue;const Lt=this.hashRelatedBlankNode(kt,wt,it,Et),Ot=st.get(Lt);Ot?Ot.push(kt):st.set(Lt,[kt])}return st}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(nt){const rt=URDNA2015_1,it=URGNA2012,st=URDNA2015Sync_1,bt=URGNA2012Sync;let wt;try{wt=require$$4}catch{}nt.NQuads=NQuads_1,nt.IdentifierIssuer=IdentifierIssuer_1,nt._rdfCanonizeNative=function(Et){return Et&&(wt=Et),wt},nt.canonize=async function(Et,kt){if(Array.isArray(Et)||(Et=nt.NQuads.legacyDatasetToQuads(Et)),kt.useNative){if(!wt)throw new Error("rdf-canonize-native not available");if(kt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((Lt,Ot)=>wt.canonize(Et,kt,(Rt,Dt)=>Rt?Ot(Rt):Lt(Dt)))}if(kt.algorithm==="URDNA2015")return new rt(kt).main(Et);if(kt.algorithm==="URGNA2012"){if(kt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new it(kt).main(Et)}throw"algorithm"in kt?new Error("Invalid RDF Dataset Canonicalization algorithm: "+kt.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},nt._canonizeSync=function(Et,kt){if(Array.isArray(Et)||(Et=nt.NQuads.legacyDatasetToQuads(Et)),kt.useNative){if(!wt)throw new Error("rdf-canonize-native not available");if(kt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return wt.canonizeSync(Et,kt)}if(kt.algorithm==="URDNA2015")return new st(kt).main(Et);if(kt.algorithm==="URGNA2012"){if(kt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new bt(kt).main(Et)}throw"algorithm"in kt?new Error("Invalid RDF Dataset Canonicalization algorithm: "+kt.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(lib);(function(nt){nt.exports=lib})(rdfCanonize);const api$d={};var types$7=api$d;api$d.isArray=Array.isArray;api$d.isBoolean=nt=>typeof nt=="boolean"||Object.prototype.toString.call(nt)==="[object Boolean]";api$d.isDouble=nt=>api$d.isNumber(nt)&&(String(nt).indexOf(".")!==-1||Math.abs(nt)>=1e21);api$d.isEmptyObject=nt=>api$d.isObject(nt)&&Object.keys(nt).length===0;api$d.isNumber=nt=>typeof nt=="number"||Object.prototype.toString.call(nt)==="[object Number]";api$d.isNumeric=nt=>!isNaN(parseFloat(nt))&&isFinite(nt);api$d.isObject=nt=>Object.prototype.toString.call(nt)==="[object Object]";api$d.isString=nt=>typeof nt=="string"||Object.prototype.toString.call(nt)==="[object String]";api$d.isUndefined=nt=>typeof nt>"u";const types$6=types$7,api$c={};var graphTypes$5=api$c;api$c.isSubject=nt=>types$6.isObject(nt)&&!("@value"in nt||"@set"in nt||"@list"in nt)?Object.keys(nt).length>1||!("@id"in nt):!1;api$c.isSubjectReference=nt=>types$6.isObject(nt)&&Object.keys(nt).length===1&&"@id"in nt;api$c.isValue=nt=>types$6.isObject(nt)&&"@value"in nt;api$c.isList=nt=>types$6.isObject(nt)&&"@list"in nt;api$c.isGraph=nt=>types$6.isObject(nt)&&"@graph"in nt&&Object.keys(nt).filter(rt=>rt!=="@id"&&rt!=="@index").length===1;api$c.isSimpleGraph=nt=>api$c.isGraph(nt)&&!("@id"in nt);api$c.isBlankNode=nt=>{if(types$6.isObject(nt)){if("@id"in nt){const rt=nt["@id"];return!types$6.isString(rt)||rt.indexOf("_:")===0}return Object.keys(nt).length===0||!("@value"in nt||"@set"in nt||"@list"in nt)}return!1};var JsonLdError_1=class extends Error{constructor(rt="An unspecified JSON-LD error occurred.",it="jsonld.Error",st={}){super(rt),this.name=it,this.message=rt,this.details=st}};const graphTypes$4=graphTypes$5,types$5=types$7,IdentifierIssuer$1=rdfCanonize.exports.IdentifierIssuer,JsonLdError$a=JsonLdError_1,REGEX_BCP47$3=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER$1=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,REGEX_KEYWORD$3=/^@[a-zA-Z]+$/,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api$b={};var util$5=api$b;api$b.IdentifierIssuer=IdentifierIssuer$1;api$b.REGEX_BCP47=REGEX_BCP47$3;api$b.REGEX_KEYWORD=REGEX_KEYWORD$3;api$b.clone=function(nt){if(nt&&typeof nt=="object"){let rt;if(types$5.isArray(nt)){rt=[];for(let it=0;it<nt.length;++it)rt[it]=api$b.clone(nt[it])}else if(nt instanceof Map){rt=new Map;for(const[it,st]of nt)rt.set(it,api$b.clone(st))}else if(nt instanceof Set){rt=new Set;for(const it of nt)rt.add(api$b.clone(it))}else if(types$5.isObject(nt)){rt={};for(const it in nt)rt[it]=api$b.clone(nt[it])}else rt=nt.toString();return rt}return nt};api$b.asArray=function(nt){return Array.isArray(nt)?nt:[nt]};api$b.buildHeaders=(nt={})=>{if(Object.keys(nt).some(it=>it.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},nt)};api$b.parseLinkHeader=nt=>{const rt={},it=nt.match(REGEX_LINK_HEADERS);for(let st=0;st<it.length;++st){let bt=it[st].match(REGEX_LINK_HEADER$1);if(!bt)continue;const wt={target:bt[1]},Et=bt[2];for(;bt=REGEX_LINK_HEADER_PARAMS.exec(Et);)wt[bt[1]]=bt[2]===void 0?bt[3]:bt[2];const kt=wt.rel||"";Array.isArray(rt[kt])?rt[kt].push(wt):rt.hasOwnProperty(kt)?rt[kt]=[rt[kt],wt]:rt[kt]=wt}return rt};api$b.validateTypeValue=(nt,rt)=>{if(!types$5.isString(nt)&&!(types$5.isArray(nt)&&nt.every(it=>types$5.isString(it)))){if(rt&&types$5.isObject(nt))switch(Object.keys(nt).length){case 0:return;case 1:if("@default"in nt&&api$b.asArray(nt["@default"]).every(it=>types$5.isString(it)))return}throw new JsonLdError$a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:nt})}};api$b.hasProperty=(nt,rt)=>{if(nt.hasOwnProperty(rt)){const it=nt[rt];return!types$5.isArray(it)||it.length>0}return!1};api$b.hasValue=(nt,rt,it)=>{if(api$b.hasProperty(nt,rt)){let st=nt[rt];const bt=graphTypes$4.isList(st);if(types$5.isArray(st)||bt){bt&&(st=st["@list"]);for(let wt=0;wt<st.length;++wt)if(api$b.compareValues(it,st[wt]))return!0}else if(!types$5.isArray(it))return api$b.compareValues(it,st)}return!1};api$b.addValue=(nt,rt,it,st)=>{if(st=st||{},"propertyIsArray"in st||(st.propertyIsArray=!1),"valueIsArray"in st||(st.valueIsArray=!1),"allowDuplicate"in st||(st.allowDuplicate=!0),"prependValue"in st||(st.prependValue=!1),st.valueIsArray)nt[rt]=it;else if(types$5.isArray(it)){it.length===0&&st.propertyIsArray&&!nt.hasOwnProperty(rt)&&(nt[rt]=[]),st.prependValue&&(it=it.concat(nt[rt]),nt[rt]=[]);for(let bt=0;bt<it.length;++bt)api$b.addValue(nt,rt,it[bt],st)}else if(nt.hasOwnProperty(rt)){const bt=!st.allowDuplicate&&api$b.hasValue(nt,rt,it);!types$5.isArray(nt[rt])&&(!bt||st.propertyIsArray)&&(nt[rt]=[nt[rt]]),bt||(st.prependValue?nt[rt].unshift(it):nt[rt].push(it))}else nt[rt]=st.propertyIsArray?[it]:it};api$b.getValues=(nt,rt)=>[].concat(nt[rt]||[]);api$b.removeProperty=(nt,rt)=>{delete nt[rt]};api$b.removeValue=(nt,rt,it,st)=>{st=st||{},"propertyIsArray"in st||(st.propertyIsArray=!1);const bt=api$b.getValues(nt,rt).filter(wt=>!api$b.compareValues(wt,it));bt.length===0?api$b.removeProperty(nt,rt):bt.length===1&&!st.propertyIsArray?nt[rt]=bt[0]:nt[rt]=bt};api$b.relabelBlankNodes=(nt,rt)=>{rt=rt||{};const it=rt.issuer||new IdentifierIssuer$1("_:b");return _labelBlankNodes(it,nt)};api$b.compareValues=(nt,rt)=>nt===rt||graphTypes$4.isValue(nt)&&graphTypes$4.isValue(rt)&&nt["@value"]===rt["@value"]&&nt["@type"]===rt["@type"]&&nt["@language"]===rt["@language"]&&nt["@index"]===rt["@index"]?!0:types$5.isObject(nt)&&"@id"in nt&&types$5.isObject(rt)&&"@id"in rt?nt["@id"]===rt["@id"]:!1;api$b.compareShortestLeast=(nt,rt)=>nt.length<rt.length?-1:rt.length<nt.length?1:nt===rt?0:nt<rt?-1:1;function _labelBlankNodes(nt,rt){if(types$5.isArray(rt))for(let it=0;it<rt.length;++it)rt[it]=_labelBlankNodes(nt,rt[it]);else if(graphTypes$4.isList(rt))rt["@list"]=_labelBlankNodes(nt,rt["@list"]);else if(types$5.isObject(rt)){graphTypes$4.isBlankNode(rt)&&(rt["@id"]=nt.getId(rt["@id"]));const it=Object.keys(rt).sort();for(let st=0;st<it.length;++st){const bt=it[st];bt!=="@id"&&(rt[bt]=_labelBlankNodes(nt,rt[bt]))}}return rt}const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";var constants={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"},RequestQueue_1,hasRequiredRequestQueue;function requireRequestQueue(){return hasRequiredRequestQueue||(hasRequiredRequestQueue=1,RequestQueue_1=class{constructor(){this._requests={}}wrapLoader(rt){const it=this;return it._loader=rt,function(){return it.add.apply(it,arguments)}}async add(rt){let it=this._requests[rt];if(it)return Promise.resolve(it);it=this._requests[rt]=this._loader(rt);try{return await it}finally{delete this._requests[rt]}}}),RequestQueue_1}const types$4=types$7,api$a={};var url$1=api$a;api$a.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};api$a.parse=(nt,rt)=>{const it={},st=api$a.parsers[rt||"full"],bt=st.regex.exec(nt);let wt=st.keys.length;for(;wt--;)it[st.keys[wt]]=bt[wt]===void 0?null:bt[wt];return(it.scheme==="https"&&it.port==="443"||it.scheme==="http"&&it.port==="80")&&(it.href=it.href.replace(":"+it.port,""),it.authority=it.authority.replace(":"+it.port,""),it.port=null),it.normalizedPath=api$a.removeDotSegments(it.path),it};api$a.prependBase=(nt,rt)=>{if(nt===null||api$a.isAbsolute(rt))return rt;(!nt||types$4.isString(nt))&&(nt=api$a.parse(nt||""));const it=api$a.parse(rt),st={protocol:nt.protocol||""};if(it.authority!==null)st.authority=it.authority,st.path=it.path,st.query=it.query;else if(st.authority=nt.authority,it.path==="")st.path=nt.path,it.query!==null?st.query=it.query:st.query=nt.query;else{if(it.path.indexOf("/")===0)st.path=it.path;else{let wt=nt.path;wt=wt.substr(0,wt.lastIndexOf("/")+1),(wt.length>0||nt.authority)&&wt.substr(-1)!=="/"&&(wt+="/"),wt+=it.path,st.path=wt}st.query=it.query}it.path!==""&&(st.path=api$a.removeDotSegments(st.path));let bt=st.protocol;return st.authority!==null&&(bt+="//"+st.authority),bt+=st.path,st.query!==null&&(bt+="?"+st.query),it.fragment!==null&&(bt+="#"+it.fragment),bt===""&&(bt="./"),bt};api$a.removeBase=(nt,rt)=>{if(nt===null)return rt;(!nt||types$4.isString(nt))&&(nt=api$a.parse(nt||""));let it="";if(nt.href!==""?it+=(nt.protocol||"")+"//"+(nt.authority||""):rt.indexOf("//")&&(it+="//"),rt.indexOf(it)!==0)return rt;const st=api$a.parse(rt.substr(it.length)),bt=nt.normalizedPath.split("/"),wt=st.normalizedPath.split("/"),Et=st.fragment||st.query?0:1;for(;bt.length>0&&wt.length>Et&&bt[0]===wt[0];)bt.shift(),wt.shift();let kt="";if(bt.length>0){bt.pop();for(let Lt=0;Lt<bt.length;++Lt)kt+="../"}return kt+=wt.join("/"),st.query!==null&&(kt+="?"+st.query),st.fragment!==null&&(kt+="#"+st.fragment),kt===""&&(kt="./"),kt};api$a.removeDotSegments=nt=>{if(nt.length===0)return"";const rt=nt.split("/"),it=[];for(;rt.length>0;){const st=rt.shift(),bt=rt.length===0;if(st==="."){bt&&it.push("");continue}if(st===".."){it.pop(),bt&&it.push("");continue}it.push(st)}return nt[0]==="/"&&it.length>0&&it[0]!==""&&it.unshift(""),it.length===1&&it[0]===""?"/":it.join("/")};const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api$a.isAbsolute=nt=>types$4.isString(nt)&&isAbsoluteRegex.test(nt);api$a.isRelative=nt=>types$4.isString(nt);const{parseLinkHeader,buildHeaders}=util$5,{LINK_HEADER_CONTEXT}=constants,JsonLdError$9=JsonLdError_1,RequestQueue=requireRequestQueue(),{prependBase:prependBase$2}=url$1,REGEX_LINK_HEADER=/(^|(\r\n))link:/i;var xhr=({secure:nt,headers:rt={},xhr:it}={headers:{}})=>{return rt=buildHeaders(rt),new RequestQueue().wrapLoader(bt);async function bt(wt){if(wt.indexOf("http:")!==0&&wt.indexOf("https:")!==0)throw new JsonLdError$9('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:wt});if(nt&&wt.indexOf("https")!==0)throw new JsonLdError$9(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:wt});let Et;try{Et=await _get(it,wt,rt)}catch(Dt){throw new JsonLdError$9("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:wt,cause:Dt})}if(Et.status>=400)throw new JsonLdError$9("URL could not be dereferenced: "+Et.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:wt,httpStatusCode:Et.status});let kt={contextUrl:null,documentUrl:wt,document:Et.response},Lt=null;const Ot=Et.getResponseHeader("Content-Type");let Rt;if(REGEX_LINK_HEADER.test(Et.getAllResponseHeaders())&&(Rt=Et.getResponseHeader("Link")),Rt&&Ot!=="application/ld+json"){const Dt=parseLinkHeader(Rt),Bt=Dt[LINK_HEADER_CONTEXT];if(Array.isArray(Bt))throw new JsonLdError$9("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:wt});Bt&&(kt.contextUrl=Bt.target),Lt=Dt.alternate,Lt&&Lt.type=="application/ld+json"&&!(Ot||"").match(/^application\/(\w*\+)?json$/)&&(kt=await bt(prependBase$2(wt,Lt.target)))}return kt}};function _get(nt,rt,it){nt=nt||XMLHttpRequest;const st=new nt;return new Promise((bt,wt)=>{st.onload=()=>bt(st),st.onerror=Et=>wt(Et),st.open("GET",rt,!0);for(const Et in it)st.setRequestHeader(Et,it[Et]);st.send()})}const xhrLoader=xhr,api$9={};var platformBrowser=api$9;api$9.setupDocumentLoaders=function(nt){typeof XMLHttpRequest<"u"&&(nt.documentLoaders.xhr=xhrLoader,nt.useDocumentLoader("xhr"))};api$9.setupGlobals=function(nt){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:nt.JsonLdProcessor})};var iterator,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator=function(nt){nt.prototype[Symbol.iterator]=function*(){for(let rt=this.head;rt;rt=rt.next)yield rt.value}}),iterator}var yallist=Yallist$1;Yallist$1.Node=Node$1;Yallist$1.create=Yallist$1;function Yallist$1(nt){var rt=this;if(rt instanceof Yallist$1||(rt=new Yallist$1),rt.tail=null,rt.head=null,rt.length=0,nt&&typeof nt.forEach=="function")nt.forEach(function(bt){rt.push(bt)});else if(arguments.length>0)for(var it=0,st=arguments.length;it<st;it++)rt.push(arguments[it]);return rt}Yallist$1.prototype.removeNode=function(nt){if(nt.list!==this)throw new Error("removing node which does not belong to this list");var rt=nt.next,it=nt.prev;return rt&&(rt.prev=it),it&&(it.next=rt),nt===this.head&&(this.head=rt),nt===this.tail&&(this.tail=it),nt.list.length--,nt.next=null,nt.prev=null,nt.list=null,rt};Yallist$1.prototype.unshiftNode=function(nt){if(nt!==this.head){nt.list&&nt.list.removeNode(nt);var rt=this.head;nt.list=this,nt.next=rt,rt&&(rt.prev=nt),this.head=nt,this.tail||(this.tail=nt),this.length++}};Yallist$1.prototype.pushNode=function(nt){if(nt!==this.tail){nt.list&&nt.list.removeNode(nt);var rt=this.tail;nt.list=this,nt.prev=rt,rt&&(rt.next=nt),this.tail=nt,this.head||(this.head=nt),this.length++}};Yallist$1.prototype.push=function(){for(var nt=0,rt=arguments.length;nt<rt;nt++)push(this,arguments[nt]);return this.length};Yallist$1.prototype.unshift=function(){for(var nt=0,rt=arguments.length;nt<rt;nt++)unshift(this,arguments[nt]);return this.length};Yallist$1.prototype.pop=function(){if(!!this.tail){var nt=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,nt}};Yallist$1.prototype.shift=function(){if(!!this.head){var nt=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,nt}};Yallist$1.prototype.forEach=function(nt,rt){rt=rt||this;for(var it=this.head,st=0;it!==null;st++)nt.call(rt,it.value,st,this),it=it.next};Yallist$1.prototype.forEachReverse=function(nt,rt){rt=rt||this;for(var it=this.tail,st=this.length-1;it!==null;st--)nt.call(rt,it.value,st,this),it=it.prev};Yallist$1.prototype.get=function(nt){for(var rt=0,it=this.head;it!==null&&rt<nt;rt++)it=it.next;if(rt===nt&&it!==null)return it.value};Yallist$1.prototype.getReverse=function(nt){for(var rt=0,it=this.tail;it!==null&&rt<nt;rt++)it=it.prev;if(rt===nt&&it!==null)return it.value};Yallist$1.prototype.map=function(nt,rt){rt=rt||this;for(var it=new Yallist$1,st=this.head;st!==null;)it.push(nt.call(rt,st.value,this)),st=st.next;return it};Yallist$1.prototype.mapReverse=function(nt,rt){rt=rt||this;for(var it=new Yallist$1,st=this.tail;st!==null;)it.push(nt.call(rt,st.value,this)),st=st.prev;return it};Yallist$1.prototype.reduce=function(nt,rt){var it,st=this.head;if(arguments.length>1)it=rt;else if(this.head)st=this.head.next,it=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var bt=0;st!==null;bt++)it=nt(it,st.value,bt),st=st.next;return it};Yallist$1.prototype.reduceReverse=function(nt,rt){var it,st=this.tail;if(arguments.length>1)it=rt;else if(this.tail)st=this.tail.prev,it=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var bt=this.length-1;st!==null;bt--)it=nt(it,st.value,bt),st=st.prev;return it};Yallist$1.prototype.toArray=function(){for(var nt=new Array(this.length),rt=0,it=this.head;it!==null;rt++)nt[rt]=it.value,it=it.next;return nt};Yallist$1.prototype.toArrayReverse=function(){for(var nt=new Array(this.length),rt=0,it=this.tail;it!==null;rt++)nt[rt]=it.value,it=it.prev;return nt};Yallist$1.prototype.slice=function(nt,rt){rt=rt||this.length,rt<0&&(rt+=this.length),nt=nt||0,nt<0&&(nt+=this.length);var it=new Yallist$1;if(rt<nt||rt<0)return it;nt<0&&(nt=0),rt>this.length&&(rt=this.length);for(var st=0,bt=this.head;bt!==null&&st<nt;st++)bt=bt.next;for(;bt!==null&&st<rt;st++,bt=bt.next)it.push(bt.value);return it};Yallist$1.prototype.sliceReverse=function(nt,rt){rt=rt||this.length,rt<0&&(rt+=this.length),nt=nt||0,nt<0&&(nt+=this.length);var it=new Yallist$1;if(rt<nt||rt<0)return it;nt<0&&(nt=0),rt>this.length&&(rt=this.length);for(var st=this.length,bt=this.tail;bt!==null&&st>rt;st--)bt=bt.prev;for(;bt!==null&&st>nt;st--,bt=bt.prev)it.push(bt.value);return it};Yallist$1.prototype.splice=function(nt,rt,...it){nt>this.length&&(nt=this.length-1),nt<0&&(nt=this.length+nt);for(var st=0,bt=this.head;bt!==null&&st<nt;st++)bt=bt.next;for(var wt=[],st=0;bt&&st<rt;st++)wt.push(bt.value),bt=this.removeNode(bt);bt===null&&(bt=this.tail),bt!==this.head&&bt!==this.tail&&(bt=bt.prev);for(var st=0;st<it.length;st++)bt=insert(this,bt,it[st]);return wt};Yallist$1.prototype.reverse=function(){for(var nt=this.head,rt=this.tail,it=nt;it!==null;it=it.prev){var st=it.prev;it.prev=it.next,it.next=st}return this.head=rt,this.tail=nt,this};function insert(nt,rt,it){var st=rt===nt.head?new Node$1(it,null,rt,nt):new Node$1(it,rt,rt.next,nt);return st.next===null&&(nt.tail=st),st.prev===null&&(nt.head=st),nt.length++,st}function push(nt,rt){nt.tail=new Node$1(rt,nt.tail,null,nt),nt.head||(nt.head=nt.tail),nt.length++}function unshift(nt,rt){nt.head=new Node$1(rt,null,nt.head,nt),nt.tail||(nt.tail=nt.head),nt.length++}function Node$1(nt,rt,it,st){if(!(this instanceof Node$1))return new Node$1(nt,rt,it,st);this.list=st,this.value=nt,rt?(rt.next=this,this.prev=rt):this.prev=null,it?(it.prev=this,this.next=it):this.next=null}try{requireIterator()(Yallist$1)}catch(nt){}const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(rt){if(typeof rt=="number"&&(rt={max:rt}),rt||(rt={}),rt.max&&(typeof rt.max!="number"||rt.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=rt.max||1/0;const it=rt.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof it!="function"?naiveLength:it,this[ALLOW_STALE]=rt.stale||!1,rt.maxAge&&typeof rt.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=rt.maxAge||0,this[DISPOSE]=rt.dispose,this[NO_DISPOSE_ON_SET]=rt.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=rt.updateAgeOnGet||!1,this.reset()}set max(rt){if(typeof rt!="number"||rt<0)throw new TypeError("max must be a non-negative number");this[MAX]=rt||1/0,trim(this)}get max(){return this[MAX]}set allowStale(rt){this[ALLOW_STALE]=!!rt}get allowStale(){return this[ALLOW_STALE]}set maxAge(rt){if(typeof rt!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=rt,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(rt){typeof rt!="function"&&(rt=naiveLength),rt!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=rt,this[LENGTH]=0,this[LRU_LIST].forEach(it=>{it.length=this[LENGTH_CALCULATOR](it.value,it.key),this[LENGTH]+=it.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(rt,it){it=it||this;for(let st=this[LRU_LIST].tail;st!==null;){const bt=st.prev;forEachStep(this,rt,st,it),st=bt}}forEach(rt,it){it=it||this;for(let st=this[LRU_LIST].head;st!==null;){const bt=st.next;forEachStep(this,rt,st,it),st=bt}}keys(){return this[LRU_LIST].toArray().map(rt=>rt.key)}values(){return this[LRU_LIST].toArray().map(rt=>rt.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(rt=>this[DISPOSE](rt.key,rt.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(rt=>isStale(this,rt)?!1:{k:rt.key,v:rt.value,e:rt.now+(rt.maxAge||0)}).toArray().filter(rt=>rt)}dumpLru(){return this[LRU_LIST]}set(rt,it,st){if(st=st||this[MAX_AGE],st&&typeof st!="number")throw new TypeError("maxAge must be a number");const bt=st?Date.now():0,wt=this[LENGTH_CALCULATOR](it,rt);if(this[CACHE].has(rt)){if(wt>this[MAX])return del(this,this[CACHE].get(rt)),!1;const Lt=this[CACHE].get(rt).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](rt,Lt.value)),Lt.now=bt,Lt.maxAge=st,Lt.value=it,this[LENGTH]+=wt-Lt.length,Lt.length=wt,this.get(rt),trim(this),!0}const Et=new Entry(rt,it,wt,bt,st);return Et.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](rt,it),!1):(this[LENGTH]+=Et.length,this[LRU_LIST].unshift(Et),this[CACHE].set(rt,this[LRU_LIST].head),trim(this),!0)}has(rt){if(!this[CACHE].has(rt))return!1;const it=this[CACHE].get(rt).value;return!isStale(this,it)}get(rt){return get(this,rt,!0)}peek(rt){return get(this,rt,!1)}pop(){const rt=this[LRU_LIST].tail;return rt?(del(this,rt),rt.value):null}del(rt){del(this,this[CACHE].get(rt))}load(rt){this.reset();const it=Date.now();for(let st=rt.length-1;st>=0;st--){const bt=rt[st],wt=bt.e||0;if(wt===0)this.set(bt.k,bt.v);else{const Et=wt-it;Et>0&&this.set(bt.k,bt.v,Et)}}}prune(){this[CACHE].forEach((rt,it)=>get(this,it,!1))}}const get=(nt,rt,it)=>{const st=nt[CACHE].get(rt);if(st){const bt=st.value;if(isStale(nt,bt)){if(del(nt,st),!nt[ALLOW_STALE])return}else it&&(nt[UPDATE_AGE_ON_GET]&&(st.value.now=Date.now()),nt[LRU_LIST].unshiftNode(st));return bt.value}},isStale=(nt,rt)=>{if(!rt||!rt.maxAge&&!nt[MAX_AGE])return!1;const it=Date.now()-rt.now;return rt.maxAge?it>rt.maxAge:nt[MAX_AGE]&&it>nt[MAX_AGE]},trim=nt=>{if(nt[LENGTH]>nt[MAX])for(let rt=nt[LRU_LIST].tail;nt[LENGTH]>nt[MAX]&&rt!==null;){const it=rt.prev;del(nt,rt),rt=it}},del=(nt,rt)=>{if(rt){const it=rt.value;nt[DISPOSE]&&nt[DISPOSE](it.key,it.value),nt[LENGTH]-=it.length,nt[CACHE].delete(it.key),nt[LRU_LIST].removeNode(rt)}};class Entry{constructor(rt,it,st,bt,wt){this.key=rt,this.value=it,this.length=st,this.now=bt,this.maxAge=wt||0}}const forEachStep=(nt,rt,it,st)=>{let bt=it.value;isStale(nt,bt)&&(del(nt,it),nt[ALLOW_STALE]||(bt=void 0)),bt&&rt.call(st,bt.value,bt.key,nt)};var lruCache=LRUCache;const LRU$1=lruCache,MAX_ACTIVE_CONTEXTS=10;var ResolvedContext_1=class{constructor({document:rt}){this.document=rt,this.cache=new LRU$1({max:MAX_ACTIVE_CONTEXTS})}getProcessed(rt){return this.cache.get(rt)}setProcessed(rt,it){this.cache.set(rt,it)}};const{isArray:_isArray$5,isObject:_isObject$4,isString:_isString$4}=types$7,{asArray:_asArray$4}=util$5,{prependBase:prependBase$1}=url$1,JsonLdError$8=JsonLdError_1,ResolvedContext=ResolvedContext_1,MAX_CONTEXT_URLS=10;var ContextResolver_1=class{constructor({sharedCache:rt}){this.perOpCache=new Map,this.sharedCache=rt}async resolve({activeCtx:rt,context:it,documentLoader:st,base:bt,cycles:wt=new Set}){it&&_isObject$4(it)&&it["@context"]&&(it=it["@context"]),it=_asArray$4(it);const Et=[];for(const kt of it){if(_isString$4(kt)){let Rt=this._get(kt);Rt||(Rt=await this._resolveRemoteContext({activeCtx:rt,url:kt,documentLoader:st,base:bt,cycles:wt})),_isArray$5(Rt)?Et.push(...Rt):Et.push(Rt);continue}if(kt===null){Et.push(new ResolvedContext({document:null}));continue}_isObject$4(kt)||_throwInvalidLocalContext(it);const Lt=JSON.stringify(kt);let Ot=this._get(Lt);Ot||(Ot=new ResolvedContext({document:kt}),this._cacheResolvedContext({key:Lt,resolved:Ot,tag:"static"})),Et.push(Ot)}return Et}_get(rt){let it=this.perOpCache.get(rt);if(!it){const st=this.sharedCache.get(rt);st&&(it=st.get("static"),it&&this.perOpCache.set(rt,it))}return it}_cacheResolvedContext({key:rt,resolved:it,tag:st}){if(this.perOpCache.set(rt,it),st!==void 0){let bt=this.sharedCache.get(rt);bt||(bt=new Map,this.sharedCache.set(rt,bt)),bt.set(st,it)}return it}async _resolveRemoteContext({activeCtx:rt,url:it,documentLoader:st,base:bt,cycles:wt}){it=prependBase$1(bt,it);const{context:Et,remoteDoc:kt}=await this._fetchContext({activeCtx:rt,url:it,documentLoader:st,cycles:wt});bt=kt.documentUrl||it,_resolveContextUrls({context:Et,base:bt});const Lt=await this.resolve({activeCtx:rt,context:Et,documentLoader:st,base:bt,cycles:wt});return this._cacheResolvedContext({key:it,resolved:Lt,tag:kt.tag}),Lt}async _fetchContext({activeCtx:rt,url:it,documentLoader:st,cycles:bt}){if(bt.size>MAX_CONTEXT_URLS)throw new JsonLdError$8("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:rt.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:MAX_CONTEXT_URLS});if(bt.has(it))throw new JsonLdError$8("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:rt.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:it});bt.add(it);let wt,Et;try{Et=await st(it),wt=Et.document||null,_isString$4(wt)&&(wt=JSON.parse(wt))}catch(kt){throw new JsonLdError$8("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:it,cause:kt})}if(!_isObject$4(wt))throw new JsonLdError$8("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:it});return"@context"in wt?wt={"@context":wt["@context"]}:wt={"@context":{}},Et.contextUrl&&(_isArray$5(wt["@context"])||(wt["@context"]=[wt["@context"]]),wt["@context"].push(Et.contextUrl)),{context:wt,remoteDoc:Et}}};function _throwInvalidLocalContext(nt){throw new JsonLdError$8("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:nt})}function _resolveContextUrls({context:nt,base:rt}){if(!nt)return;const it=nt["@context"];if(_isString$4(it)){nt["@context"]=prependBase$1(rt,it);return}if(_isArray$5(it)){for(let st=0;st<it.length;++st){const bt=it[st];if(_isString$4(bt)){it[st]=prependBase$1(rt,bt);continue}_isObject$4(bt)&&_resolveContextUrls({context:{"@context":bt},base:rt})}return}if(!!_isObject$4(it))for(const st in it)_resolveContextUrls({context:it[st],base:rt})}var NQuads$1=rdfCanonize.exports.NQuads;const JsonLdError$7=JsonLdError_1,{isArray:_isArray$4}=types$7,{asArray:_asArray$3}=util$5,api$8={};var events=api$8;api$8.defaultEventHandler=null;api$8.setupEventHandler=({options:nt={}})=>{const rt=[].concat(nt.safe?api$8.safeEventHandler:[],nt.eventHandler?_asArray$3(nt.eventHandler):[],api$8.defaultEventHandler?api$8.defaultEventHandler:[]);return rt.length===0?null:rt};api$8.handleEvent=({event:nt,options:rt})=>{_handle({event:nt,handlers:rt.eventHandler})};function _handle({event:nt,handlers:rt}){let it=!0;for(let st=0;it&&st<rt.length;++st){it=!1;const bt=rt[st];if(_isArray$4(bt))it=_handle({event:nt,handlers:bt});else if(typeof bt=="function")bt({event:nt,next:()=>{it=!0}});else if(typeof bt=="object")nt.code in bt?bt[nt.code]({event:nt,next:()=>{it=!0}}):it=!0;else throw new JsonLdError$7("Invalid event handler.","jsonld.InvalidEventHandler",{event:nt})}return it}const _notSafeEventCodes=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);api$8.safeEventHandler=function nt({event:rt,next:it}){if(rt.level==="warning"&&_notSafeEventCodes.has(rt.code))throw new JsonLdError$7("Safe mode validation error.","jsonld.ValidationError",{event:rt});it()};api$8.logEventHandler=function nt({event:rt,next:it}){console.log(`EVENT: ${rt.message}`,{event:rt}),it()};api$8.logWarningEventHandler=function nt({event:rt,next:it}){rt.level==="warning"&&console.warn(`WARNING: ${rt.message}`,{event:rt}),it()};api$8.unhandledEventHandler=function nt({event:rt}){throw new JsonLdError$7("No handler for event.","jsonld.UnhandledEvent",{event:rt})};api$8.setDefaultEventHandler=function({eventHandler:nt}={}){api$8.defaultEventHandler=nt?_asArray$3(nt):null};const util$4=util$5,JsonLdError$6=JsonLdError_1,{isArray:_isArray$3,isObject:_isObject$3,isString:_isString$3,isUndefined:_isUndefined$2}=types$7,{isAbsolute:_isAbsoluteIri$2,isRelative:_isRelativeIri,prependBase}=url$1,{handleEvent:_handleEvent$3}=events,{REGEX_BCP47:REGEX_BCP47$2,REGEX_KEYWORD:REGEX_KEYWORD$2,asArray:_asArray$2,compareShortestLeast:_compareShortestLeast$1}=util$5,INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,api$7={};var context=api$7;api$7.process=async({activeCtx:nt,localCtx:rt,options:it,propagate:st=!0,overrideProtected:bt=!1,cycles:wt=new Set})=>{if(_isObject$3(rt)&&"@context"in rt&&_isArray$3(rt["@context"])&&(rt=rt["@context"]),_asArray$2(rt).length===0)return nt;const kt=[],Lt=[({event:Bt,next:Ft})=>{kt.push(Bt),Ft()}];it.eventHandler&&Lt.push(it.eventHandler);const Ot=it;it={...it,eventHandler:Lt};const Rt=await it.contextResolver.resolve({activeCtx:nt,context:rt,documentLoader:it.documentLoader,base:it.base});_isObject$3(Rt[0].document)&&typeof Rt[0].document["@propagate"]=="boolean"&&(st=Rt[0].document["@propagate"]);let Dt=nt;!st&&!Dt.previousContext&&(Dt=Dt.clone(),Dt.previousContext=nt);for(const Bt of Rt){let{document:Ft}=Bt;if(nt=Dt,Ft===null){if(!bt&&Object.keys(nt.protected).length!==0)throw new JsonLdError$6("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Dt=nt=api$7.getInitialContext(it).clone();continue}const Yt=Bt.getProcessed(nt);if(Yt){if(Ot.eventHandler)for(const Wt of Yt.events)_handleEvent$3({event:Wt,options:Ot});Dt=nt=Yt.context;continue}if(_isObject$3(Ft)&&"@context"in Ft&&(Ft=Ft["@context"]),!_isObject$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ft});Dt=Dt.clone();const Jt=new Map;if("@version"in Ft){if(Ft["@version"]!==1.1)throw new JsonLdError$6("Unsupported JSON-LD version: "+Ft["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ft});if(nt.processingMode&&nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("@version: "+Ft["@version"]+" not compatible with "+nt.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ft});Dt.processingMode="json-ld-1.1",Dt["@version"]=Ft["@version"],Jt.set("@version",!0)}if(Dt.processingMode=Dt.processingMode||nt.processingMode,"@base"in Ft){let Wt=Ft["@base"];if(!(Wt===null||_isAbsoluteIri$2(Wt)))if(_isRelativeIri(Wt))Wt=prependBase(Dt["@base"],Wt);else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ft});Dt["@base"]=Wt,Jt.set("@base",!0)}if("@vocab"in Ft){const Wt=Ft["@vocab"];if(Wt===null)delete Dt["@vocab"];else if(_isString$3(Wt)){if(!_isAbsoluteIri$2(Wt)&&api$7.processingMode(Dt,1))throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ft});{const Qt=_expandIri$3(Dt,Wt,{vocab:!0,base:!0},void 0,void 0,it);_isAbsoluteIri$2(Qt)||it.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Qt}},options:it}),Dt["@vocab"]=Qt}}else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ft});Jt.set("@vocab",!0)}if("@language"in Ft){const Wt=Ft["@language"];if(Wt===null)delete Dt["@language"];else if(_isString$3(Wt))Wt.match(REGEX_BCP47$2)||it.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Wt}},options:it}),Dt["@language"]=Wt.toLowerCase();else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ft});Jt.set("@language",!0)}if("@direction"in Ft){const Wt=Ft["@direction"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @direction not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ft});if(Wt===null)delete Dt["@direction"];else{if(Wt!=="ltr"&&Wt!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ft});Dt["@direction"]=Wt}Jt.set("@direction",!0)}if("@propagate"in Ft){const Wt=Ft["@propagate"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @propagate not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ft});if(typeof Wt!="boolean")throw new JsonLdError$6("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:rt});Jt.set("@propagate",!0)}if("@import"in Ft){const Wt=Ft["@import"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @import not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ft});if(!_isString$3(Wt))throw new JsonLdError$6("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:rt});const Qt=await it.contextResolver.resolve({activeCtx:nt,context:Wt,documentLoader:it.documentLoader,base:it.base});if(Qt.length!==1)throw new JsonLdError$6("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:rt});const rn=Qt[0].getProcessed(nt);if(rn)Ft=rn;else{const sn=Qt[0].document;if("@import"in sn)throw new JsonLdError$6("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:rt});for(const on in sn)Ft.hasOwnProperty(on)||(Ft[on]=sn[on]);Qt[0].setProcessed(nt,Ft)}Jt.set("@import",!0)}Jt.set("@protected",Ft["@protected"]||!1);for(const Wt in Ft)if(api$7.createTermDefinition({activeCtx:Dt,localCtx:Ft,term:Wt,defined:Jt,options:it,overrideProtected:bt}),_isObject$3(Ft[Wt])&&"@context"in Ft[Wt]){const Qt=Ft[Wt]["@context"];let rn=!0;if(_isString$3(Qt)){const sn=prependBase(it.base,Qt);wt.has(sn)?rn=!1:wt.add(sn)}if(rn)try{await api$7.process({activeCtx:Dt.clone(),localCtx:Ft[Wt]["@context"],overrideProtected:!0,options:it,cycles:wt})}catch{throw new JsonLdError$6("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ft[Wt]["@context"],term:Wt})}}Bt.setProcessed(nt,{context:Dt,events:kt})}return Dt};api$7.createTermDefinition=({activeCtx:nt,localCtx:rt,term:it,defined:st,options:bt,overrideProtected:wt=!1})=>{if(st.has(it)){if(st.get(it))return;throw new JsonLdError$6("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:rt,term:it})}st.set(it,!1);let Et;if(rt.hasOwnProperty(it)&&(Et=rt[it]),it==="@type"&&_isObject$3(Et)&&(Et["@container"]||"@set")==="@set"&&api$7.processingMode(nt,1.1)){const Ft=["@container","@id","@protected"],Yt=Object.keys(Et);if(Yt.length===0||Yt.some(Jt=>!Ft.includes(Jt)))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:rt,term:it})}else{if(api$7.isKeyword(it))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:rt,term:it});if(it.match(REGEX_KEYWORD$2)){bt.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:it}},options:bt});return}else if(it==="")throw new JsonLdError$6("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:rt})}const kt=nt.mappings.get(it);nt.mappings.has(it)&&nt.mappings.delete(it);let Lt=!1;if((_isString$3(Et)||Et===null)&&(Lt=!0,Et={"@id":Et}),!_isObject$3(Et))throw new JsonLdError$6("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:rt});const Ot={};nt.mappings.set(it,Ot),Ot.reverse=!1;const Rt=["@container","@id","@language","@reverse","@type"];api$7.processingMode(nt,1.1)&&Rt.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ft in Et)if(!Rt.includes(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a term definition must not contain "+Ft,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});const Dt=it.indexOf(":");if(Ot._termHasColon=Dt>0,"@reverse"in Et){if("@id"in Et)throw new JsonLdError$6("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});if("@nest"in Et)throw new JsonLdError$6("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});const Ft=Et["@reverse"];if(!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(Ft.match(REGEX_KEYWORD$2)){bt.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ft}},options:bt}),kt?nt.mappings.set(it,kt):nt.mappings.delete(it);return}const Yt=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,bt);if(!_isAbsoluteIri$2(Yt))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});Ot["@id"]=Yt,Ot.reverse=!0}else if("@id"in Et){let Ft=Et["@id"];if(Ft&&!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(Ft===null)Ot["@id"]=null;else if(!api$7.isKeyword(Ft)&&Ft.match(REGEX_KEYWORD$2)){bt.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ft}},options:bt}),kt?nt.mappings.set(it,kt):nt.mappings.delete(it);return}else if(Ft!==it){if(Ft=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,bt),!_isAbsoluteIri$2(Ft)&&!api$7.isKeyword(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(it.match(/(?::[^:])|\//)){const Yt=new Map(st).set(it,!0);if(_expandIri$3(nt,it,{vocab:!0,base:!1},rt,Yt,bt)!==Ft)throw new JsonLdError$6("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt})}Ot["@id"]=Ft,Ot._prefix=Lt&&!Ot._termHasColon&&Ft.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in Ot))if(Ot._termHasColon){const Ft=it.substr(0,Dt);if(rt.hasOwnProperty(Ft)&&api$7.createTermDefinition({activeCtx:nt,localCtx:rt,term:Ft,defined:st,options:bt}),nt.mappings.has(Ft)){const Yt=it.substr(Dt+1);Ot["@id"]=nt.mappings.get(Ft)["@id"]+Yt}else Ot["@id"]=it}else if(it==="@type")Ot["@id"]=it;else{if(!("@vocab"in nt))throw new JsonLdError$6("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt,term:it});Ot["@id"]=nt["@vocab"]+it}if((Et["@protected"]===!0||st.get("@protected")===!0&&Et["@protected"]!==!1)&&(nt.protected[it]=!0,Ot.protected=!0),st.set(it,!0),"@type"in Et){let Ft=Et["@type"];if(!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt});if(Ft==="@json"||Ft==="@none"){if(api$7.processingMode(nt,1))throw new JsonLdError$6(`Invalid JSON-LD syntax; an @context @type value must not be "${Ft}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}else if(Ft!=="@id"&&Ft!=="@vocab"){if(Ft=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,bt),!_isAbsoluteIri$2(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt});if(Ft.indexOf("_:")===0)throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}Ot["@type"]=Ft}if("@container"in Et){const Ft=_isString$3(Et["@container"])?[Et["@container"]]:Et["@container"]||[],Yt=["@list","@set","@index","@language"];let Jt=!0;const Wt=Ft.includes("@set");if(api$7.processingMode(nt,1.1)){if(Yt.push("@graph","@id","@type"),Ft.includes("@list")){if(Ft.length!==1)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:rt})}else if(Ft.includes("@graph")){if(Ft.some(Qt=>Qt!=="@graph"&&Qt!=="@id"&&Qt!=="@index"&&Qt!=="@set"))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:rt})}else Jt&=Ft.length<=(Wt?2:1);if(Ft.includes("@type")&&(Ot["@type"]=Ot["@type"]||"@id",!["@id","@vocab"].includes(Ot["@type"])))throw new JsonLdError$6("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}else Jt&=!_isArray$3(Et["@container"]),Jt&=Ft.length<=1;if(Jt&=Ft.every(Qt=>Yt.includes(Qt)),Jt&=!(Wt&&Ft.includes("@list")),!Jt)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Yt.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:rt});if(Ot.reverse&&!Ft.every(Qt=>["@index","@set"].includes(Qt)))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});Ot["@container"]=Ft}if("@index"in Et){if(!("@container"in Et)||!Ot["@container"].includes("@index"))throw new JsonLdError$6(`Invalid JSON-LD syntax; @index without @index in @container: "${Et["@index"]}" on term "${it}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(!_isString$3(Et["@index"])||Et["@index"].indexOf("@")===0)throw new JsonLdError$6(`Invalid JSON-LD syntax; @index must expand to an IRI: "${Et["@index"]}" on term "${it}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});Ot["@index"]=Et["@index"]}if("@context"in Et&&(Ot["@context"]=Et["@context"]),"@language"in Et&&!("@type"in Et)){let Ft=Et["@language"];if(Ft!==null&&!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:rt});Ft!==null&&(Ft=Ft.toLowerCase()),Ot["@language"]=Ft}if("@prefix"in Et){if(it.match(/:|\//))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(api$7.isKeyword(Ot["@id"]))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(typeof Et["@prefix"]=="boolean")Ot._prefix=Et["@prefix"]===!0;else throw new JsonLdError$6("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:rt})}if("@direction"in Et){const Ft=Et["@direction"];if(Ft!==null&&Ft!=="ltr"&&Ft!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:rt});Ot["@direction"]=Ft}if("@nest"in Et){const Ft=Et["@nest"];if(!_isString$3(Ft)||Ft!=="@nest"&&Ft.indexOf("@")===0)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:rt});Ot["@nest"]=Ft}// disallow aliasing @context and @preserve
const Bt=Ot["@id"];if(Bt==="@context"||Bt==="@preserve")throw new JsonLdError$6("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:rt});if(kt&&kt.protected&&!wt&&(nt.protected[it]=!0,Ot.protected=!0,!_deepCompare(kt,Ot)))throw new JsonLdError$6("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:rt,term:it})};api$7.expandIri=(nt,rt,it,st)=>_expandIri$3(nt,rt,it,void 0,void 0,st);function _expandIri$3(nt,rt,it,st,bt,wt){if(rt===null||!_isString$3(rt)||api$7.isKeyword(rt))return rt;if(rt.match(REGEX_KEYWORD$2))return null;if(st&&st.hasOwnProperty(rt)&&bt.get(rt)!==!0&&api$7.createTermDefinition({activeCtx:nt,localCtx:st,term:rt,defined:bt,options:wt}),it=it||{},it.vocab){const kt=nt.mappings.get(rt);if(kt===null)return null;if(_isObject$3(kt)&&"@id"in kt)return kt["@id"]}const Et=rt.indexOf(":");if(Et>0){const kt=rt.substr(0,Et),Lt=rt.substr(Et+1);if(kt==="_"||Lt.indexOf("//")===0)return rt;st&&st.hasOwnProperty(kt)&&api$7.createTermDefinition({activeCtx:nt,localCtx:st,term:kt,defined:bt,options:wt});const Ot=nt.mappings.get(kt);if(Ot&&Ot._prefix)return Ot["@id"]+Lt;if(_isAbsoluteIri$2(rt))return rt}if(it.vocab&&"@vocab"in nt)rt=nt["@vocab"]+rt;else if(it.base){let kt,Lt;"@base"in nt?nt["@base"]?(Lt=prependBase(wt.base,nt["@base"]),kt=prependBase(Lt,rt)):(Lt=nt["@base"],kt=rt):(Lt=wt.base,kt=prependBase(wt.base,rt)),rt=kt}return rt}api$7.getInitialContext=nt=>{const rt=JSON.stringify({processingMode:nt.processingMode}),it=INITIAL_CONTEXT_CACHE.get(rt);if(it)return it;const st={processingMode:nt.processingMode,mappings:new Map,inverse:null,getInverse:bt,clone:kt,revertToPreviousContext:Lt,protected:{}};return INITIAL_CONTEXT_CACHE.size===INITIAL_CONTEXT_CACHE_MAX_SIZE&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(rt,st),st;function bt(){const Ot=this;if(Ot.inverse)return Ot.inverse;const Rt=Ot.inverse={},Dt=Ot.fastCurieMap={},Bt={},Ft=(Ot["@language"]||"@none").toLowerCase(),Yt=Ot["@direction"],Jt=Ot.mappings,Wt=[...Jt.keys()].sort(_compareShortestLeast$1);for(const Qt of Wt){const rn=Jt.get(Qt);if(rn===null)continue;let sn=rn["@container"]||"@none";if(sn=[].concat(sn).sort().join(""),rn["@id"]===null)continue;const on=_asArray$2(rn["@id"]);for(const hn of on){let mn=Rt[hn];const Cn=api$7.isKeyword(hn);if(mn)!Cn&&!rn._termHasColon&&Bt[hn].push(Qt);else if(Rt[hn]=mn={},!Cn&&!rn._termHasColon){Bt[hn]=[Qt];const Tn={iri:hn,terms:Bt[hn]};hn[0]in Dt?Dt[hn[0]].push(Tn):Dt[hn[0]]=[Tn]}if(mn[sn]||(mn[sn]={"@language":{},"@type":{},"@any":{}}),mn=mn[sn],Et(Qt,mn["@any"],"@none"),rn.reverse)Et(Qt,mn["@type"],"@reverse");else if(rn["@type"]==="@none")Et(Qt,mn["@any"],"@none"),Et(Qt,mn["@language"],"@none"),Et(Qt,mn["@type"],"@none");else if("@type"in rn)Et(Qt,mn["@type"],rn["@type"]);else if("@language"in rn&&"@direction"in rn){const Tn=rn["@language"],kn=rn["@direction"];Tn&&kn?Et(Qt,mn["@language"],`${Tn}_${kn}`.toLowerCase()):Tn?Et(Qt,mn["@language"],Tn.toLowerCase()):kn?Et(Qt,mn["@language"],`_${kn}`):Et(Qt,mn["@language"],"@null")}else"@language"in rn?Et(Qt,mn["@language"],(rn["@language"]||"@null").toLowerCase()):"@direction"in rn?rn["@direction"]?Et(Qt,mn["@language"],`_${rn["@direction"]}`):Et(Qt,mn["@language"],"@none"):Yt?(Et(Qt,mn["@language"],`_${Yt}`),Et(Qt,mn["@language"],"@none"),Et(Qt,mn["@type"],"@none")):(Et(Qt,mn["@language"],Ft),Et(Qt,mn["@language"],"@none"),Et(Qt,mn["@type"],"@none"))}}for(const Qt in Dt)wt(Dt,Qt,1);return Rt}function wt(Ot,Rt,Dt){const Bt=Ot[Rt],Ft=Ot[Rt]={};let Yt,Jt;for(const Wt of Bt)Yt=Wt.iri,Dt>=Yt.length?Jt="":Jt=Yt[Dt],Jt in Ft?Ft[Jt].push(Wt):Ft[Jt]=[Wt];for(const Wt in Ft)Wt!==""&&wt(Ft,Wt,Dt+1)}function Et(Ot,Rt,Dt){Rt.hasOwnProperty(Dt)||(Rt[Dt]=Ot)}function kt(){const Ot={};return Ot.mappings=util$4.clone(this.mappings),Ot.clone=this.clone,Ot.inverse=null,Ot.getInverse=this.getInverse,Ot.protected=util$4.clone(this.protected),this.previousContext&&(Ot.previousContext=this.previousContext.clone()),Ot.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Ot["@base"]=this["@base"]),"@language"in this&&(Ot["@language"]=this["@language"]),"@vocab"in this&&(Ot["@vocab"]=this["@vocab"]),Ot}function Lt(){return this.previousContext?this.previousContext.clone():this}};api$7.getContextValue=(nt,rt,it)=>{if(rt===null)return it==="@context"?void 0:null;if(nt.mappings.has(rt)){const st=nt.mappings.get(rt);if(_isUndefined$2(it))return st;if(st.hasOwnProperty(it))return st[it]}if(it==="@language"&&it in nt||it==="@direction"&&it in nt)return nt[it];if(it!=="@context")return null};api$7.processingMode=(nt,rt)=>rt.toString()>="1.1"?!nt.processingMode||nt.processingMode>="json-ld-"+rt.toString():nt.processingMode==="json-ld-1.0";api$7.isKeyword=nt=>{if(!_isString$3(nt)||nt[0]!=="@")return!1;switch(nt){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function _deepCompare(nt,rt){if(!(nt&&typeof nt=="object")||!(rt&&typeof rt=="object"))return nt===rt;const it=Array.isArray(nt);if(it!==Array.isArray(rt))return!1;if(it){if(nt.length!==rt.length)return!1;for(let wt=0;wt<nt.length;++wt)if(!_deepCompare(nt[wt],rt[wt]))return!1;return!0}const st=Object.keys(nt),bt=Object.keys(rt);if(st.length!==bt.length)return!1;for(const wt in nt){let Et=nt[wt],kt=rt[wt];if(wt==="@container"&&Array.isArray(Et)&&Array.isArray(kt)&&(Et=Et.slice().sort(),kt=kt.slice().sort()),!_deepCompare(Et,kt))return!1}return!0}const JsonLdError$5=JsonLdError_1,{isArray:_isArray$2,isObject:_isObject$2,isEmptyObject:_isEmptyObject,isString:_isString$2,isUndefined:_isUndefined$1}=types$7,{isList:_isList$1,isValue:_isValue$1,isGraph:_isGraph$1,isSubject:_isSubject}=graphTypes$5,{expandIri:_expandIri$2,getContextValue:_getContextValue$1,isKeyword:_isKeyword$1,process:_processContext$2,processingMode:_processingMode$2}=context,{isAbsolute:_isAbsoluteIri$1}=url$1,{REGEX_BCP47:REGEX_BCP47$1,REGEX_KEYWORD:REGEX_KEYWORD$1,addValue:_addValue$2,asArray:_asArray$1,getValues:_getValues,validateTypeValue:_validateTypeValue}=util$5,{handleEvent:_handleEvent$2}=events,api$6={};var expand=api$6;api$6.expand=async({activeCtx:nt,activeProperty:rt=null,element:it,options:st={},insideList:bt=!1,insideIndex:wt=!1,typeScopedContext:Et=null})=>{if(it==null)return null;if(rt==="@default"&&(st=Object.assign({},st,{isFrame:!1})),!_isArray$2(it)&&!_isObject$2(it))return!bt&&(rt===null||_expandIri$2(nt,rt,{vocab:!0},st)==="@graph")?(st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:it}},options:st}),null):_expandValue({activeCtx:nt,activeProperty:rt,value:it,options:st});if(_isArray$2(it)){let Yt=[];const Jt=_getContextValue$1(nt,rt,"@container")||[];bt=bt||Jt.includes("@list");for(let Wt=0;Wt<it.length;++Wt){let Qt=await api$6.expand({activeCtx:nt,activeProperty:rt,element:it[Wt],options:st,insideIndex:wt,typeScopedContext:Et});bt&&_isArray$2(Qt)&&(Qt={"@list":Qt}),Qt!==null&&(_isArray$2(Qt)?Yt=Yt.concat(Qt):Yt.push(Qt))}return Yt}const kt=_expandIri$2(nt,rt,{vocab:!0},st),Lt=_getContextValue$1(nt,rt,"@context");Et=Et||(nt.previousContext?nt:null);let Ot=Object.keys(it).sort(),Rt=!wt;if(Rt&&Et&&Ot.length<=2&&!Ot.includes("@context"))for(const Yt of Ot){const Jt=_expandIri$2(Et,Yt,{vocab:!0},st);if(Jt==="@value"){Rt=!1,nt=Et;break}if(Jt==="@id"&&Ot.length===1){Rt=!1;break}}Rt&&(nt=nt.revertToPreviousContext()),_isUndefined$1(Lt)||(nt=await _processContext$2({activeCtx:nt,localCtx:Lt,propagate:!0,overrideProtected:!0,options:st})),"@context"in it&&(nt=await _processContext$2({activeCtx:nt,localCtx:it["@context"],options:st})),Et=nt;let Dt=null;for(const Yt of Ot)if(_expandIri$2(nt,Yt,{vocab:!0},st)==="@type"){Dt=Dt||Yt;const Wt=it[Yt],Qt=Array.isArray(Wt)?Wt.length>1?Wt.slice().sort():Wt:[Wt];for(const rn of Qt){const sn=_getContextValue$1(Et,rn,"@context");_isUndefined$1(sn)||(nt=await _processContext$2({activeCtx:nt,localCtx:sn,options:st,propagate:!1}))}}let Bt={};await _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:kt,element:it,expandedParent:Bt,options:st,insideList:bt,typeKey:Dt,typeScopedContext:Et}),Ot=Object.keys(Bt);let Ft=Ot.length;if("@value"in Bt){if("@type"in Bt&&("@language"in Bt||"@direction"in Bt))throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Bt});let Yt=Ft-1;if("@type"in Bt&&(Yt-=1),"@index"in Bt&&(Yt-=1),"@language"in Bt&&(Yt-=1),"@direction"in Bt&&(Yt-=1),Yt!==0)throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Bt});const Jt=Bt["@value"]===null?[]:_asArray$1(Bt["@value"]),Wt=_getValues(Bt,"@type");if(!(_processingMode$2(nt,1.1)&&Wt.includes("@json")&&Wt.length===1))if(Jt.length===0)st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Bt}},options:st}),Bt=null;else{if(!Jt.every(Qt=>_isString$2(Qt)||_isEmptyObject(Qt))&&"@language"in Bt)throw new JsonLdError$5("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Bt});if(!Wt.every(Qt=>_isAbsoluteIri$1(Qt)&&!(_isString$2(Qt)&&Qt.indexOf("_:")===0)||_isEmptyObject(Qt)))throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Bt})}}else if("@type"in Bt&&!_isArray$2(Bt["@type"]))Bt["@type"]=[Bt["@type"]];else if("@set"in Bt||"@list"in Bt){if(Ft>1&&!(Ft===2&&"@index"in Bt))throw new JsonLdError$5('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Bt});"@set"in Bt&&(Bt=Bt["@set"],Ot=Object.keys(Bt),Ft=Ot.length)}else Ft===1&&"@language"in Bt&&(st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Bt}},options:st}),Bt=null);if(_isObject$2(Bt)&&!st.keepFreeFloatingNodes&&!bt&&(rt===null||kt==="@graph")&&(Ft===0||"@value"in Bt||"@list"in Bt||Ft===1&&"@id"in Bt)){if(st.eventHandler){let Yt,Jt;Ft===0?(Yt="empty object",Jt="Dropping empty object."):"@value"in Bt?(Yt="object with only @value",Jt="Dropping object with only @value."):"@list"in Bt?(Yt="object with only @list",Jt="Dropping object with only @list."):Ft===1&&"@id"in Bt&&(Yt="object with only @id",Jt="Dropping object with only @id."),_handleEvent$2({event:{type:["JsonLdEvent"],code:Yt,level:"warning",message:Jt,details:{value:Bt}},options:st})}Bt=null}return Bt};async function _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:it,element:st,expandedParent:bt,options:wt={},insideList:Et,typeKey:kt,typeScopedContext:Lt}){const Ot=Object.keys(st).sort(),Rt=[];let Dt;const Bt=st[kt]&&_expandIri$2(nt,_isArray$2(st[kt])?st[kt][0]:st[kt],{vocab:!0},{...wt,typeExpansion:!0})==="@json";for(const Ft of Ot){let Yt=st[Ft],Jt;if(Ft==="@context")continue;const Wt=_expandIri$2(nt,Ft,{vocab:!0},wt);if(Wt===null||!(_isAbsoluteIri$1(Wt)||_isKeyword$1(Wt))){wt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Ft,expandedProperty:Wt}},options:wt});continue}if(_isKeyword$1(Wt)){if(it==="@reverse")throw new JsonLdError$5("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Yt});if(Wt in bt&&Wt!=="@included"&&Wt!=="@type")throw new JsonLdError$5("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:Wt})}if(Wt==="@id"){if(!_isString$2(Yt)){if(!wt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt});if(_isObject$2(Yt)){if(!_isEmptyObject(Yt))throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}else if(_isArray$2(Yt)){if(!Yt.every(on=>_isString$2(on)))throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}else throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}_addValue$2(bt,"@id",_asArray$1(Yt).map(on=>{if(_isString$2(on)){const hn=_expandIri$2(nt,on,{base:!0},wt);return wt.eventHandler&&(hn===null?_handleEvent$2(on===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:on}},options:wt}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:on}},options:wt}):_isAbsoluteIri$1(hn)||_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:on,expandedId:hn}},options:wt})),hn}return on}),{propertyIsArray:wt.isFrame});continue}if(Wt==="@type"){_isObject$2(Yt)&&(Yt=Object.fromEntries(Object.entries(Yt).map(([on,hn])=>[_expandIri$2(Lt,on,{vocab:!0}),_asArray$1(hn).map(mn=>_expandIri$2(Lt,mn,{base:!0,vocab:!0},{...wt,typeExpansion:!0}))]))),_validateTypeValue(Yt,wt.isFrame),_addValue$2(bt,"@type",_asArray$1(Yt).map(on=>{if(_isString$2(on)){const hn=_expandIri$2(Lt,on,{base:!0,vocab:!0},{...wt,typeExpansion:!0});return hn!=="@json"&&!_isAbsoluteIri$1(hn)&&wt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:on}},options:wt}),hn}return on}),{propertyIsArray:wt.isFrame});continue}if(Wt==="@included"&&_processingMode$2(nt,1.1)){const on=_asArray$1(await api$6.expand({activeCtx:nt,activeProperty:rt,element:Yt,options:wt}));if(!on.every(hn=>_isSubject(hn)))throw new JsonLdError$5("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Yt});_addValue$2(bt,"@included",on,{propertyIsArray:!0});continue}if(Wt==="@graph"&&!(_isObject$2(Yt)||_isArray$2(Yt)))throw new JsonLdError$5('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Yt});if(Wt==="@value"){Dt=Yt,Bt&&_processingMode$2(nt,1.1)?bt["@value"]=Yt:_addValue$2(bt,"@value",Yt,{propertyIsArray:wt.isFrame});continue}if(Wt==="@language"){if(Yt===null)continue;if(!_isString$2(Yt)&&!wt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Yt});Yt=_asArray$1(Yt).map(on=>_isString$2(on)?on.toLowerCase():on);for(const on of Yt)_isString$2(on)&&!on.match(REGEX_BCP47$1)&&wt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:on}},options:wt});_addValue$2(bt,"@language",Yt,{propertyIsArray:wt.isFrame});continue}if(Wt==="@direction"){if(!_isString$2(Yt)&&!wt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Yt});Yt=_asArray$1(Yt);for(const on of Yt)if(_isString$2(on)&&on!=="ltr"&&on!=="rtl")throw new JsonLdError$5('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Yt});_addValue$2(bt,"@direction",Yt,{propertyIsArray:wt.isFrame});continue}if(Wt==="@index"){if(!_isString$2(Yt))throw new JsonLdError$5('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Yt});_addValue$2(bt,"@index",Yt);continue}if(Wt==="@reverse"){if(!_isObject$2(Yt))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Yt});if(Jt=await api$6.expand({activeCtx:nt,activeProperty:"@reverse",element:Yt,options:wt}),"@reverse"in Jt)for(const hn in Jt["@reverse"])_addValue$2(bt,hn,Jt["@reverse"][hn],{propertyIsArray:!0});let on=bt["@reverse"]||null;for(const hn in Jt){if(hn==="@reverse")continue;on===null&&(on=bt["@reverse"]={}),_addValue$2(on,hn,[],{propertyIsArray:!0});const mn=Jt[hn];for(let Cn=0;Cn<mn.length;++Cn){const Tn=mn[Cn];if(_isValue$1(Tn)||_isList$1(Tn))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Jt});_addValue$2(on,hn,Tn,{propertyIsArray:!0})}}continue}if(Wt==="@nest"){Rt.push(Ft);continue}let Qt=nt;const rn=_getContextValue$1(nt,Ft,"@context");_isUndefined$1(rn)||(Qt=await _processContext$2({activeCtx:nt,localCtx:rn,propagate:!0,overrideProtected:!0,options:wt}));const sn=_getContextValue$1(Qt,Ft,"@container")||[];if(sn.includes("@language")&&_isObject$2(Yt)){const on=_getContextValue$1(Qt,Ft,"@direction");Jt=_expandLanguageMap(Qt,Yt,on,wt)}else if(sn.includes("@index")&&_isObject$2(Yt)){const on=sn.includes("@graph"),hn=_getContextValue$1(Qt,Ft,"@index")||"@index",mn=hn!=="@index"&&_expandIri$2(nt,hn,{vocab:!0},wt);Jt=await _expandIndexMap({activeCtx:Qt,options:wt,activeProperty:Ft,value:Yt,asGraph:on,indexKey:hn,propertyIndex:mn})}else if(sn.includes("@id")&&_isObject$2(Yt)){const on=sn.includes("@graph");Jt=await _expandIndexMap({activeCtx:Qt,options:wt,activeProperty:Ft,value:Yt,asGraph:on,indexKey:"@id"})}else if(sn.includes("@type")&&_isObject$2(Yt))Jt=await _expandIndexMap({activeCtx:Qt.revertToPreviousContext(),options:wt,activeProperty:Ft,value:Yt,asGraph:!1,indexKey:"@type"});else{const on=Wt==="@list";if(on||Wt==="@set"){let hn=rt;on&&it==="@graph"&&(hn=null),Jt=await api$6.expand({activeCtx:Qt,activeProperty:hn,element:Yt,options:wt,insideList:on})}else _getContextValue$1(nt,Ft,"@type")==="@json"?Jt={"@type":"@json","@value":Yt}:Jt=await api$6.expand({activeCtx:Qt,activeProperty:Ft,element:Yt,options:wt,insideList:!1})}if(!(Jt===null&&Wt!=="@value")){if(Wt!=="@list"&&!_isList$1(Jt)&&sn.includes("@list")&&(Jt={"@list":_asArray$1(Jt)}),sn.includes("@graph")&&!sn.some(on=>on==="@id"||on==="@index")&&(Jt=_asArray$1(Jt).map(on=>({"@graph":_asArray$1(on)}))),Qt.mappings.has(Ft)&&Qt.mappings.get(Ft).reverse){const on=bt["@reverse"]=bt["@reverse"]||{};Jt=_asArray$1(Jt);for(let hn=0;hn<Jt.length;++hn){const mn=Jt[hn];if(_isValue$1(mn)||_isList$1(mn))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Jt});_addValue$2(on,Wt,mn,{propertyIsArray:!0})}continue}_addValue$2(bt,Wt,Jt,{propertyIsArray:!0})}}if("@value"in bt&&!(bt["@type"]==="@json"&&_processingMode$2(nt,1.1))){if((_isObject$2(Dt)||_isArray$2(Dt))&&!wt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Dt})}for(const Ft of Rt){const Yt=_isArray$2(st[Ft])?st[Ft]:[st[Ft]];for(const Jt of Yt){if(!_isObject$2(Jt)||Object.keys(Jt).some(Wt=>_expandIri$2(nt,Wt,{vocab:!0},wt)==="@value"))throw new JsonLdError$5("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Jt});await _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:it,element:Jt,expandedParent:bt,options:wt,insideList:Et,typeScopedContext:Lt,typeKey:kt})}}}function _expandValue({activeCtx:nt,activeProperty:rt,value:it,options:st}){if(it==null)return null;const bt=_expandIri$2(nt,rt,{vocab:!0},st);if(bt==="@id")return _expandIri$2(nt,it,{base:!0},st);if(bt==="@type")return _expandIri$2(nt,it,{vocab:!0,base:!0},{...st,typeExpansion:!0});const wt=_getContextValue$1(nt,rt,"@type");if((wt==="@id"||bt==="@graph")&&_isString$2(it)){const kt=_expandIri$2(nt,it,{base:!0},st);return kt===null&&it.match(REGEX_KEYWORD$1)&&st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:rt}},options:st}),{"@id":kt}}if(wt==="@vocab"&&_isString$2(it))return{"@id":_expandIri$2(nt,it,{vocab:!0,base:!0},st)};if(_isKeyword$1(bt))return it;const Et={};if(wt&&!["@id","@vocab","@none"].includes(wt))Et["@type"]=wt;else if(_isString$2(it)){const kt=_getContextValue$1(nt,rt,"@language");kt!==null&&(Et["@language"]=kt);const Lt=_getContextValue$1(nt,rt,"@direction");Lt!==null&&(Et["@direction"]=Lt)}return["boolean","number","string"].includes(typeof it)||(it=it.toString()),Et["@value"]=it,Et}function _expandLanguageMap(nt,rt,it,st){const bt=[],wt=Object.keys(rt).sort();for(const Et of wt){const kt=_expandIri$2(nt,Et,{vocab:!0},st);let Lt=rt[Et];_isArray$2(Lt)||(Lt=[Lt]);for(const Ot of Lt){if(Ot===null)continue;if(!_isString$2(Ot))throw new JsonLdError$5("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:rt});const Rt={"@value":Ot};kt!=="@none"&&(Et.match(REGEX_BCP47$1)||st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Et}},options:st}),Rt["@language"]=Et.toLowerCase()),it&&(Rt["@direction"]=it),bt.push(Rt)}}return bt}async function _expandIndexMap({activeCtx:nt,options:rt,activeProperty:it,value:st,asGraph:bt,indexKey:wt,propertyIndex:Et}){const kt=[],Lt=Object.keys(st).sort(),Ot=wt==="@type";for(let Rt of Lt){if(Ot){const Ft=_getContextValue$1(nt,Rt,"@context");_isUndefined$1(Ft)||(nt=await _processContext$2({activeCtx:nt,localCtx:Ft,propagate:!1,options:rt}))}let Dt=st[Rt];_isArray$2(Dt)||(Dt=[Dt]),Dt=await api$6.expand({activeCtx:nt,activeProperty:it,element:Dt,options:rt,insideList:!1,insideIndex:!0});let Bt;Et?Rt==="@none"?Bt="@none":Bt=_expandValue({activeCtx:nt,activeProperty:wt,value:Rt,options:rt}):Bt=_expandIri$2(nt,Rt,{vocab:!0},rt),wt==="@id"?Rt=_expandIri$2(nt,Rt,{base:!0},rt):Ot&&(Rt=Bt);for(let Ft of Dt){if(bt&&!_isGraph$1(Ft)&&(Ft={"@graph":[Ft]}),wt==="@type")Bt==="@none"||(Ft["@type"]?Ft["@type"]=[Rt].concat(Ft["@type"]):Ft["@type"]=[Rt]);else{if(_isValue$1(Ft)&&!["@language","@type","@index"].includes(wt))throw new JsonLdError$5(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${wt}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Ft});Et?Bt!=="@none"&&_addValue$2(Ft,Et,Bt,{propertyIsArray:!0,prependValue:!0}):Bt!=="@none"&&!(wt in Ft)&&(Ft[wt]=Rt)}kt.push(Ft)}}return kt}const{isKeyword:isKeyword$2}=context,graphTypes$3=graphTypes$5,types$3=types$7,util$3=util$5,JsonLdError$4=JsonLdError_1,api$5={};var nodeMap=api$5;api$5.createMergedNodeMap=(nt,rt)=>{rt=rt||{};const it=rt.issuer||new util$3.IdentifierIssuer("_:b"),st={"@default":{}};return api$5.createNodeMap(nt,st,"@default",it),api$5.mergeNodeMaps(st)};api$5.createNodeMap=(nt,rt,it,st,bt,wt)=>{if(types$3.isArray(nt)){for(const Ot of nt)api$5.createNodeMap(Ot,rt,it,st,void 0,wt);return}if(!types$3.isObject(nt)){wt&&wt.push(nt);return}if(graphTypes$3.isValue(nt)){if("@type"in nt){let Ot=nt["@type"];Ot.indexOf("_:")===0&&(nt["@type"]=Ot=st.getId(Ot))}wt&&wt.push(nt);return}else if(wt&&graphTypes$3.isList(nt)){const Ot=[];api$5.createNodeMap(nt["@list"],rt,it,st,bt,Ot),wt.push({"@list":Ot});return}if("@type"in nt){const Ot=nt["@type"];for(const Rt of Ot)Rt.indexOf("_:")===0&&st.getId(Rt)}types$3.isUndefined(bt)&&(bt=graphTypes$3.isBlankNode(nt)?st.getId(nt["@id"]):nt["@id"]),wt&&wt.push({"@id":bt});const Et=rt[it],kt=Et[bt]=Et[bt]||{};kt["@id"]=bt;const Lt=Object.keys(nt).sort();for(let Ot of Lt){if(Ot==="@id")continue;if(Ot==="@reverse"){const Dt={"@id":bt},Bt=nt["@reverse"];for(const Ft in Bt){const Yt=Bt[Ft];for(const Jt of Yt){let Wt=Jt["@id"];graphTypes$3.isBlankNode(Jt)&&(Wt=st.getId(Wt)),api$5.createNodeMap(Jt,rt,it,st,Wt),util$3.addValue(Et[Wt],Ft,Dt,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(Ot==="@graph"){bt in rt||(rt[bt]={}),api$5.createNodeMap(nt[Ot],rt,bt,st);continue}if(Ot==="@included"){api$5.createNodeMap(nt[Ot],rt,it,st);continue}if(Ot!=="@type"&&isKeyword$2(Ot)){if(Ot==="@index"&&Ot in kt&&(nt[Ot]!==kt[Ot]||nt[Ot]["@id"]!==kt[Ot]["@id"]))throw new JsonLdError$4("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:kt});kt[Ot]=nt[Ot];continue}const Rt=nt[Ot];if(Ot.indexOf("_:")===0&&(Ot=st.getId(Ot)),Rt.length===0){util$3.addValue(kt,Ot,[],{propertyIsArray:!0});continue}for(let Dt of Rt)if(Ot==="@type"&&(Dt=Dt.indexOf("_:")===0?st.getId(Dt):Dt),graphTypes$3.isSubject(Dt)||graphTypes$3.isSubjectReference(Dt)){if("@id"in Dt&&!Dt["@id"])continue;const Bt=graphTypes$3.isBlankNode(Dt)?st.getId(Dt["@id"]):Dt["@id"];util$3.addValue(kt,Ot,{"@id":Bt},{propertyIsArray:!0,allowDuplicate:!1}),api$5.createNodeMap(Dt,rt,it,st,Bt)}else if(graphTypes$3.isValue(Dt))util$3.addValue(kt,Ot,Dt,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes$3.isList(Dt)){const Bt=[];api$5.createNodeMap(Dt["@list"],rt,it,st,bt,Bt),Dt={"@list":Bt},util$3.addValue(kt,Ot,Dt,{propertyIsArray:!0,allowDuplicate:!1})}else api$5.createNodeMap(Dt,rt,it,st,bt),util$3.addValue(kt,Ot,Dt,{propertyIsArray:!0,allowDuplicate:!1})}};api$5.mergeNodeMapGraphs=nt=>{const rt={};for(const it of Object.keys(nt).sort())for(const st of Object.keys(nt[it]).sort()){const bt=nt[it][st];st in rt||(rt[st]={"@id":st});const wt=rt[st];for(const Et of Object.keys(bt).sort())if(isKeyword$2(Et)&&Et!=="@type")wt[Et]=util$3.clone(bt[Et]);else for(const kt of bt[Et])util$3.addValue(wt,Et,util$3.clone(kt),{propertyIsArray:!0,allowDuplicate:!1})}return rt};api$5.mergeNodeMaps=nt=>{const rt=nt["@default"],it=Object.keys(nt).sort();for(const st of it){if(st==="@default")continue;const bt=nt[st];let wt=rt[st];wt?"@graph"in wt||(wt["@graph"]=[]):rt[st]=wt={"@id":st,"@graph":[]};const Et=wt["@graph"];for(const kt of Object.keys(bt).sort()){const Lt=bt[kt];graphTypes$3.isSubjectReference(Lt)||Et.push(Lt)}}return rt};const{isSubjectReference:_isSubjectReference$2}=graphTypes$5,{createMergedNodeMap:_createMergedNodeMap$1}=nodeMap,api$4={};var flatten=api$4;api$4.flatten=nt=>{const rt=_createMergedNodeMap$1(nt),it=[],st=Object.keys(rt).sort();for(let bt=0;bt<st.length;++bt){const wt=rt[st[bt]];_isSubjectReference$2(wt)||it.push(wt)}return it};const JsonLdError$3=JsonLdError_1,graphTypes$2=graphTypes$5,types$2=types$7,{REGEX_BCP47,addValue:_addValue$1}=util$5,{handleEvent:_handleEvent$1}=events,{RDF_LIST,RDF_FIRST:RDF_FIRST$1,RDF_REST:RDF_REST$1,RDF_NIL:RDF_NIL$1,RDF_TYPE:RDF_TYPE$1,RDF_JSON_LITERAL:RDF_JSON_LITERAL$1,XSD_BOOLEAN:XSD_BOOLEAN$1,XSD_DOUBLE:XSD_DOUBLE$1,XSD_INTEGER:XSD_INTEGER$1,XSD_STRING:XSD_STRING$1}=constants,api$3={};var fromRdf=api$3;api$3.fromRDF=async(nt,rt)=>{const it={},st={"@default":it},bt={},{useRdfType:wt=!1,useNativeTypes:Et=!1,rdfDirection:kt=null}=rt;for(const Rt of nt){const Dt=Rt.graph.termType==="DefaultGraph"?"@default":Rt.graph.value;Dt in st||(st[Dt]={}),Dt!=="@default"&&!(Dt in it)&&(it[Dt]={"@id":Dt});const Bt=st[Dt],Ft=Rt.subject.value,Yt=Rt.predicate.value,Jt=Rt.object;Ft in Bt||(Bt[Ft]={"@id":Ft});const Wt=Bt[Ft],Qt=Jt.termType.endsWith("Node");if(Qt&&!(Jt.value in Bt)&&(Bt[Jt.value]={"@id":Jt.value}),Yt===RDF_TYPE$1&&!wt&&Qt){_addValue$1(Wt,"@type",Jt.value,{propertyIsArray:!0});continue}const rn=_RDFToObject(Jt,Et,kt,rt);if(_addValue$1(Wt,Yt,rn,{propertyIsArray:!0}),Qt)if(Jt.value===RDF_NIL$1){const sn=Bt[Jt.value];"usages"in sn||(sn.usages=[]),sn.usages.push({node:Wt,property:Yt,value:rn})}else Jt.value in bt?bt[Jt.value]=!1:bt[Jt.value]={node:Wt,property:Yt,value:rn}}for(const Rt in st){const Dt=st[Rt];if(!(RDF_NIL$1 in Dt))continue;const Bt=Dt[RDF_NIL$1];if(!!Bt.usages){for(let Ft of Bt.usages){let Yt=Ft.node,Jt=Ft.property,Wt=Ft.value;const Qt=[],rn=[];let sn=Object.keys(Yt).length;for(;Jt===RDF_REST$1&&types$2.isObject(bt[Yt["@id"]])&&types$2.isArray(Yt[RDF_FIRST$1])&&Yt[RDF_FIRST$1].length===1&&types$2.isArray(Yt[RDF_REST$1])&&Yt[RDF_REST$1].length===1&&(sn===3||sn===4&&types$2.isArray(Yt["@type"])&&Yt["@type"].length===1&&Yt["@type"][0]===RDF_LIST)&&(Qt.push(Yt[RDF_FIRST$1][0]),rn.push(Yt["@id"]),Ft=bt[Yt["@id"]],Yt=Ft.node,Jt=Ft.property,Wt=Ft.value,sn=Object.keys(Yt).length,!!graphTypes$2.isBlankNode(Yt)););delete Wt["@id"],Wt["@list"]=Qt.reverse();for(const on of rn)delete Dt[on]}delete Bt.usages}}const Lt=[],Ot=Object.keys(it).sort();for(const Rt of Ot){const Dt=it[Rt];if(Rt in st){const Bt=Dt["@graph"]=[],Ft=st[Rt],Yt=Object.keys(Ft).sort();for(const Jt of Yt){const Wt=Ft[Jt];graphTypes$2.isSubjectReference(Wt)||Bt.push(Wt)}}graphTypes$2.isSubjectReference(Dt)||Lt.push(Dt)}return Lt};function _RDFToObject(nt,rt,it,st){if(nt.termType.endsWith("Node"))return{"@id":nt.value};const bt={"@value":nt.value};if(nt.language)nt.language.match(REGEX_BCP47)||st.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt.language}},options:st}),bt["@language"]=nt.language;else{let wt=nt.datatype.value;if(wt||(wt=XSD_STRING$1),wt===RDF_JSON_LITERAL$1){wt="@json";try{bt["@value"]=JSON.parse(bt["@value"])}catch(Et){throw new JsonLdError$3("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:bt["@value"],cause:Et})}}if(rt){if(wt===XSD_BOOLEAN$1)bt["@value"]==="true"?bt["@value"]=!0:bt["@value"]==="false"&&(bt["@value"]=!1);else if(types$2.isNumeric(bt["@value"]))if(wt===XSD_INTEGER$1){const Et=parseInt(bt["@value"],10);Et.toFixed(0)===bt["@value"]&&(bt["@value"]=Et)}else wt===XSD_DOUBLE$1&&(bt["@value"]=parseFloat(bt["@value"]));[XSD_BOOLEAN$1,XSD_INTEGER$1,XSD_DOUBLE$1,XSD_STRING$1].includes(wt)||(bt["@type"]=wt)}else if(it==="i18n-datatype"&&wt.startsWith("https://www.w3.org/ns/i18n#")){const[,Et,kt]=wt.split(/[#_]/);Et.length>0&&(bt["@language"]=Et,Et.match(REGEX_BCP47)||st.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Et}},options:st})),bt["@direction"]=kt}else wt!==XSD_STRING$1&&(bt["@type"]=wt)}return bt}var canonicalize=function nt(rt){return rt===null||typeof rt!="object"||rt.toJSON!=null?JSON.stringify(rt):Array.isArray(rt)?"["+rt.reduce((it,st,bt)=>{const wt=bt===0?"":",",Et=st===void 0||typeof st=="symbol"?null:st;return it+wt+nt(Et)},"")+"]":"{"+Object.keys(rt).sort().reduce((it,st,bt)=>{if(rt[st]===void 0||typeof rt[st]=="symbol")return it;const wt=it.length===0?"":",";return it+wt+nt(st)+":"+nt(rt[st])},"")+"}"};const{createNodeMap}=nodeMap,{isKeyword:isKeyword$1}=context,graphTypes$1=graphTypes$5,jsonCanonicalize=canonicalize,types$1=types$7,util$2=util$5,{handleEvent:_handleEvent}=events,{RDF_FIRST,RDF_REST,RDF_NIL,RDF_TYPE,RDF_JSON_LITERAL,RDF_LANGSTRING,XSD_BOOLEAN,XSD_DOUBLE,XSD_INTEGER,XSD_STRING}=constants,{isAbsolute:_isAbsoluteIri}=url$1,api$2={};var toRdf=api$2;api$2.toRDF=(nt,rt)=>{const it=new util$2.IdentifierIssuer("_:b"),st={"@default":{}};createNodeMap(nt,st,"@default",it);const bt=[],wt=Object.keys(st).sort();for(const Et of wt){let kt;if(Et==="@default")kt={termType:"DefaultGraph",value:""};else if(_isAbsoluteIri(Et))Et.startsWith("_:")?kt={termType:"BlankNode"}:kt={termType:"NamedNode"},kt.value=Et;else{rt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Et}},options:rt});continue}_graphToRDF(bt,st[Et],kt,it,rt)}return bt};function _graphToRDF(nt,rt,it,st,bt){const wt=Object.keys(rt).sort();for(const Et of wt){const kt=rt[Et],Lt=Object.keys(kt).sort();for(let Ot of Lt){const Rt=kt[Ot];if(Ot==="@type")Ot=RDF_TYPE;else if(isKeyword$1(Ot))continue;for(const Dt of Rt){const Bt={termType:Et.startsWith("_:")?"BlankNode":"NamedNode",value:Et};if(!_isAbsoluteIri(Et)){bt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Et}},options:bt});continue}const Ft={termType:Ot.startsWith("_:")?"BlankNode":"NamedNode",value:Ot};if(!_isAbsoluteIri(Ot)){bt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ot}},options:bt});continue}if(Ft.termType==="BlankNode"&&!bt.produceGeneralizedRdf){bt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:st.getOldIds().find(Jt=>st.getId(Jt)===Ot)}},options:bt});continue}const Yt=_objectToRDF(Dt,st,nt,it,bt.rdfDirection,bt);Yt&&nt.push({subject:Bt,predicate:Ft,object:Yt,graph:it})}}}}function _listToRDF(nt,rt,it,st,bt,wt){const Et={termType:"NamedNode",value:RDF_FIRST},kt={termType:"NamedNode",value:RDF_REST},Lt={termType:"NamedNode",value:RDF_NIL},Ot=nt.pop(),Rt=Ot?{termType:"BlankNode",value:rt.getId()}:Lt;let Dt=Rt;for(const Bt of nt){const Ft=_objectToRDF(Bt,rt,it,st,bt,wt),Yt={termType:"BlankNode",value:rt.getId()};it.push({subject:Dt,predicate:Et,object:Ft,graph:st}),it.push({subject:Dt,predicate:kt,object:Yt,graph:st}),Dt=Yt}if(Ot){const Bt=_objectToRDF(Ot,rt,it,st,bt,wt);it.push({subject:Dt,predicate:Et,object:Bt,graph:st}),it.push({subject:Dt,predicate:kt,object:Lt,graph:st})}return Rt}function _objectToRDF(nt,rt,it,st,bt,wt){const Et={};if(graphTypes$1.isValue(nt)){Et.termType="Literal",Et.value=void 0,Et.datatype={termType:"NamedNode"};let kt=nt["@value"];const Lt=nt["@type"]||null;if(Lt==="@json")Et.value=jsonCanonicalize(kt),Et.datatype.value=RDF_JSON_LITERAL;else if(types$1.isBoolean(kt))Et.value=kt.toString(),Et.datatype.value=Lt||XSD_BOOLEAN;else if(types$1.isDouble(kt)||Lt===XSD_DOUBLE)types$1.isDouble(kt)||(kt=parseFloat(kt)),Et.value=kt.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Et.datatype.value=Lt||XSD_DOUBLE;else if(types$1.isNumber(kt))Et.value=kt.toFixed(0),Et.datatype.value=Lt||XSD_INTEGER;else if(bt==="i18n-datatype"&&"@direction"in nt){const Ot="https://www.w3.org/ns/i18n#"+(nt["@language"]||"")+`_${nt["@direction"]}`;Et.datatype.value=Ot,Et.value=kt}else"@language"in nt?(Et.value=kt,Et.datatype.value=Lt||RDF_LANGSTRING,Et.language=nt["@language"]):(Et.value=kt,Et.datatype.value=Lt||XSD_STRING)}else if(graphTypes$1.isList(nt)){const kt=_listToRDF(nt["@list"],rt,it,st,bt,wt);Et.termType=kt.termType,Et.value=kt.value}else{const kt=types$1.isObject(nt)?nt["@id"]:nt;Et.termType=kt.startsWith("_:")?"BlankNode":"NamedNode",Et.value=kt}return Et.termType==="NamedNode"&&!_isAbsoluteIri(Et.value)?(wt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Et.value}},options:wt}),null):Et}const{isKeyword}=context,graphTypes=graphTypes$5,types=types$7,util$1=util$5,url=url$1,JsonLdError$2=JsonLdError_1,{createNodeMap:_createNodeMap$1,mergeNodeMapGraphs:_mergeNodeMapGraphs}=nodeMap,api$1={};var frame=api$1;api$1.frameMergedOrDefault=(nt,rt,it)=>{const st={options:it,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},bt=new util$1.IdentifierIssuer("_:b");_createNodeMap$1(nt,st.graphMap,"@default",bt),it.merged&&(st.graphMap["@merged"]=_mergeNodeMapGraphs(st.graphMap),st.graph="@merged"),st.subjects=st.graphMap[st.graph];const wt=[];api$1.frame(st,Object.keys(st.subjects).sort(),rt,wt),it.pruneBlankNodeIdentifiers&&(it.bnodesToClear=Object.keys(st.bnodeMap).filter(Et=>st.bnodeMap[Et].length===1));// remove @preserve from results
return it.link={},_cleanupPreserve(wt,it)};api$1.frame=(nt,rt,it,st,bt=null)=>{_validateFrame(it),it=it[0];const wt=nt.options,Et={embed:_getFrameFlag(it,wt,"embed"),explicit:_getFrameFlag(it,wt,"explicit"),requireAll:_getFrameFlag(it,wt,"requireAll")};nt.link.hasOwnProperty(nt.graph)||(nt.link[nt.graph]={});const kt=nt.link[nt.graph],Lt=_filterSubjects(nt,rt,it,Et),Ot=Object.keys(Lt).sort();for(const Rt of Ot){const Dt=Lt[Rt];if(bt===null?nt.uniqueEmbeds={[nt.graph]:{}}:nt.uniqueEmbeds[nt.graph]=nt.uniqueEmbeds[nt.graph]||{},Et.embed==="@link"&&Rt in kt){_addFrameOutput(st,bt,kt[Rt]);continue}const Bt={"@id":Rt};if(Rt.indexOf("_:")===0&&util$1.addValue(nt.bnodeMap,Rt,Bt,{propertyIsArray:!0}),kt[Rt]=Bt,(Et.embed==="@first"||Et.embed==="@last")&&nt.is11)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:it});if(!(!nt.embedded&&nt.uniqueEmbeds[nt.graph].hasOwnProperty(Rt))){if(nt.embedded&&(Et.embed==="@never"||_createsCircularReference(Dt,nt.graph,nt.subjectStack))){_addFrameOutput(st,bt,Bt);continue}if(nt.embedded&&(Et.embed=="@first"||Et.embed=="@once")&&nt.uniqueEmbeds[nt.graph].hasOwnProperty(Rt)){_addFrameOutput(st,bt,Bt);continue}if(Et.embed==="@last"&&Rt in nt.uniqueEmbeds[nt.graph]&&_removeEmbed(nt,Rt),nt.uniqueEmbeds[nt.graph][Rt]={parent:st,property:bt},nt.subjectStack.push({subject:Dt,graph:nt.graph}),Rt in nt.graphMap){let Ft=!1,Yt=null;"@graph"in it?(Yt=it["@graph"][0],Ft=!(Rt==="@merged"||Rt==="@default"),types.isObject(Yt)||(Yt={})):(Ft=nt.graph!=="@merged",Yt={}),Ft&&api$1.frame({...nt,graph:Rt,embedded:!1},Object.keys(nt.graphMap[Rt]).sort(),[Yt],Bt,"@graph")}"@included"in it&&api$1.frame({...nt,embedded:!1},rt,it["@included"],Bt,"@included");for(const Ft of Object.keys(Dt).sort()){if(isKeyword(Ft)){if(Bt[Ft]=util$1.clone(Dt[Ft]),Ft==="@type")for(const Yt of Dt["@type"])Yt.indexOf("_:")===0&&util$1.addValue(nt.bnodeMap,Yt,Bt,{propertyIsArray:!0});continue}if(!(Et.explicit&&!(Ft in it)))for(const Yt of Dt[Ft]){const Jt=Ft in it?it[Ft]:_createImplicitFrame(Et);if(graphTypes.isList(Yt)){const Wt=it[Ft]&&it[Ft][0]&&it[Ft][0]["@list"]?it[Ft][0]["@list"]:_createImplicitFrame(Et),Qt={"@list":[]};_addFrameOutput(Bt,Ft,Qt);const rn=Yt["@list"];for(const sn of rn)graphTypes.isSubjectReference(sn)?api$1.frame({...nt,embedded:!0},[sn["@id"]],Wt,Qt,"@list"):_addFrameOutput(Qt,"@list",util$1.clone(sn))}else graphTypes.isSubjectReference(Yt)?api$1.frame({...nt,embedded:!0},[Yt["@id"]],Jt,Bt,Ft):_valueMatch(Jt[0],Yt)&&_addFrameOutput(Bt,Ft,util$1.clone(Yt))}}for(const Ft of Object.keys(it).sort()){if(Ft==="@type"){if(!types.isObject(it[Ft][0])||!("@default"in it[Ft][0]))continue}else if(isKeyword(Ft))continue;const Yt=it[Ft][0]||{};if(!_getFrameFlag(Yt,wt,"omitDefault")&&!(Ft in Bt)){let Wt="@null";"@default"in Yt&&(Wt=util$1.clone(Yt["@default"])),types.isArray(Wt)||(Wt=[Wt]),Bt[Ft]=[{"@preserve":Wt}]}}for(const Ft of Object.keys(it["@reverse"]||{}).sort()){const Yt=it["@reverse"][Ft];for(const Jt of Object.keys(nt.subjects))util$1.getValues(nt.subjects[Jt],Ft).some(Qt=>Qt["@id"]===Rt)&&(Bt["@reverse"]=Bt["@reverse"]||{},util$1.addValue(Bt["@reverse"],Ft,[],{propertyIsArray:!0}),api$1.frame({...nt,embedded:!0},[Jt],Yt,Bt["@reverse"][Ft],bt))}_addFrameOutput(st,bt,Bt),nt.subjectStack.pop()}}};api$1.cleanupNull=(nt,rt)=>{if(types.isArray(nt))return nt.map(st=>api$1.cleanupNull(st,rt)).filter(st=>st);if(nt==="@null")return null;if(types.isObject(nt)){if("@id"in nt){const it=nt["@id"];if(rt.link.hasOwnProperty(it)){const st=rt.link[it].indexOf(nt);if(st!==-1)return rt.link[it][st];rt.link[it].push(nt)}else rt.link[it]=[nt]}for(const it in nt)nt[it]=api$1.cleanupNull(nt[it],rt)}return nt};function _createImplicitFrame(nt){const rt={};for(const it in nt)nt[it]!==void 0&&(rt["@"+it]=[nt[it]]);return[rt]}function _createsCircularReference(nt,rt,it){for(let st=it.length-1;st>=0;--st){const bt=it[st];if(bt.graph===rt&&bt.subject["@id"]===nt["@id"])return!0}return!1}function _getFrameFlag(nt,rt,it){const st="@"+it;let bt=st in nt?nt[st][0]:rt[it];if(it==="embed"){if(bt===!0)bt="@once";else if(bt===!1)bt="@never";else if(bt!=="@always"&&bt!=="@never"&&bt!=="@link"&&bt!=="@first"&&bt!=="@last"&&bt!=="@once")throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:nt})}return bt}function _validateFrame(nt){if(!types.isArray(nt)||nt.length!==1||!types.isObject(nt[0]))throw new JsonLdError$2("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:nt});if("@id"in nt[0]){for(const rt of util$1.asArray(nt[0]["@id"]))if(!(types.isObject(rt)||url.isAbsolute(rt))||types.isString(rt)&&rt.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:nt})}if("@type"in nt[0]){for(const rt of util$1.asArray(nt[0]["@type"]))if(!(types.isObject(rt)||url.isAbsolute(rt))||types.isString(rt)&&rt.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:nt})}}function _filterSubjects(nt,rt,it,st){const bt={};for(const wt of rt){const Et=nt.graphMap[nt.graph][wt];_filterSubject(nt,Et,it,st)&&(bt[wt]=Et)}return bt}function _filterSubject(nt,rt,it,st){let bt=!0,wt=!1;for(const Et in it){let kt=!1;const Lt=util$1.getValues(rt,Et),Ot=util$1.getValues(it,Et).length===0;if(Et==="@id"){if(types.isEmptyObject(it["@id"][0]||{})?kt=!0:it["@id"].length>=0&&(kt=it["@id"].includes(Lt[0])),!st.requireAll)return kt}else if(Et==="@type"){if(bt=!1,Ot){if(Lt.length>0)return!1;kt=!0}else if(it["@type"].length===1&&types.isEmptyObject(it["@type"][0]))kt=Lt.length>0;else for(const Rt of it["@type"])types.isObject(Rt)&&"@default"in Rt?kt=!0:kt=kt||Lt.some(Dt=>Dt===Rt);if(!st.requireAll)return kt}else{if(isKeyword(Et))continue;{const Rt=util$1.getValues(it,Et)[0];let Dt=!1;if(Rt&&(_validateFrame([Rt]),Dt="@default"in Rt),bt=!1,Lt.length===0&&Dt)continue;if(Lt.length>0&&Ot)return!1;if(Rt===void 0){if(Lt.length>0)return!1;kt=!0}else if(graphTypes.isList(Rt)){const Bt=Rt["@list"][0];if(graphTypes.isList(Lt[0])){const Ft=Lt[0]["@list"];graphTypes.isValue(Bt)?kt=Ft.some(Yt=>_valueMatch(Bt,Yt)):(graphTypes.isSubject(Bt)||graphTypes.isSubjectReference(Bt))&&(kt=Ft.some(Yt=>_nodeMatch(nt,Bt,Yt,st)))}}else graphTypes.isValue(Rt)?kt=Lt.some(Bt=>_valueMatch(Rt,Bt)):graphTypes.isSubjectReference(Rt)?kt=Lt.some(Bt=>_nodeMatch(nt,Rt,Bt,st)):types.isObject(Rt)?kt=Lt.length>0:kt=!1}}if(!kt&&st.requireAll)return!1;wt=wt||kt}return bt||wt}function _removeEmbed(nt,rt){const it=nt.uniqueEmbeds[nt.graph],st=it[rt],bt=st.parent,wt=st.property,Et={"@id":rt};if(types.isArray(bt)){for(let Lt=0;Lt<bt.length;++Lt)if(util$1.compareValues(bt[Lt],Et)){bt[Lt]=Et;break}}else{const Lt=types.isArray(bt[wt]);util$1.removeValue(bt,wt,Et,{propertyIsArray:Lt}),util$1.addValue(bt,wt,Et,{propertyIsArray:Lt})}const kt=Lt=>{const Ot=Object.keys(it);for(const Rt of Ot)Rt in it&&types.isObject(it[Rt].parent)&&it[Rt].parent["@id"]===Lt&&(delete it[Rt],kt(Rt))};kt(rt)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function _cleanupPreserve(nt,rt){if(types.isArray(nt))return nt.map(it=>_cleanupPreserve(it,rt));if(types.isObject(nt)){// remove @preserve
if("@preserve"in nt)return nt["@preserve"][0];if(graphTypes.isValue(nt))return nt;if(graphTypes.isList(nt))return nt["@list"]=_cleanupPreserve(nt["@list"],rt),nt;if("@id"in nt){const it=nt["@id"];if(rt.link.hasOwnProperty(it)){const st=rt.link[it].indexOf(nt);if(st!==-1)return rt.link[it][st];rt.link[it].push(nt)}else rt.link[it]=[nt]}for(const it in nt){if(it==="@id"&&rt.bnodesToClear.includes(nt[it])){delete nt["@id"];continue}nt[it]=_cleanupPreserve(nt[it],rt)}}return nt}function _addFrameOutput(nt,rt,it){types.isObject(nt)?util$1.addValue(nt,rt,it,{propertyIsArray:!0}):nt.push(it)}function _nodeMatch(nt,rt,it,st){if(!("@id"in it))return!1;const bt=nt.subjects[it["@id"]];return bt&&_filterSubject(nt,bt,rt,st)}function _valueMatch(nt,rt){const it=rt["@value"],st=rt["@type"],bt=rt["@language"],wt=nt["@value"]?types.isArray(nt["@value"])?nt["@value"]:[nt["@value"]]:[],Et=nt["@type"]?types.isArray(nt["@type"])?nt["@type"]:[nt["@type"]]:[],kt=nt["@language"]?types.isArray(nt["@language"])?nt["@language"]:[nt["@language"]]:[];return wt.length===0&&Et.length===0&&kt.length===0?!0:!(!(wt.includes(it)||types.isEmptyObject(wt[0]))||!(!st&&Et.length===0||Et.includes(st)||st&&types.isEmptyObject(Et[0]))||!(!bt&&kt.length===0||kt.includes(bt)||bt&&types.isEmptyObject(kt[0])))}const JsonLdError$1=JsonLdError_1,{isArray:_isArray$1,isObject:_isObject$1,isString:_isString$1,isUndefined:_isUndefined}=types$7,{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference$1}=graphTypes$5,{expandIri:_expandIri$1,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext$1,processingMode:_processingMode$1}=context,{removeBase:_removeBase,prependBase:_prependBase}=url$1,{REGEX_KEYWORD,addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=util$5,api={};var compact=api;api.compact=async({activeCtx:nt,activeProperty:rt=null,element:it,options:st={}})=>{if(_isArray$1(it)){let wt=[];for(let Et=0;Et<it.length;++Et){const kt=await api.compact({activeCtx:nt,activeProperty:rt,element:it[Et],options:st});kt!==null&&wt.push(kt)}return st.compactArrays&&wt.length===1&&(_getContextValue(nt,rt,"@container")||[]).length===0&&(wt=wt[0]),wt}const bt=_getContextValue(nt,rt,"@context");if(_isUndefined(bt)||(nt=await _processContext$1({activeCtx:nt,localCtx:bt,propagate:!0,overrideProtected:!0,options:st})),_isObject$1(it)){if(st.link&&"@id"in it&&st.link.hasOwnProperty(it["@id"])){const Bt=st.link[it["@id"]];for(let Ft=0;Ft<Bt.length;++Ft)if(Bt[Ft].expanded===it)return Bt[Ft].compacted}if(_isValue(it)||_isSubjectReference$1(it)){const Bt=api.compactValue({activeCtx:nt,activeProperty:rt,value:it,options:st});return st.link&&_isSubjectReference$1(it)&&(st.link.hasOwnProperty(it["@id"])||(st.link[it["@id"]]=[]),st.link[it["@id"]].push({expanded:it,compacted:Bt})),Bt}if(_isList(it)&&(_getContextValue(nt,rt,"@container")||[]).includes("@list"))return api.compact({activeCtx:nt,activeProperty:rt,element:it["@list"],options:st});const wt=rt==="@reverse",Et={},kt=nt;!_isValue(it)&&!_isSubjectReference$1(it)&&(nt=nt.revertToPreviousContext());const Lt=_getContextValue(kt,rt,"@context");_isUndefined(Lt)||(nt=await _processContext$1({activeCtx:nt,localCtx:Lt,propagate:!0,overrideProtected:!0,options:st})),st.link&&"@id"in it&&(st.link.hasOwnProperty(it["@id"])||(st.link[it["@id"]]=[]),st.link[it["@id"]].push({expanded:it,compacted:Et}));let Ot=it["@type"]||[];Ot.length>1&&(Ot=Array.from(Ot).sort());const Rt=nt;for(const Bt of Ot){const Ft=api.compactIri({activeCtx:Rt,iri:Bt,relativeTo:{vocab:!0}}),Yt=_getContextValue(kt,Ft,"@context");_isUndefined(Yt)||(nt=await _processContext$1({activeCtx:nt,localCtx:Yt,options:st,propagate:!1}))}const Dt=Object.keys(it).sort();for(const Bt of Dt){const Ft=it[Bt];if(Bt==="@id"){let Yt=_asArray(Ft).map(Wt=>api.compactIri({activeCtx:nt,iri:Wt,relativeTo:{vocab:!1},base:st.base}));Yt.length===1&&(Yt=Yt[0]);const Jt=api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}});Et[Jt]=Yt;continue}if(Bt==="@type"){let Yt=_asArray(Ft).map(sn=>api.compactIri({activeCtx:kt,iri:sn,relativeTo:{vocab:!0}}));Yt.length===1&&(Yt=Yt[0]);const Jt=api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}}),rn=(_getContextValue(nt,Jt,"@container")||[]).includes("@set")&&_processingMode$1(nt,1.1)||_isArray$1(Yt)&&Ft.length===0;_addValue(Et,Jt,Yt,{propertyIsArray:rn});continue}if(Bt==="@reverse"){const Yt=await api.compact({activeCtx:nt,activeProperty:"@reverse",element:Ft,options:st});for(const Jt in Yt)if(nt.mappings.has(Jt)&&nt.mappings.get(Jt).reverse){const Wt=Yt[Jt],rn=(_getContextValue(nt,Jt,"@container")||[]).includes("@set")||!st.compactArrays;_addValue(Et,Jt,Wt,{propertyIsArray:rn}),delete Yt[Jt]}if(Object.keys(Yt).length>0){const Jt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Jt,Yt)}continue}if(Bt==="@preserve"){const Yt=await api.compact({activeCtx:nt,activeProperty:rt,element:Ft,options:st});_isArray$1(Yt)&&Yt.length===0||_addValue(Et,Bt,Yt);continue}if(Bt==="@index"){if((_getContextValue(nt,rt,"@container")||[]).includes("@index"))continue;const Jt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Jt,Ft);continue}if(Bt!=="@graph"&&Bt!=="@list"&&Bt!=="@included"&&_isKeyword(Bt)){const Yt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Yt,Ft);continue}if(!_isArray$1(Ft))throw new JsonLdError$1("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(Ft.length===0){const Yt=api.compactIri({activeCtx:nt,iri:Bt,value:Ft,relativeTo:{vocab:!0},reverse:wt}),Jt=nt.mappings.has(Yt)?nt.mappings.get(Yt)["@nest"]:null;let Wt=Et;Jt&&(_checkNestProperty(nt,Jt,st),_isObject$1(Et[Jt])||(Et[Jt]={}),Wt=Et[Jt]),_addValue(Wt,Yt,Ft,{propertyIsArray:!0})}for(const Yt of Ft){const Jt=api.compactIri({activeCtx:nt,iri:Bt,value:Yt,relativeTo:{vocab:!0},reverse:wt}),Wt=nt.mappings.has(Jt)?nt.mappings.get(Jt)["@nest"]:null;let Qt=Et;Wt&&(_checkNestProperty(nt,Wt,st),_isObject$1(Et[Wt])||(Et[Wt]={}),Qt=Et[Wt]);const rn=_getContextValue(nt,Jt,"@container")||[],sn=_isGraph(Yt),on=_isList(Yt);let hn;on?hn=Yt["@list"]:sn&&(hn=Yt["@graph"]);let mn=await api.compact({activeCtx:nt,activeProperty:Jt,element:on||sn?hn:Yt,options:st});if(on)if(_isArray$1(mn)||(mn=[mn]),!rn.includes("@list"))mn={[api.compactIri({activeCtx:nt,iri:"@list",relativeTo:{vocab:!0}})]:mn},"@index"in Yt&&(mn[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=Yt["@index"]);else{_addValue(Qt,Jt,mn,{valueIsArray:!0,allowDuplicate:!0});continue}if(sn)if(rn.includes("@graph")&&(rn.includes("@id")||rn.includes("@index")&&_isSimpleGraph(Yt))){let Cn;Qt.hasOwnProperty(Jt)?Cn=Qt[Jt]:Qt[Jt]=Cn={};const Tn=(rn.includes("@id")?Yt["@id"]:Yt["@index"])||api.compactIri({activeCtx:nt,iri:"@none",relativeTo:{vocab:!0}});_addValue(Cn,Tn,mn,{propertyIsArray:!st.compactArrays||rn.includes("@set")})}else rn.includes("@graph")&&_isSimpleGraph(Yt)?(_isArray$1(mn)&&mn.length>1&&(mn={"@included":mn}),_addValue(Qt,Jt,mn,{propertyIsArray:!st.compactArrays||rn.includes("@set")})):(_isArray$1(mn)&&mn.length===1&&st.compactArrays&&(mn=mn[0]),mn={[api.compactIri({activeCtx:nt,iri:"@graph",relativeTo:{vocab:!0}})]:mn},"@id"in Yt&&(mn[api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}})]=Yt["@id"]),"@index"in Yt&&(mn[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=Yt["@index"]),_addValue(Qt,Jt,mn,{propertyIsArray:!st.compactArrays||rn.includes("@set")}));else if(rn.includes("@language")||rn.includes("@index")||rn.includes("@id")||rn.includes("@type")){let Cn;Qt.hasOwnProperty(Jt)?Cn=Qt[Jt]:Qt[Jt]=Cn={};let Tn;if(rn.includes("@language"))_isValue(mn)&&(mn=mn["@value"]),Tn=Yt["@language"];else if(rn.includes("@index")){const kn=_getContextValue(nt,Jt,"@index")||"@index",In=api.compactIri({activeCtx:nt,iri:kn,relativeTo:{vocab:!0}});if(kn==="@index")Tn=Yt["@index"],delete mn[In];else{let Ln;if([Tn,...Ln]=_asArray(mn[kn]||[]),!_isString$1(Tn))Tn=null;else switch(Ln.length){case 0:delete mn[kn];break;case 1:mn[kn]=Ln[0];break;default:mn[kn]=Ln;break}}}else if(rn.includes("@id")){const kn=api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}});Tn=mn[kn],delete mn[kn]}else if(rn.includes("@type")){const kn=api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}});let In;switch([Tn,...In]=_asArray(mn[kn]||[]),In.length){case 0:delete mn[kn];break;case 1:mn[kn]=In[0];break;default:mn[kn]=In;break}Object.keys(mn).length===1&&"@id"in Yt&&(mn=await api.compact({activeCtx:nt,activeProperty:Jt,element:{"@id":Yt["@id"]},options:st}))}Tn||(Tn=api.compactIri({activeCtx:nt,iri:"@none",relativeTo:{vocab:!0}})),_addValue(Cn,Tn,mn,{propertyIsArray:rn.includes("@set")})}else{const Cn=!st.compactArrays||rn.includes("@set")||rn.includes("@list")||_isArray$1(mn)&&mn.length===0||Bt==="@list"||Bt==="@graph";_addValue(Qt,Jt,mn,{propertyIsArray:Cn})}}}return Et}return it};api.compactIri=({activeCtx:nt,iri:rt,value:it=null,relativeTo:st={vocab:!1},reverse:bt=!1,base:wt=null})=>{if(rt===null)return rt;nt.isPropertyTermScoped&&nt.previousContext&&(nt=nt.previousContext);const Et=nt.getInverse();if(_isKeyword(rt)&&rt in Et&&"@none"in Et[rt]&&"@type"in Et[rt]["@none"]&&"@none"in Et[rt]["@none"]["@type"])return Et[rt]["@none"]["@type"]["@none"];if(st.vocab&&rt in Et){const Dt=nt["@language"]||"@none",Bt=[];_isObject$1(it)&&"@index"in it&&!("@graph"in it)&&Bt.push("@index","@index@set"),_isObject$1(it)&&"@preserve"in it&&(it=it["@preserve"][0]),_isGraph(it)?("@index"in it&&Bt.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in it&&Bt.push("@graph@id","@graph@id@set"),Bt.push("@graph","@graph@set","@set"),"@index"in it||Bt.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in it||Bt.push("@graph@id","@graph@id@set")):_isObject$1(it)&&!_isValue(it)&&Bt.push("@id","@id@set","@type","@set@type");let Ft="@language",Yt="@null";if(bt)Ft="@type",Yt="@reverse",Bt.push("@set");else if(_isList(it)){"@index"in it||Bt.push("@list");const Wt=it["@list"];if(Wt.length===0)Ft="@any",Yt="@none";else{let Qt=Wt.length===0?Dt:null,rn=null;for(let sn=0;sn<Wt.length;++sn){const on=Wt[sn];let hn="@none",mn="@none";if(_isValue(on))if("@direction"in on){const Cn=(on["@language"]||"").toLowerCase(),Tn=on["@direction"];hn=`${Cn}_${Tn}`}else"@language"in on?hn=on["@language"].toLowerCase():"@type"in on?mn=on["@type"]:hn="@null";else mn="@id";if(Qt===null?Qt=hn:hn!==Qt&&_isValue(on)&&(Qt="@none"),rn===null?rn=mn:mn!==rn&&(rn="@none"),Qt==="@none"&&rn==="@none")break}Qt=Qt||"@none",rn=rn||"@none",rn!=="@none"?(Ft="@type",Yt=rn):Yt=Qt}}else{if(_isValue(it))if("@language"in it&&!("@index"in it)){Bt.push("@language","@language@set"),Yt=it["@language"];const Wt=it["@direction"];Wt&&(Yt=`${Yt}_${Wt}`)}else"@direction"in it&&!("@index"in it)?Yt=`_${it["@direction"]}`:"@type"in it&&(Ft="@type",Yt=it["@type"]);else Ft="@type",Yt="@id";Bt.push("@set")}Bt.push("@none"),_isObject$1(it)&&!("@index"in it)&&Bt.push("@index","@index@set"),_isValue(it)&&Object.keys(it).length===1&&Bt.push("@language","@language@set");const Jt=_selectTerm(nt,rt,it,Bt,Ft,Yt);if(Jt!==null)return Jt}if(st.vocab&&"@vocab"in nt){const Dt=nt["@vocab"];if(rt.indexOf(Dt)===0&&rt!==Dt){const Bt=rt.substr(Dt.length);if(!nt.mappings.has(Bt))return Bt}}let kt=null;const Lt=[];let Ot=nt.fastCurieMap;const Rt=rt.length-1;for(let Dt=0;Dt<Rt&&rt[Dt]in Ot;++Dt)Ot=Ot[rt[Dt]],""in Ot&&Lt.push(Ot[""][0]);for(let Dt=Lt.length-1;Dt>=0;--Dt){const Bt=Lt[Dt],Ft=Bt.terms;for(const Yt of Ft){const Jt=Yt+":"+rt.substr(Bt.iri.length);nt.mappings.get(Yt)._prefix&&(!nt.mappings.has(Jt)||it===null&&nt.mappings.get(Jt)["@id"]===rt)&&(kt===null||_compareShortestLeast(Jt,kt)<0)&&(kt=Jt)}}if(kt!==null)return kt;for(const[Dt,Bt]of nt.mappings)if(Bt&&Bt._prefix&&rt.startsWith(Dt+":"))throw new JsonLdError$1(`Absolute IRI "${rt}" confused with prefix "${Dt}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:nt});if(!st.vocab)if("@base"in nt)if(nt["@base"]){const Dt=_removeBase(_prependBase(wt,nt["@base"]),rt);return REGEX_KEYWORD.test(Dt)?`./${Dt}`:Dt}else return rt;else return _removeBase(wt,rt);return rt};api.compactValue=({activeCtx:nt,activeProperty:rt,value:it,options:st})=>{if(_isValue(it)){const kt=_getContextValue(nt,rt,"@type"),Lt=_getContextValue(nt,rt,"@language"),Ot=_getContextValue(nt,rt,"@direction"),Rt=_getContextValue(nt,rt,"@container")||[],Dt="@index"in it&&!Rt.includes("@index");if(!Dt&&kt!=="@none"&&(it["@type"]===kt||"@language"in it&&it["@language"]===Lt&&"@direction"in it&&it["@direction"]===Ot||"@language"in it&&it["@language"]===Lt||"@direction"in it&&it["@direction"]===Ot))return it["@value"];const Bt=Object.keys(it).length,Ft=Bt===1||Bt===2&&"@index"in it&&!Dt,Yt="@language"in nt,Jt=_isString$1(it["@value"]),Wt=nt.mappings.has(rt)&&nt.mappings.get(rt)["@language"]===null;if(Ft&&kt!=="@none"&&(!Yt||!Jt||Wt))return it["@value"];const Qt={};return Dt&&(Qt[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=it["@index"]),"@type"in it?Qt[api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:nt,iri:it["@type"],relativeTo:{vocab:!0}}):"@language"in it&&(Qt[api.compactIri({activeCtx:nt,iri:"@language",relativeTo:{vocab:!0}})]=it["@language"]),"@direction"in it&&(Qt[api.compactIri({activeCtx:nt,iri:"@direction",relativeTo:{vocab:!0}})]=it["@direction"]),Qt[api.compactIri({activeCtx:nt,iri:"@value",relativeTo:{vocab:!0}})]=it["@value"],Qt}const bt=_expandIri$1(nt,rt,{vocab:!0},st),wt=_getContextValue(nt,rt,"@type"),Et=api.compactIri({activeCtx:nt,iri:it["@id"],relativeTo:{vocab:wt==="@vocab"},base:st.base});return wt==="@id"||wt==="@vocab"||bt==="@graph"?Et:{[api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}})]:Et}};function _selectTerm(nt,rt,it,st,bt,wt){wt===null&&(wt="@null");const Et=[];if((wt==="@id"||wt==="@reverse")&&_isObject$1(it)&&"@id"in it){wt==="@reverse"&&Et.push("@reverse");const Lt=api.compactIri({activeCtx:nt,iri:it["@id"],relativeTo:{vocab:!0}});nt.mappings.has(Lt)&&nt.mappings.get(Lt)&&nt.mappings.get(Lt)["@id"]===it["@id"]?Et.push.apply(Et,["@vocab","@id"]):Et.push.apply(Et,["@id","@vocab"])}else{Et.push(wt);const Lt=Et.find(Ot=>Ot.includes("_"));Lt&&Et.push(Lt.replace(/^[^_]+_/,"_"))}Et.push("@none");const kt=nt.inverse[rt];for(const Lt of st){if(!(Lt in kt))continue;const Ot=kt[Lt][bt];for(const Rt of Et)if(Rt in Ot)return Ot[Rt]}return null}function _checkNestProperty(nt,rt,it){if(_expandIri$1(nt,rt,{vocab:!0},it)!=="@nest")throw new JsonLdError$1("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}var JsonLdProcessor,hasRequiredJsonLdProcessor;function requireJsonLdProcessor(){return hasRequiredJsonLdProcessor||(hasRequiredJsonLdProcessor=1,JsonLdProcessor=nt=>{class rt{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(rt,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(rt.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:rt}),rt.compact=function(it,st){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):nt.compact(it,st)},rt.expand=function(it){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):nt.expand(it)},rt.flatten=function(it){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):nt.flatten(it)},rt}),JsonLdProcessor}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const canonize=rdfCanonize.exports,platform=platformBrowser,util=util$5,ContextResolver=ContextResolver_1,IdentifierIssuer=util.IdentifierIssuer,JsonLdError=JsonLdError_1,LRU=lruCache,NQuads=NQuads$1,{expand:_expand}=expand,{flatten:_flatten}=flatten,{fromRDF:_fromRDF}=fromRdf,{toRDF:_toRDF}=toRdf,{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=frame,{isArray:_isArray,isObject:_isObject,isString:_isString}=types$7,{isSubjectReference:_isSubjectReference}=graphTypes$5,{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=context,{compact:_compact,compactIri:_compactIri}=compact,{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=nodeMap,{logEventHandler:_logEventHandler,logWarningEventHandler:_logWarningEventHandler,safeEventHandler:_safeEventHandler,setDefaultEventHandler:_setDefaultEventHandler,setupEventHandler:_setupEventHandler,strictEventHandler:_strictEventHandler,unhandledEventHandler:_unhandledEventHandler}=events,wrapper=function(nt){const rt={},st=new LRU({max:100});nt.compact=async function(wt,Et,kt){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(Et===null)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(wt===null)return null;kt=bt(kt,{base:_isString(wt)?wt:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:st})}),kt.link&&(kt.skipExpansion=!0),kt.compactToRelative||delete kt.base;let Lt;kt.skipExpansion?Lt=wt:Lt=await nt.expand(wt,kt);const Ot=await nt.processContext(_getInitialContext(kt),Et,kt);let Rt=await _compact({activeCtx:Ot,element:Lt,options:kt});kt.compactArrays&&!kt.graph&&_isArray(Rt)?Rt.length===1?Rt=Rt[0]:Rt.length===0&&(Rt={}):kt.graph&&_isObject(Rt)&&(Rt=[Rt]),_isObject(Et)&&"@context"in Et&&(Et=Et["@context"]),Et=util.clone(Et),_isArray(Et)||(Et=[Et]);const Dt=Et;Et=[];for(let Ft=0;Ft<Dt.length;++Ft)(!_isObject(Dt[Ft])||Object.keys(Dt[Ft]).length>0)&&Et.push(Dt[Ft]);const Bt=Et.length>0;if(Et.length===1&&(Et=Et[0]),_isArray(Rt)){const Ft=_compactIri({activeCtx:Ot,iri:"@graph",relativeTo:{vocab:!0}}),Yt=Rt;Rt={},Bt&&(Rt["@context"]=Et),Rt[Ft]=Yt}else if(_isObject(Rt)&&Bt){const Ft=Rt;Rt={"@context":Et};for(const Yt in Ft)Rt[Yt]=Ft[Yt]}return Rt},nt.expand=async function(wt,Et){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");Et=bt(Et,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:st})});const kt={},Lt=[];if("expandContext"in Et){const Bt=util.clone(Et.expandContext);_isObject(Bt)&&"@context"in Bt?kt.expandContext=Bt:kt.expandContext={"@context":Bt},Lt.push(kt.expandContext)}let Ot;if(!_isString(wt))kt.input=util.clone(wt);else{const Bt=await nt.get(wt,Et);Ot=Bt.documentUrl,kt.input=Bt.document,Bt.contextUrl&&(kt.remoteContext={"@context":Bt.contextUrl},Lt.push(kt.remoteContext))}"base"in Et||(Et.base=Ot||"");let Rt=_getInitialContext(Et);for(const Bt of Lt)Rt=await _processContext({activeCtx:Rt,localCtx:Bt,options:Et});let Dt=await _expand({activeCtx:Rt,element:kt.input,options:Et});return _isObject(Dt)&&"@graph"in Dt&&Object.keys(Dt).length===1?Dt=Dt["@graph"]:Dt===null&&(Dt=[]),_isArray(Dt)||(Dt=[Dt]),Dt},nt.flatten=async function(wt,Et,kt){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof Et=="function"?Et=null:Et=Et||null,kt=bt(kt,{base:_isString(wt)?wt:"",contextResolver:new ContextResolver({sharedCache:st})});const Lt=await nt.expand(wt,kt),Ot=_flatten(Lt);return Et===null?Ot:(kt.graph=!0,kt.skipExpansion=!0,await nt.compact(Ot,Et,kt))},nt.frame=async function(wt,Et,kt){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(kt=bt(kt,{base:_isString(wt)?wt:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:st})}),_isString(Et)){const Wt=await nt.get(Et,kt);if(Et=Wt.document,Wt.contextUrl){let Qt=Et["@context"];Qt?_isArray(Qt)?Qt.push(Wt.contextUrl):Qt=[Qt,Wt.contextUrl]:Qt=Wt.contextUrl,Et["@context"]=Qt}}const Lt=Et?Et["@context"]||{}:{},Ot=await nt.processContext(_getInitialContext(kt),Lt,kt);kt.hasOwnProperty("omitGraph")||(kt.omitGraph=_processingMode(Ot,1.1)),kt.hasOwnProperty("pruneBlankNodeIdentifiers")||(kt.pruneBlankNodeIdentifiers=_processingMode(Ot,1.1));const Rt=await nt.expand(wt,kt),Dt={...kt};Dt.isFrame=!0,Dt.keepFreeFloatingNodes=!0;const Bt=await nt.expand(Et,Dt),Ft=Object.keys(Et).map(Wt=>_expandIri(Ot,Wt,{vocab:!0}));Dt.merged=!Ft.includes("@graph"),Dt.is11=_processingMode(Ot,1.1);const Yt=_frameMergedOrDefault(Rt,Bt,Dt);Dt.graph=!kt.omitGraph,Dt.skipExpansion=!0,Dt.link={},Dt.framing=!0;let Jt=await nt.compact(Yt,Lt,Dt);return Dt.link={},Jt=_cleanupNull(Jt,Dt),Jt},nt.link=async function(wt,Et,kt){const Lt={};return Et&&(Lt["@context"]=Et),Lt["@embed"]="@link",nt.frame(wt,Lt,kt)},nt.normalize=nt.canonize=async function(wt,Et){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(Et=bt(Et,{base:_isString(wt)?wt:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new ContextResolver({sharedCache:st})}),"inputFormat"in Et){if(Et.inputFormat!=="application/n-quads"&&Et.inputFormat!=="application/nquads")throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const Ot=NQuads.parse(wt);return canonize.canonize(Ot,Et)}const kt={...Et};delete kt.format,kt.produceGeneralizedRdf=!1;const Lt=await nt.toRDF(wt,kt);return canonize.canonize(Lt,Et)},nt.fromRDF=async function(wt,Et){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Et=bt(Et,{format:_isString(wt)?"application/n-quads":void 0});const{format:kt}=Et;let{rdfParser:Lt}=Et;if(kt){if(Lt=Lt||rt[kt],!Lt)throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:kt})}else Lt=()=>wt;const Ot=await Lt(wt);return _fromRDF(Ot,Et)},nt.toRDF=async function(wt,Et){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");Et=bt(Et,{base:_isString(wt)?wt:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:st})});let kt;Et.skipExpansion?kt=wt:kt=await nt.expand(wt,Et);const Lt=_toRDF(kt,Et);if(Et.format){if(Et.format==="application/n-quads"||Et.format==="application/nquads")return NQuads.serialize(Lt);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:Et.format})}return Lt},nt.createNodeMap=async function(wt,Et){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Et=bt(Et,{base:_isString(wt)?wt:"",contextResolver:new ContextResolver({sharedCache:st})});const kt=await nt.expand(wt,Et);return _createMergedNodeMap(kt,Et)},nt.merge=async function(wt,Et,kt){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(wt))throw new TypeError('Could not merge, "docs" must be an array.');typeof Et=="function"?Et=null:Et=Et||null,kt=bt(kt,{contextResolver:new ContextResolver({sharedCache:st})});const Lt=await Promise.all(wt.map(Wt=>{const Qt={...kt};return nt.expand(Wt,Qt)}));let Ot=!0;"mergeNodes"in kt&&(Ot=kt.mergeNodes);const Rt=kt.issuer||new IdentifierIssuer("_:b"),Dt={"@default":{}};for(let Wt=0;Wt<Lt.length;++Wt){const Qt=util.relabelBlankNodes(Lt[Wt],{issuer:new IdentifierIssuer("_:b"+Wt+"-")}),rn=Ot||Wt===0?Dt:{"@default":{}};if(_createNodeMap(Qt,rn,"@default",Rt),rn!==Dt)for(const sn in rn){const on=rn[sn];if(!(sn in Dt)){Dt[sn]=on;continue}const hn=Dt[sn];for(const mn in on)mn in hn||(hn[mn]=on[mn])}}const Bt=_mergeNodeMaps(Dt),Ft=[],Yt=Object.keys(Bt).sort();for(let Wt=0;Wt<Yt.length;++Wt){const Qt=Bt[Yt[Wt]];_isSubjectReference(Qt)||Ft.push(Qt)}return Et===null?Ft:(kt.graph=!0,kt.skipExpansion=!0,await nt.compact(Ft,Et,kt))},Object.defineProperty(nt,"documentLoader",{get:()=>nt._documentLoader,set:wt=>nt._documentLoader=wt}),nt.documentLoader=async wt=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:wt})},nt.get=async function(wt,Et){let kt;typeof Et.documentLoader=="function"?kt=Et.documentLoader:kt=nt.documentLoader;const Lt=await kt(wt);try{if(!Lt.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(Lt.document)&&(Lt.document=JSON.parse(Lt.document))}catch(Ot){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ot,remoteDoc:Lt})}return Lt},nt.processContext=async function(wt,Et,kt){return kt=bt(kt,{base:"",contextResolver:new ContextResolver({sharedCache:st})}),Et===null?_getInitialContext(kt):(Et=util.clone(Et),_isObject(Et)&&"@context"in Et||(Et={"@context":Et}),_processContext({activeCtx:wt,localCtx:Et,options:kt}))},nt.getContextValue=context.getContextValue,nt.documentLoaders={},nt.useDocumentLoader=function(wt){if(!(wt in nt.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+wt+'"',"jsonld.UnknownDocumentLoader",{type:wt});nt.documentLoader=nt.documentLoaders[wt].apply(nt,Array.prototype.slice.call(arguments,1))},nt.registerRDFParser=function(wt,Et){rt[wt]=Et},nt.unregisterRDFParser=function(wt){delete rt[wt]},nt.registerRDFParser("application/n-quads",NQuads.parse),nt.registerRDFParser("application/nquads",NQuads.parse),nt.url=url$1,nt.logEventHandler=_logEventHandler,nt.logWarningEventHandler=_logWarningEventHandler,nt.safeEventHandler=_safeEventHandler,nt.setDefaultEventHandler=_setDefaultEventHandler,nt.strictEventHandler=_strictEventHandler,nt.unhandledEventHandler=_unhandledEventHandler,nt.util=util,Object.assign(nt,util),nt.promises=nt,nt.RequestQueue=requireRequestQueue(),nt.JsonLdProcessor=requireJsonLdProcessor()(nt),platform.setupGlobals(nt),platform.setupDocumentLoaders(nt);function bt(wt,{documentLoader:Et=nt.documentLoader,...kt}){if(wt&&"compactionMap"in wt)throw new JsonLdError('"compactionMap" not supported.',"jsonld.OptionsError");if(wt&&"expansionMap"in wt)throw new JsonLdError('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:Et},kt,wt,{eventHandler:_setupEventHandler({options:wt})})}return nt},factory=function(){return wrapper(function(){return factory()})};wrapper(factory);var jsonld=factory;const _hoisted_1$6=["grid","caption","right","left","full","width","height"],_hoisted_2$4=["innerHTML"],_sfc_main$8=defineComponent({__name:"PlantSpecimen.ce",props:{eid:{type:String},qid:{type:String},jpid:{type:String},wdid:{type:String},taxonName:{type:String},caption:{type:String},max:{type:Number,default:1},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String}},setup(nt){const rt=nt,it=ref(null),st=ref([]),bt=ref([]);watch$1(st,async()=>{var Ft;bt.value=await Promise.all((((Ft=st.value)==null?void 0:Ft.length)===1?[st.value[0]]:st.value||[]).map(Yt=>fetch(`${kt}/manifest/`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(Bt(Yt))}).then(Jt=>Jt.json())))});const wt=computed(()=>{var Ft;return rt.caption||(((Ft=st.value)==null?void 0:Ft.length)>0?st.value[0].description:"")});onMounted(()=>Rt());const Et="https://cy9in0xsv5.execute-api.us-east-1.amazonaws.com/prod/sparql",kt="https://iiif.juncture-digital.org",Lt=`
    PREFIX jwd: <http://kg.jstor.org/entity/>
    PREFIX jwdt: <http://kg.jstor.org/prop/direct/>
    PREFIX jp: <http://kg.jstor.org/prop/>
    PREFIX jps: <http://kg.jstor.org/prop/statement/>
    PREFIX jpq: <http://kg.jstor.org/prop/qualifier/>
    PREFIX wd: <http://www.wikidata.org/entity/>
    PREFIX wdt: <http://www.wikidata.org/prop/direct/>
    PREFIX schema: <http://schema.org/>
    CONSTRUCT {
      ?specimen jwdt:P1660 ?specimenOf ;
                schema:description ?description ;
                rdf:type jwd:Q14316 ;
                jwdt:P1663 ?collectionDate ;
                jwdt:P1662 ?collector ;
                jwdt:P1665 ?locationCollected ;
                jwdt:P1106 ?jstorPlantsId ;
                jwdt:P1661 ?specimenType ;
                jwdt:P501 ?taxonName ;
                jwdt:P1666 ?availableAt ;
                jp:P1467 ?img .
      ?img jps:P1467 ?url ; jpq:P1669 ?imgSize .
      ?availableAt jps:P1666 ?wdID ; rdfs:label ?herbariumName .
      ?locationCollected jps:P1665 ?locId ; rdfs:label ?locationName ; wdt:P6766 ?wofId .
    } WHERE {
      ?specimen jwdt:P17 jwd:Q14316 ;
              <<SELECTOR>>
              schema:description ?description ;
              jwdt:P1106 ?jstorPlantsId ;
              jwdt:P501 ?taxonName ;
              jp:P1467 [ jps:P1467 ?img ;
                        jpq:P1669 ?imgSize ] .
      FILTER(?imgSize = 'best')
      OPTIONAL { ?specimen jwdt:P1661 ?specimenType . }
      OPTIONAL { ?specimen jwdt:P1660 ?specimenOf . }
      OPTIONAL { ?specimen jwdt:P1663 ?collectionDate . }
      OPTIONAL { ?specimen jwdt:P1662 ?collector . }
      OPTIONAL {
          ?specimen jwdt:P1665 ?locationCollected .
          SERVICE <https://query.wikidata.org/sparql> {
              ?locationCollected rdfs:label ?locationName .
              FILTER(LANG(?locationName) = 'en')
              OPTIONAL { ?locationCollected wdt:P6766 ?wofId . }
          }
      }        
      OPTIONAL {
          ?specimen jwdt:P1666 ?availableAt .
          SERVICE <https://query.wikidata.org/sparql> {
              ?availableAt rdfs:label ?herbariumName .
              FILTER(LANG(?herbariumName) = 'en')
          }
      }
    }
    LIMIT <<LIMIT>>`,Ot={"@context":{jwd:"http://kg.jstor.org/entity/",jwdt:"http://kg.jstor.org/prop/direct/",jp:"http://kg.jstor.org/prop/",jps:"http://kg.jstor.org/prop/statement/",jpq:"http://kg.jstor.org/prop/qualifier/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",wd:"http://www.wikidata.org/entity/",wdt:"http://www.wikidata.org/prop/direct/",xsd:"http://www.w3.org/2001/XMLSchema#",Specimen:"jwd:Q14316",id:"@id",collectionDate:{"@id":"jwdt:P1663","@type":"xsd:dateTime"},collector:{"@id":"jwdt:P1662","@container":"@set"},description:{"@id":"schema:description","@language":"en"},herbarium:{"@id":"jwdt:P1666","@type":"@id"},images:{"@id":"jp:P1467","@type":"@id","@container":"@set"},imgSize:{"@id":"jpq:P1669"},"instance of":{"@id":"jwdt:P17","@type":"@id"},jstorPlantsId:{"@id":"jwdt:P1106"},locationCollected:{"@id":"jwdt:P1665"},label:{"@id":"rdfs:label","@language":"en"},specimenOf:{"@id":"jwdt:P1660","@type":"@id"},specimenType:{"@id":"jwdt:P1661"},taxonName:{"@id":"jwdt:P501"},wofId:{"@id":"wdt:P6766"}}};async function Rt(){let Ft=rt.jpid?`jwdt:P1106 "${rt.jpid}" ;`:rt.eid||rt.qid||rt.wdid?`jwdt:P1660 <http://www.wikidata.org/entity/${rt.eid||rt.qid||rt.wdid}> ;`:`jwdt:P501 "${rt.taxonName}" ;`,Yt=Lt.replace(/<<SELECTOR>>/,Ft).replace(/<<LIMIT>>/,`${rt.max}`),Jt=await Dt(Yt);Jt["@graph"]?st.value=(await Dt(Yt))["@graph"]:(delete Jt["@context"],st.value=[Jt])}async function Dt(Ft){let Jt=await(await fetch(Et,{method:"POST",body:new URLSearchParams({query:Ft}),headers:{Accept:"text/plain","Content-type":"application/x-www-form-urlencoded"}})).text(),Wt=await jsonld.fromRDF(Jt,{format:"application/n-quads"});return jsonld.frame(Wt,{"@context":Ot,"@type":"Specimen"})}function Bt(Ft){let Jt=Ft.images.find(Qt=>Qt.imgSize==="best").id.match(/rft_id=([^&]*)/)[1],Wt={url:`${kt}/gp-proxy${Jt}`};return Ft.taxonName&&(Wt["Taxon name"]=Ft.taxonName),Ft.jstorPlantsId&&(Wt["Global Plants ID"]=Ft.jstorPlantsId),Ft.description&&(Wt.Description=Ft.description),Ft.description&&(Wt.Label=Ft.description),Ft.specimenType&&(Wt["Specimen type"]=Ft.specimenType),Ft.collector&&(Wt.Collector=Ft.collector.join("; ")),Ft.locationCollected&&(Wt["Location collected"]=Ft.locationCollected.label),Ft.collectionDate&&(Wt["Date collected"]=Ft.collectionDate),Ft.herbarium&&(Wt.Herbarium=Ft.herbarium.label),Wt}return(Ft,Yt)=>(openBlock(),createElementBlock("div",{class:"osd",id:"osd",ref_key:"root",ref:it},[st.value.length>0?(openBlock(),createElementBlock("ve-media",{key:0,grid:bt.value.length>1,caption:unref(wt),right:rt.right,left:rt.left,full:rt.full,width:rt.width,height:rt.height},[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value,Jt=>(openBlock(),createElementBlock("li",{key:Jt.id||Jt["@id"],innerHTML:Jt.id||Jt["@id"]},null,8,_hoisted_2$4))),128))])],8,_hoisted_1$6)):createCommentVNode("",!0)],512))}}),_hoisted_1$5=createBaseVNode("input",{class:"search-btn",type:"checkbox",id:"search-btn"},null,-1),_hoisted_2$3={class:"wrapper"},_hoisted_3$3={class:"search-form"},_hoisted_4$3={class:"input-wrapper"},_hoisted_5$2={key:0,class:"search-results"},_hoisted_6$2=["href"],_hoisted_7$2=["innerHTML"],_hoisted_8$2=["innerHTML"],_hoisted_9$1={key:0},_sfc_main$7=defineComponent({__name:"SiteSearch.ce",props:{searchDomain:{type:String}},setup(nt){const rt=nt,it="/search",st=ref(null),bt=computed(()=>{var Wt;return(Wt=st==null?void 0:st.value)==null?void 0:Wt.parentNode}),wt=ref(),Et=ref(),kt=ref(""),Lt=ref([]),Ot=ref(0),Rt=ref(!1);onMounted(()=>Dt());function Dt(){var Wt,Qt;wt.value=(Wt=bt.value)==null?void 0:Wt.querySelector("#search-input"),wt.value.value="",Et.value=(Qt=bt.value)==null?void 0:Qt.querySelector("#search-btn"),Lt.value=[]}watch$1(Rt,()=>{var Wt;Et.value&&(Et.value.checked=Rt.value),Rt&&((Wt=wt.value)==null||Wt.focus())});function Bt(){var sn;let Wt=(sn=wt.value)==null?void 0:sn.value.replace(/ /,"%20"),Qt=Wt===kt.value?Lt.value.length+1:1,rn=`${it}?domain=${rt.searchDomain}&q=${Wt}&start=${Qt}`;fetch(rn).then(on=>on.json()).then(on=>{Ot.value=parseInt(on.searchInformation.totalResults);let hn=on.items.map(mn=>{let Cn=new URL(mn.link);return mn.link=`${location.origin}${Cn.pathname}`,mn});Lt.value=Wt!==kt.value?hn:[...Lt.value,...hn],kt.value=Wt||""})}function Ft(Wt){Wt.key==="Enter"&&Bt()}function Yt(){Rt.value=!1,wt.value&&(wt.value.value=""),kt.value="",Ot.value=0,Lt.value=[]}function Jt(){Rt.value=!Rt.value}return(Wt,Qt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:st,class:"search"},[_hoisted_1$5,createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("sl-icon-button",{class:"cancel",onClick:Yt,name:"x-circle",label:"Clear"}),createBaseVNode("input",{type:"text",id:"search-input",class:"search-input",onKeyup:Ft,autocomplete:"off",role:"textbox",placeholder:"Search site"},null,32)])]),Lt.value.length>0?(openBlock(),createElementBlock("ul",_hoisted_5$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Lt.value,(rn,sn)=>(openBlock(),createElementBlock("li",{key:`sr=${sn}`},[createBaseVNode("a",{href:rn.link},[createBaseVNode("h3",{innerHTML:rn.htmlTitle},null,8,_hoisted_7$2),createBaseVNode("p",{innerHTML:rn.htmlSnippet},null,8,_hoisted_8$2)],8,_hoisted_6$2)]))),128)),Ot.value>Lt.value.length?(openBlock(),createElementBlock("li",_hoisted_9$1,[createBaseVNode("div",{class:"more",onClick:Bt},"More")])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("label",{class:"search-icon",htmlFor:"search-btn"},[createBaseVNode("sl-icon-button",{onClick:Jt,name:"search",label:"Search"})])],512))}}),_style_0$3=`*{box-sizing:border-box}.search-icon{color:#fff;font-size:28px}.search-icon:hover{cursor:pointer}.search{position:relative;display:flex;align-items:center;gap:10px}.search-btn,.search-form,.wrapper{display:none}.wrapper{flex-direction:column;position:absolute;right:-4px}.search-form{display:flex;align-items:center}.search-input{height:30px;width:250px;border-radius:6px;padding:3px 10px;font-size:1rem}.search-submit{background-color:#fff;border-radius:6px;padding:8px 8px 4px;height:24px;z-index:4}.search-submit:hover{background-color:#ddd;cursor:pointer}.search-submit sl-icon{color:#00f;font-size:20px}.search-results{position:absolute;top:42px;left:0;width:326px;max-height:50vh;overflow-y:scroll;z-index:2;background-color:#fff;margin:0 0 0 2px;list-style:none;padding:6px;border-radius:6px;font-size:.9rem;box-shadow:0 6px 20px #00000030}.search-results li:nth-of-type(even){background-color:#e6e6df}.search-results li{padding:6px;margin:3px;border:1px solid #E6E6DF}.search-results li h3,.search-results li p{margin:8px 0}.search-results li a{text-decoration:none;color:#444}.search-results li a h3{font-weight:700}.search-results li a p{font-weight:300}.search-results li:hover{cursor:pointer;box-shadow:0 4px 8px #0003}.search-icon sl-icon-button::part(base){color:#fff}.search-btn:checked~.search-icon sl-icon-button::part(base){visibility:hidden}.search-btn:checked~.wrapper .search-form{display:flex;width:100%}.search-btn:checked~.wrapper{display:flex}.input-wrapper{display:inline-block;position:relative}.cancel{position:absolute;right:0;font-size:16px;cursor:pointer}
`,SiteSearch=_export_sfc(_sfc_main$7,[["styles",[_style_0$3]]]);var tab_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tab {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    border-radius: var(--sl-border-radius-medium);
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-medium) var(--sl-spacing-large);
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;
  }

  .tab:hover:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus {
    outline: none;
  }

  .tab:focus-visible:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(-1 * var(--sl-focus-ring-width) - var(--sl-focus-ring-offset));
  }

  .tab.tab--active:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab.tab--closable {
    padding-inline-end: var(--sl-spacing-small);
  }

  .tab.tab--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tab__close-button {
    font-size: var(--sl-font-size-small);
    margin-inline-start: var(--sl-spacing-small);
  }

  .tab__close-button::part(base) {
    padding: var(--sl-spacing-3x-small);
  }

  @media (forced-colors: active) {
    .tab.tab--active:not(.tab--disabled) {
      outline: solid 1px transparent;
      outline-offset: -3px;
    }
  }
`,id$1=0,SlTab=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.attrId=++id$1,this.componentId=`sl-tab-${this.attrId}`,this.panel="",this.active=!1,this.closable=!1,this.disabled=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tab")}handleCloseClick(){this.emit("sl-close")}handleActiveChange(){this.setAttribute("aria-selected",this.active?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}focus(nt){this.tab.focus(nt)}blur(){this.tab.blur()}render(){return this.id=this.id.length>0?this.id:this.componentId,y$2`
      <div
        part="base"
        class=${o$1({tab:!0,"tab--active":this.active,"tab--closable":this.closable,"tab--disabled":this.disabled})}
        tabindex=${this.disabled?"-1":"0"}
      >
        <slot></slot>
        ${this.closable?y$2`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                class="tab__close-button"
                @click=${this.handleCloseClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlTab.styles=tab_styles_default;__decorateClass([i2$2(".tab")],SlTab.prototype,"tab",2);__decorateClass([e2$2({reflect:!0})],SlTab.prototype,"panel",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTab.prototype,"active",2);__decorateClass([e2$2({type:Boolean})],SlTab.prototype,"closable",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTab.prototype,"disabled",2);__decorateClass([watch("active")],SlTab.prototype,"handleActiveChange",1);__decorateClass([watch("disabled")],SlTab.prototype,"handleDisabledChange",1);SlTab=__decorateClass([e$1("sl-tab")],SlTab);var tab_group_styles_default=i$4`
  ${component_styles_default}

  :host {
    --indicator-color: var(--sl-color-primary-600);
    --track-color: var(--sl-color-neutral-200);
    --track-width: 2px;

    display: block;
  }

  .tab-group {
    display: flex;
    border-radius: 0;
  }

  .tab-group__tabs {
    display: flex;
    position: relative;
  }

  .tab-group__indicator {
    position: absolute;
    transition: var(--sl-transition-fast) translate ease, var(--sl-transition-fast) width ease;
  }

  .tab-group--has-scroll-controls .tab-group__nav-container {
    position: relative;
    padding: 0 var(--sl-spacing-x-large);
  }

  .tab-group__body {
    display: block;
    overflow: auto;
  }

  .tab-group__scroll-button {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    bottom: 0;
    width: var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button--start {
    left: 0;
  }

  .tab-group__scroll-button--end {
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--start {
    left: auto;
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--end {
    left: 0;
    right: auto;
  }

  /*
   * Top
   */

  .tab-group--top {
    flex-direction: column;
  }

  .tab-group--top .tab-group__nav-container {
    order: 1;
  }

  .tab-group--top .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--top .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--top .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-bottom: solid var(--track-width) var(--track-color);
  }

  .tab-group--top .tab-group__indicator {
    bottom: calc(-1 * var(--track-width));
    border-bottom: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--top .tab-group__body {
    order: 2;
  }

  .tab-group--top ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Bottom
   */

  .tab-group--bottom {
    flex-direction: column;
  }

  .tab-group--bottom .tab-group__nav-container {
    order: 2;
  }

  .tab-group--bottom .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--bottom .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-top: solid var(--track-width) var(--track-color);
  }

  .tab-group--bottom .tab-group__indicator {
    top: calc(-1 * var(--track-width));
    border-top: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--bottom .tab-group__body {
    order: 1;
  }

  .tab-group--bottom ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Start
   */

  .tab-group--start {
    flex-direction: row;
  }

  .tab-group--start .tab-group__nav-container {
    order: 1;
  }

  .tab-group--start .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-inline-end: solid var(--track-width) var(--track-color);
  }

  .tab-group--start .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    border-right: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--start.tab-group--rtl .tab-group__indicator {
    right: auto;
    left: calc(-1 * var(--track-width));
  }

  .tab-group--start .tab-group__body {
    flex: 1 1 auto;
    order: 2;
  }

  .tab-group--start ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }

  /*
   * End
   */

  .tab-group--end {
    flex-direction: row;
  }

  .tab-group--end .tab-group__nav-container {
    order: 2;
  }

  .tab-group--end .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-left: solid var(--track-width) var(--track-color);
  }

  .tab-group--end .tab-group__indicator {
    left: calc(-1 * var(--track-width));
    border-inline-start: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--end.tab-group--rtl .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    left: auto;
  }

  .tab-group--end .tab-group__body {
    flex: 1 1 auto;
    order: 1;
  }

  .tab-group--end ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }
`,SlTabGroup=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.tabs=[],this.panels=[],this.hasScrollControls=!1,this.placement="top",this.activation="auto",this.noScrollControls=!1}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>{this.repositionIndicator(),this.updateScrollControls()}),this.mutationObserver=new MutationObserver(nt=>{nt.some(rt=>!["aria-labelledby","aria-controls"].includes(rt.attributeName))&&setTimeout(()=>this.setAriaLabels()),nt.some(rt=>rt.attributeName==="disabled")&&this.syncTabsAndPanels()}),this.updateComplete.then(()=>{this.syncTabsAndPanels(),this.mutationObserver.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.resizeObserver.observe(this.nav),new IntersectionObserver((rt,it)=>{var st;rt[0].intersectionRatio>0&&(this.setAriaLabels(),this.setActiveTab((st=this.getActiveTab())!=null?st:this.tabs[0],{emitEvents:!1}),it.unobserve(rt[0].target))}).observe(this.tabGroup)})}disconnectedCallback(){this.mutationObserver.disconnect(),this.resizeObserver.unobserve(this.nav)}getAllTabs(nt={includeDisabled:!0}){return[...this.shadowRoot.querySelector('slot[name="nav"]').assignedElements()].filter(it=>nt.includeDisabled?it.tagName.toLowerCase()==="sl-tab":it.tagName.toLowerCase()==="sl-tab"&&!it.disabled)}getAllPanels(){return[...this.body.assignedElements()].filter(nt=>nt.tagName.toLowerCase()==="sl-tab-panel")}getActiveTab(){return this.tabs.find(nt=>nt.active)}handleClick(nt){const it=nt.target.closest("sl-tab");(it==null?void 0:it.closest("sl-tab-group"))===this&&it!==null&&this.setActiveTab(it,{scrollBehavior:"smooth"})}handleKeyDown(nt){const it=nt.target.closest("sl-tab");if((it==null?void 0:it.closest("sl-tab-group"))===this&&(["Enter"," "].includes(nt.key)&&it!==null&&(this.setActiveTab(it,{scrollBehavior:"smooth"}),nt.preventDefault()),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(nt.key))){const bt=this.tabs.find(Et=>Et.matches(":focus")),wt=this.localize.dir()==="rtl";if((bt==null?void 0:bt.tagName.toLowerCase())==="sl-tab"){let Et=this.tabs.indexOf(bt);nt.key==="Home"?Et=0:nt.key==="End"?Et=this.tabs.length-1:["top","bottom"].includes(this.placement)&&nt.key===(wt?"ArrowRight":"ArrowLeft")||["start","end"].includes(this.placement)&&nt.key==="ArrowUp"?Et--:(["top","bottom"].includes(this.placement)&&nt.key===(wt?"ArrowLeft":"ArrowRight")||["start","end"].includes(this.placement)&&nt.key==="ArrowDown")&&Et++,Et<0&&(Et=this.tabs.length-1),Et>this.tabs.length-1&&(Et=0),this.tabs[Et].focus({preventScroll:!0}),this.activation==="auto"&&this.setActiveTab(this.tabs[Et],{scrollBehavior:"smooth"}),["top","bottom"].includes(this.placement)&&scrollIntoView(this.tabs[Et],this.nav,"horizontal"),nt.preventDefault()}}}handleScrollToStart(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft+this.nav.clientWidth:this.nav.scrollLeft-this.nav.clientWidth,behavior:"smooth"})}handleScrollToEnd(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft-this.nav.clientWidth:this.nav.scrollLeft+this.nav.clientWidth,behavior:"smooth"})}setActiveTab(nt,rt){if(rt=__spreadValues({emitEvents:!0,scrollBehavior:"auto"},rt),nt!==this.activeTab&&!nt.disabled){const it=this.activeTab;this.activeTab=nt,this.tabs.map(st=>st.active=st===this.activeTab),this.panels.map(st=>{var bt;return st.active=st.name===((bt=this.activeTab)==null?void 0:bt.panel)}),this.syncIndicator(),["top","bottom"].includes(this.placement)&&scrollIntoView(this.activeTab,this.nav,"horizontal",rt.scrollBehavior),rt.emitEvents&&(it&&this.emit("sl-tab-hide",{detail:{name:it.panel}}),this.emit("sl-tab-show",{detail:{name:this.activeTab.panel}}))}}setAriaLabels(){this.tabs.forEach(nt=>{const rt=this.panels.find(it=>it.name===nt.panel);rt&&(nt.setAttribute("aria-controls",rt.getAttribute("id")),rt.setAttribute("aria-labelledby",nt.getAttribute("id")))})}repositionIndicator(){const nt=this.getActiveTab();if(!nt)return;const rt=nt.clientWidth,it=nt.clientHeight,st=this.localize.dir()==="rtl",bt=this.getAllTabs(),Et=bt.slice(0,bt.indexOf(nt)).reduce((kt,Lt)=>({left:kt.left+Lt.clientWidth,top:kt.top+Lt.clientHeight}),{left:0,top:0});switch(this.placement){case"top":case"bottom":this.indicator.style.width=`${rt}px`,this.indicator.style.height="auto",this.indicator.style.translate=st?`${-1*Et.left}px`:`${Et.left}px`;break;case"start":case"end":this.indicator.style.width="auto",this.indicator.style.height=`${it}px`,this.indicator.style.translate=`0 ${Et.top}px`;break}}syncTabsAndPanels(){this.tabs=this.getAllTabs({includeDisabled:!1}),this.panels=this.getAllPanels(),this.syncIndicator()}updateScrollControls(){this.noScrollControls?this.hasScrollControls=!1:this.hasScrollControls=["top","bottom"].includes(this.placement)&&this.nav.scrollWidth>this.nav.clientWidth}syncIndicator(){this.getActiveTab()?(this.indicator.style.display="block",this.repositionIndicator()):this.indicator.style.display="none"}show(nt){const rt=this.tabs.find(it=>it.panel===nt);rt&&this.setActiveTab(rt,{scrollBehavior:"smooth"})}render(){const nt=this.localize.dir()==="rtl";return y$2`
      <div
        part="base"
        class=${o$1({"tab-group":!0,"tab-group--top":this.placement==="top","tab-group--bottom":this.placement==="bottom","tab-group--start":this.placement==="start","tab-group--end":this.placement==="end","tab-group--rtl":this.localize.dir()==="rtl","tab-group--has-scroll-controls":this.hasScrollControls})}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
      >
        <div class="tab-group__nav-container" part="nav">
          ${this.hasScrollControls?y$2`
                <sl-icon-button
                  part="scroll-button scroll-button--start"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--start"
                  name=${nt?"chevron-right":"chevron-left"}
                  library="system"
                  label=${this.localize.term("scrollToStart")}
                  @click=${this.handleScrollToStart}
                ></sl-icon-button>
              `:""}

          <div class="tab-group__nav">
            <div part="tabs" class="tab-group__tabs" role="tablist">
              <div part="active-tab-indicator" class="tab-group__indicator"></div>
              <slot name="nav" @slotchange=${this.syncTabsAndPanels}></slot>
            </div>
          </div>

          ${this.hasScrollControls?y$2`
                <sl-icon-button
                  part="scroll-button scroll-button--end"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--end"
                  name=${nt?"chevron-left":"chevron-right"}
                  library="system"
                  label=${this.localize.term("scrollToEnd")}
                  @click=${this.handleScrollToEnd}
                ></sl-icon-button>
              `:""}
        </div>

        <slot part="body" class="tab-group__body" @slotchange=${this.syncTabsAndPanels}></slot>
      </div>
    `}};SlTabGroup.styles=tab_group_styles_default;__decorateClass([i2$2(".tab-group")],SlTabGroup.prototype,"tabGroup",2);__decorateClass([i2$2(".tab-group__body")],SlTabGroup.prototype,"body",2);__decorateClass([i2$2(".tab-group__nav")],SlTabGroup.prototype,"nav",2);__decorateClass([i2$2(".tab-group__indicator")],SlTabGroup.prototype,"indicator",2);__decorateClass([t$1()],SlTabGroup.prototype,"hasScrollControls",2);__decorateClass([e2$2()],SlTabGroup.prototype,"placement",2);__decorateClass([e2$2()],SlTabGroup.prototype,"activation",2);__decorateClass([e2$2({attribute:"no-scroll-controls",type:Boolean})],SlTabGroup.prototype,"noScrollControls",2);__decorateClass([watch("noScrollControls",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"updateScrollControls",1);__decorateClass([watch("placement",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"syncIndicator",1);SlTabGroup=__decorateClass([e$1("sl-tab-group")],SlTabGroup);var tab_panel_styles_default=i$4`
  ${component_styles_default}

  :host {
    --padding: 0;

    display: block;
  }

  .tab-panel {
    display: block;
    padding: var(--padding);
  }

  .tab-panel:not(.tab-panel--active) {
    display: none;
  }
`,id=0,SlTabPanel=class extends ShoelaceElement{constructor(){super(...arguments),this.attrId=++id,this.componentId=`sl-tab-panel-${this.attrId}`,this.name="",this.active=!1}connectedCallback(){super.connectedCallback(),this.id=this.id.length>0?this.id:this.componentId,this.setAttribute("role","tabpanel")}handleActiveChange(){this.setAttribute("aria-hidden",this.active?"false":"true")}render(){return y$2`
      <slot
        part="base"
        class=${o$1({"tab-panel":!0,"tab-panel--active":this.active})}
      ></slot>
    `}};SlTabPanel.styles=tab_panel_styles_default;__decorateClass([e2$2({reflect:!0})],SlTabPanel.prototype,"name",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTabPanel.prototype,"active",2);__decorateClass([watch("active")],SlTabPanel.prototype,"handleActiveChange",1);SlTabPanel=__decorateClass([e$1("sl-tab-panel")],SlTabPanel);const _hoisted_1$4=["open","draggable"],_hoisted_2$2=createBaseVNode("sl-icon",{name:"plus-square",slot:"expand-icon"},null,-1),_hoisted_3$2=createBaseVNode("sl-icon",{name:"dash-square",slot:"collapse-icon"},null,-1),_hoisted_4$2={slot:"summary"},_hoisted_5$1={content:"Show code snippets",placement:"top"},_hoisted_6$1={style:{display:"flex",alignItems:"center",gap:"9px"}},_hoisted_7$1=createBaseVNode("sl-icon",{name:"markdown",style:{"font-size":"24px"}},null,-1),_hoisted_8$1=createBaseVNode("sl-icon",{name:"code-slash",style:{"font-size":"24px"}},null,-1),_hoisted_9=["innerHTML"],_hoisted_10=createBaseVNode("sl-tab",{slot:"nav",panel:"markdown"},[createBaseVNode("sl-icon",{name:"markdown"}),createTextVNode("Markdown")],-1),_hoisted_11=createBaseVNode("sl-tab",{slot:"nav",panel:"html"},[createBaseVNode("sl-icon",{name:"code-slash"}),createTextVNode("HTML")],-1),_hoisted_12=createBaseVNode("sl-tab",{slot:"nav",panel:"wordpress"},[createBaseVNode("sl-icon",{name:"wordpress"}),createTextVNode("Wordpress")],-1),_hoisted_13=createBaseVNode("sl-tab",{slot:"nav",panel:"preview"},[createBaseVNode("sl-icon",{name:"eye"}),createTextVNode("Rendered")],-1),_hoisted_14={name:"markdown"},_hoisted_15=["draggable"],_hoisted_16={name:"html"},_hoisted_17=["innerHTML","draggable"],_hoisted_18={name:"wordpress"},_hoisted_19=["draggable"],_hoisted_20={name:"preview"},_hoisted_21=["innerHTML","draggable"],_hoisted_22={key:1},_hoisted_23=createBaseVNode("sl-tab",{slot:"nav",panel:"markdown"},[createBaseVNode("sl-icon",{name:"markdown"}),createTextVNode("Markdown")],-1),_hoisted_24=createBaseVNode("sl-tab",{slot:"nav",panel:"html"},[createBaseVNode("sl-icon",{name:"code-slash"}),createTextVNode("HTML")],-1),_hoisted_25=createBaseVNode("sl-tab",{slot:"nav",panel:"wordpress"},[createBaseVNode("sl-icon",{name:"wordpress"}),createTextVNode("Wordpress")],-1),_hoisted_26=createBaseVNode("sl-tab",{slot:"nav",panel:"preview"},[createBaseVNode("sl-icon",{name:"eye"}),createTextVNode("Rendered")],-1),_hoisted_27={name:"markdown"},_hoisted_28=["draggable"],_hoisted_29={name:"html"},_hoisted_30=["innerHTML","draggable"],_hoisted_31={name:"wordpress"},_hoisted_32=["draggable"],_hoisted_33={name:"preview"},_hoisted_34=["innerHTML","draggable"],_sfc_main$6=defineComponent({__name:"Snippet.ce",props:{label:{type:String},tabs:{type:String,default:"markdown,html,wordpress,preview"},collapsible:{type:Boolean,default:!1},open:{type:Boolean,default:!1},prefix:{type:String},path:{type:String},right:{type:Boolean},left:{type:Boolean},width:{type:String},height:{type:String},fill:{type:Boolean},showActive:{type:Boolean},disableDrag:{type:Boolean},src:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Wt;return(Wt=it==null?void 0:it.value)==null?void 0:Wt.parentNode}),bt=computed(()=>{var Wt,Qt;return(Qt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Qt.host}),wt=ref(),Et=ref(),kt=ref(),Lt=ref(),Ot=ref();watch$1(Et,()=>Yt()),onMounted(()=>{rt.src&&fetch(`/${rt.src}?fmt=md`).then(Wt=>Wt.text()).then(Wt=>{wt.value=Wt.replace(/>/g,"&gt;").replace(/</g,"&lt;")})}),watch$1(bt,()=>{rt.tabs?Ot.value=rt.tabs.split(","):Ot.value=["markdown","html","wordpress","preview"];let Qt=bt.value.innerHTML.replace(/<pre v-pre="" data-lang="markup"><code class="lang-markup">/,"").replace(/<\/code><\/pre>/,"").split(`
`),rn=[];if(Qt.forEach(sn=>{(sn.trim().length>0||rn.length>0)&&rn.push(sn)}),rn.length>0){let sn=(rn[0].match(/(^\s+)/)||[""])[0].length;wt.value=rn.map(on=>(on.match(/(^\s+)/)||[""])[0].length>=sn?on.slice(sn):on).join(`
`)}}),watch$1(Lt,()=>{Lt.value!=="markdown"&&Et.value===void 0&&Ft(),Lt.value==="preview"&&nextTick(()=>{initTippy(st.value,!0)}),rt.fill&&Et.value&&nextTick(()=>Bt()),rt.height&&nextTick(()=>Dt())});function Rt(){var Wt;(Wt=st.value)==null||Wt.querySelectorAll("sl-tab").forEach(Qt=>{new MutationObserver(sn=>{var hn;let on=sn[0].target;on.disabled=!((hn=Ot.value)!=null&&hn.includes(on.panel)),on.style.visibility=on.disabled?"hidden":"visible",on.active&&(Lt.value=on.panel)}).observe(Qt,{childList:!0,subtree:!0,attributes:!0})})}watch$1(Ot,()=>Rt());function Dt(){var Qt;let Wt=(Qt=st.value)==null?void 0:Qt.querySelector('sl-tab-panel[name="preview"]');Lt.value==="preview"&&rt.height&&(Wt.style.height=rt.height)}function Bt(){var Qt,rn;let Wt=(Qt=st.value)==null?void 0:Qt.querySelector('sl-tab-panel[name="preview"]');if(Lt.value==="preview"){let sn=(rn=st.value)==null?void 0:rn.querySelector("#juncture"),on=Wt.clientWidth/2,hn=document.createElement("div");hn.style.height=`${on}px`;let mn=sn.querySelector("ve-footer");mn?sn.insertBefore(hn,mn):sn.appendChild(hn),Wt.style.height=rt.height||`${Math.max(on/2,500)}px`,Wt.style.overflowY="scroll"}else Wt.style.height=""}function Ft(){Et.value="",fetch("/html/",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,markdown:wt.value})}).then(Wt=>Wt.text()).then(Wt=>{let Qt=new DOMParser().parseFromString(Wt,"text/html").children[0].children,rn=Qt[1].querySelector("main");if(rn){let sn=Qt[1].querySelector("style");sn&&rn.insertBefore(sn,rn.firstChild),Et.value=rn.innerHTML,Lt.value==="preview"&&nextTick(()=>{var on;rt.fill&&Bt(),initTippy(st.value,!0),observeActive((on=st.value)==null?void 0:on.querySelector("#juncture"))})}})}function Yt(){Et.value&&(kt.value="",fetch("/wxr/",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,html:Et.value})}).then(Wt=>Wt.text()).then(Wt=>kt.value=Wt))}function Jt(Wt){var rn;let Qt=wt.value;Qt&&((rn=Wt.dataTransfer)==null||rn.setData("text/plain",Qt))}return(Wt,Qt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[nt.collapsible?(openBlock(),createElementBlock("sl-details",{key:0,class:"custom-icons",open:rt.open,draggable:!rt.disableDrag,onDragstart:Jt},[_hoisted_2$2,_hoisted_3$2,createBaseVNode("div",_hoisted_4$2,[createBaseVNode("sl-tooltip",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,[_hoisted_7$1,_hoisted_8$1,createBaseVNode("span",{innerHTML:rt.label,class:"label"},null,8,_hoisted_9)])])]),createBaseVNode("sl-tab-group",null,[_hoisted_10,_hoisted_11,_hoisted_12,_hoisted_13,createBaseVNode("sl-tab-panel",_hoisted_14,[wt.value&&Lt.value==="markdown"?(openBlock(),createElementBlock("ve-source-viewer",{key:0,draggable:!rt.disableDrag},toDisplayString(wt.value),9,_hoisted_15)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_16,[Lt.value==="html"&&Et.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,innerHTML:Et.value,language:"html",draggable:!rt.disableDrag},null,8,_hoisted_17)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-pane",_hoisted_18,[Lt.value==="wordpress"&&kt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,language:"wxr",draggable:!rt.disableDrag},toDisplayString(kt.value),9,_hoisted_19)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_20,[Lt.value==="preview"&&Et.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Et.value,draggable:!rt.disableDrag,onDragstart:Jt},null,40,_hoisted_21)):createCommentVNode("",!0)])])],40,_hoisted_1$4)):(openBlock(),createElementBlock("sl-tab-group",_hoisted_22,[_hoisted_23,_hoisted_24,_hoisted_25,_hoisted_26,createBaseVNode("sl-tab-panel",_hoisted_27,[wt.value&&Lt.value==="markdown"?(openBlock(),createElementBlock("ve-source-viewer",{key:0,draggable:!rt.disableDrag},toDisplayString(wt.value),9,_hoisted_28)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-pane",_hoisted_29,[Lt.value==="html"&&Et.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,innerHTML:Et.value,language:"html",draggable:!rt.disableDrag},null,8,_hoisted_30)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-pane",_hoisted_31,[Lt.value==="wordpress"&&kt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,language:"wxr",draggable:!rt.disableDrag},toDisplayString(kt.value),9,_hoisted_32)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_33,[Lt.value==="preview"&&Et.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Et.value,draggable:!rt.disableDrag,onDragstart:Jt},null,40,_hoisted_34)):createCommentVNode("",!0)])]))],512))}}),_style_1$2=`*{box-sizing:border-box}:host{display:block;margin-top:1.5rem;border-radius:2px;border:.5px solid #ddd;margin-bottom:2rem}:host([collapsible]){border:none}#main{font-family:Roboto,sans-serif;margin-top:0}sl-tab-panel{--padding: 0}sl-tab::part(base){padding:12px}#juncture{padding:12px;font-size:1.2em;line-height:1.3}sl-details::part(header){background-color:#f9f9f9}sl-details::part(summary){font-size:1rem}sl-details::part(content){border-top:1px solid #ddd;padding:0}sl-details.custom-icons::part(summary-icon){rotate:none}sl-tab sl-icon{font-size:24px;margin-right:6px}.label{margin-left:12px;color:#555;font-weight:400}
`,Snippet=_export_sfc(_sfc_main$6,[["styles",[_style_0$o,_style_1$2]]]);var prism$1={exports:{}};(function(nt){var rt=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var it=function(st){var bt=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,wt=0,Et={},kt={manual:st.Prism&&st.Prism.manual,disableWorkerMessageHandler:st.Prism&&st.Prism.disableWorkerMessageHandler,util:{encode:function rn(sn){return sn instanceof Lt?new Lt(sn.type,rn(sn.content),sn.alias):Array.isArray(sn)?sn.map(rn):sn.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(rn){return Object.prototype.toString.call(rn).slice(8,-1)},objId:function(rn){return rn.__id||Object.defineProperty(rn,"__id",{value:++wt}),rn.__id},clone:function rn(sn,on){on=on||{};var hn,mn;switch(kt.util.type(sn)){case"Object":if(mn=kt.util.objId(sn),on[mn])return on[mn];hn={},on[mn]=hn;for(var Cn in sn)sn.hasOwnProperty(Cn)&&(hn[Cn]=rn(sn[Cn],on));return hn;case"Array":return mn=kt.util.objId(sn),on[mn]?on[mn]:(hn=[],on[mn]=hn,sn.forEach(function(Tn,kn){hn[kn]=rn(Tn,on)}),hn);default:return sn}},getLanguage:function(rn){for(;rn;){var sn=bt.exec(rn.className);if(sn)return sn[1].toLowerCase();rn=rn.parentElement}return"none"},setLanguage:function(rn,sn){rn.className=rn.className.replace(RegExp(bt,"gi"),""),rn.classList.add("language-"+sn)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(hn){var rn=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(hn.stack)||[])[1];if(rn){var sn=document.getElementsByTagName("script");for(var on in sn)if(sn[on].src==rn)return sn[on]}return null}},isActive:function(rn,sn,on){for(var hn="no-"+sn;rn;){var mn=rn.classList;if(mn.contains(sn))return!0;if(mn.contains(hn))return!1;rn=rn.parentElement}return!!on}},languages:{plain:Et,plaintext:Et,text:Et,txt:Et,extend:function(rn,sn){var on=kt.util.clone(kt.languages[rn]);for(var hn in sn)on[hn]=sn[hn];return on},insertBefore:function(rn,sn,on,hn){hn=hn||kt.languages;var mn=hn[rn],Cn={};for(var Tn in mn)if(mn.hasOwnProperty(Tn)){if(Tn==sn)for(var kn in on)on.hasOwnProperty(kn)&&(Cn[kn]=on[kn]);on.hasOwnProperty(Tn)||(Cn[Tn]=mn[Tn])}var In=hn[rn];return hn[rn]=Cn,kt.languages.DFS(kt.languages,function(Ln,pn){pn===In&&Ln!=rn&&(this[Ln]=Cn)}),Cn},DFS:function rn(sn,on,hn,mn){mn=mn||{};var Cn=kt.util.objId;for(var Tn in sn)if(sn.hasOwnProperty(Tn)){on.call(sn,Tn,sn[Tn],hn||Tn);var kn=sn[Tn],In=kt.util.type(kn);In==="Object"&&!mn[Cn(kn)]?(mn[Cn(kn)]=!0,rn(kn,on,null,mn)):In==="Array"&&!mn[Cn(kn)]&&(mn[Cn(kn)]=!0,rn(kn,on,Tn,mn))}}},plugins:{},highlightAll:function(rn,sn){kt.highlightAllUnder(document,rn,sn)},highlightAllUnder:function(rn,sn,on){var hn={callback:on,container:rn,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};kt.hooks.run("before-highlightall",hn),hn.elements=Array.prototype.slice.apply(hn.container.querySelectorAll(hn.selector)),kt.hooks.run("before-all-elements-highlight",hn);for(var mn=0,Cn;Cn=hn.elements[mn++];)kt.highlightElement(Cn,sn===!0,hn.callback)},highlightElement:function(rn,sn,on){var hn=kt.util.getLanguage(rn),mn=kt.languages[hn];kt.util.setLanguage(rn,hn);var Cn=rn.parentElement;Cn&&Cn.nodeName.toLowerCase()==="pre"&&kt.util.setLanguage(Cn,hn);var Tn=rn.textContent,kn={element:rn,language:hn,grammar:mn,code:Tn};function In(pn){kn.highlightedCode=pn,kt.hooks.run("before-insert",kn),kn.element.innerHTML=kn.highlightedCode,kt.hooks.run("after-highlight",kn),kt.hooks.run("complete",kn),on&&on.call(kn.element)}if(kt.hooks.run("before-sanity-check",kn),Cn=kn.element.parentElement,Cn&&Cn.nodeName.toLowerCase()==="pre"&&!Cn.hasAttribute("tabindex")&&Cn.setAttribute("tabindex","0"),!kn.code){kt.hooks.run("complete",kn),on&&on.call(kn.element);return}if(kt.hooks.run("before-highlight",kn),!kn.grammar){In(kt.util.encode(kn.code));return}if(sn&&st.Worker){var Ln=new Worker(kt.filename);Ln.onmessage=function(pn){In(pn.data)},Ln.postMessage(JSON.stringify({language:kn.language,code:kn.code,immediateClose:!0}))}else In(kt.highlight(kn.code,kn.grammar,kn.language))},highlight:function(rn,sn,on){var hn={code:rn,grammar:sn,language:on};if(kt.hooks.run("before-tokenize",hn),!hn.grammar)throw new Error('The language "'+hn.language+'" has no grammar.');return hn.tokens=kt.tokenize(hn.code,hn.grammar),kt.hooks.run("after-tokenize",hn),Lt.stringify(kt.util.encode(hn.tokens),hn.language)},tokenize:function(rn,sn){var on=sn.rest;if(on){for(var hn in on)sn[hn]=on[hn];delete sn.rest}var mn=new Dt;return Bt(mn,mn.head,rn),Rt(rn,mn,sn,mn.head,0),Yt(mn)},hooks:{all:{},add:function(rn,sn){var on=kt.hooks.all;on[rn]=on[rn]||[],on[rn].push(sn)},run:function(rn,sn){var on=kt.hooks.all[rn];if(!(!on||!on.length))for(var hn=0,mn;mn=on[hn++];)mn(sn)}},Token:Lt};st.Prism=kt;function Lt(rn,sn,on,hn){this.type=rn,this.content=sn,this.alias=on,this.length=(hn||"").length|0}Lt.stringify=function rn(sn,on){if(typeof sn=="string")return sn;if(Array.isArray(sn)){var hn="";return sn.forEach(function(In){hn+=rn(In,on)}),hn}var mn={type:sn.type,content:rn(sn.content,on),tag:"span",classes:["token",sn.type],attributes:{},language:on},Cn=sn.alias;Cn&&(Array.isArray(Cn)?Array.prototype.push.apply(mn.classes,Cn):mn.classes.push(Cn)),kt.hooks.run("wrap",mn);var Tn="";for(var kn in mn.attributes)Tn+=" "+kn+'="'+(mn.attributes[kn]||"").replace(/"/g,"&quot;")+'"';return"<"+mn.tag+' class="'+mn.classes.join(" ")+'"'+Tn+">"+mn.content+"</"+mn.tag+">"};function Ot(rn,sn,on,hn){rn.lastIndex=sn;var mn=rn.exec(on);if(mn&&hn&&mn[1]){var Cn=mn[1].length;mn.index+=Cn,mn[0]=mn[0].slice(Cn)}return mn}function Rt(rn,sn,on,hn,mn,Cn){for(var Tn in on)if(!(!on.hasOwnProperty(Tn)||!on[Tn])){var kn=on[Tn];kn=Array.isArray(kn)?kn:[kn];for(var In=0;In<kn.length;++In){if(Cn&&Cn.cause==Tn+","+In)return;var Ln=kn[In],pn=Ln.inside,Hn=!!Ln.lookbehind,yn=!!Ln.greedy,mr=Ln.alias;if(yn&&!Ln.pattern.global){var vn=Ln.pattern.toString().match(/[imsuy]*$/)[0];Ln.pattern=RegExp(Ln.pattern.source,vn+"g")}for(var yr=Ln.pattern||Ln,Tr=hn.next,Mr=mn;Tr!==sn.tail&&!(Cn&&Mr>=Cn.reach);Mr+=Tr.value.length,Tr=Tr.next){var rr=Tr.value;if(sn.length>rn.length)return;if(!(rr instanceof Lt)){var wr=1,fr;if(yn){if(fr=Ot(yr,Mr,rn,Hn),!fr||fr.index>=rn.length)break;var lr=fr.index,gr=fr.index+fr[0].length,Lr=Mr;for(Lr+=Tr.value.length;lr>=Lr;)Tr=Tr.next,Lr+=Tr.value.length;if(Lr-=Tr.value.length,Mr=Lr,Tr.value instanceof Lt)continue;for(var Pr=Tr;Pr!==sn.tail&&(Lr<gr||typeof Pr.value=="string");Pr=Pr.next)wr++,Lr+=Pr.value.length;wr--,rr=rn.slice(Mr,Lr),fr.index-=Mr}else if(fr=Ot(yr,0,rr,Hn),!fr)continue;var lr=fr.index,qr=fr[0],sr=rr.slice(0,lr),pr=rr.slice(lr+qr.length),Er=Mr+rr.length;Cn&&Er>Cn.reach&&(Cn.reach=Er);var ir=Tr.prev;sr&&(ir=Bt(sn,ir,sr),Mr+=sr.length),Ft(sn,ir,wr);var Pn=new Lt(Tn,pn?kt.tokenize(qr,pn):qr,mr,qr);if(Tr=Bt(sn,ir,Pn),pr&&Bt(sn,Tr,pr),wr>1){var nn={cause:Tn+","+In,reach:Er};Rt(rn,sn,on,Tr.prev,Mr,nn),Cn&&nn.reach>Cn.reach&&(Cn.reach=nn.reach)}}}}}}function Dt(){var rn={value:null,prev:null,next:null},sn={value:null,prev:rn,next:null};rn.next=sn,this.head=rn,this.tail=sn,this.length=0}function Bt(rn,sn,on){var hn=sn.next,mn={value:on,prev:sn,next:hn};return sn.next=mn,hn.prev=mn,rn.length++,mn}function Ft(rn,sn,on){for(var hn=sn.next,mn=0;mn<on&&hn!==rn.tail;mn++)hn=hn.next;sn.next=hn,hn.prev=sn,rn.length-=mn}function Yt(rn){for(var sn=[],on=rn.head.next;on!==rn.tail;)sn.push(on.value),on=on.next;return sn}if(!st.document)return st.addEventListener&&(kt.disableWorkerMessageHandler||st.addEventListener("message",function(rn){var sn=JSON.parse(rn.data),on=sn.language,hn=sn.code,mn=sn.immediateClose;st.postMessage(kt.highlight(hn,kt.languages[on],on)),mn&&st.close()},!1)),kt;var Jt=kt.util.currentScript();Jt&&(kt.filename=Jt.src,Jt.hasAttribute("data-manual")&&(kt.manual=!0));function Wt(){kt.manual||kt.highlightAll()}if(!kt.manual){var Qt=document.readyState;Qt==="loading"||Qt==="interactive"&&Jt&&Jt.defer?document.addEventListener("DOMContentLoaded",Wt):window.requestAnimationFrame?window.requestAnimationFrame(Wt):window.setTimeout(Wt,16)}return kt}(rt);nt.exports&&(nt.exports=it),typeof commonjsGlobal$1<"u"&&(commonjsGlobal$1.Prism=it),it.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},it.languages.markup.tag.inside["attr-value"].inside.entity=it.languages.markup.entity,it.languages.markup.doctype.inside["internal-subset"].inside=it.languages.markup,it.hooks.add("wrap",function(st){st.type==="entity"&&(st.attributes.title=st.content.replace(/&amp;/,"&"))}),Object.defineProperty(it.languages.markup.tag,"addInlined",{value:function(bt,wt){var Et={};Et["language-"+wt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:it.languages[wt]},Et.cdata=/^<!\[CDATA\[|\]\]>$/i;var kt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Et}};kt["language-"+wt]={pattern:/[\s\S]+/,inside:it.languages[wt]};var Lt={};Lt[bt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return bt}),"i"),lookbehind:!0,greedy:!0,inside:kt},it.languages.insertBefore("markup","cdata",Lt)}}),Object.defineProperty(it.languages.markup.tag,"addAttribute",{value:function(st,bt){it.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+st+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[bt,"language-"+bt],inside:it.languages[bt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),it.languages.html=it.languages.markup,it.languages.mathml=it.languages.markup,it.languages.svg=it.languages.markup,it.languages.xml=it.languages.extend("markup",{}),it.languages.ssml=it.languages.xml,it.languages.atom=it.languages.xml,it.languages.rss=it.languages.xml,function(st){var bt=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;st.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+bt.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+bt.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+bt.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+bt.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:bt,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},st.languages.css.atrule.inside.rest=st.languages.css;var wt=st.languages.markup;wt&&(wt.tag.addInlined("style","css"),wt.tag.addAttribute("style","css"))}(it),it.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},it.languages.javascript=it.languages.extend("clike",{"class-name":[it.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),it.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,it.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:it.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:it.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:it.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:it.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:it.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),it.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:it.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),it.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),it.languages.markup&&(it.languages.markup.tag.addInlined("script","javascript"),it.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),it.languages.js=it.languages.javascript,function(){if(typeof it>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var st="Loading\u2026",bt=function(Jt,Wt){return"\u2716 Error "+Jt+" while fetching file: "+Wt},wt="\u2716 Error: File does not exist or is empty",Et={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},kt="data-src-status",Lt="loading",Ot="loaded",Rt="failed",Dt="pre[data-src]:not(["+kt+'="'+Ot+'"]):not(['+kt+'="'+Lt+'"])';function Bt(Jt,Wt,Qt){var rn=new XMLHttpRequest;rn.open("GET",Jt,!0),rn.onreadystatechange=function(){rn.readyState==4&&(rn.status<400&&rn.responseText?Wt(rn.responseText):rn.status>=400?Qt(bt(rn.status,rn.statusText)):Qt(wt))},rn.send(null)}function Ft(Jt){var Wt=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(Jt||"");if(Wt){var Qt=Number(Wt[1]),rn=Wt[2],sn=Wt[3];return rn?sn?[Qt,Number(sn)]:[Qt,void 0]:[Qt,Qt]}}it.hooks.add("before-highlightall",function(Jt){Jt.selector+=", "+Dt}),it.hooks.add("before-sanity-check",function(Jt){var Wt=Jt.element;if(Wt.matches(Dt)){Jt.code="",Wt.setAttribute(kt,Lt);var Qt=Wt.appendChild(document.createElement("CODE"));Qt.textContent=st;var rn=Wt.getAttribute("data-src"),sn=Jt.language;if(sn==="none"){var on=(/\.(\w+)$/.exec(rn)||[,"none"])[1];sn=Et[on]||on}it.util.setLanguage(Qt,sn),it.util.setLanguage(Wt,sn);var hn=it.plugins.autoloader;hn&&hn.loadLanguages(sn),Bt(rn,function(mn){Wt.setAttribute(kt,Ot);var Cn=Ft(Wt.getAttribute("data-range"));if(Cn){var Tn=mn.split(/\r\n?|\n/g),kn=Cn[0],In=Cn[1]==null?Tn.length:Cn[1];kn<0&&(kn+=Tn.length),kn=Math.max(0,Math.min(kn-1,Tn.length)),In<0&&(In+=Tn.length),In=Math.max(0,Math.min(In,Tn.length)),mn=Tn.slice(kn,In).join(`
`),Wt.hasAttribute("data-start")||Wt.setAttribute("data-start",String(kn+1))}Qt.textContent=mn,it.highlightElement(Qt)},function(mn){Wt.setAttribute(kt,Rt),Qt.textContent=mn})}}),it.plugins.fileHighlight={highlight:function(Wt){for(var Qt=(Wt||document).querySelectorAll(Dt),rn=0,sn;sn=Qt[rn++];)it.highlightElement(sn)}};var Yt=!1;it.fileHighlight=function(){Yt||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),Yt=!0),it.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(prism$1);const Prism$1=prism$1.exports;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(nt){nt.type==="entity"&&(nt.attributes.title=nt.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function nt(rt,it){var st={};st["language-"+it]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[it]},st.cdata=/^<!\[CDATA\[|\]\]>$/i;var bt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:st}};bt["language-"+it]={pattern:/[\s\S]+/,inside:Prism.languages[it]};var wt={};wt[rt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return rt}),"i"),lookbehind:!0,greedy:!0,inside:bt},Prism.languages.insertBefore("markup","cdata",wt)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(nt,rt){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+nt+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[rt,"language-"+rt],inside:Prism.languages[rt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(nt){var rt=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function it(Rt){return Rt=Rt.replace(/<inner>/g,function(){return rt}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+Rt+")")}var st=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,bt=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return st}),wt=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;nt.languages.markdown=nt.languages.extend("markup",{}),nt.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:nt.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+bt+wt+"(?:"+bt+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+bt+wt+")(?:"+bt+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(st),inside:nt.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+bt+")"+wt+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+bt+"$"),inside:{"table-header":{pattern:RegExp(st),alias:"important",inside:nt.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:it(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:it(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:it(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:it(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(Rt){["url","bold","italic","strike","code-snippet"].forEach(function(Dt){Rt!==Dt&&(nt.languages.markdown[Rt].inside.content.inside[Dt]=nt.languages.markdown[Dt])})}),nt.hooks.add("after-tokenize",function(Rt){if(Rt.language!=="markdown"&&Rt.language!=="md")return;function Dt(Bt){if(!(!Bt||typeof Bt=="string"))for(var Ft=0,Yt=Bt.length;Ft<Yt;Ft++){var Jt=Bt[Ft];if(Jt.type!=="code"){Dt(Jt.content);continue}var Wt=Jt.content[1],Qt=Jt.content[3];if(Wt&&Qt&&Wt.type==="code-language"&&Qt.type==="code-block"&&typeof Wt.content=="string"){var rn=Wt.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");rn=(/[a-z][\w-]*/i.exec(rn)||[""])[0].toLowerCase();var sn="language-"+rn;Qt.alias?typeof Qt.alias=="string"?Qt.alias=[Qt.alias,sn]:Qt.alias.push(sn):Qt.alias=[sn]}}}Dt(Rt.tokens)}),nt.hooks.add("wrap",function(Rt){if(Rt.type==="code-block"){for(var Dt="",Bt=0,Ft=Rt.classes.length;Bt<Ft;Bt++){var Yt=Rt.classes[Bt],Jt=/language-(.+)/.exec(Yt);if(Jt){Dt=Jt[1];break}}var Wt=nt.languages[Dt];if(Wt)Rt.content=nt.highlight(Ot(Rt.content),Wt,Dt);else if(Dt&&Dt!=="none"&&nt.plugins.autoloader){var Qt="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);Rt.attributes.id=Qt,nt.plugins.autoloader.loadLanguages(Dt,function(){var rn=document.getElementById(Qt);rn&&(rn.innerHTML=nt.highlight(rn.textContent,nt.languages[Dt],Dt))})}}});var Et=RegExp(nt.languages.markup.tag.pattern.source,"gi"),kt={amp:"&",lt:"<",gt:">",quot:'"'},Lt=String.fromCodePoint||String.fromCharCode;function Ot(Rt){var Dt=Rt.replace(Et,"");return Dt=Dt.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(Bt,Ft){if(Ft=Ft.toLowerCase(),Ft[0]==="#"){var Yt;return Ft[1]==="x"?Yt=parseInt(Ft.slice(2),16):Yt=Number(Ft.slice(1)),Lt(Yt)}else{var Jt=kt[Ft];return Jt||Bt}}),Dt}nt.languages.md=nt.languages.markdown})(Prism);(function(nt){function rt(wt,Et){nt.languages[wt]&&nt.languages.insertBefore(wt,"comment",{"doc-comment":Et})}var it=nt.languages.markup.tag,st={pattern:/\/\/\/.*/,greedy:!0,alias:"comment",inside:{tag:it}},bt={pattern:/'''.*/,greedy:!0,alias:"comment",inside:{tag:it}};rt("csharp",st),rt("fsharp",st),rt("vbnet",bt)})(Prism);const prism="",_hoisted_1$3=["draggable"],_hoisted_2$1={key:0,id:"juncture",class:"language-juncture",style:{margin:"0","white-space":"pre-wrap","word-wrap":"break-word"}},_hoisted_3$1=["innerHTML"],_hoisted_4$1={key:2,id:"wxr",class:"language-xml"},_sfc_main$5=defineComponent({__name:"SourceViewer.ce",props:{src:{type:String},language:{type:String,default:"juncture"},draggable:{type:Boolean,default:!0}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Rt,Dt;return(Dt=(Rt=it.value)==null?void 0:Rt.getRootNode())==null?void 0:Dt.host}),bt=computed(()=>{var Rt;return(Rt=it==null?void 0:it.value)==null?void 0:Rt.parentNode}),wt=ref();watch$1(st,()=>{var Dt;let Rt=(Dt=st.value)==null?void 0:Dt.innerHTML.trim();Rt&&(wt.value=rt.language==="html"?kt(Rt):`
${Rt}`)}),watch$1(wt,()=>{var Dt,Bt;wt.value=(Dt=wt.value)==null?void 0:Dt.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");let Rt=(Bt=bt.value)==null?void 0:Bt.querySelector(`#${rt.language}`);Rt&&wt.value&&nextTick(()=>{Prism$1.highlightElement(Rt)})}),onMounted(()=>{rt.src&&fetch(`/${rt.src}?fmt=md`).then(Rt=>Rt.text()).then(Rt=>{Rt=Rt.replace(/>/g,"&gt;").replace(/</g,"&lt;"),wt.value=rt.language==="html"?kt(Rt):`
${Rt}`})}),Prism$1.languages.juncture=Prism$1.languages.extend("markdown",{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+.+/,greedy:!0,inside:{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+/},string:[{pattern:/[^=]\"(\\.|[^\"])*\"/,alias:"attr-value"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],"manifest-url":[{pattern:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,inside:{url:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,punctuation:/\s+/}}],position:[{pattern:/\s+(full|left|right|sticky)/,alias:"boolean"}],"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},marked:[{pattern:/==[^=]+=={[^}]+}/,alias:"class-name"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],reference:[{pattern:/\[\^[^\]]+\]:?\s*/,alias:"class-name"}]});function Et(Rt){for(var Dt="",Bt=Rt*2;Bt--;)Dt+=" ";return Dt}function kt(Rt){Rt=Rt.trim().replace(/&amp;/g,"&");let Dt="",Bt=0,Ft=Rt.split(/</);for(var Yt=0,Jt=Ft.length;Yt<Jt;Yt++){var Wt=Ft[Yt].split(/>/);Wt.length===2?(Ft[Yt][0]==="/"&&Bt--,Dt+=Et(Bt),Ft[Yt][0]!=="/"&&Bt++,Yt>0&&(Dt+="<"),Dt+=Wt[0].trim()+`>
`,Wt[1].trim()!==""&&(Dt+=Et(Bt)+Wt[1].trim().replace(/\s+/g," ")+`
`),Wt[0].match(/^(img|hr|br)/)&&Bt--):Dt+=Et(Bt)+Wt[0]+`
`}return Dt.replace(/\s+<mark([^>]*>)\s+/gm," <mark$1").replace(/\s+<\/mark>\s+/mg,"</mark> ").replace(/<a([^>]*>)\s+/gm," <a$1").replace(/\s+<\/a>/mg,"</a> ").replace(/=""/g,"").replace(/(<ve-[^>]+>)\s(<\/ve-[^>]+>\n)/g,`$1$2
`).replace(/<p>\s+/g,"<p>").replace(/\s+<\/p>\s+/g,`</p>
`).replace(/<ve-/g,`
<ve-`).replace(/ anno-base="undefined\/"/g,"").replace(/^\n\n/g,`
`)}function Lt(){var Rt,Dt;if(navigator.clipboard){let Bt=(((Rt=wt.value)==null?void 0:Rt.trim())||"").replace(/&lt;/g,"<").replace(/&gt;/g,">");navigator.clipboard.writeText(Bt);const Ft=(Dt=bt.value)==null?void 0:Dt.querySelector("sl-tooltip");Ft&&(Ft.open=!0,setTimeout(()=>Ft.open=!1,1e3))}}function Ot(Rt){var Bt;let Dt=wt.value;Dt&&((Bt=Rt.dataTransfer)==null||Bt.setData("text/plain",Dt))}return(Rt,Dt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main",style:{width:"100%",height:"100%"},draggable:rt.draggable,onDragstart:Ot},[nt.language==="juncture"?(openBlock(),createElementBlock("pre",_hoisted_2$1,[createTextVNode("    "),createBaseVNode("code",{innerHTML:wt.value},null,8,_hoisted_3$1),createTextVNode(`
  `)])):createCommentVNode("",!0),nt.language==="html"?(openBlock(),createElementBlock("pre",{key:1,id:"html",class:"language-markup",style:normalizeStyle({margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word"})},[createTextVNode("    "),createBaseVNode("code",null,toDisplayString(wt.value),1)],4)):createCommentVNode("",!0),nt.language==="wxr"?(openBlock(),createElementBlock("pre",_hoisted_4$1,[createBaseVNode("code",null,toDisplayString(wt.value),1)])):createCommentVNode("",!0),createBaseVNode("sl-tooltip",{content:"Text copied to clipboard",placement:"top",hoist:"",trigger:"manual",style:{"--sl-tooltip-arrow-size":"0"}},[createBaseVNode("sl-button",{class:"copy-button",onClick:Lt},"Copy Text")])],40,_hoisted_1$3))}}),_style_0$2=`code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function,.token.class-name{color:#dd4a68}.token.regex,.token.important,.token.variable{color:#e90}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
`,_style_1$1=`*{box-sizing:border-box}.main{font-size:.8em;position:relative}.main pre{background-color:#f9f9f9;font-size:1rem}.main:hover .copy-button{opacity:1}.copy-button{position:absolute;top:10px;right:10px;opacity:0;transition:all .3s ease-in}.juncture-tag{color:#905}
`,SourceViewer=_export_sfc(_sfc_main$5,[["styles",[_style_0$2,_style_1$1]]]),_sfc_main$4=defineComponent({__name:"Spacer.ce",props:{height:{type:String,default:"50vh"}},setup(nt){const rt=nt;return(it,st)=>(openBlock(),createElementBlock("div",{style:normalizeStyle({height:rt.height})},null,4))}}),_sfc_main$3=defineComponent({__name:"Starter.ce",props:{id:{type:String},numProp:{type:Number,default:0},boolProp:{type:Boolean}},emits:["custom-event"],setup(nt,{expose:rt,emit:it}){const st=nt;rt({increment:Ot});const bt=ref(st.numProp),wt=ref(null),Et=computed(()=>{var Rt;return(Rt=wt==null?void 0:wt.value)==null?void 0:Rt.parentNode}),kt=computed(()=>{var Rt,Dt;return(Dt=(Rt=wt.value)==null?void 0:Rt.getRootNode())==null?void 0:Dt.host});watch$1(kt,()=>Lt()),watch$1(bt,()=>it("custom-event",bt.value));function Lt(){var Rt;console.log(kt.value),console.log((Rt=Et.value)==null?void 0:Rt.querySelector("h1")),setTimeout(()=>Ot(),2e3)}function Ot(){++bt.value}return(Rt,Dt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:wt,class:"main"}," <ve-starter></ve-starter> ",512))}}),_style_0$1=`.main{color:red}
`,Starter=_export_sfc(_sfc_main$3,[["styles",[_style_0$1]]]),_hoisted_1$2=["innerHTML"],_sfc_main$2=defineComponent({__name:"Version.ce",setup(nt){const rt=ref("2.0.0-beta.43");return(it,st)=>(openBlock(),createElementBlock("span",{innerHTML:rt.value},null,8,_hoisted_1$2))}}),_hoisted_1$1={id:"autocompleteContainer",class:"autocomplete__container",role:"combobox"},_hoisted_2=createBaseVNode("svg",{"fill-rule":"evenodd",height:"5",viewBox:"0 0 10 5",width:"10"},[createBaseVNode("title",null,"Open drop down"),createBaseVNode("path",{d:"M10 0L5 5 0 0z"})],-1),_hoisted_3=[_hoisted_2],_hoisted_4={id:"autocompleteResults",class:"autocomplete__results",role:"listbox"},_hoisted_5=["onClick"],_hoisted_6=["innerHTML"],_hoisted_7={key:0,class:"aliases"},_hoisted_8=["innerHTML"],_sfc_main$1=defineComponent({__name:"WikidataSearch.ce",props:{language:{type:String,default:"en"}},emits:["entity-selected"],setup(nt,{emit:rt}){const it=nt,st=ref([]),bt=ref(),wt=ref(),Et=ref(),kt=ref(),Lt=ref(0),Ot=ref(!1),Rt=ref(""),Dt=ref(!1),Bt=ref(null),Ft=computed(()=>{var mn;return(mn=Bt==null?void 0:Bt.value)==null?void 0:mn.parentNode}),Yt=computed(()=>{var mn,Cn;return(Cn=(mn=Bt.value)==null?void 0:mn.getRootNode())==null?void 0:Cn.host});watch$1(Yt,()=>Jt()),watch$1(Ot,mn=>{var Cn,Tn,kn,In,Ln,pn,Hn;mn?((Cn=bt.value)==null||Cn.classList.add("visible"),(Tn=wt.value)==null||Tn.classList.add("expanded"),(kn=Et.value)==null||kn.setAttribute("aria-expanded","true")):((In=bt.value)==null||In.classList.remove("visible"),(Ln=wt.value)==null||Ln.classList.remove("expanded"),(pn=Et.value)==null||pn.setAttribute("aria-expanded","false"),(Hn=kt.value)==null||Hn.setAttribute("aria-activedescendant",""))}),watch$1(Rt,()=>{st.value=[],Lt.value=0,on()});function Jt(){var mn,Cn,Tn,kn;bt.value=(mn=Ft.value)==null?void 0:mn.querySelector("#autocompleteResults"),kt.value=(Cn=Ft.value)==null?void 0:Cn.querySelector("#autocompleteInput"),wt.value=(Tn=Ft.value)==null?void 0:Tn.querySelector("#autocompleteDropdownArrow"),Et.value=(kn=Ft.value)==null?void 0:kn.querySelector("#autocompleteContainer")}function Wt(){kt.value&&(kt.value.value=""),st.value=[],Lt.value=0,Ot.value=!1}let Qt=null;function rn(){Qt!==null&&(clearTimeout(Qt),Qt=null),Qt=window.setTimeout(()=>{kt.value&&(Rt.value=kt.value.value.trim()),Qt=null},500)}function sn(){Ot.value=!Ot.value}function on(){if(!Rt.value||Dt.value)return;Dt.value=!0;let mn=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${Rt.value}&uselang=${it.language}&language=${it.language}&format=json&origin=*&continue=${Lt.value}`;fetch(mn).then(Cn=>Cn.json()).then(Cn=>{Lt.value=Cn["search-continue"],st.value=[...st.value,...Cn.search],Ot.value=!0}).catch(Cn=>{console.log(Cn)}).finally(()=>Dt.value=!1)}function hn(mn){rt("entity-selected",mn),Wt()}return(mn,Cn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Bt,class:"wikidata-search"},[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("input",{id:"autocompleteInput",class:"autocomplete__input",onKeyup:rn,autocomplete:"off",role:"textbox",placeholder:"Search for entity"},null,32),createBaseVNode("button",{id:"autocompleteDropdownArrow",class:"autocomplete__dropdown-arrow",style:normalizeStyle({visibility:st.value.length>0?"visible":"hidden"}),onClick:sn,"aria-label":"toggle dropdown"},_hoisted_3,4),createBaseVNode("ul",_hoisted_4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(st.value,(Tn,kn)=>(openBlock(),createElementBlock("li",{key:`result-${kn}`,onClick:In=>hn(Tn)},[createBaseVNode("ul",null,[createBaseVNode("li",null,[createBaseVNode("span",{class:"label",innerHTML:Tn.label},null,8,_hoisted_6),Tn.aliases?(openBlock(),createElementBlock("span",_hoisted_7,"({item.aliases.join(', ')})")):createCommentVNode("",!0)]),createBaseVNode("li",{class:"description",innerHTML:Tn.description},null,8,_hoisted_8)])],8,_hoisted_5))),128)),Lt.value?(openBlock(),createElementBlock("li",{key:0,onClick:on,class:"continue"},"More...")):createCommentVNode("",!0)])])],512))}}),_style_0=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}.autocomplete__container{display:flex;position:relative;align-items:center;justify-content:flex-end;float:left;width:100%;max-width:500px;height:100%}textarea:focus,input:focus{outline:none}.wikidata-search{display:inline-block;height:calc(1.5em + .75rem + 2px);margin-right:3px;border:1px solid #ccc;border-radius:3px;width:100%;background-color:#fff}.wikidata-search i{padding-left:6px;font-size:1.2rem;color:#333}.autocomplete__results.visible{visibility:visible;min-width:320px}.autocomplete__input{display:block;width:100%;min-width:220px;height:100%;border:none;padding-left:.5rem;border-radius:3px;font-size:1.1rem}.autocomplete__input:focus{border-color:#284fa4}.autocomplete__dropdown-arrow{position:absolute;right:0;top:0;background:transparent;border:none;cursor:pointer;height:100%;transition:transform .2s linear}.autocomplete__dropdown-arrow.expanded{transform:rotate(-180deg)}.autocomplete__results{visibility:hidden;position:absolute;top:100%;margin-top:0;width:100%;overflow-y:auto;border:1px solid #999;padding:0;max-height:400px;background:white;z-index:500}.autocomplete__results>li{list-style:none;padding:.3rem .5rem;cursor:pointer;color:#000}.autocomplete__results ul{list-style-type:none;padding-left:0}.autocomplete__results>li:hover{background:hsl(212,10%,60%)}.autocomplete__results>li:focus{background:hsl(212,10%,70%)}.label{font-weight:700}.aliases{font-style:italic}.description{font-size:.9rem;padding:2px 0}.continue{font-weight:700;background-color:#ddd}.search{display:grid;border-radius:0;background-color:#555;color:#fff;width:100%;align-items:center}
`,WikidataSearch=_export_sfc(_sfc_main$1,[["styles",[_style_0]]]),_hoisted_1=["name"],_sfc_main=defineComponent({__name:"Window.ce",props:{href:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},buttonLabel:{type:String,default:"Open"},buttonIcon:{type:String}},setup(nt){const rt=nt,it=window,st=ref(null);function bt(){rt.width;let wt=rt.height||Math.min(window.innerHeight,1600);it.junctureWindow&&it.junctureWindow.close();let Et=`toolbar=yes,location=yes,left=${rt.left},top=${rt.top},width=${rt.width},height=${wt},scrollbars=yes,status=yes`;it.junctureWindow=window.open(rt.href,"_blank",Et)}return(wt,Et)=>(openBlock(),createElementBlock("sl-button",{ref_key:"root",ref:st,onClick:bt},[rt.buttonIcon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.buttonIcon},null,8,_hoisted_1)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)],512))}}),_style_1=`:host{display:inline-block}
`,Window=_export_sfc(_sfc_main,[["styles",[_style_0$o,_style_1]]]);setBasePath("https://raw.githubusercontent.com//juncture-digital/web-components/main/src");console.log("juncture.web-components: version=2.0.0-beta.43");function init(){customElements.define("ve-add-media-resource-dialog",defineCustomElement(AddMediaResourceDialog)),customElements.define("ve-auth",defineCustomElement(Auth)),customElements.define("ve-button",defineCustomElement(Button)),customElements.define("ve-contact",defineCustomElement(Contact)),customElements.define("ve-content-selector",defineCustomElement(ContentSelector)),customElements.define("ve-entities",defineCustomElement(Entities)),customElements.define("ve-entity-card",defineCustomElement(EntityCard)),customElements.define("ve-essay",defineCustomElement(Essay)),customElements.define("ve-fab",defineCustomElement(FAB)),customElements.define("ve-footer",defineCustomElement(Footer)),customElements.define("ve-header",defineCustomElement(Header)),customElements.define("ve-gif",defineCustomElement(GIF)),customElements.define("ve-hero",defineCustomElement(Hero)),customElements.define("ve-iframe",defineCustomElement(IFrame)),customElements.define("ve-info-card",defineCustomElement(InfoCard)),customElements.define("ve-manifest",defineCustomElement(Manifest)),customElements.define("ve-manifest-popup",defineCustomElement(ManifestPopup)),customElements.define("ve-map",defineCustomElement(Map$3)),customElements.define("ve-media",defineCustomElement(MediaViewer)),customElements.define("ve-media-card",defineCustomElement(MediaCard)),customElements.define("ve-media-selector",defineCustomElement(MediaSelector)),customElements.define("ve-menu",defineCustomElement(Menu)),customElements.define("ve-mermaid",defineCustomElement(Mermaid)),customElements.define("ve-modal",defineCustomElement(Modal)),customElements.define("ve-navbar",defineCustomElement(Navbar)),customElements.define("ve-pager",defineCustomElement(Pager)),customElements.define("ve-plant-specimen",defineCustomElement(_sfc_main$8)),customElements.define("ve-snippet",defineCustomElement(Snippet)),customElements.define("ve-source-viewer",defineCustomElement(SourceViewer)),customElements.define("ve-site-search",defineCustomElement(SiteSearch)),customElements.define("ve-spacer",defineCustomElement(_sfc_main$4)),customElements.define("ve-starter",defineCustomElement(Starter)),customElements.define("ve-version",defineCustomElement(_sfc_main$2)),customElements.define("ve-wikidata-search",defineCustomElement(WikidataSearch)),customElements.define("ve-window",defineCustomElement(Window)),document.body.style.transition="opacity 0.3s linear",document.body.style.visibility="visible",document.body.style.opacity="1"}init()});export default qw();

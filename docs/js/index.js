var Vw=Object.defineProperty;var Uw=(nt,rt,it)=>rt in nt?Vw(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it;var jw=(nt,rt)=>()=>(rt||nt((rt={exports:{}}).exports,rt),rt.exports);var Id=(nt,rt,it)=>(Uw(nt,typeof rt!="symbol"?rt+"":rt,it),it);var Ww=jw((exports,module)=>{(function(){const rt=document.createElement("link").relList;if(rt&&rt.supports&&rt.supports("modulepreload"))return;for(const bt of document.querySelectorAll('link[rel="modulepreload"]'))vt(bt);new MutationObserver(bt=>{for(const wt of bt)if(wt.type==="childList")for(const Tt of wt.addedNodes)Tt.tagName==="LINK"&&Tt.rel==="modulepreload"&&vt(Tt)}).observe(document,{childList:!0,subtree:!0});function it(bt){const wt={};return bt.integrity&&(wt.integrity=bt.integrity),bt.referrerpolicy&&(wt.referrerPolicy=bt.referrerpolicy),bt.crossorigin==="use-credentials"?wt.credentials="include":bt.crossorigin==="anonymous"?wt.credentials="omit":wt.credentials="same-origin",wt}function vt(bt){if(bt.ep)return;bt.ep=!0;const wt=it(bt);fetch(bt.href,wt)}})();const style="";function makeMap(nt,rt){const it=Object.create(null),vt=nt.split(",");for(let bt=0;bt<vt.length;bt++)it[vt[bt]]=!0;return rt?bt=>!!it[bt.toLowerCase()]:bt=>!!it[bt]}function normalizeStyle(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++){const vt=nt[it],bt=isString(vt)?parseStringStyle(vt):normalizeStyle(vt);if(bt)for(const wt in bt)rt[wt]=bt[wt]}return rt}else{if(isString(nt))return nt;if(isObject$3(nt))return nt}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(nt){const rt={};return nt.replace(styleCommentRE,"").split(listDelimiterRE).forEach(it=>{if(it){const vt=it.split(propertyDelimiterRE);vt.length>1&&(rt[vt[0].trim()]=vt[1].trim())}}),rt}function normalizeClass(nt){let rt="";if(isString(nt))rt=nt;else if(isArray$2(nt))for(let it=0;it<nt.length;it++){const vt=normalizeClass(nt[it]);vt&&(rt+=vt+" ")}else if(isObject$3(nt))for(const it in nt)nt[it]&&(rt+=it+" ");return rt.trim()}function normalizeProps(nt){if(!nt)return null;let{class:rt,style:it}=nt;return rt&&!isString(rt)&&(nt.class=normalizeClass(rt)),it&&(nt.style=normalizeStyle(it)),nt}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(nt){return!!nt||nt===""}const toDisplayString=nt=>isString(nt)?nt:nt==null?"":isArray$2(nt)||isObject$3(nt)&&(nt.toString===objectToString$1||!isFunction$1(nt.toString))?JSON.stringify(nt,replacer,2):String(nt),replacer=(nt,rt)=>rt&&rt.__v_isRef?replacer(nt,rt.value):isMap$2(rt)?{[`Map(${rt.size})`]:[...rt.entries()].reduce((it,[vt,bt])=>(it[`${vt} =>`]=bt,it),{})}:isSet$2(rt)?{[`Set(${rt.size})`]:[...rt.values()]}:isObject$3(rt)&&!isArray$2(rt)&&!isPlainObject$1(rt)?String(rt):rt,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=nt=>onRE.test(nt),isModelListener=nt=>nt.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(nt,rt)=>{const it=nt.indexOf(rt);it>-1&&nt.splice(it,1)},hasOwnProperty$h=Object.prototype.hasOwnProperty,hasOwn=(nt,rt)=>hasOwnProperty$h.call(nt,rt),isArray$2=Array.isArray,isMap$2=nt=>toTypeString(nt)==="[object Map]",isSet$2=nt=>toTypeString(nt)==="[object Set]",isFunction$1=nt=>typeof nt=="function",isString=nt=>typeof nt=="string",isSymbol$1=nt=>typeof nt=="symbol",isObject$3=nt=>nt!==null&&typeof nt=="object",isPromise=nt=>isObject$3(nt)&&isFunction$1(nt.then)&&isFunction$1(nt.catch),objectToString$1=Object.prototype.toString,toTypeString=nt=>objectToString$1.call(nt),toRawType=nt=>toTypeString(nt).slice(8,-1),isPlainObject$1=nt=>toTypeString(nt)==="[object Object]",isIntegerKey=nt=>isString(nt)&&nt!=="NaN"&&nt[0]!=="-"&&""+parseInt(nt,10)===nt,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=nt=>{const rt=Object.create(null);return it=>rt[it]||(rt[it]=nt(it))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(nt=>nt.replace(camelizeRE,(rt,it)=>it?it.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(nt=>nt.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)),toHandlerKey=cacheStringFunction(nt=>nt?`on${capitalize(nt)}`:""),hasChanged=(nt,rt)=>!Object.is(nt,rt),invokeArrayFns=(nt,rt)=>{for(let it=0;it<nt.length;it++)nt[it](rt)},def=(nt,rt,it)=>{Object.defineProperty(nt,rt,{configurable:!0,enumerable:!1,value:it})},toNumber$1=nt=>{const rt=parseFloat(nt);return isNaN(rt)?nt:rt};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(rt=!1){this.detached=rt,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!rt&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(rt){if(this.active){const it=activeEffectScope;try{return activeEffectScope=this,rt()}finally{activeEffectScope=it}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(rt){if(this.active){let it,vt;for(it=0,vt=this.effects.length;it<vt;it++)this.effects[it].stop();for(it=0,vt=this.cleanups.length;it<vt;it++)this.cleanups[it]();if(this.scopes)for(it=0,vt=this.scopes.length;it<vt;it++)this.scopes[it].stop(!0);if(!this.detached&&this.parent&&!rt){const bt=this.parent.scopes.pop();bt&&bt!==this&&(this.parent.scopes[this.index]=bt,bt.index=this.index)}this.parent=void 0,this.active=!1}}}function recordEffectScope(nt,rt=activeEffectScope){rt&&rt.active&&rt.effects.push(nt)}const createDep=nt=>{const rt=new Set(nt);return rt.w=0,rt.n=0,rt},wasTracked=nt=>(nt.w&trackOpBit)>0,newTracked=nt=>(nt.n&trackOpBit)>0,initDepMarkers=({deps:nt})=>{if(nt.length)for(let rt=0;rt<nt.length;rt++)nt[rt].w|=trackOpBit},finalizeDepMarkers=nt=>{const{deps:rt}=nt;if(rt.length){let it=0;for(let vt=0;vt<rt.length;vt++){const bt=rt[vt];wasTracked(bt)&&!newTracked(bt)?bt.delete(nt):rt[it++]=bt,bt.w&=~trackOpBit,bt.n&=~trackOpBit}rt.length=it}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(rt,it=null,vt){this.fn=rt,this.scheduler=it,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,vt)}run(){if(!this.active)return this.fn();let rt=activeEffect,it=shouldTrack;for(;rt;){if(rt===this)return;rt=rt.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=it,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(nt){const{deps:rt}=nt;if(rt.length){for(let it=0;it<rt.length;it++)rt[it].delete(nt);rt.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const nt=trackStack.pop();shouldTrack=nt===void 0?!0:nt}function track(nt,rt,it){if(shouldTrack&&activeEffect){let vt=targetMap.get(nt);vt||targetMap.set(nt,vt=new Map);let bt=vt.get(it);bt||vt.set(it,bt=createDep()),trackEffects(bt)}}function trackEffects(nt,rt){let it=!1;effectTrackDepth<=maxMarkerBits?newTracked(nt)||(nt.n|=trackOpBit,it=!wasTracked(nt)):it=!nt.has(activeEffect),it&&(nt.add(activeEffect),activeEffect.deps.push(nt))}function trigger(nt,rt,it,vt,bt,wt){const Tt=targetMap.get(nt);if(!Tt)return;let kt=[];if(rt==="clear")kt=[...Tt.values()];else if(it==="length"&&isArray$2(nt)){const Lt=toNumber$1(vt);Tt.forEach((Mt,Nt)=>{(Nt==="length"||Nt>=Lt)&&kt.push(Mt)})}else switch(it!==void 0&&kt.push(Tt.get(it)),rt){case"add":isArray$2(nt)?isIntegerKey(it)&&kt.push(Tt.get("length")):(kt.push(Tt.get(ITERATE_KEY)),isMap$2(nt)&&kt.push(Tt.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(nt)||(kt.push(Tt.get(ITERATE_KEY)),isMap$2(nt)&&kt.push(Tt.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(nt)&&kt.push(Tt.get(ITERATE_KEY));break}if(kt.length===1)kt[0]&&triggerEffects(kt[0]);else{const Lt=[];for(const Mt of kt)Mt&&Lt.push(...Mt);triggerEffects(createDep(Lt))}}function triggerEffects(nt,rt){const it=isArray$2(nt)?nt:[...nt];for(const vt of it)vt.computed&&triggerEffect(vt);for(const vt of it)vt.computed||triggerEffect(vt)}function triggerEffect(nt,rt){(nt!==activeEffect||nt.allowRecurse)&&(nt.scheduler?nt.scheduler():nt.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(nt=>nt!=="arguments"&&nt!=="caller").map(nt=>Symbol[nt]).filter(isSymbol$1)),get$3=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const nt={};return["includes","indexOf","lastIndexOf"].forEach(rt=>{nt[rt]=function(...it){const vt=toRaw(this);for(let wt=0,Tt=this.length;wt<Tt;wt++)track(vt,"get",wt+"");const bt=vt[rt](...it);return bt===-1||bt===!1?vt[rt](...it.map(toRaw)):bt}}),["push","pop","shift","unshift","splice"].forEach(rt=>{nt[rt]=function(...it){pauseTracking();const vt=toRaw(this)[rt].apply(this,it);return resetTracking(),vt}}),nt}function createGetter(nt=!1,rt=!1){return function(vt,bt,wt){if(bt==="__v_isReactive")return!nt;if(bt==="__v_isReadonly")return nt;if(bt==="__v_isShallow")return rt;if(bt==="__v_raw"&&wt===(nt?rt?shallowReadonlyMap:readonlyMap:rt?shallowReactiveMap:reactiveMap).get(vt))return vt;const Tt=isArray$2(vt);if(!nt&&Tt&&hasOwn(arrayInstrumentations,bt))return Reflect.get(arrayInstrumentations,bt,wt);const kt=Reflect.get(vt,bt,wt);return(isSymbol$1(bt)?builtInSymbols.has(bt):isNonTrackableKeys(bt))||(nt||track(vt,"get",bt),rt)?kt:isRef(kt)?Tt&&isIntegerKey(bt)?kt:kt.value:isObject$3(kt)?nt?readonly(kt):reactive(kt):kt}}const set$4=createSetter(),shallowSet=createSetter(!0);function createSetter(nt=!1){return function(it,vt,bt,wt){let Tt=it[vt];if(isReadonly(Tt)&&isRef(Tt)&&!isRef(bt))return!1;if(!nt&&(!isShallow(bt)&&!isReadonly(bt)&&(Tt=toRaw(Tt),bt=toRaw(bt)),!isArray$2(it)&&isRef(Tt)&&!isRef(bt)))return Tt.value=bt,!0;const kt=isArray$2(it)&&isIntegerKey(vt)?Number(vt)<it.length:hasOwn(it,vt),Lt=Reflect.set(it,vt,bt,wt);return it===toRaw(wt)&&(kt?hasChanged(bt,Tt)&&trigger(it,"set",vt,bt):trigger(it,"add",vt,bt)),Lt}}function deleteProperty(nt,rt){const it=hasOwn(nt,rt);nt[rt];const vt=Reflect.deleteProperty(nt,rt);return vt&&it&&trigger(nt,"delete",rt,void 0),vt}function has$1(nt,rt){const it=Reflect.has(nt,rt);return(!isSymbol$1(rt)||!builtInSymbols.has(rt))&&track(nt,"has",rt),it}function ownKeys(nt){return track(nt,"iterate",isArray$2(nt)?"length":ITERATE_KEY),Reflect.ownKeys(nt)}const mutableHandlers={get:get$3,set:set$4,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(nt,rt){return!0},deleteProperty(nt,rt){return!0}},shallowReactiveHandlers=extend$3({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=nt=>nt,getProto=nt=>Reflect.getPrototypeOf(nt);function get$1$1(nt,rt,it=!1,vt=!1){nt=nt.__v_raw;const bt=toRaw(nt),wt=toRaw(rt);it||(rt!==wt&&track(bt,"get",rt),track(bt,"get",wt));const{has:Tt}=getProto(bt),kt=vt?toShallow:it?toReadonly:toReactive;if(Tt.call(bt,rt))return kt(nt.get(rt));if(Tt.call(bt,wt))return kt(nt.get(wt));nt!==bt&&nt.get(rt)}function has$1$1(nt,rt=!1){const it=this.__v_raw,vt=toRaw(it),bt=toRaw(nt);return rt||(nt!==bt&&track(vt,"has",nt),track(vt,"has",bt)),nt===bt?it.has(nt):it.has(nt)||it.has(bt)}function size(nt,rt=!1){return nt=nt.__v_raw,!rt&&track(toRaw(nt),"iterate",ITERATE_KEY),Reflect.get(nt,"size",nt)}function add(nt){nt=toRaw(nt);const rt=toRaw(this);return getProto(rt).has.call(rt,nt)||(rt.add(nt),trigger(rt,"add",nt,nt)),this}function set$1$1(nt,rt){rt=toRaw(rt);const it=toRaw(this),{has:vt,get:bt}=getProto(it);let wt=vt.call(it,nt);wt||(nt=toRaw(nt),wt=vt.call(it,nt));const Tt=bt.call(it,nt);return it.set(nt,rt),wt?hasChanged(rt,Tt)&&trigger(it,"set",nt,rt):trigger(it,"add",nt,rt),this}function deleteEntry(nt){const rt=toRaw(this),{has:it,get:vt}=getProto(rt);let bt=it.call(rt,nt);bt||(nt=toRaw(nt),bt=it.call(rt,nt)),vt&&vt.call(rt,nt);const wt=rt.delete(nt);return bt&&trigger(rt,"delete",nt,void 0),wt}function clear$h(){const nt=toRaw(this),rt=nt.size!==0,it=nt.clear();return rt&&trigger(nt,"clear",void 0,void 0),it}function createForEach(nt,rt){return function(vt,bt){const wt=this,Tt=wt.__v_raw,kt=toRaw(Tt),Lt=rt?toShallow:nt?toReadonly:toReactive;return!nt&&track(kt,"iterate",ITERATE_KEY),Tt.forEach((Mt,Nt)=>vt.call(bt,Lt(Mt),Lt(Nt),wt))}}function createIterableMethod(nt,rt,it){return function(...vt){const bt=this.__v_raw,wt=toRaw(bt),Tt=isMap$2(wt),kt=nt==="entries"||nt===Symbol.iterator&&Tt,Lt=nt==="keys"&&Tt,Mt=bt[nt](...vt),Nt=it?toShallow:rt?toReadonly:toReactive;return!rt&&track(wt,"iterate",Lt?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:zt,done:Ht}=Mt.next();return Ht?{value:zt,done:Ht}:{value:kt?[Nt(zt[0]),Nt(zt[1])]:Nt(zt),done:Ht}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(nt){return function(...rt){return nt==="delete"?!1:this}}function createInstrumentations(){const nt={get(wt){return get$1$1(this,wt)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear:clear$h,forEach:createForEach(!1,!1)},rt={get(wt){return get$1$1(this,wt,!1,!0)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear:clear$h,forEach:createForEach(!1,!0)},it={get(wt){return get$1$1(this,wt,!0)},get size(){return size(this,!0)},has(wt){return has$1$1.call(this,wt,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},vt={get(wt){return get$1$1(this,wt,!0,!0)},get size(){return size(this,!0)},has(wt){return has$1$1.call(this,wt,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(wt=>{nt[wt]=createIterableMethod(wt,!1,!1),it[wt]=createIterableMethod(wt,!0,!1),rt[wt]=createIterableMethod(wt,!1,!0),vt[wt]=createIterableMethod(wt,!0,!0)}),[nt,it,rt,vt]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(nt,rt){const it=rt?nt?shallowReadonlyInstrumentations:shallowInstrumentations:nt?readonlyInstrumentations:mutableInstrumentations;return(vt,bt,wt)=>bt==="__v_isReactive"?!nt:bt==="__v_isReadonly"?nt:bt==="__v_raw"?vt:Reflect.get(hasOwn(it,bt)&&bt in vt?it:vt,bt,wt)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(nt){switch(nt){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(nt){return nt.__v_skip||!Object.isExtensible(nt)?0:targetTypeMap(toRawType(nt))}function reactive(nt){return isReadonly(nt)?nt:createReactiveObject(nt,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(nt){return createReactiveObject(nt,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(nt){return createReactiveObject(nt,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(nt,rt,it,vt,bt){if(!isObject$3(nt)||nt.__v_raw&&!(rt&&nt.__v_isReactive))return nt;const wt=bt.get(nt);if(wt)return wt;const Tt=getTargetType(nt);if(Tt===0)return nt;const kt=new Proxy(nt,Tt===2?vt:it);return bt.set(nt,kt),kt}function isReactive(nt){return isReadonly(nt)?isReactive(nt.__v_raw):!!(nt&&nt.__v_isReactive)}function isReadonly(nt){return!!(nt&&nt.__v_isReadonly)}function isShallow(nt){return!!(nt&&nt.__v_isShallow)}function isProxy(nt){return isReactive(nt)||isReadonly(nt)}function toRaw(nt){const rt=nt&&nt.__v_raw;return rt?toRaw(rt):nt}function markRaw(nt){return def(nt,"__v_skip",!0),nt}const toReactive=nt=>isObject$3(nt)?reactive(nt):nt,toReadonly=nt=>isObject$3(nt)?readonly(nt):nt;function trackRefValue(nt){shouldTrack&&activeEffect&&(nt=toRaw(nt),trackEffects(nt.dep||(nt.dep=createDep())))}function triggerRefValue(nt,rt){nt=toRaw(nt),nt.dep&&triggerEffects(nt.dep)}function isRef(nt){return!!(nt&&nt.__v_isRef===!0)}function ref(nt){return createRef(nt,!1)}function createRef(nt,rt){return isRef(nt)?nt:new RefImpl(nt,rt)}class RefImpl{constructor(rt,it){this.__v_isShallow=it,this.dep=void 0,this.__v_isRef=!0,this._rawValue=it?rt:toRaw(rt),this._value=it?rt:toReactive(rt)}get value(){return trackRefValue(this),this._value}set value(rt){const it=this.__v_isShallow||isShallow(rt)||isReadonly(rt);rt=it?rt:toRaw(rt),hasChanged(rt,this._rawValue)&&(this._rawValue=rt,this._value=it?rt:toReactive(rt),triggerRefValue(this))}}function unref(nt){return isRef(nt)?nt.value:nt}const shallowUnwrapHandlers={get:(nt,rt,it)=>unref(Reflect.get(nt,rt,it)),set:(nt,rt,it,vt)=>{const bt=nt[rt];return isRef(bt)&&!isRef(it)?(bt.value=it,!0):Reflect.set(nt,rt,it,vt)}};function proxyRefs(nt){return isReactive(nt)?nt:new Proxy(nt,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(rt,it,vt,bt){this._setter=it,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(rt,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!bt,this.__v_isReadonly=vt}get value(){const rt=toRaw(this);return trackRefValue(rt),(rt._dirty||!rt._cacheable)&&(rt._dirty=!1,rt._value=rt.effect.run()),rt._value}set value(rt){this._setter(rt)}}_a$1="__v_isReadonly";function computed$1(nt,rt,it=!1){let vt,bt;const wt=isFunction$1(nt);return wt?(vt=nt,bt=NOOP):(vt=nt.get,bt=nt.set),new ComputedRefImpl(vt,bt,wt||!bt,it)}function warn(nt,...rt){}function callWithErrorHandling(nt,rt,it,vt){let bt;try{bt=vt?nt(...vt):nt()}catch(wt){handleError$1(wt,rt,it)}return bt}function callWithAsyncErrorHandling(nt,rt,it,vt){if(isFunction$1(nt)){const wt=callWithErrorHandling(nt,rt,it,vt);return wt&&isPromise(wt)&&wt.catch(Tt=>{handleError$1(Tt,rt,it)}),wt}const bt=[];for(let wt=0;wt<nt.length;wt++)bt.push(callWithAsyncErrorHandling(nt[wt],rt,it,vt));return bt}function handleError$1(nt,rt,it,vt=!0){const bt=rt?rt.vnode:null;if(rt){let wt=rt.parent;const Tt=rt.proxy,kt=it;for(;wt;){const Mt=wt.ec;if(Mt){for(let Nt=0;Nt<Mt.length;Nt++)if(Mt[Nt](nt,Tt,kt)===!1)return}wt=wt.parent}const Lt=rt.appContext.config.errorHandler;if(Lt){callWithErrorHandling(Lt,null,10,[nt,Tt,kt]);return}}logError(nt,it,bt,vt)}function logError(nt,rt,it,vt=!0){console.error(nt)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(nt){const rt=currentFlushPromise||resolvedPromise;return nt?rt.then(this?nt.bind(this):nt):rt}function findInsertionIndex(nt){let rt=flushIndex+1,it=queue.length;for(;rt<it;){const vt=rt+it>>>1;getId$1(queue[vt])<nt?rt=vt+1:it=vt}return rt}function queueJob(nt){(!queue.length||!queue.includes(nt,isFlushing&&nt.allowRecurse?flushIndex+1:flushIndex))&&(nt.id==null?queue.push(nt):queue.splice(findInsertionIndex(nt.id),0,nt),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(nt){const rt=queue.indexOf(nt);rt>flushIndex&&queue.splice(rt,1)}function queuePostFlushCb(nt){isArray$2(nt)?pendingPostFlushCbs.push(...nt):(!activePostFlushCbs||!activePostFlushCbs.includes(nt,nt.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(nt),queueFlush()}function flushPreFlushCbs(nt,rt=isFlushing?flushIndex+1:0){for(;rt<queue.length;rt++){const it=queue[rt];it&&it.pre&&(queue.splice(rt,1),rt--,it())}}function flushPostFlushCbs(nt){if(pendingPostFlushCbs.length){const rt=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...rt);return}for(activePostFlushCbs=rt,activePostFlushCbs.sort((it,vt)=>getId$1(it)-getId$1(vt)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId$1=nt=>nt.id==null?1/0:nt.id,comparator=(nt,rt)=>{const it=getId$1(nt)-getId$1(rt);if(it===0){if(nt.pre&&!rt.pre)return-1;if(rt.pre&&!nt.pre)return 1}return it};function flushJobs(nt){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const rt=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const it=queue[flushIndex];it&&it.active!==!1&&callWithErrorHandling(it,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(nt,rt,...it){if(nt.isUnmounted)return;const vt=nt.vnode.props||EMPTY_OBJ;let bt=it;const wt=rt.startsWith("update:"),Tt=wt&&rt.slice(7);if(Tt&&Tt in vt){const Nt=`${Tt==="modelValue"?"model":Tt}Modifiers`,{number:zt,trim:Ht}=vt[Nt]||EMPTY_OBJ;Ht&&(bt=it.map(Wt=>isString(Wt)?Wt.trim():Wt)),zt&&(bt=it.map(toNumber$1))}let kt,Lt=vt[kt=toHandlerKey(rt)]||vt[kt=toHandlerKey(camelize(rt))];!Lt&&wt&&(Lt=vt[kt=toHandlerKey(hyphenate(rt))]),Lt&&callWithAsyncErrorHandling(Lt,nt,6,bt);const Mt=vt[kt+"Once"];if(Mt){if(!nt.emitted)nt.emitted={};else if(nt.emitted[kt])return;nt.emitted[kt]=!0,callWithAsyncErrorHandling(Mt,nt,6,bt)}}function normalizeEmitsOptions(nt,rt,it=!1){const vt=rt.emitsCache,bt=vt.get(nt);if(bt!==void 0)return bt;const wt=nt.emits;let Tt={},kt=!1;if(!isFunction$1(nt)){const Lt=Mt=>{const Nt=normalizeEmitsOptions(Mt,rt,!0);Nt&&(kt=!0,extend$3(Tt,Nt))};!it&&rt.mixins.length&&rt.mixins.forEach(Lt),nt.extends&&Lt(nt.extends),nt.mixins&&nt.mixins.forEach(Lt)}return!wt&&!kt?(isObject$3(nt)&&vt.set(nt,null),null):(isArray$2(wt)?wt.forEach(Lt=>Tt[Lt]=null):extend$3(Tt,wt),isObject$3(nt)&&vt.set(nt,Tt),Tt)}function isEmitListener(nt,rt){return!nt||!isOn(rt)?!1:(rt=rt.slice(2).replace(/Once$/,""),hasOwn(nt,rt[0].toLowerCase()+rt.slice(1))||hasOwn(nt,hyphenate(rt))||hasOwn(nt,rt))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(nt){const rt=currentRenderingInstance;return currentRenderingInstance=nt,currentScopeId=nt&&nt.type.__scopeId||null,rt}function pushScopeId(nt){currentScopeId=nt}function popScopeId(){currentScopeId=null}function withCtx(nt,rt=currentRenderingInstance,it){if(!rt||nt._n)return nt;const vt=(...bt)=>{vt._d&&setBlockTracking(-1);const wt=setCurrentRenderingInstance(rt);let Tt;try{Tt=nt(...bt)}finally{setCurrentRenderingInstance(wt),vt._d&&setBlockTracking(1)}return Tt};return vt._n=!0,vt._c=!0,vt._d=!0,vt}function markAttrsAccessed(){}function renderComponentRoot(nt){const{type:rt,vnode:it,proxy:vt,withProxy:bt,props:wt,propsOptions:[Tt],slots:kt,attrs:Lt,emit:Mt,render:Nt,renderCache:zt,data:Ht,setupState:Wt,ctx:Zt,inheritAttrs:tn}=nt;let Yt,nn;const rn=setCurrentRenderingInstance(nt);try{if(it.shapeFlag&4){const sn=bt||vt;Yt=normalizeVNode(Nt.call(sn,sn,zt,wt,Wt,Ht,Zt)),nn=Lt}else{const sn=rt;Yt=normalizeVNode(sn.length>1?sn(wt,{attrs:Lt,slots:kt,emit:Mt}):sn(wt,null)),nn=rt.props?Lt:getFunctionalFallthrough(Lt)}}catch(sn){blockStack.length=0,handleError$1(sn,nt,1),Yt=createVNode(Comment)}let ln=Yt;if(nn&&tn!==!1){const sn=Object.keys(nn),{shapeFlag:mn}=ln;sn.length&&mn&7&&(Tt&&sn.some(isModelListener)&&(nn=filterModelListeners(nn,Tt)),ln=cloneVNode(ln,nn))}return it.dirs&&(ln=cloneVNode(ln),ln.dirs=ln.dirs?ln.dirs.concat(it.dirs):it.dirs),it.transition&&(ln.transition=it.transition),Yt=ln,setCurrentRenderingInstance(rn),Yt}const getFunctionalFallthrough=nt=>{let rt;for(const it in nt)(it==="class"||it==="style"||isOn(it))&&((rt||(rt={}))[it]=nt[it]);return rt},filterModelListeners=(nt,rt)=>{const it={};for(const vt in nt)(!isModelListener(vt)||!(vt.slice(9)in rt))&&(it[vt]=nt[vt]);return it};function shouldUpdateComponent(nt,rt,it){const{props:vt,children:bt,component:wt}=nt,{props:Tt,children:kt,patchFlag:Lt}=rt,Mt=wt.emitsOptions;if(rt.dirs||rt.transition)return!0;if(it&&Lt>=0){if(Lt&1024)return!0;if(Lt&16)return vt?hasPropsChanged(vt,Tt,Mt):!!Tt;if(Lt&8){const Nt=rt.dynamicProps;for(let zt=0;zt<Nt.length;zt++){const Ht=Nt[zt];if(Tt[Ht]!==vt[Ht]&&!isEmitListener(Mt,Ht))return!0}}}else return(bt||kt)&&(!kt||!kt.$stable)?!0:vt===Tt?!1:vt?Tt?hasPropsChanged(vt,Tt,Mt):!0:!!Tt;return!1}function hasPropsChanged(nt,rt,it){const vt=Object.keys(rt);if(vt.length!==Object.keys(nt).length)return!0;for(let bt=0;bt<vt.length;bt++){const wt=vt[bt];if(rt[wt]!==nt[wt]&&!isEmitListener(it,wt))return!0}return!1}function updateHOCHostEl({vnode:nt,parent:rt},it){for(;rt&&rt.subTree===nt;)(nt=rt.vnode).el=it,rt=rt.parent}const isSuspense=nt=>nt.__isSuspense;function queueEffectWithSuspense(nt,rt){rt&&rt.pendingBranch?isArray$2(nt)?rt.effects.push(...nt):rt.effects.push(nt):queuePostFlushCb(nt)}function provide(nt,rt){if(currentInstance){let it=currentInstance.provides;const vt=currentInstance.parent&&currentInstance.parent.provides;vt===it&&(it=currentInstance.provides=Object.create(vt)),it[nt]=rt}}function inject(nt,rt,it=!1){const vt=currentInstance||currentRenderingInstance;if(vt){const bt=vt.parent==null?vt.vnode.appContext&&vt.vnode.appContext.provides:vt.parent.provides;if(bt&&nt in bt)return bt[nt];if(arguments.length>1)return it&&isFunction$1(rt)?rt.call(vt.proxy):rt}}const INITIAL_WATCHER_VALUE={};function watch$1(nt,rt,it){return doWatch(nt,rt,it)}function doWatch(nt,rt,{immediate:it,deep:vt,flush:bt,onTrack:wt,onTrigger:Tt}=EMPTY_OBJ){const kt=currentInstance;let Lt,Mt=!1,Nt=!1;if(isRef(nt)?(Lt=()=>nt.value,Mt=isShallow(nt)):isReactive(nt)?(Lt=()=>nt,vt=!0):isArray$2(nt)?(Nt=!0,Mt=nt.some(ln=>isReactive(ln)||isShallow(ln)),Lt=()=>nt.map(ln=>{if(isRef(ln))return ln.value;if(isReactive(ln))return traverse(ln);if(isFunction$1(ln))return callWithErrorHandling(ln,kt,2)})):isFunction$1(nt)?rt?Lt=()=>callWithErrorHandling(nt,kt,2):Lt=()=>{if(!(kt&&kt.isUnmounted))return zt&&zt(),callWithAsyncErrorHandling(nt,kt,3,[Ht])}:Lt=NOOP,rt&&vt){const ln=Lt;Lt=()=>traverse(ln())}let zt,Ht=ln=>{zt=nn.onStop=()=>{callWithErrorHandling(ln,kt,4)}},Wt;if(isInSSRComponentSetup)if(Ht=NOOP,rt?it&&callWithAsyncErrorHandling(rt,kt,3,[Lt(),Nt?[]:void 0,Ht]):Lt(),bt==="sync"){const ln=useSSRContext();Wt=ln.__watcherHandles||(ln.__watcherHandles=[])}else return NOOP;let Zt=Nt?new Array(nt.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const tn=()=>{if(!!nn.active)if(rt){const ln=nn.run();(vt||Mt||(Nt?ln.some((sn,mn)=>hasChanged(sn,Zt[mn])):hasChanged(ln,Zt)))&&(zt&&zt(),callWithAsyncErrorHandling(rt,kt,3,[ln,Zt===INITIAL_WATCHER_VALUE?void 0:Nt&&Zt[0]===INITIAL_WATCHER_VALUE?[]:Zt,Ht]),Zt=ln)}else nn.run()};tn.allowRecurse=!!rt;let Yt;bt==="sync"?Yt=tn:bt==="post"?Yt=()=>queuePostRenderEffect(tn,kt&&kt.suspense):(tn.pre=!0,kt&&(tn.id=kt.uid),Yt=()=>queueJob(tn));const nn=new ReactiveEffect(Lt,Yt);rt?it?tn():Zt=nn.run():bt==="post"?queuePostRenderEffect(nn.run.bind(nn),kt&&kt.suspense):nn.run();const rn=()=>{nn.stop(),kt&&kt.scope&&remove$1(kt.scope.effects,nn)};return Wt&&Wt.push(rn),rn}function instanceWatch(nt,rt,it){const vt=this.proxy,bt=isString(nt)?nt.includes(".")?createPathGetter(vt,nt):()=>vt[nt]:nt.bind(vt,vt);let wt;isFunction$1(rt)?wt=rt:(wt=rt.handler,it=rt);const Tt=currentInstance;setCurrentInstance(this);const kt=doWatch(bt,wt.bind(vt),it);return Tt?setCurrentInstance(Tt):unsetCurrentInstance(),kt}function createPathGetter(nt,rt){const it=rt.split(".");return()=>{let vt=nt;for(let bt=0;bt<it.length&&vt;bt++)vt=vt[it[bt]];return vt}}function traverse(nt,rt){if(!isObject$3(nt)||nt.__v_skip||(rt=rt||new Set,rt.has(nt)))return nt;if(rt.add(nt),isRef(nt))traverse(nt.value,rt);else if(isArray$2(nt))for(let it=0;it<nt.length;it++)traverse(nt[it],rt);else if(isSet$2(nt)||isMap$2(nt))nt.forEach(it=>{traverse(it,rt)});else if(isPlainObject$1(nt))for(const it in nt)traverse(nt[it],rt);return nt}function useTransitionState(){const nt={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{nt.isMounted=!0}),onBeforeUnmount(()=>{nt.isUnmounting=!0}),nt}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(nt,{slots:rt}){const it=getCurrentInstance(),vt=useTransitionState();let bt;return()=>{const wt=rt.default&&getTransitionRawChildren(rt.default(),!0);if(!wt||!wt.length)return;let Tt=wt[0];if(wt.length>1){for(const tn of wt)if(tn.type!==Comment){Tt=tn;break}}const kt=toRaw(nt),{mode:Lt}=kt;if(vt.isLeaving)return emptyPlaceholder(Tt);const Mt=getKeepAliveChild(Tt);if(!Mt)return emptyPlaceholder(Tt);const Nt=resolveTransitionHooks(Mt,kt,vt,it);setTransitionHooks(Mt,Nt);const zt=it.subTree,Ht=zt&&getKeepAliveChild(zt);let Wt=!1;const{getTransitionKey:Zt}=Mt.type;if(Zt){const tn=Zt();bt===void 0?bt=tn:tn!==bt&&(bt=tn,Wt=!0)}if(Ht&&Ht.type!==Comment&&(!isSameVNodeType(Mt,Ht)||Wt)){const tn=resolveTransitionHooks(Ht,kt,vt,it);if(setTransitionHooks(Ht,tn),Lt==="out-in")return vt.isLeaving=!0,tn.afterLeave=()=>{vt.isLeaving=!1,it.update.active!==!1&&it.update()},emptyPlaceholder(Tt);Lt==="in-out"&&Mt.type!==Comment&&(tn.delayLeave=(Yt,nn,rn)=>{const ln=getLeavingNodesForType(vt,Ht);ln[String(Ht.key)]=Ht,Yt._leaveCb=()=>{nn(),Yt._leaveCb=void 0,delete Nt.delayedLeave},Nt.delayedLeave=rn})}return Tt}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(nt,rt){const{leavingVNodes:it}=nt;let vt=it.get(rt.type);return vt||(vt=Object.create(null),it.set(rt.type,vt)),vt}function resolveTransitionHooks(nt,rt,it,vt){const{appear:bt,mode:wt,persisted:Tt=!1,onBeforeEnter:kt,onEnter:Lt,onAfterEnter:Mt,onEnterCancelled:Nt,onBeforeLeave:zt,onLeave:Ht,onAfterLeave:Wt,onLeaveCancelled:Zt,onBeforeAppear:tn,onAppear:Yt,onAfterAppear:nn,onAppearCancelled:rn}=rt,ln=String(nt.key),sn=getLeavingNodesForType(it,nt),mn=(An,Pn)=>{An&&callWithAsyncErrorHandling(An,vt,9,Pn)},wn=(An,Pn)=>{const On=Pn[1];mn(An,Pn),isArray$2(An)?An.every(kn=>kn.length<=1)&&On():An.length<=1&&On()},Cn={mode:wt,persisted:Tt,beforeEnter(An){let Pn=kt;if(!it.isMounted)if(bt)Pn=tn||kt;else return;An._leaveCb&&An._leaveCb(!0);const On=sn[ln];On&&isSameVNodeType(nt,On)&&On.el._leaveCb&&On.el._leaveCb(),mn(Pn,[An])},enter(An){let Pn=Lt,On=Mt,kn=Nt;if(!it.isMounted)if(bt)Pn=Yt||Lt,On=nn||Mt,kn=rn||Nt;else return;let gn=!1;const Vn=An._enterCb=pn=>{gn||(gn=!0,pn?mn(kn,[An]):mn(On,[An]),Cn.delayedLeave&&Cn.delayedLeave(),An._enterCb=void 0)};Pn?wn(Pn,[An,Vn]):Vn()},leave(An,Pn){const On=String(nt.key);if(An._enterCb&&An._enterCb(!0),it.isUnmounting)return Pn();mn(zt,[An]);let kn=!1;const gn=An._leaveCb=Vn=>{kn||(kn=!0,Pn(),Vn?mn(Zt,[An]):mn(Wt,[An]),An._leaveCb=void 0,sn[On]===nt&&delete sn[On])};sn[On]=nt,Ht?wn(Ht,[An,gn]):gn()},clone(An){return resolveTransitionHooks(An,rt,it,vt)}};return Cn}function emptyPlaceholder(nt){if(isKeepAlive(nt))return nt=cloneVNode(nt),nt.children=null,nt}function getKeepAliveChild(nt){return isKeepAlive(nt)?nt.children?nt.children[0]:void 0:nt}function setTransitionHooks(nt,rt){nt.shapeFlag&6&&nt.component?setTransitionHooks(nt.component.subTree,rt):nt.shapeFlag&128?(nt.ssContent.transition=rt.clone(nt.ssContent),nt.ssFallback.transition=rt.clone(nt.ssFallback)):nt.transition=rt}function getTransitionRawChildren(nt,rt=!1,it){let vt=[],bt=0;for(let wt=0;wt<nt.length;wt++){let Tt=nt[wt];const kt=it==null?Tt.key:String(it)+String(Tt.key!=null?Tt.key:wt);Tt.type===Fragment?(Tt.patchFlag&128&&bt++,vt=vt.concat(getTransitionRawChildren(Tt.children,rt,kt))):(rt||Tt.type!==Comment)&&vt.push(kt!=null?cloneVNode(Tt,{key:kt}):Tt)}if(bt>1)for(let wt=0;wt<vt.length;wt++)vt[wt].patchFlag=-2;return vt}function defineComponent(nt){return isFunction$1(nt)?{setup:nt,name:nt.name}:nt}const isAsyncWrapper=nt=>!!nt.type.__asyncLoader,isKeepAlive=nt=>nt.type.__isKeepAlive;function onActivated(nt,rt){registerKeepAliveHook(nt,"a",rt)}function onDeactivated(nt,rt){registerKeepAliveHook(nt,"da",rt)}function registerKeepAliveHook(nt,rt,it=currentInstance){const vt=nt.__wdc||(nt.__wdc=()=>{let bt=it;for(;bt;){if(bt.isDeactivated)return;bt=bt.parent}return nt()});if(injectHook(rt,vt,it),it){let bt=it.parent;for(;bt&&bt.parent;)isKeepAlive(bt.parent.vnode)&&injectToKeepAliveRoot(vt,rt,it,bt),bt=bt.parent}}function injectToKeepAliveRoot(nt,rt,it,vt){const bt=injectHook(rt,nt,vt,!0);onUnmounted(()=>{remove$1(vt[rt],bt)},it)}function injectHook(nt,rt,it=currentInstance,vt=!1){if(it){const bt=it[nt]||(it[nt]=[]),wt=rt.__weh||(rt.__weh=(...Tt)=>{if(it.isUnmounted)return;pauseTracking(),setCurrentInstance(it);const kt=callWithAsyncErrorHandling(rt,it,nt,Tt);return unsetCurrentInstance(),resetTracking(),kt});return vt?bt.unshift(wt):bt.push(wt),wt}}const createHook=nt=>(rt,it=currentInstance)=>(!isInSSRComponentSetup||nt==="sp")&&injectHook(nt,(...vt)=>rt(...vt),it),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(nt,rt=currentInstance){injectHook("ec",nt,rt)}function invokeDirectiveHook(nt,rt,it,vt){const bt=nt.dirs,wt=rt&&rt.dirs;for(let Tt=0;Tt<bt.length;Tt++){const kt=bt[Tt];wt&&(kt.oldValue=wt[Tt].value);let Lt=kt.dir[vt];Lt&&(pauseTracking(),callWithAsyncErrorHandling(Lt,it,8,[nt.el,kt,nt,rt]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol();function renderList(nt,rt,it,vt){let bt;const wt=it&&it[vt];if(isArray$2(nt)||isString(nt)){bt=new Array(nt.length);for(let Tt=0,kt=nt.length;Tt<kt;Tt++)bt[Tt]=rt(nt[Tt],Tt,void 0,wt&&wt[Tt])}else if(typeof nt=="number"){bt=new Array(nt);for(let Tt=0;Tt<nt;Tt++)bt[Tt]=rt(Tt+1,Tt,void 0,wt&&wt[Tt])}else if(isObject$3(nt))if(nt[Symbol.iterator])bt=Array.from(nt,(Tt,kt)=>rt(Tt,kt,void 0,wt&&wt[kt]));else{const Tt=Object.keys(nt);bt=new Array(Tt.length);for(let kt=0,Lt=Tt.length;kt<Lt;kt++){const Mt=Tt[kt];bt[kt]=rt(nt[Mt],Mt,kt,wt&&wt[kt])}}else bt=[];return it&&(it[vt]=bt),bt}const getPublicInstance=nt=>nt?isStatefulComponent(nt)?getExposeProxy(nt)||nt.proxy:getPublicInstance(nt.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:nt=>nt,$el:nt=>nt.vnode.el,$data:nt=>nt.data,$props:nt=>nt.props,$attrs:nt=>nt.attrs,$slots:nt=>nt.slots,$refs:nt=>nt.refs,$parent:nt=>getPublicInstance(nt.parent),$root:nt=>getPublicInstance(nt.root),$emit:nt=>nt.emit,$options:nt=>resolveMergedOptions(nt),$forceUpdate:nt=>nt.f||(nt.f=()=>queueJob(nt.update)),$nextTick:nt=>nt.n||(nt.n=nextTick.bind(nt.proxy)),$watch:nt=>instanceWatch.bind(nt)}),hasSetupBinding=(nt,rt)=>nt!==EMPTY_OBJ&&!nt.__isScriptSetup&&hasOwn(nt,rt),PublicInstanceProxyHandlers={get({_:nt},rt){const{ctx:it,setupState:vt,data:bt,props:wt,accessCache:Tt,type:kt,appContext:Lt}=nt;let Mt;if(rt[0]!=="$"){const Wt=Tt[rt];if(Wt!==void 0)switch(Wt){case 1:return vt[rt];case 2:return bt[rt];case 4:return it[rt];case 3:return wt[rt]}else{if(hasSetupBinding(vt,rt))return Tt[rt]=1,vt[rt];if(bt!==EMPTY_OBJ&&hasOwn(bt,rt))return Tt[rt]=2,bt[rt];if((Mt=nt.propsOptions[0])&&hasOwn(Mt,rt))return Tt[rt]=3,wt[rt];if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Tt[rt]=4,it[rt];shouldCacheAccess&&(Tt[rt]=0)}}const Nt=publicPropertiesMap[rt];let zt,Ht;if(Nt)return rt==="$attrs"&&track(nt,"get",rt),Nt(nt);if((zt=kt.__cssModules)&&(zt=zt[rt]))return zt;if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Tt[rt]=4,it[rt];if(Ht=Lt.config.globalProperties,hasOwn(Ht,rt))return Ht[rt]},set({_:nt},rt,it){const{data:vt,setupState:bt,ctx:wt}=nt;return hasSetupBinding(bt,rt)?(bt[rt]=it,!0):vt!==EMPTY_OBJ&&hasOwn(vt,rt)?(vt[rt]=it,!0):hasOwn(nt.props,rt)||rt[0]==="$"&&rt.slice(1)in nt?!1:(wt[rt]=it,!0)},has({_:{data:nt,setupState:rt,accessCache:it,ctx:vt,appContext:bt,propsOptions:wt}},Tt){let kt;return!!it[Tt]||nt!==EMPTY_OBJ&&hasOwn(nt,Tt)||hasSetupBinding(rt,Tt)||(kt=wt[0])&&hasOwn(kt,Tt)||hasOwn(vt,Tt)||hasOwn(publicPropertiesMap,Tt)||hasOwn(bt.config.globalProperties,Tt)},defineProperty(nt,rt,it){return it.get!=null?nt._.accessCache[rt]=0:hasOwn(it,"value")&&this.set(nt,rt,it.value,null),Reflect.defineProperty(nt,rt,it)}};let shouldCacheAccess=!0;function applyOptions(nt){const rt=resolveMergedOptions(nt),it=nt.proxy,vt=nt.ctx;shouldCacheAccess=!1,rt.beforeCreate&&callHook(rt.beforeCreate,nt,"bc");const{data:bt,computed:wt,methods:Tt,watch:kt,provide:Lt,inject:Mt,created:Nt,beforeMount:zt,mounted:Ht,beforeUpdate:Wt,updated:Zt,activated:tn,deactivated:Yt,beforeDestroy:nn,beforeUnmount:rn,destroyed:ln,unmounted:sn,render:mn,renderTracked:wn,renderTriggered:Cn,errorCaptured:An,serverPrefetch:Pn,expose:On,inheritAttrs:kn,components:gn,directives:Vn,filters:pn}=rt;if(Mt&&resolveInjections(Mt,vt,null,nt.appContext.config.unwrapInjectedRef),Tt)for(const mr in Tt){const Er=Tt[mr];isFunction$1(Er)&&(vt[mr]=Er.bind(it))}if(bt){const mr=bt.call(it,it);isObject$3(mr)&&(nt.data=reactive(mr))}if(shouldCacheAccess=!0,wt)for(const mr in wt){const Er=wt[mr],Mr=isFunction$1(Er)?Er.bind(it,it):isFunction$1(Er.get)?Er.get.bind(it,it):NOOP,rr=!isFunction$1(Er)&&isFunction$1(Er.set)?Er.set.bind(it):NOOP,vr=computed({get:Mr,set:rr});Object.defineProperty(vt,mr,{enumerable:!0,configurable:!0,get:()=>vr.value,set:cr=>vr.value=cr})}if(kt)for(const mr in kt)createWatcher(kt[mr],vt,it,mr);if(Lt){const mr=isFunction$1(Lt)?Lt.call(it):Lt;Reflect.ownKeys(mr).forEach(Er=>{provide(Er,mr[Er])})}Nt&&callHook(Nt,nt,"c");function yn(mr,Er){isArray$2(Er)?Er.forEach(Mr=>mr(Mr.bind(it))):Er&&mr(Er.bind(it))}if(yn(onBeforeMount,zt),yn(onMounted,Ht),yn(onBeforeUpdate,Wt),yn(onUpdated,Zt),yn(onActivated,tn),yn(onDeactivated,Yt),yn(onErrorCaptured,An),yn(onRenderTracked,wn),yn(onRenderTriggered,Cn),yn(onBeforeUnmount,rn),yn(onUnmounted,sn),yn(onServerPrefetch,Pn),isArray$2(On))if(On.length){const mr=nt.exposed||(nt.exposed={});On.forEach(Er=>{Object.defineProperty(mr,Er,{get:()=>it[Er],set:Mr=>it[Er]=Mr})})}else nt.exposed||(nt.exposed={});mn&&nt.render===NOOP&&(nt.render=mn),kn!=null&&(nt.inheritAttrs=kn),gn&&(nt.components=gn),Vn&&(nt.directives=Vn)}function resolveInjections(nt,rt,it=NOOP,vt=!1){isArray$2(nt)&&(nt=normalizeInject(nt));for(const bt in nt){const wt=nt[bt];let Tt;isObject$3(wt)?"default"in wt?Tt=inject(wt.from||bt,wt.default,!0):Tt=inject(wt.from||bt):Tt=inject(wt),isRef(Tt)&&vt?Object.defineProperty(rt,bt,{enumerable:!0,configurable:!0,get:()=>Tt.value,set:kt=>Tt.value=kt}):rt[bt]=Tt}}function callHook(nt,rt,it){callWithAsyncErrorHandling(isArray$2(nt)?nt.map(vt=>vt.bind(rt.proxy)):nt.bind(rt.proxy),rt,it)}function createWatcher(nt,rt,it,vt){const bt=vt.includes(".")?createPathGetter(it,vt):()=>it[vt];if(isString(nt)){const wt=rt[nt];isFunction$1(wt)&&watch$1(bt,wt)}else if(isFunction$1(nt))watch$1(bt,nt.bind(it));else if(isObject$3(nt))if(isArray$2(nt))nt.forEach(wt=>createWatcher(wt,rt,it,vt));else{const wt=isFunction$1(nt.handler)?nt.handler.bind(it):rt[nt.handler];isFunction$1(wt)&&watch$1(bt,wt,nt)}}function resolveMergedOptions(nt){const rt=nt.type,{mixins:it,extends:vt}=rt,{mixins:bt,optionsCache:wt,config:{optionMergeStrategies:Tt}}=nt.appContext,kt=wt.get(rt);let Lt;return kt?Lt=kt:!bt.length&&!it&&!vt?Lt=rt:(Lt={},bt.length&&bt.forEach(Mt=>mergeOptions(Lt,Mt,Tt,!0)),mergeOptions(Lt,rt,Tt)),isObject$3(rt)&&wt.set(rt,Lt),Lt}function mergeOptions(nt,rt,it,vt=!1){const{mixins:bt,extends:wt}=rt;wt&&mergeOptions(nt,wt,it,!0),bt&&bt.forEach(Tt=>mergeOptions(nt,Tt,it,!0));for(const Tt in rt)if(!(vt&&Tt==="expose")){const kt=internalOptionMergeStrats[Tt]||it&&it[Tt];nt[Tt]=kt?kt(nt[Tt],rt[Tt]):rt[Tt]}return nt}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(nt,rt){return rt?nt?function(){return extend$3(isFunction$1(nt)?nt.call(this,this):nt,isFunction$1(rt)?rt.call(this,this):rt)}:rt:nt}function mergeInject(nt,rt){return mergeObjectOptions(normalizeInject(nt),normalizeInject(rt))}function normalizeInject(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++)rt[nt[it]]=nt[it];return rt}return nt}function mergeAsArray(nt,rt){return nt?[...new Set([].concat(nt,rt))]:rt}function mergeObjectOptions(nt,rt){return nt?extend$3(extend$3(Object.create(null),nt),rt):rt}function mergeWatchOptions(nt,rt){if(!nt)return rt;if(!rt)return nt;const it=extend$3(Object.create(null),nt);for(const vt in rt)it[vt]=mergeAsArray(nt[vt],rt[vt]);return it}function initProps(nt,rt,it,vt=!1){const bt={},wt={};def(wt,InternalObjectKey,1),nt.propsDefaults=Object.create(null),setFullProps(nt,rt,bt,wt);for(const Tt in nt.propsOptions[0])Tt in bt||(bt[Tt]=void 0);it?nt.props=vt?bt:shallowReactive(bt):nt.type.props?nt.props=bt:nt.props=wt,nt.attrs=wt}function updateProps(nt,rt,it,vt){const{props:bt,attrs:wt,vnode:{patchFlag:Tt}}=nt,kt=toRaw(bt),[Lt]=nt.propsOptions;let Mt=!1;if((vt||Tt>0)&&!(Tt&16)){if(Tt&8){const Nt=nt.vnode.dynamicProps;for(let zt=0;zt<Nt.length;zt++){let Ht=Nt[zt];if(isEmitListener(nt.emitsOptions,Ht))continue;const Wt=rt[Ht];if(Lt)if(hasOwn(wt,Ht))Wt!==wt[Ht]&&(wt[Ht]=Wt,Mt=!0);else{const Zt=camelize(Ht);bt[Zt]=resolvePropValue(Lt,kt,Zt,Wt,nt,!1)}else Wt!==wt[Ht]&&(wt[Ht]=Wt,Mt=!0)}}}else{setFullProps(nt,rt,bt,wt)&&(Mt=!0);let Nt;for(const zt in kt)(!rt||!hasOwn(rt,zt)&&((Nt=hyphenate(zt))===zt||!hasOwn(rt,Nt)))&&(Lt?it&&(it[zt]!==void 0||it[Nt]!==void 0)&&(bt[zt]=resolvePropValue(Lt,kt,zt,void 0,nt,!0)):delete bt[zt]);if(wt!==kt)for(const zt in wt)(!rt||!hasOwn(rt,zt)&&!0)&&(delete wt[zt],Mt=!0)}Mt&&trigger(nt,"set","$attrs")}function setFullProps(nt,rt,it,vt){const[bt,wt]=nt.propsOptions;let Tt=!1,kt;if(rt)for(let Lt in rt){if(isReservedProp(Lt))continue;const Mt=rt[Lt];let Nt;bt&&hasOwn(bt,Nt=camelize(Lt))?!wt||!wt.includes(Nt)?it[Nt]=Mt:(kt||(kt={}))[Nt]=Mt:isEmitListener(nt.emitsOptions,Lt)||(!(Lt in vt)||Mt!==vt[Lt])&&(vt[Lt]=Mt,Tt=!0)}if(wt){const Lt=toRaw(it),Mt=kt||EMPTY_OBJ;for(let Nt=0;Nt<wt.length;Nt++){const zt=wt[Nt];it[zt]=resolvePropValue(bt,Lt,zt,Mt[zt],nt,!hasOwn(Mt,zt))}}return Tt}function resolvePropValue(nt,rt,it,vt,bt,wt){const Tt=nt[it];if(Tt!=null){const kt=hasOwn(Tt,"default");if(kt&&vt===void 0){const Lt=Tt.default;if(Tt.type!==Function&&isFunction$1(Lt)){const{propsDefaults:Mt}=bt;it in Mt?vt=Mt[it]:(setCurrentInstance(bt),vt=Mt[it]=Lt.call(null,rt),unsetCurrentInstance())}else vt=Lt}Tt[0]&&(wt&&!kt?vt=!1:Tt[1]&&(vt===""||vt===hyphenate(it))&&(vt=!0))}return vt}function normalizePropsOptions(nt,rt,it=!1){const vt=rt.propsCache,bt=vt.get(nt);if(bt)return bt;const wt=nt.props,Tt={},kt=[];let Lt=!1;if(!isFunction$1(nt)){const Nt=zt=>{Lt=!0;const[Ht,Wt]=normalizePropsOptions(zt,rt,!0);extend$3(Tt,Ht),Wt&&kt.push(...Wt)};!it&&rt.mixins.length&&rt.mixins.forEach(Nt),nt.extends&&Nt(nt.extends),nt.mixins&&nt.mixins.forEach(Nt)}if(!wt&&!Lt)return isObject$3(nt)&&vt.set(nt,EMPTY_ARR),EMPTY_ARR;if(isArray$2(wt))for(let Nt=0;Nt<wt.length;Nt++){const zt=camelize(wt[Nt]);validatePropName(zt)&&(Tt[zt]=EMPTY_OBJ)}else if(wt)for(const Nt in wt){const zt=camelize(Nt);if(validatePropName(zt)){const Ht=wt[Nt],Wt=Tt[zt]=isArray$2(Ht)||isFunction$1(Ht)?{type:Ht}:Object.assign({},Ht);if(Wt){const Zt=getTypeIndex(Boolean,Wt.type),tn=getTypeIndex(String,Wt.type);Wt[0]=Zt>-1,Wt[1]=tn<0||Zt<tn,(Zt>-1||hasOwn(Wt,"default"))&&kt.push(zt)}}}const Mt=[Tt,kt];return isObject$3(nt)&&vt.set(nt,Mt),Mt}function validatePropName(nt){return nt[0]!=="$"}function getType(nt){const rt=nt&&nt.toString().match(/^\s*function (\w+)/);return rt?rt[1]:nt===null?"null":""}function isSameType(nt,rt){return getType(nt)===getType(rt)}function getTypeIndex(nt,rt){return isArray$2(rt)?rt.findIndex(it=>isSameType(it,nt)):isFunction$1(rt)&&isSameType(rt,nt)?0:-1}const isInternalKey=nt=>nt[0]==="_"||nt==="$stable",normalizeSlotValue=nt=>isArray$2(nt)?nt.map(normalizeVNode):[normalizeVNode(nt)],normalizeSlot=(nt,rt,it)=>{if(rt._n)return rt;const vt=withCtx((...bt)=>normalizeSlotValue(rt(...bt)),it);return vt._c=!1,vt},normalizeObjectSlots=(nt,rt,it)=>{const vt=nt._ctx;for(const bt in nt){if(isInternalKey(bt))continue;const wt=nt[bt];if(isFunction$1(wt))rt[bt]=normalizeSlot(bt,wt,vt);else if(wt!=null){const Tt=normalizeSlotValue(wt);rt[bt]=()=>Tt}}},normalizeVNodeSlots=(nt,rt)=>{const it=normalizeSlotValue(rt);nt.slots.default=()=>it},initSlots=(nt,rt)=>{if(nt.vnode.shapeFlag&32){const it=rt._;it?(nt.slots=toRaw(rt),def(rt,"_",it)):normalizeObjectSlots(rt,nt.slots={})}else nt.slots={},rt&&normalizeVNodeSlots(nt,rt);def(nt.slots,InternalObjectKey,1)},updateSlots=(nt,rt,it)=>{const{vnode:vt,slots:bt}=nt;let wt=!0,Tt=EMPTY_OBJ;if(vt.shapeFlag&32){const kt=rt._;kt?it&&kt===1?wt=!1:(extend$3(bt,rt),!it&&kt===1&&delete bt._):(wt=!rt.$stable,normalizeObjectSlots(rt,bt)),Tt=rt}else rt&&(normalizeVNodeSlots(nt,rt),Tt={default:1});if(wt)for(const kt in bt)!isInternalKey(kt)&&!(kt in Tt)&&delete bt[kt]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(nt,rt){return function(vt,bt=null){isFunction$1(vt)||(vt=Object.assign({},vt)),bt!=null&&!isObject$3(bt)&&(bt=null);const wt=createAppContext(),Tt=new Set;let kt=!1;const Lt=wt.app={_uid:uid++,_component:vt,_props:bt,_container:null,_context:wt,_instance:null,version:version$2,get config(){return wt.config},set config(Mt){},use(Mt,...Nt){return Tt.has(Mt)||(Mt&&isFunction$1(Mt.install)?(Tt.add(Mt),Mt.install(Lt,...Nt)):isFunction$1(Mt)&&(Tt.add(Mt),Mt(Lt,...Nt))),Lt},mixin(Mt){return wt.mixins.includes(Mt)||wt.mixins.push(Mt),Lt},component(Mt,Nt){return Nt?(wt.components[Mt]=Nt,Lt):wt.components[Mt]},directive(Mt,Nt){return Nt?(wt.directives[Mt]=Nt,Lt):wt.directives[Mt]},mount(Mt,Nt,zt){if(!kt){const Ht=createVNode(vt,bt);return Ht.appContext=wt,Nt&&rt?rt(Ht,Mt):nt(Ht,Mt,zt),kt=!0,Lt._container=Mt,Mt.__vue_app__=Lt,getExposeProxy(Ht.component)||Ht.component.proxy}},unmount(){kt&&(nt(null,Lt._container),delete Lt._container.__vue_app__)},provide(Mt,Nt){return wt.provides[Mt]=Nt,Lt}};return Lt}}function setRef(nt,rt,it,vt,bt=!1){if(isArray$2(nt)){nt.forEach((Ht,Wt)=>setRef(Ht,rt&&(isArray$2(rt)?rt[Wt]:rt),it,vt,bt));return}if(isAsyncWrapper(vt)&&!bt)return;const wt=vt.shapeFlag&4?getExposeProxy(vt.component)||vt.component.proxy:vt.el,Tt=bt?null:wt,{i:kt,r:Lt}=nt,Mt=rt&&rt.r,Nt=kt.refs===EMPTY_OBJ?kt.refs={}:kt.refs,zt=kt.setupState;if(Mt!=null&&Mt!==Lt&&(isString(Mt)?(Nt[Mt]=null,hasOwn(zt,Mt)&&(zt[Mt]=null)):isRef(Mt)&&(Mt.value=null)),isFunction$1(Lt))callWithErrorHandling(Lt,kt,12,[Tt,Nt]);else{const Ht=isString(Lt),Wt=isRef(Lt);if(Ht||Wt){const Zt=()=>{if(nt.f){const tn=Ht?hasOwn(zt,Lt)?zt[Lt]:Nt[Lt]:Lt.value;bt?isArray$2(tn)&&remove$1(tn,wt):isArray$2(tn)?tn.includes(wt)||tn.push(wt):Ht?(Nt[Lt]=[wt],hasOwn(zt,Lt)&&(zt[Lt]=Nt[Lt])):(Lt.value=[wt],nt.k&&(Nt[nt.k]=Lt.value))}else Ht?(Nt[Lt]=Tt,hasOwn(zt,Lt)&&(zt[Lt]=Tt)):Wt&&(Lt.value=Tt,nt.k&&(Nt[nt.k]=Tt))};Tt?(Zt.id=-1,queuePostRenderEffect(Zt,it)):Zt()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(nt){return baseCreateRenderer(nt)}function baseCreateRenderer(nt,rt){const it=getGlobalThis();it.__VUE__=!0;const{insert:vt,remove:bt,patchProp:wt,createElement:Tt,createText:kt,createComment:Lt,setText:Mt,setElementText:Nt,parentNode:zt,nextSibling:Ht,setScopeId:Wt=NOOP,insertStaticContent:Zt}=nt,tn=(Ln,en,dn,un=null,Nn=null,In=null,lr=!1,$n=null,Qn=!!en.dynamicChildren)=>{if(Ln===en)return;Ln&&!isSameVNodeType(Ln,en)&&(un=ii(Ln),cr(Ln,Nn,In,!0),Ln=null),en.patchFlag===-2&&(Qn=!1,en.dynamicChildren=null);const{type:Wn,ref:or,shapeFlag:dr}=en;switch(Wn){case Text:Yt(Ln,en,dn,un);break;case Comment:nn(Ln,en,dn,un);break;case Static:Ln==null&&rn(en,dn,un,lr);break;case Fragment:gn(Ln,en,dn,un,Nn,In,lr,$n,Qn);break;default:dr&1?mn(Ln,en,dn,un,Nn,In,lr,$n,Qn):dr&6?Vn(Ln,en,dn,un,Nn,In,lr,$n,Qn):(dr&64||dr&128)&&Wn.process(Ln,en,dn,un,Nn,In,lr,$n,Qn,fr)}or!=null&&Nn&&setRef(or,Ln&&Ln.ref,In,en||Ln,!en)},Yt=(Ln,en,dn,un)=>{if(Ln==null)vt(en.el=kt(en.children),dn,un);else{const Nn=en.el=Ln.el;en.children!==Ln.children&&Mt(Nn,en.children)}},nn=(Ln,en,dn,un)=>{Ln==null?vt(en.el=Lt(en.children||""),dn,un):en.el=Ln.el},rn=(Ln,en,dn,un)=>{[Ln.el,Ln.anchor]=Zt(Ln.children,en,dn,un,Ln.el,Ln.anchor)},ln=({el:Ln,anchor:en},dn,un)=>{let Nn;for(;Ln&&Ln!==en;)Nn=Ht(Ln),vt(Ln,dn,un),Ln=Nn;vt(en,dn,un)},sn=({el:Ln,anchor:en})=>{let dn;for(;Ln&&Ln!==en;)dn=Ht(Ln),bt(Ln),Ln=dn;bt(en)},mn=(Ln,en,dn,un,Nn,In,lr,$n,Qn)=>{lr=lr||en.type==="svg",Ln==null?wn(en,dn,un,Nn,In,lr,$n,Qn):Pn(Ln,en,Nn,In,lr,$n,Qn)},wn=(Ln,en,dn,un,Nn,In,lr,$n)=>{let Qn,Wn;const{type:or,props:dr,shapeFlag:kr,transition:br,dirs:_r}=Ln;if(Qn=Ln.el=Tt(Ln.type,In,dr&&dr.is,dr),kr&8?Nt(Qn,Ln.children):kr&16&&An(Ln.children,Qn,null,un,Nn,In&&or!=="foreignObject",lr,$n),_r&&invokeDirectiveHook(Ln,null,un,"created"),dr){for(const di in dr)di!=="value"&&!isReservedProp(di)&&wt(Qn,di,null,dr[di],In,Ln.children,un,Nn,sr);"value"in dr&&wt(Qn,"value",null,dr.value),(Wn=dr.onVnodeBeforeMount)&&invokeVNodeHook(Wn,un,Ln)}Cn(Qn,Ln,Ln.scopeId,lr,un),_r&&invokeDirectiveHook(Ln,null,un,"beforeMount");const hi=(!Nn||Nn&&!Nn.pendingBranch)&&br&&!br.persisted;hi&&br.beforeEnter(Qn),vt(Qn,en,dn),((Wn=dr&&dr.onVnodeMounted)||hi||_r)&&queuePostRenderEffect(()=>{Wn&&invokeVNodeHook(Wn,un,Ln),hi&&br.enter(Qn),_r&&invokeDirectiveHook(Ln,null,un,"mounted")},Nn)},Cn=(Ln,en,dn,un,Nn)=>{if(dn&&Wt(Ln,dn),un)for(let In=0;In<un.length;In++)Wt(Ln,un[In]);if(Nn){let In=Nn.subTree;if(en===In){const lr=Nn.vnode;Cn(Ln,lr,lr.scopeId,lr.slotScopeIds,Nn.parent)}}},An=(Ln,en,dn,un,Nn,In,lr,$n,Qn=0)=>{for(let Wn=Qn;Wn<Ln.length;Wn++){const or=Ln[Wn]=$n?cloneIfMounted(Ln[Wn]):normalizeVNode(Ln[Wn]);tn(null,or,en,dn,un,Nn,In,lr,$n)}},Pn=(Ln,en,dn,un,Nn,In,lr)=>{const $n=en.el=Ln.el;let{patchFlag:Qn,dynamicChildren:Wn,dirs:or}=en;Qn|=Ln.patchFlag&16;const dr=Ln.props||EMPTY_OBJ,kr=en.props||EMPTY_OBJ;let br;dn&&toggleRecurse(dn,!1),(br=kr.onVnodeBeforeUpdate)&&invokeVNodeHook(br,dn,en,Ln),or&&invokeDirectiveHook(en,Ln,dn,"beforeUpdate"),dn&&toggleRecurse(dn,!0);const _r=Nn&&en.type!=="foreignObject";if(Wn?On(Ln.dynamicChildren,Wn,$n,dn,un,_r,In):lr||Er(Ln,en,$n,null,dn,un,_r,In,!1),Qn>0){if(Qn&16)kn($n,en,dr,kr,dn,un,Nn);else if(Qn&2&&dr.class!==kr.class&&wt($n,"class",null,kr.class,Nn),Qn&4&&wt($n,"style",dr.style,kr.style,Nn),Qn&8){const hi=en.dynamicProps;for(let di=0;di<hi.length;di++){const vi=hi[di],Ai=dr[vi],ki=kr[vi];(ki!==Ai||vi==="value")&&wt($n,vi,Ai,ki,Nn,Ln.children,dn,un,sr)}}Qn&1&&Ln.children!==en.children&&Nt($n,en.children)}else!lr&&Wn==null&&kn($n,en,dr,kr,dn,un,Nn);((br=kr.onVnodeUpdated)||or)&&queuePostRenderEffect(()=>{br&&invokeVNodeHook(br,dn,en,Ln),or&&invokeDirectiveHook(en,Ln,dn,"updated")},un)},On=(Ln,en,dn,un,Nn,In,lr)=>{for(let $n=0;$n<en.length;$n++){const Qn=Ln[$n],Wn=en[$n],or=Qn.el&&(Qn.type===Fragment||!isSameVNodeType(Qn,Wn)||Qn.shapeFlag&70)?zt(Qn.el):dn;tn(Qn,Wn,or,null,un,Nn,In,lr,!0)}},kn=(Ln,en,dn,un,Nn,In,lr)=>{if(dn!==un){if(dn!==EMPTY_OBJ)for(const $n in dn)!isReservedProp($n)&&!($n in un)&&wt(Ln,$n,dn[$n],null,lr,en.children,Nn,In,sr);for(const $n in un){if(isReservedProp($n))continue;const Qn=un[$n],Wn=dn[$n];Qn!==Wn&&$n!=="value"&&wt(Ln,$n,Wn,Qn,lr,en.children,Nn,In,sr)}"value"in un&&wt(Ln,"value",dn.value,un.value)}},gn=(Ln,en,dn,un,Nn,In,lr,$n,Qn)=>{const Wn=en.el=Ln?Ln.el:kt(""),or=en.anchor=Ln?Ln.anchor:kt("");let{patchFlag:dr,dynamicChildren:kr,slotScopeIds:br}=en;br&&($n=$n?$n.concat(br):br),Ln==null?(vt(Wn,dn,un),vt(or,dn,un),An(en.children,dn,or,Nn,In,lr,$n,Qn)):dr>0&&dr&64&&kr&&Ln.dynamicChildren?(On(Ln.dynamicChildren,kr,dn,Nn,In,lr,$n),(en.key!=null||Nn&&en===Nn.subTree)&&traverseStaticChildren(Ln,en,!0)):Er(Ln,en,dn,or,Nn,In,lr,$n,Qn)},Vn=(Ln,en,dn,un,Nn,In,lr,$n,Qn)=>{en.slotScopeIds=$n,Ln==null?en.shapeFlag&512?Nn.ctx.activate(en,dn,un,lr,Qn):pn(en,dn,un,Nn,In,lr,Qn):pr(Ln,en,Qn)},pn=(Ln,en,dn,un,Nn,In,lr)=>{const $n=Ln.component=createComponentInstance(Ln,un,Nn);if(isKeepAlive(Ln)&&($n.ctx.renderer=fr),setupComponent($n),$n.asyncDep){if(Nn&&Nn.registerDep($n,yn),!Ln.el){const Qn=$n.subTree=createVNode(Comment);nn(null,Qn,en,dn)}return}yn($n,Ln,en,dn,Nn,In,lr)},pr=(Ln,en,dn)=>{const un=en.component=Ln.component;if(shouldUpdateComponent(Ln,en,dn))if(un.asyncDep&&!un.asyncResolved){mr(un,en,dn);return}else un.next=en,invalidateJob(un.update),un.update();else en.el=Ln.el,un.vnode=en},yn=(Ln,en,dn,un,Nn,In,lr)=>{const $n=()=>{if(Ln.isMounted){let{next:or,bu:dr,u:kr,parent:br,vnode:_r}=Ln,hi=or,di;toggleRecurse(Ln,!1),or?(or.el=_r.el,mr(Ln,or,lr)):or=_r,dr&&invokeArrayFns(dr),(di=or.props&&or.props.onVnodeBeforeUpdate)&&invokeVNodeHook(di,br,or,_r),toggleRecurse(Ln,!0);const vi=renderComponentRoot(Ln),Ai=Ln.subTree;Ln.subTree=vi,tn(Ai,vi,zt(Ai.el),ii(Ai),Ln,Nn,In),or.el=vi.el,hi===null&&updateHOCHostEl(Ln,vi.el),kr&&queuePostRenderEffect(kr,Nn),(di=or.props&&or.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(di,br,or,_r),Nn)}else{let or;const{el:dr,props:kr}=en,{bm:br,m:_r,parent:hi}=Ln,di=isAsyncWrapper(en);if(toggleRecurse(Ln,!1),br&&invokeArrayFns(br),!di&&(or=kr&&kr.onVnodeBeforeMount)&&invokeVNodeHook(or,hi,en),toggleRecurse(Ln,!0),dr&&ir){const vi=()=>{Ln.subTree=renderComponentRoot(Ln),ir(dr,Ln.subTree,Ln,Nn,null)};di?en.type.__asyncLoader().then(()=>!Ln.isUnmounted&&vi()):vi()}else{const vi=Ln.subTree=renderComponentRoot(Ln);tn(null,vi,dn,un,Ln,Nn,In),en.el=vi.el}if(_r&&queuePostRenderEffect(_r,Nn),!di&&(or=kr&&kr.onVnodeMounted)){const vi=en;queuePostRenderEffect(()=>invokeVNodeHook(or,hi,vi),Nn)}(en.shapeFlag&256||hi&&isAsyncWrapper(hi.vnode)&&hi.vnode.shapeFlag&256)&&Ln.a&&queuePostRenderEffect(Ln.a,Nn),Ln.isMounted=!0,en=dn=un=null}},Qn=Ln.effect=new ReactiveEffect($n,()=>queueJob(Wn),Ln.scope),Wn=Ln.update=()=>Qn.run();Wn.id=Ln.uid,toggleRecurse(Ln,!0),Wn()},mr=(Ln,en,dn)=>{en.component=Ln;const un=Ln.vnode.props;Ln.vnode=en,Ln.next=null,updateProps(Ln,en.props,un,dn),updateSlots(Ln,en.children,dn),pauseTracking(),flushPreFlushCbs(),resetTracking()},Er=(Ln,en,dn,un,Nn,In,lr,$n,Qn=!1)=>{const Wn=Ln&&Ln.children,or=Ln?Ln.shapeFlag:0,dr=en.children,{patchFlag:kr,shapeFlag:br}=en;if(kr>0){if(kr&128){rr(Wn,dr,dn,un,Nn,In,lr,$n,Qn);return}else if(kr&256){Mr(Wn,dr,dn,un,Nn,In,lr,$n,Qn);return}}br&8?(or&16&&sr(Wn,Nn,In),dr!==Wn&&Nt(dn,dr)):or&16?br&16?rr(Wn,dr,dn,un,Nn,In,lr,$n,Qn):sr(Wn,Nn,In,!0):(or&8&&Nt(dn,""),br&16&&An(dr,dn,un,Nn,In,lr,$n,Qn))},Mr=(Ln,en,dn,un,Nn,In,lr,$n,Qn)=>{Ln=Ln||EMPTY_ARR,en=en||EMPTY_ARR;const Wn=Ln.length,or=en.length,dr=Math.min(Wn,or);let kr;for(kr=0;kr<dr;kr++){const br=en[kr]=Qn?cloneIfMounted(en[kr]):normalizeVNode(en[kr]);tn(Ln[kr],br,dn,null,Nn,In,lr,$n,Qn)}Wn>or?sr(Ln,Nn,In,!0,!1,dr):An(en,dn,un,Nn,In,lr,$n,Qn,dr)},rr=(Ln,en,dn,un,Nn,In,lr,$n,Qn)=>{let Wn=0;const or=en.length;let dr=Ln.length-1,kr=or-1;for(;Wn<=dr&&Wn<=kr;){const br=Ln[Wn],_r=en[Wn]=Qn?cloneIfMounted(en[Wn]):normalizeVNode(en[Wn]);if(isSameVNodeType(br,_r))tn(br,_r,dn,null,Nn,In,lr,$n,Qn);else break;Wn++}for(;Wn<=dr&&Wn<=kr;){const br=Ln[dr],_r=en[kr]=Qn?cloneIfMounted(en[kr]):normalizeVNode(en[kr]);if(isSameVNodeType(br,_r))tn(br,_r,dn,null,Nn,In,lr,$n,Qn);else break;dr--,kr--}if(Wn>dr){if(Wn<=kr){const br=kr+1,_r=br<or?en[br].el:un;for(;Wn<=kr;)tn(null,en[Wn]=Qn?cloneIfMounted(en[Wn]):normalizeVNode(en[Wn]),dn,_r,Nn,In,lr,$n,Qn),Wn++}}else if(Wn>kr)for(;Wn<=dr;)cr(Ln[Wn],Nn,In,!0),Wn++;else{const br=Wn,_r=Wn,hi=new Map;for(Wn=_r;Wn<=kr;Wn++){const Tn=en[Wn]=Qn?cloneIfMounted(en[Wn]):normalizeVNode(en[Wn]);Tn.key!=null&&hi.set(Tn.key,Wn)}let di,vi=0;const Ai=kr-_r+1;let ki=!1,Bi=0;const Ti=new Array(Ai);for(Wn=0;Wn<Ai;Wn++)Ti[Wn]=0;for(Wn=br;Wn<=dr;Wn++){const Tn=Ln[Wn];if(vi>=Ai){cr(Tn,Nn,In,!0);continue}let Sn;if(Tn.key!=null)Sn=hi.get(Tn.key);else for(di=_r;di<=kr;di++)if(Ti[di-_r]===0&&isSameVNodeType(Tn,en[di])){Sn=di;break}Sn===void 0?cr(Tn,Nn,In,!0):(Ti[Sn-_r]=Wn+1,Sn>=Bi?Bi=Sn:ki=!0,tn(Tn,en[Sn],dn,null,Nn,In,lr,$n,Qn),vi++)}const Rr=ki?getSequence(Ti):EMPTY_ARR;for(di=Rr.length-1,Wn=Ai-1;Wn>=0;Wn--){const Tn=_r+Wn,Sn=en[Tn],jn=Tn+1<or?en[Tn+1].el:un;Ti[Wn]===0?tn(null,Sn,dn,jn,Nn,In,lr,$n,Qn):ki&&(di<0||Wn!==Rr[di]?vr(Sn,dn,jn,2):di--)}}},vr=(Ln,en,dn,un,Nn=null)=>{const{el:In,type:lr,transition:$n,children:Qn,shapeFlag:Wn}=Ln;if(Wn&6){vr(Ln.component.subTree,en,dn,un);return}if(Wn&128){Ln.suspense.move(en,dn,un);return}if(Wn&64){lr.move(Ln,en,dn,fr);return}if(lr===Fragment){vt(In,en,dn);for(let dr=0;dr<Qn.length;dr++)vr(Qn[dr],en,dn,un);vt(Ln.anchor,en,dn);return}if(lr===Static){ln(Ln,en,dn);return}if(un!==2&&Wn&1&&$n)if(un===0)$n.beforeEnter(In),vt(In,en,dn),queuePostRenderEffect(()=>$n.enter(In),Nn);else{const{leave:dr,delayLeave:kr,afterLeave:br}=$n,_r=()=>vt(In,en,dn),hi=()=>{dr(In,()=>{_r(),br&&br()})};kr?kr(In,_r,hi):hi()}else vt(In,en,dn)},cr=(Ln,en,dn,un=!1,Nn=!1)=>{const{type:In,props:lr,ref:$n,children:Qn,dynamicChildren:Wn,shapeFlag:or,patchFlag:dr,dirs:kr}=Ln;if($n!=null&&setRef($n,null,dn,Ln,!0),or&256){en.ctx.deactivate(Ln);return}const br=or&1&&kr,_r=!isAsyncWrapper(Ln);let hi;if(_r&&(hi=lr&&lr.onVnodeBeforeUnmount)&&invokeVNodeHook(hi,en,Ln),or&6)Ar(Ln.component,dn,un);else{if(or&128){Ln.suspense.unmount(dn,un);return}br&&invokeDirectiveHook(Ln,null,en,"beforeUnmount"),or&64?Ln.type.remove(Ln,en,dn,Nn,fr,un):Wn&&(In!==Fragment||dr>0&&dr&64)?sr(Wn,en,dn,!1,!0):(In===Fragment&&dr&384||!Nn&&or&16)&&sr(Qn,en,dn),un&&gr(Ln)}(_r&&(hi=lr&&lr.onVnodeUnmounted)||br)&&queuePostRenderEffect(()=>{hi&&invokeVNodeHook(hi,en,Ln),br&&invokeDirectiveHook(Ln,null,en,"unmounted")},dn)},gr=Ln=>{const{type:en,el:dn,anchor:un,transition:Nn}=Ln;if(en===Fragment){Or(dn,un);return}if(en===Static){sn(Ln);return}const In=()=>{bt(dn),Nn&&!Nn.persisted&&Nn.afterLeave&&Nn.afterLeave()};if(Ln.shapeFlag&1&&Nn&&!Nn.persisted){const{leave:lr,delayLeave:$n}=Nn,Qn=()=>lr(dn,In);$n?$n(Ln.el,In,Qn):Qn()}else In()},Or=(Ln,en)=>{let dn;for(;Ln!==en;)dn=Ht(Ln),bt(Ln),Ln=dn;bt(en)},Ar=(Ln,en,dn)=>{const{bum:un,scope:Nn,update:In,subTree:lr,um:$n}=Ln;un&&invokeArrayFns(un),Nn.stop(),In&&(In.active=!1,cr(lr,Ln,en,dn)),$n&&queuePostRenderEffect($n,en),queuePostRenderEffect(()=>{Ln.isUnmounted=!0},en),en&&en.pendingBranch&&!en.isUnmounted&&Ln.asyncDep&&!Ln.asyncResolved&&Ln.suspenseId===en.pendingId&&(en.deps--,en.deps===0&&en.resolve())},sr=(Ln,en,dn,un=!1,Nn=!1,In=0)=>{for(let lr=In;lr<Ln.length;lr++)cr(Ln[lr],en,dn,un,Nn)},ii=Ln=>Ln.shapeFlag&6?ii(Ln.component.subTree):Ln.shapeFlag&128?Ln.suspense.next():Ht(Ln.anchor||Ln.el),ar=(Ln,en,dn)=>{Ln==null?en._vnode&&cr(en._vnode,null,null,!0):tn(en._vnode||null,Ln,en,null,null,null,dn),flushPreFlushCbs(),flushPostFlushCbs(),en._vnode=Ln},fr={p:tn,um:cr,m:vr,r:gr,mt:pn,mc:An,pc:Er,pbc:On,n:ii,o:nt};let wr,ir;return rt&&([wr,ir]=rt(fr)),{render:ar,hydrate:wr,createApp:createAppAPI(ar,wr)}}function toggleRecurse({effect:nt,update:rt},it){nt.allowRecurse=rt.allowRecurse=it}function traverseStaticChildren(nt,rt,it=!1){const vt=nt.children,bt=rt.children;if(isArray$2(vt)&&isArray$2(bt))for(let wt=0;wt<vt.length;wt++){const Tt=vt[wt];let kt=bt[wt];kt.shapeFlag&1&&!kt.dynamicChildren&&((kt.patchFlag<=0||kt.patchFlag===32)&&(kt=bt[wt]=cloneIfMounted(bt[wt]),kt.el=Tt.el),it||traverseStaticChildren(Tt,kt)),kt.type===Text&&(kt.el=Tt.el)}}function getSequence(nt){const rt=nt.slice(),it=[0];let vt,bt,wt,Tt,kt;const Lt=nt.length;for(vt=0;vt<Lt;vt++){const Mt=nt[vt];if(Mt!==0){if(bt=it[it.length-1],nt[bt]<Mt){rt[vt]=bt,it.push(vt);continue}for(wt=0,Tt=it.length-1;wt<Tt;)kt=wt+Tt>>1,nt[it[kt]]<Mt?wt=kt+1:Tt=kt;Mt<nt[it[wt]]&&(wt>0&&(rt[vt]=it[wt-1]),it[wt]=vt)}}for(wt=it.length,Tt=it[wt-1];wt-- >0;)it[wt]=Tt,Tt=rt[Tt];return it}const isTeleport=nt=>nt.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(nt=!1){blockStack.push(currentBlock=nt?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(nt){isBlockTreeEnabled+=nt}function setupBlock(nt){return nt.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(nt),nt}function createElementBlock(nt,rt,it,vt,bt,wt){return setupBlock(createBaseVNode(nt,rt,it,vt,bt,wt,!0))}function createBlock(nt,rt,it,vt,bt){return setupBlock(createVNode(nt,rt,it,vt,bt,!0))}function isVNode(nt){return nt?nt.__v_isVNode===!0:!1}function isSameVNodeType(nt,rt){return nt.type===rt.type&&nt.key===rt.key}const InternalObjectKey="__vInternal",normalizeKey=({key:nt})=>nt!=null?nt:null,normalizeRef=({ref:nt,ref_key:rt,ref_for:it})=>nt!=null?isString(nt)||isRef(nt)||isFunction$1(nt)?{i:currentRenderingInstance,r:nt,k:rt,f:!!it}:nt:null;function createBaseVNode(nt,rt=null,it=null,vt=0,bt=null,wt=nt===Fragment?0:1,Tt=!1,kt=!1){const Lt={__v_isVNode:!0,__v_skip:!0,type:nt,props:rt,key:rt&&normalizeKey(rt),ref:rt&&normalizeRef(rt),scopeId:currentScopeId,slotScopeIds:null,children:it,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:wt,patchFlag:vt,dynamicProps:bt,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return kt?(normalizeChildren(Lt,it),wt&128&&nt.normalize(Lt)):it&&(Lt.shapeFlag|=isString(it)?8:16),isBlockTreeEnabled>0&&!Tt&&currentBlock&&(Lt.patchFlag>0||wt&6)&&Lt.patchFlag!==32&&currentBlock.push(Lt),Lt}const createVNode=_createVNode;function _createVNode(nt,rt=null,it=null,vt=0,bt=null,wt=!1){if((!nt||nt===NULL_DYNAMIC_COMPONENT)&&(nt=Comment),isVNode(nt)){const kt=cloneVNode(nt,rt,!0);return it&&normalizeChildren(kt,it),isBlockTreeEnabled>0&&!wt&&currentBlock&&(kt.shapeFlag&6?currentBlock[currentBlock.indexOf(nt)]=kt:currentBlock.push(kt)),kt.patchFlag|=-2,kt}if(isClassComponent(nt)&&(nt=nt.__vccOpts),rt){rt=guardReactiveProps(rt);let{class:kt,style:Lt}=rt;kt&&!isString(kt)&&(rt.class=normalizeClass(kt)),isObject$3(Lt)&&(isProxy(Lt)&&!isArray$2(Lt)&&(Lt=extend$3({},Lt)),rt.style=normalizeStyle(Lt))}const Tt=isString(nt)?1:isSuspense(nt)?128:isTeleport(nt)?64:isObject$3(nt)?4:isFunction$1(nt)?2:0;return createBaseVNode(nt,rt,it,vt,bt,Tt,wt,!0)}function guardReactiveProps(nt){return nt?isProxy(nt)||InternalObjectKey in nt?extend$3({},nt):nt:null}function cloneVNode(nt,rt,it=!1){const{props:vt,ref:bt,patchFlag:wt,children:Tt}=nt,kt=rt?mergeProps(vt||{},rt):vt;return{__v_isVNode:!0,__v_skip:!0,type:nt.type,props:kt,key:kt&&normalizeKey(kt),ref:rt&&rt.ref?it&&bt?isArray$2(bt)?bt.concat(normalizeRef(rt)):[bt,normalizeRef(rt)]:normalizeRef(rt):bt,scopeId:nt.scopeId,slotScopeIds:nt.slotScopeIds,children:Tt,target:nt.target,targetAnchor:nt.targetAnchor,staticCount:nt.staticCount,shapeFlag:nt.shapeFlag,patchFlag:rt&&nt.type!==Fragment?wt===-1?16:wt|16:wt,dynamicProps:nt.dynamicProps,dynamicChildren:nt.dynamicChildren,appContext:nt.appContext,dirs:nt.dirs,transition:nt.transition,component:nt.component,suspense:nt.suspense,ssContent:nt.ssContent&&cloneVNode(nt.ssContent),ssFallback:nt.ssFallback&&cloneVNode(nt.ssFallback),el:nt.el,anchor:nt.anchor,ctx:nt.ctx}}function createTextVNode(nt=" ",rt=0){return createVNode(Text,null,nt,rt)}function createCommentVNode(nt="",rt=!1){return rt?(openBlock(),createBlock(Comment,null,nt)):createVNode(Comment,null,nt)}function normalizeVNode(nt){return nt==null||typeof nt=="boolean"?createVNode(Comment):isArray$2(nt)?createVNode(Fragment,null,nt.slice()):typeof nt=="object"?cloneIfMounted(nt):createVNode(Text,null,String(nt))}function cloneIfMounted(nt){return nt.el===null&&nt.patchFlag!==-1||nt.memo?nt:cloneVNode(nt)}function normalizeChildren(nt,rt){let it=0;const{shapeFlag:vt}=nt;if(rt==null)rt=null;else if(isArray$2(rt))it=16;else if(typeof rt=="object")if(vt&65){const bt=rt.default;bt&&(bt._c&&(bt._d=!1),normalizeChildren(nt,bt()),bt._c&&(bt._d=!0));return}else{it=32;const bt=rt._;!bt&&!(InternalObjectKey in rt)?rt._ctx=currentRenderingInstance:bt===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?rt._=1:(rt._=2,nt.patchFlag|=1024))}else isFunction$1(rt)?(rt={default:rt,_ctx:currentRenderingInstance},it=32):(rt=String(rt),vt&64?(it=16,rt=[createTextVNode(rt)]):it=8);nt.children=rt,nt.shapeFlag|=it}function mergeProps(...nt){const rt={};for(let it=0;it<nt.length;it++){const vt=nt[it];for(const bt in vt)if(bt==="class")rt.class!==vt.class&&(rt.class=normalizeClass([rt.class,vt.class]));else if(bt==="style")rt.style=normalizeStyle([rt.style,vt.style]);else if(isOn(bt)){const wt=rt[bt],Tt=vt[bt];Tt&&wt!==Tt&&!(isArray$2(wt)&&wt.includes(Tt))&&(rt[bt]=wt?[].concat(wt,Tt):Tt)}else bt!==""&&(rt[bt]=vt[bt])}return rt}function invokeVNodeHook(nt,rt,it,vt=null){callWithAsyncErrorHandling(nt,rt,7,[it,vt])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(nt,rt,it){const vt=nt.type,bt=(rt?rt.appContext:nt.appContext)||emptyAppContext,wt={uid:uid$1++,vnode:nt,type:vt,parent:rt,appContext:bt,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:rt?rt.provides:Object.create(bt.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(vt,bt),emitsOptions:normalizeEmitsOptions(vt,bt),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:vt.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:it,suspenseId:it?it.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return wt.ctx={_:wt},wt.root=rt?rt.root:wt,wt.emit=emit$1.bind(null,wt),nt.ce&&nt.ce(wt),wt}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=nt=>{currentInstance=nt,nt.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(nt){return nt.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(nt,rt=!1){isInSSRComponentSetup=rt;const{props:it,children:vt}=nt.vnode,bt=isStatefulComponent(nt);initProps(nt,it,bt,rt),initSlots(nt,vt);const wt=bt?setupStatefulComponent(nt,rt):void 0;return isInSSRComponentSetup=!1,wt}function setupStatefulComponent(nt,rt){const it=nt.type;nt.accessCache=Object.create(null),nt.proxy=markRaw(new Proxy(nt.ctx,PublicInstanceProxyHandlers));const{setup:vt}=it;if(vt){const bt=nt.setupContext=vt.length>1?createSetupContext(nt):null;setCurrentInstance(nt),pauseTracking();const wt=callWithErrorHandling(vt,nt,0,[nt.props,bt]);if(resetTracking(),unsetCurrentInstance(),isPromise(wt)){if(wt.then(unsetCurrentInstance,unsetCurrentInstance),rt)return wt.then(Tt=>{handleSetupResult(nt,Tt,rt)}).catch(Tt=>{handleError$1(Tt,nt,0)});nt.asyncDep=wt}else handleSetupResult(nt,wt,rt)}else finishComponentSetup(nt,rt)}function handleSetupResult(nt,rt,it){isFunction$1(rt)?nt.type.__ssrInlineRender?nt.ssrRender=rt:nt.render=rt:isObject$3(rt)&&(nt.setupState=proxyRefs(rt)),finishComponentSetup(nt,it)}let compile$1;function finishComponentSetup(nt,rt,it){const vt=nt.type;if(!nt.render){if(!rt&&compile$1&&!vt.render){const bt=vt.template||resolveMergedOptions(nt).template;if(bt){const{isCustomElement:wt,compilerOptions:Tt}=nt.appContext.config,{delimiters:kt,compilerOptions:Lt}=vt,Mt=extend$3(extend$3({isCustomElement:wt,delimiters:kt},Tt),Lt);vt.render=compile$1(bt,Mt)}}nt.render=vt.render||NOOP}setCurrentInstance(nt),pauseTracking(),applyOptions(nt),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(nt){return new Proxy(nt.attrs,{get(rt,it){return track(nt,"get","$attrs"),rt[it]}})}function createSetupContext(nt){const rt=vt=>{nt.exposed=vt||{}};let it;return{get attrs(){return it||(it=createAttrsProxy(nt))},slots:nt.slots,emit:nt.emit,expose:rt}}function getExposeProxy(nt){if(nt.exposed)return nt.exposeProxy||(nt.exposeProxy=new Proxy(proxyRefs(markRaw(nt.exposed)),{get(rt,it){if(it in rt)return rt[it];if(it in publicPropertiesMap)return publicPropertiesMap[it](nt)},has(rt,it){return it in rt||it in publicPropertiesMap}}))}function isClassComponent(nt){return isFunction$1(nt)&&"__vccOpts"in nt}const computed=(nt,rt)=>computed$1(nt,rt,isInSSRComponentSetup),ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version$2="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(nt,rt,it)=>{rt.insertBefore(nt,it||null)},remove:nt=>{const rt=nt.parentNode;rt&&rt.removeChild(nt)},createElement:(nt,rt,it,vt)=>{const bt=rt?doc.createElementNS(svgNS,nt):doc.createElement(nt,it?{is:it}:void 0);return nt==="select"&&vt&&vt.multiple!=null&&bt.setAttribute("multiple",vt.multiple),bt},createText:nt=>doc.createTextNode(nt),createComment:nt=>doc.createComment(nt),setText:(nt,rt)=>{nt.nodeValue=rt},setElementText:(nt,rt)=>{nt.textContent=rt},parentNode:nt=>nt.parentNode,nextSibling:nt=>nt.nextSibling,querySelector:nt=>doc.querySelector(nt),setScopeId(nt,rt){nt.setAttribute(rt,"")},insertStaticContent(nt,rt,it,vt,bt,wt){const Tt=it?it.previousSibling:rt.lastChild;if(bt&&(bt===wt||bt.nextSibling))for(;rt.insertBefore(bt.cloneNode(!0),it),!(bt===wt||!(bt=bt.nextSibling)););else{templateContainer.innerHTML=vt?`<svg>${nt}</svg>`:nt;const kt=templateContainer.content;if(vt){const Lt=kt.firstChild;for(;Lt.firstChild;)kt.appendChild(Lt.firstChild);kt.removeChild(Lt)}rt.insertBefore(kt,it)}return[Tt?Tt.nextSibling:rt.firstChild,it?it.previousSibling:rt.lastChild]}};function patchClass(nt,rt,it){const vt=nt._vtc;vt&&(rt=(rt?[rt,...vt]:[...vt]).join(" ")),rt==null?nt.removeAttribute("class"):it?nt.setAttribute("class",rt):nt.className=rt}function patchStyle(nt,rt,it){const vt=nt.style,bt=isString(it);if(it&&!bt){for(const wt in it)setStyle$1(vt,wt,it[wt]);if(rt&&!isString(rt))for(const wt in rt)it[wt]==null&&setStyle$1(vt,wt,"")}else{const wt=vt.display;bt?rt!==it&&(vt.cssText=it):rt&&nt.removeAttribute("style"),"_vod"in nt&&(vt.display=wt)}}const importantRE=/\s*!important$/;function setStyle$1(nt,rt,it){if(isArray$2(it))it.forEach(vt=>setStyle$1(nt,rt,vt));else if(it==null&&(it=""),rt.startsWith("--"))nt.setProperty(rt,it);else{const vt=autoPrefix(nt,rt);importantRE.test(it)?nt.setProperty(hyphenate(vt),it.replace(importantRE,""),"important"):nt[vt]=it}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(nt,rt){const it=prefixCache[rt];if(it)return it;let vt=camelize(rt);if(vt!=="filter"&&vt in nt)return prefixCache[rt]=vt;vt=capitalize(vt);for(let bt=0;bt<prefixes$1.length;bt++){const wt=prefixes$1[bt]+vt;if(wt in nt)return prefixCache[rt]=wt}return rt}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(nt,rt,it,vt,bt){if(vt&&rt.startsWith("xlink:"))it==null?nt.removeAttributeNS(xlinkNS,rt.slice(6,rt.length)):nt.setAttributeNS(xlinkNS,rt,it);else{const wt=isSpecialBooleanAttr(rt);it==null||wt&&!includeBooleanAttr(it)?nt.removeAttribute(rt):nt.setAttribute(rt,wt?"":it)}}function patchDOMProp(nt,rt,it,vt,bt,wt,Tt){if(rt==="innerHTML"||rt==="textContent"){vt&&Tt(vt,bt,wt),nt[rt]=it==null?"":it;return}if(rt==="value"&&nt.tagName!=="PROGRESS"&&!nt.tagName.includes("-")){nt._value=it;const Lt=it==null?"":it;(nt.value!==Lt||nt.tagName==="OPTION")&&(nt.value=Lt),it==null&&nt.removeAttribute(rt);return}let kt=!1;if(it===""||it==null){const Lt=typeof nt[rt];Lt==="boolean"?it=includeBooleanAttr(it):it==null&&Lt==="string"?(it="",kt=!0):Lt==="number"&&(it=0,kt=!0)}try{nt[rt]=it}catch{}kt&&nt.removeAttribute(rt)}function addEventListener(nt,rt,it,vt){nt.addEventListener(rt,it,vt)}function removeEventListener(nt,rt,it,vt){nt.removeEventListener(rt,it,vt)}function patchEvent(nt,rt,it,vt,bt=null){const wt=nt._vei||(nt._vei={}),Tt=wt[rt];if(vt&&Tt)Tt.value=vt;else{const[kt,Lt]=parseName(rt);if(vt){const Mt=wt[rt]=createInvoker(vt,bt);addEventListener(nt,kt,Mt,Lt)}else Tt&&(removeEventListener(nt,kt,Tt,Lt),wt[rt]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(nt){let rt;if(optionsModifierRE.test(nt)){rt={};let vt;for(;vt=nt.match(optionsModifierRE);)nt=nt.slice(0,nt.length-vt[0].length),rt[vt[0].toLowerCase()]=!0}return[nt[2]===":"?nt.slice(3):hyphenate(nt.slice(2)),rt]}let cachedNow=0;const p$3=Promise.resolve(),getNow=()=>cachedNow||(p$3.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(nt,rt){const it=vt=>{if(!vt._vts)vt._vts=Date.now();else if(vt._vts<=it.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(vt,it.value),rt,5,[vt])};return it.value=nt,it.attached=getNow(),it}function patchStopImmediatePropagation(nt,rt){if(isArray$2(rt)){const it=nt.stopImmediatePropagation;return nt.stopImmediatePropagation=()=>{it.call(nt),nt._stopped=!0},rt.map(vt=>bt=>!bt._stopped&&vt&&vt(bt))}else return rt}const nativeOnRE=/^on[a-z]/,patchProp=(nt,rt,it,vt,bt=!1,wt,Tt,kt,Lt)=>{rt==="class"?patchClass(nt,vt,bt):rt==="style"?patchStyle(nt,it,vt):isOn(rt)?isModelListener(rt)||patchEvent(nt,rt,it,vt,Tt):(rt[0]==="."?(rt=rt.slice(1),!0):rt[0]==="^"?(rt=rt.slice(1),!1):shouldSetAsProp(nt,rt,vt,bt))?patchDOMProp(nt,rt,vt,wt,Tt,kt,Lt):(rt==="true-value"?nt._trueValue=vt:rt==="false-value"&&(nt._falseValue=vt),patchAttr(nt,rt,vt,bt))};function shouldSetAsProp(nt,rt,it,vt){return vt?!!(rt==="innerHTML"||rt==="textContent"||rt in nt&&nativeOnRE.test(rt)&&isFunction$1(it)):rt==="spellcheck"||rt==="draggable"||rt==="translate"||rt==="form"||rt==="list"&&nt.tagName==="INPUT"||rt==="type"&&nt.tagName==="TEXTAREA"||nativeOnRE.test(rt)&&isString(it)?!1:rt in nt}function defineCustomElement(nt,rt){const it=defineComponent(nt);class vt extends VueElement{constructor(wt){super(it,wt,rt)}}return vt.def=it,vt}const BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(rt,it={},vt){super(),this._def=rt,this._props=it,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&vt?vt(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render$4(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let vt=0;vt<this.attributes.length;vt++)this._setAttr(this.attributes[vt].name);new MutationObserver(vt=>{for(const bt of vt)this._setAttr(bt.attributeName)}).observe(this,{attributes:!0});const rt=(vt,bt=!1)=>{const{props:wt,styles:Tt}=vt;let kt;if(wt&&!isArray$2(wt))for(const Lt in wt){const Mt=wt[Lt];(Mt===Number||Mt&&Mt.type===Number)&&(Lt in this._props&&(this._props[Lt]=toNumber$1(this._props[Lt])),(kt||(kt=Object.create(null)))[camelize(Lt)]=!0)}this._numberProps=kt,bt&&this._resolveProps(vt),this._applyStyles(Tt),this._update()},it=this._def.__asyncLoader;it?it().then(vt=>rt(vt,!0)):rt(this._def)}_resolveProps(rt){const{props:it}=rt,vt=isArray$2(it)?it:Object.keys(it||{});for(const bt of Object.keys(this))bt[0]!=="_"&&vt.includes(bt)&&this._setProp(bt,this[bt],!0,!1);for(const bt of vt.map(camelize))Object.defineProperty(this,bt,{get(){return this._getProp(bt)},set(wt){this._setProp(bt,wt)}})}_setAttr(rt){let it=this.getAttribute(rt);const vt=camelize(rt);this._numberProps&&this._numberProps[vt]&&(it=toNumber$1(it)),this._setProp(vt,it,!1)}_getProp(rt){return this._props[rt]}_setProp(rt,it,vt=!0,bt=!0){it!==this._props[rt]&&(this._props[rt]=it,bt&&this._instance&&this._update(),vt&&(it===!0?this.setAttribute(hyphenate(rt),""):typeof it=="string"||typeof it=="number"?this.setAttribute(hyphenate(rt),it+""):it||this.removeAttribute(hyphenate(rt))))}_update(){render$4(this._createVNode(),this.shadowRoot)}_createVNode(){const rt=createVNode(this._def,extend$3({},this._props));return this._instance||(rt.ce=it=>{this._instance=it,it.isCE=!0;const vt=(wt,Tt)=>{this.dispatchEvent(new CustomEvent(wt,{detail:Tt}))};it.emit=(wt,...Tt)=>{vt(wt,Tt),hyphenate(wt)!==wt&&vt(hyphenate(wt),Tt)};let bt=this;for(;bt=bt&&(bt.parentNode||bt.host);)if(bt instanceof VueElement){it.parent=bt._instance,it.provides=bt._instance.provides;break}}),rt}_applyStyles(rt){rt&&rt.forEach(it=>{const vt=document.createElement("style");vt.textContent=it,this.shadowRoot.appendChild(vt)})}}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:nt=>nt.stopPropagation(),prevent:nt=>nt.preventDefault(),self:nt=>nt.target!==nt.currentTarget,ctrl:nt=>!nt.ctrlKey,shift:nt=>!nt.shiftKey,alt:nt=>!nt.altKey,meta:nt=>!nt.metaKey,left:nt=>"button"in nt&&nt.button!==0,middle:nt=>"button"in nt&&nt.button!==1,right:nt=>"button"in nt&&nt.button!==2,exact:(nt,rt)=>systemModifiers.some(it=>nt[`${it}Key`]&&!rt.includes(it))},withModifiers=(nt,rt)=>(it,...vt)=>{for(let bt=0;bt<rt.length;bt++){const wt=modifierGuards[rt[bt]];if(wt&&wt(it,rt))return}return nt(it,...vt)},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$4=(...nt)=>{ensureRenderer().render(...nt)},light="";var basePath="";function setBasePath(nt){basePath=nt}function getBasePath(){if(!basePath){const nt=[...document.getElementsByTagName("script")],rt=nt.find(it=>it.hasAttribute("data-shoelace"));if(rt)setBasePath(rt.getAttribute("data-shoelace"));else{const it=nt.find(bt=>/shoelace(\.min)?\.js($|\?)/.test(bt.src));let vt="";it&&(vt=it.getAttribute("src")),setBasePath(vt.split("/").slice(0,-1).join("/"))}}return basePath.replace(/\/$/,"")}var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(nt,rt,it)=>rt in nt?__defProp$1(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__spreadValues=(nt,rt)=>{for(var it in rt||(rt={}))__hasOwnProp.call(rt,it)&&__defNormalProp$1(nt,it,rt[it]);if(__getOwnPropSymbols)for(var it of __getOwnPropSymbols(rt))__propIsEnum.call(rt,it)&&__defNormalProp$1(nt,it,rt[it]);return nt},__spreadProps=(nt,rt)=>__defProps(nt,__getOwnPropDescs(rt)),__objRest=(nt,rt)=>{var it={};for(var vt in nt)__hasOwnProp.call(nt,vt)&&rt.indexOf(vt)<0&&(it[vt]=nt[vt]);if(nt!=null&&__getOwnPropSymbols)for(var vt of __getOwnPropSymbols(nt))rt.indexOf(vt)<0&&__propIsEnum.call(nt,vt)&&(it[vt]=nt[vt]);return it},__decorateClass=(nt,rt,it,vt)=>{for(var bt=vt>1?void 0:vt?__getOwnPropDesc(rt,it):rt,wt=nt.length-1,Tt;wt>=0;wt--)(Tt=nt[wt])&&(bt=(vt?Tt(rt,it,bt):Tt(bt))||bt);return vt&&bt&&__defProp$1(rt,it,bt),bt};const scriptRel="modulepreload",assetsURL=function(nt){return"/"+nt},seen={},__vitePreload=function(rt,it,vt){if(!it||it.length===0)return rt();const bt=document.getElementsByTagName("link");return Promise.all(it.map(wt=>{if(wt=assetsURL(wt),wt in seen)return;seen[wt]=!0;const Tt=wt.endsWith(".css"),kt=Tt?'[rel="stylesheet"]':"";if(!!vt)for(let Nt=bt.length-1;Nt>=0;Nt--){const zt=bt[Nt];if(zt.href===wt&&(!Tt||zt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${wt}"]${kt}`))return;const Mt=document.createElement("link");if(Mt.rel=Tt?"stylesheet":scriptRel,Tt||(Mt.as="script",Mt.crossOrigin=""),Mt.href=wt,document.head.appendChild(Mt),Tt)return new Promise((Nt,zt)=>{Mt.addEventListener("load",Nt),Mt.addEventListener("error",()=>zt(new Error(`Unable to preload CSS for ${wt}`)))})})).then(()=>rt())};var e$4=typeof self<"u"?self:global;const t$4=typeof navigator<"u",i$6=t$4&&typeof HTMLImageElement>"u",n$4=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),s$5=e$4.Buffer,r$2=e$4.BigInt,a$3=!!s$5,o$3=nt=>nt;function l$4(nt,rt=o$3){if(n$4)try{return typeof require=="function"?Promise.resolve(rt(require(nt))):__vitePreload(()=>import(nt),[]).then(rt)}catch{console.warn(`Couldn't load ${nt}`)}}let h$3=e$4.fetch;const u$2=nt=>h$3=nt;if(!e$4.fetch){const nt=l$4("http",vt=>vt),rt=l$4("https",vt=>vt),it=(vt,{headers:bt}={})=>new Promise(async(wt,Tt)=>{let{port:kt,hostname:Lt,pathname:Mt,protocol:Nt,search:zt}=new URL(vt);const Ht={method:"GET",hostname:Lt,path:encodeURI(Mt)+zt,headers:bt};kt!==""&&(Ht.port=Number(kt));const Wt=(Nt==="https:"?await rt:await nt).request(Ht,Zt=>{if(Zt.statusCode===301||Zt.statusCode===302){let tn=new URL(Zt.headers.location,vt).toString();return it(tn,{headers:bt}).then(wt).catch(Tt)}wt({status:Zt.statusCode,arrayBuffer:()=>new Promise(tn=>{let Yt=[];Zt.on("data",nn=>Yt.push(nn)),Zt.on("end",()=>tn(Buffer.concat(Yt)))})})});Wt.on("error",Tt),Wt.end()});u$2(it)}function c$3(nt,rt,it){return rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}const f$3=nt=>p$2(nt)?void 0:nt,d$3=nt=>nt!==void 0;function p$2(nt){return nt===void 0||(nt instanceof Map?nt.size===0:Object.values(nt).filter(d$3).length===0)}function g$2(nt){let rt=new Error(nt);throw delete rt.stack,rt}function m$3(nt){return(nt=function(rt){for(;rt.endsWith("\0");)rt=rt.slice(0,-1);return rt}(nt).trim())===""?void 0:nt}function S$1(nt){let rt=function(it){let vt=0;return it.ifd0.enabled&&(vt+=1024),it.exif.enabled&&(vt+=2048),it.makerNote&&(vt+=2048),it.userComment&&(vt+=1024),it.gps.enabled&&(vt+=512),it.interop.enabled&&(vt+=100),it.ifd1.enabled&&(vt+=1024),vt+2048}(nt);return nt.jfif.enabled&&(rt+=50),nt.xmp.enabled&&(rt+=2e4),nt.iptc.enabled&&(rt+=14e3),nt.icc.enabled&&(rt+=6e3),rt}const C$2=nt=>String.fromCharCode.apply(null,nt),y$3=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function b$2(nt){return y$3?y$3.decode(nt):a$3?Buffer.from(nt).toString("utf8"):decodeURIComponent(escape(C$2(nt)))}class I$1{static from(rt,it){return rt instanceof this&&rt.le===it?rt:new I$1(rt,void 0,void 0,it)}constructor(rt,it=0,vt,bt){if(typeof bt=="boolean"&&(this.le=bt),Array.isArray(rt)&&(rt=new Uint8Array(rt)),rt===0)this.byteOffset=0,this.byteLength=0;else if(rt instanceof ArrayBuffer){vt===void 0&&(vt=rt.byteLength-it);let wt=new DataView(rt,it,vt);this._swapDataView(wt)}else if(rt instanceof Uint8Array||rt instanceof DataView||rt instanceof I$1){vt===void 0&&(vt=rt.byteLength-it),(it+=rt.byteOffset)+vt>rt.byteOffset+rt.byteLength&&g$2("Creating view outside of available memory in ArrayBuffer");let wt=new DataView(rt.buffer,it,vt);this._swapDataView(wt)}else if(typeof rt=="number"){let wt=new DataView(new ArrayBuffer(rt));this._swapDataView(wt)}else g$2("Invalid input argument for BufferView: "+rt)}_swapArrayBuffer(rt){this._swapDataView(new DataView(rt))}_swapBuffer(rt){this._swapDataView(new DataView(rt.buffer,rt.byteOffset,rt.byteLength))}_swapDataView(rt){this.dataView=rt,this.buffer=rt.buffer,this.byteOffset=rt.byteOffset,this.byteLength=rt.byteLength}_lengthToEnd(rt){return this.byteLength-rt}set(rt,it,vt=I$1){return rt instanceof DataView||rt instanceof I$1?rt=new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength):rt instanceof ArrayBuffer&&(rt=new Uint8Array(rt)),rt instanceof Uint8Array||g$2("BufferView.set(): Invalid data argument."),this.toUint8().set(rt,it),new vt(this,it,rt.byteLength)}subarray(rt,it){return it=it||this._lengthToEnd(rt),new I$1(this,rt,it)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(rt,it){return new Uint8Array(this.buffer,this.byteOffset+rt,it)}getString(rt=0,it=this.byteLength){return b$2(this.getUint8Array(rt,it))}getLatin1String(rt=0,it=this.byteLength){let vt=this.getUint8Array(rt,it);return C$2(vt)}getUnicodeString(rt=0,it=this.byteLength){const vt=[];for(let bt=0;bt<it&&rt+bt<this.byteLength;bt+=2)vt.push(this.getUint16(rt+bt));return C$2(vt)}getInt8(rt){return this.dataView.getInt8(rt)}getUint8(rt){return this.dataView.getUint8(rt)}getInt16(rt,it=this.le){return this.dataView.getInt16(rt,it)}getInt32(rt,it=this.le){return this.dataView.getInt32(rt,it)}getUint16(rt,it=this.le){return this.dataView.getUint16(rt,it)}getUint32(rt,it=this.le){return this.dataView.getUint32(rt,it)}getFloat32(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getFloat64(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getFloat(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getDouble(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getUintBytes(rt,it,vt){switch(it){case 1:return this.getUint8(rt,vt);case 2:return this.getUint16(rt,vt);case 4:return this.getUint32(rt,vt);case 8:return this.getUint64&&this.getUint64(rt,vt)}}getUint(rt,it,vt){switch(it){case 8:return this.getUint8(rt,vt);case 16:return this.getUint16(rt,vt);case 32:return this.getUint32(rt,vt);case 64:return this.getUint64&&this.getUint64(rt,vt)}}toString(rt){return this.dataView.toString(rt,this.constructor.name)}ensureChunk(){}}function P$1(nt,rt){g$2(`${nt} '${rt}' was not loaded, try using full build of exifr.`)}class k$2 extends Map{constructor(rt){super(),this.kind=rt}get(rt,it){return this.has(rt)||P$1(this.kind,rt),it&&(rt in it||function(vt,bt){g$2(`Unknown ${vt} '${bt}'.`)}(this.kind,rt),it[rt].enabled||P$1(this.kind,rt)),super.get(rt)}keyList(){return Array.from(this.keys())}}var w$1=new k$2("file parser"),T$2=new k$2("segment parser"),A$2=new k$2("file reader");function D(nt,rt){return typeof nt=="string"?O$1(nt,rt):t$4&&!i$6&&nt instanceof HTMLImageElement?O$1(nt.src,rt):nt instanceof Uint8Array||nt instanceof ArrayBuffer||nt instanceof DataView?new I$1(nt):t$4&&nt instanceof Blob?x$3(nt,rt,"blob",R$2):void g$2("Invalid input argument")}function O$1(nt,rt){return(it=nt).startsWith("data:")||it.length>1e4?v$1(nt,rt,"base64"):n$4&&nt.includes("://")?x$3(nt,rt,"url",M$1):n$4?v$1(nt,rt,"fs"):t$4?x$3(nt,rt,"url",M$1):void g$2("Invalid input argument");var it}async function x$3(nt,rt,it,vt){return A$2.has(it)?v$1(nt,rt,it):vt?async function(bt,wt){let Tt=await wt(bt);return new I$1(Tt)}(nt,vt):void g$2(`Parser ${it} is not loaded`)}async function v$1(nt,rt,it){let vt=new(A$2.get(it))(nt,rt);return await vt.read(),vt}const M$1=nt=>h$3(nt).then(rt=>rt.arrayBuffer()),R$2=nt=>new Promise((rt,it)=>{let vt=new FileReader;vt.onloadend=()=>rt(vt.result||new ArrayBuffer),vt.onerror=it,vt.readAsArrayBuffer(nt)});class L$3 extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function U(nt,rt,it){let vt=new L$3;for(let[bt,wt]of it)vt.set(bt,wt);if(Array.isArray(rt))for(let bt of rt)nt.set(bt,vt);else nt.set(rt,vt);return vt}function F(nt,rt,it){let vt,bt=nt.get(rt);for(vt of it)bt.set(vt[0],vt[1])}const E$1=new Map,B=new Map,N$1=new Map,G=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],V$1=["jfif","xmp","icc","iptc","ihdr"],z$1=["tiff",...V$1],H$2=["ifd0","ifd1","exif","gps","interop"],j=[...z$1,...H$2],W$1=["makerNote","userComment"],K$1=["translateKeys","translateValues","reviveValues","multiSegment"],X=[...K$1,"sanitize","mergeOutput","silentErrors"];class _$2{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Y extends _$2{get needed(){return this.enabled||this.deps.size>0}constructor(rt,it,vt,bt){if(super(),c$3(this,"enabled",!1),c$3(this,"skip",new Set),c$3(this,"pick",new Set),c$3(this,"deps",new Set),c$3(this,"translateKeys",!1),c$3(this,"translateValues",!1),c$3(this,"reviveValues",!1),this.key=rt,this.enabled=it,this.parse=this.enabled,this.applyInheritables(bt),this.canBeFiltered=H$2.includes(rt),this.canBeFiltered&&(this.dict=E$1.get(rt)),vt!==void 0)if(Array.isArray(vt))this.parse=this.enabled=!0,this.canBeFiltered&&vt.length>0&&this.translateTagSet(vt,this.pick);else if(typeof vt=="object"){if(this.enabled=!0,this.parse=vt.parse!==!1,this.canBeFiltered){let{pick:wt,skip:Tt}=vt;wt&&wt.length>0&&this.translateTagSet(wt,this.pick),Tt&&Tt.length>0&&this.translateTagSet(Tt,this.skip)}this.applyInheritables(vt)}else vt===!0||vt===!1?this.parse=this.enabled=vt:g$2(`Invalid options argument: ${vt}`)}applyInheritables(rt){let it,vt;for(it of K$1)vt=rt[it],vt!==void 0&&(this[it]=vt)}translateTagSet(rt,it){if(this.dict){let vt,bt,{tagKeys:wt,tagValues:Tt}=this.dict;for(vt of rt)typeof vt=="string"?(bt=Tt.indexOf(vt),bt===-1&&(bt=wt.indexOf(Number(vt))),bt!==-1&&it.add(Number(wt[bt]))):it.add(vt)}else for(let vt of rt)it.add(vt)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ee(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ee(this.pick,this.deps)}}var $$1={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},J=new Map;class q extends _$2{static useCached(rt){let it=J.get(rt);return it!==void 0||(it=new this(rt),J.set(rt,it)),it}constructor(rt){super(),rt===!0?this.setupFromTrue():rt===void 0?this.setupFromUndefined():Array.isArray(rt)?this.setupFromArray(rt):typeof rt=="object"?this.setupFromObject(rt):g$2(`Invalid options argument ${rt}`),this.firstChunkSize===void 0&&(this.firstChunkSize=t$4?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W$1)this[rt]=$$1[rt];for(rt of j)this[rt]=new Y(rt,$$1[rt],void 0,this)}setupFromTrue(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W$1)this[rt]=!0;for(rt of j)this[rt]=new Y(rt,!0,void 0,this)}setupFromArray(rt){let it;for(it of G)this[it]=$$1[it];for(it of X)this[it]=$$1[it];for(it of W$1)this[it]=$$1[it];for(it of j)this[it]=new Y(it,!1,void 0,this);this.setupGlobalFilters(rt,void 0,H$2)}setupFromObject(rt){let it;for(it of(H$2.ifd0=H$2.ifd0||H$2.image,H$2.ifd1=H$2.ifd1||H$2.thumbnail,Object.assign(this,rt),G))this[it]=Z$1(rt[it],$$1[it]);for(it of X)this[it]=Z$1(rt[it],$$1[it]);for(it of W$1)this[it]=Z$1(rt[it],$$1[it]);for(it of z$1)this[it]=new Y(it,$$1[it],rt[it],this);for(it of H$2)this[it]=new Y(it,$$1[it],rt[it],this.tiff);this.setupGlobalFilters(rt.pick,rt.skip,H$2,j),rt.tiff===!0?this.batchEnableWithBool(H$2,!0):rt.tiff===!1?this.batchEnableWithUserValue(H$2,rt):Array.isArray(rt.tiff)?this.setupGlobalFilters(rt.tiff,void 0,H$2):typeof rt.tiff=="object"&&this.setupGlobalFilters(rt.tiff.pick,rt.tiff.skip,H$2)}batchEnableWithBool(rt,it){for(let vt of rt)this[vt].enabled=it}batchEnableWithUserValue(rt,it){for(let vt of rt){let bt=it[vt];this[vt].enabled=bt!==!1&&bt!==void 0}}setupGlobalFilters(rt,it,vt,bt=vt){if(rt&&rt.length){for(let Tt of bt)this[Tt].enabled=!1;let wt=Q(rt,vt);for(let[Tt,kt]of wt)ee(this[Tt].pick,kt),this[Tt].enabled=!0}else if(it&&it.length){let wt=Q(it,vt);for(let[Tt,kt]of wt)ee(this[Tt].skip,kt)}}filterNestedSegmentTags(){let{ifd0:rt,exif:it,xmp:vt,iptc:bt,icc:wt}=this;this.makerNote?it.deps.add(37500):it.skip.add(37500),this.userComment?it.deps.add(37510):it.skip.add(37510),vt.enabled||rt.skip.add(700),bt.enabled||rt.skip.add(33723),wt.enabled||rt.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:rt,exif:it,gps:vt,interop:bt}=this;bt.needed&&(it.deps.add(40965),rt.deps.add(40965)),it.needed&&rt.deps.add(34665),vt.needed&&rt.deps.add(34853),this.tiff.enabled=H$2.some(wt=>this[wt].enabled===!0)||this.makerNote||this.userComment;for(let wt of H$2)this[wt].finalizeFilters()}get onlyTiff(){return!V$1.map(rt=>this[rt].enabled).some(rt=>rt===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let rt of z$1)this[rt].enabled&&!T$2.has(rt)&&P$1("segment parser",rt)}}function Q(nt,rt){let it,vt,bt,wt,Tt=[];for(bt of rt){for(wt of(it=E$1.get(bt),vt=[],it))(nt.includes(wt[0])||nt.includes(wt[1]))&&vt.push(wt[0]);vt.length&&Tt.push([bt,vt])}return Tt}function Z$1(nt,rt){return nt!==void 0?nt:rt!==void 0?rt:void 0}function ee(nt,rt){for(let it of rt)nt.add(it)}c$3(q,"default",$$1);class te{constructor(rt){c$3(this,"parsers",{}),c$3(this,"output",{}),c$3(this,"errors",[]),c$3(this,"pushToErrors",it=>this.errors.push(it)),this.options=q.useCached(rt)}async read(rt){this.file=await D(rt,this.options)}setup(){if(this.fileParser)return;let{file:rt}=this,it=rt.getUint16(0);for(let[vt,bt]of w$1)if(bt.canHandle(rt,it))return this.fileParser=new bt(this.options,this.file,this.parsers),rt[vt]=!0;this.file.close&&this.file.close(),g$2("Unknown file format")}async parse(){let{output:rt,errors:it}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),it.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&it.length>0&&(rt.errors=it),f$3(rt)}async executeParsers(){let{output:rt}=this;await this.fileParser.parse();let it=Object.values(this.parsers).map(async vt=>{let bt=await vt.parse();vt.assignToOutput(rt,bt)});this.options.silentErrors&&(it=it.map(vt=>vt.catch(this.pushToErrors))),await Promise.all(it)}async extractThumbnail(){this.setup();let{options:rt,file:it}=this,vt=T$2.get("tiff",rt);var bt;if(it.tiff?bt={start:0,type:"tiff"}:it.jpeg&&(bt=await this.fileParser.getOrFindSegment("tiff")),bt===void 0)return;let wt=await this.fileParser.ensureSegmentChunk(bt),Tt=this.parsers.tiff=new vt(wt,rt,it),kt=await Tt.extractThumbnail();return it.close&&it.close(),kt}}async function ie(nt,rt){let it=new te(rt);return await it.read(nt),it.parse()}var ne=Object.freeze({__proto__:null,parse:ie,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q});class se{constructor(rt,it,vt){c$3(this,"errors",[]),c$3(this,"ensureSegmentChunk",async bt=>{let wt=bt.start,Tt=bt.size||65536;if(this.file.chunked)if(this.file.available(wt,Tt))bt.chunk=this.file.subarray(wt,Tt);else try{bt.chunk=await this.file.readChunk(wt,Tt)}catch(kt){g$2(`Couldn't read segment: ${JSON.stringify(bt)}. ${kt.message}`)}else this.file.byteLength>wt+Tt?bt.chunk=this.file.subarray(wt,Tt):bt.size===void 0?bt.chunk=this.file.subarray(wt):g$2("Segment unreachable: "+JSON.stringify(bt));return bt.chunk}),this.extendOptions&&this.extendOptions(rt),this.options=rt,this.file=it,this.parsers=vt}injectSegment(rt,it){this.options[rt].enabled&&this.createParser(rt,it)}createParser(rt,it){let vt=new(T$2.get(rt))(it,this.options,this.file);return this.parsers[rt]=vt}createParsers(rt){for(let it of rt){let{type:vt,chunk:bt}=it,wt=this.options[vt];if(wt&&wt.enabled){let Tt=this.parsers[vt];Tt&&Tt.append||Tt||this.createParser(vt,bt)}}}async readSegments(rt){let it=rt.map(this.ensureSegmentChunk);await Promise.all(it)}}class re$1{static findPosition(rt,it){let vt=rt.getUint16(it+2)+2,bt=typeof this.headerLength=="function"?this.headerLength(rt,it,vt):this.headerLength,wt=it+bt,Tt=vt-bt;return{offset:it,length:vt,headerLength:bt,start:wt,size:Tt,end:wt+Tt}}static parse(rt,it={}){return new this(rt,new q({[this.type]:it}),rt).parse()}normalizeInput(rt){return rt instanceof I$1?rt:new I$1(rt)}constructor(rt,it={},vt){c$3(this,"errors",[]),c$3(this,"raw",new Map),c$3(this,"handleError",bt=>{if(!this.options.silentErrors)throw bt;this.errors.push(bt.message)}),this.chunk=this.normalizeInput(rt),this.file=vt,this.type=this.constructor.type,this.globalOptions=this.options=it,this.localOptions=it[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(rt,it){let vt=N$1.get(it),bt=B.get(it),wt=E$1.get(it),Tt=this.options[it],kt=Tt.reviveValues&&!!vt,Lt=Tt.translateValues&&!!bt,Mt=Tt.translateKeys&&!!wt,Nt={};for(let[zt,Ht]of rt)kt&&vt.has(zt)?Ht=vt.get(zt)(Ht):Lt&&bt.has(zt)&&(Ht=this.translateValue(Ht,bt.get(zt))),Mt&&wt.has(zt)&&(zt=wt.get(zt)||zt),Nt[zt]=Ht;return Nt}translateValue(rt,it){return it[rt]||it.DEFAULT||rt}assignToOutput(rt,it){this.assignObjectToOutput(rt,this.constructor.type,it)}assignObjectToOutput(rt,it,vt){if(this.globalOptions.mergeOutput)return Object.assign(rt,vt);rt[it]?Object.assign(rt[it],vt):rt[it]=vt}}c$3(re$1,"headerLength",4),c$3(re$1,"type",void 0),c$3(re$1,"multiSegment",!1),c$3(re$1,"canHandle",()=>!1);function ae(nt){return nt===192||nt===194||nt===196||nt===219||nt===221||nt===218||nt===254}function oe(nt){return nt>=224&&nt<=239}function le(nt,rt,it){for(let[vt,bt]of T$2)if(bt.canHandle(nt,rt,it))return vt}class he extends se{constructor(...rt){super(...rt),c$3(this,"appSegments",[]),c$3(this,"jpegSegments",[]),c$3(this,"unknownSegments",[])}static canHandle(rt,it){return it===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(rt){rt===!0?(this.findAll=!0,this.wanted=new Set(T$2.keyList())):(rt=rt===void 0?T$2.keyList().filter(it=>this.options[it].enabled):rt.filter(it=>this.options[it].enabled&&T$2.has(it)),this.findAll=!1,this.remaining=new Set(rt),this.wanted=new Set(rt)),this.unfinishedMultiSegment=!1}async findAppSegments(rt=0,it){this.setupSegmentFinderArgs(it);let{file:vt,findAll:bt,wanted:wt,remaining:Tt}=this;if(!bt&&this.file.chunked&&(bt=Array.from(wt).some(kt=>{let Lt=T$2.get(kt),Mt=this.options[kt];return Lt.multiSegment&&Mt.multiSegment}),bt&&await this.file.readWhole()),rt=this.findAppSegmentsInRange(rt,vt.byteLength),!this.options.onlyTiff&&vt.chunked){let kt=!1;for(;Tt.size>0&&!kt&&(vt.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:Lt}=vt,Mt=this.appSegments.some(Nt=>!this.file.available(Nt.offset||Nt.start,Nt.length||Nt.size));if(kt=rt>Lt&&!Mt?!await vt.readNextChunk(rt):!await vt.readNextChunk(Lt),(rt=this.findAppSegmentsInRange(rt,vt.byteLength))===void 0)return}}}findAppSegmentsInRange(rt,it){it-=2;let vt,bt,wt,Tt,kt,Lt,{file:Mt,findAll:Nt,wanted:zt,remaining:Ht,options:Wt}=this;for(;rt<it;rt++)if(Mt.getUint8(rt)===255){if(vt=Mt.getUint8(rt+1),oe(vt)){if(bt=Mt.getUint16(rt+2),wt=le(Mt,rt,bt),wt&&zt.has(wt)&&(Tt=T$2.get(wt),kt=Tt.findPosition(Mt,rt),Lt=Wt[wt],kt.type=wt,this.appSegments.push(kt),!Nt&&(Tt.multiSegment&&Lt.multiSegment?(this.unfinishedMultiSegment=kt.chunkNumber<kt.chunkCount,this.unfinishedMultiSegment||Ht.delete(wt)):Ht.delete(wt),Ht.size===0)))break;Wt.recordUnknownSegments&&(kt=re$1.findPosition(Mt,rt),kt.marker=vt,this.unknownSegments.push(kt)),rt+=bt+1}else if(ae(vt)){if(bt=Mt.getUint16(rt+2),vt===218&&Wt.stopAfterSos!==!1)return;Wt.recordJpegSegments&&this.jpegSegments.push({offset:rt,length:bt,marker:vt}),rt+=bt+1}}return rt}mergeMultiSegments(){if(!this.appSegments.some(it=>it.multiSegment))return;let rt=function(it,vt){let bt,wt,Tt,kt=new Map;for(let Lt=0;Lt<it.length;Lt++)bt=it[Lt],wt=bt[vt],kt.has(wt)?Tt=kt.get(wt):kt.set(wt,Tt=[]),Tt.push(bt);return Array.from(kt)}(this.appSegments,"type");this.mergedAppSegments=rt.map(([it,vt])=>{let bt=T$2.get(it,this.options);return bt.handleMultiSegments?{type:it,chunk:bt.handleMultiSegments(vt)}:vt[0]})}getSegment(rt){return this.appSegments.find(it=>it.type===rt)}async getOrFindSegment(rt){let it=this.getSegment(rt);return it===void 0&&(await this.findAppSegments(0,[rt]),it=this.getSegment(rt)),it}}c$3(he,"type","jpeg"),w$1.set("jpeg",he);const ue=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ce extends re$1{parseHeader(){var rt=this.chunk.getUint16();rt===18761?this.le=!0:rt===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(rt,it,vt=new Map){let{pick:bt,skip:wt}=this.options[it];bt=new Set(bt);let Tt=bt.size>0,kt=wt.size===0,Lt=this.chunk.getUint16(rt);rt+=2;for(let Mt=0;Mt<Lt;Mt++){let Nt=this.chunk.getUint16(rt);if(Tt){if(bt.has(Nt)&&(vt.set(Nt,this.parseTag(rt,Nt,it)),bt.delete(Nt),bt.size===0))break}else!kt&&wt.has(Nt)||vt.set(Nt,this.parseTag(rt,Nt,it));rt+=12}return vt}parseTag(rt,it,vt){let{chunk:bt}=this,wt=bt.getUint16(rt+2),Tt=bt.getUint32(rt+4),kt=ue[wt];if(kt*Tt<=4?rt+=8:rt=bt.getUint32(rt+8),(wt<1||wt>13)&&g$2(`Invalid TIFF value type. block: ${vt.toUpperCase()}, tag: ${it.toString(16)}, type: ${wt}, offset ${rt}`),rt>bt.byteLength&&g$2(`Invalid TIFF value offset. block: ${vt.toUpperCase()}, tag: ${it.toString(16)}, type: ${wt}, offset ${rt} is outside of chunk size ${bt.byteLength}`),wt===1)return bt.getUint8Array(rt,Tt);if(wt===2)return m$3(bt.getString(rt,Tt));if(wt===7)return bt.getUint8Array(rt,Tt);if(Tt===1)return this.parseTagValue(wt,rt);{let Lt=new(function(Nt){switch(Nt){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(wt))(Tt),Mt=kt;for(let Nt=0;Nt<Tt;Nt++)Lt[Nt]=this.parseTagValue(wt,rt),rt+=Mt;return Lt}}parseTagValue(rt,it){let{chunk:vt}=this;switch(rt){case 1:return vt.getUint8(it);case 3:return vt.getUint16(it);case 4:return vt.getUint32(it);case 5:return vt.getUint32(it)/vt.getUint32(it+4);case 6:return vt.getInt8(it);case 8:return vt.getInt16(it);case 9:return vt.getInt32(it);case 10:return vt.getInt32(it)/vt.getInt32(it+4);case 11:return vt.getFloat(it);case 12:return vt.getDouble(it);case 13:return vt.getUint32(it);default:g$2(`Invalid tiff type ${rt}`)}}}class fe extends ce{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1165519206&&rt.getUint16(it+8)===0}async parse(){this.parseHeader();let{options:rt}=this;return rt.ifd0.enabled&&await this.parseIfd0Block(),rt.exif.enabled&&await this.safeParse("parseExifBlock"),rt.gps.enabled&&await this.safeParse("parseGpsBlock"),rt.interop.enabled&&await this.safeParse("parseInteropBlock"),rt.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(rt){let it=this[rt]();return it.catch!==void 0&&(it=it.catch(this.handleError)),it}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let rt=this.chunk.getUint16(this.ifd0Offset),it=this.ifd0Offset+2+12*rt;this.ifd1Offset=this.chunk.getUint32(it)}}parseBlock(rt,it){let vt=new Map;return this[it]=vt,this.parseTags(rt,it,vt),vt}async parseIfd0Block(){if(this.ifd0)return;let{file:rt}=this;this.findIfd0Offset(),this.ifd0Offset<8&&g$2("Malformed EXIF data"),!rt.chunked&&this.ifd0Offset>rt.byteLength&&g$2(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${rt.byteLength}`),rt.tiff&&await rt.ensureChunk(this.ifd0Offset,S$1(this.options));let it=this.parseBlock(this.ifd0Offset,"ifd0");return it.size!==0?(this.exifOffset=it.get(34665),this.interopOffset=it.get(40965),this.gpsOffset=it.get(34853),this.xmp=it.get(700),this.iptc=it.get(33723),this.icc=it.get(34675),this.options.sanitize&&(it.delete(34665),it.delete(40965),it.delete(34853),it.delete(700),it.delete(33723),it.delete(34675)),it):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,S$1(this.options));let rt=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=rt.get(40965)),this.makerNote=rt.get(37500),this.userComment=rt.get(37510),this.options.sanitize&&(rt.delete(40965),rt.delete(37500),rt.delete(37510)),this.unpack(rt,41728),this.unpack(rt,41729),rt}unpack(rt,it){let vt=rt.get(it);vt&&vt.length===1&&rt.set(it,vt[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let rt=this.parseBlock(this.gpsOffset,"gps");return rt&&rt.has(2)&&rt.has(4)&&(rt.set("latitude",de(...rt.get(2),rt.get(1))),rt.set("longitude",de(...rt.get(4),rt.get(3)))),rt}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(rt=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||rt))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let rt=this.ifd1.get(513),it=this.ifd1.get(514);return this.chunk.getUint8Array(rt,it)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let rt,it,vt,bt={};for(it of H$2)if(rt=this[it],!p$2(rt))if(vt=this.canTranslate?this.translateBlock(rt,it):Object.fromEntries(rt),this.options.mergeOutput){if(it==="ifd1")continue;Object.assign(bt,vt)}else bt[it]=vt;return this.makerNote&&(bt.makerNote=this.makerNote),this.userComment&&(bt.userComment=this.userComment),bt}assignToOutput(rt,it){if(this.globalOptions.mergeOutput)Object.assign(rt,it);else for(let[vt,bt]of Object.entries(it))this.assignObjectToOutput(rt,vt,bt)}}function de(nt,rt,it,vt){var bt=nt+rt/60+it/3600;return vt!=="S"&&vt!=="W"||(bt*=-1),bt}c$3(fe,"type","tiff"),c$3(fe,"headerLength",10),T$2.set("tiff",fe);var pe=Object.freeze({__proto__:null,default:ne,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q,parse:ie});const ge={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},me=Object.assign({},ge,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Se(nt){let rt=new te(me);await rt.read(nt);let it=await rt.parse();if(it&&it.gps){let{latitude:vt,longitude:bt}=it.gps;return{latitude:vt,longitude:bt}}}const Ce=Object.assign({},ge,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ye(nt){let rt=new te(Ce);await rt.read(nt);let it=await rt.extractThumbnail();return it&&a$3?s$5.from(it):it}async function be(nt){let rt=await this.thumbnail(nt);if(rt!==void 0){let it=new Blob([rt]);return URL.createObjectURL(it)}}const Ie=Object.assign({},ge,{firstChunkSize:4e4,ifd0:[274]});async function Pe(nt){let rt=new te(Ie);await rt.read(nt);let it=await rt.parse();if(it&&it.ifd0)return it.ifd0[274]}const ke=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let we=!0,Te=!0;if(typeof navigator=="object"){let nt=navigator.userAgent;if(nt.includes("iPad")||nt.includes("iPhone")){let rt=nt.match(/OS (\d+)_(\d+)/);if(rt){let[,it,vt]=rt;we=Number(it)+.1*Number(vt)<13.4,Te=!1}}else if(nt.includes("OS X 10")){let[,rt]=nt.match(/OS X 10[_.](\d+)/);we=Te=Number(rt)<15}if(nt.includes("Chrome/")){let[,rt]=nt.match(/Chrome\/(\d+)/);we=Te=Number(rt)<81}else if(nt.includes("Firefox/")){let[,rt]=nt.match(/Firefox\/(\d+)/);we=Te=Number(rt)<77}}async function Ae(nt){let rt=await Pe(nt);return Object.assign({canvas:we,css:Te},ke[rt])}class De extends I$1{constructor(...rt){super(...rt),c$3(this,"ranges",new Oe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(rt,it,vt){if(rt===0&&this.byteLength===0&&vt){let bt=new DataView(vt.buffer||vt,vt.byteOffset,vt.byteLength);this._swapDataView(bt)}else{let bt=rt+it;if(bt>this.byteLength){let{dataView:wt}=this._extend(bt);this._swapDataView(wt)}}}_extend(rt){let it;it=a$3?s$5.allocUnsafe(rt):new Uint8Array(rt);let vt=new DataView(it.buffer,it.byteOffset,it.byteLength);return it.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:it,dataView:vt}}subarray(rt,it,vt=!1){return it=it||this._lengthToEnd(rt),vt&&this._tryExtend(rt,it),this.ranges.add(rt,it),super.subarray(rt,it)}set(rt,it,vt=!1){vt&&this._tryExtend(it,rt.byteLength,rt);let bt=super.set(rt,it);return this.ranges.add(it,bt.byteLength),bt}async ensureChunk(rt,it){this.chunked&&(this.ranges.available(rt,it)||await this.readChunk(rt,it))}available(rt,it){return this.ranges.available(rt,it)}}class Oe{constructor(){c$3(this,"list",[])}get length(){return this.list.length}add(rt,it,vt=0){let bt=rt+it,wt=this.list.filter(Tt=>xe(rt,Tt.offset,bt)||xe(rt,Tt.end,bt));if(wt.length>0){rt=Math.min(rt,...wt.map(kt=>kt.offset)),bt=Math.max(bt,...wt.map(kt=>kt.end)),it=bt-rt;let Tt=wt.shift();Tt.offset=rt,Tt.length=it,Tt.end=bt,this.list=this.list.filter(kt=>!wt.includes(kt))}else this.list.push({offset:rt,length:it,end:bt})}available(rt,it){let vt=rt+it;return this.list.some(bt=>bt.offset<=rt&&vt<=bt.end)}}function xe(nt,rt,it){return nt<=rt&&rt<=it}class ve extends De{constructor(rt,it){super(0),c$3(this,"chunksRead",0),this.input=rt,this.options=it}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(rt=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let it=this.options.chunkSize,vt=await this.readChunk(rt,it);return!!vt&&vt.byteLength===it}async readChunk(rt,it){if(this.chunksRead++,(it=this.safeWrapAddress(rt,it))!==0)return this._readChunk(rt,it)}safeWrapAddress(rt,it){return this.size!==void 0&&rt+it>this.size?Math.max(0,this.size-rt):it}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}A$2.set("blob",class extends ve{async readWhole(){this.chunked=!1;let nt=await R$2(this.input);this._swapArrayBuffer(nt)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(nt,rt){let it=rt?nt+rt:void 0,vt=this.input.slice(nt,it),bt=await R$2(vt);return this.set(bt,nt,!0)}});var Me=Object.freeze({__proto__:null,default:pe,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});A$2.set("url",class extends ve{async readWhole(){this.chunked=!1;let nt=await M$1(this.input);nt instanceof ArrayBuffer?this._swapArrayBuffer(nt):nt instanceof Uint8Array&&this._swapBuffer(nt)}async _readChunk(nt,rt){let it=rt?nt+rt-1:void 0,vt=this.options.httpHeaders||{};(nt||it)&&(vt.range=`bytes=${[nt,it].join("-")}`);let bt=await h$3(this.input,{headers:vt}),wt=await bt.arrayBuffer(),Tt=wt.byteLength;if(bt.status!==416)return Tt!==rt&&(this.size=nt+Tt),this.set(wt,nt,!0)}});I$1.prototype.getUint64=function(nt){let rt=this.getUint32(nt),it=this.getUint32(nt+4);return rt<1048575?rt<<32|it:typeof r$2!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),r$2(rt)<<r$2(32)|r$2(it)):void g$2("Trying to read 64b value but JS can only handle 53b numbers.")};class Re extends se{parseBoxes(rt=0){let it=[];for(;rt<this.file.byteLength-4;){let vt=this.parseBoxHead(rt);if(it.push(vt),vt.length===0)break;rt+=vt.length}return it}parseSubBoxes(rt){rt.boxes=this.parseBoxes(rt.start)}findBox(rt,it){return rt.boxes===void 0&&this.parseSubBoxes(rt),rt.boxes.find(vt=>vt.kind===it)}parseBoxHead(rt){let it=this.file.getUint32(rt),vt=this.file.getString(rt+4,4),bt=rt+8;return it===1&&(it=this.file.getUint64(rt+8),bt+=8),{offset:rt,length:it,kind:vt,start:bt}}parseBoxFullHead(rt){if(rt.version!==void 0)return;let it=this.file.getUint32(rt.start);rt.version=it>>24,rt.start+=4}}class Le extends Re{static canHandle(rt,it){if(it!==0)return!1;let vt=rt.getUint16(2);if(vt>50)return!1;let bt=16,wt=[];for(;bt<vt;)wt.push(rt.getString(bt,4)),bt+=4;return wt.includes(this.type)}async parse(){let rt=this.file.getUint32(0),it=this.parseBoxHead(rt);for(;it.kind!=="meta";)rt+=it.length,await this.file.ensureChunk(rt,16),it=this.parseBoxHead(rt);await this.file.ensureChunk(it.offset,it.length),this.parseBoxFullHead(it),this.parseSubBoxes(it),this.options.icc.enabled&&await this.findIcc(it),this.options.tiff.enabled&&await this.findExif(it)}async registerSegment(rt,it,vt){await this.file.ensureChunk(it,vt);let bt=this.file.subarray(it,vt);this.createParser(rt,bt)}async findIcc(rt){let it=this.findBox(rt,"iprp");if(it===void 0)return;let vt=this.findBox(it,"ipco");if(vt===void 0)return;let bt=this.findBox(vt,"colr");bt!==void 0&&await this.registerSegment("icc",bt.offset+12,bt.length)}async findExif(rt){let it=this.findBox(rt,"iinf");if(it===void 0)return;let vt=this.findBox(rt,"iloc");if(vt===void 0)return;let bt=this.findExifLocIdInIinf(it),wt=this.findExtentInIloc(vt,bt);if(wt===void 0)return;let[Tt,kt]=wt;await this.file.ensureChunk(Tt,kt);let Lt=4+this.file.getUint32(Tt);Tt+=Lt,kt-=Lt,await this.registerSegment("tiff",Tt,kt)}findExifLocIdInIinf(rt){this.parseBoxFullHead(rt);let it,vt,bt,wt,Tt=rt.start,kt=this.file.getUint16(Tt);for(Tt+=2;kt--;){if(it=this.parseBoxHead(Tt),this.parseBoxFullHead(it),vt=it.start,it.version>=2&&(bt=it.version===3?4:2,wt=this.file.getString(vt+bt+2,4),wt==="Exif"))return this.file.getUintBytes(vt,bt);Tt+=it.length}}get8bits(rt){let it=this.file.getUint8(rt);return[it>>4,15&it]}findExtentInIloc(rt,it){this.parseBoxFullHead(rt);let vt=rt.start,[bt,wt]=this.get8bits(vt++),[Tt,kt]=this.get8bits(vt++),Lt=rt.version===2?4:2,Mt=rt.version===1||rt.version===2?2:0,Nt=kt+bt+wt,zt=rt.version===2?4:2,Ht=this.file.getUintBytes(vt,zt);for(vt+=zt;Ht--;){let Wt=this.file.getUintBytes(vt,Lt);vt+=Lt+Mt+2+Tt;let Zt=this.file.getUint16(vt);if(vt+=2,Wt===it)return Zt>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(vt+kt,bt),this.file.getUintBytes(vt+kt+bt,wt)];vt+=Zt*Nt}}}class Ue extends Le{}c$3(Ue,"type","heic");class Fe extends Le{}c$3(Fe,"type","avif"),w$1.set("heic",Ue),w$1.set("avif",Fe),U(E$1,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),U(E$1,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),U(E$1,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),U(B,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ee=U(B,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Be={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ee.set(37392,Be),Ee.set(41488,Be);const Ne={0:"Normal",1:"Low",2:"High"};function Ge(nt){return typeof nt=="object"&&nt.length!==void 0?nt[0]:nt}function Ve(nt){let rt=Array.from(nt).slice(1);return rt[1]>15&&(rt=rt.map(it=>String.fromCharCode(it))),rt[2]!=="0"&&rt[2]!==0||rt.pop(),rt.join(".")}function ze(nt){if(typeof nt=="string"){var[rt,it,vt,bt,wt,Tt]=nt.trim().split(/[-: ]/g).map(Number),kt=new Date(rt,it-1,vt);return Number.isNaN(bt)||Number.isNaN(wt)||Number.isNaN(Tt)||(kt.setHours(bt),kt.setMinutes(wt),kt.setSeconds(Tt)),Number.isNaN(+kt)?nt:kt}}function He(nt){if(typeof nt=="string")return nt;let rt=[];if(nt[1]===0&&nt[nt.length-1]===0)for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it+1],nt[it]));else for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it],nt[it+1]));return m$3(String.fromCodePoint(...rt))}function je(nt,rt){return nt<<8|rt}Ee.set(41992,Ne),Ee.set(41993,Ne),Ee.set(41994,Ne),U(N$1,["ifd0","ifd1"],[[50827,function(nt){return typeof nt!="string"?b$2(nt):nt}],[306,ze],[40091,He],[40092,He],[40093,He],[40094,He],[40095,He]]),U(N$1,"exif",[[40960,Ve],[36864,Ve],[36867,ze],[36868,ze],[40962,Ge],[40963,Ge]]),U(N$1,"gps",[[0,nt=>Array.from(nt).join(".")],[7,nt=>Array.from(nt).join(":")]]);class We extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1752462448&&rt.getString(it+4,20)==="http://ns.adobe.com/"}static headerLength(rt,it){return rt.getString(it+4,34)==="http://ns.adobe.com/xmp/extension/"?79:4+28+1}static findPosition(rt,it){let vt=super.findPosition(rt,it);return vt.multiSegment=vt.extended=vt.headerLength===79,vt.multiSegment?(vt.chunkCount=rt.getUint8(it+72),vt.chunkNumber=rt.getUint8(it+76),rt.getUint8(it+77)!==0&&vt.chunkNumber++):(vt.chunkCount=1/0,vt.chunkNumber=-1),vt}static handleMultiSegments(rt){return rt.map(it=>it.chunk.getString()).join("")}normalizeInput(rt){return typeof rt=="string"?rt:I$1.from(rt).getString()}parse(rt=this.chunk){if(!this.localOptions.parse)return rt;rt=function(wt){let Tt={},kt={};for(let Lt of Ze)Tt[Lt]=[],kt[Lt]=0;return wt.replace(et,(Lt,Mt,Nt)=>{if(Mt==="<"){let zt=++kt[Nt];return Tt[Nt].push(zt),`${Lt}#${zt}`}return`${Lt}#${Tt[Nt].pop()}`})}(rt);let it=Xe.findAll(rt,"rdf","Description");it.length===0&&it.push(new Xe("rdf","Description",void 0,rt));let vt,bt={};for(let wt of it)for(let Tt of wt.properties)vt=Je(Tt.ns,bt),_e(Tt,vt);return function(wt){let Tt;for(let kt in wt)Tt=wt[kt]=f$3(wt[kt]),Tt===void 0&&delete wt[kt];return f$3(wt)}(bt)}assignToOutput(rt,it){if(this.localOptions.parse)for(let[vt,bt]of Object.entries(it))switch(vt){case"tiff":this.assignObjectToOutput(rt,"ifd0",bt);break;case"exif":this.assignObjectToOutput(rt,"exif",bt);break;case"xmlns":break;default:this.assignObjectToOutput(rt,vt,bt)}else rt.xmp=it}}c$3(We,"type","xmp"),c$3(We,"multiSegment",!0),T$2.set("xmp",We);class Ke{static findAll(rt){return qe(rt,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ke.unpackMatch)}static unpackMatch(rt){let it=rt[1],vt=rt[2],bt=rt[3].slice(1,-1);return bt=Qe(bt),new Ke(it,vt,bt)}constructor(rt,it,vt){this.ns=rt,this.name=it,this.value=vt}serialize(){return this.value}}class Xe{static findAll(rt,it,vt){if(it!==void 0||vt!==void 0){it=it||"[\\w\\d-]+",vt=vt||"[\\w\\d-]+";var bt=new RegExp(`<(${it}):(${vt})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else bt=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return qe(rt,bt).map(Xe.unpackMatch)}static unpackMatch(rt){let it=rt[1],vt=rt[2],bt=rt[4],wt=rt[8];return new Xe(it,vt,bt,wt)}constructor(rt,it,vt,bt){this.ns=rt,this.name=it,this.attrString=vt,this.innerXml=bt,this.attrs=Ke.findAll(vt),this.children=Xe.findAll(bt),this.value=this.children.length===0?Qe(bt):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:rt,name:it}=this;return rt==="rdf"&&(it==="Seq"||it==="Bag"||it==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return $e(this.children.map(Ye));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let rt={};for(let it of this.properties)_e(it,rt);return this.value!==void 0&&(rt.value=this.value),f$3(rt)}}function _e(nt,rt){let it=nt.serialize();it!==void 0&&(rt[nt.name]=it)}var Ye=nt=>nt.serialize(),$e=nt=>nt.length===1?nt[0]:nt,Je=(nt,rt)=>rt[nt]?rt[nt]:rt[nt]={};function qe(nt,rt){let it,vt=[];if(!nt)return vt;for(;(it=rt.exec(nt))!==null;)vt.push(it);return vt}function Qe(nt){if(function(vt){return vt==null||vt==="null"||vt==="undefined"||vt===""||vt.trim()===""}(nt))return;let rt=Number(nt);if(!Number.isNaN(rt))return rt;let it=nt.toLowerCase();return it==="true"||it!=="false"&&nt.trim()}const Ze=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],et=new RegExp(`(<|\\/)(${Ze.join("|")})`,"g");var tt=Object.freeze({__proto__:null,default:Me,Exifr:te,fileParsers:w$1,segmentParsers:T$2,fileReaders:A$2,tagKeys:E$1,tagValues:B,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$2,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$2,segmentsAndBlocks:j,tiffExtractables:W$1,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});let at=l$4("fs",nt=>nt.promises);A$2.set("fs",class extends ve{async readWhole(){this.chunked=!1,this.fs=await at;let nt=await this.fs.readFile(this.input);this._swapBuffer(nt)}async readChunked(){this.chunked=!0,this.fs=await at,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(nt,rt){this.fh===void 0&&await this.open(),nt+rt>this.size&&(rt=this.size-nt);var it=this.subarray(nt,rt,!0);return await this.fh.read(it.dataView,0,rt,nt),it}async close(){if(this.fh){let nt=this.fh;this.fh=void 0,await nt.close()}}});A$2.set("base64",class extends ve{constructor(...nt){super(...nt),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(nt,rt){let it,vt,bt=this.input;nt===void 0?(nt=0,it=0,vt=0):(it=4*Math.floor(nt/3),vt=nt-it/4*3),rt===void 0&&(rt=this.size);let wt=nt+rt,Tt=it+4*Math.ceil(wt/3);bt=bt.slice(it,Tt);let kt=Math.min(rt,this.size-nt);if(a$3){let Lt=s$5.from(bt,"base64").slice(vt,vt+kt);return this.set(Lt,nt,!0)}{let Lt=this.subarray(nt,kt,!0),Mt=atob(bt),Nt=Lt.toUint8();for(let zt=0;zt<kt;zt++)Nt[zt]=Mt.charCodeAt(vt+zt);return Lt}}});class ot extends se{static canHandle(rt,it){return it===18761||it===19789}extendOptions(rt){let{ifd0:it,xmp:vt,iptc:bt,icc:wt}=rt;vt.enabled&&it.deps.add(700),bt.enabled&&it.deps.add(33723),wt.enabled&&it.deps.add(34675),it.finalizeFilters()}async parse(){let{tiff:rt,xmp:it,iptc:vt,icc:bt}=this.options;if(rt.enabled||it.enabled||vt.enabled||bt.enabled){let wt=Math.max(S$1(this.options),this.options.chunkSize);await this.file.ensureChunk(0,wt),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(rt){if(this.parsers.tiff[rt]){let it=this.parsers.tiff[rt];this.injectSegment(rt,it)}}}c$3(ot,"type","tiff"),w$1.set("tiff",ot);let lt=l$4("zlib");const ht=["ihdr","iccp","text","itxt","exif"];class ut extends se{constructor(...rt){super(...rt),c$3(this,"catchError",it=>this.errors.push(it)),c$3(this,"metaChunks",[]),c$3(this,"unknownChunks",[])}static canHandle(rt,it){return it===35152&&rt.getUint32(0)===2303741511&&rt.getUint32(4)===218765834}async parse(){let{file:rt}=this;await this.findPngChunksInRange(8,rt.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(rt,it){let{file:vt}=this;for(;rt<it;){let bt=vt.getUint32(rt),wt=vt.getUint32(rt+4),Tt=vt.getString(rt+4,4).toLowerCase(),kt=bt+4+4+4,Lt={type:Tt,offset:rt,length:kt,start:rt+4+4,size:bt,marker:wt};ht.includes(Tt)?this.metaChunks.push(Lt):this.unknownChunks.push(Lt),rt+=kt}}parseTextChunks(){let rt=this.metaChunks.filter(it=>it.type==="text");for(let it of rt){let[vt,bt]=this.file.getString(it.start,it.size).split("\0");this.injectKeyValToIhdr(vt,bt)}}injectKeyValToIhdr(rt,it){let vt=this.parsers.ihdr;vt&&vt.raw.set(rt,it)}findIhdr(){let rt=this.metaChunks.find(it=>it.type==="ihdr");rt&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",rt.chunk)}async findExif(){let rt=this.metaChunks.find(it=>it.type==="exif");rt&&this.injectSegment("tiff",rt.chunk)}async findXmp(){let rt=this.metaChunks.filter(it=>it.type==="itxt");for(let it of rt)it.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",it.chunk)}async findIcc(){let rt=this.metaChunks.find(kt=>kt.type==="iccp");if(!rt)return;let{chunk:it}=rt,vt=it.getUint8Array(0,81),bt=0;for(;bt<80&&vt[bt]!==0;)bt++;let wt=bt+2,Tt=it.getString(0,bt);if(this.injectKeyValToIhdr("ProfileName",Tt),n$4){let kt=await lt,Lt=it.getUint8Array(wt);Lt=kt.inflateSync(Lt),this.injectSegment("icc",Lt)}}}c$3(ut,"type","png"),w$1.set("png",ut),U(E$1,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),F(E$1,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let ct=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];F(E$1,"ifd0",ct),F(E$1,"exif",ct),U(B,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ft extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===224&&rt.getUint32(it+4)===1246120262&&rt.getUint8(it+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}c$3(ft,"type","jfif"),c$3(ft,"headerLength",9),T$2.set("jfif",ft),U(E$1,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class dt extends re$1{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}c$3(dt,"type","ihdr"),T$2.set("ihdr",dt),U(E$1,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),U(B,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pt extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===226&&rt.getUint32(it+4)===1229144927}static findPosition(rt,it){let vt=super.findPosition(rt,it);return vt.chunkNumber=rt.getUint8(it+16),vt.chunkCount=rt.getUint8(it+17),vt.multiSegment=vt.chunkCount>1,vt}static handleMultiSegments(rt){return function(it){let vt=function(bt){let wt=bt[0].constructor,Tt=0;for(let Mt of bt)Tt+=Mt.length;let kt=new wt(Tt),Lt=0;for(let Mt of bt)kt.set(Mt,Lt),Lt+=Mt.length;return kt}(it.map(bt=>bt.chunk.toUint8()));return new I$1(vt)}(rt)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:rt}=this;this.chunk.byteLength<84&&g$2("ICC header is too short");for(let[it,vt]of Object.entries(gt)){it=parseInt(it,10);let bt=vt(this.chunk,it);bt!=="\0\0\0\0"&&rt.set(it,bt)}}parseTags(){let rt,it,vt,bt,wt,{raw:Tt}=this,kt=this.chunk.getUint32(128),Lt=132,Mt=this.chunk.byteLength;for(;kt--;){if(rt=this.chunk.getString(Lt,4),it=this.chunk.getUint32(Lt+4),vt=this.chunk.getUint32(Lt+8),bt=this.chunk.getString(it,4),it+vt>Mt)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");wt=this.parseTag(bt,it,vt),wt!==void 0&&wt!=="\0\0\0\0"&&Tt.set(rt,wt),Lt+=12}}parseTag(rt,it,vt){switch(rt){case"desc":return this.parseDesc(it);case"mluc":return this.parseMluc(it);case"text":return this.parseText(it,vt);case"sig ":return this.parseSig(it)}if(!(it+vt>this.chunk.byteLength))return this.chunk.getUint8Array(it,vt)}parseDesc(rt){let it=this.chunk.getUint32(rt+8)-1;return m$3(this.chunk.getString(rt+12,it))}parseText(rt,it){return m$3(this.chunk.getString(rt+8,it-8))}parseSig(rt){return m$3(this.chunk.getString(rt+8,4))}parseMluc(rt){let{chunk:it}=this,vt=it.getUint32(rt+8),bt=it.getUint32(rt+12),wt=rt+16,Tt=[];for(let kt=0;kt<vt;kt++){let Lt=it.getString(wt+0,2),Mt=it.getString(wt+2,2),Nt=it.getUint32(wt+4),zt=it.getUint32(wt+8)+rt,Ht=m$3(it.getUnicodeString(zt,Nt));Tt.push({lang:Lt,country:Mt,text:Ht}),wt+=bt}return vt===1?Tt[0].text:Tt}translateValue(rt,it){return typeof rt=="string"?it[rt]||it[rt.toLowerCase()]||rt:it[rt]||rt}}c$3(pt,"type","icc"),c$3(pt,"multiSegment",!0),c$3(pt,"headerLength",18);const gt={4:mt,8:function(nt,rt){return[nt.getUint8(rt),nt.getUint8(rt+1)>>4,nt.getUint8(rt+1)%16].map(it=>it.toString(10)).join(".")},12:mt,16:mt,20:mt,24:function(nt,rt){const it=nt.getUint16(rt),vt=nt.getUint16(rt+2)-1,bt=nt.getUint16(rt+4),wt=nt.getUint16(rt+6),Tt=nt.getUint16(rt+8),kt=nt.getUint16(rt+10);return new Date(Date.UTC(it,vt,bt,wt,Tt,kt))},36:mt,40:mt,48:mt,52:mt,64:(nt,rt)=>nt.getUint32(rt),80:mt};function mt(nt,rt){return m$3(nt.getString(rt,4))}T$2.set("icc",pt),U(E$1,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const St={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ct={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};U(B,"icc",[[4,St],[12,Ct],[40,Object.assign({},St,Ct)],[48,St],[80,St],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class yt extends re$1{static canHandle(rt,it,vt){return rt.getUint8(it+1)===237&&rt.getString(it+4,9)==="Photoshop"&&this.containsIptc8bim(rt,it,vt)!==void 0}static headerLength(rt,it,vt){let bt,wt=this.containsIptc8bim(rt,it,vt);if(wt!==void 0)return bt=rt.getUint8(it+wt+7),bt%2!=0&&(bt+=1),bt===0&&(bt=4),wt+8+bt}static containsIptc8bim(rt,it,vt){for(let bt=0;bt<vt;bt++)if(this.isIptcSegmentHead(rt,it+bt))return bt}static isIptcSegmentHead(rt,it){return rt.getUint8(it)===56&&rt.getUint32(it)===943868237&&rt.getUint16(it+4)===1028}parse(){let{raw:rt}=this,it=this.chunk.byteLength-1,vt=!1;for(let bt=0;bt<it;bt++)if(this.chunk.getUint8(bt)===28&&this.chunk.getUint8(bt+1)===2){vt=!0;let wt=this.chunk.getUint16(bt+3),Tt=this.chunk.getUint8(bt+2),kt=this.chunk.getLatin1String(bt+5,wt);rt.set(Tt,this.pluralizeValue(rt.get(Tt),kt)),bt+=4+wt}else if(vt)break;return this.translate(),this.output}pluralizeValue(rt,it){return rt!==void 0?rt instanceof Array?(rt.push(it),rt):[rt,it]:it}}c$3(yt,"type","iptc"),c$3(yt,"translateValues",!1),c$3(yt,"reviveValues",!1),T$2.set("iptc",yt),U(E$1,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),U(B,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);class GithubClient{constructor(rt){Id(this,"authToken");Id(this,"_shas",{});this.authToken=rt}b64EncodeUnicode(rt){return btoa(encodeURIComponent(rt).replace(/%([0-9A-F]{2})/g,function(it,vt){return String.fromCharCode(parseInt(vt,16))}))}b64DecodeUnicode(rt){return decodeURIComponent(Array.prototype.map.call(atob(rt),function(it){return"%"+("00"+it.charCodeAt(0).toString(16)).slice(-2)}).join(""))}user(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}async isCollaborator(rt,it,vt){let bt=`https://api.github.com/repos/${rt}/${it}/collaborators/${vt}`,wt=await fetch(bt,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}});return wt.ok&&wt.status===204}organizations(){return fetch("https://api.github.com/user/orgs",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}repos(rt="",it=""){let vt=rt?`users/${rt}`:it?`orgs/${it}`:"user";return fetch(`https://api.github.com/${vt}/repos?per_page=100`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(bt=>bt.json())}async createRepository({org:rt=null,name:it="",description:vt="",auto_init:bt=!0}){let wt=rt?`https://api.github.com/orgs/${rt}/repos`:"https://api.github.com/user/repos";console.log(`createUserRepository: org=${rt} name=${it} description=${vt} auto_init=${bt} url=${wt}`);let Tt=await fetch(wt,{method:"POST",body:JSON.stringify({name:it,description:vt,auto_init:bt}),headers:{Authorization:`Token ${this.authToken}`}});return{status:Tt.status,statusText:Tt.statusText}}branches(rt,it){return fetch(`https://api.github.com/repos/${rt}/${it}/branches`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(vt=>vt.json())}async getFile(rt,it,vt,bt){let wt,Tt=`https://api.github.com/repos/${rt}/${it}/contents/${vt}`;bt&&(Tt+=`?ref=${bt}`);let kt=await fetch(Tt,{cache:"no-cache",headers:{Authorization:`Token ${this.authToken}`}});return kt.ok&&(kt=await kt.json(),wt=decodeURIComponent(escape(atob(kt.content)))),Promise.resolve({content:wt,sha:kt.sha})}async getSha(rt,it,vt,bt){console.log(`getSha: acct=${rt} repo=${it} path=${vt} ref=${bt}`);let wt=`https://api.github.com/repos/${rt}/${it}/contents/${vt}`;bt&&(wt+=`?ref=${bt}`);let Tt=await fetch(wt,{headers:{Authorization:`Token ${this.authToken}`}});return Tt.ok&&(Tt=await Tt.json()),Tt.sha}async putFile(rt,it,vt,bt,wt,Tt=!1,kt=""){let Lt=`https://api.github.com/repos/${rt}/${it}/contents/${vt}`,Mt=`${rt}/${it}/${wt}/${vt}`;kt=kt||this._shas[Mt]||await this.getSha(rt,it,vt,wt),console.log(`putFile: acct=${rt} repo=${it} path=${vt} ref=${wt} sha=${kt} isBinaryString=${Tt}`);let Nt={message:"API commit",content:Tt?btoa(bt):this.b64EncodeUnicode(bt)};wt&&(Nt.branch=wt),kt&&(Nt.sha=kt);let zt=await fetch(Lt,{method:"PUT",body:JSON.stringify(Nt),headers:{Authorization:`Token ${this.authToken}`}});if(zt.ok){let Ht=await zt.json();this._shas[Mt]=Ht.content.sha}else console.log(zt);return{status:zt.status,statusText:zt.statusText}}async deleteFile(rt,it,vt,bt,wt=""){console.log(`deleteFile: acct=${rt} repo=${it} path=${vt} sha=${wt}`),wt=wt||await this.getSha(rt,it,vt,bt);let Tt=`https://api.github.com/repos/${rt}/${it}/contents/${vt}`,kt={message:"API commit",sha:wt},Lt=await fetch(Tt,{method:"DELETE",body:JSON.stringify(kt),headers:{Authorization:`Token ${this.authToken}`}});Lt=await Lt.json()}async defaultBranch(rt,it){let vt=null,bt=`https://api.github.com/repos/${rt}/${it}`,wt=await fetch(bt,{headers:{Authorization:`Token ${this.authToken}`}});return wt.ok&&(wt=await wt.json(),vt=wt.default_branch),vt}async dirlist(rt,it,vt,bt){var Mt;vt=vt||"",bt=bt||await this.defaultBranch(rt,it);let wt=[],Tt=`https://api.github.com/repos/${rt}/${it}/git/trees/${bt}`,kt={Authorization:`Token ${this.authToken}`,Accept:"application/vnd.github.v3+json","If-None-Match":""},Lt=vt.split("/").filter(Nt=>Nt);for(let Nt=0;Nt<Lt.length;Nt++){let zt=await fetch(Tt,{headers:kt}),Ht=zt.ok?await zt.json():{},Wt=Ht?(Mt=Ht.tree)==null?void 0:Mt.find(Zt=>Zt.path===Lt[Nt]):null;if(Tt=Wt?Wt.url:null,!Tt)break}if(Tt){let Nt=await fetch(Tt,{headers:kt});wt=((Nt.ok?await Nt.json():{}).tree||[]).map(Ht=>({name:Ht.path,sha:Ht.sha,type:Ht.type==="tree"?"dir":"file"}))}return wt}async fullPath(rt,it,vt,bt,wt=!1){let Tt=vt.split("/").filter(Nt=>Nt),kt=Tt[Tt.length-1],Lt=await this.dirlist(rt,it,Tt.join("/"),bt);if(Lt.length===0&&(Tt.pop(),Lt=await this.dirlist(rt,it,Tt.join("/"),bt)),!wt){let Nt=[kt,`${kt}.md`,"README.md"];for(let zt=0;zt<Nt.length;zt++)if(Lt.find(Ht=>Ht.type==="file"&&Ht.name===Nt[zt])){Tt.push(Nt[zt]);break}}return Tt.join("/")}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing$1(nt){return typeof nt>"u"||nt===null}function isObject$2(nt){return typeof nt=="object"&&nt!==null}function toArray$1(nt){return Array.isArray(nt)?nt:isNothing$1(nt)?[]:[nt]}function extend$2(nt,rt){var it,vt,bt,wt;if(rt)for(wt=Object.keys(rt),it=0,vt=wt.length;it<vt;it+=1)bt=wt[it],nt[bt]=rt[bt];return nt}function repeat$1(nt,rt){var it="",vt;for(vt=0;vt<rt;vt+=1)it+=nt;return it}function isNegativeZero$1(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1$1=isNothing$1,isObject_1$1=isObject$2,toArray_1$1=toArray$1,repeat_1$1=repeat$1,isNegativeZero_1$1=isNegativeZero$1,extend_1$1=extend$2,common$2={isNothing:isNothing_1$1,isObject:isObject_1$1,toArray:toArray_1$1,repeat:repeat_1$1,isNegativeZero:isNegativeZero_1$1,extend:extend_1$1};function formatError$1(nt,rt){var it="",vt=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),vt+" "+it):vt}function YAMLException$1$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError$1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1$1.prototype=Object.create(Error.prototype);YAMLException$1$1.prototype.constructor=YAMLException$1$1;YAMLException$1$1.prototype.toString=function(rt){return this.name+": "+formatError$1(this,rt)};var exception$1=YAMLException$1$1;function getLine$1(nt,rt,it,vt,bt){var wt="",Tt="",kt=Math.floor(bt/2)-1;return vt-rt>kt&&(wt=" ... ",rt=vt-kt+wt.length),it-vt>kt&&(Tt=" ...",it=vt+kt-Tt.length),{str:wt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Tt,pos:vt-rt+wt.length}}function padStart$1(nt,rt){return common$2.repeat(" ",rt-nt.length)+nt}function makeSnippet$1(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,vt=[0],bt=[],wt,Tt=-1;wt=it.exec(nt.buffer);)bt.push(wt.index),vt.push(wt.index+wt[0].length),nt.position<=wt.index&&Tt<0&&(Tt=vt.length-2);Tt<0&&(Tt=vt.length-1);var kt="",Lt,Mt,Nt=Math.min(nt.line+rt.linesAfter,bt.length).toString().length,zt=rt.maxLength-(rt.indent+Nt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Tt-Lt<0);Lt++)Mt=getLine$1(nt.buffer,vt[Tt-Lt],bt[Tt-Lt],nt.position-(vt[Tt]-vt[Tt-Lt]),zt),kt=common$2.repeat(" ",rt.indent)+padStart$1((nt.line-Lt+1).toString(),Nt)+" | "+Mt.str+`
`+kt;for(Mt=getLine$1(nt.buffer,vt[Tt],bt[Tt],nt.position,zt),kt+=common$2.repeat(" ",rt.indent)+padStart$1((nt.line+1).toString(),Nt)+" | "+Mt.str+`
`,kt+=common$2.repeat("-",rt.indent+Nt+3+Mt.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Tt+Lt>=bt.length);Lt++)Mt=getLine$1(nt.buffer,vt[Tt+Lt],bt[Tt+Lt],nt.position-(vt[Tt]-vt[Tt+Lt]),zt),kt+=common$2.repeat(" ",rt.indent)+padStart$1((nt.line+Lt+1).toString(),Nt)+" | "+Mt.str+`
`;return kt.replace(/\n$/,"")}var snippet$1=makeSnippet$1,TYPE_CONSTRUCTOR_OPTIONS$1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS$1=["scalar","sequence","mapping"];function compileStyleAliases$1(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(vt){rt[String(vt)]=it})}),rt}function Type$1$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS$1.indexOf(it)===-1)throw new exception$1('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases$1(rt.styleAliases||null),YAML_NODE_KINDS$1.indexOf(this.kind)===-1)throw new exception$1('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type$1=Type$1$1;function compileList$1(nt,rt){var it=[];return nt[rt].forEach(function(vt){var bt=it.length;it.forEach(function(wt,Tt){wt.tag===vt.tag&&wt.kind===vt.kind&&wt.multi===vt.multi&&(bt=Tt)}),it[bt]=vt}),it}function compileMap$1(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function vt(bt){bt.multi?(nt.multi[bt.kind].push(bt),nt.multi.fallback.push(bt)):nt[bt.kind][bt.tag]=nt.fallback[bt.tag]=bt}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(vt);return nt}function Schema$1$1(nt){return this.extend(nt)}Schema$1$1.prototype.extend=function(rt){var it=[],vt=[];if(rt instanceof type$1)vt.push(rt);else if(Array.isArray(rt))vt=vt.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(vt=vt.concat(rt.explicit));else throw new exception$1("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(wt){if(!(wt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(wt.loadKind&&wt.loadKind!=="scalar")throw new exception$1("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(wt.multi)throw new exception$1("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),vt.forEach(function(wt){if(!(wt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Schema$1$1.prototype);return bt.implicit=(this.implicit||[]).concat(it),bt.explicit=(this.explicit||[]).concat(vt),bt.compiledImplicit=compileList$1(bt,"implicit"),bt.compiledExplicit=compileList$1(bt,"explicit"),bt.compiledTypeMap=compileMap$1(bt.compiledImplicit,bt.compiledExplicit),bt};var schema$1=Schema$1$1,str$1=new type$1("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$2=new type$1("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map$3=new type$1("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe$1=new schema$1({explicit:[str$1,seq$2,map$3]});function resolveYamlNull$1(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull$1(){return null}function isNull$1(nt){return nt===null}var _null$1=new type$1("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull$1,construct:constructYamlNull$1,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean$1(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean$1(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean$1(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool$1=new type$1("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean$1,construct:constructYamlBoolean$1,predicate:isBoolean$1,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode$1(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode$1(nt){return 48<=nt&&nt<=55}function isDecCode$1(nt){return 48<=nt&&nt<=57}function resolveYamlInteger$1(nt){if(nt===null)return!1;var rt=nt.length,it=0,vt=!1,bt;if(!rt)return!1;if(bt=nt[it],(bt==="-"||bt==="+")&&(bt=nt[++it]),bt==="0"){if(it+1===rt)return!0;if(bt=nt[++it],bt==="b"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(bt!=="0"&&bt!=="1")return!1;vt=!0}return vt&&bt!=="_"}if(bt==="x"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isHexCode$1(nt.charCodeAt(it)))return!1;vt=!0}return vt&&bt!=="_"}if(bt==="o"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isOctCode$1(nt.charCodeAt(it)))return!1;vt=!0}return vt&&bt!=="_"}}if(bt==="_")return!1;for(;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isDecCode$1(nt.charCodeAt(it)))return!1;vt=!0}return!(!vt||bt==="_")}function constructYamlInteger$1(nt){var rt=nt,it=1,vt;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),vt=rt[0],(vt==="-"||vt==="+")&&(vt==="-"&&(it=-1),rt=rt.slice(1),vt=rt[0]),rt==="0")return 0;if(vt==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger$2(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common$2.isNegativeZero(nt)}var int$1=new type$1("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger$1,construct:constructYamlInteger$1,predicate:isInteger$2,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN$1=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat$1(nt){return!(nt===null||!YAML_FLOAT_PATTERN$1.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat$1(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT$1=/^[-+]?[0-9]+e/;function representYamlFloat$1(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$2.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT$1.test(it)?it.replace("e",".e"):it}function isFloat$1(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common$2.isNegativeZero(nt))}var float$1=new type$1("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat$1,construct:constructYamlFloat$1,predicate:isFloat$1,represent:representYamlFloat$1,defaultStyle:"lowercase"}),json$1=failsafe$1.extend({implicit:[_null$1,bool$1,int$1,float$1]}),core$1=json$1,YAML_DATE_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp$1(nt){return nt===null?!1:YAML_DATE_REGEXP$1.exec(nt)!==null||YAML_TIMESTAMP_REGEXP$1.exec(nt)!==null}function constructYamlTimestamp$1(nt){var rt,it,vt,bt,wt,Tt,kt,Lt=0,Mt=null,Nt,zt,Ht;if(rt=YAML_DATE_REGEXP$1.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP$1.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],vt=+rt[2]-1,bt=+rt[3],!rt[4])return new Date(Date.UTC(it,vt,bt));if(wt=+rt[4],Tt=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Nt=+rt[10],zt=+(rt[11]||0),Mt=(Nt*60+zt)*6e4,rt[9]==="-"&&(Mt=-Mt)),Ht=new Date(Date.UTC(it,vt,bt,wt,Tt,kt,Lt)),Mt&&Ht.setTime(Ht.getTime()-Mt),Ht}function representYamlTimestamp$1(nt){return nt.toISOString()}var timestamp$1=new type$1("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp$1,construct:constructYamlTimestamp$1,instanceOf:Date,represent:representYamlTimestamp$1});function resolveYamlMerge$1(nt){return nt==="<<"||nt===null}var merge$4=new type$1("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge$1}),BASE64_MAP$1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary$1(nt){if(nt===null)return!1;var rt,it,vt=0,bt=nt.length,wt=BASE64_MAP$1;for(it=0;it<bt;it++)if(rt=wt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;vt+=6}return vt%8===0}function constructYamlBinary$1(nt){var rt,it,vt=nt.replace(/[\r\n=]/g,""),bt=vt.length,wt=BASE64_MAP$1,Tt=0,kt=[];for(rt=0;rt<bt;rt++)rt%4===0&&rt&&(kt.push(Tt>>16&255),kt.push(Tt>>8&255),kt.push(Tt&255)),Tt=Tt<<6|wt.indexOf(vt.charAt(rt));return it=bt%4*6,it===0?(kt.push(Tt>>16&255),kt.push(Tt>>8&255),kt.push(Tt&255)):it===18?(kt.push(Tt>>10&255),kt.push(Tt>>2&255)):it===12&&kt.push(Tt>>4&255),new Uint8Array(kt)}function representYamlBinary$1(nt){var rt="",it=0,vt,bt,wt=nt.length,Tt=BASE64_MAP$1;for(vt=0;vt<wt;vt++)vt%3===0&&vt&&(rt+=Tt[it>>18&63],rt+=Tt[it>>12&63],rt+=Tt[it>>6&63],rt+=Tt[it&63]),it=(it<<8)+nt[vt];return bt=wt%3,bt===0?(rt+=Tt[it>>18&63],rt+=Tt[it>>12&63],rt+=Tt[it>>6&63],rt+=Tt[it&63]):bt===2?(rt+=Tt[it>>10&63],rt+=Tt[it>>4&63],rt+=Tt[it<<2&63],rt+=Tt[64]):bt===1&&(rt+=Tt[it>>2&63],rt+=Tt[it<<4&63],rt+=Tt[64],rt+=Tt[64]),rt}function isBinary$1(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary$1=new type$1("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary$1,construct:constructYamlBinary$1,predicate:isBinary$1,represent:representYamlBinary$1}),_hasOwnProperty$3$1=Object.prototype.hasOwnProperty,_toString$2$1=Object.prototype.toString;function resolveYamlOmap$1(nt){if(nt===null)return!0;var rt=[],it,vt,bt,wt,Tt,kt=nt;for(it=0,vt=kt.length;it<vt;it+=1){if(bt=kt[it],Tt=!1,_toString$2$1.call(bt)!=="[object Object]")return!1;for(wt in bt)if(_hasOwnProperty$3$1.call(bt,wt))if(!Tt)Tt=!0;else return!1;if(!Tt)return!1;if(rt.indexOf(wt)===-1)rt.push(wt);else return!1}return!0}function constructYamlOmap$1(nt){return nt!==null?nt:[]}var omap$1=new type$1("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap$1,construct:constructYamlOmap$1}),_toString$1$1=Object.prototype.toString;function resolveYamlPairs$1(nt){if(nt===null)return!0;var rt,it,vt,bt,wt,Tt=nt;for(wt=new Array(Tt.length),rt=0,it=Tt.length;rt<it;rt+=1){if(vt=Tt[rt],_toString$1$1.call(vt)!=="[object Object]"||(bt=Object.keys(vt),bt.length!==1))return!1;wt[rt]=[bt[0],vt[bt[0]]]}return!0}function constructYamlPairs$1(nt){if(nt===null)return[];var rt,it,vt,bt,wt,Tt=nt;for(wt=new Array(Tt.length),rt=0,it=Tt.length;rt<it;rt+=1)vt=Tt[rt],bt=Object.keys(vt),wt[rt]=[bt[0],vt[bt[0]]];return wt}var pairs$1=new type$1("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs$1,construct:constructYamlPairs$1}),_hasOwnProperty$2$1=Object.prototype.hasOwnProperty;function resolveYamlSet$1(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2$1.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet$1(nt){return nt!==null?nt:{}}var set$3=new type$1("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet$1,construct:constructYamlSet$1}),_default$1=core$1.extend({implicit:[timestamp$1,merge$4],explicit:[binary$1,omap$1,pairs$1,set$3]}),_hasOwnProperty$1$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN$1=1,CONTEXT_FLOW_OUT$1=2,CONTEXT_BLOCK_IN$1=3,CONTEXT_BLOCK_OUT$1=4,CHOMPING_CLIP$1=1,CHOMPING_STRIP$1=2,CHOMPING_KEEP$1=3,PATTERN_NON_PRINTABLE$1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS$1=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS$1=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE$1=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI$1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class$1(nt){return Object.prototype.toString.call(nt)}function is_EOL$1(nt){return nt===10||nt===13}function is_WHITE_SPACE$1(nt){return nt===9||nt===32}function is_WS_OR_EOL$1(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR$1(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode$1(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen$1(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode$1(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence$1(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint$1(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck$1=new Array(256),simpleEscapeMap$1=new Array(256);for(var i$5=0;i$5<256;i$5++)simpleEscapeCheck$1[i$5]=simpleEscapeSequence$1(i$5)?1:0,simpleEscapeMap$1[i$5]=simpleEscapeSequence$1(i$5);function State$1$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default$1,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError$1(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet$1(it),new exception$1(rt,it)}function throwError$1(nt,rt){throw generateError$1(nt,rt)}function throwWarning$1(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError$1(nt,rt))}var directiveHandlers$1={YAML:function(rt,it,vt){var bt,wt,Tt;rt.version!==null&&throwError$1(rt,"duplication of %YAML directive"),vt.length!==1&&throwError$1(rt,"YAML directive accepts exactly one argument"),bt=/^([0-9]+)\.([0-9]+)$/.exec(vt[0]),bt===null&&throwError$1(rt,"ill-formed argument of the YAML directive"),wt=parseInt(bt[1],10),Tt=parseInt(bt[2],10),wt!==1&&throwError$1(rt,"unacceptable YAML version of the document"),rt.version=vt[0],rt.checkLineBreaks=Tt<2,Tt!==1&&Tt!==2&&throwWarning$1(rt,"unsupported YAML version of the document")},TAG:function(rt,it,vt){var bt,wt;vt.length!==2&&throwError$1(rt,"TAG directive accepts exactly two arguments"),bt=vt[0],wt=vt[1],PATTERN_TAG_HANDLE$1.test(bt)||throwError$1(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1$1.call(rt.tagMap,bt)&&throwError$1(rt,'there is a previously declared suffix for "'+bt+'" tag handle'),PATTERN_TAG_URI$1.test(wt)||throwError$1(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{wt=decodeURIComponent(wt)}catch{throwError$1(rt,"tag prefix is malformed: "+wt)}rt.tagMap[bt]=wt}};function captureSegment$1(nt,rt,it,vt){var bt,wt,Tt,kt;if(rt<it){if(kt=nt.input.slice(rt,it),vt)for(bt=0,wt=kt.length;bt<wt;bt+=1)Tt=kt.charCodeAt(bt),Tt===9||32<=Tt&&Tt<=1114111||throwError$1(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE$1.test(kt)&&throwError$1(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings$1(nt,rt,it,vt){var bt,wt,Tt,kt;for(common$2.isObject(it)||throwError$1(nt,"cannot merge mappings; the provided source object is unacceptable"),bt=Object.keys(it),Tt=0,kt=bt.length;Tt<kt;Tt+=1)wt=bt[Tt],_hasOwnProperty$1$1.call(rt,wt)||(rt[wt]=it[wt],vt[wt]=!0)}function storeMappingPair$1(nt,rt,it,vt,bt,wt,Tt,kt,Lt){var Mt,Nt;if(Array.isArray(bt))for(bt=Array.prototype.slice.call(bt),Mt=0,Nt=bt.length;Mt<Nt;Mt+=1)Array.isArray(bt[Mt])&&throwError$1(nt,"nested arrays are not supported inside keys"),typeof bt=="object"&&_class$1(bt[Mt])==="[object Object]"&&(bt[Mt]="[object Object]");if(typeof bt=="object"&&_class$1(bt)==="[object Object]"&&(bt="[object Object]"),bt=String(bt),rt===null&&(rt={}),vt==="tag:yaml.org,2002:merge")if(Array.isArray(wt))for(Mt=0,Nt=wt.length;Mt<Nt;Mt+=1)mergeMappings$1(nt,rt,wt[Mt],it);else mergeMappings$1(nt,rt,wt,it);else!nt.json&&!_hasOwnProperty$1$1.call(it,bt)&&_hasOwnProperty$1$1.call(rt,bt)&&(nt.line=Tt||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError$1(nt,"duplicated mapping key")),bt==="__proto__"?Object.defineProperty(rt,bt,{configurable:!0,enumerable:!0,writable:!0,value:wt}):rt[bt]=wt,delete it[bt];return rt}function readLineBreak$1(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError$1(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace$1(nt,rt,it){for(var vt=0,bt=nt.input.charCodeAt(nt.position);bt!==0;){for(;is_WHITE_SPACE$1(bt);)bt===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),bt=nt.input.charCodeAt(++nt.position);if(rt&&bt===35)do bt=nt.input.charCodeAt(++nt.position);while(bt!==10&&bt!==13&&bt!==0);if(is_EOL$1(bt))for(readLineBreak$1(nt),bt=nt.input.charCodeAt(nt.position),vt++,nt.lineIndent=0;bt===32;)nt.lineIndent++,bt=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&vt!==0&&nt.lineIndent<it&&throwWarning$1(nt,"deficient indentation"),vt}function testDocumentSeparator$1(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL$1(it)))}function writeFoldedLines$1(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common$2.repeat(`
`,rt-1))}function readPlainScalar$1(nt,rt,it){var vt,bt,wt,Tt,kt,Lt,Mt,Nt,zt=nt.kind,Ht=nt.result,Wt;if(Wt=nt.input.charCodeAt(nt.position),is_WS_OR_EOL$1(Wt)||is_FLOW_INDICATOR$1(Wt)||Wt===35||Wt===38||Wt===42||Wt===33||Wt===124||Wt===62||Wt===39||Wt===34||Wt===37||Wt===64||Wt===96||(Wt===63||Wt===45)&&(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(bt)||it&&is_FLOW_INDICATOR$1(bt)))return!1;for(nt.kind="scalar",nt.result="",wt=Tt=nt.position,kt=!1;Wt!==0;){if(Wt===58){if(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(bt)||it&&is_FLOW_INDICATOR$1(bt))break}else if(Wt===35){if(vt=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL$1(vt))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator$1(nt)||it&&is_FLOW_INDICATOR$1(Wt))break;if(is_EOL$1(Wt))if(Lt=nt.line,Mt=nt.lineStart,Nt=nt.lineIndent,skipSeparationSpace$1(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Wt=nt.input.charCodeAt(nt.position);continue}else{nt.position=Tt,nt.line=Lt,nt.lineStart=Mt,nt.lineIndent=Nt;break}}kt&&(captureSegment$1(nt,wt,Tt,!1),writeFoldedLines$1(nt,nt.line-Lt),wt=Tt=nt.position,kt=!1),is_WHITE_SPACE$1(Wt)||(Tt=nt.position+1),Wt=nt.input.charCodeAt(++nt.position)}return captureSegment$1(nt,wt,Tt,!1),nt.result?!0:(nt.kind=zt,nt.result=Ht,!1)}function readSingleQuotedScalar$1(nt,rt){var it,vt,bt;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,vt=bt=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment$1(nt,vt,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)vt=nt.position,nt.position++,bt=nt.position;else return!0;else is_EOL$1(it)?(captureSegment$1(nt,vt,bt,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),vt=bt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,bt=nt.position);throwError$1(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar$1(nt,rt){var it,vt,bt,wt,Tt,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=vt=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment$1(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment$1(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL$1(kt))skipSeparationSpace$1(nt,!1,rt);else if(kt<256&&simpleEscapeCheck$1[kt])nt.result+=simpleEscapeMap$1[kt],nt.position++;else if((Tt=escapedHexLen$1(kt))>0){for(bt=Tt,wt=0;bt>0;bt--)kt=nt.input.charCodeAt(++nt.position),(Tt=fromHexCode$1(kt))>=0?wt=(wt<<4)+Tt:throwError$1(nt,"expected hexadecimal character");nt.result+=charFromCodepoint$1(wt),nt.position++}else throwError$1(nt,"unknown escape sequence");it=vt=nt.position}else is_EOL$1(kt)?(captureSegment$1(nt,it,vt,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),it=vt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,vt=nt.position)}throwError$1(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection$1(nt,rt){var it=!0,vt,bt,wt,Tt=nt.tag,kt,Lt=nt.anchor,Mt,Nt,zt,Ht,Wt,Zt=Object.create(null),tn,Yt,nn,rn;if(rn=nt.input.charCodeAt(nt.position),rn===91)Nt=93,Wt=!1,kt=[];else if(rn===123)Nt=125,Wt=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),rn=nt.input.charCodeAt(++nt.position);rn!==0;){if(skipSeparationSpace$1(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===Nt)return nt.position++,nt.tag=Tt,nt.anchor=Lt,nt.kind=Wt?"mapping":"sequence",nt.result=kt,!0;it?rn===44&&throwError$1(nt,"expected the node content, but found ','"):throwError$1(nt,"missed comma between flow collection entries"),Yt=tn=nn=null,zt=Ht=!1,rn===63&&(Mt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(Mt)&&(zt=Ht=!0,nt.position++,skipSeparationSpace$1(nt,!0,rt))),vt=nt.line,bt=nt.lineStart,wt=nt.position,composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Yt=nt.tag,tn=nt.result,skipSeparationSpace$1(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),(Ht||nt.line===vt)&&rn===58&&(zt=!0,rn=nt.input.charCodeAt(++nt.position),skipSeparationSpace$1(nt,!0,rt),composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),nn=nt.result),Wt?storeMappingPair$1(nt,kt,Zt,Yt,tn,nn,vt,bt,wt):zt?kt.push(storeMappingPair$1(nt,null,Zt,Yt,tn,nn,vt,bt,wt)):kt.push(tn),skipSeparationSpace$1(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===44?(it=!0,rn=nt.input.charCodeAt(++nt.position)):it=!1}throwError$1(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar$1(nt,rt){var it,vt,bt=CHOMPING_CLIP$1,wt=!1,Tt=!1,kt=rt,Lt=0,Mt=!1,Nt,zt;if(zt=nt.input.charCodeAt(nt.position),zt===124)vt=!1;else if(zt===62)vt=!0;else return!1;for(nt.kind="scalar",nt.result="";zt!==0;)if(zt=nt.input.charCodeAt(++nt.position),zt===43||zt===45)CHOMPING_CLIP$1===bt?bt=zt===43?CHOMPING_KEEP$1:CHOMPING_STRIP$1:throwError$1(nt,"repeat of a chomping mode identifier");else if((Nt=fromDecimalCode$1(zt))>=0)Nt===0?throwError$1(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Tt?throwError$1(nt,"repeat of an indentation width identifier"):(kt=rt+Nt-1,Tt=!0);else break;if(is_WHITE_SPACE$1(zt)){do zt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE$1(zt));if(zt===35)do zt=nt.input.charCodeAt(++nt.position);while(!is_EOL$1(zt)&&zt!==0)}for(;zt!==0;){for(readLineBreak$1(nt),nt.lineIndent=0,zt=nt.input.charCodeAt(nt.position);(!Tt||nt.lineIndent<kt)&&zt===32;)nt.lineIndent++,zt=nt.input.charCodeAt(++nt.position);if(!Tt&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL$1(zt)){Lt++;continue}if(nt.lineIndent<kt){bt===CHOMPING_KEEP$1?nt.result+=common$2.repeat(`
`,wt?1+Lt:Lt):bt===CHOMPING_CLIP$1&&wt&&(nt.result+=`
`);break}for(vt?is_WHITE_SPACE$1(zt)?(Mt=!0,nt.result+=common$2.repeat(`
`,wt?1+Lt:Lt)):Mt?(Mt=!1,nt.result+=common$2.repeat(`
`,Lt+1)):Lt===0?wt&&(nt.result+=" "):nt.result+=common$2.repeat(`
`,Lt):nt.result+=common$2.repeat(`
`,wt?1+Lt:Lt),wt=!0,Tt=!0,Lt=0,it=nt.position;!is_EOL$1(zt)&&zt!==0;)zt=nt.input.charCodeAt(++nt.position);captureSegment$1(nt,it,nt.position,!1)}return!0}function readBlockSequence$1(nt,rt){var it,vt=nt.tag,bt=nt.anchor,wt=[],Tt,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=wt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Tt=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL$1(Tt))));){if(kt=!0,nt.position++,skipSeparationSpace$1(nt,!0,-1)&&nt.lineIndent<=rt){wt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode$1(nt,rt,CONTEXT_BLOCK_IN$1,!1,!0),wt.push(nt.result),skipSeparationSpace$1(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError$1(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=vt,nt.anchor=bt,nt.kind="sequence",nt.result=wt,!0):!1}function readBlockMapping$1(nt,rt,it){var vt,bt,wt,Tt,kt,Lt,Mt=nt.tag,Nt=nt.anchor,zt={},Ht=Object.create(null),Wt=null,Zt=null,tn=null,Yt=!1,nn=!1,rn;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=zt),rn=nt.input.charCodeAt(nt.position);rn!==0;){if(!Yt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),vt=nt.input.charCodeAt(nt.position+1),wt=nt.line,(rn===63||rn===58)&&is_WS_OR_EOL$1(vt))rn===63?(Yt&&(storeMappingPair$1(nt,zt,Ht,Wt,Zt,null,Tt,kt,Lt),Wt=Zt=tn=null),nn=!0,Yt=!0,bt=!0):Yt?(Yt=!1,bt=!0):throwError$1(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,rn=vt;else{if(Tt=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode$1(nt,it,CONTEXT_FLOW_OUT$1,!1,!0))break;if(nt.line===wt){for(rn=nt.input.charCodeAt(nt.position);is_WHITE_SPACE$1(rn);)rn=nt.input.charCodeAt(++nt.position);if(rn===58)rn=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL$1(rn)||throwError$1(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Yt&&(storeMappingPair$1(nt,zt,Ht,Wt,Zt,null,Tt,kt,Lt),Wt=Zt=tn=null),nn=!0,Yt=!1,bt=!1,Wt=nt.tag,Zt=nt.result;else if(nn)throwError$1(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=Mt,nt.anchor=Nt,!0}else if(nn)throwError$1(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=Mt,nt.anchor=Nt,!0}if((nt.line===wt||nt.lineIndent>rt)&&(Yt&&(Tt=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode$1(nt,rt,CONTEXT_BLOCK_OUT$1,!0,bt)&&(Yt?Zt=nt.result:tn=nt.result),Yt||(storeMappingPair$1(nt,zt,Ht,Wt,Zt,tn,Tt,kt,Lt),Wt=Zt=tn=null),skipSeparationSpace$1(nt,!0,-1),rn=nt.input.charCodeAt(nt.position)),(nt.line===wt||nt.lineIndent>rt)&&rn!==0)throwError$1(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Yt&&storeMappingPair$1(nt,zt,Ht,Wt,Zt,null,Tt,kt,Lt),nn&&(nt.tag=Mt,nt.anchor=Nt,nt.kind="mapping",nt.result=zt),nn}function readTagProperty$1(nt){var rt,it=!1,vt=!1,bt,wt,Tt;if(Tt=nt.input.charCodeAt(nt.position),Tt!==33)return!1;if(nt.tag!==null&&throwError$1(nt,"duplication of a tag property"),Tt=nt.input.charCodeAt(++nt.position),Tt===60?(it=!0,Tt=nt.input.charCodeAt(++nt.position)):Tt===33?(vt=!0,bt="!!",Tt=nt.input.charCodeAt(++nt.position)):bt="!",rt=nt.position,it){do Tt=nt.input.charCodeAt(++nt.position);while(Tt!==0&&Tt!==62);nt.position<nt.length?(wt=nt.input.slice(rt,nt.position),Tt=nt.input.charCodeAt(++nt.position)):throwError$1(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Tt!==0&&!is_WS_OR_EOL$1(Tt);)Tt===33&&(vt?throwError$1(nt,"tag suffix cannot contain exclamation marks"):(bt=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE$1.test(bt)||throwError$1(nt,"named tag handle cannot contain such characters"),vt=!0,rt=nt.position+1)),Tt=nt.input.charCodeAt(++nt.position);wt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS$1.test(wt)&&throwError$1(nt,"tag suffix cannot contain flow indicator characters")}wt&&!PATTERN_TAG_URI$1.test(wt)&&throwError$1(nt,"tag name cannot contain such characters: "+wt);try{wt=decodeURIComponent(wt)}catch{throwError$1(nt,"tag name is malformed: "+wt)}return it?nt.tag=wt:_hasOwnProperty$1$1.call(nt.tagMap,bt)?nt.tag=nt.tagMap[bt]+wt:bt==="!"?nt.tag="!"+wt:bt==="!!"?nt.tag="tag:yaml.org,2002:"+wt:throwError$1(nt,'undeclared tag handle "'+bt+'"'),!0}function readAnchorProperty$1(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError$1(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL$1(it)&&!is_FLOW_INDICATOR$1(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias$1(nt){var rt,it,vt;if(vt=nt.input.charCodeAt(nt.position),vt!==42)return!1;for(vt=nt.input.charCodeAt(++nt.position),rt=nt.position;vt!==0&&!is_WS_OR_EOL$1(vt)&&!is_FLOW_INDICATOR$1(vt);)vt=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1$1.call(nt.anchorMap,it)||throwError$1(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace$1(nt,!0,-1),!0}function composeNode$1(nt,rt,it,vt,bt){var wt,Tt,kt,Lt=1,Mt=!1,Nt=!1,zt,Ht,Wt,Zt,tn,Yt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,wt=Tt=kt=CONTEXT_BLOCK_OUT$1===it||CONTEXT_BLOCK_IN$1===it,vt&&skipSeparationSpace$1(nt,!0,-1)&&(Mt=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty$1(nt)||readAnchorProperty$1(nt);)skipSeparationSpace$1(nt,!0,-1)?(Mt=!0,kt=wt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=Mt||bt),(Lt===1||CONTEXT_BLOCK_OUT$1===it)&&(CONTEXT_FLOW_IN$1===it||CONTEXT_FLOW_OUT$1===it?tn=rt:tn=rt+1,Yt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence$1(nt,Yt)||readBlockMapping$1(nt,Yt,tn))||readFlowCollection$1(nt,tn)?Nt=!0:(Tt&&readBlockScalar$1(nt,tn)||readSingleQuotedScalar$1(nt,tn)||readDoubleQuotedScalar$1(nt,tn)?Nt=!0:readAlias$1(nt)?(Nt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError$1(nt,"alias node should not have any properties")):readPlainScalar$1(nt,tn,CONTEXT_FLOW_IN$1===it)&&(Nt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Nt=kt&&readBlockSequence$1(nt,Yt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError$1(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),zt=0,Ht=nt.implicitTypes.length;zt<Ht;zt+=1)if(Zt=nt.implicitTypes[zt],Zt.resolve(nt.result)){nt.result=Zt.construct(nt.result),nt.tag=Zt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Zt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Zt=null,Wt=nt.typeMap.multi[nt.kind||"fallback"],zt=0,Ht=Wt.length;zt<Ht;zt+=1)if(nt.tag.slice(0,Wt[zt].tag.length)===Wt[zt].tag){Zt=Wt[zt];break}Zt||throwError$1(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Zt.kind!==nt.kind&&throwError$1(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Zt.kind+'", not "'+nt.kind+'"'),Zt.resolve(nt.result,nt.tag)?(nt.result=Zt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError$1(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Nt}function readDocument$1(nt){var rt=nt.position,it,vt,bt,wt=!1,Tt;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Tt=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace$1(nt,!0,-1),Tt=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Tt!==37));){for(wt=!0,Tt=nt.input.charCodeAt(++nt.position),it=nt.position;Tt!==0&&!is_WS_OR_EOL$1(Tt);)Tt=nt.input.charCodeAt(++nt.position);for(vt=nt.input.slice(it,nt.position),bt=[],vt.length<1&&throwError$1(nt,"directive name must not be less than one character in length");Tt!==0;){for(;is_WHITE_SPACE$1(Tt);)Tt=nt.input.charCodeAt(++nt.position);if(Tt===35){do Tt=nt.input.charCodeAt(++nt.position);while(Tt!==0&&!is_EOL$1(Tt));break}if(is_EOL$1(Tt))break;for(it=nt.position;Tt!==0&&!is_WS_OR_EOL$1(Tt);)Tt=nt.input.charCodeAt(++nt.position);bt.push(nt.input.slice(it,nt.position))}Tt!==0&&readLineBreak$1(nt),_hasOwnProperty$1$1.call(directiveHandlers$1,vt)?directiveHandlers$1[vt](nt,vt,bt):throwWarning$1(nt,'unknown document directive "'+vt+'"')}if(skipSeparationSpace$1(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace$1(nt,!0,-1)):wt&&throwError$1(nt,"directives end mark is expected"),composeNode$1(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT$1,!1,!0),skipSeparationSpace$1(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS$1.test(nt.input.slice(rt,nt.position))&&throwWarning$1(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator$1(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace$1(nt,!0,-1));return}if(nt.position<nt.length-1)throwError$1(nt,"end of the stream or a document separator is expected");else return}function loadDocuments$1(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1$1(nt,rt),vt=nt.indexOf("\0");for(vt!==-1&&(it.position=vt,throwError$1(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument$1(it);return it.documents}function loadAll$1$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var vt=loadDocuments$1(nt,it);if(typeof rt!="function")return vt;for(var bt=0,wt=vt.length;bt<wt;bt+=1)rt(vt[bt])}function load$1$1(nt,rt){var it=loadDocuments$1(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception$1("expected a single document in the stream, but found more")}}var loadAll_1$1=loadAll$1$1,load_1$1=load$1$1,loader$1={loadAll:loadAll_1$1,load:load_1$1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(nt,rt){var it,vt,bt,wt,Tt,kt,Lt;if(rt===null)return{};for(it={},vt=Object.keys(rt),bt=0,wt=vt.length;bt<wt;bt+=1)Tt=vt[bt],kt=String(rt[Tt]),Tt.slice(0,2)==="!!"&&(Tt="tag:yaml.org,2002:"+Tt.slice(2)),Lt=nt.compiledTypeMap.fallback[Tt],Lt&&_hasOwnProperty.call(Lt.styleAliases,kt)&&(kt=Lt.styleAliases[kt]),it[Tt]=kt;return it}function encodeHex(nt){var rt,it,vt;if(rt=nt.toString(16).toUpperCase(),nt<=255)it="x",vt=2;else if(nt<=65535)it="u",vt=4;else if(nt<=4294967295)it="U",vt=8;else throw new exception$1("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+it+common$2.repeat("0",vt-rt.length)+rt}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(nt){this.schema=nt.schema||_default$1,this.indent=Math.max(1,nt.indent||2),this.noArrayIndent=nt.noArrayIndent||!1,this.skipInvalid=nt.skipInvalid||!1,this.flowLevel=common$2.isNothing(nt.flowLevel)?-1:nt.flowLevel,this.styleMap=compileStyleMap(this.schema,nt.styles||null),this.sortKeys=nt.sortKeys||!1,this.lineWidth=nt.lineWidth||80,this.noRefs=nt.noRefs||!1,this.noCompatMode=nt.noCompatMode||!1,this.condenseFlow=nt.condenseFlow||!1,this.quotingType=nt.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=nt.forceQuotes||!1,this.replacer=typeof nt.replacer=="function"?nt.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(nt,rt){for(var it=common$2.repeat(" ",rt),vt=0,bt=-1,wt="",Tt,kt=nt.length;vt<kt;)bt=nt.indexOf(`
`,vt),bt===-1?(Tt=nt.slice(vt),vt=kt):(Tt=nt.slice(vt,bt+1),vt=bt+1),Tt.length&&Tt!==`
`&&(wt+=it),wt+=Tt;return wt}function generateNextLine(nt,rt){return`
`+common$2.repeat(" ",nt.indent*rt)}function testImplicitResolving(nt,rt){var it,vt,bt;for(it=0,vt=nt.implicitTypes.length;it<vt;it+=1)if(bt=nt.implicitTypes[it],bt.resolve(rt))return!0;return!1}function isWhitespace(nt){return nt===CHAR_SPACE||nt===CHAR_TAB}function isPrintable(nt){return 32<=nt&&nt<=126||161<=nt&&nt<=55295&&nt!==8232&&nt!==8233||57344<=nt&&nt<=65533&&nt!==CHAR_BOM||65536<=nt&&nt<=1114111}function isNsCharOrWhitespace(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&nt!==CHAR_CARRIAGE_RETURN&&nt!==CHAR_LINE_FEED}function isPlainSafe(nt,rt,it){var vt=isNsCharOrWhitespace(nt),bt=vt&&!isWhitespace(nt);return(it?vt:vt&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET)&&nt!==CHAR_SHARP&&!(rt===CHAR_COLON&&!bt)||isNsCharOrWhitespace(rt)&&!isWhitespace(rt)&&nt===CHAR_SHARP||rt===CHAR_COLON&&bt}function isPlainSafeFirst(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&!isWhitespace(nt)&&nt!==CHAR_MINUS&&nt!==CHAR_QUESTION&&nt!==CHAR_COLON&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET&&nt!==CHAR_SHARP&&nt!==CHAR_AMPERSAND&&nt!==CHAR_ASTERISK&&nt!==CHAR_EXCLAMATION&&nt!==CHAR_VERTICAL_LINE&&nt!==CHAR_EQUALS&&nt!==CHAR_GREATER_THAN&&nt!==CHAR_SINGLE_QUOTE&&nt!==CHAR_DOUBLE_QUOTE&&nt!==CHAR_PERCENT&&nt!==CHAR_COMMERCIAL_AT&&nt!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(nt){return!isWhitespace(nt)&&nt!==CHAR_COLON}function codePointAt(nt,rt){var it=nt.charCodeAt(rt),vt;return it>=55296&&it<=56319&&rt+1<nt.length&&(vt=nt.charCodeAt(rt+1),vt>=56320&&vt<=57343)?(it-55296)*1024+vt-56320+65536:it}function needIndentIndicator(nt){var rt=/^\n* /;return rt.test(nt)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(nt,rt,it,vt,bt,wt,Tt,kt){var Lt,Mt=0,Nt=null,zt=!1,Ht=!1,Wt=vt!==-1,Zt=-1,tn=isPlainSafeFirst(codePointAt(nt,0))&&isPlainSafeLast(codePointAt(nt,nt.length-1));if(rt||Tt)for(Lt=0;Lt<nt.length;Mt>=65536?Lt+=2:Lt++){if(Mt=codePointAt(nt,Lt),!isPrintable(Mt))return STYLE_DOUBLE;tn=tn&&isPlainSafe(Mt,Nt,kt),Nt=Mt}else{for(Lt=0;Lt<nt.length;Mt>=65536?Lt+=2:Lt++){if(Mt=codePointAt(nt,Lt),Mt===CHAR_LINE_FEED)zt=!0,Wt&&(Ht=Ht||Lt-Zt-1>vt&&nt[Zt+1]!==" ",Zt=Lt);else if(!isPrintable(Mt))return STYLE_DOUBLE;tn=tn&&isPlainSafe(Mt,Nt,kt),Nt=Mt}Ht=Ht||Wt&&Lt-Zt-1>vt&&nt[Zt+1]!==" "}return!zt&&!Ht?tn&&!Tt&&!bt(nt)?STYLE_PLAIN:wt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:it>9&&needIndentIndicator(nt)?STYLE_DOUBLE:Tt?wt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:Ht?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(nt,rt,it,vt,bt){nt.dump=function(){if(rt.length===0)return nt.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!nt.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(rt)!==-1||DEPRECATED_BASE60_SYNTAX.test(rt)))return nt.quotingType===QUOTING_TYPE_DOUBLE?'"'+rt+'"':"'"+rt+"'";var wt=nt.indent*Math.max(1,it),Tt=nt.lineWidth===-1?-1:Math.max(Math.min(nt.lineWidth,40),nt.lineWidth-wt),kt=vt||nt.flowLevel>-1&&it>=nt.flowLevel;function Lt(Mt){return testImplicitResolving(nt,Mt)}switch(chooseScalarStyle(rt,kt,nt.indent,Tt,Lt,nt.quotingType,nt.forceQuotes&&!vt,bt)){case STYLE_PLAIN:return rt;case STYLE_SINGLE:return"'"+rt.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(rt,wt));case STYLE_FOLDED:return">"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(foldString(rt,Tt),wt));case STYLE_DOUBLE:return'"'+escapeString(rt)+'"';default:throw new exception$1("impossible error: invalid scalar style")}}()}function blockHeader(nt,rt){var it=needIndentIndicator(nt)?String(rt):"",vt=nt[nt.length-1]===`
`,bt=vt&&(nt[nt.length-2]===`
`||nt===`
`),wt=bt?"+":vt?"":"-";return it+wt+`
`}function dropEndingNewline(nt){return nt[nt.length-1]===`
`?nt.slice(0,-1):nt}function foldString(nt,rt){for(var it=/(\n+)([^\n]*)/g,vt=function(){var Mt=nt.indexOf(`
`);return Mt=Mt!==-1?Mt:nt.length,it.lastIndex=Mt,foldLine(nt.slice(0,Mt),rt)}(),bt=nt[0]===`
`||nt[0]===" ",wt,Tt;Tt=it.exec(nt);){var kt=Tt[1],Lt=Tt[2];wt=Lt[0]===" ",vt+=kt+(!bt&&!wt&&Lt!==""?`
`:"")+foldLine(Lt,rt),bt=wt}return vt}function foldLine(nt,rt){if(nt===""||nt[0]===" ")return nt;for(var it=/ [^ ]/g,vt,bt=0,wt,Tt=0,kt=0,Lt="";vt=it.exec(nt);)kt=vt.index,kt-bt>rt&&(wt=Tt>bt?Tt:kt,Lt+=`
`+nt.slice(bt,wt),bt=wt+1),Tt=kt;return Lt+=`
`,nt.length-bt>rt&&Tt>bt?Lt+=nt.slice(bt,Tt)+`
`+nt.slice(Tt+1):Lt+=nt.slice(bt),Lt.slice(1)}function escapeString(nt){for(var rt="",it=0,vt,bt=0;bt<nt.length;it>=65536?bt+=2:bt++)it=codePointAt(nt,bt),vt=ESCAPE_SEQUENCES[it],!vt&&isPrintable(it)?(rt+=nt[bt],it>=65536&&(rt+=nt[bt+1])):rt+=vt||encodeHex(it);return rt}function writeFlowSequence(nt,rt,it){var vt="",bt=nt.tag,wt,Tt,kt;for(wt=0,Tt=it.length;wt<Tt;wt+=1)kt=it[wt],nt.replacer&&(kt=nt.replacer.call(it,String(wt),kt)),(writeNode(nt,rt,kt,!1,!1)||typeof kt>"u"&&writeNode(nt,rt,null,!1,!1))&&(vt!==""&&(vt+=","+(nt.condenseFlow?"":" ")),vt+=nt.dump);nt.tag=bt,nt.dump="["+vt+"]"}function writeBlockSequence(nt,rt,it,vt){var bt="",wt=nt.tag,Tt,kt,Lt;for(Tt=0,kt=it.length;Tt<kt;Tt+=1)Lt=it[Tt],nt.replacer&&(Lt=nt.replacer.call(it,String(Tt),Lt)),(writeNode(nt,rt+1,Lt,!0,!0,!1,!0)||typeof Lt>"u"&&writeNode(nt,rt+1,null,!0,!0,!1,!0))&&((!vt||bt!=="")&&(bt+=generateNextLine(nt,rt)),nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?bt+="-":bt+="- ",bt+=nt.dump);nt.tag=wt,nt.dump=bt||"[]"}function writeFlowMapping(nt,rt,it){var vt="",bt=nt.tag,wt=Object.keys(it),Tt,kt,Lt,Mt,Nt;for(Tt=0,kt=wt.length;Tt<kt;Tt+=1)Nt="",vt!==""&&(Nt+=", "),nt.condenseFlow&&(Nt+='"'),Lt=wt[Tt],Mt=it[Lt],nt.replacer&&(Mt=nt.replacer.call(it,Lt,Mt)),writeNode(nt,rt,Lt,!1,!1)&&(nt.dump.length>1024&&(Nt+="? "),Nt+=nt.dump+(nt.condenseFlow?'"':"")+":"+(nt.condenseFlow?"":" "),writeNode(nt,rt,Mt,!1,!1)&&(Nt+=nt.dump,vt+=Nt));nt.tag=bt,nt.dump="{"+vt+"}"}function writeBlockMapping(nt,rt,it,vt){var bt="",wt=nt.tag,Tt=Object.keys(it),kt,Lt,Mt,Nt,zt,Ht;if(nt.sortKeys===!0)Tt.sort();else if(typeof nt.sortKeys=="function")Tt.sort(nt.sortKeys);else if(nt.sortKeys)throw new exception$1("sortKeys must be a boolean or a function");for(kt=0,Lt=Tt.length;kt<Lt;kt+=1)Ht="",(!vt||bt!=="")&&(Ht+=generateNextLine(nt,rt)),Mt=Tt[kt],Nt=it[Mt],nt.replacer&&(Nt=nt.replacer.call(it,Mt,Nt)),writeNode(nt,rt+1,Mt,!0,!0,!0)&&(zt=nt.tag!==null&&nt.tag!=="?"||nt.dump&&nt.dump.length>1024,zt&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Ht+="?":Ht+="? "),Ht+=nt.dump,zt&&(Ht+=generateNextLine(nt,rt)),writeNode(nt,rt+1,Nt,!0,zt)&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Ht+=":":Ht+=": ",Ht+=nt.dump,bt+=Ht));nt.tag=wt,nt.dump=bt||"{}"}function detectType$1(nt,rt,it){var vt,bt,wt,Tt,kt,Lt;for(bt=it?nt.explicitTypes:nt.implicitTypes,wt=0,Tt=bt.length;wt<Tt;wt+=1)if(kt=bt[wt],(kt.instanceOf||kt.predicate)&&(!kt.instanceOf||typeof rt=="object"&&rt instanceof kt.instanceOf)&&(!kt.predicate||kt.predicate(rt))){if(it?kt.multi&&kt.representName?nt.tag=kt.representName(rt):nt.tag=kt.tag:nt.tag="?",kt.represent){if(Lt=nt.styleMap[kt.tag]||kt.defaultStyle,_toString.call(kt.represent)==="[object Function]")vt=kt.represent(rt,Lt);else if(_hasOwnProperty.call(kt.represent,Lt))vt=kt.represent[Lt](rt,Lt);else throw new exception$1("!<"+kt.tag+'> tag resolver accepts not "'+Lt+'" style');nt.dump=vt}return!0}return!1}function writeNode(nt,rt,it,vt,bt,wt,Tt){nt.tag=null,nt.dump=it,detectType$1(nt,it,!1)||detectType$1(nt,it,!0);var kt=_toString.call(nt.dump),Lt=vt,Mt;vt&&(vt=nt.flowLevel<0||nt.flowLevel>rt);var Nt=kt==="[object Object]"||kt==="[object Array]",zt,Ht;if(Nt&&(zt=nt.duplicates.indexOf(it),Ht=zt!==-1),(nt.tag!==null&&nt.tag!=="?"||Ht||nt.indent!==2&&rt>0)&&(bt=!1),Ht&&nt.usedDuplicates[zt])nt.dump="*ref_"+zt;else{if(Nt&&Ht&&!nt.usedDuplicates[zt]&&(nt.usedDuplicates[zt]=!0),kt==="[object Object]")vt&&Object.keys(nt.dump).length!==0?(writeBlockMapping(nt,rt,nt.dump,bt),Ht&&(nt.dump="&ref_"+zt+nt.dump)):(writeFlowMapping(nt,rt,nt.dump),Ht&&(nt.dump="&ref_"+zt+" "+nt.dump));else if(kt==="[object Array]")vt&&nt.dump.length!==0?(nt.noArrayIndent&&!Tt&&rt>0?writeBlockSequence(nt,rt-1,nt.dump,bt):writeBlockSequence(nt,rt,nt.dump,bt),Ht&&(nt.dump="&ref_"+zt+nt.dump)):(writeFlowSequence(nt,rt,nt.dump),Ht&&(nt.dump="&ref_"+zt+" "+nt.dump));else if(kt==="[object String]")nt.tag!=="?"&&writeScalar(nt,nt.dump,rt,wt,Lt);else{if(kt==="[object Undefined]")return!1;if(nt.skipInvalid)return!1;throw new exception$1("unacceptable kind of an object to dump "+kt)}nt.tag!==null&&nt.tag!=="?"&&(Mt=encodeURI(nt.tag[0]==="!"?nt.tag.slice(1):nt.tag).replace(/!/g,"%21"),nt.tag[0]==="!"?Mt="!"+Mt:Mt.slice(0,18)==="tag:yaml.org,2002:"?Mt="!!"+Mt.slice(18):Mt="!<"+Mt+">",nt.dump=Mt+" "+nt.dump)}return!0}function getDuplicateReferences(nt,rt){var it=[],vt=[],bt,wt;for(inspectNode(nt,it,vt),bt=0,wt=vt.length;bt<wt;bt+=1)rt.duplicates.push(it[vt[bt]]);rt.usedDuplicates=new Array(wt)}function inspectNode(nt,rt,it){var vt,bt,wt;if(nt!==null&&typeof nt=="object")if(bt=rt.indexOf(nt),bt!==-1)it.indexOf(bt)===-1&&it.push(bt);else if(rt.push(nt),Array.isArray(nt))for(bt=0,wt=nt.length;bt<wt;bt+=1)inspectNode(nt[bt],rt,it);else for(vt=Object.keys(nt),bt=0,wt=vt.length;bt<wt;bt+=1)inspectNode(nt[vt[bt]],rt,it)}function dump$1(nt,rt){rt=rt||{};var it=new State(rt);it.noRefs||getDuplicateReferences(nt,it);var vt=nt;return it.replacer&&(vt=it.replacer.call({"":vt},"",vt)),writeNode(it,0,vt,!0,!0)?it.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(nt,rt){return function(){throw new Error("Function yaml."+nt+" is removed in js-yaml 4. Use yaml."+rt+" instead, which is now safe by default.")}}var Type$3=type$1,Schema=schema$1,FAILSAFE_SCHEMA$1=failsafe$1,JSON_SCHEMA=json$1,CORE_SCHEMA=core$1,DEFAULT_SCHEMA=_default$1,load$2=loader$1.load,loadAll=loader$1.loadAll,dump=dumper.dump,YAMLException=exception$1,types$1={binary:binary$1,float:float$1,map:map$3,null:_null$1,pairs:pairs$1,set:set$3,timestamp:timestamp$1,bool:bool$1,int:int$1,merge:merge$4,omap:omap$1,seq:seq$2,str:str$1},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type:Type$3,Schema,FAILSAFE_SCHEMA:FAILSAFE_SCHEMA$1,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load:load$2,loadAll,dump,YAMLException,types:types$1,safeLoad,safeLoadAll,safeDump};function isTabbable(nt){const rt=nt.tagName.toLowerCase();return nt.getAttribute("tabindex")==="-1"||nt.hasAttribute("disabled")||nt.hasAttribute("aria-disabled")&&nt.getAttribute("aria-disabled")!=="false"||rt==="input"&&nt.getAttribute("type")==="radio"&&!nt.hasAttribute("checked")||nt.offsetParent===null||window.getComputedStyle(nt).visibility==="hidden"?!1:(rt==="audio"||rt==="video")&&nt.hasAttribute("controls")||nt.hasAttribute("tabindex")||nt.hasAttribute("contenteditable")&&nt.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(rt)}function getTabbableBoundary(nt){var rt,it;const vt=[];function bt(kt){kt instanceof HTMLElement&&(vt.push(kt),kt.shadowRoot!==null&&kt.shadowRoot.mode==="open"&&bt(kt.shadowRoot)),[...kt.children].forEach(Lt=>bt(Lt))}bt(nt);const wt=(rt=vt.find(kt=>isTabbable(kt)))!=null?rt:null,Tt=(it=vt.reverse().find(kt=>isTabbable(kt)))!=null?it:null;return{start:wt,end:Tt}}var activeModals=[],Modal$1=class{constructor(nt){this.tabDirection="forward",this.element=nt,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}activate(){activeModals.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){activeModals=activeModals.filter(nt=>nt!==this.element),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return activeModals[activeModals.length-1]===this.element}checkFocus(){if(this.isActive()&&!this.element.matches(":focus-within")){const{start:nt,end:rt}=getTabbableBoundary(this.element),it=this.tabDirection==="forward"?nt:rt;typeof(it==null?void 0:it.focus)=="function"&&it.focus({preventScroll:!0})}}handleFocusIn(){this.checkFocus()}handleKeyDown(nt){nt.key==="Tab"&&nt.shiftKey&&(this.tabDirection="backward",requestAnimationFrame(()=>this.checkFocus()))}handleKeyUp(){this.tabDirection="forward"}};function getOffset(nt,rt){return{top:Math.round(nt.getBoundingClientRect().top-rt.getBoundingClientRect().top),left:Math.round(nt.getBoundingClientRect().left-rt.getBoundingClientRect().left)}}var locks=new Set;function lockBodyScrolling(nt){locks.add(nt),document.body.classList.add("sl-scroll-lock")}function unlockBodyScrolling(nt){locks.delete(nt),locks.size===0&&document.body.classList.remove("sl-scroll-lock")}function scrollIntoView(nt,rt,it="vertical",vt="smooth"){const bt=getOffset(nt,rt),wt=bt.top+rt.scrollTop,Tt=bt.left+rt.scrollLeft,kt=rt.scrollLeft,Lt=rt.scrollLeft+rt.offsetWidth,Mt=rt.scrollTop,Nt=rt.scrollTop+rt.offsetHeight;(it==="horizontal"||it==="both")&&(Tt<kt?rt.scrollTo({left:Tt,behavior:vt}):Tt+nt.clientWidth>Lt&&rt.scrollTo({left:Tt-rt.offsetWidth+nt.clientWidth,behavior:vt})),(it==="vertical"||it==="both")&&(wt<Mt?rt.scrollTo({top:wt,behavior:vt}):wt+nt.clientHeight>Nt&&rt.scrollTo({top:wt-rt.offsetHeight+nt.clientHeight,behavior:vt}))}var t$3=window,e$3=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),n$3=new WeakMap,o$2=class{constructor(nt,rt,it){if(this._$cssResult$=!0,it!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=nt,this.t=rt}get styleSheet(){let nt=this.o;const rt=this.t;if(e$3&&nt===void 0){const it=rt!==void 0&&rt.length===1;it&&(nt=n$3.get(rt)),nt===void 0&&((this.o=nt=new CSSStyleSheet).replaceSync(this.cssText),it&&n$3.set(rt,nt))}return nt}toString(){return this.cssText}},r$1=nt=>new o$2(typeof nt=="string"?nt:nt+"",void 0,s$4),i$4=(nt,...rt)=>{const it=nt.length===1?nt[0]:rt.reduce((vt,bt,wt)=>vt+(Tt=>{if(Tt._$cssResult$===!0)return Tt.cssText;if(typeof Tt=="number")return Tt;throw Error("Value passed to 'css' function must be a 'css' function result: "+Tt+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(bt)+nt[wt+1],nt[0]);return new o$2(it,nt,s$4)},S=(nt,rt)=>{e$3?nt.adoptedStyleSheets=rt.map(it=>it instanceof CSSStyleSheet?it:it.styleSheet):rt.forEach(it=>{const vt=document.createElement("style"),bt=t$3.litNonce;bt!==void 0&&vt.setAttribute("nonce",bt),vt.textContent=it.cssText,nt.appendChild(vt)})},c$2=e$3?nt=>nt:nt=>nt instanceof CSSStyleSheet?(rt=>{let it="";for(const vt of rt.cssRules)it+=vt.cssText;return r$1(it)})(nt):nt,s2$1,e2$3=window,r2$1=e2$3.trustedTypes,h$2=r2$1?r2$1.emptyScript:"",o2$2=e2$3.reactiveElementPolyfillSupport,n2$1={toAttribute(nt,rt){switch(rt){case Boolean:nt=nt?h$2:null;break;case Object:case Array:nt=nt==null?nt:JSON.stringify(nt)}return nt},fromAttribute(nt,rt){let it=nt;switch(rt){case Boolean:it=nt!==null;break;case Number:it=nt===null?null:Number(nt);break;case Object:case Array:try{it=JSON.parse(nt)}catch{it=null}}return it}},a$2=(nt,rt)=>rt!==nt&&(rt==rt||nt==nt),l$3={attribute:!0,type:String,converter:n2$1,reflect:!1,hasChanged:a$2},d$2=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(nt){var rt;this.finalize(),((rt=this.h)!==null&&rt!==void 0?rt:this.h=[]).push(nt)}static get observedAttributes(){this.finalize();const nt=[];return this.elementProperties.forEach((rt,it)=>{const vt=this._$Ep(it,rt);vt!==void 0&&(this._$Ev.set(vt,it),nt.push(vt))}),nt}static createProperty(nt,rt=l$3){if(rt.state&&(rt.attribute=!1),this.finalize(),this.elementProperties.set(nt,rt),!rt.noAccessor&&!this.prototype.hasOwnProperty(nt)){const it=typeof nt=="symbol"?Symbol():"__"+nt,vt=this.getPropertyDescriptor(nt,it,rt);vt!==void 0&&Object.defineProperty(this.prototype,nt,vt)}}static getPropertyDescriptor(nt,rt,it){return{get(){return this[rt]},set(vt){const bt=this[nt];this[rt]=vt,this.requestUpdate(nt,bt,it)},configurable:!0,enumerable:!0}}static getPropertyOptions(nt){return this.elementProperties.get(nt)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const nt=Object.getPrototypeOf(this);if(nt.finalize(),nt.h!==void 0&&(this.h=[...nt.h]),this.elementProperties=new Map(nt.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const rt=this.properties,it=[...Object.getOwnPropertyNames(rt),...Object.getOwnPropertySymbols(rt)];for(const vt of it)this.createProperty(vt,rt[vt])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(nt){const rt=[];if(Array.isArray(nt)){const it=new Set(nt.flat(1/0).reverse());for(const vt of it)rt.unshift(c$2(vt))}else nt!==void 0&&rt.push(c$2(nt));return rt}static _$Ep(nt,rt){const it=rt.attribute;return it===!1?void 0:typeof it=="string"?it:typeof nt=="string"?nt.toLowerCase():void 0}u(){var nt;this._$E_=new Promise(rt=>this.enableUpdating=rt),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(nt=this.constructor.h)===null||nt===void 0||nt.forEach(rt=>rt(this))}addController(nt){var rt,it;((rt=this._$ES)!==null&&rt!==void 0?rt:this._$ES=[]).push(nt),this.renderRoot!==void 0&&this.isConnected&&((it=nt.hostConnected)===null||it===void 0||it.call(nt))}removeController(nt){var rt;(rt=this._$ES)===null||rt===void 0||rt.splice(this._$ES.indexOf(nt)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((nt,rt)=>{this.hasOwnProperty(rt)&&(this._$Ei.set(rt,this[rt]),delete this[rt])})}createRenderRoot(){var nt;const rt=(nt=this.shadowRoot)!==null&&nt!==void 0?nt:this.attachShadow(this.constructor.shadowRootOptions);return S(rt,this.constructor.elementStyles),rt}connectedCallback(){var nt;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(nt=this._$ES)===null||nt===void 0||nt.forEach(rt=>{var it;return(it=rt.hostConnected)===null||it===void 0?void 0:it.call(rt)})}enableUpdating(nt){}disconnectedCallback(){var nt;(nt=this._$ES)===null||nt===void 0||nt.forEach(rt=>{var it;return(it=rt.hostDisconnected)===null||it===void 0?void 0:it.call(rt)})}attributeChangedCallback(nt,rt,it){this._$AK(nt,it)}_$EO(nt,rt,it=l$3){var vt;const bt=this.constructor._$Ep(nt,it);if(bt!==void 0&&it.reflect===!0){const wt=(((vt=it.converter)===null||vt===void 0?void 0:vt.toAttribute)!==void 0?it.converter:n2$1).toAttribute(rt,it.type);this._$El=nt,wt==null?this.removeAttribute(bt):this.setAttribute(bt,wt),this._$El=null}}_$AK(nt,rt){var it;const vt=this.constructor,bt=vt._$Ev.get(nt);if(bt!==void 0&&this._$El!==bt){const wt=vt.getPropertyOptions(bt),Tt=typeof wt.converter=="function"?{fromAttribute:wt.converter}:((it=wt.converter)===null||it===void 0?void 0:it.fromAttribute)!==void 0?wt.converter:n2$1;this._$El=bt,this[bt]=Tt.fromAttribute(rt,wt.type),this._$El=null}}requestUpdate(nt,rt,it){let vt=!0;nt!==void 0&&(((it=it||this.constructor.getPropertyOptions(nt)).hasChanged||a$2)(this[nt],rt)?(this._$AL.has(nt)||this._$AL.set(nt,rt),it.reflect===!0&&this._$El!==nt&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(nt,it))):vt=!1),!this.isUpdatePending&&vt&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(rt){Promise.reject(rt)}const nt=this.scheduleUpdate();return nt!=null&&await nt,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var nt;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((vt,bt)=>this[bt]=vt),this._$Ei=void 0);let rt=!1;const it=this._$AL;try{rt=this.shouldUpdate(it),rt?(this.willUpdate(it),(nt=this._$ES)===null||nt===void 0||nt.forEach(vt=>{var bt;return(bt=vt.hostUpdate)===null||bt===void 0?void 0:bt.call(vt)}),this.update(it)):this._$Ek()}catch(vt){throw rt=!1,this._$Ek(),vt}rt&&this._$AE(it)}willUpdate(nt){}_$AE(nt){var rt;(rt=this._$ES)===null||rt===void 0||rt.forEach(it=>{var vt;return(vt=it.hostUpdated)===null||vt===void 0?void 0:vt.call(it)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(nt)),this.updated(nt)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(nt){return!0}update(nt){this._$EC!==void 0&&(this._$EC.forEach((rt,it)=>this._$EO(it,this[it],rt)),this._$EC=void 0),this._$Ek()}updated(nt){}firstUpdated(nt){}};d$2.finalized=!0,d$2.elementProperties=new Map,d$2.elementStyles=[],d$2.shadowRootOptions={mode:"open"},o2$2==null||o2$2({ReactiveElement:d$2}),((s2$1=e2$3.reactiveElementVersions)!==null&&s2$1!==void 0?s2$1:e2$3.reactiveElementVersions=[]).push("1.4.2");var t2$1,i2$3=window,s3=i2$3.trustedTypes,e3$1=s3?s3.createPolicy("lit-html",{createHTML:nt=>nt}):void 0,o3$1=`lit$${(Math.random()+"").slice(9)}$`,n3="?"+o3$1,l2$2=`<${n3}>`,h2$1=document,r3=(nt="")=>h2$1.createComment(nt),d2$1=nt=>nt===null||typeof nt!="object"&&typeof nt!="function",u$1=Array.isArray,c2$1=nt=>u$1(nt)||typeof(nt==null?void 0:nt[Symbol.iterator])=="function",v=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a2$1=/-->/g,f$2=/>/g,_$1=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$2=/'/g,p$1=/"/g,$=/^(?:script|style|textarea|title)$/i,g$1=nt=>(rt,...it)=>({_$litType$:nt,strings:rt,values:it}),y$2=g$1(1),x$2=Symbol.for("lit-noChange"),b$1=Symbol.for("lit-nothing"),T$1=new WeakMap,A$1=h2$1.createTreeWalker(h2$1,129,null,!1),E=(nt,rt)=>{const it=nt.length-1,vt=[];let bt,wt=rt===2?"<svg>":"",Tt=v;for(let Lt=0;Lt<it;Lt++){const Mt=nt[Lt];let Nt,zt,Ht=-1,Wt=0;for(;Wt<Mt.length&&(Tt.lastIndex=Wt,zt=Tt.exec(Mt),zt!==null);)Wt=Tt.lastIndex,Tt===v?zt[1]==="!--"?Tt=a2$1:zt[1]!==void 0?Tt=f$2:zt[2]!==void 0?($.test(zt[2])&&(bt=RegExp("</"+zt[2],"g")),Tt=_$1):zt[3]!==void 0&&(Tt=_$1):Tt===_$1?zt[0]===">"?(Tt=bt!=null?bt:v,Ht=-1):zt[1]===void 0?Ht=-2:(Ht=Tt.lastIndex-zt[2].length,Nt=zt[1],Tt=zt[3]===void 0?_$1:zt[3]==='"'?p$1:m$2):Tt===p$1||Tt===m$2?Tt=_$1:Tt===a2$1||Tt===f$2?Tt=v:(Tt=_$1,bt=void 0);const Zt=Tt===_$1&&nt[Lt+1].startsWith("/>")?" ":"";wt+=Tt===v?Mt+l2$2:Ht>=0?(vt.push(Nt),Mt.slice(0,Ht)+"$lit$"+Mt.slice(Ht)+o3$1+Zt):Mt+o3$1+(Ht===-2?(vt.push(void 0),Lt):Zt)}const kt=wt+(nt[it]||"<?>")+(rt===2?"</svg>":"");if(!Array.isArray(nt)||!nt.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e3$1!==void 0?e3$1.createHTML(kt):kt,vt]},C$1=class{constructor({strings:nt,_$litType$:rt},it){let vt;this.parts=[];let bt=0,wt=0;const Tt=nt.length-1,kt=this.parts,[Lt,Mt]=E(nt,rt);if(this.el=C$1.createElement(Lt,it),A$1.currentNode=this.el.content,rt===2){const Nt=this.el.content,zt=Nt.firstChild;zt.remove(),Nt.append(...zt.childNodes)}for(;(vt=A$1.nextNode())!==null&&kt.length<Tt;){if(vt.nodeType===1){if(vt.hasAttributes()){const Nt=[];for(const zt of vt.getAttributeNames())if(zt.endsWith("$lit$")||zt.startsWith(o3$1)){const Ht=Mt[wt++];if(Nt.push(zt),Ht!==void 0){const Wt=vt.getAttribute(Ht.toLowerCase()+"$lit$").split(o3$1),Zt=/([.?@])?(.*)/.exec(Ht);kt.push({type:1,index:bt,name:Zt[2],strings:Wt,ctor:Zt[1]==="."?M:Zt[1]==="?"?k$1:Zt[1]==="@"?H$1:S2})}else kt.push({type:6,index:bt})}for(const zt of Nt)vt.removeAttribute(zt)}if($.test(vt.tagName)){const Nt=vt.textContent.split(o3$1),zt=Nt.length-1;if(zt>0){vt.textContent=s3?s3.emptyScript:"";for(let Ht=0;Ht<zt;Ht++)vt.append(Nt[Ht],r3()),A$1.nextNode(),kt.push({type:2,index:++bt});vt.append(Nt[zt],r3())}}}else if(vt.nodeType===8)if(vt.data===n3)kt.push({type:2,index:bt});else{let Nt=-1;for(;(Nt=vt.data.indexOf(o3$1,Nt+1))!==-1;)kt.push({type:7,index:bt}),Nt+=o3$1.length-1}bt++}}static createElement(nt,rt){const it=h2$1.createElement("template");return it.innerHTML=nt,it}};function P(nt,rt,it=nt,vt){var bt,wt,Tt,kt;if(rt===x$2)return rt;let Lt=vt!==void 0?(bt=it._$Co)===null||bt===void 0?void 0:bt[vt]:it._$Cl;const Mt=d2$1(rt)?void 0:rt._$litDirective$;return(Lt==null?void 0:Lt.constructor)!==Mt&&((wt=Lt==null?void 0:Lt._$AO)===null||wt===void 0||wt.call(Lt,!1),Mt===void 0?Lt=void 0:(Lt=new Mt(nt),Lt._$AT(nt,it,vt)),vt!==void 0?((Tt=(kt=it)._$Co)!==null&&Tt!==void 0?Tt:kt._$Co=[])[vt]=Lt:it._$Cl=Lt),Lt!==void 0&&(rt=P(nt,Lt._$AS(nt,rt.values),Lt,vt)),rt}var V=class{constructor(nt,rt){this.u=[],this._$AN=void 0,this._$AD=nt,this._$AM=rt}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(nt){var rt;const{el:{content:it},parts:vt}=this._$AD,bt=((rt=nt==null?void 0:nt.creationScope)!==null&&rt!==void 0?rt:h2$1).importNode(it,!0);A$1.currentNode=bt;let wt=A$1.nextNode(),Tt=0,kt=0,Lt=vt[0];for(;Lt!==void 0;){if(Tt===Lt.index){let Mt;Lt.type===2?Mt=new N(wt,wt.nextSibling,this,nt):Lt.type===1?Mt=new Lt.ctor(wt,Lt.name,Lt.strings,this,nt):Lt.type===6&&(Mt=new I(wt,this,nt)),this.u.push(Mt),Lt=vt[++kt]}Tt!==(Lt==null?void 0:Lt.index)&&(wt=A$1.nextNode(),Tt++)}return bt}p(nt){let rt=0;for(const it of this.u)it!==void 0&&(it.strings!==void 0?(it._$AI(nt,it,rt),rt+=it.strings.length-2):it._$AI(nt[rt])),rt++}},N=class{constructor(nt,rt,it,vt){var bt;this.type=2,this._$AH=b$1,this._$AN=void 0,this._$AA=nt,this._$AB=rt,this._$AM=it,this.options=vt,this._$Cm=(bt=vt==null?void 0:vt.isConnected)===null||bt===void 0||bt}get _$AU(){var nt,rt;return(rt=(nt=this._$AM)===null||nt===void 0?void 0:nt._$AU)!==null&&rt!==void 0?rt:this._$Cm}get parentNode(){let nt=this._$AA.parentNode;const rt=this._$AM;return rt!==void 0&&nt.nodeType===11&&(nt=rt.parentNode),nt}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(nt,rt=this){nt=P(this,nt,rt),d2$1(nt)?nt===b$1||nt==null||nt===""?(this._$AH!==b$1&&this._$AR(),this._$AH=b$1):nt!==this._$AH&&nt!==x$2&&this.g(nt):nt._$litType$!==void 0?this.$(nt):nt.nodeType!==void 0?this.T(nt):c2$1(nt)?this.k(nt):this.g(nt)}O(nt,rt=this._$AB){return this._$AA.parentNode.insertBefore(nt,rt)}T(nt){this._$AH!==nt&&(this._$AR(),this._$AH=this.O(nt))}g(nt){this._$AH!==b$1&&d2$1(this._$AH)?this._$AA.nextSibling.data=nt:this.T(h2$1.createTextNode(nt)),this._$AH=nt}$(nt){var rt;const{values:it,_$litType$:vt}=nt,bt=typeof vt=="number"?this._$AC(nt):(vt.el===void 0&&(vt.el=C$1.createElement(vt.h,this.options)),vt);if(((rt=this._$AH)===null||rt===void 0?void 0:rt._$AD)===bt)this._$AH.p(it);else{const wt=new V(bt,this),Tt=wt.v(this.options);wt.p(it),this.T(Tt),this._$AH=wt}}_$AC(nt){let rt=T$1.get(nt.strings);return rt===void 0&&T$1.set(nt.strings,rt=new C$1(nt)),rt}k(nt){u$1(this._$AH)||(this._$AH=[],this._$AR());const rt=this._$AH;let it,vt=0;for(const bt of nt)vt===rt.length?rt.push(it=new N(this.O(r3()),this.O(r3()),this,this.options)):it=rt[vt],it._$AI(bt),vt++;vt<rt.length&&(this._$AR(it&&it._$AB.nextSibling,vt),rt.length=vt)}_$AR(nt=this._$AA.nextSibling,rt){var it;for((it=this._$AP)===null||it===void 0||it.call(this,!1,!0,rt);nt&&nt!==this._$AB;){const vt=nt.nextSibling;nt.remove(),nt=vt}}setConnected(nt){var rt;this._$AM===void 0&&(this._$Cm=nt,(rt=this._$AP)===null||rt===void 0||rt.call(this,nt))}},S2=class{constructor(nt,rt,it,vt,bt){this.type=1,this._$AH=b$1,this._$AN=void 0,this.element=nt,this.name=rt,this._$AM=vt,this.options=bt,it.length>2||it[0]!==""||it[1]!==""?(this._$AH=Array(it.length-1).fill(new String),this.strings=it):this._$AH=b$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(nt,rt=this,it,vt){const bt=this.strings;let wt=!1;if(bt===void 0)nt=P(this,nt,rt,0),wt=!d2$1(nt)||nt!==this._$AH&&nt!==x$2,wt&&(this._$AH=nt);else{const Tt=nt;let kt,Lt;for(nt=bt[0],kt=0;kt<bt.length-1;kt++)Lt=P(this,Tt[it+kt],rt,kt),Lt===x$2&&(Lt=this._$AH[kt]),wt||(wt=!d2$1(Lt)||Lt!==this._$AH[kt]),Lt===b$1?nt=b$1:nt!==b$1&&(nt+=(Lt!=null?Lt:"")+bt[kt+1]),this._$AH[kt]=Lt}wt&&!vt&&this.j(nt)}j(nt){nt===b$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,nt!=null?nt:"")}},M=class extends S2{constructor(){super(...arguments),this.type=3}j(nt){this.element[this.name]=nt===b$1?void 0:nt}},R$1=s3?s3.emptyScript:"",k$1=class extends S2{constructor(){super(...arguments),this.type=4}j(nt){nt&&nt!==b$1?this.element.setAttribute(this.name,R$1):this.element.removeAttribute(this.name)}},H$1=class extends S2{constructor(nt,rt,it,vt,bt){super(nt,rt,it,vt,bt),this.type=5}_$AI(nt,rt=this){var it;if((nt=(it=P(this,nt,rt,0))!==null&&it!==void 0?it:b$1)===x$2)return;const vt=this._$AH,bt=nt===b$1&&vt!==b$1||nt.capture!==vt.capture||nt.once!==vt.once||nt.passive!==vt.passive,wt=nt!==b$1&&(vt===b$1||bt);bt&&this.element.removeEventListener(this.name,this,vt),wt&&this.element.addEventListener(this.name,this,nt),this._$AH=nt}handleEvent(nt){var rt,it;typeof this._$AH=="function"?this._$AH.call((it=(rt=this.options)===null||rt===void 0?void 0:rt.host)!==null&&it!==void 0?it:this.element,nt):this._$AH.handleEvent(nt)}},I=class{constructor(nt,rt,it){this.element=nt,this.type=6,this._$AN=void 0,this._$AM=rt,this.options=it}get _$AU(){return this._$AM._$AU}_$AI(nt){P(this,nt)}},z=i2$3.litHtmlPolyfillSupport;z==null||z(C$1,N),((t2$1=i2$3.litHtmlVersions)!==null&&t2$1!==void 0?t2$1:i2$3.litHtmlVersions=[]).push("2.4.0");var Z=(nt,rt,it)=>{var vt,bt;const wt=(vt=it==null?void 0:it.renderBefore)!==null&&vt!==void 0?vt:rt;let Tt=wt._$litPart$;if(Tt===void 0){const kt=(bt=it==null?void 0:it.renderBefore)!==null&&bt!==void 0?bt:null;wt._$litPart$=Tt=new N(rt.insertBefore(r3(),kt),kt,void 0,it!=null?it:{})}return Tt._$AI(nt),Tt},l3,o4,s4=class extends d$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var nt,rt;const it=super.createRenderRoot();return(nt=(rt=this.renderOptions).renderBefore)!==null&&nt!==void 0||(rt.renderBefore=it.firstChild),it}update(nt){const rt=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(nt),this._$Dt=Z(rt,this.renderRoot,this.renderOptions)}connectedCallback(){var nt;super.connectedCallback(),(nt=this._$Dt)===null||nt===void 0||nt.setConnected(!0)}disconnectedCallback(){var nt;super.disconnectedCallback(),(nt=this._$Dt)===null||nt===void 0||nt.setConnected(!1)}render(){return x$2}};s4.finalized=!0,s4._$litElement$=!0,(l3=globalThis.litElementHydrateSupport)===null||l3===void 0||l3.call(globalThis,{LitElement:s4});var n4=globalThis.litElementPolyfillSupport;n4==null||n4({LitElement:s4});((o4=globalThis.litElementVersions)!==null&&o4!==void 0?o4:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var component_styles_default=i$4`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`,dialog_styles_default=i$4`
  ${component_styles_default}

  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .dialog__header-actions sl-icon-button,
  .dialog__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .dialog__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }

  @media (forced-colors: active) {
    .dialog__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`;function waitForEvent(nt,rt){return new Promise(it=>{function vt(bt){bt.target===nt&&(nt.removeEventListener(rt,vt),it())}nt.addEventListener(rt,vt)})}function animateTo(nt,rt,it){return new Promise(vt=>{if((it==null?void 0:it.duration)===1/0)throw new Error("Promise-based animations must be finite.");const bt=nt.animate(rt,__spreadProps(__spreadValues({},it),{duration:prefersReducedMotion()?0:it.duration}));bt.addEventListener("cancel",vt,{once:!0}),bt.addEventListener("finish",vt,{once:!0})})}function parseDuration$1(nt){return nt=nt.toString().toLowerCase(),nt.indexOf("ms")>-1?parseFloat(nt):nt.indexOf("s")>-1?parseFloat(nt)*1e3:parseFloat(nt)}function prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function stopAnimations(nt){return Promise.all(nt.getAnimations().map(rt=>new Promise(it=>{const vt=requestAnimationFrame(it);rt.addEventListener("cancel",()=>vt,{once:!0}),rt.addEventListener("finish",()=>vt,{once:!0}),rt.cancel()})))}function shimKeyframesHeightAuto(nt,rt){return nt.map(it=>__spreadProps(__spreadValues({},it),{height:it.height==="auto"?`${rt}px`:it.height}))}var defaultAnimationRegistry=new Map,customAnimationRegistry=new WeakMap;function ensureAnimation(nt){return nt!=null?nt:{keyframes:[],options:{duration:0}}}function getLogicalAnimation(nt,rt){return rt.toLowerCase()==="rtl"?{keyframes:nt.rtlKeyframes||nt.keyframes,options:nt.options}:nt}function setDefaultAnimation(nt,rt){defaultAnimationRegistry.set(nt,ensureAnimation(rt))}function getAnimation(nt,rt,it){const vt=customAnimationRegistry.get(nt);if(vt!=null&&vt[rt])return getLogicalAnimation(vt[rt],it.dir);const bt=defaultAnimationRegistry.get(rt);return bt?getLogicalAnimation(bt,it.dir):{keyframes:[],options:{duration:0}}}var connectedElements=new Set,documentElementObserver=new MutationObserver(update),translations=new Map,documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,fallback;documentElementObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});function registerTranslation(...nt){nt.map(rt=>{const it=rt.$code.toLowerCase();translations.has(it)?translations.set(it,Object.assign(Object.assign({},translations.get(it)),rt)):translations.set(it,rt),fallback||(fallback=rt)}),update()}function update(){documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,[...connectedElements.keys()].map(nt=>{typeof nt.requestUpdate=="function"&&nt.requestUpdate()})}var LocalizeController=class{constructor(nt){this.host=nt,this.host.addController(this)}hostConnected(){connectedElements.add(this.host)}hostDisconnected(){connectedElements.delete(this.host)}dir(){return`${this.host.dir||documentDirection}`.toLowerCase()}lang(){return`${this.host.lang||documentLanguage}`.toLowerCase()}term(nt,...rt){var it,vt;const bt=new Intl.Locale(this.lang()),wt=bt==null?void 0:bt.language.toLowerCase(),Tt=(vt=(it=bt==null?void 0:bt.region)===null||it===void 0?void 0:it.toLowerCase())!==null&&vt!==void 0?vt:"",kt=translations.get(`${wt}-${Tt}`),Lt=translations.get(wt);let Mt;if(kt&&kt[nt])Mt=kt[nt];else if(Lt&&Lt[nt])Mt=Lt[nt];else if(fallback&&fallback[nt])Mt=fallback[nt];else return console.error(`No translation found for: ${String(nt)}`),String(nt);return typeof Mt=="function"?Mt(...rt):Mt}date(nt,rt){return nt=new Date(nt),new Intl.DateTimeFormat(this.lang(),rt).format(nt)}number(nt,rt){return nt=Number(nt),isNaN(nt)?"":new Intl.NumberFormat(this.lang(),rt).format(nt)}relativeTime(nt,rt,it){return new Intl.RelativeTimeFormat(this.lang(),it).format(nt,rt)}},LocalizeController2=class extends LocalizeController{},translation={$code:"en",$name:"English",$dir:"ltr",clearEntry:"Clear entry",close:"Close",copy:"Copy",numOptionsSelected:nt=>nt===0?"No options selected":nt===1?"1 option selected":`${nt} options selected`,currentValue:"Current value",hidePassword:"Hide password",loading:"Loading",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",toggleColorFormat:"Toggle color format"};registerTranslation(translation);var HasSlotController=class{constructor(nt,...rt){this.slotNames=[],(this.host=nt).addController(this),this.slotNames=rt,this.handleSlotChange=this.handleSlotChange.bind(this)}hasDefaultSlot(){return[...this.host.childNodes].some(nt=>{if(nt.nodeType===nt.TEXT_NODE&&nt.textContent.trim()!=="")return!0;if(nt.nodeType===nt.ELEMENT_NODE){const rt=nt;if(rt.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!rt.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(nt){return this.host.querySelector(`:scope > [slot="${nt}"]`)!==null}test(nt){return nt==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(nt)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}handleSlotChange(nt){const rt=nt.target;(this.slotNames.includes("[default]")&&!rt.name||rt.name&&this.slotNames.includes(rt.name))&&this.host.requestUpdate()}};function getTextContent(nt){if(!nt)return"";const rt=nt.assignedNodes({flatten:!0});let it="";return[...rt].forEach(vt=>{vt.nodeType===Node.TEXT_NODE&&(it+=vt.textContent)}),it}var l$2=nt=>nt!=null?nt:b$1;/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$2=nt=>(...rt)=>({_$litDirective$:nt,values:rt}),i$3=class{constructor(nt){}get _$AU(){return this._$AM._$AU}_$AT(nt,rt,it){this._$Ct=nt,this._$AM=rt,this._$Ci=it}_$AS(nt,rt){return this.update(nt,rt)}update(nt,rt){return this.render(...rt)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var o$1=e$2(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t$2.ATTRIBUTE||nt.name!=="class"||((rt=nt.strings)===null||rt===void 0?void 0:rt.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(nt){return" "+Object.keys(nt).filter(rt=>nt[rt]).join(" ")+" "}update(nt,[rt]){var it,vt;if(this.nt===void 0){this.nt=new Set,nt.strings!==void 0&&(this.st=new Set(nt.strings.join(" ").split(/\s/).filter(wt=>wt!=="")));for(const wt in rt)rt[wt]&&!(!((it=this.st)===null||it===void 0)&&it.has(wt))&&this.nt.add(wt);return this.render(rt)}const bt=nt.element.classList;this.nt.forEach(wt=>{wt in rt||(bt.remove(wt),this.nt.delete(wt))});for(const wt in rt){const Tt=!!rt[wt];Tt===this.nt.has(wt)||((vt=this.st)===null||vt===void 0?void 0:vt.has(wt))||(Tt?(bt.add(wt),this.nt.add(wt)):(bt.remove(wt),this.nt.delete(wt)))}return x$2}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function watch(nt,rt){const it=__spreadValues({waitUntilFirstUpdate:!1},rt);return(vt,bt)=>{const{update:wt}=vt;if(nt in vt){const Tt=nt;vt.update=function(kt){if(kt.has(Tt)){const Lt=kt.get(Tt),Mt=this[Tt];Lt!==Mt&&(!it.waitUntilFirstUpdate||this.hasUpdated)&&this[bt](Lt,Mt)}wt.call(this,kt)}}}}var e$1=nt=>rt=>typeof rt=="function"?((it,vt)=>(customElements.define(it,vt),vt))(nt,rt):((it,vt)=>{const{kind:bt,elements:wt}=vt;return{kind:bt,elements:wt,finisher(Tt){customElements.define(it,Tt)}}})(nt,rt),i$2=(nt,rt)=>rt.kind==="method"&&rt.descriptor&&!("value"in rt.descriptor)?__spreadProps(__spreadValues({},rt),{finisher(it){it.createProperty(rt.key,nt)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:rt.key,initializer(){typeof rt.initializer=="function"&&(this[rt.key]=rt.initializer.call(this))},finisher(it){it.createProperty(rt.key,nt)}};function e2$2(nt){return(rt,it)=>it!==void 0?((vt,bt,wt)=>{bt.constructor.createProperty(wt,vt)})(nt,rt,it):i$2(nt,rt)}function t$1(nt){return e2$2(__spreadProps(__spreadValues({},nt),{state:!0}))}var o=({finisher:nt,descriptor:rt})=>(it,vt)=>{var bt;if(vt===void 0){const wt=(bt=it.originalKey)!==null&&bt!==void 0?bt:it.key,Tt=rt!=null?{kind:"method",placement:"prototype",key:wt,descriptor:rt(it.key)}:__spreadProps(__spreadValues({},it),{key:wt});return nt!=null&&(Tt.finisher=function(kt){nt(kt,wt)}),Tt}{const wt=it.constructor;rt!==void 0&&Object.defineProperty(it,vt,rt(vt)),nt==null||nt(wt,vt)}};function i2$2(nt,rt){return o({descriptor:it=>{const vt={get(){var bt,wt;return(wt=(bt=this.renderRoot)===null||bt===void 0?void 0:bt.querySelector(nt))!==null&&wt!==void 0?wt:null},enumerable:!0,configurable:!0};if(rt){const bt=typeof it=="symbol"?Symbol():"__"+it;vt.get=function(){var wt,Tt;return this[bt]===void 0&&(this[bt]=(Tt=(wt=this.renderRoot)===null||wt===void 0?void 0:wt.querySelector(nt))!==null&&Tt!==void 0?Tt:null),this[bt]}}return vt}})}var n$2;((n$2=window.HTMLSlotElement)===null||n$2===void 0?void 0:n$2.prototype.assignedElements)!=null;var ShoelaceElement=class extends s4{emit(nt,rt){const it=new CustomEvent(nt,__spreadValues({bubbles:!0,cancelable:!1,composed:!0,detail:{}},rt));return this.dispatchEvent(it),it}};__decorateClass([e2$2()],ShoelaceElement.prototype,"dir",2);__decorateClass([e2$2()],ShoelaceElement.prototype,"lang",2);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlDialog=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController2(this),this.open=!1,this.label="",this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.modal=new Modal$1(this)}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.addOpenListeners(),this.modal.activate(),lockBodyScrolling(this))}disconnectedCallback(){super.disconnectedCallback(),unlockBodyScrolling(this)}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"dialog.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown(nt){this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.requestClose("keyboard"))}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.modal.activate(),lockBodyScrolling(this);const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,"dialog.show",{dir:this.localize.dir()}),it=getAnimation(this,"dialog.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),this.modal.deactivate(),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]);const nt=getAnimation(this,"dialog.hide",{dir:this.localize.dir()}),rt=getAnimation(this,"dialog.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.dialog.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1,unlockBodyScrolling(this);const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return y$2`
      <div
        part="base"
        class=${o$1({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${l$2(this.noHeader?this.label:void 0)}
          aria-labelledby=${l$2(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":y$2`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="dialog__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="dialog__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click="${()=>this.requestClose("close-button")}"
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="dialog__body"></slot>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDialog.styles=dialog_styles_default;__decorateClass([i2$2(".dialog")],SlDialog.prototype,"dialog",2);__decorateClass([i2$2(".dialog__panel")],SlDialog.prototype,"panel",2);__decorateClass([i2$2(".dialog__overlay")],SlDialog.prototype,"overlay",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDialog.prototype,"open",2);__decorateClass([e2$2({reflect:!0})],SlDialog.prototype,"label",2);__decorateClass([e2$2({attribute:"no-header",type:Boolean,reflect:!0})],SlDialog.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDialog.prototype,"handleOpenChange",1);SlDialog=__decorateClass([e$1("sl-dialog")],SlDialog);setDefaultAnimation("dialog.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.denyClose",{keyframes:[{scale:1},{scale:1.02},{scale:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});var icon_button_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`,e=Symbol.for(""),l$1=nt=>{if((nt==null?void 0:nt.r)===e)return nt==null?void 0:nt._$litStatic$},i$1=(nt,...rt)=>({_$litStatic$:rt.reduce((it,vt,bt)=>it+(wt=>{if(wt._$litStatic$!==void 0)return wt._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${wt}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(vt)+nt[bt+1],nt[0]),r:e}),s$3=new Map,a$1=nt=>(rt,...it)=>{const vt=it.length;let bt,wt;const Tt=[],kt=[];let Lt,Mt=0,Nt=!1;for(;Mt<vt;){for(Lt=rt[Mt];Mt<vt&&(wt=it[Mt],(bt=l$1(wt))!==void 0);)Lt+=bt+rt[++Mt],Nt=!0;kt.push(wt),Tt.push(Lt),Mt++}if(Mt===vt&&Tt.push(rt[vt]),Nt){const zt=Tt.join("$$lit$$");(rt=s$3.get(zt))===void 0&&(Tt.raw=Tt,s$3.set(zt,rt=Tt)),it=kt}return nt(rt,...it)},n$1=a$1(y$2);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlIconButton=class extends ShoelaceElement{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(nt){this.disabled&&(nt.preventDefault(),nt.stopPropagation())}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}render(){const nt=!!this.href,rt=nt?i$1`a`:i$1`button`;return n$1`
      <${rt}
        part="base"
        class=${o$1({"icon-button":!0,"icon-button--disabled":!nt&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${l$2(nt?void 0:this.disabled)}
        type=${l$2(nt?void 0:"button")}
        href=${l$2(nt?this.href:void 0)}
        target=${l$2(nt?this.target:void 0)}
        download=${l$2(nt?this.download:void 0)}
        rel=${l$2(nt&&this.target?"noreferrer noopener":void 0)}
        role=${l$2(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${l$2(this.name)}
          library=${l$2(this.library)}
          src=${l$2(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${rt}>
    `}};SlIconButton.styles=icon_button_styles_default;__decorateClass([i2$2(".icon-button")],SlIconButton.prototype,"button",2);__decorateClass([t$1()],SlIconButton.prototype,"hasFocus",2);__decorateClass([e2$2()],SlIconButton.prototype,"name",2);__decorateClass([e2$2()],SlIconButton.prototype,"library",2);__decorateClass([e2$2()],SlIconButton.prototype,"src",2);__decorateClass([e2$2()],SlIconButton.prototype,"href",2);__decorateClass([e2$2()],SlIconButton.prototype,"target",2);__decorateClass([e2$2()],SlIconButton.prototype,"download",2);__decorateClass([e2$2()],SlIconButton.prototype,"label",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlIconButton.prototype,"disabled",2);SlIconButton=__decorateClass([e$1("sl-icon-button")],SlIconButton);var library={name:"default",resolver:nt=>`${getBasePath()}/assets/icons/${nt}.svg`},library_default_default=library,icons={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},systemLibrary={name:"system",resolver:nt=>nt in icons?`data:image/svg+xml,${encodeURIComponent(icons[nt])}`:""},library_system_default=systemLibrary,registry=[library_default_default,library_system_default],watchedIcons=[];function watchIcon(nt){watchedIcons.push(nt)}function unwatchIcon(nt){watchedIcons=watchedIcons.filter(rt=>rt!==nt)}function getIconLibrary(nt){return registry.find(rt=>rt.name===nt)}var includeFiles=new Map;function requestInclude(nt,rt="cors"){if(includeFiles.has(nt))return includeFiles.get(nt);const it=fetch(nt,{mode:rt}).then(async vt=>({ok:vt.ok,status:vt.status,html:await vt.text()}));return includeFiles.set(nt,it),it}var iconFiles=new Map;async function requestIcon(nt){if(iconFiles.has(nt))return iconFiles.get(nt);const rt=await requestInclude(nt),it={ok:rt.ok,status:rt.status,svg:null};if(rt.ok){const vt=document.createElement("div");vt.innerHTML=rt.html;const bt=vt.firstElementChild;it.svg=(bt==null?void 0:bt.tagName.toLowerCase())==="svg"?bt.outerHTML:""}return iconFiles.set(nt,it),it}var icon_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    contain: strict;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,e4=class extends i$3{constructor(nt){if(super(nt),this.it=b$1,nt.type!==t$2.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(nt){if(nt===b$1||nt==null)return this._t=void 0,this.it=nt;if(nt===x$2)return nt;if(typeof nt!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(nt===this.it)return this._t;this.it=nt;const rt=[nt];return rt.raw=rt,this._t={_$litType$:this.constructor.resultType,strings:rt,values:[]}}};e4.directiveName="unsafeHTML",e4.resultType=1;var t3$1=class extends e4{};t3$1.directiveName="unsafeSVG",t3$1.resultType=2;var o2$1=e$2(t3$1),parser$d,SlIcon=class extends ShoelaceElement{constructor(){super(...arguments),this.svg="",this.label="",this.library="default"}connectedCallback(){super.connectedCallback(),watchIcon(this)}firstUpdated(){this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),unwatchIcon(this)}getUrl(){const nt=getIconLibrary(this.library);return this.name&&nt?nt.resolver(this.name):this.src}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var nt;const rt=getIconLibrary(this.library),it=this.getUrl();if(parser$d||(parser$d=new DOMParser),it)try{const vt=await requestIcon(it);if(it!==this.getUrl())return;if(vt.ok){const wt=parser$d.parseFromString(vt.svg,"text/html").body.querySelector("svg");wt!==null?((nt=rt==null?void 0:rt.mutator)==null||nt.call(rt,wt),this.svg=wt.outerHTML,this.emit("sl-load")):(this.svg="",this.emit("sl-error"))}else this.svg="",this.emit("sl-error")}catch{this.emit("sl-error")}else this.svg.length>0&&(this.svg="")}render(){return y$2` ${o2$1(this.svg)} `}};SlIcon.styles=icon_styles_default;__decorateClass([t$1()],SlIcon.prototype,"svg",2);__decorateClass([e2$2({reflect:!0})],SlIcon.prototype,"name",2);__decorateClass([e2$2()],SlIcon.prototype,"src",2);__decorateClass([e2$2()],SlIcon.prototype,"label",2);__decorateClass([e2$2({reflect:!0})],SlIcon.prototype,"library",2);__decorateClass([watch("label")],SlIcon.prototype,"handleLabelChange",1);__decorateClass([watch("name"),watch("src"),watch("library")],SlIcon.prototype,"setIcon",1);SlIcon=__decorateClass([e$1("sl-icon")],SlIcon);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var formCollections=new WeakMap,userInteractedControls=new WeakMap,reportValidityOverloads=new WeakMap,FormSubmitController=class{constructor(nt,rt){(this.host=nt).addController(this),this.options=__spreadValues({form:it=>it.closest("form"),name:it=>it.name,value:it=>it.value,defaultValue:it=>it.defaultValue,disabled:it=>{var vt;return(vt=it.disabled)!=null?vt:!1},reportValidity:it=>typeof it.reportValidity=="function"?it.reportValidity():!0,setValue:(it,vt)=>it.value=vt},rt),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFormReset=this.handleFormReset.bind(this),this.reportFormValidity=this.reportFormValidity.bind(this),this.handleUserInput=this.handleUserInput.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(formCollections.has(this.form)?formCollections.get(this.form).add(this.host):formCollections.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)||(reportValidityOverloads.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity())),this.host.addEventListener("sl-input",this.handleUserInput)}hostDisconnected(){var nt;this.form&&((nt=formCollections.get(this.form))==null||nt.delete(this.host),this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)&&(this.form.reportValidity=reportValidityOverloads.get(this.form),reportValidityOverloads.delete(this.form)),this.form=void 0),this.host.removeEventListener("sl-input",this.handleUserInput)}hostUpdated(){var nt;const rt=this.host,it=Boolean(userInteractedControls.get(rt)),vt=Boolean(rt.invalid),bt=Boolean(rt.required);(nt=this.form)!=null&&nt.noValidate?(rt.removeAttribute("data-required"),rt.removeAttribute("data-optional"),rt.removeAttribute("data-invalid"),rt.removeAttribute("data-valid"),rt.removeAttribute("data-user-invalid"),rt.removeAttribute("data-user-valid")):(rt.toggleAttribute("data-required",bt),rt.toggleAttribute("data-optional",!bt),rt.toggleAttribute("data-invalid",vt),rt.toggleAttribute("data-valid",!vt),rt.toggleAttribute("data-user-invalid",vt&&it),rt.toggleAttribute("data-user-valid",!vt&&it))}handleFormData(nt){const rt=this.options.disabled(this.host),it=this.options.name(this.host),vt=this.options.value(this.host),bt=this.host.tagName.toLowerCase()==="sl-button";!rt&&!bt&&typeof it=="string"&&it.length>0&&typeof vt<"u"&&(Array.isArray(vt)?vt.forEach(wt=>{nt.formData.append(it,wt.toString())}):nt.formData.append(it,vt.toString()))}handleFormSubmit(nt){var rt;const it=this.options.disabled(this.host),vt=this.options.reportValidity;this.form&&!this.form.noValidate&&((rt=formCollections.get(this.form))==null||rt.forEach(bt=>{this.setUserInteracted(bt,!0)})),this.form&&!this.form.noValidate&&!it&&!vt(this.host)&&(nt.preventDefault(),nt.stopImmediatePropagation())}handleFormReset(){this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1)}async handleUserInput(){await this.host.updateComplete,this.setUserInteracted(this.host,!0)}reportFormValidity(){if(this.form&&!this.form.noValidate){const nt=this.form.querySelectorAll("*");for(const rt of nt)if(typeof rt.reportValidity=="function"&&!rt.reportValidity())return!1}return!0}setUserInteracted(nt,rt){userInteractedControls.set(nt,rt),nt.requestUpdate()}doAction(nt,rt){if(this.form){const it=document.createElement("button");it.type=nt,it.style.position="absolute",it.style.width="0",it.style.height="0",it.style.clipPath="inset(50%)",it.style.overflow="hidden",it.style.whiteSpace="nowrap",rt&&(it.name=rt.name,it.value=rt.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(vt=>{rt.hasAttribute(vt)&&it.setAttribute(vt,rt.getAttribute(vt))})),this.form.append(it),it.click(),it.remove()}}reset(nt){this.doAction("reset",nt)}submit(nt){this.doAction("submit",nt)}},button_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    font-size: var(--sl-button-font-size-small);
    height: var(--sl-input-height-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    font-size: var(--sl-button-font-size-medium);
    height: var(--sl-input-height-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    font-size: var(--sl-button-font-size-large);
    height: var(--sl-input-height-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host(.sl-button-group__button--inner) .button {
    border-radius: 0;
  }

  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(.sl-button-group__button:not(.sl-button-group__button--first, .sl-button-group__button--radio, [variant='default']):not(:hover))
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host(.sl-button-group__button--hover) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host(.sl-button-group__button--focus),
  :host(.sl-button-group__button[checked]) {
    z-index: 2;
  }
`,SlButton=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this,{form:nt=>{if(nt.hasAttribute("form")){const rt=nt.getRootNode(),it=nt.getAttribute("form");return rt.getElementById(it)}return nt.closest("form")}}),this.hasSlotController=new HasSlotController(this,"[default]","prefix","suffix"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href=""}firstUpdated(){this.isButton()&&(this.invalid=!this.button.checkValidity())}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(nt){if(this.disabled||this.loading){nt.preventDefault(),nt.stopPropagation();return}this.type==="submit"&&this.formSubmitController.submit(this),this.type==="reset"&&this.formSubmitController.reset(this)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&(this.button.disabled=this.disabled,this.invalid=!this.button.checkValidity())}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(nt){this.isButton()&&(this.button.setCustomValidity(nt),this.invalid=!this.button.checkValidity())}render(){const nt=this.isLink(),rt=nt?i$1`a`:i$1`button`;return n$1`
      <${rt}
        part="base"
        class=${o$1({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${l$2(nt?void 0:this.disabled)}
        type=${l$2(nt?void 0:this.type)}
        title=${this.title}
        name=${l$2(nt?void 0:this.name)}
        value=${l$2(nt?void 0:this.value)}
        href=${l$2(nt?this.href:void 0)}
        target=${l$2(nt?this.target:void 0)}
        download=${l$2(nt?this.download:void 0)}
        rel=${l$2(nt&&this.target?"noreferrer noopener":void 0)}
        role=${l$2(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?n$1` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?n$1`<sl-spinner></sl-spinner>`:""}
      </${rt}>
    `}};SlButton.styles=button_styles_default;__decorateClass([i2$2(".button")],SlButton.prototype,"button",2);__decorateClass([t$1()],SlButton.prototype,"hasFocus",2);__decorateClass([t$1()],SlButton.prototype,"invalid",2);__decorateClass([e2$2()],SlButton.prototype,"title",2);__decorateClass([e2$2({reflect:!0})],SlButton.prototype,"variant",2);__decorateClass([e2$2({reflect:!0})],SlButton.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"caret",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"disabled",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"loading",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"outline",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"pill",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlButton.prototype,"circle",2);__decorateClass([e2$2()],SlButton.prototype,"type",2);__decorateClass([e2$2()],SlButton.prototype,"name",2);__decorateClass([e2$2()],SlButton.prototype,"value",2);__decorateClass([e2$2()],SlButton.prototype,"href",2);__decorateClass([e2$2()],SlButton.prototype,"target",2);__decorateClass([e2$2()],SlButton.prototype,"download",2);__decorateClass([e2$2()],SlButton.prototype,"form",2);__decorateClass([e2$2({attribute:"formaction"})],SlButton.prototype,"formAction",2);__decorateClass([e2$2({attribute:"formenctype"})],SlButton.prototype,"formEnctype",2);__decorateClass([e2$2({attribute:"formmethod"})],SlButton.prototype,"formMethod",2);__decorateClass([e2$2({attribute:"formnovalidate",type:Boolean})],SlButton.prototype,"formNoValidate",2);__decorateClass([e2$2({attribute:"formtarget"})],SlButton.prototype,"formTarget",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlButton.prototype,"handleDisabledChange",1);SlButton=__decorateClass([e$1("sl-button")],SlButton);var spinner_styles_default=i$4`
  ${component_styles_default}

  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
    mix-blend-mode: multiply;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      rotate: 0deg;
      stroke-dasharray: 0.01em, 2.75em;
    }

    50% {
      rotate: 450deg;
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      rotate: 1080deg;
      stroke-dasharray: 0.01em, 2.75em;
    }
  }
`,SlSpinner=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this)}render(){return y$2`
      <svg part="base" class="spinner" role="progressbar" aria-valuetext=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};SlSpinner.styles=spinner_styles_default;SlSpinner=__decorateClass([e$1("sl-spinner")],SlSpinner);var form_control_styles_default=i$4`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control_label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`,input_styles_default=i$4`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix::slotted(sl-icon),
  .input__suffix::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  .input--empty .input__clear {
    visibility: hidden;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide Firefox's clear button on date and time inputs */
  .input--is-firefox input[type='date'],
  .input--is-firefox input[type='time'] {
    clip-path: inset(0 2em 0 0);
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`,e2$1=nt=>nt.strings===void 0,f$1={},s$2=(nt,rt=f$1)=>nt._$AH=rt,l2$1=e$2(class extends i$3{constructor(nt){if(super(nt),nt.type!==t$2.PROPERTY&&nt.type!==t$2.ATTRIBUTE&&nt.type!==t$2.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!e2$1(nt))throw Error("`live` bindings can only contain a single expression")}render(nt){return nt}update(nt,[rt]){if(rt===x$2||rt===b$1)return rt;const it=nt.element,vt=nt.name;if(nt.type===t$2.PROPERTY){if(rt===it[vt])return x$2}else if(nt.type===t$2.BOOLEAN_ATTRIBUTE){if(!!rt===it.hasAttribute(vt))return x$2}else if(nt.type===t$2.ATTRIBUTE&&it.getAttribute(vt)===rt+"")return x$2;return s$2(nt),rt}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var defaultValue=(nt="value")=>(rt,it)=>{const vt=rt.constructor,bt=vt.prototype.attributeChangedCallback;vt.prototype.attributeChangedCallback=function(wt,Tt,kt){var Lt;const Mt=vt.getPropertyOptions(nt),Nt=typeof Mt.attribute=="string"?Mt.attribute:nt;if(wt===Nt){const zt=Mt.converter||n2$1,Wt=(typeof zt=="function"?zt:(Lt=zt==null?void 0:zt.fromAttribute)!=null?Lt:n2$1.fromAttribute)(kt,Mt.type);this[nt]!==Wt&&(this[it]=Wt)}bt.call(this,wt,Tt,kt)}},_a,isChromium=(_a=navigator.userAgentData)==null?void 0:_a.brands.some(nt=>nt.brand.includes("Chromium")),isFirefox=isChromium?!1:navigator.userAgent.includes("Firefox"),SlInput=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.required=!1,this.spellcheck=!0}get valueAsDate(){var nt,rt;return(rt=(nt=this.input)==null?void 0:nt.valueAsDate)!=null?rt:null}set valueAsDate(nt){const rt=document.createElement("input");rt.type="date",rt.valueAsDate=nt,this.value=rt.value}get valueAsNumber(){var nt,rt;return(rt=(nt=this.input)==null?void 0:nt.valueAsNumber)!=null?rt:parseFloat(this.value)}set valueAsNumber(nt){const rt=document.createElement("input");rt.type="number",rt.valueAsNumber=nt,this.value=rt.value}firstUpdated(){this.invalid=!this.checkValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(nt){this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change"),this.input.focus(),nt.stopPropagation()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.invalid=!this.checkValidity(),this.emit("sl-input")}handleInvalid(){this.invalid=!0}handleKeyDown(nt){const rt=nt.metaKey||nt.ctrlKey||nt.shiftKey||nt.altKey;nt.key==="Enter"&&!rt&&setTimeout(()=>{!nt.defaultPrevented&&!nt.isComposing&&this.formSubmitController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.checkValidity()}handleStepChange(){this.input.step=String(this.step),this.invalid=!this.checkValidity()}async handleValueChange(){await this.updateComplete,this.invalid=!this.checkValidity()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,vt){this.input.setRangeText(nt,rt,it,vt),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.invalid=!this.checkValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,vt=this.helpText?!0:!!rt,bt=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return y$2`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":vt})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--invalid":this.invalid,"input--no-spin-buttons":this.noSpinButtons,"input--is-firefox":isFirefox})}
          >
            <slot name="prefix" part="prefix" class="input__prefix"></slot>
            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${l$2(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$2(this.placeholder)}
              minlength=${l$2(this.minlength)}
              maxlength=${l$2(this.maxlength)}
              min=${l$2(this.min)}
              max=${l$2(this.max)}
              step=${l$2(this.step)}
              .value=${l2$1(this.value)}
              autocapitalize=${l$2(this.type==="password"?"off":this.autocapitalize)}
              autocomplete=${l$2(this.type==="password"?"off":this.autocomplete)}
              autocorrect=${l$2(this.type==="password"?"off":this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${l$2(this.pattern)}
              enterkeyhint=${l$2(this.enterkeyhint)}
              inputmode=${l$2(this.inputmode)}
              aria-describedby="help-text"
              aria-invalid=${this.invalid?"true":"false"}
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${bt?y$2`
                    <button
                      part="clear-button"
                      class="input__clear"
                      type="button"
                      aria-label=${this.localize.term("clearEntry")}
                      @click=${this.handleClearClick}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}
            ${this.passwordToggle&&!this.disabled?y$2`
                    <button
                      part="password-toggle-button"
                      class="input__password-toggle"
                      type="button"
                      aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                      @click=${this.handlePasswordToggle}
                      tabindex="-1"
                    >
                      ${this.passwordVisible?y$2`
                            <slot name="show-password-icon">
                              <sl-icon name="eye-slash" library="system"></sl-icon>
                            </slot>
                          `:y$2`
                            <slot name="hide-password-icon">
                              <sl-icon name="eye" library="system"></sl-icon>
                            </slot>
                          `}
                    </button>
                  `:""}

            <slot name="suffix" part="suffix" class="input__suffix"></slot>
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${vt?"false":"true"}
        >
          ${this.helpText}
        </slot>
        </div>
      </div>
    `}};SlInput.styles=input_styles_default;__decorateClass([i2$2(".input__control")],SlInput.prototype,"input",2);__decorateClass([t$1()],SlInput.prototype,"hasFocus",2);__decorateClass([t$1()],SlInput.prototype,"invalid",2);__decorateClass([e2$2()],SlInput.prototype,"title",2);__decorateClass([e2$2({reflect:!0})],SlInput.prototype,"type",2);__decorateClass([e2$2()],SlInput.prototype,"name",2);__decorateClass([e2$2()],SlInput.prototype,"value",2);__decorateClass([defaultValue()],SlInput.prototype,"defaultValue",2);__decorateClass([e2$2({reflect:!0})],SlInput.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"filled",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"pill",2);__decorateClass([e2$2()],SlInput.prototype,"label",2);__decorateClass([e2$2({attribute:"help-text"})],SlInput.prototype,"helpText",2);__decorateClass([e2$2({type:Boolean})],SlInput.prototype,"clearable",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"disabled",2);__decorateClass([e2$2()],SlInput.prototype,"placeholder",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"readonly",2);__decorateClass([e2$2({attribute:"password-toggle",type:Boolean})],SlInput.prototype,"passwordToggle",2);__decorateClass([e2$2({attribute:"password-visible",type:Boolean})],SlInput.prototype,"passwordVisible",2);__decorateClass([e2$2({attribute:"no-spin-buttons",type:Boolean})],SlInput.prototype,"noSpinButtons",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlInput.prototype,"required",2);__decorateClass([e2$2()],SlInput.prototype,"pattern",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"minlength",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"maxlength",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"min",2);__decorateClass([e2$2({type:Number})],SlInput.prototype,"max",2);__decorateClass([e2$2()],SlInput.prototype,"step",2);__decorateClass([e2$2()],SlInput.prototype,"autocapitalize",2);__decorateClass([e2$2()],SlInput.prototype,"autocorrect",2);__decorateClass([e2$2()],SlInput.prototype,"autocomplete",2);__decorateClass([e2$2({type:Boolean})],SlInput.prototype,"autofocus",2);__decorateClass([e2$2()],SlInput.prototype,"enterkeyhint",2);__decorateClass([e2$2({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlInput.prototype,"spellcheck",2);__decorateClass([e2$2()],SlInput.prototype,"inputmode",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleDisabledChange",1);__decorateClass([watch("step",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleStepChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleValueChange",1);SlInput=__decorateClass([e$1("sl-input")],SlInput);var tooltip_styles_default=i$4`
  ${component_styles_default}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip {
    --arrow-size: var(--sl-tooltip-arrow-size);
    --arrow-color: var(--sl-tooltip-background-color);
  }

  .tooltip::part(popup) {
    pointer-events: none;
    z-index: var(--sl-z-index-tooltip);
  }

  .tooltip[placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .tooltip[placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .tooltip[placement^='left']::part(popup) {
    transform-origin: right;
  }

  .tooltip[placement^='right']::part(popup) {
    transform-origin: left;
  }

  .tooltip__body {
    display: block;
    width: max-content;
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
    pointer-events: none;
  }
`,SlTooltip=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.updateComplete.then(()=>{this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)})}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this.handleBlur,!0),this.removeEventListener("focus",this.handleFocus,!0),this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeyDown),this.removeEventListener("mouseover",this.handleMouseOver),this.removeEventListener("mouseout",this.handleMouseOut)}handleBlur(){this.hasTrigger("focus")&&this.hide()}handleClick(){this.hasTrigger("click")&&(this.open?this.hide():this.show())}handleFocus(){this.hasTrigger("focus")&&this.show()}handleKeyDown(nt){this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide())}handleMouseOver(){if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),nt)}}handleMouseOut(){if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),nt)}}hasTrigger(nt){return this.trigger.split(" ").includes(nt)}async handleOpenChange(){if(this.open){if(this.disabled)return;this.emit("sl-show"),await stopAnimations(this.body),this.body.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"tooltip.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),await stopAnimations(this.body);const{keyframes:nt,options:rt}=getAnimation(this,"tooltip.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.popup.active=!1,this.body.hidden=!0,this.emit("sl-after-hide")}}async handleOptionsChange(){this.hasUpdated&&(await this.updateComplete,this.popup.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return y$2`
      <sl-popup
        part="base"
        exportparts="
          popup:base__popup,
          arrow:base__arrow
        "
        class=${o$1({tooltip:!0,"tooltip--open":this.open})}
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        arrow
      >
        <slot slot="anchor" aria-describedby="tooltip"></slot>

        <slot
          name="content"
          part="body"
          id="tooltip"
          class="tooltip__body"
          role="tooltip"
          aria-live=${this.open?"polite":"off"}
        >
          ${this.content}
        </slot>
      </sl-popup>
    `}};SlTooltip.styles=tooltip_styles_default;__decorateClass([i2$2("slot:not([name])")],SlTooltip.prototype,"defaultSlot",2);__decorateClass([i2$2(".tooltip__body")],SlTooltip.prototype,"body",2);__decorateClass([i2$2("sl-popup")],SlTooltip.prototype,"popup",2);__decorateClass([e2$2()],SlTooltip.prototype,"content",2);__decorateClass([e2$2()],SlTooltip.prototype,"placement",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTooltip.prototype,"disabled",2);__decorateClass([e2$2({type:Number})],SlTooltip.prototype,"distance",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTooltip.prototype,"open",2);__decorateClass([e2$2({type:Number})],SlTooltip.prototype,"skidding",2);__decorateClass([e2$2()],SlTooltip.prototype,"trigger",2);__decorateClass([e2$2({type:Boolean})],SlTooltip.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlTooltip.prototype,"handleOpenChange",1);__decorateClass([watch("content"),watch("distance"),watch("hoist"),watch("placement"),watch("skidding")],SlTooltip.prototype,"handleOptionsChange",1);__decorateClass([watch("disabled")],SlTooltip.prototype,"handleDisabledChange",1);SlTooltip=__decorateClass([e$1("sl-tooltip")],SlTooltip);setDefaultAnimation("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}});setDefaultAnimation("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});var popup_styles_default=i$4`
  ${component_styles_default}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`;function t(nt){return nt.split("-")[0]}function e3(nt){return nt.split("-")[1]}function n(nt){return["top","bottom"].includes(t(nt))?"x":"y"}function r(nt){return nt==="y"?"height":"width"}function i2$1(nt,rt,it){let{reference:vt,floating:bt}=nt;const wt=vt.x+vt.width/2-bt.width/2,Tt=vt.y+vt.height/2-bt.height/2,kt=n(rt),Lt=r(kt),Mt=vt[Lt]/2-bt[Lt]/2,Nt=kt==="x";let zt;switch(t(rt)){case"top":zt={x:wt,y:vt.y-bt.height};break;case"bottom":zt={x:wt,y:vt.y+vt.height};break;case"right":zt={x:vt.x+vt.width,y:Tt};break;case"left":zt={x:vt.x-bt.width,y:Tt};break;default:zt={x:vt.x,y:vt.y}}switch(e3(rt)){case"start":zt[kt]-=Mt*(it&&Nt?-1:1);break;case"end":zt[kt]+=Mt*(it&&Nt?-1:1)}return zt}var o2=async(nt,rt,it)=>{const{placement:vt="bottom",strategy:bt="absolute",middleware:wt=[],platform:Tt}=it,kt=wt.filter(Boolean),Lt=await(Tt.isRTL==null?void 0:Tt.isRTL(rt));let Mt=await Tt.getElementRects({reference:nt,floating:rt,strategy:bt}),{x:Nt,y:zt}=i2$1(Mt,vt,Lt),Ht=vt,Wt={},Zt=0;for(let tn=0;tn<kt.length;tn++){const{name:Yt,fn:nn}=kt[tn],{x:rn,y:ln,data:sn,reset:mn}=await nn({x:Nt,y:zt,initialPlacement:vt,placement:Ht,strategy:bt,middlewareData:Wt,rects:Mt,platform:Tt,elements:{reference:nt,floating:rt}});Nt=rn!=null?rn:Nt,zt=ln!=null?ln:zt,Wt=__spreadProps(__spreadValues({},Wt),{[Yt]:__spreadValues(__spreadValues({},Wt[Yt]),sn)}),mn&&Zt<=50&&(Zt++,typeof mn=="object"&&(mn.placement&&(Ht=mn.placement),mn.rects&&(Mt=mn.rects===!0?await Tt.getElementRects({reference:nt,floating:rt,strategy:bt}):mn.rects),{x:Nt,y:zt}=i2$1(Mt,Ht,Lt)),tn=-1)}return{x:Nt,y:zt,placement:Ht,strategy:bt,middlewareData:Wt}};function a(nt){return typeof nt!="number"?function(rt){return __spreadValues({top:0,right:0,bottom:0,left:0},rt)}(nt):{top:nt,right:nt,bottom:nt,left:nt}}function l(nt){return __spreadProps(__spreadValues({},nt),{top:nt.y,left:nt.x,right:nt.x+nt.width,bottom:nt.y+nt.height})}async function s$1(nt,rt){var it;rt===void 0&&(rt={});const{x:vt,y:bt,platform:wt,rects:Tt,elements:kt,strategy:Lt}=nt,{boundary:Mt="clippingAncestors",rootBoundary:Nt="viewport",elementContext:zt="floating",altBoundary:Ht=!1,padding:Wt=0}=rt,Zt=a(Wt),tn=kt[Ht?zt==="floating"?"reference":"floating":zt],Yt=l(await wt.getClippingRect({element:(it=await(wt.isElement==null?void 0:wt.isElement(tn)))==null||it?tn:tn.contextElement||await(wt.getDocumentElement==null?void 0:wt.getDocumentElement(kt.floating)),boundary:Mt,rootBoundary:Nt,strategy:Lt})),nn=l(wt.convertOffsetParentRelativeRectToViewportRelativeRect?await wt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:zt==="floating"?__spreadProps(__spreadValues({},Tt.floating),{x:vt,y:bt}):Tt.reference,offsetParent:await(wt.getOffsetParent==null?void 0:wt.getOffsetParent(kt.floating)),strategy:Lt}):Tt[zt]);return{top:Yt.top-nn.top+Zt.top,bottom:nn.bottom-Yt.bottom+Zt.bottom,left:Yt.left-nn.left+Zt.left,right:nn.right-Yt.right+Zt.right}}var c$1=Math.min,f=Math.max;function u(nt,rt,it){return f(nt,c$1(rt,it))}var m$1=nt=>({name:"arrow",options:nt,async fn(rt){const{element:it,padding:vt=0}=nt!=null?nt:{},{x:bt,y:wt,placement:Tt,rects:kt,platform:Lt}=rt;if(it==null)return{};const Mt=a(vt),Nt={x:bt,y:wt},zt=n(Tt),Ht=e3(Tt),Wt=r(zt),Zt=await Lt.getDimensions(it),tn=zt==="y"?"top":"left",Yt=zt==="y"?"bottom":"right",nn=kt.reference[Wt]+kt.reference[zt]-Nt[zt]-kt.floating[Wt],rn=Nt[zt]-kt.reference[zt],ln=await(Lt.getOffsetParent==null?void 0:Lt.getOffsetParent(it));let sn=ln?zt==="y"?ln.clientHeight||0:ln.clientWidth||0:0;sn===0&&(sn=kt.floating[Wt]);const mn=nn/2-rn/2,wn=Mt[tn],Cn=sn-Zt[Wt]-Mt[Yt],An=sn/2-Zt[Wt]/2+mn,Pn=u(wn,An,Cn),On=(Ht==="start"?Mt[tn]:Mt[Yt])>0&&An!==Pn&&kt.reference[Wt]<=kt.floating[Wt];return{[zt]:Nt[zt]-(On?An<wn?wn-An:Cn-An:0),data:{[zt]:Pn,centerOffset:An-Pn}}}}),g={left:"right",right:"left",bottom:"top",top:"bottom"};function d$1(nt){return nt.replace(/left|right|bottom|top/g,rt=>g[rt])}function p(nt,rt,it){it===void 0&&(it=!1);const vt=e3(nt),bt=n(nt),wt=r(bt);let Tt=bt==="x"?vt===(it?"end":"start")?"right":"left":vt==="start"?"bottom":"top";return rt.reference[wt]>rt.floating[wt]&&(Tt=d$1(Tt)),{main:Tt,cross:d$1(Tt)}}var h$1={start:"end",end:"start"};function y2(nt){return nt.replace(/start|end/g,rt=>h$1[rt])}var x$1=["top","right","bottom","left"];x$1.reduce((nt,rt)=>nt.concat(rt,rt+"-start",rt+"-end"),[]);var b=function(nt){return nt===void 0&&(nt={}),{name:"flip",options:nt,async fn(rt){var it;const{placement:vt,middlewareData:bt,rects:wt,initialPlacement:Tt,platform:kt,elements:Lt}=rt,Mt=nt,{mainAxis:Nt=!0,crossAxis:zt=!0,fallbackPlacements:Ht,fallbackStrategy:Wt="bestFit",flipAlignment:Zt=!0}=Mt,tn=__objRest(Mt,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),Yt=t(vt),nn=Ht||(Yt===Tt||!Zt?[d$1(Tt)]:function(Pn){const On=d$1(Pn);return[y2(Pn),On,y2(On)]}(Tt)),rn=[Tt,...nn],ln=await s$1(rt,tn),sn=[];let mn=((it=bt.flip)==null?void 0:it.overflows)||[];if(Nt&&sn.push(ln[Yt]),zt){const{main:Pn,cross:On}=p(vt,wt,await(kt.isRTL==null?void 0:kt.isRTL(Lt.floating)));sn.push(ln[Pn],ln[On])}if(mn=[...mn,{placement:vt,overflows:sn}],!sn.every(Pn=>Pn<=0)){var wn,Cn;const Pn=((wn=(Cn=bt.flip)==null?void 0:Cn.index)!=null?wn:0)+1,On=rn[Pn];if(On)return{data:{index:Pn,overflows:mn},reset:{placement:On}};let kn="bottom";switch(Wt){case"bestFit":{var An;const gn=(An=mn.map(Vn=>[Vn,Vn.overflows.filter(pn=>pn>0).reduce((pn,pr)=>pn+pr,0)]).sort((Vn,pn)=>Vn[1]-pn[1])[0])==null?void 0:An[0].placement;gn&&(kn=gn);break}case"initialPlacement":kn=Tt}if(vt!==kn)return{reset:{placement:kn}}}return{}}}},T=function(nt){return nt===void 0&&(nt=0),{name:"offset",options:nt,async fn(rt){const{x:it,y:vt}=rt,bt=await async function(wt,Tt){const{placement:kt,platform:Lt,elements:Mt}=wt,Nt=await(Lt.isRTL==null?void 0:Lt.isRTL(Mt.floating)),zt=t(kt),Ht=e3(kt),Wt=n(kt)==="x",Zt=["left","top"].includes(zt)?-1:1,tn=Nt&&Wt?-1:1,Yt=typeof Tt=="function"?Tt(wt):Tt;let{mainAxis:nn,crossAxis:rn,alignmentAxis:ln}=typeof Yt=="number"?{mainAxis:Yt,crossAxis:0,alignmentAxis:null}:__spreadValues({mainAxis:0,crossAxis:0,alignmentAxis:null},Yt);return Ht&&typeof ln=="number"&&(rn=Ht==="end"?-1*ln:ln),Wt?{x:rn*tn,y:nn*Zt}:{x:nn*Zt,y:rn*tn}}(rt,nt);return{x:it+bt.x,y:vt+bt.y,data:bt}}}};function O(nt){return nt==="x"?"y":"x"}var L$2=function(nt){return nt===void 0&&(nt={}),{name:"shift",options:nt,async fn(rt){const{x:it,y:vt,placement:bt}=rt,wt=nt,{mainAxis:Tt=!0,crossAxis:kt=!1,limiter:Lt={fn:nn=>{let{x:rn,y:ln}=nn;return{x:rn,y:ln}}}}=wt,Mt=__objRest(wt,["mainAxis","crossAxis","limiter"]),Nt={x:it,y:vt},zt=await s$1(rt,Mt),Ht=n(t(bt)),Wt=O(Ht);let Zt=Nt[Ht],tn=Nt[Wt];if(Tt){const nn=Ht==="y"?"bottom":"right";Zt=u(Zt+zt[Ht==="y"?"top":"left"],Zt,Zt-zt[nn])}if(kt){const nn=Wt==="y"?"bottom":"right";tn=u(tn+zt[Wt==="y"?"top":"left"],tn,tn-zt[nn])}const Yt=Lt.fn(__spreadProps(__spreadValues({},rt),{[Ht]:Zt,[Wt]:tn}));return __spreadProps(__spreadValues({},Yt),{data:{x:Yt.x-it,y:Yt.y-vt}})}}},k=function(nt){return nt===void 0&&(nt={}),{name:"size",options:nt,async fn(rt){const{placement:it,rects:vt,platform:bt,elements:wt}=rt,Tt=nt,{apply:kt=()=>{}}=Tt,Lt=__objRest(Tt,["apply"]),Mt=await s$1(rt,Lt),Nt=t(it),zt=e3(it);let Ht,Wt;Nt==="top"||Nt==="bottom"?(Ht=Nt,Wt=zt===(await(bt.isRTL==null?void 0:bt.isRTL(wt.floating))?"start":"end")?"left":"right"):(Wt=Nt,Ht=zt==="end"?"top":"bottom");const Zt=f(Mt.left,0),tn=f(Mt.right,0),Yt=f(Mt.top,0),nn=f(Mt.bottom,0),rn={availableHeight:vt.floating.height-(["left","right"].includes(it)?2*(Yt!==0||nn!==0?Yt+nn:f(Mt.top,Mt.bottom)):Mt[Ht]),availableWidth:vt.floating.width-(["top","bottom"].includes(it)?2*(Zt!==0||tn!==0?Zt+tn:f(Mt.left,Mt.right)):Mt[Wt])};await kt(__spreadValues(__spreadValues({},rt),rn));const ln=await bt.getDimensions(wt.floating);return vt.floating.width!==ln.width||vt.floating.height!==ln.height?{reset:{rects:!0}}:{}}}};function n2(nt){return nt&&nt.document&&nt.location&&nt.alert&&nt.setInterval}function o3(nt){if(nt==null)return window;if(!n2(nt)){const rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function i3(nt){return o3(nt).getComputedStyle(nt)}function r2(nt){return n2(nt)?"":nt?(nt.nodeName||"").toLowerCase():""}function l2(){const nt=navigator.userAgentData;return nt&&Array.isArray(nt.brands)?nt.brands.map(rt=>rt.brand+"/"+rt.version).join(" "):navigator.userAgent}function c2(nt){return nt instanceof o3(nt).HTMLElement}function s2(nt){return nt instanceof o3(nt).Element}function f2(nt){return typeof ShadowRoot>"u"?!1:nt instanceof o3(nt).ShadowRoot||nt instanceof ShadowRoot}function u2(nt){const{overflow:rt,overflowX:it,overflowY:vt,display:bt}=i3(nt);return/auto|scroll|overlay|hidden/.test(rt+vt+it)&&!["inline","contents"].includes(bt)}function a2(nt){return["table","td","th"].includes(r2(nt))}function d2(nt){const rt=/firefox/i.test(l2()),it=i3(nt),vt=it.backdropFilter||it.WebkitBackdropFilter;return it.transform!=="none"||it.perspective!=="none"||!!vt&&vt!=="none"||rt&&it.willChange==="filter"||rt&&!!it.filter&&it.filter!=="none"||["transform","perspective"].some(bt=>it.willChange.includes(bt))||["paint","layout","strict","content"].some(bt=>{const wt=it.contain;return wt!=null&&wt.includes(bt)})}function h2(){return!/^((?!chrome|android).)*safari/i.test(l2())}function g2(nt){return["html","body","#document"].includes(r2(nt))}var m2=Math.min,p2=Math.max,w2=Math.round;function v2(nt,rt,it){var vt,bt,wt,Tt;rt===void 0&&(rt=!1),it===void 0&&(it=!1);const kt=nt.getBoundingClientRect();let Lt=1,Mt=1;rt&&c2(nt)&&(Lt=nt.offsetWidth>0&&w2(kt.width)/nt.offsetWidth||1,Mt=nt.offsetHeight>0&&w2(kt.height)/nt.offsetHeight||1);const Nt=s2(nt)?o3(nt):window,zt=!h2()&&it,Ht=(kt.left+(zt&&(vt=(bt=Nt.visualViewport)==null?void 0:bt.offsetLeft)!=null?vt:0))/Lt,Wt=(kt.top+(zt&&(wt=(Tt=Nt.visualViewport)==null?void 0:Tt.offsetTop)!=null?wt:0))/Mt,Zt=kt.width/Lt,tn=kt.height/Mt;return{width:Zt,height:tn,top:Wt,right:Ht+Zt,bottom:Wt+tn,left:Ht,x:Ht,y:Wt}}function y3(nt){return(rt=nt,(rt instanceof o3(rt).Node?nt.ownerDocument:nt.document)||window.document).documentElement;var rt}function x2(nt){return s2(nt)?{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}:{scrollLeft:nt.pageXOffset,scrollTop:nt.pageYOffset}}function b2(nt){return v2(y3(nt)).left+x2(nt).scrollLeft}function L2(nt,rt,it){const vt=c2(rt),bt=y3(rt),wt=v2(nt,vt&&function(Lt){const Mt=v2(Lt);return w2(Mt.width)!==Lt.offsetWidth||w2(Mt.height)!==Lt.offsetHeight}(rt),it==="fixed");let Tt={scrollLeft:0,scrollTop:0};const kt={x:0,y:0};if(vt||!vt&&it!=="fixed")if((r2(rt)!=="body"||u2(bt))&&(Tt=x2(rt)),c2(rt)){const Lt=v2(rt,!0);kt.x=Lt.x+rt.clientLeft,kt.y=Lt.y+rt.clientTop}else bt&&(kt.x=b2(bt));return{x:wt.left+Tt.scrollLeft-kt.x,y:wt.top+Tt.scrollTop-kt.y,width:wt.width,height:wt.height}}function E2(nt){if(r2(nt)==="html")return nt;const rt=nt.assignedSlot||nt.parentNode||(f2(nt)?nt.host:null)||y3(nt);return f2(rt)?rt.host:rt}function R(nt){return c2(nt)&&i3(nt).position!=="fixed"?nt.offsetParent:null}function T2(nt){const rt=o3(nt);let it=R(nt);for(;it&&a2(it)&&i3(it).position==="static";)it=R(it);return it&&(r2(it)==="html"||r2(it)==="body"&&i3(it).position==="static"&&!d2(it))?rt:it||function(vt){let bt=E2(vt);for(;c2(bt)&&!g2(bt);){if(d2(bt))return bt;bt=E2(bt)}return null}(nt)||rt}function W(nt){const rt=E2(nt);return g2(rt)?nt.ownerDocument.body:c2(rt)&&u2(rt)?rt:W(rt)}function H(nt,rt){var it;rt===void 0&&(rt=[]);const vt=W(nt),bt=vt===((it=nt.ownerDocument)==null?void 0:it.body),wt=o3(vt),Tt=bt?[wt].concat(wt.visualViewport||[],u2(vt)?vt:[]):vt,kt=rt.concat(Tt);return bt?kt:kt.concat(H(Tt))}function D2(nt,rt,it){return rt==="viewport"?l(function(vt,bt){const wt=o3(vt),Tt=y3(vt),kt=wt.visualViewport;let Lt=Tt.clientWidth,Mt=Tt.clientHeight,Nt=0,zt=0;if(kt){Lt=kt.width,Mt=kt.height;const Ht=h2();(Ht||!Ht&&bt==="fixed")&&(Nt=kt.offsetLeft,zt=kt.offsetTop)}return{width:Lt,height:Mt,x:Nt,y:zt}}(nt,it)):s2(rt)?function(vt,bt){const wt=v2(vt,!1,bt==="fixed"),Tt=wt.top+vt.clientTop,kt=wt.left+vt.clientLeft;return{top:Tt,left:kt,x:kt,y:Tt,right:kt+vt.clientWidth,bottom:Tt+vt.clientHeight,width:vt.clientWidth,height:vt.clientHeight}}(rt,it):l(function(vt){var bt;const wt=y3(vt),Tt=x2(vt),kt=(bt=vt.ownerDocument)==null?void 0:bt.body,Lt=p2(wt.scrollWidth,wt.clientWidth,kt?kt.scrollWidth:0,kt?kt.clientWidth:0),Mt=p2(wt.scrollHeight,wt.clientHeight,kt?kt.scrollHeight:0,kt?kt.clientHeight:0);let Nt=-Tt.scrollLeft+b2(vt);const zt=-Tt.scrollTop;return i3(kt||wt).direction==="rtl"&&(Nt+=p2(wt.clientWidth,kt?kt.clientWidth:0)-Lt),{width:Lt,height:Mt,x:Nt,y:zt}}(y3(nt)))}var A={getClippingRect:function(nt){let{element:rt,boundary:it,rootBoundary:vt,strategy:bt}=nt;const wt=it==="clippingAncestors"?function(Mt){let Nt=H(Mt).filter(Zt=>s2(Zt)&&r2(Zt)!=="body"),zt=null;const Ht=i3(Mt).position==="fixed";let Wt=Ht?E2(Mt):Mt;for(;s2(Wt)&&!g2(Wt);){const Zt=i3(Wt),tn=d2(Wt);(Ht?tn||zt:tn||Zt.position!=="static"||!zt||!["absolute","fixed"].includes(zt.position))?zt=Zt:Nt=Nt.filter(Yt=>Yt!==Wt),Wt=E2(Wt)}return Nt}(rt):[].concat(it),Tt=[...wt,vt],kt=Tt[0],Lt=Tt.reduce((Mt,Nt)=>{const zt=D2(rt,Nt,bt);return Mt.top=p2(zt.top,Mt.top),Mt.right=m2(zt.right,Mt.right),Mt.bottom=m2(zt.bottom,Mt.bottom),Mt.left=p2(zt.left,Mt.left),Mt},D2(rt,kt,bt));return{width:Lt.right-Lt.left,height:Lt.bottom-Lt.top,x:Lt.left,y:Lt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(nt){let{rect:rt,offsetParent:it,strategy:vt}=nt;const bt=c2(it),wt=y3(it);if(it===wt)return rt;let Tt={scrollLeft:0,scrollTop:0};const kt={x:0,y:0};if((bt||!bt&&vt!=="fixed")&&((r2(it)!=="body"||u2(wt))&&(Tt=x2(it)),c2(it))){const Lt=v2(it,!0);kt.x=Lt.x+it.clientLeft,kt.y=Lt.y+it.clientTop}return __spreadProps(__spreadValues({},rt),{x:rt.x-Tt.scrollLeft+kt.x,y:rt.y-Tt.scrollTop+kt.y})},isElement:s2,getDimensions:function(nt){if(c2(nt))return{width:nt.offsetWidth,height:nt.offsetHeight};const rt=v2(nt);return{width:rt.width,height:rt.height}},getOffsetParent:T2,getDocumentElement:y3,async getElementRects(nt){let{reference:rt,floating:it,strategy:vt}=nt;const bt=this.getOffsetParent||T2,wt=this.getDimensions;return{reference:L2(rt,await bt(it),vt),floating:__spreadValues({x:0,y:0},await wt(it))}},getClientRects:nt=>Array.from(nt.getClientRects()),isRTL:nt=>i3(nt).direction==="rtl"};function C(nt,rt,it,vt){vt===void 0&&(vt={});const{ancestorScroll:bt=!0,ancestorResize:wt=!0,elementResize:Tt=!0,animationFrame:kt=!1}=vt,Lt=bt&&!kt,Mt=Lt||wt?[...s2(nt)?H(nt):nt.contextElement?H(nt.contextElement):[],...H(rt)]:[];Mt.forEach(Wt=>{Lt&&Wt.addEventListener("scroll",it,{passive:!0}),wt&&Wt.addEventListener("resize",it)});let Nt,zt=null;if(Tt){let Wt=!0;zt=new ResizeObserver(()=>{Wt||it(),Wt=!1}),s2(nt)&&!kt&&zt.observe(nt),s2(nt)||!nt.contextElement||kt||zt.observe(nt.contextElement),zt.observe(rt)}let Ht=kt?v2(nt):null;return kt&&function Wt(){const Zt=v2(nt);!Ht||Zt.x===Ht.x&&Zt.y===Ht.y&&Zt.width===Ht.width&&Zt.height===Ht.height||it(),Ht=Zt,Nt=requestAnimationFrame(Wt)}(),it(),()=>{var Wt;Mt.forEach(Zt=>{Lt&&Zt.removeEventListener("scroll",it),wt&&Zt.removeEventListener("resize",it)}),(Wt=zt)==null||Wt.disconnect(),zt=null,kt&&cancelAnimationFrame(Nt)}}var O2=(nt,rt,it)=>o2(nt,rt,__spreadValues({platform:A},it)),SlPopup=class extends ShoelaceElement{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){this.stop()}async updated(nt){super.updated(nt),nt.has("active")&&(this.active?this.start():this.stop()),nt.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){const nt=this.getRootNode();this.anchorEl=nt.getElementById(this.anchor)}else this.anchor instanceof HTMLElement?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');if(this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),!this.anchorEl)throw new Error("Invalid anchor element: no anchor could be found using the anchor slot or the anchor attribute.");this.start()}start(){!this.anchorEl||(this.cleanup=C(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(nt=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>nt())):nt()})}reposition(){if(!this.active||!this.anchorEl)return;const nt=[T({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?nt.push(k({apply:({rects:rt})=>{const it=this.sync==="width"||this.sync==="both",vt=this.sync==="height"||this.sync==="both";this.popup.style.width=it?`${rt.reference.width}px`:"",this.popup.style.height=vt?`${rt.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&nt.push(b({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&nt.push(L$2({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?nt.push(k({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:rt,availableHeight:it})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${it}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${rt}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&nt.push(m$1({element:this.arrowEl,padding:this.arrowPadding})),O2(this.anchorEl,this.popup,{placement:this.placement,middleware:nt,strategy:this.strategy}).then(({x:rt,y:it,middlewareData:vt,placement:bt})=>{const wt=getComputedStyle(this).direction==="rtl",Tt={top:"bottom",right:"left",bottom:"top",left:"right"}[bt.split("-")[0]];if(this.setAttribute("data-current-placement",bt),Object.assign(this.popup.style,{left:`${rt}px`,top:`${it}px`}),this.arrow){const kt=vt.arrow.x,Lt=vt.arrow.y;let Mt="",Nt="",zt="",Ht="";if(this.arrowPlacement==="start"){const Wt=typeof kt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Mt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",Nt=wt?Wt:"",Ht=wt?"":Wt}else if(this.arrowPlacement==="end"){const Wt=typeof kt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Nt=wt?"":Wt,Ht=wt?Wt:"",zt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(Ht=typeof kt=="number"?"calc(50% - var(--arrow-size-diagonal))":"",Mt=typeof Lt=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(Ht=typeof kt=="number"?`${kt}px`:"",Mt=typeof Lt=="number"?`${Lt}px`:"");Object.assign(this.arrowEl.style,{top:Mt,right:Nt,bottom:zt,left:Ht,[Tt]:"calc(var(--arrow-size-diagonal) * -1)"})}}),this.emit("sl-reposition")}render(){return y$2`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${o$1({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?y$2`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};SlPopup.styles=popup_styles_default;__decorateClass([i2$2(".popup")],SlPopup.prototype,"popup",2);__decorateClass([i2$2(".popup__arrow")],SlPopup.prototype,"arrowEl",2);__decorateClass([e2$2()],SlPopup.prototype,"anchor",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlPopup.prototype,"active",2);__decorateClass([e2$2({reflect:!0})],SlPopup.prototype,"placement",2);__decorateClass([e2$2({reflect:!0})],SlPopup.prototype,"strategy",2);__decorateClass([e2$2({type:Number})],SlPopup.prototype,"distance",2);__decorateClass([e2$2({type:Number})],SlPopup.prototype,"skidding",2);__decorateClass([e2$2({type:Boolean})],SlPopup.prototype,"arrow",2);__decorateClass([e2$2({attribute:"arrow-placement"})],SlPopup.prototype,"arrowPlacement",2);__decorateClass([e2$2({attribute:"arrow-padding",type:Number})],SlPopup.prototype,"arrowPadding",2);__decorateClass([e2$2({type:Boolean})],SlPopup.prototype,"flip",2);__decorateClass([e2$2({attribute:"flip-fallback-placements",converter:{fromAttribute:nt=>nt.split(" ").map(rt=>rt.trim()).filter(rt=>rt!==""),toAttribute:nt=>nt.join(" ")}})],SlPopup.prototype,"flipFallbackPlacements",2);__decorateClass([e2$2({attribute:"flip-fallback-strategy"})],SlPopup.prototype,"flipFallbackStrategy",2);__decorateClass([e2$2({type:Object})],SlPopup.prototype,"flipBoundary",2);__decorateClass([e2$2({attribute:"flip-padding",type:Number})],SlPopup.prototype,"flipPadding",2);__decorateClass([e2$2({type:Boolean})],SlPopup.prototype,"shift",2);__decorateClass([e2$2({type:Object})],SlPopup.prototype,"shiftBoundary",2);__decorateClass([e2$2({attribute:"shift-padding",type:Number})],SlPopup.prototype,"shiftPadding",2);__decorateClass([e2$2({attribute:"auto-size"})],SlPopup.prototype,"autoSize",2);__decorateClass([e2$2()],SlPopup.prototype,"sync",2);__decorateClass([e2$2({type:Object})],SlPopup.prototype,"autoSizeBoundary",2);__decorateClass([e2$2({attribute:"auto-size-padding",type:Number})],SlPopup.prototype,"autoSizePadding",2);SlPopup=__decorateClass([e$1("sl-popup")],SlPopup);const _hoisted_1$v={id:"add-media-resource-dialog",label:"Add Media Resource"},_hoisted_2$q=createBaseVNode("img",{id:"img",style:{paddingLeft:"16px",height:"100%"}},null,-1),_hoisted_3$k=[_hoisted_2$q],_hoisted_4$g=createBaseVNode("div",{class:"fields"},[createBaseVNode("sl-input",{autocomplete:"off",id:"resource-folder",placeholder:"Folder",pattern:"^[A-z0-9\\/\\-_]+$"}),createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"resource-name",placeholder:"Name",pattern:"^[A-z0-9\\-_ ]+$"}),createBaseVNode("sl-input",{autocomplete:"off",id:"resource-summary",placeholder:"Summary"})],-1),_hoisted_5$e={class:"metadata"},_hoisted_6$b={class:"exif-data"},_hoisted_7$9=["innerHTML"],_hoisted_8$9=["innerHTML"],_hoisted_9$7={class:"depicted"},_hoisted_10$6={class:"search"},_hoisted_11$5=createBaseVNode("div",null,"Entities:",-1),_hoisted_12$4=["data-entity"],_hoisted_13$4=["innerHTML"],_hoisted_14$4=["innerHTML"],_hoisted_15$4=["onClick"],_hoisted_16$4=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_sfc_main$x=defineComponent({__name:"AddMediaResourceDialog.ce",props:{path:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt;rt({isOpen:Vn,show:Er});const vt=ref(""),bt=ref(),wt=ref(),Tt=ref(),kt=ref(),Lt=ref([]),Mt=ref(),Nt=ref(),zt=ref(),Ht=ref(),Wt=ref(),Zt=ref(),tn=ref(),Yt=ref(),nn=ref(),rn=ref({}),ln=ref([]),sn=ref(!1),mn=ref(null),wn=computed(()=>{var Mr;return(Mr=mn==null?void 0:mn.value)==null?void 0:Mr.parentNode});computed(()=>{var Mr,rr;return(rr=(Mr=mn.value)==null?void 0:Mr.getRootNode())==null?void 0:rr.host}),onMounted(()=>Cn()),watch$1(sn,()=>{Mt.value&&(Mt.value.open=sn.value)}),watch$1(vt,()=>{bt.value=new GithubClient(vt.value)}),watch$1(Nt,()=>{bt.value=new GithubClient(vt.value)}),watch$1(Lt,()=>{Wt.value&&(Wt.value.value=Lt.value.join("/"))}),watch$1(it,()=>{An()});function Cn(){var rr,vr,cr,gr,Or,Ar,sr;let Mr=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");Mr&&(vt.value=Mr),it.path&&An(),Mt.value=(rr=wn.value)==null?void 0:rr.querySelector("#add-media-resource-dialog"),Mt.value.addEventListener("sl-hide",()=>Pn()),Ht.value=(vr=wn.value)==null?void 0:vr.querySelector("#add-media-resource-form"),Wt.value=(cr=wn.value)==null?void 0:cr.querySelector("#resource-folder"),Wt.value.value=Lt.value.join("/"),Zt.value=(gr=wn.value)==null?void 0:gr.querySelector("#resource-name"),tn.value=(Or=wn.value)==null?void 0:Or.querySelector("#resource-summary"),Yt.value=(Ar=wn.value)==null?void 0:Ar.querySelector("#img"),nn.value=(sr=wn.value)==null?void 0:sr.querySelector("#filePicker"),it.show&&On()}function An(){var Mr;if(it.path){let[rr,vr]=((Mr=it.path.split(":").pop())==null?void 0:Mr.split("?"))||[],cr=vr?Object.fromEntries(vr.split("&").map(Or=>Or.split("="))):{},gr=rr.split("/").filter(Or=>Or);gr.length>0&&(wt.value=gr[0]),gr.length>1&&(Tt.value=gr[1]),gr.length>2&&(Lt.value=gr.slice(2)),cr.ref&&(kt.value=cr.ref||"main")}}function Pn(){Wt.value&&(Wt.value.value=Lt.value.join("/")),Zt.value&&(Zt.value.value=""),Nt.value=void 0,nn.value&&(nn.value.value=""),sn.value=!1}async function On(){let Mr=Ht.value;Mr&&(Mr.onclick||(Mr.onclick=function(){},Mr.addEventListener("submit",async rr=>{var gr,Or,Ar;rr.preventDefault(),console.log(`Add resource: folder="${(gr=Wt.value)==null?void 0:gr.value}" name="${(Or=Zt.value)==null?void 0:Or.value}" summary="${(Ar=tn.value)==null?void 0:Ar.value}"`);let vr=await pr();const cr=new FileReader;cr.onloadend=async()=>{var ar,fr;const sr=cr.result;let ii=(ar=Zt.value)==null?void 0:ar.value.trim().replace(/ /g,"_");if(Wt.value){let wr=[...(fr=Wt.value)==null?void 0:fr.value.split("/").filter(ir=>ir),ii].join("/");await bt.value.putFile(wt.value,Tt.value,`${wr}.${zt.value}`,sr,kt.value,!0),Object.keys(vr).length>0&&await bt.value.putFile(wt.value,Tt.value,`${wr}.yaml`,jsYaml.dump(vr),kt.value),sn.value=!1}},Nt.value&&cr.readAsBinaryString(Nt.value)})),sn.value=!0)}function kn(Mr){ln.value=ln.value.filter(rr=>rr.id!==Mr)}function gn(Mr){ln.value=[...ln.value,Mr.detail[0]]}function Vn(){return sn.value}function pn(){var Mr;if(((Mr=nn.value)==null?void 0:Mr.files)&&nn.value.files.length>0){Nt.value=nn.value.files[0];let rr=Nt.value.name.split(".");zt.value=rr.slice(-1)[0].toLowerCase();let vr=window.URL||window.webkitURL;Yt.value&&(Yt.value.onload=()=>yn().then(cr=>{rn.value=cr}),Yt.value.src=vr.createObjectURL(Nt.value)),setTimeout(()=>{var cr;return((cr=wn.value)==null?void 0:cr.querySelector("#resource-name")).focus()},100)}}async function pr(){let Mr={};tn.value&&(Mr.summary=tn.value.value.trim());let rr=wn.value?Array.from(wn.value.querySelectorAll(".depicted [data-entity]")).map(cr=>cr.dataset.entity):[];rr.length>0&&(Mr.depicts=rr);let vr=await yn();return vr&&(Mr={...Mr,...vr}),Mr}async function yn(){var rr,vr,cr;let Mr={};try{let gr=await tt.parse((rr=Yt.value)==null?void 0:rr.src,!0);gr.CreateDate&&(Mr.created=gr.CreateDate.toISOString());let Or=await tt.orientation((vr=Yt.value)==null?void 0:vr.src);Or&&(Mr.orientation=Or);let Ar=await tt.gps((cr=Yt.value)==null?void 0:cr.src);if(Ar){let{latitude:sr,longitude:ii}=Ar;sr&&(Mr.location=`${sr.toFixed(7)},${ii.toFixed(7)}`)}}catch(gr){console.log(gr)}return Mr}function mr(){sn.value=!1}function Er(Mr){Mr?On():Pn()}return(Mr,rr)=>{var vr,cr,gr;return openBlock(),createElementBlock("div",{ref_key:"root",ref:mn,class:"main"},[createBaseVNode("sl-dialog",_hoisted_1$v,[createBaseVNode("form",{style:normalizeStyle({display:(vr=Nt.value)!=null&&vr.name?"grid":"none"}),id:"add-media-resource-form",class:"input-validation-pattern"},[createBaseVNode("div",{style:normalizeStyle({height:`${(cr=Nt.value)!=null&&cr.name?120:0}px`})},_hoisted_3$k,4),_hoisted_4$g,createBaseVNode("div",_hoisted_5$e,[createBaseVNode("div",_hoisted_6$b,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(rn.value,(Or,Ar,sr)=>(openBlock(),createElementBlock("li",{key:`exif-${sr}`},[createBaseVNode("span",{class:"label",innerHTML:Ar},null,8,_hoisted_7$9),createBaseVNode("span",{class:"value",innerHTML:Or},null,8,_hoisted_8$9)]))),128))])]),createBaseVNode("div",_hoisted_9$7,[createBaseVNode("div",_hoisted_10$6,[_hoisted_11$5,createBaseVNode("ve-wikidata-search",{onEntitySelected:gn},null,32)]),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ln.value,Or=>(openBlock(),createElementBlock("li",{key:Or.id,"data-entity":Or.id},[createBaseVNode("span",{class:"entity-label",innerHTML:Or.label},null,8,_hoisted_13$4),createBaseVNode("span",{class:"entity-description",innerHTML:Or.description||""},null,8,_hoisted_14$4),createBaseVNode("sl-icon-button",{class:"remove-entity",onClick:Ar=>kn(Or.id),id:"remove-icon",name:"trash",label:"Remove entity"},null,8,_hoisted_15$4)],8,_hoisted_12$4))),128))])])]),createBaseVNode("div",{class:"buttons"},[createBaseVNode("sl-button",{onClick:mr},"Cancel"),_hoisted_16$4])],4),createBaseVNode("input",{style:normalizeStyle({display:(gr=Nt.value)!=null&&gr.name?"none":"block"}),id:"filePicker",type:"file",accept:"image/x-png,image/jpeg,image/gif",onChange:pn},null,36)])],512)}}}),_style_0$q=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}input[type=file]{font-size:1.2rem}form{margin:12px}form .buttons{display:flex;gap:12px;justify-content:center}form{display:grid;height:60vh;grid-template-columns:1fr;grid-template-rows:auto auto 1fr auto;margin:0;gap:12px}.metadata{height:100%;overflow-y:scroll;overflow-x:hidden;margin:0}.exif-data ul{list-style:none;margin:0;padding:0}.label{font-weight:700;margin-right:12px}.label:after{content:":"}.fields{display:flex;flex-direction:column;gap:6px}.search{display:flex;align-items:center;gap:12px}.search div{font-size:1.1rem;font-weight:700}ve-wikidata-search{width:100%}.depicted{margin-top:12px}.depicted ul{list-style:none;margin:12px 0;padding:0;width:95%}.depicted ul li{display:flex;align-items:flex-start;gap:6px;margin-bottom:9px;width:100%}.entity-label{width:30%}.entity-description{width:50%}.remove-entity{margin-left:auto}.value{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}
`,_export_sfc=(nt,rt)=>{const it=nt.__vccOpts||nt;for(const[vt,bt]of rt)it[vt]=bt;return it},AddMediaResourceDialog=_export_sfc(_sfc_main$x,[["styles",[_style_0$q]]]),_hoisted_1$u={ref:"root",class:"main"},_hoisted_2$p=["content"],_hoisted_3$j=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{"font-size":"20px"}},null,-1),_hoisted_4$f={key:1,content:"Click to Login with Github",placement:"top"},_hoisted_5$d=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{"font-size":"20px"}},null,-1),_sfc_main$w=defineComponent({__name:"Auth.ce",setup(nt){const rt={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","beta.juncture-digital.org":"f30ce4168a0bb95ecaa3","dev.juncture-digital.org":"bb290b5a738cb6fe31c7"},it=ref(""),vt=ref(),bt=computed(()=>it.value!==null),wt=ref(null),Tt=ref(null);onMounted(()=>{it.value=window.localStorage.getItem("gh-auth-token"),Tt.value=window.localStorage.getItem("gh-username"),window.addEventListener("storage",()=>it.value=window.localStorage.getItem("gh-auth-token"));let Nt=new URL(window.location.href).searchParams.get("code");if(Nt){let zt=`${location.pathname}${location.hash}`;console.log(zt),window.history.replaceState({},"",zt);let Wt=window.location.hostname==="localhost"||window.location.hostname.indexOf("192.168.")===0?`http://${window.location.hostname}:8000/gh-token?code=${Nt}&hostname=${window.location.hostname}`:`https://api.juncture-digital.org/gh-token?code=${Nt}&hostname=${window.location.hostname}`;fetch(Wt).then(Zt=>Zt.text()).then(Zt=>{Zt&&(localStorage.setItem("gh-auth-token",Zt),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),Mt())}).catch(Zt=>console.log("err",Zt))}});function kt(){let Nt=new URL(window.location.href).hostname,zt=Nt==="localhost"||Nt.indexOf("192.168.")===0,Ht=`${window.location.href}`,Wt=zt?`${window.location.origin}${window.location.pathname}?code=testing&redirect_uri=${location.pathname}${location.hash}`:rt[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${rt[location.hostname]}&scope=repo&state=juncture&redirect_uri=${Ht}`:null;Wt&&(window.location.href=Wt)}function Lt(){Object.keys(localStorage).forEach(Nt=>localStorage.removeItem(Nt)),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),wt.value=null,location.href=""}function Mt(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${it.value}`}}).then(Nt=>Nt.json()).then(Nt=>wt.value=Nt)}return watch$1(wt,()=>{wt.value&&localStorage.setItem("gh-username",wt.value.login),Tt.value=window.localStorage.getItem("gh-username")}),watch$1(it,()=>{vt.value=new GithubClient(it.value||"")}),watch$1(vt,async()=>{if(bt.value){let Nt=await vt.value.user().then(zt=>zt.login);await vt.value.repos(Nt).then(zt=>{zt.find(Ht=>Ht.name==="essays")||vt.value.createRepository({name:"essays",description:"Juncture visual essays"}),zt.find(Ht=>Ht.name==="media")||vt.value.createRepository({name:"media",description:"Juncture media"})})}}),(Nt,zt)=>(openBlock(),createElementBlock("div",_hoisted_1$u,[unref(bt)?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Logged in as ${Tt.value}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",onClick:Lt},[_hoisted_3$j,createTextVNode(" Logout ")])],8,_hoisted_2$p)):(openBlock(),createElementBlock("sl-tooltip",_hoisted_4$f,[createBaseVNode("sl-button",{variant:"default",onClick:kt},[_hoisted_5$d,createTextVNode(" Login with Github ")])]))],512))}}),_style_0$p=`:host{display:inline-block}div{color:#00f}div:hover{text-decoration:underline;cursor:pointer}
`,Auth=_export_sfc(_sfc_main$w,[["styles",[_style_0$p]]]),_hoisted_1$t=["name"],_sfc_main$v=defineComponent({__name:"Button.ce",props:{href:{type:String},target:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},label:{type:String},icon:{type:String},authRequired:{type:Boolean,default:!1}},setup(nt){const rt=nt,it=window,vt=ref(null),bt=computed(()=>{var Lt,Mt;return(Mt=(Lt=vt.value)==null?void 0:Lt.getRootNode())==null?void 0:Mt.host}),wt=ref(""),Tt=computed(()=>wt.value!==null);onMounted(()=>{wt.value=window.localStorage.getItem("gh-auth-token"),window.addEventListener("storage",()=>wt.value=window.localStorage.getItem("gh-auth-token"))}),watch$1(bt,()=>{var Lt;((Lt=bt.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&bt.value.parentElement.children.length===1&&(bt.value.parentElement.style.display=!rt.authRequired||Tt.value?"block":"none")}),watch$1(Tt,()=>{var Lt;((Lt=bt.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&bt.value.parentElement.children.length===1&&(bt.value.parentElement.style.display=!rt.authRequired||Tt.value?"block":"none")});function kt(){if(rt.target==="_blank"){let Lt=rt.width||1040,Mt=rt.height||Math.max(window.innerHeight,1500);it.junctureWindow&&it.junctureWindow.close();let Nt=`toolbar=yes,location=yes,left=${rt.left},top=${rt.top},width=${Lt},height=${Mt},scrollbars=yes,status=yes`;it.junctureWindow=window.open(rt.href,"_blank",Nt)}else rt.href&&(location.href=rt.href)}return(Lt,Mt)=>!rt.authRequired||unref(Tt)?(openBlock(),createElementBlock("sl-button",{key:0,ref_key:"root",ref:vt,onClick:kt},[rt.icon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.icon},null,8,_hoisted_1$t)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.label),1)],512)):createCommentVNode("",!0)}}),_style_0$o=`*{box-sizing:border-box}.ve-component{z-index:2;position:relative}ve-media-card{height:100%}.manifest-popup{border:1px solid #555;background-color:#fff;width:350px;max-height:500px;overflow-y:scroll;border-radius:6px;padding:4px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}main>p:first-of-type{padding-top:24px}.markdown-section h1,.markdown-section h2,.markdown-section h3,.markdown-section h4,.markdown-section h5,.markdown-section h6{line-height:1.2}.right{float:right;top:0;width:calc(50% - 12px)}.visible{visibility:visible;opacity:1;transition:opacity .5s linear}.hidden{visibility:hidden;opacity:0;transition:visibility 0s .5s,opacity .5s linear}#juncture section{display:flow-root;position:relative}#juncture>section{margin-top:2rem}#juncture>section>section,#juncture>section>section>section{margin-top:2rem}#juncture>section>section>section>section,#juncture>section>section>section>section>section,#juncture>section>section>section>section>section>section{margin-top:1rem;padding-top:0}#juncture section>h1,#juncture section>h2,#juncture section>h3,#juncture section>h4,#juncture section>h5,#juncture section>h6{padding-top:0;margin-top:unset;margin-bottom:1.5rem;padding-bottom:0}#juncture section ol,#juncture section ul{padding:.5em .5em .5em 1.4em}#juncture section li>p{margin:0}body{font-family:Roboto,sans-serif;margin:0;background-color:#fff}.clear{clear:both}#juncture section.sticky{position:sticky;top:0;z-index:3;background-color:#fff;padding-top:6px}ve-footer ul{display:none}#juncture section{background-color:inherit}#juncture .section1,#juncture .section2{width:100%;clear:both;background-color:inherit}.noclear{clear:none}.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.hide{display:none}.show-active p{border-left:8px solid transparent}.show-active p.active{border-left:4px solid #ccc;padding-left:4px}ve-header>ul{display:none}ve-footer{clear:both}main{background-color:inherit}:target:before{content:"";display:block;height:80px;margin:-32px 0 0}section.no-offset:target:before{display:none}#juncture section.footnote{font-size:80%;margin-top:1rem}.ve-component.sticky+div.footnote,.ve-component.sticky~div.footnote{width:100%}@media (max-width: 480px){#juncture{font-size:1.2rem;line-height:1.3;padding:0 0 40vh}#juncture h1{font-size:1.5em}#juncture h2{font-size:1.4em}#juncture h3{font-size:1.3em}#juncture>section{padding:0 6px}#juncture section.sticky.right{display:none}}@media (min-width: 481px){body{margin:0 2rem}#juncture{font-size:1.3rem;line-height:1.4;padding:0;max-width:1200px;margin:auto}.ve-component{z-index:2}.ve-component[grid]{z-index:3}ve-map.full{padding-bottom:12px}.right{margin-left:12px}.left{margin-right:12px}.sticky.right+section,.sticky.right~section,.sticky.right+div,.sticky.right~div,.sticky.right+p,.sticky.right~p,.sticky.right+ol,.sticky.right~ol .sticky.right+ul,.sticky.right~ul,.sticky.right+blockquote,.sticky.right~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.left+section,.ve-component.sticky.left~section,.ve-component.sticky.left+div,.ve-component.sticky.left~div,.ve-component.sticky.left+p,.ve-component.sticky.left~p,.ve-component.sticky.left+ol,.ve-component.sticky.left~ol .ve-component.sticky.left+ul,.ve-component.sticky.left~ul,.ve-component.sticky.left+blockquote,.ve-component.sticky.left~blockquote{margin-left:50%;padding-left:9px}.ve-component.sticky+section,.ve-component.sticky~section,#juncture section.sticky+section,#juncture section.sticky~section{clear:none}.ve-component.sticky.left.text-left+section,.ve-component.sticky.left.text-left~section{margin-left:0}.ve-component.sticky.left.text-left+div,.ve-component.sticky.left.text-left~div,.ve-component.sticky.left.text-left+p,.ve-component.sticky.left.text-left~p,.ve-component.sticky.left.text-left+ol,.ve-component.sticky.left.text-left~ol .ve-component.sticky.left.text-left+ul,.ve-component.sticky.left.text-left~ul,.ve-component.sticky.left.text-left+blockquote,.ve-component.sticky.left.text-left~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.right.text-right+section,.ve-component.sticky.right.text-right~section,.ve-component.sticky.right.text-right+div,.ve-component.sticky.right.text-right~div,.ve-component.sticky.right.text-right+p,.ve-component.sticky.right.text-right~p,.ve-component.sticky.right.text-right+ol,.ve-component.sticky.right.text-right~ol .ve-component.sticky.right.text-right+ul,.ve-component.sticky.right.text-right~ul,.ve-component.sticky.right.text-right+blockquote,.ve-component.sticky.right.text-right~blockquote{margin-left:50%;padding-left:9px}}#juncture section.tab{height:calc(100% - 84px);overflow-y:scroll;border:1px solid #ccc}#juncture .tabs label{margin-bottom:0}#juncture input{display:none}#juncture input+label{display:inline-block}#juncture input~.tab{visibility:hidden}#juncture #tab1:checked~.tab.content1,#juncture #tab2:checked~.tab.content2,#juncture #tab3:checked~.tab.content3,#juncture #tab4:checked~.tab.content4,#juncture #tab5:checked~.tab.content5,#juncture #tab6:checked~.tab.content6{visibility:visible}#juncture input+label{border:1px solid #999;background:#EEE;padding:4px 12px;border-radius:4px 4px 0 0;position:relative;top:1px;cursor:pointer}#juncture input:checked+label{background:#FFF;border-bottom:1px solid white;z-index:2}#juncture input~.tab{border-top:1px solid #999;padding:12px}#juncture h1{margin-bottom:32px}#juncture .tab{position:absolute;visibility:hidden;width:100%;height:100%;padding:1rem 0}#juncture .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(265px,1fr));grid-auto-rows:1fr;row-gap:2rem;column-gap:2rem}#juncture .cards.wrapper>section{padding:0}#juncture .card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;padding:0;border:1px solid #ddd;border-radius:6px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#juncture .card p{border:none}#juncture .card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:300px}#juncture .card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}#juncture .card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.4rem .5rem;margin:0;font-size:1.1rem;font-weight:700;max-height:260px;overflow-y:scroll}#juncture .card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-start;min-height:110px;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:12}.clamp5{-webkit-line-clamp:5}#juncture .hero{display:flex;flex-direction:column;height:400px;margin-top:0}#juncture .hero-text{color:#fff;text-align:center;font-size:2.5rem;max-width:60%;margin:auto;font-family:Georgia;hyphens:unset}#juncture .cta{background-color:#ffe55a;border-radius:50px;font-family:Roboto;font-size:2rem;padding:16px 72px;margin:0 auto auto;text-align:center}@media (max-width: 480px){#juncture .hero-text{font-size:2rem;max-width:80%}#juncture .cta{font-size:1.5rem;padding:12px 60px}}mark{cursor:pointer;background:unset;border-bottom:1px solid #ccc;color:#444}mark:hover{border-bottom:2px solid #444;background:#eee}mark:after{color:#aaa;font-size:50%;line-height:0;position:relative;vertical-align:baseline;top:-.3em;padding-left:2px;padding-right:4px}mark.anno:after,mark.zoomto:after{content:"\\1f50e"}mark.play:after{content:"\\25b6"}mark.flyto:after{content:"\\2708";font-size:120%;top:0}#juncture a{color:#0645ad;text-decoration:none}#juncture a:visited{color:#0b0080}#juncture a:hover{color:#06e}#juncture a:active{color:#faa700}#juncture a:focus{outline:thin dotted}#juncture a:hover,#juncture a:active{outline:0}::-moz-selection{background:rgba(255,255,0,.3);color:#000}::selection{background:rgba(255,255,0,.3);color:#000}#juncture a::-moz-selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture a::selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture p,#juncture li{line-height:1.4;color:#444;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}#juncture p{margin:0 0 1rem}#juncture img{max-width:100%}#juncture h1,#juncture h2,#juncture h3,#juncture h4,#juncture h5,#juncture h6{font-weight:500;color:#444;line-height:1em}#juncture h4,#juncture h5 #juncture h6{font-weight:500}#juncture h1{font-size:1.8em}#juncture h2{font-size:1.6em}#juncture h3{font-size:1.5em}#juncture h4{font-size:1.2em}#juncture h5{font-size:1em}#juncture h6{font-size:.9em}#juncture blockquote{color:#666;margin:0;padding-left:1em;border-left:.5em #EEE solid}#juncture hr{display:block;height:2px;border:0;border-top:1px solid #aaa;border-bottom:1px solid #eee;margin:1em 0;padding:0}#juncture pre,#juncture code,#juncture kbd,#juncture samp{color:#900;background-color:#eee;padding:0;font-family:monospace,monospace;_font-family:"courier new",monospace;font-size:1em}#juncture pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#juncture b,#juncture strong{font-weight:700}#juncture dfn{font-style:italic}#juncture ins{background:#ff9;color:#000;text-decoration:none}#juncture sub,#juncture sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#juncture sup{top:-.5em}#juncture sub{bottom:-.25em}#juncture ul,#juncture ol{margin:0;padding:0 0 0 2em}#juncture li p:last-child{margin:0}#juncture dd{margin:0 0 0 2em}#juncture img{border:0;-ms-interpolation-mode:bicubic;vertical-align:middle}#juncture table{border-collapse:collapse;border-spacing:0;width:100%}#juncture th{border-bottom:1px solid black}#juncture td{vertical-align:top}#juncture table{border:1px solid #555}#juncture td,#juncture th{border:1px solid #555;padding:8px;line-height:1.2}#juncture th{background-color:#e2f0f7;font-weight:700;text-align:center}
`,_style_1$6=`:host{display:inline-block}
`,Button=_export_sfc(_sfc_main$v,[["styles",[_style_0$o,_style_1$6]]]);var alert_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: contents;

    /* For better DX, we'll reset the margin here so the base part can inherit it */
    margin: 0;
  }

  .alert {
    position: relative;
    display: flex;
    align-items: stretch;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-top-width: calc(var(--sl-panel-border-width) * 3);
    border-radius: var(--sl-border-radius-medium);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-normal);
    line-height: 1.6;
    color: var(--sl-color-neutral-700);
    margin: inherit;
  }

  .alert:not(.alert--has-icon) .alert__icon,
  .alert:not(.alert--closable) .alert__close-button {
    display: none;
  }

  .alert__icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-inline-start: var(--sl-spacing-large);
  }

  .alert--primary {
    border-top-color: var(--sl-color-primary-600);
  }

  .alert--primary .alert__icon {
    color: var(--sl-color-primary-600);
  }

  .alert--success {
    border-top-color: var(--sl-color-success-600);
  }

  .alert--success .alert__icon {
    color: var(--sl-color-success-600);
  }

  .alert--neutral {
    border-top-color: var(--sl-color-neutral-600);
  }

  .alert--neutral .alert__icon {
    color: var(--sl-color-neutral-600);
  }

  .alert--warning {
    border-top-color: var(--sl-color-warning-600);
  }

  .alert--warning .alert__icon {
    color: var(--sl-color-warning-600);
  }

  .alert--danger {
    border-top-color: var(--sl-color-danger-600);
  }

  .alert--danger .alert__icon {
    color: var(--sl-color-danger-600);
  }

  .alert__message {
    flex: 1 1 auto;
    display: block;
    padding: var(--sl-spacing-large);
    overflow: hidden;
  }

  .alert__close-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
    padding-inline-end: var(--sl-spacing-medium);
  }
`,toastStack=Object.assign(document.createElement("div"),{className:"sl-toast-stack"}),SlAlert=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"icon","suffix"),this.localize=new LocalizeController2(this),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0}firstUpdated(){this.base.hidden=!this.open}restartAutoHide(){clearTimeout(this.autoHideTimeout),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.duration))}handleCloseClick(){this.hide()}handleMouseMove(){this.restartAutoHide()}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.duration<1/0&&this.restartAutoHide(),await stopAnimations(this.base),this.base.hidden=!1;const{keyframes:nt,options:rt}=getAnimation(this,"alert.show",{dir:this.localize.dir()});await animateTo(this.base,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),clearTimeout(this.autoHideTimeout),await stopAnimations(this.base);const{keyframes:nt,options:rt}=getAnimation(this,"alert.hide",{dir:this.localize.dir()});await animateTo(this.base,nt,rt),this.base.hidden=!0,this.emit("sl-after-hide")}}handleDurationChange(){this.restartAutoHide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}async toast(){return new Promise(nt=>{toastStack.parentElement===null&&document.body.append(toastStack),toastStack.appendChild(this),requestAnimationFrame(()=>{this.clientWidth,this.show()}),this.addEventListener("sl-after-hide",()=>{toastStack.removeChild(this),nt(),toastStack.querySelector("sl-alert")===null&&toastStack.remove()},{once:!0})})}render(){return y$2`
      <div
        part="base"
        class=${o$1({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":this.variant==="primary","alert--success":this.variant==="success","alert--neutral":this.variant==="neutral","alert--warning":this.variant==="warning","alert--danger":this.variant==="danger"})}
        role="alert"
        aria-hidden=${this.open?"false":"true"}
        @mousemove=${this.handleMouseMove}
      >
        <slot name="icon" part="icon" class="alert__icon"></slot>

        <slot part="message" class="alert__message" aria-live="polite"></slot>

        ${this.closable?y$2`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                class="alert__close-button"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                @click=${this.handleCloseClick}
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlAlert.styles=alert_styles_default;__decorateClass([i2$2('[part~="base"]')],SlAlert.prototype,"base",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlAlert.prototype,"open",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlAlert.prototype,"closable",2);__decorateClass([e2$2({reflect:!0})],SlAlert.prototype,"variant",2);__decorateClass([e2$2({type:Number})],SlAlert.prototype,"duration",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlAlert.prototype,"handleOpenChange",1);__decorateClass([watch("duration")],SlAlert.prototype,"handleDurationChange",1);SlAlert=__decorateClass([e$1("sl-alert")],SlAlert);setDefaultAnimation("alert.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("alert.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});var textarea_styles_default=i$4`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .textarea {
    display: flex;
    align-items: center;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
    cursor: text;
  }

  /* Standard textareas */
  .textarea--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .textarea--standard:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }
  .textarea--standard:hover:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-hover);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-focus);
  }

  .textarea--standard.textarea--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea--standard.textarea--disabled .textarea__control {
    color: var(--sl-input-color-disabled);
  }

  .textarea--standard.textarea--disabled .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled textareas */
  .textarea--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .textarea--filled:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .textarea--filled.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .textarea--filled.textarea--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: 1.4;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .textarea__control::-webkit-search-decoration,
  .textarea__control::-webkit-search-cancel-button,
  .textarea__control::-webkit-search-results-button,
  .textarea__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .textarea__control:focus {
    outline: none;
  }

  /*
   * Size modifiers
   */

  .textarea--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
  }

  .textarea--small .textarea__control {
    padding: 0.5em var(--sl-input-spacing-small);
  }

  .textarea--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .textarea--medium .textarea__control {
    padding: 0.5em var(--sl-input-spacing-medium);
  }

  .textarea--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
  }

  .textarea--large .textarea__control {
    padding: 0.5em var(--sl-input-spacing-large);
  }

  /*
   * Resize types
   */

  .textarea--resize-none .textarea__control {
    resize: none;
  }

  .textarea--resize-vertical .textarea__control {
    resize: vertical;
  }

  .textarea--resize-auto .textarea__control {
    height: auto;
    resize: none;
    overflow-y: hidden;
  }
`,SlTextarea=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.hasFocus=!1,this.invalid=!1,this.title="",this.name="",this.value="",this.size="medium",this.filled=!1,this.label="",this.helpText="",this.placeholder="",this.rows=4,this.resize="vertical",this.disabled=!1,this.readonly=!1,this.required=!1,this.spellcheck=!0,this.defaultValue=""}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.setTextareaHeight()),this.updateComplete.then(()=>{this.setTextareaHeight(),this.resizeObserver.observe(this.input)})}firstUpdated(){this.invalid=!this.checkValidity()}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this.input)}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.setTextareaHeight(),this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}setTextareaHeight(){this.resize==="auto"?(this.input.style.height="auto",this.input.style.height=`${this.input.scrollHeight}px`):this.input.style.height=void 0}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.checkValidity()}handleRowsChange(){this.setTextareaHeight()}async handleValueChange(){await this.updateComplete,this.invalid=!this.checkValidity(),this.setTextareaHeight()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}scrollPosition(nt){if(nt){typeof nt.top=="number"&&(this.input.scrollTop=nt.top),typeof nt.left=="number"&&(this.input.scrollLeft=nt.left);return}return{top:this.input.scrollTop,left:this.input.scrollTop}}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,vt){this.input.setRangeText(nt,rt,it,vt),this.value!==this.input.value&&(this.value=this.input.value),this.value!==this.input.value&&(this.value=this.input.value,this.setTextareaHeight())}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.invalid=!this.checkValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,vt=this.helpText?!0:!!rt;return y$2`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":vt})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({textarea:!0,"textarea--small":this.size==="small","textarea--medium":this.size==="medium","textarea--large":this.size==="large","textarea--standard":!this.filled,"textarea--filled":this.filled,"textarea--disabled":this.disabled,"textarea--focused":this.hasFocus,"textarea--empty":!this.value,"textarea--invalid":this.invalid,"textarea--resize-none":this.resize==="none","textarea--resize-vertical":this.resize==="vertical","textarea--resize-auto":this.resize==="auto"})}
          >
            <textarea
              part="textarea"
              id="input"
              class="textarea__control"
              title=${this.title}
              name=${l$2(this.name)}
              .value=${l2$1(this.value)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$2(this.placeholder)}
              rows=${l$2(this.rows)}
              minlength=${l$2(this.minlength)}
              maxlength=${l$2(this.maxlength)}
              autocapitalize=${l$2(this.autocapitalize)}
              autocorrect=${l$2(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${l$2(this.spellcheck)}
              enterkeyhint=${l$2(this.enterkeyhint)}
              inputmode=${l$2(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            ></textarea>
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${vt?"false":"true"}
        >
          ${this.helpText}
        </slot>
      </div>
    `}};SlTextarea.styles=textarea_styles_default;__decorateClass([i2$2(".textarea__control")],SlTextarea.prototype,"input",2);__decorateClass([t$1()],SlTextarea.prototype,"hasFocus",2);__decorateClass([t$1()],SlTextarea.prototype,"invalid",2);__decorateClass([e2$2()],SlTextarea.prototype,"title",2);__decorateClass([e2$2()],SlTextarea.prototype,"name",2);__decorateClass([e2$2()],SlTextarea.prototype,"value",2);__decorateClass([e2$2({reflect:!0})],SlTextarea.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"filled",2);__decorateClass([e2$2()],SlTextarea.prototype,"label",2);__decorateClass([e2$2({attribute:"help-text"})],SlTextarea.prototype,"helpText",2);__decorateClass([e2$2()],SlTextarea.prototype,"placeholder",2);__decorateClass([e2$2({type:Number})],SlTextarea.prototype,"rows",2);__decorateClass([e2$2()],SlTextarea.prototype,"resize",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"disabled",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"readonly",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTextarea.prototype,"required",2);__decorateClass([e2$2({type:Number})],SlTextarea.prototype,"minlength",2);__decorateClass([e2$2({type:Number})],SlTextarea.prototype,"maxlength",2);__decorateClass([e2$2()],SlTextarea.prototype,"autocapitalize",2);__decorateClass([e2$2()],SlTextarea.prototype,"autocorrect",2);__decorateClass([e2$2()],SlTextarea.prototype,"autocomplete",2);__decorateClass([e2$2({type:Boolean})],SlTextarea.prototype,"autofocus",2);__decorateClass([e2$2()],SlTextarea.prototype,"enterkeyhint",2);__decorateClass([e2$2({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlTextarea.prototype,"spellcheck",2);__decorateClass([e2$2()],SlTextarea.prototype,"inputmode",2);__decorateClass([defaultValue()],SlTextarea.prototype,"defaultValue",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleDisabledChange",1);__decorateClass([watch("rows",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleRowsChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleValueChange",1);SlTextarea=__decorateClass([e$1("sl-textarea")],SlTextarea);const _hoisted_1$s=["innerHTML"],_hoisted_2$o=["label"],_hoisted_3$i=createBaseVNode("sl-input",{id:"from",type:"email",label:"Email address"},null,-1),_hoisted_4$e=createBaseVNode("sl-alert",{id:"bad-email-alert",variant:"danger"},[createBaseVNode("sl-icon",{slot:"icon",name:"exclamation-octagon"}),createBaseVNode("strong",null,"Invalid email address"),createBaseVNode("br"),createTextVNode("Please fix and resubmit ")],-1),_hoisted_5$c=createBaseVNode("sl-textarea",{id:"message",label:"Message"},null,-1),_hoisted_6$a=createBaseVNode("sl-alert",{id:"no-message-alert",variant:"danger"},[createBaseVNode("sl-icon",{slot:"icon",name:"exclamation-octagon"}),createBaseVNode("strong",null,"No message entered"),createBaseVNode("br")],-1),_sfc_main$u=defineComponent({__name:"Contact.ce",props:{contact:{type:String},title:{type:String},subject:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt,vt=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,bt="https://api.juncture-digital.org/sendmail/",wt=ref(null),Tt=computed(()=>{var nn,rn;return(rn=(nn=wt.value)==null?void 0:nn.getRootNode())==null?void 0:rn.host}),kt=computed(()=>{var nn;return(nn=wt==null?void 0:wt.value)==null?void 0:nn.parentNode}),Lt=computed(()=>{var nn;return(nn=Tt.value)==null?void 0:nn.innerHTML}),Mt=ref(!1);rt({show:Mt}),watch$1(Mt,()=>Nt.open=Mt.value);let Nt,zt,Ht,Wt,Zt;onMounted(()=>{Mt.value=it.show}),watch$1(it,()=>{Mt.value=it.show}),watch$1(Tt,()=>{var nn,rn,ln,sn,mn;Nt=(nn=kt.value)==null?void 0:nn.querySelector(".contact-dialog"),zt=(rn=kt.value)==null?void 0:rn.querySelector("#from"),Wt=(ln=kt.value)==null?void 0:ln.querySelector("#message"),Ht=(sn=kt.value)==null?void 0:sn.querySelector("#bad-email-alert"),Zt=(mn=kt.value)==null?void 0:mn.querySelector("#no-message-alert"),Nt.addEventListener("sl-hide",()=>Mt.value=!1)});function tn(){Nt.hide(),zt.value="",Wt.value="",Ht.hide(),Zt.hide()}async function Yt(){let nn=vt.test(zt.value);nn?Ht.hide():Ht.show();let rn=Wt.value.trim().length>0;if(rn?Zt.hide():Zt.show(),nn&&rn){let ln={to:it.contact,from:zt.value,subject:it.subject||"Contact Us",message:Wt.value};tn(),await fetch(bt,{method:"POST",body:JSON.stringify(ln)})}}return(nn,rn)=>(openBlock(),createElementBlock("section",{ref_key:"root",ref:wt,class:"main"},[unref(Lt)?(openBlock(),createElementBlock("a",{key:0,href:"#",onClick:rn[0]||(rn[0]=withModifiers(ln=>Mt.value=!Mt.value,["prevent"])),innerHTML:unref(Lt)},null,8,_hoisted_1$s)):createCommentVNode("",!0),createBaseVNode("sl-dialog",{label:it.title||"Contact Us",class:"contact-dialog"},[_hoisted_3$i,_hoisted_4$e,_hoisted_5$c,_hoisted_6$a,createBaseVNode("sl-button",{id:"cancel",slot:"footer",onClick:tn},"Cancel"),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Yt},"Submit")],8,_hoisted_2$o)],512))}}),_style_0$n=`*{box-sizing:border-box}:host{display:inline-block}sl-input,sl-textarea{padding:12px 0}sl-dialog::part(title),sl-input::part(form-control),sl-textarea::part(form-control){text-align:left}
`,Contact=_export_sfc(_sfc_main$u,[["styles",[_style_0$n]]]);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt,rt){return function(it){return new Sha256(rt,!0).update(it)[nt]()}},createMethod=function(nt){var rt=createOutputMethod("hex",nt);NODE_JS&&(rt=nodeWrap(rt,nt)),rt.create=function(){return new Sha256(nt)},rt.update=function(bt){return rt.create().update(bt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var vt=OUTPUT_TYPES[it];rt[vt]=createOutputMethod(vt,nt)}return rt},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash(algorithm).update(nt,"utf8").digest("hex");if(nt==null)throw new Error(ERROR);return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod},createHmacOutputMethod=function(nt,rt){return function(it,vt){return new HmacSha256(it,rt,!0).update(vt)[nt]()}},createHmacMethod=function(nt){var rt=createHmacOutputMethod("hex",nt);rt.create=function(bt){return new HmacSha256(bt,nt)},rt.update=function(bt,wt){return rt.create(bt).update(wt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var vt=OUTPUT_TYPES[it];rt[vt]=createHmacOutputMethod(vt,nt)}return rt};function Sha256(nt,rt){rt?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],nt?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=nt}Sha256.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);rt=!0}for(var vt,bt=0,wt,Tt=nt.length,kt=this.blocks;bt<Tt;){if(this.hashed&&(this.hashed=!1,kt[0]=this.block,kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)for(wt=this.start;bt<Tt&&wt<64;++bt)kt[wt>>2]|=nt[bt]<<SHIFT[wt++&3];else for(wt=this.start;bt<Tt&&wt<64;++bt)vt=nt.charCodeAt(bt),vt<128?kt[wt>>2]|=vt<<SHIFT[wt++&3]:vt<2048?(kt[wt>>2]|=(192|vt>>6)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt&63)<<SHIFT[wt++&3]):vt<55296||vt>=57344?(kt[wt>>2]|=(224|vt>>12)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt&63)<<SHIFT[wt++&3]):(vt=65536+((vt&1023)<<10|nt.charCodeAt(++bt)&1023),kt[wt>>2]|=(240|vt>>18)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt>>12&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt&63)<<SHIFT[wt++&3]);this.lastByteIndex=wt,this.bytes+=wt-this.start,wt>=64?(this.block=kt[16],this.start=wt-64,this.hash(),this.hashed=!0):this.start=wt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[16]=this.block,nt[rt>>2]|=EXTRA[rt&3],this.block=nt[16],rt>=56&&(this.hashed||this.hash(),nt[0]=this.block,nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.hBytes<<3|this.bytes>>>29,nt[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var nt=this.h0,rt=this.h1,it=this.h2,vt=this.h3,bt=this.h4,wt=this.h5,Tt=this.h6,kt=this.h7,Lt=this.blocks,Mt,Nt,zt,Ht,Wt,Zt,tn,Yt,nn,rn,ln;for(Mt=16;Mt<64;++Mt)Wt=Lt[Mt-15],Nt=(Wt>>>7|Wt<<25)^(Wt>>>18|Wt<<14)^Wt>>>3,Wt=Lt[Mt-2],zt=(Wt>>>17|Wt<<15)^(Wt>>>19|Wt<<13)^Wt>>>10,Lt[Mt]=Lt[Mt-16]+Nt+Lt[Mt-7]+zt<<0;for(ln=rt&it,Mt=0;Mt<64;Mt+=4)this.first?(this.is224?(Yt=300032,Wt=Lt[0]-1413257819,kt=Wt-150054599<<0,vt=Wt+24177077<<0):(Yt=704751109,Wt=Lt[0]-210244248,kt=Wt-1521486534<<0,vt=Wt+143694565<<0),this.first=!1):(Nt=(nt>>>2|nt<<30)^(nt>>>13|nt<<19)^(nt>>>22|nt<<10),zt=(bt>>>6|bt<<26)^(bt>>>11|bt<<21)^(bt>>>25|bt<<7),Yt=nt&rt,Ht=Yt^nt&it^ln,tn=bt&wt^~bt&Tt,Wt=kt+zt+tn+K[Mt]+Lt[Mt],Zt=Nt+Ht,kt=vt+Wt<<0,vt=Wt+Zt<<0),Nt=(vt>>>2|vt<<30)^(vt>>>13|vt<<19)^(vt>>>22|vt<<10),zt=(kt>>>6|kt<<26)^(kt>>>11|kt<<21)^(kt>>>25|kt<<7),nn=vt&nt,Ht=nn^vt&rt^Yt,tn=kt&bt^~kt&wt,Wt=Tt+zt+tn+K[Mt+1]+Lt[Mt+1],Zt=Nt+Ht,Tt=it+Wt<<0,it=Wt+Zt<<0,Nt=(it>>>2|it<<30)^(it>>>13|it<<19)^(it>>>22|it<<10),zt=(Tt>>>6|Tt<<26)^(Tt>>>11|Tt<<21)^(Tt>>>25|Tt<<7),rn=it&vt,Ht=rn^it&nt^nn,tn=Tt&kt^~Tt&bt,Wt=wt+zt+tn+K[Mt+2]+Lt[Mt+2],Zt=Nt+Ht,wt=rt+Wt<<0,rt=Wt+Zt<<0,Nt=(rt>>>2|rt<<30)^(rt>>>13|rt<<19)^(rt>>>22|rt<<10),zt=(wt>>>6|wt<<26)^(wt>>>11|wt<<21)^(wt>>>25|wt<<7),ln=rt&it,Ht=ln^rt&vt^rn,tn=wt&Tt^~wt&kt,Wt=bt+zt+tn+K[Mt+3]+Lt[Mt+3],Zt=Nt+Ht,bt=nt+Wt<<0,nt=Wt+Zt<<0;this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+vt<<0,this.h4=this.h4+bt<<0,this.h5=this.h5+wt<<0,this.h6=this.h6+Tt<<0,this.h7=this.h7+kt<<0},Sha256.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,vt=this.h3,bt=this.h4,wt=this.h5,Tt=this.h6,kt=this.h7,Lt=HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[vt>>28&15]+HEX_CHARS[vt>>24&15]+HEX_CHARS[vt>>20&15]+HEX_CHARS[vt>>16&15]+HEX_CHARS[vt>>12&15]+HEX_CHARS[vt>>8&15]+HEX_CHARS[vt>>4&15]+HEX_CHARS[vt&15]+HEX_CHARS[bt>>28&15]+HEX_CHARS[bt>>24&15]+HEX_CHARS[bt>>20&15]+HEX_CHARS[bt>>16&15]+HEX_CHARS[bt>>12&15]+HEX_CHARS[bt>>8&15]+HEX_CHARS[bt>>4&15]+HEX_CHARS[bt&15]+HEX_CHARS[wt>>28&15]+HEX_CHARS[wt>>24&15]+HEX_CHARS[wt>>20&15]+HEX_CHARS[wt>>16&15]+HEX_CHARS[wt>>12&15]+HEX_CHARS[wt>>8&15]+HEX_CHARS[wt>>4&15]+HEX_CHARS[wt&15]+HEX_CHARS[Tt>>28&15]+HEX_CHARS[Tt>>24&15]+HEX_CHARS[Tt>>20&15]+HEX_CHARS[Tt>>16&15]+HEX_CHARS[Tt>>12&15]+HEX_CHARS[Tt>>8&15]+HEX_CHARS[Tt>>4&15]+HEX_CHARS[Tt&15];return this.is224||(Lt+=HEX_CHARS[kt>>28&15]+HEX_CHARS[kt>>24&15]+HEX_CHARS[kt>>20&15]+HEX_CHARS[kt>>16&15]+HEX_CHARS[kt>>12&15]+HEX_CHARS[kt>>8&15]+HEX_CHARS[kt>>4&15]+HEX_CHARS[kt&15]),Lt},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,vt=this.h3,bt=this.h4,wt=this.h5,Tt=this.h6,kt=this.h7,Lt=[nt>>24&255,nt>>16&255,nt>>8&255,nt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255,it>>24&255,it>>16&255,it>>8&255,it&255,vt>>24&255,vt>>16&255,vt>>8&255,vt&255,bt>>24&255,bt>>16&255,bt>>8&255,bt&255,wt>>24&255,wt>>16&255,wt>>8&255,wt&255,Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255];return this.is224||Lt.push(kt>>24&255,kt>>16&255,kt>>8&255,kt&255),Lt},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(this.is224?28:32),rt=new DataView(nt);return rt.setUint32(0,this.h0),rt.setUint32(4,this.h1),rt.setUint32(8,this.h2),rt.setUint32(12,this.h3),rt.setUint32(16,this.h4),rt.setUint32(20,this.h5),rt.setUint32(24,this.h6),this.is224||rt.setUint32(28,this.h7),nt};function HmacSha256(nt,rt,it){var vt,bt=typeof nt;if(bt==="string"){var wt=[],Tt=nt.length,kt=0,Lt;for(vt=0;vt<Tt;++vt)Lt=nt.charCodeAt(vt),Lt<128?wt[kt++]=Lt:Lt<2048?(wt[kt++]=192|Lt>>6,wt[kt++]=128|Lt&63):Lt<55296||Lt>=57344?(wt[kt++]=224|Lt>>12,wt[kt++]=128|Lt>>6&63,wt[kt++]=128|Lt&63):(Lt=65536+((Lt&1023)<<10|nt.charCodeAt(++vt)&1023),wt[kt++]=240|Lt>>18,wt[kt++]=128|Lt>>12&63,wt[kt++]=128|Lt>>6&63,wt[kt++]=128|Lt&63);nt=wt}else if(bt==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);nt.length>64&&(nt=new Sha256(rt,!0).update(nt).array());var Mt=[],Nt=[];for(vt=0;vt<64;++vt){var zt=nt[vt]||0;Mt[vt]=92^zt,Nt[vt]=54^zt}Sha256.call(this,rt,it),this.update(Nt),this.oKeyPad=Mt,this.inner=!0,this.sharedMemory=it}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var nt=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(nt),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var md5$1={exports:{}};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt){return function(rt){return new Md5(!0).update(rt)[nt]()}},createMethod=function(){var nt=createOutputMethod("hex");NODE_JS&&(nt=nodeWrap(nt)),nt.create=function(){return new Md5},nt.update=function(vt){return nt.create().update(vt)};for(var rt=0;rt<OUTPUT_TYPES.length;++rt){var it=OUTPUT_TYPES[rt];nt[it]=createOutputMethod(it)}return nt},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash("md5").update(nt,"utf8").digest("hex");if(nt==null)throw ERROR;return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash("md5").update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod};function Md5(nt){if(nt)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var rt=new ArrayBuffer(68);this.buffer8=new Uint8Array(rt),this.blocks=new Uint32Array(rt)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw ERROR;if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw ERROR}else throw ERROR;rt=!0}for(var vt,bt=0,wt,Tt=nt.length,kt=this.blocks,Lt=this.buffer8;bt<Tt;){if(this.hashed&&(this.hashed=!1,kt[0]=kt[16],kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)if(ARRAY_BUFFER)for(wt=this.start;bt<Tt&&wt<64;++bt)Lt[wt++]=nt[bt];else for(wt=this.start;bt<Tt&&wt<64;++bt)kt[wt>>2]|=nt[bt]<<SHIFT[wt++&3];else if(ARRAY_BUFFER)for(wt=this.start;bt<Tt&&wt<64;++bt)vt=nt.charCodeAt(bt),vt<128?Lt[wt++]=vt:vt<2048?(Lt[wt++]=192|vt>>6,Lt[wt++]=128|vt&63):vt<55296||vt>=57344?(Lt[wt++]=224|vt>>12,Lt[wt++]=128|vt>>6&63,Lt[wt++]=128|vt&63):(vt=65536+((vt&1023)<<10|nt.charCodeAt(++bt)&1023),Lt[wt++]=240|vt>>18,Lt[wt++]=128|vt>>12&63,Lt[wt++]=128|vt>>6&63,Lt[wt++]=128|vt&63);else for(wt=this.start;bt<Tt&&wt<64;++bt)vt=nt.charCodeAt(bt),vt<128?kt[wt>>2]|=vt<<SHIFT[wt++&3]:vt<2048?(kt[wt>>2]|=(192|vt>>6)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt&63)<<SHIFT[wt++&3]):vt<55296||vt>=57344?(kt[wt>>2]|=(224|vt>>12)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt&63)<<SHIFT[wt++&3]):(vt=65536+((vt&1023)<<10|nt.charCodeAt(++bt)&1023),kt[wt>>2]|=(240|vt>>18)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt>>12&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt>>6&63)<<SHIFT[wt++&3],kt[wt>>2]|=(128|vt&63)<<SHIFT[wt++&3]);this.lastByteIndex=wt,this.bytes+=wt-this.start,wt>=64?(this.start=wt-64,this.hash(),this.hashed=!0):this.start=wt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[rt>>2]|=EXTRA[rt&3],rt>=56&&(this.hashed||this.hash(),nt[0]=nt[16],nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.bytes<<3,nt[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var nt,rt,it,vt,bt,wt,Tt=this.blocks;this.first?(nt=Tt[0]-680876937,nt=(nt<<7|nt>>>25)-271733879<<0,vt=(-1732584194^nt&2004318071)+Tt[1]-117830708,vt=(vt<<12|vt>>>20)+nt<<0,it=(-271733879^vt&(nt^-271733879))+Tt[2]-1126478375,it=(it<<17|it>>>15)+vt<<0,rt=(nt^it&(vt^nt))+Tt[3]-1316259209,rt=(rt<<22|rt>>>10)+it<<0):(nt=this.h0,rt=this.h1,it=this.h2,vt=this.h3,nt+=(vt^rt&(it^vt))+Tt[0]-680876936,nt=(nt<<7|nt>>>25)+rt<<0,vt+=(it^nt&(rt^it))+Tt[1]-389564586,vt=(vt<<12|vt>>>20)+nt<<0,it+=(rt^vt&(nt^rt))+Tt[2]+606105819,it=(it<<17|it>>>15)+vt<<0,rt+=(nt^it&(vt^nt))+Tt[3]-1044525330,rt=(rt<<22|rt>>>10)+it<<0),nt+=(vt^rt&(it^vt))+Tt[4]-176418897,nt=(nt<<7|nt>>>25)+rt<<0,vt+=(it^nt&(rt^it))+Tt[5]+1200080426,vt=(vt<<12|vt>>>20)+nt<<0,it+=(rt^vt&(nt^rt))+Tt[6]-1473231341,it=(it<<17|it>>>15)+vt<<0,rt+=(nt^it&(vt^nt))+Tt[7]-45705983,rt=(rt<<22|rt>>>10)+it<<0,nt+=(vt^rt&(it^vt))+Tt[8]+1770035416,nt=(nt<<7|nt>>>25)+rt<<0,vt+=(it^nt&(rt^it))+Tt[9]-1958414417,vt=(vt<<12|vt>>>20)+nt<<0,it+=(rt^vt&(nt^rt))+Tt[10]-42063,it=(it<<17|it>>>15)+vt<<0,rt+=(nt^it&(vt^nt))+Tt[11]-1990404162,rt=(rt<<22|rt>>>10)+it<<0,nt+=(vt^rt&(it^vt))+Tt[12]+1804603682,nt=(nt<<7|nt>>>25)+rt<<0,vt+=(it^nt&(rt^it))+Tt[13]-40341101,vt=(vt<<12|vt>>>20)+nt<<0,it+=(rt^vt&(nt^rt))+Tt[14]-1502002290,it=(it<<17|it>>>15)+vt<<0,rt+=(nt^it&(vt^nt))+Tt[15]+1236535329,rt=(rt<<22|rt>>>10)+it<<0,nt+=(it^vt&(rt^it))+Tt[1]-165796510,nt=(nt<<5|nt>>>27)+rt<<0,vt+=(rt^it&(nt^rt))+Tt[6]-1069501632,vt=(vt<<9|vt>>>23)+nt<<0,it+=(nt^rt&(vt^nt))+Tt[11]+643717713,it=(it<<14|it>>>18)+vt<<0,rt+=(vt^nt&(it^vt))+Tt[0]-373897302,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^vt&(rt^it))+Tt[5]-701558691,nt=(nt<<5|nt>>>27)+rt<<0,vt+=(rt^it&(nt^rt))+Tt[10]+38016083,vt=(vt<<9|vt>>>23)+nt<<0,it+=(nt^rt&(vt^nt))+Tt[15]-660478335,it=(it<<14|it>>>18)+vt<<0,rt+=(vt^nt&(it^vt))+Tt[4]-405537848,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^vt&(rt^it))+Tt[9]+568446438,nt=(nt<<5|nt>>>27)+rt<<0,vt+=(rt^it&(nt^rt))+Tt[14]-1019803690,vt=(vt<<9|vt>>>23)+nt<<0,it+=(nt^rt&(vt^nt))+Tt[3]-187363961,it=(it<<14|it>>>18)+vt<<0,rt+=(vt^nt&(it^vt))+Tt[8]+1163531501,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^vt&(rt^it))+Tt[13]-1444681467,nt=(nt<<5|nt>>>27)+rt<<0,vt+=(rt^it&(nt^rt))+Tt[2]-51403784,vt=(vt<<9|vt>>>23)+nt<<0,it+=(nt^rt&(vt^nt))+Tt[7]+1735328473,it=(it<<14|it>>>18)+vt<<0,rt+=(vt^nt&(it^vt))+Tt[12]-1926607734,rt=(rt<<20|rt>>>12)+it<<0,bt=rt^it,nt+=(bt^vt)+Tt[5]-378558,nt=(nt<<4|nt>>>28)+rt<<0,vt+=(bt^nt)+Tt[8]-2022574463,vt=(vt<<11|vt>>>21)+nt<<0,wt=vt^nt,it+=(wt^rt)+Tt[11]+1839030562,it=(it<<16|it>>>16)+vt<<0,rt+=(wt^it)+Tt[14]-35309556,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^vt)+Tt[1]-1530992060,nt=(nt<<4|nt>>>28)+rt<<0,vt+=(bt^nt)+Tt[4]+1272893353,vt=(vt<<11|vt>>>21)+nt<<0,wt=vt^nt,it+=(wt^rt)+Tt[7]-155497632,it=(it<<16|it>>>16)+vt<<0,rt+=(wt^it)+Tt[10]-1094730640,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^vt)+Tt[13]+681279174,nt=(nt<<4|nt>>>28)+rt<<0,vt+=(bt^nt)+Tt[0]-358537222,vt=(vt<<11|vt>>>21)+nt<<0,wt=vt^nt,it+=(wt^rt)+Tt[3]-722521979,it=(it<<16|it>>>16)+vt<<0,rt+=(wt^it)+Tt[6]+76029189,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^vt)+Tt[9]-640364487,nt=(nt<<4|nt>>>28)+rt<<0,vt+=(bt^nt)+Tt[12]-421815835,vt=(vt<<11|vt>>>21)+nt<<0,wt=vt^nt,it+=(wt^rt)+Tt[15]+530742520,it=(it<<16|it>>>16)+vt<<0,rt+=(wt^it)+Tt[2]-995338651,rt=(rt<<23|rt>>>9)+it<<0,nt+=(it^(rt|~vt))+Tt[0]-198630844,nt=(nt<<6|nt>>>26)+rt<<0,vt+=(rt^(nt|~it))+Tt[7]+1126891415,vt=(vt<<10|vt>>>22)+nt<<0,it+=(nt^(vt|~rt))+Tt[14]-1416354905,it=(it<<15|it>>>17)+vt<<0,rt+=(vt^(it|~nt))+Tt[5]-57434055,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~vt))+Tt[12]+1700485571,nt=(nt<<6|nt>>>26)+rt<<0,vt+=(rt^(nt|~it))+Tt[3]-1894986606,vt=(vt<<10|vt>>>22)+nt<<0,it+=(nt^(vt|~rt))+Tt[10]-1051523,it=(it<<15|it>>>17)+vt<<0,rt+=(vt^(it|~nt))+Tt[1]-2054922799,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~vt))+Tt[8]+1873313359,nt=(nt<<6|nt>>>26)+rt<<0,vt+=(rt^(nt|~it))+Tt[15]-30611744,vt=(vt<<10|vt>>>22)+nt<<0,it+=(nt^(vt|~rt))+Tt[6]-1560198380,it=(it<<15|it>>>17)+vt<<0,rt+=(vt^(it|~nt))+Tt[13]+1309151649,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~vt))+Tt[4]-145523070,nt=(nt<<6|nt>>>26)+rt<<0,vt+=(rt^(nt|~it))+Tt[11]-1120210379,vt=(vt<<10|vt>>>22)+nt<<0,it+=(nt^(vt|~rt))+Tt[2]+718787259,it=(it<<15|it>>>17)+vt<<0,rt+=(vt^(it|~nt))+Tt[9]-343485551,rt=(rt<<21|rt>>>11)+it<<0,this.first?(this.h0=nt+1732584193<<0,this.h1=rt-271733879<<0,this.h2=it-1732584194<<0,this.h3=vt+271733878<<0,this.first=!1):(this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+vt<<0)},Md5.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,vt=this.h3;return HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[vt>>4&15]+HEX_CHARS[vt&15]+HEX_CHARS[vt>>12&15]+HEX_CHARS[vt>>8&15]+HEX_CHARS[vt>>20&15]+HEX_CHARS[vt>>16&15]+HEX_CHARS[vt>>28&15]+HEX_CHARS[vt>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,vt=this.h3;return[nt&255,nt>>8&255,nt>>16&255,nt>>24&255,rt&255,rt>>8&255,rt>>16&255,rt>>24&255,it&255,it>>8&255,it>>16&255,it>>24&255,vt&255,vt>>8&255,vt>>16&255,vt>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(16),rt=new Uint32Array(nt);return rt[0]=this.h0,rt[1]=this.h1,rt[2]=this.h2,rt[3]=this.h3,nt},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var nt,rt,it,vt="",bt=this.array(),wt=0;wt<15;)nt=bt[wt++],rt=bt[wt++],it=bt[wt++],vt+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[(nt<<4|rt>>>4)&63]+BASE64_ENCODE_CHAR[(rt<<2|it>>>6)&63]+BASE64_ENCODE_CHAR[it&63];return nt=bt[wt],vt+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[nt<<4&63]+"==",vt};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);const md5=md5$1.exports;var top$2="top",bottom$1="bottom",right$1="right",left$1="left",auto="auto",basePlacements=[top$2,bottom$1,right$1,left$1],start$2="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,rt){return nt.concat([rt+"-"+start$2,rt+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,rt){return nt.concat([rt,rt+"-"+start$2,rt+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main$1="main",afterMain="afterMain",beforeWrite="beforeWrite",write$1="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main$1,afterMain,beforeWrite,write$1,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function isElement$1(nt){var rt=getWindow(nt).Element;return nt instanceof rt||nt instanceof Element}function isHTMLElement(nt){var rt=getWindow(nt).HTMLElement;return nt instanceof rt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var rt=getWindow(nt).ShadowRoot;return nt instanceof rt||nt instanceof ShadowRoot}function applyStyles(nt){var rt=nt.state;Object.keys(rt.elements).forEach(function(it){var vt=rt.styles[it]||{},bt=rt.attributes[it]||{},wt=rt.elements[it];!isHTMLElement(wt)||!getNodeName(wt)||(Object.assign(wt.style,vt),Object.keys(bt).forEach(function(Tt){var kt=bt[Tt];kt===!1?wt.removeAttribute(Tt):wt.setAttribute(Tt,kt===!0?"":kt)}))})}function effect$2(nt){var rt=nt.state,it={popper:{position:rt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(rt.elements.popper.style,it.popper),rt.styles=it,rt.elements.arrow&&Object.assign(rt.elements.arrow.style,it.arrow),function(){Object.keys(rt.elements).forEach(function(vt){var bt=rt.elements[vt],wt=rt.attributes[vt]||{},Tt=Object.keys(rt.styles.hasOwnProperty(vt)?rt.styles[vt]:it[vt]),kt=Tt.reduce(function(Lt,Mt){return Lt[Mt]="",Lt},{});!isHTMLElement(bt)||!getNodeName(bt)||(Object.assign(bt.style,kt),Object.keys(wt).forEach(function(Lt){bt.removeAttribute(Lt)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(nt){return nt.split("-")[0]}var max$3=Math.max,min$3=Math.min,round=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands?nt.brands.map(function(rt){return rt.brand+"/"+rt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!1);var vt=nt.getBoundingClientRect(),bt=1,wt=1;rt&&isHTMLElement(nt)&&(bt=nt.offsetWidth>0&&round(vt.width)/nt.offsetWidth||1,wt=nt.offsetHeight>0&&round(vt.height)/nt.offsetHeight||1);var Tt=isElement$1(nt)?getWindow(nt):window,kt=Tt.visualViewport,Lt=!isLayoutViewport()&&it,Mt=(vt.left+(Lt&&kt?kt.offsetLeft:0))/bt,Nt=(vt.top+(Lt&&kt?kt.offsetTop:0))/wt,zt=vt.width/bt,Ht=vt.height/wt;return{width:zt,height:Ht,top:Nt,right:Mt+zt,bottom:Nt+Ht,left:Mt,x:Mt,y:Nt}}function getLayoutRect(nt){var rt=getBoundingClientRect(nt),it=nt.offsetWidth,vt=nt.offsetHeight;return Math.abs(rt.width-it)<=1&&(it=rt.width),Math.abs(rt.height-vt)<=1&&(vt=rt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:it,height:vt}}function contains(nt,rt){var it=rt.getRootNode&&rt.getRootNode();if(nt.contains(rt))return!0;if(it&&isShadowRoot(it)){var vt=rt;do{if(vt&&nt.isSameNode(vt))return!0;vt=vt.parentNode||vt.host}while(vt)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement$1(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var rt=/firefox/i.test(getUAString()),it=/Trident/i.test(getUAString());if(it&&isHTMLElement(nt)){var vt=getComputedStyle$1(nt);if(vt.position==="fixed")return null}var bt=getParentNode(nt);for(isShadowRoot(bt)&&(bt=bt.host);isHTMLElement(bt)&&["html","body"].indexOf(getNodeName(bt))<0;){var wt=getComputedStyle$1(bt);if(wt.transform!=="none"||wt.perspective!=="none"||wt.contain==="paint"||["transform","perspective"].indexOf(wt.willChange)!==-1||rt&&wt.willChange==="filter"||rt&&wt.filter&&wt.filter!=="none")return bt;bt=bt.parentNode}return null}function getOffsetParent(nt){for(var rt=getWindow(nt),it=getTrueOffsetParent(nt);it&&isTableElement(it)&&getComputedStyle$1(it).position==="static";)it=getTrueOffsetParent(it);return it&&(getNodeName(it)==="html"||getNodeName(it)==="body"&&getComputedStyle$1(it).position==="static")?rt:it||getContainingBlock(nt)||rt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,rt,it){return max$3(nt,min$3(rt,it))}function withinMaxClamp(nt,rt,it){var vt=within(nt,rt,it);return vt>it?it:vt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,rt){return rt.reduce(function(it,vt){return it[vt]=nt,it},{})}var toPaddingObject=function nt(rt,it){return rt=typeof rt=="function"?rt(Object.assign({},it.rects,{placement:it.placement})):rt,mergePaddingObject(typeof rt!="number"?rt:expandToHashMap(rt,basePlacements))};function arrow(nt){var rt,it=nt.state,vt=nt.name,bt=nt.options,wt=it.elements.arrow,Tt=it.modifiersData.popperOffsets,kt=getBasePlacement$1(it.placement),Lt=getMainAxisFromPlacement(kt),Mt=[left$1,right$1].indexOf(kt)>=0,Nt=Mt?"height":"width";if(!(!wt||!Tt)){var zt=toPaddingObject(bt.padding,it),Ht=getLayoutRect(wt),Wt=Lt==="y"?top$2:left$1,Zt=Lt==="y"?bottom$1:right$1,tn=it.rects.reference[Nt]+it.rects.reference[Lt]-Tt[Lt]-it.rects.popper[Nt],Yt=Tt[Lt]-it.rects.reference[Lt],nn=getOffsetParent(wt),rn=nn?Lt==="y"?nn.clientHeight||0:nn.clientWidth||0:0,ln=tn/2-Yt/2,sn=zt[Wt],mn=rn-Ht[Nt]-zt[Zt],wn=rn/2-Ht[Nt]/2+ln,Cn=within(sn,wn,mn),An=Lt;it.modifiersData[vt]=(rt={},rt[An]=Cn,rt.centerOffset=Cn-wn,rt)}}function effect$1(nt){var rt=nt.state,it=nt.options,vt=it.element,bt=vt===void 0?"[data-popper-arrow]":vt;bt!=null&&(typeof bt=="string"&&(bt=rt.elements.popper.querySelector(bt),!bt)||!contains(rt.elements.popper,bt)||(rt.elements.arrow=bt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt){var rt=nt.x,it=nt.y,vt=window,bt=vt.devicePixelRatio||1;return{x:round(rt*bt)/bt||0,y:round(it*bt)/bt||0}}function mapToStyles(nt){var rt,it=nt.popper,vt=nt.popperRect,bt=nt.placement,wt=nt.variation,Tt=nt.offsets,kt=nt.position,Lt=nt.gpuAcceleration,Mt=nt.adaptive,Nt=nt.roundOffsets,zt=nt.isFixed,Ht=Tt.x,Wt=Ht===void 0?0:Ht,Zt=Tt.y,tn=Zt===void 0?0:Zt,Yt=typeof Nt=="function"?Nt({x:Wt,y:tn}):{x:Wt,y:tn};Wt=Yt.x,tn=Yt.y;var nn=Tt.hasOwnProperty("x"),rn=Tt.hasOwnProperty("y"),ln=left$1,sn=top$2,mn=window;if(Mt){var wn=getOffsetParent(it),Cn="clientHeight",An="clientWidth";if(wn===getWindow(it)&&(wn=getDocumentElement(it),getComputedStyle$1(wn).position!=="static"&&kt==="absolute"&&(Cn="scrollHeight",An="scrollWidth")),wn=wn,bt===top$2||(bt===left$1||bt===right$1)&&wt===end$1){sn=bottom$1;var Pn=zt&&wn===mn&&mn.visualViewport?mn.visualViewport.height:wn[Cn];tn-=Pn-vt.height,tn*=Lt?1:-1}if(bt===left$1||(bt===top$2||bt===bottom$1)&&wt===end$1){ln=right$1;var On=zt&&wn===mn&&mn.visualViewport?mn.visualViewport.width:wn[An];Wt-=On-vt.width,Wt*=Lt?1:-1}}var kn=Object.assign({position:kt},Mt&&unsetSides),gn=Nt===!0?roundOffsetsByDPR({x:Wt,y:tn}):{x:Wt,y:tn};if(Wt=gn.x,tn=gn.y,Lt){var Vn;return Object.assign({},kn,(Vn={},Vn[sn]=rn?"0":"",Vn[ln]=nn?"0":"",Vn.transform=(mn.devicePixelRatio||1)<=1?"translate("+Wt+"px, "+tn+"px)":"translate3d("+Wt+"px, "+tn+"px, 0)",Vn))}return Object.assign({},kn,(rt={},rt[sn]=rn?tn+"px":"",rt[ln]=nn?Wt+"px":"",rt.transform="",rt))}function computeStyles(nt){var rt=nt.state,it=nt.options,vt=it.gpuAcceleration,bt=vt===void 0?!0:vt,wt=it.adaptive,Tt=wt===void 0?!0:wt,kt=it.roundOffsets,Lt=kt===void 0?!0:kt,Mt={placement:getBasePlacement$1(rt.placement),variation:getVariation(rt.placement),popper:rt.elements.popper,popperRect:rt.rects.popper,gpuAcceleration:bt,isFixed:rt.options.strategy==="fixed"};rt.modifiersData.popperOffsets!=null&&(rt.styles.popper=Object.assign({},rt.styles.popper,mapToStyles(Object.assign({},Mt,{offsets:rt.modifiersData.popperOffsets,position:rt.options.strategy,adaptive:Tt,roundOffsets:Lt})))),rt.modifiersData.arrow!=null&&(rt.styles.arrow=Object.assign({},rt.styles.arrow,mapToStyles(Object.assign({},Mt,{offsets:rt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Lt})))),rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-placement":rt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var rt=nt.state,it=nt.instance,vt=nt.options,bt=vt.scroll,wt=bt===void 0?!0:bt,Tt=vt.resize,kt=Tt===void 0?!0:Tt,Lt=getWindow(rt.elements.popper),Mt=[].concat(rt.scrollParents.reference,rt.scrollParents.popper);return wt&&Mt.forEach(function(Nt){Nt.addEventListener("scroll",it.update,passive)}),kt&&Lt.addEventListener("resize",it.update,passive),function(){wt&&Mt.forEach(function(Nt){Nt.removeEventListener("scroll",it.update,passive)}),kt&&Lt.removeEventListener("resize",it.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function nt(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(rt){return hash$1[rt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(rt){return hash[rt]})}function getWindowScroll(nt){var rt=getWindow(nt),it=rt.pageXOffset,vt=rt.pageYOffset;return{scrollLeft:it,scrollTop:vt}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,rt){var it=getWindow(nt),vt=getDocumentElement(nt),bt=it.visualViewport,wt=vt.clientWidth,Tt=vt.clientHeight,kt=0,Lt=0;if(bt){wt=bt.width,Tt=bt.height;var Mt=isLayoutViewport();(Mt||!Mt&&rt==="fixed")&&(kt=bt.offsetLeft,Lt=bt.offsetTop)}return{width:wt,height:Tt,x:kt+getWindowScrollBarX(nt),y:Lt}}function getDocumentRect(nt){var rt,it=getDocumentElement(nt),vt=getWindowScroll(nt),bt=(rt=nt.ownerDocument)==null?void 0:rt.body,wt=max$3(it.scrollWidth,it.clientWidth,bt?bt.scrollWidth:0,bt?bt.clientWidth:0),Tt=max$3(it.scrollHeight,it.clientHeight,bt?bt.scrollHeight:0,bt?bt.clientHeight:0),kt=-vt.scrollLeft+getWindowScrollBarX(nt),Lt=-vt.scrollTop;return getComputedStyle$1(bt||it).direction==="rtl"&&(kt+=max$3(it.clientWidth,bt?bt.clientWidth:0)-wt),{width:wt,height:Tt,x:kt,y:Lt}}function isScrollParent(nt){var rt=getComputedStyle$1(nt),it=rt.overflow,vt=rt.overflowX,bt=rt.overflowY;return/auto|scroll|overlay|hidden/.test(it+bt+vt)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,rt){var it;rt===void 0&&(rt=[]);var vt=getScrollParent(nt),bt=vt===((it=nt.ownerDocument)==null?void 0:it.body),wt=getWindow(vt),Tt=bt?[wt].concat(wt.visualViewport||[],isScrollParent(vt)?vt:[]):vt,kt=rt.concat(Tt);return bt?kt:kt.concat(listScrollParents(getParentNode(Tt)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,rt){var it=getBoundingClientRect(nt,!1,rt==="fixed");return it.top=it.top+nt.clientTop,it.left=it.left+nt.clientLeft,it.bottom=it.top+nt.clientHeight,it.right=it.left+nt.clientWidth,it.width=nt.clientWidth,it.height=nt.clientHeight,it.x=it.left,it.y=it.top,it}function getClientRectFromMixedType(nt,rt,it){return rt===viewport?rectToClientRect(getViewportRect(nt,it)):isElement$1(rt)?getInnerBoundingClientRect(rt,it):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var rt=listScrollParents(getParentNode(nt)),it=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,vt=it&&isHTMLElement(nt)?getOffsetParent(nt):nt;return isElement$1(vt)?rt.filter(function(bt){return isElement$1(bt)&&contains(bt,vt)&&getNodeName(bt)!=="body"}):[]}function getClippingRect(nt,rt,it,vt){var bt=rt==="clippingParents"?getClippingParents(nt):[].concat(rt),wt=[].concat(bt,[it]),Tt=wt[0],kt=wt.reduce(function(Lt,Mt){var Nt=getClientRectFromMixedType(nt,Mt,vt);return Lt.top=max$3(Nt.top,Lt.top),Lt.right=min$3(Nt.right,Lt.right),Lt.bottom=min$3(Nt.bottom,Lt.bottom),Lt.left=max$3(Nt.left,Lt.left),Lt},getClientRectFromMixedType(nt,Tt,vt));return kt.width=kt.right-kt.left,kt.height=kt.bottom-kt.top,kt.x=kt.left,kt.y=kt.top,kt}function computeOffsets(nt){var rt=nt.reference,it=nt.element,vt=nt.placement,bt=vt?getBasePlacement$1(vt):null,wt=vt?getVariation(vt):null,Tt=rt.x+rt.width/2-it.width/2,kt=rt.y+rt.height/2-it.height/2,Lt;switch(bt){case top$2:Lt={x:Tt,y:rt.y-it.height};break;case bottom$1:Lt={x:Tt,y:rt.y+rt.height};break;case right$1:Lt={x:rt.x+rt.width,y:kt};break;case left$1:Lt={x:rt.x-it.width,y:kt};break;default:Lt={x:rt.x,y:rt.y}}var Mt=bt?getMainAxisFromPlacement(bt):null;if(Mt!=null){var Nt=Mt==="y"?"height":"width";switch(wt){case start$2:Lt[Mt]=Lt[Mt]-(rt[Nt]/2-it[Nt]/2);break;case end$1:Lt[Mt]=Lt[Mt]+(rt[Nt]/2-it[Nt]/2);break}}return Lt}function detectOverflow(nt,rt){rt===void 0&&(rt={});var it=rt,vt=it.placement,bt=vt===void 0?nt.placement:vt,wt=it.strategy,Tt=wt===void 0?nt.strategy:wt,kt=it.boundary,Lt=kt===void 0?clippingParents:kt,Mt=it.rootBoundary,Nt=Mt===void 0?viewport:Mt,zt=it.elementContext,Ht=zt===void 0?popper:zt,Wt=it.altBoundary,Zt=Wt===void 0?!1:Wt,tn=it.padding,Yt=tn===void 0?0:tn,nn=mergePaddingObject(typeof Yt!="number"?Yt:expandToHashMap(Yt,basePlacements)),rn=Ht===popper?reference:popper,ln=nt.rects.popper,sn=nt.elements[Zt?rn:Ht],mn=getClippingRect(isElement$1(sn)?sn:sn.contextElement||getDocumentElement(nt.elements.popper),Lt,Nt,Tt),wn=getBoundingClientRect(nt.elements.reference),Cn=computeOffsets({reference:wn,element:ln,strategy:"absolute",placement:bt}),An=rectToClientRect(Object.assign({},ln,Cn)),Pn=Ht===popper?An:wn,On={top:mn.top-Pn.top+nn.top,bottom:Pn.bottom-mn.bottom+nn.bottom,left:mn.left-Pn.left+nn.left,right:Pn.right-mn.right+nn.right},kn=nt.modifiersData.offset;if(Ht===popper&&kn){var gn=kn[bt];Object.keys(On).forEach(function(Vn){var pn=[right$1,bottom$1].indexOf(Vn)>=0?1:-1,pr=[top$2,bottom$1].indexOf(Vn)>=0?"y":"x";On[Vn]+=gn[pr]*pn})}return On}function computeAutoPlacement(nt,rt){rt===void 0&&(rt={});var it=rt,vt=it.placement,bt=it.boundary,wt=it.rootBoundary,Tt=it.padding,kt=it.flipVariations,Lt=it.allowedAutoPlacements,Mt=Lt===void 0?placements:Lt,Nt=getVariation(vt),zt=Nt?kt?variationPlacements:variationPlacements.filter(function(Zt){return getVariation(Zt)===Nt}):basePlacements,Ht=zt.filter(function(Zt){return Mt.indexOf(Zt)>=0});Ht.length===0&&(Ht=zt);var Wt=Ht.reduce(function(Zt,tn){return Zt[tn]=detectOverflow(nt,{placement:tn,boundary:bt,rootBoundary:wt,padding:Tt})[getBasePlacement$1(tn)],Zt},{});return Object.keys(Wt).sort(function(Zt,tn){return Wt[Zt]-Wt[tn]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement$1(nt)===auto)return[];var rt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),rt,getOppositeVariationPlacement(rt)]}function flip(nt){var rt=nt.state,it=nt.options,vt=nt.name;if(!rt.modifiersData[vt]._skip){for(var bt=it.mainAxis,wt=bt===void 0?!0:bt,Tt=it.altAxis,kt=Tt===void 0?!0:Tt,Lt=it.fallbackPlacements,Mt=it.padding,Nt=it.boundary,zt=it.rootBoundary,Ht=it.altBoundary,Wt=it.flipVariations,Zt=Wt===void 0?!0:Wt,tn=it.allowedAutoPlacements,Yt=rt.options.placement,nn=getBasePlacement$1(Yt),rn=nn===Yt,ln=Lt||(rn||!Zt?[getOppositePlacement(Yt)]:getExpandedFallbackPlacements(Yt)),sn=[Yt].concat(ln).reduce(function(Or,Ar){return Or.concat(getBasePlacement$1(Ar)===auto?computeAutoPlacement(rt,{placement:Ar,boundary:Nt,rootBoundary:zt,padding:Mt,flipVariations:Zt,allowedAutoPlacements:tn}):Ar)},[]),mn=rt.rects.reference,wn=rt.rects.popper,Cn=new Map,An=!0,Pn=sn[0],On=0;On<sn.length;On++){var kn=sn[On],gn=getBasePlacement$1(kn),Vn=getVariation(kn)===start$2,pn=[top$2,bottom$1].indexOf(gn)>=0,pr=pn?"width":"height",yn=detectOverflow(rt,{placement:kn,boundary:Nt,rootBoundary:zt,altBoundary:Ht,padding:Mt}),mr=pn?Vn?right$1:left$1:Vn?bottom$1:top$2;mn[pr]>wn[pr]&&(mr=getOppositePlacement(mr));var Er=getOppositePlacement(mr),Mr=[];if(wt&&Mr.push(yn[gn]<=0),kt&&Mr.push(yn[mr]<=0,yn[Er]<=0),Mr.every(function(Or){return Or})){Pn=kn,An=!1;break}Cn.set(kn,Mr)}if(An)for(var rr=Zt?3:1,vr=function(Ar){var sr=sn.find(function(ii){var ar=Cn.get(ii);if(ar)return ar.slice(0,Ar).every(function(fr){return fr})});if(sr)return Pn=sr,"break"},cr=rr;cr>0;cr--){var gr=vr(cr);if(gr==="break")break}rt.placement!==Pn&&(rt.modifiersData[vt]._skip=!0,rt.placement=Pn,rt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,rt,it){return it===void 0&&(it={x:0,y:0}),{top:nt.top-rt.height-it.y,right:nt.right-rt.width+it.x,bottom:nt.bottom-rt.height+it.y,left:nt.left-rt.width-it.x}}function isAnySideFullyClipped(nt){return[top$2,right$1,bottom$1,left$1].some(function(rt){return nt[rt]>=0})}function hide(nt){var rt=nt.state,it=nt.name,vt=rt.rects.reference,bt=rt.rects.popper,wt=rt.modifiersData.preventOverflow,Tt=detectOverflow(rt,{elementContext:"reference"}),kt=detectOverflow(rt,{altBoundary:!0}),Lt=getSideOffsets(Tt,vt),Mt=getSideOffsets(kt,bt,wt),Nt=isAnySideFullyClipped(Lt),zt=isAnySideFullyClipped(Mt);rt.modifiersData[it]={referenceClippingOffsets:Lt,popperEscapeOffsets:Mt,isReferenceHidden:Nt,hasPopperEscaped:zt},rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-reference-hidden":Nt,"data-popper-escaped":zt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,rt,it){var vt=getBasePlacement$1(nt),bt=[left$1,top$2].indexOf(vt)>=0?-1:1,wt=typeof it=="function"?it(Object.assign({},rt,{placement:nt})):it,Tt=wt[0],kt=wt[1];return Tt=Tt||0,kt=(kt||0)*bt,[left$1,right$1].indexOf(vt)>=0?{x:kt,y:Tt}:{x:Tt,y:kt}}function offset$1(nt){var rt=nt.state,it=nt.options,vt=nt.name,bt=it.offset,wt=bt===void 0?[0,0]:bt,Tt=placements.reduce(function(Nt,zt){return Nt[zt]=distanceAndSkiddingToXY(zt,rt.rects,wt),Nt},{}),kt=Tt[rt.placement],Lt=kt.x,Mt=kt.y;rt.modifiersData.popperOffsets!=null&&(rt.modifiersData.popperOffsets.x+=Lt,rt.modifiersData.popperOffsets.y+=Mt),rt.modifiersData[vt]=Tt}const offset$2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset$1};function popperOffsets(nt){var rt=nt.state,it=nt.name;rt.modifiersData[it]=computeOffsets({reference:rt.rects.reference,element:rt.rects.popper,strategy:"absolute",placement:rt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var rt=nt.state,it=nt.options,vt=nt.name,bt=it.mainAxis,wt=bt===void 0?!0:bt,Tt=it.altAxis,kt=Tt===void 0?!1:Tt,Lt=it.boundary,Mt=it.rootBoundary,Nt=it.altBoundary,zt=it.padding,Ht=it.tether,Wt=Ht===void 0?!0:Ht,Zt=it.tetherOffset,tn=Zt===void 0?0:Zt,Yt=detectOverflow(rt,{boundary:Lt,rootBoundary:Mt,padding:zt,altBoundary:Nt}),nn=getBasePlacement$1(rt.placement),rn=getVariation(rt.placement),ln=!rn,sn=getMainAxisFromPlacement(nn),mn=getAltAxis(sn),wn=rt.modifiersData.popperOffsets,Cn=rt.rects.reference,An=rt.rects.popper,Pn=typeof tn=="function"?tn(Object.assign({},rt.rects,{placement:rt.placement})):tn,On=typeof Pn=="number"?{mainAxis:Pn,altAxis:Pn}:Object.assign({mainAxis:0,altAxis:0},Pn),kn=rt.modifiersData.offset?rt.modifiersData.offset[rt.placement]:null,gn={x:0,y:0};if(!!wn){if(wt){var Vn,pn=sn==="y"?top$2:left$1,pr=sn==="y"?bottom$1:right$1,yn=sn==="y"?"height":"width",mr=wn[sn],Er=mr+Yt[pn],Mr=mr-Yt[pr],rr=Wt?-An[yn]/2:0,vr=rn===start$2?Cn[yn]:An[yn],cr=rn===start$2?-An[yn]:-Cn[yn],gr=rt.elements.arrow,Or=Wt&&gr?getLayoutRect(gr):{width:0,height:0},Ar=rt.modifiersData["arrow#persistent"]?rt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),sr=Ar[pn],ii=Ar[pr],ar=within(0,Cn[yn],Or[yn]),fr=ln?Cn[yn]/2-rr-ar-sr-On.mainAxis:vr-ar-sr-On.mainAxis,wr=ln?-Cn[yn]/2+rr+ar+ii+On.mainAxis:cr+ar+ii+On.mainAxis,ir=rt.elements.arrow&&getOffsetParent(rt.elements.arrow),Ln=ir?sn==="y"?ir.clientTop||0:ir.clientLeft||0:0,en=(Vn=kn==null?void 0:kn[sn])!=null?Vn:0,dn=mr+fr-en-Ln,un=mr+wr-en,Nn=within(Wt?min$3(Er,dn):Er,mr,Wt?max$3(Mr,un):Mr);wn[sn]=Nn,gn[sn]=Nn-mr}if(kt){var In,lr=sn==="x"?top$2:left$1,$n=sn==="x"?bottom$1:right$1,Qn=wn[mn],Wn=mn==="y"?"height":"width",or=Qn+Yt[lr],dr=Qn-Yt[$n],kr=[top$2,left$1].indexOf(nn)!==-1,br=(In=kn==null?void 0:kn[mn])!=null?In:0,_r=kr?or:Qn-Cn[Wn]-An[Wn]-br+On.altAxis,hi=kr?Qn+Cn[Wn]+An[Wn]-br-On.altAxis:dr,di=Wt&&kr?withinMaxClamp(_r,Qn,hi):within(Wt?_r:or,Qn,Wt?hi:dr);wn[mn]=di,gn[mn]=di-Qn}rt.modifiersData[vt]=gn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var rt=nt.getBoundingClientRect(),it=round(rt.width)/nt.offsetWidth||1,vt=round(rt.height)/nt.offsetHeight||1;return it!==1||vt!==1}function getCompositeRect(nt,rt,it){it===void 0&&(it=!1);var vt=isHTMLElement(rt),bt=isHTMLElement(rt)&&isElementScaled(rt),wt=getDocumentElement(rt),Tt=getBoundingClientRect(nt,bt,it),kt={scrollLeft:0,scrollTop:0},Lt={x:0,y:0};return(vt||!vt&&!it)&&((getNodeName(rt)!=="body"||isScrollParent(wt))&&(kt=getNodeScroll(rt)),isHTMLElement(rt)?(Lt=getBoundingClientRect(rt,!0),Lt.x+=rt.clientLeft,Lt.y+=rt.clientTop):wt&&(Lt.x=getWindowScrollBarX(wt))),{x:Tt.left+kt.scrollLeft-Lt.x,y:Tt.top+kt.scrollTop-Lt.y,width:Tt.width,height:Tt.height}}function order$1(nt){var rt=new Map,it=new Set,vt=[];nt.forEach(function(wt){rt.set(wt.name,wt)});function bt(wt){it.add(wt.name);var Tt=[].concat(wt.requires||[],wt.requiresIfExists||[]);Tt.forEach(function(kt){if(!it.has(kt)){var Lt=rt.get(kt);Lt&&bt(Lt)}}),vt.push(wt)}return nt.forEach(function(wt){it.has(wt.name)||bt(wt)}),vt}function orderModifiers(nt){var rt=order$1(nt);return modifierPhases.reduce(function(it,vt){return it.concat(rt.filter(function(bt){return bt.phase===vt}))},[])}function debounce$1(nt){var rt;return function(){return rt||(rt=new Promise(function(it){Promise.resolve().then(function(){rt=void 0,it(nt())})})),rt}}function mergeByName(nt){var rt=nt.reduce(function(it,vt){var bt=it[vt.name];return it[vt.name]=bt?Object.assign({},bt,vt,{options:Object.assign({},bt.options,vt.options),data:Object.assign({},bt.data,vt.data)}):vt,it},{});return Object.keys(rt).map(function(it){return rt[it]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return!rt.some(function(vt){return!(vt&&typeof vt.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var rt=nt,it=rt.defaultModifiers,vt=it===void 0?[]:it,bt=rt.defaultOptions,wt=bt===void 0?DEFAULT_OPTIONS:bt;return function(kt,Lt,Mt){Mt===void 0&&(Mt=wt);var Nt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,wt),modifiersData:{},elements:{reference:kt,popper:Lt},attributes:{},styles:{}},zt=[],Ht=!1,Wt={state:Nt,setOptions:function(nn){var rn=typeof nn=="function"?nn(Nt.options):nn;tn(),Nt.options=Object.assign({},wt,Nt.options,rn),Nt.scrollParents={reference:isElement$1(kt)?listScrollParents(kt):kt.contextElement?listScrollParents(kt.contextElement):[],popper:listScrollParents(Lt)};var ln=orderModifiers(mergeByName([].concat(vt,Nt.options.modifiers)));return Nt.orderedModifiers=ln.filter(function(sn){return sn.enabled}),Zt(),Wt.update()},forceUpdate:function(){if(!Ht){var nn=Nt.elements,rn=nn.reference,ln=nn.popper;if(!!areValidElements(rn,ln)){Nt.rects={reference:getCompositeRect(rn,getOffsetParent(ln),Nt.options.strategy==="fixed"),popper:getLayoutRect(ln)},Nt.reset=!1,Nt.placement=Nt.options.placement,Nt.orderedModifiers.forEach(function(On){return Nt.modifiersData[On.name]=Object.assign({},On.data)});for(var sn=0;sn<Nt.orderedModifiers.length;sn++){if(Nt.reset===!0){Nt.reset=!1,sn=-1;continue}var mn=Nt.orderedModifiers[sn],wn=mn.fn,Cn=mn.options,An=Cn===void 0?{}:Cn,Pn=mn.name;typeof wn=="function"&&(Nt=wn({state:Nt,options:An,name:Pn,instance:Wt})||Nt)}}}},update:debounce$1(function(){return new Promise(function(Yt){Wt.forceUpdate(),Yt(Nt)})}),destroy:function(){tn(),Ht=!0}};if(!areValidElements(kt,Lt))return Wt;Wt.setOptions(Mt).then(function(Yt){!Ht&&Mt.onFirstUpdate&&Mt.onFirstUpdate(Yt)});function Zt(){Nt.orderedModifiers.forEach(function(Yt){var nn=Yt.name,rn=Yt.options,ln=rn===void 0?{}:rn,sn=Yt.effect;if(typeof sn=="function"){var mn=sn({state:Nt,name:nn,instance:Wt,options:ln}),wn=function(){};zt.push(mn||wn)}})}function tn(){zt.forEach(function(Yt){return Yt()}),zt=[]}return Wt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$2,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function nt(){return document.body};function getValueAtIndexOrReturn(nt,rt,it){if(Array.isArray(nt)){var vt=nt[rt];return vt==null?Array.isArray(it)?it[rt]:it:vt}return nt}function isType(nt,rt){var it={}.toString.call(nt);return it.indexOf("[object")===0&&it.indexOf(rt+"]")>-1}function invokeWithArgsOrReturn(nt,rt){return typeof nt=="function"?nt.apply(void 0,rt):nt}function debounce(nt,rt){if(rt===0)return nt;var it;return function(vt){clearTimeout(it),it=setTimeout(function(){nt(vt)},rt)}}function splitBySpaces(nt){return nt.split(/\s+/).filter(Boolean)}function normalizeToArray(nt){return[].concat(nt)}function pushIfUnique(nt,rt){nt.indexOf(rt)===-1&&nt.push(rt)}function unique(nt){return nt.filter(function(rt,it){return nt.indexOf(rt)===it})}function getBasePlacement(nt){return nt.split("-")[0]}function arrayFrom(nt){return[].slice.call(nt)}function removeUndefinedProps(nt){return Object.keys(nt).reduce(function(rt,it){return nt[it]!==void 0&&(rt[it]=nt[it]),rt},{})}function div(){return document.createElement("div")}function isElement(nt){return["Element","Fragment"].some(function(rt){return isType(nt,rt)})}function isNodeList(nt){return isType(nt,"NodeList")}function isMouseEvent(nt){return isType(nt,"MouseEvent")}function isReferenceElement(nt){return!!(nt&&nt._tippy&&nt._tippy.reference===nt)}function getArrayOfElements(nt){return isElement(nt)?[nt]:isNodeList(nt)?arrayFrom(nt):Array.isArray(nt)?nt:arrayFrom(document.querySelectorAll(nt))}function setTransitionDuration(nt,rt){nt.forEach(function(it){it&&(it.style.transitionDuration=rt+"ms")})}function setVisibilityState(nt,rt){nt.forEach(function(it){it&&it.setAttribute("data-state",rt)})}function getOwnerDocument(nt){var rt,it=normalizeToArray(nt),vt=it[0];return vt!=null&&(rt=vt.ownerDocument)!=null&&rt.body?vt.ownerDocument:document}function isCursorOutsideInteractiveBorder(nt,rt){var it=rt.clientX,vt=rt.clientY;return nt.every(function(bt){var wt=bt.popperRect,Tt=bt.popperState,kt=bt.props,Lt=kt.interactiveBorder,Mt=getBasePlacement(Tt.placement),Nt=Tt.modifiersData.offset;if(!Nt)return!0;var zt=Mt==="bottom"?Nt.top.y:0,Ht=Mt==="top"?Nt.bottom.y:0,Wt=Mt==="right"?Nt.left.x:0,Zt=Mt==="left"?Nt.right.x:0,tn=wt.top-vt+zt>Lt,Yt=vt-wt.bottom-Ht>Lt,nn=wt.left-it+Wt>Lt,rn=it-wt.right-Zt>Lt;return tn||Yt||nn||rn})}function updateTransitionEndListener(nt,rt,it){var vt=rt+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(bt){nt[vt](bt,it)})}function actualContains(nt,rt){for(var it=rt;it;){var vt;if(nt.contains(it))return!0;it=it.getRootNode==null||(vt=it.getRootNode())==null?void 0:vt.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var nt=performance.now();nt-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=nt}function onWindowBlur(){var nt=document.activeElement;if(isReferenceElement(nt)){var rt=nt._tippy;nt.blur&&!rt.state.isVisible&&nt.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function nt(){},onBeforeUpdate:function nt(){},onCreate:function nt(){},onDestroy:function nt(){},onHidden:function nt(){},onHide:function nt(){},onMount:function nt(){},onShow:function nt(){},onShown:function nt(){},onTrigger:function nt(){},onUntrigger:function nt(){},onClickOutside:function nt(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function nt(rt){var it=Object.keys(rt);it.forEach(function(vt){defaultProps[vt]=rt[vt]})};function getExtendedPassedProps(nt){var rt=nt.plugins||[],it=rt.reduce(function(vt,bt){var wt=bt.name,Tt=bt.defaultValue;if(wt){var kt;vt[wt]=nt[wt]!==void 0?nt[wt]:(kt=defaultProps[wt])!=null?kt:Tt}return vt},{});return Object.assign({},nt,it)}function getDataAttributeProps(nt,rt){var it=rt?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:rt}))):defaultKeys,vt=it.reduce(function(bt,wt){var Tt=(nt.getAttribute("data-tippy-"+wt)||"").trim();if(!Tt)return bt;if(wt==="content")bt[wt]=Tt;else try{bt[wt]=JSON.parse(Tt)}catch{bt[wt]=Tt}return bt},{});return vt}function evaluateProps(nt,rt){var it=Object.assign({},rt,{content:invokeWithArgsOrReturn(rt.content,[nt])},rt.ignoreAttributes?{}:getDataAttributeProps(nt,rt.plugins));return it.aria=Object.assign({},defaultProps.aria,it.aria),it.aria={expanded:it.aria.expanded==="auto"?rt.interactive:it.aria.expanded,content:it.aria.content==="auto"?rt.interactive?null:"describedby":it.aria.content},it}var innerHTML=function nt(){return"innerHTML"};function dangerouslySetInnerHTML(nt,rt){nt[innerHTML()]=rt}function createArrowElement(nt){var rt=div();return nt===!0?rt.className=ARROW_CLASS:(rt.className=SVG_ARROW_CLASS,isElement(nt)?rt.appendChild(nt):dangerouslySetInnerHTML(rt,nt)),rt}function setContent(nt,rt){isElement(rt.content)?(dangerouslySetInnerHTML(nt,""),nt.appendChild(rt.content)):typeof rt.content!="function"&&(rt.allowHTML?dangerouslySetInnerHTML(nt,rt.content):nt.textContent=rt.content)}function getChildren(nt){var rt=nt.firstElementChild,it=arrayFrom(rt.children);return{box:rt,content:it.find(function(vt){return vt.classList.contains(CONTENT_CLASS)}),arrow:it.find(function(vt){return vt.classList.contains(ARROW_CLASS)||vt.classList.contains(SVG_ARROW_CLASS)}),backdrop:it.find(function(vt){return vt.classList.contains(BACKDROP_CLASS)})}}function render$3(nt){var rt=div(),it=div();it.className=BOX_CLASS,it.setAttribute("data-state","hidden"),it.setAttribute("tabindex","-1");var vt=div();vt.className=CONTENT_CLASS,vt.setAttribute("data-state","hidden"),setContent(vt,nt.props),rt.appendChild(it),it.appendChild(vt),bt(nt.props,nt.props);function bt(wt,Tt){var kt=getChildren(rt),Lt=kt.box,Mt=kt.content,Nt=kt.arrow;Tt.theme?Lt.setAttribute("data-theme",Tt.theme):Lt.removeAttribute("data-theme"),typeof Tt.animation=="string"?Lt.setAttribute("data-animation",Tt.animation):Lt.removeAttribute("data-animation"),Tt.inertia?Lt.setAttribute("data-inertia",""):Lt.removeAttribute("data-inertia"),Lt.style.maxWidth=typeof Tt.maxWidth=="number"?Tt.maxWidth+"px":Tt.maxWidth,Tt.role?Lt.setAttribute("role",Tt.role):Lt.removeAttribute("role"),(wt.content!==Tt.content||wt.allowHTML!==Tt.allowHTML)&&setContent(Mt,nt.props),Tt.arrow?Nt?wt.arrow!==Tt.arrow&&(Lt.removeChild(Nt),Lt.appendChild(createArrowElement(Tt.arrow))):Lt.appendChild(createArrowElement(Tt.arrow)):Nt&&Lt.removeChild(Nt)}return{popper:rt,onUpdate:bt}}render$3.$$tippy=!0;var idCounter$1=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(nt,rt){var it=evaluateProps(nt,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(rt)))),vt,bt,wt,Tt=!1,kt=!1,Lt=!1,Mt=!1,Nt,zt,Ht,Wt=[],Zt=debounce(dn,it.interactiveDebounce),tn,Yt=idCounter$1++,nn=null,rn=unique(it.plugins),ln={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},sn={id:Yt,reference:nt,popper:div(),popperInstance:nn,props:it,state:ln,plugins:rn,clearDelayTimeouts:_r,setProps:hi,setContent:di,show:vi,hide:Ai,hideWithInteractivity:ki,enable:kr,disable:br,unmount:Bi,destroy:Ti};if(!it.render)return sn;var mn=it.render(sn),wn=mn.popper,Cn=mn.onUpdate;wn.setAttribute("data-tippy-root",""),wn.id="tippy-"+sn.id,sn.popper=wn,nt._tippy=sn,wn._tippy=sn;var An=rn.map(function(Rr){return Rr.fn(sn)}),Pn=nt.hasAttribute("aria-expanded");return ir(),rr(),mr(),Er("onCreate",[sn]),it.showOnCreate&&or(),wn.addEventListener("mouseenter",function(){sn.props.interactive&&sn.state.isVisible&&sn.clearDelayTimeouts()}),wn.addEventListener("mouseleave",function(){sn.props.interactive&&sn.props.trigger.indexOf("mouseenter")>=0&&pn().addEventListener("mousemove",Zt)}),sn;function On(){var Rr=sn.props.touch;return Array.isArray(Rr)?Rr:[Rr,0]}function kn(){return On()[0]==="hold"}function gn(){var Rr;return!!((Rr=sn.props.render)!=null&&Rr.$$tippy)}function Vn(){return tn||nt}function pn(){var Rr=Vn().parentNode;return Rr?getOwnerDocument(Rr):document}function pr(){return getChildren(wn)}function yn(Rr){return sn.state.isMounted&&!sn.state.isVisible||currentInput.isTouch||Nt&&Nt.type==="focus"?0:getValueAtIndexOrReturn(sn.props.delay,Rr?0:1,defaultProps.delay)}function mr(Rr){Rr===void 0&&(Rr=!1),wn.style.pointerEvents=sn.props.interactive&&!Rr?"":"none",wn.style.zIndex=""+sn.props.zIndex}function Er(Rr,Tn,Sn){if(Sn===void 0&&(Sn=!0),An.forEach(function(er){er[Rr]&&er[Rr].apply(er,Tn)}),Sn){var jn;(jn=sn.props)[Rr].apply(jn,Tn)}}function Mr(){var Rr=sn.props.aria;if(!!Rr.content){var Tn="aria-"+Rr.content,Sn=wn.id,jn=normalizeToArray(sn.props.triggerTarget||nt);jn.forEach(function(er){var Cr=er.getAttribute(Tn);if(sn.state.isVisible)er.setAttribute(Tn,Cr?Cr+" "+Sn:Sn);else{var Qr=Cr&&Cr.replace(Sn,"").trim();Qr?er.setAttribute(Tn,Qr):er.removeAttribute(Tn)}})}}function rr(){if(!(Pn||!sn.props.aria.expanded)){var Rr=normalizeToArray(sn.props.triggerTarget||nt);Rr.forEach(function(Tn){sn.props.interactive?Tn.setAttribute("aria-expanded",sn.state.isVisible&&Tn===Vn()?"true":"false"):Tn.removeAttribute("aria-expanded")})}}function vr(){pn().removeEventListener("mousemove",Zt),mouseMoveListeners=mouseMoveListeners.filter(function(Rr){return Rr!==Zt})}function cr(Rr){if(!(currentInput.isTouch&&(Lt||Rr.type==="mousedown"))){var Tn=Rr.composedPath&&Rr.composedPath()[0]||Rr.target;if(!(sn.props.interactive&&actualContains(wn,Tn))){if(normalizeToArray(sn.props.triggerTarget||nt).some(function(Sn){return actualContains(Sn,Tn)})){if(currentInput.isTouch||sn.state.isVisible&&sn.props.trigger.indexOf("click")>=0)return}else Er("onClickOutside",[sn,Rr]);sn.props.hideOnClick===!0&&(sn.clearDelayTimeouts(),sn.hide(),kt=!0,setTimeout(function(){kt=!1}),sn.state.isMounted||sr())}}}function gr(){Lt=!0}function Or(){Lt=!1}function Ar(){var Rr=pn();Rr.addEventListener("mousedown",cr,!0),Rr.addEventListener("touchend",cr,TOUCH_OPTIONS),Rr.addEventListener("touchstart",Or,TOUCH_OPTIONS),Rr.addEventListener("touchmove",gr,TOUCH_OPTIONS)}function sr(){var Rr=pn();Rr.removeEventListener("mousedown",cr,!0),Rr.removeEventListener("touchend",cr,TOUCH_OPTIONS),Rr.removeEventListener("touchstart",Or,TOUCH_OPTIONS),Rr.removeEventListener("touchmove",gr,TOUCH_OPTIONS)}function ii(Rr,Tn){fr(Rr,function(){!sn.state.isVisible&&wn.parentNode&&wn.parentNode.contains(wn)&&Tn()})}function ar(Rr,Tn){fr(Rr,Tn)}function fr(Rr,Tn){var Sn=pr().box;function jn(er){er.target===Sn&&(updateTransitionEndListener(Sn,"remove",jn),Tn())}if(Rr===0)return Tn();updateTransitionEndListener(Sn,"remove",zt),updateTransitionEndListener(Sn,"add",jn),zt=jn}function wr(Rr,Tn,Sn){Sn===void 0&&(Sn=!1);var jn=normalizeToArray(sn.props.triggerTarget||nt);jn.forEach(function(er){er.addEventListener(Rr,Tn,Sn),Wt.push({node:er,eventType:Rr,handler:Tn,options:Sn})})}function ir(){kn()&&(wr("touchstart",en,{passive:!0}),wr("touchend",un,{passive:!0})),splitBySpaces(sn.props.trigger).forEach(function(Rr){if(Rr!=="manual")switch(wr(Rr,en),Rr){case"mouseenter":wr("mouseleave",un);break;case"focus":wr(isIE11?"focusout":"blur",Nn);break;case"focusin":wr("focusout",Nn);break}})}function Ln(){Wt.forEach(function(Rr){var Tn=Rr.node,Sn=Rr.eventType,jn=Rr.handler,er=Rr.options;Tn.removeEventListener(Sn,jn,er)}),Wt=[]}function en(Rr){var Tn,Sn=!1;if(!(!sn.state.isEnabled||In(Rr)||kt)){var jn=((Tn=Nt)==null?void 0:Tn.type)==="focus";Nt=Rr,tn=Rr.currentTarget,rr(),!sn.state.isVisible&&isMouseEvent(Rr)&&mouseMoveListeners.forEach(function(er){return er(Rr)}),Rr.type==="click"&&(sn.props.trigger.indexOf("mouseenter")<0||Tt)&&sn.props.hideOnClick!==!1&&sn.state.isVisible?Sn=!0:or(Rr),Rr.type==="click"&&(Tt=!Sn),Sn&&!jn&&dr(Rr)}}function dn(Rr){var Tn=Rr.target,Sn=Vn().contains(Tn)||wn.contains(Tn);if(!(Rr.type==="mousemove"&&Sn)){var jn=Wn().concat(wn).map(function(er){var Cr,Qr=er._tippy,yr=(Cr=Qr.popperInstance)==null?void 0:Cr.state;return yr?{popperRect:er.getBoundingClientRect(),popperState:yr,props:it}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(jn,Rr)&&(vr(),dr(Rr))}}function un(Rr){var Tn=In(Rr)||sn.props.trigger.indexOf("click")>=0&&Tt;if(!Tn){if(sn.props.interactive){sn.hideWithInteractivity(Rr);return}dr(Rr)}}function Nn(Rr){sn.props.trigger.indexOf("focusin")<0&&Rr.target!==Vn()||sn.props.interactive&&Rr.relatedTarget&&wn.contains(Rr.relatedTarget)||dr(Rr)}function In(Rr){return currentInput.isTouch?kn()!==Rr.type.indexOf("touch")>=0:!1}function lr(){$n();var Rr=sn.props,Tn=Rr.popperOptions,Sn=Rr.placement,jn=Rr.offset,er=Rr.getReferenceClientRect,Cr=Rr.moveTransition,Qr=gn()?getChildren(wn).arrow:null,yr=er?{getBoundingClientRect:er,contextElement:er.contextElement||Vn()}:nt,ai={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(wi){var Mi=wi.state;if(gn()){var Ei=pr(),io=Ei.box;["placement","reference-hidden","escaped"].forEach(function(Di){Di==="placement"?io.setAttribute("data-placement",Mi.placement):Mi.attributes.popper["data-popper-"+Di]?io.setAttribute("data-"+Di,""):io.removeAttribute("data-"+Di)}),Mi.attributes.popper={}}}},Ir=[{name:"offset",options:{offset:jn}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Cr}},ai];gn()&&Qr&&Ir.push({name:"arrow",options:{element:Qr,padding:3}}),Ir.push.apply(Ir,(Tn==null?void 0:Tn.modifiers)||[]),sn.popperInstance=createPopper(yr,wn,Object.assign({},Tn,{placement:Sn,onFirstUpdate:Ht,modifiers:Ir}))}function $n(){sn.popperInstance&&(sn.popperInstance.destroy(),sn.popperInstance=null)}function Qn(){var Rr=sn.props.appendTo,Tn,Sn=Vn();sn.props.interactive&&Rr===TIPPY_DEFAULT_APPEND_TO||Rr==="parent"?Tn=Sn.parentNode:Tn=invokeWithArgsOrReturn(Rr,[Sn]),Tn.contains(wn)||Tn.appendChild(wn),sn.state.isMounted=!0,lr()}function Wn(){return arrayFrom(wn.querySelectorAll("[data-tippy-root]"))}function or(Rr){sn.clearDelayTimeouts(),Rr&&Er("onTrigger",[sn,Rr]),Ar();var Tn=yn(!0),Sn=On(),jn=Sn[0],er=Sn[1];currentInput.isTouch&&jn==="hold"&&er&&(Tn=er),Tn?vt=setTimeout(function(){sn.show()},Tn):sn.show()}function dr(Rr){if(sn.clearDelayTimeouts(),Er("onUntrigger",[sn,Rr]),!sn.state.isVisible){sr();return}if(!(sn.props.trigger.indexOf("mouseenter")>=0&&sn.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Rr.type)>=0&&Tt)){var Tn=yn(!1);Tn?bt=setTimeout(function(){sn.state.isVisible&&sn.hide()},Tn):wt=requestAnimationFrame(function(){sn.hide()})}}function kr(){sn.state.isEnabled=!0}function br(){sn.hide(),sn.state.isEnabled=!1}function _r(){clearTimeout(vt),clearTimeout(bt),cancelAnimationFrame(wt)}function hi(Rr){if(!sn.state.isDestroyed){Er("onBeforeUpdate",[sn,Rr]),Ln();var Tn=sn.props,Sn=evaluateProps(nt,Object.assign({},Tn,removeUndefinedProps(Rr),{ignoreAttributes:!0}));sn.props=Sn,ir(),Tn.interactiveDebounce!==Sn.interactiveDebounce&&(vr(),Zt=debounce(dn,Sn.interactiveDebounce)),Tn.triggerTarget&&!Sn.triggerTarget?normalizeToArray(Tn.triggerTarget).forEach(function(jn){jn.removeAttribute("aria-expanded")}):Sn.triggerTarget&&nt.removeAttribute("aria-expanded"),rr(),mr(),Cn&&Cn(Tn,Sn),sn.popperInstance&&(lr(),Wn().forEach(function(jn){requestAnimationFrame(jn._tippy.popperInstance.forceUpdate)})),Er("onAfterUpdate",[sn,Rr])}}function di(Rr){sn.setProps({content:Rr})}function vi(){var Rr=sn.state.isVisible,Tn=sn.state.isDestroyed,Sn=!sn.state.isEnabled,jn=currentInput.isTouch&&!sn.props.touch,er=getValueAtIndexOrReturn(sn.props.duration,0,defaultProps.duration);if(!(Rr||Tn||Sn||jn)&&!Vn().hasAttribute("disabled")&&(Er("onShow",[sn],!1),sn.props.onShow(sn)!==!1)){if(sn.state.isVisible=!0,gn()&&(wn.style.visibility="visible"),mr(),Ar(),sn.state.isMounted||(wn.style.transition="none"),gn()){var Cr=pr(),Qr=Cr.box,yr=Cr.content;setTransitionDuration([Qr,yr],0)}Ht=function(){var Ir;if(!(!sn.state.isVisible||Mt)){if(Mt=!0,wn.offsetHeight,wn.style.transition=sn.props.moveTransition,gn()&&sn.props.animation){var mi=pr(),wi=mi.box,Mi=mi.content;setTransitionDuration([wi,Mi],er),setVisibilityState([wi,Mi],"visible")}Mr(),rr(),pushIfUnique(mountedInstances,sn),(Ir=sn.popperInstance)==null||Ir.forceUpdate(),Er("onMount",[sn]),sn.props.animation&&gn()&&ar(er,function(){sn.state.isShown=!0,Er("onShown",[sn])})}},Qn()}}function Ai(){var Rr=!sn.state.isVisible,Tn=sn.state.isDestroyed,Sn=!sn.state.isEnabled,jn=getValueAtIndexOrReturn(sn.props.duration,1,defaultProps.duration);if(!(Rr||Tn||Sn)&&(Er("onHide",[sn],!1),sn.props.onHide(sn)!==!1)){if(sn.state.isVisible=!1,sn.state.isShown=!1,Mt=!1,Tt=!1,gn()&&(wn.style.visibility="hidden"),vr(),sr(),mr(!0),gn()){var er=pr(),Cr=er.box,Qr=er.content;sn.props.animation&&(setTransitionDuration([Cr,Qr],jn),setVisibilityState([Cr,Qr],"hidden"))}Mr(),rr(),sn.props.animation?gn()&&ii(jn,sn.unmount):sn.unmount()}}function ki(Rr){pn().addEventListener("mousemove",Zt),pushIfUnique(mouseMoveListeners,Zt),Zt(Rr)}function Bi(){sn.state.isVisible&&sn.hide(),sn.state.isMounted&&($n(),Wn().forEach(function(Rr){Rr._tippy.unmount()}),wn.parentNode&&wn.parentNode.removeChild(wn),mountedInstances=mountedInstances.filter(function(Rr){return Rr!==sn}),sn.state.isMounted=!1,Er("onHidden",[sn]))}function Ti(){sn.state.isDestroyed||(sn.clearDelayTimeouts(),sn.unmount(),Ln(),delete nt._tippy,sn.state.isDestroyed=!0,Er("onDestroy",[sn]))}}function tippy(nt,rt){rt===void 0&&(rt={});var it=defaultProps.plugins.concat(rt.plugins||[]);bindGlobalEventListeners();var vt=Object.assign({},rt,{plugins:it}),bt=getArrayOfElements(nt),wt=bt.reduce(function(Tt,kt){var Lt=kt&&createTippy(kt,vt);return Lt&&Tt.push(Lt),Tt},[]);return isElement(nt)?wt[0]:wt}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function nt(rt){var it=rt.state,vt={popper:{position:it.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(it.elements.popper.style,vt.popper),it.styles=vt,it.elements.arrow&&Object.assign(it.elements.arrow.style,vt.arrow)}});tippy.setDefaultProps({render:render$3});const iiifServer="https://iiif.juncture-digital.org";function isURL(nt){return/^https*:\/\//.test(nt)}function sha256(nt){return sha256$1.exports.sha256(nt)}function isMobile(){return"ontouchstart"in document.documentElement&&/mobi/i.test(navigator.userAgent)}function kebabToCamel(nt){return nt.replace(/-([a-z])/g,function(rt){return rt[1].toUpperCase()})}let tippyEntities;function initTippy(nt=null,rt=!1){rt&&(tippyEntities=null),nt=nt||document;let it=Array.from(nt.querySelectorAll("mark")).filter(vt=>Array.from(vt.attributes).find(bt=>{let wt=bt.name.toLowerCase();return wt==="qid"||isQID(bt.value)&&wt!=="flyto"}));!tippyEntities&&it.length>0&&(tippyEntities=it,tippy(tippyEntities,{interactive:!0,allowHTML:!0,delay:[null,null],onShow:vt=>{let bt=Array.from(vt.reference.attributes).filter(wt=>wt.name.toLowerCase()==="qid"||isQID(wt.value)).map(wt=>wt.value).flat().join();bt&&vt.setContent(`<ve-entity-card qid="${bt}" style="width:600px;max-width:90vw;"></ve-entity-card>`)}}))}async function getManifest(nt,rt=!1){let it=nt.indexOf("http")===0?nt:`${iiifServer}/${nt}/manifest.json`;return(await loadManifests([it],rt))[0]}function observeNavbar(nt,rt){const it=()=>{let bt=parseInt(nt.style.top.replace(/^-/,"").replace(/px$/,"")),Tt=parseInt(nt.style.height.replace(/px$/,""))-bt;rt.style.top=`${Tt}px`};it(),new MutationObserver(it).observe(nt,{attributes:!0})}function makeSticky(nt){var it;nt.classList.add("sticky"),nt.style.position="sticky",nt.style.marginTop="6px";let rt=document.querySelector('ve-navbar[sticky="true"]');if(rt)observeNavbar(rt,nt);else{let vt=document.querySelector("ve-header[sticky]");vt?(rt=(it=vt==null?void 0:vt.shadowRoot)==null?void 0:it.querySelector("ve-navbar"),rt?observeNavbar(rt,nt):new MutationObserver(()=>{var wt;rt=(wt=vt==null?void 0:vt.shadowRoot)==null?void 0:wt.querySelector("ve-navbar"),rt&&observeNavbar(rt,nt)}).observe(vt,{childList:!0,subtree:!0,attributes:!0})):nt.style.top="0"}}function findItem(nt,rt,it=1){const vt=_findItems(nt,rt);return vt.length>=it?vt[it-1]:null}function _findItems(nt,rt,it=[]){if(it=it||[],rt.items)for(let vt=0;vt<rt.items.length;vt++){let bt=rt.items[vt];!Object.entries(nt).find(([Tt,kt])=>bt[Tt]&&bt[Tt]!==kt)?it.push(bt):_findItems(nt,bt,it)}return it}function getItemInfo(nt,rt=1){return findItem({type:"Annotation",motivation:"painting"},nt,rt).body}function imageCount(nt){return _findItems({type:"Annotation",motivation:"painting"},nt).length}const _manifestCache={};async function loadManifests(nt,rt=!1){let it=nt.map(bt=>bt.indexOf("http")===0?bt:`${iiifServer}/${bt}/manifest.json`),vt=it.filter(bt=>!_manifestCache[bt]);if(vt.length>0){let bt=vt.map(kt=>(rt&&["localhost","iiif.juncture-digital.org"].includes(new URL(kt).hostname)&&(kt+="?refresh"),fetch(kt))),wt=await Promise.all(bt),Tt=await Promise.all(wt.map(kt=>kt.json()));if(bt=Tt.filter(kt=>!Array.isArray(kt["@context"])&&parseFloat(kt["@context"].split("/").slice(-2,-1).pop())<3).map(kt=>fetch("https://iiif.juncture-digital.org/prezi2to3/",{method:"POST",body:JSON.stringify(kt)})),bt.length>0){wt=await Promise.all(bt);let kt=await Promise.all(wt.map(Lt=>Lt.json()));for(let Lt=0;Lt<Tt.length;Lt++){let Mt=kt.find(Nt=>Nt["@id"]===Tt[Lt].id);Mt&&(Tt[Lt]=Mt)}}return Tt.forEach((kt,Lt)=>_manifestCache[vt[Lt]]=kt),it.map(kt=>_manifestCache[kt])}else return it.map(bt=>_manifestCache[bt])}function _value(nt,rt="en"){return typeof nt=="object"?nt[rt]||nt.none||nt[Object.keys(nt).sort()[0]]:nt}function label(nt,rt="en"){return nt?_value(nt.label,rt):null}function summary(nt,rt="en"){return nt?_value(nt.summary,rt):null}function staticImage(nt,rt,it=0,vt=0){let bt=getItemInfo(nt),wt=rt.region||"full",Tt=rt.size?rt.size:it?vt?`${it},${vt}`:`${it},`:vt?`,${vt}`:"400,",kt=rt.rotation||"0",Lt=rt.quality||"default",Mt=rt.format||"jpg";return`${bt.service[0].id||bt.service[0]["@id"]}/${wt}/${Tt}/${kt}/${Lt}.${Mt}`}function thumbnail(nt,rt=400){if(!nt)return null;let it=getItemInfo(nt);return it.service?`${it.service[0].id||it.service[0]["@id"]}/full/${rt},/0/default.jpg`:it.type==="Video"?`https://iiif.juncture-digital.org/thumbnail?url=${it.id}`:it.id}function parseRegionString(nt,rt){let it;const vt=nt.split(":");let[bt,wt,Tt,kt]=vt[vt.length-1].split(",").map(Mt=>parseInt(Mt));const Lt=rt.world.getItemAt(0).getContentSize();return vt.length===2&&(vt[0]==="pct"||vt[0]==="percent")&&(bt=Math.round(Lt.x*bt/100),wt=Math.round(Lt.y*wt/100),Tt=Math.round(Lt.x*Tt/100),kt=Math.round(Lt.y*kt/100)),it=rt.viewport.imageToViewportRectangle(bt,wt,Tt,kt),it}function getMetadata(nt,rt="en"){let it=[];return nt.metadata&&nt.metadata.forEach(vt=>{it.push({label:_value(vt.label,rt)[0],value:_value(vt.value,rt)})}),it}function metadataAsObj(nt,rt="en"){return Object.fromEntries(getMetadata(nt,rt).map(it=>[it.label,it.value]))}function top$1(){return stickyElems.length>0&&stickyElems[0].localName.toLowerCase()==="ve-navbar"?parseInt(window.getComputedStyle(stickyElems[0]).height.slice(0,-2)):0}function findStickyElems(){var it,vt;initTippy();let nt=Array.from(document.querySelectorAll(".sticky")),rt=nt.findIndex(bt=>bt.localName.toLowerCase()==="ve-navbar");if(rt<0){let bt=nt.findIndex(wt=>wt.localName.toLowerCase()==="ve-header");if(bt>=0){let wt=(vt=(it=nt[bt])==null?void 0:it.shadowRoot)==null?void 0:vt.querySelector("ve-navbar.sticky");wt&&(nt[bt]=wt,rt=bt)}}return nt.forEach(bt=>setTop(bt)),nt}function activeRegionOffset(){let nt=stickyElems.find(it=>it.localName.toLowerCase()==="ve-navbar"),rt=nt?nt.getBoundingClientRect().top:0;return stickyElems.forEach(it=>{let vt=it.getBoundingClientRect();if((vt.x<vt.width?0:1)===0&&vt.top===rt){let wt=window.getComputedStyle(it).height;wt.length>=3&&wt.slice(-2)==="px"&&(rt+=parseInt(window.getComputedStyle(it).height.slice(0,-2)))}}),rt}function setTop(nt){if(nt.localName.toLowerCase()==="section"){let rt=stickyElems.find(vt=>vt.localName.toLowerCase()==="ve-navbar"),it=rt?rt.clientHeight:0;nt.style.top=`${it}px`}}let stickyElems=[];const mutationObserver=new MutationObserver(nt=>{let rt=nt.filter(it=>{let vt=Array.from(it.addedNodes).filter(wt=>{var Tt;return((Tt=wt.id)==null?void 0:Tt.indexOf("tippy"))<0}).length,bt=Array.from(it.removedNodes).filter(wt=>{var Tt;return((Tt=wt.id)==null?void 0:Tt.indexOf("tippy"))<0}).length;return vt+bt>0});(!tippyEntities||rt.length>0)&&(stickyElems=findStickyElems())});mutationObserver.observe(document,{childList:!0,subtree:!0});let targets={},active,offset=0;const intersectionObserver=new IntersectionObserver(nt=>{offset=activeRegionOffset(),nt.forEach(vt=>targets[domPath(vt.target)]=vt);let rt=Object.values(targets).filter(vt=>vt.isIntersecting).filter(vt=>vt.target.getBoundingClientRect().y>=offset).sort((vt,bt)=>vt.target.getBoundingClientRect().y>bt.target.getBoundingClientRect().y?1:-1),it=rt.find(vt=>vt.intersectionRatio===1)||rt[0];if(it){let vt=it.target;Array.from(vt.classList).indexOf("active")<0&&(active&&active.classList.remove("active"),vt.classList.add("active"),active=vt)}},{root:null,threshold:[0,.25,.5,.75,1],rootMargin:`-${offset}px 0px 0px 0px`});Array.from(document.querySelectorAll("p")).forEach(nt=>intersectionObserver.observe(nt));function observeActive(nt){Array.from(nt.querySelectorAll("p")).forEach(rt=>intersectionObserver.observe(rt))}function domPath(nt){for(var rt=[];nt.parentNode!=null;){let vt=0,bt=0;for(var it=0;it<nt.parentNode.childNodes.length;it++){let wt=nt.parentNode.childNodes[it];wt.nodeName==nt.nodeName&&(wt===nt&&(bt=vt),vt++)}nt.hasAttribute("id")&&nt.id!=""?rt.unshift(nt.nodeName.toLowerCase()+`#${nt.id}`):vt>1?rt.unshift(nt.nodeName.toLowerCase()+(bt>0?`[${bt}]`:"")):rt.unshift(nt.nodeName.toLowerCase()),nt=nt.parentNode}return rt.join(".")}let entityData={};async function getEntityData(nt=[],rt="en"){let it=nt.filter(vt=>!entityData[vt]).map(vt=>`(<http://www.wikidata.org/entity/${vt}>)`);if(it.length>0){let vt=`
      SELECT ?item ?label ?description ?alias ?image ?logoImage ?coords ?pageBanner ?whosOnFirst ?wikipedia WHERE {
        VALUES (?item) { ${it.join(" ")} }
        ?item rdfs:label ?label . 
        FILTER (LANG(?label) = "${rt}" || LANG(?label) = "en")
        OPTIONAL { ?item schema:description ?description . FILTER (LANG(?description) = "${rt}" || LANG(?description) = "en")}
        OPTIONAL { ?item skos:altLabel ?alias . FILTER (LANG(?alias) = "${rt}" || LANG(?alias) = "en")}
        OPTIONAL { ?item wdt:P625 ?coords . }
        OPTIONAL { ?item wdt:P18 ?image . }
        OPTIONAL { ?item wdt:P154 ?logoImage . }
        OPTIONAL { ?item wdt:P948 ?pageBanner . }
        OPTIONAL { ?item wdt:P6766 ?whosOnFirst . }
        OPTIONAL { ?wikipedia schema:about ?item; schema:isPartOf <https://${rt}.wikipedia.org/> . }
    }`,bt=await fetch("https://query.wikidata.org/sparql",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"},body:`query=${encodeURIComponent(vt)}`});if(bt.ok)return(await bt.json()).results.bindings.forEach(Tt=>{let kt=Tt.item.value.split("/").pop();entityData[kt]?Tt.alias&&entityData[kt].aliases.push(Tt.alias.value):(entityData[kt]={id:kt,label:Tt.label.value},Tt.description&&(entityData[kt].description=Tt.description.value),Tt.alias&&(entityData[kt].aliases=[Tt.alias.value]),Tt.coords&&(entityData[kt].coords=Tt.coords.value.slice(6,-1).split(" ").reverse().join(",")),Tt.wikipedia&&(entityData[kt].wikipedia=Tt.wikipedia.value),Tt.pageBanner&&(entityData[kt].pageBanner=Tt.pageBanner.value),Tt.image&&(entityData[kt].image=Tt.image.value,entityData[kt].thumbnail=mwImage(Tt.image.value,300)),Tt.logoImage&&(entityData[kt].logoImage=Tt.logoImage.value,entityData[kt].thumbnail||(entityData[kt].thumbnail=mwImage(Tt.logoImage.value,300))),Tt.whosOnFirst&&(entityData[kt].geojson=whosOnFirstUrl(Tt.whosOnFirst.value)))}),Object.fromEntries(nt.filter(Tt=>entityData[Tt]).map(Tt=>[Tt,entityData[Tt]]))}return Object.fromEntries(nt.filter(vt=>entityData[vt]).map(vt=>[vt,entityData[vt]]))}function isQID(nt){return nt[0]==="Q"&&isNum(nt.slice(1))}async function getEntity(nt,rt="en"){return(await getEntityData([nt],rt))[nt]}function mwImage(nt,rt){nt=(Array.isArray(nt)?nt[0]:nt).replace(/Special:FilePath\//,"File:").split("File:").pop(),nt=decodeURIComponent(nt).replace(/ /g,"_");const it=md5(nt),vt=nt.split(".").pop();let bt=`https://upload.wikimedia.org/wikipedia/commons${rt?"/thumb":""}`;return bt+=`/${it.slice(0,1)}/${it.slice(0,2)}/${nt}`,rt&&(bt+=`/${rt}px-${nt}`,vt==="svg"?bt+=".png":(vt==="tif"||vt==="tiff")&&(bt+=".jpg")),bt}function whosOnFirstUrl(nt){let rt=[];for(let it=0;it<nt.length;it+=3)rt.push(nt.slice(it,it+3));return`https://data.whosonfirst.org/${rt.join("/")}/${nt}.geojson`}function isNum(nt){return nt&&!isNaN(nt)}function parseImageOptions(nt){let rt=(nt==null?void 0:nt.split("/"))||[],it="full",vt="full",bt="0",wt="default",Tt="jpg",kt=0;return{region:rt.length>kt&&rt[kt]?rt[kt]:it,size:rt.length>kt+1&&rt[kt+1]?rt[kt+1]:vt,rotation:rt.length>kt+2&&rt[kt+2]?rt[kt+2]:bt,quality:rt.length>kt+3&&rt[kt+3]?rt[kt+3]:wt,format:rt.length>kt+4&&rt[kt+4]?rt[kt+4]:Tt}}async function imageDataUrl(nt,rt,it){return new Promise(vt=>{let{x:bt,y:wt,w:Tt,h:kt}=rt,{width:Lt,height:Mt}=it,Nt=new Image;Nt.crossOrigin="anonymous",bt=bt?bt/100:0,wt=wt?wt/100:0,Tt=Tt?Tt/100:0,kt=kt?kt/100:0,Nt.onload=()=>{let zt=Nt.width,Ht=Nt.height,Wt=Tt>0?zt*Tt:zt-zt*bt,Zt=kt>0?Ht*kt:Ht-Ht*wt,tn=Wt/Zt;tn>1?Mt=Lt/tn:Lt=Mt*tn;const Yt=document.createElement("canvas"),nn=Yt.getContext("2d");Yt.width=Lt,Yt.height=Mt,bt=bt*zt,wt=wt*Ht,nn==null||nn.drawImage(Nt,bt,wt,Wt,Zt,0,0,Lt,Mt);let rn=Yt.toDataURL();vt(rn)},Nt.src=nt})}let summaryText={};async function getSummaryText(nt,rt="en"){if(summaryText[rt]||(summaryText[rt]={}),!summaryText[rt][nt]&&entityData[nt]&&entityData[nt].wikipedia){let vt=entityData[nt].wikipedia.replace(/\/w\//,"/wiki").split("/wiki/").pop(),bt=`https://${rt}.wikipedia.org/api/rest_v1/page/summary/${vt}`,wt=await fetch(bt);return wt.ok&&(wt=await wt.json(),summaryText[rt][nt]=wt.extract_html||wt.extract),summaryText[rt][nt]}else return summaryText[rt][nt]}var breadcrumb_styles_default=i$4`
  ${component_styles_default}

  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
`,SlBreadcrumb=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){const rt=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[rt,...rt.querySelectorAll("[id]")].forEach(it=>it.removeAttribute("id")),rt.setAttribute("data-default",""),rt.slot="separator",rt}handleSlotChange(){const nt=[...this.defaultSlot.assignedElements({flatten:!0})].filter(rt=>rt.tagName.toLowerCase()==="sl-breadcrumb-item");nt.forEach((rt,it)=>{const vt=rt.querySelector('[slot="separator"]');vt===null?rt.append(this.getSeparator()):vt.hasAttribute("data-default")&&vt.replaceWith(this.getSeparator()),it===nt.length-1?rt.setAttribute("aria-current","page"):rt.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),y$2`
      <nav part="base" class="breadcrumb" aria-label=${this.label}>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </nav>

      <slot name="separator" hidden aria-hidden="true">
        <sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon>
      </slot>
    `}};SlBreadcrumb.styles=breadcrumb_styles_default;__decorateClass([i2$2("slot")],SlBreadcrumb.prototype,"defaultSlot",2);__decorateClass([i2$2('slot[name="separator"]')],SlBreadcrumb.prototype,"separatorSlot",2);__decorateClass([e2$2()],SlBreadcrumb.prototype,"label",2);SlBreadcrumb=__decorateClass([e$1("sl-breadcrumb")],SlBreadcrumb);var breadcrumb_item_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-flex;
  }

  .breadcrumb-item {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-600);
    line-height: var(--sl-line-height-normal);
    white-space: nowrap;
  }

  .breadcrumb-item__label {
    display: inline-block;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    padding: 0;
    margin: 0;
    cursor: pointer;
    transition: var(--sl-transition-fast) --color;
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label {
    color: var(--sl-color-primary-600);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:hover {
    color: var(--sl-color-primary-500);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:active {
    color: var(--sl-color-primary-600);
  }

  .breadcrumb-item__label:focus {
    outline: none;
  }

  .breadcrumb-item__label:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .breadcrumb-item__prefix,
  .breadcrumb-item__suffix {
    display: none;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .breadcrumb-item--has-prefix .breadcrumb-item__prefix {
    display: inline-flex;
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .breadcrumb-item--has-suffix .breadcrumb-item__suffix {
    display: inline-flex;
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:last-of-type) .breadcrumb-item__separator {
    display: none;
  }

  .breadcrumb-item__separator {
    display: inline-flex;
    align-items: center;
    margin: 0 var(--sl-spacing-x-small);
    user-select: none;
  }
`,SlBreadcrumbItem=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"prefix","suffix"),this.rel="noreferrer noopener"}render(){const nt=!!this.href;return y$2`
      <div
        part="base"
        class=${o$1({"breadcrumb-item":!0,"breadcrumb-item--has-prefix":this.hasSlotController.test("prefix"),"breadcrumb-item--has-suffix":this.hasSlotController.test("suffix")})}
      >
        <slot name="prefix" part="prefix" class="breadcrumb-item__prefix"></slot>

        ${nt?y$2`
              <a
                part="label"
                class="breadcrumb-item__label breadcrumb-item__label--link"
                href="${this.href}"
                target="${l$2(this.target?this.target:void 0)}"
                rel=${l$2(this.target?this.rel:void 0)}
              >
                <slot></slot>
              </a>
            `:y$2`
              <button part="label" type="button" class="breadcrumb-item__label breadcrumb-item__label--button">
                <slot></slot>
              </button>
            `}

        <slot name="suffix" part="suffix" class="breadcrumb-item__suffix"></slot>

        <slot name="separator" part="separator" class="breadcrumb-item__separator" aria-hidden="true"></slot>
      </div>
    `}};SlBreadcrumbItem.styles=breadcrumb_item_styles_default;__decorateClass([e2$2()],SlBreadcrumbItem.prototype,"href",2);__decorateClass([e2$2()],SlBreadcrumbItem.prototype,"target",2);__decorateClass([e2$2()],SlBreadcrumbItem.prototype,"rel",2);SlBreadcrumbItem=__decorateClass([e$1("sl-breadcrumb-item")],SlBreadcrumbItem);var details_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: block;
  }

  .details {
    border: solid 1px var(--sl-color-neutral-200);
    border-radius: var(--sl-border-radius-medium);
    background-color: var(--sl-color-neutral-0);
    overflow-anchor: none;
  }

  .details--disabled {
    opacity: 0.5;
  }

  .details__header {
    display: flex;
    align-items: center;
    border-radius: inherit;
    padding: var(--sl-spacing-medium);
    user-select: none;
    cursor: pointer;
  }

  .details__header:focus {
    outline: none;
  }

  .details__header:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(1px + var(--sl-focus-ring-offset));
  }

  .details--disabled .details__header {
    cursor: not-allowed;
  }

  .details--disabled .details__header:focus-visible {
    outline: none;
    box-shadow: none;
  }

  .details__summary {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
  }

  .details__summary-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) rotate ease;
  }

  .details--open .details__summary-icon {
    rotate: 90deg;
  }

  .details--open.details--rtl .details__summary-icon {
    rotate: -90deg;
  }

  .details--open slot[name='expand-icon'],
  .details:not(.details--open) slot[name='collapse-icon'] {
    display: none;
  }

  .details__body {
    overflow: hidden;
  }

  .details__content {
    display: block;
    padding: var(--sl-spacing-medium);
  }
`,SlDetails=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.open=!1,this.disabled=!1}firstUpdated(){this.body.hidden=!this.open,this.body.style.height=this.open?"auto":"0"}handleSummaryClick(){this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(nt){(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),this.open?this.hide():this.show()),(nt.key==="ArrowUp"||nt.key==="ArrowLeft")&&(nt.preventDefault(),this.hide()),(nt.key==="ArrowDown"||nt.key==="ArrowRight")&&(nt.preventDefault(),this.show())}async handleOpenChange(){if(this.open){if(this.emit("sl-show",{cancelable:!0}).defaultPrevented){this.open=!1;return}await stopAnimations(this.body),this.body.hidden=!1;const{keyframes:rt,options:it}=getAnimation(this,"details.show",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.style.height="auto",this.emit("sl-after-show")}else{if(this.emit("sl-hide",{cancelable:!0}).defaultPrevented){this.open=!0;return}await stopAnimations(this.body);const{keyframes:rt,options:it}=getAnimation(this,"details.hide",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.hidden=!0,this.body.style.height="auto",this.emit("sl-after-hide")}}async show(){if(!(this.open||this.disabled))return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!(!this.open||this.disabled))return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){const nt=this.localize.dir()==="rtl";return y$2`
      <div
        part="base"
        class=${o$1({details:!0,"details--open":this.open,"details--disabled":this.disabled,"details--rtl":nt})}
      >
        <header
          part="header"
          id="header"
          class="details__header"
          role="button"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="content"
          aria-disabled=${this.disabled?"true":"false"}
          tabindex=${this.disabled?"-1":"0"}
          @click=${this.handleSummaryClick}
          @keydown=${this.handleSummaryKeyDown}
        >
          <slot name="summary" part="summary" class="details__summary">${this.summary}</slot>

          <span part="summary-icon" class="details__summary-icon">
            <slot name="expand-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
            <slot name="collapse-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
          </span>
        </header>

        <div class="details__body">
          <slot part="content" id="content" class="details__content" role="region" aria-labelledby="header"></slot>
        </div>
      </div>
    `}};SlDetails.styles=details_styles_default;__decorateClass([i2$2(".details")],SlDetails.prototype,"details",2);__decorateClass([i2$2(".details__header")],SlDetails.prototype,"header",2);__decorateClass([i2$2(".details__body")],SlDetails.prototype,"body",2);__decorateClass([i2$2(".details__expand-icon-slot")],SlDetails.prototype,"expandIconSlot",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDetails.prototype,"open",2);__decorateClass([e2$2()],SlDetails.prototype,"summary",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDetails.prototype,"disabled",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDetails.prototype,"handleOpenChange",1);SlDetails=__decorateClass([e$1("sl-details")],SlDetails);setDefaultAnimation("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"linear"}});setDefaultAnimation("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"linear"}});var drawer_styles_default=i$4`
  ${component_styles_default}

  :host {
    --size: 25rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .drawer {
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
  }

  .drawer--contained {
    position: absolute;
    z-index: initial;
  }

  .drawer--fixed {
    position: fixed;
    z-index: var(--sl-z-index-drawer);
  }

  .drawer__panel {
    position: absolute;
    display: flex;
    flex-direction: column;
    z-index: 2;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-large);
    overflow: auto;
    pointer-events: all;
  }

  .drawer__panel:focus {
    outline: none;
  }

  .drawer--top .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--end .drawer__panel {
    top: 0;
    inset-inline-end: 0;
    bottom: auto;
    inset-inline-start: auto;
    width: var(--size);
    height: 100%;
  }

  .drawer--bottom .drawer__panel {
    top: auto;
    inset-inline-end: auto;
    bottom: 0;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--start .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: var(--size);
    height: 100%;
  }

  .drawer__header {
    display: flex;
  }

  .drawer__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .drawer__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .drawer__header-actions sl-icon-button,
  .drawer__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .drawer__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .drawer__footer {
    text-align: right;
    padding: var(--footer-spacing);
  }

  .drawer__footer ::slotted(sl-button:not(:last-of-type)) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .drawer:not(.drawer--has-footer) .drawer__footer {
    display: none;
  }

  .drawer__overlay {
    display: block;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
    pointer-events: all;
  }

  .drawer--contained .drawer__overlay {
    display: none;
  }

  @media (forced-colors: active) {
    .drawer__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`;function uppercaseFirstLetter(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)}var SlDrawer=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController2(this),this.open=!1,this.label="",this.placement="end",this.contained=!1,this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.modal=new Modal$1(this)}firstUpdated(){this.drawer.hidden=!this.open,this.open&&(this.addOpenListeners(),this.contained||(this.modal.activate(),lockBodyScrolling(this)))}disconnectedCallback(){super.disconnectedCallback(),unlockBodyScrolling(this)}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"drawer.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown(nt){this.open&&!this.contained&&nt.key==="Escape"&&(nt.stopPropagation(),this.requestClose("keyboard"))}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.contained||(this.modal.activate(),lockBodyScrolling(this));const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]),this.drawer.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,`drawer.show${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),it=getAnimation(this,"drawer.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),this.contained||(this.modal.deactivate(),unlockBodyScrolling(this)),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]);const nt=getAnimation(this,`drawer.hide${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),rt=getAnimation(this,"drawer.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.drawer.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1;const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}handleNoModalChange(){this.open&&!this.contained&&(this.modal.activate(),lockBodyScrolling(this)),this.open&&this.contained&&(this.modal.deactivate(),unlockBodyScrolling(this))}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return y$2`
      <div
        part="base"
        class=${o$1({drawer:!0,"drawer--open":this.open,"drawer--top":this.placement==="top","drawer--end":this.placement==="end","drawer--bottom":this.placement==="bottom","drawer--start":this.placement==="start","drawer--contained":this.contained,"drawer--fixed":!this.contained,"drawer--rtl":this.localize.dir()==="rtl","drawer--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="drawer__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="drawer__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${l$2(this.noHeader?this.label:void 0)}
          aria-labelledby=${l$2(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":y$2`
                <header part="header" class="drawer__header">
                  <h2 part="title" class="drawer__title" id="title">
                    <!-- If there's no label, use an invisible character to prevent the header from collapsing -->
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="drawer__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="drawer__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click=${()=>this.requestClose("close-button")}
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="drawer__body"></slot>

          <footer part="footer" class="drawer__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDrawer.styles=drawer_styles_default;__decorateClass([i2$2(".drawer")],SlDrawer.prototype,"drawer",2);__decorateClass([i2$2(".drawer__panel")],SlDrawer.prototype,"panel",2);__decorateClass([i2$2(".drawer__overlay")],SlDrawer.prototype,"overlay",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDrawer.prototype,"open",2);__decorateClass([e2$2({reflect:!0})],SlDrawer.prototype,"label",2);__decorateClass([e2$2({reflect:!0})],SlDrawer.prototype,"placement",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDrawer.prototype,"contained",2);__decorateClass([e2$2({attribute:"no-header",type:Boolean,reflect:!0})],SlDrawer.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleOpenChange",1);__decorateClass([watch("contained",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleNoModalChange",1);SlDrawer=__decorateClass([e$1("sl-drawer")],SlDrawer);setDefaultAnimation("drawer.showTop",{keyframes:[{opacity:0,translate:"0 -100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideTop",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 -100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showEnd",{keyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideEnd",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showBottom",{keyframes:[{opacity:0,translate:"0 100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideBottom",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showStart",{keyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideStart",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.denyClose",{keyframes:[{scale:1},{scale:1.01},{scale:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});var divider_styles_default=i$4`
  ${component_styles_default}

  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,SlDivider=class extends ShoelaceElement{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};SlDivider.styles=divider_styles_default;__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDivider.prototype,"vertical",2);__decorateClass([watch("vertical")],SlDivider.prototype,"handleVerticalChange",1);SlDivider=__decorateClass([e$1("sl-divider")],SlDivider);var dropdown_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`,SlDropdown=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleMenuItemActivate=this.handleMenuItemActivate.bind(this),this.handlePanelSelect=this.handlePanelSelect.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const nt=this.trigger.assignedElements({flatten:!0})[0];typeof(nt==null?void 0:nt.focus)=="function"&&nt.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(nt=>nt.tagName.toLowerCase()==="sl-menu")}handleKeyDown(nt){this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide(),this.focusOnTrigger())}handleDocumentKeyDown(nt){var rt;if(nt.key==="Tab"){if(this.open&&((rt=document.activeElement)==null?void 0:rt.tagName.toLowerCase())==="sl-menu-item"){nt.preventDefault(),this.hide(),this.focusOnTrigger();return}setTimeout(()=>{var it,vt,bt;const wt=((it=this.containingElement)==null?void 0:it.getRootNode())instanceof ShadowRoot?(bt=(vt=document.activeElement)==null?void 0:vt.shadowRoot)==null?void 0:bt.activeElement:document.activeElement;(!this.containingElement||(wt==null?void 0:wt.closest(this.containingElement.tagName.toLowerCase()))!==this.containingElement)&&this.hide()})}}handleDocumentMouseDown(nt){const rt=nt.composedPath();this.containingElement&&!rt.includes(this.containingElement)&&this.hide()}handleMenuItemActivate(nt){const rt=nt.target;scrollIntoView(rt,this.panel)}handlePanelSelect(nt){const rt=nt.target;!this.stayOpenOnSelect&&rt.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}handleTriggerClick(){this.open?this.hide():this.show()}handleTriggerKeyDown(nt){if(nt.key==="Escape"&&this.open){nt.stopPropagation(),this.focusOnTrigger(),this.hide();return}if([" ","Enter"].includes(nt.key)){nt.preventDefault(),this.handleTriggerClick();return}const rt=this.getMenu();if(rt){const it=rt.defaultSlot.assignedElements({flatten:!0}),vt=it[0],bt=it[it.length-1];["ArrowDown","ArrowUp","Home","End"].includes(nt.key)&&(nt.preventDefault(),this.open||this.show(),it.length>0&&requestAnimationFrame(()=>{(nt.key==="ArrowDown"||nt.key==="Home")&&(rt.setCurrentItem(vt),vt.focus()),(nt.key==="ArrowUp"||nt.key==="End")&&(rt.setCurrentItem(bt),bt.focus())}))}}handleTriggerKeyUp(nt){nt.key===" "&&nt.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const rt=this.trigger.assignedElements({flatten:!0}).find(vt=>getTabbableBoundary(vt).start);let it;if(rt){switch(rt.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":it=rt.button;break;default:it=rt}it.setAttribute("aria-haspopup","true"),it.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){this.panel.addEventListener("sl-activate",this.handleMenuItemActivate),this.panel.addEventListener("sl-select",this.handlePanelSelect),this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel&&(this.panel.removeEventListener("sl-activate",this.handleMenuItemActivate),this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await stopAnimations(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await stopAnimations(this);const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return y$2`
      <sl-popup
        part="base"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        class=${o$1({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <slot
          part="panel"
          class="dropdown__panel"
          aria-hidden=${this.open?"false":"true"}
          aria-labelledby="dropdown"
        ></slot>
      </sl-popup>
    `}};SlDropdown.styles=dropdown_styles_default;__decorateClass([i2$2(".dropdown")],SlDropdown.prototype,"popup",2);__decorateClass([i2$2(".dropdown__trigger")],SlDropdown.prototype,"trigger",2);__decorateClass([i2$2(".dropdown__panel")],SlDropdown.prototype,"panel",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDropdown.prototype,"open",2);__decorateClass([e2$2({reflect:!0})],SlDropdown.prototype,"placement",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlDropdown.prototype,"disabled",2);__decorateClass([e2$2({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],SlDropdown.prototype,"stayOpenOnSelect",2);__decorateClass([e2$2({attribute:!1})],SlDropdown.prototype,"containingElement",2);__decorateClass([e2$2({type:Number})],SlDropdown.prototype,"distance",2);__decorateClass([e2$2({type:Number})],SlDropdown.prototype,"skidding",2);__decorateClass([e2$2({type:Boolean})],SlDropdown.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDropdown.prototype,"handleOpenChange",1);SlDropdown=__decorateClass([e$1("sl-dropdown")],SlDropdown);setDefaultAnimation("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});setDefaultAnimation("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});var menu_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,SlMenu=class extends ShoelaceElement{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(nt=>!!this.isMenuItem(nt))}handleClick(nt){const it=nt.target.closest("sl-menu-item");(it==null?void 0:it.disabled)===!1&&(it.type==="checkbox"&&(it.checked=!it.checked),this.emit("sl-select",{detail:{item:it}}))}handleKeyDown(nt){if(nt.key==="Enter"){const rt=this.getCurrentItem();nt.preventDefault(),rt==null||rt.click()}if(nt.key===" "&&nt.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(nt.key)){const rt=this.getAllItems(),it=this.getCurrentItem();let vt=it?rt.indexOf(it):0;rt.length>0&&(nt.preventDefault(),nt.key==="ArrowDown"?vt++:nt.key==="ArrowUp"?vt--:nt.key==="Home"?vt=0:nt.key==="End"&&(vt=rt.length-1),vt<0&&(vt=rt.length-1),vt>rt.length-1&&(vt=0),this.setCurrentItem(rt[vt]),rt[vt].focus())}}handleMouseDown(nt){const rt=nt.target;this.isMenuItem(rt)&&this.setCurrentItem(rt)}handleSlotChange(){const nt=this.getAllItems();nt.length>0&&this.setCurrentItem(nt[0])}isMenuItem(nt){var rt;return nt.tagName.toLowerCase()==="sl-menu-item"||["menuitem","menuitemcheckbox","menuitemradio"].includes((rt=nt.getAttribute("role"))!=null?rt:"")}getCurrentItem(){return this.getAllItems().find(nt=>nt.getAttribute("tabindex")==="0")}setCurrentItem(nt){this.getAllItems().forEach(it=>{it.setAttribute("tabindex",it===nt?"0":"-1")})}render(){return y$2`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}};SlMenu.styles=menu_styles_default;__decorateClass([i2$2("slot")],SlMenu.prototype,"defaultSlot",2);SlMenu=__decorateClass([e$1("sl-menu")],SlMenu);var menu_item_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: block;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:focus) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'])) .menu-item {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  :host(:focus-visible) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`,SlMenuItem=class extends ShoelaceElement{constructor(){super(...arguments),this.type="normal",this.checked=!1,this.value="",this.disabled=!1}handleDefaultSlotChange(){const nt=this.getTextLabel();if(typeof this.cachedTextLabel>"u"){this.cachedTextLabel=nt;return}nt!==this.cachedTextLabel&&(this.cachedTextLabel=nt,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1}))}handleCheckedChange(){if(this.checked&&this.type!=="checkbox"){this.checked=!1,console.error('The checked attribute can only be used on menu items with type="checkbox"',this);return}this.type==="checkbox"?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){this.type==="checkbox"?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return getTextContent(this.defaultSlot)}render(){return y$2`
      <div
        part="base"
        class=${o$1({"menu-item":!0,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":!1})}
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span class="menu-item__chevron">
          <sl-icon name="chevron-right" library="system" aria-hidden="true"></sl-icon>
        </span>
      </div>
    `}};SlMenuItem.styles=menu_item_styles_default;__decorateClass([i2$2("slot:not([name])")],SlMenuItem.prototype,"defaultSlot",2);__decorateClass([i2$2(".menu-item")],SlMenuItem.prototype,"menuItem",2);__decorateClass([e2$2()],SlMenuItem.prototype,"type",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlMenuItem.prototype,"checked",2);__decorateClass([e2$2()],SlMenuItem.prototype,"value",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlMenuItem.prototype,"disabled",2);__decorateClass([watch("checked")],SlMenuItem.prototype,"handleCheckedChange",1);__decorateClass([watch("disabled")],SlMenuItem.prototype,"handleDisabledChange",1);__decorateClass([watch("type")],SlMenuItem.prototype,"handleTypeChange",1);SlMenuItem=__decorateClass([e$1("sl-menu-item")],SlMenuItem);var tag_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--primary:active > sl-icon-button {
    color: var(--sl-color-primary-600);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--success:active > sl-icon-button {
    color: var(--sl-color-success-600);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--neutral:active > sl-icon-button {
    color: var(--sl-color-neutral-600);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--warning:active > sl-icon-button {
    color: var(--sl-color-warning-600);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  .tag--danger:active > sl-icon-button {
    color: var(--sl-color-danger-600);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`,SlTag=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return y$2`
      <span
        part="base"
        class=${o$1({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?y$2`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </span>
    `}};SlTag.styles=tag_styles_default;__decorateClass([e2$2({reflect:!0})],SlTag.prototype,"variant",2);__decorateClass([e2$2({reflect:!0})],SlTag.prototype,"size",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTag.prototype,"pill",2);__decorateClass([e2$2({type:Boolean})],SlTag.prototype,"removable",2);SlTag=__decorateClass([e$1("sl-tag")],SlTag);const _hoisted_1$r={class:"content-path",style:{position:"relative"}},_hoisted_2$n={class:"workspace"},_hoisted_3$h=["content","disabled"],_hoisted_4$d=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_5$b=[_hoisted_4$d],_hoisted_6$9={class:"ws-path"},_hoisted_7$8={class:"breadcrumbs"},_hoisted_8$8=createBaseVNode("sl-icon",{slot:"prefix",name:"folder2",style:{fontSize:"24px"}},null,-1),_hoisted_9$6=["innerHTML","onClick"],_hoisted_10$5=["onClick"],_hoisted_11$4=createBaseVNode("sl-icon",{slot:"prefix",name:"filetype-md",style:{fontSize:"24px"}},null,-1),_hoisted_12$3={slot:"suffix"},_hoisted_13$3=createBaseVNode("sl-icon-button",{slot:"trigger",name:"caret-down",label:"File actions"},null,-1),_hoisted_14$3=["onClick"],_hoisted_15$3=createBaseVNode("sl-icon",{slot:"prefix",name:"trash"},null,-1),_hoisted_16$3=["innerHTML","onClick"],_hoisted_17$3=["onClick"],_hoisted_18$3=createBaseVNode("sl-icon",{slot:"prefix",name:"folder2",style:{fontSize:"24px"}},null,-1),_hoisted_19$3=["content"],_hoisted_20$3=["size","name"],_hoisted_21$3=createBaseVNode("sl-icon",{name:"plus-lg",label:"Add file"},null,-1),_hoisted_22$3=[_hoisted_21$3],_hoisted_23$3={noHeader:"",label:"Workspace",placement:"bottom",contained:"",class:"workspace-selector",style:{"--size":"100%"}},_hoisted_24$3={style:{display:"flex",height:"100%","align-items":"center"}},_hoisted_25$3={key:0,class:"github-select"},_hoisted_26$3={key:1,name:"chevron-double-right",style:{fontSize:"24px"}},_hoisted_27$3={style:{"margin-left":"12px"}},_hoisted_28$3=["disabled"],_hoisted_29$2={key:0},_hoisted_30$2={key:0,slot:"trigger",class:"path-elem"},_hoisted_31$2={key:1,slot:"trigger",pill:"",size:"medium",class:"folder"},_hoisted_32$2=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_33$2=["checked","onClick","innerHTML"],_hoisted_34$2={key:0,class:"path-elem"},_hoisted_35$2={key:1,pill:"",size:"medium",class:"folder"},_hoisted_36$2=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_37$1=["disabled"],_hoisted_38$1={key:0},_hoisted_39$1={key:0,slot:"trigger",class:"path-elem"},_hoisted_40$1={key:1,slot:"trigger",pill:"",size:"medium"},_hoisted_41$1=createBaseVNode("sl-icon",{slot:"prefix",name:"archive",style:{fontSize:"24px"}},null,-1),_hoisted_42=["checked","onClick","innerHTML"],_hoisted_43=createBaseVNode("sl-divider",null,null,-1),_hoisted_44=createBaseVNode("sl-icon",{slot:"prefix",name:"plus-lg"},null,-1),_hoisted_45={key:0,class:"path-elem"},_hoisted_46={key:1,pill:"",size:"medium"},_hoisted_47=createBaseVNode("sl-icon",{slot:"prefix",name:"archive",style:{fontSize:"24px"}},null,-1),_hoisted_48=["disabled"],_hoisted_49={key:0},_hoisted_50={key:0,slot:"trigger",class:"path-elem"},_hoisted_51={key:1,slot:"trigger",pill:"",size:"medium"},_hoisted_52=createBaseVNode("sl-icon",{slot:"prefix",name:"share",style:{fontSize:"24px"}},null,-1),_hoisted_53=["checked","onClick","innerHTML"],_hoisted_54={key:0,class:"path-elem"},_hoisted_55={key:1,pill:"",size:"medium"},_hoisted_56=createBaseVNode("sl-icon",{slot:"prefix",name:"share",style:{fontSize:"24px"}},null,-1),_hoisted_57={key:0},_hoisted_58={key:1,class:"dirs"},_hoisted_59=["onClick"],_hoisted_60=["name"],_hoisted_61=["content"],_hoisted_62=createBaseVNode("sl-icon",{name:"plus-lg",label:"Add file"},null,-1),_hoisted_63=[_hoisted_62],_hoisted_64=createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"add-repo-input",placeholder:"Enter name",pattern:"^[A-z0-9\\-_]+$"},null,-1),_hoisted_65=createBaseVNode("br",null,null,-1),_hoisted_66=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_hoisted_67=createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"add-file-input",placeholder:"Enter file path",pattern:"^\\/?([A-z0-9-_+]+\\/)*([A-z0-9\\-]+(\\.(css|md|json|geojson|yaml|yml))?)$"},null,-1),_hoisted_68=createBaseVNode("br",null,null,-1),_hoisted_69=createBaseVNode("sl-button",{type:"reset",variant:"default"},"Reset",-1),_hoisted_70=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_hoisted_71={id:"delete-file-dialog",label:"Confirm file delete"},_hoisted_72=["innerHTML"],_sfc_main$t=defineComponent({__name:"ContentSelector.ce",props:{contentPath:{type:String},sticky:{type:Boolean,default:!1},mode:{type:String,default:"media"},compact:{type:Boolean}},emits:["accessChanged","addMediaResource","contentPathChanged"],setup(nt,{expose:rt,emit:it}){const vt=nt;rt({getDirList:Mr,getFile:vr,putFile:cr,repositoryIsWriteable:rr});const bt=new Set(["config.yaml","CNAME","index.html","404.html",".nojekyll"]),wt=ref("");watch$1(wt,()=>{console.log(`contentPath=${toRaw(wt.value)}`),it("contentPathChanged",wt.value)});const Tt=ref(null),kt=computed(()=>{var $n;return($n=Tt==null?void 0:Tt.value)==null?void 0:$n.parentNode});let Lt,Mt="",Nt=!0;const zt=ref();watch$1(zt,()=>{zt.value&&Ln()});const Ht=ref(isMobile()),Wt=ref(""),Zt=ref(),tn=ref(!1),Yt=ref(!1);watch$1(Wt,()=>{tn.value=window.localStorage.getItem("gh-auth-token")!==null,Zt.value=new GithubClient(Wt.value||"")}),watch$1(tn,()=>{tn||(Mt="",Yt.value=!1)}),watch$1(Yt,()=>{it("accessChanged",{acct:rn.value,repo:sn.value,canUpdate:Yt.value})}),watch$1(Zt,async()=>{kn(),tn.value&&(nn.value=await pr(),Mt=await Zt.value.user().then($n=>$n.login),await Zt.value.repos(Mt).then($n=>{$n.find(Qn=>Qn.name==="essays")||Zt.value.createRepository({name:"essays",description:"Juncture visual essays"}),$n.find(Qn=>Qn.name==="media")||Zt.value.createRepository({name:"media",description:"Juncture media"})}),rn.value&&sn.value&&Mt&&Zt.value.isCollaborator(rn.value,sn.value,Mt).then($n=>Yt.value=$n))});const nn=ref([]),rn=ref("");watch$1(nn,()=>{rn.value=rn.value||(nn.value.length>0?nn.value[0].login:null)}),watch$1(rn,($n,Qn)=>{Qn&&(sn.value=""),yn().then(Wn=>ln.value=Wn)});const ln=ref([]),sn=ref("");watch$1(ln,()=>{if(!sn.value&&ln.value.length>0)if(ln.value.length===1)sn.value=ln.value[0].name;else{let $n=vt.mode==="media"?"media":"essays";sn.value=ln.value.find(Qn=>Qn.name===$n)?$n:ln.value[0].name}});const mn=ref([]),wn=ref("");watch$1(sn,($n,Qn)=>{Qn&&(An.value=[]),Er().then(Wn=>gn()),wn.value="",sn.value&&(tn.value&&rn.value&&Zt.value.user().then(Wn=>Wn.login).then(Wn=>sn.value?Zt.value.isCollaborator(rn.value,sn.value,Wn):!1).then(Wn=>Yt.value=Wn),mr().then(Wn=>mn.value=Wn))});let Cn;watch$1(mn,async()=>{!Cn&&rn.value&&sn.value&&(Cn=await Zt.value.defaultBranch(rn.value,sn.value)),Cn&&(wn.value=Cn)}),watch$1(wn,()=>{wn.value&&An.value&&Pn&&Er().then($n=>gn())});const An=ref([]);watch$1(An,()=>{wn.value&&Er().then($n=>gn())});let Pn=!0;const On=ref([]);watch$1(On,()=>{Pn=An.value.length===0||On.value.length>0}),onMounted(()=>{var $n;pn(),window.addEventListener("storage",()=>pn()),Lt=($n=kt==null?void 0:kt.value)==null?void 0:$n.querySelector(".workspace-selector")});function kn($n=""){var Qn;if($n=$n||vt.contentPath||"",$n){let[Wn,or]=((Qn=$n.split(":").pop())==null?void 0:Qn.split("?"))||[],dr=or?Object.fromEntries(or.split("&").map(br=>br.split("="))):{},kr=Wn.split("/").filter(br=>br);kr.length>0&&(rn.value=kr[0]),kr.length>1&&(sn.value=kr[1]),kr.length>2&&(An.value=kr.slice(2)),dr.ref&&(wn.value=dr.ref||"main")}}function gn(){if(rn.value&&sn.value){let $n=`gh:${rn.value}/${sn.value}`;An.value.length>0&&($n+=`/${An.value.join("/")}`),wn.value&&wn.value!==Cn&&($n+=`?ref=${wn.value}`),wt.value=$n}}async function Vn(){let Qn=await fetch("https://api.juncture-digital.org/gh-token");if(Qn.ok){let Wn=await Qn.text();window.localStorage.setItem("gh-unscoped-token",Wn)}}async function pn(){window.localStorage.getItem("gh-unscoped-token")||await Vn(),Wt.value=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token"),tn.value=window.localStorage.getItem("gh-auth-token")!==null}async function pr(){return await Promise.all([Zt.value.user(),Zt.value.organizations()]).then($n=>$n.flat())}async function yn(){return Zt.value.repos(rn.value)}async function mr(){return Zt.value.branches(rn.value,sn.value)}async function Er(){On.value=[];let $n=await Zt.value.dirlist(rn.value,sn.value,An.value.join("/"),wn.value),Qn=$n.filter(or=>or.type==="dir"),Wn=$n.filter(or=>or.type==="file"&&!bt.has(or.name));Nt&&Wn.find(or=>or.name==="README.md")&&Qn.length===0&&(An.value.length===0||An.value[An.value.length-1]!=="README.md")&&(An.value=[...An.value,"README.md"]),On.value=[...Qn,...Wn]}function Mr(){return On.value}function rr(){return Yt.value}async function vr($n){var _r;let[Qn,Wn]=((_r=$n.split(":").pop())==null?void 0:_r.split("?"))||[],or=Wn?Object.fromEntries(Wn.split("&").map(hi=>hi.split("="))):{},dr=Qn.split("/").filter(hi=>hi),[kr,br]=dr.slice(0,2);return Qn=dr.slice(2).filter(hi=>hi).join("/"),Zt.value.getFile(kr,br,Qn,or.ref||wn.value)}async function cr($n,Qn){var di;let[Wn,or]=((di=$n.split(":").pop())==null?void 0:di.split("?"))||[],dr=or?Object.fromEntries(or.split("&").map(vi=>vi.split("="))):{},kr=Wn.split("/").filter(vi=>vi),[br,_r]=kr.slice(0,2);Wn=kr.slice(2).filter(vi=>vi).join("/");let hi=dr.ref||wn.value;return Zt.value.putFile(br,_r,Wn,Qn,hi)}function gr($n){rn.value=$n.login}function Or($n){sn.value=$n.name}function Ar($n){wn.value=$n.name}function sr($n){Lt.hide(),Nt=!0;let Qn=[...An.value];Pn||(Qn=Qn.slice(0,-1)),(Qn.length===0||Qn[Qn.length-1]!==$n.name)&&(Qn=[...Qn,$n.name]),An.value=Qn}function ii($n){Lt.hide(),Nt=!1,An.value=$n===0?[]:An.value.slice(0,$n)}function ar($n){vt.mode==="essays"?wr():In($n)}function fr($n){return $n.toLowerCase().split("-").map(function(Qn){return Qn.charAt(0).toUpperCase()+Qn.slice(1)}).join(" ")}function wr(){var Wn,or;let $n=(Wn=kt.value)==null?void 0:Wn.querySelector("#add-file-form");$n.onclick||($n.onclick=function(){},$n.addEventListener("submit",async dr=>{var di;dr.preventDefault();let kr=(di=kt.value)==null?void 0:di.querySelector("#add-file-input"),br=[...An.value,...kr.value.split("/").filter(vi=>vi)],_r=br[br.length-1];br[br.length-1].indexOf(".")>0?br[br.length-1]=br[br.length-1].replace(/readme\.md/,"README.md"):br.push("README.md");let hi=br.join("/");_r=fr(_r),await Zt.value.putFile(rn.value,sn.value,hi,`# ${_r}

`,wn.value),An.value=br,ir()}));let Qn=(or=kt.value)==null?void 0:or.querySelector("#add-file-dialog");Qn.addEventListener("sl-after-show",()=>{var dr;((dr=kt.value)==null?void 0:dr.querySelector("#add-file-input")).focus()}),Qn.show()}function ir(){var $n,Qn;(($n=kt.value)==null?void 0:$n.querySelector("#add-file-input")).value="",((Qn=kt.value)==null?void 0:Qn.querySelector("#add-file-dialog")).hide()}function Ln(){var Qn;((Qn=kt.value)==null?void 0:Qn.querySelector("#delete-file-dialog")).show()}function en(){var Qn;((Qn=kt.value)==null?void 0:Qn.querySelector("#delete-file-dialog")).hide()}async function dn(){var Wn,or;let $n=(Wn=kt.value)==null?void 0:Wn.querySelector("#add-repo-form");$n.onclick||($n.onclick=function(){},$n.addEventListener("submit",async dr=>{var hi;dr.preventDefault();let br=((hi=kt.value)==null?void 0:hi.querySelector("#add-repo-input")).value;(await Zt.value.createRepository({name:br,org:Mt===rn.value?null:rn.value})).status===201&&yn().then(di=>{sn.value=br,ln.value=di}),un()}));let Qn=(or=kt.value)==null?void 0:or.querySelector("#add-repo-dialog");Qn.addEventListener("sl-after-show",()=>{var dr;((dr=kt.value)==null?void 0:dr.querySelector("#add-repo-input")).focus()}),Qn.show()}function un(){var Qn,Wn;((Qn=kt.value)==null?void 0:Qn.querySelector("#add-repo-dialog")).hide(),((Wn=kt.value)==null?void 0:Wn.querySelector("#add-repo-input")).value=""}async function Nn(){let $n=An.value.join("/");await Zt.value.deleteFile(rn.value,sn.value,$n,wn.value),await Er(),ii(An.value.length-(On.value.length===0?2:1)),zt.value=null,en()}function In($n){it("addMediaResource",$n)}function lr(){Lt.open?Lt.hide():Lt.show()}return($n,Qn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Tt},[createBaseVNode("section",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$n,[createBaseVNode("sl-tooltip",{content:`${rn.value}: ${sn.value} (${wn.value})`,disabled:Ht.value,placement:"bottom"},[createBaseVNode("sl-button",{pill:"",size:"medium",onClick:lr},_hoisted_5$b)],8,_hoisted_3$h),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("div",_hoisted_7$8,[createBaseVNode("sl-breadcrumb",null,[createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-button",{pill:"",size:"medium",onClick:Qn[0]||(Qn[0]=Wn=>ii(0))},[createTextVNode("/ "),_hoisted_8$8])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(An.value,(Wn,or)=>(openBlock(),createElementBlock("sl-breadcrumb-item",{key:`bci-${or}`},[or===An.value.length-1?(openBlock(),createElementBlock(Fragment,{key:0},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Wn,onClick:dr=>ii(or+1)},null,8,_hoisted_9$6)):(openBlock(),createElementBlock("sl-button",{key:1,pill:"",size:"medium",onClick:dr=>ii(or+1)},[createTextVNode(toDisplayString(Wn)+" ",1),_hoisted_11$4],8,_hoisted_10$5)),createBaseVNode("sl-dropdown",_hoisted_12$3,[_hoisted_13$3,createBaseVNode("sl-menu",null,[createBaseVNode("sl-menu-item",{onClick:()=>zt.value=Wn},[createTextVNode("Delete file"),_hoisted_15$3],8,_hoisted_14$3)])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Wn,onClick:dr=>ii(or+1)},null,8,_hoisted_16$3)):(openBlock(),createElementBlock("sl-button",{key:1,pill:"",size:"medium",onClick:dr=>ii(or+1)},[createTextVNode(toDisplayString(Wn)+" ",1),_hoisted_18$3],8,_hoisted_17$3))],64))]))),128))]),tn.value&&nt.mode==="media"?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Add ${vt.mode==="media"?"resource":"file"}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",size:nt.mode==="media"?"medium":"small",class:"add-item",name:`Add ${nt.mode==="media"?"resource":"file"}`,circle:"",onClick:ar},_hoisted_22$3,8,_hoisted_20$3)],8,_hoisted_19$3)):createCommentVNode("",!0)]),createBaseVNode("sl-drawer",_hoisted_23$3,[createBaseVNode("div",_hoisted_24$3,[nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_25$3,"Select GitHub Repository")),nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("sl-icon",_hoisted_26$3)),createBaseVNode("sl-breadcrumb",_hoisted_27$3,[createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Account",hoist:"",disabled:Ht.value,placement:"left"},[nn.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_29$2,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_30$2,toDisplayString(rn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_31$2,[createTextVNode(toDisplayString(rn.value)+" ",1),_hoisted_32$2])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(nn.value,(Wn,or)=>(openBlock(),createElementBlock("sl-menu-item",{key:`acct-${or}`,checked:Wn.login===rn.value,onClick:dr=>gr(Wn),type:"checkbox",innerHTML:Wn.login},null,8,_hoisted_33$2))),128))])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_34$2,toDisplayString(wn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_35$2,[createTextVNode(toDisplayString(rn.value)+" ",1),_hoisted_36$2]))],64))],8,_hoisted_28$3)]),createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Repository",hoist:"",disabled:Ht.value,placement:"left"},[ln.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_38$1,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_39$1,toDisplayString(sn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_40$1,[createTextVNode(toDisplayString(sn.value)+" ",1),_hoisted_41$1])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ln.value,(Wn,or)=>(openBlock(),createElementBlock("sl-menu-item",{key:`repo-${or}`,checked:Wn.name===sn.value,onClick:dr=>Or(Wn),type:"checkbox",innerHTML:Wn.name},null,8,_hoisted_42))),128)),_hoisted_43,createBaseVNode("sl-menu-item",{class:"add-repo",onClick:dn},[_hoisted_44,createTextVNode(" New repository ")])])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_45,toDisplayString(sn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_46,[createTextVNode(toDisplayString(sn.value)+" ",1),_hoisted_47]))],64))],8,_hoisted_37$1)]),createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Branch",hoist:"",disabled:Ht.value,placement:"left"},[mn.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_49,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_50,toDisplayString(wn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_51,[createTextVNode(toDisplayString(wn.value)+" ",1),_hoisted_52])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(mn.value,(Wn,or)=>(openBlock(),createElementBlock("sl-menu-item",{key:`branch-${or}`,checked:Wn.name===wn.value,onClick:dr=>Ar(Wn),type:"checkbox",innerHTML:Wn.name},null,8,_hoisted_53))),128))])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_54,toDisplayString(wn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_55,[createTextVNode(toDisplayString(wn.value)+" ",1),_hoisted_56]))],64))],8,_hoisted_48)])])])])])]),On.value.filter(Wn=>vt.mode==="essays"||Wn.type==="dir").length>0?(openBlock(),createElementBlock("sl-divider",_hoisted_57)):createCommentVNode("",!0),On.value.length>0?(openBlock(),createElementBlock("div",_hoisted_58,[(openBlock(!0),createElementBlock(Fragment,null,renderList(On.value.filter(Wn=>vt.mode==="essays"||Wn.type==="dir"),(Wn,or)=>(openBlock(),createElementBlock("sl-button",{key:`child-${or}`,onClick:dr=>sr(Wn),pill:"",size:"small",class:normalizeClass(Wn.type)},[createBaseVNode("sl-icon",{slot:"prefix",name:Wn.type==="dir"?"folder2":"file-earmark"},null,8,_hoisted_60),createTextVNode(" "+toDisplayString(Wn.name),1)],10,_hoisted_59))),128)),An.value&&(An.value.length===0||An.value[An.value.length-1].split(".").pop()!=="md")&&vt.mode==="essays"?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Add ${nt.mode==="media"?"resource":"file"}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",size:"small",class:"add-item",name:"`Add file",circle:"",onClick:ar},_hoisted_63)],8,_hoisted_61)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("sl-dialog",{id:"add-repo-dialog",label:"Add Repository"},[createBaseVNode("form",{id:"add-repo-form",class:"input-validation-pattern"},[_hoisted_64,_hoisted_65,createBaseVNode("sl-button",{onClick:un},"Cancel"),_hoisted_66])]),createBaseVNode("sl-dialog",{id:"add-file-dialog",label:"Add File"},[createBaseVNode("form",{id:"add-file-form",class:"input-validation-pattern"},[_hoisted_67,_hoisted_68,createBaseVNode("sl-button",{onClick:ir},"Cancel"),_hoisted_69,_hoisted_70])]),createBaseVNode("sl-dialog",_hoisted_71,[createBaseVNode("div",null,[createTextVNode("Delete file "),createBaseVNode("span",{innerHTML:zt.value},null,8,_hoisted_72),createTextVNode("?")]),createBaseVNode("sl-button",{slot:"footer",onClick:en},"Cancel"),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Nn},"Confirm")])],512))}}),_style_1$5=`*{box-sizing:border-box}:host{display:block;width:100%;border:1px solid #444;padding:6px;z-index:9;background-color:#fff}span.path-elem{font-family:Archivo Narrow,Roboto,sans-serif;font-size:1.2rem}.workspace{display:flex;align-items:center}.workspace-selector{display:flex;gap:12px}.workspace-selector div{display:inline-flex;position:relative;padding-left:6px;font-size:1rem}.selectors{display:flex;gap:6px}.ws-path{position:relative;display:flex;align-items:center;width:100%;height:100%;margin:3px}.workspace-selector>sl-icon{vertical-align:middle;padding-right:6px}sl-drawer::part(base),sl-drawer::part(panel),sl-drawer::part(body){padding:0;overflow:visible}.github-select{font-weight:700;font-size:1.2em;color:#5a162e}sl-divider{margin:6px}.values{display:flex;flex-direction:column;gap:1rem}.values>div{display:flex;align-items:center;gap:1rem}.label{font-weight:700}.value{display:inline-block}sl-breadcrumb-item::part(label){font-size:1rem;color:var(--sl-color-primary-600)}.dir-items li{cursor:pointer}.dir-items{height:40vh;overflow-y:scroll}.dir-items li:hover{color:var(--sl-color-primary-600)}sl-icon-button::part(base){padding:0}.content-path{display:flex;flex-direction:column}sl-icon-button{align-self:start;margin-top:6px}sl-menu::part(base){max-height:300px;overflow-y:scroll}.dirs{display:flex;flex-wrap:wrap;gap:6px}.dirs sl-button::part(base){border-radius:12px;font-weight:500;font-family:Archivo Narrow,Roboto,sans-serif;font-size:1rem}sl-button.dir::part(base){background-color:#eee}sl-button.add-item::part(base){background-color:#eee;color:#000}.delete{margin-left:18px}sl-icon-button.delete::part(base){color:red}.add-repo{background-color:#ddd}sl-menu{text-align:left}sl-breadcrumb{display:inline-block}.breadcrumbs{display:flex;align-items:center;gap:12px;padding-left:12px}
`,ContentSelector=_export_sfc(_sfc_main$t,[["styles",[_style_0$o,_style_1$5]]]),_hoisted_1$q={class:"content"},_hoisted_2$m={class:"buttons"},_hoisted_3$g=["onClick"],_hoisted_4$c=["qid"],_hoisted_5$a={key:0,class:"caption"},_sfc_main$s=defineComponent({__name:"Entities.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Zt;return(Zt=it==null?void 0:it.value)==null?void 0:Zt.parentNode}),bt=computed(()=>{var Zt,tn;return(tn=(Zt=it.value)==null?void 0:Zt.getRootNode())==null?void 0:tn.host}),wt=computed(()=>{var Zt;return(Zt=vt.value)==null?void 0:Zt.querySelector(".content")}),Tt=ref({}),kt=ref(null),Lt=computed(()=>{var Zt,tn;return((tn=(Zt=kt.value)==null?void 0:Zt.getAttribute("entities"))==null?void 0:tn.split(/\s/).filter(Yt=>Yt))||[]}),Mt=ref();watch$1(Lt,()=>{Lt.value.length>0?getEntityData(Lt.value).then(Zt=>{Tt.value=Zt,Mt.value=Lt.value[0]}):(Tt.value={},Mt.value=void 0)}),watch$1(bt,()=>Nt());function Nt(){Ht(),Wt()}const zt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Ht(){bt.value.classList.add("ve-component"),bt.value.classList.add(zt),zt==="full"?bt.value.style.width="100%":(bt.value.style.float=zt,bt.value.style.width="calc(50% - 16px)"),bt.value.style.width=window.getComputedStyle(bt.value).width,rt.sticky&&makeSticky(bt.value),wt.value.style.width=rt.width||"100%",nextTick(()=>{let Zt=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2));rt.sticky,wt.value.style.width=`${Zt}px`})}function Wt(){kt.value=document.querySelector(".active"),new MutationObserver(tn=>{tn.forEach(Yt=>{if(Yt.type==="attributes"){let nn=Yt.target;Array.from(nn.classList).indexOf("active")>=0&&(kt.value=nn)}})}).observe(document,{subtree:!0,attributes:!0})}return(Zt,tn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$q,[createBaseVNode("div",_hoisted_2$m,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Lt),Yt=>{var nn;return openBlock(),createElementBlock("sl-button",{key:Yt,onClick:rn=>Mt.value=Yt,pill:"",size:"small",class:normalizeClass({selected:Yt===Mt.value})},toDisplayString((nn=Tt.value[Yt])==null?void 0:nn.label),11,_hoisted_3$g)}),128))]),Mt.value?(openBlock(),createElementBlock("ve-entity-card",{key:0,qid:Mt.value},null,8,_hoisted_4$c)):createCommentVNode("",!0)]),rt.caption&&Mt.value?(openBlock(),createElementBlock("div",_hoisted_5$a,toDisplayString(rt.caption),1)):createCommentVNode("",!0)],512))}}),_style_0$m=`*{box-sizing:border-box}.main{margin-bottom:3rem}.buttons{display:flex;flex-wrap:wrap;gap:6px;padding:0 0 12px}.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}sl-button.selected::part(base){background-color:#ddd;font-weight:700}
`,Entities=_export_sfc(_sfc_main$s,[["styles",[_style_0$m]]]),_hoisted_1$p=["innerHTML"],_hoisted_2$l=["innerHTML"],_hoisted_3$f={class:"links"},_hoisted_4$b={key:0,class:"logo",title:"Wikipedia"},_hoisted_5$9=["href"],_hoisted_6$8=createBaseVNode("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/77/Wikipedia_svg_logo.svg"},null,-1),_hoisted_7$7=[_hoisted_6$8],_hoisted_8$7=["innerHTML"],_sfc_main$r=defineComponent({__name:"EntityCard.ce",props:{qid:{type:String,required:!0}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Ht,Wt;return(Wt=(Ht=it.value)==null?void 0:Ht.getRootNode())==null?void 0:Wt.host}),bt=ref(rt.qid),wt=ref(),Tt=computed(()=>{var Ht;return((Ht=wt.value)==null?void 0:Ht.thumbnail)&&`url('${Nt(wt.value.thumbnail)}')`}),kt=computed(()=>`${vt.value.clientWidth*.33}px`);watch$1(vt,()=>Lt()),watch$1(rt,()=>{bt.value!==rt.qid&&(bt.value=rt.qid)});function Lt(){Mt()}watch$1(bt,()=>Mt());async function Mt(){if(!wt.value||wt.value.id!==rt.qid){let Ht=await getEntity(bt.value),Wt=await getSummaryText(bt.value);Wt&&(Ht={...Ht,summaryText:Wt}),wt.value=Ht}}function Nt(Ht){let Wt=Ht.split("/");return`${Wt.slice(0,-1).join("/")}/${encodeURIComponent(Wt[Wt.length-1])}`}function zt(Ht){return new DOMParser().parseFromString(Ht,"text/html").children[0].children[1].children[0].innerHTML}return(Ht,Wt)=>{var Zt,tn,Yt,nn;return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:(Zt=wt.value)==null?void 0:Zt.label},null,8,_hoisted_1$p),createBaseVNode("div",{class:"description",innerHTML:(tn=wt.value)==null?void 0:tn.description},null,8,_hoisted_2$l),unref(Tt)?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:unref(Tt),width:unref(kt)})},null,4)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$f,[(Yt=wt.value)!=null&&Yt.wikipedia?(openBlock(),createElementBlock("span",_hoisted_4$b,[createBaseVNode("a",{target:"_blank",href:wt.value.wikipedia},_hoisted_7$7,8,_hoisted_5$9)])):createCommentVNode("",!0)]),(nn=wt.value)!=null&&nn.summaryText?(openBlock(),createElementBlock("p",{key:1,class:"summary",innerHTML:zt(wt.value.summaryText)},null,8,_hoisted_8$7)):createCommentVNode("",!0)],512)}}}),_style_0$l=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border:1px solid #444;border-radius:6px;min-height:150px;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;object-fit:cover;background-repeat:no-repeat;background-size:contain;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,EntityCard=_export_sfc(_sfc_main$r,[["styles",[_style_0$l]]]),_hoisted_1$o=["innerHTML"],_sfc_main$q=defineComponent({__name:"Essay.ce",props:{src:{type:String},prefix:{type:String}},setup(nt){const rt=nt,it=location.hostname==="localhost"?"http://localhost:8000":"https://api.juncture-digital.org",vt=ref(null),bt=computed(()=>{var Nt,zt;return(zt=(Nt=vt.value)==null?void 0:Nt.getRootNode())==null?void 0:zt.host}),wt=computed(()=>{var Nt;return(Nt=vt==null?void 0:vt.value)==null?void 0:Nt.parentNode}),Tt=computed(()=>{var Nt,zt;return(zt=(Nt=bt.value)==null?void 0:Nt.querySelector("pre"))==null?void 0:zt.textContent}),kt=ref(),Lt=ref();watch$1(Tt,()=>{let Nt=Tt.value.split(`
`),zt=[];if(Nt.forEach(Ht=>{(Ht.trim().length>0||zt.length>0)&&zt.push(Ht)}),zt.length>0){let Ht=(zt[0].match(/(^\s+)/)||[""])[0].length;kt.value=zt.map(Wt=>(Wt.match(/(^\s+)/)||[""])[0].length>=Ht?Wt.slice(Ht):Wt).join(`
`)}}),watch$1(kt,()=>Mt()),watch$1(bt,()=>{let Nt=bt.value.textContent.split(`
`),zt=[];if(Nt.forEach(Ht=>{(Ht.trim().length>0||zt.length>0)&&zt.push(Ht)}),zt.length>0){let Ht=(zt[0].match(/(^\s+)/)||[""])[0].length;kt.value=zt.map(Wt=>(Wt.match(/(^\s+)/)||[""])[0].length>=Ht?Wt.slice(Ht):Wt).join(`
`)}});function Mt(){Lt.value="";let Nt=`${it}/html/?inline=true`;fetch(Nt,{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:"",markdown:kt.value})}).then(zt=>zt.text()).then(zt=>{let Wt=new DOMParser().parseFromString(zt,"text/html").children[0].children[1].querySelector("main");Wt&&(Wt.id="juncture"),Wt&&(Lt.value=Wt.innerHTML),nextTick(()=>{var tn;let Zt=(tn=wt.value)==null?void 0:tn.querySelector("#juncture");Zt&&observeActive(Zt)})})}return(Nt,zt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:vt,id:"main"},[Lt.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",innerHTML:Lt.value},null,8,_hoisted_1$o)):createCommentVNode("",!0)],512))}}),_style_1$4=`[v-cloak]{display:none}*{box-sizing:border-box}#main{font-family:Roboto,sans-serif;margin-top:0}#juncture{padding:12px;font-size:1.2em;line-height:1.3}@media (max-width: 480px){#juncture{padding:0}}
`,Essay=_export_sfc(_sfc_main$q,[["styles",[_style_0$o,_style_1$4]]]),_hoisted_1$n=["content","disabled"],_hoisted_2$k=["name"],_sfc_main$p=defineComponent({__name:"FAB.ce",props:{color:{type:String,default:"red"},label:{type:String},icon:{type:String},action:{type:String},right:{type:String,default:"35px"},bottom:{type:String,default:"35px"},disabled:{type:Boolean}},emits:["fabClicked"],setup(nt,{emit:rt}){const it=nt,vt=ref(null),bt=ref(isMobile());function wt(){rt("fabClicked",it.action)}return(Tt,kt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:vt,class:"fab-wrapper",style:normalizeStyle({right:it.right,bottom:it.bottom})},[createBaseVNode("sl-tooltip",{content:it.label,placement:"top",disabled:bt.value||it.disabled},[createBaseVNode("span",{"data-action":"props.action",class:"fab-button",onClick:wt,style:normalizeStyle({visibility:it.disabled?"hidden":"visible",backgroundColor:it.color})},[createBaseVNode("sl-icon",{name:it.icon,style:{"font-size":"36px"}},null,8,_hoisted_2$k)],4)],8,_hoisted_1$n)],4))}}),_style_0$k=`.fab-wrapper{position:absolute;bottom:35px;right:35px}.fab-button{height:56px;width:56px;background-color:red;border-radius:50%;color:#fff;z-index:1;display:flex;align-items:center;justify-content:center;text-decoration:none;opacity:.4}.fab-button:hover{opacity:1;transition:all .4s;cursor:pointer}.fab-button i{font-size:16px;transform:rotate(0);transition:all .4s}
`,FAB=_export_sfc(_sfc_main$p,[["styles",[_style_0$k]]]),_hoisted_1$m=["name","label","onClick"],_hoisted_2$j=["innerHTML","onClick"],_hoisted_3$e=["src"],_sfc_main$o=defineComponent({__name:"Footer.ce",props:{sticky:{type:Boolean}},setup(nt){const rt=nt,it={"view-code":{icon:"markdown",label:"View Page Code"}},vt=ref([]),bt=ref(null),wt=computed(()=>{var tn,Yt;return(Yt=(tn=bt.value)==null?void 0:tn.getRootNode())==null?void 0:Yt.host}),Tt=computed(()=>{var tn;return(tn=bt==null?void 0:bt.value)==null?void 0:tn.parentNode}),kt=ref(!1);watch$1(kt,()=>Lt.open=kt.value);let Lt;const Mt=ref();watch$1(wt,()=>{var tn;Lt=(tn=Tt.value)==null?void 0:tn.querySelector(".page-source-dialog"),Lt.addEventListener("sl-hide",()=>kt.value=!1)}),watch$1(wt,()=>Nt());function Nt(){var tn;wt.value.style.clear="both",rt.sticky&&zt(),vt.value=Array.from((tn=wt.value)==null?void 0:tn.querySelectorAll("li"))}function zt(){wt.value.classList.add("sticky");let tn=wt.value.offsetHeight;tn+=parseInt(window.getComputedStyle(wt.value).getPropertyValue("margin-top")),tn+=parseInt(window.getComputedStyle(wt.value).getPropertyValue("margin-bottom"));let Yt=document.querySelector("main");Yt&&(Yt.style.paddingBottom=`${tn}px`),wt.value.style.width=`${wt.value.parentElement.clientWidth}px`,document.body.style.marginBottom="80px"}function Ht(tn){return tn?Object.fromEntries(tn.split(";").filter(Yt=>Yt.trim()).map(Yt=>Yt.split(":").map(nn=>nn.trim()))):{}}function Wt(){let tn=window.PREFIX,Yt=location.pathname.split("/").filter(nn=>nn).filter(nn=>nn!=="editor").join("/");Mt.value=tn&&Yt.indexOf(tn)!==0?`${tn}/${Yt}`:location.pathname.split("/").filter(nn=>nn).filter(nn=>nn!=="editor").join("/"),kt.value=!0}function Zt(tn,Yt){tn.innerHTML==="view-code"&&(Yt.stopPropagation(),Wt())}return(tn,Yt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:bt,class:"main"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(vt.value,(nn,rn)=>(openBlock(),createElementBlock(Fragment,{key:`li-${rn}`},[it[nn.innerHTML]?(openBlock(),createElementBlock("sl-icon",{key:0,name:it[nn.innerHTML].icon,label:it[nn.innerHTML].label,onClick:ln=>Zt(nn,ln),style:{"font-size":"24px"}},null,8,_hoisted_1$m)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(nn.className),style:normalizeStyle(Ht(nn.getAttribute("style")||"")),innerHTML:nn.innerHTML,onClick:ln=>Zt(nn,ln)},null,14,_hoisted_2$j))],64))),128)),createBaseVNode("sl-dialog",{label:"Page Source",class:"page-source-dialog",style:normalizeStyle({"--width":unref(isMobile)()?"100vw":"80vw"})},[Mt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,src:Mt.value,draggable:!1},null,8,_hoisted_3$e)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Yt[0]||(Yt[0]=nn=>kt.value=!1)},"Close")],4)],512))}}),_style_0$j=`*{box-sizing:border-box}.main{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:9px 12px;margin:36px auto auto;font-family:Roboto,sans-serif;font-size:.9rem;z-index:100;background-color:#eee;color:#444;border-radius:3px}a,sl-icon{color:#0645ad;text-decoration:none}a:visited{color:#0b0080}a:hover,sl-icon:hover{color:#06e;cursor:pointer}a:active{color:#faa700}a:focus{outline:thin dotted}a:hover,a:active{outline:0}.main.sticky{position:fixed;bottom:0}div{display:flex;align-items:center;gap:12px}.main div{cursor:pointer}img{height:36px;vertical-align:middle}a{color:inherit;text-decoration:none}.logo,.logo img{height:20px}.push{margin-left:auto}sl-dialog::part(panel){color:#444;font-size:medium}
`,Footer=_export_sfc(_sfc_main$o,[["styles",[_style_0$j]]]),_hoisted_1$l=["src","alt"],_hoisted_2$i=["name","data-state"],_sfc_main$n=defineComponent({__name:"GIF.ce",props:{src:{type:String,required:!0},alt:{type:String},initiallyPaused:{type:Boolean},restartOnPlay:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Ht;return(Ht=it==null?void 0:it.value)==null?void 0:Ht.parentNode}),bt=computed(()=>{var Ht;return(Ht=vt.value)==null?void 0:Ht.querySelector("#gif")}),wt=ref(!1),Tt=ref(!1),kt=ref(),Lt={buttonPlayIconID:"",buttonPauseIconID:"",buttonPlayIconHTML:"",buttonPauseIconHTML:"",inheritClasses:!0,initiallyPaused:!1,restartOnPlay:!1,langPause:"Pause animation:",langPlay:"Play animation:",langPauseAllButton:"Pause all animations",langPlayAllButton:"Play all animations",langMissingAlt:"Animated GIF."};watch$1(bt,()=>{nextTick(()=>Mt())});function Mt(){kt.value={...Lt,initiallyPaused:rt.initiallyPaused,restartOnPlay:rt.restartOnPlay},Nt()}function Nt(){let Ht=()=>{wt.value=!0;let Wt;if(Wt=bt.value.src.split("."),Wt=Wt[Wt.length-1].toLowerCase(),Wt=Wt.substring(0,4),Wt==="gif"){const Zt=document.createElement("canvas");let tn=parseFloat(getComputedStyle(bt.value,null).getPropertyValue("border-left-width")),Yt=parseFloat(getComputedStyle(bt.value,null).getPropertyValue("border-right-width")),nn=tn+Yt,rn=bt.value.getAttribute("width");rn!==null?(Zt.width=parseInt(rn),Zt.setAttribute("style","width:"+rn+"px !important;")):bt.value.clientWidth==0?Zt.width=bt.value.naturalWidth+.5+nn:Zt.width=bt.value.clientWidth+.5+nn;const ln=bt.value.naturalHeight/bt.value.naturalWidth*Zt.width;if(Zt.height=ln+.5,Zt.setAttribute("role","img"),kt.value.inheritClasses===!0){let An=bt.value.getAttribute("class");An==null&&(An=""),Zt.setAttribute("class","gifa11y-canvas "+An)}else Zt.setAttribute("class","gifa11y-canvas");let sn=bt.value.getAttribute("alt")||kt.value.langMissingAlt;Zt.setAttribute("aria-label",sn);const mn=bt.value.src,wn=window.matchMedia("(prefers-reduced-motion: reduce)");!wn||wn.matches||bt.value.classList.contains("gifa11y-paused")||mn.indexOf("gifa11y-paused")>-1||kt.value.initiallyPaused===!0?bt.value.style.display="none":Zt.style.display="none",Zt.getContext("2d").drawImage(bt.value,0,0,Zt.width,Zt.height),bt.value.after(Zt)}};bt.value.complete?Ht():bt.value.addEventListener("load",()=>{wt.value||nextTick(()=>Ht())})}function zt(Ht,Wt){console.log(`onClick from=${Ht} isPlaying=${Tt.value} restartOnPlay=${kt.value.restartOnPlay}`,Wt),Tt.value=!Tt.value;const Zt=bt.value.nextElementSibling;Tt.value?(kt.value.restartOnPlay&&(bt.value.src=rt.src),bt.value.style.display="block",Zt.style.display="none"):(kt.value.restartOnPlay&&(bt.value.src=rt.src),bt.value.style.display="none",Zt.style.display="block"),Wt.preventDefault()}return(Ht,Wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("img",{src:rt.src,i:"",id:"gif",style:{width:"100%"},alt:rt.alt||"Animated GIF",onClick:Wt[0]||(Wt[0]=Zt=>zt("image",Zt))},null,8,_hoisted_1$l),wt.value?(openBlock(),createElementBlock("sl-icon",{key:0,id:"play-button",name:Tt.value?"pause-circle":"play-circle","data-state":Tt.value?"playing":"paused",style:{"font-size":"100px"},onClick:Wt[1]||(Wt[1]=Zt=>zt("icon",Zt))},null,8,_hoisted_2$i)):createCommentVNode("",!0)],512))}}),_style_0$i=`.main{position:relative}canvas.gifa11y-canvas{object-fit:contain;max-width:100%}#play-button{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);color:#fff;visibility:hidden;background-color:#0006;border-radius:50%}#play-button:hover{cursor:pointer}#play-button[data-state=paused],.main:hover #play-button{visibility:visible}
`,GIF=_export_sfc(_sfc_main$n,[["styles",[_style_0$i]]]),_hoisted_1$k=["background","options","position","sticky","height","top"],_hoisted_2$h=["label","subtitle","logo","url","sticky","search-domain","contact","height","background","alpha","offset"],_hoisted_3$d=["innerHTML"],_sfc_main$m=defineComponent({__name:"Header.ce",props:{label:{type:String},subtitle:{type:String},logo:{type:String},url:{type:String},contact:{type:String},searchDomain:{type:String},entities:{type:String},sticky:{type:Boolean},background:{type:String},options:{type:String},height:{type:Number},position:{type:String}},setup(nt){const rt=nt,it=80,vt=400,bt=/^\w+:/,wt=ref(null),Tt=computed(()=>{var tn,Yt;return(Yt=(tn=wt.value)==null?void 0:tn.getRootNode())==null?void 0:Yt.host}),kt=ref(!1),Lt=ref(),Mt=ref([]),Nt=ref(),zt=ref(),Ht=computed(()=>rt.height||(kt.value?vt:it));onMounted(()=>Wt()),onUpdated(()=>Wt());function Wt(){var tn;Mt.value=rt.entities?rt.entities.split(/\s+/).filter(Yt=>Yt):[],kt.value=rt.background!==void 0&&(isURL(rt.background)||Zt(rt.background)),wt.value&&(wt.value.style.height=`${rt.height||it}px`),rt.sticky&&Tt.value.classList.add("sticky"),Lt.value=(tn=Tt.value.querySelector("ul"))==null?void 0:tn.innerHTML}watch$1(Mt,async()=>{Mt.value.length>0&&(Nt.value=await getEntity(Mt.value[0]),Nt.value&&Nt.value.pageBanner&&(zt.value=`https://iiif.juncture-digital.org/wc:${decodeURIComponent(Nt.value.pageBanner.split("/Special:FilePath/").pop()).replace(/\s/,"_")}/manifest.json`))});function Zt(tn){return bt.test(tn)}return(tn,Yt)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",normalizeProps(guardReactiveProps(tn.$attrs)),null,16),kt.value?(openBlock(),createElementBlock("ve-hero",{key:0,background:rt.background,options:rt.options,position:rt.position,sticky:rt.sticky?"":null,height:unref(Ht),top:nt.sticky?unref(Ht)-it:0},null,8,_hoisted_1$k)):createCommentVNode("",!0),createBaseVNode("ve-navbar",{ref_key:"navbar",ref:wt,label:rt.label,subtitle:rt.subtitle,logo:rt.logo,url:rt.url,sticky:rt.sticky?"":null,"search-domain":rt.searchDomain,contact:rt.contact,height:kt.value?it:unref(Ht),background:kt.value?null:rt.background||"#444",alpha:kt.value?.2:0,offset:kt.value?it:0},[Lt.value?(openBlock(),createElementBlock("ul",{key:0,innerHTML:Lt.value},null,8,_hoisted_3$d)):createCommentVNode("",!0)],8,_hoisted_2$h)],64))}}),_style_0$h=`.main{width:100%}
`,Header=_export_sfc(_sfc_main$m,[["styles",[_style_0$h]]]),_hoisted_1$j=["manifest"],_sfc_main$l=defineComponent({__name:"Hero.ce",props:{background:{type:String},options:{type:String},position:{type:String,default:"center"},sticky:{type:Boolean,default:!1},height:{type:Number,default:300},top:{type:Number,default:0}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Mt,Nt;return(Nt=(Mt=it.value)==null?void 0:Mt.getRootNode())==null?void 0:Nt.host}),bt=ref(),wt=ref(),Tt=ref(),kt=ref();watch$1(rt,()=>{rt.sticky&&(vt.value.style.position="sticky",vt.value.style.top="-320px")}),watch$1(vt,()=>{wt.value=parseImageOptions(rt.options||""),rt.background&&getManifest(rt.background).then(Mt=>bt.value=Mt),vt.value.style.height=`${rt.height}px`,rt.sticky&&(vt.value.style.position="sticky"),rt.top&&(vt.value.style.top=`-${rt.top}px`)}),watch$1(bt,(Mt,Nt)=>{Mt!==Nt&&(Tt.value=getItemInfo(Mt))}),watch$1(Tt,async(Mt,Nt)=>{Mt!==Nt&&(kt.value=Mt.service?Lt(Mt.service[0].id||Mt.service[0]["@id"],wt.value):await imageDataUrl(Tt.value.id,wt.value.region,{width:vt.value.clientWidth,height:rt.height}))}),watch$1(kt,()=>{vt.value.style.backgroundImage=`url("${kt.value}")`,vt.value.style.backgroundPosition=rt.position});function Lt(Mt,Nt){let zt=`${vt.value.clientWidth},`;return`${Mt.replace(/\/info.json$/,"")}/${Nt.region}/${zt}/${Nt.rotation}/${Nt.quality}.${Nt.format}`}return(Mt,Nt)=>{var zt;return openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-hero media-item"},[createBaseVNode("ve-manifest-popup",{manifest:(zt=bt.value)==null?void 0:zt.id},null,8,_hoisted_1$j)],512)}}}),_style_0$g=`*{box-sizing:border-box}:host{display:block;position:relative;width:100%;z-index:10}.ve-hero{background-repeat:no-repeat;background-size:cover;background-position:center;z-index:8}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,Hero=_export_sfc(_sfc_main$l,[["styles",[_style_0$g]]]),_hoisted_1$i={class:"content"},_hoisted_2$g=["src","width","height"],_sfc_main$k=defineComponent({__name:"IFrame.ce",props:{allow:{type:String},allowfullscreen:{type:Boolean},allowpaymentrequest:{type:Boolean},height:{type:String},loading:{type:String},name:{type:String},referrerpolicy:{type:String},sandbox:{type:String},src:{type:String},srcdoc:{type:String},width:{type:String},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Ht;return(Ht=it==null?void 0:it.value)==null?void 0:Ht.parentNode}),bt=computed(()=>{var Ht,Wt;return(Wt=(Ht=it.value)==null?void 0:Ht.getRootNode())==null?void 0:Wt.host}),wt=computed(()=>{var Ht;return(Ht=vt.value)==null?void 0:Ht.querySelector(".content")}),Tt=ref(),kt=ref(0),Lt=ref(0),Mt=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");onMounted(()=>Nt());function Nt(){rt.src&&(Tt.value=rt.src),zt()}function zt(){rt.sticky&&makeSticky(bt.value),bt.value.classList.add("ve-component"),bt.value.classList.add(Mt),Mt==="full"?bt.value.style.width="100%":(bt.value.style.float=Mt,bt.value.style.width="50%"),nextTick(()=>{bt.value.style.width=window.getComputedStyle(bt.value).width,bt.value.style.height=rt.height||window.getComputedStyle(bt.value).width,console.log(`host: width=${bt.value.style.width} height=${bt.value.style.height}`),wt.value.style.width=rt.width||window.getComputedStyle(bt.value).width,wt.value.style.height=rt.height||window.getComputedStyle(bt.value).width,nextTick(()=>{kt.value=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2)),Lt.value=parseInt(window.getComputedStyle(wt.value).height.slice(0,-2)),console.log(`content: width=${kt.value} height=${Lt.value}`)})})}return(Ht,Wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$i,[createBaseVNode("iframe",{src:Tt.value,width:kt.value,height:Lt.value},null,8,_hoisted_2$g)])],512))}}),_style_0$f=`*{box-sizing:border-box}.main{height:500px}:host{display:block;width:100%;background-color:#fff}.content{margin:auto}iframe{border:none}
`,IFrame=_export_sfc(_sfc_main$k,[["styles",[_style_0$f]]]),_hoisted_1$h=["innerHTML"],_hoisted_2$f=["innerHTML"],_sfc_main$j=defineComponent({__name:"InfoCard.ce",props:{label:{type:String},description:{type:String},image:{type:String},href:{type:String},data:{type:String}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var zt,Ht;return(Ht=(zt=it.value)==null?void 0:zt.getRootNode())==null?void 0:Ht.host}),bt=computed(()=>rt.data?JSON.parse(rt.data):{}),wt=computed(()=>bt.value.label||rt.label),Tt=computed(()=>bt.value.description||rt.description),kt=computed(()=>bt.value.image||rt.image);computed(()=>bt.value.href||rt.href);const Lt=computed(()=>kt.value&&`url('${Nt(kt.value)}')`),Mt=computed(()=>{var zt;return`${((zt=vt.value)==null?void 0:zt.clientWidth)*.33}px`});function Nt(zt){let Ht=zt.split("/");return`${Ht.slice(0,-1).join("/")}/${encodeURIComponent(Ht[Ht.length-1])}`}return(zt,Ht)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:unref(wt)},null,8,_hoisted_1$h),createBaseVNode("div",{class:"description",innerHTML:unref(Tt)},null,8,_hoisted_2$f),unref(kt)?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:unref(Lt),width:unref(Mt)})},null,4)):createCommentVNode("",!0)],512))}}),_style_0$e=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border-radius:6px;min-height:80px;max-height:100px;overflow-y:hidden;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400;height:100%}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;max-height:100px;object-fit:cover;background-repeat:no-repeat;background-size:cover;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,InfoCard=_export_sfc(_sfc_main$j,[["styles",[_style_0$e]]]),_withScopeId=nt=>(pushScopeId("data-v-6fd8566f"),nt=nt(),popScopeId(),nt),_hoisted_1$g={class:"main"},_hoisted_2$e=["src"],_hoisted_3$c=["innerHTML"],_hoisted_4$a=["innerHTML"],_hoisted_5$8=["href","innerHTML"],_hoisted_6$7={class:"links"},_hoisted_7$6={class:"detail"},_hoisted_8$6={key:0,class:"provider"},_hoisted_9$5=_withScopeId(()=>createBaseVNode("span",{class:"label"},"provider",-1)),_hoisted_10$4={key:0,style:{display:"flex","align-items":"center"}},_hoisted_11$3=["src"],_hoisted_12$2=["href","innerHTML"],_hoisted_13$2={key:1},_hoisted_14$2=["src"],_hoisted_15$2=["href","innerHTML"],_hoisted_16$2={key:1,class:"requiredStatement"},_hoisted_17$2=["innerHTML"],_hoisted_18$2={key:2,class:"rights"},_hoisted_19$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"Reuse rights",-1)),_hoisted_20$2=["href","innerHTML"],_hoisted_21$2={key:3,class:"navDate"},_hoisted_22$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"navDate",-1)),_hoisted_23$2=["innerHTML"],_hoisted_24$2={key:4,class:"homepage"},_hoisted_25$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"homepage",-1)),_hoisted_26$2=["href","innerHTML"],_hoisted_27$2={key:5,class:"seeAlso"},_hoisted_28$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"seeAlso",-1)),_hoisted_29$1=["href","innerHTML"],_hoisted_30$1={key:6,class:"logo"},_hoisted_31$1=_withScopeId(()=>createBaseVNode("span",{class:"label"},"logo",-1)),_hoisted_32$1=["href","innerHTML"],_hoisted_33$1={key:7,class:"imageData"},_hoisted_34$1=_withScopeId(()=>createBaseVNode("span",{class:"label"},"source",-1)),_hoisted_35$1=["href","innerHTML"],_hoisted_36$1=_withScopeId(()=>createBaseVNode("span",{class:"label"},"format",-1)),_hoisted_37=["innerHTML"],_hoisted_38=_withScopeId(()=>createBaseVNode("span",{class:"label"},"width",-1)),_hoisted_39=["innerHTML"],_hoisted_40=_withScopeId(()=>createBaseVNode("span",{class:"label"},"height",-1)),_hoisted_41=["innerHTML"],_sfc_main$i=defineComponent({__name:"Manifest.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null);computed(()=>{var zt,Ht;return(Ht=(zt=it.value)==null?void 0:zt.getRootNode())==null?void 0:Ht.host});const vt=ref(null),bt=ref(null);watch$1(vt,()=>bt.value=Lt(vt.value));const wt=computed(()=>bt.value&&Nt(bt.value));onMounted(()=>Tt());function Tt(){typeof rt.manifest=="object"?vt.value=rt.manifest:getManifest(rt.manifest).then(zt=>vt.value=zt)}function kt(zt,Ht="en"){return typeof zt=="object"&&!Array.isArray(zt)?zt[Ht]||zt.none||zt[Object.keys(zt).sort()[0]]:zt}function Lt(zt){let Ht={};if(Ht.id=kt(zt.id),Ht.label=kt(zt.label),zt.summary&&(Ht.summary=kt(zt.summary)),zt.rights&&(Ht.rights=zt.rights),zt.thumbnail&&(Ht.thumbnail=zt.thumbnail[0].id||zt.thumbnail),zt.metadata){Ht.metadata=zt.metadata.map(tn=>({label:kt(tn.label)[0],value:kt(tn.value)}));let Wt=Ht.metadata.find(tn=>tn.label=="source_url");Ht.sourceUrl=Wt?Wt.value[0]:null;let Zt=Ht.metadata.find(tn=>tn.label==="depicts");Zt&&(Ht.depicts=Zt.value)}if(zt.provider&&(Ht.provider=zt.provider.map(Wt=>{let Zt={label:kt(Wt.label),href:Wt.id};return Wt.logo&&(Zt.logo={src:Wt.logo[0].id}),Zt})),zt.logo&&(Ht.logo=zt.logo.map(Wt=>{let Zt={src:typeof Wt=="object"?Wt.id||Wt["@id"]:Wt};return typeof Wt=="object"&&(Wt.width&&(Zt.width=Wt.width),Wt.height&&(Zt.height=Wt.height)),Zt})),Ht.imageData=getItemInfo(zt),Ht.service=Ht.imageData.service&&`${(Ht.imageData.service[0].id||Ht.imageData.service[0]["@id"]).replace(/\/info\.json$/,"")}/info.json`,zt.requiredStatement){let Wt=zt.requiredStatement;Ht.requiredStatement={label:kt(Wt.label),value:kt(Wt.value)}}return zt.homepage&&(Ht.homepage={label:zt.homepage.label?kt(zt.homepage.label):zt.homepage.id,href:zt.homepage.id}),zt.seeAlso&&(Ht.seeAlso=zt.seeAlso.map(Wt=>({label:Wt.label?kt(Wt.label):Wt.id,href:Wt.id}))),Ht}function Mt(zt){navigator.clipboard&&navigator.clipboard.writeText(zt)}function Nt(zt){let Ht={cc:{badgeWidth:88,badgeHeight:31,badgeTemplate:'https://licensebuttons.net/l/${this.rightsCode}${this.rightsCode === "publicdomain" ? "" : "/"+this.version}/${this.badgeWidth}x${this.badgeHeight}.png'},rs:{badgeTemplate:"https://rightsstatements.org/files/buttons/${this.rightsCode}.white.svg",backgroundColor:"318ac7"}};const Wt=function(sn,mn){return new Function("return `"+sn+"`;").call(mn)};let Zt=zt.rights||"",tn="",[Yt,nn,rn,ln]=Zt.split("/").slice(2);return Yt==="creativecommons.org"?(rn=rn==="zero"?"publicdomain":rn,tn=`<img src="${Wt(Ht.cc.badgeTemplate,{...Ht.cc,rightsCode:rn,version:ln})}"/>`):Yt==="rightsstatements.org"&&(tn=`<div style="display:inline-block;height:25px;padding:3px;background-color:#${Ht.rs.backgroundColor};"><img style="height:100%;" src="${Wt(Ht.rs.badgeTemplate,{...Ht.rs,rightsCode:rn})}"/></div>`),tn}return(zt,Ht)=>{var Wt,Zt,tn,Yt,nn,rn,ln,sn,mn,wn,Cn,An,Pn,On;return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"manifest"},[createBaseVNode("div",_hoisted_1$g,[createBaseVNode("img",{class:"thumbnail",src:(Wt=bt.value)==null?void 0:Wt.thumbnail},null,8,_hoisted_2$e),createBaseVNode("div",{class:"label",innerHTML:(Zt=bt.value)==null?void 0:Zt.label},null,8,_hoisted_3$c),(tn=bt.value)!=null&&tn.summary?(openBlock(),createElementBlock("div",{key:0,class:"summary",innerHTML:(Yt=bt.value)==null?void 0:Yt.summary},null,8,_hoisted_4$a)):createCommentVNode("",!0),(nn=bt.value)!=null&&nn.rights?(openBlock(),createElementBlock("a",{key:1,href:(rn=bt.value)==null?void 0:rn.rights,innerHTML:unref(wt)},null,8,_hoisted_5$8)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$7,[createBaseVNode("img",{src:"https://juncture-digital.github.io/web-app/static/iiif.png",class:"iiif",alt:"IIIF manifest icon",onClick:Ht[0]||(Ht[0]=kn=>Mt(vt.value.id))})])]),createBaseVNode("div",_hoisted_7$6,[(ln=bt.value)!=null&&ln.provider?(openBlock(),createElementBlock("div",_hoisted_8$6,[_hoisted_9$5,bt.value.provider.length===1?(openBlock(),createElementBlock("div",_hoisted_10$4,[bt.value.provider[0].logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:bt.value.provider[0].logo.src},null,8,_hoisted_11$3)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:bt.value.provider[0].href,innerHTML:bt.value.provider[0].label},null,8,_hoisted_12$2)])):(openBlock(),createElementBlock("ul",_hoisted_13$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value.provider,(kn,gn)=>(openBlock(),createElementBlock("li",{key:`provider-${gn}`},[kn.logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:kn.logo.src},null,8,_hoisted_14$2)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:kn.href,innerHTML:kn.label},null,8,_hoisted_15$2)]))),128))]))])):createCommentVNode("",!0),(sn=bt.value)!=null&&sn.requiredStatement?(openBlock(),createElementBlock("div",_hoisted_16$2,[createBaseVNode("span",{class:"value",innerHTML:bt.value.requiredStatement.value},null,8,_hoisted_17$2)])):createCommentVNode("",!0),(mn=bt.value)!=null&&mn.rights?(openBlock(),createElementBlock("div",_hoisted_18$2,[_hoisted_19$2,createBaseVNode("a",{class:"value",href:bt.value.rights,innerHTML:bt.value.rights},null,8,_hoisted_20$2)])):createCommentVNode("",!0),(wn=bt.value)!=null&&wn.navDate?(openBlock(),createElementBlock("div",_hoisted_21$2,[_hoisted_22$2,createBaseVNode("span",{class:"value",innerHTML:bt.value.navDate},null,8,_hoisted_23$2)])):createCommentVNode("",!0),(Cn=bt.value)!=null&&Cn.homepage?(openBlock(),createElementBlock("div",_hoisted_24$2,[_hoisted_25$2,createBaseVNode("a",{class:"value",href:bt.value.homepage.href,innerHTML:bt.value.homepage.label},null,8,_hoisted_26$2)])):createCommentVNode("",!0),(An=bt.value)!=null&&An.seeAlso?(openBlock(),createElementBlock("div",_hoisted_27$2,[_hoisted_28$2,createBaseVNode("a",{class:"value",href:bt.value.seeAlso[0].href,innerHTML:bt.value.seeAlso[0].label},null,8,_hoisted_29$1)])):createCommentVNode("",!0),(Pn=bt.value)!=null&&Pn.logo?(openBlock(),createElementBlock("div",_hoisted_30$1,[_hoisted_31$1,createBaseVNode("a",{class:"value",href:bt.value.logo[0].src,innerHTML:bt.value.logo[0].src},null,8,_hoisted_32$1)])):createCommentVNode("",!0),(On=bt.value)!=null&&On.imageData?(openBlock(),createElementBlock("div",_hoisted_33$1,[createBaseVNode("div",null,[_hoisted_34$1,createBaseVNode("a",{class:"value",href:bt.value.imageData.id,innerHTML:bt.value.imageData.id.split("/").pop()},null,8,_hoisted_35$1)]),createBaseVNode("div",null,[_hoisted_36$1,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.format},null,8,_hoisted_37)]),createBaseVNode("div",null,[_hoisted_38,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.width},null,8,_hoisted_39)]),createBaseVNode("div",null,[_hoisted_40,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.height},null,8,_hoisted_41)])])):createCommentVNode("",!0)])],512)}}}),_style_0$d=`*[data-v-6fd8566f]{box-sizing:border-box}.manifest[data-v-6fd8566f]{width:100%;height:100%;overflow-y:scroll;background-color:#fff}.main[data-v-6fd8566f],.detail[data-v-6fd8566f]{display:flow-root;margin:6px}.main>*[data-v-6fd8566f]{margin-bottom:6px}.detail>div[data-v-6fd8566f]{margin-top:12px}.main .label[data-v-6fd8566f]{font-size:1.2em;font-weight:700}.thumbnail[data-v-6fd8566f]{float:left;max-width:45%;max-height:200px;margin:0 6px 6px 0}.links[data-v-6fd8566f]{margin-top:6px}img.iiif[data-v-6fd8566f]{height:24px;cursor:copy}ul[data-v-6fd8566f]{list-style:none;padding-left:12px;margin-top:0}.detail .label[data-v-6fd8566f]{font-size:1.1em;font-weight:700;min-width:80px;margin-right:6px}.detail .label[data-v-6fd8566f]:after{content:":"}.detail .value[data-v-6fd8566f],.main .label[data-v-6fd8566f]{white-space:pre-wrap;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.logo[data-v-6fd8566f]{padding-right:6px}img.logo[data-v-6fd8566f]{height:40px}.manifest-id[data-v-6fd8566f],.manifest-label[data-v-6fd8566f],.summary[data-v-6fd8566f],.provider[data-v-6fd8566f],.rights[data-v-6fd8566f],.service[data-v-6fd8566f],.imageData div[data-v-6fd8566f],.thumbnail[data-v-6fd8566f]{display:flex;align-items:flex-start}.metadata>ul[data-v-6fd8566f],.requiredStatement ul[data-v-6fd8566f]{padding-left:24px}.metadata ul li[data-v-6fd8566f],.requiredStatement ul li[data-v-6fd8566f]{display:flex}.metadata ul ul[data-v-6fd8566f]{padding-left:0}a[data-v-6fd8566f]:link,a[data-v-6fd8566f]:visited{color:#00e}
`,Manifest=_export_sfc(_sfc_main$i,[["styles",[_style_0$d]],["__scopeId","data-v-6fd8566f"]]),_hoisted_1$f=createBaseVNode("sl-icon",{id:"tippy",name:"info-circle-fill"},null,-1),_hoisted_2$d=[_hoisted_1$f],_sfc_main$h=defineComponent({__name:"ManifestPopup.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var bt,wt;return(wt=(bt=it.value)==null?void 0:bt.getRootNode())==null?void 0:wt.host});return watch$1(vt,()=>{tippy(vt.value,{theme:"light-border",allowHTML:!0,interactive:!0,appendTo:document.body,placement:"bottom-end",arrow:!0,delay:[null,null],onShow:bt=>bt.setContent(`<div class="manifest-popup"><ve-manifest manifest="${rt.manifest}"></ve-manifest></div>`)})}),(bt,wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it},_hoisted_2$d,512))}}),_style_0$c=`#tippy{width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center}
`,ManifestPopup=_export_sfc(_sfc_main$h,[["styles",[_style_0$c]]]);var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(nt,rt){(function(it,vt){vt(rt)})(commonjsGlobal$1,function(it){var vt="1.9.3";function bt(It){var Vt,Qt,fn,Rn;for(Qt=1,fn=arguments.length;Qt<fn;Qt++){Rn=arguments[Qt];for(Vt in Rn)It[Vt]=Rn[Vt]}return It}var wt=Object.create||function(){function It(){}return function(Vt){return It.prototype=Vt,new It}}();function Tt(It,Vt){var Qt=Array.prototype.slice;if(It.bind)return It.bind.apply(It,Qt.call(arguments,1));var fn=Qt.call(arguments,2);return function(){return It.apply(Vt,fn.length?fn.concat(Qt.call(arguments)):arguments)}}var kt=0;function Lt(It){return"_leaflet_id"in It||(It._leaflet_id=++kt),It._leaflet_id}function Mt(It,Vt,Qt){var fn,Rn,tr,Lr;return Lr=function(){fn=!1,Rn&&(tr.apply(Qt,Rn),Rn=!1)},tr=function(){fn?Rn=arguments:(It.apply(Qt,arguments),setTimeout(Lr,Vt),fn=!0)},tr}function Nt(It,Vt,Qt){var fn=Vt[1],Rn=Vt[0],tr=fn-Rn;return It===fn&&Qt?It:((It-Rn)%tr+tr)%tr+Rn}function zt(){return!1}function Ht(It,Vt){if(Vt===!1)return It;var Qt=Math.pow(10,Vt===void 0?6:Vt);return Math.round(It*Qt)/Qt}function Wt(It){return It.trim?It.trim():It.replace(/^\s+|\s+$/g,"")}function Zt(It){return Wt(It).split(/\s+/)}function tn(It,Vt){Object.prototype.hasOwnProperty.call(It,"options")||(It.options=It.options?wt(It.options):{});for(var Qt in Vt)It.options[Qt]=Vt[Qt];return It.options}function Yt(It,Vt,Qt){var fn=[];for(var Rn in It)fn.push(encodeURIComponent(Qt?Rn.toUpperCase():Rn)+"="+encodeURIComponent(It[Rn]));return(!Vt||Vt.indexOf("?")===-1?"?":"&")+fn.join("&")}var nn=/\{ *([\w_ -]+) *\}/g;function rn(It,Vt){return It.replace(nn,function(Qt,fn){var Rn=Vt[fn];if(Rn===void 0)throw new Error("No value provided for variable "+Qt);return typeof Rn=="function"&&(Rn=Rn(Vt)),Rn})}var ln=Array.isArray||function(It){return Object.prototype.toString.call(It)==="[object Array]"};function sn(It,Vt){for(var Qt=0;Qt<It.length;Qt++)if(It[Qt]===Vt)return Qt;return-1}var mn="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function wn(It){return window["webkit"+It]||window["moz"+It]||window["ms"+It]}var Cn=0;function An(It){var Vt=+new Date,Qt=Math.max(0,16-(Vt-Cn));return Cn=Vt+Qt,window.setTimeout(It,Qt)}var Pn=window.requestAnimationFrame||wn("RequestAnimationFrame")||An,On=window.cancelAnimationFrame||wn("CancelAnimationFrame")||wn("CancelRequestAnimationFrame")||function(It){window.clearTimeout(It)};function kn(It,Vt,Qt){if(Qt&&Pn===An)It.call(Vt);else return Pn.call(window,Tt(It,Vt))}function gn(It){It&&On.call(window,It)}var Vn={__proto__:null,extend:bt,create:wt,bind:Tt,get lastId(){return kt},stamp:Lt,throttle:Mt,wrapNum:Nt,falseFn:zt,formatNum:Ht,trim:Wt,splitWords:Zt,setOptions:tn,getParamString:Yt,template:rn,isArray:ln,indexOf:sn,emptyImageUrl:mn,requestFn:Pn,cancelFn:On,requestAnimFrame:kn,cancelAnimFrame:gn};function pn(){}pn.extend=function(It){var Vt=function(){tn(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},Qt=Vt.__super__=this.prototype,fn=wt(Qt);fn.constructor=Vt,Vt.prototype=fn;for(var Rn in this)Object.prototype.hasOwnProperty.call(this,Rn)&&Rn!=="prototype"&&Rn!=="__super__"&&(Vt[Rn]=this[Rn]);return It.statics&&bt(Vt,It.statics),It.includes&&(pr(It.includes),bt.apply(null,[fn].concat(It.includes))),bt(fn,It),delete fn.statics,delete fn.includes,fn.options&&(fn.options=Qt.options?wt(Qt.options):{},bt(fn.options,It.options)),fn._initHooks=[],fn.callInitHooks=function(){if(!this._initHooksCalled){Qt.callInitHooks&&Qt.callInitHooks.call(this),this._initHooksCalled=!0;for(var tr=0,Lr=fn._initHooks.length;tr<Lr;tr++)fn._initHooks[tr].call(this)}},Vt},pn.include=function(It){var Vt=this.prototype.options;return bt(this.prototype,It),It.options&&(this.prototype.options=Vt,this.mergeOptions(It.options)),this},pn.mergeOptions=function(It){return bt(this.prototype.options,It),this},pn.addInitHook=function(It){var Vt=Array.prototype.slice.call(arguments,1),Qt=typeof It=="function"?It:function(){this[It].apply(this,Vt)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(Qt),this};function pr(It){if(!(typeof L>"u"||!L||!L.Mixin)){It=ln(It)?It:[It];for(var Vt=0;Vt<It.length;Vt++)It[Vt]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var yn={on:function(It,Vt,Qt){if(typeof It=="object")for(var fn in It)this._on(fn,It[fn],Vt);else{It=Zt(It);for(var Rn=0,tr=It.length;Rn<tr;Rn++)this._on(It[Rn],Vt,Qt)}return this},off:function(It,Vt,Qt){if(!arguments.length)delete this._events;else if(typeof It=="object")for(var fn in It)this._off(fn,It[fn],Vt);else{It=Zt(It);for(var Rn=arguments.length===1,tr=0,Lr=It.length;tr<Lr;tr++)Rn?this._off(It[tr]):this._off(It[tr],Vt,Qt)}return this},_on:function(It,Vt,Qt,fn){if(typeof Vt!="function"){console.warn("wrong listener type: "+typeof Vt);return}if(this._listens(It,Vt,Qt)===!1){Qt===this&&(Qt=void 0);var Rn={fn:Vt,ctx:Qt};fn&&(Rn.once=!0),this._events=this._events||{},this._events[It]=this._events[It]||[],this._events[It].push(Rn)}},_off:function(It,Vt,Qt){var fn,Rn,tr;if(!!this._events&&(fn=this._events[It],!!fn)){if(arguments.length===1){if(this._firingCount)for(Rn=0,tr=fn.length;Rn<tr;Rn++)fn[Rn].fn=zt;delete this._events[It];return}if(typeof Vt!="function"){console.warn("wrong listener type: "+typeof Vt);return}var Lr=this._listens(It,Vt,Qt);if(Lr!==!1){var qr=fn[Lr];this._firingCount&&(qr.fn=zt,this._events[It]=fn=fn.slice()),fn.splice(Lr,1)}}},fire:function(It,Vt,Qt){if(!this.listens(It,Qt))return this;var fn=bt({},Vt,{type:It,target:this,sourceTarget:Vt&&Vt.sourceTarget||this});if(this._events){var Rn=this._events[It];if(Rn){this._firingCount=this._firingCount+1||1;for(var tr=0,Lr=Rn.length;tr<Lr;tr++){var qr=Rn[tr],ni=qr.fn;qr.once&&this.off(It,ni,qr.ctx),ni.call(qr.ctx||this,fn)}this._firingCount--}}return Qt&&this._propagateEvent(fn),this},listens:function(It,Vt,Qt,fn){typeof It!="string"&&console.warn('"string" type argument expected');var Rn=Vt;typeof Vt!="function"&&(fn=!!Vt,Rn=void 0,Qt=void 0);var tr=this._events&&this._events[It];if(tr&&tr.length&&this._listens(It,Rn,Qt)!==!1)return!0;if(fn){for(var Lr in this._eventParents)if(this._eventParents[Lr].listens(It,Vt,Qt,fn))return!0}return!1},_listens:function(It,Vt,Qt){if(!this._events)return!1;var fn=this._events[It]||[];if(!Vt)return!!fn.length;Qt===this&&(Qt=void 0);for(var Rn=0,tr=fn.length;Rn<tr;Rn++)if(fn[Rn].fn===Vt&&fn[Rn].ctx===Qt)return Rn;return!1},once:function(It,Vt,Qt){if(typeof It=="object")for(var fn in It)this._on(fn,It[fn],Vt,!0);else{It=Zt(It);for(var Rn=0,tr=It.length;Rn<tr;Rn++)this._on(It[Rn],Vt,Qt,!0)}return this},addEventParent:function(It){return this._eventParents=this._eventParents||{},this._eventParents[Lt(It)]=It,this},removeEventParent:function(It){return this._eventParents&&delete this._eventParents[Lt(It)],this},_propagateEvent:function(It){for(var Vt in this._eventParents)this._eventParents[Vt].fire(It.type,bt({layer:It.target,propagatedFrom:It.target},It),!0)}};yn.addEventListener=yn.on,yn.removeEventListener=yn.clearAllEventListeners=yn.off,yn.addOneTimeEventListener=yn.once,yn.fireEvent=yn.fire,yn.hasEventListeners=yn.listens;var mr=pn.extend(yn);function Er(It,Vt,Qt){this.x=Qt?Math.round(It):It,this.y=Qt?Math.round(Vt):Vt}var Mr=Math.trunc||function(It){return It>0?Math.floor(It):Math.ceil(It)};Er.prototype={clone:function(){return new Er(this.x,this.y)},add:function(It){return this.clone()._add(rr(It))},_add:function(It){return this.x+=It.x,this.y+=It.y,this},subtract:function(It){return this.clone()._subtract(rr(It))},_subtract:function(It){return this.x-=It.x,this.y-=It.y,this},divideBy:function(It){return this.clone()._divideBy(It)},_divideBy:function(It){return this.x/=It,this.y/=It,this},multiplyBy:function(It){return this.clone()._multiplyBy(It)},_multiplyBy:function(It){return this.x*=It,this.y*=It,this},scaleBy:function(It){return new Er(this.x*It.x,this.y*It.y)},unscaleBy:function(It){return new Er(this.x/It.x,this.y/It.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Mr(this.x),this.y=Mr(this.y),this},distanceTo:function(It){It=rr(It);var Vt=It.x-this.x,Qt=It.y-this.y;return Math.sqrt(Vt*Vt+Qt*Qt)},equals:function(It){return It=rr(It),It.x===this.x&&It.y===this.y},contains:function(It){return It=rr(It),Math.abs(It.x)<=Math.abs(this.x)&&Math.abs(It.y)<=Math.abs(this.y)},toString:function(){return"Point("+Ht(this.x)+", "+Ht(this.y)+")"}};function rr(It,Vt,Qt){return It instanceof Er?It:ln(It)?new Er(It[0],It[1]):It==null?It:typeof It=="object"&&"x"in It&&"y"in It?new Er(It.x,It.y):new Er(It,Vt,Qt)}function vr(It,Vt){if(!!It)for(var Qt=Vt?[It,Vt]:It,fn=0,Rn=Qt.length;fn<Rn;fn++)this.extend(Qt[fn])}vr.prototype={extend:function(It){var Vt,Qt;if(!It)return this;if(It instanceof Er||typeof It[0]=="number"||"x"in It)Vt=Qt=rr(It);else if(It=cr(It),Vt=It.min,Qt=It.max,!Vt||!Qt)return this;return!this.min&&!this.max?(this.min=Vt.clone(),this.max=Qt.clone()):(this.min.x=Math.min(Vt.x,this.min.x),this.max.x=Math.max(Qt.x,this.max.x),this.min.y=Math.min(Vt.y,this.min.y),this.max.y=Math.max(Qt.y,this.max.y)),this},getCenter:function(It){return rr((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,It)},getBottomLeft:function(){return rr(this.min.x,this.max.y)},getTopRight:function(){return rr(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(It){var Vt,Qt;return typeof It[0]=="number"||It instanceof Er?It=rr(It):It=cr(It),It instanceof vr?(Vt=It.min,Qt=It.max):Vt=Qt=It,Vt.x>=this.min.x&&Qt.x<=this.max.x&&Vt.y>=this.min.y&&Qt.y<=this.max.y},intersects:function(It){It=cr(It);var Vt=this.min,Qt=this.max,fn=It.min,Rn=It.max,tr=Rn.x>=Vt.x&&fn.x<=Qt.x,Lr=Rn.y>=Vt.y&&fn.y<=Qt.y;return tr&&Lr},overlaps:function(It){It=cr(It);var Vt=this.min,Qt=this.max,fn=It.min,Rn=It.max,tr=Rn.x>Vt.x&&fn.x<Qt.x,Lr=Rn.y>Vt.y&&fn.y<Qt.y;return tr&&Lr},isValid:function(){return!!(this.min&&this.max)},pad:function(It){var Vt=this.min,Qt=this.max,fn=Math.abs(Vt.x-Qt.x)*It,Rn=Math.abs(Vt.y-Qt.y)*It;return cr(rr(Vt.x-fn,Vt.y-Rn),rr(Qt.x+fn,Qt.y+Rn))},equals:function(It){return It?(It=cr(It),this.min.equals(It.getTopLeft())&&this.max.equals(It.getBottomRight())):!1}};function cr(It,Vt){return!It||It instanceof vr?It:new vr(It,Vt)}function gr(It,Vt){if(!!It)for(var Qt=Vt?[It,Vt]:It,fn=0,Rn=Qt.length;fn<Rn;fn++)this.extend(Qt[fn])}gr.prototype={extend:function(It){var Vt=this._southWest,Qt=this._northEast,fn,Rn;if(It instanceof Ar)fn=It,Rn=It;else if(It instanceof gr){if(fn=It._southWest,Rn=It._northEast,!fn||!Rn)return this}else return It?this.extend(sr(It)||Or(It)):this;return!Vt&&!Qt?(this._southWest=new Ar(fn.lat,fn.lng),this._northEast=new Ar(Rn.lat,Rn.lng)):(Vt.lat=Math.min(fn.lat,Vt.lat),Vt.lng=Math.min(fn.lng,Vt.lng),Qt.lat=Math.max(Rn.lat,Qt.lat),Qt.lng=Math.max(Rn.lng,Qt.lng)),this},pad:function(It){var Vt=this._southWest,Qt=this._northEast,fn=Math.abs(Vt.lat-Qt.lat)*It,Rn=Math.abs(Vt.lng-Qt.lng)*It;return new gr(new Ar(Vt.lat-fn,Vt.lng-Rn),new Ar(Qt.lat+fn,Qt.lng+Rn))},getCenter:function(){return new Ar((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ar(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ar(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(It){typeof It[0]=="number"||It instanceof Ar||"lat"in It?It=sr(It):It=Or(It);var Vt=this._southWest,Qt=this._northEast,fn,Rn;return It instanceof gr?(fn=It.getSouthWest(),Rn=It.getNorthEast()):fn=Rn=It,fn.lat>=Vt.lat&&Rn.lat<=Qt.lat&&fn.lng>=Vt.lng&&Rn.lng<=Qt.lng},intersects:function(It){It=Or(It);var Vt=this._southWest,Qt=this._northEast,fn=It.getSouthWest(),Rn=It.getNorthEast(),tr=Rn.lat>=Vt.lat&&fn.lat<=Qt.lat,Lr=Rn.lng>=Vt.lng&&fn.lng<=Qt.lng;return tr&&Lr},overlaps:function(It){It=Or(It);var Vt=this._southWest,Qt=this._northEast,fn=It.getSouthWest(),Rn=It.getNorthEast(),tr=Rn.lat>Vt.lat&&fn.lat<Qt.lat,Lr=Rn.lng>Vt.lng&&fn.lng<Qt.lng;return tr&&Lr},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(It,Vt){return It?(It=Or(It),this._southWest.equals(It.getSouthWest(),Vt)&&this._northEast.equals(It.getNorthEast(),Vt)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Or(It,Vt){return It instanceof gr?It:new gr(It,Vt)}function Ar(It,Vt,Qt){if(isNaN(It)||isNaN(Vt))throw new Error("Invalid LatLng object: ("+It+", "+Vt+")");this.lat=+It,this.lng=+Vt,Qt!==void 0&&(this.alt=+Qt)}Ar.prototype={equals:function(It,Vt){if(!It)return!1;It=sr(It);var Qt=Math.max(Math.abs(this.lat-It.lat),Math.abs(this.lng-It.lng));return Qt<=(Vt===void 0?1e-9:Vt)},toString:function(It){return"LatLng("+Ht(this.lat,It)+", "+Ht(this.lng,It)+")"},distanceTo:function(It){return ar.distance(this,sr(It))},wrap:function(){return ar.wrapLatLng(this)},toBounds:function(It){var Vt=180*It/40075017,Qt=Vt/Math.cos(Math.PI/180*this.lat);return Or([this.lat-Vt,this.lng-Qt],[this.lat+Vt,this.lng+Qt])},clone:function(){return new Ar(this.lat,this.lng,this.alt)}};function sr(It,Vt,Qt){return It instanceof Ar?It:ln(It)&&typeof It[0]!="object"?It.length===3?new Ar(It[0],It[1],It[2]):It.length===2?new Ar(It[0],It[1]):null:It==null?It:typeof It=="object"&&"lat"in It?new Ar(It.lat,"lng"in It?It.lng:It.lon,It.alt):Vt===void 0?null:new Ar(It,Vt,Qt)}var ii={latLngToPoint:function(It,Vt){var Qt=this.projection.project(It),fn=this.scale(Vt);return this.transformation._transform(Qt,fn)},pointToLatLng:function(It,Vt){var Qt=this.scale(Vt),fn=this.transformation.untransform(It,Qt);return this.projection.unproject(fn)},project:function(It){return this.projection.project(It)},unproject:function(It){return this.projection.unproject(It)},scale:function(It){return 256*Math.pow(2,It)},zoom:function(It){return Math.log(It/256)/Math.LN2},getProjectedBounds:function(It){if(this.infinite)return null;var Vt=this.projection.bounds,Qt=this.scale(It),fn=this.transformation.transform(Vt.min,Qt),Rn=this.transformation.transform(Vt.max,Qt);return new vr(fn,Rn)},infinite:!1,wrapLatLng:function(It){var Vt=this.wrapLng?Nt(It.lng,this.wrapLng,!0):It.lng,Qt=this.wrapLat?Nt(It.lat,this.wrapLat,!0):It.lat,fn=It.alt;return new Ar(Qt,Vt,fn)},wrapLatLngBounds:function(It){var Vt=It.getCenter(),Qt=this.wrapLatLng(Vt),fn=Vt.lat-Qt.lat,Rn=Vt.lng-Qt.lng;if(fn===0&&Rn===0)return It;var tr=It.getSouthWest(),Lr=It.getNorthEast(),qr=new Ar(tr.lat-fn,tr.lng-Rn),ni=new Ar(Lr.lat-fn,Lr.lng-Rn);return new gr(qr,ni)}},ar=bt({},ii,{wrapLng:[-180,180],R:6371e3,distance:function(It,Vt){var Qt=Math.PI/180,fn=It.lat*Qt,Rn=Vt.lat*Qt,tr=Math.sin((Vt.lat-It.lat)*Qt/2),Lr=Math.sin((Vt.lng-It.lng)*Qt/2),qr=tr*tr+Math.cos(fn)*Math.cos(Rn)*Lr*Lr,ni=2*Math.atan2(Math.sqrt(qr),Math.sqrt(1-qr));return this.R*ni}}),fr=6378137,wr={R:fr,MAX_LATITUDE:85.0511287798,project:function(It){var Vt=Math.PI/180,Qt=this.MAX_LATITUDE,fn=Math.max(Math.min(Qt,It.lat),-Qt),Rn=Math.sin(fn*Vt);return new Er(this.R*It.lng*Vt,this.R*Math.log((1+Rn)/(1-Rn))/2)},unproject:function(It){var Vt=180/Math.PI;return new Ar((2*Math.atan(Math.exp(It.y/this.R))-Math.PI/2)*Vt,It.x*Vt/this.R)},bounds:function(){var It=fr*Math.PI;return new vr([-It,-It],[It,It])}()};function ir(It,Vt,Qt,fn){if(ln(It)){this._a=It[0],this._b=It[1],this._c=It[2],this._d=It[3];return}this._a=It,this._b=Vt,this._c=Qt,this._d=fn}ir.prototype={transform:function(It,Vt){return this._transform(It.clone(),Vt)},_transform:function(It,Vt){return Vt=Vt||1,It.x=Vt*(this._a*It.x+this._b),It.y=Vt*(this._c*It.y+this._d),It},untransform:function(It,Vt){return Vt=Vt||1,new Er((It.x/Vt-this._b)/this._a,(It.y/Vt-this._d)/this._c)}};function Ln(It,Vt,Qt,fn){return new ir(It,Vt,Qt,fn)}var en=bt({},ar,{code:"EPSG:3857",projection:wr,transformation:function(){var It=.5/(Math.PI*wr.R);return Ln(It,.5,-It,.5)}()}),dn=bt({},en,{code:"EPSG:900913"});function un(It){return document.createElementNS("http://www.w3.org/2000/svg",It)}function Nn(It,Vt){var Qt="",fn,Rn,tr,Lr,qr,ni;for(fn=0,tr=It.length;fn<tr;fn++){for(qr=It[fn],Rn=0,Lr=qr.length;Rn<Lr;Rn++)ni=qr[Rn],Qt+=(Rn?"L":"M")+ni.x+" "+ni.y;Qt+=Vt?Pi.svg?"z":"x":""}return Qt||"M0 0"}var In=document.documentElement.style,lr="ActiveXObject"in window,$n=lr&&!document.addEventListener,Qn="msLaunchUri"in navigator&&!("documentMode"in document),Wn=Ws("webkit"),or=Ws("android"),dr=Ws("android 2")||Ws("android 3"),kr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),br=or&&Ws("Google")&&kr<537&&!("AudioNode"in window),_r=!!window.opera,hi=!Qn&&Ws("chrome"),di=Ws("gecko")&&!Wn&&!_r&&!lr,vi=!hi&&Ws("safari"),Ai=Ws("phantom"),ki="OTransition"in In,Bi=navigator.platform.indexOf("Win")===0,Ti=lr&&"transition"in In,Rr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dr,Tn="MozPerspective"in In,Sn=!window.L_DISABLE_3D&&(Ti||Rr||Tn)&&!ki&&!Ai,jn=typeof orientation<"u"||Ws("mobile"),er=jn&&Wn,Cr=jn&&Rr,Qr=!window.PointerEvent&&window.MSPointerEvent,yr=!!(window.PointerEvent||Qr),ai="ontouchstart"in window||!!window.TouchEvent,Ir=!window.L_NO_TOUCH&&(ai||yr),mi=jn&&_r,wi=jn&&di,Mi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ei=function(){var It=!1;try{var Vt=Object.defineProperty({},"passive",{get:function(){It=!0}});window.addEventListener("testPassiveEventSupport",zt,Vt),window.removeEventListener("testPassiveEventSupport",zt,Vt)}catch{}return It}(),io=function(){return!!document.createElement("canvas").getContext}(),Di=!!(document.createElementNS&&un("svg").createSVGRect),eo=!!Di&&function(){var It=document.createElement("div");return It.innerHTML="<svg/>",(It.firstChild&&It.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),wo=!Di&&function(){try{var It=document.createElement("div");It.innerHTML='<v:shape adj="1"/>';var Vt=It.firstChild;return Vt.style.behavior="url(#default#VML)",Vt&&typeof Vt.adj=="object"}catch{return!1}}(),Ji=navigator.platform.indexOf("Mac")===0,al=navigator.platform.indexOf("Linux")===0;function Ws(It){return navigator.userAgent.toLowerCase().indexOf(It)>=0}var Pi={ie:lr,ielt9:$n,edge:Qn,webkit:Wn,android:or,android23:dr,androidStock:br,opera:_r,chrome:hi,gecko:di,safari:vi,phantom:Ai,opera12:ki,win:Bi,ie3d:Ti,webkit3d:Rr,gecko3d:Tn,any3d:Sn,mobile:jn,mobileWebkit:er,mobileWebkit3d:Cr,msPointer:Qr,pointer:yr,touch:Ir,touchNative:ai,mobileOpera:mi,mobileGecko:wi,retina:Mi,passiveEvents:Ei,canvas:io,svg:Di,vml:wo,inlineSvg:eo,mac:Ji,linux:al},oo=Pi.msPointer?"MSPointerDown":"pointerdown",Rs=Pi.msPointer?"MSPointerMove":"pointermove",jo=Pi.msPointer?"MSPointerUp":"pointerup",ls=Pi.msPointer?"MSPointerCancel":"pointercancel",Dr={touchstart:oo,touchmove:Rs,touchend:jo,touchcancel:ls},Yr={touchstart:Mo,touchmove:Co,touchend:Co,touchcancel:Co},Vr={},xi=!1;function ui(It,Vt,Qt){return Vt==="touchstart"&&ss(),Yr[Vt]?(Qt=Yr[Vt].bind(this,Qt),It.addEventListener(Dr[Vt],Qt,!1),Qt):(console.warn("wrong event specified:",Vt),zt)}function xr(It,Vt,Qt){if(!Dr[Vt]){console.warn("wrong event specified:",Vt);return}It.removeEventListener(Dr[Vt],Qt,!1)}function li(It){Vr[It.pointerId]=It}function yi(It){Vr[It.pointerId]&&(Vr[It.pointerId]=It)}function uo(It){delete Vr[It.pointerId]}function ss(){xi||(document.addEventListener(oo,li,!0),document.addEventListener(Rs,yi,!0),document.addEventListener(jo,uo,!0),document.addEventListener(ls,uo,!0),xi=!0)}function Co(It,Vt){if(Vt.pointerType!==(Vt.MSPOINTER_TYPE_MOUSE||"mouse")){Vt.touches=[];for(var Qt in Vr)Vt.touches.push(Vr[Qt]);Vt.changedTouches=[Vt],It(Vt)}}function Mo(It,Vt){Vt.MSPOINTER_TYPE_TOUCH&&Vt.pointerType===Vt.MSPOINTER_TYPE_TOUCH&&ua(Vt),Co(It,Vt)}function ho(It){var Vt={},Qt,fn;for(fn in It)Qt=It[fn],Vt[fn]=Qt&&Qt.bind?Qt.bind(It):Qt;return It=Vt,Vt.type="dblclick",Vt.detail=2,Vt.isTrusted=!1,Vt._simulated=!0,Vt}var as=200;function pl(It,Vt){It.addEventListener("dblclick",Vt);var Qt=0,fn;function Rn(tr){if(tr.detail!==1){fn=tr.detail;return}if(!(tr.pointerType==="mouse"||tr.sourceCapabilities&&!tr.sourceCapabilities.firesTouchEvents)){var Lr=oc(tr);if(!(Lr.some(function(ni){return ni instanceof HTMLLabelElement&&ni.attributes.for})&&!Lr.some(function(ni){return ni instanceof HTMLInputElement||ni instanceof HTMLSelectElement}))){var qr=Date.now();qr-Qt<=as?(fn++,fn===2&&Vt(ho(tr))):fn=1,Qt=qr}}}return It.addEventListener("click",Rn),{dblclick:Vt,simDblclick:Rn}}function vu(It,Vt){It.removeEventListener("dblclick",Vt.dblclick),It.removeEventListener("click",Vt.simDblclick)}var Ea=ru(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ji=ru(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ao=ji==="webkitTransition"||ji==="OTransition"?ji+"End":"transitionend";function mo(It){return typeof It=="string"?document.getElementById(It):It}function Oi(It,Vt){var Qt=It.style[Vt]||It.currentStyle&&It.currentStyle[Vt];if((!Qt||Qt==="auto")&&document.defaultView){var fn=document.defaultView.getComputedStyle(It,null);Qt=fn?fn[Vt]:null}return Qt==="auto"?null:Qt}function so(It,Vt,Qt){var fn=document.createElement(It);return fn.className=Vt||"",Qt&&Qt.appendChild(fn),fn}function Sr(It){var Vt=It.parentNode;Vt&&Vt.removeChild(It)}function Ml(It){for(;It.firstChild;)It.removeChild(It.firstChild)}function Nr(It){var Vt=It.parentNode;Vt&&Vt.lastChild!==It&&Vt.appendChild(It)}function na(It){var Vt=It.parentNode;Vt&&Vt.firstChild!==It&&Vt.insertBefore(It,Vt.firstChild)}function _u(It,Vt){if(It.classList!==void 0)return It.classList.contains(Vt);var Qt=zi(It);return Qt.length>0&&new RegExp("(^|\\s)"+Vt+"(\\s|$)").test(Qt)}function Bo(It,Vt){if(It.classList!==void 0)for(var Qt=Zt(Vt),fn=0,Rn=Qt.length;fn<Rn;fn++)It.classList.add(Qt[fn]);else if(!_u(It,Vt)){var tr=zi(It);Cc(It,(tr?tr+" ":"")+Vt)}}function yo(It,Vt){It.classList!==void 0?It.classList.remove(Vt):Cc(It,Wt((" "+zi(It)+" ").replace(" "+Vt+" "," ")))}function Cc(It,Vt){It.className.baseVal===void 0?It.className=Vt:It.className.baseVal=Vt}function zi(It){return It.correspondingElement&&(It=It.correspondingElement),It.className.baseVal===void 0?It.className:It.className.baseVal}function vo(It,Vt){"opacity"in It.style?It.style.opacity=Vt:"filter"in It.style&&qa(It,Vt)}function qa(It,Vt){var Qt=!1,fn="DXImageTransform.Microsoft.Alpha";try{Qt=It.filters.item(fn)}catch{if(Vt===1)return}Vt=Math.round(Vt*100),Qt?(Qt.Enabled=Vt!==100,Qt.Opacity=Vt):It.style.filter+=" progid:"+fn+"(opacity="+Vt+")"}function ru(It){for(var Vt=document.documentElement.style,Qt=0;Qt<It.length;Qt++)if(It[Qt]in Vt)return It[Qt];return!1}function Rl(It,Vt,Qt){var fn=Vt||new Er(0,0);It.style[Ea]=(Pi.ie3d?"translate("+fn.x+"px,"+fn.y+"px)":"translate3d("+fn.x+"px,"+fn.y+"px,0)")+(Qt?" scale("+Qt+")":"")}function Js(It,Vt){It._leaflet_pos=Vt,Pi.any3d?Rl(It,Vt):(It.style.left=Vt.x+"px",It.style.top=Vt.y+"px")}function Vo(It){return It._leaflet_pos||new Er(0,0)}var Wo,oa,Sl;if("onselectstart"in document)Wo=function(){Fo(window,"selectstart",ua)},oa=function(){co(window,"selectstart",ua)};else{var pa=ru(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wo=function(){if(pa){var It=document.documentElement.style;Sl=It[pa],It[pa]="none"}},oa=function(){pa&&(document.documentElement.style[pa]=Sl,Sl=void 0)}}function gl(){Fo(window,"dragstart",ua)}function Ha(){co(window,"dragstart",ua)}var ic,Ru;function bu(It){for(;It.tabIndex===-1;)It=It.parentNode;!It.style||(Xa(),ic=It,Ru=It.style.outline,It.style.outline="none",Fo(window,"keydown",Xa))}function Xa(){!ic||(ic.style.outline=Ru,ic=void 0,Ru=void 0,co(window,"keydown",Xa))}function Tc(It){do It=It.parentNode;while((!It.offsetWidth||!It.offsetHeight)&&It!==document.body);return It}function kc(It){var Vt=It.getBoundingClientRect();return{x:Vt.width/It.offsetWidth||1,y:Vt.height/It.offsetHeight||1,boundingClientRect:Vt}}var Ac={__proto__:null,TRANSFORM:Ea,TRANSITION:ji,TRANSITION_END:ao,get:mo,getStyle:Oi,create:so,remove:Sr,empty:Ml,toFront:Nr,toBack:na,hasClass:_u,addClass:Bo,removeClass:yo,setClass:Cc,getClass:zi,setOpacity:vo,testProp:ru,setTransform:Rl,setPosition:Js,getPosition:Vo,get disableTextSelection(){return Wo},get enableTextSelection(){return oa},disableImageDrag:gl,enableImageDrag:Ha,preventOutline:bu,restoreOutline:Xa,getSizedParentNode:Tc,getScale:kc};function Fo(It,Vt,Qt,fn){if(Vt&&typeof Vt=="object")for(var Rn in Vt)Jh(It,Rn,Vt[Rn],Qt);else{Vt=Zt(Vt);for(var tr=0,Lr=Vt.length;tr<Lr;tr++)Jh(It,Vt[tr],Qt,fn)}return this}var ga="_leaflet_events";function co(It,Vt,Qt,fn){if(arguments.length===1)Cl(It),delete It[ga];else if(Vt&&typeof Vt=="object")for(var Rn in Vt)Kc(It,Rn,Vt[Rn],Qt);else if(Vt=Zt(Vt),arguments.length===2)Cl(It,function(qr){return sn(Vt,qr)!==-1});else for(var tr=0,Lr=Vt.length;tr<Lr;tr++)Kc(It,Vt[tr],Qt,fn);return this}function Cl(It,Vt){for(var Qt in It[ga]){var fn=Qt.split(/\d/)[0];(!Vt||Vt(fn))&&Kc(It,fn,null,null,Qt)}}var Kh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Jh(It,Vt,Qt,fn){var Rn=Vt+Lt(Qt)+(fn?"_"+Lt(fn):"");if(It[ga]&&It[ga][Rn])return this;var tr=function(qr){return Qt.call(fn||It,qr||window.event)},Lr=tr;!Pi.touchNative&&Pi.pointer&&Vt.indexOf("touch")===0?tr=ui(It,Vt,tr):Pi.touch&&Vt==="dblclick"?tr=pl(It,tr):"addEventListener"in It?Vt==="touchstart"||Vt==="touchmove"||Vt==="wheel"||Vt==="mousewheel"?It.addEventListener(Kh[Vt]||Vt,tr,Pi.passiveEvents?{passive:!1}:!1):Vt==="mouseenter"||Vt==="mouseleave"?(tr=function(qr){qr=qr||window.event,Tl(It,qr)&&Lr(qr)},It.addEventListener(Kh[Vt],tr,!1)):It.addEventListener(Vt,Lr,!1):It.attachEvent("on"+Vt,tr),It[ga]=It[ga]||{},It[ga][Rn]=tr}function Kc(It,Vt,Qt,fn,Rn){Rn=Rn||Vt+Lt(Qt)+(fn?"_"+Lt(fn):"");var tr=It[ga]&&It[ga][Rn];if(!tr)return this;!Pi.touchNative&&Pi.pointer&&Vt.indexOf("touch")===0?xr(It,Vt,tr):Pi.touch&&Vt==="dblclick"?vu(It,tr):"removeEventListener"in It?It.removeEventListener(Kh[Vt]||Vt,tr,!1):It.detachEvent("on"+Vt,tr),It[ga][Rn]=null}function Pc(It){return It.stopPropagation?It.stopPropagation():It.originalEvent?It.originalEvent._stopped=!0:It.cancelBubble=!0,this}function Jc(It){return Jh(It,"wheel",Pc),this}function Dl(It){return Fo(It,"mousedown touchstart dblclick contextmenu",Pc),It._leaflet_disable_click=!0,this}function ua(It){return It.preventDefault?It.preventDefault():It.returnValue=!1,this}function Du(It){return ua(It),Pc(It),this}function oc(It){if(It.composedPath)return It.composedPath();for(var Vt=[],Qt=It.target;Qt;)Vt.push(Qt),Qt=Qt.parentNode;return Vt}function Md(It,Vt){if(!Vt)return new Er(It.clientX,It.clientY);var Qt=kc(Vt),fn=Qt.boundingClientRect;return new Er((It.clientX-fn.left)/Qt.x-Vt.clientLeft,(It.clientY-fn.top)/Qt.y-Vt.clientTop)}var wf=Pi.linux&&Pi.chrome?window.devicePixelRatio:Pi.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qh(It){return Pi.edge?It.wheelDeltaY/2:It.deltaY&&It.deltaMode===0?-It.deltaY/wf:It.deltaY&&It.deltaMode===1?-It.deltaY*20:It.deltaY&&It.deltaMode===2?-It.deltaY*60:It.deltaX||It.deltaZ?0:It.wheelDelta?(It.wheelDeltaY||It.wheelDelta)/2:It.detail&&Math.abs(It.detail)<32765?-It.detail*20:It.detail?It.detail/-32765*60:0}function Tl(It,Vt){var Qt=Vt.relatedTarget;if(!Qt)return!0;try{for(;Qt&&Qt!==It;)Qt=Qt.parentNode}catch{return!1}return Qt!==It}var Va={__proto__:null,on:Fo,off:co,stopPropagation:Pc,disableScrollPropagation:Jc,disableClickPropagation:Dl,preventDefault:ua,stop:Du,getPropagationPath:oc,getMousePosition:Md,getWheelDelta:Qh,isExternalTarget:Tl,addListener:Fo,removeListener:co},Ch=mr.extend({run:function(It,Vt,Qt,fn){this.stop(),this._el=It,this._inProgress=!0,this._duration=Qt||.25,this._easeOutPower=1/Math.max(fn||.5,.2),this._startPos=Vo(It),this._offset=Vt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=kn(this._animate,this),this._step()},_step:function(It){var Vt=+new Date-this._startTime,Qt=this._duration*1e3;Vt<Qt?this._runFrame(this._easeOut(Vt/Qt),It):(this._runFrame(1),this._complete())},_runFrame:function(It,Vt){var Qt=this._startPos.add(this._offset.multiplyBy(It));Vt&&Qt._round(),Js(this._el,Qt),this.fire("step")},_complete:function(){gn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(It){return 1-Math.pow(1-It,this._easeOutPower)}}),zo=mr.extend({options:{crs:en,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(It,Vt){Vt=tn(this,Vt),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(It),this._initLayout(),this._onResize=Tt(this._onResize,this),this._initEvents(),Vt.maxBounds&&this.setMaxBounds(Vt.maxBounds),Vt.zoom!==void 0&&(this._zoom=this._limitZoom(Vt.zoom)),Vt.center&&Vt.zoom!==void 0&&this.setView(sr(Vt.center),Vt.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ji&&Pi.any3d&&!Pi.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Fo(this._proxy,ao,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(It,Vt,Qt){if(Vt=Vt===void 0?this._zoom:this._limitZoom(Vt),It=this._limitCenter(sr(It),Vt,this.options.maxBounds),Qt=Qt||{},this._stop(),this._loaded&&!Qt.reset&&Qt!==!0){Qt.animate!==void 0&&(Qt.zoom=bt({animate:Qt.animate},Qt.zoom),Qt.pan=bt({animate:Qt.animate,duration:Qt.duration},Qt.pan));var fn=this._zoom!==Vt?this._tryAnimatedZoom&&this._tryAnimatedZoom(It,Vt,Qt.zoom):this._tryAnimatedPan(It,Qt.pan);if(fn)return clearTimeout(this._sizeTimer),this}return this._resetView(It,Vt,Qt.pan&&Qt.pan.noMoveStart),this},setZoom:function(It,Vt){return this._loaded?this.setView(this.getCenter(),It,{zoom:Vt}):(this._zoom=It,this)},zoomIn:function(It,Vt){return It=It||(Pi.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+It,Vt)},zoomOut:function(It,Vt){return It=It||(Pi.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-It,Vt)},setZoomAround:function(It,Vt,Qt){var fn=this.getZoomScale(Vt),Rn=this.getSize().divideBy(2),tr=It instanceof Er?It:this.latLngToContainerPoint(It),Lr=tr.subtract(Rn).multiplyBy(1-1/fn),qr=this.containerPointToLatLng(Rn.add(Lr));return this.setView(qr,Vt,{zoom:Qt})},_getBoundsCenterZoom:function(It,Vt){Vt=Vt||{},It=It.getBounds?It.getBounds():Or(It);var Qt=rr(Vt.paddingTopLeft||Vt.padding||[0,0]),fn=rr(Vt.paddingBottomRight||Vt.padding||[0,0]),Rn=this.getBoundsZoom(It,!1,Qt.add(fn));if(Rn=typeof Vt.maxZoom=="number"?Math.min(Vt.maxZoom,Rn):Rn,Rn===1/0)return{center:It.getCenter(),zoom:Rn};var tr=fn.subtract(Qt).divideBy(2),Lr=this.project(It.getSouthWest(),Rn),qr=this.project(It.getNorthEast(),Rn),ni=this.unproject(Lr.add(qr).divideBy(2).add(tr),Rn);return{center:ni,zoom:Rn}},fitBounds:function(It,Vt){if(It=Or(It),!It.isValid())throw new Error("Bounds are not valid.");var Qt=this._getBoundsCenterZoom(It,Vt);return this.setView(Qt.center,Qt.zoom,Vt)},fitWorld:function(It){return this.fitBounds([[-90,-180],[90,180]],It)},panTo:function(It,Vt){return this.setView(It,this._zoom,{pan:Vt})},panBy:function(It,Vt){if(It=rr(It).round(),Vt=Vt||{},!It.x&&!It.y)return this.fire("moveend");if(Vt.animate!==!0&&!this.getSize().contains(It))return this._resetView(this.unproject(this.project(this.getCenter()).add(It)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ch,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),Vt.noMoveStart||this.fire("movestart"),Vt.animate!==!1){Bo(this._mapPane,"leaflet-pan-anim");var Qt=this._getMapPanePos().subtract(It).round();this._panAnim.run(this._mapPane,Qt,Vt.duration||.25,Vt.easeLinearity)}else this._rawPanBy(It),this.fire("move").fire("moveend");return this},flyTo:function(It,Vt,Qt){if(Qt=Qt||{},Qt.animate===!1||!Pi.any3d)return this.setView(It,Vt,Qt);this._stop();var fn=this.project(this.getCenter()),Rn=this.project(It),tr=this.getSize(),Lr=this._zoom;It=sr(It),Vt=Vt===void 0?Lr:Vt;var qr=Math.max(tr.x,tr.y),ni=qr*this.getZoomScale(Lr,Vt),_i=Rn.distanceTo(fn)||1,Gi=1.42,Ro=Gi*Gi;function ys(Qs){var Wd=Qs?-1:1,$g=Qs?ni:qr,Bg=ni*ni-qr*qr+Wd*Ro*Ro*_i*_i,dd=2*$g*Ro*_i,fd=Bg/dd,Df=Math.sqrt(fd*fd+1)-fd,Dp=Df<1e-9?-18:Math.log(Df);return Dp}function ql(Qs){return(Math.exp(Qs)-Math.exp(-Qs))/2}function oh(Qs){return(Math.exp(Qs)+Math.exp(-Qs))/2}function Ph(Qs){return ql(Qs)/oh(Qs)}var Eu=ys(0);function Mf(Qs){return qr*(oh(Eu)/oh(Eu+Gi*Qs))}function Mp(Qs){return qr*(oh(Eu)*Ph(Eu+Gi*Qs)-ql(Eu))/Ro}function Ng(Qs){return 1-Math.pow(1-Qs,1.5)}var Rp=Date.now(),sh=(ys(1)-Eu)/Gi,hd=Qt.duration?1e3*Qt.duration:1e3*sh*.8;function Rf(){var Qs=(Date.now()-Rp)/hd,Wd=Ng(Qs)*sh;Qs<=1?(this._flyToFrame=kn(Rf,this),this._move(this.unproject(fn.add(Rn.subtract(fn).multiplyBy(Mp(Wd)/_i)),Lr),this.getScaleZoom(qr/Mf(Wd),Lr),{flyTo:!0})):this._move(It,Vt)._moveEnd(!0)}return this._moveStart(!0,Qt.noMoveStart),Rf.call(this),this},flyToBounds:function(It,Vt){var Qt=this._getBoundsCenterZoom(It,Vt);return this.flyTo(Qt.center,Qt.zoom,Vt)},setMaxBounds:function(It){return It=Or(It),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),It.isValid()?(this.options.maxBounds=It,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(It){var Vt=this.options.minZoom;return this.options.minZoom=It,this._loaded&&Vt!==It&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(It):this},setMaxZoom:function(It){var Vt=this.options.maxZoom;return this.options.maxZoom=It,this._loaded&&Vt!==It&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(It):this},panInsideBounds:function(It,Vt){this._enforcingBounds=!0;var Qt=this.getCenter(),fn=this._limitCenter(Qt,this._zoom,Or(It));return Qt.equals(fn)||this.panTo(fn,Vt),this._enforcingBounds=!1,this},panInside:function(It,Vt){Vt=Vt||{};var Qt=rr(Vt.paddingTopLeft||Vt.padding||[0,0]),fn=rr(Vt.paddingBottomRight||Vt.padding||[0,0]),Rn=this.project(this.getCenter()),tr=this.project(It),Lr=this.getPixelBounds(),qr=cr([Lr.min.add(Qt),Lr.max.subtract(fn)]),ni=qr.getSize();if(!qr.contains(tr)){this._enforcingBounds=!0;var _i=tr.subtract(qr.getCenter()),Gi=qr.extend(tr).getSize().subtract(ni);Rn.x+=_i.x<0?-Gi.x:Gi.x,Rn.y+=_i.y<0?-Gi.y:Gi.y,this.panTo(this.unproject(Rn),Vt),this._enforcingBounds=!1}return this},invalidateSize:function(It){if(!this._loaded)return this;It=bt({animate:!1,pan:!0},It===!0?{animate:!0}:It);var Vt=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var Qt=this.getSize(),fn=Vt.divideBy(2).round(),Rn=Qt.divideBy(2).round(),tr=fn.subtract(Rn);return!tr.x&&!tr.y?this:(It.animate&&It.pan?this.panBy(tr):(It.pan&&this._rawPanBy(tr),this.fire("move"),It.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Tt(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:Vt,newSize:Qt}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(It){if(It=this._locateOptions=bt({timeout:1e4,watch:!1},It),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var Vt=Tt(this._handleGeolocationResponse,this),Qt=Tt(this._handleGeolocationError,this);return It.watch?this._locationWatchId=navigator.geolocation.watchPosition(Vt,Qt,It):navigator.geolocation.getCurrentPosition(Vt,Qt,It),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(It){if(!!this._container._leaflet_id){var Vt=It.code,Qt=It.message||(Vt===1?"permission denied":Vt===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:Vt,message:"Geolocation error: "+Qt+"."})}},_handleGeolocationResponse:function(It){if(!!this._container._leaflet_id){var Vt=It.coords.latitude,Qt=It.coords.longitude,fn=new Ar(Vt,Qt),Rn=fn.toBounds(It.coords.accuracy*2),tr=this._locateOptions;if(tr.setView){var Lr=this.getBoundsZoom(Rn);this.setView(fn,tr.maxZoom?Math.min(Lr,tr.maxZoom):Lr)}var qr={latlng:fn,bounds:Rn,timestamp:It.timestamp};for(var ni in It.coords)typeof It.coords[ni]=="number"&&(qr[ni]=It.coords[ni]);this.fire("locationfound",qr)}},addHandler:function(It,Vt){if(!Vt)return this;var Qt=this[It]=new Vt(this);return this._handlers.push(Qt),this.options[It]&&Qt.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Sr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(gn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var It;for(It in this._layers)this._layers[It].remove();for(It in this._panes)Sr(this._panes[It]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(It,Vt){var Qt="leaflet-pane"+(It?" leaflet-"+It.replace("Pane","")+"-pane":""),fn=so("div",Qt,Vt||this._mapPane);return It&&(this._panes[It]=fn),fn},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var It=this.getPixelBounds(),Vt=this.unproject(It.getBottomLeft()),Qt=this.unproject(It.getTopRight());return new gr(Vt,Qt)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(It,Vt,Qt){It=Or(It),Qt=rr(Qt||[0,0]);var fn=this.getZoom()||0,Rn=this.getMinZoom(),tr=this.getMaxZoom(),Lr=It.getNorthWest(),qr=It.getSouthEast(),ni=this.getSize().subtract(Qt),_i=cr(this.project(qr,fn),this.project(Lr,fn)).getSize(),Gi=Pi.any3d?this.options.zoomSnap:1,Ro=ni.x/_i.x,ys=ni.y/_i.y,ql=Vt?Math.max(Ro,ys):Math.min(Ro,ys);return fn=this.getScaleZoom(ql,fn),Gi&&(fn=Math.round(fn/(Gi/100))*(Gi/100),fn=Vt?Math.ceil(fn/Gi)*Gi:Math.floor(fn/Gi)*Gi),Math.max(Rn,Math.min(tr,fn))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Er(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(It,Vt){var Qt=this._getTopLeftPoint(It,Vt);return new vr(Qt,Qt.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(It){return this.options.crs.getProjectedBounds(It===void 0?this.getZoom():It)},getPane:function(It){return typeof It=="string"?this._panes[It]:It},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(It,Vt){var Qt=this.options.crs;return Vt=Vt===void 0?this._zoom:Vt,Qt.scale(It)/Qt.scale(Vt)},getScaleZoom:function(It,Vt){var Qt=this.options.crs;Vt=Vt===void 0?this._zoom:Vt;var fn=Qt.zoom(It*Qt.scale(Vt));return isNaN(fn)?1/0:fn},project:function(It,Vt){return Vt=Vt===void 0?this._zoom:Vt,this.options.crs.latLngToPoint(sr(It),Vt)},unproject:function(It,Vt){return Vt=Vt===void 0?this._zoom:Vt,this.options.crs.pointToLatLng(rr(It),Vt)},layerPointToLatLng:function(It){var Vt=rr(It).add(this.getPixelOrigin());return this.unproject(Vt)},latLngToLayerPoint:function(It){var Vt=this.project(sr(It))._round();return Vt._subtract(this.getPixelOrigin())},wrapLatLng:function(It){return this.options.crs.wrapLatLng(sr(It))},wrapLatLngBounds:function(It){return this.options.crs.wrapLatLngBounds(Or(It))},distance:function(It,Vt){return this.options.crs.distance(sr(It),sr(Vt))},containerPointToLayerPoint:function(It){return rr(It).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(It){return rr(It).add(this._getMapPanePos())},containerPointToLatLng:function(It){var Vt=this.containerPointToLayerPoint(rr(It));return this.layerPointToLatLng(Vt)},latLngToContainerPoint:function(It){return this.layerPointToContainerPoint(this.latLngToLayerPoint(sr(It)))},mouseEventToContainerPoint:function(It){return Md(It,this._container)},mouseEventToLayerPoint:function(It){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(It))},mouseEventToLatLng:function(It){return this.layerPointToLatLng(this.mouseEventToLayerPoint(It))},_initContainer:function(It){var Vt=this._container=mo(It);if(Vt){if(Vt._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Fo(Vt,"scroll",this._onScroll,this),this._containerId=Lt(Vt)},_initLayout:function(){var It=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pi.any3d,Bo(It,"leaflet-container"+(Pi.touch?" leaflet-touch":"")+(Pi.retina?" leaflet-retina":"")+(Pi.ielt9?" leaflet-oldie":"")+(Pi.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var Vt=Oi(It,"position");Vt!=="absolute"&&Vt!=="relative"&&Vt!=="fixed"&&Vt!=="sticky"&&(It.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var It=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Js(this._mapPane,new Er(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Bo(It.markerPane,"leaflet-zoom-hide"),Bo(It.shadowPane,"leaflet-zoom-hide"))},_resetView:function(It,Vt,Qt){Js(this._mapPane,new Er(0,0));var fn=!this._loaded;this._loaded=!0,Vt=this._limitZoom(Vt),this.fire("viewprereset");var Rn=this._zoom!==Vt;this._moveStart(Rn,Qt)._move(It,Vt)._moveEnd(Rn),this.fire("viewreset"),fn&&this.fire("load")},_moveStart:function(It,Vt){return It&&this.fire("zoomstart"),Vt||this.fire("movestart"),this},_move:function(It,Vt,Qt,fn){Vt===void 0&&(Vt=this._zoom);var Rn=this._zoom!==Vt;return this._zoom=Vt,this._lastCenter=It,this._pixelOrigin=this._getNewPixelOrigin(It),fn?Qt&&Qt.pinch&&this.fire("zoom",Qt):((Rn||Qt&&Qt.pinch)&&this.fire("zoom",Qt),this.fire("move",Qt)),this},_moveEnd:function(It){return It&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return gn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(It){Js(this._mapPane,this._getMapPanePos().subtract(It))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(It){this._targets={},this._targets[Lt(this._container)]=this;var Vt=It?co:Fo;Vt(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&Vt(window,"resize",this._onResize,this),Pi.any3d&&this.options.transform3DLimit&&(It?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){gn(this._resizeRequest),this._resizeRequest=kn(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var It=this._getMapPanePos();Math.max(Math.abs(It.x),Math.abs(It.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(It,Vt){for(var Qt=[],fn,Rn=Vt==="mouseout"||Vt==="mouseover",tr=It.target||It.srcElement,Lr=!1;tr;){if(fn=this._targets[Lt(tr)],fn&&(Vt==="click"||Vt==="preclick")&&this._draggableMoved(fn)){Lr=!0;break}if(fn&&fn.listens(Vt,!0)&&(Rn&&!Tl(tr,It)||(Qt.push(fn),Rn))||tr===this._container)break;tr=tr.parentNode}return!Qt.length&&!Lr&&!Rn&&this.listens(Vt,!0)&&(Qt=[this]),Qt},_isClickDisabled:function(It){for(;It&&It!==this._container;){if(It._leaflet_disable_click)return!0;It=It.parentNode}},_handleDOMEvent:function(It){var Vt=It.target||It.srcElement;if(!(!this._loaded||Vt._leaflet_disable_events||It.type==="click"&&this._isClickDisabled(Vt))){var Qt=It.type;Qt==="mousedown"&&bu(Vt),this._fireDOMEvent(It,Qt)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(It,Vt,Qt){if(It.type==="click"){var fn=bt({},It);fn.type="preclick",this._fireDOMEvent(fn,fn.type,Qt)}var Rn=this._findEventTargets(It,Vt);if(Qt){for(var tr=[],Lr=0;Lr<Qt.length;Lr++)Qt[Lr].listens(Vt,!0)&&tr.push(Qt[Lr]);Rn=tr.concat(Rn)}if(!!Rn.length){Vt==="contextmenu"&&ua(It);var qr=Rn[0],ni={originalEvent:It};if(It.type!=="keypress"&&It.type!=="keydown"&&It.type!=="keyup"){var _i=qr.getLatLng&&(!qr._radius||qr._radius<=10);ni.containerPoint=_i?this.latLngToContainerPoint(qr.getLatLng()):this.mouseEventToContainerPoint(It),ni.layerPoint=this.containerPointToLayerPoint(ni.containerPoint),ni.latlng=_i?qr.getLatLng():this.layerPointToLatLng(ni.layerPoint)}for(Lr=0;Lr<Rn.length;Lr++)if(Rn[Lr].fire(Vt,ni,!0),ni.originalEvent._stopped||Rn[Lr].options.bubblingMouseEvents===!1&&sn(this._mouseEvents,Vt)!==-1)return}},_draggableMoved:function(It){return It=It.dragging&&It.dragging.enabled()?It:this,It.dragging&&It.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var It=0,Vt=this._handlers.length;It<Vt;It++)this._handlers[It].disable()},whenReady:function(It,Vt){return this._loaded?It.call(Vt||this,{target:this}):this.on("load",It,Vt),this},_getMapPanePos:function(){return Vo(this._mapPane)||new Er(0,0)},_moved:function(){var It=this._getMapPanePos();return It&&!It.equals([0,0])},_getTopLeftPoint:function(It,Vt){var Qt=It&&Vt!==void 0?this._getNewPixelOrigin(It,Vt):this.getPixelOrigin();return Qt.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(It,Vt){var Qt=this.getSize()._divideBy(2);return this.project(It,Vt)._subtract(Qt)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(It,Vt,Qt){var fn=this._getNewPixelOrigin(Qt,Vt);return this.project(It,Vt)._subtract(fn)},_latLngBoundsToNewLayerBounds:function(It,Vt,Qt){var fn=this._getNewPixelOrigin(Qt,Vt);return cr([this.project(It.getSouthWest(),Vt)._subtract(fn),this.project(It.getNorthWest(),Vt)._subtract(fn),this.project(It.getSouthEast(),Vt)._subtract(fn),this.project(It.getNorthEast(),Vt)._subtract(fn)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(It){return this.latLngToLayerPoint(It).subtract(this._getCenterLayerPoint())},_limitCenter:function(It,Vt,Qt){if(!Qt)return It;var fn=this.project(It,Vt),Rn=this.getSize().divideBy(2),tr=new vr(fn.subtract(Rn),fn.add(Rn)),Lr=this._getBoundsOffset(tr,Qt,Vt);return Math.abs(Lr.x)<=1&&Math.abs(Lr.y)<=1?It:this.unproject(fn.add(Lr),Vt)},_limitOffset:function(It,Vt){if(!Vt)return It;var Qt=this.getPixelBounds(),fn=new vr(Qt.min.add(It),Qt.max.add(It));return It.add(this._getBoundsOffset(fn,Vt))},_getBoundsOffset:function(It,Vt,Qt){var fn=cr(this.project(Vt.getNorthEast(),Qt),this.project(Vt.getSouthWest(),Qt)),Rn=fn.min.subtract(It.min),tr=fn.max.subtract(It.max),Lr=this._rebound(Rn.x,-tr.x),qr=this._rebound(Rn.y,-tr.y);return new Er(Lr,qr)},_rebound:function(It,Vt){return It+Vt>0?Math.round(It-Vt)/2:Math.max(0,Math.ceil(It))-Math.max(0,Math.floor(Vt))},_limitZoom:function(It){var Vt=this.getMinZoom(),Qt=this.getMaxZoom(),fn=Pi.any3d?this.options.zoomSnap:1;return fn&&(It=Math.round(It/fn)*fn),Math.max(Vt,Math.min(Qt,It))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yo(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(It,Vt){var Qt=this._getCenterOffset(It)._trunc();return(Vt&&Vt.animate)!==!0&&!this.getSize().contains(Qt)?!1:(this.panBy(Qt,Vt),!0)},_createAnimProxy:function(){var It=this._proxy=so("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(It),this.on("zoomanim",function(Vt){var Qt=Ea,fn=this._proxy.style[Qt];Rl(this._proxy,this.project(Vt.center,Vt.zoom),this.getZoomScale(Vt.zoom,1)),fn===this._proxy.style[Qt]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Sr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var It=this.getCenter(),Vt=this.getZoom();Rl(this._proxy,this.project(It,Vt),this.getZoomScale(Vt,1))},_catchTransitionEnd:function(It){this._animatingZoom&&It.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(It,Vt,Qt){if(this._animatingZoom)return!0;if(Qt=Qt||{},!this._zoomAnimated||Qt.animate===!1||this._nothingToAnimate()||Math.abs(Vt-this._zoom)>this.options.zoomAnimationThreshold)return!1;var fn=this.getZoomScale(Vt),Rn=this._getCenterOffset(It)._divideBy(1-1/fn);return Qt.animate!==!0&&!this.getSize().contains(Rn)?!1:(kn(function(){this._moveStart(!0,!1)._animateZoom(It,Vt,!0)},this),!0)},_animateZoom:function(It,Vt,Qt,fn){!this._mapPane||(Qt&&(this._animatingZoom=!0,this._animateToCenter=It,this._animateToZoom=Vt,Bo(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:It,zoom:Vt,noUpdate:fn}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Tt(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&yo(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Lc(It,Vt){return new zo(It,Vt)}var ma=pn.extend({options:{position:"topright"},initialize:function(It){tn(this,It)},getPosition:function(){return this.options.position},setPosition:function(It){var Vt=this._map;return Vt&&Vt.removeControl(this),this.options.position=It,Vt&&Vt.addControl(this),this},getContainer:function(){return this._container},addTo:function(It){this.remove(),this._map=It;var Vt=this._container=this.onAdd(It),Qt=this.getPosition(),fn=It._controlCorners[Qt];return Bo(Vt,"leaflet-control"),Qt.indexOf("bottom")!==-1?fn.insertBefore(Vt,fn.firstChild):fn.appendChild(Vt),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Sr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(It){this._map&&It&&It.screenX>0&&It.screenY>0&&this._map.getContainer().focus()}}),Qc=function(It){return new ma(It)};zo.include({addControl:function(It){return It.addTo(this),this},removeControl:function(It){return It.remove(),this},_initControlPos:function(){var It=this._controlCorners={},Vt="leaflet-",Qt=this._controlContainer=so("div",Vt+"control-container",this._container);function fn(Rn,tr){var Lr=Vt+Rn+" "+Vt+tr;It[Rn+tr]=so("div",Lr,Qt)}fn("top","left"),fn("top","right"),fn("bottom","left"),fn("bottom","right")},_clearControlPos:function(){for(var It in this._controlCorners)Sr(this._controlCorners[It]);Sr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eh=ma.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(It,Vt,Qt,fn){return Qt<fn?-1:fn<Qt?1:0}},initialize:function(It,Vt,Qt){tn(this,Qt),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var fn in It)this._addLayer(It[fn],fn);for(fn in Vt)this._addLayer(Vt[fn],fn,!0)},onAdd:function(It){this._initLayout(),this._update(),this._map=It,It.on("zoomend",this._checkDisabledLayers,this);for(var Vt=0;Vt<this._layers.length;Vt++)this._layers[Vt].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(It){return ma.prototype.addTo.call(this,It),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var It=0;It<this._layers.length;It++)this._layers[It].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(It,Vt){return this._addLayer(It,Vt),this._map?this._update():this},addOverlay:function(It,Vt){return this._addLayer(It,Vt,!0),this._map?this._update():this},removeLayer:function(It){It.off("add remove",this._onLayerChange,this);var Vt=this._getLayer(Lt(It));return Vt&&this._layers.splice(this._layers.indexOf(Vt),1),this._map?this._update():this},expand:function(){Bo(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var It=this._map.getSize().y-(this._container.offsetTop+50);return It<this._section.clientHeight?(Bo(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=It+"px"):yo(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yo(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var It="leaflet-control-layers",Vt=this._container=so("div",It),Qt=this.options.collapsed;Vt.setAttribute("aria-haspopup",!0),Dl(Vt),Jc(Vt);var fn=this._section=so("section",It+"-list");Qt&&(this._map.on("click",this.collapse,this),Fo(Vt,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Rn=this._layersLink=so("a",It+"-toggle",Vt);Rn.href="#",Rn.title="Layers",Rn.setAttribute("role","button"),Fo(Rn,{keydown:function(tr){tr.keyCode===13&&this._expandSafely()},click:function(tr){ua(tr),this._expandSafely()}},this),Qt||this.expand(),this._baseLayersList=so("div",It+"-base",fn),this._separator=so("div",It+"-separator",fn),this._overlaysList=so("div",It+"-overlays",fn),Vt.appendChild(fn)},_getLayer:function(It){for(var Vt=0;Vt<this._layers.length;Vt++)if(this._layers[Vt]&&Lt(this._layers[Vt].layer)===It)return this._layers[Vt]},_addLayer:function(It,Vt,Qt){this._map&&It.on("add remove",this._onLayerChange,this),this._layers.push({layer:It,name:Vt,overlay:Qt}),this.options.sortLayers&&this._layers.sort(Tt(function(fn,Rn){return this.options.sortFunction(fn.layer,Rn.layer,fn.name,Rn.name)},this)),this.options.autoZIndex&&It.setZIndex&&(this._lastZIndex++,It.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ml(this._baseLayersList),Ml(this._overlaysList),this._layerControlInputs=[];var It,Vt,Qt,fn,Rn=0;for(Qt=0;Qt<this._layers.length;Qt++)fn=this._layers[Qt],this._addItem(fn),Vt=Vt||fn.overlay,It=It||!fn.overlay,Rn+=fn.overlay?0:1;return this.options.hideSingleBase&&(It=It&&Rn>1,this._baseLayersList.style.display=It?"":"none"),this._separator.style.display=Vt&&It?"":"none",this},_onLayerChange:function(It){this._handlingClick||this._update();var Vt=this._getLayer(Lt(It.target)),Qt=Vt.overlay?It.type==="add"?"overlayadd":"overlayremove":It.type==="add"?"baselayerchange":null;Qt&&this._map.fire(Qt,Vt)},_createRadioElement:function(It,Vt){var Qt='<input type="radio" class="leaflet-control-layers-selector" name="'+It+'"'+(Vt?' checked="checked"':"")+"/>",fn=document.createElement("div");return fn.innerHTML=Qt,fn.firstChild},_addItem:function(It){var Vt=document.createElement("label"),Qt=this._map.hasLayer(It.layer),fn;It.overlay?(fn=document.createElement("input"),fn.type="checkbox",fn.className="leaflet-control-layers-selector",fn.defaultChecked=Qt):fn=this._createRadioElement("leaflet-base-layers_"+Lt(this),Qt),this._layerControlInputs.push(fn),fn.layerId=Lt(It.layer),Fo(fn,"click",this._onInputClick,this);var Rn=document.createElement("span");Rn.innerHTML=" "+It.name;var tr=document.createElement("span");Vt.appendChild(tr),tr.appendChild(fn),tr.appendChild(Rn);var Lr=It.overlay?this._overlaysList:this._baseLayersList;return Lr.appendChild(Vt),this._checkDisabledLayers(),Vt},_onInputClick:function(){var It=this._layerControlInputs,Vt,Qt,fn=[],Rn=[];this._handlingClick=!0;for(var tr=It.length-1;tr>=0;tr--)Vt=It[tr],Qt=this._getLayer(Vt.layerId).layer,Vt.checked?fn.push(Qt):Vt.checked||Rn.push(Qt);for(tr=0;tr<Rn.length;tr++)this._map.hasLayer(Rn[tr])&&this._map.removeLayer(Rn[tr]);for(tr=0;tr<fn.length;tr++)this._map.hasLayer(fn[tr])||this._map.addLayer(fn[tr]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var It=this._layerControlInputs,Vt,Qt,fn=this._map.getZoom(),Rn=It.length-1;Rn>=0;Rn--)Vt=It[Rn],Qt=this._getLayer(Vt.layerId).layer,Vt.disabled=Qt.options.minZoom!==void 0&&fn<Qt.options.minZoom||Qt.options.maxZoom!==void 0&&fn>Qt.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var It=this._section;Fo(It,"click",ua),this.expand(),setTimeout(function(){co(It,"click",ua)})}}),sc=function(It,Vt,Qt){return new eh(It,Vt,Qt)},th=ma.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(It){var Vt="leaflet-control-zoom",Qt=so("div",Vt+" leaflet-bar"),fn=this.options;return this._zoomInButton=this._createButton(fn.zoomInText,fn.zoomInTitle,Vt+"-in",Qt,this._zoomIn),this._zoomOutButton=this._createButton(fn.zoomOutText,fn.zoomOutTitle,Vt+"-out",Qt,this._zoomOut),this._updateDisabled(),It.on("zoomend zoomlevelschange",this._updateDisabled,this),Qt},onRemove:function(It){It.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(It){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(It.shiftKey?3:1))},_zoomOut:function(It){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(It.shiftKey?3:1))},_createButton:function(It,Vt,Qt,fn,Rn){var tr=so("a",Qt,fn);return tr.innerHTML=It,tr.href="#",tr.title=Vt,tr.setAttribute("role","button"),tr.setAttribute("aria-label",Vt),Dl(tr),Fo(tr,"click",Du),Fo(tr,"click",Rn,this),Fo(tr,"click",this._refocusOnMap,this),tr},_updateDisabled:function(){var It=this._map,Vt="leaflet-disabled";yo(this._zoomInButton,Vt),yo(this._zoomOutButton,Vt),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||It._zoom===It.getMinZoom())&&(Bo(this._zoomOutButton,Vt),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||It._zoom===It.getMaxZoom())&&(Bo(this._zoomInButton,Vt),this._zoomInButton.setAttribute("aria-disabled","true"))}});zo.mergeOptions({zoomControl:!0}),zo.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new th,this.addControl(this.zoomControl))});var Rd=function(It){return new th(It)},xu=ma.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(It){var Vt="leaflet-control-scale",Qt=so("div",Vt),fn=this.options;return this._addScales(fn,Vt+"-line",Qt),It.on(fn.updateWhenIdle?"moveend":"move",this._update,this),It.whenReady(this._update,this),Qt},onRemove:function(It){It.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(It,Vt,Qt){It.metric&&(this._mScale=so("div",Vt,Qt)),It.imperial&&(this._iScale=so("div",Vt,Qt))},_update:function(){var It=this._map,Vt=It.getSize().y/2,Qt=It.distance(It.containerPointToLatLng([0,Vt]),It.containerPointToLatLng([this.options.maxWidth,Vt]));this._updateScales(Qt)},_updateScales:function(It){this.options.metric&&It&&this._updateMetric(It),this.options.imperial&&It&&this._updateImperial(It)},_updateMetric:function(It){var Vt=this._getRoundNum(It),Qt=Vt<1e3?Vt+" m":Vt/1e3+" km";this._updateScale(this._mScale,Qt,Vt/It)},_updateImperial:function(It){var Vt=It*3.2808399,Qt,fn,Rn;Vt>5280?(Qt=Vt/5280,fn=this._getRoundNum(Qt),this._updateScale(this._iScale,fn+" mi",fn/Qt)):(Rn=this._getRoundNum(Vt),this._updateScale(this._iScale,Rn+" ft",Rn/Vt))},_updateScale:function(It,Vt,Qt){It.style.width=Math.round(this.options.maxWidth*Qt)+"px",It.innerHTML=Vt},_getRoundNum:function(It){var Vt=Math.pow(10,(Math.floor(It)+"").length-1),Qt=It/Vt;return Qt=Qt>=10?10:Qt>=5?5:Qt>=3?3:Qt>=2?2:1,Vt*Qt}}),Dd=function(It){return new xu(It)},ed='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Th=ma.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pi.inlineSvg?ed+" ":"")+"Leaflet</a>"},initialize:function(It){tn(this,It),this._attributions={}},onAdd:function(It){It.attributionControl=this,this._container=so("div","leaflet-control-attribution"),Dl(this._container);for(var Vt in It._layers)It._layers[Vt].getAttribution&&this.addAttribution(It._layers[Vt].getAttribution());return this._update(),It.on("layeradd",this._addAttribution,this),this._container},onRemove:function(It){It.off("layeradd",this._addAttribution,this)},_addAttribution:function(It){It.layer.getAttribution&&(this.addAttribution(It.layer.getAttribution()),It.layer.once("remove",function(){this.removeAttribution(It.layer.getAttribution())},this))},setPrefix:function(It){return this.options.prefix=It,this._update(),this},addAttribution:function(It){return It?(this._attributions[It]||(this._attributions[It]=0),this._attributions[It]++,this._update(),this):this},removeAttribution:function(It){return It?(this._attributions[It]&&(this._attributions[It]--,this._update()),this):this},_update:function(){if(!!this._map){var It=[];for(var Vt in this._attributions)this._attributions[Vt]&&It.push(Vt);var Qt=[];this.options.prefix&&Qt.push(this.options.prefix),It.length&&Qt.push(It.join(", ")),this._container.innerHTML=Qt.join(' <span aria-hidden="true">|</span> ')}}});zo.mergeOptions({attributionControl:!0}),zo.addInitHook(function(){this.options.attributionControl&&new Th().addTo(this)});var td=function(It){return new Th(It)};ma.Layers=eh,ma.Zoom=th,ma.Scale=xu,ma.Attribution=Th,Qc.layers=sc,Qc.zoom=Rd,Qc.scale=Dd,Qc.attribution=td;var Ys=pn.extend({initialize:function(It){this._map=It},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ys.addTo=function(It,Vt){return It.addHandler(Vt,this),this};var Nu={Events:yn},Za=Pi.touch?"touchstart mousedown":"mousedown",Ua=mr.extend({options:{clickTolerance:3},initialize:function(It,Vt,Qt,fn){tn(this,fn),this._element=It,this._dragStartTarget=Vt||It,this._preventOutline=Qt},enable:function(){this._enabled||(Fo(this._dragStartTarget,Za,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Ua._dragging===this&&this.finishDrag(!0),co(this._dragStartTarget,Za,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(It){if(!!this._enabled&&(this._moved=!1,!_u(this._element,"leaflet-zoom-anim"))){if(It.touches&&It.touches.length!==1){Ua._dragging===this&&this.finishDrag();return}if(!(Ua._dragging||It.shiftKey||It.which!==1&&It.button!==1&&!It.touches)&&(Ua._dragging=this,this._preventOutline&&bu(this._element),gl(),Wo(),!this._moving)){this.fire("down");var Vt=It.touches?It.touches[0]:It,Qt=Tc(this._element);this._startPoint=new Er(Vt.clientX,Vt.clientY),this._startPos=Vo(this._element),this._parentScale=kc(Qt);var fn=It.type==="mousedown";Fo(document,fn?"mousemove":"touchmove",this._onMove,this),Fo(document,fn?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(It){if(!!this._enabled){if(It.touches&&It.touches.length>1){this._moved=!0;return}var Vt=It.touches&&It.touches.length===1?It.touches[0]:It,Qt=new Er(Vt.clientX,Vt.clientY)._subtract(this._startPoint);!Qt.x&&!Qt.y||Math.abs(Qt.x)+Math.abs(Qt.y)<this.options.clickTolerance||(Qt.x/=this._parentScale.x,Qt.y/=this._parentScale.y,ua(It),this._moved||(this.fire("dragstart"),this._moved=!0,Bo(document.body,"leaflet-dragging"),this._lastTarget=It.target||It.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Bo(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(Qt),this._moving=!0,this._lastEvent=It,this._updatePosition())}},_updatePosition:function(){var It={originalEvent:this._lastEvent};this.fire("predrag",It),Js(this._element,this._newPos),this.fire("drag",It)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(It){yo(document.body,"leaflet-dragging"),this._lastTarget&&(yo(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),co(document,"mousemove touchmove",this._onMove,this),co(document,"mouseup touchend touchcancel",this._onUp,this),Ha(),oa(),this._moved&&this._moving&&this.fire("dragend",{noInertia:It,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ua._dragging=!1}});function kl(It,Vt){if(!Vt||!It.length)return It.slice();var Qt=Vt*Vt;return It=iu(It,Qt),It=wp(It,Qt),It}function Eo(It,Vt,Qt){return Math.sqrt(Jo(It,Vt,Qt,!0))}function Ef(It,Vt,Qt){return Jo(It,Vt,Qt)}function wp(It,Vt){var Qt=It.length,fn=typeof Uint8Array!=void 0+""?Uint8Array:Array,Rn=new fn(Qt);Rn[0]=Rn[Qt-1]=1,nh(It,Rn,Vt,0,Qt-1);var tr,Lr=[];for(tr=0;tr<Qt;tr++)Rn[tr]&&Lr.push(It[tr]);return Lr}function nh(It,Vt,Qt,fn,Rn){var tr=0,Lr,qr,ni;for(qr=fn+1;qr<=Rn-1;qr++)ni=Jo(It[qr],It[fn],It[Rn],!0),ni>tr&&(Lr=qr,tr=ni);tr>Qt&&(Vt[Lr]=1,nh(It,Vt,Qt,fn,Lr),nh(It,Vt,Qt,Lr,Rn))}function iu(It,Vt){for(var Qt=[It[0]],fn=1,Rn=0,tr=It.length;fn<tr;fn++)nd(It[fn],It[Rn])>Vt&&(Qt.push(It[fn]),Rn=fn);return Rn<tr-1&&Qt.push(It[tr-1]),Qt}var Gl;function ml(It,Vt,Qt,fn,Rn){var tr=fn?Gl:Ka(It,Qt),Lr=Ka(Vt,Qt),qr,ni,_i;for(Gl=Lr;;){if(!(tr|Lr))return[It,Vt];if(tr&Lr)return!1;qr=tr||Lr,ni=ja(It,Vt,qr,Qt,Rn),_i=Ka(ni,Qt),qr===tr?(It=ni,tr=_i):(Vt=ni,Lr=_i)}}function ja(It,Vt,Qt,fn,Rn){var tr=Vt.x-It.x,Lr=Vt.y-It.y,qr=fn.min,ni=fn.max,_i,Gi;return Qt&8?(_i=It.x+tr*(ni.y-It.y)/Lr,Gi=ni.y):Qt&4?(_i=It.x+tr*(qr.y-It.y)/Lr,Gi=qr.y):Qt&2?(_i=ni.x,Gi=It.y+Lr*(ni.x-It.x)/tr):Qt&1&&(_i=qr.x,Gi=It.y+Lr*(qr.x-It.x)/tr),new Er(_i,Gi,Rn)}function Ka(It,Vt){var Qt=0;return It.x<Vt.min.x?Qt|=1:It.x>Vt.max.x&&(Qt|=2),It.y<Vt.min.y?Qt|=4:It.y>Vt.max.y&&(Qt|=8),Qt}function nd(It,Vt){var Qt=Vt.x-It.x,fn=Vt.y-It.y;return Qt*Qt+fn*fn}function Jo(It,Vt,Qt,fn){var Rn=Vt.x,tr=Vt.y,Lr=Qt.x-Rn,qr=Qt.y-tr,ni=Lr*Lr+qr*qr,_i;return ni>0&&(_i=((It.x-Rn)*Lr+(It.y-tr)*qr)/ni,_i>1?(Rn=Qt.x,tr=Qt.y):_i>0&&(Rn+=Lr*_i,tr+=qr*_i)),Lr=It.x-Rn,qr=It.y-tr,fn?Lr*Lr+qr*qr:new Er(Rn,tr)}function Xt(It){return!ln(It[0])||typeof It[0][0]!="object"&&typeof It[0][0]<"u"}function hn(It){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xt(It)}function Mn(It,Vt){var Qt,fn,Rn,tr,Lr,qr,ni,_i;if(!It||It.length===0)throw new Error("latlngs not passed");Xt(It)||(console.warn("latlngs are not flat! Only the first ring will be used"),It=It[0]);var Gi=[];for(var Ro in It)Gi.push(Vt.project(sr(It[Ro])));var ys=Gi.length;for(Qt=0,fn=0;Qt<ys-1;Qt++)fn+=Gi[Qt].distanceTo(Gi[Qt+1])/2;if(fn===0)_i=Gi[0];else for(Qt=0,tr=0;Qt<ys-1;Qt++)if(Lr=Gi[Qt],qr=Gi[Qt+1],Rn=Lr.distanceTo(qr),tr+=Rn,tr>fn){ni=(tr-fn)/Rn,_i=[qr.x-ni*(qr.x-Lr.x),qr.y-ni*(qr.y-Lr.y)];break}return Vt.unproject(rr(_i))}var Kn={__proto__:null,simplify:kl,pointToSegmentDistance:Eo,closestPointOnSegment:Ef,clipSegment:ml,_getEdgeIntersection:ja,_getBitCode:Ka,_sqClosestPointOnSegment:Jo,isFlat:Xt,_flat:hn,polylineCenter:Mn};function hr(It,Vt,Qt){var fn,Rn=[1,4,2,8],tr,Lr,qr,ni,_i,Gi,Ro,ys;for(tr=0,Gi=It.length;tr<Gi;tr++)It[tr]._code=Ka(It[tr],Vt);for(qr=0;qr<4;qr++){for(Ro=Rn[qr],fn=[],tr=0,Gi=It.length,Lr=Gi-1;tr<Gi;Lr=tr++)ni=It[tr],_i=It[Lr],ni._code&Ro?_i._code&Ro||(ys=ja(_i,ni,Ro,Vt,Qt),ys._code=Ka(ys,Vt),fn.push(ys)):(_i._code&Ro&&(ys=ja(_i,ni,Ro,Vt,Qt),ys._code=Ka(ys,Vt),fn.push(ys)),fn.push(ni));It=fn}return It}function zr(It,Vt){var Qt,fn,Rn,tr,Lr,qr,ni,_i,Gi;if(!It||It.length===0)throw new Error("latlngs not passed");Xt(It)||(console.warn("latlngs are not flat! Only the first ring will be used"),It=It[0]);var Ro=[];for(var ys in It)Ro.push(Vt.project(sr(It[ys])));var ql=Ro.length;for(qr=ni=_i=0,Qt=0,fn=ql-1;Qt<ql;fn=Qt++)Rn=Ro[Qt],tr=Ro[fn],Lr=Rn.y*tr.x-tr.y*Rn.x,ni+=(Rn.x+tr.x)*Lr,_i+=(Rn.y+tr.y)*Lr,qr+=Lr*3;return qr===0?Gi=Ro[0]:Gi=[ni/qr,_i/qr],Vt.unproject(rr(Gi))}var ti={__proto__:null,clipPolygon:hr,polygonCenter:zr},ci={project:function(It){return new Er(It.lng,It.lat)},unproject:function(It){return new Ar(It.y,It.x)},bounds:new vr([-180,-90],[180,90])},Ni={R:6378137,R_MINOR:6356752314245179e-9,bounds:new vr([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(It){var Vt=Math.PI/180,Qt=this.R,fn=It.lat*Vt,Rn=this.R_MINOR/Qt,tr=Math.sqrt(1-Rn*Rn),Lr=tr*Math.sin(fn),qr=Math.tan(Math.PI/4-fn/2)/Math.pow((1-Lr)/(1+Lr),tr/2);return fn=-Qt*Math.log(Math.max(qr,1e-10)),new Er(It.lng*Vt*Qt,fn)},unproject:function(It){for(var Vt=180/Math.PI,Qt=this.R,fn=this.R_MINOR/Qt,Rn=Math.sqrt(1-fn*fn),tr=Math.exp(-It.y/Qt),Lr=Math.PI/2-2*Math.atan(tr),qr=0,ni=.1,_i;qr<15&&Math.abs(ni)>1e-7;qr++)_i=Rn*Math.sin(Lr),_i=Math.pow((1-_i)/(1+_i),Rn/2),ni=Math.PI/2-2*Math.atan(tr*_i)-Lr,Lr+=ni;return new Ar(Lr*Vt,It.x*Vt/Qt)}},Li={__proto__:null,LonLat:ci,Mercator:Ni,SphericalMercator:wr},_o=bt({},ar,{code:"EPSG:3395",projection:Ni,transformation:function(){var It=.5/(Math.PI*Ni.R);return Ln(It,.5,-It,.5)}()}),lo=bt({},ar,{code:"EPSG:4326",projection:ci,transformation:Ln(1/180,1,-1/180,.5)}),Ko=bt({},ii,{projection:ci,transformation:Ln(1,0,-1,0),scale:function(It){return Math.pow(2,It)},zoom:function(It){return Math.log(It)/Math.LN2},distance:function(It,Vt){var Qt=Vt.lng-It.lng,fn=Vt.lat-It.lat;return Math.sqrt(Qt*Qt+fn*fn)},infinite:!0});ii.Earth=ar,ii.EPSG3395=_o,ii.EPSG3857=en,ii.EPSG900913=dn,ii.EPSG4326=lo,ii.Simple=Ko;var Bs=mr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(It){return It.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(It){return It&&It.removeLayer(this),this},getPane:function(It){return this._map.getPane(It?this.options[It]||It:this.options.pane)},addInteractiveTarget:function(It){return this._map._targets[Lt(It)]=this,this},removeInteractiveTarget:function(It){return delete this._map._targets[Lt(It)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(It){var Vt=It.target;if(!!Vt.hasLayer(this)){if(this._map=Vt,this._zoomAnimated=Vt._zoomAnimated,this.getEvents){var Qt=this.getEvents();Vt.on(Qt,this),this.once("remove",function(){Vt.off(Qt,this)},this)}this.onAdd(Vt),this.fire("add"),Vt.fire("layeradd",{layer:this})}}});zo.include({addLayer:function(It){if(!It._layerAdd)throw new Error("The provided object is not a Layer.");var Vt=Lt(It);return this._layers[Vt]?this:(this._layers[Vt]=It,It._mapToAdd=this,It.beforeAdd&&It.beforeAdd(this),this.whenReady(It._layerAdd,It),this)},removeLayer:function(It){var Vt=Lt(It);return this._layers[Vt]?(this._loaded&&It.onRemove(this),delete this._layers[Vt],this._loaded&&(this.fire("layerremove",{layer:It}),It.fire("remove")),It._map=It._mapToAdd=null,this):this},hasLayer:function(It){return Lt(It)in this._layers},eachLayer:function(It,Vt){for(var Qt in this._layers)It.call(Vt,this._layers[Qt]);return this},_addLayers:function(It){It=It?ln(It)?It:[It]:[];for(var Vt=0,Qt=It.length;Vt<Qt;Vt++)this.addLayer(It[Vt])},_addZoomLimit:function(It){(!isNaN(It.options.maxZoom)||!isNaN(It.options.minZoom))&&(this._zoomBoundLayers[Lt(It)]=It,this._updateZoomLevels())},_removeZoomLimit:function(It){var Vt=Lt(It);this._zoomBoundLayers[Vt]&&(delete this._zoomBoundLayers[Vt],this._updateZoomLevels())},_updateZoomLevels:function(){var It=1/0,Vt=-1/0,Qt=this._getZoomSpan();for(var fn in this._zoomBoundLayers){var Rn=this._zoomBoundLayers[fn].options;It=Rn.minZoom===void 0?It:Math.min(It,Rn.minZoom),Vt=Rn.maxZoom===void 0?Vt:Math.max(Vt,Rn.maxZoom)}this._layersMaxZoom=Vt===-1/0?void 0:Vt,this._layersMinZoom=It===1/0?void 0:It,Qt!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ds=Bs.extend({initialize:function(It,Vt){tn(this,Vt),this._layers={};var Qt,fn;if(It)for(Qt=0,fn=It.length;Qt<fn;Qt++)this.addLayer(It[Qt])},addLayer:function(It){var Vt=this.getLayerId(It);return this._layers[Vt]=It,this._map&&this._map.addLayer(It),this},removeLayer:function(It){var Vt=It in this._layers?It:this.getLayerId(It);return this._map&&this._layers[Vt]&&this._map.removeLayer(this._layers[Vt]),delete this._layers[Vt],this},hasLayer:function(It){var Vt=typeof It=="number"?It:this.getLayerId(It);return Vt in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(It){var Vt=Array.prototype.slice.call(arguments,1),Qt,fn;for(Qt in this._layers)fn=this._layers[Qt],fn[It]&&fn[It].apply(fn,Vt);return this},onAdd:function(It){this.eachLayer(It.addLayer,It)},onRemove:function(It){this.eachLayer(It.removeLayer,It)},eachLayer:function(It,Vt){for(var Qt in this._layers)It.call(Vt,this._layers[Qt]);return this},getLayer:function(It){return this._layers[It]},getLayers:function(){var It=[];return this.eachLayer(It.push,It),It},setZIndex:function(It){return this.invoke("setZIndex",It)},getLayerId:function(It){return Lt(It)}}),wu=function(It,Vt){return new Ds(It,Vt)},Yl=Ds.extend({addLayer:function(It){return this.hasLayer(It)?this:(It.addEventParent(this),Ds.prototype.addLayer.call(this,It),this.fire("layeradd",{layer:It}))},removeLayer:function(It){return this.hasLayer(It)?(It in this._layers&&(It=this._layers[It]),It.removeEventParent(this),Ds.prototype.removeLayer.call(this,It),this.fire("layerremove",{layer:It})):this},setStyle:function(It){return this.invoke("setStyle",It)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var It=new gr;for(var Vt in this._layers){var Qt=this._layers[Vt];It.extend(Qt.getBounds?Qt.getBounds():Qt.getLatLng())}return It}}),$u=function(It,Vt){return new Yl(It,Vt)},sa=pn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(It){tn(this,It)},createIcon:function(It){return this._createIcon("icon",It)},createShadow:function(It){return this._createIcon("shadow",It)},_createIcon:function(It,Vt){var Qt=this._getIconUrl(It);if(!Qt){if(It==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var fn=this._createImg(Qt,Vt&&Vt.tagName==="IMG"?Vt:null);return this._setIconStyles(fn,It),(this.options.crossOrigin||this.options.crossOrigin==="")&&(fn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),fn},_setIconStyles:function(It,Vt){var Qt=this.options,fn=Qt[Vt+"Size"];typeof fn=="number"&&(fn=[fn,fn]);var Rn=rr(fn),tr=rr(Vt==="shadow"&&Qt.shadowAnchor||Qt.iconAnchor||Rn&&Rn.divideBy(2,!0));It.className="leaflet-marker-"+Vt+" "+(Qt.className||""),tr&&(It.style.marginLeft=-tr.x+"px",It.style.marginTop=-tr.y+"px"),Rn&&(It.style.width=Rn.x+"px",It.style.height=Rn.y+"px")},_createImg:function(It,Vt){return Vt=Vt||document.createElement("img"),Vt.src=It,Vt},_getIconUrl:function(It){return Pi.retina&&this.options[It+"RetinaUrl"]||this.options[It+"Url"]}});function rd(It){return new sa(It)}var od=sa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(It){return typeof od.imagePath!="string"&&(od.imagePath=this._detectIconPath()),(this.options.imagePath||od.imagePath)+sa.prototype._getIconUrl.call(this,It)},_stripUrl:function(It){var Vt=function(Qt,fn,Rn){var tr=fn.exec(Qt);return tr&&tr[Rn]};return It=Vt(It,/^url\((['"])?(.+)\1\)$/,2),It&&Vt(It,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var It=so("div","leaflet-default-icon-path",document.body),Vt=Oi(It,"background-image")||Oi(It,"backgroundImage");if(document.body.removeChild(It),Vt=this._stripUrl(Vt),Vt)return Vt;var Qt=document.querySelector('link[href$="leaflet.css"]');return Qt?Qt.href.substring(0,Qt.href.length-11-1):""}}),Ep=Ys.extend({initialize:function(It){this._marker=It},addHooks:function(){var It=this._marker._icon;this._draggable||(this._draggable=new Ua(It,It,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Bo(It,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yo(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(It){var Vt=this._marker,Qt=Vt._map,fn=this._marker.options.autoPanSpeed,Rn=this._marker.options.autoPanPadding,tr=Vo(Vt._icon),Lr=Qt.getPixelBounds(),qr=Qt.getPixelOrigin(),ni=cr(Lr.min._subtract(qr).add(Rn),Lr.max._subtract(qr).subtract(Rn));if(!ni.contains(tr)){var _i=rr((Math.max(ni.max.x,tr.x)-ni.max.x)/(Lr.max.x-ni.max.x)-(Math.min(ni.min.x,tr.x)-ni.min.x)/(Lr.min.x-ni.min.x),(Math.max(ni.max.y,tr.y)-ni.max.y)/(Lr.max.y-ni.max.y)-(Math.min(ni.min.y,tr.y)-ni.min.y)/(Lr.min.y-ni.min.y)).multiplyBy(fn);Qt.panBy(_i,{animate:!1}),this._draggable._newPos._add(_i),this._draggable._startPos._add(_i),Js(Vt._icon,this._draggable._newPos),this._onDrag(It),this._panRequest=kn(this._adjustPan.bind(this,It))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(It){this._marker.options.autoPan&&(gn(this._panRequest),this._panRequest=kn(this._adjustPan.bind(this,It)))},_onDrag:function(It){var Vt=this._marker,Qt=Vt._shadow,fn=Vo(Vt._icon),Rn=Vt._map.layerPointToLatLng(fn);Qt&&Js(Qt,fn),Vt._latlng=Rn,It.latlng=Rn,It.oldLatLng=this._oldLatLng,Vt.fire("move",It).fire("drag",It)},_onDragEnd:function(It){gn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",It)}}),sd=Bs.extend({options:{icon:new od,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(It,Vt){tn(this,Vt),this._latlng=sr(It)},onAdd:function(It){this._zoomAnimated=this._zoomAnimated&&It.options.markerZoomAnimation,this._zoomAnimated&&It.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(It){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&It.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(It){var Vt=this._latlng;return this._latlng=sr(It),this.update(),this.fire("move",{oldLatLng:Vt,latlng:this._latlng})},setZIndexOffset:function(It){return this.options.zIndexOffset=It,this.update()},getIcon:function(){return this.options.icon},setIcon:function(It){return this.options.icon=It,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var It=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(It)}return this},_initIcon:function(){var It=this.options,Vt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),Qt=It.icon.createIcon(this._icon),fn=!1;Qt!==this._icon&&(this._icon&&this._removeIcon(),fn=!0,It.title&&(Qt.title=It.title),Qt.tagName==="IMG"&&(Qt.alt=It.alt||"")),Bo(Qt,Vt),It.keyboard&&(Qt.tabIndex="0",Qt.setAttribute("role","button")),this._icon=Qt,It.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fo(Qt,"focus",this._panOnFocus,this);var Rn=It.icon.createShadow(this._shadow),tr=!1;Rn!==this._shadow&&(this._removeShadow(),tr=!0),Rn&&(Bo(Rn,Vt),Rn.alt=""),this._shadow=Rn,It.opacity<1&&this._updateOpacity(),fn&&this.getPane().appendChild(this._icon),this._initInteraction(),Rn&&tr&&this.getPane(It.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&co(this._icon,"focus",this._panOnFocus,this),Sr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Sr(this._shadow),this._shadow=null},_setPos:function(It){this._icon&&Js(this._icon,It),this._shadow&&Js(this._shadow,It),this._zIndex=It.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(It){this._icon&&(this._icon.style.zIndex=this._zIndex+It)},_animateZoom:function(It){var Vt=this._map._latLngToNewLayerPoint(this._latlng,It.zoom,It.center).round();this._setPos(Vt)},_initInteraction:function(){if(!!this.options.interactive&&(Bo(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ep)){var It=this.options.draggable;this.dragging&&(It=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ep(this),It&&this.dragging.enable()}},setOpacity:function(It){return this.options.opacity=It,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var It=this.options.opacity;this._icon&&vo(this._icon,It),this._shadow&&vo(this._shadow,It)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var It=this._map;if(!!It){var Vt=this.options.icon.options,Qt=Vt.iconSize?rr(Vt.iconSize):rr(0,0),fn=Vt.iconAnchor?rr(Vt.iconAnchor):rr(0,0);It.panInside(this._latlng,{paddingTopLeft:fn,paddingBottomRight:Qt.subtract(fn)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Sf(It,Vt){return new sd(It,Vt)}var ac=Bs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(It){this._renderer=It.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(It){return tn(this,It),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&It&&Object.prototype.hasOwnProperty.call(It,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nd=ac.extend({options:{fill:!0,radius:10},initialize:function(It,Vt){tn(this,Vt),this._latlng=sr(It),this._radius=this.options.radius},setLatLng:function(It){var Vt=this._latlng;return this._latlng=sr(It),this.redraw(),this.fire("move",{oldLatLng:Vt,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(It){return this.options.radius=this._radius=It,this.redraw()},getRadius:function(){return this._radius},setStyle:function(It){var Vt=It&&It.radius||this._radius;return ac.prototype.setStyle.call(this,It),this.setRadius(Vt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var It=this._radius,Vt=this._radiusY||It,Qt=this._clickTolerance(),fn=[It+Qt,Vt+Qt];this._pxBounds=new vr(this._point.subtract(fn),this._point.add(fn))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(It){return It.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bm(It,Vt){return new Nd(It,Vt)}var Sp=Nd.extend({initialize:function(It,Vt,Qt){if(typeof Vt=="number"&&(Vt=bt({},Qt,{radius:Vt})),tn(this,Vt),this._latlng=sr(It),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(It){return this._mRadius=It,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var It=[this._radius,this._radiusY||this._radius];return new gr(this._map.layerPointToLatLng(this._point.subtract(It)),this._map.layerPointToLatLng(this._point.add(It)))},setStyle:ac.prototype.setStyle,_project:function(){var It=this._latlng.lng,Vt=this._latlng.lat,Qt=this._map,fn=Qt.options.crs;if(fn.distance===ar.distance){var Rn=Math.PI/180,tr=this._mRadius/ar.R/Rn,Lr=Qt.project([Vt+tr,It]),qr=Qt.project([Vt-tr,It]),ni=Lr.add(qr).divideBy(2),_i=Qt.unproject(ni).lat,Gi=Math.acos((Math.cos(tr*Rn)-Math.sin(Vt*Rn)*Math.sin(_i*Rn))/(Math.cos(Vt*Rn)*Math.cos(_i*Rn)))/Rn;(isNaN(Gi)||Gi===0)&&(Gi=tr/Math.cos(Math.PI/180*Vt)),this._point=ni.subtract(Qt.getPixelOrigin()),this._radius=isNaN(Gi)?0:ni.x-Qt.project([_i,It-Gi]).x,this._radiusY=ni.y-Lr.y}else{var Ro=fn.unproject(fn.project(this._latlng).subtract([this._mRadius,0]));this._point=Qt.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Qt.latLngToLayerPoint(Ro).x}this._updateBounds()}});function Pg(It,Vt,Qt){return new Sp(It,Vt,Qt)}var Oc=ac.extend({options:{smoothFactor:1,noClip:!1},initialize:function(It,Vt){tn(this,Vt),this._setLatLngs(It)},getLatLngs:function(){return this._latlngs},setLatLngs:function(It){return this._setLatLngs(It),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(It){for(var Vt=1/0,Qt=null,fn=Jo,Rn,tr,Lr=0,qr=this._parts.length;Lr<qr;Lr++)for(var ni=this._parts[Lr],_i=1,Gi=ni.length;_i<Gi;_i++){Rn=ni[_i-1],tr=ni[_i];var Ro=fn(It,Rn,tr,!0);Ro<Vt&&(Vt=Ro,Qt=fn(It,Rn,tr))}return Qt&&(Qt.distance=Math.sqrt(Vt)),Qt},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(It,Vt){return Vt=Vt||this._defaultShape(),It=sr(It),Vt.push(It),this._bounds.extend(It),this.redraw()},_setLatLngs:function(It){this._bounds=new gr,this._latlngs=this._convertLatLngs(It)},_defaultShape:function(){return Xt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(It){for(var Vt=[],Qt=Xt(It),fn=0,Rn=It.length;fn<Rn;fn++)Qt?(Vt[fn]=sr(It[fn]),this._bounds.extend(Vt[fn])):Vt[fn]=this._convertLatLngs(It[fn]);return Vt},_project:function(){var It=new vr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,It),this._bounds.isValid()&&It.isValid()&&(this._rawPxBounds=It,this._updateBounds())},_updateBounds:function(){var It=this._clickTolerance(),Vt=new Er(It,It);!this._rawPxBounds||(this._pxBounds=new vr([this._rawPxBounds.min.subtract(Vt),this._rawPxBounds.max.add(Vt)]))},_projectLatlngs:function(It,Vt,Qt){var fn=It[0]instanceof Ar,Rn=It.length,tr,Lr;if(fn){for(Lr=[],tr=0;tr<Rn;tr++)Lr[tr]=this._map.latLngToLayerPoint(It[tr]),Qt.extend(Lr[tr]);Vt.push(Lr)}else for(tr=0;tr<Rn;tr++)this._projectLatlngs(It[tr],Vt,Qt)},_clipPoints:function(){var It=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(It))){if(this.options.noClip){this._parts=this._rings;return}var Vt=this._parts,Qt,fn,Rn,tr,Lr,qr,ni;for(Qt=0,Rn=0,tr=this._rings.length;Qt<tr;Qt++)for(ni=this._rings[Qt],fn=0,Lr=ni.length;fn<Lr-1;fn++)qr=ml(ni[fn],ni[fn+1],It,fn,!0),qr&&(Vt[Rn]=Vt[Rn]||[],Vt[Rn].push(qr[0]),(qr[1]!==ni[fn+1]||fn===Lr-2)&&(Vt[Rn].push(qr[1]),Rn++))}},_simplifyPoints:function(){for(var It=this._parts,Vt=this.options.smoothFactor,Qt=0,fn=It.length;Qt<fn;Qt++)It[Qt]=kl(It[Qt],Vt)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(It,Vt){var Qt,fn,Rn,tr,Lr,qr,ni=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(It))return!1;for(Qt=0,tr=this._parts.length;Qt<tr;Qt++)for(qr=this._parts[Qt],fn=0,Lr=qr.length,Rn=Lr-1;fn<Lr;Rn=fn++)if(!(!Vt&&fn===0)&&Eo(It,qr[Rn],qr[fn])<=ni)return!0;return!1}});function Fm(It,Vt){return new Oc(It,Vt)}Oc._flat=hn;var rh=Oc.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(It){var Vt=Oc.prototype._convertLatLngs.call(this,It),Qt=Vt.length;return Qt>=2&&Vt[0]instanceof Ar&&Vt[0].equals(Vt[Qt-1])&&Vt.pop(),Vt},_setLatLngs:function(It){Oc.prototype._setLatLngs.call(this,It),Xt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var It=this._renderer._bounds,Vt=this.options.weight,Qt=new Er(Vt,Vt);if(It=new vr(It.min.subtract(Qt),It.max.add(Qt)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(It))){if(this.options.noClip){this._parts=this._rings;return}for(var fn=0,Rn=this._rings.length,tr;fn<Rn;fn++)tr=hr(this._rings[fn],It,!0),tr.length&&this._parts.push(tr)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(It){var Vt=!1,Qt,fn,Rn,tr,Lr,qr,ni,_i;if(!this._pxBounds||!this._pxBounds.contains(It))return!1;for(tr=0,ni=this._parts.length;tr<ni;tr++)for(Qt=this._parts[tr],Lr=0,_i=Qt.length,qr=_i-1;Lr<_i;qr=Lr++)fn=Qt[Lr],Rn=Qt[qr],fn.y>It.y!=Rn.y>It.y&&It.x<(Rn.x-fn.x)*(It.y-fn.y)/(Rn.y-fn.y)+fn.x&&(Vt=!Vt);return Vt||Oc.prototype._containsPoint.call(this,It,!0)}});function zm(It,Vt){return new rh(It,Vt)}var Ic=Yl.extend({initialize:function(It,Vt){tn(this,Vt),this._layers={},It&&this.addData(It)},addData:function(It){var Vt=ln(It)?It:It.features,Qt,fn,Rn;if(Vt){for(Qt=0,fn=Vt.length;Qt<fn;Qt++)Rn=Vt[Qt],(Rn.geometries||Rn.geometry||Rn.features||Rn.coordinates)&&this.addData(Rn);return this}var tr=this.options;if(tr.filter&&!tr.filter(It))return this;var Lr=Ja(It,tr);return Lr?(Lr.feature=$d(It),Lr.defaultOptions=Lr.options,this.resetStyle(Lr),tr.onEachFeature&&tr.onEachFeature(It,Lr),this.addLayer(Lr)):this},resetStyle:function(It){return It===void 0?this.eachLayer(this.resetStyle,this):(It.options=bt({},It.defaultOptions),this._setLayerStyle(It,this.options.style),this)},setStyle:function(It){return this.eachLayer(function(Vt){this._setLayerStyle(Vt,It)},this)},_setLayerStyle:function(It,Vt){It.setStyle&&(typeof Vt=="function"&&(Vt=Vt(It.feature)),It.setStyle(Vt))}});function Ja(It,Vt){var Qt=It.type==="Feature"?It.geometry:It,fn=Qt?Qt.coordinates:null,Rn=[],tr=Vt&&Vt.pointToLayer,Lr=Vt&&Vt.coordsToLatLng||ad,qr,ni,_i,Gi;if(!fn&&!Qt)return null;switch(Qt.type){case"Point":return qr=Lr(fn),Lg(tr,It,qr,Vt);case"MultiPoint":for(_i=0,Gi=fn.length;_i<Gi;_i++)qr=Lr(fn[_i]),Rn.push(Lg(tr,It,qr,Vt));return new Yl(Rn);case"LineString":case"MultiLineString":return ni=Nl(fn,Qt.type==="LineString"?0:1,Lr),new Oc(ni,Vt);case"Polygon":case"MultiPolygon":return ni=Nl(fn,Qt.type==="Polygon"?1:2,Lr),new rh(ni,Vt);case"GeometryCollection":for(_i=0,Gi=Qt.geometries.length;_i<Gi;_i++){var Ro=Ja({geometry:Qt.geometries[_i],type:"Feature",properties:It.properties},Vt);Ro&&Rn.push(Ro)}return new Yl(Rn);case"FeatureCollection":for(_i=0,Gi=Qt.features.length;_i<Gi;_i++){var ys=Ja(Qt.features[_i],Vt);ys&&Rn.push(ys)}return new Yl(Rn);default:throw new Error("Invalid GeoJSON object.")}}function Lg(It,Vt,Qt,fn){return It?It(Vt,Qt):new sd(Qt,fn&&fn.markersInheritOptions&&fn)}function ad(It){return new Ar(It[1],It[0],It[2])}function Nl(It,Vt,Qt){for(var fn=[],Rn=0,tr=It.length,Lr;Rn<tr;Rn++)Lr=Vt?Nl(It[Rn],Vt-1,Qt):(Qt||ad)(It[Rn]),fn.push(Lr);return fn}function ou(It,Vt){return It=sr(It),It.alt!==void 0?[Ht(It.lng,Vt),Ht(It.lat,Vt),Ht(It.alt,Vt)]:[Ht(It.lng,Vt),Ht(It.lat,Vt)]}function Bu(It,Vt,Qt,fn){for(var Rn=[],tr=0,Lr=It.length;tr<Lr;tr++)Rn.push(Vt?Bu(It[tr],Xt(It[tr])?0:Vt-1,Qt,fn):ou(It[tr],fn));return!Vt&&Qt&&Rn.push(Rn[0].slice()),Rn}function Mc(It,Vt){return It.feature?bt({},It.feature,{geometry:Vt}):$d(Vt)}function $d(It){return It.type==="Feature"||It.type==="FeatureCollection"?It:{type:"Feature",properties:{},geometry:It}}var Cf={toGeoJSON:function(It){return Mc(this,{type:"Point",coordinates:ou(this.getLatLng(),It)})}};sd.include(Cf),Sp.include(Cf),Nd.include(Cf),Oc.include({toGeoJSON:function(It){var Vt=!Xt(this._latlngs),Qt=Bu(this._latlngs,Vt?1:0,!1,It);return Mc(this,{type:(Vt?"Multi":"")+"LineString",coordinates:Qt})}}),rh.include({toGeoJSON:function(It){var Vt=!Xt(this._latlngs),Qt=Vt&&!Xt(this._latlngs[0]),fn=Bu(this._latlngs,Qt?2:Vt?1:0,!0,It);return Vt||(fn=[fn]),Mc(this,{type:(Qt?"Multi":"")+"Polygon",coordinates:fn})}}),Ds.include({toMultiPoint:function(It){var Vt=[];return this.eachLayer(function(Qt){Vt.push(Qt.toGeoJSON(It).geometry.coordinates)}),Mc(this,{type:"MultiPoint",coordinates:Vt})},toGeoJSON:function(It){var Vt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(Vt==="MultiPoint")return this.toMultiPoint(It);var Qt=Vt==="GeometryCollection",fn=[];return this.eachLayer(function(Rn){if(Rn.toGeoJSON){var tr=Rn.toGeoJSON(It);if(Qt)fn.push(tr.geometry);else{var Lr=$d(tr);Lr.type==="FeatureCollection"?fn.push.apply(fn,Lr.features):fn.push(Lr)}}}),Qt?Mc(this,{geometries:fn,type:"GeometryCollection"}):{type:"FeatureCollection",features:fn}}});function Tf(It,Vt){return new Ic(It,Vt)}var Cp=Tf,kf=Bs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(It,Vt,Qt){this._url=It,this._bounds=Or(Vt),tn(this,Qt)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Bo(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Sr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(It){return this.options.opacity=It,this._image&&this._updateOpacity(),this},setStyle:function(It){return It.opacity&&this.setOpacity(It.opacity),this},bringToFront:function(){return this._map&&Nr(this._image),this},bringToBack:function(){return this._map&&na(this._image),this},setUrl:function(It){return this._url=It,this._image&&(this._image.src=It),this},setBounds:function(It){return this._bounds=Or(It),this._map&&this._reset(),this},getEvents:function(){var It={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(It.zoomanim=this._animateZoom),It},setZIndex:function(It){return this.options.zIndex=It,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var It=this._url.tagName==="IMG",Vt=this._image=It?this._url:so("img");if(Bo(Vt,"leaflet-image-layer"),this._zoomAnimated&&Bo(Vt,"leaflet-zoom-animated"),this.options.className&&Bo(Vt,this.options.className),Vt.onselectstart=zt,Vt.onmousemove=zt,Vt.onload=Tt(this.fire,this,"load"),Vt.onerror=Tt(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Vt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),It){this._url=Vt.src;return}Vt.src=this._url,Vt.alt=this.options.alt},_animateZoom:function(It){var Vt=this._map.getZoomScale(It.zoom),Qt=this._map._latLngBoundsToNewLayerBounds(this._bounds,It.zoom,It.center).min;Rl(this._image,Qt,Vt)},_reset:function(){var It=this._image,Vt=new vr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),Qt=Vt.getSize();Js(It,Vt.min),It.style.width=Qt.x+"px",It.style.height=Qt.y+"px"},_updateOpacity:function(){vo(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var It=this.options.errorOverlayUrl;It&&this._url!==It&&(this._url=It,this._image.src=It)},getCenter:function(){return this._bounds.getCenter()}}),ld=function(It,Vt,Qt){return new kf(It,Vt,Qt)},Og=kf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var It=this._url.tagName==="VIDEO",Vt=this._image=It?this._url:so("video");if(Bo(Vt,"leaflet-image-layer"),this._zoomAnimated&&Bo(Vt,"leaflet-zoom-animated"),this.options.className&&Bo(Vt,this.options.className),Vt.onselectstart=zt,Vt.onmousemove=zt,Vt.onloadeddata=Tt(this.fire,this,"load"),It){for(var Qt=Vt.getElementsByTagName("source"),fn=[],Rn=0;Rn<Qt.length;Rn++)fn.push(Qt[Rn].src);this._url=Qt.length>0?fn:[Vt.src];return}ln(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(Vt.style,"objectFit")&&(Vt.style.objectFit="fill"),Vt.autoplay=!!this.options.autoplay,Vt.loop=!!this.options.loop,Vt.muted=!!this.options.muted,Vt.playsInline=!!this.options.playsInline;for(var tr=0;tr<this._url.length;tr++){var Lr=so("source");Lr.src=this._url[tr],Vt.appendChild(Lr)}}});function Ig(It,Vt,Qt){return new Og(It,Vt,Qt)}var Bd=kf.extend({_initImage:function(){var It=this._image=this._url;Bo(It,"leaflet-image-layer"),this._zoomAnimated&&Bo(It,"leaflet-zoom-animated"),this.options.className&&Bo(It,this.options.className),It.onselectstart=zt,It.onmousemove=zt}});function Sa(It,Vt,Qt){return new Bd(It,Vt,Qt)}var Fu=Bs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(It,Vt){It&&(It instanceof Ar||ln(It))?(this._latlng=sr(It),tn(this,Vt)):(tn(this,It),this._source=Vt),this.options.content&&(this._content=this.options.content)},openOn:function(It){return It=arguments.length?It:this._source._map,It.hasLayer(this)||It.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(It){return this._map?this.close():(arguments.length?this._source=It:It=this._source,this._prepareOpen(),this.openOn(It._map)),this},onAdd:function(It){this._zoomAnimated=It._zoomAnimated,this._container||this._initLayout(),It._fadeAnimated&&vo(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),It._fadeAnimated&&vo(this._container,1),this.bringToFront(),this.options.interactive&&(Bo(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(It){It._fadeAnimated?(vo(this._container,0),this._removeTimeout=setTimeout(Tt(Sr,void 0,this._container),200)):Sr(this._container),this.options.interactive&&(yo(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(It){return this._latlng=sr(It),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(It){return this._content=It,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var It={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(It.zoomanim=this._animateZoom),It},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nr(this._container),this},bringToBack:function(){return this._map&&na(this._container),this},_prepareOpen:function(It){var Vt=this._source;if(!Vt._map)return!1;if(Vt instanceof Yl){Vt=null;var Qt=this._source._layers;for(var fn in Qt)if(Qt[fn]._map){Vt=Qt[fn];break}if(!Vt)return!1;this._source=Vt}if(!It)if(Vt.getCenter)It=Vt.getCenter();else if(Vt.getLatLng)It=Vt.getLatLng();else if(Vt.getBounds)It=Vt.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(It),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var It=this._contentNode,Vt=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof Vt=="string")It.innerHTML=Vt;else{for(;It.hasChildNodes();)It.removeChild(It.firstChild);It.appendChild(Vt)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var It=this._map.latLngToLayerPoint(this._latlng),Vt=rr(this.options.offset),Qt=this._getAnchor();this._zoomAnimated?Js(this._container,It.add(Qt)):Vt=Vt.add(It).add(Qt);var fn=this._containerBottom=-Vt.y,Rn=this._containerLeft=-Math.round(this._containerWidth/2)+Vt.x;this._container.style.bottom=fn+"px",this._container.style.left=Rn+"px"}},_getAnchor:function(){return[0,0]}});zo.include({_initOverlay:function(It,Vt,Qt,fn){var Rn=Vt;return Rn instanceof It||(Rn=new It(fn).setContent(Vt)),Qt&&Rn.setLatLng(Qt),Rn}}),Bs.include({_initOverlay:function(It,Vt,Qt,fn){var Rn=Qt;return Rn instanceof It?(tn(Rn,fn),Rn._source=this):(Rn=Vt&&!fn?Vt:new It(fn,this),Rn.setContent(Qt)),Rn}});var ll=Fu.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(It){return It=arguments.length?It:this._source._map,!It.hasLayer(this)&&It._popup&&It._popup.options.autoClose&&It.removeLayer(It._popup),It._popup=this,Fu.prototype.openOn.call(this,It)},onAdd:function(It){Fu.prototype.onAdd.call(this,It),It.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ac||this._source.on("preclick",Pc))},onRemove:function(It){Fu.prototype.onRemove.call(this,It),It.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ac||this._source.off("preclick",Pc))},getEvents:function(){var It=Fu.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(It.preclick=this.close),this.options.keepInView&&(It.moveend=this._adjustPan),It},_initLayout:function(){var It="leaflet-popup",Vt=this._container=so("div",It+" "+(this.options.className||"")+" leaflet-zoom-animated"),Qt=this._wrapper=so("div",It+"-content-wrapper",Vt);if(this._contentNode=so("div",It+"-content",Qt),Dl(Vt),Jc(this._contentNode),Fo(Vt,"contextmenu",Pc),this._tipContainer=so("div",It+"-tip-container",Vt),this._tip=so("div",It+"-tip",this._tipContainer),this.options.closeButton){var fn=this._closeButton=so("a",It+"-close-button",Vt);fn.setAttribute("role","button"),fn.setAttribute("aria-label","Close popup"),fn.href="#close",fn.innerHTML='<span aria-hidden="true">&#215;</span>',Fo(fn,"click",function(Rn){ua(Rn),this.close()},this)}},_updateLayout:function(){var It=this._contentNode,Vt=It.style;Vt.width="",Vt.whiteSpace="nowrap";var Qt=It.offsetWidth;Qt=Math.min(Qt,this.options.maxWidth),Qt=Math.max(Qt,this.options.minWidth),Vt.width=Qt+1+"px",Vt.whiteSpace="",Vt.height="";var fn=It.offsetHeight,Rn=this.options.maxHeight,tr="leaflet-popup-scrolled";Rn&&fn>Rn?(Vt.height=Rn+"px",Bo(It,tr)):yo(It,tr),this._containerWidth=this._container.offsetWidth},_animateZoom:function(It){var Vt=this._map._latLngToNewLayerPoint(this._latlng,It.zoom,It.center),Qt=this._getAnchor();Js(this._container,Vt.add(Qt))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var It=this._map,Vt=parseInt(Oi(this._container,"marginBottom"),10)||0,Qt=this._container.offsetHeight+Vt,fn=this._containerWidth,Rn=new Er(this._containerLeft,-Qt-this._containerBottom);Rn._add(Vo(this._container));var tr=It.layerPointToContainerPoint(Rn),Lr=rr(this.options.autoPanPadding),qr=rr(this.options.autoPanPaddingTopLeft||Lr),ni=rr(this.options.autoPanPaddingBottomRight||Lr),_i=It.getSize(),Gi=0,Ro=0;tr.x+fn+ni.x>_i.x&&(Gi=tr.x+fn-_i.x+ni.x),tr.x-Gi-qr.x<0&&(Gi=tr.x-qr.x),tr.y+Qt+ni.y>_i.y&&(Ro=tr.y+Qt-_i.y+ni.y),tr.y-Ro-qr.y<0&&(Ro=tr.y-qr.y),(Gi||Ro)&&(this.options.keepInView&&(this._autopanning=!0),It.fire("autopanstart").panBy([Gi,Ro]))}},_getAnchor:function(){return rr(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tp=function(It,Vt){return new ll(It,Vt)};zo.mergeOptions({closePopupOnClick:!0}),zo.include({openPopup:function(It,Vt,Qt){return this._initOverlay(ll,It,Vt,Qt).openOn(this),this},closePopup:function(It){return It=arguments.length?It:this._popup,It&&It.close(),this}}),Bs.include({bindPopup:function(It,Vt){return this._popup=this._initOverlay(ll,this._popup,It,Vt),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(It){return this._popup&&(this instanceof Yl||(this._popup._source=this),this._popup._prepareOpen(It||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(It){return this._popup&&this._popup.setContent(It),this},getPopup:function(){return this._popup},_openPopup:function(It){if(!(!this._popup||!this._map)){Du(It);var Vt=It.layer||It.target;if(this._popup._source===Vt&&!(Vt instanceof ac)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(It.latlng);return}this._popup._source=Vt,this.openPopup(It.latlng)}},_movePopup:function(It){this._popup.setLatLng(It.latlng)},_onKeyPress:function(It){It.originalEvent.keyCode===13&&this._openPopup(It)}});var su=Fu.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(It){Fu.prototype.onAdd.call(this,It),this.setOpacity(this.options.opacity),It.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(It){Fu.prototype.onRemove.call(this,It),It.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var It=Fu.prototype.getEvents.call(this);return this.options.permanent||(It.preclick=this.close),It},_initLayout:function(){var It="leaflet-tooltip",Vt=It+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=so("div",Vt),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Lt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(It){var Vt,Qt,fn=this._map,Rn=this._container,tr=fn.latLngToContainerPoint(fn.getCenter()),Lr=fn.layerPointToContainerPoint(It),qr=this.options.direction,ni=Rn.offsetWidth,_i=Rn.offsetHeight,Gi=rr(this.options.offset),Ro=this._getAnchor();qr==="top"?(Vt=ni/2,Qt=_i):qr==="bottom"?(Vt=ni/2,Qt=0):qr==="center"?(Vt=ni/2,Qt=_i/2):qr==="right"?(Vt=0,Qt=_i/2):qr==="left"?(Vt=ni,Qt=_i/2):Lr.x<tr.x?(qr="right",Vt=0,Qt=_i/2):(qr="left",Vt=ni+(Gi.x+Ro.x)*2,Qt=_i/2),It=It.subtract(rr(Vt,Qt,!0)).add(Gi).add(Ro),yo(Rn,"leaflet-tooltip-right"),yo(Rn,"leaflet-tooltip-left"),yo(Rn,"leaflet-tooltip-top"),yo(Rn,"leaflet-tooltip-bottom"),Bo(Rn,"leaflet-tooltip-"+qr),Js(Rn,It)},_updatePosition:function(){var It=this._map.latLngToLayerPoint(this._latlng);this._setPosition(It)},setOpacity:function(It){this.options.opacity=It,this._container&&vo(this._container,It)},_animateZoom:function(It){var Vt=this._map._latLngToNewLayerPoint(this._latlng,It.zoom,It.center);this._setPosition(Vt)},_getAnchor:function(){return rr(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fd=function(It,Vt){return new su(It,Vt)};zo.include({openTooltip:function(It,Vt,Qt){return this._initOverlay(su,It,Vt,Qt).openOn(this),this},closeTooltip:function(It){return It.close(),this}}),Bs.include({bindTooltip:function(It,Vt){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(su,this._tooltip,It,Vt),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(It){if(!(!It&&this._tooltipHandlersAdded)){var Vt=It?"off":"on",Qt={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?Qt.add=this._openTooltip:(Qt.mouseover=this._openTooltip,Qt.mouseout=this.closeTooltip,Qt.click=this._openTooltip,this._map?this._addFocusListeners():Qt.add=this._addFocusListeners),this._tooltip.options.sticky&&(Qt.mousemove=this._moveTooltip),this[Vt](Qt),this._tooltipHandlersAdded=!It}},openTooltip:function(It){return this._tooltip&&(this instanceof Yl||(this._tooltip._source=this),this._tooltip._prepareOpen(It)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(It){return this._tooltip&&this._tooltip.setContent(It),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(It){var Vt=It.getElement();Vt&&(Fo(Vt,"focus",function(){this._tooltip._source=It,this.openTooltip()},this),Fo(Vt,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(It){var Vt=It.getElement();Vt&&Vt.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(It){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=It.layer||It.target,this.openTooltip(this._tooltip.options.sticky?It.latlng:void 0))},_moveTooltip:function(It){var Vt=It.latlng,Qt,fn;this._tooltip.options.sticky&&It.originalEvent&&(Qt=this._map.mouseEventToContainerPoint(It.originalEvent),fn=this._map.containerPointToLayerPoint(Qt),Vt=this._map.layerPointToLatLng(fn)),this._tooltip.setLatLng(Vt)}});var kp=sa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(It){var Vt=It&&It.tagName==="DIV"?It:document.createElement("div"),Qt=this.options;if(Qt.html instanceof Element?(Ml(Vt),Vt.appendChild(Qt.html)):Vt.innerHTML=Qt.html!==!1?Qt.html:"",Qt.bgPos){var fn=rr(Qt.bgPos);Vt.style.backgroundPosition=-fn.x+"px "+-fn.y+"px"}return this._setIconStyles(Vt,"icon"),Vt},createShadow:function(){return null}});function Mg(It){return new kp(It)}sa.Default=od;var ih=Bs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pi.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(It){tn(this,It)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(It){It._addZoomLimit(this)},onRemove:function(It){this._removeAllTiles(),Sr(this._container),It._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(na(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(It){return this.options.opacity=It,this._updateOpacity(),this},setZIndex:function(It){return this.options.zIndex=It,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var It=this._clampZoom(this._map.getZoom());It!==this._tileZoom&&(this._tileZoom=It,this._updateLevels()),this._update()}return this},getEvents:function(){var It={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Mt(this._onMoveEnd,this.options.updateInterval,this)),It.move=this._onMove),this._zoomAnimated&&(It.zoomanim=this._animateZoom),It},createTile:function(){return document.createElement("div")},getTileSize:function(){var It=this.options.tileSize;return It instanceof Er?It:new Er(It,It)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(It){for(var Vt=this.getPane().children,Qt=-It(-1/0,1/0),fn=0,Rn=Vt.length,tr;fn<Rn;fn++)tr=Vt[fn].style.zIndex,Vt[fn]!==this._container&&tr&&(Qt=It(Qt,+tr));isFinite(Qt)&&(this.options.zIndex=Qt+It(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!Pi.ielt9){vo(this._container,this.options.opacity);var It=+new Date,Vt=!1,Qt=!1;for(var fn in this._tiles){var Rn=this._tiles[fn];if(!(!Rn.current||!Rn.loaded)){var tr=Math.min(1,(It-Rn.loaded)/200);vo(Rn.el,tr),tr<1?Vt=!0:(Rn.active?Qt=!0:this._onOpaqueTile(Rn),Rn.active=!0)}}Qt&&!this._noPrune&&this._pruneTiles(),Vt&&(gn(this._fadeFrame),this._fadeFrame=kn(this._updateOpacity,this))}},_onOpaqueTile:zt,_initContainer:function(){this._container||(this._container=so("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var It=this._tileZoom,Vt=this.options.maxZoom;if(It!==void 0){for(var Qt in this._levels)Qt=Number(Qt),this._levels[Qt].el.children.length||Qt===It?(this._levels[Qt].el.style.zIndex=Vt-Math.abs(It-Qt),this._onUpdateLevel(Qt)):(Sr(this._levels[Qt].el),this._removeTilesAtZoom(Qt),this._onRemoveLevel(Qt),delete this._levels[Qt]);var fn=this._levels[It],Rn=this._map;return fn||(fn=this._levels[It]={},fn.el=so("div","leaflet-tile-container leaflet-zoom-animated",this._container),fn.el.style.zIndex=Vt,fn.origin=Rn.project(Rn.unproject(Rn.getPixelOrigin()),It).round(),fn.zoom=It,this._setZoomTransform(fn,Rn.getCenter(),Rn.getZoom()),zt(fn.el.offsetWidth),this._onCreateLevel(fn)),this._level=fn,fn}},_onUpdateLevel:zt,_onRemoveLevel:zt,_onCreateLevel:zt,_pruneTiles:function(){if(!!this._map){var It,Vt,Qt=this._map.getZoom();if(Qt>this.options.maxZoom||Qt<this.options.minZoom){this._removeAllTiles();return}for(It in this._tiles)Vt=this._tiles[It],Vt.retain=Vt.current;for(It in this._tiles)if(Vt=this._tiles[It],Vt.current&&!Vt.active){var fn=Vt.coords;this._retainParent(fn.x,fn.y,fn.z,fn.z-5)||this._retainChildren(fn.x,fn.y,fn.z,fn.z+2)}for(It in this._tiles)this._tiles[It].retain||this._removeTile(It)}},_removeTilesAtZoom:function(It){for(var Vt in this._tiles)this._tiles[Vt].coords.z===It&&this._removeTile(Vt)},_removeAllTiles:function(){for(var It in this._tiles)this._removeTile(It)},_invalidateAll:function(){for(var It in this._levels)Sr(this._levels[It].el),this._onRemoveLevel(Number(It)),delete this._levels[It];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(It,Vt,Qt,fn){var Rn=Math.floor(It/2),tr=Math.floor(Vt/2),Lr=Qt-1,qr=new Er(+Rn,+tr);qr.z=+Lr;var ni=this._tileCoordsToKey(qr),_i=this._tiles[ni];return _i&&_i.active?(_i.retain=!0,!0):(_i&&_i.loaded&&(_i.retain=!0),Lr>fn?this._retainParent(Rn,tr,Lr,fn):!1)},_retainChildren:function(It,Vt,Qt,fn){for(var Rn=2*It;Rn<2*It+2;Rn++)for(var tr=2*Vt;tr<2*Vt+2;tr++){var Lr=new Er(Rn,tr);Lr.z=Qt+1;var qr=this._tileCoordsToKey(Lr),ni=this._tiles[qr];if(ni&&ni.active){ni.retain=!0;continue}else ni&&ni.loaded&&(ni.retain=!0);Qt+1<fn&&this._retainChildren(Rn,tr,Qt+1,fn)}},_resetView:function(It){var Vt=It&&(It.pinch||It.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),Vt,Vt)},_animateZoom:function(It){this._setView(It.center,It.zoom,!0,It.noUpdate)},_clampZoom:function(It){var Vt=this.options;return Vt.minNativeZoom!==void 0&&It<Vt.minNativeZoom?Vt.minNativeZoom:Vt.maxNativeZoom!==void 0&&Vt.maxNativeZoom<It?Vt.maxNativeZoom:It},_setView:function(It,Vt,Qt,fn){var Rn=Math.round(Vt);this.options.maxZoom!==void 0&&Rn>this.options.maxZoom||this.options.minZoom!==void 0&&Rn<this.options.minZoom?Rn=void 0:Rn=this._clampZoom(Rn);var tr=this.options.updateWhenZooming&&Rn!==this._tileZoom;(!fn||tr)&&(this._tileZoom=Rn,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Rn!==void 0&&this._update(It),Qt||this._pruneTiles(),this._noPrune=!!Qt),this._setZoomTransforms(It,Vt)},_setZoomTransforms:function(It,Vt){for(var Qt in this._levels)this._setZoomTransform(this._levels[Qt],It,Vt)},_setZoomTransform:function(It,Vt,Qt){var fn=this._map.getZoomScale(Qt,It.zoom),Rn=It.origin.multiplyBy(fn).subtract(this._map._getNewPixelOrigin(Vt,Qt)).round();Pi.any3d?Rl(It.el,Rn,fn):Js(It.el,Rn)},_resetGrid:function(){var It=this._map,Vt=It.options.crs,Qt=this._tileSize=this.getTileSize(),fn=this._tileZoom,Rn=this._map.getPixelWorldBounds(this._tileZoom);Rn&&(this._globalTileRange=this._pxBoundsToTileRange(Rn)),this._wrapX=Vt.wrapLng&&!this.options.noWrap&&[Math.floor(It.project([0,Vt.wrapLng[0]],fn).x/Qt.x),Math.ceil(It.project([0,Vt.wrapLng[1]],fn).x/Qt.y)],this._wrapY=Vt.wrapLat&&!this.options.noWrap&&[Math.floor(It.project([Vt.wrapLat[0],0],fn).y/Qt.x),Math.ceil(It.project([Vt.wrapLat[1],0],fn).y/Qt.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(It){var Vt=this._map,Qt=Vt._animatingZoom?Math.max(Vt._animateToZoom,Vt.getZoom()):Vt.getZoom(),fn=Vt.getZoomScale(Qt,this._tileZoom),Rn=Vt.project(It,this._tileZoom).floor(),tr=Vt.getSize().divideBy(fn*2);return new vr(Rn.subtract(tr),Rn.add(tr))},_update:function(It){var Vt=this._map;if(!!Vt){var Qt=this._clampZoom(Vt.getZoom());if(It===void 0&&(It=Vt.getCenter()),this._tileZoom!==void 0){var fn=this._getTiledPixelBounds(It),Rn=this._pxBoundsToTileRange(fn),tr=Rn.getCenter(),Lr=[],qr=this.options.keepBuffer,ni=new vr(Rn.getBottomLeft().subtract([qr,-qr]),Rn.getTopRight().add([qr,-qr]));if(!(isFinite(Rn.min.x)&&isFinite(Rn.min.y)&&isFinite(Rn.max.x)&&isFinite(Rn.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _i in this._tiles){var Gi=this._tiles[_i].coords;(Gi.z!==this._tileZoom||!ni.contains(new Er(Gi.x,Gi.y)))&&(this._tiles[_i].current=!1)}if(Math.abs(Qt-this._tileZoom)>1){this._setView(It,Qt);return}for(var Ro=Rn.min.y;Ro<=Rn.max.y;Ro++)for(var ys=Rn.min.x;ys<=Rn.max.x;ys++){var ql=new Er(ys,Ro);if(ql.z=this._tileZoom,!!this._isValidTile(ql)){var oh=this._tiles[this._tileCoordsToKey(ql)];oh?oh.current=!0:Lr.push(ql)}}if(Lr.sort(function(Eu,Mf){return Eu.distanceTo(tr)-Mf.distanceTo(tr)}),Lr.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ph=document.createDocumentFragment();for(ys=0;ys<Lr.length;ys++)this._addTile(Lr[ys],Ph);this._level.el.appendChild(Ph)}}}},_isValidTile:function(It){var Vt=this._map.options.crs;if(!Vt.infinite){var Qt=this._globalTileRange;if(!Vt.wrapLng&&(It.x<Qt.min.x||It.x>Qt.max.x)||!Vt.wrapLat&&(It.y<Qt.min.y||It.y>Qt.max.y))return!1}if(!this.options.bounds)return!0;var fn=this._tileCoordsToBounds(It);return Or(this.options.bounds).overlaps(fn)},_keyToBounds:function(It){return this._tileCoordsToBounds(this._keyToTileCoords(It))},_tileCoordsToNwSe:function(It){var Vt=this._map,Qt=this.getTileSize(),fn=It.scaleBy(Qt),Rn=fn.add(Qt),tr=Vt.unproject(fn,It.z),Lr=Vt.unproject(Rn,It.z);return[tr,Lr]},_tileCoordsToBounds:function(It){var Vt=this._tileCoordsToNwSe(It),Qt=new gr(Vt[0],Vt[1]);return this.options.noWrap||(Qt=this._map.wrapLatLngBounds(Qt)),Qt},_tileCoordsToKey:function(It){return It.x+":"+It.y+":"+It.z},_keyToTileCoords:function(It){var Vt=It.split(":"),Qt=new Er(+Vt[0],+Vt[1]);return Qt.z=+Vt[2],Qt},_removeTile:function(It){var Vt=this._tiles[It];!Vt||(Sr(Vt.el),delete this._tiles[It],this.fire("tileunload",{tile:Vt.el,coords:this._keyToTileCoords(It)}))},_initTile:function(It){Bo(It,"leaflet-tile");var Vt=this.getTileSize();It.style.width=Vt.x+"px",It.style.height=Vt.y+"px",It.onselectstart=zt,It.onmousemove=zt,Pi.ielt9&&this.options.opacity<1&&vo(It,this.options.opacity)},_addTile:function(It,Vt){var Qt=this._getTilePos(It),fn=this._tileCoordsToKey(It),Rn=this.createTile(this._wrapCoords(It),Tt(this._tileReady,this,It));this._initTile(Rn),this.createTile.length<2&&kn(Tt(this._tileReady,this,It,null,Rn)),Js(Rn,Qt),this._tiles[fn]={el:Rn,coords:It,current:!0},Vt.appendChild(Rn),this.fire("tileloadstart",{tile:Rn,coords:It})},_tileReady:function(It,Vt,Qt){Vt&&this.fire("tileerror",{error:Vt,tile:Qt,coords:It});var fn=this._tileCoordsToKey(It);Qt=this._tiles[fn],Qt&&(Qt.loaded=+new Date,this._map._fadeAnimated?(vo(Qt.el,0),gn(this._fadeFrame),this._fadeFrame=kn(this._updateOpacity,this)):(Qt.active=!0,this._pruneTiles()),Vt||(Bo(Qt.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:Qt.el,coords:It})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pi.ielt9||!this._map._fadeAnimated?kn(this._pruneTiles,this):setTimeout(Tt(this._pruneTiles,this),250)))},_getTilePos:function(It){return It.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(It){var Vt=new Er(this._wrapX?Nt(It.x,this._wrapX):It.x,this._wrapY?Nt(It.y,this._wrapY):It.y);return Vt.z=It.z,Vt},_pxBoundsToTileRange:function(It){var Vt=this.getTileSize();return new vr(It.min.unscaleBy(Vt).floor(),It.max.unscaleBy(Vt).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var It in this._tiles)if(!this._tiles[It].loaded)return!1;return!0}});function Hm(It){return new ih(It)}var kh=ih.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(It,Vt){this._url=It,Vt=tn(this,Vt),Vt.detectRetina&&Pi.retina&&Vt.maxZoom>0?(Vt.tileSize=Math.floor(Vt.tileSize/2),Vt.zoomReverse?(Vt.zoomOffset--,Vt.minZoom=Math.min(Vt.maxZoom,Vt.minZoom+1)):(Vt.zoomOffset++,Vt.maxZoom=Math.max(Vt.minZoom,Vt.maxZoom-1)),Vt.minZoom=Math.max(0,Vt.minZoom)):Vt.zoomReverse?Vt.minZoom=Math.min(Vt.maxZoom,Vt.minZoom):Vt.maxZoom=Math.max(Vt.minZoom,Vt.maxZoom),typeof Vt.subdomains=="string"&&(Vt.subdomains=Vt.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(It,Vt){return this._url===It&&Vt===void 0&&(Vt=!0),this._url=It,Vt||this.redraw(),this},createTile:function(It,Vt){var Qt=document.createElement("img");return Fo(Qt,"load",Tt(this._tileOnLoad,this,Vt,Qt)),Fo(Qt,"error",Tt(this._tileOnError,this,Vt,Qt)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Qt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(Qt.referrerPolicy=this.options.referrerPolicy),Qt.alt="",Qt.src=this.getTileUrl(It),Qt},getTileUrl:function(It){var Vt={r:Pi.retina?"@2x":"",s:this._getSubdomain(It),x:It.x,y:It.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var Qt=this._globalTileRange.max.y-It.y;this.options.tms&&(Vt.y=Qt),Vt["-y"]=Qt}return rn(this._url,bt(Vt,this.options))},_tileOnLoad:function(It,Vt){Pi.ielt9?setTimeout(Tt(It,this,null,Vt),0):It(null,Vt)},_tileOnError:function(It,Vt,Qt){var fn=this.options.errorTileUrl;fn&&Vt.getAttribute("src")!==fn&&(Vt.src=fn),It(Qt,Vt)},_onTileRemove:function(It){It.tile.onload=null},_getZoomForUrl:function(){var It=this._tileZoom,Vt=this.options.maxZoom,Qt=this.options.zoomReverse,fn=this.options.zoomOffset;return Qt&&(It=Vt-It),It+fn},_getSubdomain:function(It){var Vt=Math.abs(It.x+It.y)%this.options.subdomains.length;return this.options.subdomains[Vt]},_abortLoading:function(){var It,Vt;for(It in this._tiles)if(this._tiles[It].coords.z!==this._tileZoom&&(Vt=this._tiles[It].el,Vt.onload=zt,Vt.onerror=zt,!Vt.complete)){Vt.src=mn;var Qt=this._tiles[It].coords;Sr(Vt),delete this._tiles[It],this.fire("tileabort",{tile:Vt,coords:Qt})}},_removeTile:function(It){var Vt=this._tiles[It];if(!!Vt)return Vt.el.setAttribute("src",mn),ih.prototype._removeTile.call(this,It)},_tileReady:function(It,Vt,Qt){if(!(!this._map||Qt&&Qt.getAttribute("src")===mn))return ih.prototype._tileReady.call(this,It,Vt,Qt)}});function Af(It,Vt){return new kh(It,Vt)}var zd=kh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(It,Vt){this._url=It;var Qt=bt({},this.defaultWmsParams);for(var fn in Vt)fn in this.options||(Qt[fn]=Vt[fn]);Vt=tn(this,Vt);var Rn=Vt.detectRetina&&Pi.retina?2:1,tr=this.getTileSize();Qt.width=tr.x*Rn,Qt.height=tr.y*Rn,this.wmsParams=Qt},onAdd:function(It){this._crs=this.options.crs||It.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var Vt=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[Vt]=this._crs.code,kh.prototype.onAdd.call(this,It)},getTileUrl:function(It){var Vt=this._tileCoordsToNwSe(It),Qt=this._crs,fn=cr(Qt.project(Vt[0]),Qt.project(Vt[1])),Rn=fn.min,tr=fn.max,Lr=(this._wmsVersion>=1.3&&this._crs===lo?[Rn.y,Rn.x,tr.y,tr.x]:[Rn.x,Rn.y,tr.x,tr.y]).join(","),qr=kh.prototype.getTileUrl.call(this,It);return qr+Yt(this.wmsParams,qr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Lr},setParams:function(It,Vt){return bt(this.wmsParams,It),Vt||this.redraw(),this}});function Hd(It,Vt){return new zd(It,Vt)}kh.WMS=zd,Af.wms=Hd;var zu=Bs.extend({options:{padding:.1},initialize:function(It){tn(this,It),Lt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Bo(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var It={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(It.zoomanim=this._onAnimZoom),It},_onAnimZoom:function(It){this._updateTransform(It.center,It.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(It,Vt){var Qt=this._map.getZoomScale(Vt,this._zoom),fn=this._map.getSize().multiplyBy(.5+this.options.padding),Rn=this._map.project(this._center,Vt),tr=fn.multiplyBy(-Qt).add(Rn).subtract(this._map._getNewPixelOrigin(It,Vt));Pi.any3d?Rl(this._container,tr,Qt):Js(this._container,tr)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var It in this._layers)this._layers[It]._reset()},_onZoomEnd:function(){for(var It in this._layers)this._layers[It]._project()},_updatePaths:function(){for(var It in this._layers)this._layers[It]._update()},_update:function(){var It=this.options.padding,Vt=this._map.getSize(),Qt=this._map.containerPointToLayerPoint(Vt.multiplyBy(-It)).round();this._bounds=new vr(Qt,Qt.add(Vt.multiplyBy(1+It*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Pf=zu.extend({options:{tolerance:0},getEvents:function(){var It=zu.prototype.getEvents.call(this);return It.viewprereset=this._onViewPreReset,It},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zu.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var It=this._container=document.createElement("canvas");Fo(It,"mousemove",this._onMouseMove,this),Fo(It,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Fo(It,"mouseout",this._handleMouseOut,this),It._leaflet_disable_events=!0,this._ctx=It.getContext("2d")},_destroyContainer:function(){gn(this._redrawRequest),delete this._ctx,Sr(this._container),co(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var It;this._redrawBounds=null;for(var Vt in this._layers)It=this._layers[Vt],It._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zu.prototype._update.call(this);var It=this._bounds,Vt=this._container,Qt=It.getSize(),fn=Pi.retina?2:1;Js(Vt,It.min),Vt.width=fn*Qt.x,Vt.height=fn*Qt.y,Vt.style.width=Qt.x+"px",Vt.style.height=Qt.y+"px",Pi.retina&&this._ctx.scale(2,2),this._ctx.translate(-It.min.x,-It.min.y),this.fire("update")}},_reset:function(){zu.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(It){this._updateDashArray(It),this._layers[Lt(It)]=It;var Vt=It._order={layer:It,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=Vt),this._drawLast=Vt,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(It){this._requestRedraw(It)},_removePath:function(It){var Vt=It._order,Qt=Vt.next,fn=Vt.prev;Qt?Qt.prev=fn:this._drawLast=fn,fn?fn.next=Qt:this._drawFirst=Qt,delete It._order,delete this._layers[Lt(It)],this._requestRedraw(It)},_updatePath:function(It){this._extendRedrawBounds(It),It._project(),It._update(),this._requestRedraw(It)},_updateStyle:function(It){this._updateDashArray(It),this._requestRedraw(It)},_updateDashArray:function(It){if(typeof It.options.dashArray=="string"){var Vt=It.options.dashArray.split(/[, ]+/),Qt=[],fn,Rn;for(Rn=0;Rn<Vt.length;Rn++){if(fn=Number(Vt[Rn]),isNaN(fn))return;Qt.push(fn)}It.options._dashArray=Qt}else It.options._dashArray=It.options.dashArray},_requestRedraw:function(It){!this._map||(this._extendRedrawBounds(It),this._redrawRequest=this._redrawRequest||kn(this._redraw,this))},_extendRedrawBounds:function(It){if(It._pxBounds){var Vt=(It.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new vr,this._redrawBounds.extend(It._pxBounds.min.subtract([Vt,Vt])),this._redrawBounds.extend(It._pxBounds.max.add([Vt,Vt]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var It=this._redrawBounds;if(It){var Vt=It.getSize();this._ctx.clearRect(It.min.x,It.min.y,Vt.x,Vt.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var It,Vt=this._redrawBounds;if(this._ctx.save(),Vt){var Qt=Vt.getSize();this._ctx.beginPath(),this._ctx.rect(Vt.min.x,Vt.min.y,Qt.x,Qt.y),this._ctx.clip()}this._drawing=!0;for(var fn=this._drawFirst;fn;fn=fn.next)It=fn.layer,(!Vt||It._pxBounds&&It._pxBounds.intersects(Vt))&&It._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(It,Vt){if(!!this._drawing){var Qt,fn,Rn,tr,Lr=It._parts,qr=Lr.length,ni=this._ctx;if(!!qr){for(ni.beginPath(),Qt=0;Qt<qr;Qt++){for(fn=0,Rn=Lr[Qt].length;fn<Rn;fn++)tr=Lr[Qt][fn],ni[fn?"lineTo":"moveTo"](tr.x,tr.y);Vt&&ni.closePath()}this._fillStroke(ni,It)}}},_updateCircle:function(It){if(!(!this._drawing||It._empty())){var Vt=It._point,Qt=this._ctx,fn=Math.max(Math.round(It._radius),1),Rn=(Math.max(Math.round(It._radiusY),1)||fn)/fn;Rn!==1&&(Qt.save(),Qt.scale(1,Rn)),Qt.beginPath(),Qt.arc(Vt.x,Vt.y/Rn,fn,0,Math.PI*2,!1),Rn!==1&&Qt.restore(),this._fillStroke(Qt,It)}},_fillStroke:function(It,Vt){var Qt=Vt.options;Qt.fill&&(It.globalAlpha=Qt.fillOpacity,It.fillStyle=Qt.fillColor||Qt.color,It.fill(Qt.fillRule||"evenodd")),Qt.stroke&&Qt.weight!==0&&(It.setLineDash&&It.setLineDash(Vt.options&&Vt.options._dashArray||[]),It.globalAlpha=Qt.opacity,It.lineWidth=Qt.weight,It.strokeStyle=Qt.color,It.lineCap=Qt.lineCap,It.lineJoin=Qt.lineJoin,It.stroke())},_onClick:function(It){for(var Vt=this._map.mouseEventToLayerPoint(It),Qt,fn,Rn=this._drawFirst;Rn;Rn=Rn.next)Qt=Rn.layer,Qt.options.interactive&&Qt._containsPoint(Vt)&&(!(It.type==="click"||It.type==="preclick")||!this._map._draggableMoved(Qt))&&(fn=Qt);this._fireEvent(fn?[fn]:!1,It)},_onMouseMove:function(It){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var Vt=this._map.mouseEventToLayerPoint(It);this._handleMouseHover(It,Vt)}},_handleMouseOut:function(It){var Vt=this._hoveredLayer;Vt&&(yo(this._container,"leaflet-interactive"),this._fireEvent([Vt],It,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(It,Vt){if(!this._mouseHoverThrottled){for(var Qt,fn,Rn=this._drawFirst;Rn;Rn=Rn.next)Qt=Rn.layer,Qt.options.interactive&&Qt._containsPoint(Vt)&&(fn=Qt);fn!==this._hoveredLayer&&(this._handleMouseOut(It),fn&&(Bo(this._container,"leaflet-interactive"),this._fireEvent([fn],It,"mouseover"),this._hoveredLayer=fn)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,It),this._mouseHoverThrottled=!0,setTimeout(Tt(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(It,Vt,Qt){this._map._fireDOMEvent(Vt,Qt||Vt.type,It)},_bringToFront:function(It){var Vt=It._order;if(!!Vt){var Qt=Vt.next,fn=Vt.prev;if(Qt)Qt.prev=fn;else return;fn?fn.next=Qt:Qt&&(this._drawFirst=Qt),Vt.prev=this._drawLast,this._drawLast.next=Vt,Vt.next=null,this._drawLast=Vt,this._requestRedraw(It)}},_bringToBack:function(It){var Vt=It._order;if(!!Vt){var Qt=Vt.next,fn=Vt.prev;if(fn)fn.next=Qt;else return;Qt?Qt.prev=fn:fn&&(this._drawLast=fn),Vt.prev=null,Vt.next=this._drawFirst,this._drawFirst.prev=Vt,this._drawFirst=Vt,this._requestRedraw(It)}}});function Lf(It){return Pi.canvas?new Pf(It):null}var Ah=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(It){return document.createElement("<lvml:"+It+' class="lvml">')}}catch{}return function(It){return document.createElement("<"+It+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Of={_initContainer:function(){this._container=so("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zu.prototype._update.call(this),this.fire("update"))},_initPath:function(It){var Vt=It._container=Ah("shape");Bo(Vt,"leaflet-vml-shape "+(this.options.className||"")),Vt.coordsize="1 1",It._path=Ah("path"),Vt.appendChild(It._path),this._updateStyle(It),this._layers[Lt(It)]=It},_addPath:function(It){var Vt=It._container;this._container.appendChild(Vt),It.options.interactive&&It.addInteractiveTarget(Vt)},_removePath:function(It){var Vt=It._container;Sr(Vt),It.removeInteractiveTarget(Vt),delete this._layers[Lt(It)]},_updateStyle:function(It){var Vt=It._stroke,Qt=It._fill,fn=It.options,Rn=It._container;Rn.stroked=!!fn.stroke,Rn.filled=!!fn.fill,fn.stroke?(Vt||(Vt=It._stroke=Ah("stroke")),Rn.appendChild(Vt),Vt.weight=fn.weight+"px",Vt.color=fn.color,Vt.opacity=fn.opacity,fn.dashArray?Vt.dashStyle=ln(fn.dashArray)?fn.dashArray.join(" "):fn.dashArray.replace(/( *, *)/g," "):Vt.dashStyle="",Vt.endcap=fn.lineCap.replace("butt","flat"),Vt.joinstyle=fn.lineJoin):Vt&&(Rn.removeChild(Vt),It._stroke=null),fn.fill?(Qt||(Qt=It._fill=Ah("fill")),Rn.appendChild(Qt),Qt.color=fn.fillColor||fn.color,Qt.opacity=fn.fillOpacity):Qt&&(Rn.removeChild(Qt),It._fill=null)},_updateCircle:function(It){var Vt=It._point.round(),Qt=Math.round(It._radius),fn=Math.round(It._radiusY||Qt);this._setPath(It,It._empty()?"M0 0":"AL "+Vt.x+","+Vt.y+" "+Qt+","+fn+" 0,"+65535*360)},_setPath:function(It,Vt){It._path.v=Vt},_bringToFront:function(It){Nr(It._container)},_bringToBack:function(It){na(It._container)}},yl=Pi.vml?Ah:un,Vd=zu.extend({_initContainer:function(){this._container=yl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Sr(this._container),co(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zu.prototype._update.call(this);var It=this._bounds,Vt=It.getSize(),Qt=this._container;(!this._svgSize||!this._svgSize.equals(Vt))&&(this._svgSize=Vt,Qt.setAttribute("width",Vt.x),Qt.setAttribute("height",Vt.y)),Js(Qt,It.min),Qt.setAttribute("viewBox",[It.min.x,It.min.y,Vt.x,Vt.y].join(" ")),this.fire("update")}},_initPath:function(It){var Vt=It._path=yl("path");It.options.className&&Bo(Vt,It.options.className),It.options.interactive&&Bo(Vt,"leaflet-interactive"),this._updateStyle(It),this._layers[Lt(It)]=It},_addPath:function(It){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(It._path),It.addInteractiveTarget(It._path)},_removePath:function(It){Sr(It._path),It.removeInteractiveTarget(It._path),delete this._layers[Lt(It)]},_updatePath:function(It){It._project(),It._update()},_updateStyle:function(It){var Vt=It._path,Qt=It.options;!Vt||(Qt.stroke?(Vt.setAttribute("stroke",Qt.color),Vt.setAttribute("stroke-opacity",Qt.opacity),Vt.setAttribute("stroke-width",Qt.weight),Vt.setAttribute("stroke-linecap",Qt.lineCap),Vt.setAttribute("stroke-linejoin",Qt.lineJoin),Qt.dashArray?Vt.setAttribute("stroke-dasharray",Qt.dashArray):Vt.removeAttribute("stroke-dasharray"),Qt.dashOffset?Vt.setAttribute("stroke-dashoffset",Qt.dashOffset):Vt.removeAttribute("stroke-dashoffset")):Vt.setAttribute("stroke","none"),Qt.fill?(Vt.setAttribute("fill",Qt.fillColor||Qt.color),Vt.setAttribute("fill-opacity",Qt.fillOpacity),Vt.setAttribute("fill-rule",Qt.fillRule||"evenodd")):Vt.setAttribute("fill","none"))},_updatePoly:function(It,Vt){this._setPath(It,Nn(It._parts,Vt))},_updateCircle:function(It){var Vt=It._point,Qt=Math.max(Math.round(It._radius),1),fn=Math.max(Math.round(It._radiusY),1)||Qt,Rn="a"+Qt+","+fn+" 0 1,0 ",tr=It._empty()?"M0 0":"M"+(Vt.x-Qt)+","+Vt.y+Rn+Qt*2+",0 "+Rn+-Qt*2+",0 ";this._setPath(It,tr)},_setPath:function(It,Vt){It._path.setAttribute("d",Vt)},_bringToFront:function(It){Nr(It._path)},_bringToBack:function(It){na(It._path)}});Pi.vml&&Vd.include(Of);function Ap(It){return Pi.svg||Pi.vml?new Vd(It):null}zo.include({getRenderer:function(It){var Vt=It.options.renderer||this._getPaneRenderer(It.options.pane)||this.options.renderer||this._renderer;return Vt||(Vt=this._renderer=this._createRenderer()),this.hasLayer(Vt)||this.addLayer(Vt),Vt},_getPaneRenderer:function(It){if(It==="overlayPane"||It===void 0)return!1;var Vt=this._paneRenderers[It];return Vt===void 0&&(Vt=this._createRenderer({pane:It}),this._paneRenderers[It]=Vt),Vt},_createRenderer:function(It){return this.options.preferCanvas&&Lf(It)||Ap(It)}});var Pp=rh.extend({initialize:function(It,Vt){rh.prototype.initialize.call(this,this._boundsToLatLngs(It),Vt)},setBounds:function(It){return this.setLatLngs(this._boundsToLatLngs(It))},_boundsToLatLngs:function(It){return It=Or(It),[It.getSouthWest(),It.getNorthWest(),It.getNorthEast(),It.getSouthEast()]}});function Lp(It,Vt){return new Pp(It,Vt)}Vd.create=yl,Vd.pointsToPath=Nn,Ic.geometryToLayer=Ja,Ic.coordsToLatLng=ad,Ic.coordsToLatLngs=Nl,Ic.latLngToCoords=ou,Ic.latLngsToCoords=Bu,Ic.getFeature=Mc,Ic.asFeature=$d,zo.mergeOptions({boxZoom:!0});var Op=Ys.extend({initialize:function(It){this._map=It,this._container=It._container,this._pane=It._panes.overlayPane,this._resetStateTimeout=0,It.on("unload",this._destroy,this)},addHooks:function(){Fo(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){co(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Sr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(It){if(!It.shiftKey||It.which!==1&&It.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wo(),gl(),this._startPoint=this._map.mouseEventToContainerPoint(It),Fo(document,{contextmenu:Du,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(It){this._moved||(this._moved=!0,this._box=so("div","leaflet-zoom-box",this._container),Bo(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(It);var Vt=new vr(this._point,this._startPoint),Qt=Vt.getSize();Js(this._box,Vt.min),this._box.style.width=Qt.x+"px",this._box.style.height=Qt.y+"px"},_finish:function(){this._moved&&(Sr(this._box),yo(this._container,"leaflet-crosshair")),oa(),Ha(),co(document,{contextmenu:Du,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(It){if(!(It.which!==1&&It.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Tt(this._resetState,this),0);var Vt=new gr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(Vt).fire("boxzoomend",{boxZoomBounds:Vt})}},_onKeyDown:function(It){It.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});zo.addInitHook("addHandler","boxZoom",Op),zo.mergeOptions({doubleClickZoom:!0});var If=Ys.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(It){var Vt=this._map,Qt=Vt.getZoom(),fn=Vt.options.zoomDelta,Rn=It.originalEvent.shiftKey?Qt-fn:Qt+fn;Vt.options.doubleClickZoom==="center"?Vt.setZoom(Rn):Vt.setZoomAround(It.containerPoint,Rn)}});zo.addInitHook("addHandler","doubleClickZoom",If),zo.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ud=Ys.extend({addHooks:function(){if(!this._draggable){var It=this._map;this._draggable=new Ua(It._mapPane,It._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),It.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),It.on("zoomend",this._onZoomEnd,this),It.whenReady(this._onZoomEnd,this))}Bo(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yo(this._map._container,"leaflet-grab"),yo(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var It=this._map;if(It._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var Vt=Or(this._map.options.maxBounds);this._offsetLimit=cr(this._map.latLngToContainerPoint(Vt.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(Vt.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;It.fire("movestart").fire("dragstart"),It.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(It){if(this._map.options.inertia){var Vt=this._lastTime=+new Date,Qt=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(Qt),this._times.push(Vt),this._prunePositions(Vt)}this._map.fire("move",It).fire("drag",It)},_prunePositions:function(It){for(;this._positions.length>1&&It-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var It=this._map.getSize().divideBy(2),Vt=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=Vt.subtract(It).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(It,Vt){return It-(It-Vt)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var It=this._draggable._newPos.subtract(this._draggable._startPos),Vt=this._offsetLimit;It.x<Vt.min.x&&(It.x=this._viscousLimit(It.x,Vt.min.x)),It.y<Vt.min.y&&(It.y=this._viscousLimit(It.y,Vt.min.y)),It.x>Vt.max.x&&(It.x=this._viscousLimit(It.x,Vt.max.x)),It.y>Vt.max.y&&(It.y=this._viscousLimit(It.y,Vt.max.y)),this._draggable._newPos=this._draggable._startPos.add(It)}},_onPreDragWrap:function(){var It=this._worldWidth,Vt=Math.round(It/2),Qt=this._initialWorldOffset,fn=this._draggable._newPos.x,Rn=(fn-Vt+Qt)%It+Vt-Qt,tr=(fn+Vt+Qt)%It-Vt-Qt,Lr=Math.abs(Rn+Qt)<Math.abs(tr+Qt)?Rn:tr;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Lr},_onDragEnd:function(It){var Vt=this._map,Qt=Vt.options,fn=!Qt.inertia||It.noInertia||this._times.length<2;if(Vt.fire("dragend",It),fn)Vt.fire("moveend");else{this._prunePositions(+new Date);var Rn=this._lastPos.subtract(this._positions[0]),tr=(this._lastTime-this._times[0])/1e3,Lr=Qt.easeLinearity,qr=Rn.multiplyBy(Lr/tr),ni=qr.distanceTo([0,0]),_i=Math.min(Qt.inertiaMaxSpeed,ni),Gi=qr.multiplyBy(_i/ni),Ro=_i/(Qt.inertiaDeceleration*Lr),ys=Gi.multiplyBy(-Ro/2).round();!ys.x&&!ys.y?Vt.fire("moveend"):(ys=Vt._limitOffset(ys,Vt.options.maxBounds),kn(function(){Vt.panBy(ys,{duration:Ro,easeLinearity:Lr,noMoveStart:!0,animate:!0})}))}}});zo.addInitHook("addHandler","dragging",ud),zo.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ud=Ys.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(It){this._map=It,this._setPanDelta(It.options.keyboardPanDelta),this._setZoomDelta(It.options.zoomDelta)},addHooks:function(){var It=this._map._container;It.tabIndex<=0&&(It.tabIndex="0"),Fo(It,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),co(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var It=document.body,Vt=document.documentElement,Qt=It.scrollTop||Vt.scrollTop,fn=It.scrollLeft||Vt.scrollLeft;this._map._container.focus(),window.scrollTo(fn,Qt)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(It){var Vt=this._panKeys={},Qt=this.keyCodes,fn,Rn;for(fn=0,Rn=Qt.left.length;fn<Rn;fn++)Vt[Qt.left[fn]]=[-1*It,0];for(fn=0,Rn=Qt.right.length;fn<Rn;fn++)Vt[Qt.right[fn]]=[It,0];for(fn=0,Rn=Qt.down.length;fn<Rn;fn++)Vt[Qt.down[fn]]=[0,It];for(fn=0,Rn=Qt.up.length;fn<Rn;fn++)Vt[Qt.up[fn]]=[0,-1*It]},_setZoomDelta:function(It){var Vt=this._zoomKeys={},Qt=this.keyCodes,fn,Rn;for(fn=0,Rn=Qt.zoomIn.length;fn<Rn;fn++)Vt[Qt.zoomIn[fn]]=It;for(fn=0,Rn=Qt.zoomOut.length;fn<Rn;fn++)Vt[Qt.zoomOut[fn]]=-It},_addHooks:function(){Fo(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){co(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(It){if(!(It.altKey||It.ctrlKey||It.metaKey)){var Vt=It.keyCode,Qt=this._map,fn;if(Vt in this._panKeys){if(!Qt._panAnim||!Qt._panAnim._inProgress)if(fn=this._panKeys[Vt],It.shiftKey&&(fn=rr(fn).multiplyBy(3)),Qt.options.maxBounds&&(fn=Qt._limitOffset(rr(fn),Qt.options.maxBounds)),Qt.options.worldCopyJump){var Rn=Qt.wrapLatLng(Qt.unproject(Qt.project(Qt.getCenter()).add(fn)));Qt.panTo(Rn)}else Qt.panBy(fn)}else if(Vt in this._zoomKeys)Qt.setZoom(Qt.getZoom()+(It.shiftKey?3:1)*this._zoomKeys[Vt]);else if(Vt===27&&Qt._popup&&Qt._popup.options.closeOnEscapeKey)Qt.closePopup();else return;Du(It)}}});zo.addInitHook("addHandler","keyboard",Ud),zo.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Rg=Ys.extend({addHooks:function(){Fo(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){co(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(It){var Vt=Qh(It),Qt=this._map.options.wheelDebounceTime;this._delta+=Vt,this._lastMousePos=this._map.mouseEventToContainerPoint(It),this._startTime||(this._startTime=+new Date);var fn=Math.max(Qt-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Tt(this._performZoom,this),fn),Du(It)},_performZoom:function(){var It=this._map,Vt=It.getZoom(),Qt=this._map.options.zoomSnap||0;It._stop();var fn=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Rn=4*Math.log(2/(1+Math.exp(-Math.abs(fn))))/Math.LN2,tr=Qt?Math.ceil(Rn/Qt)*Qt:Rn,Lr=It._limitZoom(Vt+(this._delta>0?tr:-tr))-Vt;this._delta=0,this._startTime=null,Lr&&(It.options.scrollWheelZoom==="center"?It.setZoom(Vt+Lr):It.setZoomAround(this._lastMousePos,Vt+Lr))}});zo.addInitHook("addHandler","scrollWheelZoom",Rg);var cd=600;zo.mergeOptions({tapHold:Pi.touchNative&&Pi.safari&&Pi.mobile,tapTolerance:15});var Dg=Ys.extend({addHooks:function(){Fo(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){co(this._map._container,"touchstart",this._onDown,this)},_onDown:function(It){if(clearTimeout(this._holdTimeout),It.touches.length===1){var Vt=It.touches[0];this._startPos=this._newPos=new Er(Vt.clientX,Vt.clientY),this._holdTimeout=setTimeout(Tt(function(){this._cancel(),this._isTapValid()&&(Fo(document,"touchend",ua),Fo(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",Vt))},this),cd),Fo(document,"touchend touchcancel contextmenu",this._cancel,this),Fo(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function It(){co(document,"touchend",ua),co(document,"touchend touchcancel",It)},_cancel:function(){clearTimeout(this._holdTimeout),co(document,"touchend touchcancel contextmenu",this._cancel,this),co(document,"touchmove",this._onMove,this)},_onMove:function(It){var Vt=It.touches[0];this._newPos=new Er(Vt.clientX,Vt.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(It,Vt){var Qt=new MouseEvent(It,{bubbles:!0,cancelable:!0,view:window,screenX:Vt.screenX,screenY:Vt.screenY,clientX:Vt.clientX,clientY:Vt.clientY});Qt._simulated=!0,Vt.target.dispatchEvent(Qt)}});zo.addInitHook("addHandler","tapHold",Dg),zo.mergeOptions({touchZoom:Pi.touch,bounceAtZoomLimits:!0});var Ip=Ys.extend({addHooks:function(){Bo(this._map._container,"leaflet-touch-zoom"),Fo(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yo(this._map._container,"leaflet-touch-zoom"),co(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(It){var Vt=this._map;if(!(!It.touches||It.touches.length!==2||Vt._animatingZoom||this._zooming)){var Qt=Vt.mouseEventToContainerPoint(It.touches[0]),fn=Vt.mouseEventToContainerPoint(It.touches[1]);this._centerPoint=Vt.getSize()._divideBy(2),this._startLatLng=Vt.containerPointToLatLng(this._centerPoint),Vt.options.touchZoom!=="center"&&(this._pinchStartLatLng=Vt.containerPointToLatLng(Qt.add(fn)._divideBy(2))),this._startDist=Qt.distanceTo(fn),this._startZoom=Vt.getZoom(),this._moved=!1,this._zooming=!0,Vt._stop(),Fo(document,"touchmove",this._onTouchMove,this),Fo(document,"touchend touchcancel",this._onTouchEnd,this),ua(It)}},_onTouchMove:function(It){if(!(!It.touches||It.touches.length!==2||!this._zooming)){var Vt=this._map,Qt=Vt.mouseEventToContainerPoint(It.touches[0]),fn=Vt.mouseEventToContainerPoint(It.touches[1]),Rn=Qt.distanceTo(fn)/this._startDist;if(this._zoom=Vt.getScaleZoom(Rn,this._startZoom),!Vt.options.bounceAtZoomLimits&&(this._zoom<Vt.getMinZoom()&&Rn<1||this._zoom>Vt.getMaxZoom()&&Rn>1)&&(this._zoom=Vt._limitZoom(this._zoom)),Vt.options.touchZoom==="center"){if(this._center=this._startLatLng,Rn===1)return}else{var tr=Qt._add(fn)._divideBy(2)._subtract(this._centerPoint);if(Rn===1&&tr.x===0&&tr.y===0)return;this._center=Vt.unproject(Vt.project(this._pinchStartLatLng,this._zoom).subtract(tr),this._zoom)}this._moved||(Vt._moveStart(!0,!1),this._moved=!0),gn(this._animRequest);var Lr=Tt(Vt._move,Vt,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=kn(Lr,this,!0),ua(It)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,gn(this._animRequest),co(document,"touchmove",this._onTouchMove,this),co(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});zo.addInitHook("addHandler","touchZoom",Ip),zo.BoxZoom=Op,zo.DoubleClickZoom=If,zo.Drag=ud,zo.Keyboard=Ud,zo.ScrollWheelZoom=Rg,zo.TapHold=Dg,zo.TouchZoom=Ip,it.Bounds=vr,it.Browser=Pi,it.CRS=ii,it.Canvas=Pf,it.Circle=Sp,it.CircleMarker=Nd,it.Class=pn,it.Control=ma,it.DivIcon=kp,it.DivOverlay=Fu,it.DomEvent=Va,it.DomUtil=Ac,it.Draggable=Ua,it.Evented=mr,it.FeatureGroup=Yl,it.GeoJSON=Ic,it.GridLayer=ih,it.Handler=Ys,it.Icon=sa,it.ImageOverlay=kf,it.LatLng=Ar,it.LatLngBounds=gr,it.Layer=Bs,it.LayerGroup=Ds,it.LineUtil=Kn,it.Map=zo,it.Marker=sd,it.Mixin=Nu,it.Path=ac,it.Point=Er,it.PolyUtil=ti,it.Polygon=rh,it.Polyline=Oc,it.Popup=ll,it.PosAnimation=Ch,it.Projection=Li,it.Rectangle=Pp,it.Renderer=zu,it.SVG=Vd,it.SVGOverlay=Bd,it.TileLayer=kh,it.Tooltip=su,it.Transformation=ir,it.Util=Vn,it.VideoOverlay=Og,it.bind=Tt,it.bounds=cr,it.canvas=Lf,it.circle=Pg,it.circleMarker=Bm,it.control=Qc,it.divIcon=Mg,it.extend=bt,it.featureGroup=$u,it.geoJSON=Tf,it.geoJson=Cp,it.gridLayer=Hm,it.icon=rd,it.imageOverlay=ld,it.latLng=sr,it.latLngBounds=Or,it.layerGroup=wu,it.map=Lc,it.marker=Sf,it.point=rr,it.polygon=zm,it.polyline=Fm,it.popup=Tp,it.rectangle=Lp,it.setOptions=tn,it.stamp=Lt,it.svg=Ap,it.svgOverlay=Sa,it.tileLayer=Af,it.tooltip=Fd,it.transformation=Ln,it.version=vt,it.videoOverlay=Ig;var jd=window.L;it.noConflict=function(){return window.L=jd,this},window.L=it})})(leafletSrc,leafletSrc.exports);const L$1=leafletSrc.exports;L.Control.Opacity=L.Control.extend({options:{collapsed:!1,position:"topright",label:null},initialize:function(nt,rt){for(const it in L.Util.setOptions(this,rt),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,nt)this._addLayer(nt[it],it,!0)},onAdd:function(nt){return this._initLayout(),this._update(),this._container},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var nt=this._map.getSize().y-(this._container.offsetTop+50);return nt<this._form.clientHeight?(L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=nt+"px"):L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this},collapse:function(){return L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){const nt="leaflet-control-layers",rt=this._container=L.DomUtil.create("div",nt),it=this.options.collapsed;if(rt.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(rt),L.DomEvent.disableScrollPropagation(rt),this.options.label){const wt=L.DomUtil.create("p",nt+"-label");wt.innerHTML=this.options.label,rt.appendChild(wt)}var vt=this._form=L.DomUtil.create("form",nt+"-list");it&&(this._map.on("click zoom move",this.collapse,this),L.Browser.android||L.DomEvent.on(rt,{mouseenter:this.expand,mouseleave:this.collapse},this));const bt=this._layersLink=L.DomUtil.create("a",nt+"-toggle",rt);bt.href="#",bt.title="Layers",L.Browser.touch?(L.DomEvent.on(bt,"click",L.DomEvent.stop),L.DomEvent.on(bt,"click",this.expand,this)):L.DomEvent.on(bt,"focus",this.expand,this),it||this.expand(),this._baseLayersList=L.DomUtil.create("div",nt+"-base",vt),this._separator=L.DomUtil.create("div",nt+"-separator",vt),this._overlaysList=L.DomUtil.create("div",nt+"-overlays",vt),rt.appendChild(vt)},_getLayer:function(nt){for(let rt=0;rt<this._layers.length;rt++)if(this._layers[rt]&&L.Util.stamp(this._layers[rt].layer)===nt)return this._layers[rt]},_addLayer:function(nt,rt,it){this._layers.push({layer:nt,name:rt,overlay:it})},_update:function(){if(!this._container)return this;L.DomUtil.empty(this._baseLayersList),L.DomUtil.empty(this._overlaysList),this._layerControlInputs=[];let nt,rt,it,vt,bt=0;for(it=0;it<this._layers.length;it++)vt=this._layers[it],this._addItem(vt),rt=rt||vt.overlay,nt=nt||!vt.overlay,bt+=vt.overlay?0:1;this.options.hideSingleBase&&(nt=nt&&1<bt,this._baseLayersList.style.display=nt?"":"none"),this._separator.style.display=rt&&nt?"":"none"},_addItem:function(nt){const rt=document.createElement("label"),it=document.createElement("input");nt.overlay?(it.type="range",it.className="leaflet-control-layers-range",it.min=0,it.max=100,it.value=100*nt.layer.options.opacity):it=this._createRadioElement("leaflet-base-layers",checked),this._layerControlInputs.push(it),it.layerId=L.Util.stamp(nt.layer),it.addEventListener("input",kt=>{kt=kt.target.value;const Lt=this._getLayer(it.layerId).layer;Lt._url===void 0||Lt.setOpacity(Number(kt/100))});const vt=document.createElement("span");vt.innerHTML=" "+nt.name;const bt=document.createElement("div"),wt=document.createElement("div");rt.appendChild(bt),bt.appendChild(vt),rt.appendChild(wt),wt.appendChild(it),(nt.overlay?this._overlaysList:this._baseLayersList).appendChild(rt)}}),L.control.opacity=function(nt,rt){return new L.Control.Opacity(nt,rt)};var range_styles_default=i$4`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    --thumb-size: 20px;
    --tooltip-offset: 10px;
    --track-color-active: var(--sl-color-neutral-200);
    --track-color-inactive: var(--sl-color-neutral-200);
    --track-active-offset: 0%;
    --track-height: 6px;

    display: block;
  }

  .range {
    position: relative;
  }

  .range__control {
    --percent: 0%;
    -webkit-appearance: none;
    border-radius: 3px;
    width: 100%;
    height: var(--track-height);
    background: transparent;
    line-height: var(--sl-input-height-medium);
    vertical-align: middle;
    margin: 0;

    background-image: linear-gradient(
      to right,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  .range--rtl .range__control {
    background-image: linear-gradient(
      to left,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  /* Webkit */
  .range__control::-webkit-slider-runnable-track {
    width: 100%;
    height: var(--track-height);
    border-radius: 3px;
    border: none;
  }

  .range__control::-webkit-slider-thumb {
    border: none;
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border: solid var(--sl-input-border-width) var(--sl-color-primary-600);
    -webkit-appearance: none;
    margin-top: calc(var(--thumb-size) / -2 + var(--track-height) / 2);
    cursor: pointer;
  }

  .range__control:enabled::-webkit-slider-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-webkit-slider-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-webkit-slider-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* Firefox */
  .range__control::-moz-focus-outer {
    border: 0;
  }

  .range__control::-moz-range-progress {
    background-color: var(--track-color-active);
    border-radius: 3px;
    height: var(--track-height);
  }

  .range__control::-moz-range-track {
    width: 100%;
    height: var(--track-height);
    background-color: var(--track-color-inactive);
    border-radius: 3px;
    border: none;
  }

  .range__control::-moz-range-thumb {
    border: none;
    height: var(--thumb-size);
    width: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .range__control:enabled::-moz-range-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-moz-range-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-moz-range-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* States */
  .range__control:focus-visible {
    outline: none;
  }

  .range__control:disabled {
    opacity: 0.5;
  }

  .range__control:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
  }

  .range__control:disabled::-moz-range-thumb {
    cursor: not-allowed;
  }

  /* Tooltip output */
  .range__tooltip {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    left: 0;
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    opacity: 0;
    padding: var(--sl-tooltip-padding);
    transition: var(--sl-transition-fast) opacity;
    pointer-events: none;
  }

  .range__tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 50%;
    translate: calc(-1 * var(--sl-tooltip-arrow-size));
  }

  .range--tooltip-visible .range__tooltip {
    opacity: 1;
  }

  /* Tooltip on top */
  .range--tooltip-top .range__tooltip {
    top: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-top .range__tooltip:after {
    border-top: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    top: 100%;
  }

  /* Tooltip on bottom */
  .range--tooltip-bottom .range__tooltip {
    bottom: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-bottom .range__tooltip:after {
    border-bottom: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    bottom: 100%;
  }

  @media (forced-colors: active) {
    .range__control,
    .range__tooltip {
      border: solid 1px transparent;
    }

    .range__control::-webkit-slider-thumb {
      border: solid 1px transparent;
    }

    .range__control::-moz-range-thumb {
      border: solid 1px transparent;
    }

    .range__tooltip:after {
      display: none;
    }
  }
`,SlRange=class extends ShoelaceElement{constructor(){super(...arguments),this.formSubmitController=new FormSubmitController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController2(this),this.hasFocus=!1,this.hasTooltip=!1,this.invalid=!1,this.title="",this.name="",this.value=0,this.label="",this.helpText="",this.disabled=!1,this.min=0,this.max=100,this.step=1,this.tooltip="top",this.tooltipFormatter=nt=>nt.toString(),this.defaultValue=0}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.syncRange()),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),this.updateComplete.then(()=>{this.syncRange(),this.resizeObserver.observe(this.input)})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this.input)}handleChange(){this.emit("sl-change")}handleInput(){this.value=parseFloat(this.input.value),this.emit("sl-input"),this.syncRange()}handleBlur(){this.hasFocus=!1,this.hasTooltip=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.hasTooltip=!0,this.emit("sl-focus")}handleThumbDragStart(){this.hasTooltip=!0}handleThumbDragEnd(){this.hasTooltip=!1}syncProgress(nt){this.input.style.setProperty("--percent",`${nt*100}%`)}syncTooltip(nt){if(this.output!==null){const rt=this.input.offsetWidth,it=this.output.offsetWidth,vt=getComputedStyle(this.input).getPropertyValue("--thumb-size"),bt=this.localize.dir()==="rtl",wt=rt*nt;if(bt){const Tt=`${rt-wt}px + ${nt} * ${vt}`;this.output.style.translate=`calc((${Tt} - ${it/2}px - ${vt} / 2))`}else{const Tt=`${wt}px - ${nt} * ${vt}`;this.output.style.translate=`calc(${Tt} - ${it/2}px + ${vt} / 2)`}}}handleValueChange(){this.invalid=!this.checkValidity(),this.input.value=this.value.toString(),this.value=parseFloat(this.input.value),this.syncRange()}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.checkValidity()}syncRange(){const nt=Math.max(0,(this.value-this.min)/(this.max-this.min));this.syncProgress(nt),this.tooltip!=="none"&&this.syncTooltip(nt)}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}stepUp(){this.input.stepUp(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}stepDown(){this.input.stepDown(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}checkValidity(){return this.input.checkValidity()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.invalid=!this.checkValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,vt=this.helpText?!0:!!rt;return y$2`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--medium":!0,"form-control--has-label":it,"form-control--has-help-text":vt})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({range:!0,"range--disabled":this.disabled,"range--focused":this.hasFocus,"range--rtl":this.localize.dir()==="rtl","range--tooltip-visible":this.hasTooltip,"range--tooltip-top":this.tooltip==="top","range--tooltip-bottom":this.tooltip==="bottom"})}
            @mousedown=${this.handleThumbDragStart}
            @mouseup=${this.handleThumbDragEnd}
            @touchstart=${this.handleThumbDragStart}
            @touchend=${this.handleThumbDragEnd}
          >
            <input
              part="input"
              id="input"
              class="range__control"
              title=${this.title}
              type="range"
              name=${l$2(this.name)}
              ?disabled=${this.disabled}
              min=${l$2(this.min)}
              max=${l$2(this.max)}
              step=${l$2(this.step)}
              .value=${l2$1(this.value.toString())}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />
            ${this.tooltip!=="none"&&!this.disabled?y$2`
                  <output part="tooltip" class="range__tooltip">
                    ${typeof this.tooltipFormatter=="function"?this.tooltipFormatter(this.value):this.value}
                  </output>
                `:""}
          </div>
        </div>

        <slot
          name="help-text"
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${vt?"false":"true"}
        >
          ${this.helpText}
        </slot>
      </div>
    `}};SlRange.styles=range_styles_default;__decorateClass([i2$2(".range__control")],SlRange.prototype,"input",2);__decorateClass([i2$2(".range__tooltip")],SlRange.prototype,"output",2);__decorateClass([t$1()],SlRange.prototype,"hasFocus",2);__decorateClass([t$1()],SlRange.prototype,"hasTooltip",2);__decorateClass([t$1()],SlRange.prototype,"invalid",2);__decorateClass([e2$2()],SlRange.prototype,"title",2);__decorateClass([e2$2()],SlRange.prototype,"name",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"value",2);__decorateClass([e2$2()],SlRange.prototype,"label",2);__decorateClass([e2$2({attribute:"help-text"})],SlRange.prototype,"helpText",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlRange.prototype,"disabled",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"min",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"max",2);__decorateClass([e2$2({type:Number})],SlRange.prototype,"step",2);__decorateClass([e2$2()],SlRange.prototype,"tooltip",2);__decorateClass([e2$2({attribute:!1})],SlRange.prototype,"tooltipFormatter",2);__decorateClass([defaultValue()],SlRange.prototype,"defaultValue",2);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleValueChange",1);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleDisabledChange",1);__decorateClass([watch("hasTooltip",{waitUntilFirstUpdate:!0})],SlRange.prototype,"syncRange",1);SlRange=__decorateClass([e$1("sl-range")],SlRange);(function(nt,rt){typeof exports=="object"&&typeof module<"u"?rt(exports):typeof define=="function"&&define.amd?define(["exports"],rt):rt((nt=typeof globalThis<"u"?globalThis:nt||self).turf={})})(globalThis,function(nt){var rt=63710088e-1,it={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*rt,kilometers:6371.0088,kilometres:6371.0088,meters:rt,metres:rt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:rt/1852,radians:1,yards:6967335223679999e-9},vt={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/rt,yards:1.0936133},bt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function wt(st,_t,xt){xt===void 0&&(xt={});var Et={type:"Feature"};return(xt.id===0||xt.id)&&(Et.id=xt.id),xt.bbox&&(Et.bbox=xt.bbox),Et.properties=_t||{},Et.geometry=st,Et}function Tt(st,_t,xt){switch(st){case"Point":return kt(_t).geometry;case"LineString":return zt(_t).geometry;case"Polygon":return Mt(_t).geometry;case"MultiPoint":return tn(_t).geometry;case"MultiLineString":return Zt(_t).geometry;case"MultiPolygon":return Yt(_t).geometry;default:throw new Error(st+" is invalid")}}function kt(st,_t,xt){if(xt===void 0&&(xt={}),!st)throw new Error("coordinates is required");if(!Array.isArray(st))throw new Error("coordinates must be an Array");if(st.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kn(st[0])||!kn(st[1]))throw new Error("coordinates must contain numbers");return wt({type:"Point",coordinates:st},_t,xt)}function Lt(st,_t,xt){return xt===void 0&&(xt={}),Wt(st.map(function(Et){return kt(Et,_t)}),xt)}function Mt(st,_t,xt){xt===void 0&&(xt={});for(var Et=0,At=st;Et<At.length;Et++){var Ot=At[Et];if(Ot.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Dt=0;Dt<Ot[Ot.length-1].length;Dt++)if(Ot[Ot.length-1][Dt]!==Ot[0][Dt])throw new Error("First and last Position are not equivalent.")}return wt({type:"Polygon",coordinates:st},_t,xt)}function Nt(st,_t,xt){return xt===void 0&&(xt={}),Wt(st.map(function(Et){return Mt(Et,_t)}),xt)}function zt(st,_t,xt){if(xt===void 0&&(xt={}),st.length<2)throw new Error("coordinates must be an array of two or more positions");return wt({type:"LineString",coordinates:st},_t,xt)}function Ht(st,_t,xt){return xt===void 0&&(xt={}),Wt(st.map(function(Et){return zt(Et,_t)}),xt)}function Wt(st,_t){_t===void 0&&(_t={});var xt={type:"FeatureCollection"};return _t.id&&(xt.id=_t.id),_t.bbox&&(xt.bbox=_t.bbox),xt.features=st,xt}function Zt(st,_t,xt){return xt===void 0&&(xt={}),wt({type:"MultiLineString",coordinates:st},_t,xt)}function tn(st,_t,xt){return xt===void 0&&(xt={}),wt({type:"MultiPoint",coordinates:st},_t,xt)}function Yt(st,_t,xt){return xt===void 0&&(xt={}),wt({type:"MultiPolygon",coordinates:st},_t,xt)}function nn(st,_t,xt){return xt===void 0&&(xt={}),wt({type:"GeometryCollection",geometries:st},_t,xt)}function rn(st,_t){if(_t===void 0&&(_t=0),_t&&!(_t>=0))throw new Error("precision must be a positive number");var xt=Math.pow(10,_t||0);return Math.round(st*xt)/xt}function ln(st,_t){_t===void 0&&(_t="kilometers");var xt=it[_t];if(!xt)throw new Error(_t+" units is invalid");return st*xt}function sn(st,_t){_t===void 0&&(_t="kilometers");var xt=it[_t];if(!xt)throw new Error(_t+" units is invalid");return st/xt}function mn(st,_t){return Cn(sn(st,_t))}function wn(st){var _t=st%360;return _t<0&&(_t+=360),_t}function Cn(st){return 180*(st%(2*Math.PI))/Math.PI}function An(st){return st%360*Math.PI/180}function Pn(st,_t,xt){if(_t===void 0&&(_t="kilometers"),xt===void 0&&(xt="kilometers"),!(st>=0))throw new Error("length must be a positive number");return ln(sn(st,_t),xt)}function On(st,_t,xt){if(_t===void 0&&(_t="meters"),xt===void 0&&(xt="kilometers"),!(st>=0))throw new Error("area must be a positive number");var Et=bt[_t];if(!Et)throw new Error("invalid original units");var At=bt[xt];if(!At)throw new Error("invalid final units");return st/Et*At}function kn(st){return!isNaN(st)&&st!==null&&!Array.isArray(st)}function gn(st){return!!st&&st.constructor===Object}function Vn(st){if(!st)throw new Error("bbox is required");if(!Array.isArray(st))throw new Error("bbox must be an Array");if(st.length!==4&&st.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");st.forEach(function(_t){if(!kn(_t))throw new Error("bbox must only contain numbers")})}function pn(st){if(!st)throw new Error("id is required");if(["string","number"].indexOf(typeof st)===-1)throw new Error("id must be a number or a string")}var pr=Object.freeze({__proto__:null,earthRadius:rt,factors:it,unitsFactors:vt,areaFactors:bt,feature:wt,geometry:Tt,point:kt,points:Lt,polygon:Mt,polygons:Nt,lineString:zt,lineStrings:Ht,featureCollection:Wt,multiLineString:Zt,multiPoint:tn,multiPolygon:Yt,geometryCollection:nn,round:rn,radiansToLength:ln,lengthToRadians:sn,lengthToDegrees:mn,bearingToAzimuth:wn,radiansToDegrees:Cn,degreesToRadians:An,convertLength:Pn,convertArea:On,isNumber:kn,isObject:gn,validateBBox:Vn,validateId:pn});function yn(st,_t,xt){if(st!==null)for(var Et,At,Ot,Dt,Ft,jt,Gt,Jt,qt=0,on=0,vn=st.type,_n=vn==="FeatureCollection",En=vn==="Feature",cn=_n?st.features.length:1,Hn=0;Hn<cn;Hn++){Ft=(Jt=!!(Gt=_n?st.features[Hn].geometry:En?st.geometry:st)&&Gt.type==="GeometryCollection")?Gt.geometries.length:1;for(var nr=0;nr<Ft;nr++){var bn=0,zn=0;if((Dt=Jt?Gt.geometries[nr]:Gt)!==null){jt=Dt.coordinates;var Un=Dt.type;switch(qt=!xt||Un!=="Polygon"&&Un!=="MultiPolygon"?0:1,Un){case null:break;case"Point":if(_t(jt,on,Hn,bn,zn)===!1)return!1;on++,bn++;break;case"LineString":case"MultiPoint":for(Et=0;Et<jt.length;Et++){if(_t(jt[Et],on,Hn,bn,zn)===!1)return!1;on++,Un==="MultiPoint"&&bn++}Un==="LineString"&&bn++;break;case"Polygon":case"MultiLineString":for(Et=0;Et<jt.length;Et++){for(At=0;At<jt[Et].length-qt;At++){if(_t(jt[Et][At],on,Hn,bn,zn)===!1)return!1;on++}Un==="MultiLineString"&&bn++,Un==="Polygon"&&zn++}Un==="Polygon"&&bn++;break;case"MultiPolygon":for(Et=0;Et<jt.length;Et++){for(zn=0,At=0;At<jt[Et].length;At++){for(Ot=0;Ot<jt[Et][At].length-qt;Ot++){if(_t(jt[Et][At][Ot],on,Hn,bn,zn)===!1)return!1;on++}zn++}bn++}break;case"GeometryCollection":for(Et=0;Et<Dt.geometries.length;Et++)if(yn(Dt.geometries[Et],_t,xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mr(st,_t,xt,Et){var At=xt;return yn(st,function(Ot,Dt,Ft,jt,Gt){At=Dt===0&&xt===void 0?Ot:_t(At,Ot,Dt,Ft,jt,Gt)},Et),At}function Er(st,_t){var xt;switch(st.type){case"FeatureCollection":for(xt=0;xt<st.features.length&&_t(st.features[xt].properties,xt)!==!1;xt++);break;case"Feature":_t(st.properties,0)}}function Mr(st,_t,xt){var Et=xt;return Er(st,function(At,Ot){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot)}),Et}function rr(st,_t){if(st.type==="Feature")_t(st,0);else if(st.type==="FeatureCollection")for(var xt=0;xt<st.features.length&&_t(st.features[xt],xt)!==!1;xt++);}function vr(st,_t,xt){var Et=xt;return rr(st,function(At,Ot){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot)}),Et}function cr(st){var _t=[];return yn(st,function(xt){_t.push(xt)}),_t}function gr(st,_t){var xt,Et,At,Ot,Dt,Ft,jt,Gt,Jt,qt,on=0,vn=st.type==="FeatureCollection",_n=st.type==="Feature",En=vn?st.features.length:1;for(xt=0;xt<En;xt++){for(Ft=vn?st.features[xt].geometry:_n?st.geometry:st,Gt=vn?st.features[xt].properties:_n?st.properties:{},Jt=vn?st.features[xt].bbox:_n?st.bbox:void 0,qt=vn?st.features[xt].id:_n?st.id:void 0,Dt=(jt=!!Ft&&Ft.type==="GeometryCollection")?Ft.geometries.length:1,At=0;At<Dt;At++)if((Ot=jt?Ft.geometries[At]:Ft)!==null)switch(Ot.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_t(Ot,on,Gt,Jt,qt)===!1)return!1;break;case"GeometryCollection":for(Et=0;Et<Ot.geometries.length;Et++)if(_t(Ot.geometries[Et],on,Gt,Jt,qt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_t(null,on,Gt,Jt,qt)===!1)return!1;on++}}function Or(st,_t,xt){var Et=xt;return gr(st,function(At,Ot,Dt,Ft,jt){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot,Dt,Ft,jt)}),Et}function Ar(st,_t){gr(st,function(xt,Et,At,Ot,Dt){var Ft,jt=xt===null?null:xt.type;switch(jt){case null:case"Point":case"LineString":case"Polygon":return _t(wt(xt,At,{bbox:Ot,id:Dt}),Et,0)!==!1&&void 0}switch(jt){case"MultiPoint":Ft="Point";break;case"MultiLineString":Ft="LineString";break;case"MultiPolygon":Ft="Polygon"}for(var Gt=0;Gt<xt.coordinates.length;Gt++){var Jt=xt.coordinates[Gt];if(_t(wt({type:Ft,coordinates:Jt},At),Et,Gt)===!1)return!1}})}function sr(st,_t,xt){var Et=xt;return Ar(st,function(At,Ot,Dt){Et=Ot===0&&Dt===0&&xt===void 0?At:_t(Et,At,Ot,Dt)}),Et}function ii(st,_t){Ar(st,function(xt,Et,At){var Ot=0;if(xt.geometry){var Dt=xt.geometry.type;if(Dt!=="Point"&&Dt!=="MultiPoint"){var Ft,jt=0,Gt=0,Jt=0;return yn(xt,function(qt,on,vn,_n,En){if(Ft===void 0||Et>jt||_n>Gt||En>Jt)return Ft=qt,jt=Et,Gt=_n,Jt=En,void(Ot=0);var cn=zt([Ft,qt],xt.properties);if(_t(cn,Et,At,En,Ot)===!1)return!1;Ot++,Ft=qt})!==!1&&void 0}}})}function ar(st,_t,xt){var Et=xt,At=!1;return ii(st,function(Ot,Dt,Ft,jt,Gt){Et=At===!1&&xt===void 0?Ot:_t(Et,Ot,Dt,Ft,jt,Gt),At=!0}),Et}function fr(st,_t){if(!st)throw new Error("geojson is required");Ar(st,function(xt,Et,At){if(xt.geometry!==null){var Ot=xt.geometry.type,Dt=xt.geometry.coordinates;switch(Ot){case"LineString":if(_t(xt,Et,At,0,0)===!1)return!1;break;case"Polygon":for(var Ft=0;Ft<Dt.length;Ft++)if(_t(zt(Dt[Ft],xt.properties),Et,At,Ft)===!1)return!1}}})}function wr(st,_t,xt){var Et=xt;return fr(st,function(At,Ot,Dt,Ft){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot,Dt,Ft)}),Et}function ir(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt,Et=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Dt=_t.segmentIndex||0,Ft=_t.properties;switch(st.type){case"FeatureCollection":Et<0&&(Et=st.features.length+Et),Ft=Ft||st.features[Et].properties,xt=st.features[Et].geometry;break;case"Feature":Ft=Ft||st.properties,xt=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=st;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var jt=xt.coordinates;switch(xt.type){case"Point":case"MultiPoint":return null;case"LineString":return Dt<0&&(Dt=jt.length+Dt-1),zt([jt[Dt],jt[Dt+1]],Ft,_t);case"Polygon":return Ot<0&&(Ot=jt.length+Ot),Dt<0&&(Dt=jt[Ot].length+Dt-1),zt([jt[Ot][Dt],jt[Ot][Dt+1]],Ft,_t);case"MultiLineString":return At<0&&(At=jt.length+At),Dt<0&&(Dt=jt[At].length+Dt-1),zt([jt[At][Dt],jt[At][Dt+1]],Ft,_t);case"MultiPolygon":return At<0&&(At=jt.length+At),Ot<0&&(Ot=jt[At].length+Ot),Dt<0&&(Dt=jt[At][Ot].length-Dt-1),zt([jt[At][Ot][Dt],jt[At][Ot][Dt+1]],Ft,_t)}throw new Error("geojson is invalid")}function Ln(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt,Et=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Dt=_t.coordIndex||0,Ft=_t.properties;switch(st.type){case"FeatureCollection":Et<0&&(Et=st.features.length+Et),Ft=Ft||st.features[Et].properties,xt=st.features[Et].geometry;break;case"Feature":Ft=Ft||st.properties,xt=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=st;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var jt=xt.coordinates;switch(xt.type){case"Point":return kt(jt,Ft,_t);case"MultiPoint":return At<0&&(At=jt.length+At),kt(jt[At],Ft,_t);case"LineString":return Dt<0&&(Dt=jt.length+Dt),kt(jt[Dt],Ft,_t);case"Polygon":return Ot<0&&(Ot=jt.length+Ot),Dt<0&&(Dt=jt[Ot].length+Dt),kt(jt[Ot][Dt],Ft,_t);case"MultiLineString":return At<0&&(At=jt.length+At),Dt<0&&(Dt=jt[At].length+Dt),kt(jt[At][Dt],Ft,_t);case"MultiPolygon":return At<0&&(At=jt.length+At),Ot<0&&(Ot=jt[At].length+Ot),Dt<0&&(Dt=jt[At][Ot].length-Dt),kt(jt[At][Ot][Dt],Ft,_t)}throw new Error("geojson is invalid")}var en=Object.freeze({__proto__:null,coordAll:cr,coordEach:yn,coordReduce:mr,featureEach:rr,featureReduce:vr,findPoint:Ln,findSegment:ir,flattenEach:Ar,flattenReduce:sr,geomEach:gr,geomReduce:Or,lineEach:fr,lineReduce:wr,propEach:Er,propReduce:Mr,segmentEach:ii,segmentReduce:ar});function dn(st){var _t=[1/0,1/0,-1/0,-1/0];return yn(st,function(xt){_t[0]>xt[0]&&(_t[0]=xt[0]),_t[1]>xt[1]&&(_t[1]=xt[1]),_t[2]<xt[0]&&(_t[2]=xt[0]),_t[3]<xt[1]&&(_t[3]=xt[1])}),_t}function un(st){if(!st)throw new Error("coord is required");if(!Array.isArray(st)){if(st.type==="Feature"&&st.geometry!==null&&st.geometry.type==="Point")return st.geometry.coordinates;if(st.type==="Point")return st.coordinates}if(Array.isArray(st)&&st.length>=2&&!Array.isArray(st[0])&&!Array.isArray(st[1]))return st;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Nn(st){if(Array.isArray(st))return st;if(st.type==="Feature"){if(st.geometry!==null)return st.geometry.coordinates}else if(st.coordinates)return st.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function In(st){if(st.length>1&&kn(st[0])&&kn(st[1]))return!0;if(Array.isArray(st[0])&&st[0].length)return In(st[0]);throw new Error("coordinates must only contain numbers")}function lr(st,_t,xt){if(!_t||!xt)throw new Error("type and name required");if(!st||st.type!==_t)throw new Error("Invalid input to "+xt+": must be a "+_t+", given "+st.type)}function $n(st,_t,xt){if(!st)throw new Error("No feature passed");if(!xt)throw new Error(".featureOf() requires a name");if(!st||st.type!=="Feature"||!st.geometry)throw new Error("Invalid input to "+xt+", Feature with geometry required");if(!st.geometry||st.geometry.type!==_t)throw new Error("Invalid input to "+xt+": must be a "+_t+", given "+st.geometry.type)}function Qn(st,_t,xt){if(!st)throw new Error("No featureCollection passed");if(!xt)throw new Error(".collectionOf() requires a name");if(!st||st.type!=="FeatureCollection")throw new Error("Invalid input to "+xt+", FeatureCollection required");for(var Et=0,At=st.features;Et<At.length;Et++){var Ot=At[Et];if(!Ot||Ot.type!=="Feature"||!Ot.geometry)throw new Error("Invalid input to "+xt+", Feature with geometry required");if(!Ot.geometry||Ot.geometry.type!==_t)throw new Error("Invalid input to "+xt+": must be a "+_t+", given "+Ot.geometry.type)}}function Wn(st){return st.type==="Feature"?st.geometry:st}function or(st,_t){return st.type==="FeatureCollection"?"FeatureCollection":st.type==="GeometryCollection"?"GeometryCollection":st.type==="Feature"&&st.geometry!==null?st.geometry.type:st.type}dn.default=dn;var dr=Object.freeze({__proto__:null,getCoord:un,getCoords:Nn,containsNumber:In,geojsonType:lr,featureOf:$n,collectionOf:Qn,getGeom:Wn,getType:or}),kr=Object.getOwnPropertySymbols,br=Object.prototype.hasOwnProperty,_r=Object.prototype.propertyIsEnumerable;/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function hi(st){if(st==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(st)}var di=function(){try{if(!Object.assign)return!1;var st=new String("abc");if(st[5]="de",Object.getOwnPropertyNames(st)[0]==="5")return!1;for(var _t={},xt=0;xt<10;xt++)_t["_"+String.fromCharCode(xt)]=xt;if(Object.getOwnPropertyNames(_t).map(function(At){return _t[At]}).join("")!=="0123456789")return!1;var Et={};return"abcdefghijklmnopqrst".split("").forEach(function(At){Et[At]=At}),Object.keys(Object.assign({},Et)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(st,_t){for(var xt,Et,At=hi(st),Ot=1;Ot<arguments.length;Ot++){for(var Dt in xt=Object(arguments[Ot]))br.call(xt,Dt)&&(At[Dt]=xt[Dt]);if(kr){Et=kr(xt);for(var Ft=0;Ft<Et.length;Ft++)_r.call(xt,Et[Ft])&&(At[Et[Ft]]=xt[Et[Ft]])}}return At},vi={successCallback:null,verbose:!1},Ai={};/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function ki(st,_t,xt){xt=xt||{};for(var Et=Object.keys(vi),At=0;At<Et.length;At++){var Ot=Et[At],Dt=xt[Ot];Dt=Dt!=null?Dt:vi[Ot],Ai[Ot]=Dt}Ai.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+_t);var Ft=function(jt){var Gt=[],Jt=0,qt=1e-7;return jt.cells.forEach(function(on,vn){on.forEach(function(_n,En){if(_n!==void 0&&(qn=_n).cval!==5&&qn.cval!==10&&!Ti(_n)){var cn=function(Gn,Xr,Br){var Jr,Fr,oi=Gn.length,Wr=[],jr=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],Hr=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],ei=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],Gr=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],si=Gn[Xr][Br],Tr=si.cval,Ki=ei[Tr],Ci=Tn(si,Ki);Wr.push([Br+Ci[0],Xr+Ci[1]]),Ki=Gr[Tr],Ci=Tn(si,Ki),Wr.push([Br+Ci[0],Xr+Ci[1]]),Rr(si);for(var $o=Br+jr[Tr],Yi=Xr+Hr[Tr],po=Tr;$o>=0&&Yi>=0&&Yi<oi&&($o!=Br||Yi!=Xr)&&(si=Gn[Yi][$o])!==void 0;){if((Tr=si.cval)===0||Tr===15)return{path:Wr,info:"mergeable"};Ki=Gr[Tr],Jr=jr[Tr],Fr=Hr[Tr],Tr!==5&&Tr!==10||(Tr===5?si.flipped?Hr[po]===-1?(Ki="left",Jr=-1,Fr=0):(Ki="right",Jr=1,Fr=0):jr[po]===-1&&(Ki="bottom",Jr=0,Fr=-1):Tr===10&&(si.flipped?jr[po]===-1?(Ki="top",Jr=0,Fr=1):(Ki="bottom",Jr=0,Fr=-1):Hr[po]===1&&(Ki="left",Jr=-1,Fr=0))),Ci=Tn(si,Ki),Wr.push([$o+Ci[0],Yi+Ci[1]]),Rr(si),$o+=Jr,Yi+=Fr,po=Tr}return{path:Wr,info:"closed"}}(jt.cells,vn,En),Hn=!1;if(cn.info==="mergeable"){for(var nr=cn.path[cn.path.length-1][0],bn=cn.path[cn.path.length-1][1],zn=Jt-1;zn>=0;zn--)if(Math.abs(Gt[zn][0][0]-nr)<=qt&&Math.abs(Gt[zn][0][1]-bn)<=qt){for(var Un=cn.path.length-2;Un>=0;--Un)Gt[zn].unshift(cn.path[Un]);Hn=!0;break}}Hn||(Gt[Jt++]=cn.path)}var qn})}),Gt}(function(jt,Gt){for(var Jt=jt.length-1,qt=jt[0].length-1,on={rows:Jt,cols:qt,cells:[]},vn=0;vn<Jt;++vn){on.cells[vn]=[];for(var _n=0;_n<qt;++_n){var En=0,cn=jt[vn+1][_n],Hn=jt[vn+1][_n+1],nr=jt[vn][_n+1],bn=jt[vn][_n];if(!(isNaN(cn)||isNaN(Hn)||isNaN(nr)||isNaN(bn))){En|=cn>=Gt?8:0,En|=Hn>=Gt?4:0,En|=nr>=Gt?2:0;var zn,Un,qn,Gn,Xr=!1;if((En|=bn>=Gt?1:0)===5||En===10){var Br=(cn+Hn+nr+bn)/4;En===5&&Br<Gt?(En=10,Xr=!0):En===10&&Br<Gt&&(En=5,Xr=!0)}En!==0&&En!==15&&(zn=Un=qn=Gn=.5,En===1?(qn=1-Bi(Gt,cn,bn),Un=1-Bi(Gt,nr,bn)):En===2?(Un=Bi(Gt,bn,nr),Gn=1-Bi(Gt,Hn,nr)):En===3?(qn=1-Bi(Gt,cn,bn),Gn=1-Bi(Gt,Hn,nr)):En===4?(zn=Bi(Gt,cn,Hn),Gn=Bi(Gt,nr,Hn)):En===5?(zn=Bi(Gt,cn,Hn),Gn=Bi(Gt,nr,Hn),Un=1-Bi(Gt,nr,bn),qn=1-Bi(Gt,cn,bn)):En===6?(Un=Bi(Gt,bn,nr),zn=Bi(Gt,cn,Hn)):En===7?(qn=1-Bi(Gt,cn,bn),zn=Bi(Gt,cn,Hn)):En===8?(qn=Bi(Gt,bn,cn),zn=1-Bi(Gt,Hn,cn)):En===9?(Un=1-Bi(Gt,nr,bn),zn=1-Bi(Gt,Hn,cn)):En===10?(zn=1-Bi(Gt,Hn,cn),Gn=1-Bi(Gt,Hn,nr),Un=Bi(Gt,bn,nr),qn=Bi(Gt,bn,cn)):En===11?(zn=1-Bi(Gt,Hn,cn),Gn=1-Bi(Gt,Hn,nr)):En===12?(qn=Bi(Gt,bn,cn),Gn=Bi(Gt,nr,Hn)):En===13?(Un=1-Bi(Gt,nr,bn),Gn=Bi(Gt,nr,Hn)):En===14?(qn=Bi(Gt,bn,cn),Un=Bi(Gt,bn,nr)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+En),on.cells[vn][_n]={cval:En,flipped:Xr,top:zn,right:Gn,bottom:Un,left:qn})}}}return on}(st,_t));return typeof Ai.successCallback=="function"&&Ai.successCallback(Ft),Ft}function Bi(st,_t,xt){return(st-_t)/(xt-_t)}function Ti(st){return st.cval===0||st.cval===15}function Rr(st){Ti(st)||st.cval===5||st.cval===10||(st.cval=15)}function Tn(st,_t){return _t==="top"?[st.top,1]:_t==="bottom"?[st.bottom,0]:_t==="right"?[1,st.right]:_t==="left"?[0,st.left]:void 0}function Sn(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.zProperty||"elevation",Et=_t.flip,At=_t.flags;Qn(st,"Point","input must contain Points");for(var Ot=function(on,vn){var _n={};return rr(on,function(En){var cn=Nn(En)[1];_n[cn]||(_n[cn]=[]),_n[cn].push(En)}),Object.keys(_n).map(function(En){return _n[En].sort(function(cn,Hn){return Nn(cn)[0]-Nn(Hn)[0]})}).sort(function(En,cn){return vn?Nn(En[0])[1]-Nn(cn[0])[1]:Nn(cn[0])[1]-Nn(En[0])[1]})}(st,Et),Dt=[],Ft=0;Ft<Ot.length;Ft++){for(var jt=Ot[Ft],Gt=[],Jt=0;Jt<jt.length;Jt++){var qt=jt[Jt];qt.properties[xt]?Gt.push(qt.properties[xt]):Gt.push(0),At===!0&&(qt.properties.matrixPosition=[Ft,Jt])}Dt.push(Gt)}return Dt}var jn=Cr,er=Cr;function Cr(st,_t,xt,Et,At){Qr(st,_t,xt||0,Et||st.length-1,At||ai)}function Qr(st,_t,xt,Et,At){for(;Et>xt;){if(Et-xt>600){var Ot=Et-xt+1,Dt=_t-xt+1,Ft=Math.log(Ot),jt=.5*Math.exp(2*Ft/3),Gt=.5*Math.sqrt(Ft*jt*(Ot-jt)/Ot)*(Dt-Ot/2<0?-1:1);Qr(st,_t,Math.max(xt,Math.floor(_t-Dt*jt/Ot+Gt)),Math.min(Et,Math.floor(_t+(Ot-Dt)*jt/Ot+Gt)),At)}var Jt=st[_t],qt=xt,on=Et;for(yr(st,xt,_t),At(st[Et],Jt)>0&&yr(st,xt,Et);qt<on;){for(yr(st,qt,on),qt++,on--;At(st[qt],Jt)<0;)qt++;for(;At(st[on],Jt)>0;)on--}At(st[xt],Jt)===0?yr(st,xt,on):yr(st,++on,Et),on<=_t&&(xt=on+1),_t<=on&&(Et=on-1)}}function yr(st,_t,xt){var Et=st[_t];st[_t]=st[xt],st[xt]=Et}function ai(st,_t){return st<_t?-1:st>_t?1:0}jn.default=er;var Ir=wi,mi=wi;function wi(st,_t){if(!(this instanceof wi))return new wi(st,_t);this._maxEntries=Math.max(4,st||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),_t&&this._initFormat(_t),this.clear()}function Mi(st,_t,xt){if(!xt)return _t.indexOf(st);for(var Et=0;Et<_t.length;Et++)if(xt(st,_t[Et]))return Et;return-1}function Ei(st,_t){io(st,0,st.children.length,_t,st)}function io(st,_t,xt,Et,At){At||(At=oo(null)),At.minX=1/0,At.minY=1/0,At.maxX=-1/0,At.maxY=-1/0;for(var Ot,Dt=_t;Dt<xt;Dt++)Ot=st.children[Dt],Di(At,st.leaf?Et(Ot):Ot);return At}function Di(st,_t){return st.minX=Math.min(st.minX,_t.minX),st.minY=Math.min(st.minY,_t.minY),st.maxX=Math.max(st.maxX,_t.maxX),st.maxY=Math.max(st.maxY,_t.maxY),st}function eo(st,_t){return st.minX-_t.minX}function wo(st,_t){return st.minY-_t.minY}function Ji(st){return(st.maxX-st.minX)*(st.maxY-st.minY)}function al(st){return st.maxX-st.minX+(st.maxY-st.minY)}function Ws(st,_t){return st.minX<=_t.minX&&st.minY<=_t.minY&&_t.maxX<=st.maxX&&_t.maxY<=st.maxY}function Pi(st,_t){return _t.minX<=st.maxX&&_t.minY<=st.maxY&&_t.maxX>=st.minX&&_t.maxY>=st.minY}function oo(st){return{children:st,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Rs(st,_t,xt,Et,At){for(var Ot,Dt=[_t,xt];Dt.length;)(xt=Dt.pop())-(_t=Dt.pop())<=Et||(Ot=_t+Math.ceil((xt-_t)/Et/2)*Et,jn(st,Ot,_t,xt,At),Dt.push(_t,Ot,Ot,xt))}function jo(st){var _t={exports:{}};return st(_t,_t.exports),_t.exports}wi.prototype={all:function(){return this._all(this.data,[])},search:function(st){var _t=this.data,xt=[],Et=this.toBBox;if(!Pi(st,_t))return xt;for(var At,Ot,Dt,Ft,jt=[];_t;){for(At=0,Ot=_t.children.length;At<Ot;At++)Dt=_t.children[At],Pi(st,Ft=_t.leaf?Et(Dt):Dt)&&(_t.leaf?xt.push(Dt):Ws(st,Ft)?this._all(Dt,xt):jt.push(Dt));_t=jt.pop()}return xt},collides:function(st){var _t=this.data,xt=this.toBBox;if(!Pi(st,_t))return!1;for(var Et,At,Ot,Dt,Ft=[];_t;){for(Et=0,At=_t.children.length;Et<At;Et++)if(Ot=_t.children[Et],Pi(st,Dt=_t.leaf?xt(Ot):Ot)){if(_t.leaf||Ws(st,Dt))return!0;Ft.push(Ot)}_t=Ft.pop()}return!1},load:function(st){if(!st||!st.length)return this;if(st.length<this._minEntries){for(var _t=0,xt=st.length;_t<xt;_t++)this.insert(st[_t]);return this}var Et=this._build(st.slice(),0,st.length-1,0);if(this.data.children.length)if(this.data.height===Et.height)this._splitRoot(this.data,Et);else{if(this.data.height<Et.height){var At=this.data;this.data=Et,Et=At}this._insert(Et,this.data.height-Et.height-1,!0)}else this.data=Et;return this},insert:function(st){return st&&this._insert(st,this.data.height-1),this},clear:function(){return this.data=oo([]),this},remove:function(st,_t){if(!st)return this;for(var xt,Et,At,Ot,Dt=this.data,Ft=this.toBBox(st),jt=[],Gt=[];Dt||jt.length;){if(Dt||(Dt=jt.pop(),Et=jt[jt.length-1],xt=Gt.pop(),Ot=!0),Dt.leaf&&(At=Mi(st,Dt.children,_t))!==-1)return Dt.children.splice(At,1),jt.push(Dt),this._condense(jt),this;Ot||Dt.leaf||!Ws(Dt,Ft)?Et?(xt++,Dt=Et.children[xt],Ot=!1):Dt=null:(jt.push(Dt),Gt.push(xt),xt=0,Et=Dt,Dt=Dt.children[0])}return this},toBBox:function(st){return st},compareMinX:eo,compareMinY:wo,toJSON:function(){return this.data},fromJSON:function(st){return this.data=st,this},_all:function(st,_t){for(var xt=[];st;)st.leaf?_t.push.apply(_t,st.children):xt.push.apply(xt,st.children),st=xt.pop();return _t},_build:function(st,_t,xt,Et){var At,Ot=xt-_t+1,Dt=this._maxEntries;if(Ot<=Dt)return Ei(At=oo(st.slice(_t,xt+1)),this.toBBox),At;Et||(Et=Math.ceil(Math.log(Ot)/Math.log(Dt)),Dt=Math.ceil(Ot/Math.pow(Dt,Et-1))),(At=oo([])).leaf=!1,At.height=Et;var Ft,jt,Gt,Jt,qt=Math.ceil(Ot/Dt),on=qt*Math.ceil(Math.sqrt(Dt));for(Rs(st,_t,xt,on,this.compareMinX),Ft=_t;Ft<=xt;Ft+=on)for(Rs(st,Ft,Gt=Math.min(Ft+on-1,xt),qt,this.compareMinY),jt=Ft;jt<=Gt;jt+=qt)Jt=Math.min(jt+qt-1,Gt),At.children.push(this._build(st,jt,Jt,Et-1));return Ei(At,this.toBBox),At},_chooseSubtree:function(st,_t,xt,Et){for(var At,Ot,Dt,Ft,jt,Gt,Jt,qt,on,vn;Et.push(_t),!_t.leaf&&Et.length-1!==xt;){for(Jt=qt=1/0,At=0,Ot=_t.children.length;At<Ot;At++)jt=Ji(Dt=_t.children[At]),on=st,vn=Dt,(Gt=(Math.max(vn.maxX,on.maxX)-Math.min(vn.minX,on.minX))*(Math.max(vn.maxY,on.maxY)-Math.min(vn.minY,on.minY))-jt)<qt?(qt=Gt,Jt=jt<Jt?jt:Jt,Ft=Dt):Gt===qt&&jt<Jt&&(Jt=jt,Ft=Dt);_t=Ft||_t.children[0]}return _t},_insert:function(st,_t,xt){var Et=this.toBBox,At=xt?st:Et(st),Ot=[],Dt=this._chooseSubtree(At,this.data,_t,Ot);for(Dt.children.push(st),Di(Dt,At);_t>=0&&Ot[_t].children.length>this._maxEntries;)this._split(Ot,_t),_t--;this._adjustParentBBoxes(At,Ot,_t)},_split:function(st,_t){var xt=st[_t],Et=xt.children.length,At=this._minEntries;this._chooseSplitAxis(xt,At,Et);var Ot=this._chooseSplitIndex(xt,At,Et),Dt=oo(xt.children.splice(Ot,xt.children.length-Ot));Dt.height=xt.height,Dt.leaf=xt.leaf,Ei(xt,this.toBBox),Ei(Dt,this.toBBox),_t?st[_t-1].children.push(Dt):this._splitRoot(xt,Dt)},_splitRoot:function(st,_t){this.data=oo([st,_t]),this.data.height=st.height+1,this.data.leaf=!1,Ei(this.data,this.toBBox)},_chooseSplitIndex:function(st,_t,xt){var Et,At,Ot,Dt,Ft,jt,Gt,Jt,qt,on,vn,_n,En,cn;for(jt=Gt=1/0,Et=_t;Et<=xt-_t;Et++)At=io(st,0,Et,this.toBBox),Ot=io(st,Et,xt,this.toBBox),qt=At,on=Ot,vn=void 0,_n=void 0,En=void 0,cn=void 0,vn=Math.max(qt.minX,on.minX),_n=Math.max(qt.minY,on.minY),En=Math.min(qt.maxX,on.maxX),cn=Math.min(qt.maxY,on.maxY),Dt=Math.max(0,En-vn)*Math.max(0,cn-_n),Ft=Ji(At)+Ji(Ot),Dt<jt?(jt=Dt,Jt=Et,Gt=Ft<Gt?Ft:Gt):Dt===jt&&Ft<Gt&&(Gt=Ft,Jt=Et);return Jt},_chooseSplitAxis:function(st,_t,xt){var Et=st.leaf?this.compareMinX:eo,At=st.leaf?this.compareMinY:wo;this._allDistMargin(st,_t,xt,Et)<this._allDistMargin(st,_t,xt,At)&&st.children.sort(Et)},_allDistMargin:function(st,_t,xt,Et){st.children.sort(Et);var At,Ot,Dt=this.toBBox,Ft=io(st,0,_t,Dt),jt=io(st,xt-_t,xt,Dt),Gt=al(Ft)+al(jt);for(At=_t;At<xt-_t;At++)Ot=st.children[At],Di(Ft,st.leaf?Dt(Ot):Ot),Gt+=al(Ft);for(At=xt-_t-1;At>=_t;At--)Ot=st.children[At],Di(jt,st.leaf?Dt(Ot):Ot),Gt+=al(jt);return Gt},_adjustParentBBoxes:function(st,_t,xt){for(var Et=xt;Et>=0;Et--)Di(_t[Et],st)},_condense:function(st){for(var _t,xt=st.length-1;xt>=0;xt--)st[xt].children.length===0?xt>0?(_t=st[xt-1].children).splice(_t.indexOf(st[xt]),1):this.clear():Ei(st[xt],this.toBBox)},_initFormat:function(st){var _t=["return a"," - b",";"];this.compareMinX=new Function("a","b",_t.join(st[0])),this.compareMinY=new Function("a","b",_t.join(st[1])),this.toBBox=new Function("a","return {minX: a"+st[0]+", minY: a"+st[1]+", maxX: a"+st[2]+", maxY: a"+st[3]+"};")}},Ir.default=mi;var ls=function(st,_t,xt){var Et=st*_t,At=Dr*st,Ot=At-(At-st),Dt=st-Ot,Ft=Dr*_t,jt=Ft-(Ft-_t),Gt=_t-jt,Jt=Dt*Gt-(Et-Ot*jt-Dt*jt-Ot*Gt);return xt?(xt[0]=Jt,xt[1]=Et,xt):[Jt,Et]},Dr=+(Math.pow(2,27)+1),Yr=function(st,_t){var xt=0|st.length,Et=0|_t.length;if(xt===1&&Et===1)return function(qn,Gn){var Xr=qn+Gn,Br=Xr-qn,Jr=qn-(Xr-Br)+(Gn-Br);return Jr?[Jr,Xr]:[Xr]}(st[0],_t[0]);var At,Ot,Dt=new Array(xt+Et),Ft=0,jt=0,Gt=0,Jt=Math.abs,qt=st[jt],on=Jt(qt),vn=_t[Gt],_n=Jt(vn);on<_n?(Ot=qt,(jt+=1)<xt&&(qt=st[jt],on=Jt(qt))):(Ot=vn,(Gt+=1)<Et&&(vn=_t[Gt],_n=Jt(vn))),jt<xt&&on<_n||Gt>=Et?(At=qt,(jt+=1)<xt&&(qt=st[jt],on=Jt(qt))):(At=vn,(Gt+=1)<Et&&(vn=_t[Gt],_n=Jt(vn)));for(var En,cn,Hn=At+Ot,nr=Hn-At,bn=Ot-nr,zn=bn,Un=Hn;jt<xt&&Gt<Et;)on<_n?(At=qt,(jt+=1)<xt&&(qt=st[jt],on=Jt(qt))):(At=vn,(Gt+=1)<Et&&(vn=_t[Gt],_n=Jt(vn))),(bn=(Ot=zn)-(nr=(Hn=At+Ot)-At))&&(Dt[Ft++]=bn),zn=Un-((En=Un+Hn)-(cn=En-Un))+(Hn-cn),Un=En;for(;jt<xt;)(bn=(Ot=zn)-(nr=(Hn=(At=qt)+Ot)-At))&&(Dt[Ft++]=bn),zn=Un-((En=Un+Hn)-(cn=En-Un))+(Hn-cn),Un=En,(jt+=1)<xt&&(qt=st[jt]);for(;Gt<Et;)(bn=(Ot=zn)-(nr=(Hn=(At=vn)+Ot)-At))&&(Dt[Ft++]=bn),zn=Un-((En=Un+Hn)-(cn=En-Un))+(Hn-cn),Un=En,(Gt+=1)<Et&&(vn=_t[Gt]);return zn&&(Dt[Ft++]=zn),Un&&(Dt[Ft++]=Un),Ft||(Dt[Ft++]=0),Dt.length=Ft,Dt},Vr=function(st,_t,xt){var Et=st+_t,At=Et-st,Ot=_t-At,Dt=st-(Et-At);return xt?(xt[0]=Dt+Ot,xt[1]=Et,xt):[Dt+Ot,Et]},xi=function(st,_t){var xt=st.length;if(xt===1){var Et=ls(st[0],_t);return Et[0]?Et:[Et[1]]}var At=new Array(2*xt),Ot=[.1,.1],Dt=[.1,.1],Ft=0;ls(st[0],_t,Ot),Ot[0]&&(At[Ft++]=Ot[0]);for(var jt=1;jt<xt;++jt){ls(st[jt],_t,Dt);var Gt=Ot[1];Vr(Gt,Dt[0],Ot),Ot[0]&&(At[Ft++]=Ot[0]);var Jt=Dt[1],qt=Ot[1],on=Jt+qt,vn=qt-(on-Jt);Ot[1]=on,vn&&(At[Ft++]=vn)}return Ot[1]&&(At[Ft++]=Ot[1]),Ft===0&&(At[Ft++]=0),At.length=Ft,At},ui=function(st,_t){var xt=0|st.length,Et=0|_t.length;if(xt===1&&Et===1)return function(qn,Gn){var Xr=qn+Gn,Br=Xr-qn,Jr=qn-(Xr-Br)+(Gn-Br);return Jr?[Jr,Xr]:[Xr]}(st[0],-_t[0]);var At,Ot,Dt=new Array(xt+Et),Ft=0,jt=0,Gt=0,Jt=Math.abs,qt=st[jt],on=Jt(qt),vn=-_t[Gt],_n=Jt(vn);on<_n?(Ot=qt,(jt+=1)<xt&&(qt=st[jt],on=Jt(qt))):(Ot=vn,(Gt+=1)<Et&&(vn=-_t[Gt],_n=Jt(vn))),jt<xt&&on<_n||Gt>=Et?(At=qt,(jt+=1)<xt&&(qt=st[jt],on=Jt(qt))):(At=vn,(Gt+=1)<Et&&(vn=-_t[Gt],_n=Jt(vn)));for(var En,cn,Hn=At+Ot,nr=Hn-At,bn=Ot-nr,zn=bn,Un=Hn;jt<xt&&Gt<Et;)on<_n?(At=qt,(jt+=1)<xt&&(qt=st[jt],on=Jt(qt))):(At=vn,(Gt+=1)<Et&&(vn=-_t[Gt],_n=Jt(vn))),(bn=(Ot=zn)-(nr=(Hn=At+Ot)-At))&&(Dt[Ft++]=bn),zn=Un-((En=Un+Hn)-(cn=En-Un))+(Hn-cn),Un=En;for(;jt<xt;)(bn=(Ot=zn)-(nr=(Hn=(At=qt)+Ot)-At))&&(Dt[Ft++]=bn),zn=Un-((En=Un+Hn)-(cn=En-Un))+(Hn-cn),Un=En,(jt+=1)<xt&&(qt=st[jt]);for(;Gt<Et;)(bn=(Ot=zn)-(nr=(Hn=(At=vn)+Ot)-At))&&(Dt[Ft++]=bn),zn=Un-((En=Un+Hn)-(cn=En-Un))+(Hn-cn),Un=En,(Gt+=1)<Et&&(vn=-_t[Gt]);return zn&&(Dt[Ft++]=zn),Un&&(Dt[Ft++]=Un),Ft||(Dt[Ft++]=0),Dt.length=Ft,Dt},xr=jo(function(st){function _t(Gt,Jt){for(var qt=new Array(Gt.length-1),on=1;on<Gt.length;++on)for(var vn=qt[on-1]=new Array(Gt.length-1),_n=0,En=0;_n<Gt.length;++_n)_n!==Jt&&(vn[En++]=Gt[on][_n]);return qt}function xt(Gt){if(Gt.length===1)return Gt[0];if(Gt.length===2)return["sum(",Gt[0],",",Gt[1],")"].join("");var Jt=Gt.length>>1;return["sum(",xt(Gt.slice(0,Jt)),",",xt(Gt.slice(Jt)),")"].join("")}function Et(Gt){if(Gt.length===2)return[["sum(prod(",Gt[0][0],",",Gt[1][1],"),prod(-",Gt[0][1],",",Gt[1][0],"))"].join("")];for(var Jt=[],qt=0;qt<Gt.length;++qt)Jt.push(["scale(",xt(Et(_t(Gt,qt))),",",(on=qt,1&on?"-":""),Gt[0][qt],")"].join(""));return Jt;var on}function At(Gt){for(var Jt=[],qt=[],on=function(bn){for(var zn=new Array(bn),Un=0;Un<bn;++Un){zn[Un]=new Array(bn);for(var qn=0;qn<bn;++qn)zn[Un][qn]=["m",qn,"[",bn-Un-1,"]"].join("")}return zn}(Gt),vn=[],_n=0;_n<Gt;++_n)(1&_n)==0?Jt.push.apply(Jt,Et(_t(on,_n))):qt.push.apply(qt,Et(_t(on,_n))),vn.push("m"+_n);var En=xt(Jt),cn=xt(qt),Hn="orientation"+Gt+"Exact",nr=["function ",Hn,"(",vn.join(),"){var p=",En,",n=",cn,",d=sub(p,n);return d[d.length-1];};return ",Hn].join("");return new Function("sum","prod","scale","sub",nr)(Yr,ls,xi,ui)}var Ot=At(3),Dt=At(4),Ft=[function(){return 0},function(){return 0},function(Gt,Jt){return Jt[0]-Gt[0]},function(Gt,Jt,qt){var on,vn=(Gt[1]-qt[1])*(Jt[0]-qt[0]),_n=(Gt[0]-qt[0])*(Jt[1]-qt[1]),En=vn-_n;if(vn>0){if(_n<=0)return En;on=vn+_n}else{if(!(vn<0)||_n>=0)return En;on=-(vn+_n)}var cn=33306690738754716e-32*on;return En>=cn||En<=-cn?En:Ot(Gt,Jt,qt)},function(Gt,Jt,qt,on){var vn=Gt[0]-on[0],_n=Jt[0]-on[0],En=qt[0]-on[0],cn=Gt[1]-on[1],Hn=Jt[1]-on[1],nr=qt[1]-on[1],bn=Gt[2]-on[2],zn=Jt[2]-on[2],Un=qt[2]-on[2],qn=_n*nr,Gn=En*Hn,Xr=En*cn,Br=vn*nr,Jr=vn*Hn,Fr=_n*cn,oi=bn*(qn-Gn)+zn*(Xr-Br)+Un*(Jr-Fr),Wr=7771561172376103e-31*((Math.abs(qn)+Math.abs(Gn))*Math.abs(bn)+(Math.abs(Xr)+Math.abs(Br))*Math.abs(zn)+(Math.abs(Jr)+Math.abs(Fr))*Math.abs(Un));return oi>Wr||-oi>Wr?oi:Dt(Gt,Jt,qt,on)}];function jt(Gt){var Jt=Ft[Gt.length];return Jt||(Jt=Ft[Gt.length]=At(Gt.length)),Jt.apply(void 0,Gt)}(function(){for(;Ft.length<=5;)Ft.push(At(Ft.length));for(var Gt=[],Jt=["slow"],qt=0;qt<=5;++qt)Gt.push("a"+qt),Jt.push("o"+qt);var on=["function getOrientation(",Gt.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(qt=2;qt<=5;++qt)on.push("case ",qt,":return o",qt,"(",Gt.slice(0,qt).join(),");");on.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),Jt.push(on.join(""));var vn=Function.apply(void 0,Jt);for(st.exports=vn.apply(void 0,[jt].concat(Ft)),qt=0;qt<=5;++qt)st.exports[qt]=Ft[qt]})()}),li=function(st){var _t=st.length;if(_t<3){for(var xt=new Array(_t),Et=0;Et<_t;++Et)xt[Et]=Et;return _t===2&&st[0][0]===st[1][0]&&st[0][1]===st[1][1]?[0]:xt}var At=new Array(_t);for(Et=0;Et<_t;++Et)At[Et]=Et;At.sort(function(vn,_n){var En=st[vn][0]-st[_n][0];return En||st[vn][1]-st[_n][1]});var Ot=[At[0],At[1]],Dt=[At[0],At[1]];for(Et=2;Et<_t;++Et){for(var Ft=At[Et],jt=st[Ft],Gt=Ot.length;Gt>1&&yi(st[Ot[Gt-2]],st[Ot[Gt-1]],jt)<=0;)Gt-=1,Ot.pop();for(Ot.push(Ft),Gt=Dt.length;Gt>1&&yi(st[Dt[Gt-2]],st[Dt[Gt-1]],jt)>=0;)Gt-=1,Dt.pop();Dt.push(Ft)}xt=new Array(Dt.length+Ot.length-2);for(var Jt=0,qt=(Et=0,Ot.length);Et<qt;++Et)xt[Jt++]=Ot[Et];for(var on=Dt.length-2;on>0;--on)xt[Jt++]=Dt[on];return xt},yi=xr[3],uo=Co,ss=Co;function Co(st,_t){if(!(this instanceof Co))return new Co(st,_t);if(this.data=st||[],this.length=this.data.length,this.compare=_t||Mo,this.length>0)for(var xt=(this.length>>1)-1;xt>=0;xt--)this._down(xt)}function Mo(st,_t){return st<_t?-1:st>_t?1:0}Co.prototype={push:function(st){this.data.push(st),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var st=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),st}},peek:function(){return this.data[0]},_up:function(st){for(var _t=this.data,xt=this.compare,Et=_t[st];st>0;){var At=st-1>>1,Ot=_t[At];if(xt(Et,Ot)>=0)break;_t[st]=Ot,st=At}_t[st]=Et},_down:function(st){for(var _t=this.data,xt=this.compare,Et=this.length>>1,At=_t[st];st<Et;){var Ot=1+(st<<1),Dt=Ot+1,Ft=_t[Ot];if(Dt<this.length&&xt(_t[Dt],Ft)<0&&(Ot=Dt,Ft=_t[Dt]),xt(Ft,At)>=0)break;_t[st]=Ft,st=Ot}_t[st]=At}},uo.default=ss;var ho=function(st,_t){for(var xt=st[0],Et=st[1],At=!1,Ot=0,Dt=_t.length-1;Ot<_t.length;Dt=Ot++){var Ft=_t[Ot][0],jt=_t[Ot][1],Gt=_t[Dt][0],Jt=_t[Dt][1];jt>Et!=Jt>Et&&xt<(Gt-Ft)*(Et-jt)/(Jt-jt)+Ft&&(At=!At)}return At},as=xr[3],pl=Ea,vu=Ea;function Ea(st,_t,xt){_t=Math.max(0,_t===void 0?2:_t),xt=xt||0;for(var Et,At=function(nr){for(var bn=nr[0],zn=nr[0],Un=nr[0],qn=nr[0],Gn=0;Gn<nr.length;Gn++){var Xr=nr[Gn];Xr[0]<bn[0]&&(bn=Xr),Xr[0]>Un[0]&&(Un=Xr),Xr[1]<zn[1]&&(zn=Xr),Xr[1]>qn[1]&&(qn=Xr)}var Br=[bn,zn,Un,qn],Jr=Br.slice();for(Gn=0;Gn<nr.length;Gn++)ho(nr[Gn],Br)||Jr.push(nr[Gn]);var Fr=li(Jr),oi=[];for(Gn=0;Gn<Fr.length;Gn++)oi.push(Jr[Fr[Gn]]);return oi}(st),Ot=Ir(16,["[0]","[1]","[0]","[1]"]).load(st),Dt=[],Ft=0;Ft<At.length;Ft++){var jt=At[Ft];Ot.remove(jt),Et=Ml(jt,Et),Dt.push(Et)}var Gt=Ir(16);for(Ft=0;Ft<Dt.length;Ft++)Gt.insert(Sr(Dt[Ft]));for(var Jt=_t*_t,qt=xt*xt;Dt.length;){var on=Dt.shift(),vn=on.p,_n=on.next.p,En=Nr(vn,_n);if(!(En<qt)){var cn=En/Jt;(jt=ji(Ot,on.prev.p,vn,_n,on.next.next.p,cn,Gt))&&Math.min(Nr(jt,vn),Nr(jt,_n))<=cn&&(Dt.push(on),Dt.push(Ml(jt,on)),Ot.remove(jt),Gt.remove(on),Gt.insert(Sr(on)),Gt.insert(Sr(on.next)))}}on=Et;var Hn=[];do Hn.push(on.p),on=on.next;while(on!==Et);return Hn.push(on.p),Hn}function ji(st,_t,xt,Et,At,Ot,Dt){for(var Ft=new uo(null,ao),jt=st.data;jt;){for(var Gt=0;Gt<jt.children.length;Gt++){var Jt=jt.children[Gt],qt=jt.leaf?na(Jt,xt,Et):mo(xt,Et,Jt);qt>Ot||Ft.push({node:Jt,dist:qt})}for(;Ft.length&&!Ft.peek().node.children;){var on=Ft.pop(),vn=on.node,_n=na(vn,_t,xt),En=na(vn,Et,At);if(on.dist<_n&&on.dist<En&&so(xt,vn,Dt)&&so(Et,vn,Dt))return vn}(jt=Ft.pop())&&(jt=jt.node)}return null}function ao(st,_t){return st.dist-_t.dist}function mo(st,_t,xt){if(Oi(st,xt)||Oi(_t,xt))return 0;var Et=_u(st[0],st[1],_t[0],_t[1],xt.minX,xt.minY,xt.maxX,xt.minY);if(Et===0)return 0;var At=_u(st[0],st[1],_t[0],_t[1],xt.minX,xt.minY,xt.minX,xt.maxY);if(At===0)return 0;var Ot=_u(st[0],st[1],_t[0],_t[1],xt.maxX,xt.minY,xt.maxX,xt.maxY);if(Ot===0)return 0;var Dt=_u(st[0],st[1],_t[0],_t[1],xt.minX,xt.maxY,xt.maxX,xt.maxY);return Dt===0?0:Math.min(Et,At,Ot,Dt)}function Oi(st,_t){return st[0]>=_t.minX&&st[0]<=_t.maxX&&st[1]>=_t.minY&&st[1]<=_t.maxY}function so(st,_t,xt){for(var Et,At,Ot,Dt,Ft=Math.min(st[0],_t[0]),jt=Math.min(st[1],_t[1]),Gt=Math.max(st[0],_t[0]),Jt=Math.max(st[1],_t[1]),qt=xt.search({minX:Ft,minY:jt,maxX:Gt,maxY:Jt}),on=0;on<qt.length;on++)if(Et=qt[on].p,At=qt[on].next.p,Ot=st,Et!==(Dt=_t)&&At!==Ot&&as(Et,At,Ot)>0!=as(Et,At,Dt)>0&&as(Ot,Dt,Et)>0!=as(Ot,Dt,At)>0)return!1;return!0}function Sr(st){var _t=st.p,xt=st.next.p;return st.minX=Math.min(_t[0],xt[0]),st.minY=Math.min(_t[1],xt[1]),st.maxX=Math.max(_t[0],xt[0]),st.maxY=Math.max(_t[1],xt[1]),st}function Ml(st,_t){var xt={p:st,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return _t?(xt.next=_t.next,xt.prev=_t,_t.next.prev=xt,_t.next=xt):(xt.prev=xt,xt.next=xt),xt}function Nr(st,_t){var xt=st[0]-_t[0],Et=st[1]-_t[1];return xt*xt+Et*Et}function na(st,_t,xt){var Et=_t[0],At=_t[1],Ot=xt[0]-Et,Dt=xt[1]-At;if(Ot!==0||Dt!==0){var Ft=((st[0]-Et)*Ot+(st[1]-At)*Dt)/(Ot*Ot+Dt*Dt);Ft>1?(Et=xt[0],At=xt[1]):Ft>0&&(Et+=Ot*Ft,At+=Dt*Ft)}return(Ot=st[0]-Et)*Ot+(Dt=st[1]-At)*Dt}function _u(st,_t,xt,Et,At,Ot,Dt,Ft){var jt,Gt,Jt,qt,on=xt-st,vn=Et-_t,_n=Dt-At,En=Ft-Ot,cn=st-At,Hn=_t-Ot,nr=on*on+vn*vn,bn=on*_n+vn*En,zn=_n*_n+En*En,Un=on*cn+vn*Hn,qn=_n*cn+En*Hn,Gn=nr*zn-bn*bn,Xr=Gn,Br=Gn;Gn===0?(Gt=0,Xr=1,qt=qn,Br=zn):(qt=nr*qn-bn*Un,(Gt=bn*qn-zn*Un)<0?(Gt=0,qt=qn,Br=zn):Gt>Xr&&(Gt=Xr,qt=qn+bn,Br=zn)),qt<0?(qt=0,-Un<0?Gt=0:-Un>nr?Gt=Xr:(Gt=-Un,Xr=nr)):qt>Br&&(qt=Br,-Un+bn<0?Gt=0:-Un+bn>nr?Gt=Xr:(Gt=-Un+bn,Xr=nr));var Jr=(1-(Jt=qt===0?0:qt/Br))*At+Jt*Dt-((1-(jt=Gt===0?0:Gt/Xr))*st+jt*xt),Fr=(1-Jt)*Ot+Jt*Ft-((1-jt)*_t+jt*Et);return Jr*Jr+Fr*Fr}function Bo(st,_t){_t===void 0&&(_t={}),_t.concavity=_t.concavity||1/0;var xt=[];if(yn(st,function(At){xt.push([At[0],At[1]])}),!xt.length)return null;var Et=pl(xt,_t.concavity);return Et.length>3?Mt([Et]):null}function yo(st,_t,xt){if(xt===void 0&&(xt={}),!st)throw new Error("point is required");if(!_t)throw new Error("polygon is required");var Et=un(st),At=Wn(_t),Ot=At.type,Dt=_t.bbox,Ft=At.coordinates;if(Dt&&function(on,vn){return vn[0]<=on[0]&&vn[1]<=on[1]&&vn[2]>=on[0]&&vn[3]>=on[1]}(Et,Dt)===!1)return!1;Ot==="Polygon"&&(Ft=[Ft]);for(var jt=!1,Gt=0;Gt<Ft.length&&!jt;Gt++)if(Cc(Et,Ft[Gt][0],xt.ignoreBoundary)){for(var Jt=!1,qt=1;qt<Ft[Gt].length&&!Jt;)Cc(Et,Ft[Gt][qt],!xt.ignoreBoundary)&&(Jt=!0),qt++;Jt||(jt=!0)}return jt}function Cc(st,_t,xt){var Et=!1;_t[0][0]===_t[_t.length-1][0]&&_t[0][1]===_t[_t.length-1][1]&&(_t=_t.slice(0,_t.length-1));for(var At=0,Ot=_t.length-1;At<_t.length;Ot=At++){var Dt=_t[At][0],Ft=_t[At][1],jt=_t[Ot][0],Gt=_t[Ot][1];if(st[1]*(Dt-jt)+Ft*(jt-st[0])+Gt*(st[0]-Dt)==0&&(Dt-st[0])*(jt-st[0])<=0&&(Ft-st[1])*(Gt-st[1])<=0)return!xt;Ft>st[1]!=Gt>st[1]&&st[0]<(jt-Dt)*(st[1]-Ft)/(Gt-Ft)+Dt&&(Et=!Et)}return Et}function zi(st,_t){var xt=[];return rr(st,function(Et){var At=!1;if(Et.geometry.type==="Point")gr(_t,function(Dt){yo(Et,Dt)&&(At=!0)}),At&&xt.push(Et);else{if(Et.geometry.type!=="MultiPoint")throw new Error("Input geometry must be a Point or MultiPoint");var Ot=[];gr(_t,function(Dt){yn(Et,function(Ft){yo(Ft,Dt)&&(At=!0,Ot.push(Ft))})}),At&&xt.push(tn(Ot))}}),Wt(xt)}function vo(st,_t,xt){xt===void 0&&(xt={});var Et=un(st),At=un(_t),Ot=An(At[1]-Et[1]),Dt=An(At[0]-Et[0]),Ft=An(Et[1]),jt=An(At[1]),Gt=Math.pow(Math.sin(Ot/2),2)+Math.pow(Math.sin(Dt/2),2)*Math.cos(Ft)*Math.cos(jt);return ln(2*Math.atan2(Math.sqrt(Gt),Math.sqrt(1-Gt)),xt.units)}function qa(st,_t){var xt=!1;return Wt(function(Et){if(Et.length<3)return[];Et.sort(Rl);for(var At,Ot,Dt,Ft,jt,Gt,Jt=Et.length-1,qt=Et[Jt].x,on=Et[0].x,vn=Et[Jt].y,_n=vn,En=1e-12;Jt--;)Et[Jt].y<vn&&(vn=Et[Jt].y),Et[Jt].y>_n&&(_n=Et[Jt].y);var cn,Hn=on-qt,nr=_n-vn,bn=Hn>nr?Hn:nr,zn=.5*(on+qt),Un=.5*(_n+vn),qn=[new ru({__sentinel:!0,x:zn-20*bn,y:Un-bn},{__sentinel:!0,x:zn,y:Un+20*bn},{__sentinel:!0,x:zn+20*bn,y:Un-bn})],Gn=[],Xr=[];for(Jt=Et.length;Jt--;){for(Xr.length=0,cn=qn.length;cn--;)(Hn=Et[Jt].x-qn[cn].x)>0&&Hn*Hn>qn[cn].r?(Gn.push(qn[cn]),qn.splice(cn,1)):Hn*Hn+(nr=Et[Jt].y-qn[cn].y)*nr>qn[cn].r||(Xr.push(qn[cn].a,qn[cn].b,qn[cn].b,qn[cn].c,qn[cn].c,qn[cn].a),qn.splice(cn,1));for(Js(Xr),cn=Xr.length;cn;)Ot=Xr[--cn],At=Xr[--cn],Dt=Et[Jt],Ft=Ot.x-At.x,jt=Ot.y-At.y,Gt=2*(Ft*(Dt.y-Ot.y)-jt*(Dt.x-Ot.x)),Math.abs(Gt)>En&&qn.push(new ru(At,Ot,Dt))}for(Array.prototype.push.apply(Gn,qn),Jt=Gn.length;Jt--;)(Gn[Jt].a.__sentinel||Gn[Jt].b.__sentinel||Gn[Jt].c.__sentinel)&&Gn.splice(Jt,1);return Gn}(st.features.map(function(Et){var At={x:Et.geometry.coordinates[0],y:Et.geometry.coordinates[1]};return _t?At.z=Et.properties[_t]:Et.geometry.coordinates.length===3&&(xt=!0,At.z=Et.geometry.coordinates[2]),At})).map(function(Et){var At=[Et.a.x,Et.a.y],Ot=[Et.b.x,Et.b.y],Dt=[Et.c.x,Et.c.y],Ft={};return xt?(At.push(Et.a.z),Ot.push(Et.b.z),Dt.push(Et.c.z)):Ft={a:Et.a.z,b:Et.b.z,c:Et.c.z},Mt([[At,Ot,Dt,At]],Ft)}))}pl.default=vu;var ru=function(st,_t,xt){this.a=st,this.b=_t,this.c=xt;var Et,At,Ot=_t.x-st.x,Dt=_t.y-st.y,Ft=xt.x-st.x,jt=xt.y-st.y,Gt=Ot*(st.x+_t.x)+Dt*(st.y+_t.y),Jt=Ft*(st.x+xt.x)+jt*(st.y+xt.y),qt=2*(Ot*(xt.y-_t.y)-Dt*(xt.x-_t.x));this.x=(jt*Gt-Dt*Jt)/qt,this.y=(Ot*Jt-Ft*Gt)/qt,Et=this.x-st.x,At=this.y-st.y,this.r=Et*Et+At*At};function Rl(st,_t){return _t.x-st.x}function Js(st){var _t,xt,Et,At,Ot,Dt=st.length;e:for(;Dt;)for(xt=st[--Dt],_t=st[--Dt],Et=Dt;Et;)if(Ot=st[--Et],_t===(At=st[--Et])&&xt===Ot||_t===Ot&&xt===At){st.splice(Dt,2),st.splice(Et,2),Dt-=2;continue e}}function Vo(st){if(!st)throw new Error("geojson is required");switch(st.type){case"Feature":return Wo(st);case"FeatureCollection":return function(_t){var xt={type:"FeatureCollection"};return Object.keys(_t).forEach(function(Et){switch(Et){case"type":case"features":return;default:xt[Et]=_t[Et]}}),xt.features=_t.features.map(function(Et){return Wo(Et)}),xt}(st);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Sl(st);default:throw new Error("unknown GeoJSON type")}}function Wo(st){var _t={type:"Feature"};return Object.keys(st).forEach(function(xt){switch(xt){case"type":case"properties":case"geometry":return;default:_t[xt]=st[xt]}}),_t.properties=oa(st.properties),_t.geometry=Sl(st.geometry),_t}function oa(st){var _t={};return st&&Object.keys(st).forEach(function(xt){var Et=st[xt];typeof Et=="object"?Et===null?_t[xt]=null:Array.isArray(Et)?_t[xt]=Et.map(function(At){return At}):_t[xt]=oa(Et):_t[xt]=Et}),_t}function Sl(st){var _t={type:st.type};return st.bbox&&(_t.bbox=st.bbox),st.type==="GeometryCollection"?(_t.geometries=st.geometries.map(function(xt){return Sl(xt)}),_t):(_t.coordinates=pa(st.coordinates),_t)}function pa(st){var _t=st;return typeof _t[0]!="object"?_t.slice():_t.map(function(xt){return pa(xt)})}function gl(st,_t){if(_t===void 0&&(_t={}),!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.mutate;if(or(st)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!st.features.length)throw new Error("geojson is empty");xt!==!1&&xt!==void 0||(st=Vo(st));var Et=[],At=wr(st,function(Ot,Dt){var Ft=function(jt,Gt){var Jt,qt=jt.geometry.coordinates,on=Gt.geometry.coordinates,vn=Ha(qt[0]),_n=Ha(qt[qt.length-1]),En=Ha(on[0]),cn=Ha(on[on.length-1]);if(vn===cn)Jt=on.concat(qt.slice(1));else if(En===_n)Jt=qt.concat(on.slice(1));else if(vn===En)Jt=qt.slice(1).reverse().concat(on);else{if(_n!==cn)return null;Jt=qt.concat(on.reverse().slice(1))}return zt(Jt)}(Ot,Dt);return Ft||(Et.push(Ot),Dt)});return At&&Et.push(At),Et.length?Et.length===1?Et[0]:Zt(Et.map(function(Ot){return Ot.coordinates})):null}function Ha(st){return st[0].toString()+","+st[1].toString()}function ic(st){return st}function Ru(st,_t){var xt=function(Gt){if(Gt==null)return ic;var Jt,qt,on=Gt.scale[0],vn=Gt.scale[1],_n=Gt.translate[0],En=Gt.translate[1];return function(cn,Hn){Hn||(Jt=qt=0);var nr=2,bn=cn.length,zn=new Array(bn);for(zn[0]=(Jt+=cn[0])*on+_n,zn[1]=(qt+=cn[1])*vn+En;nr<bn;)zn[nr]=cn[nr],++nr;return zn}}(st.transform),Et=st.arcs;function At(Gt,Jt){Jt.length&&Jt.pop();for(var qt=Et[Gt<0?~Gt:Gt],on=0,vn=qt.length;on<vn;++on)Jt.push(xt(qt[on],on));Gt<0&&function(_n,En){for(var cn,Hn=_n.length,nr=Hn-En;nr<--Hn;)cn=_n[nr],_n[nr++]=_n[Hn],_n[Hn]=cn}(Jt,vn)}function Ot(Gt){return xt(Gt)}function Dt(Gt){for(var Jt=[],qt=0,on=Gt.length;qt<on;++qt)At(Gt[qt],Jt);return Jt.length<2&&Jt.push(Jt[0]),Jt}function Ft(Gt){for(var Jt=Dt(Gt);Jt.length<4;)Jt.push(Jt[0]);return Jt}function jt(Gt){return Gt.map(Ft)}return function Gt(Jt){var qt,on=Jt.type;switch(on){case"GeometryCollection":return{type:on,geometries:Jt.geometries.map(Gt)};case"Point":qt=Ot(Jt.coordinates);break;case"MultiPoint":qt=Jt.coordinates.map(Ot);break;case"LineString":qt=Dt(Jt.arcs);break;case"MultiLineString":qt=Jt.arcs.map(Dt);break;case"Polygon":qt=jt(Jt.arcs);break;case"MultiPolygon":qt=Jt.arcs.map(jt);break;default:return null}return{type:on,coordinates:qt}}(_t)}function bu(st,_t){var xt={},Et={},At={},Ot=[],Dt=-1;function Ft(jt,Gt){for(var Jt in jt){var qt=jt[Jt];delete Gt[qt.start],delete qt.start,delete qt.end,qt.forEach(function(on){xt[on<0?~on:on]=1}),Ot.push(qt)}}return _t.forEach(function(jt,Gt){var Jt,qt=st.arcs[jt<0?~jt:jt];qt.length<3&&!qt[1][0]&&!qt[1][1]&&(Jt=_t[++Dt],_t[Dt]=jt,_t[Gt]=Jt)}),_t.forEach(function(jt){var Gt,Jt,qt=function(cn){var Hn,nr=st.arcs[cn<0?~cn:cn],bn=nr[0];return st.transform?(Hn=[0,0],nr.forEach(function(zn){Hn[0]+=zn[0],Hn[1]+=zn[1]})):Hn=nr[nr.length-1],cn<0?[Hn,bn]:[bn,Hn]}(jt),on=qt[0],vn=qt[1];if(Gt=At[on])if(delete At[Gt.end],Gt.push(jt),Gt.end=vn,Jt=Et[vn]){delete Et[Jt.start];var _n=Jt===Gt?Gt:Gt.concat(Jt);Et[_n.start=Gt.start]=At[_n.end=Jt.end]=_n}else Et[Gt.start]=At[Gt.end]=Gt;else if(Gt=Et[vn])if(delete Et[Gt.start],Gt.unshift(jt),Gt.start=on,Jt=At[on]){delete At[Jt.end];var En=Jt===Gt?Gt:Jt.concat(Gt);Et[En.start=Jt.start]=At[En.end=Gt.end]=En}else Et[Gt.start]=At[Gt.end]=Gt;else Et[(Gt=[jt]).start=on]=At[Gt.end=vn]=Gt}),Ft(At,Et),Ft(Et,At),_t.forEach(function(jt){xt[jt<0?~jt:jt]||Ot.push([jt])}),Ot}function Xa(st,_t){var xt={},Et=[],At=[];function Ot(Ft){Ft.forEach(function(jt){jt.forEach(function(Gt){(xt[Gt=Gt<0?~Gt:Gt]||(xt[Gt]=[])).push(Ft)})}),Et.push(Ft)}function Dt(Ft){return function(jt){for(var Gt,Jt=-1,qt=jt.length,on=jt[qt-1],vn=0;++Jt<qt;)Gt=on,on=jt[Jt],vn+=Gt[0]*on[1]-Gt[1]*on[0];return Math.abs(vn)}(Ru(st,{type:"Polygon",arcs:[Ft]}).coordinates[0])}return _t.forEach(function Ft(jt){switch(jt.type){case"GeometryCollection":jt.geometries.forEach(Ft);break;case"Polygon":Ot(jt.arcs);break;case"MultiPolygon":jt.arcs.forEach(Ot)}}),Et.forEach(function(Ft){if(!Ft._){var jt=[],Gt=[Ft];for(Ft._=1,At.push(jt);Ft=Gt.pop();)jt.push(Ft),Ft.forEach(function(Jt){Jt.forEach(function(qt){xt[qt<0?~qt:qt].forEach(function(on){on._||(on._=1,Gt.push(on))})})})}}),Et.forEach(function(Ft){delete Ft._}),{type:"MultiPolygon",arcs:At.map(function(Ft){var jt,Gt=[];if(Ft.forEach(function(_n){_n.forEach(function(En){En.forEach(function(cn){xt[cn<0?~cn:cn].length<2&&Gt.push(cn)})})}),(jt=(Gt=bu(st,Gt)).length)>1)for(var Jt,qt,on=1,vn=Dt(Gt[0]);on<jt;++on)(Jt=Dt(Gt[on]))>vn&&(qt=Gt[0],Gt[0]=Gt[on],Gt[on]=qt,vn=Jt);return Gt}).filter(function(Ft){return Ft.length>0})}}var Tc=Object.prototype.hasOwnProperty;function kc(st,_t,xt,Et,At,Ot){arguments.length===3&&(Et=Ot=Array,At=null);for(var Dt=new Et(st=1<<Math.max(4,Math.ceil(Math.log(st)/Math.LN2))),Ft=new Ot(st),jt=st-1,Gt=0;Gt<st;++Gt)Dt[Gt]=At;function Jt(_n,En){for(var cn=_t(_n)&jt,Hn=Dt[cn],nr=0;Hn!=At;){if(xt(Hn,_n))return Ft[cn]=En;if(++nr>=st)throw new Error("full hashmap");Hn=Dt[cn=cn+1&jt]}return Dt[cn]=_n,Ft[cn]=En,En}function qt(_n,En){for(var cn=_t(_n)&jt,Hn=Dt[cn],nr=0;Hn!=At;){if(xt(Hn,_n))return Ft[cn];if(++nr>=st)throw new Error("full hashmap");Hn=Dt[cn=cn+1&jt]}return Dt[cn]=_n,Ft[cn]=En,En}function on(_n,En){for(var cn=_t(_n)&jt,Hn=Dt[cn],nr=0;Hn!=At;){if(xt(Hn,_n))return Ft[cn];if(++nr>=st)break;Hn=Dt[cn=cn+1&jt]}return En}function vn(){for(var _n=[],En=0,cn=Dt.length;En<cn;++En){var Hn=Dt[En];Hn!=At&&_n.push(Hn)}return _n}return{set:Jt,maybeSet:qt,get:on,keys:vn}}function Ac(st,_t){return st[0]===_t[0]&&st[1]===_t[1]}var Fo=new ArrayBuffer(16),ga=new Float64Array(Fo),co=new Uint32Array(Fo);function Cl(st){ga[0]=st[0],ga[1]=st[1];var _t=co[0]^co[1];return 2147483647&(_t=_t<<5^_t>>7^co[2]^co[3])}function Kh(st){var _t,xt,Et,At,Ot=st.coordinates,Dt=st.lines,Ft=st.rings,jt=function(){for(var Br=kc(1.4*Ot.length,Un,qn,Int32Array,-1,Int32Array),Jr=new Int32Array(Ot.length),Fr=0,oi=Ot.length;Fr<oi;++Fr)Jr[Fr]=Br.maybeSet(Fr,Fr);return Jr}(),Gt=new Int32Array(Ot.length),Jt=new Int32Array(Ot.length),qt=new Int32Array(Ot.length),on=new Int8Array(Ot.length),vn=0;for(_t=0,xt=Ot.length;_t<xt;++_t)Gt[_t]=Jt[_t]=qt[_t]=-1;for(_t=0,xt=Dt.length;_t<xt;++_t){var _n=Dt[_t],En=_n[0],cn=_n[1];for(Et=jt[En],At=jt[++En],++vn,on[Et]=1;++En<=cn;)zn(_t,Et,Et=At,At=jt[En]);++vn,on[At]=1}for(_t=0,xt=Ot.length;_t<xt;++_t)Gt[_t]=-1;for(_t=0,xt=Ft.length;_t<xt;++_t){var Hn=Ft[_t],nr=Hn[0]+1,bn=Hn[1];for(zn(_t,jt[bn-1],Et=jt[nr-1],At=jt[nr]);++nr<=bn;)zn(_t,Et,Et=At,At=jt[nr])}function zn(Br,Jr,Fr,oi){if(Gt[Fr]!==Br){Gt[Fr]=Br;var Wr=Jt[Fr];if(Wr>=0){var jr=qt[Fr];Wr===Jr&&jr===oi||Wr===oi&&jr===Jr||(++vn,on[Fr]=1)}else Jt[Fr]=Jr,qt[Fr]=oi}}function Un(Br){return Cl(Ot[Br])}function qn(Br,Jr){return Ac(Ot[Br],Ot[Jr])}Gt=Jt=qt=null;var Gn,Xr=function(Br,Jr,Fr,oi,Wr){arguments.length===3&&(oi=Array,Wr=null);for(var jr=new oi(Br=1<<Math.max(4,Math.ceil(Math.log(Br)/Math.LN2))),Hr=Br-1,ei=0;ei<Br;++ei)jr[ei]=Wr;function Gr(Ki){for(var Ci=Jr(Ki)&Hr,$o=jr[Ci],Yi=0;$o!=Wr;){if(Fr($o,Ki))return!0;if(++Yi>=Br)throw new Error("full hashset");$o=jr[Ci=Ci+1&Hr]}return jr[Ci]=Ki,!0}function si(Ki){for(var Ci=Jr(Ki)&Hr,$o=jr[Ci],Yi=0;$o!=Wr;){if(Fr($o,Ki))return!0;if(++Yi>=Br)break;$o=jr[Ci=Ci+1&Hr]}return!1}function Tr(){for(var Ki=[],Ci=0,$o=jr.length;Ci<$o;++Ci){var Yi=jr[Ci];Yi!=Wr&&Ki.push(Yi)}return Ki}return{add:Gr,has:si,values:Tr}}(1.4*vn,Cl,Ac);for(_t=0,xt=Ot.length;_t<xt;++_t)on[Gn=jt[_t]]&&Xr.add(Ot[Gn]);return Xr}function Jh(st,_t,xt,Et){Kc(st,_t,xt),Kc(st,_t,_t+Et),Kc(st,_t+Et,xt)}function Kc(st,_t,xt){for(var Et,At=_t+(xt---_t>>1);_t<At;++_t,--xt)Et=st[_t],st[_t]=st[xt],st[xt]=Et}function Pc(st){var _t,xt,Et={};for(_t in st)Et[_t]=(xt=st[_t])==null?{type:null}:(xt.type==="FeatureCollection"?Jc:xt.type==="Feature"?Dl:ua)(xt);return Et}function Jc(st){var _t={type:"GeometryCollection",geometries:st.features.map(Dl)};return st.bbox!=null&&(_t.bbox=st.bbox),_t}function Dl(st){var _t,xt=ua(st.geometry);for(_t in st.id!=null&&(xt.id=st.id),st.bbox!=null&&(xt.bbox=st.bbox),st.properties){xt.properties=st.properties;break}return xt}function ua(st){if(st==null)return{type:null};var _t=st.type==="GeometryCollection"?{type:"GeometryCollection",geometries:st.geometries.map(ua)}:st.type==="Point"||st.type==="MultiPoint"?{type:st.type,coordinates:st.coordinates}:{type:st.type,arcs:st.coordinates};return st.bbox!=null&&(_t.bbox=st.bbox),_t}function Du(st,_t){var xt=function(on){var vn=1/0,_n=1/0,En=-1/0,cn=-1/0;function Hn(Gn){Gn!=null&&Tc.call(nr,Gn.type)&&nr[Gn.type](Gn)}var nr={GeometryCollection:function(Gn){Gn.geometries.forEach(Hn)},Point:function(Gn){bn(Gn.coordinates)},MultiPoint:function(Gn){Gn.coordinates.forEach(bn)},LineString:function(Gn){zn(Gn.arcs)},MultiLineString:function(Gn){Gn.arcs.forEach(zn)},Polygon:function(Gn){Gn.arcs.forEach(zn)},MultiPolygon:function(Gn){Gn.arcs.forEach(Un)}};function bn(Gn){var Xr=Gn[0],Br=Gn[1];Xr<vn&&(vn=Xr),Xr>En&&(En=Xr),Br<_n&&(_n=Br),Br>cn&&(cn=Br)}function zn(Gn){Gn.forEach(bn)}function Un(Gn){Gn.forEach(zn)}for(var qn in on)Hn(on[qn]);return En>=vn&&cn>=_n?[vn,_n,En,cn]:void 0}(st=Pc(st)),Et=_t>0&&xt&&function(on,vn,_n){var En=vn[0],cn=vn[1],Hn=vn[2],nr=vn[3],bn=Hn-En?(_n-1)/(Hn-En):1,zn=nr-cn?(_n-1)/(nr-cn):1;function Un(Wr){return[Math.round((Wr[0]-En)*bn),Math.round((Wr[1]-cn)*zn)]}function qn(Wr,jr){for(var Hr,ei,Gr,si,Tr,Ki=-1,Ci=0,$o=Wr.length,Yi=new Array($o);++Ki<$o;)Hr=Wr[Ki],si=Math.round((Hr[0]-En)*bn),Tr=Math.round((Hr[1]-cn)*zn),si===ei&&Tr===Gr||(Yi[Ci++]=[ei=si,Gr=Tr]);for(Yi.length=Ci;Ci<jr;)Ci=Yi.push([Yi[0][0],Yi[0][1]]);return Yi}function Gn(Wr){return qn(Wr,2)}function Xr(Wr){return qn(Wr,4)}function Br(Wr){return Wr.map(Xr)}function Jr(Wr){Wr!=null&&Tc.call(Fr,Wr.type)&&Fr[Wr.type](Wr)}var Fr={GeometryCollection:function(Wr){Wr.geometries.forEach(Jr)},Point:function(Wr){Wr.coordinates=Un(Wr.coordinates)},MultiPoint:function(Wr){Wr.coordinates=Wr.coordinates.map(Un)},LineString:function(Wr){Wr.arcs=Gn(Wr.arcs)},MultiLineString:function(Wr){Wr.arcs=Wr.arcs.map(Gn)},Polygon:function(Wr){Wr.arcs=Br(Wr.arcs)},MultiPolygon:function(Wr){Wr.arcs=Wr.arcs.map(Br)}};for(var oi in on)Jr(on[oi]);return{scale:[1/bn,1/zn],translate:[En,cn]}}(st,xt,_t),At=function(on){var vn,_n,En,cn,Hn=on.coordinates,nr=on.lines,bn=on.rings,zn=nr.length+bn.length;for(delete on.lines,delete on.rings,En=0,cn=nr.length;En<cn;++En)for(vn=nr[En];vn=vn.next;)++zn;for(En=0,cn=bn.length;En<cn;++En)for(_n=bn[En];_n=_n.next;)++zn;var Un=kc(2*zn*1.4,Cl,Ac),qn=on.arcs=[];for(En=0,cn=nr.length;En<cn;++En){vn=nr[En];do Gn(vn);while(vn=vn.next)}for(En=0,cn=bn.length;En<cn;++En)if((_n=bn[En]).next)do Gn(_n);while(_n=_n.next);else Xr(_n);function Gn(jr){var Hr,ei,Gr,si,Tr,Ki,Ci,$o;if(Gr=Un.get(Hr=Hn[jr[0]])){for(Ci=0,$o=Gr.length;Ci<$o;++Ci)if(Br(si=Gr[Ci],jr))return jr[0]=si[0],void(jr[1]=si[1])}if(Tr=Un.get(ei=Hn[jr[1]])){for(Ci=0,$o=Tr.length;Ci<$o;++Ci)if(Jr(Ki=Tr[Ci],jr))return jr[1]=Ki[0],void(jr[0]=Ki[1])}Gr?Gr.push(jr):Un.set(Hr,[jr]),Tr?Tr.push(jr):Un.set(ei,[jr]),qn.push(jr)}function Xr(jr){var Hr,ei,Gr,si,Tr;if(ei=Un.get(Hn[jr[0]]))for(si=0,Tr=ei.length;si<Tr;++si){if(Fr(Gr=ei[si],jr))return jr[0]=Gr[0],void(jr[1]=Gr[1]);if(oi(Gr,jr))return jr[0]=Gr[1],void(jr[1]=Gr[0])}if(ei=Un.get(Hr=Hn[jr[0]+Wr(jr)]))for(si=0,Tr=ei.length;si<Tr;++si){if(Fr(Gr=ei[si],jr))return jr[0]=Gr[0],void(jr[1]=Gr[1]);if(oi(Gr,jr))return jr[0]=Gr[1],void(jr[1]=Gr[0])}ei?ei.push(jr):Un.set(Hr,[jr]),qn.push(jr)}function Br(jr,Hr){var ei=jr[0],Gr=Hr[0],si=jr[1];if(ei-si!=Gr-Hr[1])return!1;for(;ei<=si;++ei,++Gr)if(!Ac(Hn[ei],Hn[Gr]))return!1;return!0}function Jr(jr,Hr){var ei=jr[0],Gr=Hr[0],si=jr[1],Tr=Hr[1];if(ei-si!=Gr-Tr)return!1;for(;ei<=si;++ei,--Tr)if(!Ac(Hn[ei],Hn[Tr]))return!1;return!0}function Fr(jr,Hr){var ei=jr[0],Gr=Hr[0],si=jr[1]-ei;if(si!==Hr[1]-Gr)return!1;for(var Tr=Wr(jr),Ki=Wr(Hr),Ci=0;Ci<si;++Ci)if(!Ac(Hn[ei+(Ci+Tr)%si],Hn[Gr+(Ci+Ki)%si]))return!1;return!0}function oi(jr,Hr){var ei=jr[0],Gr=Hr[0],si=jr[1],Tr=Hr[1],Ki=si-ei;if(Ki!==Tr-Gr)return!1;for(var Ci=Wr(jr),$o=Ki-Wr(Hr),Yi=0;Yi<Ki;++Yi)if(!Ac(Hn[ei+(Yi+Ci)%Ki],Hn[Tr-(Yi+$o)%Ki]))return!1;return!0}function Wr(jr){for(var Hr=jr[0],ei=jr[1],Gr=Hr,si=Gr,Tr=Hn[Gr];++Gr<ei;){var Ki=Hn[Gr];(Ki[0]<Tr[0]||Ki[0]===Tr[0]&&Ki[1]<Tr[1])&&(si=Gr,Tr=Ki)}return si-Hr}return on}(function(on){var vn,_n,En,cn=Kh(on),Hn=on.coordinates,nr=on.lines,bn=on.rings;for(_n=0,En=nr.length;_n<En;++_n)for(var zn=nr[_n],Un=zn[0],qn=zn[1];++Un<qn;)cn.has(Hn[Un])&&(vn={0:Un,1:zn[1]},zn[1]=Un,zn=zn.next=vn);for(_n=0,En=bn.length;_n<En;++_n)for(var Gn=bn[_n],Xr=Gn[0],Br=Xr,Jr=Gn[1],Fr=cn.has(Hn[Xr]);++Br<Jr;)cn.has(Hn[Br])&&(Fr?(vn={0:Br,1:Gn[1]},Gn[1]=Br,Gn=Gn.next=vn):(Jh(Hn,Xr,Jr,Jr-Br),Hn[Jr]=Hn[Xr],Fr=!0,Br=Xr));return on}(function(on){var vn=-1,_n=[],En=[],cn=[];function Hn(Gn){Gn&&Tc.call(nr,Gn.type)&&nr[Gn.type](Gn)}var nr={GeometryCollection:function(Gn){Gn.geometries.forEach(Hn)},LineString:function(Gn){Gn.arcs=bn(Gn.arcs)},MultiLineString:function(Gn){Gn.arcs=Gn.arcs.map(bn)},Polygon:function(Gn){Gn.arcs=Gn.arcs.map(zn)},MultiPolygon:function(Gn){Gn.arcs=Gn.arcs.map(Un)}};function bn(Gn){for(var Xr=0,Br=Gn.length;Xr<Br;++Xr)cn[++vn]=Gn[Xr];var Jr={0:vn-Br+1,1:vn};return _n.push(Jr),Jr}function zn(Gn){for(var Xr=0,Br=Gn.length;Xr<Br;++Xr)cn[++vn]=Gn[Xr];var Jr={0:vn-Br+1,1:vn};return En.push(Jr),Jr}function Un(Gn){return Gn.map(zn)}for(var qn in on)Hn(on[qn]);return{type:"Topology",coordinates:cn,lines:_n,rings:En,objects:on}}(st))),Ot=At.coordinates,Dt=kc(1.4*At.arcs.length,oc,Md);function Ft(on){on&&Tc.call(jt,on.type)&&jt[on.type](on)}st=At.objects,At.bbox=xt,At.arcs=At.arcs.map(function(on,vn){return Dt.set(on,vn),Ot.slice(on[0],on[1]+1)}),delete At.coordinates,Ot=null;var jt={GeometryCollection:function(on){on.geometries.forEach(Ft)},LineString:function(on){on.arcs=Gt(on.arcs)},MultiLineString:function(on){on.arcs=on.arcs.map(Gt)},Polygon:function(on){on.arcs=on.arcs.map(Gt)},MultiPolygon:function(on){on.arcs=on.arcs.map(Jt)}};function Gt(on){var vn=[];do{var _n=Dt.get(on);vn.push(on[0]<on[1]?_n:~_n)}while(on=on.next);return vn}function Jt(on){return on.map(Gt)}for(var qt in st)Ft(st[qt]);return Et&&(At.transform=Et,At.arcs=function(on){for(var vn=-1,_n=on.length;++vn<_n;){for(var En,cn,Hn=on[vn],nr=0,bn=1,zn=Hn.length,Un=Hn[0],qn=Un[0],Gn=Un[1];++nr<zn;)En=(Un=Hn[nr])[0],cn=Un[1],En===qn&&cn===Gn||(Hn[bn++]=[En-qn,cn-Gn],qn=En,Gn=cn);bn===1&&(Hn[bn++]=[0,0]),Hn.length=bn}return on}(At.arcs)),At}function oc(st){var _t,xt=st[0],Et=st[1];return Et<xt&&(_t=xt,xt=Et,Et=_t),xt+31*Et}function Md(st,_t){var xt,Et=st[0],At=st[1],Ot=_t[0],Dt=_t[1];return At<Et&&(xt=Et,Et=At,At=xt),Dt<Ot&&(xt=Ot,Ot=Dt,Dt=xt),Et===Ot&&At===Dt}function wf(st,_t){if(_t===void 0&&(_t={}),or(st)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!st.features.length)throw new Error("geojson is empty");_t.mutate!==!1&&_t.mutate!==void 0||(st=Vo(st));var xt=[];Ar(st,function(At){xt.push(At.geometry)});var Et=Du({geoms:nn(xt).geometry});return function(At){return Ru(At,Xa.apply(this,arguments))}(Et,Et.objects.geoms.geometries)}function Qh(st,_t){if(_t===void 0&&(_t={}),!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.mutate;if(or(st)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!st.features.length)throw new Error("geojson is empty");xt!==!1&&xt!==void 0||(st=Vo(st));var Et=function(Ot){var Dt={};Ar(Ot,function(jt){Dt[jt.geometry.type]=!0});var Ft=Object.keys(Dt);return Ft.length===1?Ft[0]:null}(st);if(!Et)throw new Error("geojson must be homogenous");var At=st;switch(Et){case"LineString":return gl(At,_t);case"Polygon":return wf(At,_t);default:throw new Error(Et+" is not supported")}}function Tl(st,_t){_t===void 0&&(_t={});var xt=typeof _t=="object"?_t.mutate:_t;if(!st)throw new Error("geojson is required");var Et=or(st),At=[];switch(Et){case"LineString":At=Va(st);break;case"MultiLineString":case"Polygon":Nn(st).forEach(function(Dt){At.push(Va(Dt))});break;case"MultiPolygon":Nn(st).forEach(function(Dt){var Ft=[];Dt.forEach(function(jt){Ft.push(Va(jt))}),At.push(Ft)});break;case"Point":return st;case"MultiPoint":var Ot={};Nn(st).forEach(function(Dt){var Ft=Dt.join("-");Object.prototype.hasOwnProperty.call(Ot,Ft)||(At.push(Dt),Ot[Ft]=!0)});break;default:throw new Error(Et+" geometry not supported")}return st.coordinates?xt===!0?(st.coordinates=At,st):{type:Et,coordinates:At}:xt===!0?(st.geometry.coordinates=At,st):wt({type:Et,coordinates:At},st.properties,{bbox:st.bbox,id:st.id})}function Va(st){var _t=Nn(st);if(_t.length===2&&!Ch(_t[0],_t[1]))return _t;var xt=[],Et=_t.length-1,At=xt.length;xt.push(_t[0]);for(var Ot=1;Ot<Et;Ot++){var Dt=xt[xt.length-1];_t[Ot][0]===Dt[0]&&_t[Ot][1]===Dt[1]||(xt.push(_t[Ot]),(At=xt.length)>2&&zo(xt[At-3],xt[At-1],xt[At-2])&&xt.splice(xt.length-2,1))}if(xt.push(_t[_t.length-1]),At=xt.length,Ch(_t[0],_t[_t.length-1])&&At<4)throw new Error("invalid polygon");return zo(xt[At-3],xt[At-1],xt[At-2])&&xt.splice(xt.length-2,1),xt}function Ch(st,_t){return st[0]===_t[0]&&st[1]===_t[1]}function zo(st,_t,xt){var Et=xt[0],At=xt[1],Ot=st[0],Dt=st[1],Ft=_t[0],jt=_t[1],Gt=Ft-Ot,Jt=jt-Dt;return(Et-Ot)*Jt-(At-Dt)*Gt===0&&(Math.abs(Gt)>=Math.abs(Jt)?Gt>0?Ot<=Et&&Et<=Ft:Ft<=Et&&Et<=Ot:Jt>0?Dt<=At&&At<=jt:jt<=At&&At<=Dt)}function Lc(st,_t,xt){var Et=_t.x,At=_t.y,Ot=xt.x-Et,Dt=xt.y-At;if(Ot!==0||Dt!==0){var Ft=((st.x-Et)*Ot+(st.y-At)*Dt)/(Ot*Ot+Dt*Dt);Ft>1?(Et=xt.x,At=xt.y):Ft>0&&(Et+=Ot*Ft,At+=Dt*Ft)}return(Ot=st.x-Et)*Ot+(Dt=st.y-At)*Dt}function ma(st,_t,xt,Et,At){for(var Ot,Dt=Et,Ft=_t+1;Ft<xt;Ft++){var jt=Lc(st[Ft],st[_t],st[xt]);jt>Dt&&(Ot=Ft,Dt=jt)}Dt>Et&&(Ot-_t>1&&ma(st,_t,Ot,Et,At),At.push(st[Ot]),xt-Ot>1&&ma(st,Ot,xt,Et,At))}function Qc(st,_t){var xt=st.length-1,Et=[st[0]];return ma(st,0,xt,_t,Et),Et.push(st[xt]),Et}function eh(st,_t,xt){if(st.length<=2)return st;var Et=_t!==void 0?_t*_t:1;return st=Qc(st=xt?st:function(At,Ot){for(var Dt,Ft,jt,Gt,Jt,qt=At[0],on=[qt],vn=1,_n=At.length;vn<_n;vn++)Dt=At[vn],jt=qt,Gt=void 0,Jt=void 0,Gt=(Ft=Dt).x-jt.x,Jt=Ft.y-jt.y,Gt*Gt+Jt*Jt>Ot&&(on.push(Dt),qt=Dt);return qt!==Dt&&on.push(Dt),on}(st,Et),Et)}function sc(st,_t,xt){return eh(st.map(function(Et){return{x:Et[0],y:Et[1],z:Et[2]}}),_t,xt).map(function(Et){return Et.z?[Et.x,Et.y,Et.z]:[Et.x,Et.y]})}function th(st,_t,xt){return st.map(function(Et){var At=Et.map(function(Dt){return{x:Dt[0],y:Dt[1]}});if(At.length<4)throw new Error("invalid polygon");for(var Ot=eh(At,_t,xt).map(function(Dt){return[Dt.x,Dt.y]});!Rd(Ot);)Ot=eh(At,_t-=.01*_t,xt).map(function(Dt){return[Dt.x,Dt.y]});return Ot[Ot.length-1][0]===Ot[0][0]&&Ot[Ot.length-1][1]===Ot[0][1]||Ot.push(Ot[0]),Ot})}function Rd(st){return!(st.length<3)&&!(st.length===3&&st[2][0]===st[0][0]&&st[2][1]===st[0][1])}var xu=function(){function st(_t){this.points=_t.points||[],this.duration=_t.duration||1e4,this.sharpness=_t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=_t.stepLength||60,this.length=this.points.length,this.delay=0;for(var xt=0;xt<this.length;xt++)this.points[xt].z=this.points[xt].z||0;for(xt=0;xt<this.length-1;xt++){var Et=this.points[xt],At=this.points[xt+1];this.centers.push({x:(Et.x+At.x)/2,y:(Et.y+At.y)/2,z:(Et.z+At.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),xt=0;xt<this.centers.length-1;xt++){var Ot=this.points[xt+1].x-(this.centers[xt].x+this.centers[xt+1].x)/2,Dt=this.points[xt+1].y-(this.centers[xt].y+this.centers[xt+1].y)/2,Ft=this.points[xt+1].z-(this.centers[xt].y+this.centers[xt+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[xt+1].x+this.sharpness*(this.centers[xt].x+Ot),y:(1-this.sharpness)*this.points[xt+1].y+this.sharpness*(this.centers[xt].y+Dt),z:(1-this.sharpness)*this.points[xt+1].z+this.sharpness*(this.centers[xt].z+Ft)},{x:(1-this.sharpness)*this.points[xt+1].x+this.sharpness*(this.centers[xt+1].x+Ot),y:(1-this.sharpness)*this.points[xt+1].y+this.sharpness*(this.centers[xt+1].y+Dt),z:(1-this.sharpness)*this.points[xt+1].z+this.sharpness*(this.centers[xt+1].z+Ft)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return st.prototype.cacheSteps=function(_t){var xt=[],Et=this.pos(0);xt.push(0);for(var At=0;At<this.duration;At+=10){var Ot=this.pos(At);Math.sqrt((Ot.x-Et.x)*(Ot.x-Et.x)+(Ot.y-Et.y)*(Ot.y-Et.y)+(Ot.z-Et.z)*(Ot.z-Et.z))>_t&&(xt.push(At),Et=Ot)}return xt},st.prototype.vector=function(_t){var xt=this.pos(_t+10),Et=this.pos(_t-10);return{angle:180*Math.atan2(xt.y-Et.y,xt.x-Et.x)/3.14,speed:Math.sqrt((Et.x-xt.x)*(Et.x-xt.x)+(Et.y-xt.y)*(Et.y-xt.y)+(Et.z-xt.z)*(Et.z-xt.z))}},st.prototype.pos=function(_t){var xt=_t-this.delay;xt<0&&(xt=0),xt>this.duration&&(xt=this.duration-1);var Et=xt/this.duration;if(Et>=1)return this.points[this.length-1];var At=Math.floor((this.points.length-1)*Et);return function(Ot,Dt,Ft,jt,Gt){var Jt=function(qt){var on=qt*qt;return[on*qt,3*on*(1-qt),3*qt*(1-qt)*(1-qt),(1-qt)*(1-qt)*(1-qt)]}(Ot);return{x:Gt.x*Jt[0]+jt.x*Jt[1]+Ft.x*Jt[2]+Dt.x*Jt[3],y:Gt.y*Jt[0]+jt.y*Jt[1]+Ft.y*Jt[2]+Dt.y*Jt[3],z:Gt.z*Jt[0]+jt.z*Jt[1]+Ft.z*Jt[2]+Dt.z*Jt[3]}}((this.length-1)*Et-At,this.points[At],this.controls[At][1],this.controls[At+1][0],this.points[At+1])},st}();function Dd(st,_t){_t===void 0&&(_t={});for(var xt=_t.resolution||1e4,Et=_t.sharpness||.85,At=[],Ot=Wn(st).coordinates.map(function(Gt){return{x:Gt[0],y:Gt[1]}}),Dt=new xu({duration:xt,points:Ot,sharpness:Et}),Ft=function(Gt){var Jt=Dt.pos(Gt);Math.floor(Gt/100)%2==0&&At.push([Jt.x,Jt.y])},jt=0;jt<Dt.duration;jt+=10)Ft(jt);return Ft(Dt.duration),zt(At,_t.properties)}function ed(st,_t){_t===void 0&&(_t={});var xt=Number(st[0]),Et=Number(st[1]),At=Number(st[2]),Ot=Number(st[3]);if(st.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var Dt=[xt,Et];return Mt([[Dt,[At,Et],[At,Ot],[xt,Ot],Dt]],_t.properties,{bbox:st,id:_t.id})}function Th(st){return ed(dn(st))}function td(st){var _t=st[0],xt=st[1],Et=st[2],At=st[3];if(vo(st.slice(0,2),[Et,xt])>=vo(st.slice(0,2),[_t,At])){var Ot=(xt+At)/2;return[_t,Ot-(Et-_t)/2,Et,Ot+(Et-_t)/2]}var Dt=(_t+Et)/2;return[Dt-(At-xt)/2,xt,Dt+(At-xt)/2,At]}function Ys(st,_t,xt,Et){Et===void 0&&(Et={});var At=un(st),Ot=An(At[0]),Dt=An(At[1]),Ft=An(xt),jt=sn(_t,Et.units),Gt=Math.asin(Math.sin(Dt)*Math.cos(jt)+Math.cos(Dt)*Math.sin(jt)*Math.cos(Ft));return kt([Cn(Ot+Math.atan2(Math.sin(Ft)*Math.sin(jt)*Math.cos(Dt),Math.cos(jt)-Math.sin(Dt)*Math.sin(Gt))),Cn(Gt)],Et.properties)}function Nu(st,_t,xt){xt===void 0&&(xt={});for(var Et=xt.steps||64,At=xt.properties?xt.properties:!Array.isArray(st)&&st.type==="Feature"&&st.properties?st.properties:{},Ot=[],Dt=0;Dt<Et;Dt++)Ot.push(Ys(st,_t,-360*Dt/Et,xt).geometry.coordinates);return Ot.push(Ot[0]),Mt([Ot],At)}function Za(st,_t,xt){if(xt===void 0&&(xt={}),xt.final===!0)return function(qt,on){var vn=Za(on,qt);return vn=(vn+180)%360}(st,_t);var Et=un(st),At=un(_t),Ot=An(Et[0]),Dt=An(At[0]),Ft=An(Et[1]),jt=An(At[1]),Gt=Math.sin(Dt-Ot)*Math.cos(jt),Jt=Math.cos(Ft)*Math.sin(jt)-Math.sin(Ft)*Math.cos(jt)*Math.cos(Dt-Ot);return Cn(Math.atan2(Gt,Jt))}function Ua(st,_t){_t===void 0&&(_t={});var xt=dn(st);return kt([(xt[0]+xt[2])/2,(xt[1]+xt[3])/2],_t.properties,_t)}function kl(st,_t){_t===void 0&&(_t={});var xt=0,Et=0,At=0;return yn(st,function(Ot){xt+=Ot[0],Et+=Ot[1],At++},!0),kt([xt/At,Et/At],_t.properties)}function Eo(st){var _t=[];return st.type==="FeatureCollection"?rr(st,function(xt){yn(xt,function(Et){_t.push(kt(Et,xt.properties))})}):yn(st,function(xt){_t.push(kt(xt,st.properties))}),Wt(_t)}var Ef=nh,wp=nh;function nh(st,_t,xt){xt=xt||2;var Et,At,Ot,Dt,Ft,jt,Gt,Jt=_t&&_t.length,qt=Jt?_t[0]*xt:st.length,on=iu(st,0,qt,xt,!0),vn=[];if(!on)return vn;if(Jt&&(on=function(En,cn,Hn,nr){var bn,zn,Un,qn=[];for(bn=0,zn=cn.length;bn<zn;bn++)(Un=iu(En,cn[bn]*nr,bn<zn-1?cn[bn+1]*nr:En.length,nr,!1))===Un.next&&(Un.steiner=!0),qn.push(Kn(Un));for(qn.sort(Xt),bn=0;bn<qn.length;bn++)hn(qn[bn],Hn),Hn=Gl(Hn,Hn.next);return Hn}(st,_t,on,xt)),st.length>80*xt){Et=Ot=st[0],At=Dt=st[1];for(var _n=xt;_n<qt;_n+=xt)(Ft=st[_n])<Et&&(Et=Ft),(jt=st[_n+1])<At&&(At=jt),Ft>Ot&&(Ot=Ft),jt>Dt&&(Dt=jt);Gt=(Gt=Math.max(Ot-Et,Dt-At))!==0?1/Gt:0}return ml(on,vn,xt,Et,At,Gt),vn}function iu(st,_t,xt,Et,At){var Ot,Dt;if(At===Ds(st,_t,xt,Et)>0)for(Ot=_t;Ot<xt;Ot+=Et)Dt=lo(Ot,st[Ot],st[Ot+1],Dt);else for(Ot=xt-Et;Ot>=_t;Ot-=Et)Dt=lo(Ot,st[Ot],st[Ot+1],Dt);return Dt&&ci(Dt,Dt.next)&&(Ko(Dt),Dt=Dt.next),Dt}function Gl(st,_t){if(!st)return st;_t||(_t=st);var xt,Et=st;do if(xt=!1,Et.steiner||!ci(Et,Et.next)&&ti(Et.prev,Et,Et.next)!==0)Et=Et.next;else{if(Ko(Et),(Et=_t=Et.prev)===Et.next)break;xt=!0}while(xt||Et!==_t);return _t}function ml(st,_t,xt,Et,At,Ot,Dt){if(st){!Dt&&Ot&&function(Jt,qt,on,vn){var _n=Jt;do _n.z===null&&(_n.z=Mn(_n.x,_n.y,qt,on,vn)),_n.prevZ=_n.prev,_n.nextZ=_n.next,_n=_n.next;while(_n!==Jt);_n.prevZ.nextZ=null,_n.prevZ=null,function(En){var cn,Hn,nr,bn,zn,Un,qn,Gn,Xr=1;do{for(Hn=En,En=null,zn=null,Un=0;Hn;){for(Un++,nr=Hn,qn=0,cn=0;cn<Xr&&(qn++,nr=nr.nextZ);cn++);for(Gn=Xr;qn>0||Gn>0&&nr;)qn!==0&&(Gn===0||!nr||Hn.z<=nr.z)?(bn=Hn,Hn=Hn.nextZ,qn--):(bn=nr,nr=nr.nextZ,Gn--),zn?zn.nextZ=bn:En=bn,bn.prevZ=zn,zn=bn;Hn=nr}zn.nextZ=null,Xr*=2}while(Un>1)}(_n)}(st,Et,At,Ot);for(var Ft,jt,Gt=st;st.prev!==st.next;)if(Ft=st.prev,jt=st.next,Ot?Ka(st,Et,At,Ot):ja(st))_t.push(Ft.i/xt),_t.push(st.i/xt),_t.push(jt.i/xt),Ko(st),st=jt.next,Gt=jt.next;else if((st=jt)===Gt){Dt?Dt===1?ml(st=nd(st,_t,xt),_t,xt,Et,At,Ot,2):Dt===2&&Jo(st,_t,xt,Et,At,Ot):ml(Gl(st),_t,xt,Et,At,Ot,1);break}}}function ja(st){var _t=st.prev,xt=st,Et=st.next;if(ti(_t,xt,Et)>=0)return!1;for(var At=st.next.next;At!==st.prev;){if(hr(_t.x,_t.y,xt.x,xt.y,Et.x,Et.y,At.x,At.y)&&ti(At.prev,At,At.next)>=0)return!1;At=At.next}return!0}function Ka(st,_t,xt,Et){var At=st.prev,Ot=st,Dt=st.next;if(ti(At,Ot,Dt)>=0)return!1;for(var Ft=At.x<Ot.x?At.x<Dt.x?At.x:Dt.x:Ot.x<Dt.x?Ot.x:Dt.x,jt=At.y<Ot.y?At.y<Dt.y?At.y:Dt.y:Ot.y<Dt.y?Ot.y:Dt.y,Gt=At.x>Ot.x?At.x>Dt.x?At.x:Dt.x:Ot.x>Dt.x?Ot.x:Dt.x,Jt=At.y>Ot.y?At.y>Dt.y?At.y:Dt.y:Ot.y>Dt.y?Ot.y:Dt.y,qt=Mn(Ft,jt,_t,xt,Et),on=Mn(Gt,Jt,_t,xt,Et),vn=st.prevZ,_n=st.nextZ;vn&&vn.z>=qt&&_n&&_n.z<=on;){if(vn!==st.prev&&vn!==st.next&&hr(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,vn.x,vn.y)&&ti(vn.prev,vn,vn.next)>=0||(vn=vn.prevZ,_n!==st.prev&&_n!==st.next&&hr(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,_n.x,_n.y)&&ti(_n.prev,_n,_n.next)>=0))return!1;_n=_n.nextZ}for(;vn&&vn.z>=qt;){if(vn!==st.prev&&vn!==st.next&&hr(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,vn.x,vn.y)&&ti(vn.prev,vn,vn.next)>=0)return!1;vn=vn.prevZ}for(;_n&&_n.z<=on;){if(_n!==st.prev&&_n!==st.next&&hr(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,_n.x,_n.y)&&ti(_n.prev,_n,_n.next)>=0)return!1;_n=_n.nextZ}return!0}function nd(st,_t,xt){var Et=st;do{var At=Et.prev,Ot=Et.next.next;!ci(At,Ot)&&Ni(At,Et,Et.next,Ot)&&Li(At,Ot)&&Li(Ot,At)&&(_t.push(At.i/xt),_t.push(Et.i/xt),_t.push(Ot.i/xt),Ko(Et),Ko(Et.next),Et=st=Ot),Et=Et.next}while(Et!==st);return Et}function Jo(st,_t,xt,Et,At,Ot){var Dt=st;do{for(var Ft=Dt.next.next;Ft!==Dt.prev;){if(Dt.i!==Ft.i&&zr(Dt,Ft)){var jt=_o(Dt,Ft);return Dt=Gl(Dt,Dt.next),jt=Gl(jt,jt.next),ml(Dt,_t,xt,Et,At,Ot),void ml(jt,_t,xt,Et,At,Ot)}Ft=Ft.next}Dt=Dt.next}while(Dt!==st)}function Xt(st,_t){return st.x-_t.x}function hn(st,_t){if(_t=function(Et,At){var Ot,Dt=At,Ft=Et.x,jt=Et.y,Gt=-1/0;do{if(jt<=Dt.y&&jt>=Dt.next.y&&Dt.next.y!==Dt.y){var Jt=Dt.x+(jt-Dt.y)*(Dt.next.x-Dt.x)/(Dt.next.y-Dt.y);if(Jt<=Ft&&Jt>Gt){if(Gt=Jt,Jt===Ft){if(jt===Dt.y)return Dt;if(jt===Dt.next.y)return Dt.next}Ot=Dt.x<Dt.next.x?Dt:Dt.next}}Dt=Dt.next}while(Dt!==At);if(!Ot)return null;if(Ft===Gt)return Ot.prev;var qt,on=Ot,vn=Ot.x,_n=Ot.y,En=1/0;for(Dt=Ot.next;Dt!==on;)Ft>=Dt.x&&Dt.x>=vn&&Ft!==Dt.x&&hr(jt<_n?Ft:Gt,jt,vn,_n,jt<_n?Gt:Ft,jt,Dt.x,Dt.y)&&((qt=Math.abs(jt-Dt.y)/(Ft-Dt.x))<En||qt===En&&Dt.x>Ot.x)&&Li(Dt,Et)&&(Ot=Dt,En=qt),Dt=Dt.next;return Ot}(st,_t)){var xt=_o(_t,st);Gl(xt,xt.next)}}function Mn(st,_t,xt,Et,At){return(st=1431655765&((st=858993459&((st=252645135&((st=16711935&((st=32767*(st-xt)*At)|st<<8))|st<<4))|st<<2))|st<<1))|(_t=1431655765&((_t=858993459&((_t=252645135&((_t=16711935&((_t=32767*(_t-Et)*At)|_t<<8))|_t<<4))|_t<<2))|_t<<1))<<1}function Kn(st){var _t=st,xt=st;do _t.x<xt.x&&(xt=_t),_t=_t.next;while(_t!==st);return xt}function hr(st,_t,xt,Et,At,Ot,Dt,Ft){return(At-Dt)*(_t-Ft)-(st-Dt)*(Ot-Ft)>=0&&(st-Dt)*(Et-Ft)-(xt-Dt)*(_t-Ft)>=0&&(xt-Dt)*(Ot-Ft)-(At-Dt)*(Et-Ft)>=0}function zr(st,_t){return st.next.i!==_t.i&&st.prev.i!==_t.i&&!function(xt,Et){var At=xt;do{if(At.i!==xt.i&&At.next.i!==xt.i&&At.i!==Et.i&&At.next.i!==Et.i&&Ni(At,At.next,xt,Et))return!0;At=At.next}while(At!==xt);return!1}(st,_t)&&Li(st,_t)&&Li(_t,st)&&function(xt,Et){var At=xt,Ot=!1,Dt=(xt.x+Et.x)/2,Ft=(xt.y+Et.y)/2;do At.y>Ft!=At.next.y>Ft&&At.next.y!==At.y&&Dt<(At.next.x-At.x)*(Ft-At.y)/(At.next.y-At.y)+At.x&&(Ot=!Ot),At=At.next;while(At!==xt);return Ot}(st,_t)}function ti(st,_t,xt){return(_t.y-st.y)*(xt.x-_t.x)-(_t.x-st.x)*(xt.y-_t.y)}function ci(st,_t){return st.x===_t.x&&st.y===_t.y}function Ni(st,_t,xt,Et){return!!(ci(st,_t)&&ci(xt,Et)||ci(st,Et)&&ci(xt,_t))||ti(st,_t,xt)>0!=ti(st,_t,Et)>0&&ti(xt,Et,st)>0!=ti(xt,Et,_t)>0}function Li(st,_t){return ti(st.prev,st,st.next)<0?ti(st,_t,st.next)>=0&&ti(st,st.prev,_t)>=0:ti(st,_t,st.prev)<0||ti(st,st.next,_t)<0}function _o(st,_t){var xt=new Bs(st.i,st.x,st.y),Et=new Bs(_t.i,_t.x,_t.y),At=st.next,Ot=_t.prev;return st.next=_t,_t.prev=st,xt.next=At,At.prev=xt,Et.next=xt,xt.prev=Et,Ot.next=Et,Et.prev=Ot,Et}function lo(st,_t,xt,Et){var At=new Bs(st,_t,xt);return Et?(At.next=Et.next,At.prev=Et,Et.next.prev=At,Et.next=At):(At.prev=At,At.next=At),At}function Ko(st){st.next.prev=st.prev,st.prev.next=st.next,st.prevZ&&(st.prevZ.nextZ=st.nextZ),st.nextZ&&(st.nextZ.prevZ=st.prevZ)}function Bs(st,_t,xt){this.i=st,this.x=_t,this.y=xt,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ds(st,_t,xt,Et){for(var At=0,Ot=_t,Dt=xt-Et;Ot<xt;Ot+=Et)At+=(st[Dt]-st[Ot])*(st[Ot+1]+st[Dt+1]),Dt=Ot;return At}function wu(st){var _t=function(Ft){for(var jt=Ft[0][0].length,Gt={vertices:[],holes:[],dimensions:jt},Jt=0,qt=0;qt<Ft.length;qt++){for(var on=0;on<Ft[qt].length;on++)for(var vn=0;vn<jt;vn++)Gt.vertices.push(Ft[qt][on][vn]);qt>0&&(Jt+=Ft[qt-1].length,Gt.holes.push(Jt))}return Gt}(st),xt=Ef(_t.vertices,_t.holes,2),Et=[],At=[];xt.forEach(function(Ft,jt){var Gt=xt[jt];At.push([_t.vertices[2*Gt],_t.vertices[2*Gt+1]])});for(var Ot=0;Ot<At.length;Ot+=3){var Dt=At.slice(Ot,Ot+3);Dt.push(At[Ot]),Et.push(Mt([Dt]))}return Et}function Yl(st,_t){if(!st)throw new Error("targetPoint is required");if(!_t)throw new Error("points is required");var xt,Et=1/0,At=0;return rr(_t,function(Ot,Dt){var Ft=vo(st,Ot);Ft<Et&&(At=Dt,Et=Ft)}),(xt=Vo(_t.features[At])).properties.featureIndex=At,xt.properties.distanceToPoint=Et,xt}function $u(st){if(!st)throw new Error("geojson is required");var _t=[];return Ar(st,function(xt){(function(Et,At){var Ot=[],Dt=Et.geometry;if(Dt!==null){switch(Dt.type){case"Polygon":Ot=Nn(Dt);break;case"LineString":Ot=[Nn(Dt)]}Ot.forEach(function(Ft){(function(jt,Gt){var Jt=[];return jt.reduce(function(qt,on){var vn=zt([qt,on],Gt);return vn.bbox=function(_n,En){var cn=_n[0],Hn=_n[1],nr=En[0],bn=En[1];return[cn<nr?cn:nr,Hn<bn?Hn:bn,cn>nr?cn:nr,Hn>bn?Hn:bn]}(qt,on),Jt.push(vn),on}),Jt})(Ft,Et.properties).forEach(function(jt){jt.id=At.length,At.push(jt)})})}})(xt,_t)}),Wt(_t)}nh.deviation=function(st,_t,xt,Et){var At=_t&&_t.length,Ot=At?_t[0]*xt:st.length,Dt=Math.abs(Ds(st,0,Ot,xt));if(At)for(var Ft=0,jt=_t.length;Ft<jt;Ft++){var Gt=_t[Ft]*xt,Jt=Ft<jt-1?_t[Ft+1]*xt:st.length;Dt-=Math.abs(Ds(st,Gt,Jt,xt))}var qt=0;for(Ft=0;Ft<Et.length;Ft+=3){var on=Et[Ft]*xt,vn=Et[Ft+1]*xt,_n=Et[Ft+2]*xt;qt+=Math.abs((st[on]-st[_n])*(st[vn+1]-st[on+1])-(st[on]-st[vn])*(st[_n+1]-st[on+1]))}return Dt===0&&qt===0?0:Math.abs((qt-Dt)/Dt)},nh.flatten=function(st){for(var _t=st[0][0].length,xt={vertices:[],holes:[],dimensions:_t},Et=0,At=0;At<st.length;At++){for(var Ot=0;Ot<st[At].length;Ot++)for(var Dt=0;Dt<_t;Dt++)xt.vertices.push(st[At][Ot][Dt]);At>0&&(Et+=st[At-1].length,xt.holes.push(Et))}return xt},Ef.default=wp;var sa=jo(function(st,_t){function xt(_n,En,cn){cn===void 0&&(cn={});var Hn={type:"Feature"};return(cn.id===0||cn.id)&&(Hn.id=cn.id),cn.bbox&&(Hn.bbox=cn.bbox),Hn.properties=En||{},Hn.geometry=_n,Hn}function Et(_n,En,cn){if(cn===void 0&&(cn={}),!_n)throw new Error("coordinates is required");if(!Array.isArray(_n))throw new Error("coordinates must be an Array");if(_n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vn(_n[0])||!vn(_n[1]))throw new Error("coordinates must contain numbers");return xt({type:"Point",coordinates:_n},En,cn)}function At(_n,En,cn){cn===void 0&&(cn={});for(var Hn=0,nr=_n;Hn<nr.length;Hn++){var bn=nr[Hn];if(bn.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var zn=0;zn<bn[bn.length-1].length;zn++)if(bn[bn.length-1][zn]!==bn[0][zn])throw new Error("First and last Position are not equivalent.")}return xt({type:"Polygon",coordinates:_n},En,cn)}function Ot(_n,En,cn){if(cn===void 0&&(cn={}),_n.length<2)throw new Error("coordinates must be an array of two or more positions");return xt({type:"LineString",coordinates:_n},En,cn)}function Dt(_n,En){En===void 0&&(En={});var cn={type:"FeatureCollection"};return En.id&&(cn.id=En.id),En.bbox&&(cn.bbox=En.bbox),cn.features=_n,cn}function Ft(_n,En,cn){return cn===void 0&&(cn={}),xt({type:"MultiLineString",coordinates:_n},En,cn)}function jt(_n,En,cn){return cn===void 0&&(cn={}),xt({type:"MultiPoint",coordinates:_n},En,cn)}function Gt(_n,En,cn){return cn===void 0&&(cn={}),xt({type:"MultiPolygon",coordinates:_n},En,cn)}function Jt(_n,En){En===void 0&&(En="kilometers");var cn=_t.factors[En];if(!cn)throw new Error(En+" units is invalid");return _n*cn}function qt(_n,En){En===void 0&&(En="kilometers");var cn=_t.factors[En];if(!cn)throw new Error(En+" units is invalid");return _n/cn}function on(_n){return 180*(_n%(2*Math.PI))/Math.PI}function vn(_n){return!isNaN(_n)&&_n!==null&&!Array.isArray(_n)}Object.defineProperty(_t,"__esModule",{value:!0}),_t.earthRadius=63710088e-1,_t.factors={centimeters:100*_t.earthRadius,centimetres:100*_t.earthRadius,degrees:_t.earthRadius/111325,feet:3.28084*_t.earthRadius,inches:39.37*_t.earthRadius,kilometers:_t.earthRadius/1e3,kilometres:_t.earthRadius/1e3,meters:_t.earthRadius,metres:_t.earthRadius,miles:_t.earthRadius/1609.344,millimeters:1e3*_t.earthRadius,millimetres:1e3*_t.earthRadius,nauticalmiles:_t.earthRadius/1852,radians:1,yards:1.0936*_t.earthRadius},_t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/_t.earthRadius,yards:1.0936133},_t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},_t.feature=xt,_t.geometry=function(_n,En,cn){switch(_n){case"Point":return Et(En).geometry;case"LineString":return Ot(En).geometry;case"Polygon":return At(En).geometry;case"MultiPoint":return jt(En).geometry;case"MultiLineString":return Ft(En).geometry;case"MultiPolygon":return Gt(En).geometry;default:throw new Error(_n+" is invalid")}},_t.point=Et,_t.points=function(_n,En,cn){return cn===void 0&&(cn={}),Dt(_n.map(function(Hn){return Et(Hn,En)}),cn)},_t.polygon=At,_t.polygons=function(_n,En,cn){return cn===void 0&&(cn={}),Dt(_n.map(function(Hn){return At(Hn,En)}),cn)},_t.lineString=Ot,_t.lineStrings=function(_n,En,cn){return cn===void 0&&(cn={}),Dt(_n.map(function(Hn){return Ot(Hn,En)}),cn)},_t.featureCollection=Dt,_t.multiLineString=Ft,_t.multiPoint=jt,_t.multiPolygon=Gt,_t.geometryCollection=function(_n,En,cn){return cn===void 0&&(cn={}),xt({type:"GeometryCollection",geometries:_n},En,cn)},_t.round=function(_n,En){if(En===void 0&&(En=0),En&&!(En>=0))throw new Error("precision must be a positive number");var cn=Math.pow(10,En||0);return Math.round(_n*cn)/cn},_t.radiansToLength=Jt,_t.lengthToRadians=qt,_t.lengthToDegrees=function(_n,En){return on(qt(_n,En))},_t.bearingToAzimuth=function(_n){var En=_n%360;return En<0&&(En+=360),En},_t.radiansToDegrees=on,_t.degreesToRadians=function(_n){return _n%360*Math.PI/180},_t.convertLength=function(_n,En,cn){if(En===void 0&&(En="kilometers"),cn===void 0&&(cn="kilometers"),!(_n>=0))throw new Error("length must be a positive number");return Jt(qt(_n,En),cn)},_t.convertArea=function(_n,En,cn){if(En===void 0&&(En="meters"),cn===void 0&&(cn="kilometers"),!(_n>=0))throw new Error("area must be a positive number");var Hn=_t.areaFactors[En];if(!Hn)throw new Error("invalid original units");var nr=_t.areaFactors[cn];if(!nr)throw new Error("invalid final units");return _n/Hn*nr},_t.isNumber=vn,_t.isObject=function(_n){return!!_n&&_n.constructor===Object},_t.validateBBox=function(_n){if(!_n)throw new Error("bbox is required");if(!Array.isArray(_n))throw new Error("bbox must be an Array");if(_n.length!==4&&_n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");_n.forEach(function(En){if(!vn(En))throw new Error("bbox must only contain numbers")})},_t.validateId=function(_n){if(!_n)throw new Error("id is required");if(["string","number"].indexOf(typeof _n)===-1)throw new Error("id must be a number or a string")}});function rd(st,_t,xt){if(st!==null)for(var Et,At,Ot,Dt,Ft,jt,Gt,Jt,qt=0,on=0,vn=st.type,_n=vn==="FeatureCollection",En=vn==="Feature",cn=_n?st.features.length:1,Hn=0;Hn<cn;Hn++){Ft=(Jt=!!(Gt=_n?st.features[Hn].geometry:En?st.geometry:st)&&Gt.type==="GeometryCollection")?Gt.geometries.length:1;for(var nr=0;nr<Ft;nr++){var bn=0,zn=0;if((Dt=Jt?Gt.geometries[nr]:Gt)!==null){jt=Dt.coordinates;var Un=Dt.type;switch(qt=!xt||Un!=="Polygon"&&Un!=="MultiPolygon"?0:1,Un){case null:break;case"Point":if(_t(jt,on,Hn,bn,zn)===!1)return!1;on++,bn++;break;case"LineString":case"MultiPoint":for(Et=0;Et<jt.length;Et++){if(_t(jt[Et],on,Hn,bn,zn)===!1)return!1;on++,Un==="MultiPoint"&&bn++}Un==="LineString"&&bn++;break;case"Polygon":case"MultiLineString":for(Et=0;Et<jt.length;Et++){for(At=0;At<jt[Et].length-qt;At++){if(_t(jt[Et][At],on,Hn,bn,zn)===!1)return!1;on++}Un==="MultiLineString"&&bn++,Un==="Polygon"&&zn++}Un==="Polygon"&&bn++;break;case"MultiPolygon":for(Et=0;Et<jt.length;Et++){for(zn=0,At=0;At<jt[Et].length;At++){for(Ot=0;Ot<jt[Et][At].length-qt;Ot++){if(_t(jt[Et][At][Ot],on,Hn,bn,zn)===!1)return!1;on++}zn++}bn++}break;case"GeometryCollection":for(Et=0;Et<Dt.geometries.length;Et++)if(rd(Dt.geometries[Et],_t,xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function od(st,_t){var xt;switch(st.type){case"FeatureCollection":for(xt=0;xt<st.features.length&&_t(st.features[xt].properties,xt)!==!1;xt++);break;case"Feature":_t(st.properties,0)}}function Ep(st,_t){if(st.type==="Feature")_t(st,0);else if(st.type==="FeatureCollection")for(var xt=0;xt<st.features.length&&_t(st.features[xt],xt)!==!1;xt++);}function sd(st,_t){var xt,Et,At,Ot,Dt,Ft,jt,Gt,Jt,qt,on=0,vn=st.type==="FeatureCollection",_n=st.type==="Feature",En=vn?st.features.length:1;for(xt=0;xt<En;xt++){for(Ft=vn?st.features[xt].geometry:_n?st.geometry:st,Gt=vn?st.features[xt].properties:_n?st.properties:{},Jt=vn?st.features[xt].bbox:_n?st.bbox:void 0,qt=vn?st.features[xt].id:_n?st.id:void 0,Dt=(jt=!!Ft&&Ft.type==="GeometryCollection")?Ft.geometries.length:1,At=0;At<Dt;At++)if((Ot=jt?Ft.geometries[At]:Ft)!==null)switch(Ot.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_t(Ot,on,Gt,Jt,qt)===!1)return!1;break;case"GeometryCollection":for(Et=0;Et<Ot.geometries.length;Et++)if(_t(Ot.geometries[Et],on,Gt,Jt,qt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_t(null,on,Gt,Jt,qt)===!1)return!1;on++}}function Sf(st,_t){sd(st,function(xt,Et,At,Ot,Dt){var Ft,jt=xt===null?null:xt.type;switch(jt){case null:case"Point":case"LineString":case"Polygon":return _t(sa.feature(xt,At,{bbox:Ot,id:Dt}),Et,0)!==!1&&void 0}switch(jt){case"MultiPoint":Ft="Point";break;case"MultiLineString":Ft="LineString";break;case"MultiPolygon":Ft="Polygon"}for(var Gt=0;Gt<xt.coordinates.length;Gt++){var Jt={type:Ft,coordinates:xt.coordinates[Gt]};if(_t(sa.feature(Jt,At),Et,Gt)===!1)return!1}})}function ac(st,_t){Sf(st,function(xt,Et,At){var Ot=0;if(xt.geometry){var Dt=xt.geometry.type;if(Dt!=="Point"&&Dt!=="MultiPoint"){var Ft,jt=0,Gt=0,Jt=0;return rd(xt,function(qt,on,vn,_n,En){if(Ft===void 0||Et>jt||_n>Gt||En>Jt)return Ft=qt,jt=Et,Gt=_n,Jt=En,void(Ot=0);var cn=sa.lineString([Ft,qt],xt.properties);if(_t(cn,Et,At,En,Ot)===!1)return!1;Ot++,Ft=qt})!==!1&&void 0}}})}function Nd(st,_t){if(!st)throw new Error("geojson is required");Sf(st,function(xt,Et,At){if(xt.geometry!==null){var Ot=xt.geometry.type,Dt=xt.geometry.coordinates;switch(Ot){case"LineString":if(_t(xt,Et,At,0,0)===!1)return!1;break;case"Polygon":for(var Ft=0;Ft<Dt.length;Ft++)if(_t(sa.lineString(Dt[Ft],xt.properties),Et,At,Ft)===!1)return!1}}})}var Bm=function(st){var _t=[];return rd(st,function(xt){_t.push(xt)}),_t},Sp=rd,Pg=function(st,_t,xt,Et){var At=xt;return rd(st,function(Ot,Dt,Ft,jt,Gt){At=Dt===0&&xt===void 0?Ot:_t(At,Ot,Dt,Ft,jt,Gt)},Et),At},Oc=Ep,Fm=function(st,_t,xt){var Et=xt;return Ep(st,function(At,Ot){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot)}),Et},rh=function(st,_t){if(_t=_t||{},!sa.isObject(_t))throw new Error("options is invalid");var xt,Et=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Dt=_t.coordIndex||0,Ft=_t.properties;switch(st.type){case"FeatureCollection":Et<0&&(Et=st.features.length+Et),Ft=Ft||st.features[Et].properties,xt=st.features[Et].geometry;break;case"Feature":Ft=Ft||st.properties,xt=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=st;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var jt=xt.coordinates;switch(xt.type){case"Point":return sa.point(jt,Ft,_t);case"MultiPoint":return At<0&&(At=jt.length+At),sa.point(jt[At],Ft,_t);case"LineString":return Dt<0&&(Dt=jt.length+Dt),sa.point(jt[Dt],Ft,_t);case"Polygon":return Ot<0&&(Ot=jt.length+Ot),Dt<0&&(Dt=jt[Ot].length+Dt),sa.point(jt[Ot][Dt],Ft,_t);case"MultiLineString":return At<0&&(At=jt.length+At),Dt<0&&(Dt=jt[At].length+Dt),sa.point(jt[At][Dt],Ft,_t);case"MultiPolygon":return At<0&&(At=jt.length+At),Ot<0&&(Ot=jt[At].length+Ot),Dt<0&&(Dt=jt[At][Ot].length-Dt),sa.point(jt[At][Ot][Dt],Ft,_t)}throw new Error("geojson is invalid")},zm=function(st,_t){if(_t=_t||{},!sa.isObject(_t))throw new Error("options is invalid");var xt,Et=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Dt=_t.segmentIndex||0,Ft=_t.properties;switch(st.type){case"FeatureCollection":Et<0&&(Et=st.features.length+Et),Ft=Ft||st.features[Et].properties,xt=st.features[Et].geometry;break;case"Feature":Ft=Ft||st.properties,xt=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":xt=st;break;default:throw new Error("geojson is invalid")}if(xt===null)return null;var jt=xt.coordinates;switch(xt.type){case"Point":case"MultiPoint":return null;case"LineString":return Dt<0&&(Dt=jt.length+Dt-1),sa.lineString([jt[Dt],jt[Dt+1]],Ft,_t);case"Polygon":return Ot<0&&(Ot=jt.length+Ot),Dt<0&&(Dt=jt[Ot].length+Dt-1),sa.lineString([jt[Ot][Dt],jt[Ot][Dt+1]],Ft,_t);case"MultiLineString":return At<0&&(At=jt.length+At),Dt<0&&(Dt=jt[At].length+Dt-1),sa.lineString([jt[At][Dt],jt[At][Dt+1]],Ft,_t);case"MultiPolygon":return At<0&&(At=jt.length+At),Ot<0&&(Ot=jt[At].length+Ot),Dt<0&&(Dt=jt[At][Ot].length-Dt-1),sa.lineString([jt[At][Ot][Dt],jt[At][Ot][Dt+1]],Ft,_t)}throw new Error("geojson is invalid")},Ic=Sf,Ja=function(st,_t,xt){var Et=xt;return Sf(st,function(At,Ot,Dt){Et=Ot===0&&Dt===0&&xt===void 0?At:_t(Et,At,Ot,Dt)}),Et},Lg=sd,ad=function(st,_t,xt){var Et=xt;return sd(st,function(At,Ot,Dt,Ft,jt){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot,Dt,Ft,jt)}),Et},Nl=Nd,ou=function(st,_t,xt){var Et=xt;return Nd(st,function(At,Ot,Dt,Ft){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot,Dt,Ft)}),Et},Bu=od,Mc=function(st,_t,xt){var Et=xt;return od(st,function(At,Ot){Et=Ot===0&&xt===void 0?At:_t(Et,At,Ot)}),Et},$d=ac,Cf=function(st,_t,xt){var Et=xt,At=!1;return ac(st,function(Ot,Dt,Ft,jt,Gt){Et=At===!1&&xt===void 0?Ot:_t(Et,Ot,Dt,Ft,jt,Gt),At=!0}),Et},Tf=Object.defineProperty({coordAll:Bm,coordEach:Sp,coordReduce:Pg,featureEach:Oc,featureReduce:Fm,findPoint:rh,findSegment:zm,flattenEach:Ic,flattenReduce:Ja,geomEach:Lg,geomReduce:ad,lineEach:Nl,lineReduce:ou,propEach:Bu,propReduce:Mc,segmentEach:$d,segmentReduce:Cf},"__esModule",{value:!0});function Cp(st){var _t=[1/0,1/0,-1/0,-1/0];return Tf.coordEach(st,function(xt){_t[0]>xt[0]&&(_t[0]=xt[0]),_t[1]>xt[1]&&(_t[1]=xt[1]),_t[2]<xt[0]&&(_t[2]=xt[0]),_t[3]<xt[1]&&(_t[3]=xt[1])}),_t}Cp.default=Cp;var kf=Cp,ld=Object.defineProperty({default:kf},"__esModule",{value:!0}).default,Og=Tf.featureEach,Ig=(Tf.coordEach,sa.polygon,sa.featureCollection);function Bd(st){var _t=Ir(st);return _t.insert=function(xt){if(xt.type!=="Feature")throw new Error("invalid feature");return xt.bbox=xt.bbox?xt.bbox:ld(xt),Ir.prototype.insert.call(this,xt)},_t.load=function(xt){var Et=[];return Array.isArray(xt)?xt.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:ld(At),Et.push(At)}):Og(xt,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:ld(At),Et.push(At)}),Ir.prototype.load.call(this,Et)},_t.remove=function(xt,Et){if(xt.type!=="Feature")throw new Error("invalid feature");return xt.bbox=xt.bbox?xt.bbox:ld(xt),Ir.prototype.remove.call(this,xt,Et)},_t.clear=function(){return Ir.prototype.clear.call(this)},_t.search=function(xt){var Et=Ir.prototype.search.call(this,this.toBBox(xt));return Ig(Et)},_t.collides=function(xt){return Ir.prototype.collides.call(this,this.toBBox(xt))},_t.all=function(){var xt=Ir.prototype.all.call(this);return Ig(xt)},_t.toJSON=function(){return Ir.prototype.toJSON.call(this)},_t.fromJSON=function(xt){return Ir.prototype.fromJSON.call(this,xt)},_t.toBBox=function(xt){var Et;if(xt.bbox)Et=xt.bbox;else if(Array.isArray(xt)&&xt.length===4)Et=xt;else if(Array.isArray(xt)&&xt.length===6)Et=[xt[0],xt[1],xt[3],xt[4]];else if(xt.type==="Feature")Et=ld(xt);else{if(xt.type!=="FeatureCollection")throw new Error("invalid geojson");Et=ld(xt)}return{minX:Et[0],minY:Et[1],maxX:Et[2],maxY:Et[3]}},_t}var Sa=Bd,Fu=Bd;function ll(st,_t){var xt={},Et=[];if(st.type==="LineString"&&(st=wt(st)),_t.type==="LineString"&&(_t=wt(_t)),st.type==="Feature"&&_t.type==="Feature"&&st.geometry!==null&&_t.geometry!==null&&st.geometry.type==="LineString"&&_t.geometry.type==="LineString"&&st.geometry.coordinates.length===2&&_t.geometry.coordinates.length===2){var At=Tp(st,_t);return At&&Et.push(At),Wt(Et)}var Ot=Sa();return Ot.load($u(_t)),rr($u(st),function(Dt){rr(Ot.search(Dt),function(Ft){var jt=Tp(Dt,Ft);if(jt){var Gt=Nn(jt).join(",");xt[Gt]||(xt[Gt]=!0,Et.push(jt))}})}),Wt(Et)}function Tp(st,_t){var xt=Nn(st),Et=Nn(_t);if(xt.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(Et.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var At=xt[0][0],Ot=xt[0][1],Dt=xt[1][0],Ft=xt[1][1],jt=Et[0][0],Gt=Et[0][1],Jt=Et[1][0],qt=Et[1][1],on=(qt-Gt)*(Dt-At)-(Jt-jt)*(Ft-Ot),vn=(Jt-jt)*(Ot-Gt)-(qt-Gt)*(At-jt),_n=(Dt-At)*(Ot-Gt)-(Ft-Ot)*(At-jt);if(on===0)return null;var En=vn/on,cn=_n/on;return En>=0&&En<=1&&cn>=0&&cn<=1?kt([At+En*(Dt-At),Ot+En*(Ft-Ot)]):null}function su(st,_t,xt){xt===void 0&&(xt={});var Et=kt([1/0,1/0],{dist:1/0}),At=0;return Ar(st,function(Ot){for(var Dt=Nn(Ot),Ft=0;Ft<Dt.length-1;Ft++){var jt=kt(Dt[Ft]);jt.properties.dist=vo(_t,jt,xt);var Gt=kt(Dt[Ft+1]);Gt.properties.dist=vo(_t,Gt,xt);var Jt=vo(jt,Gt,xt),qt=Math.max(jt.properties.dist,Gt.properties.dist),on=Za(jt,Gt),vn=Ys(_t,qt,on+90,xt),_n=Ys(_t,qt,on-90,xt),En=ll(zt([vn.geometry.coordinates,_n.geometry.coordinates]),zt([jt.geometry.coordinates,Gt.geometry.coordinates])),cn=null;En.features.length>0&&((cn=En.features[0]).properties.dist=vo(_t,cn,xt),cn.properties.location=At+vo(jt,cn,xt)),jt.properties.dist<Et.properties.dist&&((Et=jt).properties.index=Ft,Et.properties.location=At),Gt.properties.dist<Et.properties.dist&&((Et=Gt).properties.index=Ft+1,Et.properties.location=At+Jt),cn&&cn.properties.dist<Et.properties.dist&&((Et=cn).properties.index=Ft),At+=Jt}}),Et}function Fd(st,_t,xt){xt===void 0&&(xt={});var Et=un(st),At=un(_t);return At[0]+=At[0]-Et[0]>180?-360:Et[0]-At[0]>180?360:0,Pn(function(Ot,Dt,Ft){var jt=Ft=Ft===void 0?rt:Number(Ft),Gt=Ot[1]*Math.PI/180,Jt=Dt[1]*Math.PI/180,qt=Jt-Gt,on=Math.abs(Dt[0]-Ot[0])*Math.PI/180;on>Math.PI&&(on-=2*Math.PI);var vn=Math.log(Math.tan(Jt/2+Math.PI/4)/Math.tan(Gt/2+Math.PI/4)),_n=Math.abs(vn)>1e-11?qt/vn:Math.cos(Gt);return Math.sqrt(qt*qt+_n*_n*on*on)*jt}(Et,At),"meters",xt.units)}function kp(st,_t,xt){if(xt===void 0&&(xt={}),xt.method||(xt.method="geodesic"),xt.units||(xt.units="kilometers"),!st)throw new Error("pt is required");if(Array.isArray(st)?st=kt(st):st.type==="Point"?st=wt(st):$n(st,"Point","point"),!_t)throw new Error("line is required");Array.isArray(_t)?_t=zt(_t):_t.type==="LineString"?_t=wt(_t):$n(_t,"LineString","line");var Et=1/0,At=st.geometry.coordinates;return ii(_t,function(Ot){var Dt=Ot.geometry.coordinates[0],Ft=Ot.geometry.coordinates[1],jt=function(Gt,Jt,qt,on){var vn=[qt[0]-Jt[0],qt[1]-Jt[1]],_n=Mg([Gt[0]-Jt[0],Gt[1]-Jt[1]],vn);if(_n<=0)return ih(Gt,Jt,{method:on.method,units:"degrees"});var En=Mg(vn,vn);if(En<=_n)return ih(Gt,qt,{method:on.method,units:"degrees"});var cn=_n/En,Hn=[Jt[0]+cn*vn[0],Jt[1]+cn*vn[1]];return ih(Gt,Hn,{method:on.method,units:"degrees"})}(At,Dt,Ft,xt);jt<Et&&(Et=jt)}),Pn(Et,"degrees",xt.units)}function Mg(st,_t){return st[0]*_t[0]+st[1]*_t[1]}function ih(st,_t,xt){return xt.method==="planar"?Fd(st,_t,xt):vo(st,_t,xt)}function Hm(st,_t,xt,Et,At,Ot,Dt,Ft){var jt,Gt,Jt,qt,on={x:null,y:null,onLine1:!1,onLine2:!1};return(jt=(Ft-Ot)*(xt-st)-(Dt-At)*(Et-_t))===0?on.x!==null&&on.y!==null&&on:(qt=(xt-st)*(Gt=_t-Ot)-(Et-_t)*(Jt=st-At),Gt=((Dt-At)*Gt-(Ft-Ot)*Jt)/jt,Jt=qt/jt,on.x=st+Gt*(xt-st),on.y=_t+Gt*(Et-_t),Gt>=0&&Gt<=1&&(on.onLine1=!0),Jt>=0&&Jt<=1&&(on.onLine2=!0),!(!on.onLine1||!on.onLine2)&&[on.x,on.y])}function kh(st){for(var _t=function(on){return on.type!=="FeatureCollection"?on.type!=="Feature"?Wt([wt(on)]):Wt([on]):on}(st),xt=Ua(_t),Et=!1,At=0;!Et&&At<_t.features.length;){var Ot,Dt=_t.features[At].geometry,Ft=!1;if(Dt.type==="Point")xt.geometry.coordinates[0]===Dt.coordinates[0]&&xt.geometry.coordinates[1]===Dt.coordinates[1]&&(Et=!0);else if(Dt.type==="MultiPoint"){var jt=!1;for(Ot=0;!jt&&Ot<Dt.coordinates.length;)xt.geometry.coordinates[0]===Dt.coordinates[Ot][0]&&xt.geometry.coordinates[1]===Dt.coordinates[Ot][1]&&(Et=!0,jt=!0),Ot++}else if(Dt.type==="LineString")for(Ot=0;!Ft&&Ot<Dt.coordinates.length-1;)Af(xt.geometry.coordinates[0],xt.geometry.coordinates[1],Dt.coordinates[Ot][0],Dt.coordinates[Ot][1],Dt.coordinates[Ot+1][0],Dt.coordinates[Ot+1][1])&&(Ft=!0,Et=!0),Ot++;else if(Dt.type==="MultiLineString")for(var Gt=0;Gt<Dt.coordinates.length;){Ft=!1,Ot=0;for(var Jt=Dt.coordinates[Gt];!Ft&&Ot<Jt.length-1;)Af(xt.geometry.coordinates[0],xt.geometry.coordinates[1],Jt[Ot][0],Jt[Ot][1],Jt[Ot+1][0],Jt[Ot+1][1])&&(Ft=!0,Et=!0),Ot++;Gt++}else Dt.type!=="Polygon"&&Dt.type!=="MultiPolygon"||yo(xt,Dt)&&(Et=!0);At++}if(Et)return xt;var qt=Wt([]);for(At=0;At<_t.features.length;At++)qt.features=qt.features.concat(Eo(_t.features[At]).features);return kt(Yl(xt,qt).geometry.coordinates)}function Af(st,_t,xt,Et,At,Ot){return Math.sqrt((At-xt)*(At-xt)+(Ot-Et)*(Ot-Et))===Math.sqrt((st-xt)*(st-xt)+(_t-Et)*(_t-Et))+Math.sqrt((At-st)*(At-st)+(Ot-_t)*(Ot-_t))}Sa.default=Fu;var zd=6378137;function Hd(st){return Or(st,function(_t,xt){return _t+function(Et){var At,Ot=0;switch(Et.type){case"Polygon":return zu(Et.coordinates);case"MultiPolygon":for(At=0;At<Et.coordinates.length;At++)Ot+=zu(Et.coordinates[At]);return Ot;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(xt)},0)}function zu(st){var _t=0;if(st&&st.length>0){_t+=Math.abs(Pf(st[0]));for(var xt=1;xt<st.length;xt++)_t-=Math.abs(Pf(st[xt]))}return _t}function Pf(st){var _t,xt,Et,At,Ot,Dt,Ft=0,jt=st.length;if(jt>2){for(Dt=0;Dt<jt;Dt++)Dt===jt-2?(Et=jt-2,At=jt-1,Ot=0):Dt===jt-1?(Et=jt-1,At=0,Ot=1):(Et=Dt,At=Dt+1,Ot=Dt+2),_t=st[Et],xt=st[At],Ft+=(Lf(st[Ot][0])-Lf(_t[0]))*Math.sin(Lf(xt[1]));Ft=Ft*zd*zd/2}return Ft}function Lf(st){return st*Math.PI/180}function Ah(st,_t){return _t===void 0&&(_t={}),ar(st,function(xt,Et){var At=Et.geometry.coordinates;return xt+vo(At[0],At[1],_t)},0)}function Of(st,_t,xt,Et){if(!gn(Et=Et||{}))throw new Error("options is invalid");var At,Ot=[];if(st.type==="Feature")At=st.geometry.coordinates;else{if(st.type!=="LineString")throw new Error("input must be a LineString Feature or Geometry");At=st.coordinates}for(var Dt,Ft,jt,Gt=At.length,Jt=0,qt=0;qt<At.length&&!(_t>=Jt&&qt===At.length-1);qt++){if(Jt>_t&&Ot.length===0){if(!(Dt=_t-Jt))return Ot.push(At[qt]),zt(Ot);Ft=Za(At[qt],At[qt-1])-180,jt=Ys(At[qt],Dt,Ft,Et),Ot.push(jt.geometry.coordinates)}if(Jt>=xt)return(Dt=xt-Jt)?(Ft=Za(At[qt],At[qt-1])-180,jt=Ys(At[qt],Dt,Ft,Et),Ot.push(jt.geometry.coordinates),zt(Ot)):(Ot.push(At[qt]),zt(Ot));if(Jt>=_t&&Ot.push(At[qt]),qt===At.length-1)return zt(Ot);Jt+=vo(At[qt],At[qt+1],Et)}if(Jt<_t&&At.length===Gt)throw new Error("Start position is beyond line");var on=At[At.length-1];return zt([on,on])}function yl(st,_t,xt){xt===void 0&&(xt={});for(var Et=un(st),At=Nn(_t),Ot=0;Ot<At.length-1;Ot++){var Dt=!1;if(xt.ignoreEndVertices&&(Ot===0&&(Dt="start"),Ot===At.length-2&&(Dt="end"),Ot===0&&Ot+1===At.length-1&&(Dt="both")),Vd(At[Ot],At[Ot+1],Et,Dt,xt.epsilon===void 0?null:xt.epsilon))return!0}return!1}function Vd(st,_t,xt,Et,At){var Ot=xt[0],Dt=xt[1],Ft=st[0],jt=st[1],Gt=_t[0],Jt=_t[1],qt=Gt-Ft,on=Jt-jt,vn=(xt[0]-Ft)*on-(xt[1]-jt)*qt;if(At!==null){if(Math.abs(vn)>At)return!1}else if(vn!==0)return!1;return Et?Et==="start"?Math.abs(qt)>=Math.abs(on)?qt>0?Ft<Ot&&Ot<=Gt:Gt<=Ot&&Ot<Ft:on>0?jt<Dt&&Dt<=Jt:Jt<=Dt&&Dt<jt:Et==="end"?Math.abs(qt)>=Math.abs(on)?qt>0?Ft<=Ot&&Ot<Gt:Gt<Ot&&Ot<=Ft:on>0?jt<=Dt&&Dt<Jt:Jt<Dt&&Dt<=jt:Et==="both"&&(Math.abs(qt)>=Math.abs(on)?qt>0?Ft<Ot&&Ot<Gt:Gt<Ot&&Ot<Ft:on>0?jt<Dt&&Dt<Jt:Jt<Dt&&Dt<jt):Math.abs(qt)>=Math.abs(on)?qt>0?Ft<=Ot&&Ot<=Gt:Gt<=Ot&&Ot<=Ft:on>0?jt<=Dt&&Dt<=Jt:Jt<=Dt&&Dt<=jt}function Ap(st,_t){var xt=Wn(st),Et=Wn(_t),At=xt.type,Ot=Et.type;switch(At){case"Point":switch(Ot){case"MultiPoint":return function(Dt,Ft){var jt,Gt=!1;for(jt=0;jt<Ft.coordinates.length;jt++)if(Lp(Ft.coordinates[jt],Dt.coordinates)){Gt=!0;break}return Gt}(xt,Et);case"LineString":return yl(xt,Et,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return yo(xt,Et,{ignoreBoundary:!0});default:throw new Error("feature2 "+Ot+" geometry not supported")}case"MultiPoint":switch(Ot){case"MultiPoint":return function(Dt,Ft){for(var jt=0;jt<Dt.coordinates.length;jt++){for(var Gt=!1,Jt=0;Jt<Ft.coordinates.length;Jt++)Lp(Dt.coordinates[jt],Ft.coordinates[Jt])&&(Gt=!0);if(!Gt)return!1}return!0}(xt,Et);case"LineString":return function(Dt,Ft){for(var jt=!1,Gt=0;Gt<Dt.coordinates.length;Gt++){if(!yl(Dt.coordinates[Gt],Ft))return!1;jt||(jt=yl(Dt.coordinates[Gt],Ft,{ignoreEndVertices:!0}))}return jt}(xt,Et);case"Polygon":case"MultiPolygon":return function(Dt,Ft){for(var jt=!0,Gt=!1,Jt=0;Jt<Dt.coordinates.length;Jt++){if(!(Gt=yo(Dt.coordinates[1],Ft))){jt=!1;break}Gt=yo(Dt.coordinates[1],Ft,{ignoreBoundary:!0})}return jt&&Gt}(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"LineString":return function(Dt,Ft){for(var jt=0;jt<Dt.coordinates.length;jt++)if(!yl(Dt.coordinates[jt],Ft))return!1;return!0}(xt,Et);case"Polygon":case"MultiPolygon":return function(Dt,Ft){var jt=dn(Ft),Gt=dn(Dt);if(!Pp(jt,Gt))return!1;for(var Jt=!1,qt=0;qt<Dt.coordinates.length-1;qt++){if(!yo(Dt.coordinates[qt],Ft))return!1;Jt||(Jt=yo(Dt.coordinates[qt],Ft,{ignoreBoundary:!0})),!Jt&&(Jt=yo(Op(Dt.coordinates[qt],Dt.coordinates[qt+1]),Ft,{ignoreBoundary:!0}))}return Jt}(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"Polygon":case"MultiPolygon":return function(Dt,Ft){var jt=dn(Dt);if(!Pp(dn(Ft),jt))return!1;for(var Gt=0;Gt<Dt.coordinates[0].length;Gt++)if(!yo(Dt.coordinates[0][Gt],Ft))return!1;return!0}(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}}function Pp(st,_t){return!(st[0]>_t[0])&&!(st[2]<_t[2])&&!(st[1]>_t[1])&&!(st[3]<_t[3])}function Lp(st,_t){return st[0]===_t[0]&&st[1]===_t[1]}function Op(st,_t){return[(st[0]+_t[0])/2,(st[1]+_t[1])/2]}function If(st,_t,xt){xt===void 0&&(xt={}),xt.mask&&!xt.units&&(xt.units="kilometers");for(var Et=[],At=st[0],Ot=st[1],Dt=st[2],Ft=st[3],jt=_t/vo([At,Ot],[Dt,Ot],xt)*(Dt-At),Gt=_t/vo([At,Ot],[At,Ft],xt)*(Ft-Ot),Jt=Dt-At,qt=Ft-Ot,on=Math.floor(Jt/jt),vn=(qt-Math.floor(qt/Gt)*Gt)/2,_n=At+(Jt-on*jt)/2;_n<=Dt;){for(var En=Ot+vn;En<=Ft;){var cn=kt([_n,En],xt.properties);xt.mask?Ap(cn,xt.mask)&&Et.push(cn):Et.push(cn),En+=Gt}_n+=jt}return Wt(Et)}function ud(st,_t){_t===void 0&&(_t={});var xt=_t.precision,Et=_t.coordinates,At=_t.mutate;if(xt=xt==null||isNaN(xt)?6:xt,Et=Et==null||isNaN(Et)?3:Et,!st)throw new Error("<geojson> is required");if(typeof xt!="number")throw new Error("<precision> must be a number");if(typeof Et!="number")throw new Error("<coordinates> must be a number");At!==!1&&At!==void 0||(st=JSON.parse(JSON.stringify(st)));var Ot=Math.pow(10,xt);return yn(st,function(Dt){(function(Ft,jt,Gt){Ft.length>Gt&&Ft.splice(Gt,Ft.length);for(var Jt=0;Jt<Ft.length;Jt++)Ft[Jt]=Math.round(Ft[Jt]*jt)/jt})(Dt,Ot,Et)}),st}function Ud(st){if(!st)throw new Error("geojson is required");var _t=[];return Ar(st,function(xt){_t.push(xt)}),Wt(_t)}function Rg(st,_t,xt){if(st.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");xt===void 0&&(xt=1);var Et=st.geometry.coordinates,At=[],Ot={};if(xt){for(var Dt=[],Ft=0;Ft<Et.length;Ft++)for(var jt=0;jt<Et[Ft].length-1;jt++)Dt.push(En(Ft,jt));var Gt=Ir();Gt.load(Dt)}for(var Jt=0;Jt<Et.length;Jt++)for(var qt=0;qt<Et[Jt].length-1;qt++)if(xt)Gt.search(En(Jt,qt)).forEach(function(cn){var Hn=cn.ring,nr=cn.edge;_n(Jt,qt,Hn,nr)});else for(var on=0;on<Et.length;on++)for(var vn=0;vn<Et[on].length-1;vn++)_n(Jt,qt,on,vn);return _t||(At={type:"Feature",geometry:{type:"MultiPoint",coordinates:At}}),At;function _n(cn,Hn,nr,bn){var zn,Un,qn=Et[cn][Hn],Gn=Et[cn][Hn+1],Xr=Et[nr][bn],Br=Et[nr][bn+1],Jr=function(Wr,jr,Hr,ei){if(cd(Wr,Hr)||cd(Wr,ei)||cd(jr,Hr)||cd(ei,Hr))return null;var Gr=Wr[0],si=Wr[1],Tr=jr[0],Ki=jr[1],Ci=Hr[0],$o=Hr[1],Yi=ei[0],po=ei[1],os=(Gr-Tr)*($o-po)-(si-Ki)*(Ci-Yi);return os===0?null:[((Gr*Ki-si*Tr)*(Ci-Yi)-(Gr-Tr)*(Ci*po-$o*Yi))/os,((Gr*Ki-si*Tr)*($o-po)-(si-Ki)*(Ci*po-$o*Yi))/os]}(qn,Gn,Xr,Br);if(Jr!==null&&(zn=Gn[0]!==qn[0]?(Jr[0]-qn[0])/(Gn[0]-qn[0]):(Jr[1]-qn[1])/(Gn[1]-qn[1]),Un=Br[0]!==Xr[0]?(Jr[0]-Xr[0])/(Br[0]-Xr[0]):(Jr[1]-Xr[1])/(Br[1]-Xr[1]),!(zn>=1||zn<=0||Un>=1||Un<=0))){var Fr=Jr,oi=!Ot[Fr];oi&&(Ot[Fr]=!0),_t?At.push(_t(Jr,cn,Hn,qn,Gn,zn,nr,bn,Xr,Br,Un,oi)):At.push(Jr)}}function En(cn,Hn){var nr,bn,zn,Un,qn=Et[cn][Hn],Gn=Et[cn][Hn+1];return qn[0]<Gn[0]?(nr=qn[0],bn=Gn[0]):(nr=Gn[0],bn=qn[0]),qn[1]<Gn[1]?(zn=qn[1],Un=Gn[1]):(zn=Gn[1],Un=qn[1]),{minX:nr,minY:zn,maxX:bn,maxY:Un,ring:cn,edge:Hn}}}function cd(st,_t){if(!st||!_t||st.length!==_t.length)return!1;for(var xt=0,Et=st.length;xt<Et;xt++)if(st[xt]instanceof Array&&_t[xt]instanceof Array){if(!cd(st[xt],_t[xt]))return!1}else if(st[xt]!==_t[xt])return!1;return!0}function Dg(st){if(st.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(st.geometry===void 0||st.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(st.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var _t=st.geometry.coordinates.length,xt=[],Et=0;Et<_t;Et++){var At=st.geometry.coordinates[Et];Qt(At[0],At[At.length-1])||At.push(At[0]),xt.push.apply(xt,At.slice(0,At.length-1))}if(!function(Yi){for(var po={},os=1,js=0,fl=Yi.length;js<fl;++js){if(Object.prototype.hasOwnProperty.call(po,Yi[js])){os=0;break}po[Yi[js]]=1}return os}(xt))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var Ot=xt.length,Dt=Rg(st,function(Yi,po,os,js,fl,bg,Ld,xg,wg,vp,Lm,_p){return[Yi,po,os,js,fl,bg,Ld,xg,wg,vp,Lm,_p]}),Ft=Dt.length;if(Ft==0){var jt=[];for(Et=0;Et<_t;Et++)jt.push(Mt([st.geometry.coordinates[Et]],{parent:-1,winding:Vt(st.geometry.coordinates[Et])}));var Gt=Wt(jt);return Ki(),Ci(),Gt}var Jt=[],qt=[];for(Et=0;Et<_t;Et++){Jt.push([]);for(var on=0;on<st.geometry.coordinates[Et].length-1;on++)Jt[Et].push([new Ip(st.geometry.coordinates[Et][fn(on+1,st.geometry.coordinates[Et].length-1)],1,[Et,on],[Et,fn(on+1,st.geometry.coordinates[Et].length-1)],void 0)]),qt.push(new jd(st.geometry.coordinates[Et][on],[Et,fn(on-1,st.geometry.coordinates[Et].length-1)],[Et,on],void 0,void 0,!1,!0))}for(Et=0;Et<Ft;Et++)Jt[Dt[Et][1]][Dt[Et][2]].push(new Ip(Dt[Et][0],Dt[Et][5],[Dt[Et][1],Dt[Et][2]],[Dt[Et][6],Dt[Et][7]],void 0)),Dt[Et][11]&&qt.push(new jd(Dt[Et][0],[Dt[Et][1],Dt[Et][2]],[Dt[Et][6],Dt[Et][7]],void 0,void 0,!0,!0));var vn=qt.length;for(Et=0;Et<Jt.length;Et++)for(on=0;on<Jt[Et].length;on++)Jt[Et][on].sort(function(Yi,po){return Yi.param<po.param?-1:1});var _n=[];for(Et=0;Et<vn;Et++)_n.push({minX:qt[Et].coord[0],minY:qt[Et].coord[1],maxX:qt[Et].coord[0],maxY:qt[Et].coord[1],index:Et});var En=Ir();for(En.load(_n),Et=0;Et<Jt.length;Et++)for(on=0;on<Jt[Et].length;on++)for(var cn=0;cn<Jt[Et][on].length;cn++){nr=cn==Jt[Et][on].length-1?Jt[Et][fn(on+1,st.geometry.coordinates[Et].length-1)][0].coord:Jt[Et][on][cn+1].coord;var Hn=En.search({minX:nr[0],minY:nr[1],maxX:nr[0],maxY:nr[1]})[0];Jt[Et][on][cn].nxtIsectAlongEdgeIn=Hn.index}for(Et=0;Et<Jt.length;Et++)for(on=0;on<Jt[Et].length;on++)for(cn=0;cn<Jt[Et][on].length;cn++){var nr=Jt[Et][on][cn].coord,bn=(Hn=En.search({minX:nr[0],minY:nr[1],maxX:nr[0],maxY:nr[1]})[0]).index;bn<Ot?qt[bn].nxtIsectAlongRingAndEdge2=Jt[Et][on][cn].nxtIsectAlongEdgeIn:Qt(qt[bn].ringAndEdge1,Jt[Et][on][cn].ringAndEdgeIn)?qt[bn].nxtIsectAlongRingAndEdge1=Jt[Et][on][cn].nxtIsectAlongEdgeIn:qt[bn].nxtIsectAlongRingAndEdge2=Jt[Et][on][cn].nxtIsectAlongEdgeIn}var zn=[];for(Et=0,on=0;on<_t;on++){var Un=Et;for(cn=0;cn<st.geometry.coordinates[on].length-1;cn++)qt[Et].coord[0]<qt[Un].coord[0]&&(Un=Et),Et++;var qn=qt[Un].nxtIsectAlongRingAndEdge2;for(cn=0;cn<qt.length;cn++)if(qt[cn].nxtIsectAlongRingAndEdge1==Un||qt[cn].nxtIsectAlongRingAndEdge2==Un){var Gn=cn;break}var Xr=It([qt[Gn].coord,qt[Un].coord,qt[qn].coord],!0)?1:-1;zn.push({isect:Un,parent:-1,winding:Xr})}for(zn.sort(function(Yi,po){return qt[Yi.isect].coord>qt[po.isect].coord?-1:1}),jt=[];zn.length>0;){var Br=zn.pop(),Jr=Br.isect,Fr=Br.parent,oi=Br.winding,Wr=jt.length,jr=[qt[Jr].coord],Hr=Jr;if(qt[Jr].ringAndEdge1Walkable)var ei=qt[Jr].ringAndEdge1,Gr=qt[Jr].nxtIsectAlongRingAndEdge1;else ei=qt[Jr].ringAndEdge2,Gr=qt[Jr].nxtIsectAlongRingAndEdge2;for(;!Qt(qt[Jr].coord,qt[Gr].coord);){jr.push(qt[Gr].coord);var si=void 0;for(Et=0;Et<zn.length;Et++)if(zn[Et].isect==Gr){si=Et;break}if(si!=null&&zn.splice(si,1),Qt(ei,qt[Gr].ringAndEdge1)){if(ei=qt[Gr].ringAndEdge2,qt[Gr].ringAndEdge2Walkable=!1,qt[Gr].ringAndEdge1Walkable){var Tr={isect:Gr};It([qt[Hr].coord,qt[Gr].coord,qt[qt[Gr].nxtIsectAlongRingAndEdge2].coord],oi==1)?(Tr.parent=Fr,Tr.winding=-oi):(Tr.parent=Wr,Tr.winding=oi),zn.push(Tr)}Hr=Gr,Gr=qt[Gr].nxtIsectAlongRingAndEdge2}else ei=qt[Gr].ringAndEdge1,qt[Gr].ringAndEdge1Walkable=!1,qt[Gr].ringAndEdge2Walkable&&(Tr={isect:Gr},It([qt[Hr].coord,qt[Gr].coord,qt[qt[Gr].nxtIsectAlongRingAndEdge1].coord],oi==1)?(Tr.parent=Fr,Tr.winding=-oi):(Tr.parent=Wr,Tr.winding=oi),zn.push(Tr)),Hr=Gr,Gr=qt[Gr].nxtIsectAlongRingAndEdge1}jr.push(qt[Gr].coord),jt.push(Mt([jr],{index:Wr,parent:Fr,winding:oi,netWinding:void 0}))}Gt=Wt(jt);function Ki(){for(var Yi=[],po=0;po<Gt.features.length;po++)Gt.features[po].properties.parent==-1&&Yi.push(po);if(Yi.length>1)for(po=0;po<Yi.length;po++){for(var os=-1,js=0;js<Gt.features.length;js++)Yi[po]!=js&&yo(Gt.features[Yi[po]].geometry.coordinates[0][0],Gt.features[js],{ignoreBoundary:!0})&&Hd(Gt.features[js])<1/0&&(os=js);Gt.features[Yi[po]].properties.parent=os}}function Ci(){for(var Yi=0;Yi<Gt.features.length;Yi++)if(Gt.features[Yi].properties.parent==-1){var po=Gt.features[Yi].properties.winding;Gt.features[Yi].properties.netWinding=po,$o(Yi,po)}}function $o(Yi,po){for(var os=0;os<Gt.features.length;os++)if(Gt.features[os].properties.parent==Yi){var js=po+Gt.features[os].properties.winding;Gt.features[os].properties.netWinding=js,$o(os,js)}}return Ki(),Ci(),Gt}var Ip=function(st,_t,xt,Et,At){this.coord=st,this.param=_t,this.ringAndEdgeIn=xt,this.ringAndEdgeOut=Et,this.nxtIsectAlongEdgeIn=At},jd=function(st,_t,xt,Et,At,Ot,Dt){this.coord=st,this.ringAndEdge1=_t,this.ringAndEdge2=xt,this.nxtIsectAlongRingAndEdge1=Et,this.nxtIsectAlongRingAndEdge2=At,this.ringAndEdge1Walkable=Ot,this.ringAndEdge2Walkable=Dt};function It(st,_t){if(_t===void 0&&(_t=!0),st.length!=3)throw new Error("This function requires an array of three points [x,y]");return(st[1][0]-st[0][0])*(st[2][1]-st[0][1])-(st[1][1]-st[0][1])*(st[2][0]-st[0][0])>=0==_t}function Vt(st){for(var _t=0,xt=0;xt<st.length-1;xt++)st[xt][0]<st[_t][0]&&(_t=xt);if(It([st[fn(_t-1,st.length-1)],st[_t],st[fn(_t+1,st.length-1)]],!0))var Et=1;else Et=-1;return Et}function Qt(st,_t){if(!st||!_t||st.length!=_t.length)return!1;for(var xt=0,Et=st.length;xt<Et;xt++)if(st[xt]instanceof Array&&_t[xt]instanceof Array){if(!Qt(st[xt],_t[xt]))return!1}else if(st[xt]!=_t[xt])return!1;return!0}function fn(st,_t){return(st%_t+_t)%_t}var Rn=Math.PI/180,tr=180/Math.PI,Lr=function(st,_t){this.lon=st,this.lat=_t,this.x=Rn*st,this.y=Rn*_t};Lr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Lr.prototype.antipode=function(){var st=-1*this.lat,_t=this.lon<0?180+this.lon:-1*(180-this.lon);return new Lr(_t,st)};var qr=function(){this.coords=[],this.length=0};qr.prototype.move_to=function(st){this.length++,this.coords.push(st)};var ni=function(st){this.properties=st||{},this.geometries=[]};ni.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var st=[],_t=0;_t<this.geometries.length;_t++)st.push(this.geometries[_t].coords);return{geometry:{type:"MultiLineString",coordinates:st},type:"Feature",properties:this.properties}},ni.prototype.wkt=function(){for(var st="",_t="LINESTRING(",xt=function(At){_t+=At[0]+" "+At[1]+","},Et=0;Et<this.geometries.length;Et++){if(this.geometries[Et].coords.length===0)return"LINESTRING(empty)";this.geometries[Et].coords.forEach(xt),st+=_t.substring(0,_t.length-1)+")"}return st};var _i=function(st,_t,xt){if(!st||st.x===void 0||st.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!_t||_t.x===void 0||_t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Lr(st.x,st.y),this.end=new Lr(_t.x,_t.y),this.properties=xt||{};var Et=this.start.x-this.end.x,At=this.start.y-this.end.y,Ot=Math.pow(Math.sin(At/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(Et/2),2);if(this.g=2*Math.asin(Math.sqrt(Ot)),this.g===Math.PI)throw new Error("it appears "+st.view()+" and "+_t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+st+" and "+_t)};function Gi(st,_t){var xt=[],Et=Sa();return Ar(_t,function(At){if(xt.forEach(function(Ft,jt){Ft.id=jt}),xt.length){var Ot=Et.search(At);if(Ot.features.length){var Dt=ys(At,Ot);xt=xt.filter(function(Ft){return Ft.id!==Dt.id}),Et.remove(Dt),rr(Ro(Dt,At),function(Ft){xt.push(Ft),Et.insert(Ft)})}}else(xt=Ro(st,At).features).forEach(function(Ft){Ft.bbox||(Ft.bbox=td(dn(Ft)))}),Et.load(Wt(xt))}),Wt(xt)}function Ro(st,_t){var xt=[],Et=Nn(st)[0],At=Nn(st)[st.geometry.coordinates.length-1];if(ql(Et,un(_t))||ql(At,un(_t)))return Wt([st]);var Ot=Sa(),Dt=$u(st);Ot.load(Dt);var Ft=Ot.search(_t);if(!Ft.features.length)return Wt([st]);var jt=ys(_t,Ft),Gt=vr(Dt,function(Jt,qt,on){var vn=Nn(qt)[1],_n=un(_t);return on===jt.id?(Jt.push(_n),xt.push(zt(Jt)),ql(_n,vn)?[_n]:[_n,vn]):(Jt.push(vn),Jt)},[Et]);return Gt.length>1&&xt.push(zt(Gt)),Wt(xt)}function ys(st,_t){if(!_t.features.length)throw new Error("lines must contain features");if(_t.features.length===1)return _t.features[0];var xt,Et=1/0;return rr(_t,function(At){var Ot=su(At,st).properties.dist;Ot<Et&&(xt=At,Et=Ot)}),xt}function ql(st,_t){return st[0]===_t[0]&&st[1]===_t[1]}function oh(st,_t,xt,Et,At){At===void 0&&(At={});var Ot=At.steps||64,Dt=Ph(xt),Ft=Ph(Et),jt=Array.isArray(st)||st.type!=="Feature"?{}:st.properties;if(Dt===Ft)return zt(Nu(st,_t,At).geometry.coordinates[0],jt);for(var Gt=Dt,Jt=Dt<Ft?Ft:Ft+360,qt=Gt,on=[],vn=0;qt<Jt;)on.push(Ys(st,_t,qt,At).geometry.coordinates),qt=Gt+360*++vn/Ot;return qt>Jt&&on.push(Ys(st,_t,Jt,At).geometry.coordinates),zt(on,jt)}function Ph(st){var _t=st%360;return _t<0&&(_t+=360),_t}function Eu(st,_t){_t===void 0&&(_t={});var xt=Wn(st);switch(_t.properties||st.type!=="Feature"||(_t.properties=st.properties),xt.type){case"Polygon":return Mf(xt,_t);case"MultiPolygon":return function(Et,At){At===void 0&&(At={});var Ot=Wn(Et).coordinates,Dt=At.properties?At.properties:Et.type==="Feature"?Et.properties:{},Ft=[];return Ot.forEach(function(jt){Ft.push(Mp(jt,Dt))}),Wt(Ft)}(xt,_t);default:throw new Error("invalid poly")}}function Mf(st,_t){return _t===void 0&&(_t={}),Mp(Wn(st).coordinates,_t.properties?_t.properties:st.type==="Feature"?st.properties:{})}function Mp(st,_t){return st.length>1?Zt(st,_t):zt(st[0],_t)}function Ng(st,_t){var xt,Et,At;_t===void 0&&(_t={});var Ot=_t.properties,Dt=(xt=_t.autoComplete)===null||xt===void 0||xt,Ft=(Et=_t.orderCoords)===null||Et===void 0||Et;switch((At=_t.mutate)!==null&&At!==void 0&&At||(st=Vo(st)),st.type){case"FeatureCollection":var jt=[];return st.features.forEach(function(Gt){jt.push(Nn(Rp(Gt,{},Dt,Ft)))}),Yt(jt,Ot);default:return Rp(st,Ot,Dt,Ft)}}function Rp(st,_t,xt,Et){_t=_t||(st.type==="Feature"?st.properties:{});var At=Wn(st),Ot=At.coordinates,Dt=At.type;if(!Ot.length)throw new Error("line must contain coordinates");switch(Dt){case"LineString":return xt&&(Ot=sh(Ot)),Mt([Ot],_t);case"MultiLineString":var Ft=[],jt=0;return Ot.forEach(function(Gt){if(xt&&(Gt=sh(Gt)),Et){var Jt=function(qt){var on=qt[0],vn=qt[1],_n=qt[2],En=qt[3];return Math.abs(on-_n)*Math.abs(vn-En)}(dn(zt(Gt)));Jt>jt?(Ft.unshift(Gt),jt=Jt):Ft.push(Gt)}else Ft.push(Gt)}),Mt(Ft,_t);default:throw new Error("geometry type "+Dt+" is not supported")}}function sh(st){var _t=st[0],xt=_t[0],Et=_t[1],At=st[st.length-1],Ot=At[0],Dt=At[1];return xt===Ot&&Et===Dt||st.push(_t),st}function hd(st,_t){var xt,Et,At,Ot,Dt,Ft,jt;for(Et=1;Et<=8;Et*=2){for(xt=[],Ot=!(Qs(At=st[st.length-1],_t)&Et),Dt=0;Dt<st.length;Dt++)(jt=!(Qs(Ft=st[Dt],_t)&Et))!==Ot&&xt.push(Rf(At,Ft,Et,_t)),jt&&xt.push(Ft),At=Ft,Ot=jt;if(!(st=xt).length)break}return xt}function Rf(st,_t,xt,Et){return 8&xt?[st[0]+(_t[0]-st[0])*(Et[3]-st[1])/(_t[1]-st[1]),Et[3]]:4&xt?[st[0]+(_t[0]-st[0])*(Et[1]-st[1])/(_t[1]-st[1]),Et[1]]:2&xt?[Et[2],st[1]+(_t[1]-st[1])*(Et[2]-st[0])/(_t[0]-st[0])]:1&xt?[Et[0],st[1]+(_t[1]-st[1])*(Et[0]-st[0])/(_t[0]-st[0])]:null}function Qs(st,_t){var xt=0;return st[0]<_t[0]?xt|=1:st[0]>_t[2]&&(xt|=2),st[1]<_t[1]?xt|=4:st[1]>_t[3]&&(xt|=8),xt}function Wd(st,_t){for(var xt=[],Et=0,At=st;Et<At.length;Et++){var Ot=hd(At[Et],_t);Ot.length>0&&(Ot[0][0]===Ot[Ot.length-1][0]&&Ot[0][1]===Ot[Ot.length-1][1]||Ot.push(Ot[0]),Ot.length>=4&&xt.push(Ot))}return xt}_i.prototype.interpolate=function(st){var _t=Math.sin((1-st)*this.g)/Math.sin(this.g),xt=Math.sin(st*this.g)/Math.sin(this.g),Et=_t*Math.cos(this.start.y)*Math.cos(this.start.x)+xt*Math.cos(this.end.y)*Math.cos(this.end.x),At=_t*Math.cos(this.start.y)*Math.sin(this.start.x)+xt*Math.cos(this.end.y)*Math.sin(this.end.x),Ot=_t*Math.sin(this.start.y)+xt*Math.sin(this.end.y),Dt=tr*Math.atan2(Ot,Math.sqrt(Math.pow(Et,2)+Math.pow(At,2)));return[tr*Math.atan2(At,Et),Dt]},_i.prototype.Arc=function(st,_t){var xt=[];if(!st||st<=2)xt.push([this.start.lon,this.start.lat]),xt.push([this.end.lon,this.end.lat]);else for(var Et=1/(st-1),At=0;At<st;++At){var Ot=Et*At,Dt=this.interpolate(Ot);xt.push(Dt)}for(var Ft=!1,jt=0,Gt=_t&&_t.offset?_t.offset:10,Jt=180-Gt,qt=-180+Gt,on=360-Gt,vn=1;vn<xt.length;++vn){var _n=xt[vn-1][0],En=xt[vn][0],cn=Math.abs(En-_n);cn>on&&(En>Jt&&_n<qt||_n>Jt&&En<qt)?Ft=!0:cn>jt&&(jt=cn)}var Hn=[];if(Ft&&jt<Gt){var nr=[];Hn.push(nr);for(var bn=0;bn<xt.length;++bn){var zn=parseFloat(xt[bn][0]);if(bn>0&&Math.abs(zn-xt[bn-1][0])>on){var Un=parseFloat(xt[bn-1][0]),qn=parseFloat(xt[bn-1][1]),Gn=parseFloat(xt[bn][0]),Xr=parseFloat(xt[bn][1]);if(Un>-180&&Un<qt&&Gn===180&&bn+1<xt.length&&xt[bn-1][0]>-180&&xt[bn-1][0]<qt){nr.push([-180,xt[bn][1]]),bn++,nr.push([xt[bn][0],xt[bn][1]]);continue}if(Un>Jt&&Un<180&&Gn===-180&&bn+1<xt.length&&xt[bn-1][0]>Jt&&xt[bn-1][0]<180){nr.push([180,xt[bn][1]]),bn++,nr.push([xt[bn][0],xt[bn][1]]);continue}if(Un<qt&&Gn>Jt){var Br=Un;Un=Gn,Gn=Br;var Jr=qn;qn=Xr,Xr=Jr}if(Un>Jt&&Gn<qt&&(Gn+=360),Un<=180&&Gn>=180&&Un<Gn){var Fr=(180-Un)/(Gn-Un),oi=Fr*Xr+(1-Fr)*qn;nr.push([xt[bn-1][0]>Jt?180:-180,oi]),(nr=[]).push([xt[bn-1][0]>Jt?-180:180,oi]),Hn.push(nr)}else nr=[],Hn.push(nr);nr.push([zn,xt[bn][1]])}else nr.push([xt[bn][0],xt[bn][1]])}}else{var Wr=[];Hn.push(Wr);for(var jr=0;jr<xt.length;++jr)Wr.push([xt[jr][0],xt[jr][1]])}for(var Hr=new ni(this.properties),ei=0;ei<Hn.length;++ei){var Gr=new qr;Hr.geometries.push(Gr);for(var si=Hn[ei],Tr=0;Tr<si.length;++Tr)Gr.move_to(si[Tr])}return Hr};var $g=jo(function(st,_t){function xt(Et){var At=[];for(var Ot in Et)At.push(Ot);return At}(st.exports=typeof Object.keys=="function"?Object.keys:xt).shim=xt}),Bg=jo(function(st,_t){var xt=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";function Et(Ot){return Object.prototype.toString.call(Ot)=="[object Arguments]"}function At(Ot){return Ot&&typeof Ot=="object"&&typeof Ot.length=="number"&&Object.prototype.hasOwnProperty.call(Ot,"callee")&&!Object.prototype.propertyIsEnumerable.call(Ot,"callee")||!1}(_t=st.exports=xt?Et:At).supported=Et,_t.unsupported=At}),dd=jo(function(st){var _t=Array.prototype.slice,xt=st.exports=function(Ot,Dt,Ft){return Ft||(Ft={}),Ot===Dt||(Ot instanceof Date&&Dt instanceof Date?Ot.getTime()===Dt.getTime():!Ot||!Dt||typeof Ot!="object"&&typeof Dt!="object"?Ft.strict?Ot===Dt:Ot==Dt:function(jt,Gt,Jt){var qt,on;if(Et(jt)||Et(Gt)||jt.prototype!==Gt.prototype)return!1;if(Bg(jt))return!!Bg(Gt)&&(jt=_t.call(jt),Gt=_t.call(Gt),xt(jt,Gt,Jt));if(At(jt)){if(!At(Gt)||jt.length!==Gt.length)return!1;for(qt=0;qt<jt.length;qt++)if(jt[qt]!==Gt[qt])return!1;return!0}try{var vn=$g(jt),_n=$g(Gt)}catch{return!1}if(vn.length!=_n.length)return!1;for(vn.sort(),_n.sort(),qt=vn.length-1;qt>=0;qt--)if(vn[qt]!=_n[qt])return!1;for(qt=vn.length-1;qt>=0;qt--)if(on=vn[qt],!xt(jt[on],Gt[on],Jt))return!1;return typeof jt==typeof Gt}(Ot,Dt,Ft))};function Et(Ot){return Ot==null}function At(Ot){return!(!Ot||typeof Ot!="object"||typeof Ot.length!="number")&&typeof Ot.copy=="function"&&typeof Ot.slice=="function"&&!(Ot.length>0&&typeof Ot[0]!="number")}});function fd(st,_t,xt){if(xt===void 0&&(xt={}),!gn(xt=xt||{}))throw new Error("options is invalid");var Et,At=xt.tolerance||0,Ot=[],Dt=Sa(),Ft=$u(st);return Dt.load(Ft),ii(_t,function(jt){var Gt=!1;jt&&(rr(Dt.search(jt),function(Jt){if(Gt===!1){var qt=Nn(jt).sort(),on=Nn(Jt).sort();dd(qt,on)||(At===0?yl(qt[0],Jt)&&yl(qt[1],Jt):su(Jt,qt[0]).properties.dist<=At&&su(Jt,qt[1]).properties.dist<=At)?(Gt=!0,Et=Et?Df(Et,jt):jt):(At===0?yl(on[0],jt)&&yl(on[1],jt):su(jt,on[0]).properties.dist<=At&&su(jt,on[1]).properties.dist<=At)&&(Et=Et?Df(Et,Jt):Jt)}}),Gt===!1&&Et&&(Ot.push(Et),Et=void 0))}),Et&&Ot.push(Et),Wt(Ot)}function Df(st,_t){var xt=Nn(_t),Et=Nn(st),At=Et[0],Ot=Et[Et.length-1],Dt=st.geometry.coordinates;return dd(xt[0],At)?Dt.unshift(xt[1]):dd(xt[0],Ot)?Dt.push(xt[1]):dd(xt[1],At)?Dt.unshift(xt[0]):dd(xt[1],Ot)&&Dt.push(xt[0]),st}function Dp(st){var _t=st%360;return _t<0&&(_t+=360),_t}function Gd(st,_t,xt){var Et;return xt===void 0&&(xt={}),(Et=xt.final?Vm(un(_t),un(st)):Vm(un(st),un(_t)))>180?-(360-Et):Et}function Vm(st,_t){var xt=An(st[1]),Et=An(_t[1]),At=An(_t[0]-st[0]);At>Math.PI&&(At-=2*Math.PI),At<-Math.PI&&(At+=2*Math.PI);var Ot=Math.log(Math.tan(Et/2+Math.PI/4)/Math.tan(xt/2+Math.PI/4));return(Cn(Math.atan2(At,Ot))+360)%360}function Nf(st,_t,xt,Et){Et===void 0&&(Et={});var At=_t<0,Ot=Pn(Math.abs(_t),Et.units,"meters");At&&(Ot=-Math.abs(Ot));var Dt=un(st),Ft=function(jt,Gt,Jt,qt){qt=qt===void 0?rt:Number(qt);var on=Gt/qt,vn=jt[0]*Math.PI/180,_n=An(jt[1]),En=An(Jt),cn=on*Math.cos(En),Hn=_n+cn;Math.abs(Hn)>Math.PI/2&&(Hn=Hn>0?Math.PI-Hn:-Math.PI-Hn);var nr=Math.log(Math.tan(Hn/2+Math.PI/4)/Math.tan(_n/2+Math.PI/4)),bn=Math.abs(nr)>1e-11?cn/nr:Math.cos(_n),zn=on*Math.sin(En)/bn;return[(180*(vn+zn)/Math.PI+540)%360-180,180*Hn/Math.PI]}(Dt,Ot,xt);return Ft[0]+=Ft[0]-Dt[0]>180?-360:Dt[0]-Ft[0]>180?360:0,kt(Ft,Et.properties)}function Um(st,_t,xt,Et,At,Ot){for(var Dt=0;Dt<st.length;Dt++){var Ft=st[Dt],jt=st[Dt+1];Dt===st.length-1&&(jt=st[0]),Et=Lh(Ft,jt,_t),xt<=0&&Et>0?Lh(_t,Ft,At)<0||(At=Ft):xt>0&&Et<=0&&(Us(_t,Ft,Ot)||(Ot=Ft)),xt=Et}return[At,Ot]}function Us(st,_t,xt){return Lh(st,_t,xt)>0}function Lh(st,_t,xt){return(_t[0]-st[0])*(xt[1]-st[1])-(xt[0]-st[0])*(_t[1]-st[1])}function Np(st){for(var _t,xt,Et=Nn(st),At=0,Ot=1;Ot<Et.length;)_t=xt||Et[0],At+=((xt=Et[Ot])[0]-_t[0])*(xt[1]+_t[1]),Ot++;return At>0}function Oh(st,_t){switch(st.type==="Feature"?st.geometry.type:st.type){case"GeometryCollection":return gr(st,function(xt){Oh(xt,_t)}),st;case"LineString":return Fg(Nn(st),_t),st;case"Polygon":return pd(Nn(st),_t),st;case"MultiLineString":return Nn(st).forEach(function(xt){Fg(xt,_t)}),st;case"MultiPolygon":return Nn(st).forEach(function(xt){pd(xt,_t)}),st;case"Point":case"MultiPoint":return st}}function Fg(st,_t){Np(st)===_t&&st.reverse()}function pd(st,_t){Np(st[0])!==_t&&st[0].reverse();for(var xt=1;xt<st.length;xt++)Np(st[xt])===_t&&st[xt].reverse()}function jm(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.zProperty||"elevation",Et=_t.flip,At=_t.flags;Qn(st,"Point","input must contain Points");for(var Ot=function(on,vn){var _n={};return rr(on,function(En){var cn=Nn(En)[1];_n[cn]||(_n[cn]=[]),_n[cn].push(En)}),Object.keys(_n).map(function(En){return _n[En].sort(function(cn,Hn){return Nn(cn)[0]-Nn(Hn)[0]})}).sort(function(En,cn){return vn?Nn(En[0])[1]-Nn(cn[0])[1]:Nn(cn[0])[1]-Nn(En[0])[1]})}(st,Et),Dt=[],Ft=0;Ft<Ot.length;Ft++){for(var jt=Ot[Ft],Gt=[],Jt=0;Jt<jt.length;Jt++){var qt=jt[Jt];qt.properties[xt]?Gt.push(qt.properties[xt]):Gt.push(0),At===!0&&(qt.properties.matrixPosition=[Ft,Jt])}Dt.push(Gt)}return Dt}var g1={successCallback:null,verbose:!1,polygons:!1},lc={};function gd(st,_t,xt,Et){Et=Et||{};for(var At=Object.keys(g1),Ot=0;Ot<At.length;Ot++){var Dt=At[Ot],Ft=Et[Dt];Ft=Ft!=null?Ft:g1[Dt],lc[Dt]=Ft}lc.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+_t+":"+(_t+xt)+"]");var jt,Gt=function(Jt,qt,on){for(var vn=Jt.length-1,_n=Jt[0].length-1,En={rows:vn,cols:_n,cells:[]},cn=qt+Math.abs(on),Hn=0;Hn<vn;++Hn){En.cells[Hn]=[];for(var nr=0;nr<_n;++nr){var bn=0,zn=Jt[Hn+1][nr],Un=Jt[Hn+1][nr+1],qn=Jt[Hn][nr+1],Gn=Jt[Hn][nr];if(!(isNaN(zn)||isNaN(Un)||isNaN(qn)||isNaN(Gn))){bn|=zn<qt?0:zn>cn?128:64,bn|=Un<qt?0:Un>cn?32:16,bn|=qn<qt?0:qn>cn?8:4;var Xr=+(bn|=Gn<qt?0:Gn>cn?2:1),Br=0;if(bn===17||bn===18||bn===33||bn===34||bn===38||bn===68||bn===72||bn===98||bn===102||bn===132||bn===136||bn===137||bn===152||bn===153){var Jr=(zn+Un+qn+Gn)/4;Br=Jr>cn?2:Jr<qt?0:1,bn===34?Br===1?bn=35:Br===0&&(bn=136):bn===136?Br===1?(bn=35,Br=4):Br===0&&(bn=34):bn===17?Br===1?(bn=155,Br=4):Br===0&&(bn=153):bn===68?Br===1?(bn=103,Br=4):Br===0&&(bn=102):bn===153?Br===1&&(bn=155):bn===102?Br===1&&(bn=103):bn===152?Br<2&&(bn=156,Br=1):bn===137?Br<2&&(bn=139,Br=1):bn===98?Br<2&&(bn=99,Br=1):bn===38?Br<2&&(bn=39,Br=1):bn===18?Br>0?(bn=156,Br=4):bn=152:bn===33?Br>0?(bn=139,Br=4):bn=137:bn===72?Br>0?(bn=99,Br=4):bn=98:bn===132&&(Br>0?(bn=39,Br=4):bn=38)}if(bn!=0&&bn!=170){var Fr,oi,Wr,jr,Hr,ei,Gr,si;Fr=oi=Wr=jr=Hr=ei=Gr=si=.5;var Tr=[];bn===1?(Wr=1-Jn(qt,qn,Gn),si=1-Jn(qt,zn,Gn),Tr.push(no[bn])):bn===169?(Wr=Jn(cn,Gn,qn),si=Jn(cn,Gn,zn),Tr.push(no[bn])):bn===4?(ei=1-Jn(qt,Un,qn),jr=Jn(qt,Gn,qn),Tr.push(qi[bn])):bn===166?(ei=Jn(cn,qn,Un),jr=1-Jn(cn,qn,Gn),Tr.push(qi[bn])):bn===16?(Hr=Jn(qt,qn,Un),oi=Jn(qt,zn,Un),Tr.push(Xi[bn])):bn===154?(Hr=1-Jn(cn,Un,qn),oi=1-Jn(cn,Un,zn),Tr.push(Xi[bn])):bn===64?(Gr=Jn(qt,Gn,zn),Fr=1-Jn(qt,Un,zn),Tr.push(bo[bn])):bn===106?(Gr=1-Jn(cn,zn,Gn),Fr=Jn(cn,zn,Un),Tr.push(bo[bn])):bn===168?(jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Tr.push(fo[bn]),Tr.push(no[bn])):bn===2?(jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Tr.push(fo[bn]),Tr.push(no[bn])):bn===162?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),Tr.push(fo[bn]),Tr.push(no[bn])):bn===8?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===138?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===32?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===42?(si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un),Tr.push(To[bn]),Tr.push(bo[bn])):bn===128&&(si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn),Tr.push(To[bn]),Tr.push(bo[bn])),bn===5?(ei=1-Jn(qt,Un,qn),si=1-Jn(qt,zn,Gn),Tr.push(qi[bn])):bn===165?(ei=Jn(cn,qn,Un),si=Jn(cn,Gn,zn),Tr.push(qi[bn])):bn===20?(jr=Jn(qt,Gn,qn),oi=Jn(qt,zn,Un),Tr.push(fo[bn])):bn===150?(jr=1-Jn(cn,qn,Gn),oi=1-Jn(cn,Un,zn),Tr.push(fo[bn])):bn===80?(Hr=Jn(qt,qn,Un),Gr=Jn(qt,Gn,zn),Tr.push(Xi[bn])):bn===90?(Hr=1-Jn(cn,Un,qn),Gr=1-Jn(cn,zn,Gn),Tr.push(Xi[bn])):bn===65?(Wr=1-Jn(qt,qn,Gn),Fr=1-Jn(qt,Un,zn),Tr.push(no[bn])):bn===105?(Wr=Jn(cn,Gn,qn),Fr=Jn(cn,zn,Un),Tr.push(no[bn])):bn===160?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===10?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===130?(jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn),Tr.push(fo[bn]),Tr.push(no[bn])):bn===40?(jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un),Tr.push(fo[bn]),Tr.push(no[bn])):bn===101?(ei=Jn(cn,qn,Un),Fr=Jn(cn,zn,Un),Tr.push(qi[bn])):bn===69?(ei=1-Jn(qt,Un,qn),Fr=1-Jn(qt,Un,zn),Tr.push(qi[bn])):bn===149?(si=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn),Tr.push(To[bn])):bn===21?(si=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un),Tr.push(To[bn])):bn===86?(jr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Tr.push(fo[bn])):bn===84?(jr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Tr.push(fo[bn])):bn===89?(Hr=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),Tr.push(no[bn])):bn===81?(Hr=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),Tr.push(no[bn])):bn===96?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),Gr=Jn(qt,Gn,zn),Fr=Jn(cn,zn,Un),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===74?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),Gr=1-Jn(cn,zn,Gn),Fr=1-Jn(qt,Un,zn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===24?(Hr=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),oi=Jn(qt,zn,Un),Tr.push(Xi[bn]),Tr.push(no[bn])):bn===146?(Hr=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),oi=1-Jn(cn,Un,zn),Tr.push(Xi[bn]),Tr.push(no[bn])):bn===6?(ei=1-Jn(qt,Un,qn),jr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===164?(ei=Jn(cn,qn,Un),jr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===129?(Wr=1-Jn(qt,qn,Gn),si=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn),Tr.push(no[bn]),Tr.push(To[bn])):bn===41?(Wr=Jn(cn,Gn,qn),si=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un),Tr.push(no[bn]),Tr.push(To[bn])):bn===66?(jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Fr=1-Jn(qt,Un,zn),Tr.push(fo[bn]),Tr.push(no[bn])):bn===104?(jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Fr=Jn(cn,zn,Un),Tr.push(no[bn]),Tr.push(Ls[bn])):bn===144?(Hr=Jn(qt,qn,Un),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn),Tr.push(Xi[bn]),Tr.push(bo[bn])):bn===26?(Hr=1-Jn(cn,Un,qn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un),Tr.push(Xi[bn]),Tr.push(bo[bn])):bn===36?(ei=Jn(cn,qn,Un),jr=Jn(qt,Gn,qn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===134?(ei=1-Jn(qt,Un,qn),jr=1-Jn(cn,qn,Gn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===9?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),si=1-Jn(qt,zn,Gn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===161?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),si=Jn(cn,Gn,zn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===37?(ei=Jn(cn,qn,Un),si=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un),Tr.push(qi[bn]),Tr.push(To[bn])):bn===133?(ei=1-Jn(qt,Un,qn),si=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn),Tr.push(qi[bn]),Tr.push(To[bn])):bn===148?(jr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn),Tr.push(fo[bn]),Tr.push(bo[bn])):bn===22?(jr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un),Tr.push(fo[bn]),Tr.push(bo[bn])):bn===82?(Hr=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Tr.push(Xi[bn]),Tr.push(no[bn])):bn===88?(Hr=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Tr.push(Xi[bn]),Tr.push(no[bn])):bn===73?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),Fr=1-Jn(qt,Un,zn),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===97?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),Fr=Jn(cn,zn,Un),Tr.push(Xi[bn]),Tr.push(qi[bn])):bn===145?(Hr=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),si=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn),Tr.push(Xi[bn]),Tr.push(To[bn])):bn===25?(Hr=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),si=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un),Tr.push(Xi[bn]),Tr.push(To[bn])):bn===70?(ei=1-Jn(qt,Un,qn),jr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Fr=1-Jn(qt,Un,zn),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===100?(ei=Jn(cn,qn,Un),jr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Fr=Jn(cn,zn,Un),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===34?(Br===0?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)):(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(To[bn]),Tr.push(bo[bn])):bn===35?(Br===4?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)):(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(no[bn]),Tr.push(bo[bn])):bn===136?(Br===0?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)):(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(To[bn]),Tr.push(bo[bn])):bn===153?(Br===0?(Hr=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),si=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un)):(Hr=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),si=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn)),Tr.push(Xi[bn]),Tr.push(no[bn])):bn===102?(Br===0?(ei=1-Jn(qt,Un,qn),jr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Fr=1-Jn(qt,Un,zn)):(ei=Jn(cn,qn,Un),jr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Fr=Jn(cn,zn,Un)),Tr.push(qi[bn]),Tr.push(bo[bn])):bn===155?(Br===4?(Hr=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),si=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un)):(Hr=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),si=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn)),Tr.push(Xi[bn]),Tr.push(To[bn])):bn===103?(Br===4?(ei=1-Jn(qt,Un,qn),jr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Fr=1-Jn(qt,Un,zn)):(ei=Jn(cn,qn,Un),jr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Fr=Jn(cn,zn,Un)),Tr.push(qi[bn]),Tr.push(fo[bn])):bn===152?(Br===0?(Hr=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un)):(Hr=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn)),Tr.push(Xi[bn]),Tr.push(fo[bn]),Tr.push(no[bn])):bn===156?(Br===4?(Hr=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),oi=Jn(qt,zn,Un)):(Hr=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),oi=1-Jn(cn,Un,zn)),Tr.push(Xi[bn]),Tr.push(no[bn]),Tr.push(bo[bn])):bn===137?(Br===0?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),si=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)):(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),si=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(no[bn])):bn===139?(Br===4?(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),Wr=1-Jn(qt,qn,Gn),si=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)):(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),Wr=Jn(cn,Gn,qn),si=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(To[bn])):bn===98?(Br===0?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Fr=1-Jn(qt,Un,zn)):(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Fr=Jn(cn,zn,Un)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(bo[bn])):bn===99?(Br===4?(Hr=1-Jn(qt,Un,qn),ei=1-Jn(cn,Un,qn),jr=Jn(cn,Gn,qn),Wr=Jn(qt,Gn,qn),Gr=Jn(qt,Gn,zn),Fr=1-Jn(qt,Un,zn)):(Hr=Jn(cn,qn,Un),ei=Jn(qt,qn,Un),jr=1-Jn(qt,qn,Gn),Wr=1-Jn(cn,qn,Gn),Gr=1-Jn(cn,zn,Gn),Fr=Jn(cn,zn,Un)),Tr.push(Xi[bn]),Tr.push(qi[bn]),Tr.push(no[bn])):bn===38?(Br===0?(ei=1-Jn(qt,Un,qn),jr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)):(ei=Jn(cn,qn,Un),jr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)),Tr.push(qi[bn]),Tr.push(To[bn]),Tr.push(bo[bn])):bn===39?(Br===4?(ei=1-Jn(qt,Un,qn),jr=Jn(qt,Gn,qn),si=Jn(qt,Gn,zn),Gr=Jn(cn,Gn,zn),Fr=1-Jn(cn,Un,zn),oi=1-Jn(qt,Un,zn)):(ei=Jn(cn,qn,Un),jr=1-Jn(cn,qn,Gn),si=1-Jn(cn,zn,Gn),Gr=1-Jn(qt,zn,Gn),Fr=Jn(qt,zn,Un),oi=Jn(cn,zn,Un)),Tr.push(qi[bn]),Tr.push(fo[bn]),Tr.push(bo[bn])):bn===85&&(Hr=1,ei=0,jr=1,Wr=0,si=0,Gr=1,Fr=0,oi=1),(Fr<0||Fr>1||oi<0||oi>1||Hr<0||Hr>1||jr<0||jr>1||si<0||si>1||Gr<0||Gr>1)&&console.log("MarchingSquaresJS-isoBands: "+bn+" "+Xr+" "+zn+","+Un+","+qn+","+Gn+" "+Br+" "+Fr+" "+oi+" "+Hr+" "+ei+" "+jr+" "+Wr+" "+si+" "+Gr),En.cells[Hn][nr]={cval:bn,cval_real:Xr,flipped:Br,topleft:Fr,topright:oi,righttop:Hr,rightbottom:ei,bottomright:jr,bottomleft:Wr,leftbottom:si,lefttop:Gr,edges:Tr}}}}}return En}(st,_t,xt);return lc.polygons?(lc.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),jt=function(Jt){var qt=[],on=0;return Jt.cells.forEach(function(vn,_n){vn.forEach(function(En,cn){if(En!==void 0){var Hn=Fi[En.cval](En);typeof Hn=="object"&&Jm(Hn)?typeof Hn[0]=="object"&&Jm(Hn[0])?typeof Hn[0][0]=="object"&&Jm(Hn[0][0])?Hn.forEach(function(nr){nr.forEach(function(bn){bn[0]+=cn,bn[1]+=_n}),qt[on++]=nr}):(Hn.forEach(function(nr){nr[0]+=cn,nr[1]+=_n}),qt[on++]=Hn):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),qt}(Gt)):(lc.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),jt=function(Jt){for(var qt=[],on=Jt.rows,vn=Jt.cols,_n=[],En=0;En<on;En++)for(var cn=0;cn<vn;cn++)if(Jt.cells[En][cn]!==void 0&&Jt.cells[En][cn].edges.length>0){var Hn=$p(Jt.cells[En][cn]),nr=null,bn=cn,zn=En;Hn!==null&&_n.push([Hn.p[0]+bn,Hn.p[1]+zn]);do{if((nr=vv(Jt.cells[zn][bn],Hn.x,Hn.y,Hn.o))===null)break;if(_n.push([nr.p[0]+bn,nr.p[1]+zn]),bn+=nr.x,Hn=nr,(zn+=nr.y)<0||zn>=on||bn<0||bn>=vn||Jt.cells[zn][bn]===void 0){var Un=yv(Jt,bn-=nr.x,zn-=nr.y,nr.x,nr.y,nr.o);if(Un===null)break;Un.path.forEach(function(qn){_n.push(qn)}),bn=Un.i,zn=Un.j,Hn=Un}}while(Jt.cells[zn][bn]!==void 0&&Jt.cells[zn][bn].edges.length>0);qt.push(_n),_n=[],Jt.cells[En][cn].edges.length>0&&cn--}return qt}(Gt)),typeof lc.successCallback=="function"&&lc.successCallback(jt),jt}var Wa=64,Rc=16,qo=[],vs=[],us=[],Qo=[],es=[],_s=[],bs=[],cs=[],ts=[],xs=[],ws=[],Es=[],Ss=[],Ao=[],hs=[],ds=[],Cs=[],Go=[],Ts=[],ks=[],As=[],ns=[],Ps=[],fs=[];bs[85]=xs[85]=-1,cs[85]=ws[85]=0,ts[85]=Es[85]=1,Ts[85]=ns[85]=1,ks[85]=Ps[85]=0,As[85]=fs[85]=1,qo[85]=Qo[85]=0,vs[85]=es[85]=-1,us[85]=hs[85]=0,ds[85]=Ss[85]=0,Cs[85]=Ao[85]=1,_s[85]=Go[85]=1,ns[1]=ns[169]=0,Ps[1]=Ps[169]=-1,fs[1]=fs[169]=0,Ss[1]=Ss[169]=-1,Ao[1]=Ao[169]=0,hs[1]=hs[169]=0,xs[4]=xs[166]=0,ws[4]=ws[166]=-1,Es[4]=Es[166]=1,ds[4]=ds[166]=1,Cs[4]=Cs[166]=0,Go[4]=Go[166]=0,bs[16]=bs[154]=0,cs[16]=cs[154]=1,ts[16]=ts[154]=1,Qo[16]=Qo[154]=1,es[16]=es[154]=0,_s[16]=_s[154]=1,Ts[64]=Ts[106]=0,ks[64]=ks[106]=1,As[64]=As[106]=0,qo[64]=qo[106]=-1,vs[64]=vs[106]=0,us[64]=us[106]=1,Ts[2]=Ts[168]=0,ks[2]=ks[168]=-1,As[2]=As[168]=1,ns[2]=ns[168]=0,Ps[2]=Ps[168]=-1,fs[2]=fs[168]=0,Ss[2]=Ss[168]=-1,Ao[2]=Ao[168]=0,hs[2]=hs[168]=0,ds[2]=ds[168]=-1,Cs[2]=Cs[168]=0,Go[2]=Go[168]=1,bs[8]=bs[162]=0,cs[8]=cs[162]=-1,ts[8]=ts[162]=0,xs[8]=xs[162]=0,ws[8]=ws[162]=-1,Es[8]=Es[162]=1,Ss[8]=Ss[162]=1,Ao[8]=Ao[162]=0,hs[8]=hs[162]=1,ds[8]=ds[162]=1,Cs[8]=Cs[162]=0,Go[8]=Go[162]=0,bs[32]=bs[138]=0,cs[32]=cs[138]=1,ts[32]=ts[138]=1,xs[32]=xs[138]=0,ws[32]=ws[138]=1,Es[32]=Es[138]=0,qo[32]=qo[138]=1,vs[32]=vs[138]=0,us[32]=us[138]=0,Qo[32]=Qo[138]=1,es[32]=es[138]=0,_s[32]=_s[138]=1,ns[128]=ns[42]=0,Ps[128]=Ps[42]=1,fs[128]=fs[42]=1,Ts[128]=Ts[42]=0,ks[128]=ks[42]=1,As[128]=As[42]=0,qo[128]=qo[42]=-1,vs[128]=vs[42]=0,us[128]=us[42]=1,Qo[128]=Qo[42]=-1,es[128]=es[42]=0,_s[128]=_s[42]=0,xs[5]=xs[165]=-1,ws[5]=ws[165]=0,Es[5]=Es[165]=0,ns[5]=ns[165]=1,Ps[5]=Ps[165]=0,fs[5]=fs[165]=0,ds[20]=ds[150]=0,Cs[20]=Cs[150]=1,Go[20]=Go[150]=1,Qo[20]=Qo[150]=0,es[20]=es[150]=-1,_s[20]=_s[150]=1,bs[80]=bs[90]=-1,cs[80]=cs[90]=0,ts[80]=ts[90]=1,Ts[80]=Ts[90]=1,ks[80]=ks[90]=0,As[80]=As[90]=1,Ss[65]=Ss[105]=0,Ao[65]=Ao[105]=1,hs[65]=hs[105]=0,qo[65]=qo[105]=0,vs[65]=vs[105]=-1,us[65]=us[105]=0,bs[160]=bs[10]=-1,cs[160]=cs[10]=0,ts[160]=ts[10]=1,xs[160]=xs[10]=-1,ws[160]=ws[10]=0,Es[160]=Es[10]=0,ns[160]=ns[10]=1,Ps[160]=Ps[10]=0,fs[160]=fs[10]=0,Ts[160]=Ts[10]=1,ks[160]=ks[10]=0,As[160]=As[10]=1,ds[130]=ds[40]=0,Cs[130]=Cs[40]=1,Go[130]=Go[40]=1,Ss[130]=Ss[40]=0,Ao[130]=Ao[40]=1,hs[130]=hs[40]=0,qo[130]=qo[40]=0,vs[130]=vs[40]=-1,us[130]=us[40]=0,Qo[130]=Qo[40]=0,es[130]=es[40]=-1,_s[130]=_s[40]=1,xs[37]=xs[133]=0,ws[37]=ws[133]=1,Es[37]=Es[133]=1,ns[37]=ns[133]=0,Ps[37]=Ps[133]=1,fs[37]=fs[133]=0,qo[37]=qo[133]=-1,vs[37]=vs[133]=0,us[37]=us[133]=0,Qo[37]=Qo[133]=1,es[37]=es[133]=0,_s[37]=_s[133]=0,ds[148]=ds[22]=-1,Cs[148]=Cs[22]=0,Go[148]=Go[22]=0,ns[148]=ns[22]=0,Ps[148]=Ps[22]=-1,fs[148]=fs[22]=1,Ts[148]=Ts[22]=0,ks[148]=ks[22]=1,As[148]=As[22]=1,Qo[148]=Qo[22]=-1,es[148]=es[22]=0,_s[148]=_s[22]=1,bs[82]=bs[88]=0,cs[82]=cs[88]=-1,ts[82]=ts[88]=1,ds[82]=ds[88]=1,Cs[82]=Cs[88]=0,Go[82]=Go[88]=1,Ss[82]=Ss[88]=-1,Ao[82]=Ao[88]=0,hs[82]=hs[88]=1,Ts[82]=Ts[88]=0,ks[82]=ks[88]=-1,As[82]=As[88]=0,bs[73]=bs[97]=0,cs[73]=cs[97]=1,ts[73]=ts[97]=0,xs[73]=xs[97]=0,ws[73]=ws[97]=-1,Es[73]=Es[97]=0,Ss[73]=Ss[97]=1,Ao[73]=Ao[97]=0,hs[73]=hs[97]=0,qo[73]=qo[97]=1,vs[73]=vs[97]=0,us[73]=us[97]=1,bs[145]=bs[25]=0,cs[145]=cs[25]=-1,ts[145]=ts[25]=0,Ss[145]=Ss[25]=1,Ao[145]=Ao[25]=0,hs[145]=hs[25]=1,ns[145]=ns[25]=0,Ps[145]=Ps[25]=1,fs[145]=fs[25]=1,Qo[145]=Qo[25]=-1,es[145]=es[25]=0,_s[145]=_s[25]=0,xs[70]=xs[100]=0,ws[70]=ws[100]=1,Es[70]=Es[100]=0,ds[70]=ds[100]=-1,Cs[70]=Cs[100]=0,Go[70]=Go[100]=1,Ts[70]=Ts[100]=0,ks[70]=ks[100]=-1,As[70]=As[100]=1,qo[70]=qo[100]=1,vs[70]=vs[100]=0,us[70]=us[100]=0,xs[101]=xs[69]=0,ws[101]=ws[69]=1,Es[101]=Es[69]=0,qo[101]=qo[69]=1,vs[101]=vs[69]=0,us[101]=us[69]=0,ns[149]=ns[21]=0,Ps[149]=Ps[21]=1,fs[149]=fs[21]=1,Qo[149]=Qo[21]=-1,es[149]=es[21]=0,_s[149]=_s[21]=0,ds[86]=ds[84]=-1,Cs[86]=Cs[84]=0,Go[86]=Go[84]=1,Ts[86]=Ts[84]=0,ks[86]=ks[84]=-1,As[86]=As[84]=1,bs[89]=bs[81]=0,cs[89]=cs[81]=-1,ts[89]=ts[81]=0,Ss[89]=Ss[81]=1,Ao[89]=Ao[81]=0,hs[89]=hs[81]=1,bs[96]=bs[74]=0,cs[96]=cs[74]=1,ts[96]=ts[74]=0,xs[96]=xs[74]=-1,ws[96]=ws[74]=0,Es[96]=Es[74]=1,Ts[96]=Ts[74]=1,ks[96]=ks[74]=0,As[96]=As[74]=0,qo[96]=qo[74]=1,vs[96]=vs[74]=0,us[96]=us[74]=1,bs[24]=bs[146]=0,cs[24]=cs[146]=-1,ts[24]=ts[146]=1,ds[24]=ds[146]=1,Cs[24]=Cs[146]=0,Go[24]=Go[146]=1,Ss[24]=Ss[146]=0,Ao[24]=Ao[146]=1,hs[24]=hs[146]=1,Qo[24]=Qo[146]=0,es[24]=es[146]=-1,_s[24]=_s[146]=0,xs[6]=xs[164]=-1,ws[6]=ws[164]=0,Es[6]=Es[164]=1,ds[6]=ds[164]=-1,Cs[6]=Cs[164]=0,Go[6]=Go[164]=0,ns[6]=ns[164]=0,Ps[6]=Ps[164]=-1,fs[6]=fs[164]=1,Ts[6]=Ts[164]=1,ks[6]=ks[164]=0,As[6]=As[164]=0,Ss[129]=Ss[41]=0,Ao[129]=Ao[41]=1,hs[129]=hs[41]=1,ns[129]=ns[41]=0,Ps[129]=Ps[41]=1,fs[129]=fs[41]=0,qo[129]=qo[41]=-1,vs[129]=vs[41]=0,us[129]=us[41]=0,Qo[129]=Qo[41]=0,es[129]=es[41]=-1,_s[129]=_s[41]=0,ds[66]=ds[104]=0,Cs[66]=Cs[104]=1,Go[66]=Go[104]=0,Ss[66]=Ss[104]=-1,Ao[66]=Ao[104]=0,hs[66]=hs[104]=1,Ts[66]=Ts[104]=0,ks[66]=ks[104]=-1,As[66]=As[104]=0,qo[66]=qo[104]=0,vs[66]=vs[104]=-1,us[66]=us[104]=1,bs[144]=bs[26]=-1,cs[144]=cs[26]=0,ts[144]=ts[26]=0,ns[144]=ns[26]=1,Ps[144]=Ps[26]=0,fs[144]=fs[26]=1,Ts[144]=Ts[26]=0,ks[144]=ks[26]=1,As[144]=As[26]=1,Qo[144]=Qo[26]=-1,es[144]=es[26]=0,_s[144]=_s[26]=1,xs[36]=xs[134]=0,ws[36]=ws[134]=1,Es[36]=Es[134]=1,ds[36]=ds[134]=0,Cs[36]=Cs[134]=1,Go[36]=Go[134]=0,qo[36]=qo[134]=0,vs[36]=vs[134]=-1,us[36]=us[134]=1,Qo[36]=Qo[134]=1,es[36]=es[134]=0,_s[36]=_s[134]=0,bs[9]=bs[161]=-1,cs[9]=cs[161]=0,ts[9]=ts[161]=0,xs[9]=xs[161]=0,ws[9]=ws[161]=-1,Es[9]=Es[161]=0,Ss[9]=Ss[161]=1,Ao[9]=Ao[161]=0,hs[9]=hs[161]=0,ns[9]=ns[161]=1,Ps[9]=Ps[161]=0,fs[9]=fs[161]=1,bs[136]=0,cs[136]=1,ts[136]=1,xs[136]=0,ws[136]=1,Es[136]=0,ds[136]=-1,Cs[136]=0,Go[136]=1,Ss[136]=-1,Ao[136]=0,hs[136]=0,ns[136]=0,Ps[136]=-1,fs[136]=0,Ts[136]=0,ks[136]=-1,As[136]=1,qo[136]=1,vs[136]=0,us[136]=0,Qo[136]=1,es[136]=0,_s[136]=1,bs[34]=0,cs[34]=-1,ts[34]=0,xs[34]=0,ws[34]=-1,Es[34]=1,ds[34]=1,Cs[34]=0,Go[34]=0,Ss[34]=1,Ao[34]=0,hs[34]=1,ns[34]=0,Ps[34]=1,fs[34]=1,Ts[34]=0,ks[34]=1,As[34]=0,qo[34]=-1,vs[34]=0,us[34]=1,Qo[34]=-1,es[34]=0,_s[34]=0,bs[35]=0,cs[35]=1,ts[35]=1,xs[35]=0,ws[35]=-1,Es[35]=1,ds[35]=1,Cs[35]=0,Go[35]=0,Ss[35]=-1,Ao[35]=0,hs[35]=0,ns[35]=0,Ps[35]=-1,fs[35]=0,Ts[35]=0,ks[35]=1,As[35]=0,qo[35]=-1,vs[35]=0,us[35]=1,Qo[35]=1,es[35]=0,_s[35]=1,bs[153]=0,cs[153]=1,ts[153]=1,Ss[153]=-1,Ao[153]=0,hs[153]=0,ns[153]=0,Ps[153]=-1,fs[153]=0,Qo[153]=1,es[153]=0,_s[153]=1,xs[102]=0,ws[102]=-1,Es[102]=1,ds[102]=1,Cs[102]=0,Go[102]=0,Ts[102]=0,ks[102]=1,As[102]=0,qo[102]=-1,vs[102]=0,us[102]=1,bs[155]=0,cs[155]=-1,ts[155]=0,Ss[155]=1,Ao[155]=0,hs[155]=1,ns[155]=0,Ps[155]=1,fs[155]=1,Qo[155]=-1,es[155]=0,_s[155]=0,xs[103]=0,ws[103]=1,Es[103]=0,ds[103]=-1,Cs[103]=0,Go[103]=1,Ts[103]=0,ks[103]=-1,As[103]=1,qo[103]=1,vs[103]=0,us[103]=0,bs[152]=0,cs[152]=1,ts[152]=1,ds[152]=-1,Cs[152]=0,Go[152]=1,Ss[152]=-1,Ao[152]=0,hs[152]=0,ns[152]=0,Ps[152]=-1,fs[152]=0,Ts[152]=0,ks[152]=-1,As[152]=1,Qo[152]=1,es[152]=0,_s[152]=1,bs[156]=0,cs[156]=-1,ts[156]=1,ds[156]=1,Cs[156]=0,Go[156]=1,Ss[156]=-1,Ao[156]=0,hs[156]=0,ns[156]=0,Ps[156]=-1,fs[156]=0,Ts[156]=0,ks[156]=1,As[156]=1,Qo[156]=-1,es[156]=0,_s[156]=1,bs[137]=0,cs[137]=1,ts[137]=1,xs[137]=0,ws[137]=1,Es[137]=0,Ss[137]=-1,Ao[137]=0,hs[137]=0,ns[137]=0,Ps[137]=-1,fs[137]=0,qo[137]=1,vs[137]=0,us[137]=0,Qo[137]=1,es[137]=0,_s[137]=1,bs[139]=0,cs[139]=1,ts[139]=1,xs[139]=0,ws[139]=-1,Es[139]=0,Ss[139]=1,Ao[139]=0,hs[139]=0,ns[139]=0,Ps[139]=1,fs[139]=0,qo[139]=-1,vs[139]=0,us[139]=0,Qo[139]=1,es[139]=0,_s[139]=1,bs[98]=0,cs[98]=-1,ts[98]=0,xs[98]=0,ws[98]=-1,Es[98]=1,ds[98]=1,Cs[98]=0,Go[98]=0,Ss[98]=1,Ao[98]=0,hs[98]=1,Ts[98]=0,ks[98]=1,As[98]=0,qo[98]=-1,vs[98]=0,us[98]=1,bs[99]=0,cs[99]=1,ts[99]=0,xs[99]=0,ws[99]=-1,Es[99]=1,ds[99]=1,Cs[99]=0,Go[99]=0,Ss[99]=-1,Ao[99]=0,hs[99]=1,Ts[99]=0,ks[99]=-1,As[99]=0,qo[99]=1,vs[99]=0,us[99]=1,xs[38]=0,ws[38]=-1,Es[38]=1,ds[38]=1,Cs[38]=0,Go[38]=0,ns[38]=0,Ps[38]=1,fs[38]=1,Ts[38]=0,ks[38]=1,As[38]=0,qo[38]=-1,vs[38]=0,us[38]=1,Qo[38]=-1,es[38]=0,_s[38]=0,xs[39]=0,ws[39]=1,Es[39]=1,ds[39]=-1,Cs[39]=0,Go[39]=0,ns[39]=0,Ps[39]=-1,fs[39]=1,Ts[39]=0,ks[39]=1,As[39]=0,qo[39]=-1,vs[39]=0,us[39]=1,Qo[39]=1,es[39]=0,_s[39]=0;var Wm=function(st){return[[st.bottomleft,0],[0,0],[0,st.leftbottom]]},Gm=function(st){return[[1,st.rightbottom],[1,0],[st.bottomright,0]]},zg=function(st){return[[st.topright,1],[1,1],[1,st.righttop]]},Ym=function(st){return[[0,st.lefttop],[0,1],[st.topleft,1]]},qm=function(st){return[[st.bottomright,0],[st.bottomleft,0],[0,st.leftbottom],[0,st.lefttop]]},Xm=function(st){return[[st.bottomright,0],[st.bottomleft,0],[1,st.righttop],[1,st.rightbottom]]},Zm=function(st){return[[1,st.righttop],[1,st.rightbottom],[st.topleft,1],[st.topright,1]]},Km=function(st){return[[0,st.leftbottom],[0,st.lefttop],[st.topleft,1],[st.topright,1]]},Xi=[],qi=[],fo=[],no=[],To=[],bo=[],Ls=[],ps=[];no[1]=To[1]=18,no[169]=To[169]=18,fo[4]=qi[4]=12,fo[166]=qi[166]=12,Xi[16]=ps[16]=4,Xi[154]=ps[154]=4,bo[64]=Ls[64]=22,bo[106]=Ls[106]=22,fo[2]=bo[2]=17,no[2]=To[2]=18,fo[168]=bo[168]=17,no[168]=To[168]=18,Xi[8]=no[8]=9,qi[8]=fo[8]=12,Xi[162]=no[162]=9,qi[162]=fo[162]=12,Xi[32]=ps[32]=4,qi[32]=Ls[32]=1,Xi[138]=ps[138]=4,qi[138]=Ls[138]=1,To[128]=ps[128]=21,bo[128]=Ls[128]=22,To[42]=ps[42]=21,bo[42]=Ls[42]=22,qi[5]=To[5]=14,qi[165]=To[165]=14,fo[20]=ps[20]=6,fo[150]=ps[150]=6,Xi[80]=bo[80]=11,Xi[90]=bo[90]=11,no[65]=Ls[65]=3,no[105]=Ls[105]=3,Xi[160]=bo[160]=11,qi[160]=To[160]=14,Xi[10]=bo[10]=11,qi[10]=To[10]=14,fo[130]=ps[130]=6,no[130]=Ls[130]=3,fo[40]=ps[40]=6,no[40]=Ls[40]=3,qi[101]=Ls[101]=1,qi[69]=Ls[69]=1,To[149]=ps[149]=21,To[21]=ps[21]=21,fo[86]=bo[86]=17,fo[84]=bo[84]=17,Xi[89]=no[89]=9,Xi[81]=no[81]=9,Xi[96]=Ls[96]=0,qi[96]=bo[96]=15,Xi[74]=Ls[74]=0,qi[74]=bo[74]=15,Xi[24]=fo[24]=8,no[24]=ps[24]=7,Xi[146]=fo[146]=8,no[146]=ps[146]=7,qi[6]=bo[6]=15,fo[6]=To[6]=16,qi[164]=bo[164]=15,fo[164]=To[164]=16,no[129]=ps[129]=7,To[129]=Ls[129]=20,no[41]=ps[41]=7,To[41]=Ls[41]=20,fo[66]=Ls[66]=2,no[66]=bo[66]=19,fo[104]=Ls[104]=2,no[104]=bo[104]=19,Xi[144]=To[144]=10,bo[144]=ps[144]=23,Xi[26]=To[26]=10,bo[26]=ps[26]=23,qi[36]=ps[36]=5,fo[36]=Ls[36]=2,qi[134]=ps[134]=5,fo[134]=Ls[134]=2,Xi[9]=To[9]=10,qi[9]=no[9]=13,Xi[161]=To[161]=10,qi[161]=no[161]=13,qi[37]=ps[37]=5,To[37]=Ls[37]=20,qi[133]=ps[133]=5,To[133]=Ls[133]=20,fo[148]=To[148]=16,bo[148]=ps[148]=23,fo[22]=To[22]=16,bo[22]=ps[22]=23,Xi[82]=fo[82]=8,no[82]=bo[82]=19,Xi[88]=fo[88]=8,no[88]=bo[88]=19,Xi[73]=Ls[73]=0,qi[73]=no[73]=13,Xi[97]=Ls[97]=0,qi[97]=no[97]=13,Xi[145]=no[145]=9,To[145]=ps[145]=21,Xi[25]=no[25]=9,To[25]=ps[25]=21,qi[70]=Ls[70]=1,fo[70]=bo[70]=17,qi[100]=Ls[100]=1,fo[100]=bo[100]=17,Xi[34]=no[34]=9,qi[34]=fo[34]=12,To[34]=ps[34]=21,bo[34]=Ls[34]=22,Xi[136]=ps[136]=4,qi[136]=Ls[136]=1,fo[136]=bo[136]=17,no[136]=To[136]=18,Xi[35]=ps[35]=4,qi[35]=fo[35]=12,no[35]=To[35]=18,bo[35]=Ls[35]=22,Xi[153]=ps[153]=4,no[153]=To[153]=18,qi[102]=fo[102]=12,bo[102]=Ls[102]=22,Xi[155]=no[155]=9,To[155]=ps[155]=23,qi[103]=Ls[103]=1,fo[103]=bo[103]=17,Xi[152]=ps[152]=4,fo[152]=bo[152]=17,no[152]=To[152]=18,Xi[156]=fo[156]=8,no[156]=To[156]=18,bo[156]=ps[156]=23,Xi[137]=ps[137]=4,qi[137]=Ls[137]=1,no[137]=To[137]=18,Xi[139]=ps[139]=4,qi[139]=no[139]=13,To[139]=Ls[139]=20,Xi[98]=no[98]=9,qi[98]=fo[98]=12,bo[98]=Ls[98]=22,Xi[99]=Ls[99]=0,qi[99]=fo[99]=12,no[99]=bo[99]=19,qi[38]=fo[38]=12,To[38]=ps[38]=21,bo[38]=Ls[38]=22,qi[39]=ps[39]=5,fo[39]=To[39]=16,bo[39]=Ls[39]=22;var Fi=[];function Jn(st,_t,xt){return(st-_t)/(xt-_t)}function Jm(st){return st.constructor.toString().indexOf("Array")>-1}function yv(st,_t,xt,Et,At,Ot){for(var Dt=st.cells[xt][_t],Ft=Dt.cval_real,jt=_t+Et,Gt=xt+At,Jt=[],qt=!1;!qt;){if(st.cells[Gt]===void 0||st.cells[Gt][jt]===void 0)if(Gt-=At,jt-=Et,Ft=(Dt=st.cells[Gt][jt]).cval_real,At===-1)if(Ot===0)if(1&Ft)Jt.push([jt,Gt]),Et=-1,At=0,Ot=0;else{if(!(4&Ft)){Jt.push([jt+Dt.bottomright,Gt]),Et=0,At=1,Ot=1,qt=!0;break}Jt.push([jt+1,Gt]),Et=1,At=0,Ot=0}else{if(!(1&Ft)){if(4&Ft){Jt.push([jt+Dt.bottomright,Gt]),Et=0,At=1,Ot=1,qt=!0;break}Jt.push([jt+Dt.bottomleft,Gt]),Et=0,At=1,Ot=0,qt=!0;break}Jt.push([jt,Gt]),Et=-1,At=0,Ot=0}else if(At===1)if(Ot===0){if(!(Ft&Rc)){if(Ft&Wa){Jt.push([jt+Dt.topleft,Gt+1]),Et=0,At=-1,Ot=0,qt=!0;break}Jt.push([jt+Dt.topright,Gt+1]),Et=0,At=-1,Ot=1,qt=!0;break}Jt.push([jt+1,Gt+1]),Et=1,At=0,Ot=1}else Jt.push([jt+1,Gt+1]),Et=1,At=0,Ot=1;else if(Et===-1)if(Ot===0){if(!(Ft&Wa)){if(1&Ft){Jt.push([jt,Gt+Dt.leftbottom]),Et=1,At=0,Ot=0,qt=!0;break}Jt.push([jt,Gt+Dt.lefttop]),Et=1,At=0,Ot=1,qt=!0;break}Jt.push([jt,Gt+1]),Et=0,At=1,Ot=0}else{if(!(Ft&Wa)){console.log("MarchingSquaresJS-isoBands: wtf");break}Jt.push([jt,Gt+1]),Et=0,At=1,Ot=0}else{if(Et!==1){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(Ot===0){if(!(4&Ft)){Jt.push([jt+1,Gt+Dt.rightbottom]),Et=-1,At=0,Ot=0,qt=!0;break}Jt.push([jt+1,Gt]),Et=0,At=-1,Ot=1}else{if(!(4&Ft)){if(Ft&Rc){Jt.push([jt+1,Gt+Dt.righttop]),Et=-1,At=0,Ot=1;break}Jt.push([jt+1,Gt+Dt.rightbottom]),Et=-1,At=0,Ot=0,qt=!0;break}Jt.push([jt+1,Gt]),Et=0,At=-1,Ot=1}}else if(Ft=(Dt=st.cells[Gt][jt]).cval_real,Et===-1)if(Ot===0)if(st.cells[Gt-1]!==void 0&&st.cells[Gt-1][jt]!==void 0)Et=0,At=-1,Ot=1;else{if(!(1&Ft)){Jt.push([jt+Dt.bottomright,Gt]),Et=0,At=1,Ot=1,qt=!0;break}Jt.push([jt,Gt])}else{if(!(Ft&Wa)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+jt+","+Gt);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(Et===1){if(Ot===0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(st.cells[Gt+1]!==void 0&&st.cells[Gt+1][jt]!==void 0)Et=0,At=1,Ot=0;else{if(!(Ft&Rc)){Jt.push([jt+Dt.topleft,Gt+1]),Et=0,At=-1,Ot=0,qt=!0;break}Jt.push([jt+1,Gt+1]),Et=1,At=0,Ot=1}}else if(At===-1){if(Ot!==1){console.log("MarchingSquaresJS-isoBands: wtf");break}if(st.cells[Gt][jt+1]!==void 0)Et=1,At=0,Ot=1;else{if(!(4&Ft)){Jt.push([jt+1,Gt+Dt.righttop]),Et=-1,At=0,Ot=1,qt=!0;break}Jt.push([jt+1,Gt]),Et=0,At=-1,Ot=1}}else{if(At!==1){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(Ot!==0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(st.cells[Gt][jt-1]!==void 0)Et=-1,At=0,Ot=0;else{if(!(Ft&Wa)){Jt.push([jt,Gt+Dt.leftbottom]),Et=1,At=0,Ot=0,qt=!0;break}Jt.push([jt,Gt+1]),Et=0,At=1,Ot=0}}if(Gt+=At,(jt+=Et)===_t&&Gt===xt)break}return{path:Jt,i:jt,j:Gt,x:Et,y:At,o:Ot}}function $p(st){if(st.edges.length>0){var _t=st.edges[st.edges.length-1],xt=st.cval_real;switch(_t){case 0:return xt&Rc?{p:[1,st.righttop],x:-1,y:0,o:1}:{p:[st.topleft,1],x:0,y:-1,o:0};case 1:return 4&xt?{p:[st.topleft,1],x:0,y:-1,o:0}:{p:[1,st.rightbottom],x:-1,y:0,o:0};case 2:return 4&xt?{p:[st.bottomright,0],x:0,y:1,o:1}:{p:[st.topleft,1],x:0,y:-1,o:0};case 3:return 1&xt?{p:[st.topleft,1],x:0,y:-1,o:0}:{p:[st.bottomleft,0],x:0,y:1,o:0};case 4:return xt&Rc?{p:[1,st.righttop],x:-1,y:0,o:1}:{p:[st.topright,1],x:0,y:-1,o:1};case 5:return 4&xt?{p:[st.topright,1],x:0,y:-1,o:1}:{p:[1,st.rightbottom],x:-1,y:0,o:0};case 6:return 4&xt?{p:[st.bottomright,0],x:0,y:1,o:1}:{p:[st.topright,1],x:0,y:-1,o:1};case 7:return 1&xt?{p:[st.topright,1],x:0,y:-1,o:1}:{p:[st.bottomleft,0],x:0,y:1,o:0};case 8:return 4&xt?{p:[st.bottomright,0],x:0,y:1,o:1}:{p:[1,st.righttop],x:-1,y:0,o:1};case 9:return 1&xt?{p:[1,st.righttop],x:-1,y:0,o:1}:{p:[st.bottomleft,0],x:0,y:1,o:0};case 10:return 1&xt?{p:[0,st.leftbottom],x:1,y:0,o:0}:{p:[1,st.righttop],x:-1,y:0,o:1};case 11:return xt&Wa?{p:[1,st.righttop],x:-1,y:0,o:1}:{p:[0,st.lefttop],x:1,y:0,o:1};case 12:return 4&xt?{p:[st.bottomright,0],x:0,y:1,o:1}:{p:[1,st.rightbottom],x:-1,y:0,o:0};case 13:return 1&xt?{p:[1,st.rightbottom],x:-1,y:0,o:0}:{p:[st.bottomleft,0],x:0,y:1,o:0};case 14:return 1&xt?{p:[0,st.leftbottom],x:1,y:0,o:0}:{p:[1,st.rightbottom],x:-1,y:0,o:0};case 15:return xt&Wa?{p:[1,st.rightbottom],x:-1,y:0,o:0}:{p:[0,st.lefttop],x:1,y:0,o:1};case 16:return 4&xt?{p:[st.bottomright,0],x:0,y:1,o:1}:{p:[0,st.leftbottom],x:1,y:0,o:0};case 17:return xt&Wa?{p:[st.bottomright,0],x:0,y:1,o:1}:{p:[0,st.lefttop],x:1,y:0,o:1};case 18:return 1&xt?{p:[0,st.leftbottom],x:1,y:0,o:0}:{p:[st.bottomleft,0],x:0,y:1,o:0};case 19:return xt&Wa?{p:[st.bottomleft,0],x:0,y:1,o:0}:{p:[0,st.lefttop],x:1,y:0,o:1};case 20:return xt&Wa?{p:[st.topleft,1],x:0,y:-1,o:0}:{p:[0,st.leftbottom],x:1,y:0,o:0};case 21:return xt&Rc?{p:[0,st.leftbottom],x:1,y:0,o:0}:{p:[st.topright,1],x:0,y:-1,o:1};case 22:return xt&Wa?{p:[st.topleft,1],x:0,y:-1,o:0}:{p:[0,st.lefttop],x:1,y:0,o:1};case 23:return xt&Rc?{p:[0,st.lefttop],x:1,y:0,o:1}:{p:[st.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(st)}}return null}function vv(st,_t,xt,Et){var At,Ot,Dt,Ft,jt,Gt=st.cval;switch(_t){case-1:switch(Et){case 0:At=qi[Gt],Dt=xs[Gt],Ft=ws[Gt],jt=Es[Gt];break;default:At=Xi[Gt],Dt=bs[Gt],Ft=cs[Gt],jt=ts[Gt]}break;case 1:switch(Et){case 0:At=To[Gt],Dt=ns[Gt],Ft=Ps[Gt],jt=fs[Gt];break;default:At=bo[Gt],Dt=Ts[Gt],Ft=ks[Gt],jt=As[Gt]}break;default:switch(xt){case-1:switch(Et){case 0:At=Ls[Gt],Dt=qo[Gt],Ft=vs[Gt],jt=us[Gt];break;default:At=ps[Gt],Dt=Qo[Gt],Ft=es[Gt],jt=_s[Gt]}break;case 1:switch(Et){case 0:At=no[Gt],Dt=Ss[Gt],Ft=Ao[Gt],jt=hs[Gt];break;default:At=fo[Gt],Dt=ds[Gt],Ft=Cs[Gt],jt=Go[Gt]}}}if(Ot=st.edges.indexOf(At),st.edges[Ot]===void 0)return null;switch(function(Jt,qt){delete Jt.edges[qt];for(var on=qt+1;on<Jt.edges.length;on++)Jt.edges[on-1]=Jt.edges[on];Jt.edges.pop()}(st,Ot),Gt=st.cval_real,At){case 0:Gt&Rc?(_t=st.topleft,xt=1):(_t=1,xt=st.righttop);break;case 1:4&Gt?(_t=1,xt=st.rightbottom):(_t=st.topleft,xt=1);break;case 2:4&Gt?(_t=st.topleft,xt=1):(_t=st.bottomright,xt=0);break;case 3:1&Gt?(_t=st.bottomleft,xt=0):(_t=st.topleft,xt=1);break;case 4:Gt&Rc?(_t=st.topright,xt=1):(_t=1,xt=st.righttop);break;case 5:4&Gt?(_t=1,xt=st.rightbottom):(_t=st.topright,xt=1);break;case 6:4&Gt?(_t=st.topright,xt=1):(_t=st.bottomright,xt=0);break;case 7:1&Gt?(_t=st.bottomleft,xt=0):(_t=st.topright,xt=1);break;case 8:4&Gt?(_t=1,xt=st.righttop):(_t=st.bottomright,xt=0);break;case 9:1&Gt?(_t=st.bottomleft,xt=0):(_t=1,xt=st.righttop);break;case 10:1&Gt?(_t=1,xt=st.righttop):(_t=0,xt=st.leftbottom);break;case 11:Gt&Wa?(_t=0,xt=st.lefttop):(_t=1,xt=st.righttop);break;case 12:4&Gt?(_t=1,xt=st.rightbottom):(_t=st.bottomright,xt=0);break;case 13:1&Gt?(_t=st.bottomleft,xt=0):(_t=1,xt=st.rightbottom);break;case 14:1&Gt?(_t=1,xt=st.rightbottom):(_t=0,xt=st.leftbottom);break;case 15:Gt&Wa?(_t=0,xt=st.lefttop):(_t=1,xt=st.rightbottom);break;case 16:4&Gt?(_t=0,xt=st.leftbottom):(_t=st.bottomright,xt=0);break;case 17:Gt&Wa?(_t=0,xt=st.lefttop):(_t=st.bottomright,xt=0);break;case 18:1&Gt?(_t=st.bottomleft,xt=0):(_t=0,xt=st.leftbottom);break;case 19:Gt&Wa?(_t=0,xt=st.lefttop):(_t=st.bottomleft,xt=0);break;case 20:Gt&Wa?(_t=0,xt=st.leftbottom):(_t=st.topleft,xt=1);break;case 21:Gt&Rc?(_t=st.topright,xt=1):(_t=0,xt=st.leftbottom);break;case 22:Gt&Wa?(_t=0,xt=st.lefttop):(_t=st.topleft,xt=1);break;case 23:Gt&Rc?(_t=st.topright,xt=1):(_t=0,xt=st.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(st),null}return _t!==void 0&&xt!==void 0&&Dt!==void 0&&Ft!==void 0&&jt!==void 0||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(st),console.log(_t+" "+xt+" "+Dt+" "+Ft+" "+jt)),{p:[_t,xt],x:Dt,y:Ft,o:jt}}function Bp(st){var _t=[],xt=[];st.forEach(function(At){var Ot=Hd(Mt([At]));xt.push(Ot),_t.push({ring:At,area:Ot})}),xt.sort(function(At,Ot){return Ot-At});var Et=[];return xt.forEach(function(At){for(var Ot=0;Ot<_t.length;Ot++)if(_t[Ot].area===At){Et.push(_t[Ot].ring),_t.splice(Ot,1);break}}),Et}function _v(st){for(var _t=st.map(function(Ft){return{lrCoordinates:Ft,grouped:!1}}),xt=[];!bv(_t);)for(var Et=0;Et<_t.length;Et++)if(!_t[Et].grouped){var At=[];At.push(_t[Et].lrCoordinates),_t[Et].grouped=!0;for(var Ot=Mt([_t[Et].lrCoordinates]),Dt=Et+1;Dt<_t.length;Dt++)_t[Dt].grouped||m1(Mt([_t[Dt].lrCoordinates]),Ot)&&(At.push(_t[Dt].lrCoordinates),_t[Dt].grouped=!0);xt.push(At)}return xt}function m1(st,_t){for(var xt=Eo(st),Et=0;Et<xt.features.length;Et++)if(!yo(xt.features[Et],_t))return!1;return!0}function bv(st){for(var _t=0;_t<st.length;_t++)if(st[_t].grouped===!1)return!1;return!0}function y1(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.pivot,At=xt.mutate;if(!st)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("angle is required");return _t===0||(Et||(Et=kl(st)),At!==!1&&At!==void 0||(st=Vo(st)),yn(st,function(Ot){var Dt=Gd(Et,Ot)+_t,Ft=Fd(Et,Ot),jt=Nn(Nf(Et,Ft,Dt));Ot[0]=jt[0],Ot[1]=jt[1]})),st}function v1(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.origin,At=xt.mutate;if(!st)throw new Error("geojson required");if(typeof _t!="number"||_t===0)throw new Error("invalid factor");var Ot=Array.isArray(Et)||typeof Et=="object";return At!==!0&&(st=Vo(st)),st.type!=="FeatureCollection"||Ot?_1(st,_t,Et):(rr(st,function(Dt,Ft){st.features[Ft]=_1(Dt,_t,Et)}),st)}function _1(st,_t,xt){var Et=or(st)==="Point";return xt=function(At,Ot){if(Ot==null&&(Ot="centroid"),Array.isArray(Ot)||typeof Ot=="object")return un(Ot);var Dt=At.bbox?At.bbox:dn(At),Ft=Dt[0],jt=Dt[1],Gt=Dt[2],Jt=Dt[3];switch(Ot){case"sw":case"southwest":case"westsouth":case"bottomleft":return kt([Ft,jt]);case"se":case"southeast":case"eastsouth":case"bottomright":return kt([Gt,jt]);case"nw":case"northwest":case"westnorth":case"topleft":return kt([Ft,Jt]);case"ne":case"northeast":case"eastnorth":case"topright":return kt([Gt,Jt]);case"center":return Ua(At);case void 0:case null:case"centroid":return kl(At);default:throw new Error("invalid origin")}}(st,xt),_t===1||Et||yn(st,function(At){var Ot=Fd(xt,At),Dt=Gd(xt,At),Ft=Nn(Nf(xt,Ot*_t,Dt));At[0]=Ft[0],At[1]=Ft[1],At.length===3&&(At[2]*=_t)}),st}function $f(st){var _t=st[0],xt=st[1];return[xt[0]-_t[0],xt[1]-_t[1]]}function Fp(st,_t){return st[0]*_t[1]-_t[0]*st[1]}function Qm(st,_t){return!function(xt,Et){return Fp($f(xt),$f(Et))===0}(st,_t)&&function(xt,Et){var At,Ot,Dt=xt[0],Ft=$f(xt),jt=Et[0],Gt=$f(Et),Jt=Fp(Ft,Gt);return function(qt,on){return[qt[0]+on[0],qt[1]+on[1]]}(Dt,function(qt,on){return[qt*on[0],qt*on[1]]}(Fp((Ot=Dt,[(At=jt)[0]-Ot[0],At[1]-Ot[1]]),Gt)/Jt,Ft))}(st,_t)}function Bf(st,_t,xt){var Et=[],At=mn(_t,xt),Ot=Nn(st),Dt=[];return Ot.forEach(function(Ft,jt){if(jt!==Ot.length-1){var Gt=(on=Ft,vn=Ot[jt+1],_n=At,En=Math.sqrt((on[0]-vn[0])*(on[0]-vn[0])+(on[1]-vn[1])*(on[1]-vn[1])),cn=on[0]+_n*(vn[1]-on[1])/En,Hn=vn[0]+_n*(vn[1]-on[1])/En,nr=on[1]+_n*(on[0]-vn[0])/En,bn=vn[1]+_n*(on[0]-vn[0])/En,[[cn,nr],[Hn,bn]]);if(Et.push(Gt),jt>0){var Jt=Et[jt-1],qt=Qm(Gt,Jt);qt!==!1&&(Jt[1]=qt,Gt[0]=qt),Dt.push(Jt[0]),jt===Ot.length-2&&(Dt.push(Gt[0]),Dt.push(Gt[1]))}Ot.length===2&&(Dt.push(Gt[0]),Dt.push(Gt[1]))}var on,vn,_n,En,cn,Hn,nr,bn}),zt(Dt,st.properties)}function e0(st,_t,xt){var Et=_t[0]-st[0],At=_t[1]-st[1],Ot=xt[0]-_t[0];return function(Dt){return(Dt>0)-(Dt<0)||+Dt}(Et*(xt[1]-_t[1])-Ot*At)}function n0(st,_t){return _t.geometry.coordinates[0].every(function(xt){return yo(kt(xt),st)})}Fi[1]=Fi[169]=Wm,Fi[4]=Fi[166]=Gm,Fi[16]=Fi[154]=zg,Fi[64]=Fi[106]=Ym,Fi[168]=Fi[2]=qm,Fi[162]=Fi[8]=Xm,Fi[138]=Fi[32]=Zm,Fi[42]=Fi[128]=Km,Fi[5]=Fi[165]=function(st){return[[0,0],[0,st.leftbottom],[1,st.rightbottom],[1,0]]},Fi[20]=Fi[150]=function(st){return[[1,0],[st.bottomright,0],[st.topright,1],[1,1]]},Fi[80]=Fi[90]=function(st){return[[1,1],[1,st.righttop],[0,st.lefttop],[0,1]]},Fi[65]=Fi[105]=function(st){return[[st.bottomleft,0],[0,0],[0,1],[st.topleft,1]]},Fi[160]=Fi[10]=function(st){return[[1,st.righttop],[1,st.rightbottom],[0,st.leftbottom],[0,st.lefttop]]},Fi[130]=Fi[40]=function(st){return[[st.topleft,1],[st.topright,1],[st.bottomright,0],[st.bottomleft,0]]},Fi[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Fi[101]=Fi[69]=function(st){return[[1,st.rightbottom],[1,0],[0,0],[0,1],[st.topleft,1]]},Fi[149]=Fi[21]=function(st){return[[st.topright,1],[1,1],[1,0],[0,0],[0,st.leftbottom]]},Fi[86]=Fi[84]=function(st){return[[1,0],[st.bottomright,0],[0,st.lefttop],[0,1],[1,1]]},Fi[89]=Fi[81]=function(st){return[[1,1],[1,st.righttop],[st.bottomleft,0],[0,0],[0,1]]},Fi[96]=Fi[74]=function(st){return[[1,st.righttop],[1,st.rightbottom],[0,st.lefttop],[0,1],[st.topleft,1]]},Fi[24]=Fi[146]=function(st){return[[1,1],[1,st.righttop],[st.bottomright,0],[st.bottomleft,0],[st.topright,1]]},Fi[6]=Fi[164]=function(st){return[[1,st.rightbottom],[1,0],[st.bottomright,0],[0,st.leftbottom],[0,st.lefttop]]},Fi[129]=Fi[41]=function(st){return[[st.topright,1],[st.bottomleft,0],[0,0],[0,st.leftbottom],[st.topleft,1]]},Fi[66]=Fi[104]=function(st){return[[st.bottomright,0],[st.bottomleft,0],[0,st.lefttop],[0,1],[st.topleft,1]]},Fi[144]=Fi[26]=function(st){return[[1,1],[1,st.righttop],[0,st.leftbottom],[0,st.lefttop],[st.topright,1]]},Fi[36]=Fi[134]=function(st){return[[1,st.rightbottom],[1,0],[st.bottomright,0],[st.topleft,1],[st.topright,1]]},Fi[9]=Fi[161]=function(st){return[[1,st.righttop],[1,st.rightbottom],[st.bottomleft,0],[0,0],[0,st.leftbottom]]},Fi[37]=Fi[133]=function(st){return[[1,st.rightbottom],[1,0],[0,0],[0,st.leftbottom],[st.topleft,1],[st.topright,1]]},Fi[148]=Fi[22]=function(st){return[[1,1],[1,0],[st.bottomright,0],[0,st.leftbottom],[0,st.lefttop],[st.topright,1]]},Fi[82]=Fi[88]=function(st){return[[1,1],[1,st.righttop],[st.bottomright,0],[st.bottomleft,0],[0,st.lefttop],[0,1]]},Fi[73]=Fi[97]=function(st){return[[1,st.righttop],[1,st.rightbottom],[st.bottomleft,0],[0,0],[0,1],[st.topleft,1]]},Fi[145]=Fi[25]=function(st){return[[1,1],[1,st.righttop],[st.bottomleft,0],[0,0],[0,st.leftbottom],[st.topright,1]]},Fi[70]=Fi[100]=function(st){return[[1,st.rightbottom],[1,0],[st.bottomright,0],[0,st.lefttop],[0,1],[st.topleft,1]]},Fi[34]=function(st){return[Km(st),Xm(st)]},Fi[35]=function(st){return[[1,st.righttop],[1,st.rightbottom],[st.bottomright,0],[st.bottomleft,0],[0,st.leftbottom],[0,st.lefttop],[st.topleft,1],[st.topright,1]]},Fi[136]=function(st){return[Zm(st),qm(st)]},Fi[153]=function(st){return[zg(st),Wm(st)]},Fi[102]=function(st){return[Gm(st),Ym(st)]},Fi[155]=function(st){return[[1,1],[1,st.righttop],[st.bottomleft,0],[0,0],[0,st.leftbottom],[st.topright,1]]},Fi[103]=function(st){return[[1,st.rightbottom],[1,0],[st.bottomright,0],[0,st.lefttop],[0,1],[st.topleft,1]]},Fi[152]=function(st){return[zg(st),qm(st)]},Fi[156]=function(st){return[[1,1],[1,st.righttop],[st.bottomright,0],[st.bottomleft,0],[0,st.leftbottom],[0,st.lefttop],[st.topright,1]]},Fi[137]=function(st){return[Zm(st),Wm(st)]},Fi[139]=function(st){return[[1,st.righttop],[1,st.rightbottom],[st.bottomleft,0],[0,0],[0,st.leftbottom],[st.topleft,1],[st.topright,1]]},Fi[98]=function(st){return[Xm(st),Ym(st)]},Fi[99]=function(st){return[[1,st.righttop],[1,st.rightbottom],[st.bottomright,0],[st.bottomleft,0],[0,st.lefttop],[0,1],[st.topleft,1]]},Fi[38]=function(st){return[Gm(st),Km(st)]},Fi[39]=function(st){return[[1,st.rightbottom],[1,0],[st.bottomright,0],[0,st.leftbottom],[0,st.lefttop],[st.topleft,1],[st.topright,1]]};var Hg=function(){function st(_t){this.id=st.buildId(_t),this.coordinates=_t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return st.buildId=function(_t){return _t.join(",")},st.prototype.removeInnerEdge=function(_t){this.innerEdges=this.innerEdges.filter(function(xt){return xt.from.id!==_t.from.id})},st.prototype.removeOuterEdge=function(_t){this.outerEdges=this.outerEdges.filter(function(xt){return xt.to.id!==_t.to.id})},st.prototype.addOuterEdge=function(_t){this.outerEdges.push(_t),this.outerEdgesSorted=!1},st.prototype.sortOuterEdges=function(){var _t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(xt,Et){var At=xt.to,Ot=Et.to;if(At.coordinates[0]-_t.coordinates[0]>=0&&Ot.coordinates[0]-_t.coordinates[0]<0)return 1;if(At.coordinates[0]-_t.coordinates[0]<0&&Ot.coordinates[0]-_t.coordinates[0]>=0)return-1;if(At.coordinates[0]-_t.coordinates[0]==0&&Ot.coordinates[0]-_t.coordinates[0]==0)return At.coordinates[1]-_t.coordinates[1]>=0||Ot.coordinates[1]-_t.coordinates[1]>=0?At.coordinates[1]-Ot.coordinates[1]:Ot.coordinates[1]-At.coordinates[1];var Dt=e0(_t.coordinates,At.coordinates,Ot.coordinates);return Dt<0?1:Dt>0?-1:Math.pow(At.coordinates[0]-_t.coordinates[0],2)+Math.pow(At.coordinates[1]-_t.coordinates[1],2)-(Math.pow(Ot.coordinates[0]-_t.coordinates[0],2)+Math.pow(Ot.coordinates[1]-_t.coordinates[1],2))}),this.outerEdgesSorted=!0)},st.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},st.prototype.getOuterEdge=function(_t){return this.sortOuterEdges(),this.outerEdges[_t]},st.prototype.addInnerEdge=function(_t){this.innerEdges.push(_t)},st}(),r0=function(){function st(_t,xt){this.from=_t,this.to=xt,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return st.prototype.getSymetric=function(){return this.symetric||(this.symetric=new st(this.to,this.from),this.symetric.symetric=this),this.symetric},st.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},st.prototype.isEqual=function(_t){return this.from.id===_t.from.id&&this.to.id===_t.to.id},st.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},st.prototype.toLineString=function(){return zt([this.from.coordinates,this.to.coordinates])},st.prototype.compareTo=function(_t){return e0(_t.from.coordinates,_t.to.coordinates,this.to.coordinates)},st}(),$l=function(){function st(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return st.prototype.push=function(_t){this.edges.push(_t),this.polygon=this.envelope=void 0},st.prototype.get=function(_t){return this.edges[_t]},Object.defineProperty(st.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),st.prototype.forEach=function(_t){this.edges.forEach(_t)},st.prototype.map=function(_t){return this.edges.map(_t)},st.prototype.some=function(_t){return this.edges.some(_t)},st.prototype.isValid=function(){return!0},st.prototype.isHole=function(){var _t=this,xt=this.edges.reduce(function(Dt,Ft,jt){return Ft.from.coordinates[1]>_t.edges[Dt].from.coordinates[1]&&(Dt=jt),Dt},0),Et=(xt===0?this.length:xt)-1,At=(xt+1)%this.length,Ot=e0(this.edges[Et].from.coordinates,this.edges[xt].from.coordinates,this.edges[At].from.coordinates);return Ot===0?this.edges[Et].from.coordinates[0]>this.edges[At].from.coordinates[0]:Ot>0},st.prototype.toMultiPoint=function(){return tn(this.edges.map(function(_t){return _t.from.coordinates}))},st.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var _t=this.edges.map(function(xt){return xt.from.coordinates});return _t.push(this.edges[0].from.coordinates),this.polygon=Mt([_t])},st.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Th(this.toPolygon())},st.findEdgeRingContaining=function(_t,xt){var Et,At,Ot=_t.getEnvelope();return xt.forEach(function(Dt){var Ft,jt,Gt,Jt,qt,on,vn=Dt.getEnvelope();if(At&&(Et=At.getEnvelope()),jt=Ot,Gt=(Ft=vn).geometry.coordinates[0].map(function(bn){return bn[0]}),Jt=Ft.geometry.coordinates[0].map(function(bn){return bn[1]}),qt=jt.geometry.coordinates[0].map(function(bn){return bn[0]}),on=jt.geometry.coordinates[0].map(function(bn){return bn[1]}),(Math.max.apply(null,Gt)!==Math.max.apply(null,qt)||Math.max.apply(null,Jt)!==Math.max.apply(null,on)||Math.min.apply(null,Gt)!==Math.min.apply(null,qt)||Math.min.apply(null,Jt)!==Math.min.apply(null,on))&&n0(vn,Ot)){for(var _n=_t.map(function(bn){return bn.from.coordinates}),En=void 0,cn=function(bn){Dt.some(function(zn){return Un=bn,qn=zn.from.coordinates,Un[0]===qn[0]&&Un[1]===qn[1];var Un,qn})||(En=bn)},Hn=0,nr=_n;Hn<nr.length;Hn++)cn(nr[Hn]);En&&Dt.inside(kt(En))&&(At&&!n0(Et,vn)||(At=Dt))}}),At},st.prototype.inside=function(_t){return yo(_t,this.toPolygon())},st}(),xv=function(){function st(){this.edges=[],this.nodes={}}return st.fromGeoJson=function(_t){(function(Et){if(!Et)throw new Error("No geojson passed");if(Et.type!=="FeatureCollection"&&Et.type!=="GeometryCollection"&&Et.type!=="MultiLineString"&&Et.type!=="LineString"&&Et.type!=="Feature")throw new Error("Invalid input type '"+Et.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")})(_t);var xt=new st;return Ar(_t,function(Et){$n(Et,"LineString","Graph::fromGeoJson"),mr(Et,function(At,Ot){if(At){var Dt=xt.getNode(At),Ft=xt.getNode(Ot);xt.addEdge(Dt,Ft)}return Ot})}),xt},st.prototype.getNode=function(_t){var xt=Hg.buildId(_t),Et=this.nodes[xt];return Et||(Et=this.nodes[xt]=new Hg(_t)),Et},st.prototype.addEdge=function(_t,xt){var Et=new r0(_t,xt),At=Et.getSymetric();this.edges.push(Et),this.edges.push(At)},st.prototype.deleteDangles=function(){var _t=this;Object.keys(this.nodes).map(function(xt){return _t.nodes[xt]}).forEach(function(xt){return _t._removeIfDangle(xt)})},st.prototype._removeIfDangle=function(_t){var xt=this;if(_t.innerEdges.length<=1){var Et=_t.getOuterEdges().map(function(At){return At.to});this.removeNode(_t),Et.forEach(function(At){return xt._removeIfDangle(At)})}},st.prototype.deleteCutEdges=function(){var _t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(xt){xt.label===xt.symetric.label&&(_t.removeEdge(xt.symetric),_t.removeEdge(xt))})},st.prototype._computeNextCWEdges=function(_t){var xt=this;_t===void 0?Object.keys(this.nodes).forEach(function(Et){return xt._computeNextCWEdges(xt.nodes[Et])}):_t.getOuterEdges().forEach(function(Et,At){_t.getOuterEdge((At===0?_t.getOuterEdges().length:At)-1).symetric.next=Et})},st.prototype._computeNextCCWEdges=function(_t,xt){for(var Et,At,Ot=_t.getOuterEdges(),Dt=Ot.length-1;Dt>=0;--Dt){var Ft=Ot[Dt],jt=Ft.symetric,Gt=void 0,Jt=void 0;Ft.label===xt&&(Gt=Ft),jt.label===xt&&(Jt=jt),Gt&&Jt&&(Jt&&(At=Jt),Gt&&(At&&(At.next=Gt,At=void 0),Et||(Et=Gt)))}At&&(At.next=Et)},st.prototype._findLabeledEdgeRings=function(){var _t=[],xt=0;return this.edges.forEach(function(Et){if(!(Et.label>=0)){_t.push(Et);var At=Et;do At.label=xt,At=At.next;while(!Et.isEqual(At));xt++}}),_t},st.prototype.getEdgeRings=function(){var _t=this;this._computeNextCWEdges(),this.edges.forEach(function(Et){Et.label=void 0}),this._findLabeledEdgeRings().forEach(function(Et){_t._findIntersectionNodes(Et).forEach(function(At){_t._computeNextCCWEdges(At,Et.label)})});var xt=[];return this.edges.forEach(function(Et){Et.ring||xt.push(_t._findEdgeRing(Et))}),xt},st.prototype._findIntersectionNodes=function(_t){var xt=[],Et=_t,At=function(){var Ot=0;Et.from.getOuterEdges().forEach(function(Dt){Dt.label===_t.label&&++Ot}),Ot>1&&xt.push(Et.from),Et=Et.next};do At();while(!_t.isEqual(Et));return xt},st.prototype._findEdgeRing=function(_t){var xt=_t,Et=new $l;do Et.push(xt),xt.ring=Et,xt=xt.next;while(!_t.isEqual(xt));return Et},st.prototype.removeNode=function(_t){var xt=this;_t.getOuterEdges().forEach(function(Et){return xt.removeEdge(Et)}),_t.innerEdges.forEach(function(Et){return xt.removeEdge(Et)}),delete this.nodes[_t.id]},st.prototype.removeEdge=function(_t){this.edges=this.edges.filter(function(xt){return!xt.isEqual(_t)}),_t.deleteEdge()},st}();function i0(st,_t){var xt=!0;return Ar(st,function(Et){Ar(_t,function(At){if(xt===!1)return!1;xt=function(Ot,Dt){switch(Ot.type){case"Point":switch(Dt.type){case"Point":return Ft=Ot.coordinates,jt=Dt.coordinates,!(Ft[0]===jt[0]&&Ft[1]===jt[1]);case"LineString":return!b1(Dt,Ot);case"Polygon":return!yo(Ot,Dt)}break;case"LineString":switch(Dt.type){case"Point":return!b1(Ot,Dt);case"LineString":return!function(Gt,Jt){return ll(Gt,Jt).features.length>0}(Ot,Dt);case"Polygon":return!Vg(Dt,Ot)}break;case"Polygon":switch(Dt.type){case"Point":return!yo(Dt,Ot);case"LineString":return!Vg(Ot,Dt);case"Polygon":return!function(Gt,Jt){for(var qt=0,on=Gt.coordinates[0];qt<on.length;qt++)if(yo(on[qt],Jt))return!0;for(var vn=0,_n=Jt.coordinates[0];vn<_n.length;vn++)if(yo(_n[vn],Gt))return!0;return ll(Eu(Gt),Eu(Jt)).features.length>0}(Dt,Ot)}}var Ft,jt;return!1}(Et.geometry,At.geometry)})}),xt}function b1(st,_t){for(var xt=0;xt<st.coordinates.length-1;xt++)if(wv(st.coordinates[xt],st.coordinates[xt+1],_t.coordinates))return!0;return!1}function Vg(st,_t){for(var xt=0,Et=_t.coordinates;xt<Et.length;xt++)if(yo(Et[xt],st))return!0;return ll(_t,Eu(st)).features.length>0}function wv(st,_t,xt){var Et=xt[0]-st[0],At=xt[1]-st[1],Ot=_t[0]-st[0],Dt=_t[1]-st[1];return Et*Dt-At*Ot==0&&(Math.abs(Ot)>=Math.abs(Dt)?Ot>0?st[0]<=xt[0]&&xt[0]<=_t[0]:_t[0]<=xt[0]&&xt[0]<=st[0]:Dt>0?st[1]<=xt[1]&&xt[1]<=_t[1]:_t[1]<=xt[1]&&xt[1]<=st[1])}function x1(st,_t){return!(st[0]>_t[0])&&!(st[2]<_t[2])&&!(st[1]>_t[1])&&!(st[3]<_t[3])}function o0(st,_t){return st[0]===_t[0]&&st[1]===_t[1]}function Ev(st,_t){return[(st[0]+_t[0])/2,(st[1]+_t[1])/2]}function w1(st,_t){for(var xt=!1,Et=!1,At=st.coordinates.length,Ot=0;Ot<At&&!xt&&!Et;){for(var Dt=0;Dt<_t.coordinates.length-1;Dt++){var Ft=!0;Dt!==0&&Dt!==_t.coordinates.length-2||(Ft=!1),S1(_t.coordinates[Dt],_t.coordinates[Dt+1],st.coordinates[Ot],Ft)?xt=!0:Et=!0}Ot++}return xt&&Et}function E1(st,_t){return ll(st,Mf(_t)).features.length>0}function s0(st,_t){for(var xt=!1,Et=!1,At=st.coordinates.length,Ot=0;Ot<At&&(!xt||!Et);Ot++)yo(kt(st.coordinates[Ot]),_t)?xt=!0:Et=!0;return Et&&xt}function S1(st,_t,xt,Et){var At=xt[0]-st[0],Ot=xt[1]-st[1],Dt=_t[0]-st[0],Ft=_t[1]-st[1];return At*Ft-Ot*Dt==0&&(Et?Math.abs(Dt)>=Math.abs(Ft)?Dt>0?st[0]<=xt[0]&&xt[0]<=_t[0]:_t[0]<=xt[0]&&xt[0]<=st[0]:Ft>0?st[1]<=xt[1]&&xt[1]<=_t[1]:_t[1]<=xt[1]&&xt[1]<=st[1]:Math.abs(Dt)>=Math.abs(Ft)?Dt>0?st[0]<xt[0]&&xt[0]<_t[0]:_t[0]<xt[0]&&xt[0]<st[0]:Ft>0?st[1]<xt[1]&&xt[1]<_t[1]:_t[1]<xt[1]&&xt[1]<st[1])}var ah=function(st){this.precision=st&&st.precision?st.precision:17,this.direction=!(!st||!st.direction)&&st.direction,this.pseudoNode=!(!st||!st.pseudoNode)&&st.pseudoNode,this.objectComparator=st&&st.objectComparator?st.objectComparator:Sv};function md(st){return st.coordinates.map(function(_t){return{type:st.type.replace("Multi",""),coordinates:_t}})}function Ih(st,_t){return st.hasOwnProperty("coordinates")?st.coordinates.length===_t.coordinates.length:st.length===_t.length}function Sv(st,_t){return dd(st,_t,{strict:!0})}ah.prototype.compare=function(st,_t){if(st.type!==_t.type||!Ih(st,_t))return!1;switch(st.type){case"Point":return this.compareCoord(st.coordinates,_t.coordinates);case"LineString":return this.compareLine(st.coordinates,_t.coordinates,0,!1);case"Polygon":return this.comparePolygon(st,_t);case"Feature":return this.compareFeature(st,_t);default:if(st.type.indexOf("Multi")===0){var xt=this,Et=md(st),At=md(_t);return Et.every(function(Ot){return this.some(function(Dt){return xt.compare(Ot,Dt)})},At)}}return!1},ah.prototype.compareCoord=function(st,_t){if(st.length!==_t.length)return!1;for(var xt=0;xt<st.length;xt++)if(st[xt].toFixed(this.precision)!==_t[xt].toFixed(this.precision))return!1;return!0},ah.prototype.compareLine=function(st,_t,xt,Et){if(!Ih(st,_t))return!1;var At=this.pseudoNode?st:this.removePseudo(st),Ot=this.pseudoNode?_t:this.removePseudo(_t);if(!Et||this.compareCoord(At[0],Ot[0])||(Ot=this.fixStartIndex(Ot,At))){var Dt=this.compareCoord(At[xt],Ot[xt]);return this.direction||Dt?this.comparePath(At,Ot):!!this.compareCoord(At[xt],Ot[Ot.length-(1+xt)])&&this.comparePath(At.slice().reverse(),Ot)}},ah.prototype.fixStartIndex=function(st,_t){for(var xt,Et=-1,At=0;At<st.length;At++)if(this.compareCoord(st[At],_t[0])){Et=At;break}return Et>=0&&(xt=[].concat(st.slice(Et,st.length),st.slice(1,Et+1))),xt},ah.prototype.comparePath=function(st,_t){var xt=this;return st.every(function(Et,At){return xt.compareCoord(Et,this[At])},_t)},ah.prototype.comparePolygon=function(st,_t){if(this.compareLine(st.coordinates[0],_t.coordinates[0],1,!0)){var xt=st.coordinates.slice(1,st.coordinates.length),Et=_t.coordinates.slice(1,_t.coordinates.length),At=this;return xt.every(function(Ot){return this.some(function(Dt){return At.compareLine(Ot,Dt,1,!0)})},Et)}return!1},ah.prototype.compareFeature=function(st,_t){return!(st.id!==_t.id||!this.objectComparator(st.properties,_t.properties)||!this.compareBBox(st,_t))&&this.compare(st.geometry,_t.geometry)},ah.prototype.compareBBox=function(st,_t){return!!(!st.bbox&&!_t.bbox||st.bbox&&_t.bbox&&this.compareCoord(st.bbox,_t.bbox))},ah.prototype.removePseudo=function(st){return st};var a0=ah;function C1(st,_t){var xt=!1;return Ar(st,function(Et){Ar(_t,function(At){if(xt===!0)return!0;xt=!i0(Et.geometry,At.geometry)})}),xt}var Cv=jo(function(st){function _t(xt,Et,At,Ot){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(xt,Et,At,Ot)}_t.prototype.run=function(xt,Et,At,Ot){this._init(xt,Et,At,Ot);for(var Dt=0;Dt<this._datasetLength;Dt++)if(this._visited[Dt]!==1){this._visited[Dt]=1;var Ft=this._regionQuery(Dt);if(Ft.length<this.minPts)this.noise.push(Dt);else{var jt=this.clusters.length;this.clusters.push([]),this._addToCluster(Dt,jt),this._expandCluster(jt,Ft)}}return this.clusters},_t.prototype._init=function(xt,Et,At,Ot){if(xt){if(!(xt instanceof Array))throw Error("Dataset must be of type array, "+typeof xt+" given");this.dataset=xt,this.clusters=[],this.noise=[],this._datasetLength=xt.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}Et&&(this.epsilon=Et),At&&(this.minPts=At),Ot&&(this.distance=Ot)},_t.prototype._expandCluster=function(xt,Et){for(var At=0;At<Et.length;At++){var Ot=Et[At];if(this._visited[Ot]!==1){this._visited[Ot]=1;var Dt=this._regionQuery(Ot);Dt.length>=this.minPts&&(Et=this._mergeArrays(Et,Dt))}this._assigned[Ot]!==1&&this._addToCluster(Ot,xt)}},_t.prototype._addToCluster=function(xt,Et){this.clusters[Et].push(xt),this._assigned[xt]=1},_t.prototype._regionQuery=function(xt){for(var Et=[],At=0;At<this._datasetLength;At++)this.distance(this.dataset[xt],this.dataset[At])<this.epsilon&&Et.push(At);return Et},_t.prototype._mergeArrays=function(xt,Et){for(var At=Et.length,Ot=0;Ot<At;Ot++){var Dt=Et[Ot];xt.indexOf(Dt)<0&&xt.push(Dt)}return xt},_t.prototype._euclideanDistance=function(xt,Et){for(var At=0,Ot=Math.min(xt.length,Et.length);Ot--;)At+=(xt[Ot]-Et[Ot])*(xt[Ot]-Et[Ot]);return Math.sqrt(At)},st.exports&&(st.exports=_t)}),Tv=jo(function(st){function _t(xt,Et,At){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(xt,Et,At)}_t.prototype.init=function(xt,Et,At){this.assignments=[],this.centroids=[],xt!==void 0&&(this.dataset=xt),Et!==void 0&&(this.k=Et),At!==void 0&&(this.distance=At)},_t.prototype.run=function(xt,Et){this.init(xt,Et);for(var At=this.dataset.length,Ot=0;Ot<this.k;Ot++)this.centroids[Ot]=this.randomCentroid();for(var Dt=!0;Dt;){Dt=this.assign();for(var Ft=0;Ft<this.k;Ft++){for(var jt=new Array(on),Gt=0,Jt=0;Jt<on;Jt++)jt[Jt]=0;for(var qt=0;qt<At;qt++){var on=this.dataset[qt].length;if(Ft===this.assignments[qt]){for(Jt=0;Jt<on;Jt++)jt[Jt]+=this.dataset[qt][Jt];Gt++}}if(Gt>0){for(Jt=0;Jt<on;Jt++)jt[Jt]/=Gt;this.centroids[Ft]=jt}else this.centroids[Ft]=this.randomCentroid(),Dt=!0}}return this.getClusters()},_t.prototype.randomCentroid=function(){var xt,Et,At=this.dataset.length-1;do Et=Math.round(Math.random()*At),xt=this.dataset[Et];while(this.centroids.indexOf(xt)>=0);return xt},_t.prototype.assign=function(){for(var xt,Et=!1,At=this.dataset.length,Ot=0;Ot<At;Ot++)(xt=this.argmin(this.dataset[Ot],this.centroids,this.distance))!=this.assignments[Ot]&&(this.assignments[Ot]=xt,Et=!0);return Et},_t.prototype.getClusters=function(){for(var xt,Et=new Array(this.k),At=0;At<this.assignments.length;At++)Et[xt=this.assignments[At]]===void 0&&(Et[xt]=[]),Et[xt].push(At);return Et},_t.prototype.argmin=function(xt,Et,At){for(var Ot,Dt=Number.MAX_VALUE,Ft=0,jt=Et.length,Gt=0;Gt<jt;Gt++)(Ot=At(xt,Et[Gt]))<Dt&&(Dt=Ot,Ft=Gt);return Ft},_t.prototype.distance=function(xt,Et){for(var At=0,Ot=Math.min(xt.length,Et.length);Ot--;){var Dt=xt[Ot]-Et[Ot];At+=Dt*Dt}return Math.sqrt(At)},st.exports&&(st.exports=_t)}),T1=jo(function(st){function _t(xt,Et,At){this._queue=[],this._priorities=[],this._sorting="desc",this._init(xt,Et,At)}_t.prototype.insert=function(xt,Et){for(var At=this._queue.length,Ot=At;Ot--;){var Dt=this._priorities[Ot];this._sorting==="desc"?Et>Dt&&(At=Ot):Et<Dt&&(At=Ot)}this._insertAt(xt,Et,At)},_t.prototype.remove=function(xt){for(var Et=this._queue.length;Et--;)if(xt===this._queue[Et]){this._queue.splice(Et,1),this._priorities.splice(Et,1);break}},_t.prototype.forEach=function(xt){this._queue.forEach(xt)},_t.prototype.getElements=function(){return this._queue},_t.prototype.getElementPriority=function(xt){return this._priorities[xt]},_t.prototype.getPriorities=function(){return this._priorities},_t.prototype.getElementsWithPriorities=function(){for(var xt=[],Et=0,At=this._queue.length;Et<At;Et++)xt.push([this._queue[Et],this._priorities[Et]]);return xt},_t.prototype._init=function(xt,Et,At){if(xt&&Et){if(this._queue=[],this._priorities=[],xt.length!==Et.length)throw new Error("Arrays must have the same length");for(var Ot=0;Ot<xt.length;Ot++)this.insert(xt[Ot],Et[Ot])}At&&(this._sorting=At)},_t.prototype._insertAt=function(xt,Et,At){this._queue.length===At?(this._queue.push(xt),this._priorities.push(Et)):(this._queue.splice(At,0,xt),this._priorities.splice(At,0,Et))},st.exports&&(st.exports=_t)}),kv=jo(function(st){if(st.exports)var _t=T1;function xt(Et,At,Ot,Dt){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Et,At,Ot,Dt)}xt.prototype.run=function(Et,At,Ot,Dt){this._init(Et,At,Ot,Dt);for(var Ft=0,jt=this.dataset.length;Ft<jt;Ft++)if(this._processed[Ft]!==1){this._processed[Ft]=1,this.clusters.push([Ft]);var Gt=this.clusters.length-1;this._orderedList.push(Ft);var Jt=new _t(null,null,"asc"),qt=this._regionQuery(Ft);this._distanceToCore(Ft)!==void 0&&(this._updateQueue(Ft,qt,Jt),this._expandCluster(Gt,Jt))}return this.clusters},xt.prototype.getReachabilityPlot=function(){for(var Et=[],At=0,Ot=this._orderedList.length;At<Ot;At++){var Dt=this._orderedList[At],Ft=this._reachability[Dt];Et.push([Dt,Ft])}return Et},xt.prototype._init=function(Et,At,Ot,Dt){if(Et){if(!(Et instanceof Array))throw Error("Dataset must be of type array, "+typeof Et+" given");this.dataset=Et,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}At&&(this.epsilon=At),Ot&&(this.minPts=Ot),Dt&&(this.distance=Dt)},xt.prototype._updateQueue=function(Et,At,Ot){var Dt=this;this._coreDistance=this._distanceToCore(Et),At.forEach(function(Ft){if(Dt._processed[Ft]===void 0){var jt=Dt.distance(Dt.dataset[Et],Dt.dataset[Ft]),Gt=Math.max(Dt._coreDistance,jt);Dt._reachability[Ft]===void 0?(Dt._reachability[Ft]=Gt,Ot.insert(Ft,Gt)):Gt<Dt._reachability[Ft]&&(Dt._reachability[Ft]=Gt,Ot.remove(Ft),Ot.insert(Ft,Gt))}})},xt.prototype._expandCluster=function(Et,At){for(var Ot=At.getElements(),Dt=0,Ft=Ot.length;Dt<Ft;Dt++){var jt=Ot[Dt];if(this._processed[jt]===void 0){var Gt=this._regionQuery(jt);this._processed[jt]=1,this.clusters[Et].push(jt),this._orderedList.push(jt),this._distanceToCore(jt)!==void 0&&(this._updateQueue(jt,Gt,At),this._expandCluster(Et,At))}}},xt.prototype._distanceToCore=function(Et){for(var At=this.epsilon,Ot=0;Ot<At;Ot++)if(this._regionQuery(Et,Ot).length>=this.minPts)return Ot},xt.prototype._regionQuery=function(Et,At){At=At||this.epsilon;for(var Ot=[],Dt=0,Ft=this.dataset.length;Dt<Ft;Dt++)this.distance(this.dataset[Et],this.dataset[Dt])<At&&Ot.push(Dt);return Ot},xt.prototype._euclideanDistance=function(Et,At){for(var Ot=0,Dt=Math.min(Et.length,At.length);Dt--;)Ot+=(Et[Dt]-At[Dt])*(Et[Dt]-At[Dt]);return Math.sqrt(Ot)},st.exports&&(st.exports=xt)}),Av=jo(function(st){st.exports&&(st.exports={DBSCAN:Cv,KMEANS:Tv,OPTICS:kv,PriorityQueue:T1})}),l0=function(st,_t,xt){for(var Et=st.length,At=0,Ot=0;Ot<Et;Ot++){var Dt=(st[Ot]||0)-(_t[Ot]||0);At+=Dt*Dt}return xt?Math.sqrt(At):At},Pv=l0,zp=function(st,_t,xt){var Et=Math.abs(st-_t);return xt?Et:Et*Et},u0=l0,k1=function(st,_t){for(var xt={},Et=[],At=_t<<2,Ot=st.length,Dt=st[0].length>0;Et.length<_t&&At-- >0;){var Ft=st[Math.floor(Math.random()*Ot)],jt=Dt?Ft.join("_"):""+Ft;xt[jt]||(xt[jt]=!0,Et.push(Ft))}if(Et.length<_t)throw new Error("Error initializating clusters");return Et},Lv=function(st,_t){var xt=st[0].length?Pv:zp,Et=[],At=st.length,Ot=st[0].length>0,Dt=st[Math.floor(Math.random()*At)];for(Ot&&Dt.join("_"),Et.push(Dt);Et.length<_t;){for(var Ft=[],jt=Et.length,Gt=0,Jt=[],qt=0;qt<At;qt++){for(var on=1/0,vn=0;vn<jt;vn++){var _n=xt(st[qt],Et[vn]);_n<=on&&(on=_n)}Ft[qt]=on}for(var En=0;En<At;En++)Gt+=Ft[En];for(var cn=0;cn<At;cn++)Jt[cn]={i:cn,v:st[cn],pr:Ft[cn]/Gt,cs:0};Jt.sort(function(zn,Un){return zn.pr-Un.pr}),Jt[0].cs=Jt[0].pr;for(var Hn=1;Hn<At;Hn++)Jt[Hn].cs=Jt[Hn-1].cs+Jt[Hn].pr;for(var nr=Math.random(),bn=0;bn<At-1&&Jt[bn++].cs<nr;);Et.push(Jt[bn-1].v)}return Et};function A1(st,_t,xt){xt=xt||[];for(var Et=0;Et<st;Et++)xt[Et]=_t;return xt}var c0=function(st,_t,xt,Et){var At=[],Ot=[],Dt=[],Ft=[],jt=!1,Gt=Et||1e4,Jt=st.length,qt=st[0].length,on=qt>0,vn=[];if(xt)At=xt=="kmrand"?k1(st,_t):xt=="kmpp"?Lv(st,_t):xt;else for(var _n={};At.length<_t;){var En=Math.floor(Math.random()*Jt);_n[En]||(_n[En]=!0,At.push(st[En]))}do{A1(_t,0,vn);for(var cn=0;cn<Jt;cn++){for(var Hn=1/0,nr=0,bn=0;bn<_t;bn++)(Ft=on?u0(st[cn],At[bn]):Math.abs(st[cn]-At[bn]))<=Hn&&(Hn=Ft,nr=bn);Dt[cn]=nr,vn[nr]++}for(var zn=[],Un=(Ot=[],0);Un<_t;Un++)zn[Un]=on?A1(qt,0,zn[Un]):0,Ot[Un]=At[Un];if(on){for(var qn=0;qn<_t;qn++)At[qn]=[];for(var Gn=0;Gn<Jt;Gn++)for(var Xr=zn[Dt[Gn]],Br=st[Gn],Jr=0;Jr<qt;Jr++)Xr[Jr]+=Br[Jr];jt=!0;for(var Fr=0;Fr<_t;Fr++){for(var oi=At[Fr],Wr=zn[Fr],jr=Ot[Fr],Hr=vn[Fr],ei=0;ei<qt;ei++)oi[ei]=Wr[ei]/Hr||0;if(jt){for(var Gr=0;Gr<qt;Gr++)if(jr[Gr]!=oi[Gr]){jt=!1;break}}}}else{for(var si=0;si<Jt;si++)zn[Dt[si]]+=st[si];for(var Tr=0;Tr<_t;Tr++)At[Tr]=zn[Tr]/vn[Tr]||0;jt=!0;for(var Ki=0;Ki<_t;Ki++)if(Ot[Ki]!=At[Ki]){jt=!1;break}}jt=jt||--Gt<=0}while(!jt);return{it:1e4-Gt,k:_t,idxs:Dt,centroids:At}};function Ug(st,_t){return wn(Gd(st[0],st[1]))===wn(Gd(_t[0],_t[1]))}function h0(st,_t){if(st.geometry&&st.geometry.type)return st.geometry.type;if(st.type)return st.type;throw new Error("Invalid GeoJSON object for "+_t)}function P1(st){for(var _t=st,xt=[];_t.parent;)xt.unshift(_t),_t=_t.parent;return xt}var jg={search:function(st,_t,xt,Et){st.cleanDirty();var At=(Et=Et||{}).heuristic||jg.heuristics.manhattan,Ot=Et.closest||!1,Dt=new d0(function(En){return En.f}),Ft=_t;for(_t.h=At(_t,xt),Dt.push(_t);Dt.size()>0;){var jt=Dt.pop();if(jt===xt)return P1(jt);jt.closed=!0;for(var Gt=st.neighbors(jt),Jt=0,qt=Gt.length;Jt<qt;++Jt){var on=Gt[Jt];if(!on.closed&&!on.isWall()){var vn=jt.g+on.getCost(jt),_n=on.visited;(!_n||vn<on.g)&&(on.visited=!0,on.parent=jt,on.h=on.h||At(on,xt),on.g=vn,on.f=on.g+on.h,st.markDirty(on),Ot&&(on.h<Ft.h||on.h===Ft.h&&on.g<Ft.g)&&(Ft=on),_n?Dt.rescoreElement(on):Dt.push(on))}}}return Ot?P1(Ft):[]},heuristics:{manhattan:function(st,_t){return Math.abs(_t.x-st.x)+Math.abs(_t.y-st.y)},diagonal:function(st,_t){var xt=Math.sqrt(2),Et=Math.abs(_t.x-st.x),At=Math.abs(_t.y-st.y);return 1*(Et+At)+(xt-2)*Math.min(Et,At)}},cleanNode:function(st){st.f=0,st.g=0,st.h=0,st.visited=!1,st.closed=!1,st.parent=null}};function yd(st,_t){_t=_t||{},this.nodes=[],this.diagonal=!!_t.diagonal,this.grid=[];for(var xt=0;xt<st.length;xt++){this.grid[xt]=[];for(var Et=0,At=st[xt];Et<At.length;Et++){var Ot=new Wg(xt,Et,At[Et]);this.grid[xt][Et]=Ot,this.nodes.push(Ot)}}this.init()}function Wg(st,_t,xt){this.x=st,this.y=_t,this.weight=xt}function d0(st){this.content=[],this.scoreFunction=st}function Ov(st,_t){for(var xt=0;xt<_t.features.length;xt++)if(yo(st,_t.features[xt]))return!0;return!1}function L1(st){return function(){return st}}function Iv(st){return st[0]}function O1(st){return st[1]}function Gg(){this._=null}function Hp(st){st.U=st.C=st.L=st.R=st.P=st.N=null}function Vp(st,_t){var xt=_t,Et=_t.R,At=xt.U;At?At.L===xt?At.L=Et:At.R=Et:st._=Et,Et.U=At,xt.U=Et,xt.R=Et.L,xt.R&&(xt.R.U=xt),Et.L=xt}function Up(st,_t){var xt=_t,Et=_t.L,At=xt.U;At?At.L===xt?At.L=Et:At.R=Et:st._=Et,Et.U=At,xt.U=Et,xt.L=Et.R,xt.L&&(xt.L.U=xt),Et.R=xt}function I1(st){for(;st.L;)st=st.L;return st}function Ff(st,_t,xt,Et){var At=[null,null],Ot=Xl.push(At)-1;return At.left=st,At.right=_t,xt&&zf(At,st,_t,xt),Et&&zf(At,_t,st,Et),Hu[st.index].halfedges.push(Ot),Hu[_t.index].halfedges.push(Ot),At}function lh(st,_t,xt){var Et=[_t,xt];return Et.left=st,Et}function zf(st,_t,xt,Et){st[0]||st[1]?st.left===xt?st[1]=Et:st[0]=Et:(st[0]=Et,st.left=_t,st.right=xt)}function Yg(st,_t,xt,Et,At){var Ot,Dt=st[0],Ft=st[1],jt=Dt[0],Gt=Dt[1],Jt=0,qt=1,on=Ft[0]-jt,vn=Ft[1]-Gt;if(Ot=_t-jt,on||!(Ot>0)){if(Ot/=on,on<0){if(Ot<Jt)return;Ot<qt&&(qt=Ot)}else if(on>0){if(Ot>qt)return;Ot>Jt&&(Jt=Ot)}if(Ot=Et-jt,on||!(Ot<0)){if(Ot/=on,on<0){if(Ot>qt)return;Ot>Jt&&(Jt=Ot)}else if(on>0){if(Ot<Jt)return;Ot<qt&&(qt=Ot)}if(Ot=xt-Gt,vn||!(Ot>0)){if(Ot/=vn,vn<0){if(Ot<Jt)return;Ot<qt&&(qt=Ot)}else if(vn>0){if(Ot>qt)return;Ot>Jt&&(Jt=Ot)}if(Ot=At-Gt,vn||!(Ot<0)){if(Ot/=vn,vn<0){if(Ot>qt)return;Ot>Jt&&(Jt=Ot)}else if(vn>0){if(Ot<Jt)return;Ot<qt&&(qt=Ot)}return!(Jt>0||qt<1)||(Jt>0&&(st[0]=[jt+Jt*on,Gt+Jt*vn]),qt<1&&(st[1]=[jt+qt*on,Gt+qt*vn]),!0)}}}}}function Mv(st,_t,xt,Et,At){var Ot=st[1];if(Ot)return!0;var Dt,Ft,jt=st[0],Gt=st.left,Jt=st.right,qt=Gt[0],on=Gt[1],vn=Jt[0],_n=Jt[1],En=(qt+vn)/2,cn=(on+_n)/2;if(_n===on){if(En<_t||En>=Et)return;if(qt>vn){if(jt){if(jt[1]>=At)return}else jt=[En,xt];Ot=[En,At]}else{if(jt){if(jt[1]<xt)return}else jt=[En,At];Ot=[En,xt]}}else if(Ft=cn-(Dt=(qt-vn)/(_n-on))*En,Dt<-1||Dt>1)if(qt>vn){if(jt){if(jt[1]>=At)return}else jt=[(xt-Ft)/Dt,xt];Ot=[(At-Ft)/Dt,At]}else{if(jt){if(jt[1]<xt)return}else jt=[(At-Ft)/Dt,At];Ot=[(xt-Ft)/Dt,xt]}else if(on<_n){if(jt){if(jt[0]>=Et)return}else jt=[_t,Dt*_t+Ft];Ot=[Et,Dt*Et+Ft]}else{if(jt){if(jt[0]<_t)return}else jt=[Et,Dt*Et+Ft];Ot=[_t,Dt*_t+Ft]}return st[0]=jt,st[1]=Ot,!0}function f0(st,_t){var xt=st.site,Et=_t.left,At=_t.right;return xt===At&&(At=Et,Et=xt),At?Math.atan2(At[1]-Et[1],At[0]-Et[0]):(xt===Et?(Et=_t[1],At=_t[0]):(Et=_t[0],At=_t[1]),Math.atan2(Et[0]-At[0],At[1]-Et[1]))}function M1(st,_t){return _t[+(_t.left!==st.site)]}function Rv(st,_t){return _t[+(_t.left===st.site)]}yd.prototype.init=function(){this.dirtyNodes=[];for(var st=0;st<this.nodes.length;st++)jg.cleanNode(this.nodes[st])},yd.prototype.cleanDirty=function(){for(var st=0;st<this.dirtyNodes.length;st++)jg.cleanNode(this.dirtyNodes[st]);this.dirtyNodes=[]},yd.prototype.markDirty=function(st){this.dirtyNodes.push(st)},yd.prototype.neighbors=function(st){var _t=[],xt=st.x,Et=st.y,At=this.grid;return At[xt-1]&&At[xt-1][Et]&&_t.push(At[xt-1][Et]),At[xt+1]&&At[xt+1][Et]&&_t.push(At[xt+1][Et]),At[xt]&&At[xt][Et-1]&&_t.push(At[xt][Et-1]),At[xt]&&At[xt][Et+1]&&_t.push(At[xt][Et+1]),this.diagonal&&(At[xt-1]&&At[xt-1][Et-1]&&_t.push(At[xt-1][Et-1]),At[xt+1]&&At[xt+1][Et-1]&&_t.push(At[xt+1][Et-1]),At[xt-1]&&At[xt-1][Et+1]&&_t.push(At[xt-1][Et+1]),At[xt+1]&&At[xt+1][Et+1]&&_t.push(At[xt+1][Et+1])),_t},yd.prototype.toString=function(){for(var st,_t,xt,Et,At=[],Ot=this.grid,Dt=0,Ft=Ot.length;Dt<Ft;Dt++){for(st=[],xt=0,Et=(_t=Ot[Dt]).length;xt<Et;xt++)st.push(_t[xt].weight);At.push(st.join(" "))}return At.join(`
`)},Wg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Wg.prototype.getCost=function(st){return st&&st.x!==this.x&&st.y!==this.y?1.41421*this.weight:this.weight},Wg.prototype.isWall=function(){return this.weight===0},d0.prototype={push:function(st){this.content.push(st),this.sinkDown(this.content.length-1)},pop:function(){var st=this.content[0],_t=this.content.pop();return this.content.length>0&&(this.content[0]=_t,this.bubbleUp(0)),st},remove:function(st){var _t=this.content.indexOf(st),xt=this.content.pop();_t!==this.content.length-1&&(this.content[_t]=xt,this.scoreFunction(xt)<this.scoreFunction(st)?this.sinkDown(_t):this.bubbleUp(_t))},size:function(){return this.content.length},rescoreElement:function(st){this.sinkDown(this.content.indexOf(st))},sinkDown:function(st){for(var _t=this.content[st];st>0;){var xt=(st+1>>1)-1,Et=this.content[xt];if(!(this.scoreFunction(_t)<this.scoreFunction(Et)))break;this.content[xt]=_t,this.content[st]=Et,st=xt}},bubbleUp:function(st){for(var _t=this.content.length,xt=this.content[st],Et=this.scoreFunction(xt);;){var At,Ot=st+1<<1,Dt=Ot-1,Ft=null;if(Dt<_t){var jt=this.content[Dt];(At=this.scoreFunction(jt))<Et&&(Ft=Dt)}if(Ot<_t){var Gt=this.content[Ot];this.scoreFunction(Gt)<(Ft===null?Et:At)&&(Ft=Ot)}if(Ft===null)break;this.content[st]=this.content[Ft],this.content[Ft]=xt,st=Ft}}},Gg.prototype={constructor:Gg,insert:function(st,_t){var xt,Et,At;if(st){if(_t.P=st,_t.N=st.N,st.N&&(st.N.P=_t),st.N=_t,st.R){for(st=st.R;st.L;)st=st.L;st.L=_t}else st.R=_t;xt=st}else this._?(st=I1(this._),_t.P=null,_t.N=st,st.P=st.L=_t,xt=st):(_t.P=_t.N=null,this._=_t,xt=null);for(_t.L=_t.R=null,_t.U=xt,_t.C=!0,st=_t;xt&&xt.C;)xt===(Et=xt.U).L?(At=Et.R)&&At.C?(xt.C=At.C=!1,Et.C=!0,st=Et):(st===xt.R&&(Vp(this,xt),xt=(st=xt).U),xt.C=!1,Et.C=!0,Up(this,Et)):(At=Et.L)&&At.C?(xt.C=At.C=!1,Et.C=!0,st=Et):(st===xt.L&&(Up(this,xt),xt=(st=xt).U),xt.C=!1,Et.C=!0,Vp(this,Et)),xt=st.U;this._.C=!1},remove:function(st){st.N&&(st.N.P=st.P),st.P&&(st.P.N=st.N),st.N=st.P=null;var _t,xt,Et,At=st.U,Ot=st.L,Dt=st.R;if(xt=Ot?Dt?I1(Dt):Ot:Dt,At?At.L===st?At.L=xt:At.R=xt:this._=xt,Ot&&Dt?(Et=xt.C,xt.C=st.C,xt.L=Ot,Ot.U=xt,xt!==Dt?(At=xt.U,xt.U=st.U,st=xt.R,At.L=st,xt.R=Dt,Dt.U=xt):(xt.U=At,At=xt,st=xt.R)):(Et=st.C,st=xt),st&&(st.U=At),!Et)if(st&&st.C)st.C=!1;else{do{if(st===this._)break;if(st===At.L){if((_t=At.R).C&&(_t.C=!1,At.C=!0,Vp(this,At),_t=At.R),_t.L&&_t.L.C||_t.R&&_t.R.C){_t.R&&_t.R.C||(_t.L.C=!1,_t.C=!0,Up(this,_t),_t=At.R),_t.C=At.C,At.C=_t.R.C=!1,Vp(this,At),st=this._;break}}else if((_t=At.L).C&&(_t.C=!1,At.C=!0,Up(this,At),_t=At.L),_t.L&&_t.L.C||_t.R&&_t.R.C){_t.L&&_t.L.C||(_t.R.C=!1,_t.C=!0,Vp(this,_t),_t=At.L),_t.C=At.C,At.C=_t.L.C=!1,Up(this,At),st=this._;break}_t.C=!0,st=At,At=At.U}while(!st.C);st&&(st.C=!1)}}};var p0,R1=[];function Dv(){Hp(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yd(st){var _t=st.P,xt=st.N;if(_t&&xt){var Et=_t.site,At=st.site,Ot=xt.site;if(Et!==Ot){var Dt=At[0],Ft=At[1],jt=Et[0]-Dt,Gt=Et[1]-Ft,Jt=Ot[0]-Dt,qt=Ot[1]-Ft,on=2*(jt*qt-Gt*Jt);if(!(on>=-Fv)){var vn=jt*jt+Gt*Gt,_n=Jt*Jt+qt*qt,En=(qt*vn-Gt*_n)/on,cn=(jt*_n-Jt*vn)/on,Hn=R1.pop()||new Dv;Hn.arc=st,Hn.site=At,Hn.x=En+Dt,Hn.y=(Hn.cy=cn+Ft)+Math.sqrt(En*En+cn*cn),st.circle=Hn;for(var nr=null,bn=Vf._;bn;)if(Hn.y<bn.y||Hn.y===bn.y&&Hn.x<=bn.x){if(!bn.L){nr=bn.P;break}bn=bn.L}else{if(!bn.R){nr=bn;break}bn=bn.R}Vf.insert(nr,Hn),nr||(p0=Hn)}}}}function vd(st){var _t=st.circle;_t&&(_t.P||(p0=_t.N),Vf.remove(_t),R1.push(_t),Hp(_t),st.circle=null)}var D1=[];function N1(){Hp(this),this.edge=this.site=this.circle=null}function $1(st){var _t=D1.pop()||new N1;return _t.site=st,_t}function g0(st){vd(st),Hf.remove(st),D1.push(st),Hp(st)}function Nv(st){var _t=st.circle,xt=_t.x,Et=_t.cy,At=[xt,Et],Ot=st.P,Dt=st.N,Ft=[st];g0(st);for(var jt=Ot;jt.circle&&Math.abs(xt-jt.circle.x)<ea&&Math.abs(Et-jt.circle.cy)<ea;)Ot=jt.P,Ft.unshift(jt),g0(jt),jt=Ot;Ft.unshift(jt),vd(jt);for(var Gt=Dt;Gt.circle&&Math.abs(xt-Gt.circle.x)<ea&&Math.abs(Et-Gt.circle.cy)<ea;)Dt=Gt.N,Ft.push(Gt),g0(Gt),Gt=Dt;Ft.push(Gt),vd(Gt);var Jt,qt=Ft.length;for(Jt=1;Jt<qt;++Jt)Gt=Ft[Jt],jt=Ft[Jt-1],zf(Gt.edge,jt.site,Gt.site,At);jt=Ft[0],(Gt=Ft[qt-1]).edge=Ff(jt.site,Gt.site,null,At),Yd(jt),Yd(Gt)}function $v(st){for(var _t,xt,Et,At,Ot=st[0],Dt=st[1],Ft=Hf._;Ft;)if((Et=B1(Ft,Dt)-Ot)>ea)Ft=Ft.L;else{if(!((At=Ot-Bv(Ft,Dt))>ea)){Et>-ea?(_t=Ft.P,xt=Ft):At>-ea?(_t=Ft,xt=Ft.N):_t=xt=Ft;break}if(!Ft.R){_t=Ft;break}Ft=Ft.R}(function(Un){Hu[Un.index]={site:Un,halfedges:[]}})(st);var jt=$1(st);if(Hf.insert(_t,jt),_t||xt){if(_t===xt)return vd(_t),xt=$1(_t.site),Hf.insert(jt,xt),jt.edge=xt.edge=Ff(_t.site,jt.site),Yd(_t),void Yd(xt);if(xt){vd(_t),vd(xt);var Gt=_t.site,Jt=Gt[0],qt=Gt[1],on=st[0]-Jt,vn=st[1]-qt,_n=xt.site,En=_n[0]-Jt,cn=_n[1]-qt,Hn=2*(on*cn-vn*En),nr=on*on+vn*vn,bn=En*En+cn*cn,zn=[(cn*nr-vn*bn)/Hn+Jt,(on*bn-En*nr)/Hn+qt];zf(xt.edge,Gt,_n,zn),jt.edge=Ff(Gt,st,null,zn),xt.edge=Ff(st,_n,null,zn),Yd(_t),Yd(xt)}else jt.edge=Ff(_t.site,jt.site)}}function B1(st,_t){var xt=st.site,Et=xt[0],At=xt[1],Ot=At-_t;if(!Ot)return Et;var Dt=st.P;if(!Dt)return-1/0;var Ft=(xt=Dt.site)[0],jt=xt[1],Gt=jt-_t;if(!Gt)return Ft;var Jt=Ft-Et,qt=1/Ot-1/Gt,on=Jt/Gt;return qt?(-on+Math.sqrt(on*on-2*qt*(Jt*Jt/(-2*Gt)-jt+Gt/2+At-Ot/2)))/qt+Et:(Et+Ft)/2}function Bv(st,_t){var xt=st.N;if(xt)return B1(xt,_t);var Et=st.site;return Et[1]===_t?Et[0]:1/0}var Hf,Hu,Vf,Xl,ea=1e-6,Fv=1e-12;function F1(st,_t){return _t[1]-st[1]||_t[0]-st[0]}function m0(st,_t){var xt,Et,At,Ot=st.sort(F1).pop();for(Xl=[],Hu=new Array(st.length),Hf=new Gg,Vf=new Gg;;)if(At=p0,Ot&&(!At||Ot[1]<At.y||Ot[1]===At.y&&Ot[0]<At.x))Ot[0]===xt&&Ot[1]===Et||($v(Ot),xt=Ot[0],Et=Ot[1]),Ot=st.pop();else{if(!At)break;Nv(At.arc)}if(function(){for(var Jt,qt,on,vn,_n=0,En=Hu.length;_n<En;++_n)if((Jt=Hu[_n])&&(vn=(qt=Jt.halfedges).length)){var cn=new Array(vn),Hn=new Array(vn);for(on=0;on<vn;++on)cn[on]=on,Hn[on]=f0(Jt,Xl[qt[on]]);for(cn.sort(function(nr,bn){return Hn[bn]-Hn[nr]}),on=0;on<vn;++on)Hn[on]=qt[cn[on]];for(on=0;on<vn;++on)qt[on]=Hn[on]}}(),_t){var Dt=+_t[0][0],Ft=+_t[0][1],jt=+_t[1][0],Gt=+_t[1][1];(function(Jt,qt,on,vn){for(var _n,En=Xl.length;En--;)Mv(_n=Xl[En],Jt,qt,on,vn)&&Yg(_n,Jt,qt,on,vn)&&(Math.abs(_n[0][0]-_n[1][0])>ea||Math.abs(_n[0][1]-_n[1][1])>ea)||delete Xl[En]})(Dt,Ft,jt,Gt),function(Jt,qt,on,vn){var _n,En,cn,Hn,nr,bn,zn,Un,qn,Gn,Xr,Br,Jr=Hu.length,Fr=!0;for(_n=0;_n<Jr;++_n)if(En=Hu[_n]){for(cn=En.site,Hn=(nr=En.halfedges).length;Hn--;)Xl[nr[Hn]]||nr.splice(Hn,1);for(Hn=0,bn=nr.length;Hn<bn;)Xr=(Gn=Rv(En,Xl[nr[Hn]]))[0],Br=Gn[1],Un=(zn=M1(En,Xl[nr[++Hn%bn]]))[0],qn=zn[1],(Math.abs(Xr-Un)>ea||Math.abs(Br-qn)>ea)&&(nr.splice(Hn,0,Xl.push(lh(cn,Gn,Math.abs(Xr-Jt)<ea&&vn-Br>ea?[Jt,Math.abs(Un-Jt)<ea?qn:vn]:Math.abs(Br-vn)<ea&&on-Xr>ea?[Math.abs(qn-vn)<ea?Un:on,vn]:Math.abs(Xr-on)<ea&&Br-qt>ea?[on,Math.abs(Un-on)<ea?qn:qt]:Math.abs(Br-qt)<ea&&Xr-Jt>ea?[Math.abs(qn-qt)<ea?Un:Jt,qt]:null))-1),++bn);bn&&(Fr=!1)}if(Fr){var oi,Wr,jr,Hr=1/0;for(_n=0,Fr=null;_n<Jr;++_n)(En=Hu[_n])&&(jr=(oi=(cn=En.site)[0]-Jt)*oi+(Wr=cn[1]-qt)*Wr)<Hr&&(Hr=jr,Fr=En);if(Fr){var ei=[Jt,qt],Gr=[Jt,vn],si=[on,vn],Tr=[on,qt];Fr.halfedges.push(Xl.push(lh(cn=Fr.site,ei,Gr))-1,Xl.push(lh(cn,Gr,si))-1,Xl.push(lh(cn,si,Tr))-1,Xl.push(lh(cn,Tr,ei))-1)}}for(_n=0;_n<Jr;++_n)(En=Hu[_n])&&(En.halfedges.length||delete Hu[_n])}(Dt,Ft,jt,Gt)}this.edges=Xl,this.cells=Hu,Hf=Vf=Xl=Hu=null}function zv(st){return(st=st.slice()).push(st[0]),Mt([st])}function z1(st,_t,xt,Et){var At=(Et=Et||{}).steps||64,Ot=Et.units||"kilometers",Dt=Et.angle||0,Ft=Et.pivot||st,jt=Et.properties||st.properties||{};if(!st)throw new Error("center is required");if(!_t)throw new Error("xSemiAxis is required");if(!xt)throw new Error("ySemiAxis is required");if(!gn(Et))throw new Error("options must be an object");if(!kn(At))throw new Error("steps must be a number");if(!kn(Dt))throw new Error("angle must be a number");var Gt=un(st);if(Ot==="degrees")var Jt=An(Dt);else _t=Nf(st,_t,90,{units:Ot}),xt=Nf(st,xt,0,{units:Ot}),_t=un(_t)[0]-Gt[0],xt=un(xt)[1]-Gt[1];for(var qt=[],on=0;on<At;on+=1){var vn=-360*on/At,_n=_t*xt/Math.sqrt(Math.pow(xt,2)+Math.pow(_t,2)*Math.pow(H1(vn),2)),En=_t*xt/Math.sqrt(Math.pow(_t,2)+Math.pow(xt,2)/Math.pow(H1(vn),2));if(vn<-90&&vn>=-270&&(_n=-_n),vn<-180&&vn>=-360&&(En=-En),Ot==="degrees"){var cn=_n*Math.cos(Jt)+En*Math.sin(Jt),Hn=En*Math.cos(Jt)-_n*Math.sin(Jt);_n=cn,En=Hn}qt.push([_n+Gt[0],En+Gt[1]])}return qt.push(qt[0]),Ot==="degrees"?Mt([qt],jt):y1(Mt([qt],jt),Dt,{pivot:Ft})}function H1(st){var _t=st*Math.PI/180;return Math.tan(_t)}function y0(st,_t){_t===void 0&&(_t={});var xt=0,Et=0,At=0;return gr(st,function(Ot,Dt,Ft){var jt=_t.weight?Ft==null?void 0:Ft[_t.weight]:void 0;if(!kn(jt=jt==null?1:jt))throw new Error("weight value must be a number for feature index "+Dt);(jt=Number(jt))>0&&yn(Ot,function(Gt){xt+=Gt[0]*jt,Et+=Gt[1]*jt,At+=jt})}),kt([xt/At,Et/At],_t.properties,_t)}function V1(st,_t,xt,Et,At){var Ot=Et.tolerance||.001,Dt=0,Ft=0,jt=0,Gt=0;if(rr(xt,function(on){var vn,_n=(vn=on.properties)===null||vn===void 0?void 0:vn.weight,En=_n==null?1:_n;if(!kn(En=Number(En)))throw new Error("weight value must be a number");if(En>0){Gt+=1;var cn=En*vo(on,st);cn===0&&(cn=1);var Hn=En/cn;Dt+=on.geometry.coordinates[0]*Hn,Ft+=on.geometry.coordinates[1]*Hn,jt+=Hn}}),Gt<1)throw new Error("no features to measure");var Jt=Dt/jt,qt=Ft/jt;return Gt===1||At===0||Math.abs(Jt-_t[0])<Ot&&Math.abs(qt-_t[1])<Ot?kt([Jt,qt],{medianCandidates:Et.medianCandidates}):(Et.medianCandidates.push([Jt,qt]),V1([Jt,qt],st,xt,Et,At-1))}function U1(st,_t){return{x:st[0]-_t[0],y:st[1]-_t[1]}}function Hv(st,_t){var xt=0,Et=0;yn(st,function(At,Ot,Dt,Ft,jt){jt>xt&&(xt=jt,Et=Ot,_t.push([]));var Gt=Ot-Et,Jt=st.coordinates[jt][Gt+1],qt=At[0],on=At[1],vn=Jt[0],_n=Jt[1];_t[jt].push([.75*qt+.25*vn,.75*on+.25*_n]),_t[jt].push([.25*qt+.75*vn,.25*on+.75*_n])},!0),_t.forEach(function(At){At.push(At[0])})}function Vv(st,_t){var xt=0,Et=0,At=0;yn(st,function(Ot,Dt,Ft,jt,Gt){jt>At&&(At=jt,Et=Dt,_t.push([[]])),Gt>xt&&(xt=Gt,Et=Dt,_t[jt].push([]));var Jt=Dt-Et,qt=st.coordinates[jt][Gt][Jt+1],on=Ot[0],vn=Ot[1],_n=qt[0],En=qt[1];_t[jt][Gt].push([.75*on+.25*_n,.75*vn+.25*En]),_t[jt][Gt].push([.25*on+.75*_n,.25*vn+.75*En])},!0),_t.forEach(function(Ot){Ot.forEach(function(Dt){Dt.push(Dt[0])})})}function Uv(st,_t,xt){xt===void 0&&(xt=2);var Et=un(st),At=un(_t),Ot=Et[0]-At[0],Dt=Et[1]-At[1];return xt===1?Math.abs(Ot)+Math.abs(Dt):Math.pow(Math.pow(Ot,xt)+Math.pow(Dt,xt),1/xt)}function j1(st,_t){var xt=(_t=_t||{}).threshold||1e4,Et=_t.p||2,At=_t.binary||!1,Ot=_t.alpha||-1,Dt=_t.standardization||!1,Ft=[];rr(st,function(vn){Ft.push(kl(vn))});for(var jt=[],Gt=0;Gt<Ft.length;Gt++)jt[Gt]=[];for(Gt=0;Gt<Ft.length;Gt++)for(var Jt=Gt;Jt<Ft.length;Jt++){Gt===Jt&&(jt[Gt][Jt]=0);var qt=Uv(Ft[Gt],Ft[Jt],Et);jt[Gt][Jt]=qt,jt[Jt][Gt]=qt}for(Gt=0;Gt<Ft.length;Gt++)for(Jt=0;Jt<Ft.length;Jt++)(qt=jt[Gt][Jt])!==0&&(jt[Gt][Jt]=At?qt<=xt?1:0:qt<=xt?Math.pow(qt,Ot):0);if(Dt)for(Gt=0;Gt<Ft.length;Gt++){var on=jt[Gt].reduce(function(vn,_n){return vn+_n},0);for(Jt=0;Jt<Ft.length;Jt++)jt[Gt][Jt]=jt[Gt][Jt]/on}return jt}function W1(st){for(var _t=0,xt=0,Et=st;xt<Et.length;xt++)_t+=Et[xt];return _t/st.length}function G1(st,_t){return _t===void 0&&(_t={}),q1(st,"mercator",_t)}function Y1(st,_t){return _t===void 0&&(_t={}),q1(st,"wgs84",_t)}function q1(st,_t,xt){xt===void 0&&(xt={});var Et=(xt=xt||{}).mutate;if(!st)throw new Error("geojson is required");return Array.isArray(st)&&kn(st[0])?st=_t==="mercator"?X1(st):Z1(st):(Et!==!0&&(st=Vo(st)),yn(st,function(At){var Ot=_t==="mercator"?X1(At):Z1(At);At[0]=Ot[0],At[1]=Ot[1]})),st}function X1(st){var _t=Math.PI/180,xt=6378137,Et=20037508342789244e-9,At=[xt*(Math.abs(st[0])<=180?st[0]:st[0]-360*function(Ot){return Ot<0?-1:Ot>0?1:0}(st[0]))*_t,xt*Math.log(Math.tan(.25*Math.PI+.5*st[1]*_t))];return At[0]>Et&&(At[0]=Et),At[0]<-Et&&(At[0]=-Et),At[1]>Et&&(At[1]=Et),At[1]<-Et&&(At[1]=-Et),At}function Z1(st){var _t=180/Math.PI,xt=6378137;return[st[0]*_t/xt,(.5*Math.PI-2*Math.atan(Math.exp(-st[1]/xt)))*_t]}m0.prototype={constructor:m0,polygons:function(){var st=this.edges;return this.cells.map(function(_t){var xt=_t.halfedges.map(function(Et){return M1(_t,st[Et])});return xt.data=_t.site.data,xt})},triangles:function(){var st=[],_t=this.edges;return this.cells.forEach(function(xt,Et){if(Ot=(At=xt.halfedges).length)for(var At,Ot,Dt,Ft,jt,Gt,Jt=xt.site,qt=-1,on=_t[At[Ot-1]],vn=on.left===Jt?on.right:on.left;++qt<Ot;)Dt=vn,vn=(on=_t[At[qt]]).left===Jt?on.right:on.left,Dt&&vn&&Et<Dt.index&&Et<vn.index&&(jt=Dt,Gt=vn,((Ft=Jt)[0]-Gt[0])*(jt[1]-Ft[1])-(Ft[0]-jt[0])*(Gt[1]-Ft[1])<0)&&st.push([Jt.data,Dt.data,vn.data])}),st},links:function(){return this.edges.filter(function(st){return st.right}).map(function(st){return{source:st.left.data,target:st.right.data}})},find:function(st,_t,xt){for(var Et,At,Ot=this,Dt=Ot._found||0,Ft=Ot.cells.length;!(At=Ot.cells[Dt]);)if(++Dt>=Ft)return null;var jt=st-At.site[0],Gt=_t-At.site[1],Jt=jt*jt+Gt*Gt;do At=Ot.cells[Et=Dt],Dt=null,At.halfedges.forEach(function(qt){var on=Ot.edges[qt],vn=on.left;if(vn!==At.site&&vn||(vn=on.right)){var _n=st-vn[0],En=_t-vn[1],cn=_n*_n+En*En;cn<Jt&&(Jt=cn,Dt=vn.index)}});while(Dt!==null);return Ot._found=Et,xt==null||Jt<=xt*xt?At.site:null}};var jv=Object.freeze({__proto__:null,toMercator:G1,toWgs84:Y1}),Wv=function(){for(var st=0,_t=0,xt=arguments.length;_t<xt;_t++)st+=arguments[_t].length;var Et=Array(st),At=0;for(_t=0;_t<xt;_t++)for(var Ot=arguments[_t],Dt=0,Ft=Ot.length;Dt<Ft;Dt++,At++)Et[At]=Ot[Dt];return Et};function jp(st){return Array.isArray(st)?ey(st):st&&st.bbox?ey(st.bbox):[360*Q1(),180*Q1()]}function K1(st,_t){_t===void 0&&(_t={}),st==null&&(st=1);for(var xt=[],Et=0;Et<st;Et++)xt.push(kt(jp(_t.bbox)));return Wt(xt)}function v0(st,_t){_t===void 0&&(_t={}),st==null&&(st=1),kn(_t.num_vertices)&&_t.num_vertices!==void 0||(_t.num_vertices=10),kn(_t.max_radial_length)&&_t.max_radial_length!==void 0||(_t.max_radial_length=10);for(var xt=[],Et=function(Ot){var Dt,Ft=[],jt=Wv(Array(_t.num_vertices+1)).map(Math.random);jt.forEach(function(Gt,Jt,qt){qt[Jt]=Jt>0?Gt+qt[Jt-1]:Gt}),jt.forEach(function(Gt){Gt=2*Gt*Math.PI/jt[jt.length-1];var Jt=Math.random();Ft.push([Jt*(_t.max_radial_length||10)*Math.sin(Gt),Jt*(_t.max_radial_length||10)*Math.cos(Gt)])}),Ft[Ft.length-1]=Ft[0],Ft=Ft.map((Dt=jp(_t.bbox),function(Gt){return[Gt[0]+Dt[0],Gt[1]+Dt[1]]})),xt.push(Mt([Ft]))},At=0;At<st;At++)Et();return Wt(xt)}function J1(st,_t){if(_t===void 0&&(_t={}),!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.bbox,Et=_t.num_vertices,At=_t.max_length,Ot=_t.max_rotation;st==null&&(st=1),(!kn(Et)||Et===void 0||Et<2)&&(Et=10),kn(At)&&At!==void 0||(At=1e-4),kn(Ot)&&Ot!==void 0||(Ot=Math.PI/8);for(var Dt=[],Ft=0;Ft<st;Ft++){for(var jt=[jp(xt)],Gt=0;Gt<Et-1;Gt++){var Jt=(Gt===0?2*Math.random()*Math.PI:Math.tan((jt[Gt][1]-jt[Gt-1][1])/(jt[Gt][0]-jt[Gt-1][0])))+(Math.random()-.5)*Ot*2,qt=Math.random()*At;jt.push([jt[Gt][0]+qt*Math.cos(Jt),jt[Gt][1]+qt*Math.sin(Jt)])}Dt.push(zt(jt))}return Wt(Dt)}function Q1(){return Math.random()-.5}function ey(st){return[Math.random()*(st[2]-st[0])+st[0],Math.random()*(st[3]-st[1])+st[1]]}var Gv=Object.freeze({__proto__:null,randomPosition:jp,randomPoint:K1,randomPolygon:v0,randomLineString:J1});function ty(st,_t){if(!st)throw new Error("geojson is required");if(st.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(_t==null)throw new Error("filter is required");var xt=[];return rr(st,function(Et){Xg(Et.properties,_t)&&xt.push(Et)}),Wt(xt)}function _0(st,_t,xt){if(!st)throw new Error("geojson is required");if(st.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(_t==null)throw new Error("property is required");for(var Et=b0(st,_t),At=Object.keys(Et),Ot=0;Ot<At.length;Ot++){for(var Dt=At[Ot],Ft=Et[Dt],jt=[],Gt=0;Gt<Ft.length;Gt++)jt.push(st.features[Ft[Gt]]);xt(Wt(jt),Dt,Ot)}}function qg(st,_t,xt,Et){var At=Et;return _0(st,_t,function(Ot,Dt,Ft){At=Ft===0&&Et===void 0?Ot:xt(At,Ot,Dt,Ft)}),At}function b0(st,_t){var xt={};return rr(st,function(Et,At){var Ot=Et.properties||{};if(Object.prototype.hasOwnProperty.call(Ot,String(_t))){var Dt=Ot[_t];Object.prototype.hasOwnProperty.call(xt,Dt)?xt[Dt].push(At):xt[Dt]=[At]}}),xt}function Xg(st,_t){if(st===void 0)return!1;var xt=typeof _t;if(xt==="number"||xt==="string")return Object.prototype.hasOwnProperty.call(st,_t);if(Array.isArray(_t)){for(var Et=0;Et<_t.length;Et++)if(!Xg(st,_t[Et]))return!1;return!0}return x0(st,_t)}function x0(st,_t){for(var xt=Object.keys(_t),Et=0;Et<xt.length;Et++){var At=xt[Et];if(st[At]!==_t[At])return!1}return!0}function ny(st,_t){if(!_t)return{};if(!_t.length)return{};for(var xt={},Et=0;Et<_t.length;Et++){var At=_t[Et];Object.prototype.hasOwnProperty.call(st,At)&&(xt[At]=st[At])}return xt}var Yv=Object.freeze({__proto__:null,getCluster:ty,clusterEach:_0,clusterReduce:qg,createBins:b0,applyFilter:Xg,propertiesContainsFilter:x0,filterProperties:ny}),_d=function(st,_t){this.next=null,this.key=st,this.data=_t,this.left=null,this.right=null};/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function w0(st,_t){return st>_t?1:st<_t?-1:0}function Mh(st,_t,xt){for(var Et=new _d(null,null),At=Et,Ot=Et;;){var Dt=xt(st,_t.key);if(Dt<0){if(_t.left===null)break;if(xt(st,_t.left.key)<0){var Ft=_t.left;if(_t.left=Ft.right,Ft.right=_t,(_t=Ft).left===null)break}Ot.left=_t,Ot=_t,_t=_t.left}else{if(!(Dt>0)||_t.right===null||xt(st,_t.right.key)>0&&(Ft=_t.right,_t.right=Ft.left,Ft.left=_t,(_t=Ft).right===null))break;At.right=_t,At=_t,_t=_t.right}}return At.right=_t.left,Ot.left=_t.right,_t.left=Et.right,_t.right=Et.left,_t}function E0(st,_t,xt,Et){var At=new _d(st,_t);if(xt===null)return At.left=At.right=null,At;var Ot=Et(st,(xt=Mh(st,xt,Et)).key);return Ot<0?(At.left=xt.left,At.right=xt,xt.left=null):Ot>=0&&(At.right=xt.right,At.left=xt,xt.right=null),At}function S0(st,_t,xt){var Et=null,At=null;if(_t){var Ot=xt((_t=Mh(st,_t,xt)).key,st);Ot===0?(Et=_t.left,At=_t.right):Ot<0?(At=_t.right,_t.right=null,Et=_t):(Et=_t.left,_t.left=null,At=_t)}return{left:Et,right:At}}function C0(st,_t,xt,Et,At){if(st){Et(_t+(xt?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+At(st)+`
`);var Ot=_t+(xt?"    ":"\u2502   ");st.left&&C0(st.left,Ot,!1,Et,At),st.right&&C0(st.right,Ot,!0,Et,At)}}var T0=function(){function st(_t){_t===void 0&&(_t=w0),this._root=null,this._size=0,this._comparator=_t}return st.prototype.insert=function(_t,xt){return this._size++,this._root=E0(_t,xt,this._root,this._comparator)},st.prototype.add=function(_t,xt){var Et=new _d(_t,xt);this._root===null&&(Et.left=Et.right=null,this._size++,this._root=Et);var At=this._comparator,Ot=Mh(_t,this._root,At),Dt=At(_t,Ot.key);return Dt===0?this._root=Ot:(Dt<0?(Et.left=Ot.left,Et.right=Ot,Ot.left=null):Dt>0&&(Et.right=Ot.right,Et.left=Ot,Ot.right=null),this._size++,this._root=Et),this._root},st.prototype.remove=function(_t){this._root=this._remove(_t,this._root,this._comparator)},st.prototype._remove=function(_t,xt,Et){var At;return xt===null?null:Et(_t,(xt=Mh(_t,xt,Et)).key)===0?(xt.left===null?At=xt.right:(At=Mh(_t,xt.left,Et)).right=xt.right,this._size--,At):xt},st.prototype.pop=function(){var _t=this._root;if(_t){for(;_t.left;)_t=_t.left;return this._root=Mh(_t.key,this._root,this._comparator),this._root=this._remove(_t.key,this._root,this._comparator),{key:_t.key,data:_t.data}}return null},st.prototype.findStatic=function(_t){for(var xt=this._root,Et=this._comparator;xt;){var At=Et(_t,xt.key);if(At===0)return xt;xt=At<0?xt.left:xt.right}return null},st.prototype.find=function(_t){return this._root&&(this._root=Mh(_t,this._root,this._comparator),this._comparator(_t,this._root.key)!==0)?null:this._root},st.prototype.contains=function(_t){for(var xt=this._root,Et=this._comparator;xt;){var At=Et(_t,xt.key);if(At===0)return!0;xt=At<0?xt.left:xt.right}return!1},st.prototype.forEach=function(_t,xt){for(var Et=this._root,At=[],Ot=!1;!Ot;)Et!==null?(At.push(Et),Et=Et.left):At.length!==0?(Et=At.pop(),_t.call(xt,Et),Et=Et.right):Ot=!0;return this},st.prototype.range=function(_t,xt,Et,At){for(var Ot=[],Dt=this._comparator,Ft=this._root;Ot.length!==0||Ft;)if(Ft)Ot.push(Ft),Ft=Ft.left;else{if(Dt((Ft=Ot.pop()).key,xt)>0)break;if(Dt(Ft.key,_t)>=0&&Et.call(At,Ft))return this;Ft=Ft.right}return this},st.prototype.keys=function(){var _t=[];return this.forEach(function(xt){var Et=xt.key;return _t.push(Et)}),_t},st.prototype.values=function(){var _t=[];return this.forEach(function(xt){var Et=xt.data;return _t.push(Et)}),_t},st.prototype.min=function(){return this._root?this.minNode(this._root).key:null},st.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},st.prototype.minNode=function(_t){if(_t===void 0&&(_t=this._root),_t)for(;_t.left;)_t=_t.left;return _t},st.prototype.maxNode=function(_t){if(_t===void 0&&(_t=this._root),_t)for(;_t.right;)_t=_t.right;return _t},st.prototype.at=function(_t){for(var xt=this._root,Et=!1,At=0,Ot=[];!Et;)if(xt)Ot.push(xt),xt=xt.left;else if(Ot.length>0){if(xt=Ot.pop(),At===_t)return xt;At++,xt=xt.right}else Et=!0;return null},st.prototype.next=function(_t){var xt=this._root,Et=null;if(_t.right){for(Et=_t.right;Et.left;)Et=Et.left;return Et}for(var At=this._comparator;xt;){var Ot=At(_t.key,xt.key);if(Ot===0)break;Ot<0?(Et=xt,xt=xt.left):xt=xt.right}return Et},st.prototype.prev=function(_t){var xt=this._root,Et=null;if(_t.left!==null){for(Et=_t.left;Et.right;)Et=Et.right;return Et}for(var At=this._comparator;xt;){var Ot=At(_t.key,xt.key);if(Ot===0)break;Ot<0?xt=xt.left:(Et=xt,xt=xt.right)}return Et},st.prototype.clear=function(){return this._root=null,this._size=0,this},st.prototype.toList=function(){return function(_t){for(var xt=_t,Et=[],At=!1,Ot=new _d(null,null),Dt=Ot;!At;)xt?(Et.push(xt),xt=xt.left):Et.length>0?xt=(xt=Dt=Dt.next=Et.pop()).right:At=!0;return Dt.next=null,Ot.next}(this._root)},st.prototype.load=function(_t,xt,Et){xt===void 0&&(xt=[]),Et===void 0&&(Et=!1);var At=_t.length,Ot=this._comparator;if(Et&&A0(_t,xt,0,At-1,Ot),this._root===null)this._root=k0(_t,xt,0,At),this._size=At;else{var Dt=function(Ft,jt,Gt){for(var Jt=new _d(null,null),qt=Jt,on=Ft,vn=jt;on!==null&&vn!==null;)Gt(on.key,vn.key)<0?(qt.next=on,on=on.next):(qt.next=vn,vn=vn.next),qt=qt.next;return on!==null?qt.next=on:vn!==null&&(qt.next=vn),Jt.next}(this.toList(),function(Ft,jt){for(var Gt=new _d(null,null),Jt=Gt,qt=0;qt<Ft.length;qt++)Jt=Jt.next=new _d(Ft[qt],jt[qt]);return Jt.next=null,Gt.next}(_t,xt),Ot);At=this._size+At,this._root=Zg({head:Dt},0,At)}return this},st.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(st.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),st.prototype.toString=function(_t){_t===void 0&&(_t=function(Et){return String(Et.key)});var xt=[];return C0(this._root,"",!0,function(Et){return xt.push(Et)},_t),xt.join("")},st.prototype.update=function(_t,xt,Et){var At=this._comparator,Ot=S0(_t,this._root,At),Dt=Ot.left,Ft=Ot.right;At(_t,xt)<0?Ft=E0(xt,Et,Ft,At):Dt=E0(xt,Et,Dt,At),this._root=function(jt,Gt,Jt){return Gt===null?jt:(jt===null||((Gt=Mh(jt.key,Gt,Jt)).left=jt),Gt)}(Dt,Ft,At)},st.prototype.split=function(_t){return S0(_t,this._root,this._comparator)},st}();function k0(st,_t,xt,Et){var At=Et-xt;if(At>0){var Ot=xt+Math.floor(At/2),Dt=st[Ot],Ft=_t[Ot],jt=new _d(Dt,Ft);return jt.left=k0(st,_t,xt,Ot),jt.right=k0(st,_t,Ot+1,Et),jt}return null}function Zg(st,_t,xt){var Et=xt-_t;if(Et>0){var At=_t+Math.floor(Et/2),Ot=Zg(st,_t,At),Dt=st.head;return Dt.left=Ot,st.head=st.head.next,Dt.right=Zg(st,At+1,xt),Dt}return null}function A0(st,_t,xt,Et,At){if(!(xt>=Et)){for(var Ot=st[xt+Et>>1],Dt=xt-1,Ft=Et+1;;){do Dt++;while(At(st[Dt],Ot)<0);do Ft--;while(At(st[Ft],Ot)>0);if(Dt>=Ft)break;var jt=st[Dt];st[Dt]=st[Ft],st[Ft]=jt,jt=_t[Dt],_t[Dt]=_t[Ft],_t[Ft]=jt}A0(st,_t,xt,Ft,At),A0(st,_t,Ft+1,Et,At)}}function au(st,_t){if(!(st instanceof _t))throw new TypeError("Cannot call a class as a function")}function P0(st,_t){for(var xt=0;xt<_t.length;xt++){var Et=_t[xt];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(st,Et.key,Et)}}function Zl(st,_t,xt){return _t&&P0(st.prototype,_t),xt&&P0(st,xt),st}var Wp=function(st,_t){return st.ll.x<=_t.x&&_t.x<=st.ur.x&&st.ll.y<=_t.y&&_t.y<=st.ur.y},Kg=function(st,_t){if(_t.ur.x<st.ll.x||st.ur.x<_t.ll.x||_t.ur.y<st.ll.y||st.ur.y<_t.ll.y)return null;var xt=st.ll.x<_t.ll.x?_t.ll.x:st.ll.x,Et=st.ur.x<_t.ur.x?st.ur.x:_t.ur.x;return{ll:{x:xt,y:st.ll.y<_t.ll.y?_t.ll.y:st.ll.y},ur:{x:Et,y:st.ur.y<_t.ur.y?st.ur.y:_t.ur.y}}},Rh=Number.EPSILON;Rh===void 0&&(Rh=Math.pow(2,-52));var Jg=Rh*Rh,L0=function(st,_t){if(-Rh<st&&st<Rh&&-Rh<_t&&_t<Rh)return 0;var xt=st-_t;return xt*xt<Jg*st*_t?0:st<_t?-1:1},ry=function(){function st(){au(this,st),this.reset()}return Zl(st,[{key:"reset",value:function(){this.xRounder=new iy,this.yRounder=new iy}},{key:"round",value:function(_t,xt){return{x:this.xRounder.round(_t),y:this.yRounder.round(xt)}}}]),st}(),iy=function(){function st(){au(this,st),this.tree=new T0,this.round(0)}return Zl(st,[{key:"round",value:function(_t){var xt=this.tree.add(_t),Et=this.tree.prev(xt);if(Et!==null&&L0(xt.key,Et.key)===0)return this.tree.remove(_t),Et.key;var At=this.tree.next(xt);return At!==null&&L0(xt.key,At.key)===0?(this.tree.remove(_t),At.key):_t}}]),st}(),Gp=new ry,Yp=function(st,_t){return st.x*_t.y-st.y*_t.x},oy=function(st,_t){return st.x*_t.x+st.y*_t.y},sy=function(st,_t,xt){var Et={x:_t.x-st.x,y:_t.y-st.y},At={x:xt.x-st.x,y:xt.y-st.y},Ot=Yp(Et,At);return L0(Ot,0)},Qg=function(st){return Math.sqrt(oy(st,st))},ay=function(st,_t,xt){var Et={x:_t.x-st.x,y:_t.y-st.y},At={x:xt.x-st.x,y:xt.y-st.y};return oy(At,Et)/Qg(At)/Qg(Et)},ly=function(st,_t,xt){return _t.y===0?null:{x:st.x+_t.x/_t.y*(xt-st.y),y:xt}},uy=function(st,_t,xt){return _t.x===0?null:{x:xt,y:st.y+_t.y/_t.x*(xt-st.x)}},uh=function(){function st(_t,xt){au(this,st),_t.events===void 0?_t.events=[this]:_t.events.push(this),this.point=_t,this.isLeft=xt}return Zl(st,null,[{key:"compare",value:function(_t,xt){var Et=st.comparePoints(_t.point,xt.point);return Et!==0?Et:(_t.point!==xt.point&&_t.link(xt),_t.isLeft!==xt.isLeft?_t.isLeft?1:-1:em.compare(_t.segment,xt.segment))}},{key:"comparePoints",value:function(_t,xt){return _t.x<xt.x?-1:_t.x>xt.x?1:_t.y<xt.y?-1:_t.y>xt.y?1:0}}]),Zl(st,[{key:"link",value:function(_t){if(_t.point===this.point)throw new Error("Tried to link already linked events");for(var xt=_t.point.events,Et=0,At=xt.length;Et<At;Et++){var Ot=xt[Et];this.point.events.push(Ot),Ot.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var _t=this.point.events.length,xt=0;xt<_t;xt++){var Et=this.point.events[xt];if(Et.segment.consumedBy===void 0)for(var At=xt+1;At<_t;At++){var Ot=this.point.events[At];Ot.consumedBy===void 0&&Et.otherSE.point.events===Ot.otherSE.point.events&&Et.segment.consume(Ot.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var _t=[],xt=0,Et=this.point.events.length;xt<Et;xt++){var At=this.point.events[xt];At!==this&&!At.segment.ringOut&&At.segment.isInResult()&&_t.push(At)}return _t}},{key:"getLeftmostComparator",value:function(_t){var xt=this,Et=new Map,At=function(Ot){var Dt,Ft,jt,Gt,Jt,qt=Ot.otherSE;Et.set(Ot,{sine:(Dt=xt.point,Ft=_t.point,jt=qt.point,Gt={x:Ft.x-Dt.x,y:Ft.y-Dt.y},Jt={x:jt.x-Dt.x,y:jt.y-Dt.y},Yp(Jt,Gt)/Qg(Jt)/Qg(Gt)),cosine:ay(xt.point,_t.point,qt.point)})};return function(Ot,Dt){Et.has(Ot)||At(Ot),Et.has(Dt)||At(Dt);var Ft=Et.get(Ot),jt=Ft.sine,Gt=Ft.cosine,Jt=Et.get(Dt),qt=Jt.sine,on=Jt.cosine;return jt>=0&&qt>=0?Gt<on?1:Gt>on?-1:0:jt<0&&qt<0?Gt<on?-1:Gt>on?1:0:qt<jt?-1:qt>jt?1:0}}}]),st}(),qv=0,em=function(){function st(_t,xt,Et,At){au(this,st),this.id=++qv,this.leftSE=_t,_t.segment=this,_t.otherSE=xt,this.rightSE=xt,xt.segment=this,xt.otherSE=_t,this.rings=Et,this.windings=At}return Zl(st,null,[{key:"compare",value:function(_t,xt){var Et=_t.leftSE.point.x,At=xt.leftSE.point.x,Ot=_t.rightSE.point.x,Dt=xt.rightSE.point.x;if(Dt<Et)return 1;if(Ot<At)return-1;var Ft=_t.leftSE.point.y,jt=xt.leftSE.point.y,Gt=_t.rightSE.point.y,Jt=xt.rightSE.point.y;if(Et<At){if(jt<Ft&&jt<Gt)return 1;if(jt>Ft&&jt>Gt)return-1;var qt=_t.comparePoint(xt.leftSE.point);if(qt<0)return 1;if(qt>0)return-1;var on=xt.comparePoint(_t.rightSE.point);return on!==0?on:-1}if(Et>At){if(Ft<jt&&Ft<Jt)return-1;if(Ft>jt&&Ft>Jt)return 1;var vn=xt.comparePoint(_t.leftSE.point);if(vn!==0)return vn;var _n=_t.comparePoint(xt.rightSE.point);return _n<0?1:_n>0?-1:1}if(Ft<jt)return-1;if(Ft>jt)return 1;if(Ot<Dt){var En=xt.comparePoint(_t.rightSE.point);if(En!==0)return En}if(Ot>Dt){var cn=_t.comparePoint(xt.rightSE.point);if(cn<0)return 1;if(cn>0)return-1}if(Ot!==Dt){var Hn=Gt-Ft,nr=Ot-Et,bn=Jt-jt,zn=Dt-At;if(Hn>nr&&bn<zn)return 1;if(Hn<nr&&bn>zn)return-1}return Ot>Dt?1:Ot<Dt||Gt<Jt?-1:Gt>Jt?1:_t.id<xt.id?-1:_t.id>xt.id?1:0}}]),Zl(st,[{key:"replaceRightSE",value:function(_t){this.rightSE=_t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var _t=this.leftSE.point.y,xt=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:_t<xt?_t:xt},ur:{x:this.rightSE.point.x,y:_t>xt?_t:xt}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(_t){return _t.x===this.leftSE.point.x&&_t.y===this.leftSE.point.y||_t.x===this.rightSE.point.x&&_t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(_t){if(this.isAnEndpoint(_t))return 0;var xt=this.leftSE.point,Et=this.rightSE.point,At=this.vector();if(xt.x===Et.x)return _t.x===xt.x?0:_t.x<xt.x?1:-1;var Ot=(_t.y-xt.y)/At.y,Dt=xt.x+Ot*At.x;if(_t.x===Dt)return 0;var Ft=(_t.x-xt.x)/At.x,jt=xt.y+Ft*At.y;return _t.y===jt?0:_t.y<jt?-1:1}},{key:"getIntersection",value:function(_t){var xt=this.bbox(),Et=_t.bbox(),At=Kg(xt,Et);if(At===null)return null;var Ot=this.leftSE.point,Dt=this.rightSE.point,Ft=_t.leftSE.point,jt=_t.rightSE.point,Gt=Wp(xt,Ft)&&this.comparePoint(Ft)===0,Jt=Wp(Et,Ot)&&_t.comparePoint(Ot)===0,qt=Wp(xt,jt)&&this.comparePoint(jt)===0,on=Wp(Et,Dt)&&_t.comparePoint(Dt)===0;if(Jt&&Gt)return on&&!qt?Dt:!on&&qt?jt:null;if(Jt)return qt&&Ot.x===jt.x&&Ot.y===jt.y?null:Ot;if(Gt)return on&&Dt.x===Ft.x&&Dt.y===Ft.y?null:Ft;if(on&&qt)return null;if(on)return Dt;if(qt)return jt;var vn=function(_n,En,cn,Hn){if(En.x===0)return uy(cn,Hn,_n.x);if(Hn.x===0)return uy(_n,En,cn.x);if(En.y===0)return ly(cn,Hn,_n.y);if(Hn.y===0)return ly(_n,En,cn.y);var nr=Yp(En,Hn);if(nr==0)return null;var bn={x:cn.x-_n.x,y:cn.y-_n.y},zn=Yp(bn,En)/nr,Un=Yp(bn,Hn)/nr;return{x:(_n.x+Un*En.x+(cn.x+zn*Hn.x))/2,y:(_n.y+Un*En.y+(cn.y+zn*Hn.y))/2}}(Ot,this.vector(),Ft,_t.vector());return vn===null?null:Wp(At,vn)?Gp.round(vn.x,vn.y):null}},{key:"split",value:function(_t){var xt=[],Et=_t.events!==void 0,At=new uh(_t,!0),Ot=new uh(_t,!1),Dt=this.rightSE;this.replaceRightSE(Ot),xt.push(Ot),xt.push(At);var Ft=new st(At,Dt,this.rings.slice(),this.windings.slice());return uh.comparePoints(Ft.leftSE.point,Ft.rightSE.point)>0&&Ft.swapEvents(),uh.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Et&&(At.checkForConsuming(),Ot.checkForConsuming()),xt}},{key:"swapEvents",value:function(){var _t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=_t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var xt=0,Et=this.windings.length;xt<Et;xt++)this.windings[xt]*=-1}},{key:"consume",value:function(_t){for(var xt=this,Et=_t;xt.consumedBy;)xt=xt.consumedBy;for(;Et.consumedBy;)Et=Et.consumedBy;var At=st.compare(xt,Et);if(At!==0){if(At>0){var Ot=xt;xt=Et,Et=Ot}if(xt.prev===Et){var Dt=xt;xt=Et,Et=Dt}for(var Ft=0,jt=Et.rings.length;Ft<jt;Ft++){var Gt=Et.rings[Ft],Jt=Et.windings[Ft],qt=xt.rings.indexOf(Gt);qt===-1?(xt.rings.push(Gt),xt.windings.push(Jt)):xt.windings[qt]+=Jt}Et.rings=null,Et.windings=null,Et.consumedBy=xt,Et.leftSE.consumedBy=xt.leftSE,Et.rightSE.consumedBy=xt.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var _t=this.prev.consumedBy||this.prev;this._beforeState=_t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var _t=this.beforeState();this._afterState={rings:_t.rings.slice(0),windings:_t.windings.slice(0),multiPolys:[]};for(var xt=this._afterState.rings,Et=this._afterState.windings,At=this._afterState.multiPolys,Ot=0,Dt=this.rings.length;Ot<Dt;Ot++){var Ft=this.rings[Ot],jt=this.windings[Ot],Gt=xt.indexOf(Ft);Gt===-1?(xt.push(Ft),Et.push(jt)):Et[Gt]+=jt}for(var Jt=[],qt=[],on=0,vn=xt.length;on<vn;on++)if(Et[on]!==0){var _n=xt[on],En=_n.poly;if(qt.indexOf(En)===-1)if(_n.isExterior)Jt.push(En);else{qt.indexOf(En)===-1&&qt.push(En);var cn=Jt.indexOf(_n.poly);cn!==-1&&Jt.splice(cn,1)}}for(var Hn=0,nr=Jt.length;Hn<nr;Hn++){var bn=Jt[Hn].multiPoly;At.indexOf(bn)===-1&&At.push(bn)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var _t=this.beforeState().multiPolys,xt=this.afterState().multiPolys;switch(Dc.type){case"union":var Et=_t.length===0,At=xt.length===0;this._isInResult=Et!==At;break;case"intersection":var Ot,Dt;_t.length<xt.length?(Ot=_t.length,Dt=xt.length):(Ot=xt.length,Dt=_t.length),this._isInResult=Dt===Dc.numMultiPolys&&Ot<Dt;break;case"xor":var Ft=Math.abs(_t.length-xt.length);this._isInResult=Ft%2==1;break;case"difference":var jt=function(Gt){return Gt.length===1&&Gt[0].isSubject};this._isInResult=jt(_t)!==jt(xt);break;default:throw new Error("Unrecognized operation type found ".concat(Dc.type))}return this._isInResult}}],[{key:"fromRing",value:function(_t,xt,Et){var At,Ot,Dt,Ft=uh.comparePoints(_t,xt);if(Ft<0)At=_t,Ot=xt,Dt=1;else{if(!(Ft>0))throw new Error("Tried to create degenerate segment at [".concat(_t.x,", ").concat(_t.y,"]"));At=xt,Ot=_t,Dt=-1}return new st(new uh(At,!0),new uh(Ot,!1),[Et],[Dt])}}]),st}(),cy=function(){function st(_t,xt,Et){if(au(this,st),!Array.isArray(_t)||_t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=xt,this.isExterior=Et,this.segments=[],typeof _t[0][0]!="number"||typeof _t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var At=Gp.round(_t[0][0],_t[0][1]);this.bbox={ll:{x:At.x,y:At.y},ur:{x:At.x,y:At.y}};for(var Ot=At,Dt=1,Ft=_t.length;Dt<Ft;Dt++){if(typeof _t[Dt][0]!="number"||typeof _t[Dt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var jt=Gp.round(_t[Dt][0],_t[Dt][1]);jt.x===Ot.x&&jt.y===Ot.y||(this.segments.push(em.fromRing(Ot,jt,this)),jt.x<this.bbox.ll.x&&(this.bbox.ll.x=jt.x),jt.y<this.bbox.ll.y&&(this.bbox.ll.y=jt.y),jt.x>this.bbox.ur.x&&(this.bbox.ur.x=jt.x),jt.y>this.bbox.ur.y&&(this.bbox.ur.y=jt.y),Ot=jt)}At.x===Ot.x&&At.y===Ot.y||this.segments.push(em.fromRing(Ot,At,this))}return Zl(st,[{key:"getSweepEvents",value:function(){for(var _t=[],xt=0,Et=this.segments.length;xt<Et;xt++){var At=this.segments[xt];_t.push(At.leftSE),_t.push(At.rightSE)}return _t}}]),st}(),Xv=function(){function st(_t,xt){if(au(this,st),!Array.isArray(_t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new cy(_t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Et=1,At=_t.length;Et<At;Et++){var Ot=new cy(_t[Et],this,!1);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.interiorRings.push(Ot)}this.multiPoly=xt}return Zl(st,[{key:"getSweepEvents",value:function(){for(var _t=this.exteriorRing.getSweepEvents(),xt=0,Et=this.interiorRings.length;xt<Et;xt++)for(var At=this.interiorRings[xt].getSweepEvents(),Ot=0,Dt=At.length;Ot<Dt;Ot++)_t.push(At[Ot]);return _t}}]),st}(),hy=function(){function st(_t,xt){if(au(this,st),!Array.isArray(_t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof _t[0][0][0]=="number"&&(_t=[_t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Et=0,At=_t.length;Et<At;Et++){var Ot=new Xv(_t[Et],this);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.polys.push(Ot)}this.isSubject=xt}return Zl(st,[{key:"getSweepEvents",value:function(){for(var _t=[],xt=0,Et=this.polys.length;xt<Et;xt++)for(var At=this.polys[xt].getSweepEvents(),Ot=0,Dt=At.length;Ot<Dt;Ot++)_t.push(At[Ot]);return _t}}]),st}(),dy=function(){function st(_t){au(this,st),this.events=_t;for(var xt=0,Et=_t.length;xt<Et;xt++)_t[xt].segment.ringOut=this;this.poly=null}return Zl(st,null,[{key:"factory",value:function(_t){for(var xt=[],Et=0,At=_t.length;Et<At;Et++){var Ot=_t[Et];if(Ot.isInResult()&&!Ot.ringOut){for(var Dt=null,Ft=Ot.leftSE,jt=Ot.rightSE,Gt=[Ft],Jt=Ft.point,qt=[];Dt=Ft,Ft=jt,Gt.push(Ft),Ft.point!==Jt;)for(;;){var on=Ft.getAvailableLinkedEvents();if(on.length===0){var vn=Gt[0].point,_n=Gt[Gt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(vn.x,",")+" ".concat(vn.y,"]. Last matching segment found ends at")+" [".concat(_n.x,", ").concat(_n.y,"]."))}if(on.length===1){jt=on[0].otherSE;break}for(var En=null,cn=0,Hn=qt.length;cn<Hn;cn++)if(qt[cn].point===Ft.point){En=cn;break}if(En===null){qt.push({index:Gt.length,point:Ft.point});var nr=Ft.getLeftmostComparator(Dt);jt=on.sort(nr)[0].otherSE;break}var bn=qt.splice(En)[0],zn=Gt.splice(bn.index);zn.unshift(zn[0].otherSE),xt.push(new st(zn.reverse()))}xt.push(new st(Gt))}}return xt}}]),Zl(st,[{key:"getGeom",value:function(){for(var _t=this.events[0].point,xt=[_t],Et=1,At=this.events.length-1;Et<At;Et++){var Ot=this.events[Et].point,Dt=this.events[Et+1].point;sy(Ot,_t,Dt)!==0&&(xt.push(Ot),_t=Ot)}if(xt.length===1)return null;var Ft=xt[0],jt=xt[1];sy(Ft,_t,jt)===0&&xt.shift(),xt.push(xt[0]);for(var Gt=this.isExteriorRing()?1:-1,Jt=this.isExteriorRing()?0:xt.length-1,qt=this.isExteriorRing()?xt.length:-1,on=[],vn=Jt;vn!=qt;vn+=Gt)on.push([xt[vn].x,xt[vn].y]);return on}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var _t=this.enclosingRing();this._isExteriorRing=!_t||!_t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var _t=this.events[0],xt=1,Et=this.events.length;xt<Et;xt++){var At=this.events[xt];uh.compare(_t,At)>0&&(_t=At)}for(var Ot=_t.segment.prevInResult(),Dt=Ot?Ot.prevInResult():null;;){if(!Ot)return null;if(!Dt)return Ot.ringOut;if(Dt.ringOut!==Ot.ringOut)return Dt.ringOut.enclosingRing()!==Ot.ringOut?Ot.ringOut:Ot.ringOut.enclosingRing();Ot=Dt.prevInResult(),Dt=Ot?Ot.prevInResult():null}}}]),st}(),fy=function(){function st(_t){au(this,st),this.exteriorRing=_t,_t.poly=this,this.interiorRings=[]}return Zl(st,[{key:"addInterior",value:function(_t){this.interiorRings.push(_t),_t.poly=this}},{key:"getGeom",value:function(){var _t=[this.exteriorRing.getGeom()];if(_t[0]===null)return null;for(var xt=0,Et=this.interiorRings.length;xt<Et;xt++){var At=this.interiorRings[xt].getGeom();At!==null&&_t.push(At)}return _t}}]),st}(),Zv=function(){function st(_t){au(this,st),this.rings=_t,this.polys=this._composePolys(_t)}return Zl(st,[{key:"getGeom",value:function(){for(var _t=[],xt=0,Et=this.polys.length;xt<Et;xt++){var At=this.polys[xt].getGeom();At!==null&&_t.push(At)}return _t}},{key:"_composePolys",value:function(_t){for(var xt=[],Et=0,At=_t.length;Et<At;Et++){var Ot=_t[Et];if(!Ot.poly)if(Ot.isExteriorRing())xt.push(new fy(Ot));else{var Dt=Ot.enclosingRing();Dt.poly||xt.push(new fy(Dt)),Dt.poly.addInterior(Ot)}}return xt}}]),st}(),Kv=function(){function st(_t){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:em.compare;au(this,st),this.queue=_t,this.tree=new T0(xt),this.segments=[]}return Zl(st,[{key:"process",value:function(_t){var xt=_t.segment,Et=[];if(_t.consumedBy)return _t.isLeft?this.queue.remove(_t.otherSE):this.tree.remove(xt),Et;var At=_t.isLeft?this.tree.insert(xt):this.tree.find(xt);if(!At)throw new Error("Unable to find segment #".concat(xt.id," ")+"[".concat(xt.leftSE.point.x,", ").concat(xt.leftSE.point.y,"] -> ")+"[".concat(xt.rightSE.point.x,", ").concat(xt.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Ot=At,Dt=At,Ft=void 0,jt=void 0;Ft===void 0;)(Ot=this.tree.prev(Ot))===null?Ft=null:Ot.key.consumedBy===void 0&&(Ft=Ot.key);for(;jt===void 0;)(Dt=this.tree.next(Dt))===null?jt=null:Dt.key.consumedBy===void 0&&(jt=Dt.key);if(_t.isLeft){var Gt=null;if(Ft){var Jt=Ft.getIntersection(xt);if(Jt!==null&&(xt.isAnEndpoint(Jt)||(Gt=Jt),!Ft.isAnEndpoint(Jt)))for(var qt=this._splitSafely(Ft,Jt),on=0,vn=qt.length;on<vn;on++)Et.push(qt[on])}var _n=null;if(jt){var En=jt.getIntersection(xt);if(En!==null&&(xt.isAnEndpoint(En)||(_n=En),!jt.isAnEndpoint(En)))for(var cn=this._splitSafely(jt,En),Hn=0,nr=cn.length;Hn<nr;Hn++)Et.push(cn[Hn])}if(Gt!==null||_n!==null){var bn=null;Gt===null?bn=_n:_n===null?bn=Gt:bn=uh.comparePoints(Gt,_n)<=0?Gt:_n,this.queue.remove(xt.rightSE),Et.push(xt.rightSE);for(var zn=xt.split(bn),Un=0,qn=zn.length;Un<qn;Un++)Et.push(zn[Un])}Et.length>0?(this.tree.remove(xt),Et.push(_t)):(this.segments.push(xt),xt.prev=Ft)}else{if(Ft&&jt){var Gn=Ft.getIntersection(jt);if(Gn!==null){if(!Ft.isAnEndpoint(Gn))for(var Xr=this._splitSafely(Ft,Gn),Br=0,Jr=Xr.length;Br<Jr;Br++)Et.push(Xr[Br]);if(!jt.isAnEndpoint(Gn))for(var Fr=this._splitSafely(jt,Gn),oi=0,Wr=Fr.length;oi<Wr;oi++)Et.push(Fr[oi])}}this.tree.remove(xt)}return Et}},{key:"_splitSafely",value:function(_t,xt){this.tree.remove(_t);var Et=_t.rightSE;this.queue.remove(Et);var At=_t.split(xt);return At.push(Et),_t.consumedBy===void 0&&this.tree.insert(_t),At}}]),st}(),py=typeof process<"u"&&{version:"2.0.0-beta.25"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Jv=typeof process<"u"&&{version:"2.0.0-beta.25"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Dc=new(function(){function st(){au(this,st)}return Zl(st,[{key:"run",value:function(_t,xt,Et){Dc.type=_t,Gp.reset();for(var At=[new hy(xt,!0)],Ot=0,Dt=Et.length;Ot<Dt;Ot++)At.push(new hy(Et[Ot],!1));if(Dc.numMultiPolys=At.length,Dc.type==="difference")for(var Ft=At[0],jt=1;jt<At.length;)Kg(At[jt].bbox,Ft.bbox)!==null?jt++:At.splice(jt,1);if(Dc.type==="intersection"){for(var Gt=0,Jt=At.length;Gt<Jt;Gt++)for(var qt=At[Gt],on=Gt+1,vn=At.length;on<vn;on++)if(Kg(qt.bbox,At[on].bbox)===null)return[]}for(var _n=new T0(uh.compare),En=0,cn=At.length;En<cn;En++)for(var Hn=At[En].getSweepEvents(),nr=0,bn=Hn.length;nr<bn;nr++)if(_n.insert(Hn[nr]),_n.size>py)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var zn=new Kv(_n),Un=_n.size,qn=_n.pop();qn;){var Gn=qn.key;if(_n.size===Un){var Xr=Gn.segment;throw new Error("Unable to pop() ".concat(Gn.isLeft?"left":"right"," SweepEvent ")+"[".concat(Gn.point.x,", ").concat(Gn.point.y,"] from segment #").concat(Xr.id," ")+"[".concat(Xr.leftSE.point.x,", ").concat(Xr.leftSE.point.y,"] -> ")+"[".concat(Xr.rightSE.point.x,", ").concat(Xr.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(_n.size>py)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(zn.segments.length>Jv)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Br=zn.process(Gn),Jr=0,Fr=Br.length;Jr<Fr;Jr++){var oi=Br[Jr];oi.consumedBy===void 0&&_n.insert(oi)}Un=_n.size,qn=_n.pop()}Gp.reset();var Wr=dy.factory(zn.segments);return new Zv(Wr).getGeom()}}]),st}()),Dh={union:function(st){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Et=1;Et<_t;Et++)xt[Et-1]=arguments[Et];return Dc.run("union",st,xt)},intersection:function(st){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Et=1;Et<_t;Et++)xt[Et-1]=arguments[Et];return Dc.run("intersection",st,xt)},xor:function(st){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Et=1;Et<_t;Et++)xt[Et-1]=arguments[Et];return Dc.run("xor",st,xt)},difference:function(st){for(var _t=arguments.length,xt=new Array(_t>1?_t-1:0),Et=1;Et<_t;Et++)xt[Et-1]=arguments[Et];return Dc.run("difference",st,xt)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(st){if(this==null)throw new TypeError(this+" is not an object");var _t=Object(this),xt=Math.max(Math.min(_t.length,9007199254740991),0)||0,Et=1 in arguments&&parseInt(Number(arguments[1]),10)||0;Et=Et<0?Math.max(xt+Et,0):Math.min(Et,xt);var At=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:xt;for(At=At<0?Math.max(xt+arguments[2],0):Math.min(At,xt);Et<At;)_t[Et]=st,++Et;return _t},writable:!0}),Number.isFinite=Number.isFinite||function(st){return typeof st=="number"&&isFinite(st)},Number.isInteger=Number.isInteger||function(st){return typeof st=="number"&&isFinite(st)&&Math.floor(st)===st},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(st){return st!=st},Math.trunc=Math.trunc||function(st){return st<0?Math.ceil(st):Math.floor(st)};var qd=function(){};qd.prototype.interfaces_=function(){return[]},qd.prototype.getClass=function(){return qd},qd.prototype.equalsWithTolerance=function(st,_t,xt){return Math.abs(st-_t)<=xt};var ra=function(st){function _t(xt){st.call(this,xt),this.name="IllegalArgumentException",this.message=xt,this.stack=new st().stack}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t}(Error),Po=function(){},gy={MAX_VALUE:{configurable:!0}};Po.isNaN=function(st){return Number.isNaN(st)},Po.doubleToLongBits=function(st){return st},Po.longBitsToDouble=function(st){return st},Po.isInfinite=function(st){return!Number.isFinite(st)},gy.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Po,gy);var Su=function(){},qp=function(){},Uf=function(){};function Cu(){}var Ur=function st(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=st.NULL_ORDINATE;else if(arguments.length===1){var _t=arguments[0];this.x=_t.x,this.y=_t.y,this.z=_t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=st.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Xd={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Ur.prototype.setOrdinate=function(st,_t){switch(st){case Ur.X:this.x=_t;break;case Ur.Y:this.y=_t;break;case Ur.Z:this.z=_t;break;default:throw new ra("Invalid ordinate index: "+st)}},Ur.prototype.equals2D=function(){if(arguments.length===1){var st=arguments[0];return this.x===st.x&&this.y===st.y}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return!!qd.equalsWithTolerance(this.x,_t.x,xt)&&!!qd.equalsWithTolerance(this.y,_t.y,xt)}},Ur.prototype.getOrdinate=function(st){switch(st){case Ur.X:return this.x;case Ur.Y:return this.y;case Ur.Z:return this.z}throw new ra("Invalid ordinate index: "+st)},Ur.prototype.equals3D=function(st){return this.x===st.x&&this.y===st.y&&(this.z===st.z||Po.isNaN(this.z))&&Po.isNaN(st.z)},Ur.prototype.equals=function(st){return st instanceof Ur&&this.equals2D(st)},Ur.prototype.equalInZ=function(st,_t){return qd.equalsWithTolerance(this.z,st.z,_t)},Ur.prototype.compareTo=function(st){var _t=st;return this.x<_t.x?-1:this.x>_t.x?1:this.y<_t.y?-1:this.y>_t.y?1:0},Ur.prototype.clone=function(){},Ur.prototype.copy=function(){return new Ur(this)},Ur.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Ur.prototype.distance3D=function(st){var _t=this.x-st.x,xt=this.y-st.y,Et=this.z-st.z;return Math.sqrt(_t*_t+xt*xt+Et*Et)},Ur.prototype.distance=function(st){var _t=this.x-st.x,xt=this.y-st.y;return Math.sqrt(_t*_t+xt*xt)},Ur.prototype.hashCode=function(){var st=17;return st=37*(st=37*st+Ur.hashCode(this.x))+Ur.hashCode(this.y)},Ur.prototype.setCoordinate=function(st){this.x=st.x,this.y=st.y,this.z=st.z},Ur.prototype.interfaces_=function(){return[Su,qp,Cu]},Ur.prototype.getClass=function(){return Ur},Ur.hashCode=function(){if(arguments.length===1){var st=arguments[0],_t=Po.doubleToLongBits(st);return Math.trunc((_t^_t)>>>32)}},Xd.DimensionalComparator.get=function(){return Nh},Xd.serialVersionUID.get=function(){return 6683108902428367e3},Xd.NULL_ORDINATE.get=function(){return Po.NaN},Xd.X.get=function(){return 0},Xd.Y.get=function(){return 1},Xd.Z.get=function(){return 2},Object.defineProperties(Ur,Xd);var Nh=function(st){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var _t=arguments[0];if(_t!==2&&_t!==3)throw new ra("only 2 or 3 dimensions may be specified");this._dimensionsToTest=_t}}};Nh.prototype.compare=function(st,_t){var xt=st,Et=_t,At=Nh.compare(xt.x,Et.x);if(At!==0)return At;var Ot=Nh.compare(xt.y,Et.y);return Ot!==0?Ot:this._dimensionsToTest<=2?0:Nh.compare(xt.z,Et.z)},Nh.prototype.interfaces_=function(){return[Uf]},Nh.prototype.getClass=function(){return Nh},Nh.compare=function(st,_t){return st<_t?-1:st>_t?1:Po.isNaN(st)?Po.isNaN(_t)?0:-1:Po.isNaN(_t)?1:0};var jf=function(){};jf.prototype.create=function(){},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf};var Zr=function(){},Xp={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.toLocationSymbol=function(st){switch(st){case Zr.EXTERIOR:return"e";case Zr.BOUNDARY:return"b";case Zr.INTERIOR:return"i";case Zr.NONE:return"-"}throw new ra("Unknown location value: "+st)},Xp.INTERIOR.get=function(){return 0},Xp.BOUNDARY.get=function(){return 1},Xp.EXTERIOR.get=function(){return 2},Xp.NONE.get=function(){return-1},Object.defineProperties(Zr,Xp);var xo=function(st,_t){return st.interfaces_&&st.interfaces_().indexOf(_t)>-1},lu=function(){},my={LOG_10:{configurable:!0}};lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu},lu.log10=function(st){var _t=Math.log(st);return Po.isInfinite(_t)||Po.isNaN(_t)?_t:_t/lu.LOG_10},lu.min=function(st,_t,xt,Et){var At=st;return _t<At&&(At=_t),xt<At&&(At=xt),Et<At&&(At=Et),At},lu.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var st=arguments[0],_t=arguments[1],xt=arguments[2];return st<_t?_t:st>xt?xt:st}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Et=arguments[0],At=arguments[1],Ot=arguments[2];return Et<At?At:Et>Ot?Ot:Et}},lu.wrap=function(st,_t){return st<0?_t- -st%_t:st%_t},lu.max=function(){if(arguments.length===3){var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=st;return _t>Et&&(Et=_t),xt>Et&&(Et=xt),Et}if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],Ft=arguments[3],jt=At;return Ot>jt&&(jt=Ot),Dt>jt&&(jt=Dt),Ft>jt&&(jt=Ft),jt}},lu.average=function(st,_t){return(st+_t)/2},my.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(lu,my);var uc=function(st){this.str=st};uc.prototype.append=function(st){this.str+=st},uc.prototype.setCharAt=function(st,_t){this.str=this.str.substr(0,st)+_t+this.str.substr(st+1)},uc.prototype.toString=function(st){return this.str};var cc=function(st){this.value=st};cc.prototype.intValue=function(){return this.value},cc.prototype.compareTo=function(st){return this.value<st?-1:this.value>st?1:0},cc.isNaN=function(st){return Number.isNaN(st)};var Zp=function(){};Zp.isWhitespace=function(st){return st<=32&&st>=0||st===127},Zp.toUpperCase=function(st){return st.toUpperCase()};var ri=function st(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var _t=arguments[0];this.init(_t)}else if(arguments[0]instanceof st){var xt=arguments[0];this.init(xt)}else if(typeof arguments[0]=="string"){var Et=arguments[0];st.call(this,st.parse(Et))}}else if(arguments.length===2){var At=arguments[0],Ot=arguments[1];this.init(At,Ot)}},Vu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};ri.prototype.le=function(st){return(this._hi<st._hi||this._hi===st._hi)&&this._lo<=st._lo},ri.prototype.extractSignificantDigits=function(st,_t){var xt=this.abs(),Et=ri.magnitude(xt._hi),At=ri.TEN.pow(Et);(xt=xt.divide(At)).gt(ri.TEN)?(xt=xt.divide(ri.TEN),Et+=1):xt.lt(ri.ONE)&&(xt=xt.multiply(ri.TEN),Et-=1);for(var Ot=Et+1,Dt=new uc,Ft=ri.MAX_PRINT_DIGITS-1,jt=0;jt<=Ft;jt++){st&&jt===Ot&&Dt.append(".");var Gt=Math.trunc(xt._hi);if(Gt<0)break;var Jt=!1,qt=0;Gt>9?(Jt=!0,qt="9"):qt="0"+Gt,Dt.append(qt),xt=xt.subtract(ri.valueOf(Gt)).multiply(ri.TEN),Jt&&xt.selfAdd(ri.TEN);var on=!0,vn=ri.magnitude(xt._hi);if(vn<0&&Math.abs(vn)>=Ft-jt&&(on=!1),!on)break}return _t[0]=Et,Dt.toString()},ri.prototype.sqr=function(){return this.multiply(this)},ri.prototype.doubleValue=function(){return this._hi+this._lo},ri.prototype.subtract=function(){if(arguments[0]instanceof ri){var st=arguments[0];return this.add(st.negate())}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.add(-_t)}},ri.prototype.equals=function(){if(arguments.length===1){var st=arguments[0];return this._hi===st._hi&&this._lo===st._lo}},ri.prototype.isZero=function(){return this._hi===0&&this._lo===0},ri.prototype.selfSubtract=function(){if(arguments[0]instanceof ri){var st=arguments[0];return this.isNaN()?this:this.selfAdd(-st._hi,-st._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.isNaN()?this:this.selfAdd(-_t,0)}},ri.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},ri.prototype.min=function(st){return this.le(st)?this:st},ri.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof ri){var st=arguments[0];return this.selfDivide(st._hi,st._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.selfDivide(_t,0)}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1],At=null,Ot=null,Dt=null,Ft=null,jt=null,Gt=null,Jt=null,qt=null;return jt=this._hi/xt,qt=(At=(Gt=ri.SPLIT*jt)-(At=Gt-jt))*(Dt=(qt=ri.SPLIT*xt)-(Dt=qt-xt))-(Jt=jt*xt)+At*(Ft=xt-Dt)+(Ot=jt-At)*Dt+Ot*Ft,qt=jt+(Gt=(this._hi-Jt-qt+this._lo-jt*Et)/xt),this._hi=qt,this._lo=jt-qt+Gt,this}},ri.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},ri.prototype.divide=function(){if(arguments[0]instanceof ri){var st=arguments[0],_t=null,xt=null,Et=null,At=null,Ot=null,Dt=null,Ft=null,jt=null;xt=(Ot=this._hi/st._hi)-(_t=(Dt=ri.SPLIT*Ot)-(_t=Dt-Ot)),jt=_t*(Et=(jt=ri.SPLIT*st._hi)-(Et=jt-st._hi))-(Ft=Ot*st._hi)+_t*(At=st._hi-Et)+xt*Et+xt*At;var Gt=jt=Ot+(Dt=(this._hi-Ft-jt+this._lo-Ot*st._lo)/st._hi),Jt=Ot-jt+Dt;return new ri(Gt,Jt)}if(typeof arguments[0]=="number"){var qt=arguments[0];return Po.isNaN(qt)?ri.createNaN():ri.copy(this).selfDivide(qt,0)}},ri.prototype.ge=function(st){return(this._hi>st._hi||this._hi===st._hi)&&this._lo>=st._lo},ri.prototype.pow=function(st){if(st===0)return ri.valueOf(1);var _t=new ri(this),xt=ri.valueOf(1),Et=Math.abs(st);if(Et>1)for(;Et>0;)Et%2==1&&xt.selfMultiply(_t),(Et/=2)>0&&(_t=_t.sqr());else xt=_t;return st<0?xt.reciprocal():xt},ri.prototype.ceil=function(){if(this.isNaN())return ri.NaN;var st=Math.ceil(this._hi),_t=0;return st===this._hi&&(_t=Math.ceil(this._lo)),new ri(st,_t)},ri.prototype.compareTo=function(st){var _t=st;return this._hi<_t._hi?-1:this._hi>_t._hi?1:this._lo<_t._lo?-1:this._lo>_t._lo?1:0},ri.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},ri.prototype.setValue=function(){if(arguments[0]instanceof ri){var st=arguments[0];return this.init(st),this}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.init(_t),this}},ri.prototype.max=function(st){return this.ge(st)?this:st},ri.prototype.sqrt=function(){if(this.isZero())return ri.valueOf(0);if(this.isNegative())return ri.NaN;var st=1/Math.sqrt(this._hi),_t=this._hi*st,xt=ri.valueOf(_t),Et=this.subtract(xt.sqr())._hi*(.5*st);return xt.add(Et)},ri.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof ri){var st=arguments[0];return this.selfAdd(st._hi,st._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0],xt=null,Et=null,At=null,Ot=null,Dt=null,Ft=null;return Ot=(At=this._hi+_t)-(Dt=At-this._hi),Et=(Ft=(Ot=_t-Dt+(this._hi-Ot))+this._lo)+(At-(xt=At+Ft)),this._hi=xt+Et,this._lo=Et+(xt-this._hi),this}}else if(arguments.length===2){var jt=arguments[0],Gt=arguments[1],Jt=null,qt=null,on=null,vn=null,_n=null,En=null,cn=null;vn=this._hi+jt,qt=this._lo+Gt,_n=vn-(En=vn-this._hi),on=qt-(cn=qt-this._lo);var Hn=(Jt=vn+(En=(_n=jt-En+(this._hi-_n))+qt))+(En=(on=Gt-cn+(this._lo-on))+(En+(vn-Jt))),nr=En+(Jt-Hn);return this._hi=Hn,this._lo=nr,this}},ri.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof ri){var st=arguments[0];return this.selfMultiply(st._hi,st._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.selfMultiply(_t,0)}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1],At=null,Ot=null,Dt=null,Ft=null,jt=null,Gt=null;At=(jt=ri.SPLIT*this._hi)-this._hi,Gt=ri.SPLIT*xt,At=jt-At,Ot=this._hi-At,Dt=Gt-xt;var Jt=(jt=this._hi*xt)+(Gt=At*(Dt=Gt-Dt)-jt+At*(Ft=xt-Dt)+Ot*Dt+Ot*Ft+(this._hi*Et+this._lo*xt)),qt=Gt+(At=jt-Jt);return this._hi=Jt,this._lo=qt,this}},ri.prototype.selfSqr=function(){return this.selfMultiply(this)},ri.prototype.floor=function(){if(this.isNaN())return ri.NaN;var st=Math.floor(this._hi),_t=0;return st===this._hi&&(_t=Math.floor(this._lo)),new ri(st,_t)},ri.prototype.negate=function(){return this.isNaN()?this:new ri(-this._hi,-this._lo)},ri.prototype.clone=function(){},ri.prototype.multiply=function(){if(arguments[0]instanceof ri){var st=arguments[0];return st.isNaN()?ri.createNaN():ri.copy(this).selfMultiply(st)}if(typeof arguments[0]=="number"){var _t=arguments[0];return Po.isNaN(_t)?ri.createNaN():ri.copy(this).selfMultiply(_t,0)}},ri.prototype.isNaN=function(){return Po.isNaN(this._hi)},ri.prototype.intValue=function(){return Math.trunc(this._hi)},ri.prototype.toString=function(){var st=ri.magnitude(this._hi);return st>=-3&&st<=20?this.toStandardNotation():this.toSciNotation()},ri.prototype.toStandardNotation=function(){var st=this.getSpecialNumberString();if(st!==null)return st;var _t=new Array(1).fill(null),xt=this.extractSignificantDigits(!0,_t),Et=_t[0]+1,At=xt;if(xt.charAt(0)===".")At="0"+xt;else if(Et<0)At="0."+ri.stringOfChar("0",-Et)+xt;else if(xt.indexOf(".")===-1){var Ot=Et-xt.length;At=xt+ri.stringOfChar("0",Ot)+".0"}return this.isNegative()?"-"+At:At},ri.prototype.reciprocal=function(){var st,_t,xt,Et,At=null,Ot=null,Dt=null,Ft=null;st=(xt=1/this._hi)-(At=(Dt=ri.SPLIT*xt)-(At=Dt-xt)),Ot=(Ft=ri.SPLIT*this._hi)-this._hi;var jt=xt+(Dt=(1-(Et=xt*this._hi)-(Ft=At*(Ot=Ft-Ot)-Et+At*(_t=this._hi-Ot)+st*Ot+st*_t)-xt*this._lo)/this._hi);return new ri(jt,xt-jt+Dt)},ri.prototype.toSciNotation=function(){if(this.isZero())return ri.SCI_NOT_ZERO;var st=this.getSpecialNumberString();if(st!==null)return st;var _t=new Array(1).fill(null),xt=this.extractSignificantDigits(!1,_t),Et=ri.SCI_NOT_EXPONENT_CHAR+_t[0];if(xt.charAt(0)==="0")throw new Error("Found leading zero: "+xt);var At="";xt.length>1&&(At=xt.substring(1));var Ot=xt.charAt(0)+"."+At;return this.isNegative()?"-"+Ot+Et:Ot+Et},ri.prototype.abs=function(){return this.isNaN()?ri.NaN:this.isNegative()?this.negate():new ri(this)},ri.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},ri.prototype.lt=function(st){return(this._hi<st._hi||this._hi===st._hi)&&this._lo<st._lo},ri.prototype.add=function(){if(arguments[0]instanceof ri){var st=arguments[0];return ri.copy(this).selfAdd(st)}if(typeof arguments[0]=="number"){var _t=arguments[0];return ri.copy(this).selfAdd(_t)}},ri.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var st=arguments[0];this._hi=st,this._lo=0}else if(arguments[0]instanceof ri){var _t=arguments[0];this._hi=_t._hi,this._lo=_t._lo}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];this._hi=xt,this._lo=Et}},ri.prototype.gt=function(st){return(this._hi>st._hi||this._hi===st._hi)&&this._lo>st._lo},ri.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},ri.prototype.trunc=function(){return this.isNaN()?ri.NaN:this.isPositive()?this.floor():this.ceil()},ri.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},ri.prototype.interfaces_=function(){return[Cu,Su,qp]},ri.prototype.getClass=function(){return ri},ri.sqr=function(st){return ri.valueOf(st).selfMultiply(st)},ri.valueOf=function(){if(typeof arguments[0]=="string"){var st=arguments[0];return ri.parse(st)}if(typeof arguments[0]=="number"){var _t=arguments[0];return new ri(_t)}},ri.sqrt=function(st){return ri.valueOf(st).sqrt()},ri.parse=function(st){for(var _t=0,xt=st.length;Zp.isWhitespace(st.charAt(_t));)_t++;var Et=!1;if(_t<xt){var At=st.charAt(_t);At!=="-"&&At!=="+"||(_t++,At==="-"&&(Et=!0))}for(var Ot=new ri,Dt=0,Ft=0,jt=0;!(_t>=xt);){var Gt=st.charAt(_t);if(_t++,Zp.isDigit(Gt)){var Jt=Gt-"0";Ot.selfMultiply(ri.TEN),Ot.selfAdd(Jt),Dt++}else{if(Gt!=="."){if(Gt==="e"||Gt==="E"){var qt=st.substring(_t);try{jt=cc.parseInt(qt)}catch(cn){throw cn instanceof Error?new Error("Invalid exponent "+qt+" in string "+st):cn}break}throw new Error("Unexpected character '"+Gt+"' at position "+_t+" in string "+st)}Ft=Dt}}var on=Ot,vn=Dt-Ft-jt;if(vn===0)on=Ot;else if(vn>0){var _n=ri.TEN.pow(vn);on=Ot.divide(_n)}else if(vn<0){var En=ri.TEN.pow(-vn);on=Ot.multiply(En)}return Et?on.negate():on},ri.createNaN=function(){return new ri(Po.NaN,Po.NaN)},ri.copy=function(st){return new ri(st)},ri.magnitude=function(st){var _t=Math.abs(st),xt=Math.log(_t)/Math.log(10),Et=Math.trunc(Math.floor(xt));return 10*Math.pow(10,Et)<=_t&&(Et+=1),Et},ri.stringOfChar=function(st,_t){for(var xt=new uc,Et=0;Et<_t;Et++)xt.append(st);return xt.toString()},Vu.PI.get=function(){return new ri(3.141592653589793,12246467991473532e-32)},Vu.TWO_PI.get=function(){return new ri(6.283185307179586,24492935982947064e-32)},Vu.PI_2.get=function(){return new ri(1.5707963267948966,6123233995736766e-32)},Vu.E.get=function(){return new ri(2.718281828459045,14456468917292502e-32)},Vu.NaN.get=function(){return new ri(Po.NaN,Po.NaN)},Vu.EPS.get=function(){return 123259516440783e-46},Vu.SPLIT.get=function(){return 134217729},Vu.MAX_PRINT_DIGITS.get=function(){return 32},Vu.TEN.get=function(){return ri.valueOf(10)},Vu.ONE.get=function(){return ri.valueOf(1)},Vu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Vu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(ri,Vu);var Bl=function(){},yy={DP_SAFE_EPSILON:{configurable:!0}};Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.orientationIndex=function(st,_t,xt){var Et=Bl.orientationIndexFilter(st,_t,xt);if(Et<=1)return Et;var At=ri.valueOf(_t.x).selfAdd(-st.x),Ot=ri.valueOf(_t.y).selfAdd(-st.y),Dt=ri.valueOf(xt.x).selfAdd(-_t.x),Ft=ri.valueOf(xt.y).selfAdd(-_t.y);return At.selfMultiply(Ft).selfSubtract(Ot.selfMultiply(Dt)).signum()},Bl.signOfDet2x2=function(st,_t,xt,Et){return st.multiply(Et).selfSubtract(_t.multiply(xt)).signum()},Bl.intersection=function(st,_t,xt,Et){var At=ri.valueOf(Et.y).selfSubtract(xt.y).selfMultiply(ri.valueOf(_t.x).selfSubtract(st.x)),Ot=ri.valueOf(Et.x).selfSubtract(xt.x).selfMultiply(ri.valueOf(_t.y).selfSubtract(st.y)),Dt=At.subtract(Ot),Ft=ri.valueOf(Et.x).selfSubtract(xt.x).selfMultiply(ri.valueOf(st.y).selfSubtract(xt.y)),jt=ri.valueOf(Et.y).selfSubtract(xt.y).selfMultiply(ri.valueOf(st.x).selfSubtract(xt.x)),Gt=Ft.subtract(jt).selfDivide(Dt).doubleValue(),Jt=ri.valueOf(st.x).selfAdd(ri.valueOf(_t.x).selfSubtract(st.x).selfMultiply(Gt)).doubleValue(),qt=ri.valueOf(_t.x).selfSubtract(st.x).selfMultiply(ri.valueOf(st.y).selfSubtract(xt.y)),on=ri.valueOf(_t.y).selfSubtract(st.y).selfMultiply(ri.valueOf(st.x).selfSubtract(xt.x)),vn=qt.subtract(on).selfDivide(Dt).doubleValue(),_n=ri.valueOf(xt.y).selfAdd(ri.valueOf(Et.y).selfSubtract(xt.y).selfMultiply(vn)).doubleValue();return new Ur(Jt,_n)},Bl.orientationIndexFilter=function(st,_t,xt){var Et=null,At=(st.x-xt.x)*(_t.y-xt.y),Ot=(st.y-xt.y)*(_t.x-xt.x),Dt=At-Ot;if(At>0){if(Ot<=0)return Bl.signum(Dt);Et=At+Ot}else{if(!(At<0)||Ot>=0)return Bl.signum(Dt);Et=-At-Ot}var Ft=Bl.DP_SAFE_EPSILON*Et;return Dt>=Ft||-Dt>=Ft?Bl.signum(Dt):2},Bl.signum=function(st){return st>0?1:st<0?-1:0},yy.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Bl,yy);var gs=function(){},Kp={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Kp.X.get=function(){return 0},Kp.Y.get=function(){return 1},Kp.Z.get=function(){return 2},Kp.M.get=function(){return 3},gs.prototype.setOrdinate=function(st,_t,xt){},gs.prototype.size=function(){},gs.prototype.getOrdinate=function(st,_t){},gs.prototype.getCoordinate=function(){},gs.prototype.getCoordinateCopy=function(st){},gs.prototype.getDimension=function(){},gs.prototype.getX=function(st){},gs.prototype.clone=function(){},gs.prototype.expandEnvelope=function(st){},gs.prototype.copy=function(){},gs.prototype.getY=function(st){},gs.prototype.toCoordinateArray=function(){},gs.prototype.interfaces_=function(){return[qp]},gs.prototype.getClass=function(){return gs},Object.defineProperties(gs,Kp);var vy=function(){},Zd=function(st){function _t(){st.call(this,"Projective point not representable on the Cartesian plane.")}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(vy),ul=function(){};ul.arraycopy=function(st,_t,xt,Et,At){for(var Ot=0,Dt=_t;Dt<_t+At;Dt++)xt[Et+Ot]=st[Dt],Ot++},ul.getProperty=function(st){return{"line.separator":`
`}[st]};var Tu=function st(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var _t=arguments[0];this.x=_t.x,this.y=_t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var xt=arguments[0],Et=arguments[1];this.x=xt,this.y=Et,this.w=1}else if(arguments[0]instanceof st&&arguments[1]instanceof st){var At=arguments[0],Ot=arguments[1];this.x=At.y*Ot.w-Ot.y*At.w,this.y=Ot.x*At.w-At.x*Ot.w,this.w=At.x*Ot.y-Ot.x*At.y}else if(arguments[0]instanceof Ur&&arguments[1]instanceof Ur){var Dt=arguments[0],Ft=arguments[1];this.x=Dt.y-Ft.y,this.y=Ft.x-Dt.x,this.w=Dt.x*Ft.y-Ft.x*Dt.y}}else if(arguments.length===3){var jt=arguments[0],Gt=arguments[1],Jt=arguments[2];this.x=jt,this.y=Gt,this.w=Jt}else if(arguments.length===4){var qt=arguments[0],on=arguments[1],vn=arguments[2],_n=arguments[3],En=qt.y-on.y,cn=on.x-qt.x,Hn=qt.x*on.y-on.x*qt.y,nr=vn.y-_n.y,bn=_n.x-vn.x,zn=vn.x*_n.y-_n.x*vn.y;this.x=cn*zn-bn*Hn,this.y=nr*Hn-En*zn,this.w=En*bn-nr*cn}};Tu.prototype.getY=function(){var st=this.y/this.w;if(Po.isNaN(st)||Po.isInfinite(st))throw new Zd;return st},Tu.prototype.getX=function(){var st=this.x/this.w;if(Po.isNaN(st)||Po.isInfinite(st))throw new Zd;return st},Tu.prototype.getCoordinate=function(){var st=new Ur;return st.x=this.getX(),st.y=this.getY(),st},Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu},Tu.intersection=function(st,_t,xt,Et){var At=st.y-_t.y,Ot=_t.x-st.x,Dt=st.x*_t.y-_t.x*st.y,Ft=xt.y-Et.y,jt=Et.x-xt.x,Gt=xt.x*Et.y-Et.x*xt.y,Jt=At*jt-Ft*Ot,qt=(Ot*Gt-jt*Dt)/Jt,on=(Ft*Dt-At*Gt)/Jt;if(Po.isNaN(qt)||Po.isInfinite(qt)||Po.isNaN(on)||Po.isInfinite(on))throw new Zd;return new Ur(qt,on)};var to=function st(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Ur){var _t=arguments[0];this.init(_t.x,_t.x,_t.y,_t.y)}else if(arguments[0]instanceof st){var xt=arguments[0];this.init(xt)}}else if(arguments.length===2){var Et=arguments[0],At=arguments[1];this.init(Et.x,At.x,Et.y,At.y)}else if(arguments.length===4){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2],jt=arguments[3];this.init(Ot,Dt,Ft,jt)}},_y={serialVersionUID:{configurable:!0}};to.prototype.getArea=function(){return this.getWidth()*this.getHeight()},to.prototype.equals=function(st){if(!(st instanceof to))return!1;var _t=st;return this.isNull()?_t.isNull():this._maxx===_t.getMaxX()&&this._maxy===_t.getMaxY()&&this._minx===_t.getMinX()&&this._miny===_t.getMinY()},to.prototype.intersection=function(st){if(this.isNull()||st.isNull()||!this.intersects(st))return new to;var _t=this._minx>st._minx?this._minx:st._minx,xt=this._miny>st._miny?this._miny:st._miny,Et=this._maxx<st._maxx?this._maxx:st._maxx,At=this._maxy<st._maxy?this._maxy:st._maxy;return new to(_t,Et,xt,At)},to.prototype.isNull=function(){return this._maxx<this._minx},to.prototype.getMaxX=function(){return this._maxx},to.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Ur){var st=arguments[0];return this.covers(st.x,st.y)}if(arguments[0]instanceof to){var _t=arguments[0];return!this.isNull()&&!_t.isNull()&&_t.getMinX()>=this._minx&&_t.getMaxX()<=this._maxx&&_t.getMinY()>=this._miny&&_t.getMaxY()<=this._maxy}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];return!this.isNull()&&xt>=this._minx&&xt<=this._maxx&&Et>=this._miny&&Et<=this._maxy}},to.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof to){var st=arguments[0];return!this.isNull()&&!st.isNull()&&!(st._minx>this._maxx||st._maxx<this._minx||st._miny>this._maxy||st._maxy<this._miny)}if(arguments[0]instanceof Ur){var _t=arguments[0];return this.intersects(_t.x,_t.y)}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];return!this.isNull()&&!(xt>this._maxx||xt<this._minx||Et>this._maxy||Et<this._miny)}},to.prototype.getMinY=function(){return this._miny},to.prototype.getMinX=function(){return this._minx},to.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Ur){var st=arguments[0];this.expandToInclude(st.x,st.y)}else if(arguments[0]instanceof to){var _t=arguments[0];if(_t.isNull())return null;this.isNull()?(this._minx=_t.getMinX(),this._maxx=_t.getMaxX(),this._miny=_t.getMinY(),this._maxy=_t.getMaxY()):(_t._minx<this._minx&&(this._minx=_t._minx),_t._maxx>this._maxx&&(this._maxx=_t._maxx),_t._miny<this._miny&&(this._miny=_t._miny),_t._maxy>this._maxy&&(this._maxy=_t._maxy))}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];this.isNull()?(this._minx=xt,this._maxx=xt,this._miny=Et,this._maxy=Et):(xt<this._minx&&(this._minx=xt),xt>this._maxx&&(this._maxx=xt),Et<this._miny&&(this._miny=Et),Et>this._maxy&&(this._maxy=Et))}},to.prototype.minExtent=function(){if(this.isNull())return 0;var st=this.getWidth(),_t=this.getHeight();return st<_t?st:_t},to.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},to.prototype.compareTo=function(st){var _t=st;return this.isNull()?_t.isNull()?0:-1:_t.isNull()?1:this._minx<_t._minx?-1:this._minx>_t._minx?1:this._miny<_t._miny?-1:this._miny>_t._miny?1:this._maxx<_t._maxx?-1:this._maxx>_t._maxx?1:this._maxy<_t._maxy?-1:this._maxy>_t._maxy?1:0},to.prototype.translate=function(st,_t){if(this.isNull())return null;this.init(this.getMinX()+st,this.getMaxX()+st,this.getMinY()+_t,this.getMaxY()+_t)},to.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},to.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},to.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},to.prototype.maxExtent=function(){if(this.isNull())return 0;var st=this.getWidth(),_t=this.getHeight();return st>_t?st:_t},to.prototype.expandBy=function(){if(arguments.length===1){var st=arguments[0];this.expandBy(st,st)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this.isNull())return null;this._minx-=_t,this._maxx+=_t,this._miny-=xt,this._maxy+=xt,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},to.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof to){var st=arguments[0];return this.covers(st)}if(arguments[0]instanceof Ur){var _t=arguments[0];return this.covers(_t)}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];return this.covers(xt,Et)}},to.prototype.centre=function(){return this.isNull()?null:new Ur((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},to.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Ur){var st=arguments[0];this.init(st.x,st.x,st.y,st.y)}else if(arguments[0]instanceof to){var _t=arguments[0];this._minx=_t._minx,this._maxx=_t._maxx,this._miny=_t._miny,this._maxy=_t._maxy}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];this.init(xt.x,Et.x,xt.y,Et.y)}else if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],Ft=arguments[3];At<Ot?(this._minx=At,this._maxx=Ot):(this._minx=Ot,this._maxx=At),Dt<Ft?(this._miny=Dt,this._maxy=Ft):(this._miny=Ft,this._maxy=Dt)}},to.prototype.getMaxY=function(){return this._maxy},to.prototype.distance=function(st){if(this.intersects(st))return 0;var _t=0;this._maxx<st._minx?_t=st._minx-this._maxx:this._minx>st._maxx&&(_t=this._minx-st._maxx);var xt=0;return this._maxy<st._miny?xt=st._miny-this._maxy:this._miny>st._maxy&&(xt=this._miny-st._maxy),_t===0?xt:xt===0?_t:Math.sqrt(_t*_t+xt*xt)},to.prototype.hashCode=function(){var st=17;return st=37*(st=37*(st=37*(st=37*st+Ur.hashCode(this._minx))+Ur.hashCode(this._maxx))+Ur.hashCode(this._miny))+Ur.hashCode(this._maxy)},to.prototype.interfaces_=function(){return[Su,Cu]},to.prototype.getClass=function(){return to},to.intersects=function(){if(arguments.length===3){var st=arguments[0],_t=arguments[1],xt=arguments[2];return xt.x>=(st.x<_t.x?st.x:_t.x)&&xt.x<=(st.x>_t.x?st.x:_t.x)&&xt.y>=(st.y<_t.y?st.y:_t.y)&&xt.y<=(st.y>_t.y?st.y:_t.y)}if(arguments.length===4){var Et=arguments[0],At=arguments[1],Ot=arguments[2],Dt=arguments[3],Ft=Math.min(Ot.x,Dt.x),jt=Math.max(Ot.x,Dt.x),Gt=Math.min(Et.x,At.x),Jt=Math.max(Et.x,At.x);return!(Gt>jt)&&!(Jt<Ft)&&(Ft=Math.min(Ot.y,Dt.y),jt=Math.max(Ot.y,Dt.y),Gt=Math.min(Et.y,At.y),Jt=Math.max(Et.y,At.y),!(Gt>jt)&&!(Jt<Ft))}},_y.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(to,_y);var hc={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Jp=function(st){this.geometryFactory=st||new Zo};Jp.prototype.read=function(st){var _t,xt,Et;st=st.replace(/[\n\r]/g," ");var At=hc.typeStr.exec(st);if(st.search("EMPTY")!==-1&&((At=hc.emptyTypeStr.exec(st))[2]=void 0),At&&(xt=At[1].toLowerCase(),Et=At[2],Wf[xt]&&(_t=Wf[xt].apply(this,[Et]))),_t===void 0)throw new Error("Could not parse WKT "+st);return _t},Jp.prototype.write=function(st){return this.extractGeometry(st)},Jp.prototype.extractGeometry=function(st){var _t=st.getGeometryType().toLowerCase();if(!ch[_t])return null;var xt=_t.toUpperCase();return st.isEmpty()?xt+" EMPTY":xt+"("+ch[_t].apply(this,[st])+")"};var ch={coordinate:function(st){return st.x+" "+st.y},point:function(st){return ch.coordinate.call(this,st._coordinates._coordinates[0])},multipoint:function(st){for(var _t=[],xt=0,Et=st._geometries.length;xt<Et;++xt)_t.push("("+ch.point.apply(this,[st._geometries[xt]])+")");return _t.join(",")},linestring:function(st){for(var _t=[],xt=0,Et=st._points._coordinates.length;xt<Et;++xt)_t.push(ch.coordinate.apply(this,[st._points._coordinates[xt]]));return _t.join(",")},linearring:function(st){for(var _t=[],xt=0,Et=st._points._coordinates.length;xt<Et;++xt)_t.push(ch.coordinate.apply(this,[st._points._coordinates[xt]]));return _t.join(",")},multilinestring:function(st){for(var _t=[],xt=0,Et=st._geometries.length;xt<Et;++xt)_t.push("("+ch.linestring.apply(this,[st._geometries[xt]])+")");return _t.join(",")},polygon:function(st){var _t=[];_t.push("("+ch.linestring.apply(this,[st._shell])+")");for(var xt=0,Et=st._holes.length;xt<Et;++xt)_t.push("("+ch.linestring.apply(this,[st._holes[xt]])+")");return _t.join(",")},multipolygon:function(st){for(var _t=[],xt=0,Et=st._geometries.length;xt<Et;++xt)_t.push("("+ch.polygon.apply(this,[st._geometries[xt]])+")");return _t.join(",")},geometrycollection:function(st){for(var _t=[],xt=0,Et=st._geometries.length;xt<Et;++xt)_t.push(this.extractGeometry(st._geometries[xt]));return _t.join(",")}},Wf={point:function(st){if(st===void 0)return this.geometryFactory.createPoint();var _t=st.trim().split(hc.spaces);return this.geometryFactory.createPoint(new Ur(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])))},multipoint:function(st){var _t;if(st===void 0)return this.geometryFactory.createMultiPoint();for(var xt=st.trim().split(","),Et=[],At=0,Ot=xt.length;At<Ot;++At)_t=xt[At].replace(hc.trimParens,"$1"),Et.push(Wf.point.apply(this,[_t]));return this.geometryFactory.createMultiPoint(Et)},linestring:function(st){if(st===void 0)return this.geometryFactory.createLineString();for(var _t,xt=st.trim().split(","),Et=[],At=0,Ot=xt.length;At<Ot;++At)_t=xt[At].trim().split(hc.spaces),Et.push(new Ur(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])));return this.geometryFactory.createLineString(Et)},linearring:function(st){if(st===void 0)return this.geometryFactory.createLinearRing();for(var _t,xt=st.trim().split(","),Et=[],At=0,Ot=xt.length;At<Ot;++At)_t=xt[At].trim().split(hc.spaces),Et.push(new Ur(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])));return this.geometryFactory.createLinearRing(Et)},multilinestring:function(st){var _t;if(st===void 0)return this.geometryFactory.createMultiLineString();for(var xt=st.trim().split(hc.parenComma),Et=[],At=0,Ot=xt.length;At<Ot;++At)_t=xt[At].replace(hc.trimParens,"$1"),Et.push(Wf.linestring.apply(this,[_t]));return this.geometryFactory.createMultiLineString(Et)},polygon:function(st){var _t,xt,Et;if(st===void 0)return this.geometryFactory.createPolygon();for(var At,Ot=st.trim().split(hc.parenComma),Dt=[],Ft=0,jt=Ot.length;Ft<jt;++Ft)_t=Ot[Ft].replace(hc.trimParens,"$1"),xt=Wf.linestring.apply(this,[_t]),Et=this.geometryFactory.createLinearRing(xt._points),Ft===0?At=Et:Dt.push(Et);return this.geometryFactory.createPolygon(At,Dt)},multipolygon:function(st){var _t;if(st===void 0)return this.geometryFactory.createMultiPolygon();for(var xt=st.trim().split(hc.doubleParenComma),Et=[],At=0,Ot=xt.length;At<Ot;++At)_t=xt[At].replace(hc.trimParens,"$1"),Et.push(Wf.polygon.apply(this,[_t]));return this.geometryFactory.createMultiPolygon(Et)},geometrycollection:function(st){if(st===void 0)return this.geometryFactory.createGeometryCollection();for(var _t=(st=st.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),xt=[],Et=0,At=_t.length;Et<At;++Et)xt.push(this.read(_t[Et]));return this.geometryFactory.createGeometryCollection(xt)}},Uu=function(st){this.parser=new Jp(st)};Uu.prototype.write=function(st){return this.parser.write(st)},Uu.toLineString=function(st,_t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+st.x+" "+st.y+", "+_t.x+" "+_t.y+" )"};var hh=function(st){function _t(xt){st.call(this,xt),this.name="RuntimeException",this.message=xt,this.stack=new st().stack}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t}(Error),tm=function(st){function _t(){if(st.call(this),arguments.length===0)st.call(this);else if(arguments.length===1){var xt=arguments[0];st.call(this,xt)}}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(hh),No=function(){};No.prototype.interfaces_=function(){return[]},No.prototype.getClass=function(){return No},No.shouldNeverReachHere=function(){if(arguments.length===0)No.shouldNeverReachHere(null);else if(arguments.length===1){var st=arguments[0];throw new tm("Should never reach here"+(st!==null?": "+st:""))}},No.isTrue=function(){var st;if(arguments.length===1)No.isTrue(arguments[0],null);else if(arguments.length===2&&(st=arguments[1],!arguments[0]))throw st===null?new tm:new tm(st)},No.equals=function(){var st,_t,xt;if(arguments.length===2)No.equals(st=arguments[0],_t=arguments[1],null);else if(arguments.length===3&&(st=arguments[0],xt=arguments[2],!(_t=arguments[1]).equals(st)))throw new tm("Expected "+st+" but encountered "+_t+(xt!==null?": "+xt:""))};var aa=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Ur,this._intPt[1]=new Ur,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Kd={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};aa.prototype.getIndexAlongSegment=function(st,_t){return this.computeIntLineIndex(),this._intLineIndex[st][_t]},aa.prototype.getTopologySummary=function(){var st=new uc;return this.isEndPoint()&&st.append(" endpoint"),this._isProper&&st.append(" proper"),this.isCollinear()&&st.append(" collinear"),st.toString()},aa.prototype.computeIntersection=function(st,_t,xt,Et){this._inputLines[0][0]=st,this._inputLines[0][1]=_t,this._inputLines[1][0]=xt,this._inputLines[1][1]=Et,this._result=this.computeIntersect(st,_t,xt,Et)},aa.prototype.getIntersectionNum=function(){return this._result},aa.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var st=arguments[0],_t=this.getEdgeDistance(st,0),xt=this.getEdgeDistance(st,1);_t>xt?(this._intLineIndex[st][0]=0,this._intLineIndex[st][1]=1):(this._intLineIndex[st][0]=1,this._intLineIndex[st][1]=0)}},aa.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},aa.prototype.setPrecisionModel=function(st){this._precisionModel=st},aa.prototype.isInteriorIntersection=function(){var st=this;if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var _t=arguments[0],xt=0;xt<this._result;xt++)if(!st._intPt[xt].equals2D(st._inputLines[_t][0])&&!st._intPt[xt].equals2D(st._inputLines[_t][1]))return!0;return!1}},aa.prototype.getIntersection=function(st){return this._intPt[st]},aa.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},aa.prototype.hasIntersection=function(){return this._result!==aa.NO_INTERSECTION},aa.prototype.getEdgeDistance=function(st,_t){return aa.computeEdgeDistance(this._intPt[_t],this._inputLines[st][0],this._inputLines[st][1])},aa.prototype.isCollinear=function(){return this._result===aa.COLLINEAR_INTERSECTION},aa.prototype.toString=function(){return Uu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Uu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},aa.prototype.getEndpoint=function(st,_t){return this._inputLines[st][_t]},aa.prototype.isIntersection=function(st){for(var _t=0;_t<this._result;_t++)if(this._intPt[_t].equals2D(st))return!0;return!1},aa.prototype.getIntersectionAlongSegment=function(st,_t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[st][_t]]},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa},aa.computeEdgeDistance=function(st,_t,xt){var Et=Math.abs(xt.x-_t.x),At=Math.abs(xt.y-_t.y),Ot=-1;if(st.equals(_t))Ot=0;else if(st.equals(xt))Ot=Et>At?Et:At;else{var Dt=Math.abs(st.x-_t.x),Ft=Math.abs(st.y-_t.y);(Ot=Et>At?Dt:Ft)!==0||st.equals(_t)||(Ot=Math.max(Dt,Ft))}return No.isTrue(!(Ot===0&&!st.equals(_t)),"Bad distance calculation"),Ot},aa.nonRobustComputeEdgeDistance=function(st,_t,xt){var Et=st.x-_t.x,At=st.y-_t.y,Ot=Math.sqrt(Et*Et+At*At);return No.isTrue(!(Ot===0&&!st.equals(_t)),"Invalid distance calculation"),Ot},Kd.DONT_INTERSECT.get=function(){return 0},Kd.DO_INTERSECT.get=function(){return 1},Kd.COLLINEAR.get=function(){return 2},Kd.NO_INTERSECTION.get=function(){return 0},Kd.POINT_INTERSECTION.get=function(){return 1},Kd.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(aa,Kd);var $h=function(st){function _t(){st.apply(this,arguments)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.isInSegmentEnvelopes=function(xt){var Et=new to(this._inputLines[0][0],this._inputLines[0][1]),At=new to(this._inputLines[1][0],this._inputLines[1][1]);return Et.contains(xt)&&At.contains(xt)},_t.prototype.computeIntersection=function(){if(arguments.length!==3)return st.prototype.computeIntersection.apply(this,arguments);var xt=arguments[0],Et=arguments[1],At=arguments[2];if(this._isProper=!1,to.intersects(Et,At,xt)&&$i.orientationIndex(Et,At,xt)===0&&$i.orientationIndex(At,Et,xt)===0)return this._isProper=!0,(xt.equals(Et)||xt.equals(At))&&(this._isProper=!1),this._result=st.POINT_INTERSECTION,null;this._result=st.NO_INTERSECTION},_t.prototype.normalizeToMinimum=function(xt,Et,At,Ot,Dt){Dt.x=this.smallestInAbsValue(xt.x,Et.x,At.x,Ot.x),Dt.y=this.smallestInAbsValue(xt.y,Et.y,At.y,Ot.y),xt.x-=Dt.x,xt.y-=Dt.y,Et.x-=Dt.x,Et.y-=Dt.y,At.x-=Dt.x,At.y-=Dt.y,Ot.x-=Dt.x,Ot.y-=Dt.y},_t.prototype.safeHCoordinateIntersection=function(xt,Et,At,Ot){var Dt=null;try{Dt=Tu.intersection(xt,Et,At,Ot)}catch(Ft){if(!(Ft instanceof Zd))throw Ft;Dt=_t.nearestEndpoint(xt,Et,At,Ot)}return Dt},_t.prototype.intersection=function(xt,Et,At,Ot){var Dt=this.intersectionWithNormalization(xt,Et,At,Ot);return this.isInSegmentEnvelopes(Dt)||(Dt=new Ur(_t.nearestEndpoint(xt,Et,At,Ot))),this._precisionModel!==null&&this._precisionModel.makePrecise(Dt),Dt},_t.prototype.smallestInAbsValue=function(xt,Et,At,Ot){var Dt=xt,Ft=Math.abs(Dt);return Math.abs(Et)<Ft&&(Dt=Et,Ft=Math.abs(Et)),Math.abs(At)<Ft&&(Dt=At,Ft=Math.abs(At)),Math.abs(Ot)<Ft&&(Dt=Ot),Dt},_t.prototype.checkDD=function(xt,Et,At,Ot,Dt){var Ft=Bl.intersection(xt,Et,At,Ot),jt=this.isInSegmentEnvelopes(Ft);ul.out.println("DD in env = "+jt+"  --------------------- "+Ft),Dt.distance(Ft)>1e-4&&ul.out.println("Distance = "+Dt.distance(Ft))},_t.prototype.intersectionWithNormalization=function(xt,Et,At,Ot){var Dt=new Ur(xt),Ft=new Ur(Et),jt=new Ur(At),Gt=new Ur(Ot),Jt=new Ur;this.normalizeToEnvCentre(Dt,Ft,jt,Gt,Jt);var qt=this.safeHCoordinateIntersection(Dt,Ft,jt,Gt);return qt.x+=Jt.x,qt.y+=Jt.y,qt},_t.prototype.computeCollinearIntersection=function(xt,Et,At,Ot){var Dt=to.intersects(xt,Et,At),Ft=to.intersects(xt,Et,Ot),jt=to.intersects(At,Ot,xt),Gt=to.intersects(At,Ot,Et);return Dt&&Ft?(this._intPt[0]=At,this._intPt[1]=Ot,st.COLLINEAR_INTERSECTION):jt&&Gt?(this._intPt[0]=xt,this._intPt[1]=Et,st.COLLINEAR_INTERSECTION):Dt&&jt?(this._intPt[0]=At,this._intPt[1]=xt,!At.equals(xt)||Ft||Gt?st.COLLINEAR_INTERSECTION:st.POINT_INTERSECTION):Dt&&Gt?(this._intPt[0]=At,this._intPt[1]=Et,!At.equals(Et)||Ft||jt?st.COLLINEAR_INTERSECTION:st.POINT_INTERSECTION):Ft&&jt?(this._intPt[0]=Ot,this._intPt[1]=xt,!Ot.equals(xt)||Dt||Gt?st.COLLINEAR_INTERSECTION:st.POINT_INTERSECTION):Ft&&Gt?(this._intPt[0]=Ot,this._intPt[1]=Et,!Ot.equals(Et)||Dt||jt?st.COLLINEAR_INTERSECTION:st.POINT_INTERSECTION):st.NO_INTERSECTION},_t.prototype.normalizeToEnvCentre=function(xt,Et,At,Ot,Dt){var Ft=xt.x<Et.x?xt.x:Et.x,jt=xt.y<Et.y?xt.y:Et.y,Gt=xt.x>Et.x?xt.x:Et.x,Jt=xt.y>Et.y?xt.y:Et.y,qt=At.x<Ot.x?At.x:Ot.x,on=At.y<Ot.y?At.y:Ot.y,vn=At.x>Ot.x?At.x:Ot.x,_n=At.y>Ot.y?At.y:Ot.y,En=((Ft>qt?Ft:qt)+(Gt<vn?Gt:vn))/2,cn=((jt>on?jt:on)+(Jt<_n?Jt:_n))/2;Dt.x=En,Dt.y=cn,xt.x-=Dt.x,xt.y-=Dt.y,Et.x-=Dt.x,Et.y-=Dt.y,At.x-=Dt.x,At.y-=Dt.y,Ot.x-=Dt.x,Ot.y-=Dt.y},_t.prototype.computeIntersect=function(xt,Et,At,Ot){if(this._isProper=!1,!to.intersects(xt,Et,At,Ot))return st.NO_INTERSECTION;var Dt=$i.orientationIndex(xt,Et,At),Ft=$i.orientationIndex(xt,Et,Ot);if(Dt>0&&Ft>0||Dt<0&&Ft<0)return st.NO_INTERSECTION;var jt=$i.orientationIndex(At,Ot,xt),Gt=$i.orientationIndex(At,Ot,Et);return jt>0&&Gt>0||jt<0&&Gt<0?st.NO_INTERSECTION:Dt===0&&Ft===0&&jt===0&&Gt===0?this.computeCollinearIntersection(xt,Et,At,Ot):(Dt===0||Ft===0||jt===0||Gt===0?(this._isProper=!1,xt.equals2D(At)||xt.equals2D(Ot)?this._intPt[0]=xt:Et.equals2D(At)||Et.equals2D(Ot)?this._intPt[0]=Et:Dt===0?this._intPt[0]=new Ur(At):Ft===0?this._intPt[0]=new Ur(Ot):jt===0?this._intPt[0]=new Ur(xt):Gt===0&&(this._intPt[0]=new Ur(Et))):(this._isProper=!0,this._intPt[0]=this.intersection(xt,Et,At,Ot)),st.POINT_INTERSECTION)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.nearestEndpoint=function(xt,Et,At,Ot){var Dt=xt,Ft=$i.distancePointLine(xt,At,Ot),jt=$i.distancePointLine(Et,At,Ot);return jt<Ft&&(Ft=jt,Dt=Et),(jt=$i.distancePointLine(At,xt,Et))<Ft&&(Ft=jt,Dt=At),(jt=$i.distancePointLine(Ot,xt,Et))<Ft&&(Ft=jt,Dt=Ot),Dt},_t}(aa),Jd=function(){};Jd.prototype.interfaces_=function(){return[]},Jd.prototype.getClass=function(){return Jd},Jd.orientationIndex=function(st,_t,xt){var Et=_t.x-st.x,At=_t.y-st.y,Ot=xt.x-_t.x,Dt=xt.y-_t.y;return Jd.signOfDet2x2(Et,At,Ot,Dt)},Jd.signOfDet2x2=function(st,_t,xt,Et){var At=null,Ot=null,Dt=null;if(At=1,st===0||Et===0)return _t===0||xt===0?0:_t>0?xt>0?-At:At:xt>0?At:-At;if(_t===0||xt===0)return Et>0?st>0?At:-At:st>0?-At:At;if(_t>0?Et>0?_t<=Et||(At=-At,Ot=st,st=xt,xt=Ot,Ot=_t,_t=Et,Et=Ot):_t<=-Et?(At=-At,xt=-xt,Et=-Et):(Ot=st,st=-xt,xt=Ot,Ot=_t,_t=-Et,Et=Ot):Et>0?-_t<=Et?(At=-At,st=-st,_t=-_t):(Ot=-st,st=xt,xt=Ot,Ot=-_t,_t=Et,Et=Ot):_t>=Et?(st=-st,_t=-_t,xt=-xt,Et=-Et):(At=-At,Ot=-st,st=-xt,xt=Ot,Ot=-_t,_t=-Et,Et=Ot),st>0){if(!(xt>0)||!(st<=xt))return At}else{if(xt>0||!(st>=xt))return-At;At=-At,st=-st,xt=-xt}for(;;){if((Et-=(Dt=Math.floor(xt/st))*_t)<0)return-At;if(Et>_t)return At;if(st>(xt-=Dt*st)+xt){if(_t<Et+Et)return At}else{if(_t>Et+Et)return-At;xt=st-xt,Et=_t-Et,At=-At}if(Et===0)return xt===0?0:-At;if(xt===0||(_t-=(Dt=Math.floor(st/xt))*Et)<0)return At;if(_t>Et)return-At;if(xt>(st-=Dt*xt)+st){if(Et<_t+_t)return-At}else{if(Et>_t+_t)return At;st=xt-st,_t=Et-_t,At=-At}if(_t===0)return st===0?0:At;if(st===0)return-At}};var dc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var st=arguments[0];this._p=st};dc.prototype.countSegment=function(st,_t){if(st.x<this._p.x&&_t.x<this._p.x)return null;if(this._p.x===_t.x&&this._p.y===_t.y)return this._isPointOnSegment=!0,null;if(st.y===this._p.y&&_t.y===this._p.y){var xt=st.x,Et=_t.x;return xt>Et&&(xt=_t.x,Et=st.x),this._p.x>=xt&&this._p.x<=Et&&(this._isPointOnSegment=!0),null}if(st.y>this._p.y&&_t.y<=this._p.y||_t.y>this._p.y&&st.y<=this._p.y){var At=st.x-this._p.x,Ot=st.y-this._p.y,Dt=_t.x-this._p.x,Ft=_t.y-this._p.y,jt=Jd.signOfDet2x2(At,Ot,Dt,Ft);if(jt===0)return this._isPointOnSegment=!0,null;Ft<Ot&&(jt=-jt),jt>0&&this._crossingCount++}},dc.prototype.isPointInPolygon=function(){return this.getLocation()!==Zr.EXTERIOR},dc.prototype.getLocation=function(){return this._isPointOnSegment?Zr.BOUNDARY:this._crossingCount%2==1?Zr.INTERIOR:Zr.EXTERIOR},dc.prototype.isOnSegment=function(){return this._isPointOnSegment},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc},dc.locatePointInRing=function(){if(arguments[0]instanceof Ur&&xo(arguments[1],gs)){for(var st=arguments[0],_t=arguments[1],xt=new dc(st),Et=new Ur,At=new Ur,Ot=1;Ot<_t.size();Ot++)if(_t.getCoordinate(Ot,Et),_t.getCoordinate(Ot-1,At),xt.countSegment(Et,At),xt.isOnSegment())return xt.getLocation();return xt.getLocation()}if(arguments[0]instanceof Ur&&arguments[1]instanceof Array){for(var Dt=arguments[0],Ft=arguments[1],jt=new dc(Dt),Gt=1;Gt<Ft.length;Gt++){var Jt=Ft[Gt],qt=Ft[Gt-1];if(jt.countSegment(Jt,qt),jt.isOnSegment())return jt.getLocation()}return jt.getLocation()}};var $i=function(){},Qd={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.orientationIndex=function(st,_t,xt){return Bl.orientationIndex(st,_t,xt)},$i.signedArea=function(){if(arguments[0]instanceof Array){var st=arguments[0];if(st.length<3)return 0;for(var _t=0,xt=st[0].x,Et=1;Et<st.length-1;Et++){var At=st[Et].x-xt,Ot=st[Et+1].y,Dt=st[Et-1].y;_t+=At*(Dt-Ot)}return _t/2}if(xo(arguments[0],gs)){var Ft=arguments[0],jt=Ft.size();if(jt<3)return 0;var Gt=new Ur,Jt=new Ur,qt=new Ur;Ft.getCoordinate(0,Jt),Ft.getCoordinate(1,qt);var on=Jt.x;qt.x-=on;for(var vn=0,_n=1;_n<jt-1;_n++)Gt.y=Jt.y,Jt.x=qt.x,Jt.y=qt.y,Ft.getCoordinate(_n+1,qt),qt.x-=on,vn+=Jt.x*(Gt.y-qt.y);return vn/2}},$i.distanceLineLine=function(st,_t,xt,Et){if(st.equals(_t))return $i.distancePointLine(st,xt,Et);if(xt.equals(Et))return $i.distancePointLine(Et,st,_t);var At=!1;if(to.intersects(st,_t,xt,Et)){var Ot=(_t.x-st.x)*(Et.y-xt.y)-(_t.y-st.y)*(Et.x-xt.x);if(Ot===0)At=!0;else{var Dt=(st.y-xt.y)*(Et.x-xt.x)-(st.x-xt.x)*(Et.y-xt.y),Ft=((st.y-xt.y)*(_t.x-st.x)-(st.x-xt.x)*(_t.y-st.y))/Ot,jt=Dt/Ot;(jt<0||jt>1||Ft<0||Ft>1)&&(At=!0)}}else At=!0;return At?lu.min($i.distancePointLine(st,xt,Et),$i.distancePointLine(_t,xt,Et),$i.distancePointLine(xt,st,_t),$i.distancePointLine(Et,st,_t)):0},$i.isPointInRing=function(st,_t){return $i.locatePointInRing(st,_t)!==Zr.EXTERIOR},$i.computeLength=function(st){var _t=st.size();if(_t<=1)return 0;var xt=0,Et=new Ur;st.getCoordinate(0,Et);for(var At=Et.x,Ot=Et.y,Dt=1;Dt<_t;Dt++){st.getCoordinate(Dt,Et);var Ft=Et.x,jt=Et.y,Gt=Ft-At,Jt=jt-Ot;xt+=Math.sqrt(Gt*Gt+Jt*Jt),At=Ft,Ot=jt}return xt},$i.isCCW=function(st){var _t=st.length-1;if(_t<3)throw new ra("Ring has fewer than 4 points, so orientation cannot be determined");for(var xt=st[0],Et=0,At=1;At<=_t;At++){var Ot=st[At];Ot.y>xt.y&&(xt=Ot,Et=At)}var Dt=Et;do(Dt-=1)<0&&(Dt=_t);while(st[Dt].equals2D(xt)&&Dt!==Et);var Ft=Et;do Ft=(Ft+1)%_t;while(st[Ft].equals2D(xt)&&Ft!==Et);var jt=st[Dt],Gt=st[Ft];if(jt.equals2D(xt)||Gt.equals2D(xt)||jt.equals2D(Gt))return!1;var Jt=$i.computeOrientation(jt,xt,Gt),qt=!1;return qt=Jt===0?jt.x>Gt.x:Jt>0,qt},$i.locatePointInRing=function(st,_t){return dc.locatePointInRing(st,_t)},$i.distancePointLinePerpendicular=function(st,_t,xt){var Et=(xt.x-_t.x)*(xt.x-_t.x)+(xt.y-_t.y)*(xt.y-_t.y),At=((_t.y-st.y)*(xt.x-_t.x)-(_t.x-st.x)*(xt.y-_t.y))/Et;return Math.abs(At)*Math.sqrt(Et)},$i.computeOrientation=function(st,_t,xt){return $i.orientationIndex(st,_t,xt)},$i.distancePointLine=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1];if(_t.length===0)throw new ra("Line array must contain at least one vertex");for(var xt=st.distance(_t[0]),Et=0;Et<_t.length-1;Et++){var At=$i.distancePointLine(st,_t[Et],_t[Et+1]);At<xt&&(xt=At)}return xt}if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2];if(Dt.x===Ft.x&&Dt.y===Ft.y)return Ot.distance(Dt);var jt=(Ft.x-Dt.x)*(Ft.x-Dt.x)+(Ft.y-Dt.y)*(Ft.y-Dt.y),Gt=((Ot.x-Dt.x)*(Ft.x-Dt.x)+(Ot.y-Dt.y)*(Ft.y-Dt.y))/jt;if(Gt<=0)return Ot.distance(Dt);if(Gt>=1)return Ot.distance(Ft);var Jt=((Dt.y-Ot.y)*(Ft.x-Dt.x)-(Dt.x-Ot.x)*(Ft.y-Dt.y))/jt;return Math.abs(Jt)*Math.sqrt(jt)}},$i.isOnLine=function(st,_t){for(var xt=new $h,Et=1;Et<_t.length;Et++){var At=_t[Et-1],Ot=_t[Et];if(xt.computeIntersection(st,At,Ot),xt.hasIntersection())return!0}return!1},Qd.CLOCKWISE.get=function(){return-1},Qd.RIGHT.get=function(){return $i.CLOCKWISE},Qd.COUNTERCLOCKWISE.get=function(){return 1},Qd.LEFT.get=function(){return $i.COUNTERCLOCKWISE},Qd.COLLINEAR.get=function(){return 0},Qd.STRAIGHT.get=function(){return $i.COLLINEAR},Object.defineProperties($i,Qd);var Nc=function(){};Nc.prototype.filter=function(st){},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc};var go=function(){var st=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=st,this._SRID=st.getSRID()},$c={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};go.prototype.isGeometryCollection=function(){return this.getSortIndex()===go.SORTINDEX_GEOMETRYCOLLECTION},go.prototype.getFactory=function(){return this._factory},go.prototype.getGeometryN=function(st){return this},go.prototype.getArea=function(){return 0},go.prototype.isRectangle=function(){return!1},go.prototype.equals=function(){if(arguments[0]instanceof go){var st=arguments[0];return st!==null&&this.equalsTopo(st)}if(arguments[0]instanceof Object){var _t=arguments[0];if(!(_t instanceof go))return!1;var xt=_t;return this.equalsExact(xt)}},go.prototype.equalsExact=function(st){return this===st||this.equalsExact(st,0)},go.prototype.geometryChanged=function(){this.apply(go.geometryChangedFilter)},go.prototype.geometryChangedAction=function(){this._envelope=null},go.prototype.equalsNorm=function(st){return st!==null&&this.norm().equalsExact(st.norm())},go.prototype.getLength=function(){return 0},go.prototype.getNumGeometries=function(){return 1},go.prototype.compareTo=function(){if(arguments.length===1){var st=arguments[0],_t=st;return this.getSortIndex()!==_t.getSortIndex()?this.getSortIndex()-_t.getSortIndex():this.isEmpty()&&_t.isEmpty()?0:this.isEmpty()?-1:_t.isEmpty()?1:this.compareToSameClass(st)}if(arguments.length===2){var xt=arguments[0],Et=arguments[1];return this.getSortIndex()!==xt.getSortIndex()?this.getSortIndex()-xt.getSortIndex():this.isEmpty()&&xt.isEmpty()?0:this.isEmpty()?-1:xt.isEmpty()?1:this.compareToSameClass(xt,Et)}},go.prototype.getUserData=function(){return this._userData},go.prototype.getSRID=function(){return this._SRID},go.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},go.prototype.checkNotGeometryCollection=function(st){if(st.getSortIndex()===go.SORTINDEX_GEOMETRYCOLLECTION)throw new ra("This method does not support GeometryCollection arguments")},go.prototype.equal=function(st,_t,xt){return xt===0?st.equals(_t):st.distance(_t)<=xt},go.prototype.norm=function(){var st=this.copy();return st.normalize(),st},go.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},go.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new to(this._envelope)},go.prototype.setSRID=function(st){this._SRID=st},go.prototype.setUserData=function(st){this._userData=st},go.prototype.compare=function(st,_t){for(var xt=st.iterator(),Et=_t.iterator();xt.hasNext()&&Et.hasNext();){var At=xt.next(),Ot=Et.next(),Dt=At.compareTo(Ot);if(Dt!==0)return Dt}return xt.hasNext()?1:Et.hasNext()?-1:0},go.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},go.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===go.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===go.SORTINDEX_MULTIPOINT||this.getSortIndex()===go.SORTINDEX_MULTILINESTRING||this.getSortIndex()===go.SORTINDEX_MULTIPOLYGON},go.prototype.interfaces_=function(){return[qp,Su,Cu]},go.prototype.getClass=function(){return go},go.hasNonEmptyElements=function(st){for(var _t=0;_t<st.length;_t++)if(!st[_t].isEmpty())return!0;return!1},go.hasNullElements=function(st){for(var _t=0;_t<st.length;_t++)if(st[_t]===null)return!0;return!1},$c.serialVersionUID.get=function(){return 8763622679187377e3},$c.SORTINDEX_POINT.get=function(){return 0},$c.SORTINDEX_MULTIPOINT.get=function(){return 1},$c.SORTINDEX_LINESTRING.get=function(){return 2},$c.SORTINDEX_LINEARRING.get=function(){return 3},$c.SORTINDEX_MULTILINESTRING.get=function(){return 4},$c.SORTINDEX_POLYGON.get=function(){return 5},$c.SORTINDEX_MULTIPOLYGON.get=function(){return 6},$c.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},$c.geometryChangedFilter.get=function(){return nm},Object.defineProperties(go,$c);var nm=function(){};nm.interfaces_=function(){return[Nc]},nm.filter=function(st){st.geometryChangedAction()};var Bc=function(){};Bc.prototype.filter=function(st){},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var ku=function(){},Fc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ku.prototype.isInBoundary=function(st){},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},Fc.Mod2BoundaryNodeRule.get=function(){return Gf},Fc.EndPointBoundaryNodeRule.get=function(){return ef},Fc.MultiValentEndPointBoundaryNodeRule.get=function(){return Yf},Fc.MonoValentEndPointBoundaryNodeRule.get=function(){return qf},Fc.MOD2_BOUNDARY_RULE.get=function(){return new Gf},Fc.ENDPOINT_BOUNDARY_RULE.get=function(){return new ef},Fc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Yf},Fc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new qf},Fc.OGC_SFS_BOUNDARY_RULE.get=function(){return ku.MOD2_BOUNDARY_RULE},Object.defineProperties(ku,Fc);var Gf=function(){};Gf.prototype.isInBoundary=function(st){return st%2==1},Gf.prototype.interfaces_=function(){return[ku]},Gf.prototype.getClass=function(){return Gf};var ef=function(){};ef.prototype.isInBoundary=function(st){return st>0},ef.prototype.interfaces_=function(){return[ku]},ef.prototype.getClass=function(){return ef};var Yf=function(){};Yf.prototype.isInBoundary=function(st){return st>1},Yf.prototype.interfaces_=function(){return[ku]},Yf.prototype.getClass=function(){return Yf};var qf=function(){};qf.prototype.isInBoundary=function(st){return st===1},qf.prototype.interfaces_=function(){return[ku]},qf.prototype.getClass=function(){return qf};var Oa=function(){};function O0(st){this.message=st||""}Oa.prototype.add=function(){},Oa.prototype.addAll=function(){},Oa.prototype.isEmpty=function(){},Oa.prototype.iterator=function(){},Oa.prototype.size=function(){},Oa.prototype.toArray=function(){},Oa.prototype.remove=function(){},O0.prototype=new Error,O0.prototype.name="IndexOutOfBoundsException";var Xf=function(){};Xf.prototype.hasNext=function(){},Xf.prototype.next=function(){},Xf.prototype.remove=function(){};var ju=function(st){function _t(){st.apply(this,arguments)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.get=function(){},_t.prototype.set=function(){},_t.prototype.isEmpty=function(){},_t}(Oa);function tf(st){this.message=st||""}tf.prototype=new Error,tf.prototype.name="NoSuchElementException";var Ii=function(st){function _t(){st.call(this),this.array_=[],arguments[0]instanceof Oa&&this.addAll(arguments[0])}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.ensureCapacity=function(){},_t.prototype.interfaces_=function(){return[st,Oa]},_t.prototype.add=function(xt){return arguments.length===1?this.array_.push(xt):this.array_.splice(arguments[0],arguments[1]),!0},_t.prototype.clear=function(){this.array_=[]},_t.prototype.addAll=function(xt){for(var Et=xt.iterator();Et.hasNext();)this.add(Et.next());return!0},_t.prototype.set=function(xt,Et){var At=this.array_[xt];return this.array_[xt]=Et,At},_t.prototype.iterator=function(){return new by(this)},_t.prototype.get=function(xt){if(xt<0||xt>=this.size())throw new O0;return this.array_[xt]},_t.prototype.isEmpty=function(){return this.array_.length===0},_t.prototype.size=function(){return this.array_.length},_t.prototype.toArray=function(){for(var xt=[],Et=0,At=this.array_.length;Et<At;Et++)xt.push(this.array_[Et]);return xt},_t.prototype.remove=function(xt){for(var Et=!1,At=0,Ot=this.array_.length;At<Ot;At++)if(this.array_[At]===xt){this.array_.splice(At,1),Et=!0;break}return Et},_t}(ju),by=function(st){function _t(xt){st.call(this),this.arrayList_=xt,this.position_=0}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new tf;return this.arrayList_.get(this.position_++)},_t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},_t.prototype.set=function(xt){return this.arrayList_.set(this.position_-1,xt)},_t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},_t}(Xf),Qp=function(st){function _t(){if(st.call(this),arguments.length!==0){if(arguments.length===1){var Et=arguments[0];this.ensureCapacity(Et.length),this.add(Et,!0)}else if(arguments.length===2){var At=arguments[0],Ot=arguments[1];this.ensureCapacity(At.length),this.add(At,Ot)}}}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={coordArrayType:{configurable:!0}};return xt.coordArrayType.get=function(){return new Array(0).fill(null)},_t.prototype.getCoordinate=function(Et){return this.get(Et)},_t.prototype.addAll=function(){var Et=this;if(arguments.length===2){for(var At=arguments[0],Ot=arguments[1],Dt=!1,Ft=At.iterator();Ft.hasNext();)Et.add(Ft.next(),Ot),Dt=!0;return Dt}return st.prototype.addAll.apply(this,arguments)},_t.prototype.clone=function(){for(var Et=st.prototype.clone.call(this),At=0;At<this.size();At++)Et.add(At,this.get(At).copy());return Et},_t.prototype.toCoordinateArray=function(){return this.toArray(_t.coordArrayType)},_t.prototype.add=function(){var Et=this;if(arguments.length===1){var At=arguments[0];st.prototype.add.call(this,At)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Ot=arguments[0],Dt=arguments[1];return this.add(Ot,Dt,!0),!0}if(arguments[0]instanceof Ur&&typeof arguments[1]=="boolean"){var Ft=arguments[0],jt=arguments[1];if(!jt&&this.size()>=1){var Gt=this.get(this.size()-1);if(Gt.equals2D(Ft))return null}st.prototype.add.call(this,Ft)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var Jt=arguments[0],qt=arguments[1];return this.add(Jt,qt),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var on=arguments[0],vn=arguments[1],_n=arguments[2];if(_n)for(var En=0;En<on.length;En++)Et.add(on[En],vn);else for(var cn=on.length-1;cn>=0;cn--)Et.add(on[cn],vn);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Ur){var Hn=arguments[0],nr=arguments[1],bn=arguments[2];if(!bn){var zn=this.size();if(zn>0){if(Hn>0){var Un=this.get(Hn-1);if(Un.equals2D(nr))return null}if(Hn<zn){var qn=this.get(Hn);if(qn.equals2D(nr))return null}}}st.prototype.add.call(this,Hn,nr)}}else if(arguments.length===4){var Gn=arguments[0],Xr=arguments[1],Br=arguments[2],Jr=arguments[3],Fr=1;Br>Jr&&(Fr=-1);for(var oi=Br;oi!==Jr;oi+=Fr)Et.add(Gn[oi],Xr);return!0}},_t.prototype.closeRing=function(){this.size()>0&&this.add(new Ur(this.get(0)),!1)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},Object.defineProperties(_t,xt),_t}(Ii),Xo=function(){},rm={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};rm.ForwardComparator.get=function(){return eg},rm.BidirectionalComparator.get=function(){return nf},rm.coordArrayType.get=function(){return new Array(0).fill(null)},Xo.prototype.interfaces_=function(){return[]},Xo.prototype.getClass=function(){return Xo},Xo.isRing=function(st){return!(st.length<4)&&!!st[0].equals2D(st[st.length-1])},Xo.ptNotInList=function(st,_t){for(var xt=0;xt<st.length;xt++){var Et=st[xt];if(Xo.indexOf(Et,_t)<0)return Et}return null},Xo.scroll=function(st,_t){var xt=Xo.indexOf(_t,st);if(xt<0)return null;var Et=new Array(st.length).fill(null);ul.arraycopy(st,xt,Et,0,st.length-xt),ul.arraycopy(st,0,Et,st.length-xt,xt),ul.arraycopy(Et,0,st,0,st.length)},Xo.equals=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1];if(st===_t)return!0;if(st===null||_t===null||st.length!==_t.length)return!1;for(var xt=0;xt<st.length;xt++)if(!st[xt].equals(_t[xt]))return!1;return!0}if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2];if(Et===At)return!0;if(Et===null||At===null||Et.length!==At.length)return!1;for(var Dt=0;Dt<Et.length;Dt++)if(Ot.compare(Et[Dt],At[Dt])!==0)return!1;return!0}},Xo.intersection=function(st,_t){for(var xt=new Qp,Et=0;Et<st.length;Et++)_t.intersects(st[Et])&&xt.add(st[Et],!0);return xt.toCoordinateArray()},Xo.hasRepeatedPoints=function(st){for(var _t=1;_t<st.length;_t++)if(st[_t-1].equals(st[_t]))return!0;return!1},Xo.removeRepeatedPoints=function(st){return Xo.hasRepeatedPoints(st)?new Qp(st,!1).toCoordinateArray():st},Xo.reverse=function(st){for(var _t=st.length-1,xt=Math.trunc(_t/2),Et=0;Et<=xt;Et++){var At=st[Et];st[Et]=st[_t-Et],st[_t-Et]=At}},Xo.removeNull=function(st){for(var _t=0,xt=0;xt<st.length;xt++)st[xt]!==null&&_t++;var Et=new Array(_t).fill(null);if(_t===0)return Et;for(var At=0,Ot=0;Ot<st.length;Ot++)st[Ot]!==null&&(Et[At++]=st[Ot]);return Et},Xo.copyDeep=function(){if(arguments.length===1){for(var st=arguments[0],_t=new Array(st.length).fill(null),xt=0;xt<st.length;xt++)_t[xt]=new Ur(st[xt]);return _t}if(arguments.length===5)for(var Et=arguments[0],At=arguments[1],Ot=arguments[2],Dt=arguments[3],Ft=arguments[4],jt=0;jt<Ft;jt++)Ot[Dt+jt]=new Ur(Et[At+jt])},Xo.isEqualReversed=function(st,_t){for(var xt=0;xt<st.length;xt++){var Et=st[xt],At=_t[st.length-xt-1];if(Et.compareTo(At)!==0)return!1}return!0},Xo.envelope=function(st){for(var _t=new to,xt=0;xt<st.length;xt++)_t.expandToInclude(st[xt]);return _t},Xo.toCoordinateArray=function(st){return st.toArray(Xo.coordArrayType)},Xo.atLeastNCoordinatesOrNothing=function(st,_t){return _t.length>=st?_t:[]},Xo.indexOf=function(st,_t){for(var xt=0;xt<_t.length;xt++)if(st.equals(_t[xt]))return xt;return-1},Xo.increasingDirection=function(st){for(var _t=0;_t<Math.trunc(st.length/2);_t++){var xt=st.length-1-_t,Et=st[_t].compareTo(st[xt]);if(Et!==0)return Et}return 1},Xo.compare=function(st,_t){for(var xt=0;xt<st.length&&xt<_t.length;){var Et=st[xt].compareTo(_t[xt]);if(Et!==0)return Et;xt++}return xt<_t.length?-1:xt<st.length?1:0},Xo.minCoordinate=function(st){for(var _t=null,xt=0;xt<st.length;xt++)(_t===null||_t.compareTo(st[xt])>0)&&(_t=st[xt]);return _t},Xo.extract=function(st,_t,xt){_t=lu.clamp(_t,0,st.length);var Et=(xt=lu.clamp(xt,-1,st.length))-_t+1;xt<0&&(Et=0),_t>=st.length&&(Et=0),xt<_t&&(Et=0);var At=new Array(Et).fill(null);if(Et===0)return At;for(var Ot=0,Dt=_t;Dt<=xt;Dt++)At[Ot++]=st[Dt];return At},Object.defineProperties(Xo,rm);var eg=function(){};eg.prototype.compare=function(st,_t){return Xo.compare(st,_t)},eg.prototype.interfaces_=function(){return[Uf]},eg.prototype.getClass=function(){return eg};var nf=function(){};nf.prototype.compare=function(st,_t){var xt=st,Et=_t;if(xt.length<Et.length)return-1;if(xt.length>Et.length)return 1;if(xt.length===0)return 0;var At=Xo.compare(xt,Et);return Xo.isEqualReversed(xt,Et)?0:At},nf.prototype.OLDcompare=function(st,_t){var xt=st,Et=_t;if(xt.length<Et.length)return-1;if(xt.length>Et.length)return 1;if(xt.length===0)return 0;for(var At=Xo.increasingDirection(xt),Ot=Xo.increasingDirection(Et),Dt=At>0?0:xt.length-1,Ft=Ot>0?0:xt.length-1,jt=0;jt<xt.length;jt++){var Gt=xt[Dt].compareTo(Et[Ft]);if(Gt!==0)return Gt;Dt+=At,Ft+=Ot}return 0},nf.prototype.interfaces_=function(){return[Uf]},nf.prototype.getClass=function(){return nf};var rf=function(){};rf.prototype.get=function(){},rf.prototype.put=function(){},rf.prototype.size=function(){},rf.prototype.values=function(){},rf.prototype.entrySet=function(){};var Qv=function(st){function _t(){st.apply(this,arguments)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t}(rf);function Zf(st){this.message=st||""}function im(){}Zf.prototype=new Error,Zf.prototype.name="OperationNotSupported",im.prototype=new Oa,im.prototype.contains=function(){};var om=function(st){function _t(){st.call(this),this.array_=[],arguments[0]instanceof Oa&&this.addAll(arguments[0])}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.contains=function(xt){for(var Et=0,At=this.array_.length;Et<At;Et++)if(this.array_[Et]===xt)return!0;return!1},_t.prototype.add=function(xt){return!this.contains(xt)&&(this.array_.push(xt),!0)},_t.prototype.addAll=function(xt){for(var Et=xt.iterator();Et.hasNext();)this.add(Et.next());return!0},_t.prototype.remove=function(xt){throw new Error},_t.prototype.size=function(){return this.array_.length},_t.prototype.isEmpty=function(){return this.array_.length===0},_t.prototype.toArray=function(){for(var xt=[],Et=0,At=this.array_.length;Et<At;Et++)xt.push(this.array_[Et]);return xt},_t.prototype.iterator=function(){return new xy(this)},_t}(im),xy=function(st){function _t(xt){st.call(this),this.hashSet_=xt,this.position_=0}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new tf;return this.hashSet_.array_[this.position_++]},_t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},_t.prototype.remove=function(){throw new Zf},_t}(Xf);function wy(st){return st===null?0:st.color}function qs(st){return st===null?null:st.parent}function dh(st,_t){st!==null&&(st.color=_t)}function I0(st){return st===null?null:st.left}function Ey(st){return st===null?null:st.right}function vl(){this.root_=null,this.size_=0}vl.prototype=new Qv,vl.prototype.get=function(st){for(var _t=this.root_;_t!==null;){var xt=st.compareTo(_t.key);if(xt<0)_t=_t.left;else{if(!(xt>0))return _t.value;_t=_t.right}}return null},vl.prototype.put=function(st,_t){if(this.root_===null)return this.root_={key:st,value:_t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var xt,Et,At=this.root_;do if(xt=At,(Et=st.compareTo(At.key))<0)At=At.left;else{if(!(Et>0)){var Ot=At.value;return At.value=_t,Ot}At=At.right}while(At!==null);var Dt={key:st,left:null,right:null,value:_t,parent:xt,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return Et<0?xt.left=Dt:xt.right=Dt,this.fixAfterInsertion(Dt),this.size_++,null},vl.prototype.fixAfterInsertion=function(st){var _t=this;for(st.color=1;st!=null&&st!==this.root_&&st.parent.color===1;)if(qs(st)===I0(qs(qs(st)))){var xt=Ey(qs(qs(st)));wy(xt)===1?(dh(qs(st),0),dh(xt,0),dh(qs(qs(st)),1),st=qs(qs(st))):(st===Ey(qs(st))&&(st=qs(st),_t.rotateLeft(st)),dh(qs(st),0),dh(qs(qs(st)),1),_t.rotateRight(qs(qs(st))))}else{var Et=I0(qs(qs(st)));wy(Et)===1?(dh(qs(st),0),dh(Et,0),dh(qs(qs(st)),1),st=qs(qs(st))):(st===I0(qs(st))&&(st=qs(st),_t.rotateRight(st)),dh(qs(st),0),dh(qs(qs(st)),1),_t.rotateLeft(qs(qs(st))))}this.root_.color=0},vl.prototype.values=function(){var st=new Ii,_t=this.getFirstEntry();if(_t!==null)for(st.add(_t.value);(_t=vl.successor(_t))!==null;)st.add(_t.value);return st},vl.prototype.entrySet=function(){var st=new om,_t=this.getFirstEntry();if(_t!==null)for(st.add(_t);(_t=vl.successor(_t))!==null;)st.add(_t);return st},vl.prototype.rotateLeft=function(st){if(st!=null){var _t=st.right;st.right=_t.left,_t.left!=null&&(_t.left.parent=st),_t.parent=st.parent,st.parent===null?this.root_=_t:st.parent.left===st?st.parent.left=_t:st.parent.right=_t,_t.left=st,st.parent=_t}},vl.prototype.rotateRight=function(st){if(st!=null){var _t=st.left;st.left=_t.right,_t.right!=null&&(_t.right.parent=st),_t.parent=st.parent,st.parent===null?this.root_=_t:st.parent.right===st?st.parent.right=_t:st.parent.left=_t,_t.right=st,st.parent=_t}},vl.prototype.getFirstEntry=function(){var st=this.root_;if(st!=null)for(;st.left!=null;)st=st.left;return st},vl.successor=function(st){if(st===null)return null;if(st.right!==null){for(var _t=st.right;_t.left!==null;)_t=_t.left;return _t}for(var xt=st.parent,Et=st;xt!==null&&Et===xt.right;)Et=xt,xt=xt.parent;return xt},vl.prototype.size=function(){return this.size_};var Kf=function(){};function Sy(){}function Wu(){this.array_=[],arguments[0]instanceof Oa&&this.addAll(arguments[0])}Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Sy.prototype=new im,Wu.prototype=new Sy,Wu.prototype.contains=function(st){for(var _t=0,xt=this.array_.length;_t<xt;_t++)if(this.array_[_t].compareTo(st)===0)return!0;return!1},Wu.prototype.add=function(st){if(this.contains(st))return!1;for(var _t=0,xt=this.array_.length;_t<xt;_t++)if(this.array_[_t].compareTo(st)===1)return this.array_.splice(_t,0,st),!0;return this.array_.push(st),!0},Wu.prototype.addAll=function(st){for(var _t=st.iterator();_t.hasNext();)this.add(_t.next());return!0},Wu.prototype.remove=function(st){throw new Zf},Wu.prototype.size=function(){return this.array_.length},Wu.prototype.isEmpty=function(){return this.array_.length===0},Wu.prototype.toArray=function(){for(var st=[],_t=0,xt=this.array_.length;_t<xt;_t++)st.push(this.array_[_t]);return st},Wu.prototype.iterator=function(){return new sm(this)};var sm=function(st){this.treeSet_=st,this.position_=0};sm.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new tf;return this.treeSet_.array_[this.position_++]},sm.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},sm.prototype.remove=function(){throw new Zf};var zc=function(){};zc.sort=function(){var st,_t,xt,Et,At=arguments[0];if(arguments.length===1)Et=function(Dt,Ft){return Dt.compareTo(Ft)},At.sort(Et);else if(arguments.length===2)xt=arguments[1],Et=function(Dt,Ft){return xt.compare(Dt,Ft)},At.sort(Et);else if(arguments.length===3){(_t=At.slice(arguments[1],arguments[2])).sort();var Ot=At.slice(0,arguments[1]).concat(_t,At.slice(arguments[2],At.length));for(At.splice(0,At.length),st=0;st<Ot.length;st++)At.push(Ot[st])}else if(arguments.length===4)for(_t=At.slice(arguments[1],arguments[2]),xt=arguments[3],Et=function(Dt,Ft){return xt.compare(Dt,Ft)},_t.sort(Et),Ot=At.slice(0,arguments[1]).concat(_t,At.slice(arguments[2],At.length)),At.splice(0,At.length),st=0;st<Ot.length;st++)At.push(Ot[st])},zc.asList=function(st){for(var _t=new Ii,xt=0,Et=st.length;xt<Et;xt++)_t.add(st[xt]);return _t};var Os=function(){},Au={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Au.P.get=function(){return 0},Au.L.get=function(){return 1},Au.A.get=function(){return 2},Au.FALSE.get=function(){return-1},Au.TRUE.get=function(){return-2},Au.DONTCARE.get=function(){return-3},Au.SYM_FALSE.get=function(){return"F"},Au.SYM_TRUE.get=function(){return"T"},Au.SYM_DONTCARE.get=function(){return"*"},Au.SYM_P.get=function(){return"0"},Au.SYM_L.get=function(){return"1"},Au.SYM_A.get=function(){return"2"},Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os},Os.toDimensionSymbol=function(st){switch(st){case Os.FALSE:return Os.SYM_FALSE;case Os.TRUE:return Os.SYM_TRUE;case Os.DONTCARE:return Os.SYM_DONTCARE;case Os.P:return Os.SYM_P;case Os.L:return Os.SYM_L;case Os.A:return Os.SYM_A}throw new ra("Unknown dimension value: "+st)},Os.toDimensionValue=function(st){switch(Zp.toUpperCase(st)){case Os.SYM_FALSE:return Os.FALSE;case Os.SYM_TRUE:return Os.TRUE;case Os.SYM_DONTCARE:return Os.DONTCARE;case Os.SYM_P:return Os.P;case Os.SYM_L:return Os.L;case Os.SYM_A:return Os.A}throw new ra("Unknown dimension symbol: "+st)},Object.defineProperties(Os,Au);var fc=function(){};fc.prototype.filter=function(st){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var Gu=function(){};Gu.prototype.filter=function(st,_t){},Gu.prototype.isDone=function(){},Gu.prototype.isGeometryChanged=function(){},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu};var Al=function(st){function _t(Et,At){if(st.call(this,At),this._geometries=Et||[],st.hasNullElements(this._geometries))throw new ra("geometries must not contain null elements")}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){for(var Et=new to,At=0;At<this._geometries.length;At++)Et.expandToInclude(this._geometries[At].getEnvelopeInternal());return Et},_t.prototype.getGeometryN=function(Et){return this._geometries[Et]},_t.prototype.getSortIndex=function(){return st.SORTINDEX_GEOMETRYCOLLECTION},_t.prototype.getCoordinates=function(){for(var Et=new Array(this.getNumPoints()).fill(null),At=-1,Ot=0;Ot<this._geometries.length;Ot++)for(var Dt=this._geometries[Ot].getCoordinates(),Ft=0;Ft<Dt.length;Ft++)Et[++At]=Dt[Ft];return Et},_t.prototype.getArea=function(){for(var Et=0,At=0;At<this._geometries.length;At++)Et+=this._geometries[At].getArea();return Et},_t.prototype.equalsExact=function(){var Et=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Dt=At;if(this._geometries.length!==Dt._geometries.length)return!1;for(var Ft=0;Ft<this._geometries.length;Ft++)if(!Et._geometries[Ft].equalsExact(Dt._geometries[Ft],Ot))return!1;return!0}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){for(var Et=0;Et<this._geometries.length;Et++)this._geometries[Et].normalize();zc.sort(this._geometries)},_t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},_t.prototype.getBoundaryDimension=function(){for(var Et=Os.FALSE,At=0;At<this._geometries.length;At++)Et=Math.max(Et,this._geometries[At].getBoundaryDimension());return Et},_t.prototype.getDimension=function(){for(var Et=Os.FALSE,At=0;At<this._geometries.length;At++)Et=Math.max(Et,this._geometries[At].getDimension());return Et},_t.prototype.getLength=function(){for(var Et=0,At=0;At<this._geometries.length;At++)Et+=this._geometries[At].getLength();return Et},_t.prototype.getNumPoints=function(){for(var Et=0,At=0;At<this._geometries.length;At++)Et+=this._geometries[At].getNumPoints();return Et},_t.prototype.getNumGeometries=function(){return this._geometries.length},_t.prototype.reverse=function(){for(var Et=this._geometries.length,At=new Array(Et).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Ot]=this._geometries[Ot].reverse();return this.getFactory().createGeometryCollection(At)},_t.prototype.compareToSameClass=function(){var Et=this;if(arguments.length===1){var At=arguments[0],Ot=new Wu(zc.asList(this._geometries)),Dt=new Wu(zc.asList(At._geometries));return this.compare(Ot,Dt)}if(arguments.length===2){for(var Ft=arguments[0],jt=arguments[1],Gt=Ft,Jt=this.getNumGeometries(),qt=Gt.getNumGeometries(),on=0;on<Jt&&on<qt;){var vn=Et.getGeometryN(on),_n=Gt.getGeometryN(on),En=vn.compareToSameClass(_n,jt);if(En!==0)return En;on++}return on<Jt?1:on<qt?-1:0}},_t.prototype.apply=function(){var Et=this;if(xo(arguments[0],Bc))for(var At=arguments[0],Ot=0;Ot<this._geometries.length;Ot++)Et._geometries[Ot].apply(At);else if(xo(arguments[0],Gu)){var Dt=arguments[0];if(this._geometries.length===0)return null;for(var Ft=0;Ft<this._geometries.length&&(Et._geometries[Ft].apply(Dt),!Dt.isDone());Ft++);Dt.isGeometryChanged()&&this.geometryChanged()}else if(xo(arguments[0],fc)){var jt=arguments[0];jt.filter(this);for(var Gt=0;Gt<this._geometries.length;Gt++)Et._geometries[Gt].apply(jt)}else if(xo(arguments[0],Nc)){var Jt=arguments[0];Jt.filter(this);for(var qt=0;qt<this._geometries.length;qt++)Et._geometries[qt].apply(Jt)}},_t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),No.shouldNeverReachHere(),null},_t.prototype.clone=function(){var Et=st.prototype.clone.call(this);Et._geometries=new Array(this._geometries.length).fill(null);for(var At=0;At<this._geometries.length;At++)Et._geometries[At]=this._geometries[At].clone();return Et},_t.prototype.getGeometryType=function(){return"GeometryCollection"},_t.prototype.copy=function(){for(var Et=new Array(this._geometries.length).fill(null),At=0;At<Et.length;At++)Et[At]=this._geometries[At].copy();return new _t(Et,this._factory)},_t.prototype.isEmpty=function(){for(var Et=0;Et<this._geometries.length;Et++)if(!this._geometries[Et].isEmpty())return!1;return!0},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(_t,xt),_t}(go),Bh=function(st){function _t(){st.apply(this,arguments)}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return go.SORTINDEX_MULTILINESTRING},_t.prototype.equalsExact=function(){if(arguments.length===2){var Et=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Et)&&st.prototype.equalsExact.call(this,Et,At)}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return this.isClosed()?Os.FALSE:0},_t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var Et=0;Et<this._geometries.length;Et++)if(!this._geometries[Et].isClosed())return!1;return!0},_t.prototype.getDimension=function(){return 1},_t.prototype.reverse=function(){for(var Et=this._geometries.length,At=new Array(Et).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Et-1-Ot]=this._geometries[Ot].reverse();return this.getFactory().createMultiLineString(At)},_t.prototype.getBoundary=function(){return new Fl(this).getBoundary()},_t.prototype.getGeometryType=function(){return"MultiLineString"},_t.prototype.copy=function(){for(var Et=new Array(this._geometries.length).fill(null),At=0;At<Et.length;At++)Et[At]=this._geometries[At].copy();return new _t(Et,this._factory)},_t.prototype.interfaces_=function(){return[Kf]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(_t,xt),_t}(Al),Fl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var st=arguments[0],_t=ku.MOD2_BOUNDARY_RULE;this._geom=st,this._geomFact=st.getFactory(),this._bnRule=_t}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];this._geom=xt,this._geomFact=xt.getFactory(),this._bnRule=Et}};Fl.prototype.boundaryMultiLineString=function(st){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var _t=this.computeBoundaryCoordinates(st);return _t.length===1?this._geomFact.createPoint(_t[0]):this._geomFact.createMultiPointFromCoords(_t)},Fl.prototype.getBoundary=function(){return this._geom instanceof ia?this.boundaryLineString(this._geom):this._geom instanceof Bh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Fl.prototype.boundaryLineString=function(st){return this._geom.isEmpty()?this.getEmptyMultiPoint():st.isClosed()?this._bnRule.isInBoundary(2)?st.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([st.getStartPoint(),st.getEndPoint()])},Fl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Fl.prototype.computeBoundaryCoordinates=function(st){var _t=this,xt=new Ii;this._endpointMap=new vl;for(var Et=0;Et<st.getNumGeometries();Et++){var At=st.getGeometryN(Et);At.getNumPoints()!==0&&(_t.addEndpoint(At.getCoordinateN(0)),_t.addEndpoint(At.getCoordinateN(At.getNumPoints()-1)))}for(var Ot=this._endpointMap.entrySet().iterator();Ot.hasNext();){var Dt=Ot.next(),Ft=Dt.getValue().count;_t._bnRule.isInBoundary(Ft)&&xt.add(Dt.getKey())}return Xo.toCoordinateArray(xt)},Fl.prototype.addEndpoint=function(st){var _t=this._endpointMap.get(st);_t===null&&(_t=new Jf,this._endpointMap.put(st,_t)),_t.count++},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},Fl.getBoundary=function(){if(arguments.length===1){var st=arguments[0],_t=new Fl(st);return _t.getBoundary()}if(arguments.length===2){var xt=arguments[0],Et=arguments[1],At=new Fl(xt,Et);return At.getBoundary()}};var Jf=function(){this.count=null};function Cy(){}function e_(){}Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var t_=function(){};function n_(){}function r_(){}function Ty(){}var Pu=function(){},M0={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu},Pu.chars=function(st,_t){for(var xt=new Array(_t).fill(null),Et=0;Et<_t;Et++)xt[Et]=st;return String(xt)},Pu.getStackTrace=function(){if(arguments.length===1){var st=arguments[0],_t=new n_,xt=new Cy;return st.printStackTrace(xt),_t.toString()}if(arguments.length===2){for(var Et=arguments[0],At=arguments[1],Ot="",Dt=new e_(Pu.getStackTrace(Et)),Ft=new Ty,jt=0;jt<At;jt++)try{Ot+=Ft.readLine()+Pu.NEWLINE}catch(Gt){if(!(Gt instanceof r_))throw Gt;No.shouldNeverReachHere()}return Ot}},Pu.split=function(st,_t){for(var xt=_t.length,Et=new Ii,At=""+st,Ot=At.indexOf(_t);Ot>=0;){var Dt=At.substring(0,Ot);Et.add(Dt),Ot=(At=At.substring(Ot+xt)).indexOf(_t)}At.length>0&&Et.add(At);for(var Ft=new Array(Et.size()).fill(null),jt=0;jt<Ft.length;jt++)Ft[jt]=Et.get(jt);return Ft},Pu.toString=function(){if(arguments.length===1){var st=arguments[0];return Pu.SIMPLE_ORDINATE_FORMAT.format(st)}},Pu.spaces=function(st){return Pu.chars(" ",st)},M0.NEWLINE.get=function(){return ul.getProperty("line.separator")},M0.SIMPLE_ORDINATE_FORMAT.get=function(){return new t_},Object.defineProperties(Pu,M0);var ya=function(){};ya.prototype.interfaces_=function(){return[]},ya.prototype.getClass=function(){return ya},ya.copyCoord=function(st,_t,xt,Et){for(var At=Math.min(st.getDimension(),xt.getDimension()),Ot=0;Ot<At;Ot++)xt.setOrdinate(Et,Ot,st.getOrdinate(_t,Ot))},ya.isRing=function(st){var _t=st.size();return _t===0||!(_t<=3)&&st.getOrdinate(0,gs.X)===st.getOrdinate(_t-1,gs.X)&&st.getOrdinate(0,gs.Y)===st.getOrdinate(_t-1,gs.Y)},ya.isEqual=function(st,_t){var xt=st.size();if(xt!==_t.size())return!1;for(var Et=Math.min(st.getDimension(),_t.getDimension()),At=0;At<xt;At++)for(var Ot=0;Ot<Et;Ot++){var Dt=st.getOrdinate(At,Ot),Ft=_t.getOrdinate(At,Ot);if(st.getOrdinate(At,Ot)!==_t.getOrdinate(At,Ot)&&(!Po.isNaN(Dt)||!Po.isNaN(Ft)))return!1}return!0},ya.extend=function(st,_t,xt){var Et=st.create(xt,_t.getDimension()),At=_t.size();if(ya.copy(_t,0,Et,0,At),At>0)for(var Ot=At;Ot<xt;Ot++)ya.copy(_t,At-1,Et,Ot,1);return Et},ya.reverse=function(st){for(var _t=st.size()-1,xt=Math.trunc(_t/2),Et=0;Et<=xt;Et++)ya.swap(st,Et,_t-Et)},ya.swap=function(st,_t,xt){if(_t===xt)return null;for(var Et=0;Et<st.getDimension();Et++){var At=st.getOrdinate(_t,Et);st.setOrdinate(_t,Et,st.getOrdinate(xt,Et)),st.setOrdinate(xt,Et,At)}},ya.copy=function(st,_t,xt,Et,At){for(var Ot=0;Ot<At;Ot++)ya.copyCoord(st,_t+Ot,xt,Et+Ot)},ya.toString=function(){if(arguments.length===1){var st=arguments[0],_t=st.size();if(_t===0)return"()";var xt=st.getDimension(),Et=new uc;Et.append("(");for(var At=0;At<_t;At++){At>0&&Et.append(" ");for(var Ot=0;Ot<xt;Ot++)Ot>0&&Et.append(","),Et.append(Pu.toString(st.getOrdinate(At,Ot)))}return Et.append(")"),Et.toString()}},ya.ensureValidRing=function(st,_t){var xt=_t.size();return xt===0?_t:xt<=3?ya.createClosedRing(st,_t,4):_t.getOrdinate(0,gs.X)===_t.getOrdinate(xt-1,gs.X)&&_t.getOrdinate(0,gs.Y)===_t.getOrdinate(xt-1,gs.Y)?_t:ya.createClosedRing(st,_t,xt+1)},ya.createClosedRing=function(st,_t,xt){var Et=st.create(xt,_t.getDimension()),At=_t.size();ya.copy(_t,0,Et,0,At);for(var Ot=At;Ot<xt;Ot++)ya.copy(_t,0,Et,Ot,1);return Et};var ia=function(st){function _t(Et,At){st.call(this,At),this._points=null,this.init(Et)}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new to:this._points.expandEnvelope(new to)},_t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},_t.prototype.getSortIndex=function(){return st.SORTINDEX_LINESTRING},_t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},_t.prototype.equalsExact=function(){var Et=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Dt=At;if(this._points.size()!==Dt._points.size())return!1;for(var Ft=0;Ft<this._points.size();Ft++)if(!Et.equal(Et._points.getCoordinate(Ft),Dt._points.getCoordinate(Ft),Ot))return!1;return!0}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){for(var Et=this,At=0;At<Math.trunc(this._points.size()/2);At++){var Ot=Et._points.size()-1-At;if(!Et._points.getCoordinate(At).equals(Et._points.getCoordinate(Ot)))return Et._points.getCoordinate(At).compareTo(Et._points.getCoordinate(Ot))>0&&ya.reverse(Et._points),null}},_t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},_t.prototype.getBoundaryDimension=function(){return this.isClosed()?Os.FALSE:0},_t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},_t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},_t.prototype.getDimension=function(){return 1},_t.prototype.getLength=function(){return $i.computeLength(this._points)},_t.prototype.getNumPoints=function(){return this._points.size()},_t.prototype.reverse=function(){var Et=this._points.copy();return ya.reverse(Et),this.getFactory().createLineString(Et)},_t.prototype.compareToSameClass=function(){var Et=this;if(arguments.length===1){for(var At=arguments[0],Ot=At,Dt=0,Ft=0;Dt<this._points.size()&&Ft<Ot._points.size();){var jt=Et._points.getCoordinate(Dt).compareTo(Ot._points.getCoordinate(Ft));if(jt!==0)return jt;Dt++,Ft++}return Dt<this._points.size()?1:Ft<Ot._points.size()?-1:0}if(arguments.length===2){var Gt=arguments[0],Jt=arguments[1],qt=Gt;return Jt.compare(this._points,qt._points)}},_t.prototype.apply=function(){var Et=this;if(xo(arguments[0],Bc))for(var At=arguments[0],Ot=0;Ot<this._points.size();Ot++)At.filter(Et._points.getCoordinate(Ot));else if(xo(arguments[0],Gu)){var Dt=arguments[0];if(this._points.size()===0)return null;for(var Ft=0;Ft<this._points.size()&&(Dt.filter(Et._points,Ft),!Dt.isDone());Ft++);Dt.isGeometryChanged()&&this.geometryChanged()}else if(xo(arguments[0],fc)){var jt=arguments[0];jt.filter(this)}else if(xo(arguments[0],Nc)){var Gt=arguments[0];Gt.filter(this)}},_t.prototype.getBoundary=function(){return new Fl(this).getBoundary()},_t.prototype.isEquivalentClass=function(Et){return Et instanceof _t},_t.prototype.clone=function(){var Et=st.prototype.clone.call(this);return Et._points=this._points.clone(),Et},_t.prototype.getCoordinateN=function(Et){return this._points.getCoordinate(Et)},_t.prototype.getGeometryType=function(){return"LineString"},_t.prototype.copy=function(){return new _t(this._points.copy(),this._factory)},_t.prototype.getCoordinateSequence=function(){return this._points},_t.prototype.isEmpty=function(){return this._points.size()===0},_t.prototype.init=function(Et){if(Et===null&&(Et=this.getFactory().getCoordinateSequenceFactory().create([])),Et.size()===1)throw new ra("Invalid number of points in LineString (found "+Et.size()+" - must be 0 or >= 2)");this._points=Et},_t.prototype.isCoordinate=function(Et){for(var At=0;At<this._points.size();At++)if(this._points.getCoordinate(At).equals(Et))return!0;return!1},_t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},_t.prototype.getPointN=function(Et){return this.getFactory().createPoint(this._points.getCoordinate(Et))},_t.prototype.interfaces_=function(){return[Kf]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(_t,xt),_t}(go),Yu=function(){};Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var Kl=function(st){function _t(Et,At){st.call(this,At),this._coordinates=Et||null,this.init(this._coordinates)}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new to;var Et=new to;return Et.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),Et},_t.prototype.getSortIndex=function(){return st.SORTINDEX_POINT},_t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},_t.prototype.equalsExact=function(){if(arguments.length===2){var Et=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Et)&&(!(!this.isEmpty()||!Et.isEmpty())||this.isEmpty()===Et.isEmpty()&&this.equal(Et.getCoordinate(),this.getCoordinate(),At))}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){},_t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},_t.prototype.getBoundaryDimension=function(){return Os.FALSE},_t.prototype.getDimension=function(){return 0},_t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},_t.prototype.reverse=function(){return this.copy()},_t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},_t.prototype.compareToSameClass=function(){if(arguments.length===1){var Et=arguments[0],At=Et;return this.getCoordinate().compareTo(At.getCoordinate())}if(arguments.length===2){var Ot=arguments[0],Dt=arguments[1],Ft=Ot;return Dt.compare(this._coordinates,Ft._coordinates)}},_t.prototype.apply=function(){if(xo(arguments[0],Bc)){var Et=arguments[0];if(this.isEmpty())return null;Et.filter(this.getCoordinate())}else if(xo(arguments[0],Gu)){var At=arguments[0];if(this.isEmpty())return null;At.filter(this._coordinates,0),At.isGeometryChanged()&&this.geometryChanged()}else if(xo(arguments[0],fc)){var Ot=arguments[0];Ot.filter(this)}else if(xo(arguments[0],Nc)){var Dt=arguments[0];Dt.filter(this)}},_t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},_t.prototype.clone=function(){var Et=st.prototype.clone.call(this);return Et._coordinates=this._coordinates.clone(),Et},_t.prototype.getGeometryType=function(){return"Point"},_t.prototype.copy=function(){return new _t(this._coordinates.copy(),this._factory)},_t.prototype.getCoordinateSequence=function(){return this._coordinates},_t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},_t.prototype.isEmpty=function(){return this._coordinates.size()===0},_t.prototype.init=function(Et){Et===null&&(Et=this.getFactory().getCoordinateSequenceFactory().create([])),No.isTrue(Et.size()<=1),this._coordinates=Et},_t.prototype.isSimple=function(){return!0},_t.prototype.interfaces_=function(){return[Yu]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(_t,xt),_t}(go),Fh=function(){};Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var Ia=function(st){function _t(Et,At,Ot){if(st.call(this,Ot),this._shell=null,this._holes=null,Et===null&&(Et=this.getFactory().createLinearRing()),At===null&&(At=[]),st.hasNullElements(At))throw new ra("holes must not contain null elements");if(Et.isEmpty()&&st.hasNonEmptyElements(At))throw new ra("shell is empty but holes are not");this._shell=Et,this._holes=At}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},_t.prototype.getSortIndex=function(){return st.SORTINDEX_POLYGON},_t.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var Et=new Array(this.getNumPoints()).fill(null),At=-1,Ot=this._shell.getCoordinates(),Dt=0;Dt<Ot.length;Dt++)Et[++At]=Ot[Dt];for(var Ft=0;Ft<this._holes.length;Ft++)for(var jt=this._holes[Ft].getCoordinates(),Gt=0;Gt<jt.length;Gt++)Et[++At]=jt[Gt];return Et},_t.prototype.getArea=function(){var Et=0;Et+=Math.abs($i.signedArea(this._shell.getCoordinateSequence()));for(var At=0;At<this._holes.length;At++)Et-=Math.abs($i.signedArea(this._holes[At].getCoordinateSequence()));return Et},_t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var Et=this._shell.getCoordinateSequence(),At=this.getEnvelopeInternal(),Ot=0;Ot<5;Ot++){var Dt=Et.getX(Ot);if(Dt!==At.getMinX()&&Dt!==At.getMaxX())return!1;var Ft=Et.getY(Ot);if(Ft!==At.getMinY()&&Ft!==At.getMaxY())return!1}for(var jt=Et.getX(0),Gt=Et.getY(0),Jt=1;Jt<=4;Jt++){var qt=Et.getX(Jt),on=Et.getY(Jt);if(qt!==jt==(on!==Gt))return!1;jt=qt,Gt=on}return!0},_t.prototype.equalsExact=function(){var Et=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Dt=At,Ft=this._shell,jt=Dt._shell;if(!Ft.equalsExact(jt,Ot)||this._holes.length!==Dt._holes.length)return!1;for(var Gt=0;Gt<this._holes.length;Gt++)if(!Et._holes[Gt].equalsExact(Dt._holes[Gt],Ot))return!1;return!0}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){var Et=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var At=0;At<this._holes.length;At++)Et.normalize(Et._holes[At],!1);zc.sort(this._holes)}else if(arguments.length===2){var Ot=arguments[0],Dt=arguments[1];if(Ot.isEmpty())return null;var Ft=new Array(Ot.getCoordinates().length-1).fill(null);ul.arraycopy(Ot.getCoordinates(),0,Ft,0,Ft.length);var jt=Xo.minCoordinate(Ot.getCoordinates());Xo.scroll(Ft,jt),ul.arraycopy(Ft,0,Ot.getCoordinates(),0,Ft.length),Ot.getCoordinates()[Ft.length]=Ft[0],$i.isCCW(Ot.getCoordinates())===Dt&&Xo.reverse(Ot.getCoordinates())}},_t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},_t.prototype.getNumInteriorRing=function(){return this._holes.length},_t.prototype.getBoundaryDimension=function(){return 1},_t.prototype.getDimension=function(){return 2},_t.prototype.getLength=function(){var Et=0;Et+=this._shell.getLength();for(var At=0;At<this._holes.length;At++)Et+=this._holes[At].getLength();return Et},_t.prototype.getNumPoints=function(){for(var Et=this._shell.getNumPoints(),At=0;At<this._holes.length;At++)Et+=this._holes[At].getNumPoints();return Et},_t.prototype.reverse=function(){var Et=this.copy();Et._shell=this._shell.copy().reverse(),Et._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Et._holes[At]=this._holes[At].copy().reverse();return Et},_t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},_t.prototype.compareToSameClass=function(){var Et=this;if(arguments.length===1){var At=arguments[0],Ot=this._shell,Dt=At._shell;return Ot.compareToSameClass(Dt)}if(arguments.length===2){var Ft=arguments[0],jt=arguments[1],Gt=Ft,Jt=this._shell,qt=Gt._shell,on=Jt.compareToSameClass(qt,jt);if(on!==0)return on;for(var vn=this.getNumInteriorRing(),_n=Gt.getNumInteriorRing(),En=0;En<vn&&En<_n;){var cn=Et.getInteriorRingN(En),Hn=Gt.getInteriorRingN(En),nr=cn.compareToSameClass(Hn,jt);if(nr!==0)return nr;En++}return En<vn?1:En<_n?-1:0}},_t.prototype.apply=function(Et){var At=this;if(xo(Et,Bc)){this._shell.apply(Et);for(var Ot=0;Ot<this._holes.length;Ot++)At._holes[Ot].apply(Et)}else if(xo(Et,Gu)){if(this._shell.apply(Et),!Et.isDone())for(var Dt=0;Dt<this._holes.length&&(At._holes[Dt].apply(Et),!Et.isDone());Dt++);Et.isGeometryChanged()&&this.geometryChanged()}else if(xo(Et,fc))Et.filter(this);else if(xo(Et,Nc)){Et.filter(this),this._shell.apply(Et);for(var Ft=0;Ft<this._holes.length;Ft++)At._holes[Ft].apply(Et)}},_t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var Et=new Array(this._holes.length+1).fill(null);Et[0]=this._shell;for(var At=0;At<this._holes.length;At++)Et[At+1]=this._holes[At];return Et.length<=1?this.getFactory().createLinearRing(Et[0].getCoordinateSequence()):this.getFactory().createMultiLineString(Et)},_t.prototype.clone=function(){var Et=st.prototype.clone.call(this);Et._shell=this._shell.clone(),Et._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Et._holes[At]=this._holes[At].clone();return Et},_t.prototype.getGeometryType=function(){return"Polygon"},_t.prototype.copy=function(){for(var Et=this._shell.copy(),At=new Array(this._holes.length).fill(null),Ot=0;Ot<At.length;Ot++)At[Ot]=this._holes[Ot].copy();return new _t(Et,At,this._factory)},_t.prototype.getExteriorRing=function(){return this._shell},_t.prototype.isEmpty=function(){return this._shell.isEmpty()},_t.prototype.getInteriorRingN=function(Et){return this._holes[Et]},_t.prototype.interfaces_=function(){return[Fh]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(_t,xt),_t}(go),Qf=function(st){function _t(){st.apply(this,arguments)}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return go.SORTINDEX_MULTIPOINT},_t.prototype.isValid=function(){return!0},_t.prototype.equalsExact=function(){if(arguments.length===2){var Et=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Et)&&st.prototype.equalsExact.call(this,Et,At)}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.getCoordinate=function(){if(arguments.length===1){var Et=arguments[0];return this._geometries[Et].getCoordinate()}return st.prototype.getCoordinate.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return Os.FALSE},_t.prototype.getDimension=function(){return 0},_t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},_t.prototype.getGeometryType=function(){return"MultiPoint"},_t.prototype.copy=function(){for(var Et=new Array(this._geometries.length).fill(null),At=0;At<Et.length;At++)Et[At]=this._geometries[At].copy();return new _t(Et,this._factory)},_t.prototype.interfaces_=function(){return[Yu]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(_t,xt),_t}(Al),Hc=function(st){function _t(Et,At){Et instanceof Ur&&At instanceof Zo&&(Et=At.getCoordinateSequenceFactory().create(Et)),st.call(this,Et,At),this.validateConstruction()}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return go.SORTINDEX_LINEARRING},_t.prototype.getBoundaryDimension=function(){return Os.FALSE},_t.prototype.isClosed=function(){return!!this.isEmpty()||st.prototype.isClosed.call(this)},_t.prototype.reverse=function(){var Et=this._points.copy();return ya.reverse(Et),this.getFactory().createLinearRing(Et)},_t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!st.prototype.isClosed.call(this))throw new ra("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<_t.MINIMUM_VALID_SIZE)throw new ra("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},_t.prototype.getGeometryType=function(){return"LinearRing"},_t.prototype.copy=function(){return new _t(this._points.copy(),this._factory)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},xt.MINIMUM_VALID_SIZE.get=function(){return 4},xt.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(_t,xt),_t}(ia),Vc=function(st){function _t(){st.apply(this,arguments)}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return go.SORTINDEX_MULTIPOLYGON},_t.prototype.equalsExact=function(){if(arguments.length===2){var Et=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Et)&&st.prototype.equalsExact.call(this,Et,At)}return st.prototype.equalsExact.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return 1},_t.prototype.getDimension=function(){return 2},_t.prototype.reverse=function(){for(var Et=this._geometries.length,At=new Array(Et).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Ot]=this._geometries[Ot].reverse();return this.getFactory().createMultiPolygon(At)},_t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var Et=new Ii,At=0;At<this._geometries.length;At++)for(var Ot=this._geometries[At].getBoundary(),Dt=0;Dt<Ot.getNumGeometries();Dt++)Et.add(Ot.getGeometryN(Dt));var Ft=new Array(Et.size()).fill(null);return this.getFactory().createMultiLineString(Et.toArray(Ft))},_t.prototype.getGeometryType=function(){return"MultiPolygon"},_t.prototype.copy=function(){for(var Et=new Array(this._geometries.length).fill(null),At=0;At<Et.length;At++)Et[At]=this._geometries[At].copy();return new _t(Et,this._factory)},_t.prototype.interfaces_=function(){return[Fh]},_t.prototype.getClass=function(){return _t},xt.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(_t,xt),_t}(Al),Lu=function(st){this._factory=st||null,this._isUserDataCopied=!1},am={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Lu.prototype.setCopyUserData=function(st){this._isUserDataCopied=st},Lu.prototype.edit=function(st,_t){if(st===null)return null;var xt=this.editInternal(st,_t);return this._isUserDataCopied&&xt.setUserData(st.getUserData()),xt},Lu.prototype.editInternal=function(st,_t){return this._factory===null&&(this._factory=st.getFactory()),st instanceof Al?this.editGeometryCollection(st,_t):st instanceof Ia?this.editPolygon(st,_t):st instanceof Kl||st instanceof ia?_t.edit(st,this._factory):(No.shouldNeverReachHere("Unsupported Geometry class: "+st.getClass().getName()),null)},Lu.prototype.editGeometryCollection=function(st,_t){for(var xt=_t.edit(st,this._factory),Et=new Ii,At=0;At<xt.getNumGeometries();At++){var Ot=this.edit(xt.getGeometryN(At),_t);Ot===null||Ot.isEmpty()||Et.add(Ot)}return xt.getClass()===Qf?this._factory.createMultiPoint(Et.toArray([])):xt.getClass()===Bh?this._factory.createMultiLineString(Et.toArray([])):xt.getClass()===Vc?this._factory.createMultiPolygon(Et.toArray([])):this._factory.createGeometryCollection(Et.toArray([]))},Lu.prototype.editPolygon=function(st,_t){var xt=_t.edit(st,this._factory);if(xt===null&&(xt=this._factory.createPolygon(null)),xt.isEmpty())return xt;var Et=this.edit(xt.getExteriorRing(),_t);if(Et===null||Et.isEmpty())return this._factory.createPolygon();for(var At=new Ii,Ot=0;Ot<xt.getNumInteriorRing();Ot++){var Dt=this.edit(xt.getInteriorRingN(Ot),_t);Dt===null||Dt.isEmpty()||At.add(Dt)}return this._factory.createPolygon(Et,At.toArray([]))},Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu},Lu.GeometryEditorOperation=function(){},am.NoOpGeometryOperation.get=function(){return tg},am.CoordinateOperation.get=function(){return ng},am.CoordinateSequenceOperation.get=function(){return rg},Object.defineProperties(Lu,am);var tg=function(){};tg.prototype.edit=function(st,_t){return st},tg.prototype.interfaces_=function(){return[Lu.GeometryEditorOperation]},tg.prototype.getClass=function(){return tg};var ng=function(){};ng.prototype.edit=function(st,_t){var xt=this.editCoordinates(st.getCoordinates(),st);return xt===null?st:st instanceof Hc?_t.createLinearRing(xt):st instanceof ia?_t.createLineString(xt):st instanceof Kl?xt.length>0?_t.createPoint(xt[0]):_t.createPoint():st},ng.prototype.interfaces_=function(){return[Lu.GeometryEditorOperation]},ng.prototype.getClass=function(){return ng};var rg=function(){};rg.prototype.edit=function(st,_t){return st instanceof Hc?_t.createLinearRing(this.edit(st.getCoordinateSequence(),st)):st instanceof ia?_t.createLineString(this.edit(st.getCoordinateSequence(),st)):st instanceof Kl?_t.createPoint(this.edit(st.getCoordinateSequence(),st)):st},rg.prototype.interfaces_=function(){return[Lu.GeometryEditorOperation]},rg.prototype.getClass=function(){return rg};var va=function(){var st=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var _t=arguments[0];this._coordinates=new Array(_t).fill(null);for(var xt=0;xt<_t;xt++)st._coordinates[xt]=new Ur}else if(xo(arguments[0],gs)){var Et=arguments[0];if(Et===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=Et.getDimension(),this._coordinates=new Array(Et.size()).fill(null);for(var At=0;At<this._coordinates.length;At++)st._coordinates[At]=Et.getCoordinateCopy(At)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Ot=arguments[0],Dt=arguments[1];this._coordinates=Ot,this._dimension=Dt,Ot===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Ft=arguments[0],jt=arguments[1];this._coordinates=new Array(Ft).fill(null),this._dimension=jt;for(var Gt=0;Gt<Ft;Gt++)st._coordinates[Gt]=new Ur}}},ky={serialVersionUID:{configurable:!0}};va.prototype.setOrdinate=function(st,_t,xt){switch(_t){case gs.X:this._coordinates[st].x=xt;break;case gs.Y:this._coordinates[st].y=xt;break;case gs.Z:this._coordinates[st].z=xt;break;default:throw new ra("invalid ordinateIndex")}},va.prototype.size=function(){return this._coordinates.length},va.prototype.getOrdinate=function(st,_t){switch(_t){case gs.X:return this._coordinates[st].x;case gs.Y:return this._coordinates[st].y;case gs.Z:return this._coordinates[st].z}return Po.NaN},va.prototype.getCoordinate=function(){if(arguments.length===1){var st=arguments[0];return this._coordinates[st]}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];xt.x=this._coordinates[_t].x,xt.y=this._coordinates[_t].y,xt.z=this._coordinates[_t].z}},va.prototype.getCoordinateCopy=function(st){return new Ur(this._coordinates[st])},va.prototype.getDimension=function(){return this._dimension},va.prototype.getX=function(st){return this._coordinates[st].x},va.prototype.clone=function(){for(var st=new Array(this.size()).fill(null),_t=0;_t<this._coordinates.length;_t++)st[_t]=this._coordinates[_t].clone();return new va(st,this._dimension)},va.prototype.expandEnvelope=function(st){for(var _t=0;_t<this._coordinates.length;_t++)st.expandToInclude(this._coordinates[_t]);return st},va.prototype.copy=function(){for(var st=new Array(this.size()).fill(null),_t=0;_t<this._coordinates.length;_t++)st[_t]=this._coordinates[_t].copy();return new va(st,this._dimension)},va.prototype.toString=function(){if(this._coordinates.length>0){var st=new uc(17*this._coordinates.length);st.append("("),st.append(this._coordinates[0]);for(var _t=1;_t<this._coordinates.length;_t++)st.append(", "),st.append(this._coordinates[_t]);return st.append(")"),st.toString()}return"()"},va.prototype.getY=function(st){return this._coordinates[st].y},va.prototype.toCoordinateArray=function(){return this._coordinates},va.prototype.interfaces_=function(){return[gs,Cu]},va.prototype.getClass=function(){return va},ky.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(va,ky);var Uc=function(){},R0={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Uc.prototype.readResolve=function(){return Uc.instance()},Uc.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var st=arguments[0];return new va(st)}if(xo(arguments[0],gs)){var _t=arguments[0];return new va(_t)}}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];return Et>3&&(Et=3),Et<2?new va(xt):new va(xt,Et)}},Uc.prototype.interfaces_=function(){return[jf,Cu]},Uc.prototype.getClass=function(){return Uc},Uc.instance=function(){return Uc.instanceObject},R0.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},R0.instanceObject.get=function(){return new Uc},Object.defineProperties(Uc,R0);var Ay=function(st){function _t(){st.call(this),this.map_=new Map}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.get=function(xt){return this.map_.get(xt)||null},_t.prototype.put=function(xt,Et){return this.map_.set(xt,Et),Et},_t.prototype.values=function(){for(var xt=new Ii,Et=this.map_.values(),At=Et.next();!At.done;)xt.add(At.value),At=Et.next();return xt},_t.prototype.entrySet=function(){var xt=new om;return this.map_.entries().forEach(function(Et){return xt.add(Et)}),xt},_t.prototype.size=function(){return this.map_.size()},_t}(rf),Ns=function st(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=st.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof qu){var _t=arguments[0];this._modelType=_t,_t===st.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var xt=arguments[0];this._modelType=st.FIXED,this.setScale(xt)}else if(arguments[0]instanceof st){var Et=arguments[0];this._modelType=Et._modelType,this._scale=Et._scale}}},D0={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ns.prototype.equals=function(st){if(!(st instanceof Ns))return!1;var _t=st;return this._modelType===_t._modelType&&this._scale===_t._scale},Ns.prototype.compareTo=function(st){var _t=st,xt=this.getMaximumSignificantDigits(),Et=_t.getMaximumSignificantDigits();return new cc(xt).compareTo(new cc(Et))},Ns.prototype.getScale=function(){return this._scale},Ns.prototype.isFloating=function(){return this._modelType===Ns.FLOATING||this._modelType===Ns.FLOATING_SINGLE},Ns.prototype.getType=function(){return this._modelType},Ns.prototype.toString=function(){var st="UNKNOWN";return this._modelType===Ns.FLOATING?st="Floating":this._modelType===Ns.FLOATING_SINGLE?st="Floating-Single":this._modelType===Ns.FIXED&&(st="Fixed (Scale="+this.getScale()+")"),st},Ns.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var st=arguments[0];return Po.isNaN(st)||this._modelType===Ns.FLOATING_SINGLE?st:this._modelType===Ns.FIXED?Math.round(st*this._scale)/this._scale:st}if(arguments[0]instanceof Ur){var _t=arguments[0];if(this._modelType===Ns.FLOATING)return null;_t.x=this.makePrecise(_t.x),_t.y=this.makePrecise(_t.y)}},Ns.prototype.getMaximumSignificantDigits=function(){var st=16;return this._modelType===Ns.FLOATING?st=16:this._modelType===Ns.FLOATING_SINGLE?st=6:this._modelType===Ns.FIXED&&(st=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),st},Ns.prototype.setScale=function(st){this._scale=Math.abs(st)},Ns.prototype.interfaces_=function(){return[Cu,Su]},Ns.prototype.getClass=function(){return Ns},Ns.mostPrecise=function(st,_t){return st.compareTo(_t)>=0?st:_t},D0.serialVersionUID.get=function(){return 7777263578777804e3},D0.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ns,D0);var qu=function st(_t){this._name=_t||null,st.nameToTypeMap.put(_t,this)},ig={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};qu.prototype.readResolve=function(){return qu.nameToTypeMap.get(this._name)},qu.prototype.toString=function(){return this._name},qu.prototype.interfaces_=function(){return[Cu]},qu.prototype.getClass=function(){return qu},ig.serialVersionUID.get=function(){return-552860263173159e4},ig.nameToTypeMap.get=function(){return new Ay},Object.defineProperties(qu,ig),Ns.Type=qu,Ns.FIXED=new qu("FIXED"),Ns.FLOATING=new qu("FLOATING"),Ns.FLOATING_SINGLE=new qu("FLOATING SINGLE");var Zo=function st(){this._precisionModel=new Ns,this._SRID=0,this._coordinateSequenceFactory=st.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?xo(arguments[0],jf)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ns&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Py={serialVersionUID:{configurable:!0}};Zo.prototype.toGeometry=function(st){return st.isNull()?this.createPoint(null):st.getMinX()===st.getMaxX()&&st.getMinY()===st.getMaxY()?this.createPoint(new Ur(st.getMinX(),st.getMinY())):st.getMinX()===st.getMaxX()||st.getMinY()===st.getMaxY()?this.createLineString([new Ur(st.getMinX(),st.getMinY()),new Ur(st.getMaxX(),st.getMaxY())]):this.createPolygon(this.createLinearRing([new Ur(st.getMinX(),st.getMinY()),new Ur(st.getMinX(),st.getMaxY()),new Ur(st.getMaxX(),st.getMaxY()),new Ur(st.getMaxX(),st.getMinY()),new Ur(st.getMinX(),st.getMinY())]),null)},Zo.prototype.createLineString=function(st){return st?st instanceof Array?new ia(this.getCoordinateSequenceFactory().create(st),this):xo(st,gs)?new ia(st,this):void 0:new ia(this.getCoordinateSequenceFactory().create([]),this)},Zo.prototype.createMultiLineString=function(){if(arguments.length===0)return new Bh(null,this);if(arguments.length===1){var st=arguments[0];return new Bh(st,this)}},Zo.prototype.buildGeometry=function(st){for(var _t=null,xt=!1,Et=!1,At=st.iterator();At.hasNext();){var Ot=At.next(),Dt=Ot.getClass();_t===null&&(_t=Dt),Dt!==_t&&(xt=!0),Ot.isGeometryCollectionOrDerived()&&(Et=!0)}if(_t===null)return this.createGeometryCollection();if(xt||Et)return this.createGeometryCollection(Zo.toGeometryArray(st));var Ft=st.iterator().next();if(st.size()>1){if(Ft instanceof Ia)return this.createMultiPolygon(Zo.toPolygonArray(st));if(Ft instanceof ia)return this.createMultiLineString(Zo.toLineStringArray(st));if(Ft instanceof Kl)return this.createMultiPoint(Zo.toPointArray(st));No.shouldNeverReachHere("Unhandled class: "+Ft.getClass().getName())}return Ft},Zo.prototype.createMultiPointFromCoords=function(st){return this.createMultiPoint(st!==null?this.getCoordinateSequenceFactory().create(st):null)},Zo.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Ur){var st=arguments[0];return this.createPoint(st!==null?this.getCoordinateSequenceFactory().create([st]):null)}if(xo(arguments[0],gs)){var _t=arguments[0];return new Kl(_t,this)}}},Zo.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Zo.prototype.createPolygon=function(){if(arguments.length===0)return new Ia(null,null,this);if(arguments.length===1){if(xo(arguments[0],gs)){var st=arguments[0];return this.createPolygon(this.createLinearRing(st))}if(arguments[0]instanceof Array){var _t=arguments[0];return this.createPolygon(this.createLinearRing(_t))}if(arguments[0]instanceof Hc){var xt=arguments[0];return this.createPolygon(xt,null)}}else if(arguments.length===2){var Et=arguments[0],At=arguments[1];return new Ia(Et,At,this)}},Zo.prototype.getSRID=function(){return this._SRID},Zo.prototype.createGeometryCollection=function(){if(arguments.length===0)return new Al(null,this);if(arguments.length===1){var st=arguments[0];return new Al(st,this)}},Zo.prototype.createGeometry=function(st){return new Lu(this).edit(st,{edit:function(){if(arguments.length===2){var _t=arguments[0];return this._coordinateSequenceFactory.create(_t)}}})},Zo.prototype.getPrecisionModel=function(){return this._precisionModel},Zo.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var st=arguments[0];return this.createLinearRing(st!==null?this.getCoordinateSequenceFactory().create(st):null)}if(xo(arguments[0],gs)){var _t=arguments[0];return new Hc(_t,this)}}},Zo.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Vc(null,this);if(arguments.length===1){var st=arguments[0];return new Vc(st,this)}},Zo.prototype.createMultiPoint=function(){var st=this;if(arguments.length===0)return new Qf(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var _t=arguments[0];return new Qf(_t,this)}if(arguments[0]instanceof Array){var xt=arguments[0];return this.createMultiPoint(xt!==null?this.getCoordinateSequenceFactory().create(xt):null)}if(xo(arguments[0],gs)){var Et=arguments[0];if(Et===null)return this.createMultiPoint(new Array(0).fill(null));for(var At=new Array(Et.size()).fill(null),Ot=0;Ot<Et.size();Ot++){var Dt=st.getCoordinateSequenceFactory().create(1,Et.getDimension());ya.copy(Et,Ot,Dt,0,1),At[Ot]=st.createPoint(Dt)}return this.createMultiPoint(At)}}},Zo.prototype.interfaces_=function(){return[Cu]},Zo.prototype.getClass=function(){return Zo},Zo.toMultiPolygonArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.toGeometryArray=function(st){if(st===null)return null;var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.getDefaultCoordinateSequenceFactory=function(){return Uc.instance()},Zo.toMultiLineStringArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.toLineStringArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.toMultiPointArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.toLinearRingArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.toPointArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.toPolygonArray=function(st){var _t=new Array(st.size()).fill(null);return st.toArray(_t)},Zo.createPointFromInternalCoord=function(st,_t){return _t.getPrecisionModel().makePrecise(st),_t.getFactory().createPoint(st)},Py.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Zo,Py);var i_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],og=function(st){this.geometryFactory=st||new Zo};og.prototype.read=function(st){var _t,xt=(_t=typeof st=="string"?JSON.parse(st):st).type;if(!pc[xt])throw new Error("Unknown GeoJSON type: "+_t.type);return i_.indexOf(xt)!==-1?pc[xt].apply(this,[_t.coordinates]):xt==="GeometryCollection"?pc[xt].apply(this,[_t.geometries]):pc[xt].apply(this,[_t])},og.prototype.write=function(st){var _t=st.getGeometryType();if(!fh[_t])throw new Error("Geometry is not supported");return fh[_t].apply(this,[st])};var pc={Feature:function(st){var _t={};for(var xt in st)_t[xt]=st[xt];if(st.geometry){var Et=st.geometry.type;if(!pc[Et])throw new Error("Unknown GeoJSON type: "+st.type);_t.geometry=this.read(st.geometry)}return st.bbox&&(_t.bbox=pc.bbox.apply(this,[st.bbox])),_t},FeatureCollection:function(st){var _t={};if(st.features){_t.features=[];for(var xt=0;xt<st.features.length;++xt)_t.features.push(this.read(st.features[xt]))}return st.bbox&&(_t.bbox=this.parse.bbox.apply(this,[st.bbox])),_t},coordinates:function(st){for(var _t=[],xt=0;xt<st.length;++xt){var Et=st[xt];_t.push(new Ur(Et[0],Et[1]))}return _t},bbox:function(st){return this.geometryFactory.createLinearRing([new Ur(st[0],st[1]),new Ur(st[2],st[1]),new Ur(st[2],st[3]),new Ur(st[0],st[3]),new Ur(st[0],st[1])])},Point:function(st){var _t=new Ur(st[0],st[1]);return this.geometryFactory.createPoint(_t)},MultiPoint:function(st){for(var _t=[],xt=0;xt<st.length;++xt)_t.push(pc.Point.apply(this,[st[xt]]));return this.geometryFactory.createMultiPoint(_t)},LineString:function(st){var _t=pc.coordinates.apply(this,[st]);return this.geometryFactory.createLineString(_t)},MultiLineString:function(st){for(var _t=[],xt=0;xt<st.length;++xt)_t.push(pc.LineString.apply(this,[st[xt]]));return this.geometryFactory.createMultiLineString(_t)},Polygon:function(st){for(var _t=pc.coordinates.apply(this,[st[0]]),xt=this.geometryFactory.createLinearRing(_t),Et=[],At=1;At<st.length;++At){var Ot=st[At],Dt=pc.coordinates.apply(this,[Ot]),Ft=this.geometryFactory.createLinearRing(Dt);Et.push(Ft)}return this.geometryFactory.createPolygon(xt,Et)},MultiPolygon:function(st){for(var _t=[],xt=0;xt<st.length;++xt){var Et=st[xt];_t.push(pc.Polygon.apply(this,[Et]))}return this.geometryFactory.createMultiPolygon(_t)},GeometryCollection:function(st){for(var _t=[],xt=0;xt<st.length;++xt){var Et=st[xt];_t.push(this.read(Et))}return this.geometryFactory.createGeometryCollection(_t)}},fh={coordinate:function(st){return[st.x,st.y]},Point:function(st){return{type:"Point",coordinates:fh.coordinate.apply(this,[st.getCoordinate()])}},MultiPoint:function(st){for(var _t=[],xt=0;xt<st._geometries.length;++xt){var Et=st._geometries[xt],At=fh.Point.apply(this,[Et]);_t.push(At.coordinates)}return{type:"MultiPoint",coordinates:_t}},LineString:function(st){for(var _t=[],xt=st.getCoordinates(),Et=0;Et<xt.length;++Et){var At=xt[Et];_t.push(fh.coordinate.apply(this,[At]))}return{type:"LineString",coordinates:_t}},MultiLineString:function(st){for(var _t=[],xt=0;xt<st._geometries.length;++xt){var Et=st._geometries[xt],At=fh.LineString.apply(this,[Et]);_t.push(At.coordinates)}return{type:"MultiLineString",coordinates:_t}},Polygon:function(st){var _t=[],xt=fh.LineString.apply(this,[st._shell]);_t.push(xt.coordinates);for(var Et=0;Et<st._holes.length;++Et){var At=st._holes[Et],Ot=fh.LineString.apply(this,[At]);_t.push(Ot.coordinates)}return{type:"Polygon",coordinates:_t}},MultiPolygon:function(st){for(var _t=[],xt=0;xt<st._geometries.length;++xt){var Et=st._geometries[xt],At=fh.Polygon.apply(this,[Et]);_t.push(At.coordinates)}return{type:"MultiPolygon",coordinates:_t}},GeometryCollection:function(st){for(var _t=[],xt=0;xt<st._geometries.length;++xt){var Et=st._geometries[xt],At=Et.getGeometryType();_t.push(fh[At].apply(this,[Et]))}return{type:"GeometryCollection",geometries:_t}}},lm=function(st){this.geometryFactory=st||new Zo,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new og(this.geometryFactory)};lm.prototype.read=function(st){var _t=this.parser.read(st);return this.precisionModel.getType()===Ns.FIXED&&this.reducePrecision(_t),_t},lm.prototype.reducePrecision=function(st){var _t,xt;if(st.coordinate)this.precisionModel.makePrecise(st.coordinate);else if(st.points)for(_t=0,xt=st.points.length;_t<xt;_t++)this.precisionModel.makePrecise(st.points[_t]);else if(st.geometries)for(_t=0,xt=st.geometries.length;_t<xt;_t++)this.reducePrecision(st.geometries[_t])};var Ly=function(){this.parser=new og(this.geometryFactory)};Ly.prototype.write=function(st){return this.parser.write(st)};var Si=function(){},sg={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function um(st){this.message=st||""}function gc(){this.array_=[]}Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.opposite=function(st){return st===Si.LEFT?Si.RIGHT:st===Si.RIGHT?Si.LEFT:st},sg.ON.get=function(){return 0},sg.LEFT.get=function(){return 1},sg.RIGHT.get=function(){return 2},Object.defineProperties(Si,sg),um.prototype=new Error,um.prototype.name="EmptyStackException",gc.prototype=new ju,gc.prototype.add=function(st){return this.array_.push(st),!0},gc.prototype.get=function(st){if(st<0||st>=this.size())throw new Error;return this.array_[st]},gc.prototype.push=function(st){return this.array_.push(st),st},gc.prototype.pop=function(st){if(this.array_.length===0)throw new um;return this.array_.pop()},gc.prototype.peek=function(){if(this.array_.length===0)throw new um;return this.array_[this.array_.length-1]},gc.prototype.empty=function(){return this.array_.length===0},gc.prototype.isEmpty=function(){return this.empty()},gc.prototype.search=function(st){return this.array_.indexOf(st)},gc.prototype.size=function(){return this.array_.length},gc.prototype.toArray=function(){for(var st=[],_t=0,xt=this.array_.length;_t<xt;_t++)st.push(this.array_[_t]);return st};var Xu=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Xu.prototype.getCoordinate=function(){return this._minCoord},Xu.prototype.getRightmostSide=function(st,_t){var xt=this.getRightmostSideOfSegment(st,_t);return xt<0&&(xt=this.getRightmostSideOfSegment(st,_t-1)),xt<0&&(this._minCoord=null,this.checkForRightmostCoordinate(st)),xt},Xu.prototype.findRightmostEdgeAtVertex=function(){var st=this._minDe.getEdge().getCoordinates();No.isTrue(this._minIndex>0&&this._minIndex<st.length,"rightmost point expected to be interior vertex of edge");var _t=st[this._minIndex-1],xt=st[this._minIndex+1],Et=$i.computeOrientation(this._minCoord,xt,_t),At=!1;(_t.y<this._minCoord.y&&xt.y<this._minCoord.y&&Et===$i.COUNTERCLOCKWISE||_t.y>this._minCoord.y&&xt.y>this._minCoord.y&&Et===$i.CLOCKWISE)&&(At=!0),At&&(this._minIndex=this._minIndex-1)},Xu.prototype.getRightmostSideOfSegment=function(st,_t){var xt=st.getEdge().getCoordinates();if(_t<0||_t+1>=xt.length||xt[_t].y===xt[_t+1].y)return-1;var Et=Si.LEFT;return xt[_t].y<xt[_t+1].y&&(Et=Si.RIGHT),Et},Xu.prototype.getEdge=function(){return this._orientedDe},Xu.prototype.checkForRightmostCoordinate=function(st){for(var _t=this,xt=st.getEdge().getCoordinates(),Et=0;Et<xt.length-1;Et++)(_t._minCoord===null||xt[Et].x>_t._minCoord.x)&&(_t._minDe=st,_t._minIndex=Et,_t._minCoord=xt[Et])},Xu.prototype.findRightmostEdgeAtNode=function(){var st=this._minDe.getNode().getEdges();this._minDe=st.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Xu.prototype.findEdge=function(st){for(var _t=st.iterator();_t.hasNext();){var xt=_t.next();xt.isForward()&&this.checkForRightmostCoordinate(xt)}No.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Si.LEFT&&(this._orientedDe=this._minDe.getSym())},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu};var ph=function(st){function _t(xt,Et){st.call(this,_t.msgWithCoord(xt,Et)),this.pt=Et?new Ur(Et):null,this.name="TopologyException"}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.getCoordinate=function(){return this.pt},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.msgWithCoord=function(xt,Et){return Et?xt:xt+" [ "+Et+" ]"},_t}(hh),cm=function(){this.array_=[]};cm.prototype.addLast=function(st){this.array_.push(st)},cm.prototype.removeFirst=function(){return this.array_.shift()},cm.prototype.isEmpty=function(){return this.array_.length===0};var _l=function(){this._finder=null,this._dirEdgeList=new Ii,this._nodes=new Ii,this._rightMostCoord=null,this._env=null,this._finder=new Xu};_l.prototype.clearVisitedEdges=function(){for(var st=this._dirEdgeList.iterator();st.hasNext();)st.next().setVisited(!1)},_l.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},_l.prototype.computeNodeDepth=function(st){for(var _t=null,xt=st.getEdges().iterator();xt.hasNext();){var Et=xt.next();if(Et.isVisited()||Et.getSym().isVisited()){_t=Et;break}}if(_t===null)throw new ph("unable to find edge to compute depths at "+st.getCoordinate());st.getEdges().computeDepths(_t);for(var At=st.getEdges().iterator();At.hasNext();){var Ot=At.next();Ot.setVisited(!0),this.copySymDepths(Ot)}},_l.prototype.computeDepth=function(st){this.clearVisitedEdges();var _t=this._finder.getEdge();_t.setEdgeDepths(Si.RIGHT,st),this.copySymDepths(_t),this.computeDepths(_t)},_l.prototype.create=function(st){this.addReachable(st),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},_l.prototype.findResultEdges=function(){for(var st=this._dirEdgeList.iterator();st.hasNext();){var _t=st.next();_t.getDepth(Si.RIGHT)>=1&&_t.getDepth(Si.LEFT)<=0&&!_t.isInteriorAreaEdge()&&_t.setInResult(!0)}},_l.prototype.computeDepths=function(st){var _t=new om,xt=new cm,Et=st.getNode();for(xt.addLast(Et),_t.add(Et),st.setVisited(!0);!xt.isEmpty();){var At=xt.removeFirst();_t.add(At),this.computeNodeDepth(At);for(var Ot=At.getEdges().iterator();Ot.hasNext();){var Dt=Ot.next().getSym();if(!Dt.isVisited()){var Ft=Dt.getNode();_t.contains(Ft)||(xt.addLast(Ft),_t.add(Ft))}}}},_l.prototype.compareTo=function(st){var _t=st;return this._rightMostCoord.x<_t._rightMostCoord.x?-1:this._rightMostCoord.x>_t._rightMostCoord.x?1:0},_l.prototype.getEnvelope=function(){if(this._env===null){for(var st=new to,_t=this._dirEdgeList.iterator();_t.hasNext();)for(var xt=_t.next().getEdge().getCoordinates(),Et=0;Et<xt.length-1;Et++)st.expandToInclude(xt[Et]);this._env=st}return this._env},_l.prototype.addReachable=function(st){var _t=new gc;for(_t.add(st);!_t.empty();){var xt=_t.pop();this.add(xt,_t)}},_l.prototype.copySymDepths=function(st){var _t=st.getSym();_t.setDepth(Si.LEFT,st.getDepth(Si.RIGHT)),_t.setDepth(Si.RIGHT,st.getDepth(Si.LEFT))},_l.prototype.add=function(st,_t){st.setVisited(!0),this._nodes.add(st);for(var xt=st.getEdges().iterator();xt.hasNext();){var Et=xt.next();this._dirEdgeList.add(Et);var At=Et.getSym().getNode();At.isVisited()||_t.push(At)}},_l.prototype.getNodes=function(){return this._nodes},_l.prototype.getDirectedEdges=function(){return this._dirEdgeList},_l.prototype.interfaces_=function(){return[Su]},_l.prototype.getClass=function(){return _l};var Xs=function st(){var _t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var xt=arguments[0];this.init(xt.length)}else if(Number.isInteger(arguments[0])){var Et=arguments[0];this.init(1),this.location[Si.ON]=Et}else if(arguments[0]instanceof st){var At=arguments[0];if(this.init(At.location.length),At!==null)for(var Ot=0;Ot<this.location.length;Ot++)_t.location[Ot]=At.location[Ot]}}else if(arguments.length===3){var Dt=arguments[0],Ft=arguments[1],jt=arguments[2];this.init(3),this.location[Si.ON]=Dt,this.location[Si.LEFT]=Ft,this.location[Si.RIGHT]=jt}};Xs.prototype.setAllLocations=function(st){for(var _t=0;_t<this.location.length;_t++)this.location[_t]=st},Xs.prototype.isNull=function(){for(var st=0;st<this.location.length;st++)if(this.location[st]!==Zr.NONE)return!1;return!0},Xs.prototype.setAllLocationsIfNull=function(st){for(var _t=0;_t<this.location.length;_t++)this.location[_t]===Zr.NONE&&(this.location[_t]=st)},Xs.prototype.isLine=function(){return this.location.length===1},Xs.prototype.merge=function(st){if(st.location.length>this.location.length){var _t=new Array(3).fill(null);_t[Si.ON]=this.location[Si.ON],_t[Si.LEFT]=Zr.NONE,_t[Si.RIGHT]=Zr.NONE,this.location=_t}for(var xt=0;xt<this.location.length;xt++)this.location[xt]===Zr.NONE&&xt<st.location.length&&(this.location[xt]=st.location[xt])},Xs.prototype.getLocations=function(){return this.location},Xs.prototype.flip=function(){if(this.location.length<=1)return null;var st=this.location[Si.LEFT];this.location[Si.LEFT]=this.location[Si.RIGHT],this.location[Si.RIGHT]=st},Xs.prototype.toString=function(){var st=new uc;return this.location.length>1&&st.append(Zr.toLocationSymbol(this.location[Si.LEFT])),st.append(Zr.toLocationSymbol(this.location[Si.ON])),this.location.length>1&&st.append(Zr.toLocationSymbol(this.location[Si.RIGHT])),st.toString()},Xs.prototype.setLocations=function(st,_t,xt){this.location[Si.ON]=st,this.location[Si.LEFT]=_t,this.location[Si.RIGHT]=xt},Xs.prototype.get=function(st){return st<this.location.length?this.location[st]:Zr.NONE},Xs.prototype.isArea=function(){return this.location.length>1},Xs.prototype.isAnyNull=function(){for(var st=0;st<this.location.length;st++)if(this.location[st]===Zr.NONE)return!0;return!1},Xs.prototype.setLocation=function(){if(arguments.length===1){var st=arguments[0];this.setLocation(Si.ON,st)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this.location[_t]=xt}},Xs.prototype.init=function(st){this.location=new Array(st).fill(null),this.setAllLocations(Zr.NONE)},Xs.prototype.isEqualOnSide=function(st,_t){return this.location[_t]===st.location[_t]},Xs.prototype.allPositionsEqual=function(st){for(var _t=0;_t<this.location.length;_t++)if(this.location[_t]!==st)return!1;return!0},Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs};var zs=function st(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var _t=arguments[0];this.elt[0]=new Xs(_t),this.elt[1]=new Xs(_t)}else if(arguments[0]instanceof st){var xt=arguments[0];this.elt[0]=new Xs(xt.elt[0]),this.elt[1]=new Xs(xt.elt[1])}}else if(arguments.length===2){var Et=arguments[0],At=arguments[1];this.elt[0]=new Xs(Zr.NONE),this.elt[1]=new Xs(Zr.NONE),this.elt[Et].setLocation(At)}else if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2];this.elt[0]=new Xs(Ot,Dt,Ft),this.elt[1]=new Xs(Ot,Dt,Ft)}else if(arguments.length===4){var jt=arguments[0],Gt=arguments[1],Jt=arguments[2],qt=arguments[3];this.elt[0]=new Xs(Zr.NONE,Zr.NONE,Zr.NONE),this.elt[1]=new Xs(Zr.NONE,Zr.NONE,Zr.NONE),this.elt[jt].setLocations(Gt,Jt,qt)}};zs.prototype.getGeometryCount=function(){var st=0;return this.elt[0].isNull()||st++,this.elt[1].isNull()||st++,st},zs.prototype.setAllLocations=function(st,_t){this.elt[st].setAllLocations(_t)},zs.prototype.isNull=function(st){return this.elt[st].isNull()},zs.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var st=arguments[0];this.setAllLocationsIfNull(0,st),this.setAllLocationsIfNull(1,st)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this.elt[_t].setAllLocationsIfNull(xt)}},zs.prototype.isLine=function(st){return this.elt[st].isLine()},zs.prototype.merge=function(st){for(var _t=this,xt=0;xt<2;xt++)_t.elt[xt]===null&&st.elt[xt]!==null?_t.elt[xt]=new Xs(st.elt[xt]):_t.elt[xt].merge(st.elt[xt])},zs.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},zs.prototype.getLocation=function(){if(arguments.length===1){var st=arguments[0];return this.elt[st].get(Si.ON)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return this.elt[_t].get(xt)}},zs.prototype.toString=function(){var st=new uc;return this.elt[0]!==null&&(st.append("A:"),st.append(this.elt[0].toString())),this.elt[1]!==null&&(st.append(" B:"),st.append(this.elt[1].toString())),st.toString()},zs.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var st=arguments[0];return this.elt[st].isArea()}},zs.prototype.isAnyNull=function(st){return this.elt[st].isAnyNull()},zs.prototype.setLocation=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1];this.elt[st].setLocation(Si.ON,_t)}else if(arguments.length===3){var xt=arguments[0],Et=arguments[1],At=arguments[2];this.elt[xt].setLocation(Et,At)}},zs.prototype.isEqualOnSide=function(st,_t){return this.elt[0].isEqualOnSide(st.elt[0],_t)&&this.elt[1].isEqualOnSide(st.elt[1],_t)},zs.prototype.allPositionsEqual=function(st,_t){return this.elt[st].allPositionsEqual(_t)},zs.prototype.toLine=function(st){this.elt[st].isArea()&&(this.elt[st]=new Xs(this.elt[st].location[0]))},zs.prototype.interfaces_=function(){return[]},zs.prototype.getClass=function(){return zs},zs.toLineLabel=function(st){for(var _t=new zs(Zr.NONE),xt=0;xt<2;xt++)_t.setLocation(xt,st.getLocation(xt));return _t};var ba=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ii,this._pts=new Ii,this._label=new zs(Zr.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ii,this._geometryFactory=null;var st=arguments[0],_t=arguments[1];this._geometryFactory=_t,this.computePoints(st),this.computeRing()};ba.prototype.computeRing=function(){if(this._ring!==null)return null;for(var st=new Array(this._pts.size()).fill(null),_t=0;_t<this._pts.size();_t++)st[_t]=this._pts.get(_t);this._ring=this._geometryFactory.createLinearRing(st),this._isHole=$i.isCCW(this._ring.getCoordinates())},ba.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},ba.prototype.computePoints=function(st){var _t=this;this._startDe=st;var xt=st,Et=!0;do{if(xt===null)throw new ph("Found null DirectedEdge");if(xt.getEdgeRing()===_t)throw new ph("Directed Edge visited twice during ring-building at "+xt.getCoordinate());_t._edges.add(xt);var At=xt.getLabel();No.isTrue(At.isArea()),_t.mergeLabel(At),_t.addPoints(xt.getEdge(),xt.isForward(),Et),Et=!1,_t.setEdgeRing(xt,_t),xt=_t.getNext(xt)}while(xt!==this._startDe)},ba.prototype.getLinearRing=function(){return this._ring},ba.prototype.getCoordinate=function(st){return this._pts.get(st)},ba.prototype.computeMaxNodeDegree=function(){var st=this;this._maxNodeDegree=0;var _t=this._startDe;do{var xt=_t.getNode().getEdges().getOutgoingDegree(st);xt>st._maxNodeDegree&&(st._maxNodeDegree=xt),_t=st.getNext(_t)}while(_t!==this._startDe);this._maxNodeDegree*=2},ba.prototype.addPoints=function(st,_t,xt){var Et=st.getCoordinates();if(_t){var At=1;xt&&(At=0);for(var Ot=At;Ot<Et.length;Ot++)this._pts.add(Et[Ot])}else{var Dt=Et.length-2;xt&&(Dt=Et.length-1);for(var Ft=Dt;Ft>=0;Ft--)this._pts.add(Et[Ft])}},ba.prototype.isHole=function(){return this._isHole},ba.prototype.setInResult=function(){var st=this._startDe;do st.getEdge().setInResult(!0),st=st.getNext();while(st!==this._startDe)},ba.prototype.containsPoint=function(st){var _t=this.getLinearRing();if(!_t.getEnvelopeInternal().contains(st)||!$i.isPointInRing(st,_t.getCoordinates()))return!1;for(var xt=this._holes.iterator();xt.hasNext();)if(xt.next().containsPoint(st))return!1;return!0},ba.prototype.addHole=function(st){this._holes.add(st)},ba.prototype.isShell=function(){return this._shell===null},ba.prototype.getLabel=function(){return this._label},ba.prototype.getEdges=function(){return this._edges},ba.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},ba.prototype.getShell=function(){return this._shell},ba.prototype.mergeLabel=function(){if(arguments.length===1){var st=arguments[0];this.mergeLabel(st,0),this.mergeLabel(st,1)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1],Et=_t.getLocation(xt,Si.RIGHT);if(Et===Zr.NONE)return null;if(this._label.getLocation(xt)===Zr.NONE)return this._label.setLocation(xt,Et),null}},ba.prototype.setShell=function(st){this._shell=st,st!==null&&st.addHole(this)},ba.prototype.toPolygon=function(st){for(var _t=new Array(this._holes.size()).fill(null),xt=0;xt<this._holes.size();xt++)_t[xt]=this._holes.get(xt).getLinearRing();return st.createPolygon(this.getLinearRing(),_t)},ba.prototype.interfaces_=function(){return[]},ba.prototype.getClass=function(){return ba};var o_=function(st){function _t(){var xt=arguments[0],Et=arguments[1];st.call(this,xt,Et)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.setEdgeRing=function(xt,Et){xt.setMinEdgeRing(Et)},_t.prototype.getNext=function(xt){return xt.getNextMin()},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ba),s_=function(st){function _t(){var xt=arguments[0],Et=arguments[1];st.call(this,xt,Et)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.buildMinimalRings=function(){var xt=new Ii,Et=this._startDe;do{if(Et.getMinEdgeRing()===null){var At=new o_(Et,this._geometryFactory);xt.add(At)}Et=Et.getNext()}while(Et!==this._startDe);return xt},_t.prototype.setEdgeRing=function(xt,Et){xt.setEdgeRing(Et)},_t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var xt=this._startDe;do xt.getNode().getEdges().linkMinimalDirectedEdges(this),xt=xt.getNext();while(xt!==this._startDe)},_t.prototype.getNext=function(xt){return xt.getNext()},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ba),Jl=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var st=arguments[0];this._label=st}}};Jl.prototype.setVisited=function(st){this._isVisited=st},Jl.prototype.setInResult=function(st){this._isInResult=st},Jl.prototype.isCovered=function(){return this._isCovered},Jl.prototype.isCoveredSet=function(){return this._isCoveredSet},Jl.prototype.setLabel=function(st){this._label=st},Jl.prototype.getLabel=function(){return this._label},Jl.prototype.setCovered=function(st){this._isCovered=st,this._isCoveredSet=!0},Jl.prototype.updateIM=function(st){No.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(st)},Jl.prototype.isInResult=function(){return this._isInResult},Jl.prototype.isVisited=function(){return this._isVisited},Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl};var hm=function(st){function _t(){st.call(this),this._coord=null,this._edges=null;var xt=arguments[0],Et=arguments[1];this._coord=xt,this._edges=Et,this._label=new zs(0,Zr.NONE)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.isIncidentEdgeInResult=function(){for(var xt=this.getEdges().getEdges().iterator();xt.hasNext();)if(xt.next().getEdge().isInResult())return!0;return!1},_t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},_t.prototype.getCoordinate=function(){return this._coord},_t.prototype.print=function(xt){xt.println("node "+this._coord+" lbl: "+this._label)},_t.prototype.computeIM=function(xt){},_t.prototype.computeMergedLocation=function(xt,Et){var At=Zr.NONE;if(At=this._label.getLocation(Et),!xt.isNull(Et)){var Ot=xt.getLocation(Et);At!==Zr.BOUNDARY&&(At=Ot)}return At},_t.prototype.setLabel=function(){if(arguments.length!==2)return st.prototype.setLabel.apply(this,arguments);var xt=arguments[0],Et=arguments[1];this._label===null?this._label=new zs(xt,Et):this._label.setLocation(xt,Et)},_t.prototype.getEdges=function(){return this._edges},_t.prototype.mergeLabel=function(){var xt=this;if(arguments[0]instanceof _t){var Et=arguments[0];this.mergeLabel(Et._label)}else if(arguments[0]instanceof zs)for(var At=arguments[0],Ot=0;Ot<2;Ot++){var Dt=xt.computeMergedLocation(At,Ot),Ft=xt._label.getLocation(Ot);Ft===Zr.NONE&&xt._label.setLocation(Ot,Dt)}},_t.prototype.add=function(xt){this._edges.insert(xt),xt.setNode(this)},_t.prototype.setLabelBoundary=function(xt){if(this._label===null)return null;var Et=Zr.NONE;this._label!==null&&(Et=this._label.getLocation(xt));var At=null;switch(Et){case Zr.BOUNDARY:At=Zr.INTERIOR;break;case Zr.INTERIOR:default:At=Zr.BOUNDARY}this._label.setLocation(xt,At)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Jl),mc=function(){this.nodeMap=new vl,this.nodeFact=null;var st=arguments[0];this.nodeFact=st};mc.prototype.find=function(st){return this.nodeMap.get(st)},mc.prototype.addNode=function(){if(arguments[0]instanceof Ur){var st=arguments[0],_t=this.nodeMap.get(st);return _t===null&&(_t=this.nodeFact.createNode(st),this.nodeMap.put(st,_t)),_t}if(arguments[0]instanceof hm){var xt=arguments[0],Et=this.nodeMap.get(xt.getCoordinate());return Et===null?(this.nodeMap.put(xt.getCoordinate(),xt),xt):(Et.mergeLabel(xt),Et)}},mc.prototype.print=function(st){for(var _t=this.iterator();_t.hasNext();)_t.next().print(st)},mc.prototype.iterator=function(){return this.nodeMap.values().iterator()},mc.prototype.values=function(){return this.nodeMap.values()},mc.prototype.getBoundaryNodes=function(st){for(var _t=new Ii,xt=this.iterator();xt.hasNext();){var Et=xt.next();Et.getLabel().getLocation(st)===Zr.BOUNDARY&&_t.add(Et)}return _t},mc.prototype.add=function(st){var _t=st.getCoordinate();this.addNode(_t).add(st)},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var Hs=function(){},ag={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Hs.prototype.interfaces_=function(){return[]},Hs.prototype.getClass=function(){return Hs},Hs.isNorthern=function(st){return st===Hs.NE||st===Hs.NW},Hs.isOpposite=function(st,_t){return st!==_t&&(st-_t+4)%4===2},Hs.commonHalfPlane=function(st,_t){if(st===_t)return st;if((st-_t+4)%4===2)return-1;var xt=st<_t?st:_t;return xt===0&&(st>_t?st:_t)===3?3:xt},Hs.isInHalfPlane=function(st,_t){return _t===Hs.SE?st===Hs.SE||st===Hs.SW:st===_t||st===_t+1},Hs.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var st=arguments[0],_t=arguments[1];if(st===0&&_t===0)throw new ra("Cannot compute the quadrant for point ( "+st+", "+_t+" )");return st>=0?_t>=0?Hs.NE:Hs.SE:_t>=0?Hs.NW:Hs.SW}if(arguments[0]instanceof Ur&&arguments[1]instanceof Ur){var xt=arguments[0],Et=arguments[1];if(Et.x===xt.x&&Et.y===xt.y)throw new ra("Cannot compute the quadrant for two identical points "+xt);return Et.x>=xt.x?Et.y>=xt.y?Hs.NE:Hs.SE:Et.y>=xt.y?Hs.NW:Hs.SW}},ag.NE.get=function(){return 0},ag.NW.get=function(){return 1},ag.SW.get=function(){return 2},ag.SE.get=function(){return 3},Object.defineProperties(Hs,ag);var bl=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var st=arguments[0];this._edge=st}else if(arguments.length===3){var _t=arguments[0],xt=arguments[1],Et=arguments[2],At=null;this._edge=_t,this.init(xt,Et),this._label=At}else if(arguments.length===4){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2],jt=arguments[3];this._edge=Ot,this.init(Dt,Ft),this._label=jt}};bl.prototype.compareDirection=function(st){return this._dx===st._dx&&this._dy===st._dy?0:this._quadrant>st._quadrant?1:this._quadrant<st._quadrant?-1:$i.computeOrientation(st._p0,st._p1,this._p1)},bl.prototype.getDy=function(){return this._dy},bl.prototype.getCoordinate=function(){return this._p0},bl.prototype.setNode=function(st){this._node=st},bl.prototype.print=function(st){var _t=Math.atan2(this._dy,this._dx),xt=this.getClass().getName(),Et=xt.lastIndexOf("."),At=xt.substring(Et+1);st.print("  "+At+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+_t+"   "+this._label)},bl.prototype.compareTo=function(st){var _t=st;return this.compareDirection(_t)},bl.prototype.getDirectedCoordinate=function(){return this._p1},bl.prototype.getDx=function(){return this._dx},bl.prototype.getLabel=function(){return this._label},bl.prototype.getEdge=function(){return this._edge},bl.prototype.getQuadrant=function(){return this._quadrant},bl.prototype.getNode=function(){return this._node},bl.prototype.toString=function(){var st=Math.atan2(this._dy,this._dx),_t=this.getClass().getName(),xt=_t.lastIndexOf(".");return"  "+_t.substring(xt+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+st+"   "+this._label},bl.prototype.computeLabel=function(st){},bl.prototype.init=function(st,_t){this._p0=st,this._p1=_t,this._dx=_t.x-st.x,this._dy=_t.y-st.y,this._quadrant=Hs.quadrant(this._dx,this._dy),No.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},bl.prototype.interfaces_=function(){return[Su]},bl.prototype.getClass=function(){return bl};var dm=function(st){function _t(){var xt=arguments[0],Et=arguments[1];if(st.call(this,xt),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=Et,Et)this.init(xt.getCoordinate(0),xt.getCoordinate(1));else{var At=xt.getNumPoints()-1;this.init(xt.getCoordinate(At),xt.getCoordinate(At-1))}this.computeDirectedLabel()}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.getNextMin=function(){return this._nextMin},_t.prototype.getDepth=function(xt){return this._depth[xt]},_t.prototype.setVisited=function(xt){this._isVisited=xt},_t.prototype.computeDirectedLabel=function(){this._label=new zs(this._edge.getLabel()),this._isForward||this._label.flip()},_t.prototype.getNext=function(){return this._next},_t.prototype.setDepth=function(xt,Et){if(this._depth[xt]!==-999&&this._depth[xt]!==Et)throw new ph("assigned depths do not match",this.getCoordinate());this._depth[xt]=Et},_t.prototype.isInteriorAreaEdge=function(){for(var xt=this,Et=!0,At=0;At<2;At++)xt._label.isArea(At)&&xt._label.getLocation(At,Si.LEFT)===Zr.INTERIOR&&xt._label.getLocation(At,Si.RIGHT)===Zr.INTERIOR||(Et=!1);return Et},_t.prototype.setNextMin=function(xt){this._nextMin=xt},_t.prototype.print=function(xt){st.prototype.print.call(this,xt),xt.print(" "+this._depth[Si.LEFT]+"/"+this._depth[Si.RIGHT]),xt.print(" ("+this.getDepthDelta()+")"),this._isInResult&&xt.print(" inResult")},_t.prototype.setMinEdgeRing=function(xt){this._minEdgeRing=xt},_t.prototype.isLineEdge=function(){var xt=this._label.isLine(0)||this._label.isLine(1),Et=!this._label.isArea(0)||this._label.allPositionsEqual(0,Zr.EXTERIOR),At=!this._label.isArea(1)||this._label.allPositionsEqual(1,Zr.EXTERIOR);return xt&&Et&&At},_t.prototype.setEdgeRing=function(xt){this._edgeRing=xt},_t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},_t.prototype.getDepthDelta=function(){var xt=this._edge.getDepthDelta();return this._isForward||(xt=-xt),xt},_t.prototype.setInResult=function(xt){this._isInResult=xt},_t.prototype.getSym=function(){return this._sym},_t.prototype.isForward=function(){return this._isForward},_t.prototype.getEdge=function(){return this._edge},_t.prototype.printEdge=function(xt){this.print(xt),xt.print(" "),this._isForward?this._edge.print(xt):this._edge.printReverse(xt)},_t.prototype.setSym=function(xt){this._sym=xt},_t.prototype.setVisitedEdge=function(xt){this.setVisited(xt),this._sym.setVisited(xt)},_t.prototype.setEdgeDepths=function(xt,Et){var At=this.getEdge().getDepthDelta();this._isForward||(At=-At);var Ot=1;xt===Si.LEFT&&(Ot=-1);var Dt=Si.opposite(xt),Ft=Et+At*Ot;this.setDepth(xt,Et),this.setDepth(Dt,Ft)},_t.prototype.getEdgeRing=function(){return this._edgeRing},_t.prototype.isInResult=function(){return this._isInResult},_t.prototype.setNext=function(xt){this._next=xt},_t.prototype.isVisited=function(){return this._isVisited},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.depthFactor=function(xt,Et){return xt===Zr.EXTERIOR&&Et===Zr.INTERIOR?1:xt===Zr.INTERIOR&&Et===Zr.EXTERIOR?-1:0},_t}(bl),ep=function(){};ep.prototype.createNode=function(st){return new hm(st,null)},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var la=function(){if(this._edges=new Ii,this._nodes=null,this._edgeEndList=new Ii,arguments.length===0)this._nodes=new mc(new ep);else if(arguments.length===1){var st=arguments[0];this._nodes=new mc(st)}};la.prototype.printEdges=function(st){st.println("Edges:");for(var _t=0;_t<this._edges.size();_t++){st.println("edge "+_t+":");var xt=this._edges.get(_t);xt.print(st),xt.eiList.print(st)}},la.prototype.find=function(st){return this._nodes.find(st)},la.prototype.addNode=function(){if(arguments[0]instanceof hm){var st=arguments[0];return this._nodes.addNode(st)}if(arguments[0]instanceof Ur){var _t=arguments[0];return this._nodes.addNode(_t)}},la.prototype.getNodeIterator=function(){return this._nodes.iterator()},la.prototype.linkResultDirectedEdges=function(){for(var st=this._nodes.iterator();st.hasNext();)st.next().getEdges().linkResultDirectedEdges()},la.prototype.debugPrintln=function(st){ul.out.println(st)},la.prototype.isBoundaryNode=function(st,_t){var xt=this._nodes.find(_t);if(xt===null)return!1;var Et=xt.getLabel();return Et!==null&&Et.getLocation(st)===Zr.BOUNDARY},la.prototype.linkAllDirectedEdges=function(){for(var st=this._nodes.iterator();st.hasNext();)st.next().getEdges().linkAllDirectedEdges()},la.prototype.matchInSameDirection=function(st,_t,xt,Et){return!!st.equals(xt)&&$i.computeOrientation(st,_t,Et)===$i.COLLINEAR&&Hs.quadrant(st,_t)===Hs.quadrant(xt,Et)},la.prototype.getEdgeEnds=function(){return this._edgeEndList},la.prototype.debugPrint=function(st){ul.out.print(st)},la.prototype.getEdgeIterator=function(){return this._edges.iterator()},la.prototype.findEdgeInSameDirection=function(st,_t){for(var xt=this,Et=0;Et<this._edges.size();Et++){var At=xt._edges.get(Et),Ot=At.getCoordinates();if(xt.matchInSameDirection(st,_t,Ot[0],Ot[1])||xt.matchInSameDirection(st,_t,Ot[Ot.length-1],Ot[Ot.length-2]))return At}return null},la.prototype.insertEdge=function(st){this._edges.add(st)},la.prototype.findEdgeEnd=function(st){for(var _t=this.getEdgeEnds().iterator();_t.hasNext();){var xt=_t.next();if(xt.getEdge()===st)return xt}return null},la.prototype.addEdges=function(st){for(var _t=this,xt=st.iterator();xt.hasNext();){var Et=xt.next();_t._edges.add(Et);var At=new dm(Et,!0),Ot=new dm(Et,!1);At.setSym(Ot),Ot.setSym(At),_t.add(At),_t.add(Ot)}},la.prototype.add=function(st){this._nodes.add(st),this._edgeEndList.add(st)},la.prototype.getNodes=function(){return this._nodes.values()},la.prototype.findEdge=function(st,_t){for(var xt=0;xt<this._edges.size();xt++){var Et=this._edges.get(xt),At=Et.getCoordinates();if(st.equals(At[0])&&_t.equals(At[1]))return Et}return null},la.prototype.interfaces_=function(){return[]},la.prototype.getClass=function(){return la},la.linkResultDirectedEdges=function(st){for(var _t=st.iterator();_t.hasNext();)_t.next().getEdges().linkResultDirectedEdges()};var zl=function(){this._geometryFactory=null,this._shellList=new Ii;var st=arguments[0];this._geometryFactory=st};zl.prototype.sortShellsAndHoles=function(st,_t,xt){for(var Et=st.iterator();Et.hasNext();){var At=Et.next();At.isHole()?xt.add(At):_t.add(At)}},zl.prototype.computePolygons=function(st){for(var _t=new Ii,xt=st.iterator();xt.hasNext();){var Et=xt.next().toPolygon(this._geometryFactory);_t.add(Et)}return _t},zl.prototype.placeFreeHoles=function(st,_t){for(var xt=_t.iterator();xt.hasNext();){var Et=xt.next();if(Et.getShell()===null){var At=this.findEdgeRingContaining(Et,st);if(At===null)throw new ph("unable to assign hole to a shell",Et.getCoordinate(0));Et.setShell(At)}}},zl.prototype.buildMinimalEdgeRings=function(st,_t,xt){for(var Et=new Ii,At=st.iterator();At.hasNext();){var Ot=At.next();if(Ot.getMaxNodeDegree()>2){Ot.linkDirectedEdgesForMinimalEdgeRings();var Dt=Ot.buildMinimalRings(),Ft=this.findShell(Dt);Ft!==null?(this.placePolygonHoles(Ft,Dt),_t.add(Ft)):xt.addAll(Dt)}else Et.add(Ot)}return Et},zl.prototype.containsPoint=function(st){for(var _t=this._shellList.iterator();_t.hasNext();)if(_t.next().containsPoint(st))return!0;return!1},zl.prototype.buildMaximalEdgeRings=function(st){for(var _t=new Ii,xt=st.iterator();xt.hasNext();){var Et=xt.next();if(Et.isInResult()&&Et.getLabel().isArea()&&Et.getEdgeRing()===null){var At=new s_(Et,this._geometryFactory);_t.add(At),At.setInResult()}}return _t},zl.prototype.placePolygonHoles=function(st,_t){for(var xt=_t.iterator();xt.hasNext();){var Et=xt.next();Et.isHole()&&Et.setShell(st)}},zl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},zl.prototype.findEdgeRingContaining=function(st,_t){for(var xt=st.getLinearRing(),Et=xt.getEnvelopeInternal(),At=xt.getCoordinateN(0),Ot=null,Dt=null,Ft=_t.iterator();Ft.hasNext();){var jt=Ft.next(),Gt=jt.getLinearRing(),Jt=Gt.getEnvelopeInternal();Ot!==null&&(Dt=Ot.getLinearRing().getEnvelopeInternal());var qt=!1;Jt.contains(Et)&&$i.isPointInRing(At,Gt.getCoordinates())&&(qt=!0),qt&&(Ot===null||Dt.contains(Jt))&&(Ot=jt)}return Ot},zl.prototype.findShell=function(st){for(var _t=0,xt=null,Et=st.iterator();Et.hasNext();){var At=Et.next();At.isHole()||(xt=At,_t++)}return No.isTrue(_t<=1,"found two shells in MinimalEdgeRing list"),xt},zl.prototype.add=function(){if(arguments.length===1){var st=arguments[0];this.add(st.getEdgeEnds(),st.getNodes())}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];la.linkResultDirectedEdges(xt);var Et=this.buildMaximalEdgeRings(_t),At=new Ii,Ot=this.buildMinimalEdgeRings(Et,this._shellList,At);this.sortShellsAndHoles(Ot,this._shellList,At),this.placeFreeHoles(this._shellList,At)}},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl};var tp=function(){};tp.prototype.getBounds=function(){},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var Zu=function(){this._bounds=null,this._item=null;var st=arguments[0],_t=arguments[1];this._bounds=st,this._item=_t};Zu.prototype.getItem=function(){return this._item},Zu.prototype.getBounds=function(){return this._bounds},Zu.prototype.interfaces_=function(){return[tp,Cu]},Zu.prototype.getClass=function(){return Zu};var jc=function(){this._size=null,this._items=null,this._size=0,this._items=new Ii,this._items.add(null)};jc.prototype.poll=function(){if(this.isEmpty())return null;var st=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),st},jc.prototype.size=function(){return this._size},jc.prototype.reorder=function(st){for(var _t=this,xt=null,Et=this._items.get(st);2*st<=this._size&&((xt=2*st)!==_t._size&&_t._items.get(xt+1).compareTo(_t._items.get(xt))<0&&xt++,_t._items.get(xt).compareTo(Et)<0);st=xt)_t._items.set(st,_t._items.get(xt));this._items.set(st,Et)},jc.prototype.clear=function(){this._size=0,this._items.clear()},jc.prototype.isEmpty=function(){return this._size===0},jc.prototype.add=function(st){this._items.add(null),this._size+=1;var _t=this._size;for(this._items.set(0,st);st.compareTo(this._items.get(Math.trunc(_t/2)))<0;_t/=2)this._items.set(_t,this._items.get(Math.trunc(_t/2)));this._items.set(_t,st)},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var zh=function(){};zh.prototype.visitItem=function(st){},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var of=function(){};of.prototype.insert=function(st,_t){},of.prototype.remove=function(st,_t){},of.prototype.query=function(){},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var Ca=function(){if(this._childBoundables=new Ii,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var st=arguments[0];this._level=st}}},Oy={serialVersionUID:{configurable:!0}};Ca.prototype.getLevel=function(){return this._level},Ca.prototype.size=function(){return this._childBoundables.size()},Ca.prototype.getChildBoundables=function(){return this._childBoundables},Ca.prototype.addChildBoundable=function(st){No.isTrue(this._bounds===null),this._childBoundables.add(st)},Ca.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ca.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},Ca.prototype.interfaces_=function(){return[tp,Cu]},Ca.prototype.getClass=function(){return Ca},Oy.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(Ca,Oy);var Ku=function(){};Ku.reverseOrder=function(){return{compare:function(st,_t){return _t.compareTo(st)}}},Ku.min=function(st){return Ku.sort(st),st.get(0)},Ku.sort=function(st,_t){var xt=st.toArray();_t?zc.sort(xt,_t):zc.sort(xt);for(var Et=st.iterator(),At=0,Ot=xt.length;At<Ot;At++)Et.next(),Et.set(xt[At])},Ku.singletonList=function(st){var _t=new Ii;return _t.add(st),_t};var xa=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var st=arguments[0],_t=arguments[1],xt=arguments[2];this._boundable1=st,this._boundable2=_t,this._itemDistance=xt,this._distance=this.distance()};xa.prototype.expandToQueue=function(st,_t){var xt=xa.isComposite(this._boundable1),Et=xa.isComposite(this._boundable2);if(xt&&Et)return xa.area(this._boundable1)>xa.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,st,_t),null):(this.expand(this._boundable2,this._boundable1,st,_t),null);if(xt)return this.expand(this._boundable1,this._boundable2,st,_t),null;if(Et)return this.expand(this._boundable2,this._boundable1,st,_t),null;throw new ra("neither boundable is composite")},xa.prototype.isLeaves=function(){return!(xa.isComposite(this._boundable1)||xa.isComposite(this._boundable2))},xa.prototype.compareTo=function(st){var _t=st;return this._distance<_t._distance?-1:this._distance>_t._distance?1:0},xa.prototype.expand=function(st,_t,xt,Et){for(var At=st.getChildBoundables().iterator();At.hasNext();){var Ot=At.next(),Dt=new xa(Ot,_t,this._itemDistance);Dt.getDistance()<Et&&xt.add(Dt)}},xa.prototype.getBoundable=function(st){return st===0?this._boundable1:this._boundable2},xa.prototype.getDistance=function(){return this._distance},xa.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},xa.prototype.interfaces_=function(){return[Su]},xa.prototype.getClass=function(){return xa},xa.area=function(st){return st.getBounds().getArea()},xa.isComposite=function(st){return st instanceof Ca};var Qa=function st(){if(this._root=null,this._built=!1,this._itemBoundables=new Ii,this._nodeCapacity=null,arguments.length===0){var _t=st.DEFAULT_NODE_CAPACITY;this._nodeCapacity=_t}else if(arguments.length===1){var xt=arguments[0];No.isTrue(xt>1,"Node capacity must be greater than 1"),this._nodeCapacity=xt}},fm={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Qa.prototype.getNodeCapacity=function(){return this._nodeCapacity},Qa.prototype.lastNode=function(st){return st.get(st.size()-1)},Qa.prototype.size=function(){var st=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var _t=arguments[0],xt=0,Et=_t.getChildBoundables().iterator();Et.hasNext();){var At=Et.next();At instanceof Ca?xt+=st.size(At):At instanceof Zu&&(xt+=1)}return xt}},Qa.prototype.removeItem=function(st,_t){for(var xt=null,Et=st.getChildBoundables().iterator();Et.hasNext();){var At=Et.next();At instanceof Zu&&At.getItem()===_t&&(xt=At)}return xt!==null&&(st.getChildBoundables().remove(xt),!0)},Qa.prototype.itemsTree=function(){var st=this;if(arguments.length===0){this.build();var _t=this.itemsTree(this._root);return _t===null?new Ii:_t}if(arguments.length===1){for(var xt=arguments[0],Et=new Ii,At=xt.getChildBoundables().iterator();At.hasNext();){var Ot=At.next();if(Ot instanceof Ca){var Dt=st.itemsTree(Ot);Dt!==null&&Et.add(Dt)}else Ot instanceof Zu?Et.add(Ot.getItem()):No.shouldNeverReachHere()}return Et.size()<=0?null:Et}},Qa.prototype.insert=function(st,_t){No.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Zu(st,_t))},Qa.prototype.boundablesAtLevel=function(){var st=this;if(arguments.length===1){var _t=arguments[0],xt=new Ii;return this.boundablesAtLevel(_t,this._root,xt),xt}if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2];if(No.isTrue(Et>-2),At.getLevel()===Et)return Ot.add(At),null;for(var Dt=At.getChildBoundables().iterator();Dt.hasNext();){var Ft=Dt.next();Ft instanceof Ca?st.boundablesAtLevel(Et,Ft,Ot):(No.isTrue(Ft instanceof Zu),Et===-1&&Ot.add(Ft))}return null}},Qa.prototype.query=function(){var st=this;if(arguments.length===1){var _t=arguments[0];this.build();var xt=new Ii;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),_t)&&this.query(_t,this._root,xt),xt}if(arguments.length===2){var Et=arguments[0],At=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),Et)&&this.query(Et,this._root,At)}else if(arguments.length===3){if(xo(arguments[2],zh)&&arguments[0]instanceof Object&&arguments[1]instanceof Ca)for(var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2],jt=Dt.getChildBoundables(),Gt=0;Gt<jt.size();Gt++){var Jt=jt.get(Gt);st.getIntersectsOp().intersects(Jt.getBounds(),Ot)&&(Jt instanceof Ca?st.query(Ot,Jt,Ft):Jt instanceof Zu?Ft.visitItem(Jt.getItem()):No.shouldNeverReachHere())}else if(xo(arguments[2],ju)&&arguments[0]instanceof Object&&arguments[1]instanceof Ca)for(var qt=arguments[0],on=arguments[1],vn=arguments[2],_n=on.getChildBoundables(),En=0;En<_n.size();En++){var cn=_n.get(En);st.getIntersectsOp().intersects(cn.getBounds(),qt)&&(cn instanceof Ca?st.query(qt,cn,vn):cn instanceof Zu?vn.add(cn.getItem()):No.shouldNeverReachHere())}}},Qa.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Qa.prototype.getRoot=function(){return this.build(),this._root},Qa.prototype.remove=function(){var st=this;if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),_t)&&this.remove(_t,this._root,xt)}if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2],Dt=this.removeItem(At,Ot);if(Dt)return!0;for(var Ft=null,jt=At.getChildBoundables().iterator();jt.hasNext();){var Gt=jt.next();if(st.getIntersectsOp().intersects(Gt.getBounds(),Et)&&Gt instanceof Ca&&(Dt=st.remove(Et,Gt,Ot))){Ft=Gt;break}}return Ft!==null&&Ft.getChildBoundables().isEmpty()&&At.getChildBoundables().remove(Ft),Dt}},Qa.prototype.createHigherLevels=function(st,_t){No.isTrue(!st.isEmpty());var xt=this.createParentBoundables(st,_t+1);return xt.size()===1?xt.get(0):this.createHigherLevels(xt,_t+1)},Qa.prototype.depth=function(){var st=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var _t=arguments[0],xt=0,Et=_t.getChildBoundables().iterator();Et.hasNext();){var At=Et.next();if(At instanceof Ca){var Ot=st.depth(At);Ot>xt&&(xt=Ot)}}return xt+1}},Qa.prototype.createParentBoundables=function(st,_t){var xt=this;No.isTrue(!st.isEmpty());var Et=new Ii;Et.add(this.createNode(_t));var At=new Ii(st);Ku.sort(At,this.getComparator());for(var Ot=At.iterator();Ot.hasNext();){var Dt=Ot.next();xt.lastNode(Et).getChildBoundables().size()===xt.getNodeCapacity()&&Et.add(xt.createNode(_t)),xt.lastNode(Et).addChildBoundable(Dt)}return Et},Qa.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Qa.prototype.interfaces_=function(){return[Cu]},Qa.prototype.getClass=function(){return Qa},Qa.compareDoubles=function(st,_t){return st>_t?1:st<_t?-1:0},fm.IntersectsOp.get=function(){return Iy},fm.serialVersionUID.get=function(){return-3886435814360241e3},fm.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Qa,fm);var Iy=function(){},np=function(){};np.prototype.distance=function(st,_t){},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var My=function(st){function _t(Et){Et=Et||_t.DEFAULT_NODE_CAPACITY,st.call(this,Et)}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return _t.prototype.createParentBoundablesFromVerticalSlices=function(Et,At){No.isTrue(Et.length>0);for(var Ot=new Ii,Dt=0;Dt<Et.length;Dt++)Ot.addAll(this.createParentBoundablesFromVerticalSlice(Et[Dt],At));return Ot},_t.prototype.createNode=function(Et){return new N0(Et)},_t.prototype.size=function(){return arguments.length===0?st.prototype.size.call(this):st.prototype.size.apply(this,arguments)},_t.prototype.insert=function(){if(arguments.length!==2)return st.prototype.insert.apply(this,arguments);var Et=arguments[0],At=arguments[1];if(Et.isNull())return null;st.prototype.insert.call(this,Et,At)},_t.prototype.getIntersectsOp=function(){return _t.intersectsOp},_t.prototype.verticalSlices=function(Et,At){for(var Ot=Math.trunc(Math.ceil(Et.size()/At)),Dt=new Array(At).fill(null),Ft=Et.iterator(),jt=0;jt<At;jt++){Dt[jt]=new Ii;for(var Gt=0;Ft.hasNext()&&Gt<Ot;){var Jt=Ft.next();Dt[jt].add(Jt),Gt++}}return Dt},_t.prototype.query=function(){if(arguments.length===1){var Et=arguments[0];return st.prototype.query.call(this,Et)}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];st.prototype.query.call(this,At,Ot)}else if(arguments.length===3){if(xo(arguments[2],zh)&&arguments[0]instanceof Object&&arguments[1]instanceof Ca){var Dt=arguments[0],Ft=arguments[1],jt=arguments[2];st.prototype.query.call(this,Dt,Ft,jt)}else if(xo(arguments[2],ju)&&arguments[0]instanceof Object&&arguments[1]instanceof Ca){var Gt=arguments[0],Jt=arguments[1],qt=arguments[2];st.prototype.query.call(this,Gt,Jt,qt)}}},_t.prototype.getComparator=function(){return _t.yComparator},_t.prototype.createParentBoundablesFromVerticalSlice=function(Et,At){return st.prototype.createParentBoundables.call(this,Et,At)},_t.prototype.remove=function(){if(arguments.length===2){var Et=arguments[0],At=arguments[1];return st.prototype.remove.call(this,Et,At)}return st.prototype.remove.apply(this,arguments)},_t.prototype.depth=function(){return arguments.length===0?st.prototype.depth.call(this):st.prototype.depth.apply(this,arguments)},_t.prototype.createParentBoundables=function(Et,At){No.isTrue(!Et.isEmpty());var Ot=Math.trunc(Math.ceil(Et.size()/this.getNodeCapacity())),Dt=new Ii(Et);Ku.sort(Dt,_t.xComparator);var Ft=this.verticalSlices(Dt,Math.trunc(Math.ceil(Math.sqrt(Ot))));return this.createParentBoundablesFromVerticalSlices(Ft,At)},_t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(xo(arguments[0],np)){var Et=arguments[0],At=new xa(this.getRoot(),this.getRoot(),Et);return this.nearestNeighbour(At)}if(arguments[0]instanceof xa){var Ot=arguments[0];return this.nearestNeighbour(Ot,Po.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof _t&&xo(arguments[1],np)){var Dt=arguments[0],Ft=arguments[1],jt=new xa(this.getRoot(),Dt.getRoot(),Ft);return this.nearestNeighbour(jt)}if(arguments[0]instanceof xa&&typeof arguments[1]=="number"){var Gt=arguments[0],Jt=arguments[1],qt=Jt,on=null,vn=new jc;for(vn.add(Gt);!vn.isEmpty()&&qt>0;){var _n=vn.poll(),En=_n.getDistance();if(En>=qt)break;_n.isLeaves()?(qt=En,on=_n):_n.expandToQueue(vn,qt)}return[on.getBoundable(0).getItem(),on.getBoundable(1).getItem()]}}else if(arguments.length===3){var cn=arguments[0],Hn=arguments[1],nr=arguments[2],bn=new Zu(cn,Hn),zn=new xa(this.getRoot(),bn,nr);return this.nearestNeighbour(zn)[0]}},_t.prototype.interfaces_=function(){return[of,Cu]},_t.prototype.getClass=function(){return _t},_t.centreX=function(Et){return _t.avg(Et.getMinX(),Et.getMaxX())},_t.avg=function(Et,At){return(Et+At)/2},_t.centreY=function(Et){return _t.avg(Et.getMinY(),Et.getMaxY())},xt.STRtreeNode.get=function(){return N0},xt.serialVersionUID.get=function(){return 0x39920f7d5f261e0},xt.xComparator.get=function(){return{interfaces_:function(){return[Uf]},compare:function(Et,At){return st.compareDoubles(_t.centreX(Et.getBounds()),_t.centreX(At.getBounds()))}}},xt.yComparator.get=function(){return{interfaces_:function(){return[Uf]},compare:function(Et,At){return st.compareDoubles(_t.centreY(Et.getBounds()),_t.centreY(At.getBounds()))}}},xt.intersectsOp.get=function(){return{interfaces_:function(){return[st.IntersectsOp]},intersects:function(Et,At){return Et.intersects(At)}}},xt.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_t,xt),_t}(Qa),N0=function(st){function _t(){var xt=arguments[0];st.call(this,xt)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.computeBounds=function(){for(var xt=null,Et=this.getChildBoundables().iterator();Et.hasNext();){var At=Et.next();xt===null?xt=new to(At.getBounds()):xt.expandToInclude(At.getBounds())}return xt},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ca),Hl=function(){};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.relativeSign=function(st,_t){return st<_t?-1:st>_t?1:0},Hl.compare=function(st,_t,xt){if(_t.equals2D(xt))return 0;var Et=Hl.relativeSign(_t.x,xt.x),At=Hl.relativeSign(_t.y,xt.y);switch(st){case 0:return Hl.compareValue(Et,At);case 1:return Hl.compareValue(At,Et);case 2:return Hl.compareValue(At,-Et);case 3:return Hl.compareValue(-Et,At);case 4:return Hl.compareValue(-Et,-At);case 5:return Hl.compareValue(-At,-Et);case 6:return Hl.compareValue(-At,Et);case 7:return Hl.compareValue(Et,-At)}return No.shouldNeverReachHere("invalid octant value"),0},Hl.compareValue=function(st,_t){return st<0?-1:st>0?1:_t<0?-1:_t>0?1:0};var Hh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=arguments[3];this._segString=st,this.coord=new Ur(_t),this.segmentIndex=xt,this._segmentOctant=Et,this._isInterior=!_t.equals2D(st.getCoordinate(xt))};Hh.prototype.getCoordinate=function(){return this.coord},Hh.prototype.print=function(st){st.print(this.coord),st.print(" seg # = "+this.segmentIndex)},Hh.prototype.compareTo=function(st){var _t=st;return this.segmentIndex<_t.segmentIndex?-1:this.segmentIndex>_t.segmentIndex?1:this.coord.equals2D(_t.coord)?0:Hl.compare(this._segmentOctant,this.coord,_t.coord)},Hh.prototype.isEndPoint=function(st){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===st},Hh.prototype.isInterior=function(){return this._isInterior},Hh.prototype.interfaces_=function(){return[Su]},Hh.prototype.getClass=function(){return Hh};var Ga=function(){this._nodeMap=new vl,this._edge=null;var st=arguments[0];this._edge=st};Ga.prototype.getSplitCoordinates=function(){var st=new Qp;this.addEndpoints();for(var _t=this.iterator(),xt=_t.next();_t.hasNext();){var Et=_t.next();this.addEdgeCoordinates(xt,Et,st),xt=Et}return st.toCoordinateArray()},Ga.prototype.addCollapsedNodes=function(){var st=new Ii;this.findCollapsesFromInsertedNodes(st),this.findCollapsesFromExistingVertices(st);for(var _t=st.iterator();_t.hasNext();){var xt=_t.next().intValue();this.add(this._edge.getCoordinate(xt),xt)}},Ga.prototype.print=function(st){st.println("Intersections:");for(var _t=this.iterator();_t.hasNext();)_t.next().print(st)},Ga.prototype.findCollapsesFromExistingVertices=function(st){for(var _t=0;_t<this._edge.size()-2;_t++){var xt=this._edge.getCoordinate(_t),Et=this._edge.getCoordinate(_t+2);xt.equals2D(Et)&&st.add(new cc(_t+1))}},Ga.prototype.addEdgeCoordinates=function(st,_t,xt){var Et=this._edge.getCoordinate(_t.segmentIndex),At=_t.isInterior()||!_t.coord.equals2D(Et);xt.add(new Ur(st.coord),!1);for(var Ot=st.segmentIndex+1;Ot<=_t.segmentIndex;Ot++)xt.add(this._edge.getCoordinate(Ot));At&&xt.add(new Ur(_t.coord))},Ga.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ga.prototype.addSplitEdges=function(st){this.addEndpoints(),this.addCollapsedNodes();for(var _t=this.iterator(),xt=_t.next();_t.hasNext();){var Et=_t.next(),At=this.createSplitEdge(xt,Et);st.add(At),xt=Et}},Ga.prototype.findCollapseIndex=function(st,_t,xt){if(!st.coord.equals2D(_t.coord))return!1;var Et=_t.segmentIndex-st.segmentIndex;return _t.isInterior()||Et--,Et===1&&(xt[0]=st.segmentIndex+1,!0)},Ga.prototype.findCollapsesFromInsertedNodes=function(st){for(var _t=new Array(1).fill(null),xt=this.iterator(),Et=xt.next();xt.hasNext();){var At=xt.next();this.findCollapseIndex(Et,At,_t)&&st.add(new cc(_t[0])),Et=At}},Ga.prototype.getEdge=function(){return this._edge},Ga.prototype.addEndpoints=function(){var st=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(st),st)},Ga.prototype.createSplitEdge=function(st,_t){var xt=_t.segmentIndex-st.segmentIndex+2,Et=this._edge.getCoordinate(_t.segmentIndex),At=_t.isInterior()||!_t.coord.equals2D(Et);At||xt--;var Ot=new Array(xt).fill(null),Dt=0;Ot[Dt++]=new Ur(st.coord);for(var Ft=st.segmentIndex+1;Ft<=_t.segmentIndex;Ft++)Ot[Dt++]=this._edge.getCoordinate(Ft);return At&&(Ot[Dt]=new Ur(_t.coord)),new ca(Ot,this._edge.getData())},Ga.prototype.add=function(st,_t){var xt=new Hh(this._edge,st,_t,this._edge.getSegmentOctant(_t)),Et=this._nodeMap.get(xt);return Et!==null?(No.isTrue(Et.coord.equals2D(st),"Found equal nodes with different coordinates"),Et):(this._nodeMap.put(xt,xt),xt)},Ga.prototype.checkSplitEdgesCorrectness=function(st){var _t=this._edge.getCoordinates(),xt=st.get(0).getCoordinate(0);if(!xt.equals2D(_t[0]))throw new hh("bad split edge start point at "+xt);var Et=st.get(st.size()-1).getCoordinates(),At=Et[Et.length-1];if(!At.equals2D(_t[_t.length-1]))throw new hh("bad split edge end point at "+At)},Ga.prototype.interfaces_=function(){return[]},Ga.prototype.getClass=function(){return Ga};var Ju=function(){};Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju},Ju.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var st=arguments[0],_t=arguments[1];if(st===0&&_t===0)throw new ra("Cannot compute the octant for point ( "+st+", "+_t+" )");var xt=Math.abs(st),Et=Math.abs(_t);return st>=0?_t>=0?xt>=Et?0:1:xt>=Et?7:6:_t>=0?xt>=Et?3:2:xt>=Et?4:5}if(arguments[0]instanceof Ur&&arguments[1]instanceof Ur){var At=arguments[0],Ot=arguments[1],Dt=Ot.x-At.x,Ft=Ot.y-At.y;if(Dt===0&&Ft===0)throw new ra("Cannot compute the octant for two identical points "+At);return Ju.octant(Dt,Ft)}};var Ma=function(){};Ma.prototype.getCoordinates=function(){},Ma.prototype.size=function(){},Ma.prototype.getCoordinate=function(st){},Ma.prototype.isClosed=function(){},Ma.prototype.setData=function(st){},Ma.prototype.getData=function(){},Ma.prototype.interfaces_=function(){return[]},Ma.prototype.getClass=function(){return Ma};var lg=function(){};lg.prototype.addIntersection=function(st,_t){},lg.prototype.interfaces_=function(){return[Ma]},lg.prototype.getClass=function(){return lg};var ca=function(){this._nodeList=new Ga(this),this._pts=null,this._data=null;var st=arguments[0],_t=arguments[1];this._pts=st,this._data=_t};ca.prototype.getCoordinates=function(){return this._pts},ca.prototype.size=function(){return this._pts.length},ca.prototype.getCoordinate=function(st){return this._pts[st]},ca.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ca.prototype.getSegmentOctant=function(st){return st===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(st),this.getCoordinate(st+1))},ca.prototype.setData=function(st){this._data=st},ca.prototype.safeOctant=function(st,_t){return st.equals2D(_t)?0:Ju.octant(st,_t)},ca.prototype.getData=function(){return this._data},ca.prototype.addIntersection=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1];this.addIntersectionNode(st,_t)}else if(arguments.length===4){var xt=arguments[0],Et=arguments[1],At=arguments[3],Ot=new Ur(xt.getIntersection(At));this.addIntersection(Ot,Et)}},ca.prototype.toString=function(){return Uu.toLineString(new va(this._pts))},ca.prototype.getNodeList=function(){return this._nodeList},ca.prototype.addIntersectionNode=function(st,_t){var xt=_t,Et=xt+1;if(Et<this._pts.length){var At=this._pts[Et];st.equals2D(At)&&(xt=Et)}return this._nodeList.add(st,xt)},ca.prototype.addIntersections=function(st,_t,xt){for(var Et=0;Et<st.getIntersectionNum();Et++)this.addIntersection(st,_t,xt,Et)},ca.prototype.interfaces_=function(){return[lg]},ca.prototype.getClass=function(){return ca},ca.getNodedSubstrings=function(){if(arguments.length===1){var st=arguments[0],_t=new Ii;return ca.getNodedSubstrings(st,_t),_t}if(arguments.length===2)for(var xt=arguments[0],Et=arguments[1],At=xt.iterator();At.hasNext();){var Ot=At.next();Ot.getNodeList().addSplitEdges(Et)}};var Qi=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Ur,this.p1=new Ur;else if(arguments.length===1){var st=arguments[0];this.p0=new Ur(st.p0),this.p1=new Ur(st.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var _t=arguments[0],xt=arguments[1],Et=arguments[2],At=arguments[3];this.p0=new Ur(_t,xt),this.p1=new Ur(Et,At)}},pm={serialVersionUID:{configurable:!0}};Qi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Qi.prototype.orientationIndex=function(){if(arguments[0]instanceof Qi){var st=arguments[0],_t=$i.orientationIndex(this.p0,this.p1,st.p0),xt=$i.orientationIndex(this.p0,this.p1,st.p1);return _t>=0&&xt>=0||_t<=0&&xt<=0?Math.max(_t,xt):0}if(arguments[0]instanceof Ur){var Et=arguments[0];return $i.orientationIndex(this.p0,this.p1,Et)}},Qi.prototype.toGeometry=function(st){return st.createLineString([this.p0,this.p1])},Qi.prototype.isVertical=function(){return this.p0.x===this.p1.x},Qi.prototype.equals=function(st){if(!(st instanceof Qi))return!1;var _t=st;return this.p0.equals(_t.p0)&&this.p1.equals(_t.p1)},Qi.prototype.intersection=function(st){var _t=new $h;return _t.computeIntersection(this.p0,this.p1,st.p0,st.p1),_t.hasIntersection()?_t.getIntersection(0):null},Qi.prototype.project=function(){if(arguments[0]instanceof Ur){var st=arguments[0];if(st.equals(this.p0)||st.equals(this.p1))return new Ur(st);var _t=this.projectionFactor(st),xt=new Ur;return xt.x=this.p0.x+_t*(this.p1.x-this.p0.x),xt.y=this.p0.y+_t*(this.p1.y-this.p0.y),xt}if(arguments[0]instanceof Qi){var Et=arguments[0],At=this.projectionFactor(Et.p0),Ot=this.projectionFactor(Et.p1);if(At>=1&&Ot>=1||At<=0&&Ot<=0)return null;var Dt=this.project(Et.p0);At<0&&(Dt=this.p0),At>1&&(Dt=this.p1);var Ft=this.project(Et.p1);return Ot<0&&(Ft=this.p0),Ot>1&&(Ft=this.p1),new Qi(Dt,Ft)}},Qi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Qi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Qi.prototype.getCoordinate=function(st){return st===0?this.p0:this.p1},Qi.prototype.distancePerpendicular=function(st){return $i.distancePointLinePerpendicular(st,this.p0,this.p1)},Qi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Qi.prototype.midPoint=function(){return Qi.midPoint(this.p0,this.p1)},Qi.prototype.projectionFactor=function(st){if(st.equals(this.p0))return 0;if(st.equals(this.p1))return 1;var _t=this.p1.x-this.p0.x,xt=this.p1.y-this.p0.y,Et=_t*_t+xt*xt;return Et<=0?Po.NaN:((st.x-this.p0.x)*_t+(st.y-this.p0.y)*xt)/Et},Qi.prototype.closestPoints=function(st){var _t=this.intersection(st);if(_t!==null)return[_t,_t];var xt=new Array(2).fill(null),Et=Po.MAX_VALUE,At=null,Ot=this.closestPoint(st.p0);Et=Ot.distance(st.p0),xt[0]=Ot,xt[1]=st.p0;var Dt=this.closestPoint(st.p1);(At=Dt.distance(st.p1))<Et&&(Et=At,xt[0]=Dt,xt[1]=st.p1);var Ft=st.closestPoint(this.p0);(At=Ft.distance(this.p0))<Et&&(Et=At,xt[0]=this.p0,xt[1]=Ft);var jt=st.closestPoint(this.p1);return(At=jt.distance(this.p1))<Et&&(Et=At,xt[0]=this.p1,xt[1]=jt),xt},Qi.prototype.closestPoint=function(st){var _t=this.projectionFactor(st);return _t>0&&_t<1?this.project(st):this.p0.distance(st)<this.p1.distance(st)?this.p0:this.p1},Qi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Qi.prototype.getLength=function(){return this.p0.distance(this.p1)},Qi.prototype.compareTo=function(st){var _t=st,xt=this.p0.compareTo(_t.p0);return xt!==0?xt:this.p1.compareTo(_t.p1)},Qi.prototype.reverse=function(){var st=this.p0;this.p0=this.p1,this.p1=st},Qi.prototype.equalsTopo=function(st){return this.p0.equals(st.p0)&&(this.p1.equals(st.p1)||this.p0.equals(st.p1))&&this.p1.equals(st.p0)},Qi.prototype.lineIntersection=function(st){try{return Tu.intersection(this.p0,this.p1,st.p0,st.p1)}catch(_t){if(!(_t instanceof Zd))throw _t}return null},Qi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Qi.prototype.pointAlongOffset=function(st,_t){var xt=this.p0.x+st*(this.p1.x-this.p0.x),Et=this.p0.y+st*(this.p1.y-this.p0.y),At=this.p1.x-this.p0.x,Ot=this.p1.y-this.p0.y,Dt=Math.sqrt(At*At+Ot*Ot),Ft=0,jt=0;if(_t!==0){if(Dt<=0)throw new Error("Cannot compute offset from zero-length line segment");Ft=_t*At/Dt,jt=_t*Ot/Dt}return new Ur(xt-jt,Et+Ft)},Qi.prototype.setCoordinates=function(){if(arguments.length===1){var st=arguments[0];this.setCoordinates(st.p0,st.p1)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this.p0.x=_t.x,this.p0.y=_t.y,this.p1.x=xt.x,this.p1.y=xt.y}},Qi.prototype.segmentFraction=function(st){var _t=this.projectionFactor(st);return _t<0?_t=0:(_t>1||Po.isNaN(_t))&&(_t=1),_t},Qi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Qi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Qi.prototype.distance=function(){if(arguments[0]instanceof Qi){var st=arguments[0];return $i.distanceLineLine(this.p0,this.p1,st.p0,st.p1)}if(arguments[0]instanceof Ur){var _t=arguments[0];return $i.distancePointLine(_t,this.p0,this.p1)}},Qi.prototype.pointAlong=function(st){var _t=new Ur;return _t.x=this.p0.x+st*(this.p1.x-this.p0.x),_t.y=this.p0.y+st*(this.p1.y-this.p0.y),_t},Qi.prototype.hashCode=function(){var st=Po.doubleToLongBits(this.p0.x);st^=31*Po.doubleToLongBits(this.p0.y);var _t=Math.trunc(st)^Math.trunc(st>>32),xt=Po.doubleToLongBits(this.p1.x);return xt^=31*Po.doubleToLongBits(this.p1.y),_t^(Math.trunc(xt)^Math.trunc(xt>>32))},Qi.prototype.interfaces_=function(){return[Su,Cu]},Qi.prototype.getClass=function(){return Qi},Qi.midPoint=function(st,_t){return new Ur((st.x+_t.x)/2,(st.y+_t.y)/2)},pm.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Qi,pm);var ug=function(){this.tempEnv1=new to,this.tempEnv2=new to,this._overlapSeg1=new Qi,this._overlapSeg2=new Qi};ug.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=arguments[3];st.getLineSegment(_t,this._overlapSeg1),xt.getLineSegment(Et,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},ug.prototype.interfaces_=function(){return[]},ug.prototype.getClass=function(){return ug};var Ql=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=arguments[3];this._pts=st,this._start=_t,this._end=xt,this._context=Et};Ql.prototype.getLineSegment=function(st,_t){_t.p0=this._pts[st],_t.p1=this._pts[st+1]},Ql.prototype.computeSelect=function(st,_t,xt,Et){var At=this._pts[_t],Ot=this._pts[xt];if(Et.tempEnv1.init(At,Ot),xt-_t==1)return Et.select(this,_t),null;if(!st.intersects(Et.tempEnv1))return null;var Dt=Math.trunc((_t+xt)/2);_t<Dt&&this.computeSelect(st,_t,Dt,Et),Dt<xt&&this.computeSelect(st,Dt,xt,Et)},Ql.prototype.getCoordinates=function(){for(var st=new Array(this._end-this._start+1).fill(null),_t=0,xt=this._start;xt<=this._end;xt++)st[_t++]=this._pts[xt];return st},Ql.prototype.computeOverlaps=function(st,_t){this.computeOverlapsInternal(this._start,this._end,st,st._start,st._end,_t)},Ql.prototype.setId=function(st){this._id=st},Ql.prototype.select=function(st,_t){this.computeSelect(st,this._start,this._end,_t)},Ql.prototype.getEnvelope=function(){if(this._env===null){var st=this._pts[this._start],_t=this._pts[this._end];this._env=new to(st,_t)}return this._env},Ql.prototype.getEndIndex=function(){return this._end},Ql.prototype.getStartIndex=function(){return this._start},Ql.prototype.getContext=function(){return this._context},Ql.prototype.getId=function(){return this._id},Ql.prototype.computeOverlapsInternal=function(st,_t,xt,Et,At,Ot){var Dt=this._pts[st],Ft=this._pts[_t],jt=xt._pts[Et],Gt=xt._pts[At];if(_t-st==1&&At-Et==1)return Ot.overlap(this,st,xt,Et),null;if(Ot.tempEnv1.init(Dt,Ft),Ot.tempEnv2.init(jt,Gt),!Ot.tempEnv1.intersects(Ot.tempEnv2))return null;var Jt=Math.trunc((st+_t)/2),qt=Math.trunc((Et+At)/2);st<Jt&&(Et<qt&&this.computeOverlapsInternal(st,Jt,xt,Et,qt,Ot),qt<At&&this.computeOverlapsInternal(st,Jt,xt,qt,At,Ot)),Jt<_t&&(Et<qt&&this.computeOverlapsInternal(Jt,_t,xt,Et,qt,Ot),qt<At&&this.computeOverlapsInternal(Jt,_t,xt,qt,At,Ot))},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var Ou=function(){};Ou.prototype.interfaces_=function(){return[]},Ou.prototype.getClass=function(){return Ou},Ou.getChainStartIndices=function(st){var _t=0,xt=new Ii;xt.add(new cc(_t));do{var Et=Ou.findChainEnd(st,_t);xt.add(new cc(Et)),_t=Et}while(_t<st.length-1);return Ou.toIntArray(xt)},Ou.findChainEnd=function(st,_t){for(var xt=_t;xt<st.length-1&&st[xt].equals2D(st[xt+1]);)xt++;if(xt>=st.length-1)return st.length-1;for(var Et=Hs.quadrant(st[xt],st[xt+1]),At=_t+1;At<st.length&&!(!st[At-1].equals2D(st[At])&&Hs.quadrant(st[At-1],st[At])!==Et);)At++;return At-1},Ou.getChains=function(){if(arguments.length===1){var st=arguments[0];return Ou.getChains(st,null)}if(arguments.length===2){for(var _t=arguments[0],xt=arguments[1],Et=new Ii,At=Ou.getChainStartIndices(_t),Ot=0;Ot<At.length-1;Ot++){var Dt=new Ql(_t,At[Ot],At[Ot+1],xt);Et.add(Dt)}return Et}},Ou.toIntArray=function(st){for(var _t=new Array(st.size()).fill(null),xt=0;xt<_t.length;xt++)_t[xt]=st.get(xt).intValue();return _t};var bd=function(){};bd.prototype.computeNodes=function(st){},bd.prototype.getNodedSubstrings=function(){},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var cg=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var st=arguments[0];this.setSegmentIntersector(st)}}};cg.prototype.setSegmentIntersector=function(st){this._segInt=st},cg.prototype.interfaces_=function(){return[bd]},cg.prototype.getClass=function(){return cg};var $0=function(st){function _t(Et){Et?st.call(this,Et):st.call(this),this._monoChains=new Ii,this._index=new My,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t;var xt={SegmentOverlapAction:{configurable:!0}};return _t.prototype.getMonotoneChains=function(){return this._monoChains},_t.prototype.getNodedSubstrings=function(){return ca.getNodedSubstrings(this._nodedSegStrings)},_t.prototype.getIndex=function(){return this._index},_t.prototype.add=function(Et){for(var At=this,Ot=Ou.getChains(Et.getCoordinates(),Et).iterator();Ot.hasNext();){var Dt=Ot.next();Dt.setId(At._idCounter++),At._index.insert(Dt.getEnvelope(),Dt),At._monoChains.add(Dt)}},_t.prototype.computeNodes=function(Et){this._nodedSegStrings=Et;for(var At=Et.iterator();At.hasNext();)this.add(At.next());this.intersectChains()},_t.prototype.intersectChains=function(){for(var Et=this,At=new gm(this._segInt),Ot=this._monoChains.iterator();Ot.hasNext();)for(var Dt=Ot.next(),Ft=Et._index.query(Dt.getEnvelope()).iterator();Ft.hasNext();){var jt=Ft.next();if(jt.getId()>Dt.getId()&&(Dt.computeOverlaps(jt,At),Et._nOverlaps++),Et._segInt.isDone())return null}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},xt.SegmentOverlapAction.get=function(){return gm},Object.defineProperties(_t,xt),_t}(cg),gm=function(st){function _t(){st.call(this),this._si=null;var xt=arguments[0];this._si=xt}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.overlap=function(){if(arguments.length!==4)return st.prototype.overlap.apply(this,arguments);var xt=arguments[0],Et=arguments[1],At=arguments[2],Ot=arguments[3],Dt=xt.getContext(),Ft=At.getContext();this._si.processIntersections(Dt,Et,Ft,Ot)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ug),$s=function st(){if(this._quadrantSegments=st.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=st.CAP_ROUND,this._joinStyle=st.JOIN_ROUND,this._mitreLimit=st.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=st.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var _t=arguments[0];this.setQuadrantSegments(_t)}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1];this.setQuadrantSegments(xt),this.setEndCapStyle(Et)}else if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],Ft=arguments[3];this.setQuadrantSegments(At),this.setEndCapStyle(Ot),this.setJoinStyle(Dt),this.setMitreLimit(Ft)}}},Qu={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};$s.prototype.getEndCapStyle=function(){return this._endCapStyle},$s.prototype.isSingleSided=function(){return this._isSingleSided},$s.prototype.setQuadrantSegments=function(st){this._quadrantSegments=st,this._quadrantSegments===0&&(this._joinStyle=$s.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=$s.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),st<=0&&(this._quadrantSegments=1),this._joinStyle!==$s.JOIN_ROUND&&(this._quadrantSegments=$s.DEFAULT_QUADRANT_SEGMENTS)},$s.prototype.getJoinStyle=function(){return this._joinStyle},$s.prototype.setJoinStyle=function(st){this._joinStyle=st},$s.prototype.setSimplifyFactor=function(st){this._simplifyFactor=st<0?0:st},$s.prototype.getSimplifyFactor=function(){return this._simplifyFactor},$s.prototype.getQuadrantSegments=function(){return this._quadrantSegments},$s.prototype.setEndCapStyle=function(st){this._endCapStyle=st},$s.prototype.getMitreLimit=function(){return this._mitreLimit},$s.prototype.setMitreLimit=function(st){this._mitreLimit=st},$s.prototype.setSingleSided=function(st){this._isSingleSided=st},$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s},$s.bufferDistanceError=function(st){var _t=Math.PI/2/st;return 1-Math.cos(_t/2)},Qu.CAP_ROUND.get=function(){return 1},Qu.CAP_FLAT.get=function(){return 2},Qu.CAP_SQUARE.get=function(){return 3},Qu.JOIN_ROUND.get=function(){return 1},Qu.JOIN_MITRE.get=function(){return 2},Qu.JOIN_BEVEL.get=function(){return 3},Qu.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Qu.DEFAULT_MITRE_LIMIT.get=function(){return 5},Qu.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties($s,Qu);var Ks=function(st){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=$i.COUNTERCLOCKWISE,this._inputLine=st||null},xd={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ks.prototype.isDeletable=function(st,_t,xt,Et){var At=this._inputLine[st],Ot=this._inputLine[_t],Dt=this._inputLine[xt];return!!this.isConcave(At,Ot,Dt)&&!!this.isShallow(At,Ot,Dt,Et)&&this.isShallowSampled(At,Ot,st,xt,Et)},Ks.prototype.deleteShallowConcavities=function(){for(var st=this,_t=1,xt=this.findNextNonDeletedIndex(_t),Et=this.findNextNonDeletedIndex(xt),At=!1;Et<this._inputLine.length;){var Ot=!1;st.isDeletable(_t,xt,Et,st._distanceTol)&&(st._isDeleted[xt]=Ks.DELETE,Ot=!0,At=!0),_t=Ot?Et:xt,xt=st.findNextNonDeletedIndex(_t),Et=st.findNextNonDeletedIndex(xt)}return At},Ks.prototype.isShallowConcavity=function(st,_t,xt,Et){return $i.computeOrientation(st,_t,xt)===this._angleOrientation&&$i.distancePointLine(_t,st,xt)<Et},Ks.prototype.isShallowSampled=function(st,_t,xt,Et,At){var Ot=Math.trunc((Et-xt)/Ks.NUM_PTS_TO_CHECK);Ot<=0&&(Ot=1);for(var Dt=xt;Dt<Et;Dt+=Ot)if(!this.isShallow(st,_t,this._inputLine[Dt],At))return!1;return!0},Ks.prototype.isConcave=function(st,_t,xt){var Et=$i.computeOrientation(st,_t,xt)===this._angleOrientation;return Et},Ks.prototype.simplify=function(st){this._distanceTol=Math.abs(st),st<0&&(this._angleOrientation=$i.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var _t=!1;do _t=this.deleteShallowConcavities();while(_t);return this.collapseLine()},Ks.prototype.findNextNonDeletedIndex=function(st){for(var _t=st+1;_t<this._inputLine.length&&this._isDeleted[_t]===Ks.DELETE;)_t++;return _t},Ks.prototype.isShallow=function(st,_t,xt,Et){return $i.distancePointLine(_t,st,xt)<Et},Ks.prototype.collapseLine=function(){for(var st=new Qp,_t=0;_t<this._inputLine.length;_t++)this._isDeleted[_t]!==Ks.DELETE&&st.add(this._inputLine[_t]);return st.toCoordinateArray()},Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks},Ks.simplify=function(st,_t){return new Ks(st).simplify(_t)},xd.INIT.get=function(){return 0},xd.DELETE.get=function(){return 1},xd.KEEP.get=function(){return 1},xd.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ks,xd);var uu=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ii},Ry={COORDINATE_ARRAY_TYPE:{configurable:!0}};uu.prototype.getCoordinates=function(){return this._ptList.toArray(uu.COORDINATE_ARRAY_TYPE)},uu.prototype.setPrecisionModel=function(st){this._precisionModel=st},uu.prototype.addPt=function(st){var _t=new Ur(st);if(this._precisionModel.makePrecise(_t),this.isRedundant(_t))return null;this._ptList.add(_t)},uu.prototype.revere=function(){},uu.prototype.addPts=function(st,_t){if(_t)for(var xt=0;xt<st.length;xt++)this.addPt(st[xt]);else for(var Et=st.length-1;Et>=0;Et--)this.addPt(st[Et])},uu.prototype.isRedundant=function(st){if(this._ptList.size()<1)return!1;var _t=this._ptList.get(this._ptList.size()-1);return st.distance(_t)<this._minimimVertexDistance},uu.prototype.toString=function(){return new Zo().createLineString(this.getCoordinates()).toString()},uu.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var st=new Ur(this._ptList.get(0)),_t=this._ptList.get(this._ptList.size()-1);if(st.equals(_t))return null;this._ptList.add(st)},uu.prototype.setMinimumVertexDistance=function(st){this._minimimVertexDistance=st},uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu},Ry.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(uu,Ry);var rs=function(){},sf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};rs.prototype.interfaces_=function(){return[]},rs.prototype.getClass=function(){return rs},rs.toDegrees=function(st){return 180*st/Math.PI},rs.normalize=function(st){for(;st>Math.PI;)st-=rs.PI_TIMES_2;for(;st<=-Math.PI;)st+=rs.PI_TIMES_2;return st},rs.angle=function(){if(arguments.length===1){var st=arguments[0];return Math.atan2(st.y,st.x)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1],Et=xt.x-_t.x,At=xt.y-_t.y;return Math.atan2(At,Et)}},rs.isAcute=function(st,_t,xt){var Et=st.x-_t.x,At=st.y-_t.y;return Et*(xt.x-_t.x)+At*(xt.y-_t.y)>0},rs.isObtuse=function(st,_t,xt){var Et=st.x-_t.x,At=st.y-_t.y;return Et*(xt.x-_t.x)+At*(xt.y-_t.y)<0},rs.interiorAngle=function(st,_t,xt){var Et=rs.angle(_t,st),At=rs.angle(_t,xt);return Math.abs(At-Et)},rs.normalizePositive=function(st){if(st<0){for(;st<0;)st+=rs.PI_TIMES_2;st>=rs.PI_TIMES_2&&(st=0)}else{for(;st>=rs.PI_TIMES_2;)st-=rs.PI_TIMES_2;st<0&&(st=0)}return st},rs.angleBetween=function(st,_t,xt){var Et=rs.angle(_t,st),At=rs.angle(_t,xt);return rs.diff(Et,At)},rs.diff=function(st,_t){var xt=null;return(xt=st<_t?_t-st:st-_t)>Math.PI&&(xt=2*Math.PI-xt),xt},rs.toRadians=function(st){return st*Math.PI/180},rs.getTurn=function(st,_t){var xt=Math.sin(_t-st);return xt>0?rs.COUNTERCLOCKWISE:xt<0?rs.CLOCKWISE:rs.NONE},rs.angleBetweenOriented=function(st,_t,xt){var Et=rs.angle(_t,st),At=rs.angle(_t,xt)-Et;return At<=-Math.PI?At+rs.PI_TIMES_2:At>Math.PI?At-rs.PI_TIMES_2:At},sf.PI_TIMES_2.get=function(){return 2*Math.PI},sf.PI_OVER_2.get=function(){return Math.PI/2},sf.PI_OVER_4.get=function(){return Math.PI/4},sf.COUNTERCLOCKWISE.get=function(){return $i.COUNTERCLOCKWISE},sf.CLOCKWISE.get=function(){return $i.CLOCKWISE},sf.NONE.get=function(){return $i.COLLINEAR},Object.defineProperties(rs,sf);var ta=function st(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Qi,this._seg1=new Qi,this._offset0=new Qi,this._offset1=new Qi,this._side=0,this._hasNarrowConcaveAngle=!1;var _t=arguments[0],xt=arguments[1],Et=arguments[2];this._precisionModel=_t,this._bufParams=xt,this._li=new $h,this._filletAngleQuantum=Math.PI/2/xt.getQuadrantSegments(),xt.getQuadrantSegments()>=8&&xt.getJoinStyle()===$s.JOIN_ROUND&&(this._closingSegLengthFactor=st.MAX_CLOSING_SEG_LEN_FACTOR),this.init(Et)},rp={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ta.prototype.addNextSegment=function(st,_t){if(this._s0=this._s1,this._s1=this._s2,this._s2=st,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var xt=$i.computeOrientation(this._s0,this._s1,this._s2),Et=xt===$i.CLOCKWISE&&this._side===Si.LEFT||xt===$i.COUNTERCLOCKWISE&&this._side===Si.RIGHT;xt===0?this.addCollinear(_t):Et?this.addOutsideTurn(xt,_t):this.addInsideTurn(xt,_t)},ta.prototype.addLineEndCap=function(st,_t){var xt=new Qi(st,_t),Et=new Qi;this.computeOffsetSegment(xt,Si.LEFT,this._distance,Et);var At=new Qi;this.computeOffsetSegment(xt,Si.RIGHT,this._distance,At);var Ot=_t.x-st.x,Dt=_t.y-st.y,Ft=Math.atan2(Dt,Ot);switch(this._bufParams.getEndCapStyle()){case $s.CAP_ROUND:this._segList.addPt(Et.p1),this.addFilletArc(_t,Ft+Math.PI/2,Ft-Math.PI/2,$i.CLOCKWISE,this._distance),this._segList.addPt(At.p1);break;case $s.CAP_FLAT:this._segList.addPt(Et.p1),this._segList.addPt(At.p1);break;case $s.CAP_SQUARE:var jt=new Ur;jt.x=Math.abs(this._distance)*Math.cos(Ft),jt.y=Math.abs(this._distance)*Math.sin(Ft);var Gt=new Ur(Et.p1.x+jt.x,Et.p1.y+jt.y),Jt=new Ur(At.p1.x+jt.x,At.p1.y+jt.y);this._segList.addPt(Gt),this._segList.addPt(Jt)}},ta.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ta.prototype.addMitreJoin=function(st,_t,xt,Et){var At=!0,Ot=null;try{Ot=Tu.intersection(_t.p0,_t.p1,xt.p0,xt.p1),(Et<=0?1:Ot.distance(st)/Math.abs(Et))>this._bufParams.getMitreLimit()&&(At=!1)}catch(Dt){if(!(Dt instanceof Zd))throw Dt;Ot=new Ur(0,0),At=!1}At?this._segList.addPt(Ot):this.addLimitedMitreJoin(_t,xt,Et,this._bufParams.getMitreLimit())},ta.prototype.addFilletCorner=function(st,_t,xt,Et,At){var Ot=_t.x-st.x,Dt=_t.y-st.y,Ft=Math.atan2(Dt,Ot),jt=xt.x-st.x,Gt=xt.y-st.y,Jt=Math.atan2(Gt,jt);Et===$i.CLOCKWISE?Ft<=Jt&&(Ft+=2*Math.PI):Ft>=Jt&&(Ft-=2*Math.PI),this._segList.addPt(_t),this.addFilletArc(st,Ft,Jt,Et,At),this._segList.addPt(xt)},ta.prototype.addOutsideTurn=function(st,_t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ta.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===$s.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===$s.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(_t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st,this._distance),this._segList.addPt(this._offset1.p0))},ta.prototype.createSquare=function(st){this._segList.addPt(new Ur(st.x+this._distance,st.y+this._distance)),this._segList.addPt(new Ur(st.x+this._distance,st.y-this._distance)),this._segList.addPt(new Ur(st.x-this._distance,st.y-this._distance)),this._segList.addPt(new Ur(st.x-this._distance,st.y+this._distance)),this._segList.closeRing()},ta.prototype.addSegments=function(st,_t){this._segList.addPts(st,_t)},ta.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ta.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ta.prototype.initSideSegments=function(st,_t,xt){this._s1=st,this._s2=_t,this._side=xt,this._seg1.setCoordinates(st,_t),this.computeOffsetSegment(this._seg1,xt,this._distance,this._offset1)},ta.prototype.addLimitedMitreJoin=function(st,_t,xt,Et){var At=this._seg0.p1,Ot=rs.angle(At,this._seg0.p0),Dt=rs.angleBetweenOriented(this._seg0.p0,At,this._seg1.p1)/2,Ft=rs.normalize(Ot+Dt),jt=rs.normalize(Ft+Math.PI),Gt=Et*xt,Jt=xt-Gt*Math.abs(Math.sin(Dt)),qt=At.x+Gt*Math.cos(jt),on=At.y+Gt*Math.sin(jt),vn=new Ur(qt,on),_n=new Qi(At,vn),En=_n.pointAlongOffset(1,Jt),cn=_n.pointAlongOffset(1,-Jt);this._side===Si.LEFT?(this._segList.addPt(En),this._segList.addPt(cn)):(this._segList.addPt(cn),this._segList.addPt(En))},ta.prototype.computeOffsetSegment=function(st,_t,xt,Et){var At=_t===Si.LEFT?1:-1,Ot=st.p1.x-st.p0.x,Dt=st.p1.y-st.p0.y,Ft=Math.sqrt(Ot*Ot+Dt*Dt),jt=At*xt*Ot/Ft,Gt=At*xt*Dt/Ft;Et.p0.x=st.p0.x-Gt,Et.p0.y=st.p0.y+jt,Et.p1.x=st.p1.x-Gt,Et.p1.y=st.p1.y+jt},ta.prototype.addFilletArc=function(st,_t,xt,Et,At){var Ot=Et===$i.CLOCKWISE?-1:1,Dt=Math.abs(_t-xt),Ft=Math.trunc(Dt/this._filletAngleQuantum+.5);if(Ft<1)return null;for(var jt=Dt/Ft,Gt=0,Jt=new Ur;Gt<Dt;){var qt=_t+Ot*Gt;Jt.x=st.x+At*Math.cos(qt),Jt.y=st.y+At*Math.sin(qt),this._segList.addPt(Jt),Gt+=jt}},ta.prototype.addInsideTurn=function(st,_t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ta.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var xt=new Ur((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(xt);var Et=new Ur((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(Et)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ta.prototype.createCircle=function(st){var _t=new Ur(st.x+this._distance,st.y);this._segList.addPt(_t),this.addFilletArc(st,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ta.prototype.addBevelJoin=function(st,_t){this._segList.addPt(st.p1),this._segList.addPt(_t.p0)},ta.prototype.init=function(st){this._distance=st,this._maxCurveSegmentError=st*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new uu,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(st*ta.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ta.prototype.addCollinear=function(st){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===$s.JOIN_BEVEL||this._bufParams.getJoinStyle()===$s.JOIN_MITRE?(st&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,$i.CLOCKWISE,this._distance))},ta.prototype.closeRing=function(){this._segList.closeRing()},ta.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ta.prototype.interfaces_=function(){return[]},ta.prototype.getClass=function(){return ta},rp.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},rp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},rp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},rp.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ta,rp);var ro=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var st=arguments[0],_t=arguments[1];this._precisionModel=st,this._bufParams=_t};ro.prototype.getOffsetCurve=function(st,_t){if(this._distance=_t,_t===0)return null;var xt=_t<0,Et=Math.abs(_t),At=this.getSegGen(Et);st.length<=1?this.computePointCurve(st[0],At):this.computeOffsetCurve(st,xt,At);var Ot=At.getCoordinates();return xt&&Xo.reverse(Ot),Ot},ro.prototype.computeSingleSidedBufferCurve=function(st,_t,xt){var Et=this.simplifyTolerance(this._distance);if(_t){xt.addSegments(st,!0);var At=Ks.simplify(st,-Et),Ot=At.length-1;xt.initSideSegments(At[Ot],At[Ot-1],Si.LEFT),xt.addFirstSegment();for(var Dt=Ot-2;Dt>=0;Dt--)xt.addNextSegment(At[Dt],!0)}else{xt.addSegments(st,!1);var Ft=Ks.simplify(st,Et),jt=Ft.length-1;xt.initSideSegments(Ft[0],Ft[1],Si.LEFT),xt.addFirstSegment();for(var Gt=2;Gt<=jt;Gt++)xt.addNextSegment(Ft[Gt],!0)}xt.addLastSegment(),xt.closeRing()},ro.prototype.computeRingBufferCurve=function(st,_t,xt){var Et=this.simplifyTolerance(this._distance);_t===Si.RIGHT&&(Et=-Et);var At=Ks.simplify(st,Et),Ot=At.length-1;xt.initSideSegments(At[Ot-1],At[0],_t);for(var Dt=1;Dt<=Ot;Dt++){var Ft=Dt!==1;xt.addNextSegment(At[Dt],Ft)}xt.closeRing()},ro.prototype.computeLineBufferCurve=function(st,_t){var xt=this.simplifyTolerance(this._distance),Et=Ks.simplify(st,xt),At=Et.length-1;_t.initSideSegments(Et[0],Et[1],Si.LEFT);for(var Ot=2;Ot<=At;Ot++)_t.addNextSegment(Et[Ot],!0);_t.addLastSegment(),_t.addLineEndCap(Et[At-1],Et[At]);var Dt=Ks.simplify(st,-xt),Ft=Dt.length-1;_t.initSideSegments(Dt[Ft],Dt[Ft-1],Si.LEFT);for(var jt=Ft-2;jt>=0;jt--)_t.addNextSegment(Dt[jt],!0);_t.addLastSegment(),_t.addLineEndCap(Dt[1],Dt[0]),_t.closeRing()},ro.prototype.computePointCurve=function(st,_t){switch(this._bufParams.getEndCapStyle()){case $s.CAP_ROUND:_t.createCircle(st);break;case $s.CAP_SQUARE:_t.createSquare(st)}},ro.prototype.getLineCurve=function(st,_t){if(this._distance=_t,_t<0&&!this._bufParams.isSingleSided()||_t===0)return null;var xt=Math.abs(_t),Et=this.getSegGen(xt);if(st.length<=1)this.computePointCurve(st[0],Et);else if(this._bufParams.isSingleSided()){var At=_t<0;this.computeSingleSidedBufferCurve(st,At,Et)}else this.computeLineBufferCurve(st,Et);return Et.getCoordinates()},ro.prototype.getBufferParameters=function(){return this._bufParams},ro.prototype.simplifyTolerance=function(st){return st*this._bufParams.getSimplifyFactor()},ro.prototype.getRingCurve=function(st,_t,xt){if(this._distance=xt,st.length<=2)return this.getLineCurve(st,xt);if(xt===0)return ro.copyCoordinates(st);var Et=this.getSegGen(xt);return this.computeRingBufferCurve(st,_t,Et),Et.getCoordinates()},ro.prototype.computeOffsetCurve=function(st,_t,xt){var Et=this.simplifyTolerance(this._distance);if(_t){var At=Ks.simplify(st,-Et),Ot=At.length-1;xt.initSideSegments(At[Ot],At[Ot-1],Si.LEFT),xt.addFirstSegment();for(var Dt=Ot-2;Dt>=0;Dt--)xt.addNextSegment(At[Dt],!0)}else{var Ft=Ks.simplify(st,Et),jt=Ft.length-1;xt.initSideSegments(Ft[0],Ft[1],Si.LEFT),xt.addFirstSegment();for(var Gt=2;Gt<=jt;Gt++)xt.addNextSegment(Ft[Gt],!0)}xt.addLastSegment()},ro.prototype.getSegGen=function(st){return new ta(this._precisionModel,this._bufParams,st)},ro.prototype.interfaces_=function(){return[]},ro.prototype.getClass=function(){return ro},ro.copyCoordinates=function(st){for(var _t=new Array(st.length).fill(null),xt=0;xt<_t.length;xt++)_t[xt]=new Ur(st[xt]);return _t};var af=function(){this._subgraphs=null,this._seg=new Qi,this._cga=new $i;var st=arguments[0];this._subgraphs=st},Dy={DepthSegment:{configurable:!0}};af.prototype.findStabbedSegments=function(){var st=this;if(arguments.length===1){for(var _t=arguments[0],xt=new Ii,Et=this._subgraphs.iterator();Et.hasNext();){var At=Et.next(),Ot=At.getEnvelope();_t.y<Ot.getMinY()||_t.y>Ot.getMaxY()||st.findStabbedSegments(_t,At.getDirectedEdges(),xt)}return xt}if(arguments.length===3){if(xo(arguments[2],ju)&&arguments[0]instanceof Ur&&arguments[1]instanceof dm)for(var Dt=arguments[0],Ft=arguments[1],jt=arguments[2],Gt=Ft.getEdge().getCoordinates(),Jt=0;Jt<Gt.length-1;Jt++){st._seg.p0=Gt[Jt],st._seg.p1=Gt[Jt+1],st._seg.p0.y>st._seg.p1.y&&st._seg.reverse();var qt=Math.max(st._seg.p0.x,st._seg.p1.x);if(!(qt<Dt.x)&&!(st._seg.isHorizontal()||Dt.y<st._seg.p0.y||Dt.y>st._seg.p1.y||$i.computeOrientation(st._seg.p0,st._seg.p1,Dt)===$i.RIGHT)){var on=Ft.getDepth(Si.LEFT);st._seg.p0.equals(Gt[Jt])||(on=Ft.getDepth(Si.RIGHT));var vn=new wd(st._seg,on);jt.add(vn)}}else if(xo(arguments[2],ju)&&arguments[0]instanceof Ur&&xo(arguments[1],ju))for(var _n=arguments[0],En=arguments[1],cn=arguments[2],Hn=En.iterator();Hn.hasNext();){var nr=Hn.next();nr.isForward()&&st.findStabbedSegments(_n,nr,cn)}}},af.prototype.getDepth=function(st){var _t=this.findStabbedSegments(st);return _t.size()===0?0:Ku.min(_t)._leftDepth},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},Dy.DepthSegment.get=function(){return wd},Object.defineProperties(af,Dy);var wd=function(){this._upwardSeg=null,this._leftDepth=null;var st=arguments[0],_t=arguments[1];this._upwardSeg=new Qi(st),this._leftDepth=_t};wd.prototype.compareTo=function(st){var _t=st;if(this._upwardSeg.minX()>=_t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=_t._upwardSeg.minX())return-1;var xt=this._upwardSeg.orientationIndex(_t._upwardSeg);return xt!==0||(xt=-1*_t._upwardSeg.orientationIndex(this._upwardSeg))!==0?xt:this._upwardSeg.compareTo(_t._upwardSeg)},wd.prototype.compareX=function(st,_t){var xt=st.p0.compareTo(_t.p0);return xt!==0?xt:st.p1.compareTo(_t.p1)},wd.prototype.toString=function(){return this._upwardSeg.toString()},wd.prototype.interfaces_=function(){return[Su]},wd.prototype.getClass=function(){return wd};var Lo=function(st,_t,xt){this.p0=st||null,this.p1=_t||null,this.p2=xt||null};Lo.prototype.area=function(){return Lo.area(this.p0,this.p1,this.p2)},Lo.prototype.signedArea=function(){return Lo.signedArea(this.p0,this.p1,this.p2)},Lo.prototype.interpolateZ=function(st){if(st===null)throw new ra("Supplied point is null.");return Lo.interpolateZ(st,this.p0,this.p1,this.p2)},Lo.prototype.longestSideLength=function(){return Lo.longestSideLength(this.p0,this.p1,this.p2)},Lo.prototype.isAcute=function(){return Lo.isAcute(this.p0,this.p1,this.p2)},Lo.prototype.circumcentre=function(){return Lo.circumcentre(this.p0,this.p1,this.p2)},Lo.prototype.area3D=function(){return Lo.area3D(this.p0,this.p1,this.p2)},Lo.prototype.centroid=function(){return Lo.centroid(this.p0,this.p1,this.p2)},Lo.prototype.inCentre=function(){return Lo.inCentre(this.p0,this.p1,this.p2)},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo.area=function(st,_t,xt){return Math.abs(((xt.x-st.x)*(_t.y-st.y)-(_t.x-st.x)*(xt.y-st.y))/2)},Lo.signedArea=function(st,_t,xt){return((xt.x-st.x)*(_t.y-st.y)-(_t.x-st.x)*(xt.y-st.y))/2},Lo.det=function(st,_t,xt,Et){return st*Et-_t*xt},Lo.interpolateZ=function(st,_t,xt,Et){var At=_t.x,Ot=_t.y,Dt=xt.x-At,Ft=Et.x-At,jt=xt.y-Ot,Gt=Et.y-Ot,Jt=Dt*Gt-Ft*jt,qt=st.x-At,on=st.y-Ot,vn=(Gt*qt-Ft*on)/Jt,_n=(-jt*qt+Dt*on)/Jt;return _t.z+vn*(xt.z-_t.z)+_n*(Et.z-_t.z)},Lo.longestSideLength=function(st,_t,xt){var Et=st.distance(_t),At=_t.distance(xt),Ot=xt.distance(st),Dt=Et;return At>Dt&&(Dt=At),Ot>Dt&&(Dt=Ot),Dt},Lo.isAcute=function(st,_t,xt){return!!rs.isAcute(st,_t,xt)&&!!rs.isAcute(_t,xt,st)&&!!rs.isAcute(xt,st,_t)},Lo.circumcentre=function(st,_t,xt){var Et=xt.x,At=xt.y,Ot=st.x-Et,Dt=st.y-At,Ft=_t.x-Et,jt=_t.y-At,Gt=2*Lo.det(Ot,Dt,Ft,jt),Jt=Lo.det(Dt,Ot*Ot+Dt*Dt,jt,Ft*Ft+jt*jt),qt=Lo.det(Ot,Ot*Ot+Dt*Dt,Ft,Ft*Ft+jt*jt);return new Ur(Et-Jt/Gt,At+qt/Gt)},Lo.perpendicularBisector=function(st,_t){var xt=_t.x-st.x,Et=_t.y-st.y,At=new Tu(st.x+xt/2,st.y+Et/2,1),Ot=new Tu(st.x-Et+xt/2,st.y+xt+Et/2,1);return new Tu(At,Ot)},Lo.angleBisector=function(st,_t,xt){var Et=_t.distance(st),At=Et/(Et+_t.distance(xt)),Ot=xt.x-st.x,Dt=xt.y-st.y;return new Ur(st.x+At*Ot,st.y+At*Dt)},Lo.area3D=function(st,_t,xt){var Et=_t.x-st.x,At=_t.y-st.y,Ot=_t.z-st.z,Dt=xt.x-st.x,Ft=xt.y-st.y,jt=xt.z-st.z,Gt=At*jt-Ot*Ft,Jt=Ot*Dt-Et*jt,qt=Et*Ft-At*Dt,on=Gt*Gt+Jt*Jt+qt*qt,vn=Math.sqrt(on)/2;return vn},Lo.centroid=function(st,_t,xt){var Et=(st.x+_t.x+xt.x)/3,At=(st.y+_t.y+xt.y)/3;return new Ur(Et,At)},Lo.inCentre=function(st,_t,xt){var Et=_t.distance(xt),At=st.distance(xt),Ot=st.distance(_t),Dt=Et+At+Ot,Ft=(Et*st.x+At*_t.x+Ot*xt.x)/Dt,jt=(Et*st.y+At*_t.y+Ot*xt.y)/Dt;return new Ur(Ft,jt)};var Vl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ii;var st=arguments[0],_t=arguments[1],xt=arguments[2];this._inputGeom=st,this._distance=_t,this._curveBuilder=xt};Vl.prototype.addPoint=function(st){if(this._distance<=0)return null;var _t=st.getCoordinates(),xt=this._curveBuilder.getLineCurve(_t,this._distance);this.addCurve(xt,Zr.EXTERIOR,Zr.INTERIOR)},Vl.prototype.addPolygon=function(st){var _t=this,xt=this._distance,Et=Si.LEFT;this._distance<0&&(xt=-this._distance,Et=Si.RIGHT);var At=st.getExteriorRing(),Ot=Xo.removeRepeatedPoints(At.getCoordinates());if(this._distance<0&&this.isErodedCompletely(At,this._distance)||this._distance<=0&&Ot.length<3)return null;this.addPolygonRing(Ot,xt,Et,Zr.EXTERIOR,Zr.INTERIOR);for(var Dt=0;Dt<st.getNumInteriorRing();Dt++){var Ft=st.getInteriorRingN(Dt),jt=Xo.removeRepeatedPoints(Ft.getCoordinates());_t._distance>0&&_t.isErodedCompletely(Ft,-_t._distance)||_t.addPolygonRing(jt,xt,Si.opposite(Et),Zr.INTERIOR,Zr.EXTERIOR)}},Vl.prototype.isTriangleErodedCompletely=function(st,_t){var xt=new Lo(st[0],st[1],st[2]),Et=xt.inCentre();return $i.distancePointLine(Et,xt.p0,xt.p1)<Math.abs(_t)},Vl.prototype.addLineString=function(st){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var _t=Xo.removeRepeatedPoints(st.getCoordinates()),xt=this._curveBuilder.getLineCurve(_t,this._distance);this.addCurve(xt,Zr.EXTERIOR,Zr.INTERIOR)},Vl.prototype.addCurve=function(st,_t,xt){if(st===null||st.length<2)return null;var Et=new ca(st,new zs(0,Zr.BOUNDARY,_t,xt));this._curveList.add(Et)},Vl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Vl.prototype.addPolygonRing=function(st,_t,xt,Et,At){if(_t===0&&st.length<Hc.MINIMUM_VALID_SIZE)return null;var Ot=Et,Dt=At;st.length>=Hc.MINIMUM_VALID_SIZE&&$i.isCCW(st)&&(Ot=At,Dt=Et,xt=Si.opposite(xt));var Ft=this._curveBuilder.getRingCurve(st,xt,_t);this.addCurve(Ft,Ot,Dt)},Vl.prototype.add=function(st){if(st.isEmpty())return null;st instanceof Ia?this.addPolygon(st):st instanceof ia?this.addLineString(st):st instanceof Kl?this.addPoint(st):(st instanceof Qf||st instanceof Bh||st instanceof Vc||st instanceof Al)&&this.addCollection(st)},Vl.prototype.isErodedCompletely=function(st,_t){var xt=st.getCoordinates();if(xt.length<4)return _t<0;if(xt.length===4)return this.isTriangleErodedCompletely(xt,_t);var Et=st.getEnvelopeInternal(),At=Math.min(Et.getHeight(),Et.getWidth());return _t<0&&2*Math.abs(_t)>At},Vl.prototype.addCollection=function(st){for(var _t=0;_t<st.getNumGeometries();_t++){var xt=st.getGeometryN(_t);this.add(xt)}},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var Fs=function(){};Fs.prototype.locate=function(st){},Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs};var yc=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var st=arguments[0];this._parent=st,this._atStart=!0,this._index=0,this._max=st.getNumGeometries()};yc.prototype.next=function(){if(this._atStart)return this._atStart=!1,yc.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new tf;var st=this._parent.getGeometryN(this._index++);return st instanceof Al?(this._subcollectionIterator=new yc(st),this._subcollectionIterator.next()):st},yc.prototype.remove=function(){throw new Error(this.getClass().getName())},yc.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},yc.prototype.interfaces_=function(){return[Xf]},yc.prototype.getClass=function(){return yc},yc.isAtomic=function(st){return!(st instanceof Al)};var Ul=function(){this._geom=null;var st=arguments[0];this._geom=st};Ul.prototype.locate=function(st){return Ul.locate(st,this._geom)},Ul.prototype.interfaces_=function(){return[Fs]},Ul.prototype.getClass=function(){return Ul},Ul.isPointInRing=function(st,_t){return!!_t.getEnvelopeInternal().intersects(st)&&$i.isPointInRing(st,_t.getCoordinates())},Ul.containsPointInPolygon=function(st,_t){if(_t.isEmpty())return!1;var xt=_t.getExteriorRing();if(!Ul.isPointInRing(st,xt))return!1;for(var Et=0;Et<_t.getNumInteriorRing();Et++){var At=_t.getInteriorRingN(Et);if(Ul.isPointInRing(st,At))return!1}return!0},Ul.containsPoint=function(st,_t){if(_t instanceof Ia)return Ul.containsPointInPolygon(st,_t);if(_t instanceof Al)for(var xt=new yc(_t);xt.hasNext();){var Et=xt.next();if(Et!==_t&&Ul.containsPoint(st,Et))return!0}return!1},Ul.locate=function(st,_t){return _t.isEmpty()?Zr.EXTERIOR:Ul.containsPoint(st,_t)?Zr.INTERIOR:Zr.EXTERIOR};var el=function(){this._edgeMap=new vl,this._edgeList=null,this._ptInAreaLocation=[Zr.NONE,Zr.NONE]};el.prototype.getNextCW=function(st){this.getEdges();var _t=this._edgeList.indexOf(st),xt=_t-1;return _t===0&&(xt=this._edgeList.size()-1),this._edgeList.get(xt)},el.prototype.propagateSideLabels=function(st){for(var _t=Zr.NONE,xt=this.iterator();xt.hasNext();){var Et=xt.next().getLabel();Et.isArea(st)&&Et.getLocation(st,Si.LEFT)!==Zr.NONE&&(_t=Et.getLocation(st,Si.LEFT))}if(_t===Zr.NONE)return null;for(var At=_t,Ot=this.iterator();Ot.hasNext();){var Dt=Ot.next(),Ft=Dt.getLabel();if(Ft.getLocation(st,Si.ON)===Zr.NONE&&Ft.setLocation(st,Si.ON,At),Ft.isArea(st)){var jt=Ft.getLocation(st,Si.LEFT),Gt=Ft.getLocation(st,Si.RIGHT);if(Gt!==Zr.NONE){if(Gt!==At)throw new ph("side location conflict",Dt.getCoordinate());jt===Zr.NONE&&No.shouldNeverReachHere("found single null side (at "+Dt.getCoordinate()+")"),At=jt}else No.isTrue(Ft.getLocation(st,Si.LEFT)===Zr.NONE,"found single null side"),Ft.setLocation(st,Si.RIGHT,At),Ft.setLocation(st,Si.LEFT,At)}}},el.prototype.getCoordinate=function(){var st=this.iterator();return st.hasNext()?st.next().getCoordinate():null},el.prototype.print=function(st){ul.out.println("EdgeEndStar:   "+this.getCoordinate());for(var _t=this.iterator();_t.hasNext();)_t.next().print(st)},el.prototype.isAreaLabelsConsistent=function(st){return this.computeEdgeEndLabels(st.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},el.prototype.checkAreaLabelsConsistent=function(st){var _t=this.getEdges();if(_t.size()<=0)return!0;var xt=_t.size()-1,Et=_t.get(xt).getLabel().getLocation(st,Si.LEFT);No.isTrue(Et!==Zr.NONE,"Found unlabelled area edge");for(var At=Et,Ot=this.iterator();Ot.hasNext();){var Dt=Ot.next().getLabel();No.isTrue(Dt.isArea(st),"Found non-area edge");var Ft=Dt.getLocation(st,Si.LEFT),jt=Dt.getLocation(st,Si.RIGHT);if(Ft===jt||jt!==At)return!1;At=Ft}return!0},el.prototype.findIndex=function(st){this.iterator();for(var _t=0;_t<this._edgeList.size();_t++)if(this._edgeList.get(_t)===st)return _t;return-1},el.prototype.iterator=function(){return this.getEdges().iterator()},el.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Ii(this._edgeMap.values())),this._edgeList},el.prototype.getLocation=function(st,_t,xt){return this._ptInAreaLocation[st]===Zr.NONE&&(this._ptInAreaLocation[st]=Ul.locate(_t,xt[st].getGeometry())),this._ptInAreaLocation[st]},el.prototype.toString=function(){var st=new uc;st.append("EdgeEndStar:   "+this.getCoordinate()),st.append(`
`);for(var _t=this.iterator();_t.hasNext();){var xt=_t.next();st.append(xt),st.append(`
`)}return st.toString()},el.prototype.computeEdgeEndLabels=function(st){for(var _t=this.iterator();_t.hasNext();)_t.next().computeLabel(st)},el.prototype.computeLabelling=function(st){this.computeEdgeEndLabels(st[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var _t=[!1,!1],xt=this.iterator();xt.hasNext();)for(var Et=xt.next().getLabel(),At=0;At<2;At++)Et.isLine(At)&&Et.getLocation(At)===Zr.BOUNDARY&&(_t[At]=!0);for(var Ot=this.iterator();Ot.hasNext();)for(var Dt=Ot.next(),Ft=Dt.getLabel(),jt=0;jt<2;jt++)if(Ft.isAnyNull(jt)){var Gt=Zr.NONE;if(_t[jt])Gt=Zr.EXTERIOR;else{var Jt=Dt.getCoordinate();Gt=this.getLocation(jt,Jt,st)}Ft.setAllLocationsIfNull(jt,Gt)}},el.prototype.getDegree=function(){return this._edgeMap.size()},el.prototype.insertEdgeEnd=function(st,_t){this._edgeMap.put(st,_t),this._edgeList=null},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el};var a_=function(st){function _t(){st.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.linkResultDirectedEdges=function(){var xt=this;this.getResultAreaEdges();for(var Et=null,At=null,Ot=this._SCANNING_FOR_INCOMING,Dt=0;Dt<this._resultAreaEdgeList.size();Dt++){var Ft=xt._resultAreaEdgeList.get(Dt),jt=Ft.getSym();if(Ft.getLabel().isArea())switch(Et===null&&Ft.isInResult()&&(Et=Ft),Ot){case xt._SCANNING_FOR_INCOMING:if(!jt.isInResult())continue;At=jt,Ot=xt._LINKING_TO_OUTGOING;break;case xt._LINKING_TO_OUTGOING:if(!Ft.isInResult())continue;At.setNext(Ft),Ot=xt._SCANNING_FOR_INCOMING}}if(Ot===this._LINKING_TO_OUTGOING){if(Et===null)throw new ph("no outgoing dirEdge found",this.getCoordinate());No.isTrue(Et.isInResult(),"unable to link last incoming dirEdge"),At.setNext(Et)}},_t.prototype.insert=function(xt){var Et=xt;this.insertEdgeEnd(Et,Et)},_t.prototype.getRightmostEdge=function(){var xt=this.getEdges(),Et=xt.size();if(Et<1)return null;var At=xt.get(0);if(Et===1)return At;var Ot=xt.get(Et-1),Dt=At.getQuadrant(),Ft=Ot.getQuadrant();return Hs.isNorthern(Dt)&&Hs.isNorthern(Ft)?At:Hs.isNorthern(Dt)||Hs.isNorthern(Ft)?At.getDy()!==0?At:Ot.getDy()!==0?Ot:(No.shouldNeverReachHere("found two horizontal edges incident on node"),null):Ot},_t.prototype.print=function(xt){ul.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var Et=this.iterator();Et.hasNext();){var At=Et.next();xt.print("out "),At.print(xt),xt.println(),xt.print("in "),At.getSym().print(xt),xt.println()}},_t.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ii;for(var xt=this.iterator();xt.hasNext();){var Et=xt.next();(Et.isInResult()||Et.getSym().isInResult())&&this._resultAreaEdgeList.add(Et)}return this._resultAreaEdgeList},_t.prototype.updateLabelling=function(xt){for(var Et=this.iterator();Et.hasNext();){var At=Et.next().getLabel();At.setAllLocationsIfNull(0,xt.getLocation(0)),At.setAllLocationsIfNull(1,xt.getLocation(1))}},_t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var xt=null,Et=null,At=this._edgeList.size()-1;At>=0;At--){var Ot=this._edgeList.get(At),Dt=Ot.getSym();Et===null&&(Et=Dt),xt!==null&&Dt.setNext(xt),xt=Ot}Et.setNext(xt)},_t.prototype.computeDepths=function(){var xt=this;if(arguments.length===1){var Et=arguments[0],At=this.findIndex(Et),Ot=Et.getDepth(Si.LEFT),Dt=Et.getDepth(Si.RIGHT),Ft=this.computeDepths(At+1,this._edgeList.size(),Ot),jt=this.computeDepths(0,At,Ft);if(jt!==Dt)throw new ph("depth mismatch at "+Et.getCoordinate())}else if(arguments.length===3){for(var Gt=arguments[0],Jt=arguments[1],qt=arguments[2],on=qt,vn=Gt;vn<Jt;vn++){var _n=xt._edgeList.get(vn);_n.setEdgeDepths(Si.RIGHT,on),on=_n.getDepth(Si.LEFT)}return on}},_t.prototype.mergeSymLabels=function(){for(var xt=this.iterator();xt.hasNext();){var Et=xt.next();Et.getLabel().merge(Et.getSym().getLabel())}},_t.prototype.linkMinimalDirectedEdges=function(xt){for(var Et=this,At=null,Ot=null,Dt=this._SCANNING_FOR_INCOMING,Ft=this._resultAreaEdgeList.size()-1;Ft>=0;Ft--){var jt=Et._resultAreaEdgeList.get(Ft),Gt=jt.getSym();switch(At===null&&jt.getEdgeRing()===xt&&(At=jt),Dt){case Et._SCANNING_FOR_INCOMING:if(Gt.getEdgeRing()!==xt)continue;Ot=Gt,Dt=Et._LINKING_TO_OUTGOING;break;case Et._LINKING_TO_OUTGOING:if(jt.getEdgeRing()!==xt)continue;Ot.setNextMin(jt),Dt=Et._SCANNING_FOR_INCOMING}}Dt===this._LINKING_TO_OUTGOING&&(No.isTrue(At!==null,"found null for first outgoing dirEdge"),No.isTrue(At.getEdgeRing()===xt,"unable to link last incoming dirEdge"),Ot.setNextMin(At))},_t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var xt=0,Et=this.iterator();Et.hasNext();){var At=Et.next();At.isInResult()&&xt++}return xt}if(arguments.length===1){for(var Ot=arguments[0],Dt=0,Ft=this.iterator();Ft.hasNext();){var jt=Ft.next();jt.getEdgeRing()===Ot&&Dt++}return Dt}},_t.prototype.getLabel=function(){return this._label},_t.prototype.findCoveredLineEdges=function(){for(var xt=Zr.NONE,Et=this.iterator();Et.hasNext();){var At=Et.next(),Ot=At.getSym();if(!At.isLineEdge()){if(At.isInResult()){xt=Zr.INTERIOR;break}if(Ot.isInResult()){xt=Zr.EXTERIOR;break}}}if(xt===Zr.NONE)return null;for(var Dt=xt,Ft=this.iterator();Ft.hasNext();){var jt=Ft.next(),Gt=jt.getSym();jt.isLineEdge()?jt.getEdge().setCovered(Dt===Zr.INTERIOR):(jt.isInResult()&&(Dt=Zr.EXTERIOR),Gt.isInResult()&&(Dt=Zr.INTERIOR))}},_t.prototype.computeLabelling=function(xt){st.prototype.computeLabelling.call(this,xt),this._label=new zs(Zr.NONE);for(var Et=this.iterator();Et.hasNext();)for(var At=Et.next().getEdge().getLabel(),Ot=0;Ot<2;Ot++){var Dt=At.getLocation(Ot);Dt!==Zr.INTERIOR&&Dt!==Zr.BOUNDARY||this._label.setLocation(Ot,Zr.INTERIOR)}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(el),Ny=function(st){function _t(){st.apply(this,arguments)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.createNode=function(xt){return new hm(xt,new a_)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ep),Vh=function st(){this._pts=null,this._orientation=null;var _t=arguments[0];this._pts=_t,this._orientation=st.orientation(_t)};Vh.prototype.compareTo=function(st){var _t=st;return Vh.compareOriented(this._pts,this._orientation,_t._pts,_t._orientation)},Vh.prototype.interfaces_=function(){return[Su]},Vh.prototype.getClass=function(){return Vh},Vh.orientation=function(st){return Xo.increasingDirection(st)===1},Vh.compareOriented=function(st,_t,xt,Et){for(var At=_t?1:-1,Ot=Et?1:-1,Dt=_t?st.length:-1,Ft=Et?xt.length:-1,jt=_t?0:st.length-1,Gt=Et?0:xt.length-1;;){var Jt=st[jt].compareTo(xt[Gt]);if(Jt!==0)return Jt;var qt=(jt+=At)===Dt,on=(Gt+=Ot)===Ft;if(qt&&!on)return-1;if(!qt&&on)return 1;if(qt&&on)return 0}};var eu=function(){this._edges=new Ii,this._ocaMap=new vl};eu.prototype.print=function(st){st.print("MULTILINESTRING ( ");for(var _t=0;_t<this._edges.size();_t++){var xt=this._edges.get(_t);_t>0&&st.print(","),st.print("(");for(var Et=xt.getCoordinates(),At=0;At<Et.length;At++)At>0&&st.print(","),st.print(Et[At].x+" "+Et[At].y);st.println(")")}st.print(")  ")},eu.prototype.addAll=function(st){for(var _t=st.iterator();_t.hasNext();)this.add(_t.next())},eu.prototype.findEdgeIndex=function(st){for(var _t=0;_t<this._edges.size();_t++)if(this._edges.get(_t).equals(st))return _t;return-1},eu.prototype.iterator=function(){return this._edges.iterator()},eu.prototype.getEdges=function(){return this._edges},eu.prototype.get=function(st){return this._edges.get(st)},eu.prototype.findEqualEdge=function(st){var _t=new Vh(st.getCoordinates());return this._ocaMap.get(_t)},eu.prototype.add=function(st){this._edges.add(st);var _t=new Vh(st.getCoordinates());this._ocaMap.put(_t,st)},eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu};var Ed=function(){};Ed.prototype.processIntersections=function(st,_t,xt,Et){},Ed.prototype.isDone=function(){},Ed.prototype.interfaces_=function(){return[]},Ed.prototype.getClass=function(){return Ed};var tu=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var st=arguments[0];this._li=st};tu.prototype.isTrivialIntersection=function(st,_t,xt,Et){if(st===xt&&this._li.getIntersectionNum()===1){if(tu.isAdjacentSegments(_t,Et))return!0;if(st.isClosed()){var At=st.size()-1;if(_t===0&&Et===At||Et===0&&_t===At)return!0}}return!1},tu.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},tu.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},tu.prototype.getLineIntersector=function(){return this._li},tu.prototype.hasProperIntersection=function(){return this._hasProper},tu.prototype.processIntersections=function(st,_t,xt,Et){if(st===xt&&_t===Et)return null;this.numTests++;var At=st.getCoordinates()[_t],Ot=st.getCoordinates()[_t+1],Dt=xt.getCoordinates()[Et],Ft=xt.getCoordinates()[Et+1];this._li.computeIntersection(At,Ot,Dt,Ft),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(st,_t,xt,Et)||(this._hasIntersection=!0,st.addIntersections(this._li,_t,0),xt.addIntersections(this._li,Et,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},tu.prototype.hasIntersection=function(){return this._hasIntersection},tu.prototype.isDone=function(){return!1},tu.prototype.hasInteriorIntersection=function(){return this._hasInterior},tu.prototype.interfaces_=function(){return[Ed]},tu.prototype.getClass=function(){return tu},tu.isAdjacentSegments=function(st,_t){return Math.abs(st-_t)===1};var vc=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var st=arguments[0],_t=arguments[1],xt=arguments[2];this.coord=new Ur(st),this.segmentIndex=_t,this.dist=xt};vc.prototype.getSegmentIndex=function(){return this.segmentIndex},vc.prototype.getCoordinate=function(){return this.coord},vc.prototype.print=function(st){st.print(this.coord),st.print(" seg # = "+this.segmentIndex),st.println(" dist = "+this.dist)},vc.prototype.compareTo=function(st){var _t=st;return this.compare(_t.segmentIndex,_t.dist)},vc.prototype.isEndPoint=function(st){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===st},vc.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},vc.prototype.getDistance=function(){return this.dist},vc.prototype.compare=function(st,_t){return this.segmentIndex<st?-1:this.segmentIndex>st?1:this.dist<_t?-1:this.dist>_t?1:0},vc.prototype.interfaces_=function(){return[Su]},vc.prototype.getClass=function(){return vc};var Is=function(){this._nodeMap=new vl,this.edge=null;var st=arguments[0];this.edge=st};Is.prototype.print=function(st){st.println("Intersections:");for(var _t=this.iterator();_t.hasNext();)_t.next().print(st)},Is.prototype.iterator=function(){return this._nodeMap.values().iterator()},Is.prototype.addSplitEdges=function(st){this.addEndpoints();for(var _t=this.iterator(),xt=_t.next();_t.hasNext();){var Et=_t.next(),At=this.createSplitEdge(xt,Et);st.add(At),xt=Et}},Is.prototype.addEndpoints=function(){var st=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[st],st,0)},Is.prototype.createSplitEdge=function(st,_t){var xt=_t.segmentIndex-st.segmentIndex+2,Et=this.edge.pts[_t.segmentIndex],At=_t.dist>0||!_t.coord.equals2D(Et);At||xt--;var Ot=new Array(xt).fill(null),Dt=0;Ot[Dt++]=new Ur(st.coord);for(var Ft=st.segmentIndex+1;Ft<=_t.segmentIndex;Ft++)Ot[Dt++]=this.edge.pts[Ft];return At&&(Ot[Dt]=_t.coord),new ip(Ot,new zs(this.edge._label))},Is.prototype.add=function(st,_t,xt){var Et=new vc(st,_t,xt),At=this._nodeMap.get(Et);return At!==null?At:(this._nodeMap.put(Et,Et),Et)},Is.prototype.isIntersection=function(st){for(var _t=this.iterator();_t.hasNext();)if(_t.next().coord.equals(st))return!0;return!1},Is.prototype.interfaces_=function(){return[]},Is.prototype.getClass=function(){return Is};var Uh=function(){};Uh.prototype.getChainStartIndices=function(st){var _t=0,xt=new Ii;xt.add(new cc(_t));do{var Et=this.findChainEnd(st,_t);xt.add(new cc(Et)),_t=Et}while(_t<st.length-1);return Uh.toIntArray(xt)},Uh.prototype.findChainEnd=function(st,_t){for(var xt=Hs.quadrant(st[_t],st[_t+1]),Et=_t+1;Et<st.length&&Hs.quadrant(st[Et-1],st[Et])===xt;)Et++;return Et-1},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Uh.toIntArray=function(st){for(var _t=new Array(st.size()).fill(null),xt=0;xt<_t.length;xt++)_t[xt]=st.get(xt).intValue();return _t};var Ra=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new to,this.env2=new to;var st=arguments[0];this.e=st,this.pts=st.getCoordinates();var _t=new Uh;this.startIndex=_t.getChainStartIndices(this.pts)};Ra.prototype.getCoordinates=function(){return this.pts},Ra.prototype.getMaxX=function(st){var _t=this.pts[this.startIndex[st]].x,xt=this.pts[this.startIndex[st+1]].x;return _t>xt?_t:xt},Ra.prototype.getMinX=function(st){var _t=this.pts[this.startIndex[st]].x,xt=this.pts[this.startIndex[st+1]].x;return _t<xt?_t:xt},Ra.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=arguments[3];this.computeIntersectsForChain(this.startIndex[st],this.startIndex[st+1],_t,_t.startIndex[xt],_t.startIndex[xt+1],Et)}else if(arguments.length===6){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],Ft=arguments[3],jt=arguments[4],Gt=arguments[5],Jt=this.pts[At],qt=this.pts[Ot],on=Dt.pts[Ft],vn=Dt.pts[jt];if(Ot-At==1&&jt-Ft==1)return Gt.addIntersections(this.e,At,Dt.e,Ft),null;if(this.env1.init(Jt,qt),this.env2.init(on,vn),!this.env1.intersects(this.env2))return null;var _n=Math.trunc((At+Ot)/2),En=Math.trunc((Ft+jt)/2);At<_n&&(Ft<En&&this.computeIntersectsForChain(At,_n,Dt,Ft,En,Gt),En<jt&&this.computeIntersectsForChain(At,_n,Dt,En,jt,Gt)),_n<Ot&&(Ft<En&&this.computeIntersectsForChain(_n,Ot,Dt,Ft,En,Gt),En<jt&&this.computeIntersectsForChain(_n,Ot,Dt,En,jt,Gt))}},Ra.prototype.getStartIndexes=function(){return this.startIndex},Ra.prototype.computeIntersects=function(st,_t){for(var xt=0;xt<this.startIndex.length-1;xt++)for(var Et=0;Et<st.startIndex.length-1;Et++)this.computeIntersectsForChain(xt,st,Et,_t)},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra};var Ta=function st(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var _t=0;_t<2;_t++)for(var xt=0;xt<3;xt++)this._depth[_t][xt]=st.NULL_VALUE},Wc={NULL_VALUE:{configurable:!0}};Ta.prototype.getDepth=function(st,_t){return this._depth[st][_t]},Ta.prototype.setDepth=function(st,_t,xt){this._depth[st][_t]=xt},Ta.prototype.isNull=function(){var st=this;if(arguments.length===0){for(var _t=0;_t<2;_t++)for(var xt=0;xt<3;xt++)if(st._depth[_t][xt]!==Ta.NULL_VALUE)return!1;return!0}if(arguments.length===1){var Et=arguments[0];return this._depth[Et][1]===Ta.NULL_VALUE}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return this._depth[At][Ot]===Ta.NULL_VALUE}},Ta.prototype.normalize=function(){for(var st=this,_t=0;_t<2;_t++)if(!st.isNull(_t)){var xt=st._depth[_t][1];st._depth[_t][2]<xt&&(xt=st._depth[_t][2]),xt<0&&(xt=0);for(var Et=1;Et<3;Et++){var At=0;st._depth[_t][Et]>xt&&(At=1),st._depth[_t][Et]=At}}},Ta.prototype.getDelta=function(st){return this._depth[st][Si.RIGHT]-this._depth[st][Si.LEFT]},Ta.prototype.getLocation=function(st,_t){return this._depth[st][_t]<=0?Zr.EXTERIOR:Zr.INTERIOR},Ta.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Ta.prototype.add=function(){var st=this;if(arguments.length===1)for(var _t=arguments[0],xt=0;xt<2;xt++)for(var Et=1;Et<3;Et++){var At=_t.getLocation(xt,Et);At!==Zr.EXTERIOR&&At!==Zr.INTERIOR||(st.isNull(xt,Et)?st._depth[xt][Et]=Ta.depthAtLocation(At):st._depth[xt][Et]+=Ta.depthAtLocation(At))}else if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2];Ft===Zr.INTERIOR&&this._depth[Ot][Dt]++}},Ta.prototype.interfaces_=function(){return[]},Ta.prototype.getClass=function(){return Ta},Ta.depthAtLocation=function(st){return st===Zr.EXTERIOR?0:st===Zr.INTERIOR?1:Ta.NULL_VALUE},Wc.NULL_VALUE.get=function(){return-1},Object.defineProperties(Ta,Wc);var ip=function(st){function _t(){if(st.call(this),this.pts=null,this._env=null,this.eiList=new Is(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ta,this._depthDelta=0,arguments.length===1){var xt=arguments[0];_t.call(this,xt,null)}else if(arguments.length===2){var Et=arguments[0],At=arguments[1];this.pts=Et,this._label=At}}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.getDepth=function(){return this._depth},_t.prototype.getCollapsedEdge=function(){var xt=new Array(2).fill(null);return xt[0]=this.pts[0],xt[1]=this.pts[1],new _t(xt,zs.toLineLabel(this._label))},_t.prototype.isIsolated=function(){return this._isIsolated},_t.prototype.getCoordinates=function(){return this.pts},_t.prototype.setIsolated=function(xt){this._isIsolated=xt},_t.prototype.setName=function(xt){this._name=xt},_t.prototype.equals=function(xt){if(!(xt instanceof _t))return!1;var Et=xt;if(this.pts.length!==Et.pts.length)return!1;for(var At=!0,Ot=!0,Dt=this.pts.length,Ft=0;Ft<this.pts.length;Ft++)if(this.pts[Ft].equals2D(Et.pts[Ft])||(At=!1),this.pts[Ft].equals2D(Et.pts[--Dt])||(Ot=!1),!At&&!Ot)return!1;return!0},_t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var xt=arguments[0];return this.pts[xt]}},_t.prototype.print=function(xt){xt.print("edge "+this._name+": "),xt.print("LINESTRING (");for(var Et=0;Et<this.pts.length;Et++)Et>0&&xt.print(","),xt.print(this.pts[Et].x+" "+this.pts[Et].y);xt.print(")  "+this._label+" "+this._depthDelta)},_t.prototype.computeIM=function(xt){_t.updateIM(this._label,xt)},_t.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},_t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},_t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},_t.prototype.getDepthDelta=function(){return this._depthDelta},_t.prototype.getNumPoints=function(){return this.pts.length},_t.prototype.printReverse=function(xt){xt.print("edge "+this._name+": ");for(var Et=this.pts.length-1;Et>=0;Et--)xt.print(this.pts[Et]+" ");xt.println("")},_t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Ra(this)),this._mce},_t.prototype.getEnvelope=function(){if(this._env===null){this._env=new to;for(var xt=0;xt<this.pts.length;xt++)this._env.expandToInclude(this.pts[xt])}return this._env},_t.prototype.addIntersection=function(xt,Et,At,Ot){var Dt=new Ur(xt.getIntersection(Ot)),Ft=Et,jt=xt.getEdgeDistance(At,Ot),Gt=Ft+1;if(Gt<this.pts.length){var Jt=this.pts[Gt];Dt.equals2D(Jt)&&(Ft=Gt,jt=0)}this.eiList.add(Dt,Ft,jt)},_t.prototype.toString=function(){var xt=new uc;xt.append("edge "+this._name+": "),xt.append("LINESTRING (");for(var Et=0;Et<this.pts.length;Et++)Et>0&&xt.append(","),xt.append(this.pts[Et].x+" "+this.pts[Et].y);return xt.append(")  "+this._label+" "+this._depthDelta),xt.toString()},_t.prototype.isPointwiseEqual=function(xt){if(this.pts.length!==xt.pts.length)return!1;for(var Et=0;Et<this.pts.length;Et++)if(!this.pts[Et].equals2D(xt.pts[Et]))return!1;return!0},_t.prototype.setDepthDelta=function(xt){this._depthDelta=xt},_t.prototype.getEdgeIntersectionList=function(){return this.eiList},_t.prototype.addIntersections=function(xt,Et,At){for(var Ot=0;Ot<xt.getIntersectionNum();Ot++)this.addIntersection(xt,Et,At,Ot)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.updateIM=function(){if(arguments.length!==2)return st.prototype.updateIM.apply(this,arguments);var xt=arguments[0],Et=arguments[1];Et.setAtLeastIfValid(xt.getLocation(0,Si.ON),xt.getLocation(1,Si.ON),1),xt.isArea()&&(Et.setAtLeastIfValid(xt.getLocation(0,Si.LEFT),xt.getLocation(1,Si.LEFT),2),Et.setAtLeastIfValid(xt.getLocation(0,Si.RIGHT),xt.getLocation(1,Si.RIGHT),2))},_t}(Jl),tl=function(st){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new eu,this._bufParams=st||null};tl.prototype.setWorkingPrecisionModel=function(st){this._workingPrecisionModel=st},tl.prototype.insertUniqueEdge=function(st){var _t=this._edgeList.findEqualEdge(st);if(_t!==null){var xt=_t.getLabel(),Et=st.getLabel();_t.isPointwiseEqual(st)||(Et=new zs(st.getLabel())).flip(),xt.merge(Et);var At=tl.depthDelta(Et),Ot=_t.getDepthDelta()+At;_t.setDepthDelta(Ot)}else this._edgeList.add(st),st.setDepthDelta(tl.depthDelta(st.getLabel()))},tl.prototype.buildSubgraphs=function(st,_t){for(var xt=new Ii,Et=st.iterator();Et.hasNext();){var At=Et.next(),Ot=At.getRightmostCoordinate(),Dt=new af(xt).getDepth(Ot);At.computeDepth(Dt),At.findResultEdges(),xt.add(At),_t.add(At.getDirectedEdges(),At.getNodes())}},tl.prototype.createSubgraphs=function(st){for(var _t=new Ii,xt=st.getNodes().iterator();xt.hasNext();){var Et=xt.next();if(!Et.isVisited()){var At=new _l;At.create(Et),_t.add(At)}}return Ku.sort(_t,Ku.reverseOrder()),_t},tl.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},tl.prototype.getNoder=function(st){if(this._workingNoder!==null)return this._workingNoder;var _t=new $0,xt=new $h;return xt.setPrecisionModel(st),_t.setSegmentIntersector(new tu(xt)),_t},tl.prototype.buffer=function(st,_t){var xt=this._workingPrecisionModel;xt===null&&(xt=st.getPrecisionModel()),this._geomFact=st.getFactory();var Et=new ro(xt,this._bufParams),At=new Vl(st,_t,Et).getCurves();if(At.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(At,xt),this._graph=new la(new Ny),this._graph.addEdges(this._edgeList.getEdges());var Ot=this.createSubgraphs(this._graph),Dt=new zl(this._geomFact);this.buildSubgraphs(Ot,Dt);var Ft=Dt.getPolygons();return Ft.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Ft)},tl.prototype.computeNodedEdges=function(st,_t){var xt=this.getNoder(_t);xt.computeNodes(st);for(var Et=xt.getNodedSubstrings().iterator();Et.hasNext();){var At=Et.next(),Ot=At.getCoordinates();if(Ot.length!==2||!Ot[0].equals2D(Ot[1])){var Dt=At.getData(),Ft=new ip(At.getCoordinates(),new zs(Dt));this.insertUniqueEdge(Ft)}}},tl.prototype.setNoder=function(st){this._workingNoder=st},tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.depthDelta=function(st){var _t=st.getLocation(0,Si.LEFT),xt=st.getLocation(0,Si.RIGHT);return _t===Zr.INTERIOR&&xt===Zr.EXTERIOR?1:_t===Zr.EXTERIOR&&xt===Zr.INTERIOR?-1:0},tl.convertSegStrings=function(st){for(var _t=new Zo,xt=new Ii;st.hasNext();){var Et=st.next(),At=_t.createLineString(Et.getCoordinates());xt.add(At)}return _t.buildGeometry(xt)};var jh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var st=arguments[0],_t=arguments[1];this._noder=st,this._scaleFactor=_t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var xt=arguments[0],Et=arguments[1],At=arguments[2],Ot=arguments[3];this._noder=xt,this._scaleFactor=Et,this._offsetX=At,this._offsetY=Ot,this._isScaled=!this.isIntegerPrecision()}};jh.prototype.rescale=function(){var st=this;if(xo(arguments[0],Oa))for(var _t=arguments[0],xt=_t.iterator();xt.hasNext();){var Et=xt.next();st.rescale(Et.getCoordinates())}else if(arguments[0]instanceof Array){for(var At=arguments[0],Ot=0;Ot<At.length;Ot++)At[Ot].x=At[Ot].x/st._scaleFactor+st._offsetX,At[Ot].y=At[Ot].y/st._scaleFactor+st._offsetY;At.length===2&&At[0].equals2D(At[1])&&ul.out.println(At)}},jh.prototype.scale=function(){var st=this;if(xo(arguments[0],Oa)){for(var _t=arguments[0],xt=new Ii,Et=_t.iterator();Et.hasNext();){var At=Et.next();xt.add(new ca(st.scale(At.getCoordinates()),At.getData()))}return xt}if(arguments[0]instanceof Array){for(var Ot=arguments[0],Dt=new Array(Ot.length).fill(null),Ft=0;Ft<Ot.length;Ft++)Dt[Ft]=new Ur(Math.round((Ot[Ft].x-st._offsetX)*st._scaleFactor),Math.round((Ot[Ft].y-st._offsetY)*st._scaleFactor),Ot[Ft].z);var jt=Xo.removeRepeatedPoints(Dt);return jt}},jh.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},jh.prototype.getNodedSubstrings=function(){var st=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(st),st},jh.prototype.computeNodes=function(st){var _t=st;this._isScaled&&(_t=this.scale(st)),this._noder.computeNodes(_t)},jh.prototype.interfaces_=function(){return[bd]},jh.prototype.getClass=function(){return jh};var cu=function(){this._li=new $h,this._segStrings=null;var st=arguments[0];this._segStrings=st},lf={fact:{configurable:!0}};cu.prototype.checkEndPtVertexIntersections=function(){var st=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();){var xt=_t.next(),Et=xt.getCoordinates();st.checkEndPtVertexIntersections(Et[0],st._segStrings),st.checkEndPtVertexIntersections(Et[Et.length-1],st._segStrings)}else if(arguments.length===2){for(var At=arguments[0],Ot=arguments[1],Dt=Ot.iterator();Dt.hasNext();)for(var Ft=Dt.next(),jt=Ft.getCoordinates(),Gt=1;Gt<jt.length-1;Gt++)if(jt[Gt].equals(At))throw new hh("found endpt/interior pt intersection at index "+Gt+" :pt "+At)}},cu.prototype.checkInteriorIntersections=function(){var st=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();)for(var xt=_t.next(),Et=this._segStrings.iterator();Et.hasNext();){var At=Et.next();st.checkInteriorIntersections(xt,At)}else if(arguments.length===2)for(var Ot=arguments[0],Dt=arguments[1],Ft=Ot.getCoordinates(),jt=Dt.getCoordinates(),Gt=0;Gt<Ft.length-1;Gt++)for(var Jt=0;Jt<jt.length-1;Jt++)st.checkInteriorIntersections(Ot,Gt,Dt,Jt);else if(arguments.length===4){var qt=arguments[0],on=arguments[1],vn=arguments[2],_n=arguments[3];if(qt===vn&&on===_n)return null;var En=qt.getCoordinates()[on],cn=qt.getCoordinates()[on+1],Hn=vn.getCoordinates()[_n],nr=vn.getCoordinates()[_n+1];if(this._li.computeIntersection(En,cn,Hn,nr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,En,cn)||this.hasInteriorIntersection(this._li,Hn,nr)))throw new hh("found non-noded intersection at "+En+"-"+cn+" and "+Hn+"-"+nr)}},cu.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},cu.prototype.checkCollapses=function(){var st=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();){var xt=_t.next();st.checkCollapses(xt)}else if(arguments.length===1)for(var Et=arguments[0],At=Et.getCoordinates(),Ot=0;Ot<At.length-2;Ot++)st.checkCollapse(At[Ot],At[Ot+1],At[Ot+2])},cu.prototype.hasInteriorIntersection=function(st,_t,xt){for(var Et=0;Et<st.getIntersectionNum();Et++){var At=st.getIntersection(Et);if(!At.equals(_t)&&!At.equals(xt))return!0}return!1},cu.prototype.checkCollapse=function(st,_t,xt){if(st.equals(xt))throw new hh("found non-noded collapse at "+cu.fact.createLineString([st,_t,xt]))},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},lf.fact.get=function(){return new Zo},Object.defineProperties(cu,lf);var Pl=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var st=arguments[0],_t=arguments[1],xt=arguments[2];if(this._originalPt=st,this._pt=st,this._scaleFactor=_t,this._li=xt,_t<=0)throw new ra("Scale factor must be non-zero");_t!==1&&(this._pt=new Ur(this.scale(st.x),this.scale(st.y)),this._p0Scaled=new Ur,this._p1Scaled=new Ur),this.initCorners(this._pt)},hu={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Pl.prototype.intersectsScaled=function(st,_t){var xt=Math.min(st.x,_t.x),Et=Math.max(st.x,_t.x),At=Math.min(st.y,_t.y),Ot=Math.max(st.y,_t.y),Dt=this._maxx<xt||this._minx>Et||this._maxy<At||this._miny>Ot;if(Dt)return!1;var Ft=this.intersectsToleranceSquare(st,_t);return No.isTrue(!(Dt&&Ft),"Found bad envelope test"),Ft},Pl.prototype.initCorners=function(st){var _t=.5;this._minx=st.x-_t,this._maxx=st.x+_t,this._miny=st.y-_t,this._maxy=st.y+_t,this._corner[0]=new Ur(this._maxx,this._maxy),this._corner[1]=new Ur(this._minx,this._maxy),this._corner[2]=new Ur(this._minx,this._miny),this._corner[3]=new Ur(this._maxx,this._miny)},Pl.prototype.intersects=function(st,_t){return this._scaleFactor===1?this.intersectsScaled(st,_t):(this.copyScaled(st,this._p0Scaled),this.copyScaled(_t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Pl.prototype.scale=function(st){return Math.round(st*this._scaleFactor)},Pl.prototype.getCoordinate=function(){return this._originalPt},Pl.prototype.copyScaled=function(st,_t){_t.x=this.scale(st.x),_t.y=this.scale(st.y)},Pl.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var st=Pl.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new to(this._originalPt.x-st,this._originalPt.x+st,this._originalPt.y-st,this._originalPt.y+st)}return this._safeEnv},Pl.prototype.intersectsPixelClosure=function(st,_t){return this._li.computeIntersection(st,_t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(st,_t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(st,_t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(st,_t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Pl.prototype.intersectsToleranceSquare=function(st,_t){var xt=!1,Et=!1;return this._li.computeIntersection(st,_t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(st,_t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(xt=!0),this._li.computeIntersection(st,_t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(Et=!0),this._li.computeIntersection(st,_t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!xt||!Et)||!!st.equals(this._pt)||!!_t.equals(this._pt))))},Pl.prototype.addSnappedNode=function(st,_t){var xt=st.getCoordinate(_t),Et=st.getCoordinate(_t+1);return!!this.intersects(xt,Et)&&(st.addIntersection(this.getCoordinate(),_t),!0)},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl},hu.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(Pl,hu);var ka=function(){this.tempEnv1=new to,this.selectedSegment=new Qi};ka.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var st=arguments[0],_t=arguments[1];st.getLineSegment(_t,this.selectedSegment),this.select(this.selectedSegment)}}},ka.prototype.interfaces_=function(){return[]},ka.prototype.getClass=function(){return ka};var Gc=function(){this._index=null;var st=arguments[0];this._index=st},hg={HotPixelSnapAction:{configurable:!0}};Gc.prototype.snap=function(){if(arguments.length===1){var st=arguments[0];return this.snap(st,null,-1)}if(arguments.length===3){var _t=arguments[0],xt=arguments[1],Et=arguments[2],At=_t.getSafeEnvelope(),Ot=new op(_t,xt,Et);return this._index.query(At,{interfaces_:function(){return[zh]},visitItem:function(Dt){Dt.select(At,Ot)}}),Ot.isNodeAdded()}},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},hg.HotPixelSnapAction.get=function(){return op},Object.defineProperties(Gc,hg);var op=function(st){function _t(){st.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var xt=arguments[0],Et=arguments[1],At=arguments[2];this._hotPixel=xt,this._parentEdge=Et,this._hotPixelVertexIndex=At}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.isNodeAdded=function(){return this._isNodeAdded},_t.prototype.select=function(){if(arguments.length!==2)return st.prototype.select.apply(this,arguments);var xt=arguments[0],Et=arguments[1],At=xt.getContext();if(this._parentEdge!==null&&At===this._parentEdge&&Et===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(At,Et)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ka),uf=function(){this._li=null,this._interiorIntersections=null;var st=arguments[0];this._li=st,this._interiorIntersections=new Ii};uf.prototype.processIntersections=function(st,_t,xt,Et){if(st===xt&&_t===Et)return null;var At=st.getCoordinates()[_t],Ot=st.getCoordinates()[_t+1],Dt=xt.getCoordinates()[Et],Ft=xt.getCoordinates()[Et+1];if(this._li.computeIntersection(At,Ot,Dt,Ft),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var jt=0;jt<this._li.getIntersectionNum();jt++)this._interiorIntersections.add(this._li.getIntersection(jt));st.addIntersections(this._li,_t,0),xt.addIntersections(this._li,Et,1)}},uf.prototype.isDone=function(){return!1},uf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},uf.prototype.interfaces_=function(){return[Ed]},uf.prototype.getClass=function(){return uf};var Yc=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var st=arguments[0];this._pm=st,this._li=new $h,this._li.setPrecisionModel(st),this._scaleFactor=st.getScale()};Yc.prototype.checkCorrectness=function(st){var _t=ca.getNodedSubstrings(st),xt=new cu(_t);try{xt.checkValid()}catch(Et){if(!(Et instanceof vy))throw Et;Et.printStackTrace()}},Yc.prototype.getNodedSubstrings=function(){return ca.getNodedSubstrings(this._nodedSegStrings)},Yc.prototype.snapRound=function(st,_t){var xt=this.findInteriorIntersections(st,_t);this.computeIntersectionSnaps(xt),this.computeVertexSnaps(st)},Yc.prototype.findInteriorIntersections=function(st,_t){var xt=new uf(_t);return this._noder.setSegmentIntersector(xt),this._noder.computeNodes(st),xt.getInteriorIntersections()},Yc.prototype.computeVertexSnaps=function(){var st=this;if(xo(arguments[0],Oa))for(var _t=arguments[0],xt=_t.iterator();xt.hasNext();){var Et=xt.next();st.computeVertexSnaps(Et)}else if(arguments[0]instanceof ca)for(var At=arguments[0],Ot=At.getCoordinates(),Dt=0;Dt<Ot.length;Dt++){var Ft=new Pl(Ot[Dt],st._scaleFactor,st._li),jt=st._pointSnapper.snap(Ft,At,Dt);jt&&At.addIntersection(Ot[Dt],Dt)}},Yc.prototype.computeNodes=function(st){this._nodedSegStrings=st,this._noder=new $0,this._pointSnapper=new Gc(this._noder.getIndex()),this.snapRound(st,this._li)},Yc.prototype.computeIntersectionSnaps=function(st){for(var _t=this,xt=st.iterator();xt.hasNext();){var Et=xt.next(),At=new Pl(Et,_t._scaleFactor,_t._li);_t._pointSnapper.snap(At)}},Yc.prototype.interfaces_=function(){return[bd]},Yc.prototype.getClass=function(){return Yc};var Gs=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new $s,this._resultGeometry=null,this._saveException=null,arguments.length===1){var st=arguments[0];this._argGeom=st}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this._argGeom=_t,this._bufParams=xt}},du={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Gs.prototype.bufferFixedPrecision=function(st){var _t=new jh(new Yc(new Ns(1)),st.getScale()),xt=new tl(this._bufParams);xt.setWorkingPrecisionModel(st),xt.setNoder(_t),this._resultGeometry=xt.buffer(this._argGeom,this._distance)},Gs.prototype.bufferReducedPrecision=function(){var st=this;if(arguments.length===0){for(var _t=Gs.MAX_PRECISION_DIGITS;_t>=0;_t--){try{st.bufferReducedPrecision(_t)}catch(Ot){if(!(Ot instanceof ph))throw Ot;st._saveException=Ot}if(st._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var xt=arguments[0],Et=Gs.precisionScaleFactor(this._argGeom,this._distance,xt),At=new Ns(Et);this.bufferFixedPrecision(At)}},Gs.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var st=this._argGeom.getFactory().getPrecisionModel();st.getType()===Ns.FIXED?this.bufferFixedPrecision(st):this.bufferReducedPrecision()},Gs.prototype.setQuadrantSegments=function(st){this._bufParams.setQuadrantSegments(st)},Gs.prototype.bufferOriginalPrecision=function(){try{var st=new tl(this._bufParams);this._resultGeometry=st.buffer(this._argGeom,this._distance)}catch(_t){if(!(_t instanceof hh))throw _t;this._saveException=_t}},Gs.prototype.getResultGeometry=function(st){return this._distance=st,this.computeGeometry(),this._resultGeometry},Gs.prototype.setEndCapStyle=function(st){this._bufParams.setEndCapStyle(st)},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs},Gs.bufferOp=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1],xt=new Gs(st),Et=xt.getResultGeometry(_t);return Et}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof go&&typeof arguments[1]=="number"){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],Ft=new Gs(At);Ft.setQuadrantSegments(Dt);var jt=Ft.getResultGeometry(Ot);return jt}if(arguments[2]instanceof $s&&arguments[0]instanceof go&&typeof arguments[1]=="number"){var Gt=arguments[0],Jt=arguments[1],qt=arguments[2],on=new Gs(Gt,qt),vn=on.getResultGeometry(Jt);return vn}}else if(arguments.length===4){var _n=arguments[0],En=arguments[1],cn=arguments[2],Hn=arguments[3],nr=new Gs(_n);nr.setQuadrantSegments(cn),nr.setEndCapStyle(Hn);var bn=nr.getResultGeometry(En);return bn}},Gs.precisionScaleFactor=function(st,_t,xt){var Et=st.getEnvelopeInternal(),At=lu.max(Math.abs(Et.getMaxX()),Math.abs(Et.getMaxY()),Math.abs(Et.getMinX()),Math.abs(Et.getMinY()))+2*(_t>0?_t:0),Ot=xt-Math.trunc(Math.log(At)/Math.log(10)+1);return Math.pow(10,Ot)},du.CAP_ROUND.get=function(){return $s.CAP_ROUND},du.CAP_BUTT.get=function(){return $s.CAP_FLAT},du.CAP_FLAT.get=function(){return $s.CAP_FLAT},du.CAP_SQUARE.get=function(){return $s.CAP_SQUARE},du.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Gs,du);var nl=function(){this._pt=[new Ur,new Ur],this._distance=Po.NaN,this._isNull=!0};nl.prototype.getCoordinates=function(){return this._pt},nl.prototype.getCoordinate=function(st){return this._pt[st]},nl.prototype.setMinimum=function(){if(arguments.length===1){var st=arguments[0];this.setMinimum(st._pt[0],st._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Et=_t.distance(xt);Et<this._distance&&this.initialize(_t,xt,Et)}},nl.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var st=arguments[0],_t=arguments[1];this._pt[0].setCoordinate(st),this._pt[1].setCoordinate(_t),this._distance=st.distance(_t),this._isNull=!1}else if(arguments.length===3){var xt=arguments[0],Et=arguments[1],At=arguments[2];this._pt[0].setCoordinate(xt),this._pt[1].setCoordinate(Et),this._distance=At,this._isNull=!1}},nl.prototype.getDistance=function(){return this._distance},nl.prototype.setMaximum=function(){if(arguments.length===1){var st=arguments[0];this.setMaximum(st._pt[0],st._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Et=_t.distance(xt);Et>this._distance&&this.initialize(_t,xt,Et)}},nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl};var fu=function(){};fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu},fu.computeDistance=function(){if(arguments[2]instanceof nl&&arguments[0]instanceof ia&&arguments[1]instanceof Ur)for(var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=st.getCoordinates(),At=new Qi,Ot=0;Ot<Et.length-1;Ot++){At.setCoordinates(Et[Ot],Et[Ot+1]);var Dt=At.closestPoint(_t);xt.setMinimum(Dt,_t)}else if(arguments[2]instanceof nl&&arguments[0]instanceof Ia&&arguments[1]instanceof Ur){var Ft=arguments[0],jt=arguments[1],Gt=arguments[2];fu.computeDistance(Ft.getExteriorRing(),jt,Gt);for(var Jt=0;Jt<Ft.getNumInteriorRing();Jt++)fu.computeDistance(Ft.getInteriorRingN(Jt),jt,Gt)}else if(arguments[2]instanceof nl&&arguments[0]instanceof go&&arguments[1]instanceof Ur){var qt=arguments[0],on=arguments[1],vn=arguments[2];if(qt instanceof ia)fu.computeDistance(qt,on,vn);else if(qt instanceof Ia)fu.computeDistance(qt,on,vn);else if(qt instanceof Al)for(var _n=qt,En=0;En<_n.getNumGeometries();En++){var cn=_n.getGeometryN(En);fu.computeDistance(cn,on,vn)}else vn.setMinimum(qt.getCoordinate(),on)}else if(arguments[2]instanceof nl&&arguments[0]instanceof Qi&&arguments[1]instanceof Ur){var Hn=arguments[0],nr=arguments[1],bn=arguments[2],zn=Hn.closestPoint(nr);bn.setMinimum(zn,nr)}};var _c=function(st){this._maxPtDist=new nl,this._inputGeom=st||null},mm={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_c.prototype.computeMaxMidpointDistance=function(st){var _t=new qc(this._inputGeom);st.apply(_t),this._maxPtDist.setMaximum(_t.getMaxPointDistance())},_c.prototype.computeMaxVertexDistance=function(st){var _t=new Sd(this._inputGeom);st.apply(_t),this._maxPtDist.setMaximum(_t.getMaxPointDistance())},_c.prototype.findDistance=function(st){return this.computeMaxVertexDistance(st),this.computeMaxMidpointDistance(st),this._maxPtDist.getDistance()},_c.prototype.getDistancePoints=function(){return this._maxPtDist},_c.prototype.interfaces_=function(){return[]},_c.prototype.getClass=function(){return _c},mm.MaxPointDistanceFilter.get=function(){return Sd},mm.MaxMidpointDistanceFilter.get=function(){return qc},Object.defineProperties(_c,mm);var Sd=function(st){this._maxPtDist=new nl,this._minPtDist=new nl,this._geom=st||null};Sd.prototype.filter=function(st){this._minPtDist.initialize(),fu.computeDistance(this._geom,st,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sd.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sd.prototype.interfaces_=function(){return[Bc]},Sd.prototype.getClass=function(){return Sd};var qc=function(st){this._maxPtDist=new nl,this._minPtDist=new nl,this._geom=st||null};qc.prototype.filter=function(st,_t){if(_t===0)return null;var xt=st.getCoordinate(_t-1),Et=st.getCoordinate(_t),At=new Ur((xt.x+Et.x)/2,(xt.y+Et.y)/2);this._minPtDist.initialize(),fu.computeDistance(this._geom,At,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},qc.prototype.isDone=function(){return!1},qc.prototype.isGeometryChanged=function(){return!1},qc.prototype.getMaxPointDistance=function(){return this._maxPtDist},qc.prototype.interfaces_=function(){return[Gu]},qc.prototype.getClass=function(){return qc};var gh=function(st){this._comps=st||null};gh.prototype.filter=function(st){st instanceof Ia&&this._comps.add(st)},gh.prototype.interfaces_=function(){return[fc]},gh.prototype.getClass=function(){return gh},gh.getPolygons=function(){if(arguments.length===1){var st=arguments[0];return gh.getPolygons(st,new Ii)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return _t instanceof Ia?xt.add(_t):_t instanceof Al&&_t.apply(new gh(xt)),xt}};var cl=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var st=arguments[0];this._lines=st}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];this._lines=_t,this._isForcedToLineString=xt}};cl.prototype.filter=function(st){if(this._isForcedToLineString&&st instanceof Hc){var _t=st.getFactory().createLineString(st.getCoordinateSequence());return this._lines.add(_t),null}st instanceof ia&&this._lines.add(st)},cl.prototype.setForceToLineString=function(st){this._isForcedToLineString=st},cl.prototype.interfaces_=function(){return[Nc]},cl.prototype.getClass=function(){return cl},cl.getGeometry=function(){if(arguments.length===1){var st=arguments[0];return st.getFactory().buildGeometry(cl.getLines(st))}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return _t.getFactory().buildGeometry(cl.getLines(_t,xt))}},cl.getLines=function(){if(arguments.length===1){var st=arguments[0];return cl.getLines(st,!1)}if(arguments.length===2){if(xo(arguments[0],Oa)&&xo(arguments[1],Oa)){for(var _t=arguments[0],xt=arguments[1],Et=_t.iterator();Et.hasNext();){var At=Et.next();cl.getLines(At,xt)}return xt}if(arguments[0]instanceof go&&typeof arguments[1]=="boolean"){var Ot=arguments[0],Dt=arguments[1],Ft=new Ii;return Ot.apply(new cl(Ft,Dt)),Ft}if(arguments[0]instanceof go&&xo(arguments[1],Oa)){var jt=arguments[0],Gt=arguments[1];return jt instanceof ia?Gt.add(jt):jt.apply(new cl(Gt)),Gt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&xo(arguments[0],Oa)&&xo(arguments[1],Oa)){for(var Jt=arguments[0],qt=arguments[1],on=arguments[2],vn=Jt.iterator();vn.hasNext();){var _n=vn.next();cl.getLines(_n,qt,on)}return qt}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof go&&xo(arguments[1],Oa)){var En=arguments[0],cn=arguments[1],Hn=arguments[2];return En.apply(new cl(cn,Hn)),cn}}};var pu=function(){if(this._boundaryRule=ku.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var st=arguments[0];if(st===null)throw new ra("Rule must be non-null");this._boundaryRule=st}}};pu.prototype.locateInternal=function(){var st=this;if(arguments[0]instanceof Ur&&arguments[1]instanceof Ia){var _t=arguments[0],xt=arguments[1];if(xt.isEmpty())return Zr.EXTERIOR;var Et=xt.getExteriorRing(),At=this.locateInPolygonRing(_t,Et);if(At===Zr.EXTERIOR)return Zr.EXTERIOR;if(At===Zr.BOUNDARY)return Zr.BOUNDARY;for(var Ot=0;Ot<xt.getNumInteriorRing();Ot++){var Dt=xt.getInteriorRingN(Ot),Ft=st.locateInPolygonRing(_t,Dt);if(Ft===Zr.INTERIOR)return Zr.EXTERIOR;if(Ft===Zr.BOUNDARY)return Zr.BOUNDARY}return Zr.INTERIOR}if(arguments[0]instanceof Ur&&arguments[1]instanceof ia){var jt=arguments[0],Gt=arguments[1];if(!Gt.getEnvelopeInternal().intersects(jt))return Zr.EXTERIOR;var Jt=Gt.getCoordinates();return Gt.isClosed()||!jt.equals(Jt[0])&&!jt.equals(Jt[Jt.length-1])?$i.isOnLine(jt,Jt)?Zr.INTERIOR:Zr.EXTERIOR:Zr.BOUNDARY}if(arguments[0]instanceof Ur&&arguments[1]instanceof Kl){var qt=arguments[0],on=arguments[1],vn=on.getCoordinate();return vn.equals2D(qt)?Zr.INTERIOR:Zr.EXTERIOR}},pu.prototype.locateInPolygonRing=function(st,_t){return _t.getEnvelopeInternal().intersects(st)?$i.locatePointInRing(st,_t.getCoordinates()):Zr.EXTERIOR},pu.prototype.intersects=function(st,_t){return this.locate(st,_t)!==Zr.EXTERIOR},pu.prototype.updateLocationInfo=function(st){st===Zr.INTERIOR&&(this._isIn=!0),st===Zr.BOUNDARY&&this._numBoundaries++},pu.prototype.computeLocation=function(st,_t){var xt=this;if(_t instanceof Kl&&this.updateLocationInfo(this.locateInternal(st,_t)),_t instanceof ia)this.updateLocationInfo(this.locateInternal(st,_t));else if(_t instanceof Ia)this.updateLocationInfo(this.locateInternal(st,_t));else if(_t instanceof Bh)for(var Et=_t,At=0;At<Et.getNumGeometries();At++){var Ot=Et.getGeometryN(At);xt.updateLocationInfo(xt.locateInternal(st,Ot))}else if(_t instanceof Vc)for(var Dt=_t,Ft=0;Ft<Dt.getNumGeometries();Ft++){var jt=Dt.getGeometryN(Ft);xt.updateLocationInfo(xt.locateInternal(st,jt))}else if(_t instanceof Al)for(var Gt=new yc(_t);Gt.hasNext();){var Jt=Gt.next();Jt!==_t&&xt.computeLocation(st,Jt)}},pu.prototype.locate=function(st,_t){return _t.isEmpty()?Zr.EXTERIOR:_t instanceof ia||_t instanceof Ia?this.locateInternal(st,_t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(st,_t),this._boundaryRule.isInBoundary(this._numBoundaries)?Zr.BOUNDARY:this._numBoundaries>0||this._isIn?Zr.INTERIOR:Zr.EXTERIOR)},pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu};var Ll=function st(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var _t=arguments[0],xt=arguments[1];st.call(this,_t,st.INSIDE_AREA,xt)}else if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2];this._component=Et,this._segIndex=At,this._pt=Ot}},$y={INSIDE_AREA:{configurable:!0}};Ll.prototype.isInsideArea=function(){return this._segIndex===Ll.INSIDE_AREA},Ll.prototype.getCoordinate=function(){return this._pt},Ll.prototype.getGeometryComponent=function(){return this._component},Ll.prototype.getSegmentIndex=function(){return this._segIndex},Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},$y.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ll,$y);var Wh=function(st){this._pts=st||null};Wh.prototype.filter=function(st){st instanceof Kl&&this._pts.add(st)},Wh.prototype.interfaces_=function(){return[fc]},Wh.prototype.getClass=function(){return Wh},Wh.getPoints=function(){if(arguments.length===1){var st=arguments[0];return st instanceof Kl?Ku.singletonList(st):Wh.getPoints(st,new Ii)}if(arguments.length===2){var _t=arguments[0],xt=arguments[1];return _t instanceof Kl?xt.add(_t):_t instanceof Al&&_t.apply(new Wh(xt)),xt}};var mh=function(){this._locations=null;var st=arguments[0];this._locations=st};mh.prototype.filter=function(st){(st instanceof Kl||st instanceof ia||st instanceof Ia)&&this._locations.add(new Ll(st,0,st.getCoordinate()))},mh.prototype.interfaces_=function(){return[fc]},mh.prototype.getClass=function(){return mh},mh.getLocations=function(st){var _t=new Ii;return st.apply(new mh(_t)),_t};var rl=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new pu,this._minDistanceLocation=null,this._minDistance=Po.MAX_VALUE,arguments.length===2){var st=arguments[0],_t=arguments[1];this._geom=[st,_t],this._terminateDistance=0}else if(arguments.length===3){var xt=arguments[0],Et=arguments[1],At=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=xt,this._geom[1]=Et,this._terminateDistance=At}};rl.prototype.computeContainmentDistance=function(){var st=this;if(arguments.length===0){var _t=new Array(2).fill(null);if(this.computeContainmentDistance(0,_t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,_t)}else if(arguments.length===2){var xt=arguments[0],Et=arguments[1],At=1-xt,Ot=gh.getPolygons(this._geom[xt]);if(Ot.size()>0){var Dt=mh.getLocations(this._geom[At]);if(this.computeContainmentDistance(Dt,Ot,Et),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[At]=Et[0],this._minDistanceLocation[xt]=Et[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&xo(arguments[0],ju)&&xo(arguments[1],ju)){for(var Ft=arguments[0],jt=arguments[1],Gt=arguments[2],Jt=0;Jt<Ft.size();Jt++)for(var qt=Ft.get(Jt),on=0;on<jt.size();on++)if(st.computeContainmentDistance(qt,jt.get(on),Gt),st._minDistance<=st._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ll&&arguments[1]instanceof Ia){var vn=arguments[0],_n=arguments[1],En=arguments[2],cn=vn.getCoordinate();if(Zr.EXTERIOR!==this._ptLocator.locate(cn,_n))return this._minDistance=0,En[0]=vn,En[1]=new Ll(_n,cn),null}}},rl.prototype.computeMinDistanceLinesPoints=function(st,_t,xt){for(var Et=this,At=0;At<st.size();At++)for(var Ot=st.get(At),Dt=0;Dt<_t.size();Dt++){var Ft=_t.get(Dt);if(Et.computeMinDistance(Ot,Ft,xt),Et._minDistance<=Et._terminateDistance)return null}},rl.prototype.computeFacetDistance=function(){var st=new Array(2).fill(null),_t=cl.getLines(this._geom[0]),xt=cl.getLines(this._geom[1]),Et=Wh.getPoints(this._geom[0]),At=Wh.getPoints(this._geom[1]);return this.computeMinDistanceLines(_t,xt,st),this.updateMinDistance(st,!1),this._minDistance<=this._terminateDistance?null:(st[0]=null,st[1]=null,this.computeMinDistanceLinesPoints(_t,At,st),this.updateMinDistance(st,!1),this._minDistance<=this._terminateDistance?null:(st[0]=null,st[1]=null,this.computeMinDistanceLinesPoints(xt,Et,st),this.updateMinDistance(st,!0),this._minDistance<=this._terminateDistance?null:(st[0]=null,st[1]=null,this.computeMinDistancePoints(Et,At,st),void this.updateMinDistance(st,!1))))},rl.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},rl.prototype.updateMinDistance=function(st,_t){if(st[0]===null)return null;_t?(this._minDistanceLocation[0]=st[1],this._minDistanceLocation[1]=st[0]):(this._minDistanceLocation[0]=st[0],this._minDistanceLocation[1]=st[1])},rl.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},rl.prototype.computeMinDistance=function(){var st=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof ia&&arguments[1]instanceof Kl){var _t=arguments[0],xt=arguments[1],Et=arguments[2];if(_t.getEnvelopeInternal().distance(xt.getEnvelopeInternal())>this._minDistance)return null;for(var At=_t.getCoordinates(),Ot=xt.getCoordinate(),Dt=0;Dt<At.length-1;Dt++){var Ft=$i.distancePointLine(Ot,At[Dt],At[Dt+1]);if(Ft<st._minDistance){st._minDistance=Ft;var jt=new Qi(At[Dt],At[Dt+1]),Gt=jt.closestPoint(Ot);Et[0]=new Ll(_t,Dt,Gt),Et[1]=new Ll(xt,0,Ot)}if(st._minDistance<=st._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ia&&arguments[1]instanceof ia){var Jt=arguments[0],qt=arguments[1],on=arguments[2];if(Jt.getEnvelopeInternal().distance(qt.getEnvelopeInternal())>this._minDistance)return null;for(var vn=Jt.getCoordinates(),_n=qt.getCoordinates(),En=0;En<vn.length-1;En++)for(var cn=0;cn<_n.length-1;cn++){var Hn=$i.distanceLineLine(vn[En],vn[En+1],_n[cn],_n[cn+1]);if(Hn<st._minDistance){st._minDistance=Hn;var nr=new Qi(vn[En],vn[En+1]),bn=new Qi(_n[cn],_n[cn+1]),zn=nr.closestPoints(bn);on[0]=new Ll(Jt,En,zn[0]),on[1]=new Ll(qt,cn,zn[1])}if(st._minDistance<=st._terminateDistance)return null}}}},rl.prototype.computeMinDistancePoints=function(st,_t,xt){for(var Et=this,At=0;At<st.size();At++)for(var Ot=st.get(At),Dt=0;Dt<_t.size();Dt++){var Ft=_t.get(Dt),jt=Ot.getCoordinate().distance(Ft.getCoordinate());if(jt<Et._minDistance&&(Et._minDistance=jt,xt[0]=new Ll(Ot,0,Ot.getCoordinate()),xt[1]=new Ll(Ft,0,Ft.getCoordinate())),Et._minDistance<=Et._terminateDistance)return null}},rl.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new ra("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},rl.prototype.computeMinDistanceLines=function(st,_t,xt){for(var Et=this,At=0;At<st.size();At++)for(var Ot=st.get(At),Dt=0;Dt<_t.size();Dt++){var Ft=_t.get(Dt);if(Et.computeMinDistance(Ot,Ft,xt),Et._minDistance<=Et._terminateDistance)return null}},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.distance=function(st,_t){return new rl(st,_t).distance()},rl.isWithinDistance=function(st,_t,xt){return new rl(st,_t,xt).distance()<=xt},rl.nearestPoints=function(st,_t){return new rl(st,_t).nearestPoints()};var xl=function(){this._pt=[new Ur,new Ur],this._distance=Po.NaN,this._isNull=!0};xl.prototype.getCoordinates=function(){return this._pt},xl.prototype.getCoordinate=function(st){return this._pt[st]},xl.prototype.setMinimum=function(){if(arguments.length===1){var st=arguments[0];this.setMinimum(st._pt[0],st._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Et=_t.distance(xt);Et<this._distance&&this.initialize(_t,xt,Et)}},xl.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var st=arguments[0],_t=arguments[1];this._pt[0].setCoordinate(st),this._pt[1].setCoordinate(_t),this._distance=st.distance(_t),this._isNull=!1}else if(arguments.length===3){var xt=arguments[0],Et=arguments[1],At=arguments[2];this._pt[0].setCoordinate(xt),this._pt[1].setCoordinate(Et),this._distance=At,this._isNull=!1}},xl.prototype.toString=function(){return Uu.toLineString(this._pt[0],this._pt[1])},xl.prototype.getDistance=function(){return this._distance},xl.prototype.setMaximum=function(){if(arguments.length===1){var st=arguments[0];this.setMaximum(st._pt[0],st._pt[1])}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1];if(this._isNull)return this.initialize(_t,xt),null;var Et=_t.distance(xt);Et>this._distance&&this.initialize(_t,xt,Et)}},xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl};var ec=function(){};ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeDistance=function(){if(arguments[2]instanceof xl&&arguments[0]instanceof ia&&arguments[1]instanceof Ur)for(var st=arguments[0],_t=arguments[1],xt=arguments[2],Et=new Qi,At=st.getCoordinates(),Ot=0;Ot<At.length-1;Ot++){Et.setCoordinates(At[Ot],At[Ot+1]);var Dt=Et.closestPoint(_t);xt.setMinimum(Dt,_t)}else if(arguments[2]instanceof xl&&arguments[0]instanceof Ia&&arguments[1]instanceof Ur){var Ft=arguments[0],jt=arguments[1],Gt=arguments[2];ec.computeDistance(Ft.getExteriorRing(),jt,Gt);for(var Jt=0;Jt<Ft.getNumInteriorRing();Jt++)ec.computeDistance(Ft.getInteriorRingN(Jt),jt,Gt)}else if(arguments[2]instanceof xl&&arguments[0]instanceof go&&arguments[1]instanceof Ur){var qt=arguments[0],on=arguments[1],vn=arguments[2];if(qt instanceof ia)ec.computeDistance(qt,on,vn);else if(qt instanceof Ia)ec.computeDistance(qt,on,vn);else if(qt instanceof Al)for(var _n=qt,En=0;En<_n.getNumGeometries();En++){var cn=_n.getGeometryN(En);ec.computeDistance(cn,on,vn)}else vn.setMinimum(qt.getCoordinate(),on)}else if(arguments[2]instanceof xl&&arguments[0]instanceof Qi&&arguments[1]instanceof Ur){var Hn=arguments[0],nr=arguments[1],bn=arguments[2],zn=Hn.closestPoint(nr);bn.setMinimum(zn,nr)}};var gu=function(){this._g0=null,this._g1=null,this._ptDist=new xl,this._densifyFrac=0;var st=arguments[0],_t=arguments[1];this._g0=st,this._g1=_t},cf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};gu.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},gu.prototype.setDensifyFraction=function(st){if(st>1||st<=0)throw new ra("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=st},gu.prototype.compute=function(st,_t){this.computeOrientedDistance(st,_t,this._ptDist),this.computeOrientedDistance(_t,st,this._ptDist)},gu.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},gu.prototype.computeOrientedDistance=function(st,_t,xt){var Et=new hf(_t);if(st.apply(Et),xt.setMaximum(Et.getMaxPointDistance()),this._densifyFrac>0){var At=new Gh(_t,this._densifyFrac);st.apply(At),xt.setMaximum(At.getMaxPointDistance())}},gu.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},gu.prototype.interfaces_=function(){return[]},gu.prototype.getClass=function(){return gu},gu.distance=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1],xt=new gu(st,_t);return xt.distance()}if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2],Dt=new gu(Et,At);return Dt.setDensifyFraction(Ot),Dt.distance()}},cf.MaxPointDistanceFilter.get=function(){return hf},cf.MaxDensifiedByFractionDistanceFilter.get=function(){return Gh},Object.defineProperties(gu,cf);var hf=function(){this._maxPtDist=new xl,this._minPtDist=new xl,this._euclideanDist=new ec,this._geom=null;var st=arguments[0];this._geom=st};hf.prototype.filter=function(st){this._minPtDist.initialize(),ec.computeDistance(this._geom,st,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},hf.prototype.getMaxPointDistance=function(){return this._maxPtDist},hf.prototype.interfaces_=function(){return[Bc]},hf.prototype.getClass=function(){return hf};var Gh=function(){this._maxPtDist=new xl,this._minPtDist=new xl,this._geom=null,this._numSubSegs=0;var st=arguments[0],_t=arguments[1];this._geom=st,this._numSubSegs=Math.trunc(Math.round(1/_t))};Gh.prototype.filter=function(st,_t){var xt=this;if(_t===0)return null;for(var Et=st.getCoordinate(_t-1),At=st.getCoordinate(_t),Ot=(At.x-Et.x)/this._numSubSegs,Dt=(At.y-Et.y)/this._numSubSegs,Ft=0;Ft<this._numSubSegs;Ft++){var jt=Et.x+Ft*Ot,Gt=Et.y+Ft*Dt,Jt=new Ur(jt,Gt);xt._minPtDist.initialize(),ec.computeDistance(xt._geom,Jt,xt._minPtDist),xt._maxPtDist.setMaximum(xt._minPtDist)}},Gh.prototype.isDone=function(){return!1},Gh.prototype.isGeometryChanged=function(){return!1},Gh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gh.prototype.interfaces_=function(){return[Gu]},Gh.prototype.getClass=function(){return Gh};var nu=function(st,_t,xt){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=st||null,this._bufDistance=_t||null,this._result=xt||null},B0={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};nu.prototype.checkMaximumDistance=function(st,_t,xt){var Et=new gu(_t,st);if(Et.setDensifyFraction(.25),this._maxDistanceFound=Et.orientedDistance(),this._maxDistanceFound>xt){this._isValid=!1;var At=Et.getCoordinates();this._errorLocation=At[1],this._errorIndicator=st.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Uu.toLineString(At[0],At[1])+")"}},nu.prototype.isValid=function(){var st=Math.abs(this._bufDistance),_t=nu.MAX_DISTANCE_DIFF_FRAC*st;return this._minValidDistance=st-_t,this._maxValidDistance=st+_t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),nu.VERBOSE&&ul.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},nu.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ia||this._input instanceof Vc||this._input instanceof Al))return null;var st=this.getPolygonLines(this._input);if(this.checkMinimumDistance(st,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(st,this._result,this._maxValidDistance)},nu.prototype.getErrorIndicator=function(){return this._errorIndicator},nu.prototype.checkMinimumDistance=function(st,_t,xt){var Et=new rl(st,_t,xt);if(this._minDistanceFound=Et.distance(),this._minDistanceFound<xt){this._isValid=!1;var At=Et.nearestPoints();this._errorLocation=Et.nearestPoints()[1],this._errorIndicator=st.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Uu.toLineString(At[0],At[1])+" )"}},nu.prototype.checkPositiveValid=function(){var st=this._result.getBoundary();if(this.checkMinimumDistance(this._input,st,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,st,this._maxValidDistance)},nu.prototype.getErrorLocation=function(){return this._errorLocation},nu.prototype.getPolygonLines=function(st){for(var _t=new Ii,xt=new cl(_t),Et=gh.getPolygons(st).iterator();Et.hasNext();)Et.next().apply(xt);return st.getFactory().buildGeometry(_t)},nu.prototype.getErrorMessage=function(){return this._errMsg},nu.prototype.interfaces_=function(){return[]},nu.prototype.getClass=function(){return nu},B0.VERBOSE.get=function(){return!1},B0.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(nu,B0);var hl=function(st,_t,xt){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=st||null,this._distance=_t||null,this._result=xt||null},F0={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};hl.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},hl.prototype.checkEnvelope=function(){if(this._distance<0)return null;var st=this._distance*hl.MAX_ENV_DIFF_FRAC;st===0&&(st=.001);var _t=new to(this._input.getEnvelopeInternal());_t.expandBy(this._distance);var xt=new to(this._result.getEnvelopeInternal());xt.expandBy(st),xt.contains(_t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(xt)),this.report("Envelope")},hl.prototype.checkDistance=function(){var st=new nu(this._input,this._distance,this._result);st.isValid()||(this._isValid=!1,this._errorMsg=st.getErrorMessage(),this._errorLocation=st.getErrorLocation(),this._errorIndicator=st.getErrorIndicator()),this.report("Distance")},hl.prototype.checkArea=function(){var st=this._input.getArea(),_t=this._result.getArea();this._distance>0&&st>_t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&st<_t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},hl.prototype.checkPolygonal=function(){this._result instanceof Ia||this._result instanceof Vc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},hl.prototype.getErrorIndicator=function(){return this._errorIndicator},hl.prototype.getErrorLocation=function(){return this._errorLocation},hl.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},hl.prototype.report=function(st){if(!hl.VERBOSE)return null;ul.out.println("Check "+st+": "+(this._isValid?"passed":"FAILED"))},hl.prototype.getErrorMessage=function(){return this._errorMsg},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.isValidMsg=function(st,_t,xt){var Et=new hl(st,_t,xt);return Et.isValid()?null:Et.getErrorMessage()},hl.isValid=function(st,_t,xt){return!!new hl(st,_t,xt).isValid()},F0.VERBOSE.get=function(){return!1},F0.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(hl,F0);var bc=function(){this._pts=null,this._data=null;var st=arguments[0],_t=arguments[1];this._pts=st,this._data=_t};bc.prototype.getCoordinates=function(){return this._pts},bc.prototype.size=function(){return this._pts.length},bc.prototype.getCoordinate=function(st){return this._pts[st]},bc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},bc.prototype.getSegmentOctant=function(st){return st===this._pts.length-1?-1:Ju.octant(this.getCoordinate(st),this.getCoordinate(st+1))},bc.prototype.setData=function(st){this._data=st},bc.prototype.getData=function(){return this._data},bc.prototype.toString=function(){return Uu.toLineString(new va(this._pts))},bc.prototype.interfaces_=function(){return[Ma]},bc.prototype.getClass=function(){return bc};var il=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ii,this._intersectionCount=0,this._keepIntersections=!0;var st=arguments[0];this._li=st,this._interiorIntersection=null};il.prototype.getInteriorIntersection=function(){return this._interiorIntersection},il.prototype.setCheckEndSegmentsOnly=function(st){this._isCheckEndSegmentsOnly=st},il.prototype.getIntersectionSegments=function(){return this._intSegments},il.prototype.count=function(){return this._intersectionCount},il.prototype.getIntersections=function(){return this._intersections},il.prototype.setFindAllIntersections=function(st){this._findAllIntersections=st},il.prototype.setKeepIntersections=function(st){this._keepIntersections=st},il.prototype.processIntersections=function(st,_t,xt,Et){if(!this._findAllIntersections&&this.hasIntersection()||st===xt&&_t===Et||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(st,_t)||this.isEndSegment(xt,Et)))return null;var At=st.getCoordinates()[_t],Ot=st.getCoordinates()[_t+1],Dt=xt.getCoordinates()[Et],Ft=xt.getCoordinates()[Et+1];this._li.computeIntersection(At,Ot,Dt,Ft),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=At,this._intSegments[1]=Ot,this._intSegments[2]=Dt,this._intSegments[3]=Ft,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},il.prototype.isEndSegment=function(st,_t){return _t===0||_t>=st.size()-2},il.prototype.hasIntersection=function(){return this._interiorIntersection!==null},il.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},il.prototype.interfaces_=function(){return[Ed]},il.prototype.getClass=function(){return il},il.createAllIntersectionsFinder=function(st){var _t=new il(st);return _t.setFindAllIntersections(!0),_t},il.createAnyIntersectionFinder=function(st){return new il(st)},il.createIntersectionCounter=function(st){var _t=new il(st);return _t.setFindAllIntersections(!0),_t.setKeepIntersections(!1),_t};var Iu=function(){this._li=new $h,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var st=arguments[0];this._segStrings=st};Iu.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},Iu.prototype.getIntersections=function(){return this._segInt.getIntersections()},Iu.prototype.isValid=function(){return this.execute(),this._isValid},Iu.prototype.setFindAllIntersections=function(st){this._findAllIntersections=st},Iu.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new il(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var st=new $0;if(st.setSegmentIntersector(this._segInt),st.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Iu.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ph(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Iu.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var st=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Uu.toLineString(st[0],st[1])+" and "+Uu.toLineString(st[2],st[3])},Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.computeIntersections=function(st){var _t=new Iu(st);return _t.setFindAllIntersections(!0),_t.isValid(),_t.getIntersections()};var Cd=function st(){this._nv=null;var _t=arguments[0];this._nv=new Iu(st.toSegmentStrings(_t))};Cd.prototype.checkValid=function(){this._nv.checkValid()},Cd.prototype.interfaces_=function(){return[]},Cd.prototype.getClass=function(){return Cd},Cd.toSegmentStrings=function(st){for(var _t=new Ii,xt=st.iterator();xt.hasNext();){var Et=xt.next();_t.add(new bc(Et.getCoordinates(),Et))}return _t},Cd.checkValid=function(st){new Cd(st).checkValid()};var df=function(st){this._mapOp=st};df.prototype.map=function(st){for(var _t=new Ii,xt=0;xt<st.getNumGeometries();xt++){var Et=this._mapOp.map(st.getGeometryN(xt));Et.isEmpty()||_t.add(Et)}return st.getFactory().createGeometryCollection(Zo.toGeometryArray(_t))},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.map=function(st,_t){return new df(_t).map(st)};var xc=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ii,this._resultLineList=new Ii;var st=arguments[0],_t=arguments[1],xt=arguments[2];this._op=st,this._geometryFactory=_t,this._ptLocator=xt};xc.prototype.collectLines=function(st){for(var _t=this,xt=this._op.getGraph().getEdgeEnds().iterator();xt.hasNext();){var Et=xt.next();_t.collectLineEdge(Et,st,_t._lineEdgesList),_t.collectBoundaryTouchEdge(Et,st,_t._lineEdgesList)}},xc.prototype.labelIsolatedLine=function(st,_t){var xt=this._ptLocator.locate(st.getCoordinate(),this._op.getArgGeometry(_t));st.getLabel().setLocation(_t,xt)},xc.prototype.build=function(st){return this.findCoveredLineEdges(),this.collectLines(st),this.buildLines(st),this._resultLineList},xc.prototype.collectLineEdge=function(st,_t,xt){var Et=st.getLabel(),At=st.getEdge();st.isLineEdge()&&(st.isVisited()||!Do.isResultOfOp(Et,_t)||At.isCovered()||(xt.add(At),st.setVisitedEdge(!0)))},xc.prototype.findCoveredLineEdges=function(){for(var st=this._op.getGraph().getNodes().iterator();st.hasNext();)st.next().getEdges().findCoveredLineEdges();for(var _t=this._op.getGraph().getEdgeEnds().iterator();_t.hasNext();){var xt=_t.next(),Et=xt.getEdge();if(xt.isLineEdge()&&!Et.isCoveredSet()){var At=this._op.isCoveredByA(xt.getCoordinate());Et.setCovered(At)}}},xc.prototype.labelIsolatedLines=function(st){for(var _t=st.iterator();_t.hasNext();){var xt=_t.next(),Et=xt.getLabel();xt.isIsolated()&&(Et.isNull(0)?this.labelIsolatedLine(xt,0):this.labelIsolatedLine(xt,1))}},xc.prototype.buildLines=function(st){for(var _t=this._lineEdgesList.iterator();_t.hasNext();){var xt=_t.next(),Et=this._geometryFactory.createLineString(xt.getCoordinates());this._resultLineList.add(Et),xt.setInResult(!0)}},xc.prototype.collectBoundaryTouchEdge=function(st,_t,xt){var Et=st.getLabel();return st.isLineEdge()||st.isVisited()||st.isInteriorAreaEdge()||st.getEdge().isInResult()?null:(No.isTrue(!(st.isInResult()||st.getSym().isInResult())||!st.getEdge().isInResult()),void(Do.isResultOfOp(Et,_t)&&_t===Do.INTERSECTION&&(xt.add(st.getEdge()),st.setVisitedEdge(!0))))},xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var ff=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ii;var st=arguments[0],_t=arguments[1];this._op=st,this._geometryFactory=_t};ff.prototype.filterCoveredNodeToPoint=function(st){var _t=st.getCoordinate();if(!this._op.isCoveredByLA(_t)){var xt=this._geometryFactory.createPoint(_t);this._resultPointList.add(xt)}},ff.prototype.extractNonCoveredResultNodes=function(st){for(var _t=this._op.getGraph().getNodes().iterator();_t.hasNext();){var xt=_t.next();if(!xt.isInResult()&&!xt.isIncidentEdgeInResult()&&(xt.getEdges().getDegree()===0||st===Do.INTERSECTION)){var Et=xt.getLabel();Do.isResultOfOp(Et,st)&&this.filterCoveredNodeToPoint(xt)}}},ff.prototype.build=function(st){return this.extractNonCoveredResultNodes(st),this._resultPointList},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var Ol=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ol.prototype.transformPoint=function(st,_t){return this._factory.createPoint(this.transformCoordinates(st.getCoordinateSequence(),st))},Ol.prototype.transformPolygon=function(st,_t){var xt=!0,Et=this.transformLinearRing(st.getExteriorRing(),st);Et!==null&&Et instanceof Hc&&!Et.isEmpty()||(xt=!1);for(var At=new Ii,Ot=0;Ot<st.getNumInteriorRing();Ot++){var Dt=this.transformLinearRing(st.getInteriorRingN(Ot),st);Dt===null||Dt.isEmpty()||(Dt instanceof Hc||(xt=!1),At.add(Dt))}if(xt)return this._factory.createPolygon(Et,At.toArray([]));var Ft=new Ii;return Et!==null&&Ft.add(Et),Ft.addAll(At),this._factory.buildGeometry(Ft)},Ol.prototype.createCoordinateSequence=function(st){return this._factory.getCoordinateSequenceFactory().create(st)},Ol.prototype.getInputGeometry=function(){return this._inputGeom},Ol.prototype.transformMultiLineString=function(st,_t){for(var xt=new Ii,Et=0;Et<st.getNumGeometries();Et++){var At=this.transformLineString(st.getGeometryN(Et),st);At!==null&&(At.isEmpty()||xt.add(At))}return this._factory.buildGeometry(xt)},Ol.prototype.transformCoordinates=function(st,_t){return this.copy(st)},Ol.prototype.transformLineString=function(st,_t){return this._factory.createLineString(this.transformCoordinates(st.getCoordinateSequence(),st))},Ol.prototype.transformMultiPoint=function(st,_t){for(var xt=new Ii,Et=0;Et<st.getNumGeometries();Et++){var At=this.transformPoint(st.getGeometryN(Et),st);At!==null&&(At.isEmpty()||xt.add(At))}return this._factory.buildGeometry(xt)},Ol.prototype.transformMultiPolygon=function(st,_t){for(var xt=new Ii,Et=0;Et<st.getNumGeometries();Et++){var At=this.transformPolygon(st.getGeometryN(Et),st);At!==null&&(At.isEmpty()||xt.add(At))}return this._factory.buildGeometry(xt)},Ol.prototype.copy=function(st){return st.copy()},Ol.prototype.transformGeometryCollection=function(st,_t){for(var xt=new Ii,Et=0;Et<st.getNumGeometries();Et++){var At=this.transform(st.getGeometryN(Et));At!==null&&(this._pruneEmptyGeometry&&At.isEmpty()||xt.add(At))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Zo.toGeometryArray(xt)):this._factory.buildGeometry(xt)},Ol.prototype.transform=function(st){if(this._inputGeom=st,this._factory=st.getFactory(),st instanceof Kl)return this.transformPoint(st,null);if(st instanceof Qf)return this.transformMultiPoint(st,null);if(st instanceof Hc)return this.transformLinearRing(st,null);if(st instanceof ia)return this.transformLineString(st,null);if(st instanceof Bh)return this.transformMultiLineString(st,null);if(st instanceof Ia)return this.transformPolygon(st,null);if(st instanceof Vc)return this.transformMultiPolygon(st,null);if(st instanceof Al)return this.transformGeometryCollection(st,null);throw new ra("Unknown Geometry subtype: "+st.getClass().getName())},Ol.prototype.transformLinearRing=function(st,_t){var xt=this.transformCoordinates(st.getCoordinateSequence(),st);if(xt===null)return this._factory.createLinearRing(null);var Et=xt.size();return Et>0&&Et<4&&!this._preserveType?this._factory.createLineString(xt):this._factory.createLinearRing(xt)},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var Ms=function st(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Qi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ia&&typeof arguments[1]=="number"){var _t=arguments[0],xt=arguments[1];st.call(this,_t.getCoordinates(),xt)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var Et=arguments[0],At=arguments[1];this._srcPts=Et,this._isClosed=st.isClosed(Et),this._snapTolerance=At}};Ms.prototype.snapVertices=function(st,_t){for(var xt=this._isClosed?st.size()-1:st.size(),Et=0;Et<xt;Et++){var At=st.get(Et),Ot=this.findSnapForVertex(At,_t);Ot!==null&&(st.set(Et,new Ur(Ot)),Et===0&&this._isClosed&&st.set(st.size()-1,new Ur(Ot)))}},Ms.prototype.findSnapForVertex=function(st,_t){for(var xt=0;xt<_t.length;xt++){if(st.equals2D(_t[xt]))return null;if(st.distance(_t[xt])<this._snapTolerance)return _t[xt]}return null},Ms.prototype.snapTo=function(st){var _t=new Qp(this._srcPts);return this.snapVertices(_t,st),this.snapSegments(_t,st),_t.toCoordinateArray()},Ms.prototype.snapSegments=function(st,_t){if(_t.length===0)return null;var xt=_t.length;_t[0].equals2D(_t[_t.length-1])&&(xt=_t.length-1);for(var Et=0;Et<xt;Et++){var At=_t[Et],Ot=this.findSegmentIndexToSnap(At,st);Ot>=0&&st.add(Ot+1,new Ur(At),!1)}},Ms.prototype.findSegmentIndexToSnap=function(st,_t){for(var xt=this,Et=Po.MAX_VALUE,At=-1,Ot=0;Ot<_t.size()-1;Ot++){if(xt._seg.p0=_t.get(Ot),xt._seg.p1=_t.get(Ot+1),xt._seg.p0.equals2D(st)||xt._seg.p1.equals2D(st)){if(xt._allowSnappingToSourceVertices)continue;return-1}var Dt=xt._seg.distance(st);Dt<xt._snapTolerance&&Dt<Et&&(Et=Dt,At=Ot)}return At},Ms.prototype.setAllowSnappingToSourceVertices=function(st){this._allowSnappingToSourceVertices=st},Ms.prototype.interfaces_=function(){return[]},Ms.prototype.getClass=function(){return Ms},Ms.isClosed=function(st){return!(st.length<=1)&&st[0].equals2D(st[st.length-1])};var is=function(st){this._srcGeom=st||null},ym={SNAP_PRECISION_FACTOR:{configurable:!0}};is.prototype.snapTo=function(st,_t){var xt=this.extractTargetCoordinates(st);return new vm(_t,xt).transform(this._srcGeom)},is.prototype.snapToSelf=function(st,_t){var xt=this.extractTargetCoordinates(this._srcGeom),Et=new vm(st,xt,!0).transform(this._srcGeom),At=Et;return _t&&xo(At,Fh)&&(At=Et.buffer(0)),At},is.prototype.computeSnapTolerance=function(st){return this.computeMinimumSegmentLength(st)/10},is.prototype.extractTargetCoordinates=function(st){for(var _t=new Wu,xt=st.getCoordinates(),Et=0;Et<xt.length;Et++)_t.add(xt[Et]);return _t.toArray(new Array(0).fill(null))},is.prototype.computeMinimumSegmentLength=function(st){for(var _t=Po.MAX_VALUE,xt=0;xt<st.length-1;xt++){var Et=st[xt].distance(st[xt+1]);Et<_t&&(_t=Et)}return _t},is.prototype.interfaces_=function(){return[]},is.prototype.getClass=function(){return is},is.snap=function(st,_t,xt){var Et=new Array(2).fill(null),At=new is(st);Et[0]=At.snapTo(_t,xt);var Ot=new is(_t);return Et[1]=Ot.snapTo(Et[0],xt),Et},is.computeOverlaySnapTolerance=function(){if(arguments.length===1){var st=arguments[0],_t=is.computeSizeBasedSnapTolerance(st),xt=st.getPrecisionModel();if(xt.getType()===Ns.FIXED){var Et=1/xt.getScale()*2/1.415;Et>_t&&(_t=Et)}return _t}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return Math.min(is.computeOverlaySnapTolerance(At),is.computeOverlaySnapTolerance(Ot))}},is.computeSizeBasedSnapTolerance=function(st){var _t=st.getEnvelopeInternal();return Math.min(_t.getHeight(),_t.getWidth())*is.SNAP_PRECISION_FACTOR},is.snapToSelf=function(st,_t,xt){return new is(st).snapToSelf(_t,xt)},ym.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(is,ym);var vm=function(st){function _t(xt,Et,At){st.call(this),this._snapTolerance=xt||null,this._snapPts=Et||null,this._isSelfSnap=At!==void 0&&At}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.snapLine=function(xt,Et){var At=new Ms(xt,this._snapTolerance);return At.setAllowSnappingToSourceVertices(this._isSelfSnap),At.snapTo(Et)},_t.prototype.transformCoordinates=function(xt,Et){var At=xt.toCoordinateArray(),Ot=this.snapLine(At,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(Ot)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ol),ol=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ol.prototype.getCommon=function(){return Po.longBitsToDouble(this._commonBits)},ol.prototype.add=function(st){var _t=Po.doubleToLongBits(st);return this._isFirst?(this._commonBits=_t,this._commonSignExp=ol.signExpBits(this._commonBits),this._isFirst=!1,null):ol.signExpBits(_t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ol.numCommonMostSigMantissaBits(this._commonBits,_t),void(this._commonBits=ol.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ol.prototype.toString=function(){if(arguments.length===1){var st=arguments[0],_t=Po.longBitsToDouble(st),xt=Po.toBinaryString(st),Et="0000000000000000000000000000000000000000000000000000000000000000"+xt,At=Et.substring(Et.length-64),Ot=At.substring(0,1)+"  "+At.substring(1,12)+"(exp) "+At.substring(12)+" [ "+_t+" ]";return Ot}},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.getBit=function(st,_t){return(st&1<<_t)!=0?1:0},ol.signExpBits=function(st){return st>>52},ol.zeroLowerBits=function(st,_t){return st&~((1<<_t)-1)},ol.numCommonMostSigMantissaBits=function(st,_t){for(var xt=0,Et=52;Et>=0;Et--){if(ol.getBit(st,Et)!==ol.getBit(_t,Et))return xt;xt++}return 52};var wc=function(){this._commonCoord=null,this._ccFilter=new yh},sp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};wc.prototype.addCommonBits=function(st){var _t=new Ec(this._commonCoord);st.apply(_t),st.geometryChanged()},wc.prototype.removeCommonBits=function(st){if(this._commonCoord.x===0&&this._commonCoord.y===0)return st;var _t=new Ur(this._commonCoord);_t.x=-_t.x,_t.y=-_t.y;var xt=new Ec(_t);return st.apply(xt),st.geometryChanged(),st},wc.prototype.getCommonCoordinate=function(){return this._commonCoord},wc.prototype.add=function(st){st.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc},sp.CommonCoordinateFilter.get=function(){return yh},sp.Translater.get=function(){return Ec},Object.defineProperties(wc,sp);var yh=function(){this._commonBitsX=new ol,this._commonBitsY=new ol};yh.prototype.filter=function(st){this._commonBitsX.add(st.x),this._commonBitsY.add(st.y)},yh.prototype.getCommonCoordinate=function(){return new Ur(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},yh.prototype.interfaces_=function(){return[Bc]},yh.prototype.getClass=function(){return yh};var Ec=function(){this.trans=null;var st=arguments[0];this.trans=st};Ec.prototype.filter=function(st,_t){var xt=st.getOrdinate(_t,0)+this.trans.x,Et=st.getOrdinate(_t,1)+this.trans.y;st.setOrdinate(_t,0,xt),st.setOrdinate(_t,1,Et)},Ec.prototype.isDone=function(){return!1},Ec.prototype.isGeometryChanged=function(){return!0},Ec.prototype.interfaces_=function(){return[Gu]},Ec.prototype.getClass=function(){return Ec};var Da=function(st,_t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=st,this._geom[1]=_t,this.computeSnapTolerance()};Da.prototype.selfSnap=function(st){return new is(st).snapTo(st,this._snapTolerance)},Da.prototype.removeCommonBits=function(st){this._cbr=new wc,this._cbr.add(st[0]),this._cbr.add(st[1]);var _t=new Array(2).fill(null);return _t[0]=this._cbr.removeCommonBits(st[0].copy()),_t[1]=this._cbr.removeCommonBits(st[1].copy()),_t},Da.prototype.prepareResult=function(st){return this._cbr.addCommonBits(st),st},Da.prototype.getResultGeometry=function(st){var _t=this.snap(this._geom),xt=Do.overlayOp(_t[0],_t[1],st);return this.prepareResult(xt)},Da.prototype.checkValid=function(st){st.isValid()||ul.out.println("Snapped geometry is invalid")},Da.prototype.computeSnapTolerance=function(){this._snapTolerance=is.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Da.prototype.snap=function(st){var _t=this.removeCommonBits(st);return is.snap(_t[0],_t[1],this._snapTolerance)},Da.prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da},Da.overlayOp=function(st,_t,xt){return new Da(st,_t).getResultGeometry(xt)},Da.union=function(st,_t){return Da.overlayOp(st,_t,Do.UNION)},Da.intersection=function(st,_t){return Da.overlayOp(st,_t,Do.INTERSECTION)},Da.symDifference=function(st,_t){return Da.overlayOp(st,_t,Do.SYMDIFFERENCE)},Da.difference=function(st,_t){return Da.overlayOp(st,_t,Do.DIFFERENCE)};var sl=function(st,_t){this._geom=new Array(2).fill(null),this._geom[0]=st,this._geom[1]=_t};sl.prototype.getResultGeometry=function(st){var _t=null,xt=!1,Et=null;try{_t=Do.overlayOp(this._geom[0],this._geom[1],st),xt=!0}catch(At){if(!(At instanceof hh))throw At;Et=At}if(!xt)try{_t=Da.overlayOp(this._geom[0],this._geom[1],st)}catch(At){throw At instanceof hh?Et:At}return _t},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.overlayOp=function(st,_t,xt){return new sl(st,_t).getResultGeometry(xt)},sl.union=function(st,_t){return sl.overlayOp(st,_t,Do.UNION)},sl.intersection=function(st,_t){return sl.overlayOp(st,_t,Do.INTERSECTION)},sl.symDifference=function(st,_t){return sl.overlayOp(st,_t,Do.SYMDIFFERENCE)},sl.difference=function(st,_t){return sl.overlayOp(st,_t,Do.DIFFERENCE)};var Td=function(){this.mce=null,this.chainIndex=null;var st=arguments[0],_t=arguments[1];this.mce=st,this.chainIndex=_t};Td.prototype.computeIntersections=function(st,_t){this.mce.computeIntersectsForChain(this.chainIndex,st.mce,st.chainIndex,_t)},Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td};var wl=function st(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var _t=arguments[0],xt=arguments[1];this._eventType=st.DELETE,this._xValue=_t,this._insertEvent=xt}else if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2];this._eventType=st.INSERT,this._label=Et,this._xValue=At,this._obj=Ot}},z0={INSERT:{configurable:!0},DELETE:{configurable:!0}};wl.prototype.isDelete=function(){return this._eventType===wl.DELETE},wl.prototype.setDeleteEventIndex=function(st){this._deleteEventIndex=st},wl.prototype.getObject=function(){return this._obj},wl.prototype.compareTo=function(st){var _t=st;return this._xValue<_t._xValue?-1:this._xValue>_t._xValue?1:this._eventType<_t._eventType?-1:this._eventType>_t._eventType?1:0},wl.prototype.getInsertEvent=function(){return this._insertEvent},wl.prototype.isInsert=function(){return this._eventType===wl.INSERT},wl.prototype.isSameLabel=function(st){return this._label!==null&&this._label===st._label},wl.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},wl.prototype.interfaces_=function(){return[Su]},wl.prototype.getClass=function(){return wl},z0.INSERT.get=function(){return 1},z0.DELETE.get=function(){return 2},Object.defineProperties(wl,z0);var pf=function(){};pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var Na=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var st=arguments[0],_t=arguments[1],xt=arguments[2];this._li=st,this._includeProper=_t,this._recordIsolated=xt};Na.prototype.isTrivialIntersection=function(st,_t,xt,Et){if(st===xt&&this._li.getIntersectionNum()===1){if(Na.isAdjacentSegments(_t,Et))return!0;if(st.isClosed()){var At=st.getNumPoints()-1;if(_t===0&&Et===At||Et===0&&_t===At)return!0}}return!1},Na.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Na.prototype.setIsDoneIfProperInt=function(st){this._isDoneWhenProperInt=st},Na.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Na.prototype.isBoundaryPointInternal=function(st,_t){for(var xt=_t.iterator();xt.hasNext();){var Et=xt.next().getCoordinate();if(st.isIntersection(Et))return!0}return!1},Na.prototype.hasProperIntersection=function(){return this._hasProper},Na.prototype.hasIntersection=function(){return this._hasIntersection},Na.prototype.isDone=function(){return this._isDone},Na.prototype.isBoundaryPoint=function(st,_t){return _t!==null&&(!!this.isBoundaryPointInternal(st,_t[0])||!!this.isBoundaryPointInternal(st,_t[1]))},Na.prototype.setBoundaryNodes=function(st,_t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=st,this._bdyNodes[1]=_t},Na.prototype.addIntersections=function(st,_t,xt,Et){if(st===xt&&_t===Et)return null;this.numTests++;var At=st.getCoordinates()[_t],Ot=st.getCoordinates()[_t+1],Dt=xt.getCoordinates()[Et],Ft=xt.getCoordinates()[Et+1];this._li.computeIntersection(At,Ot,Dt,Ft),this._li.hasIntersection()&&(this._recordIsolated&&(st.setIsolated(!1),xt.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(st,_t,xt,Et)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(st.addIntersections(this._li,_t,0),xt.addIntersections(this._li,Et,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na},Na.isAdjacentSegments=function(st,_t){return Math.abs(st-_t)===1};var l_=function(st){function _t(){st.call(this),this.events=new Ii,this.nOverlaps=null}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.prepareEvents=function(){Ku.sort(this.events);for(var xt=0;xt<this.events.size();xt++){var Et=this.events.get(xt);Et.isDelete()&&Et.getInsertEvent().setDeleteEventIndex(xt)}},_t.prototype.computeIntersections=function(){var xt=this;if(arguments.length===1){var Et=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var At=0;At<this.events.size();At++){var Ot=xt.events.get(At);if(Ot.isInsert()&&xt.processOverlaps(At,Ot.getDeleteEventIndex(),Ot,Et),Et.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Na&&xo(arguments[0],ju)&&xo(arguments[1],ju)){var Dt=arguments[0],Ft=arguments[1],jt=arguments[2];this.addEdges(Dt,Dt),this.addEdges(Ft,Ft),this.computeIntersections(jt)}else if(typeof arguments[2]=="boolean"&&xo(arguments[0],ju)&&arguments[1]instanceof Na){var Gt=arguments[0],Jt=arguments[1],qt=arguments[2];qt?this.addEdges(Gt,null):this.addEdges(Gt),this.computeIntersections(Jt)}}},_t.prototype.addEdge=function(xt,Et){for(var At=xt.getMonotoneChainEdge(),Ot=At.getStartIndexes(),Dt=0;Dt<Ot.length-1;Dt++){var Ft=new Td(At,Dt),jt=new wl(Et,At.getMinX(Dt),Ft);this.events.add(jt),this.events.add(new wl(At.getMaxX(Dt),jt))}},_t.prototype.processOverlaps=function(xt,Et,At,Ot){for(var Dt=At.getObject(),Ft=xt;Ft<Et;Ft++){var jt=this.events.get(Ft);if(jt.isInsert()){var Gt=jt.getObject();At.isSameLabel(jt)||(Dt.computeIntersections(Gt,Ot),this.nOverlaps++)}}},_t.prototype.addEdges=function(){var xt=this;if(arguments.length===1)for(var Et=arguments[0],At=Et.iterator();At.hasNext();){var Ot=At.next();xt.addEdge(Ot,Ot)}else if(arguments.length===2)for(var Dt=arguments[0],Ft=arguments[1],jt=Dt.iterator();jt.hasNext();){var Gt=jt.next();xt.addEdge(Gt,Ft)}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(pf),Xc=function(){this._min=Po.POSITIVE_INFINITY,this._max=Po.NEGATIVE_INFINITY},By={NodeComparator:{configurable:!0}};Xc.prototype.getMin=function(){return this._min},Xc.prototype.intersects=function(st,_t){return!(this._min>_t||this._max<st)},Xc.prototype.getMax=function(){return this._max},Xc.prototype.toString=function(){return Uu.toLineString(new Ur(this._min,0),new Ur(this._max,0))},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc},By.NodeComparator.get=function(){return dg},Object.defineProperties(Xc,By);var dg=function(){};dg.prototype.compare=function(st,_t){var xt=st,Et=_t,At=(xt._min+xt._max)/2,Ot=(Et._min+Et._max)/2;return At<Ot?-1:At>Ot?1:0},dg.prototype.interfaces_=function(){return[Uf]},dg.prototype.getClass=function(){return dg};var tc=function(st){function _t(){st.call(this),this._item=null;var xt=arguments[0],Et=arguments[1],At=arguments[2];this._min=xt,this._max=Et,this._item=At}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.query=function(xt,Et,At){if(!this.intersects(xt,Et))return null;At.visitItem(this._item)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Xc),Fy=function(st){function _t(){st.call(this),this._node1=null,this._node2=null;var xt=arguments[0],Et=arguments[1];this._node1=xt,this._node2=Et,this.buildExtent(this._node1,this._node2)}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.buildExtent=function(xt,Et){this._min=Math.min(xt._min,Et._min),this._max=Math.max(xt._max,Et._max)},_t.prototype.query=function(xt,Et,At){if(!this.intersects(xt,Et))return null;this._node1!==null&&this._node1.query(xt,Et,At),this._node2!==null&&this._node2.query(xt,Et,At)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Xc),Sc=function(){this._leaves=new Ii,this._root=null,this._level=0};Sc.prototype.buildTree=function(){Ku.sort(this._leaves,new Xc.NodeComparator);for(var st=this._leaves,_t=null,xt=new Ii;;){if(this.buildLevel(st,xt),xt.size()===1)return xt.get(0);_t=st,st=xt,xt=_t}},Sc.prototype.insert=function(st,_t,xt){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new tc(st,_t,xt))},Sc.prototype.query=function(st,_t,xt){this.init(),this._root.query(st,_t,xt)},Sc.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},Sc.prototype.printNode=function(st){ul.out.println(Uu.toLineString(new Ur(st._min,this._level),new Ur(st._max,this._level)))},Sc.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},Sc.prototype.buildLevel=function(st,_t){this._level++,_t.clear();for(var xt=0;xt<st.size();xt+=2){var Et=st.get(xt);if((xt+1<st.size()?st.get(xt):null)===null)_t.add(Et);else{var At=new Fy(st.get(xt),st.get(xt+1));_t.add(At)}}},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var ap=function(){this._items=new Ii};ap.prototype.visitItem=function(st){this._items.add(st)},ap.prototype.getItems=function(){return this._items},ap.prototype.interfaces_=function(){return[zh]},ap.prototype.getClass=function(){return ap};var lp=function(){this._index=null;var st=arguments[0];if(!xo(st,Fh))throw new ra("Argument must be Polygonal");this._index=new Yh(st)},_m={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};lp.prototype.locate=function(st){var _t=new dc(st),xt=new up(_t);return this._index.query(st.y,st.y,xt),_t.getLocation()},lp.prototype.interfaces_=function(){return[Fs]},lp.prototype.getClass=function(){return lp},_m.SegmentVisitor.get=function(){return up},_m.IntervalIndexedGeometry.get=function(){return Yh},Object.defineProperties(lp,_m);var up=function(){this._counter=null;var st=arguments[0];this._counter=st};up.prototype.visitItem=function(st){var _t=st;this._counter.countSegment(_t.getCoordinate(0),_t.getCoordinate(1))},up.prototype.interfaces_=function(){return[zh]},up.prototype.getClass=function(){return up};var Yh=function(){this._index=new Sc;var st=arguments[0];this.init(st)};Yh.prototype.init=function(st){for(var _t=cl.getLines(st).iterator();_t.hasNext();){var xt=_t.next().getCoordinates();this.addLine(xt)}},Yh.prototype.addLine=function(st){for(var _t=1;_t<st.length;_t++){var xt=new Qi(st[_t-1],st[_t]),Et=Math.min(xt.p0.y,xt.p1.y),At=Math.max(xt.p0.y,xt.p1.y);this._index.insert(Et,At,xt)}},Yh.prototype.query=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1],xt=new ap;return this._index.query(st,_t,xt),xt.getItems()}if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2];this._index.query(Et,At,Ot)}},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var cp=function(st){function _t(){if(st.call(this),this._parentGeom=null,this._lineEdgeMap=new Ay,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new pu,arguments.length===2){var xt=arguments[0],Et=arguments[1],At=ku.OGC_SFS_BOUNDARY_RULE;this._argIndex=xt,this._parentGeom=Et,this._boundaryNodeRule=At,Et!==null&&this.add(Et)}else if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2];this._argIndex=Ot,this._parentGeom=Dt,this._boundaryNodeRule=Ft,Dt!==null&&this.add(Dt)}}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.insertBoundaryPoint=function(xt,Et){var At=this._nodes.addNode(Et).getLabel(),Ot=1;At.getLocation(xt,Si.ON)===Zr.BOUNDARY&&Ot++;var Dt=_t.determineBoundary(this._boundaryNodeRule,Ot);At.setLocation(xt,Dt)},_t.prototype.computeSelfNodes=function(){if(arguments.length===2){var xt=arguments[0],Et=arguments[1];return this.computeSelfNodes(xt,Et,!1)}if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],Ft=new Na(At,!0,!1);Ft.setIsDoneIfProperInt(Dt);var jt=this.createEdgeSetIntersector(),Gt=this._parentGeom instanceof Hc||this._parentGeom instanceof Ia||this._parentGeom instanceof Vc,Jt=Ot||!Gt;return jt.computeIntersections(this._edges,Ft,Jt),this.addSelfIntersectionNodes(this._argIndex),Ft}},_t.prototype.computeSplitEdges=function(xt){for(var Et=this._edges.iterator();Et.hasNext();)Et.next().eiList.addSplitEdges(xt)},_t.prototype.computeEdgeIntersections=function(xt,Et,At){var Ot=new Na(Et,At,!0);return Ot.setBoundaryNodes(this.getBoundaryNodes(),xt.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,xt._edges,Ot),Ot},_t.prototype.getGeometry=function(){return this._parentGeom},_t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},_t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},_t.prototype.addPoint=function(){if(arguments[0]instanceof Kl){var xt=arguments[0],Et=xt.getCoordinate();this.insertPoint(this._argIndex,Et,Zr.INTERIOR)}else if(arguments[0]instanceof Ur){var At=arguments[0];this.insertPoint(this._argIndex,At,Zr.INTERIOR)}},_t.prototype.addPolygon=function(xt){this.addPolygonRing(xt.getExteriorRing(),Zr.EXTERIOR,Zr.INTERIOR);for(var Et=0;Et<xt.getNumInteriorRing();Et++){var At=xt.getInteriorRingN(Et);this.addPolygonRing(At,Zr.INTERIOR,Zr.EXTERIOR)}},_t.prototype.addEdge=function(xt){this.insertEdge(xt);var Et=xt.getCoordinates();this.insertPoint(this._argIndex,Et[0],Zr.BOUNDARY),this.insertPoint(this._argIndex,Et[Et.length-1],Zr.BOUNDARY)},_t.prototype.addLineString=function(xt){var Et=Xo.removeRepeatedPoints(xt.getCoordinates());if(Et.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=Et[0],null;var At=new ip(Et,new zs(this._argIndex,Zr.INTERIOR));this._lineEdgeMap.put(xt,At),this.insertEdge(At),No.isTrue(Et.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,Et[0]),this.insertBoundaryPoint(this._argIndex,Et[Et.length-1])},_t.prototype.getInvalidPoint=function(){return this._invalidPoint},_t.prototype.getBoundaryPoints=function(){for(var xt=this.getBoundaryNodes(),Et=new Array(xt.size()).fill(null),At=0,Ot=xt.iterator();Ot.hasNext();){var Dt=Ot.next();Et[At++]=Dt.getCoordinate().copy()}return Et},_t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},_t.prototype.addSelfIntersectionNode=function(xt,Et,At){if(this.isBoundaryNode(xt,Et))return null;At===Zr.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(xt,Et):this.insertPoint(xt,Et,At)},_t.prototype.addPolygonRing=function(xt,Et,At){if(xt.isEmpty())return null;var Ot=Xo.removeRepeatedPoints(xt.getCoordinates());if(Ot.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=Ot[0],null;var Dt=Et,Ft=At;$i.isCCW(Ot)&&(Dt=At,Ft=Et);var jt=new ip(Ot,new zs(this._argIndex,Zr.BOUNDARY,Dt,Ft));this._lineEdgeMap.put(xt,jt),this.insertEdge(jt),this.insertPoint(this._argIndex,Ot[0],Zr.BOUNDARY)},_t.prototype.insertPoint=function(xt,Et,At){var Ot=this._nodes.addNode(Et),Dt=Ot.getLabel();Dt===null?Ot._label=new zs(xt,At):Dt.setLocation(xt,At)},_t.prototype.createEdgeSetIntersector=function(){return new l_},_t.prototype.addSelfIntersectionNodes=function(xt){for(var Et=this._edges.iterator();Et.hasNext();)for(var At=Et.next(),Ot=At.getLabel().getLocation(xt),Dt=At.eiList.iterator();Dt.hasNext();){var Ft=Dt.next();this.addSelfIntersectionNode(xt,Ft.coord,Ot)}},_t.prototype.add=function(){if(arguments.length!==1)return st.prototype.add.apply(this,arguments);var xt=arguments[0];if(xt.isEmpty())return null;if(xt instanceof Vc&&(this._useBoundaryDeterminationRule=!1),xt instanceof Ia)this.addPolygon(xt);else if(xt instanceof ia)this.addLineString(xt);else if(xt instanceof Kl)this.addPoint(xt);else if(xt instanceof Qf)this.addCollection(xt);else if(xt instanceof Bh)this.addCollection(xt);else if(xt instanceof Vc)this.addCollection(xt);else{if(!(xt instanceof Al))throw new Error(xt.getClass().getName());this.addCollection(xt)}},_t.prototype.addCollection=function(xt){for(var Et=0;Et<xt.getNumGeometries();Et++){var At=xt.getGeometryN(Et);this.add(At)}},_t.prototype.locate=function(xt){return xo(this._parentGeom,Fh)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new lp(this._parentGeom)),this._areaPtLocator.locate(xt)):this._ptLocator.locate(xt,this._parentGeom)},_t.prototype.findEdge=function(){if(arguments.length===1){var xt=arguments[0];return this._lineEdgeMap.get(xt)}return st.prototype.findEdge.apply(this,arguments)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.determineBoundary=function(xt,Et){return xt.isInBoundary(Et)?Zr.BOUNDARY:Zr.INTERIOR},_t}(la),hp=function(){if(this._li=new $h,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var st=arguments[0];this.setComputationPrecision(st.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new cp(0,st)}else if(arguments.length===2){var _t=arguments[0],xt=arguments[1],Et=ku.OGC_SFS_BOUNDARY_RULE;_t.getPrecisionModel().compareTo(xt.getPrecisionModel())>=0?this.setComputationPrecision(_t.getPrecisionModel()):this.setComputationPrecision(xt.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new cp(0,_t,Et),this._arg[1]=new cp(1,xt,Et)}else if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Dt=arguments[2];At.getPrecisionModel().compareTo(Ot.getPrecisionModel())>=0?this.setComputationPrecision(At.getPrecisionModel()):this.setComputationPrecision(Ot.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new cp(0,At,Dt),this._arg[1]=new cp(1,Ot,Dt)}};hp.prototype.getArgGeometry=function(st){return this._arg[st].getGeometry()},hp.prototype.setComputationPrecision=function(st){this._resultPrecisionModel=st,this._li.setPrecisionModel(this._resultPrecisionModel)},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp};var kd=function(){};kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.map=function(){if(arguments[0]instanceof go&&xo(arguments[1],kd.MapOp)){for(var st=arguments[0],_t=arguments[1],xt=new Ii,Et=0;Et<st.getNumGeometries();Et++){var At=_t.map(st.getGeometryN(Et));At!==null&&xt.add(At)}return st.getFactory().buildGeometry(xt)}if(xo(arguments[0],Oa)&&xo(arguments[1],kd.MapOp)){for(var Ot=arguments[0],Dt=arguments[1],Ft=new Ii,jt=Ot.iterator();jt.hasNext();){var Gt=jt.next(),Jt=Dt.map(Gt);Jt!==null&&Ft.add(Jt)}return Ft}},kd.MapOp=function(){};var Do=function(st){function _t(){var xt=arguments[0],Et=arguments[1];st.call(this,xt,Et),this._ptLocator=new pu,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new eu,this._resultPolyList=new Ii,this._resultLineList=new Ii,this._resultPointList=new Ii,this._graph=new la(new Ny),this._geomFact=xt.getFactory()}return st&&(_t.__proto__=st),_t.prototype=Object.create(st&&st.prototype),_t.prototype.constructor=_t,_t.prototype.insertUniqueEdge=function(xt){var Et=this._edgeList.findEqualEdge(xt);if(Et!==null){var At=Et.getLabel(),Ot=xt.getLabel();Et.isPointwiseEqual(xt)||(Ot=new zs(xt.getLabel())).flip();var Dt=Et.getDepth();Dt.isNull()&&Dt.add(At),Dt.add(Ot),At.merge(Ot)}else this._edgeList.add(xt)},_t.prototype.getGraph=function(){return this._graph},_t.prototype.cancelDuplicateResultEdges=function(){for(var xt=this._graph.getEdgeEnds().iterator();xt.hasNext();){var Et=xt.next(),At=Et.getSym();Et.isInResult()&&At.isInResult()&&(Et.setInResult(!1),At.setInResult(!1))}},_t.prototype.isCoveredByLA=function(xt){return!!this.isCovered(xt,this._resultLineList)||!!this.isCovered(xt,this._resultPolyList)},_t.prototype.computeGeometry=function(xt,Et,At,Ot){var Dt=new Ii;return Dt.addAll(xt),Dt.addAll(Et),Dt.addAll(At),Dt.isEmpty()?_t.createEmptyResult(Ot,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(Dt)},_t.prototype.mergeSymLabels=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();)xt.next().getEdges().mergeSymLabels()},_t.prototype.isCovered=function(xt,Et){for(var At=Et.iterator();At.hasNext();){var Ot=At.next();if(this._ptLocator.locate(xt,Ot)!==Zr.EXTERIOR)return!0}return!1},_t.prototype.replaceCollapsedEdges=function(){for(var xt=new Ii,Et=this._edgeList.iterator();Et.hasNext();){var At=Et.next();At.isCollapsed()&&(Et.remove(),xt.add(At.getCollapsedEdge()))}this._edgeList.addAll(xt)},_t.prototype.updateNodeLabelling=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();){var Et=xt.next(),At=Et.getEdges().getLabel();Et.getLabel().merge(At)}},_t.prototype.getResultGeometry=function(xt){return this.computeOverlay(xt),this._resultGeom},_t.prototype.insertUniqueEdges=function(xt){for(var Et=xt.iterator();Et.hasNext();){var At=Et.next();this.insertUniqueEdge(At)}},_t.prototype.computeOverlay=function(xt){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var Et=new Ii;this._arg[0].computeSplitEdges(Et),this._arg[1].computeSplitEdges(Et),this.insertUniqueEdges(Et),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Cd.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(xt),this.cancelDuplicateResultEdges();var At=new zl(this._geomFact);At.add(this._graph),this._resultPolyList=At.getPolygons();var Ot=new xc(this,this._geomFact,this._ptLocator);this._resultLineList=Ot.build(xt);var Dt=new ff(this,this._geomFact,this._ptLocator);this._resultPointList=Dt.build(xt),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,xt)},_t.prototype.labelIncompleteNode=function(xt,Et){var At=this._ptLocator.locate(xt.getCoordinate(),this._arg[Et].getGeometry());xt.getLabel().setLocation(Et,At)},_t.prototype.copyPoints=function(xt){for(var Et=this._arg[xt].getNodeIterator();Et.hasNext();){var At=Et.next();this._graph.addNode(At.getCoordinate()).setLabel(xt,At.getLabel().getLocation(xt))}},_t.prototype.findResultAreaEdges=function(xt){for(var Et=this._graph.getEdgeEnds().iterator();Et.hasNext();){var At=Et.next(),Ot=At.getLabel();Ot.isArea()&&!At.isInteriorAreaEdge()&&_t.isResultOfOp(Ot.getLocation(0,Si.RIGHT),Ot.getLocation(1,Si.RIGHT),xt)&&At.setInResult(!0)}},_t.prototype.computeLabelsFromDepths=function(){for(var xt=this._edgeList.iterator();xt.hasNext();){var Et=xt.next(),At=Et.getLabel(),Ot=Et.getDepth();if(!Ot.isNull()){Ot.normalize();for(var Dt=0;Dt<2;Dt++)At.isNull(Dt)||!At.isArea()||Ot.isNull(Dt)||(Ot.getDelta(Dt)===0?At.toLine(Dt):(No.isTrue(!Ot.isNull(Dt,Si.LEFT),"depth of LEFT side has not been initialized"),At.setLocation(Dt,Si.LEFT,Ot.getLocation(Dt,Si.LEFT)),No.isTrue(!Ot.isNull(Dt,Si.RIGHT),"depth of RIGHT side has not been initialized"),At.setLocation(Dt,Si.RIGHT,Ot.getLocation(Dt,Si.RIGHT))))}}},_t.prototype.computeLabelling=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();)xt.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},_t.prototype.labelIncompleteNodes=function(){for(var xt=this._graph.getNodes().iterator();xt.hasNext();){var Et=xt.next(),At=Et.getLabel();Et.isIsolated()&&(At.isNull(0)?this.labelIncompleteNode(Et,0):this.labelIncompleteNode(Et,1)),Et.getEdges().updateLabelling(At)}},_t.prototype.isCoveredByA=function(xt){return!!this.isCovered(xt,this._resultPolyList)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(hp);Do.overlayOp=function(st,_t,xt){return new Do(st,_t).getResultGeometry(xt)},Do.intersection=function(st,_t){if(st.isEmpty()||_t.isEmpty())return Do.createEmptyResult(Do.INTERSECTION,st,_t,st.getFactory());if(st.isGeometryCollection()){var xt=_t;return df.map(st,{interfaces_:function(){return[kd.MapOp]},map:function(Et){return Et.intersection(xt)}})}return st.checkNotGeometryCollection(st),st.checkNotGeometryCollection(_t),sl.overlayOp(st,_t,Do.INTERSECTION)},Do.symDifference=function(st,_t){if(st.isEmpty()||_t.isEmpty()){if(st.isEmpty()&&_t.isEmpty())return Do.createEmptyResult(Do.SYMDIFFERENCE,st,_t,st.getFactory());if(st.isEmpty())return _t.copy();if(_t.isEmpty())return st.copy()}return st.checkNotGeometryCollection(st),st.checkNotGeometryCollection(_t),sl.overlayOp(st,_t,Do.SYMDIFFERENCE)},Do.resultDimension=function(st,_t,xt){var Et=_t.getDimension(),At=xt.getDimension(),Ot=-1;switch(st){case Do.INTERSECTION:Ot=Math.min(Et,At);break;case Do.UNION:Ot=Math.max(Et,At);break;case Do.DIFFERENCE:Ot=Et;break;case Do.SYMDIFFERENCE:Ot=Math.max(Et,At)}return Ot},Do.createEmptyResult=function(st,_t,xt,Et){var At=null;switch(Do.resultDimension(st,_t,xt)){case-1:At=Et.createGeometryCollection(new Array(0).fill(null));break;case 0:At=Et.createPoint();break;case 1:At=Et.createLineString();break;case 2:At=Et.createPolygon()}return At},Do.difference=function(st,_t){return st.isEmpty()?Do.createEmptyResult(Do.DIFFERENCE,st,_t,st.getFactory()):_t.isEmpty()?st.copy():(st.checkNotGeometryCollection(st),st.checkNotGeometryCollection(_t),sl.overlayOp(st,_t,Do.DIFFERENCE))},Do.isResultOfOp=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1],xt=st.getLocation(0),Et=st.getLocation(1);return Do.isResultOfOp(xt,Et,_t)}if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Dt=arguments[2];switch(At===Zr.BOUNDARY&&(At=Zr.INTERIOR),Ot===Zr.BOUNDARY&&(Ot=Zr.INTERIOR),Dt){case Do.INTERSECTION:return At===Zr.INTERIOR&&Ot===Zr.INTERIOR;case Do.UNION:return At===Zr.INTERIOR||Ot===Zr.INTERIOR;case Do.DIFFERENCE:return At===Zr.INTERIOR&&Ot!==Zr.INTERIOR;case Do.SYMDIFFERENCE:return At===Zr.INTERIOR&&Ot!==Zr.INTERIOR||At!==Zr.INTERIOR&&Ot===Zr.INTERIOR}return!1}},Do.INTERSECTION=1,Do.UNION=2,Do.DIFFERENCE=3,Do.SYMDIFFERENCE=4;var qh=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new pu,this._seg=new Qi;var st=arguments[0],_t=arguments[1];this._g=st,this._boundaryDistanceTolerance=_t,this._linework=this.extractLinework(st)};qh.prototype.isWithinToleranceOfBoundary=function(st){for(var _t=this,xt=0;xt<this._linework.getNumGeometries();xt++)for(var Et=_t._linework.getGeometryN(xt).getCoordinateSequence(),At=0;At<Et.size()-1;At++)if(Et.getCoordinate(At,_t._seg.p0),Et.getCoordinate(At+1,_t._seg.p1),_t._seg.distance(st)<=_t._boundaryDistanceTolerance)return!0;return!1},qh.prototype.getLocation=function(st){return this.isWithinToleranceOfBoundary(st)?Zr.BOUNDARY:this._ptLocator.locate(st,this._g)},qh.prototype.extractLinework=function(st){var _t=new gf;st.apply(_t);var xt=_t.getLinework(),Et=Zo.toLineStringArray(xt);return st.getFactory().createMultiLineString(Et)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var gf=function(){this._linework=null,this._linework=new Ii};gf.prototype.getLinework=function(){return this._linework},gf.prototype.filter=function(st){if(st instanceof Ia){var _t=st;this._linework.add(_t.getExteriorRing());for(var xt=0;xt<_t.getNumInteriorRing();xt++)this._linework.add(_t.getInteriorRingN(xt))}},gf.prototype.interfaces_=function(){return[fc]},gf.prototype.getClass=function(){return gf};var Xh=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var st=arguments[0];this._g=st};Xh.prototype.extractPoints=function(st,_t,xt){for(var Et=st.getCoordinates(),At=0;At<Et.length-1;At++)this.computeOffsetPoints(Et[At],Et[At+1],_t,xt)},Xh.prototype.setSidesToGenerate=function(st,_t){this._doLeft=st,this._doRight=_t},Xh.prototype.getPoints=function(st){for(var _t=new Ii,xt=cl.getLines(this._g).iterator();xt.hasNext();){var Et=xt.next();this.extractPoints(Et,st,_t)}return _t},Xh.prototype.computeOffsetPoints=function(st,_t,xt,Et){var At=_t.x-st.x,Ot=_t.y-st.y,Dt=Math.sqrt(At*At+Ot*Ot),Ft=xt*At/Dt,jt=xt*Ot/Dt,Gt=(_t.x+st.x)/2,Jt=(_t.y+st.y)/2;if(this._doLeft){var qt=new Ur(Gt-jt,Jt+Ft);Et.add(qt)}if(this._doRight){var on=new Ur(Gt+jt,Jt-Ft);Et.add(on)}},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var jl=function st(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=st.TOLERANCE,this._testCoords=new Ii;var _t=arguments[0],xt=arguments[1],Et=arguments[2];this._boundaryDistanceTolerance=st.computeBoundaryDistanceTolerance(_t,xt),this._geom=[_t,xt,Et],this._locFinder=[new qh(this._geom[0],this._boundaryDistanceTolerance),new qh(this._geom[1],this._boundaryDistanceTolerance),new qh(this._geom[2],this._boundaryDistanceTolerance)]},H0={TOLERANCE:{configurable:!0}};jl.prototype.reportResult=function(st,_t,xt){ul.out.println("Overlay result invalid - A:"+Zr.toLocationSymbol(_t[0])+" B:"+Zr.toLocationSymbol(_t[1])+" expected:"+(xt?"i":"e")+" actual:"+Zr.toLocationSymbol(_t[2]))},jl.prototype.isValid=function(st){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var _t=this.checkValid(st);return _t},jl.prototype.checkValid=function(){var st=this;if(arguments.length===1){for(var _t=arguments[0],xt=0;xt<this._testCoords.size();xt++){var Et=st._testCoords.get(xt);if(!st.checkValid(_t,Et))return st._invalidLocation=Et,!1}return!0}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return this._location[0]=this._locFinder[0].getLocation(Ot),this._location[1]=this._locFinder[1].getLocation(Ot),this._location[2]=this._locFinder[2].getLocation(Ot),!!jl.hasLocation(this._location,Zr.BOUNDARY)||this.isValidResult(At,this._location)}},jl.prototype.addTestPts=function(st){var _t=new Xh(st);this._testCoords.addAll(_t.getPoints(5*this._boundaryDistanceTolerance))},jl.prototype.isValidResult=function(st,_t){var xt=Do.isResultOfOp(_t[0],_t[1],st),Et=!(xt^_t[2]===Zr.INTERIOR);return Et||this.reportResult(st,_t,xt),Et},jl.prototype.getInvalidLocation=function(){return this._invalidLocation},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl},jl.hasLocation=function(st,_t){for(var xt=0;xt<3;xt++)if(st[xt]===_t)return!0;return!1},jl.computeBoundaryDistanceTolerance=function(st,_t){return Math.min(is.computeSizeBasedSnapTolerance(st),is.computeSizeBasedSnapTolerance(_t))},jl.isValid=function(st,_t,xt,Et){return new jl(st,_t,Et).isValid(xt)},H0.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(jl,H0);var El=function st(_t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=st.extractFactory(_t),this._inputGeoms=_t};El.prototype.extractElements=function(st,_t){if(st===null)return null;for(var xt=0;xt<st.getNumGeometries();xt++){var Et=st.getGeometryN(xt);this._skipEmpty&&Et.isEmpty()||_t.add(Et)}},El.prototype.combine=function(){for(var st=new Ii,_t=this._inputGeoms.iterator();_t.hasNext();){var xt=_t.next();this.extractElements(xt,st)}return st.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(st)},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El},El.combine=function(){if(arguments.length===1){var st=arguments[0],_t=new El(st);return _t.combine()}if(arguments.length===2){var xt=arguments[0],Et=arguments[1],At=new El(El.createList(xt,Et));return At.combine()}if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],Ft=arguments[2],jt=new El(El.createList(Ot,Dt,Ft));return jt.combine()}},El.extractFactory=function(st){return st.isEmpty()?null:st.iterator().next().getFactory()},El.createList=function(){if(arguments.length===2){var st=arguments[0],_t=arguments[1],xt=new Ii;return xt.add(st),xt.add(_t),xt}if(arguments.length===3){var Et=arguments[0],At=arguments[1],Ot=arguments[2],Dt=new Ii;return Dt.add(Et),Dt.add(At),Dt.add(Ot),Dt}};var Aa=function(){this._inputPolys=null,this._geomFactory=null;var st=arguments[0];this._inputPolys=st,this._inputPolys===null&&(this._inputPolys=new Ii)},V0={STRTREE_NODE_CAPACITY:{configurable:!0}};Aa.prototype.reduceToGeometries=function(st){for(var _t=new Ii,xt=st.iterator();xt.hasNext();){var Et=xt.next(),At=null;xo(Et,ju)?At=this.unionTree(Et):Et instanceof go&&(At=Et),_t.add(At)}return _t},Aa.prototype.extractByEnvelope=function(st,_t,xt){for(var Et=new Ii,At=0;At<_t.getNumGeometries();At++){var Ot=_t.getGeometryN(At);Ot.getEnvelopeInternal().intersects(st)?Et.add(Ot):xt.add(Ot)}return this._geomFactory.buildGeometry(Et)},Aa.prototype.unionOptimized=function(st,_t){var xt=st.getEnvelopeInternal(),Et=_t.getEnvelopeInternal();if(!xt.intersects(Et))return El.combine(st,_t);if(st.getNumGeometries()<=1&&_t.getNumGeometries()<=1)return this.unionActual(st,_t);var At=xt.intersection(Et);return this.unionUsingEnvelopeIntersection(st,_t,At)},Aa.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var st=new My(Aa.STRTREE_NODE_CAPACITY),_t=this._inputPolys.iterator();_t.hasNext();){var xt=_t.next();st.insert(xt.getEnvelopeInternal(),xt)}this._inputPolys=null;var Et=st.itemsTree();return this.unionTree(Et)},Aa.prototype.binaryUnion=function(){if(arguments.length===1){var st=arguments[0];return this.binaryUnion(st,0,st.size())}if(arguments.length===3){var _t=arguments[0],xt=arguments[1],Et=arguments[2];if(Et-xt<=1){var At=Aa.getGeometry(_t,xt);return this.unionSafe(At,null)}if(Et-xt==2)return this.unionSafe(Aa.getGeometry(_t,xt),Aa.getGeometry(_t,xt+1));var Ot=Math.trunc((Et+xt)/2),Dt=this.binaryUnion(_t,xt,Ot),Ft=this.binaryUnion(_t,Ot,Et);return this.unionSafe(Dt,Ft)}},Aa.prototype.repeatedUnion=function(st){for(var _t=null,xt=st.iterator();xt.hasNext();){var Et=xt.next();_t=_t===null?Et.copy():_t.union(Et)}return _t},Aa.prototype.unionSafe=function(st,_t){return st===null&&_t===null?null:st===null?_t.copy():_t===null?st.copy():this.unionOptimized(st,_t)},Aa.prototype.unionActual=function(st,_t){return Aa.restrictToPolygons(st.union(_t))},Aa.prototype.unionTree=function(st){var _t=this.reduceToGeometries(st);return this.binaryUnion(_t)},Aa.prototype.unionUsingEnvelopeIntersection=function(st,_t,xt){var Et=new Ii,At=this.extractByEnvelope(xt,st,Et),Ot=this.extractByEnvelope(xt,_t,Et),Dt=this.unionActual(At,Ot);return Et.add(Dt),El.combine(Et)},Aa.prototype.bufferUnion=function(){if(arguments.length===1){var st=arguments[0],_t=st.get(0).getFactory(),xt=_t.buildGeometry(st),Et=xt.buffer(0);return Et}if(arguments.length===2){var At=arguments[0],Ot=arguments[1],Dt=At.getFactory(),Ft=Dt.createGeometryCollection([At,Ot]),jt=Ft.buffer(0);return jt}},Aa.prototype.interfaces_=function(){return[]},Aa.prototype.getClass=function(){return Aa},Aa.restrictToPolygons=function(st){if(xo(st,Fh))return st;var _t=gh.getPolygons(st);return _t.size()===1?_t.get(0):st.getFactory().createMultiPolygon(Zo.toPolygonArray(_t))},Aa.getGeometry=function(st,_t){return _t>=st.size()?null:st.get(_t)},Aa.union=function(st){return new Aa(st).union()},V0.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Aa,V0);var nc=function(){};function vh(){return new dp}function dp(){this.reset()}nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc},nc.union=function(st,_t){if(st.isEmpty()||_t.isEmpty()){if(st.isEmpty()&&_t.isEmpty())return Do.createEmptyResult(Do.UNION,st,_t,st.getFactory());if(st.isEmpty())return _t.copy();if(_t.isEmpty())return st.copy()}return st.checkNotGeometryCollection(st),st.checkNotGeometryCollection(_t),sl.overlayOp(st,_t,Do.UNION)},dp.prototype={constructor:dp,reset:function(){this.s=this.t=0},add:function(st){U0(fg,st,this.t),U0(this,fg.s,this.s),this.s?this.t+=fg.t:this.s=fg.t},valueOf:function(){return this.s}};var fg=new dp;function U0(st,_t,xt){var Et=st.s=_t+xt,At=Et-_t,Ot=Et-At;st.t=_t-Ot+(xt-At)}var wa=1e-6,Vs=Math.PI,_h=Vs/2,zy=Vs/4,bh=2*Vs,So=180/Vs,Mu=Vs/180,Il=Math.abs,u_=Math.atan,fp=Math.atan2,$a=Math.cos,Ba=Math.sin,pg=Math.sqrt;function bm(st){return st>1?0:st<-1?Vs:Math.acos(st)}function Zc(st){return st>1?_h:st<-1?-_h:Math.asin(st)}function Ad(){}function gg(st,_t){st&&j0.hasOwnProperty(st.type)&&j0[st.type](st,_t)}var xm={Feature:function(st,_t){gg(st.geometry,_t)},FeatureCollection:function(st,_t){for(var xt=st.features,Et=-1,At=xt.length;++Et<At;)gg(xt[Et].geometry,_t)}},j0={Sphere:function(st,_t){_t.sphere()},Point:function(st,_t){st=st.coordinates,_t.point(st[0],st[1],st[2])},MultiPoint:function(st,_t){for(var xt=st.coordinates,Et=-1,At=xt.length;++Et<At;)st=xt[Et],_t.point(st[0],st[1],st[2])},LineString:function(st,_t){wm(st.coordinates,_t,0)},MultiLineString:function(st,_t){for(var xt=st.coordinates,Et=-1,At=xt.length;++Et<At;)wm(xt[Et],_t,0)},Polygon:function(st,_t){pp(st.coordinates,_t)},MultiPolygon:function(st,_t){for(var xt=st.coordinates,Et=-1,At=xt.length;++Et<At;)pp(xt[Et],_t)},GeometryCollection:function(st,_t){for(var xt=st.geometries,Et=-1,At=xt.length;++Et<At;)gg(xt[Et],_t)}};function wm(st,_t,xt){var Et,At=-1,Ot=st.length-xt;for(_t.lineStart();++At<Ot;)Et=st[At],_t.point(Et[0],Et[1],Et[2]);_t.lineEnd()}function pp(st,_t){var xt=-1,Et=st.length;for(_t.polygonStart();++xt<Et;)wm(st[xt],_t,1);_t.polygonEnd()}vh(),vh();function W0(st){return[fp(st[1],st[0]),Zc(st[2])]}function Pa(st){var _t=st[0],xt=st[1],Et=$a(xt);return[Et*$a(_t),Et*Ba(_t),Ba(xt)]}function mg(st,_t){return st[0]*_t[0]+st[1]*_t[1]+st[2]*_t[2]}function Em(st,_t){return[st[1]*_t[2]-st[2]*_t[1],st[2]*_t[0]-st[0]*_t[2],st[0]*_t[1]-st[1]*_t[0]]}function G0(st,_t){st[0]+=_t[0],st[1]+=_t[1],st[2]+=_t[2]}function Sm(st,_t){return[st[0]*_t,st[1]*_t,st[2]*_t]}function Y0(st){var _t=pg(st[0]*st[0]+st[1]*st[1]+st[2]*st[2]);st[0]/=_t,st[1]/=_t,st[2]/=_t}vh();function q0(st,_t){function xt(Et,At){return Et=st(Et,At),_t(Et[0],Et[1])}return st.invert&&_t.invert&&(xt.invert=function(Et,At){return(Et=_t.invert(Et,At))&&st.invert(Et[0],Et[1])}),xt}function X0(st,_t){return[st>Vs?st-bh:st<-Vs?st+bh:st,_t]}function Hy(st){return function(_t,xt){return[(_t+=st)>Vs?_t-bh:_t<-Vs?_t+bh:_t,xt]}}function Z0(st){var _t=Hy(st);return _t.invert=Hy(-st),_t}function K0(st,_t){var xt=$a(st),Et=Ba(st),At=$a(_t),Ot=Ba(_t);function Dt(Ft,jt){var Gt=$a(jt),Jt=$a(Ft)*Gt,qt=Ba(Ft)*Gt,on=Ba(jt),vn=on*xt+Jt*Et;return[fp(qt*At-vn*Ot,Jt*xt-on*Et),Zc(vn*At+qt*Ot)]}return Dt.invert=function(Ft,jt){var Gt=$a(jt),Jt=$a(Ft)*Gt,qt=Ba(Ft)*Gt,on=Ba(jt),vn=on*At-qt*Ot;return[fp(qt*At+on*Ot,Jt*xt+vn*Et),Zc(vn*xt-Jt*Et)]},Dt}function J0(st,_t){(_t=Pa(_t))[0]-=st,Y0(_t);var xt=bm(-_t[1]);return((-_t[2]<0?-xt:xt)+bh-wa)%bh}function Cm(){var st,_t=[];return{point:function(xt,Et){st.push([xt,Et])},lineStart:function(){_t.push(st=[])},lineEnd:Ad,rejoin:function(){_t.length>1&&_t.push(_t.pop().concat(_t.shift()))},result:function(){var xt=_t;return _t=[],st=null,xt}}}function Tm(st,_t){return Il(st[0]-_t[0])<wa&&Il(st[1]-_t[1])<wa}function mf(st,_t,xt,Et){this.x=st,this.z=_t,this.o=xt,this.e=Et,this.v=!1,this.n=this.p=null}function Q0(st,_t,xt,Et,At){var Ot,Dt,Ft=[],jt=[];if(st.forEach(function(_n){if(!((En=_n.length-1)<=0)){var En,cn,Hn=_n[0],nr=_n[En];if(Tm(Hn,nr)){for(At.lineStart(),Ot=0;Ot<En;++Ot)At.point((Hn=_n[Ot])[0],Hn[1]);At.lineEnd()}else Ft.push(cn=new mf(Hn,_n,null,!0)),jt.push(cn.o=new mf(Hn,null,cn,!1)),Ft.push(cn=new mf(nr,_n,null,!1)),jt.push(cn.o=new mf(nr,null,cn,!0))}}),Ft.length){for(jt.sort(_t),yg(Ft),yg(jt),Ot=0,Dt=jt.length;Ot<Dt;++Ot)jt[Ot].e=xt=!xt;for(var Gt,Jt,qt=Ft[0];;){for(var on=qt,vn=!0;on.v;)if((on=on.n)===qt)return;Gt=on.z,At.lineStart();do{if(on.v=on.o.v=!0,on.e){if(vn)for(Ot=0,Dt=Gt.length;Ot<Dt;++Ot)At.point((Jt=Gt[Ot])[0],Jt[1]);else Et(on.x,on.n.x,1,At);on=on.n}else{if(vn)for(Gt=on.p.z,Ot=Gt.length-1;Ot>=0;--Ot)At.point((Jt=Gt[Ot])[0],Jt[1]);else Et(on.x,on.p.x,-1,At);on=on.p}Gt=(on=on.o).z,vn=!vn}while(!on.v);At.lineEnd()}}}function yg(st){if(_t=st.length){for(var _t,xt,Et=0,At=st[0];++Et<_t;)At.n=xt=st[Et],xt.p=At,At=xt;At.n=xt=st[0],xt.p=At}}function vg(st,_t){return st<_t?-1:st>_t?1:st>=_t?0:NaN}X0.invert=X0;var gp,xh;(gp=vg).length===1&&(xh=gp,gp=function(st,_t){return vg(xh(st),_t)});function Vy(st){for(var _t,xt,Et,At=st.length,Ot=-1,Dt=0;++Ot<At;)Dt+=st[Ot].length;for(xt=new Array(Dt);--At>=0;)for(_t=(Et=st[At]).length;--_t>=0;)xt[--Dt]=Et[_t];return xt}var mp=1e9,dl=-mp;function km(st,_t,xt,Et){function At(Gt,Jt){return st<=Gt&&Gt<=xt&&_t<=Jt&&Jt<=Et}function Ot(Gt,Jt,qt,on){var vn=0,_n=0;if(Gt==null||(vn=Dt(Gt,qt))!==(_n=Dt(Jt,qt))||jt(Gt,Jt)<0^qt>0)do on.point(vn===0||vn===3?st:xt,vn>1?Et:_t);while((vn=(vn+qt+4)%4)!==_n);else on.point(Jt[0],Jt[1])}function Dt(Gt,Jt){return Il(Gt[0]-st)<wa?Jt>0?0:3:Il(Gt[0]-xt)<wa?Jt>0?2:1:Il(Gt[1]-_t)<wa?Jt>0?1:0:Jt>0?3:2}function Ft(Gt,Jt){return jt(Gt.x,Jt.x)}function jt(Gt,Jt){var qt=Dt(Gt,1),on=Dt(Jt,1);return qt!==on?qt-on:qt===0?Jt[1]-Gt[1]:qt===1?Gt[0]-Jt[0]:qt===2?Gt[1]-Jt[1]:Jt[0]-Gt[0]}return function(Gt){var Jt,qt,on,vn,_n,En,cn,Hn,nr,bn,zn,Un=Gt,qn=Cm(),Gn={point:Xr,lineStart:function(){Gn.point=Br,qt&&qt.push(on=[]),bn=!0,nr=!1,cn=Hn=NaN},lineEnd:function(){Jt&&(Br(vn,_n),En&&nr&&qn.rejoin(),Jt.push(qn.result())),Gn.point=Xr,nr&&Un.lineEnd()},polygonStart:function(){Un=qn,Jt=[],qt=[],zn=!0},polygonEnd:function(){var Jr=function(){for(var Wr=0,jr=0,Hr=qt.length;jr<Hr;++jr)for(var ei,Gr,si=qt[jr],Tr=1,Ki=si.length,Ci=si[0],$o=Ci[0],Yi=Ci[1];Tr<Ki;++Tr)ei=$o,Gr=Yi,$o=(Ci=si[Tr])[0],Yi=Ci[1],Gr<=Et?Yi>Et&&($o-ei)*(Et-Gr)>(Yi-Gr)*(st-ei)&&++Wr:Yi<=Et&&($o-ei)*(Et-Gr)<(Yi-Gr)*(st-ei)&&--Wr;return Wr}(),Fr=zn&&Jr,oi=(Jt=Vy(Jt)).length;(Fr||oi)&&(Gt.polygonStart(),Fr&&(Gt.lineStart(),Ot(null,null,1,Gt),Gt.lineEnd()),oi&&Q0(Jt,Ft,Jr,Ot,Gt),Gt.polygonEnd()),Un=Gt,Jt=qt=on=null}};function Xr(Jr,Fr){At(Jr,Fr)&&Un.point(Jr,Fr)}function Br(Jr,Fr){var oi=At(Jr,Fr);if(qt&&on.push([Jr,Fr]),bn)vn=Jr,_n=Fr,En=oi,bn=!1,oi&&(Un.lineStart(),Un.point(Jr,Fr));else if(oi&&nr)Un.point(Jr,Fr);else{var Wr=[cn=Math.max(dl,Math.min(mp,cn)),Hn=Math.max(dl,Math.min(mp,Hn))],jr=[Jr=Math.max(dl,Math.min(mp,Jr)),Fr=Math.max(dl,Math.min(mp,Fr))];(function(Hr,ei,Gr,si,Tr,Ki){var Ci,$o=Hr[0],Yi=Hr[1],po=0,os=1,js=ei[0]-$o,fl=ei[1]-Yi;if(Ci=Gr-$o,js||!(Ci>0)){if(Ci/=js,js<0){if(Ci<po)return;Ci<os&&(os=Ci)}else if(js>0){if(Ci>os)return;Ci>po&&(po=Ci)}if(Ci=Tr-$o,js||!(Ci<0)){if(Ci/=js,js<0){if(Ci>os)return;Ci>po&&(po=Ci)}else if(js>0){if(Ci<po)return;Ci<os&&(os=Ci)}if(Ci=si-Yi,fl||!(Ci>0)){if(Ci/=fl,fl<0){if(Ci<po)return;Ci<os&&(os=Ci)}else if(fl>0){if(Ci>os)return;Ci>po&&(po=Ci)}if(Ci=Ki-Yi,fl||!(Ci<0)){if(Ci/=fl,fl<0){if(Ci>os)return;Ci>po&&(po=Ci)}else if(fl>0){if(Ci<po)return;Ci<os&&(os=Ci)}return po>0&&(Hr[0]=$o+po*js,Hr[1]=Yi+po*fl),os<1&&(ei[0]=$o+os*js,ei[1]=Yi+os*fl),!0}}}}})(Wr,jr,st,_t,xt,Et)?(nr||(Un.lineStart(),Un.point(Wr[0],Wr[1])),Un.point(jr[0],jr[1]),oi||Un.lineEnd(),zn=!1):oi&&(Un.lineStart(),Un.point(Jr,Fr),zn=!1)}cn=Jr,Hn=Fr,nr=oi}return Gn}}var e1=vh();vh();function Uy(st){return st}vh(),vh();var yp=1/0,yf=yp,Pd=-yp,Am=Pd,jy={point:function(st,_t){st<yp&&(yp=st),st>Pd&&(Pd=st),_t<yf&&(yf=_t),_t>Am&&(Am=_t)},lineStart:Ad,lineEnd:Ad,polygonStart:Ad,polygonEnd:Ad,result:function(){var st=[[yp,yf],[Pd,Am]];return Pd=Am=-(yf=yp=1/0),st}};vh();function n1(st,_t,xt,Et){return function(At,Ot){var Dt,Ft,jt,Gt=_t(Ot),Jt=At.invert(Et[0],Et[1]),qt=Cm(),on=_t(qt),vn=!1,_n={point:En,lineStart:Hn,lineEnd:nr,polygonStart:function(){_n.point=bn,_n.lineStart=zn,_n.lineEnd=Un,Ft=[],Dt=[]},polygonEnd:function(){_n.point=En,_n.lineStart=Hn,_n.lineEnd=nr,Ft=Vy(Ft);var qn=function(Gn,Xr){var Br=Xr[0],Jr=Xr[1],Fr=[Ba(Br),-$a(Br),0],oi=0,Wr=0;e1.reset();for(var jr=0,Hr=Gn.length;jr<Hr;++jr)if(Gr=(ei=Gn[jr]).length)for(var ei,Gr,si=ei[Gr-1],Tr=si[0],Ki=si[1]/2+zy,Ci=Ba(Ki),$o=$a(Ki),Yi=0;Yi<Gr;++Yi,Tr=os,Ci=fl,$o=bg,si=po){var po=ei[Yi],os=po[0],js=po[1]/2+zy,fl=Ba(js),bg=$a(js),Ld=os-Tr,xg=Ld>=0?1:-1,wg=xg*Ld,vp=wg>Vs,Lm=Ci*fl;if(e1.add(fp(Lm*xg*Ba(wg),$o*bg+Lm*$a(wg))),oi+=vp?Ld+xg*bh:Ld,vp^Tr>=Br^os>=Br){var _p=Em(Pa(si),Pa(po));Y0(_p);var rv=Em(Fr,_p);Y0(rv);var iv=(vp^Ld>=0?-1:1)*Zc(rv[2]);(Jr>iv||Jr===iv&&(_p[0]||_p[1]))&&(Wr+=vp^Ld>=0?1:-1)}}return(oi<-1e-6||oi<wa&&e1<-1e-6)^1&Wr}(Dt,Jt);Ft.length?(vn||(Ot.polygonStart(),vn=!0),Q0(Ft,r1,qn,xt,Ot)):qn&&(vn||(Ot.polygonStart(),vn=!0),Ot.lineStart(),xt(null,null,1,Ot),Ot.lineEnd()),vn&&(Ot.polygonEnd(),vn=!1),Ft=Dt=null},sphere:function(){Ot.polygonStart(),Ot.lineStart(),xt(null,null,1,Ot),Ot.lineEnd(),Ot.polygonEnd()}};function En(qn,Gn){var Xr=At(qn,Gn);st(qn=Xr[0],Gn=Xr[1])&&Ot.point(qn,Gn)}function cn(qn,Gn){var Xr=At(qn,Gn);Gt.point(Xr[0],Xr[1])}function Hn(){_n.point=cn,Gt.lineStart()}function nr(){_n.point=En,Gt.lineEnd()}function bn(qn,Gn){jt.push([qn,Gn]);var Xr=At(qn,Gn);on.point(Xr[0],Xr[1])}function zn(){on.lineStart(),jt=[]}function Un(){bn(jt[0][0],jt[0][1]),on.lineEnd();var qn,Gn,Xr,Br,Jr=on.clean(),Fr=qt.result(),oi=Fr.length;if(jt.pop(),Dt.push(jt),jt=null,oi)if(1&Jr){if((Gn=(Xr=Fr[0]).length-1)>0){for(vn||(Ot.polygonStart(),vn=!0),Ot.lineStart(),qn=0;qn<Gn;++qn)Ot.point((Br=Xr[qn])[0],Br[1]);Ot.lineEnd()}}else oi>1&&2&Jr&&Fr.push(Fr.pop().concat(Fr.shift())),Ft.push(Fr.filter(Wy))}return _n}}function Wy(st){return st.length>1}function r1(st,_t){return((st=st.x)[0]<0?st[1]-_h-wa:_h-st[1])-((_t=_t.x)[0]<0?_t[1]-_h-wa:_h-_t[1])}var i1=n1(function(){return!0},function(st){var _t,xt=NaN,Et=NaN,At=NaN;return{lineStart:function(){st.lineStart(),_t=1},point:function(Ot,Dt){var Ft=Ot>0?Vs:-Vs,jt=Il(Ot-xt);Il(jt-Vs)<wa?(st.point(xt,Et=(Et+Dt)/2>0?_h:-_h),st.point(At,Et),st.lineEnd(),st.lineStart(),st.point(Ft,Et),st.point(Ot,Et),_t=0):At!==Ft&&jt>=Vs&&(Il(xt-At)<wa&&(xt-=At*wa),Il(Ot-Ft)<wa&&(Ot-=Ft*wa),Et=function(Gt,Jt,qt,on){var vn,_n,En=Ba(Gt-qt);return Il(En)>wa?u_((Ba(Jt)*(_n=$a(on))*Ba(qt)-Ba(on)*(vn=$a(Jt))*Ba(Gt))/(vn*_n*En)):(Jt+on)/2}(xt,Et,Ot,Dt),st.point(At,Et),st.lineEnd(),st.lineStart(),st.point(Ft,Et),_t=0),st.point(xt=Ot,Et=Dt),At=Ft},lineEnd:function(){st.lineEnd(),xt=Et=NaN},clean:function(){return 2-_t}}},function(st,_t,xt,Et){var At;if(st==null)At=xt*_h,Et.point(-Vs,At),Et.point(0,At),Et.point(Vs,At),Et.point(Vs,0),Et.point(Vs,-At),Et.point(0,-At),Et.point(-Vs,-At),Et.point(-Vs,0),Et.point(-Vs,At);else if(Il(st[0]-_t[0])>wa){var Ot=st[0]<_t[0]?Vs:-Vs;At=xt*Ot/2,Et.point(-Ot,At),Et.point(0,At),Et.point(Ot,At)}else Et.point(_t[0],_t[1])},[-Vs,-_h]);function Pm(st,_t){var xt=$a(st),Et=xt>0,At=Il(xt)>wa;function Ot(jt,Gt){return $a(jt)*$a(Gt)>xt}function Dt(jt,Gt,Jt){var qt=[1,0,0],on=Em(Pa(jt),Pa(Gt)),vn=mg(on,on),_n=on[0],En=vn-_n*_n;if(!En)return!Jt&&jt;var cn=xt*vn/En,Hn=-xt*_n/En,nr=Em(qt,on),bn=Sm(qt,cn);G0(bn,Sm(on,Hn));var zn=nr,Un=mg(bn,zn),qn=mg(zn,zn),Gn=Un*Un-qn*(mg(bn,bn)-1);if(!(Gn<0)){var Xr=pg(Gn),Br=Sm(zn,(-Un-Xr)/qn);if(G0(Br,bn),Br=W0(Br),!Jt)return Br;var Jr,Fr=jt[0],oi=Gt[0],Wr=jt[1],jr=Gt[1];oi<Fr&&(Jr=Fr,Fr=oi,oi=Jr);var Hr=oi-Fr,ei=Il(Hr-Vs)<wa;if(!ei&&jr<Wr&&(Jr=Wr,Wr=jr,jr=Jr),ei||Hr<wa?ei?Wr+jr>0^Br[1]<(Il(Br[0]-Fr)<wa?Wr:jr):Wr<=Br[1]&&Br[1]<=jr:Hr>Vs^(Fr<=Br[0]&&Br[0]<=oi)){var Gr=Sm(zn,(-Un+Xr)/qn);return G0(Gr,bn),[Br,W0(Gr)]}}}function Ft(jt,Gt){var Jt=Et?st:Vs-st,qt=0;return jt<-Jt?qt|=1:jt>Jt&&(qt|=2),Gt<-Jt?qt|=4:Gt>Jt&&(qt|=8),qt}return n1(Ot,function(jt){var Gt,Jt,qt,on,vn;return{lineStart:function(){on=qt=!1,vn=1},point:function(_n,En){var cn,Hn=[_n,En],nr=Ot(_n,En),bn=Et?nr?0:Ft(_n,En):nr?Ft(_n+(_n<0?Vs:-Vs),En):0;if(!Gt&&(on=qt=nr)&&jt.lineStart(),nr!==qt&&(!(cn=Dt(Gt,Hn))||Tm(Gt,cn)||Tm(Hn,cn))&&(Hn[0]+=wa,Hn[1]+=wa,nr=Ot(Hn[0],Hn[1])),nr!==qt)vn=0,nr?(jt.lineStart(),cn=Dt(Hn,Gt),jt.point(cn[0],cn[1])):(cn=Dt(Gt,Hn),jt.point(cn[0],cn[1]),jt.lineEnd()),Gt=cn;else if(At&&Gt&&Et^nr){var zn;bn&Jt||!(zn=Dt(Hn,Gt,!0))||(vn=0,Et?(jt.lineStart(),jt.point(zn[0][0],zn[0][1]),jt.point(zn[1][0],zn[1][1]),jt.lineEnd()):(jt.point(zn[1][0],zn[1][1]),jt.lineEnd(),jt.lineStart(),jt.point(zn[0][0],zn[0][1])))}!nr||Gt&&Tm(Gt,Hn)||jt.point(Hn[0],Hn[1]),Gt=Hn,qt=nr,Jt=bn},lineEnd:function(){qt&&jt.lineEnd(),Gt=null},clean:function(){return vn|(on&&qt)<<1}}},function(jt,Gt,Jt,qt){(function(on,vn,_n,En,cn,Hn){if(_n){var nr=$a(vn),bn=Ba(vn),zn=En*_n;cn==null?(cn=vn+En*bh,Hn=vn-zn/2):(cn=J0(nr,cn),Hn=J0(nr,Hn),(En>0?cn<Hn:cn>Hn)&&(cn+=En*bh));for(var Un,qn=cn;En>0?qn>Hn:qn<Hn;qn-=zn)Un=W0([nr,-bn*$a(qn),-bn*Ba(qn)]),on.point(Un[0],Un[1])}})(qt,st,_t,Jt,jt,Gt)},Et?[0,-st]:[-Vs,st-Vs])}function Gy(st){return function(_t){var xt=new o1;for(var Et in st)xt[Et]=st[Et];return xt.stream=_t,xt}}function o1(){}function _g(st,_t,xt){var Et=_t[1][0]-_t[0][0],At=_t[1][1]-_t[0][1],Ot=st.clipExtent&&st.clipExtent();st.scale(150).translate([0,0]),Ot!=null&&st.clipExtent(null),function(Jt,qt){Jt&&xm.hasOwnProperty(Jt.type)?xm[Jt.type](Jt,qt):gg(Jt,qt)}(xt,st.stream(jy));var Dt=jy.result(),Ft=Math.min(Et/(Dt[1][0]-Dt[0][0]),At/(Dt[1][1]-Dt[0][1])),jt=+_t[0][0]+(Et-Ft*(Dt[1][0]+Dt[0][0]))/2,Gt=+_t[0][1]+(At-Ft*(Dt[1][1]+Dt[0][1]))/2;return Ot!=null&&st.clipExtent(Ot),st.scale(150*Ft).translate([jt,Gt])}o1.prototype={constructor:o1,point:function(st,_t){this.stream.point(st,_t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var c_=$a(30*Mu);function Yy(st,_t){return+_t?function(xt,Et){function At(Ot,Dt,Ft,jt,Gt,Jt,qt,on,vn,_n,En,cn,Hn,nr){var bn=qt-Ot,zn=on-Dt,Un=bn*bn+zn*zn;if(Un>4*Et&&Hn--){var qn=jt+_n,Gn=Gt+En,Xr=Jt+cn,Br=pg(qn*qn+Gn*Gn+Xr*Xr),Jr=Zc(Xr/=Br),Fr=Il(Il(Xr)-1)<wa||Il(Ft-vn)<wa?(Ft+vn)/2:fp(Gn,qn),oi=xt(Fr,Jr),Wr=oi[0],jr=oi[1],Hr=Wr-Ot,ei=jr-Dt,Gr=zn*Hr-bn*ei;(Gr*Gr/Un>Et||Il((bn*Hr+zn*ei)/Un-.5)>.3||jt*_n+Gt*En+Jt*cn<c_)&&(At(Ot,Dt,Ft,jt,Gt,Jt,Wr,jr,Fr,qn/=Br,Gn/=Br,Xr,Hn,nr),nr.point(Wr,jr),At(Wr,jr,Fr,qn,Gn,Xr,qt,on,vn,_n,En,cn,Hn,nr))}}return function(Ot){var Dt,Ft,jt,Gt,Jt,qt,on,vn,_n,En,cn,Hn,nr={point:bn,lineStart:zn,lineEnd:qn,polygonStart:function(){Ot.polygonStart(),nr.lineStart=Gn},polygonEnd:function(){Ot.polygonEnd(),nr.lineStart=zn}};function bn(Jr,Fr){Jr=xt(Jr,Fr),Ot.point(Jr[0],Jr[1])}function zn(){vn=NaN,nr.point=Un,Ot.lineStart()}function Un(Jr,Fr){var oi=Pa([Jr,Fr]),Wr=xt(Jr,Fr);At(vn,_n,on,En,cn,Hn,vn=Wr[0],_n=Wr[1],on=Jr,En=oi[0],cn=oi[1],Hn=oi[2],16,Ot),Ot.point(vn,_n)}function qn(){nr.point=bn,Ot.lineEnd()}function Gn(){zn(),nr.point=Xr,nr.lineEnd=Br}function Xr(Jr,Fr){Un(Dt=Jr,Fr),Ft=vn,jt=_n,Gt=En,Jt=cn,qt=Hn,nr.point=Un}function Br(){At(vn,_n,on,En,cn,Hn,Ft,jt,Dt,Gt,Jt,qt,16,Ot),nr.lineEnd=qn,qn()}return nr}}(st,_t):function(xt){return Gy({point:function(Et,At){Et=xt(Et,At),this.stream.point(Et[0],Et[1])}})}(st)}var qy=Gy({point:function(st,_t){this.stream.point(st*Mu,_t*Mu)}});function h_(st){return function(_t){var xt,Et,At,Ot,Dt,Ft,jt,Gt,Jt,qt,on=150,vn=480,_n=250,En=0,cn=0,Hn=0,nr=0,bn=0,zn=null,Un=i1,qn=null,Gn=Uy,Xr=.5,Br=Yy(oi,Xr);function Jr(Hr){return[(Hr=Dt(Hr[0]*Mu,Hr[1]*Mu))[0]*on+Et,At-Hr[1]*on]}function Fr(Hr){return(Hr=Dt.invert((Hr[0]-Et)/on,(At-Hr[1])/on))&&[Hr[0]*So,Hr[1]*So]}function oi(Hr,ei){return[(Hr=xt(Hr,ei))[0]*on+Et,At-Hr[1]*on]}function Wr(){Dt=q0(Ot=function(ei,Gr,si){return(ei%=bh)?Gr||si?q0(Z0(ei),K0(Gr,si)):Z0(ei):Gr||si?K0(Gr,si):X0}(Hn,nr,bn),xt);var Hr=xt(En,cn);return Et=vn-Hr[0]*on,At=_n+Hr[1]*on,jr()}function jr(){return Jt=qt=null,Jr}return Jr.stream=function(Hr){return Jt&&qt===Hr?Jt:Jt=qy(Un(Ot,Br(Gn(qt=Hr))))},Jr.clipAngle=function(Hr){return arguments.length?(Un=+Hr?Pm(zn=Hr*Mu,6*Mu):(zn=null,i1),jr()):zn*So},Jr.clipExtent=function(Hr){return arguments.length?(Gn=Hr==null?(qn=Ft=jt=Gt=null,Uy):km(qn=+Hr[0][0],Ft=+Hr[0][1],jt=+Hr[1][0],Gt=+Hr[1][1]),jr()):qn==null?null:[[qn,Ft],[jt,Gt]]},Jr.scale=function(Hr){return arguments.length?(on=+Hr,Wr()):on},Jr.translate=function(Hr){return arguments.length?(vn=+Hr[0],_n=+Hr[1],Wr()):[vn,_n]},Jr.center=function(Hr){return arguments.length?(En=Hr[0]%360*Mu,cn=Hr[1]%360*Mu,Wr()):[En*So,cn*So]},Jr.rotate=function(Hr){return arguments.length?(Hn=Hr[0]%360*Mu,nr=Hr[1]%360*Mu,bn=Hr.length>2?Hr[2]%360*Mu:0,Wr()):[Hn*So,nr*So,bn*So]},Jr.precision=function(Hr){return arguments.length?(Br=Yy(oi,Xr=Hr*Hr),jr()):pg(Xr)},Jr.fitExtent=function(Hr,ei){return _g(Jr,Hr,ei)},Jr.fitSize=function(Hr,ei){return function(Gr,si,Tr){return _g(Gr,[[0,0],si],Tr)}(Jr,Hr,ei)},function(){return xt=_t.apply(this,arguments),Jr.invert=xt.invert&&Fr,Wr()}}(function(){return st})()}var s1=function(st){return function(_t,xt){var Et=$a(_t),At=$a(xt),Ot=st(Et*At);return[Ot*At*Ba(_t),Ot*Ba(xt)]}}(function(st){return(st=bm(st))&&st/Ba(st)});function d_(){return h_(s1).scale(79.4188).clipAngle(179.999)}function vf(st,_t,xt,Et){var At=st.properties||{},Ot=st.type==="Feature"?st.geometry:st;if(Ot.type==="GeometryCollection"){var Dt=[];return gr(st,function(on){var vn=vf(on,_t,xt,Et);vn&&Dt.push(vn)}),Wt(Dt)}var Ft=function(on){var vn=Ua(on).geometry.coordinates,_n=[-vn[0],-vn[1]];return d_().rotate(_n).scale(rt)}(Ot),jt={type:Ot.type,coordinates:Zy(Ot.coordinates,Ft)},Gt=new lm().read(jt),Jt=ln(sn(_t,xt),"meters"),qt=Gs.bufferOp(Gt,Jt,Et);if(!Xy((qt=new Ly().write(qt)).coordinates))return wt({type:qt.type,coordinates:Ky(qt.coordinates,Ft)},At)}function Xy(st){return Array.isArray(st[0])?Xy(st[0]):isNaN(st[0])}function Zy(st,_t){return typeof st[0]!="object"?_t(st):st.map(function(xt){return Zy(xt,_t)})}function Ky(st,_t){return typeof st[0]!="object"?_t.invert(st):st.map(function(xt){return Ky(xt,_t)})}function _f(st,_t,xt){xt===void 0&&(xt={});var Et=Wn(st),At=Wn(_t),Ot=Dh.intersection(Et.coordinates,At.coordinates);return Ot.length===0?null:Ot.length===1?Mt(Ot[0],xt.properties):Yt(Ot,xt.properties)}function Jy(st,_t,xt){xt===void 0&&(xt={});var Et=JSON.stringify(xt.properties||{}),At=st[0],Ot=st[1],Dt=st[2],Ft=st[3],jt=(Ot+Ft)/2,Gt=(At+Dt)/2,Jt=2*_t/vo([At,jt],[Dt,jt],xt)*(Dt-At),qt=2*_t/vo([Gt,Ot],[Gt,Ft],xt)*(Ft-Ot),on=Jt/2,vn=2*on,_n=Math.sqrt(3)/2*qt,En=Dt-At,cn=Ft-Ot,Hn=3/4*vn,nr=_n,bn=(En-vn)/(vn-on/2),zn=Math.floor(bn),Un=(zn*Hn-on/2-En)/2-on/2+Hn/2,qn=Math.floor((cn-_n)/_n),Gn=(cn-qn*_n)/2,Xr=qn*_n-cn>_n/2;Xr&&(Gn-=_n/4);for(var Br=[],Jr=[],Fr=0;Fr<6;Fr++){var oi=2*Math.PI/6*Fr;Br.push(Math.cos(oi)),Jr.push(Math.sin(oi))}for(var Wr=[],jr=0;jr<=zn;jr++)for(var Hr=0;Hr<=qn;Hr++){var ei=jr%2==1;if((Hr!==0||!ei)&&(Hr!==0||!Xr)){var Gr=jr*Hn+At-Un,si=Hr*nr+Ot+Gn;if(ei&&(si-=_n/2),xt.triangles===!0)ev([Gr,si],Jt/2,qt/2,JSON.parse(Et),Br,Jr).forEach(function(Ki){xt.mask?_f(xt.mask,Ki)&&Wr.push(Ki):Wr.push(Ki)});else{var Tr=Qy([Gr,si],Jt/2,qt/2,JSON.parse(Et),Br,Jr);xt.mask?_f(xt.mask,Tr)&&Wr.push(Tr):Wr.push(Tr)}}}return Wt(Wr)}function Qy(st,_t,xt,Et,At,Ot){for(var Dt=[],Ft=0;Ft<6;Ft++){var jt=st[0]+_t*At[Ft],Gt=st[1]+xt*Ot[Ft];Dt.push([jt,Gt])}return Dt.push(Dt[0].slice()),Mt([Dt],Et)}function ev(st,_t,xt,Et,At,Ot){for(var Dt=[],Ft=0;Ft<6;Ft++){var jt=[];jt.push(st),jt.push([st[0]+_t*At[Ft],st[1]+xt*Ot[Ft]]),jt.push([st[0]+_t*At[(Ft+1)%6],st[1]+xt*Ot[(Ft+1)%6]]),jt.push(st),Dt.push(Mt([jt],Et))}return Dt}function tv(st){return Yt(st)}function f_(st){return Mt(st&&st.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function nv(st,_t,xt){return xt===void 0&&(xt={}),function(Et,At,Ot,Dt){Dt===void 0&&(Dt={});for(var Ft=[],jt=Et[0],Gt=Et[1],Jt=Et[2],qt=Et[3],on=At/vo([jt,Gt],[Jt,Gt],Dt)*(Jt-jt),vn=Ot/vo([jt,Gt],[jt,qt],Dt)*(qt-Gt),_n=Jt-jt,En=qt-Gt,cn=Math.floor(_n/on),Hn=Math.floor(En/vn),nr=(En-Hn*vn)/2,bn=jt+(_n-cn*on)/2,zn=0;zn<cn;zn++){for(var Un=Gt+nr,qn=0;qn<Hn;qn++){var Gn=Mt([[[bn,Un],[bn,Un+vn],[bn+on,Un+vn],[bn+on,Un],[bn,Un]]],Dt.properties);Dt.mask?C1(Dt.mask,Gn)&&Ft.push(Gn):Ft.push(Gn),Un+=vn}bn+=on}return Wt(Ft)}(st,_t,_t,xt)}function a1(st,_t,xt){xt===void 0&&(xt={});for(var Et=[],At=_t/vo([st[0],st[1]],[st[2],st[1]],xt)*(st[2]-st[0]),Ot=_t/vo([st[0],st[1]],[st[0],st[3]],xt)*(st[3]-st[1]),Dt=0,Ft=st[0];Ft<=st[2];){for(var jt=0,Gt=st[1];Gt<=st[3];){var Jt=null,qt=null;Dt%2==0&&jt%2==0?(Jt=Mt([[[Ft,Gt],[Ft,Gt+Ot],[Ft+At,Gt],[Ft,Gt]]],xt.properties),qt=Mt([[[Ft,Gt+Ot],[Ft+At,Gt+Ot],[Ft+At,Gt],[Ft,Gt+Ot]]],xt.properties)):Dt%2==0&&jt%2==1?(Jt=Mt([[[Ft,Gt],[Ft+At,Gt+Ot],[Ft+At,Gt],[Ft,Gt]]],xt.properties),qt=Mt([[[Ft,Gt],[Ft,Gt+Ot],[Ft+At,Gt+Ot],[Ft,Gt]]],xt.properties)):jt%2==0&&Dt%2==1?(Jt=Mt([[[Ft,Gt],[Ft,Gt+Ot],[Ft+At,Gt+Ot],[Ft,Gt]]],xt.properties),qt=Mt([[[Ft,Gt],[Ft+At,Gt+Ot],[Ft+At,Gt],[Ft,Gt]]],xt.properties)):jt%2==1&&Dt%2==1&&(Jt=Mt([[[Ft,Gt],[Ft,Gt+Ot],[Ft+At,Gt],[Ft,Gt]]],xt.properties),qt=Mt([[[Ft,Gt+Ot],[Ft+At,Gt+Ot],[Ft+At,Gt],[Ft,Gt+Ot]]],xt.properties)),xt.mask?(_f(xt.mask,Jt)&&Et.push(Jt),_f(xt.mask,qt)&&Et.push(qt)):(Et.push(Jt),Et.push(qt)),Gt+=Ot,jt++}Dt++,Ft+=At}return Wt(Et)}s1.invert=function(st){return function(_t,xt){var Et=pg(_t*_t+xt*xt),At=st(Et),Ot=Ba(At),Dt=$a(At);return[fp(_t*Ot,Et*Dt),Zc(Et&&xt*Ot/Et)]}}(function(st){return st}),nt.along=function(st,_t,xt){xt===void 0&&(xt={});for(var Et=Wn(st).coordinates,At=0,Ot=0;Ot<Et.length&&!(_t>=At&&Ot===Et.length-1);Ot++){if(At>=_t){var Dt=_t-At;if(Dt){var Ft=Za(Et[Ot],Et[Ot-1])-180;return Ys(Et[Ot],Dt,Ft,xt)}return kt(Et[Ot])}At+=vo(Et[Ot],Et[Ot+1],xt)}return kt(Et[Et.length-1])},nt.angle=function(st,_t,xt,Et){if(Et===void 0&&(Et={}),!gn(Et))throw new Error("options is invalid");if(!st)throw new Error("startPoint is required");if(!_t)throw new Error("midPoint is required");if(!xt)throw new Error("endPoint is required");var At=st,Ot=_t,Dt=xt,Ft=wn(Et.mercator!==!0?Za(At,Ot):Gd(At,Ot)),jt=wn(Et.mercator!==!0?Za(Dt,Ot):Gd(Dt,Ot)),Gt=Math.abs(Ft-jt);return Et.explementary===!0?360-Gt:Gt},nt.applyFilter=Xg,nt.area=Hd,nt.areaFactors=bt,nt.bbox=dn,nt.bboxClip=function(st,_t){var xt=Wn(st),Et=xt.type,At=st.type==="Feature"?st.properties:{},Ot=xt.coordinates;switch(Et){case"LineString":case"MultiLineString":var Dt=[];return Et==="LineString"&&(Ot=[Ot]),Ot.forEach(function(Ft){(function(jt,Gt,Jt){var qt,on,vn,_n,En,cn=jt.length,Hn=Qs(jt[0],Gt),nr=[];for(Jt||(Jt=[]),qt=1;qt<cn;qt++){for(_n=jt[qt-1],on=vn=Qs(En=jt[qt],Gt);;){if(!(Hn|on)){nr.push(_n),on!==vn?(nr.push(En),qt<cn-1&&(Jt.push(nr),nr=[])):qt===cn-1&&nr.push(En);break}if(Hn&on)break;Hn?Hn=Qs(_n=Rf(_n,En,Hn,Gt),Gt):on=Qs(En=Rf(_n,En,on,Gt),Gt)}Hn=vn}nr.length&&Jt.push(nr)})(Ft,_t,Dt)}),Dt.length===1?zt(Dt[0],At):Zt(Dt,At);case"Polygon":return Mt(Wd(Ot,_t),At);case"MultiPolygon":return Yt(Ot.map(function(Ft){return Wd(Ft,_t)}),At);default:throw new Error("geometry "+Et+" not supported")}},nt.bboxPolygon=ed,nt.bearing=Za,nt.bearingToAngle=wn,nt.bearingToAzimuth=wn,nt.bezier=Dd,nt.bezierSpline=Dd,nt.booleanClockwise=Np,nt.booleanContains=function(st,_t){var xt=Wn(st),Et=Wn(_t),At=xt.type,Ot=Et.type,Dt=xt.coordinates,Ft=Et.coordinates;switch(At){case"Point":switch(Ot){case"Point":return o0(Dt,Ft);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"MultiPoint":switch(Ot){case"Point":return function(jt,Gt){var Jt,qt=!1;for(Jt=0;Jt<jt.coordinates.length;Jt++)if(o0(jt.coordinates[Jt],Gt.coordinates)){qt=!0;break}return qt}(xt,Et);case"MultiPoint":return function(jt,Gt){for(var Jt=0,qt=Gt.coordinates;Jt<qt.length;Jt++){for(var on=qt[Jt],vn=!1,_n=0,En=jt.coordinates;_n<En.length;_n++)if(o0(on,En[_n])){vn=!0;break}if(!vn)return!1}return!0}(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"Point":return yl(Et,xt,{ignoreEndVertices:!0});case"LineString":return function(jt,Gt){for(var Jt=!1,qt=0,on=Gt.coordinates;qt<on.length;qt++){var vn=on[qt];if(yl({type:"Point",coordinates:vn},jt,{ignoreEndVertices:!0})&&(Jt=!0),!yl({type:"Point",coordinates:vn},jt,{ignoreEndVertices:!1}))return!1}return Jt}(xt,Et);case"MultiPoint":return function(jt,Gt){for(var Jt=!1,qt=0,on=Gt.coordinates;qt<on.length;qt++){var vn=on[qt];if(yl(vn,jt,{ignoreEndVertices:!0})&&(Jt=!0),!yl(vn,jt))return!1}return!!Jt}(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"Point":return yo(Et,xt,{ignoreBoundary:!0});case"LineString":return function(jt,Gt){var Jt=!1,qt=0,on=dn(jt),vn=dn(Gt);if(!x1(on,vn))return!1;for(;qt<Gt.coordinates.length-1;qt++)if(yo({type:"Point",coordinates:Ev(Gt.coordinates[qt],Gt.coordinates[qt+1])},jt,{ignoreBoundary:!0})){Jt=!0;break}return Jt}(xt,Et);case"Polygon":return function(jt,Gt){if(jt.type==="Feature"&&jt.geometry===null||Gt.type==="Feature"&&Gt.geometry===null)return!1;var Jt=dn(jt),qt=dn(Gt);if(!x1(Jt,qt))return!1;for(var on=Wn(Gt).coordinates,vn=0,_n=on;vn<_n.length;vn++)for(var En=0,cn=_n[vn];En<cn.length;En++)if(!yo(cn[En],jt))return!1;return!0}(xt,Et);case"MultiPoint":return function(jt,Gt){for(var Jt=0,qt=Gt.coordinates;Jt<qt.length;Jt++)if(!yo(qt[Jt],jt,{ignoreBoundary:!0}))return!1;return!0}(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanCrosses=function(st,_t){var xt=Wn(st),Et=Wn(_t),At=xt.type,Ot=Et.type;switch(At){case"MultiPoint":switch(Ot){case"LineString":return w1(xt,Et);case"Polygon":return s0(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"MultiPoint":return w1(Et,xt);case"LineString":return function(Dt,Ft){if(ll(Dt,Ft).features.length>0)for(var jt=0;jt<Dt.coordinates.length-1;jt++)for(var Gt=0;Gt<Ft.coordinates.length-1;Gt++){var Jt=!0;if(Gt!==0&&Gt!==Ft.coordinates.length-2||(Jt=!1),S1(Dt.coordinates[jt],Dt.coordinates[jt+1],Ft.coordinates[Gt],Jt))return!0}return!1}(xt,Et);case"Polygon":return E1(xt,Et);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"MultiPoint":return s0(Et,xt);case"LineString":return E1(Et,xt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanDisjoint=i0,nt.booleanEqual=function(st,_t){return Wn(st).type===Wn(_t).type&&new a0({precision:6}).compare(Tl(st),Tl(_t))},nt.booleanIntersects=C1,nt.booleanOverlap=function(st,_t){var xt=Wn(st),Et=Wn(_t),At=xt.type,Ot=Et.type;if(At==="MultiPoint"&&Ot!=="MultiPoint"||(At==="LineString"||At==="MultiLineString")&&Ot!=="LineString"&&Ot!=="MultiLineString"||(At==="Polygon"||At==="MultiPolygon")&&Ot!=="Polygon"&&Ot!=="MultiPolygon")throw new Error("features must be of the same type");if(At==="Point")throw new Error("Point geometry not supported");if(new a0({precision:6}).compare(st,_t))return!1;var Dt=0;switch(At){case"MultiPoint":for(var Ft=0;Ft<xt.coordinates.length;Ft++)for(var jt=0;jt<Et.coordinates.length;jt++){var Gt=xt.coordinates[Ft],Jt=Et.coordinates[jt];if(Gt[0]===Jt[0]&&Gt[1]===Jt[1])return!0}return!1;case"LineString":case"MultiLineString":ii(st,function(qt){ii(_t,function(on){fd(qt,on).features.length&&Dt++})});break;case"Polygon":case"MultiPolygon":ii(st,function(qt){ii(_t,function(on){ll(qt,on).features.length&&Dt++})})}return Dt>0},nt.booleanParallel=function(st,_t){if(!st)throw new Error("line1 is required");if(!_t)throw new Error("line2 is required");if(h0(st,"line1")!=="LineString")throw new Error("line1 must be a LineString");if(h0(_t,"line2")!=="LineString")throw new Error("line2 must be a LineString");for(var xt=$u(Tl(st)).features,Et=$u(Tl(_t)).features,At=0;At<xt.length;At++){var Ot=xt[At].geometry.coordinates;if(!Et[At])break;if(!Ug(Ot,Et[At].geometry.coordinates))return!1}return!0},nt.booleanPointInPolygon=yo,nt.booleanPointOnLine=yl,nt.booleanWithin=Ap,nt.buffer=function(st,_t,xt){var Et=(xt=xt||{}).units||"kilometers",At=xt.steps||8;if(!st)throw new Error("geojson is required");if(typeof xt!="object")throw new Error("options must be an object");if(typeof At!="number")throw new Error("steps must be an number");if(_t===void 0)throw new Error("radius is required");if(At<=0)throw new Error("steps must be greater than 0");var Ot=[];switch(st.type){case"GeometryCollection":return gr(st,function(Dt){var Ft=vf(Dt,_t,Et,At);Ft&&Ot.push(Ft)}),Wt(Ot);case"FeatureCollection":return rr(st,function(Dt){var Ft=vf(Dt,_t,Et,At);Ft&&rr(Ft,function(jt){jt&&Ot.push(jt)})}),Wt(Ot)}return vf(st,_t,Et,At)},nt.center=Ua,nt.centerMean=y0,nt.centerMedian=function(st,_t){if(_t===void 0&&(_t={}),!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.counter||10;if(!kn(xt))throw new Error("counter must be a number");var Et=_t.weight,At=y0(st,{weight:_t.weight}),Ot=Wt([]);rr(st,function(Ft){var jt;Ot.features.push(kl(Ft,{properties:{weight:(jt=Ft.properties)===null||jt===void 0?void 0:jt[Et]}}))});var Dt={tolerance:_t.tolerance,medianCandidates:[]};return V1(At.geometry.coordinates,[0,0],Ot,Dt,xt)},nt.centerOfMass=function st(_t,xt){switch(xt===void 0&&(xt={}),or(_t)){case"Point":return kt(un(_t),xt.properties);case"Polygon":var Et=[];yn(_t,function(zn){Et.push(zn)});var At,Ot,Dt,Ft,jt,Gt,Jt,qt,on=kl(_t,{properties:xt.properties}),vn=on.geometry.coordinates,_n=0,En=0,cn=0,Hn=Et.map(function(zn){return[zn[0]-vn[0],zn[1]-vn[1]]});for(At=0;At<Et.length-1;At++)Ft=(Ot=Hn[At])[0],Gt=Ot[1],jt=(Dt=Hn[At+1])[0],cn+=qt=Ft*(Jt=Dt[1])-jt*Gt,_n+=(Ft+jt)*qt,En+=(Gt+Jt)*qt;if(cn===0)return on;var nr=1/(6*(.5*cn));return kt([vn[0]+nr*_n,vn[1]+nr*En],xt.properties);default:var bn=Bo(_t);return bn?st(bn,{properties:xt.properties}):kl(_t,{properties:xt.properties})}},nt.centroid=kl,nt.circle=Nu,nt.cleanCoords=Tl,nt.clone=Vo,nt.clusterEach=_0,nt.clusterReduce=qg,nt.clusters=Yv,nt.clustersDbscan=function(st,_t,xt){xt===void 0&&(xt={}),xt.mutate!==!0&&(st=Vo(st)),xt.minPoints=xt.minPoints||3;var Et=new Av.DBSCAN,At=Et.run(cr(st),Pn(_t,xt.units),xt.minPoints,vo),Ot=-1;return At.forEach(function(Dt){Ot++,Dt.forEach(function(Ft){var jt=st.features[Ft];jt.properties||(jt.properties={}),jt.properties.cluster=Ot,jt.properties.dbscan="core"})}),Et.noise.forEach(function(Dt){var Ft=st.features[Dt];Ft.properties||(Ft.properties={}),Ft.properties.cluster?Ft.properties.dbscan="edge":Ft.properties.dbscan="noise"}),st},nt.clustersKmeans=function(st,_t){_t===void 0&&(_t={});var xt=st.features.length;_t.numberOfClusters=_t.numberOfClusters||Math.round(Math.sqrt(xt/2)),_t.numberOfClusters>xt&&(_t.numberOfClusters=xt),_t.mutate!==!0&&(st=Vo(st));var Et=cr(st),At=Et.slice(0,_t.numberOfClusters),Ot=c0(Et,_t.numberOfClusters,At),Dt={};return Ot.centroids.forEach(function(Ft,jt){Dt[jt]=Ft}),rr(st,function(Ft,jt){var Gt=Ot.idxs[jt];Ft.properties.cluster=Gt,Ft.properties.centroid=Dt[Gt]}),st},nt.collect=function(st,_t,xt,Et){var At=Ir(6),Ot=_t.features.map(function(Dt){var Ft;return{minX:Dt.geometry.coordinates[0],minY:Dt.geometry.coordinates[1],maxX:Dt.geometry.coordinates[0],maxY:Dt.geometry.coordinates[1],property:(Ft=Dt.properties)===null||Ft===void 0?void 0:Ft[xt]}});return At.load(Ot),st.features.forEach(function(Dt){Dt.properties||(Dt.properties={});var Ft=dn(Dt),jt=At.search({minX:Ft[0],minY:Ft[1],maxX:Ft[2],maxY:Ft[3]}),Gt=[];jt.forEach(function(Jt){yo([Jt.minX,Jt.minY],Dt)&&Gt.push(Jt.property)}),Dt.properties[Et]=Gt}),st},nt.collectionOf=Qn,nt.combine=function(st){var _t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return rr(st,function(xt){var Et,At,Ot,Dt;switch((Dt=xt.geometry)===null||Dt===void 0?void 0:Dt.type){case"Point":_t.MultiPoint.coordinates.push(xt.geometry.coordinates),_t.MultiPoint.properties.push(xt.properties);break;case"MultiPoint":(Et=_t.MultiPoint.coordinates).push.apply(Et,xt.geometry.coordinates),_t.MultiPoint.properties.push(xt.properties);break;case"LineString":_t.MultiLineString.coordinates.push(xt.geometry.coordinates),_t.MultiLineString.properties.push(xt.properties);break;case"MultiLineString":(At=_t.MultiLineString.coordinates).push.apply(At,xt.geometry.coordinates),_t.MultiLineString.properties.push(xt.properties);break;case"Polygon":_t.MultiPolygon.coordinates.push(xt.geometry.coordinates),_t.MultiPolygon.properties.push(xt.properties);break;case"MultiPolygon":(Ot=_t.MultiPolygon.coordinates).push.apply(Ot,xt.geometry.coordinates),_t.MultiPolygon.properties.push(xt.properties)}}),Wt(Object.keys(_t).filter(function(xt){return _t[xt].coordinates.length}).sort().map(function(xt){return wt({type:xt,coordinates:_t[xt].coordinates},{collectedProperties:_t[xt].properties})}))},nt.concave=function(st,_t){_t===void 0&&(_t={});var xt=_t.maxEdge||1/0,Et=qa(function(Ot){var Dt=[],Ft={};return rr(Ot,function(jt){if(jt.geometry){var Gt=jt.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(Ft,Gt)||(Dt.push(jt),Ft[Gt]=!0)}}),Wt(Dt)}(st));if(Et.features=Et.features.filter(function(Ot){var Dt=Ot.geometry.coordinates[0][0],Ft=Ot.geometry.coordinates[0][1],jt=Ot.geometry.coordinates[0][2],Gt=vo(Dt,Ft,_t),Jt=vo(Ft,jt,_t),qt=vo(Dt,jt,_t);return Gt<=xt&&Jt<=xt&&qt<=xt}),Et.features.length<1)return null;var At=Qh(Et);return At.coordinates.length===1&&(At.coordinates=At.coordinates[0],At.type="Polygon"),wt(At)},nt.containsNumber=In,nt.convertArea=On,nt.convertDistance=Pn,nt.convertLength=Pn,nt.convex=Bo,nt.coordAll=cr,nt.coordEach=yn,nt.coordReduce=mr,nt.createBins=b0,nt.degrees2radians=An,nt.degreesToRadians=An,nt.destination=Ys,nt.difference=function(st,_t){var xt=Wn(st),Et=Wn(_t),At=st.properties||{},Ot=Dh.difference(xt.coordinates,Et.coordinates);return Ot.length===0?null:Ot.length===1?Mt(Ot[0],At):Yt(Ot,At)},nt.dissolve=function(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.propertyName;Qn(st,"Polygon","dissolve");var Et=[];if(!_t.propertyName)return Ud(Yt(Dh.union.apply(null,st.features.map(function(jt){return jt.geometry.coordinates}))));var At={};rr(st,function(jt){Object.prototype.hasOwnProperty.call(At,jt.properties[xt])||(At[jt.properties[xt]]=[]),At[jt.properties[xt]].push(jt)});for(var Ot=Object.keys(At),Dt=0;Dt<Ot.length;Dt++){var Ft=Yt(Dh.union.apply(null,At[Ot[Dt]].map(function(jt){return jt.geometry.coordinates})));Ft.properties[xt]=Ot[Dt],Et.push(Ft)}return Ud(Wt(Et))},nt.distance=vo,nt.distanceToDegrees=mn,nt.distanceToRadians=sn,nt.distanceWeight=j1,nt.earthRadius=rt,nt.ellipse=z1,nt.envelope=Th,nt.explode=Eo,nt.factors=it,nt.feature=wt,nt.featureCollection=Wt,nt.featureEach=rr,nt.featureOf=$n,nt.featureReduce=vr,nt.filterProperties=ny,nt.findPoint=Ln,nt.findSegment=ir,nt.flatten=Ud,nt.flattenEach=Ar,nt.flattenReduce=sr,nt.flip=function(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.mutate;if(!st)throw new Error("geojson is required");return xt!==!1&&xt!==void 0||(st=Vo(st)),yn(st,function(Et){var At=Et[0],Ot=Et[1];Et[0]=Ot,Et[1]=At}),st},nt.geojsonType=lr,nt.geomEach=gr,nt.geomReduce=Or,nt.geometry=Tt,nt.geometryCollection=nn,nt.getCluster=ty,nt.getCoord=un,nt.getCoords=Nn,nt.getGeom=Wn,nt.getType=or,nt.greatCircle=function(st,_t,xt){if(typeof(xt=xt||{})!="object")throw new Error("options is invalid");var Et=xt.properties,At=xt.npoints,Ot=xt.offset;return st=un(st),_t=un(_t),Et=Et||{},At=At||100,Ot=Ot||10,new _i({x:st[0],y:st[1]},{x:_t[0],y:_t[1]},Et).Arc(At,{offset:Ot}).json()},nt.helpers=pr,nt.hexGrid=Jy,nt.inside=yo,nt.interpolate=function(st,_t,xt){if(typeof(xt=xt||{})!="object")throw new Error("options is invalid");var Et=xt.gridType,At=xt.property,Ot=xt.weight;if(!st)throw new Error("points is required");if(Qn(st,"Point","input must contain Points"),!_t)throw new Error("cellSize is required");if(Ot!==void 0&&typeof Ot!="number")throw new Error("weight must be a number");At=At||"elevation",Et=Et||"square",Ot=Ot||1;var Dt,Ft=dn(st);switch(Et){case"point":case"points":Dt=If(Ft,_t,xt);break;case"square":case"squares":Dt=nv(Ft,_t,xt);break;case"hex":case"hexes":Dt=Jy(Ft,_t,xt);break;case"triangle":case"triangles":Dt=a1(Ft,_t,xt);break;default:throw new Error("invalid gridType")}var jt=[];return rr(Dt,function(Gt){var Jt=0,qt=0;rr(st,function(vn){var _n,En=vo(Et==="point"?Gt:kl(Gt),vn,xt);if(At!==void 0&&(_n=vn.properties[At]),_n===void 0&&(_n=vn.geometry.coordinates[2]),_n===void 0)throw new Error("zValue is missing");En===0&&(Jt=_n);var cn=1/Math.pow(En,Ot);qt+=cn,Jt+=cn*_n});var on=Vo(Gt);on.properties[At]=Jt/qt,jt.push(on)}),Wt(jt)},nt.intersect=_f,nt.invariant=dr,nt.isNumber=kn,nt.isObject=gn,nt.isobands=function(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.zProperty||"elevation",At=xt.commonProperties||{},Ot=xt.breaksProperties||[];if(Qn(st,"Point","Input must contain Points"),!_t)throw new Error("breaks is required");if(!Array.isArray(_t))throw new Error("breaks is not an Array");if(!gn(At))throw new Error("commonProperties is not an Object");if(!Array.isArray(Ot))throw new Error("breaksProperties is not an Array");var Dt=jm(st,{zProperty:Et,flip:!0}),Ft=function(jt,Gt,Jt){for(var qt=[],on=1;on<Gt.length;on++){var vn=+Gt[on-1],_n=+Gt[on],En=_v(Bp(gd(jt,vn,_n-vn))),cn={};cn.groupedRings=En,cn[Jt]=vn+"-"+_n,qt.push(cn)}return qt}(Dt,_t,Et);return Wt((Ft=function(jt,Gt,Jt){var qt=dn(Jt),on=qt[2]-qt[0],vn=qt[3]-qt[1],_n=qt[0],En=qt[1],cn=Gt[0].length-1,Hn=Gt.length-1,nr=on/cn,bn=vn/Hn,zn=function(Un){Un[0]=Un[0]*nr+_n,Un[1]=Un[1]*bn+En};return jt.forEach(function(Un){Un.groupedRings.forEach(function(qn){qn.forEach(function(Gn){Gn.forEach(zn)})})}),jt}(Ft,Dt,st)).map(function(jt,Gt){if(Ot[Gt]&&!gn(Ot[Gt]))throw new Error("Each mappedProperty is required to be an Object");var Jt=di({},At,Ot[Gt]);return Jt[Et]=jt[Et],Yt(jt.groupedRings,Jt)}))},nt.isolines=function(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.zProperty||"elevation",At=xt.commonProperties||{},Ot=xt.breaksProperties||[];if(Qn(st,"Point","Input must contain Points"),!_t)throw new Error("breaks is required");if(!Array.isArray(_t))throw new Error("breaks must be an Array");if(!gn(At))throw new Error("commonProperties must be an Object");if(!Array.isArray(Ot))throw new Error("breaksProperties must be an Array");var Dt=Sn(st,{zProperty:Et,flip:!0});return Wt(function(Ft,jt,Gt){var Jt=dn(Gt),qt=Jt[2]-Jt[0],on=Jt[3]-Jt[1],vn=Jt[0],_n=Jt[1],En=jt[0].length-1,cn=jt.length-1,Hn=qt/En,nr=on/cn,bn=function(zn){zn[0]=zn[0]*Hn+vn,zn[1]=zn[1]*nr+_n};return Ft.forEach(function(zn){yn(zn,bn)}),Ft}(function(Ft,jt,Gt,Jt,qt){for(var on=[],vn=1;vn<jt.length;vn++){var _n=+jt[vn],En=di({},Jt,qt[vn]);En[Gt]=_n;var cn=Zt(ki(Ft,_n),En);on.push(cn)}return on}(Dt,_t,Et,At,Ot),Dt,st))},nt.kinks=function(st){var _t,xt,Et={type:"FeatureCollection",features:[]};if((xt=st.type==="Feature"?st.geometry:st).type==="LineString")_t=[xt.coordinates];else if(xt.type==="MultiLineString")_t=xt.coordinates;else if(xt.type==="MultiPolygon")_t=[].concat.apply([],xt.coordinates);else{if(xt.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");_t=xt.coordinates}return _t.forEach(function(At){_t.forEach(function(Ot){for(var Dt=0;Dt<At.length-1;Dt++)for(var Ft=Dt;Ft<Ot.length-1;Ft++)if(!(At===Ot&&(Math.abs(Dt-Ft)===1||Dt===0&&Ft===At.length-2&&At[Dt][0]===At[At.length-1][0]&&At[Dt][1]===At[At.length-1][1]))){var jt=Hm(At[Dt][0],At[Dt][1],At[Dt+1][0],At[Dt+1][1],Ot[Ft][0],Ot[Ft][1],Ot[Ft+1][0],Ot[Ft+1][1]);jt&&Et.features.push(kt([jt[0],jt[1]]))}})}),Et},nt.length=Ah,nt.lengthToDegrees=mn,nt.lengthToRadians=sn,nt.lineArc=oh,nt.lineChunk=function(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.units,At=xt.reverse;if(!st)throw new Error("geojson is required");if(_t<=0)throw new Error("segmentLength must be greater than 0");var Ot=[];return Ar(st,function(Dt){At&&(Dt.geometry.coordinates=Dt.geometry.coordinates.reverse()),function(Ft,jt,Gt,Jt){var qt=Ah(Ft,{units:Gt});if(qt<=jt)return Jt(Ft);var on=qt/jt;Number.isInteger(on)||(on=Math.floor(on)+1);for(var vn=0;vn<on;vn++)Jt(Of(Ft,jt*vn,jt*(vn+1),{units:Gt}),vn)}(Dt,_t,Et,function(Ft){Ot.push(Ft)})}),Wt(Ot)},nt.lineDistance=Ah,nt.lineEach=fr,nt.lineIntersect=ll,nt.lineOffset=function(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.units;if(!st)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("distance is required");var At=or(st),Ot=st.properties;switch(At){case"LineString":return Bf(st,_t,Et);case"MultiLineString":var Dt=[];return Ar(st,function(Ft){Dt.push(Bf(Ft,_t,Et).geometry.coordinates)}),Zt(Dt,Ot);default:throw new Error("geometry "+At+" is not supported")}},nt.lineOverlap=fd,nt.lineReduce=wr,nt.lineSegment=$u,nt.lineSlice=function(st,_t,xt){var Et=Nn(xt);if(or(xt)!=="LineString")throw new Error("line must be a LineString");for(var At,Ot=su(xt,st),Dt=su(xt,_t),Ft=[(At=Ot.properties.index<=Dt.properties.index?[Ot,Dt]:[Dt,Ot])[0].geometry.coordinates],jt=At[0].properties.index+1;jt<At[1].properties.index+1;jt++)Ft.push(Et[jt]);return Ft.push(At[1].geometry.coordinates),zt(Ft,xt.properties)},nt.lineSliceAlong=Of,nt.lineSplit=function(st,_t){if(!st)throw new Error("line is required");if(!_t)throw new Error("splitter is required");var xt=or(st),Et=or(_t);if(xt!=="LineString")throw new Error("line must be LineString");if(Et==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(Et==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var At=ud(_t,{precision:7});switch(Et){case"Point":return Ro(st,At);case"MultiPoint":return Gi(st,At);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Gi(st,ll(st,At))}},nt.lineString=zt,nt.lineStringToPolygon=Ng,nt.lineStrings=Ht,nt.lineToPolygon=Ng,nt.mask=function(st,_t){var xt,Et=f_(_t),At=null;return st.type==="FeatureCollection"?At=tv((xt=st).features.length===2?Dh.union(xt.features[0].geometry.coordinates,xt.features[1].geometry.coordinates):Dh.union.apply(Dh,xt.features.map(function(Ot){return Ot.geometry.coordinates}))):At=tv(Dh.union(st.geometry.coordinates)),At.geometry.coordinates.forEach(function(Ot){Et.geometry.coordinates.push(Ot[0])}),Et},nt.meta=en,nt.midpoint=function(st,_t){return Ys(st,vo(st,_t)/2,Za(st,_t))},nt.moranIndex=function(st,_t){var xt=_t.inputField,Et=_t.threshold||1e5,At=_t.p||2,Ot=_t.binary||!1,Dt=j1(st,{alpha:_t.alpha||-1,binary:Ot,p:At,standardization:_t.standardization||!0,threshold:Et}),Ft=[];rr(st,function(qn){var Gn=qn.properties||{};Ft.push(Gn[xt])});for(var jt=W1(Ft),Gt=function(qn){for(var Gn=W1(qn),Xr=0,Br=0,Jr=qn;Br<Jr.length;Br++){var Fr=Jr[Br];Xr+=Math.pow(Fr-Gn,2)}return Xr/qn.length}(Ft),Jt=0,qt=0,on=0,vn=0,_n=Dt.length,En=0;En<_n;En++){for(var cn=0,Hn=0;Hn<_n;Hn++)Jt+=Dt[En][Hn]*(Ft[En]-jt)*(Ft[Hn]-jt),qt+=Dt[En][Hn],on+=Math.pow(Dt[En][Hn]+Dt[Hn][En],2),cn+=Dt[En][Hn]+Dt[Hn][En];vn+=Math.pow(cn,2)}var nr=Jt/qt/Gt,bn=-1/(_n-1),zn=(_n*_n*(on*=.5)-_n*vn+qt*qt*3)/((_n-1)*(_n+1)*(qt*qt))-bn*bn,Un=Math.sqrt(zn);return{expectedMoranIndex:bn,moranIndex:nr,stdNorm:Un,zNorm:(nr-bn)/Un}},nt.multiLineString=Zt,nt.multiPoint=tn,nt.multiPolygon=Yt,nt.nearest=Yl,nt.nearestPoint=Yl,nt.nearestPointOnLine=su,nt.nearestPointToLine=function(st,_t,xt){xt===void 0&&(xt={});var Et=xt.units,At=xt.properties||{},Ot=function(jt){var Gt=[];switch(jt.geometry?jt.geometry.type:jt.type){case"GeometryCollection":return gr(jt,function(Jt){Jt.type==="Point"&&Gt.push({type:"Feature",properties:{},geometry:Jt})}),{type:"FeatureCollection",features:Gt};case"FeatureCollection":return jt.features=jt.features.filter(function(Jt){return Jt.geometry.type==="Point"}),jt;default:throw new Error("points must be a Point Collection")}}(st);if(!Ot.features.length)throw new Error("points must contain features");if(!_t)throw new Error("line is required");if(or(_t)!=="LineString")throw new Error("line must be a LineString");var Dt=1/0,Ft=null;return rr(Ot,function(jt){var Gt=kp(jt,_t,{units:Et});Gt<Dt&&(Dt=Gt,Ft=jt)}),Ft&&(Ft.properties=di({dist:Dt},Ft.properties,At)),Ft},nt.planepoint=function(st,_t){var xt=un(st),Et=Wn(_t).coordinates[0];if(Et.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var At=_t.properties||{},Ot=At.a,Dt=At.b,Ft=At.c,jt=xt[0],Gt=xt[1],Jt=Et[0][0],qt=Et[0][1],on=Ot!==void 0?Ot:Et[0][2],vn=Et[1][0],_n=Et[1][1],En=Dt!==void 0?Dt:Et[1][2],cn=Et[2][0],Hn=Et[2][1],nr=Ft!==void 0?Ft:Et[2][2];return(nr*(jt-Jt)*(Gt-_n)+on*(jt-vn)*(Gt-Hn)+En*(jt-cn)*(Gt-qt)-En*(jt-Jt)*(Gt-Hn)-nr*(jt-vn)*(Gt-qt)-on*(jt-cn)*(Gt-_n))/((jt-Jt)*(Gt-_n)+(jt-vn)*(Gt-Hn)+(jt-cn)*(Gt-qt)-(jt-Jt)*(Gt-Hn)-(jt-vn)*(Gt-qt)-(jt-cn)*(Gt-_n))},nt.point=kt,nt.pointGrid=If,nt.pointOnFeature=kh,nt.pointOnLine=su,nt.pointOnSurface=kh,nt.pointToLineDistance=kp,nt.points=Lt,nt.pointsWithinPolygon=zi,nt.polygon=Mt,nt.polygonSmooth=function(st,_t){var xt=[],Et=_t.iterations||1;if(!st)throw new Error("inputPolys is required");return gr(st,function(At,Ot,Dt){var Ft,jt,Gt;switch(At.type){case"Polygon":Ft=[[]];for(var Jt=0;Jt<Et;Jt++)Gt=[[]],jt=At,Jt>0&&(jt=Mt(Ft).geometry),Hv(jt,Gt),Ft=Gt.slice(0);xt.push(Mt(Ft,Dt));break;case"MultiPolygon":Ft=[[[]]];for(var qt=0;qt<Et;qt++)Gt=[[[]]],jt=At,qt>0&&(jt=Yt(Ft).geometry),Vv(jt,Gt),Ft=Gt.slice(0);xt.push(Yt(Ft,Dt));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),Wt(xt)},nt.polygonTangents=function(st,_t){var xt,Et,At,Ot,Dt=Nn(st),Ft=Nn(_t),jt=dn(_t),Gt=0,Jt=null;switch(Dt[0]>jt[0]&&Dt[0]<jt[2]&&Dt[1]>jt[1]&&Dt[1]<jt[3]&&(Gt=(Jt=Yl(st,Eo(_t))).properties.featureIndex),or(_t)){case"Polygon":xt=Ft[0][Gt],Et=Ft[0][0],Jt!==null&&Jt.geometry.coordinates[1]<Dt[1]&&(Et=Ft[0][Gt]),Ot=Lh(Ft[0][0],Ft[0][Ft[0].length-1],Dt);var qt=Um(Ft[0],Dt,Ot,At,xt,Et);xt=qt[0],Et=qt[1];break;case"MultiPolygon":for(var on=0,vn=0,_n=0,En=0;En<Ft[0].length;En++){on=En;for(var cn=!1,Hn=0;Hn<Ft[0][En].length;Hn++){if(vn=Hn,_n===Gt){cn=!0;break}_n++}if(cn)break}xt=Ft[0][on][vn],Et=Ft[0][on][vn],Ot=Lh(Ft[0][0][0],Ft[0][0][Ft[0][0].length-1],Dt),Ft.forEach(function(nr){var bn=Um(nr[0],Dt,Ot,At,xt,Et);xt=bn[0],Et=bn[1]})}return Wt([kt(xt),kt(Et)])},nt.polygonToLine=Eu,nt.polygonToLineString=Eu,nt.polygonize=function(st){var _t=xv.fromGeoJson(st);_t.deleteDangles(),_t.deleteCutEdges();var xt=[],Et=[];return _t.getEdgeRings().filter(function(At){return At.isValid()}).forEach(function(At){At.isHole()?xt.push(At):Et.push(At)}),xt.forEach(function(At){$l.findEdgeRingContaining(At,Et)&&Et.push(At)}),Wt(Et.map(function(At){return At.toPolygon()}))},nt.polygons=Nt,nt.projection=jv,nt.propEach=Er,nt.propReduce=Mr,nt.propertiesContainsFilter=x0,nt.radians2degrees=Cn,nt.radiansToDegrees=Cn,nt.radiansToDistance=ln,nt.radiansToLength=ln,nt.random=Gv,nt.randomLineString=J1,nt.randomPoint=K1,nt.randomPolygon=v0,nt.randomPosition=jp,nt.rewind=function(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.reverse||!1,Et=_t.mutate||!1;if(!st)throw new Error("<geojson> is required");if(typeof xt!="boolean")throw new Error("<reverse> must be a boolean");if(typeof Et!="boolean")throw new Error("<mutate> must be a boolean");Et===!1&&(st=Vo(st));var At=[];switch(st.type){case"GeometryCollection":return gr(st,function(Ot){Oh(Ot,xt)}),st;case"FeatureCollection":return rr(st,function(Ot){rr(Oh(Ot,xt),function(Dt){At.push(Dt)})}),Wt(At)}return Oh(st,xt)},nt.rhumbBearing=Gd,nt.rhumbDestination=Nf,nt.rhumbDistance=Fd,nt.round=rn,nt.sample=function(st,_t){if(!st)throw new Error("featurecollection is required");if(_t==null)throw new Error("num is required");if(typeof _t!="number")throw new Error("num must be a number");return Wt(function(xt,Et){for(var At,Ot,Dt=xt.slice(0),Ft=xt.length,jt=Ft-Et;Ft-- >jt;)At=Dt[Ot=Math.floor((Ft+1)*Math.random())],Dt[Ot]=Dt[Ft],Dt[Ft]=At;return Dt.slice(jt)}(st.features,_t))},nt.sector=function(st,_t,xt,Et,At){if(!gn(At=At||{}))throw new Error("options is invalid");var Ot=At.properties;if(!st)throw new Error("center is required");if(xt==null)throw new Error("bearing1 is required");if(Et==null)throw new Error("bearing2 is required");if(!_t)throw new Error("radius is required");if(typeof At!="object")throw new Error("options must be an object");if(Dp(xt)===Dp(Et))return Nu(st,_t,At);var Dt=Nn(st),Ft=oh(st,_t,xt,Et,At),jt=[[Dt]];return yn(Ft,function(Gt){jt[0].push(Gt)}),jt[0].push(Dt),Mt(jt,Ot)},nt.segmentEach=ii,nt.segmentReduce=ar,nt.shortestPath=function(st,_t,xt){if(!gn(xt=xt||{}))throw new Error("options is invalid");var Et=xt.resolution,At=xt.minDistance,Ot=xt.obstacles||Wt([]);if(!st)throw new Error("start is required");if(!_t)throw new Error("end is required");if(Et&&!kn(Et)||Et<=0)throw new Error("options.resolution must be a number, greater than 0");if(At)throw new Error("options.minDistance is not yet implemented");var Dt=un(st),Ft=un(_t);switch(st=kt(Dt),_t=kt(Ft),or(Ot)){case"FeatureCollection":if(Ot.features.length===0)return zt([Dt,Ft]);break;case"Polygon":Ot=Wt([wt(Wn(Ot))]);break;default:throw new Error("invalid obstacles")}var jt=Ot;jt.features.push(st),jt.features.push(_t);var Gt=dn(v1(ed(dn(jt)),1.15));Et||(Et=vo([Gt[0],Gt[1]],[Gt[2],Gt[1]],xt)/100),jt.features.pop(),jt.features.pop();for(var Jt=Gt[0],qt=Gt[1],on=Gt[2],vn=Gt[3],_n=Et/vo([Jt,qt],[on,qt],xt)*(on-Jt),En=Et/vo([Jt,qt],[Jt,vn],xt)*(vn-qt),cn=on-Jt,Hn=vn-qt,nr=Math.floor(cn/_n),bn=Math.floor(Hn/En),zn=(cn-nr*_n)/2,Un=[],qn=[],Gn=[],Xr=[],Br=1/0,Jr=1/0,Fr=vn-(Hn-bn*En)/2,oi=0;Fr>=qt;){for(var Wr=[],jr=[],Hr=Jt+zn,ei=0;Hr<=on;){var Gr=kt([Hr,Fr]),si=Ov(Gr,Ot);Wr.push(si?0:1),jr.push(Hr+"|"+Fr);var Tr=vo(Gr,st);!si&&Tr<Br&&(Br=Tr,Gn={x:ei,y:oi});var Ki=vo(Gr,_t);!si&&Ki<Jr&&(Jr=Ki,Xr={x:ei,y:oi}),Hr+=_n,ei++}qn.push(Wr),Un.push(jr),Fr-=En,oi++}var Ci=new yd(qn,{diagonal:!0}),$o=Ci.grid[Gn.y][Gn.x],Yi=Ci.grid[Xr.y][Xr.x],po=jg.search(Ci,$o,Yi),os=[Dt];return po.forEach(function(js){var fl=Un[js.x][js.y].split("|");os.push([+fl[0],+fl[1]])}),os.push(Ft),Tl(zt(os))},nt.simplify=function(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.tolerance!==void 0?_t.tolerance:1,Et=_t.highQuality||!1,At=_t.mutate||!1;if(!st)throw new Error("geojson is required");if(xt&&xt<0)throw new Error("invalid tolerance");return At!==!0&&(st=Vo(st)),gr(st,function(Ot){(function(Dt,Ft,jt){var Gt=Dt.type;if(Gt==="Point"||Gt==="MultiPoint")return Dt;Tl(Dt,!0);var Jt=Dt.coordinates;switch(Gt){case"LineString":Dt.coordinates=sc(Jt,Ft,jt);break;case"MultiLineString":Dt.coordinates=Jt.map(function(qt){return sc(qt,Ft,jt)});break;case"Polygon":Dt.coordinates=th(Jt,Ft,jt);break;case"MultiPolygon":Dt.coordinates=Jt.map(function(qt){return th(qt,Ft,jt)})}})(Ot,xt,Et)}),st},nt.square=td,nt.squareGrid=nv,nt.standardDeviationalEllipse=function(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.steps||64,Et=_t.weight,At=_t.properties||{};if(!kn(xt))throw new Error("steps must be a number");if(!gn(At))throw new Error("properties must be a number");var Ot=cr(st).length,Dt=y0(st,{weight:Et}),Ft=0,jt=0,Gt=0;rr(st,function(Gn){var Xr=Gn.properties[Et]||1,Br=U1(Nn(Gn),Nn(Dt));Ft+=Math.pow(Br.x,2)*Xr,jt+=Math.pow(Br.y,2)*Xr,Gt+=Br.x*Br.y*Xr});var Jt=Ft-jt,qt=Math.sqrt(Math.pow(Jt,2)+4*Math.pow(Gt,2)),on=2*Gt,vn=Math.atan((Jt+qt)/on),_n=180*vn/Math.PI,En=0,cn=0,Hn=0;rr(st,function(Gn){var Xr=Gn.properties[Et]||1,Br=U1(Nn(Gn),Nn(Dt));En+=Math.pow(Br.x*Math.cos(vn)-Br.y*Math.sin(vn),2)*Xr,cn+=Math.pow(Br.x*Math.sin(vn)+Br.y*Math.cos(vn),2)*Xr,Hn+=Xr});var nr=Math.sqrt(2*En/Hn),bn=Math.sqrt(2*cn/Hn),zn=z1(Dt,nr,bn,{units:"degrees",angle:_n,steps:xt,properties:At}),Un=zi(st,Wt([zn])),qn={meanCenterCoordinates:Nn(Dt),semiMajorAxis:nr,semiMinorAxis:bn,numberOfFeatures:Ot,angle:_n,percentageWithinEllipse:100*cr(Un).length/Ot};return zn.properties.standardDeviationalEllipse=qn,zn},nt.tag=function(st,_t,xt,Et){return st=Vo(st),_t=Vo(_t),rr(st,function(At){At.properties||(At.properties={}),rr(_t,function(Ot){At.properties[Et]===void 0&&yo(At,Ot)&&(At.properties[Et]=Ot.properties[xt])})}),st},nt.tesselate=function(st){if(!st.geometry||st.geometry.type!=="Polygon"&&st.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var _t={type:"FeatureCollection",features:[]};return st.geometry.type==="Polygon"?_t.features=wu(st.geometry.coordinates):st.geometry.coordinates.forEach(function(xt){_t.features=_t.features.concat(wu(xt))}),_t},nt.tin=qa,nt.toMercator=G1,nt.toWgs84=Y1,nt.transformRotate=y1,nt.transformScale=v1,nt.transformTranslate=function(st,_t,xt,Et){if(!gn(Et=Et||{}))throw new Error("options is invalid");var At=Et.units,Ot=Et.zTranslation,Dt=Et.mutate;if(!st)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("distance is required");if(Ot&&typeof Ot!="number"&&isNaN(Ot))throw new Error("zTranslation is not a number");if(Ot=Ot!==void 0?Ot:0,_t===0&&Ot===0)return st;if(xt==null||isNaN(xt))throw new Error("direction is required");return _t<0&&(_t=-_t,xt+=180),Dt!==!1&&Dt!==void 0||(st=Vo(st)),yn(st,function(Ft){var jt=Nn(Nf(Ft,_t,xt,{units:At}));Ft[0]=jt[0],Ft[1]=jt[1],Ot&&Ft.length===3&&(Ft[2]+=Ot)}),st},nt.triangleGrid=a1,nt.truncate=ud,nt.union=function(st,_t,xt){xt===void 0&&(xt={});var Et=Wn(st),At=Wn(_t),Ot=Dh.union(Et.coordinates,At.coordinates);return Ot.length===0?null:Ot.length===1?Mt(Ot[0],xt.properties):Yt(Ot,xt.properties)},nt.unitsFactors=vt,nt.unkinkPolygon=function(st){var _t=[];return Ar(st,function(xt){xt.geometry.type==="Polygon"&&rr(Dg(xt),function(Et){_t.push(Mt(Et.geometry.coordinates,xt.properties))})}),Wt(_t)},nt.validateBBox=Vn,nt.validateId=pn,nt.voronoi=function(st,_t){if(!gn(_t=_t||{}))throw new Error("options is invalid");var xt=_t.bbox||[-180,-85,180,85];if(!st)throw new Error("points is required");if(!Array.isArray(xt))throw new Error("bbox is invalid");return Qn(st,"Point","points"),Wt(function(){var Et=Iv,At=O1,Ot=null;function Dt(Ft){return new m0(Ft.map(function(jt,Gt){var Jt=[Math.round(Et(jt,Gt,Ft)/ea)*ea,Math.round(At(jt,Gt,Ft)/ea)*ea];return Jt.index=Gt,Jt.data=jt,Jt}),Ot)}return Dt.polygons=function(Ft){return Dt(Ft).polygons()},Dt.links=function(Ft){return Dt(Ft).links()},Dt.triangles=function(Ft){return Dt(Ft).triangles()},Dt.x=function(Ft){return arguments.length?(Et=typeof Ft=="function"?Ft:L1(+Ft),Dt):Et},Dt.y=function(Ft){return arguments.length?(At=typeof Ft=="function"?Ft:L1(+Ft),Dt):At},Dt.extent=function(Ft){return arguments.length?(Ot=Ft==null?null:[[+Ft[0][0],+Ft[0][1]],[+Ft[1][0],+Ft[1][1]]],Dt):Ot&&[[Ot[0][0],Ot[0][1]],[Ot[1][0],Ot[1][1]]]},Dt.size=function(Ft){return arguments.length?(Ot=Ft==null?null:[[0,0],[+Ft[0],+Ft[1]]],Dt):Ot&&[Ot[1][0]-Ot[0][0],Ot[1][1]-Ot[0][1]]},Dt}().x(function(Et){return Et.geometry.coordinates[0]}).y(function(Et){return Et.geometry.coordinates[1]}).extent([[xt[0],xt[1]],[xt[2],xt[3]]]).polygons(st.features).map(zv))},nt.within=zi,Object.defineProperty(nt,"__esModule",{value:!0})});const _hoisted_1$e={class:"content"},_hoisted_2$c=["innerHTML"],_hoisted_3$b=createBaseVNode("div",{id:"map"},null,-1),_hoisted_4$9=["innerHTML"],_sfc_main$g=defineComponent({__name:"Map.ce",props:{overlay:{type:String},zoom:{type:Number,default:2},center:{type:String,default:"55.4,6.7"},marker:{type:Boolean},basemaps:{type:String,default:"OpenStreetMap"},caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},entities:{type:String},preferGeojson:{type:Boolean},popupOnHover:{type:Boolean},zoomOnClick:{type:Boolean},scrollWheelZoom:{type:Boolean},cards:{type:String},essayBase:{type:String}},setup(nt){const rt=nt,it=window.turf,vt={iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon.png",iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",shadowSize:[41,41]},bt={CartoDB_DarkMatter:["https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterNoLabels:["https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterOnlyLabels:["https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Positron:["https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronNoLabels:["https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronOnlyLabels:["https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Voyager:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerNoLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerOnlyLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerLabelsUnder:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],Esri_DeLorme:["https://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Copyright: &copy;2012 DeLorme",minZoom:1,maxZoom:11}],Esri_NatGeoWorldMap:["https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",maxZoom:16}],Esri_OceanBasemap:["https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",maxZoom:13}],Esri_WorldGrayCanvas:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}],Esri_WorldImagery:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}],Esri_WorldPhysical:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",{maxZoom:8,attribution:"Tiles &copy; Esri &mdash; Source: US National Park Service"}],Esri_WorldShadedRelief:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri",maxZoom:13}],Esri_WorldStreetMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}],Esri_WorldTerrain:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS",maxZoom:13}],Esri_WorldTopoMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}],MtbMap:["http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &amp; USGS'}],OpenStreetMap:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}],OpenStreetMap_DE:["https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_France:["https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; OpenStreetMap France | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_HOT:["https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>',maxZoom:19}],OpenStreetMap_Mapnik:["https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}],OpenTopoMap:["https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}],OPNVKarte:["https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",{attribution:'Map <a href="https://memomaps.de/">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}],Stadia_AlidadeSmooth:["https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_AlidadeSmoothDark:["https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_OSMBright:["https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_Outdoors:["https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}],Stamen_Terrain:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainLabels:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_Toner:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerLite:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_Watercolor:["https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",{subdomains:"abcd",minZoom:1,maxZoom:16,ext:"jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],USGS_USTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImagery:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImageryTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}]},wt=ref(null),Tt=computed(()=>{var dn,un;return(un=(dn=wt.value)==null?void 0:dn.getRootNode())==null?void 0:un.host}),kt=computed(()=>{var dn;return(dn=wt==null?void 0:wt.value)==null?void 0:dn.parentNode}),Lt=computed(()=>{var dn;return(dn=kt.value)==null?void 0:dn.querySelector(".content")}),Mt=ref(),Nt=ref(),zt=ref([]),Ht=ref(),Wt=ref([]),Zt=ref(),tn=ref(),Yt=ref(),nn=ref(10),rn=ref(),ln=ref(!1),sn=ref(),mn=ref();watch$1(Tt,()=>Cn()),onMounted(()=>{let dn=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");dn&&(Mt.value=new GithubClient(dn)),An(),Cn()});const wn=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Cn(){Tt.value.classList.add("ve-component"),Tt.value.classList.add(wn),wn==="full"?Tt.value.style.width="100%":(Tt.value.style.float=wn,Tt.value.style.width="calc(50% - 16px)"),Tt.value.style.width=window.getComputedStyle(Tt.value).width,rt.sticky&&makeSticky(Tt.value),Lt.value.style.width=isMobile()?"100%":rt.width||"100%",nextTick(()=>{let dn=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),un=dn;if(rt.sticky&&wn==="full"){let Nn=Math.round(window.innerHeight*.4);un=Math.min(Nn,dn)}Lt.value.style.width=`${dn}px`,Lt.value.style.height=`${un}px`,On()})}watch$1(rt,()=>An());function An(){nn.value=rt.zoom,rt.cards&&Pn()}function Pn(){let dn=[];if(rt.cards){let un=document.getElementById(rt.cards);un&&un.querySelectorAll(".card").forEach(async Nn=>{var lr;let In=Array.from(Nn.querySelectorAll("li")).filter($n=>$n.innerHTML.trim().indexOf("coords:")===0).map($n=>$n.innerHTML.split(":")[1].trim()).pop()||"";if(In){let $n=Nn.querySelector("ul.card-metadata");$n&&((lr=$n.parentElement)==null||lr.removeChild($n)),dn.push({coords:Ar(In),caption:Nn.innerHTML})}})}dn.length>0&&(Wt.value=[...Wt.value,...dn])}watch$1(Wt,async()=>{let dn=await Promise.all(Wt.value);console.log(toRaw(dn));let un=dn.filter(Qn=>Qn.geojson&&Qn.preferGeojson).map(Qn=>{if(Qn.geojson.indexOf("http")!==0)if(Qn.geojson[0]==="/"){let[Wn,or,...dr]=Qn.geojson.split("/").filter(_r=>_r),kr=dr.join("/"),br="main";Qn.geojson=`https://raw.githubusercontent.com/${Wn}/${or}/${br}/${kr}`}else Qn.geojson=`https://raw.githubusercontent.com/${rt.essayBase}/${Qn.geojson}`;return Qn}).map(Qn=>({url:Qn.geojson,item:Qn})),Nn=await Promise.all(un.map(Qn=>fetch(Qn.url))),In=await Promise.all(Nn.map(Qn=>Qn.json())),lr={};for(let Qn=0;Qn<un.length;Qn++){un[Qn].item.id&&/^Q[0-9]+$/.test(un[Qn].item.id)&&(un[Qn].item.qid=un[Qn].item.id,delete un[Qn].item.id),In[Qn].type==="FeatureCollection"?In[Qn].features.forEach(or=>or.properties={...or.properties,...un[Qn].item}):In[Qn].properties={...In[Qn].properties,...un[Qn].item};let Wn=un[Qn].item.layer||"Locations";lr[Wn]||(lr[Wn]=[]),lr[Wn].push(In[Qn])}let $n={};dn.filter(Qn=>!Qn.geojson||!Qn.preferGeojson).filter(Qn=>!Qn.allmaps).forEach(Qn=>{let Wn=Qn.layer||"Locations";$n[Wn]||($n[Wn]=[]),$n[Wn].push(Qn)}),dn.filter(Qn=>!Qn.allmaps).forEach(Qn=>{let Wn=Qn.layer||"Locations";lr[Wn]?$n[Wn]&&(lr[Wn].push(yn($n[Wn])),delete $n[Wn]):(lr[Wn]=[yn($n[Wn])],delete $n[Wn])}),tn.value=dn.filter(Qn=>Qn.allmaps).map(Qn=>({name:Qn.layer||"Image layer",disabled:Qn.disabled,layer:L$1.tileLayer(`https://allmaps.xyz/maps/${Qn.allmaps}/{z}/{x}/{y}.png`,{maxZoom:19,attribution:'<a href="https://allmaps.org">Allmaps</a>'})})),Yt.value=lr}),watch$1(tn,()=>pr()),watch$1(Yt,()=>pr()),watch$1(Nt,()=>pr());function On(){var Nn;if(ln.value)return;if(ln.value=!0,zt.value=rt.entities?rt.entities.split(/\s+/).filter(In=>In):[],rt.cards){let In=[],lr=document.getElementById(rt.cards);lr&&lr.querySelectorAll(".card").forEach(async $n=>{var Wn;let Qn=Array.from($n.querySelectorAll("li")).filter(or=>or.innerHTML.trim().indexOf("coords:")===0).map(or=>or.innerHTML.split(":")[1].trim()).pop()||"";if(Qn){let or=$n.querySelector("ul.card-metadata");or&&((Wn=or.parentElement)==null||Wn.removeChild(or)),In.push({coords:Ar(Qn),caption:$n.innerHTML})}}),Wt.value=[...Wt.value,...In]}mr(),Er();const dn=new ResizeObserver(()=>kn());let un=(Nn=kt.value)==null?void 0:Nn.querySelector("#map");un&&dn.observe(un),fr()}async function kn(){var Nn,In;let dn;if(rt.center)if(isQID(rt.center)){let lr=await getEntity(rt.center);dn=Ar(lr.coords)}else dn=Ar(rt.center);else if(rt.entities){let lr=await getEntity(zt.value[0]);dn=Ar(lr.coords),nn.value=9}else dn=new L$1.LatLng(0,0),nn.value=6;if(Nt.value){Nt.value.off(),Nt.value.remove();let lr=(Nn=kt.value)==null?void 0:Nn.querySelector("#map"),$n=document.createElement("div");$n.id="map",lr==null||lr.replaceWith($n)}let un=(In=kt.value)==null?void 0:In.querySelector("#map");if(un){un.style.cursor="default";let lr=rt.basemaps.split(",").map($n=>{let[Qn,Wn]=bt[$n];return[$n.replace(/_/," "),L$1.tileLayer(Qn,Wn)]});Nt.value=L$1.map(un,{preferCanvas:!1,zoomSnap:.1,center:dn,zoom:nn.value,zoomAnimation:!0,scrollWheelZoom:rt.scrollWheelZoom,layers:[lr[0][1]]}),(lr.length>1||Object.keys(Yt.value||{}).length>1)&&(Zt.value=L$1.control.layers(Object.fromEntries(lr),{}).addTo(Nt.value)),Nt.value.on("click",$n=>{var Qn;gn($n),Ht.value&&sr((Qn=Ht.value)==null?void 0:Qn.split(" ")[0]),rt.zoomOnClick&&en()}),Nt.value.on("zoomend",$n=>{gn($n),mn.value&&mn.value.layer.openPopup()}),Nt.value.on("movestart",()=>un.style.cursor="move"),Nt.value.on("moveend",$n=>{un.style.cursor="default",gn($n)}),Nt.value.on("layeradd",$n=>{var Qn,Wn;if($n.layer.feature){let or=$n.layer;((Qn=or.feature)==null?void 0:Qn.type)=="Feature"&&((Wn=or.feature)==null?void 0:Wn.properties.qid)&&or.feature}}),Ht.value=`${Number(dn.lat.toFixed(5))},${Number(dn.lng.toFixed(5))} ${nn.value}`,rn.value=`${Number(dn.lat.toFixed(5))},${Number(dn.lng.toFixed(5))},${nn.value}`}}function gn(dn){let un=dn.type==="click"?dn.latlng:dn.target.getCenter(),Nn=dn.target.getZoom(),In=[un.lat,un.lng,Nn];return Ht.value=`${Number(un.lat.toFixed(5))},${Number(un.lng.toFixed(5))} ${Nn}`,sn.value||(rn.value=`${Number(un.lat.toFixed(5))},${Number(un.lng.toFixed(5))},${Nn}`),In}function Vn(dn){return L$1.geoJSON(dn,{pointToLayer:(un,Nn)=>{const In=un.properties;let lr={...vt};return un.properties.icon&&(lr.iconUrl=un.properties.icon),un.properties.shadowUrl&&(lr.shadowUrl=un.properties.shadowUrl),un.properties.iconRetinaUrl&&(lr.iconRetinaUrl=un.properties.iconRetinaUrl),In.markerType==="circle"?L$1.circleMarker(Nn,{radius:In.radius||4}):L$1.marker(Nn,{icon:new L$1.Icon(lr)})},onEachFeature:async(un,Nn)=>{var lr;let In=Nn;if(!un.properties.coords){if((lr=In.feature)!=null&&lr.bbox){let $n=In.getBounds().getCenter();un.properties.coords=`${$n.lat},${$n.lng}`}else if(un.geometry.type==="Polygon"){let $n=it.centroid(un);un.properties.coords=`${$n.geometry.coordinates[1]},${$n.geometry.coordinates[0]}`}}if(un.properties.qid){let $n=await getEntity(un.properties.qid);un.properties.entityData=$n;let Wn=`<ve-info-card data="${JSON.stringify($n).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;Nn.bindPopup(Wn)}else{let Qn=`<ve-info-card data="${JSON.stringify(un.properties).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;Nn.bindPopup(Qn)}rt.popupOnHover&&(Nn.on("mouseover",()=>Nn.openPopup()),Nn.on("mouseout",()=>Nn.closePopup())),Nn.on("click",()=>{sn.value?(Nn.closePopup(),sn.value=void 0):(Nn.openPopup(),sn.value={},rt.zoomOnClick&&Ln(un.properties.coords))})},style:un=>{const Nn=un==null?void 0:un.properties,In=un==null?void 0:un.geometry.type;for(let[$n,Qn]of Object.entries(Nn))Qn==="null"&&(Nn[$n]=null);return{color:Nn.color||"#FB683F",weight:Nn.weight||(In==="Polygon"||In==="MultiPolygon"?0:4),opacity:Nn.opacity||1,fillColor:Nn.fillColor||"#32C125",fillOpacity:Nn.fillOpacity||.5}}})}let pn=!1;function pr(){var dn;if(Nt.value&&Yt.value&&tn.value&&!pn){pn=!0;let un=Object.keys(Yt.value||{}),Nn=tn.value?tn.value.length:0;!Zt.value&&(un.length>1||un.length===1&&un[0]!=="Locations"||Nn>0)&&(Zt.value=L$1.control.layers(Object.fromEntries([]),{}).addTo(Nt.value)),Object.keys(Yt.value||{}).forEach(lr=>{var Wn;let $n=new L$1.LayerGroup,Qn=!1;Yt.value[lr].forEach(or=>{var kr;let dr=Vn(or);$n.addLayer(dr),(kr=or.properties)!=null&&kr.disabled&&(Qn=!0)}),Qn||(Wn=Nt.value)==null||Wn.addLayer($n),Zt.value&&Zt.value.addOverlay($n,lr)});let In={};(dn=tn.value)==null||dn.forEach(lr=>{var $n;Zt.value&&Zt.value.addOverlay(lr.layer,lr.name),lr.disabled||($n=Nt.value)==null||$n.addLayer(lr.layer),In[lr.name]=lr.layer}),Object.keys(In).length>0&&L$1.control.opacity(In,{label:null,collapsed:!0,position:"topright"}).addTo(Nt.value)}}function yn(dn){const un={type:"FeatureCollection",features:[]};return dn.filter(Nn=>Nn.coords).forEach(Nn=>{let[In,lr]=Nn.coords.split(",").map($n=>parseFloat($n.trim()));un.features.push({type:"Feature",properties:Nn,geometry:{type:"Point",coordinates:[lr,In]}})}),un}async function mr(){let dn=Array.from(Tt.value.querySelectorAll("li")).map(un=>{var Nn;return Or((Nn=un.firstChild)==null?void 0:Nn.textContent)});if(rt.marker&&rt.center)if(isQID(rt.center)){let un=await getEntity(rt.center);dn.push(Promise.resolve(gr(un)))}else dn.push(Promise.resolve({coords:rt.center,zoom:rt.zoom||10}));Wt.value=[...Wt.value,...dn]}function Er(){const dn=Nn=>{for(let In of Nn)In.type==="childList"&&Array.from(In.target.classList).indexOf("hydrated")>=0&&mr()};new MutationObserver(dn).observe(Tt.value,{childList:!0,subtree:!0,characterData:!0})}function Mr(dn){return/^[+-]?\d+(.\d*|\d*),{1}[+-]?\d+(.\d*|\d*)$/.test(dn)}function rr(dn){return/^\d{1,2}(\.\d{1})?$/.test(dn)}function vr(dn){dn=dn||"";let un=[];dn=dn.replace(//,'"').replace(//,'"').replace(//,"'");let Nn=dn.match(/[^\s"]+|"([^"]*)"/gmi);return Nn&&Nn.forEach(In=>{un.length>0&&un[un.length-1].indexOf("=")===un[un.length-1].length-1?un[un.length-1]=`${un[un.length-1]}${In}`:un.push(In)}),un}function cr(dn,un){let Nn={id:un},In=metadataAsObj(dn);return In.location&&(Nn.coords=In.location[0]),In.coordinates_of_the_point_of_view&&(Nn.coords=In.coordinates_of_the_point_of_view[0]),dn.label&&(Nn.label=dn.label.en),dn.summary&&(Nn.description=dn.summary.en[0]),dn.thumbnail&&(Nn.image=dn.thumbnail[0].id),Nn}function gr(dn,un=""){let Nn={id:un||dn.id};return dn.coords&&(Nn.coords=dn.coords),dn.geojson&&(Nn.geojson=dn.geojson),dn.label&&(Nn.label=dn.label),dn.description&&(Nn.description=dn.description),dn.thumbnail&&(Nn.image=dn.thumbnail),Nn}async function Or(dn){let un=vr(dn),Nn=/\.(geo)?json$/i,In=/^[a-z0-9\-]+:.+/,lr={},$n=new Set(["disabled","prefer-geojson"]);for(let Qn=0;Qn<un.length;Qn++){let Wn=un[Qn];if(Wn.indexOf("=")>0){let[or,...dr]=Wn.split("="),kr=dr.join("=");if(kr=kr[kr.length-1]==='"'?kr.slice(1,-1):kr,or==="qid"){let br=await getEntity(Wn);lr={...gr(br,Wn),...lr}}else if(or==="iiif"){let br=await getManifest(Wn);lr={...cr(br,Wn),...lr}}else lr[or]=kr}else if(rr(Wn))lr.zoom=parseInt(Wn);else if(Mr(Wn))lr.coords=Wn,lr.id=Wn;else if(isQID(Wn)){let or=await getEntity(Wn);lr={...gr(or,Wn),...lr}}else if(Nn.test(Wn))lr.geojson=Wn;else if(In.test(Wn)){let or=await getManifest(Wn);lr={...cr(or,Wn),...lr}}else if($n.has(Wn))lr[kebabToCamel(Wn)]=!0;else{let or=Wn[0]==='"'&&Wn[Wn.length-1]==='"'?Wn.slice(1,-1):Wn;lr.label?lr.description=or:lr.label=or}}return lr.preferGeojson=lr.preferGeojson||rt.preferGeojson&&lr.geojson||lr.geojson&&!lr.coords,lr}function Ar(dn){let[un,Nn]=dn.split(",").map(In=>parseFloat(In.trim()));return new leafletSrc.exports.LatLng(un,Nn)}function sr(dn){navigator.clipboard&&navigator.clipboard.writeText(dn)}function ii(dn="",un=""){return Object.values(Yt.value).map(In=>{let lr=In[0];return lr.type==="FeatureCollection"?lr.features:[lr]}).flat().find(In=>{var lr,$n;return In.id===dn||((lr=In.properties)==null?void 0:lr.id)===dn||(($n=In.properties)==null?void 0:$n.coords)===un})}function ar(dn=""){var $n,Qn,Wn,or;dn=dn.replace(/^flyto\|/i,"");let un="",Nn=10,In=dn.split(",");if(In.length===1){un=In[0];let dr=ii(un);Nn=(($n=dr==null?void 0:dr.properties)==null?void 0:$n.zoom)||Nn}else if(In.length===2)if(/^[+-]?\d+(.\d*|\d*)$/.test(In[0])){un=In.join(",");let dr=ii("",un);Nn=((Qn=dr==null?void 0:dr.properties)==null?void 0:Qn.zoom)||Nn}else un=In[0],Nn=parseFloat(In[1]);else un=In.slice(0,2).join(","),Nn=parseFloat(In[2]);let lr;return(Wn=Nt.value)==null||Wn.eachLayer(dr=>{var kr,br,_r,hi;(((br=(kr=dr==null?void 0:dr.feature)==null?void 0:kr.properties)==null?void 0:br.id)===un||((hi=(_r=dr==null?void 0:dr.feature)==null?void 0:_r.properties)==null?void 0:hi.coords)===un)&&(lr=dr)}),lr||(or=Nt.value)==null||or.eachLayer(dr=>lr=dr),{id:un,zoom:Nn,layer:lr}}function fr(){let dn=Tt.value.parentElement,un=new Set;for(;dn.parentElement&&dn.tagName!=="MAIN";)dn=dn.parentElement,Array.from(dn.querySelectorAll("[enter],[exit]")).forEach(In=>{ir(In)&&!un.has(In)&&(wr(In),un.add(In))});let Nn=Tt.value.parentElement;for(;(Nn==null?void 0:Nn.parentElement)&&Nn.tagName!=="BODY";)Nn=Nn.parentElement;Nn&&Array.from(Nn.querySelectorAll("mark")).forEach(In=>{let lr=Array.from(In.attributes).find($n=>$n.name==="flyto");if(lr&&ir(In.parentElement)){let Qn=lr==null?void 0:lr.value;In.classList.add(lr.name),In.addEventListener("click",()=>Ln(Qn)),rt.popupOnHover&&(In.addEventListener("mouseover",()=>{let Wn=ar(Qn).layer;Wn.openPopup(),isMobile()&&setTimeout(()=>Wn.closePopup(),2e3)}),In.addEventListener("mouseleave",()=>{var Wn;mn.value=ar(Qn),mn.value.id!==sn.value&&((Wn=mn.value.layer)==null||Wn.closePopup())}))}})}function wr(dn){let un=dn.classList.contains("active");new MutationObserver(In=>{In.forEach(lr=>{if(lr.attributeName=="class"){let $n=lr.target.classList.contains("active");if(un!==$n){un=$n;let Qn=dn.attributes.getNamedItem($n?"enter":"exit");if(Qn){const[Wn,...or]=Qn.value.split(":");let dr=or.join(":");Wn==="flyto"&&Ln(dr,!0),Qn.name==="exit"&&en()}}}})}).observe(dn,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}function ir(dn){let un=dn.previousSibling;for(;un;){if(un.nodeName==="VE-MAP")return un===Tt.value?un:null;un=un.previousSibling}for(;dn.parentElement&&dn.tagName!=="MAIN";){dn=dn.parentElement;let Nn=dn.querySelector(":scope > ve-map, :scope > p > ve-map, :scope > section > ve-map");if(Nn)return Nn===Tt.value?Nn:null}}async function Ln(dn,un=!1){var Nn,In;if(mn.value=ar(dn),mn.value.layer){if(mn.value.id===sn.value&&!un)mn.value.layer.closePopup(),en();else if(sn.value=mn.value.id,(Nn=mn.value.layer.feature)!=null&&Nn.properties){let lr=Ar(mn.value.layer.feature.properties.coords);(In=Nt.value)==null||In.flyTo(lr,mn.value.zoom)}}else en()}function en(){var dn,un;if(mn.value=null,rn.value){let[Nn,In,lr]=rn.value.split(",").map(Qn=>parseFloat(Qn)),$n=new L$1.LatLng(Nn,In);(dn=Nt.value)==null||dn.flyTo($n,lr),(un=Nt.value)==null||un.closePopup()}sn.value=void 0}return(dn,un)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:wt,style:{width:"100%",height:"100%"}},[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("div",{id:"lat-lng-zoom",innerHTML:Ht.value,onClick:un[0]||(un[0]=Nn=>sr(`${Ht.value}`))},null,8,_hoisted_2$c),_hoisted_3$b,nt.caption?(openBlock(),createElementBlock("div",{key:0,id:"caption",innerHTML:nt.caption},null,8,_hoisted_4$9)):createCommentVNode("",!0)])],512))}}),_style_0$b=`.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,.5)}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255,255,255,.8);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:rgba(255,255,255,.8);text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}input[type=range]{-webkit-appearance:none;-webkit-tap-highlight-color:rgba(255,255,255,0);width:110px;height:10px;margin:0;border:none;padding:1px 2px;border-radius:30px;background:#f1f0ee;outline:none}input[type=range]::-ms-track{border:inherit;color:transparent;background:transparent}input[type=range]::-ms-fill-lower,input[type=range]::-ms-fill-upper{background:transparent}input[type=range]::-ms-tooltip{display:none}input[type=range]::-ms-thumb{width:15px;height:18px;border-radius:12px;border:0;background-image:linear-gradient(to bottom,#1253a4 0,#1253a4 100%)}.leaflet-control-layers-label{margin:0 0 8px 1px}*{box-sizing:border-box}:host{display:flex;align-content:center;justify-content:center;position:relative;font-family:Roboto,sans-serif;background-color:#fff;margin-bottom:1rem}.content{margin:auto}#map{border:1px solid #ccc;width:100%;height:100%}#caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background-color:#555;color:#fff;padding:4px 6px;bottom:0;height:32px}#lat-lng-zoom{position:absolute;font-family:sans-serif;bottom:24px;right:0;width:150px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#lat-lng-zoom:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy;z-index:1000}.card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border-radius:4px;padding:0}.card p{border:none}.card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:190px}.card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}.card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.2rem .5rem;margin:0;font-size:.9rem;font-weight:400}.card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-end;height:110px;line-height:1.4;font-size:1rem;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;margin:0 0 .5rem}.leaflet-popup-content{width:280px;margin:0}.leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers.png)}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers-2x.png)}
`,Map$3=_export_sfc(_sfc_main$g,[["styles",[_style_0$b]]]),_hoisted_1$d=["innerHTML"],_hoisted_2$b=["innerHTML"],_hoisted_3$a={class:"card-metadata"},_hoisted_4$8=["innerHTML"],_hoisted_5$7=["innerHTML","onClick"],_hoisted_6$6={key:1},_hoisted_7$5=["innerHTML","onClick"],_hoisted_8$5={class:"card-links",style:{"margin-top":"auto"}},_hoisted_9$4=["manifest"],_hoisted_10$3=["center","zoom"],_hoisted_11$2={key:0},_sfc_main$f=defineComponent({__name:"MediaCard.ce",props:{manifest:{type:String,required:!0}},setup(nt){const rt=nt,it=computed(()=>`"${thumbnail(bt.value)}"`),vt=ref(null);computed(()=>{var mn;return(mn=vt==null?void 0:vt.value)==null?void 0:mn.parentNode}),computed(()=>{var mn,wn;return(wn=(mn=vt.value)==null?void 0:mn.getRootNode())==null?void 0:wn.host});const bt=ref(),wt=computed(()=>bt.value&&getItemInfo(bt.value)),Tt=computed(()=>wt.value&&`${wt.value.width.toLocaleString()} x ${wt.value.height.toLocaleString()}`),kt=computed(()=>bt.value&&zt()),Lt=computed(()=>{let mn=kt.value.find(wn=>wn.label.toLowerCase()==="location");return mn?`${mn.value}`:null}),Mt=computed(()=>{let mn=kt.value.find(wn=>wn.label.toLowerCase()==="allmapsid");return mn?`${mn.value}`:null}),Nt=computed(()=>{let mn=kt.value.find(wn=>wn.label.toLowerCase()==="zoom");return mn?`${parseFloat(mn.value)}`:9});onUpdated(()=>{getManifest(rt.manifest).then(mn=>bt.value=mn)});function zt(){let mn=new Set(["created","updated"]),wn=new Set(["image_url","size"]),Cn=getMetadata(bt.value).filter(An=>!wn.has(An.label));return bt.value.navDate&&Cn.push({label:"navDate",value:[bt.value.navDate]}),Cn.push({label:"dimensions",value:[Tt.value]}),Cn=Cn.map(An=>mn.has(An.label)?{label:An.label,value:[An.value[0].split("T")[0]]}:An).map(An=>{if(An.label==="source_url"){let Pn=An.value[0].split("/").pop();An={label:"source",value:[`<a href="${An.value[0]}" target="_blank">${Pn}</a>`]}}return An}),Cn.sort()}getManifest(rt.manifest).then(mn=>bt.value=mn);function Ht(mn){console.log("copyTextToClipboard",mn),navigator.clipboard&&navigator.clipboard.writeText(mn)}const Wt=ref();watch$1(Wt,mn=>{mn==null||mn.addEventListener("sl-show",()=>{var wn;console.log((wn=Wt.value)==null?void 0:wn.parentElement),Wt.value&&(Wt.value.panel.style.width=`${ln()}px`)})});const Zt=ref(!1);watch$1(Zt,()=>{var mn,wn;Zt.value?(mn=Wt.value)==null||mn.show():(wn=Wt.value)==null||wn.hide()});function tn(){Zt.value=!Zt.value}const Yt=ref();watch$1(Yt,mn=>{mn==null||mn.addEventListener("sl-show",()=>{Yt.value&&(Yt.value.panel.style.width=`${ln()}px`)})});const nn=ref(!1);watch$1(nn,()=>{var mn,wn;nn.value?(mn=Yt.value)==null||mn.show():(wn=Yt.value)==null||wn.hide()});function rn(){nn.value=!nn.value}function ln(){let mn=Math.round(window.innerWidth-(isMobile()?0:100)),wn=Math.round(window.innerHeight-150),Cn=bt.value;if(Cn){let An=getItemInfo(Cn),Pn=Number((An.width/An.height).toFixed(4));mn=Pn>=1?mn/Pn>wn?mn=wn*Pn:mn:Math.round(wn*Pn)}return mn}function sn(mn){var Cn;mn.stopPropagation();let wn=`https://iiif.juncture-digital.org/?manifest=${bt.value.id}`;(Cn=mn.dataTransfer)==null||Cn.setData("text/uri-list",wn)}return(mn,wn)=>bt.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"root",ref:vt},[createBaseVNode("div",{class:"card",draggable:"true",onDragstart:sn},[createBaseVNode("div",{class:"card-image",style:normalizeStyle({backgroundImage:`url(${unref(it)})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"top"}),onClick:tn},null,4),createBaseVNode("div",{class:"card-title",innerHTML:unref(label)(bt.value)},null,8,_hoisted_1$d),createBaseVNode("div",{class:"card-abstract",innerHTML:unref(summary)(bt.value)},null,8,_hoisted_2$b),createBaseVNode("ul",_hoisted_3$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(kt),Cn=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-label",innerHTML:Cn.label},null,8,_hoisted_4$8),Cn.value.length===1?(openBlock(),createElementBlock(Fragment,{key:0},[Cn.label==="location"?(openBlock(),createElementBlock("sl-icon-button",{key:0,name:"chat-square-text",label:"Show Location",onClick:rn})):createCommentVNode("",!0),createBaseVNode("span",{class:"md-value",innerHTML:Cn.value[0],onClick:An=>Ht(Cn.value)},null,8,_hoisted_5$7)],64)):(openBlock(),createElementBlock("ul",_hoisted_6$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.value,An=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-value",innerHTML:An,onClick:Pn=>Ht(An)},null,8,_hoisted_7$5)]))),256))]))]))),256))]),createBaseVNode("div",_hoisted_8$5,[createBaseVNode("img",{src:"https://juncture-digital.github.io/web-app/static/iiif.png",class:"draggable-iiif",alt:"IIIF manifest icon",onClick:wn[0]||(wn[0]=Cn=>Ht(bt.value.id)),onDragstart:sn},null,32)])],32),createBaseVNode("sl-dialog",{ref_key:"imageDialog",ref:Wt,id:"image-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},[Zt.value?(openBlock(),createElementBlock("ve-media",{key:0,manifest:bt.value.id,"zoom-on-scroll":""},null,8,_hoisted_9$4)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:tn,variant:"primary"},"Close")],512),createBaseVNode("sl-dialog",{ref_key:"mapDialog",ref:Yt,id:"map-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},[nn.value?(openBlock(),createElementBlock("ve-map",{key:0,center:unref(Lt),zoom:unref(Nt)},[createBaseVNode("ul",null,[createBaseVNode("li",null,toDisplayString(unref(Lt)),1),unref(Mt)?(openBlock(),createElementBlock("li",_hoisted_11$2,"allmaps="+toDisplayString(unref(Mt)),1)):createCommentVNode("",!0)])],8,_hoisted_10$3)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:rn,variant:"primary"},"Close")],512)],512)):createCommentVNode("",!0)}}),_style_0$a=`*{box-sizing:border-box}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.md-label{font-weight:700;margin-right:6px;color:#444}.md-value{display:inline;line-height:1.2rem;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;color:#444;cursor:copy}.md-value:hover{text-decoration:underline}.md-label:after{content:":"}.card-metadata ul ul{margin-left:18px}@media (max-width: 480px){.card-image{height:72vw}}.card{display:flex;flex-flow:column nowrap;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border:1px solid #ccc;border-radius:4px;padding:0;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.card p{border:none}.card-image{align-self:flex-start;width:100%;height:300px;cursor:pointer}.card-title{font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none;color:#444}.card-metadata{list-style:none;padding:.2rem .5rem;margin:12px 0 0;font-size:.9em;font-weight:400;max-height:260px;overflow-y:scroll}.card-abstract{align-self:flex-start;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:8}.card-links{padding:6px}.card-links img{height:24px}.draggable-iiif{cursor:grab}.clamp5{-webkit-line-clamp:5}
`,MediaCard=_export_sfc(_sfc_main$f,[["styles",[_style_0$a]]]),_hoisted_1$c={class:"content"},_hoisted_2$a=["caption"],_sfc_main$e=defineComponent({__name:"MediaSelector.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Wt;return(Wt=it==null?void 0:it.value)==null?void 0:Wt.parentNode}),bt=computed(()=>{var Wt,Zt;return(Zt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Zt.host}),wt=computed(()=>{var Wt;return(Wt=vt.value)==null?void 0:Wt.querySelector(".content")}),Tt=ref(null),kt=computed(()=>{var Wt,Zt;return((Zt=(Wt=Tt.value)==null?void 0:Wt.getAttribute("data-media"))==null?void 0:Zt.split(/\s/).filter(tn=>tn))||[]}),Lt=ref();watch$1(bt,()=>Mt()),watch$1(Lt,()=>console.log(`selected=${toRaw(Lt.value)}`));function Mt(){zt(),Ht()}const Nt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function zt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Nt),Nt==="full"?bt.value.style.width="100%":(bt.value.style.float=Nt,bt.value.style.width="calc(50% - 16px)"),bt.value.style.width=window.getComputedStyle(bt.value).width,rt.sticky&&makeSticky(bt.value),wt.value.style.width=rt.width||"100%",nextTick(()=>{let Wt=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2)),Zt=Wt;if(rt.sticky&&Nt==="full"){let tn=Math.round(window.innerHeight*.4);Zt=Math.min(tn,Wt)}wt.value.style.width=`${Wt}px`,wt.value.style.height=`${Zt}px`})}function Ht(){Tt.value=document.querySelector(".active"),new MutationObserver(Zt=>{Zt.forEach(tn=>{if(tn.type==="attributes"){let Yt=tn.target;Array.from(Yt.classList).indexOf("active")>=0&&(Tt.value=Yt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Wt,Zt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$c,[unref(kt).length>0?(openBlock(),createElementBlock("ve-media",{key:0,grid:"",small:"",caption:Wt.$props.caption},[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(kt),(tn,Yt)=>(openBlock(),createElementBlock("li",{key:`item-${Yt}`},toDisplayString(tn),1))),128))])],8,_hoisted_2$a)):createCommentVNode("",!0)])],512))}}),_style_0$9=`sl-button{margin:6px 3px}
`,MediaSelector=_export_sfc(_sfc_main$e,[["styles",[_style_0$9]]]);var dist$1={exports:{}},Sister;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/Sister=function(){var nt={},rt={};return nt.on=function(it,vt){var bt={name:it,handler:vt};return rt[it]=rt[it]||[],rt[it].unshift(bt),bt},nt.off=function(it){var vt=rt[it.name].indexOf(it);vt!==-1&&rt[it.name].splice(vt,1)},nt.trigger=function(it,vt){var bt=rt[it],wt;if(bt)for(wt=bt.length;wt--;)bt[wt].handler(vt)},nt};var sister=Sister,loadYouTubeIframeApi={exports:{}},loadScript=function nt(rt,it,vt){var bt=document.head||document.getElementsByTagName("head")[0],wt=document.createElement("script");typeof it=="function"&&(vt=it,it={}),it=it||{},vt=vt||function(){},wt.type=it.type||"text/javascript",wt.charset=it.charset||"utf8",wt.async="async"in it?!!it.async:!0,wt.src=rt,it.attrs&&setAttributes(wt,it.attrs),it.text&&(wt.text=""+it.text);var Tt="onload"in wt?stdOnEnd:ieOnEnd;Tt(wt,vt),wt.onload||stdOnEnd(wt,vt),bt.appendChild(wt)};function setAttributes(nt,rt){for(var it in rt)nt.setAttribute(it,rt[it])}function stdOnEnd(nt,rt){nt.onload=function(){this.onerror=this.onload=null,rt(null,nt)},nt.onerror=function(){this.onerror=this.onload=null,rt(new Error("Failed to load "+this.src),nt)}}function ieOnEnd(nt,rt){nt.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,rt(null,nt))}}(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=loadScript,vt=bt(it);function bt(wt){return wt&&wt.__esModule?wt:{default:wt}}rt.default=function(wt){var Tt=new Promise(function(kt){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){kt(window.YT);return}else{var Lt=window.location.protocol==="http:"?"http:":"https:";(0,vt.default)(Lt+"//www.youtube.com/iframe_api",function(Nt){Nt&&wt.trigger("error",Nt)})}var Mt=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){Mt&&Mt(),kt(window.YT)}});return Tt},nt.exports=rt.default})(loadYouTubeIframeApi,loadYouTubeIframeApi.exports);var YouTubePlayer$1={exports:{}},browser={exports:{}},debug={exports:{}},s=1e3,m=s*60,h=m*60,d=h*24,y$1=d*365.25,ms=function(nt,rt){rt=rt||{};var it=typeof nt;if(it==="string"&&nt.length>0)return parse$3(nt);if(it==="number"&&isNaN(nt)===!1)return rt.long?fmtLong(nt):fmtShort(nt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(nt))};function parse$3(nt){if(nt=String(nt),!(nt.length>100)){var rt=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(nt);if(!!rt){var it=parseFloat(rt[1]),vt=(rt[2]||"ms").toLowerCase();switch(vt){case"years":case"year":case"yrs":case"yr":case"y":return it*y$1;case"days":case"day":case"d":return it*d;case"hours":case"hour":case"hrs":case"hr":case"h":return it*h;case"minutes":case"minute":case"mins":case"min":case"m":return it*m;case"seconds":case"second":case"secs":case"sec":case"s":return it*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return it;default:return}}}}function fmtShort(nt){return nt>=d?Math.round(nt/d)+"d":nt>=h?Math.round(nt/h)+"h":nt>=m?Math.round(nt/m)+"m":nt>=s?Math.round(nt/s)+"s":nt+"ms"}function fmtLong(nt){return plural(nt,d,"day")||plural(nt,h,"hour")||plural(nt,m,"minute")||plural(nt,s,"second")||nt+" ms"}function plural(nt,rt,it){if(!(nt<rt))return nt<rt*1.5?Math.floor(nt/rt)+" "+it:Math.ceil(nt/rt)+" "+it+"s"}(function(nt,rt){rt=nt.exports=bt.debug=bt.default=bt,rt.coerce=Lt,rt.disable=Tt,rt.enable=wt,rt.enabled=kt,rt.humanize=ms,rt.names=[],rt.skips=[],rt.formatters={};var it;function vt(Mt){var Nt=0,zt;for(zt in Mt)Nt=(Nt<<5)-Nt+Mt.charCodeAt(zt),Nt|=0;return rt.colors[Math.abs(Nt)%rt.colors.length]}function bt(Mt){function Nt(){if(!!Nt.enabled){var zt=Nt,Ht=+new Date,Wt=Ht-(it||Ht);zt.diff=Wt,zt.prev=it,zt.curr=Ht,it=Ht;for(var Zt=new Array(arguments.length),tn=0;tn<Zt.length;tn++)Zt[tn]=arguments[tn];Zt[0]=rt.coerce(Zt[0]),typeof Zt[0]!="string"&&Zt.unshift("%O");var Yt=0;Zt[0]=Zt[0].replace(/%([a-zA-Z%])/g,function(rn,ln){if(rn==="%%")return rn;Yt++;var sn=rt.formatters[ln];if(typeof sn=="function"){var mn=Zt[Yt];rn=sn.call(zt,mn),Zt.splice(Yt,1),Yt--}return rn}),rt.formatArgs.call(zt,Zt);var nn=Nt.log||rt.log||console.log.bind(console);nn.apply(zt,Zt)}}return Nt.namespace=Mt,Nt.enabled=rt.enabled(Mt),Nt.useColors=rt.useColors(),Nt.color=vt(Mt),typeof rt.init=="function"&&rt.init(Nt),Nt}function wt(Mt){rt.save(Mt),rt.names=[],rt.skips=[];for(var Nt=(typeof Mt=="string"?Mt:"").split(/[\s,]+/),zt=Nt.length,Ht=0;Ht<zt;Ht++)!Nt[Ht]||(Mt=Nt[Ht].replace(/\*/g,".*?"),Mt[0]==="-"?rt.skips.push(new RegExp("^"+Mt.substr(1)+"$")):rt.names.push(new RegExp("^"+Mt+"$")))}function Tt(){rt.enable("")}function kt(Mt){var Nt,zt;for(Nt=0,zt=rt.skips.length;Nt<zt;Nt++)if(rt.skips[Nt].test(Mt))return!1;for(Nt=0,zt=rt.names.length;Nt<zt;Nt++)if(rt.names[Nt].test(Mt))return!0;return!1}function Lt(Mt){return Mt instanceof Error?Mt.stack||Mt.message:Mt}})(debug,debug.exports);(function(nt,rt){rt=nt.exports=debug.exports,rt.log=bt,rt.formatArgs=vt,rt.save=wt,rt.load=Tt,rt.useColors=it,rt.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:kt(),rt.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function it(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}rt.formatters.j=function(Lt){try{return JSON.stringify(Lt)}catch(Mt){return"[UnexpectedJSONParseError]: "+Mt.message}};function vt(Lt){var Mt=this.useColors;if(Lt[0]=(Mt?"%c":"")+this.namespace+(Mt?" %c":" ")+Lt[0]+(Mt?"%c ":" ")+"+"+rt.humanize(this.diff),!!Mt){var Nt="color: "+this.color;Lt.splice(1,0,Nt,"color: inherit");var zt=0,Ht=0;Lt[0].replace(/%[a-zA-Z%]/g,function(Wt){Wt!=="%%"&&(zt++,Wt==="%c"&&(Ht=zt))}),Lt.splice(Ht,0,Nt)}}function bt(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function wt(Lt){try{Lt==null?rt.storage.removeItem("debug"):rt.storage.debug=Lt}catch{}}function Tt(){var Lt;try{Lt=rt.storage.debug}catch{}return!Lt&&typeof process<"u"&&"env"in process&&(Lt={version:"2.0.0-beta.25"}.DEBUG),Lt}rt.enable(Tt());function kt(){try{return window.localStorage}catch{}}})(browser,browser.exports);var functionNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],nt.exports=rt.default})(functionNames,functionNames.exports);var eventNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],nt.exports=rt.default})(eventNames,eventNames.exports);var FunctionStateMap={exports:{}},PlayerStates={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},nt.exports=rt.default})(PlayerStates,PlayerStates.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=PlayerStates.exports,vt=bt(it);function bt(wt){return wt&&wt.__esModule?wt:{default:wt}}rt.default={pauseVideo:{acceptableStates:[vt.default.ENDED,vt.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[vt.default.ENDED,vt.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[vt.default.ENDED,vt.default.PLAYING,vt.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},nt.exports=rt.default})(FunctionStateMap,FunctionStateMap.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=browser.exports,vt=Nt(it),bt=functionNames.exports,wt=Nt(bt),Tt=eventNames.exports,kt=Nt(Tt),Lt=FunctionStateMap.exports,Mt=Nt(Lt);function Nt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}var zt=(0,vt.default)("youtube-player"),Ht={};Ht.proxyEvents=function(Wt){var Zt={},tn=function(Cn){var An="on"+Cn.slice(0,1).toUpperCase()+Cn.slice(1);Zt[An]=function(Pn){zt('event "%s"',An,Pn),Wt.trigger(Cn,Pn)}},Yt=!0,nn=!1,rn=void 0;try{for(var ln=kt.default[Symbol.iterator](),sn;!(Yt=(sn=ln.next()).done);Yt=!0){var mn=sn.value;tn(mn)}}catch(wn){nn=!0,rn=wn}finally{try{!Yt&&ln.return&&ln.return()}finally{if(nn)throw rn}}return Zt},Ht.promisifyPlayer=function(Wt){var Zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,tn={},Yt=function(An){Zt&&Mt.default[An]?tn[An]=function(){for(var Pn=arguments.length,On=Array(Pn),kn=0;kn<Pn;kn++)On[kn]=arguments[kn];return Wt.then(function(gn){var Vn=Mt.default[An],pn=gn.getPlayerState(),pr=gn[An].apply(gn,On);return Vn.stateChangeRequired||Array.isArray(Vn.acceptableStates)&&Vn.acceptableStates.indexOf(pn)===-1?new Promise(function(yn){var mr=function Er(){var Mr=gn.getPlayerState(),rr=void 0;typeof Vn.timeout=="number"&&(rr=setTimeout(function(){gn.removeEventListener("onStateChange",Er),yn()},Vn.timeout)),Array.isArray(Vn.acceptableStates)&&Vn.acceptableStates.indexOf(Mr)!==-1&&(gn.removeEventListener("onStateChange",Er),clearTimeout(rr),yn())};gn.addEventListener("onStateChange",mr)}).then(function(){return pr}):pr})}:tn[An]=function(){for(var Pn=arguments.length,On=Array(Pn),kn=0;kn<Pn;kn++)On[kn]=arguments[kn];return Wt.then(function(gn){return gn[An].apply(gn,On)})}},nn=!0,rn=!1,ln=void 0;try{for(var sn=wt.default[Symbol.iterator](),mn;!(nn=(mn=sn.next()).done);nn=!0){var wn=mn.value;Yt(wn)}}catch(Cn){rn=!0,ln=Cn}finally{try{!nn&&sn.return&&sn.return()}finally{if(rn)throw ln}}return tn},rt.default=Ht,nt.exports=rt.default})(YouTubePlayer$1,YouTubePlayer$1.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(zt){return typeof zt}:function(zt){return zt&&typeof Symbol=="function"&&zt.constructor===Symbol&&zt!==Symbol.prototype?"symbol":typeof zt},vt=sister,bt=Mt(vt),wt=loadYouTubeIframeApi.exports,Tt=Mt(wt),kt=YouTubePlayer$1.exports,Lt=Mt(kt);function Mt(zt){return zt&&zt.__esModule?zt:{default:zt}}var Nt=void 0;rt.default=function(zt){var Ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Zt=(0,bt.default)();if(Nt||(Nt=(0,Tt.default)(Zt)),Ht.events)throw new Error("Event handlers cannot be overwritten.");if(typeof zt=="string"&&!document.getElementById(zt))throw new Error('Element "'+zt+'" does not exist.');Ht.events=Lt.default.proxyEvents(Zt);var tn=new Promise(function(nn){if((typeof zt>"u"?"undefined":it(zt))==="object"&&zt.playVideo instanceof Function){var rn=zt;nn(rn)}else Nt.then(function(ln){var sn=new ln.Player(zt,Ht);return Zt.on("ready",function(){nn(sn)}),null})}),Yt=Lt.default.promisifyPlayer(tn,Wt);return Yt.on=Zt.on,Yt.off=Zt.off,Yt},nt.exports=rt.default})(dist$1,dist$1.exports);const YouTubePlayer=getDefaultExportFromCjs(dist$1.exports);/*! @vimeo/player v2.18.0 | (c) 2022 Vimeo | MIT License | https://github.com/vimeo/player.js */function _classCallCheck(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}function _defineProperties(nt,rt){for(var it=0;it<rt.length;it++){var vt=rt[it];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(nt,vt.key,vt)}}function _createClass(nt,rt,it){return rt&&_defineProperties(nt.prototype,rt),it&&_defineProperties(nt,it),nt}var isNode=typeof global<"u"&&{}.toString.call(global)==="[object global]";function getMethodName(nt,rt){return nt.indexOf(rt.toLowerCase())===0?nt:"".concat(rt.toLowerCase()).concat(nt.substr(0,1).toUpperCase()).concat(nt.substr(1))}function isDomElement(nt){return Boolean(nt&&nt.nodeType===1&&"nodeName"in nt&&nt.ownerDocument&&nt.ownerDocument.defaultView)}function isInteger$1(nt){return!isNaN(parseFloat(nt))&&isFinite(nt)&&Math.floor(nt)==nt}function isVimeoUrl(nt){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(nt)}function isVimeoEmbed(nt){var rt=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return rt.test(nt)}function getVimeoUrl(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=nt.id,it=nt.url,vt=rt||it;if(!vt)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(isInteger$1(vt))return"https://vimeo.com/".concat(vt);if(isVimeoUrl(vt))return vt.replace("http:","https:");throw rt?new TypeError("\u201C".concat(rt,"\u201D is not a valid video id.")):new TypeError("\u201C".concat(vt,"\u201D is not a vimeo.com url."))}var arrayIndexOfSupport=typeof Array.prototype.indexOf<"u",postMessageSupport=typeof window<"u"&&typeof window.postMessage<"u";if(!isNode&&(!arrayIndexOfSupport||!postMessageSupport))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(nt,rt){return rt={exports:{}},nt(rt,rt.exports),rt.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(nt){if(nt.WeakMap)return;var rt=Object.prototype.hasOwnProperty,it=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),vt=function(wt,Tt,kt){it?Object.defineProperty(wt,Tt,{configurable:!0,writable:!0,value:kt}):wt[Tt]=kt};nt.WeakMap=function(){function wt(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(vt(this,"_id",kt("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}vt(wt.prototype,"delete",function(Mt){if(Tt(this,"delete"),!bt(Mt))return!1;var Nt=Mt[this._id];return Nt&&Nt[0]===Mt?(delete Mt[this._id],!0):!1}),vt(wt.prototype,"get",function(Mt){if(Tt(this,"get"),!!bt(Mt)){var Nt=Mt[this._id];if(Nt&&Nt[0]===Mt)return Nt[1]}}),vt(wt.prototype,"has",function(Mt){if(Tt(this,"has"),!bt(Mt))return!1;var Nt=Mt[this._id];return!!(Nt&&Nt[0]===Mt)}),vt(wt.prototype,"set",function(Mt,Nt){if(Tt(this,"set"),!bt(Mt))throw new TypeError("Invalid value used as weak map key");var zt=Mt[this._id];return zt&&zt[0]===Mt?(zt[1]=Nt,this):(vt(Mt,this._id,[Mt,Nt]),this)});function Tt(Mt,Nt){if(!bt(Mt)||!rt.call(Mt,"_id"))throw new TypeError(Nt+" method called on incompatible receiver "+typeof Mt)}function kt(Mt){return Mt+"_"+Lt()+"."+Lt()}function Lt(){return Math.random().toString().substring(2)}return vt(wt,"_polyfill",!0),wt}();function bt(wt){return Object(wt)===wt}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal);var npo_src=createCommonjsModule(function(nt){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(it,vt,bt){vt[it]=vt[it]||bt(),nt.exports&&(nt.exports=vt[it])})("Promise",commonjsGlobal,function(){var it,vt,bt,wt=Object.prototype.toString,Tt=typeof setImmediate<"u"?function(ln){return setImmediate(ln)}:setTimeout;try{Object.defineProperty({},"x",{}),it=function(ln,sn,mn,wn){return Object.defineProperty(ln,sn,{value:mn,writable:!0,configurable:wn!==!1})}}catch{it=function(sn,mn,wn){return sn[mn]=wn,sn}}bt=function(){var ln,sn,mn;function wn(Cn,An){this.fn=Cn,this.self=An,this.next=void 0}return{add:function(An,Pn){mn=new wn(An,Pn),sn?sn.next=mn:ln=mn,sn=mn,mn=void 0},drain:function(){var An=ln;for(ln=sn=vt=void 0;An;)An.fn.call(An.self),An=An.next}}}();function kt(rn,ln){bt.add(rn,ln),vt||(vt=Tt(bt.drain))}function Lt(rn){var ln,sn=typeof rn;return rn!=null&&(sn=="object"||sn=="function")&&(ln=rn.then),typeof ln=="function"?ln:!1}function Mt(){for(var rn=0;rn<this.chain.length;rn++)Nt(this,this.state===1?this.chain[rn].success:this.chain[rn].failure,this.chain[rn]);this.chain.length=0}function Nt(rn,ln,sn){var mn,wn;try{ln===!1?sn.reject(rn.msg):(ln===!0?mn=rn.msg:mn=ln.call(void 0,rn.msg),mn===sn.promise?sn.reject(TypeError("Promise-chain cycle")):(wn=Lt(mn))?wn.call(mn,sn.resolve,sn.reject):sn.resolve(mn))}catch(Cn){sn.reject(Cn)}}function zt(rn){var ln,sn=this;if(!sn.triggered){sn.triggered=!0,sn.def&&(sn=sn.def);try{(ln=Lt(rn))?kt(function(){var mn=new Zt(sn);try{ln.call(rn,function(){zt.apply(mn,arguments)},function(){Ht.apply(mn,arguments)})}catch(wn){Ht.call(mn,wn)}}):(sn.msg=rn,sn.state=1,sn.chain.length>0&&kt(Mt,sn))}catch(mn){Ht.call(new Zt(sn),mn)}}}function Ht(rn){var ln=this;ln.triggered||(ln.triggered=!0,ln.def&&(ln=ln.def),ln.msg=rn,ln.state=2,ln.chain.length>0&&kt(Mt,ln))}function Wt(rn,ln,sn,mn){for(var wn=0;wn<ln.length;wn++)(function(An){rn.resolve(ln[An]).then(function(On){sn(An,On)},mn)})(wn)}function Zt(rn){this.def=rn,this.triggered=!1}function tn(rn){this.promise=rn,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Yt(rn){if(typeof rn!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var ln=new tn(this);this.then=function(mn,wn){var Cn={success:typeof mn=="function"?mn:!0,failure:typeof wn=="function"?wn:!1};return Cn.promise=new this.constructor(function(Pn,On){if(typeof Pn!="function"||typeof On!="function")throw TypeError("Not a function");Cn.resolve=Pn,Cn.reject=On}),ln.chain.push(Cn),ln.state!==0&&kt(Mt,ln),Cn.promise},this.catch=function(mn){return this.then(void 0,mn)};try{rn.call(void 0,function(mn){zt.call(ln,mn)},function(mn){Ht.call(ln,mn)})}catch(sn){Ht.call(ln,sn)}}var nn=it({},"constructor",Yt,!1);return Yt.prototype=nn,it(nn,"__NPO__",0,!1),it(Yt,"resolve",function(ln){var sn=this;return ln&&typeof ln=="object"&&ln.__NPO__===1?ln:new sn(function(wn,Cn){if(typeof wn!="function"||typeof Cn!="function")throw TypeError("Not a function");wn(ln)})}),it(Yt,"reject",function(ln){return new this(function(mn,wn){if(typeof mn!="function"||typeof wn!="function")throw TypeError("Not a function");wn(ln)})}),it(Yt,"all",function(ln){var sn=this;return wt.call(ln)!="[object Array]"?sn.reject(TypeError("Not an array")):ln.length===0?sn.resolve([]):new sn(function(wn,Cn){if(typeof wn!="function"||typeof Cn!="function")throw TypeError("Not a function");var An=ln.length,Pn=Array(An),On=0;Wt(sn,ln,function(gn,Vn){Pn[gn]=Vn,++On===An&&wn(Pn)},Cn)})}),it(Yt,"race",function(ln){var sn=this;return wt.call(ln)!="[object Array]"?sn.reject(TypeError("Not an array")):new sn(function(wn,Cn){if(typeof wn!="function"||typeof Cn!="function")throw TypeError("Not a function");Wt(sn,ln,function(Pn,On){wn(On)},Cn)})}),Yt})}),callbackMap=new WeakMap;function storeCallback(nt,rt,it){var vt=callbackMap.get(nt.element)||{};rt in vt||(vt[rt]=[]),vt[rt].push(it),callbackMap.set(nt.element,vt)}function getCallbacks(nt,rt){var it=callbackMap.get(nt.element)||{};return it[rt]||[]}function removeCallback(nt,rt,it){var vt=callbackMap.get(nt.element)||{};if(!vt[rt])return!0;if(!it)return vt[rt]=[],callbackMap.set(nt.element,vt),!0;var bt=vt[rt].indexOf(it);return bt!==-1&&vt[rt].splice(bt,1),callbackMap.set(nt.element,vt),vt[rt]&&vt[rt].length===0}function shiftCallbacks(nt,rt){var it=getCallbacks(nt,rt);if(it.length<1)return!1;var vt=it.shift();return removeCallback(nt,rt,vt),vt}function swapCallbacks(nt,rt){var it=callbackMap.get(nt);callbackMap.set(rt,it),callbackMap.delete(nt)}function parseMessageData(nt){if(typeof nt=="string")try{nt=JSON.parse(nt)}catch(rt){return console.warn(rt),{}}return nt}function postMessage(nt,rt,it){if(!(!nt.element.contentWindow||!nt.element.contentWindow.postMessage)){var vt={method:rt};it!==void 0&&(vt.value=it);var bt=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));bt>=8&&bt<10&&(vt=JSON.stringify(vt)),nt.element.contentWindow.postMessage(vt,nt.origin)}}function processData(nt,rt){rt=parseMessageData(rt);var it=[],vt;if(rt.event){if(rt.event==="error"){var bt=getCallbacks(nt,rt.data.method);bt.forEach(function(Tt){var kt=new Error(rt.data.message);kt.name=rt.data.name,Tt.reject(kt),removeCallback(nt,rt.data.method,Tt)})}it=getCallbacks(nt,"event:".concat(rt.event)),vt=rt.data}else if(rt.method){var wt=shiftCallbacks(nt,rt.method);wt&&(it.push(wt),vt=rt.value)}it.forEach(function(Tt){try{if(typeof Tt=="function"){Tt.call(nt,vt);return}Tt.resolve(vt)}catch{}})}var oEmbedParameters=["autopause","autoplay","background","byline","color","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function getOEmbedParameters(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oEmbedParameters.reduce(function(it,vt){var bt=nt.getAttribute("data-vimeo-".concat(vt));return(bt||bt==="")&&(it[vt]=bt===""?1:bt),it},rt)}function createEmbed(nt,rt){var it=nt.html;if(!rt)throw new TypeError("An element must be provided");if(rt.getAttribute("data-vimeo-initialized")!==null)return rt.querySelector("iframe");var vt=document.createElement("div");return vt.innerHTML=it,rt.appendChild(vt.firstChild),rt.setAttribute("data-vimeo-initialized","true"),rt.querySelector("iframe")}function getOEmbedData(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=arguments.length>2?arguments[2]:void 0;return new Promise(function(vt,bt){if(!isVimeoUrl(nt))throw new TypeError("\u201C".concat(nt,"\u201D is not a vimeo.com url."));var wt="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(nt));for(var Tt in rt)rt.hasOwnProperty(Tt)&&(wt+="&".concat(Tt,"=").concat(encodeURIComponent(rt[Tt])));var kt="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;kt.open("GET",wt,!0),kt.onload=function(){if(kt.status===404){bt(new Error("\u201C".concat(nt,"\u201D was not found.")));return}if(kt.status===403){bt(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}try{var Lt=JSON.parse(kt.responseText);if(Lt.domain_status_code===403){createEmbed(Lt,it),bt(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}vt(Lt)}catch(Mt){bt(Mt)}},kt.onerror=function(){var Lt=kt.status?" (".concat(kt.status,")"):"";bt(new Error("There was an error fetching the embed code from Vimeo".concat(Lt,".")))},kt.send()})}function initializeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,rt=[].slice.call(nt.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),it=function(bt){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(bt))};rt.forEach(function(vt){try{if(vt.getAttribute("data-vimeo-defer")!==null)return;var bt=getOEmbedParameters(vt),wt=getVimeoUrl(bt);getOEmbedData(wt,bt,vt).then(function(Tt){return createEmbed(Tt,vt)}).catch(it)}catch(Tt){it(Tt)}})}function resizeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var rt=function(vt){if(!!isVimeoUrl(vt.origin)&&!(!vt.data||vt.data.event!=="spacechange")){for(var bt=nt.querySelectorAll("iframe"),wt=0;wt<bt.length;wt++)if(bt[wt].contentWindow===vt.source){var Tt=bt[wt].parentElement;Tt.style.paddingBottom="".concat(vt.data.data[0].bottom,"px");break}}};window.addEventListener("message",rt)}}function initAppendVideoMetadata(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var rt=function(vt){if(!!isVimeoUrl(vt.origin)){var bt=parseMessageData(vt.data);if(!(!bt||bt.event!=="ready"))for(var wt=nt.querySelectorAll("iframe"),Tt=0;Tt<wt.length;Tt++){var kt=wt[Tt],Lt=kt.contentWindow===vt.source;if(isVimeoEmbed(kt.src)&&Lt){var Mt=new Player(kt);Mt.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",rt)}}function checkUrlTimeParam(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var rt=function(bt){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(bt))},it=function(bt){if(!!isVimeoUrl(bt.origin)){var wt=parseMessageData(bt.data);if(!(!wt||wt.event!=="ready"))for(var Tt=nt.querySelectorAll("iframe"),kt=0;kt<Tt.length;kt++){var Lt=Tt[kt],Mt=Lt.contentWindow===bt.source;isVimeoEmbed(Lt.src)&&Mt&&function(){var Nt=new Player(Lt);Nt.getVideoId().then(function(zt){var Ht=new RegExp("[?&]vimeo_t_".concat(zt,"=([^&#]*)")).exec(window.location.href);if(Ht&&Ht[1]){var Wt=decodeURI(Ht[1]);Nt.setCurrentTime(Wt)}}).catch(rt)}()}}};window.addEventListener("message",it)}}function initializeScreenfull(){var nt=function(){for(var vt,bt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],wt=0,Tt=bt.length,kt={};wt<Tt;wt++)if(vt=bt[wt],vt&&vt[1]in document){for(wt=0;wt<vt.length;wt++)kt[bt[0][wt]]=vt[wt];return kt}return!1}(),rt={fullscreenchange:nt.fullscreenchange,fullscreenerror:nt.fullscreenerror},it={request:function(bt){return new Promise(function(wt,Tt){var kt=function Mt(){it.off("fullscreenchange",Mt),wt()};it.on("fullscreenchange",kt),bt=bt||document.documentElement;var Lt=bt[nt.requestFullscreen]();Lt instanceof Promise&&Lt.then(kt).catch(Tt)})},exit:function(){return new Promise(function(bt,wt){if(!it.isFullscreen){bt();return}var Tt=function Lt(){it.off("fullscreenchange",Lt),bt()};it.on("fullscreenchange",Tt);var kt=document[nt.exitFullscreen]();kt instanceof Promise&&kt.then(Tt).catch(wt)})},on:function(bt,wt){var Tt=rt[bt];Tt&&document.addEventListener(Tt,wt)},off:function(bt,wt){var Tt=rt[bt];Tt&&document.removeEventListener(Tt,wt)}};return Object.defineProperties(it,{isFullscreen:{get:function(){return Boolean(document[nt.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[nt.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[nt.fullscreenEnabled])}}}),it}var playerMap=new WeakMap,readyMap=new WeakMap,screenfull={},Player=function(){function nt(rt){var it=this,vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,nt),window.jQuery&&rt instanceof jQuery&&(rt.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),rt=rt[0]),typeof document<"u"&&typeof rt=="string"&&(rt=document.getElementById(rt)),!isDomElement(rt))throw new TypeError("You must pass either a valid element or a valid id.");if(rt.nodeName!=="IFRAME"){var bt=rt.querySelector("iframe");bt&&(rt=bt)}if(rt.nodeName==="IFRAME"&&!isVimeoUrl(rt.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(playerMap.has(rt))return playerMap.get(rt);this._window=rt.ownerDocument.defaultView,this.element=rt,this.origin="*";var wt=new npo_src(function(kt,Lt){if(it._onMessage=function(zt){if(!(!isVimeoUrl(zt.origin)||it.element.contentWindow!==zt.source)){it.origin==="*"&&(it.origin=zt.origin);var Ht=parseMessageData(zt.data),Wt=Ht&&Ht.event==="error",Zt=Wt&&Ht.data&&Ht.data.method==="ready";if(Zt){var tn=new Error(Ht.data.message);tn.name=Ht.data.name,Lt(tn);return}var Yt=Ht&&Ht.event==="ready",nn=Ht&&Ht.method==="ping";if(Yt||nn){it.element.setAttribute("data-ready","true"),kt();return}processData(it,Ht)}},it._window.addEventListener("message",it._onMessage),it.element.nodeName!=="IFRAME"){var Mt=getOEmbedParameters(rt,vt),Nt=getVimeoUrl(Mt);getOEmbedData(Nt,Mt,rt).then(function(zt){var Ht=createEmbed(zt,rt);return it.element=Ht,it._originalElement=rt,swapCallbacks(rt,Ht),playerMap.set(it.element,it),zt}).catch(Lt)}});if(readyMap.set(this,wt),playerMap.set(this.element,this),this.element.nodeName==="IFRAME"&&postMessage(this,"ping"),screenfull.isEnabled){var Tt=function(){return screenfull.exit()};this.fullscreenchangeHandler=function(){screenfull.isFullscreen?storeCallback(it,"event:exitFullscreen",Tt):removeCallback(it,"event:exitFullscreen",Tt),it.ready().then(function(){postMessage(it,"fullscreenchange",screenfull.isFullscreen)})},screenfull.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return _createClass(nt,[{key:"callMethod",value:function(it){var vt=this,bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new npo_src(function(wt,Tt){return vt.ready().then(function(){storeCallback(vt,it,{resolve:wt,reject:Tt}),postMessage(vt,it,bt)}).catch(Tt)})}},{key:"get",value:function(it){var vt=this;return new npo_src(function(bt,wt){return it=getMethodName(it,"get"),vt.ready().then(function(){storeCallback(vt,it,{resolve:bt,reject:wt}),postMessage(vt,it)}).catch(wt)})}},{key:"set",value:function(it,vt){var bt=this;return new npo_src(function(wt,Tt){if(it=getMethodName(it,"set"),vt==null)throw new TypeError("There must be a value to set.");return bt.ready().then(function(){storeCallback(bt,it,{resolve:wt,reject:Tt}),postMessage(bt,it,vt)}).catch(Tt)})}},{key:"on",value:function(it,vt){if(!it)throw new TypeError("You must pass an event name.");if(!vt)throw new TypeError("You must pass a callback function.");if(typeof vt!="function")throw new TypeError("The callback must be a function.");var bt=getCallbacks(this,"event:".concat(it));bt.length===0&&this.callMethod("addEventListener",it).catch(function(){}),storeCallback(this,"event:".concat(it),vt)}},{key:"off",value:function(it,vt){if(!it)throw new TypeError("You must pass an event name.");if(vt&&typeof vt!="function")throw new TypeError("The callback must be a function.");var bt=removeCallback(this,"event:".concat(it),vt);bt&&this.callMethod("removeEventListener",it).catch(function(wt){})}},{key:"loadVideo",value:function(it){return this.callMethod("loadVideo",it)}},{key:"ready",value:function(){var it=readyMap.get(this)||new npo_src(function(vt,bt){bt(new Error("Unknown player. Probably unloaded."))});return npo_src.resolve(it)}},{key:"addCuePoint",value:function(it){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:it,data:vt})}},{key:"removeCuePoint",value:function(it){return this.callMethod("removeCuePoint",it)}},{key:"enableTextTrack",value:function(it,vt){if(!it)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:it,kind:vt})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return screenfull.isEnabled?screenfull.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return screenfull.isEnabled?screenfull.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return screenfull.isEnabled?npo_src.resolve(screenfull.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var it=this;return new npo_src(function(vt){if(readyMap.delete(it),playerMap.delete(it.element),it._originalElement&&(playerMap.delete(it._originalElement),it._originalElement.removeAttribute("data-vimeo-initialized")),it.element&&it.element.nodeName==="IFRAME"&&it.element.parentNode&&(it.element.parentNode.parentNode&&it._originalElement&&it._originalElement!==it.element.parentNode?it.element.parentNode.parentNode.removeChild(it.element.parentNode):it.element.parentNode.removeChild(it.element)),it.element&&it.element.nodeName==="DIV"&&it.element.parentNode){it.element.removeAttribute("data-vimeo-initialized");var bt=it.element.querySelector("iframe");bt&&bt.parentNode&&(bt.parentNode.parentNode&&it._originalElement&&it._originalElement!==bt.parentNode?bt.parentNode.parentNode.removeChild(bt.parentNode):bt.parentNode.removeChild(bt))}it._window.removeEventListener("message",it._onMessage),screenfull.isEnabled&&screenfull.off("fullscreenchange",it.fullscreenchangeHandler),vt()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(it){return this.set("autopause",it)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(it){return this.set("cameraProps",it)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(it){return this.set("color",it)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(it){return this.set("currentTime",it)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(it){return this.set("loop",it)}},{key:"setMuted",value:function(it){return this.set("muted",it)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(it){return this.set("playbackRate",it)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(it){return this.set("quality",it)}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(it){return this.set("volume",it)}}]),nt}();isNode||(screenfull=initializeScreenfull(),initializeEmbeds(),resizeEmbeds(),initAppendVideoMetadata(),checkUrlTimeParam());var openseadragon={exports:{}},hasRequiredOpenseadragon;function requireOpenseadragon(){return hasRequiredOpenseadragon||(hasRequiredOpenseadragon=1,function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(nt){return new OpenSeadragon.Viewer(nt)}(function(nt){nt.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var rt={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},it=Object.prototype.toString,vt=Object.prototype.hasOwnProperty;nt.isFunction=function(bt){return nt.type(bt)==="function"},nt.isArray=Array.isArray||function(bt){return nt.type(bt)==="array"},nt.isWindow=function(bt){return bt&&typeof bt=="object"&&"setInterval"in bt},nt.type=function(bt){return bt==null?String(bt):rt[it.call(bt)]||"object"},nt.isPlainObject=function(bt){if(!bt||OpenSeadragon.type(bt)!=="object"||bt.nodeType||nt.isWindow(bt)||bt.constructor&&!vt.call(bt,"constructor")&&!vt.call(bt.constructor.prototype,"isPrototypeOf"))return!1;var wt;for(var Tt in bt)wt=Tt;return wt===void 0||vt.call(bt,wt)},nt.isEmptyObject=function(bt){for(var wt in bt)return!1;return!0},nt.freezeObject=function(bt){return Object.freeze?nt.freezeObject=Object.freeze:nt.freezeObject=function(wt){return wt},nt.freezeObject(bt)},nt.supportsCanvas=function(){var bt=document.createElement("canvas");return!!(nt.isFunction(bt.getContext)&&bt.getContext("2d"))}(),nt.isCanvasTainted=function(bt){var wt=!1;try{bt.getContext("2d").getImageData(0,0,1,1)}catch{wt=!0}return wt},nt.pixelDensityRatio=function(){if(nt.supportsCanvas){var bt=document.createElement("canvas").getContext("2d"),wt=window.devicePixelRatio||1,Tt=bt.webkitBackingStorePixelRatio||bt.mozBackingStorePixelRatio||bt.msBackingStorePixelRatio||bt.oBackingStorePixelRatio||bt.backingStorePixelRatio||1;return Math.max(wt,1)/Tt}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var nt,rt,it,vt,bt,wt,Tt=arguments[0]||{},kt=arguments.length,Lt=!1,Mt=1;for(typeof Tt=="boolean"&&(Lt=Tt,Tt=arguments[1]||{},Mt=2),typeof Tt!="object"&&!OpenSeadragon.isFunction(Tt)&&(Tt={}),kt===Mt&&(Tt=this,--Mt);Mt<kt;Mt++)if(nt=arguments[Mt],nt!==null||nt!==void 0)for(rt in nt)it=Tt[rt],vt=nt[rt],Tt!==vt&&(Lt&&vt&&(OpenSeadragon.isPlainObject(vt)||(bt=OpenSeadragon.isArray(vt)))?(bt?(bt=!1,wt=it&&OpenSeadragon.isArray(it)?it:[]):wt=it&&OpenSeadragon.isPlainObject(it)?it:{},Tt[rt]=OpenSeadragon.extend(Lt,wt,vt)):vt!==void 0&&(Tt[rt]=vt));return Tt};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var nt=navigator.userAgent;return typeof nt!="string"?!1:nt.indexOf("iPhone")!==-1||nt.indexOf("iPad")!==-1||nt.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(nt,rt){return function(){var it=arguments;return it===void 0&&(it=[]),rt.apply(nt,it)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(nt){return typeof nt=="string"&&(nt=document.getElementById(nt)),nt},getElementPosition:function(nt){var rt=new $.Point,it,vt;for(nt=$.getElement(nt),it=$.getElementStyle(nt).position=="fixed",vt=getOffsetParent(nt,it);vt;)rt.x+=nt.offsetLeft,rt.y+=nt.offsetTop,it&&(rt=rt.plus($.getPageScroll())),nt=vt,it=$.getElementStyle(nt).position=="fixed",vt=getOffsetParent(nt,it);return rt},getElementOffset:function(nt){nt=$.getElement(nt);var rt=nt&&nt.ownerDocument,it,vt,bt={top:0,left:0};return rt?(it=rt.documentElement,typeof nt.getBoundingClientRect<"u"&&(bt=nt.getBoundingClientRect()),vt=rt==rt.window?rt:rt.nodeType===9?rt.defaultView||rt.parentWindow:!1,new $.Point(bt.left+(vt.pageXOffset||it.scrollLeft)-(it.clientLeft||0),bt.top+(vt.pageYOffset||it.scrollTop)-(it.clientTop||0))):new $.Point},getElementSize:function(nt){return nt=$.getElement(nt),new $.Point(nt.clientWidth,nt.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(nt){return nt=$.getElement(nt),nt.currentStyle}:function(nt){return nt=$.getElement(nt),window.getComputedStyle(nt,"")},getCssPropertyWithVendorPrefix:function(nt){var rt={};return $.getCssPropertyWithVendorPrefix=function(it){if(rt[it]!==void 0)return rt[it];var vt=document.createElement("div").style,bt=null;if(vt[it]!==void 0)bt=it;else for(var wt=["Webkit","Moz","MS","O","webkit","moz","ms","o"],Tt=$.capitalizeFirstLetter(it),kt=0;kt<wt.length;kt++){var Lt=wt[kt]+Tt;if(vt[Lt]!==void 0){bt=Lt;break}}return rt[it]=bt,bt},$.getCssPropertyWithVendorPrefix(nt)},capitalizeFirstLetter:function(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)},positiveModulo:function(nt,rt){var it=nt%rt;return it<0&&(it+=rt),it},pointInElement:function(nt,rt){nt=$.getElement(nt);var it=$.getElementOffset(nt),vt=$.getElementSize(nt);return rt.x>=it.x&&rt.x<it.x+vt.x&&rt.y<it.y+vt.y&&rt.y>=it.y},getEvent:function(nt){return nt?$.getEvent=function(rt){return rt}:$.getEvent=function(){return window.event},$.getEvent(nt)},getMousePosition:function(nt){if(typeof nt.pageX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.pageX,it.y=rt.pageY,it};else if(typeof nt.clientX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,it.y=rt.clientY+document.body.scrollTop+document.documentElement.scrollTop,it};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(nt)},getPageScroll:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(rt.scrollLeft||rt.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(nt.scrollLeft||nt.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(nt){if(typeof window.scrollTo<"u")$.setPageScroll=function(vt){window.scrollTo(vt.x,vt.y)};else{var rt=$.getPageScroll();if(rt.x===nt.x&&rt.y===nt.y)return;document.body.scrollLeft=nt.x,document.body.scrollTop=nt.y;var it=$.getPageScroll();if(it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(vt){document.body.scrollLeft=vt.x,document.body.scrollTop=vt.y};return}if(document.documentElement.scrollLeft=nt.x,document.documentElement.scrollTop=nt.y,it=$.getPageScroll(),it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(vt){document.documentElement.scrollLeft=vt.x,document.documentElement.scrollTop=vt.y};return}$.setPageScroll=function(vt){}}return $.setPageScroll(nt)},getWindowSize:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(nt.clientWidth||nt.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(rt.clientWidth||rt.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(nt){nt=$.getElement(nt);var rt=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(rt[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(rt[1].style,{display:"table-row"}),$.extend(rt[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),rt[0].appendChild(rt[1]),rt[1].appendChild(rt[2]),rt[2].appendChild(nt),rt[0]},makeNeutralElement:function(nt){var rt=document.createElement(nt),it=rt.style;return it.background="transparent none",it.border="none",it.margin="0px",it.padding="0px",it.position="static",rt},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(nt){return $.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img");return it.src=rt,it},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img"),vt=null;return vt=$.makeNeutralElement("span"),vt.style.display="inline-block",it.onload=function(){vt.style.width=vt.style.width||it.width+"px",vt.style.height=vt.style.height||it.height+"px",it.onload=null,it=null},it.src=rt,vt.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+rt+"', sizingMethod='scale')",vt}),$.makeTransparentImage(nt)},setElementOpacity:function(nt,rt,it){var vt,bt;nt=$.getElement(nt),it&&!$.Browser.alpha&&(rt=Math.round(rt)),$.Browser.opacity?nt.style.opacity=rt<1?rt:"":rt<1?(vt=Math.round(100*rt),bt="alpha(opacity="+vt+")",nt.style.filter=bt):nt.style.filter=""},setElementTouchActionNone:function(nt){nt=$.getElement(nt),typeof nt.style.touchAction<"u"?nt.style.touchAction="none":typeof nt.style.msTouchAction<"u"&&(nt.style.msTouchAction="none")},addClass:function(nt,rt){nt=$.getElement(nt),nt.className?(" "+nt.className+" ").indexOf(" "+rt+" ")===-1&&(nt.className+=" "+rt):nt.className=rt},indexOf:function(nt,rt,it){return Array.prototype.indexOf?this.indexOf=function(vt,bt,wt){return vt.indexOf(bt,wt)}:this.indexOf=function(vt,bt,wt){var Tt,kt=wt||0,Lt;if(!vt)throw new TypeError;if(Lt=vt.length,Lt===0||kt>=Lt)return-1;for(kt<0&&(kt=Lt-Math.abs(kt)),Tt=kt;Tt<Lt;Tt++)if(vt[Tt]===bt)return Tt;return-1},this.indexOf(nt,rt,it)},removeClass:function(nt,rt){var it,vt=[],bt;for(nt=$.getElement(nt),it=nt.className.split(/\s+/),bt=0;bt<it.length;bt++)it[bt]&&it[bt]!==rt&&vt.push(it[bt]);nt.className=vt.join(" ")},addEvent:function(){if(window.addEventListener)return function(nt,rt,it,vt){nt=$.getElement(nt),nt.addEventListener(rt,it,vt)};if(window.attachEvent)return function(nt,rt,it,vt){nt=$.getElement(nt),nt.attachEvent("on"+rt,it)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(nt,rt,it,vt){nt=$.getElement(nt),nt.removeEventListener(rt,it,vt)};if(window.detachEvent)return function(nt,rt,it,vt){nt=$.getElement(nt),nt.detachEvent("on"+rt,it)};throw new Error("No known event model.")}(),cancelEvent:function(nt){nt=$.getEvent(nt),nt.preventDefault?$.cancelEvent=function(rt){rt.preventDefault()}:$.cancelEvent=function(rt){rt=$.getEvent(rt),rt.cancel=!0,rt.returnValue=!1},$.cancelEvent(nt)},stopEvent:function(nt){nt=$.getEvent(nt),nt.stopPropagation?$.stopEvent=function(rt){rt.stopPropagation()}:$.stopEvent=function(rt){rt=$.getEvent(rt),rt.cancelBubble=!0},$.stopEvent(nt)},createCallback:function(nt,rt){var it=[],vt;for(vt=2;vt<arguments.length;vt++)it.push(arguments[vt]);return function(){var bt=it.concat([]),wt;for(wt=0;wt<arguments.length;wt++)bt.push(arguments[wt]);return rt.apply(nt,bt)}},getUrlParameter:function(nt){var rt=URLPARAMS[nt];return rt||null},getUrlProtocol:function(nt){var rt=nt.match(/^([a-z]+:)\/\//i);return rt===null?window.location.protocol:rt[1].toLowerCase()},createAjaxRequest:function(nt){var rt;try{rt=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{rt=!1}if(rt)window.XMLHttpRequest?$.createAjaxRequest=function(it){return it?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(nt)},makeAjaxRequest:function(nt,rt,it){var vt,bt,wt;$.isPlainObject(nt)&&(rt=nt.success,it=nt.error,vt=nt.withCredentials,bt=nt.headers,wt=nt.responseType||null,nt=nt.url);var Tt=$.getUrlProtocol(nt),kt=$.createAjaxRequest(Tt==="file:");if(!$.isFunction(rt))throw new Error("makeAjaxRequest requires a success callback");kt.onreadystatechange=function(){kt.readyState==4&&(kt.onreadystatechange=function(){},kt.status>=200&&kt.status<300||kt.status===0&&Tt!=="http:"&&Tt!=="https:"?rt(kt):($.console.log("AJAX request returned %d: %s",kt.status,nt),$.isFunction(it)&&it(kt)))};try{if(kt.open("GET",nt,!0),wt&&(kt.responseType=wt),bt)for(var Lt in bt)Object.prototype.hasOwnProperty.call(bt,Lt)&&bt[Lt]&&kt.setRequestHeader(Lt,bt[Lt]);vt&&(kt.withCredentials=!0),kt.send(null)}catch(Ht){var Mt=Ht.message,Nt=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(Nt&&typeof Ht.number<"u"&&Ht.number==-2147024891&&(Mt+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",Ht.name,Mt),kt.onreadystatechange=function(){},window.XDomainRequest){var zt=new window.XDomainRequest;if(zt){zt.onload=function(Wt){$.isFunction(rt)&&rt({responseText:zt.responseText,status:200,statusText:"OK"})},zt.onerror=function(Wt){$.isFunction(it)&&it({responseText:zt.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{zt.open("GET",nt),zt.send()}catch{$.isFunction(it)&&it(kt,Ht)}}}else $.isFunction(it)&&it(kt,Ht)}return kt},jsonp:function(nt){var rt,it=nt.url,vt=document.head||document.getElementsByTagName("head")[0]||document.documentElement,bt=nt.callbackName||"openseadragon"+$.now(),wt=window[bt],Tt="$1"+bt+"$2",kt=nt.param||"callback",Lt=nt.callback;it=it.replace(/(\=)\?(&|$)|\?\?/i,Tt),it+=(/\?/.test(it)?"&":"?")+kt+"="+bt,window[bt]=function(Mt){if(wt)window[bt]=wt;else try{delete window[bt]}catch{}Lt&&$.isFunction(Lt)&&Lt(Mt)},rt=document.createElement("script"),(nt.async!==void 0||nt.async!==!1)&&(rt.async="async"),nt.scriptCharset&&(rt.charset=nt.scriptCharset),rt.src=it,rt.onload=rt.onreadystatechange=function(Mt,Nt){(Nt||!rt.readyState||/loaded|complete/.test(rt.readyState))&&(rt.onload=rt.onreadystatechange=null,vt&&rt.parentNode&&vt.removeChild(rt),rt=void 0)},vt.insertBefore(rt,vt.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(nt){if(window.DOMParser)$.parseXml=function(rt){var it=null,vt;return vt=new DOMParser,it=vt.parseFromString(rt,"text/xml"),it};else if(window.ActiveXObject)$.parseXml=function(rt){var it=null;return it=new ActiveXObject("Microsoft.XMLDOM"),it.async=!1,it.loadXML(rt),it};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(nt)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(nt){return nt=nt||"",!!FILEFORMATS[nt.toLowerCase()]}});var nullfunction=function(nt){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var nt=navigator.appVersion,rt=navigator.userAgent,it;switch(navigator.appName){case"Microsoft Internet Explorer":!!window.attachEvent&&!!window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(rt.substring(rt.indexOf("MSIE")+5,rt.indexOf(";",rt.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(rt.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(rt.substring(rt.indexOf("Firefox")+8))):rt.indexOf("Safari")>=0?($.Browser.vendor=rt.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(rt.substring(rt.substring(0,rt.indexOf("Safari")).lastIndexOf("/")+1,rt.indexOf("Safari")))):(it=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),it.exec(rt)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(nt);break}var vt=window.location.search.substring(1),bt=vt.split("&"),wt,Tt,kt;for(kt=0;kt<bt.length;kt++)if(wt=bt[kt],Tt=wt.indexOf("="),Tt>0){var Lt=wt.substring(0,Tt),Mt=wt.substring(Tt+1);try{URLPARAMS[Lt]=decodeURIComponent(Mt)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",Lt,Mt)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(nt){var rt=nt.requestAnimationFrame||nt.mozRequestAnimationFrame||nt.webkitRequestAnimationFrame||nt.msRequestAnimationFrame,it=nt.cancelAnimationFrame||nt.mozCancelAnimationFrame||nt.webkitCancelAnimationFrame||nt.msCancelAnimationFrame;if(rt&&it)$.requestAnimationFrame=function(){return rt.apply(nt,arguments)},$.cancelAnimationFrame=function(){return it.apply(nt,arguments)};else{var vt=[],bt=[],wt=0,Tt;$.requestAnimationFrame=function(kt){return vt.push([++wt,kt]),Tt||(Tt=setInterval(function(){if(vt.length){var Lt=$.now(),Mt=bt;for(bt=vt,vt=Mt;bt.length;)bt.shift()[1](Lt)}else clearInterval(Tt),Tt=void 0},1e3/50)),wt},$.cancelAnimationFrame=function(kt){var Lt,Mt;for(Lt=0,Mt=vt.length;Lt<Mt;Lt+=1)if(vt[Lt][0]===kt){vt.splice(Lt,1);return}for(Lt=0,Mt=bt.length;Lt<Mt;Lt+=1)if(bt[Lt][0]===kt){bt.splice(Lt,1);return}}}}(window);function getOffsetParent(nt,rt){return rt&&nt!=document.body?document.body:nt.offsetParent}}(OpenSeadragon),function(nt,rt){module.exports?module.exports=rt():nt.OpenSeadragon=rt()}(commonjsGlobal$1,function(){return OpenSeadragon}),function(nt){var rt={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.fullscreenElement},rt.requestFullScreen=function(it){return it.requestFullscreen()},rt.exitFullScreen=function(){document.exitFullscreen()},rt.fullScreenEventName="fullscreenchange",rt.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.msFullscreenElement},rt.requestFullScreen=function(it){return it.msRequestFullscreen()},rt.exitFullScreen=function(){document.msExitFullscreen()},rt.fullScreenEventName="MSFullscreenChange",rt.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitFullscreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullscreen()},rt.exitFullScreen=function(){document.webkitExitFullscreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullScreen()},rt.exitFullScreen=function(){document.webkitCancelFullScreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.mozFullScreenElement},rt.requestFullScreen=function(it){return it.mozRequestFullScreen()},rt.exitFullScreen=function(){document.mozCancelFullScreen()},rt.fullScreenEventName="mozfullscreenchange",rt.fullScreenErrorEventName="mozfullscreenerror"),rt.isFullScreen=function(){return rt.getFullScreenElement()!==null},rt.cancelFullScreen=function(){nt.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),rt.exitFullScreen()},nt.extend(nt,rt)}(OpenSeadragon),function(nt){nt.EventSource=function(){this.events={}},nt.EventSource.prototype={addOnceHandler:function(rt,it,vt,bt){var wt=this;bt=bt||1;var Tt=0,kt=function(Lt){Tt++,Tt===bt&&wt.removeHandler(rt,kt),it(Lt)};this.addHandler(rt,kt,vt)},addHandler:function(rt,it,vt){var bt=this.events[rt];bt||(this.events[rt]=bt=[]),it&&nt.isFunction(it)&&(bt[bt.length]={handler:it,userData:vt||null})},removeHandler:function(rt,it){var vt=this.events[rt],bt=[],wt;if(!!vt&&nt.isArray(vt)){for(wt=0;wt<vt.length;wt++)vt[wt].handler!==it&&bt.push(vt[wt]);this.events[rt]=bt}},removeAllHandlers:function(rt){if(rt)this.events[rt]=[];else for(var it in this.events)this.events[it]=[]},getHandler:function(rt){var it=this.events[rt];return!it||!it.length?null:(it=it.length===1?[it[0]]:Array.apply(null,it),function(vt,bt){var wt,Tt=it.length;for(wt=0;wt<Tt;wt++)it[wt]&&(bt.eventSource=vt,bt.userData=it[wt].userData,it[wt].handler(bt))})},raiseEvent:function(rt,it){var vt=this.getHandler(rt);vt&&(it||(it={}),vt(this,it))}}}(OpenSeadragon),function(nt){var rt=[],it={};nt.MouseTracker=function(Tn){rt.push(this);var Sn=arguments;nt.isPlainObject(Tn)||(Tn={element:Sn[0],clickTimeThreshold:Sn[1],clickDistThreshold:Sn[2]}),this.hash=Math.random(),this.element=nt.getElement(Tn.element),this.clickTimeThreshold=Tn.clickTimeThreshold||nt.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=Tn.clickDistThreshold||nt.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=Tn.dblClickTimeThreshold||nt.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=Tn.dblClickDistThreshold||nt.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=Tn.userData||null,this.stopDelay=Tn.stopDelay||50,this.enterHandler=Tn.enterHandler||null,this.exitHandler=Tn.exitHandler||null,this.pressHandler=Tn.pressHandler||null,this.nonPrimaryPressHandler=Tn.nonPrimaryPressHandler||null,this.releaseHandler=Tn.releaseHandler||null,this.nonPrimaryReleaseHandler=Tn.nonPrimaryReleaseHandler||null,this.moveHandler=Tn.moveHandler||null,this.scrollHandler=Tn.scrollHandler||null,this.clickHandler=Tn.clickHandler||null,this.dblClickHandler=Tn.dblClickHandler||null,this.dragHandler=Tn.dragHandler||null,this.dragEndHandler=Tn.dragEndHandler||null,this.pinchHandler=Tn.pinchHandler||null,this.stopHandler=Tn.stopHandler||null,this.keyDownHandler=Tn.keyDownHandler||null,this.keyUpHandler=Tn.keyUpHandler||null,this.keyHandler=Tn.keyHandler||null,this.focusHandler=Tn.focusHandler||null,this.blurHandler=Tn.blurHandler||null;var jn=this;it[this.hash]={click:function(er){Zt(jn,er)},dblclick:function(er){tn(jn,er)},keydown:function(er){Yt(jn,er)},keyup:function(er){nn(jn,er)},keypress:function(er){rn(jn,er)},focus:function(er){ln(jn,er)},blur:function(er){sn(jn,er)},wheel:function(er){mn(jn,er)},mousewheel:function(er){wn(jn,er)},DOMMouseScroll:function(er){wn(jn,er)},MozMousePixelScroll:function(er){wn(jn,er)},mouseenter:function(er){Pn(jn,er)},mouseleave:function(er){gn(jn,er)},mouseover:function(er){On(jn,er)},mouseout:function(er){Vn(jn,er)},mousedown:function(er){yn(jn,er)},mouseup:function(er){mr(jn,er)},mouseupcaptured:function(er){Er(jn,er)},mousemove:function(er){rr(jn,er)},mousemovecaptured:function(er){vr(jn,er)},touchstart:function(er){Or(jn,er)},touchend:function(er){Ar(jn,er)},touchendcaptured:function(er){sr(jn,er)},touchmove:function(er){ar(jn,er)},touchmovecaptured:function(er){fr(jn,er)},touchcancel:function(er){ir(jn,er)},gesturestart:function(er){Ln(jn,er)},gesturechange:function(er){en(jn,er)},pointerover:function(er){dn(jn,er)},MSPointerOver:function(er){dn(jn,er)},pointerout:function(er){un(jn,er)},MSPointerOut:function(er){un(jn,er)},pointerdown:function(er){Nn(jn,er)},MSPointerDown:function(er){Nn(jn,er)},pointerup:function(er){In(jn,er)},MSPointerUp:function(er){In(jn,er)},pointermove:function(er){Qn(jn,er)},MSPointerMove:function(er){Qn(jn,er)},pointercancel:function(er){dr(jn,er)},MSPointerCancel:function(er){dr(jn,er)},pointerupcaptured:function(er){lr(jn,er)},pointermovecaptured:function(er){Wn(jn,er)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},Tn.startDisabled||this.setTracking(!0)},nt.MouseTracker.prototype={destroy:function(){var Tn;for(wt(this),this.element=null,Tn=0;Tn<rt.length;Tn++)if(rt[Tn]===this){rt.splice(Tn,1);break}it[this.hash]=null,delete it[this.hash]},isTracking:function(){return it[this.hash].tracking},setTracking:function(Tn){return Tn?bt(this):wt(this),this},getActivePointersListsExceptType:function(Tn){for(var Sn=it[this.hash],jn=[],er=0;er<Sn.activePointersLists.length;++er)Sn.activePointersLists[er].type!==Tn&&jn.push(Sn.activePointersLists[er]);return jn},getActivePointersListByType:function(Tn){var Sn=it[this.hash],jn,er=Sn.activePointersLists.length,Cr;for(jn=0;jn<er;jn++)if(Sn.activePointersLists[jn].type===Tn)return Sn.activePointersLists[jn];return Cr=new nt.MouseTracker.GesturePointList(Tn),Sn.activePointersLists.push(Cr),Cr},getActivePointerCount:function(){var Tn=it[this.hash],Sn,jn=Tn.activePointersLists.length,er=0;for(Sn=0;Sn<jn;Sn++)er+=Tn.activePointersLists[Sn].getLength();return er},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},nt.MouseTracker.resetAllMouseTrackers=function(){for(var Tn=0;Tn<rt.length;Tn++)rt[Tn].isTracking()&&(rt[Tn].setTracking(!1),rt[Tn].setTracking(!0))},nt.MouseTracker.gesturePointVelocityTracker=function(){var Tn=[],Sn=0,jn=0,er=function(ai,Ir){return ai.hash.toString()+Ir.type+Ir.id.toString()},Cr=function(){var ai,Ir=Tn.length,mi,wi,Mi=nt.now(),Ei,io,Di;for(Ei=Mi-jn,jn=Mi,ai=0;ai<Ir;ai++)mi=Tn[ai],wi=mi.gPoint,wi.direction=Math.atan2(wi.currentPos.y-mi.lastPos.y,wi.currentPos.x-mi.lastPos.x),io=mi.lastPos.distanceTo(wi.currentPos),mi.lastPos=wi.currentPos,Di=1e3*io/(Ei+1),wi.speed=.75*Di+.25*wi.speed},Qr=function(ai,Ir){var mi=er(ai,Ir);Tn.push({guid:mi,gPoint:Ir,lastPos:Ir.currentPos}),Tn.length===1&&(jn=nt.now(),Sn=window.setInterval(Cr,50))},yr=function(ai,Ir){var mi=er(ai,Ir),wi,Mi=Tn.length;for(wi=0;wi<Mi;wi++)if(Tn[wi].guid===mi){Tn.splice(wi,1),Mi--,Mi===0&&window.clearInterval(Sn);break}};return{addPoint:Qr,removePoint:yr}}(),nt.MouseTracker.captureElement=document,nt.MouseTracker.wheelEventName=nt.Browser.vendor==nt.BROWSERS.IE&&nt.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",nt.MouseTracker.supportsMouseCapture=function(){var Tn=document.createElement("div");return nt.isFunction(Tn.setCapture)&&nt.isFunction(Tn.releaseCapture)}(),nt.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",nt.MouseTracker.wheelEventName],nt.MouseTracker.wheelEventName=="DOMMouseScroll"&&nt.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||nt.Browser.vendor!==nt.BROWSERS.IE)?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),nt.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),nt.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):(nt.MouseTracker.havePointerEvents=!1,nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?(nt.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),nt.MouseTracker.haveMouseEnter=!0):(nt.MouseTracker.subscribeEvents.push("mouseover","mouseout"),nt.MouseTracker.haveMouseEnter=!1),nt.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&nt.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&nt.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),nt.MouseTracker.mousePointerId="legacy-mouse",nt.MouseTracker.maxTouchPoints=10),nt.MouseTracker.GesturePointList=function(Tn){this._gPoints=[],this.type=Tn,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},nt.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(Tn){return this._gPoints.push(Tn)},removeById:function(Tn){var Sn,jn=this._gPoints.length;for(Sn=0;Sn<jn;Sn++)if(this._gPoints[Sn].id===Tn){this._gPoints.splice(Sn,1);break}return this._gPoints.length},getByIndex:function(Tn){return Tn<this._gPoints.length?this._gPoints[Tn]:null},getById:function(Tn){var Sn,jn=this._gPoints.length;for(Sn=0;Sn<jn;Sn++)if(this._gPoints[Sn].id===Tn)return this._gPoints[Sn];return null},getPrimary:function(Tn){var Sn,jn=this._gPoints.length;for(Sn=0;Sn<jn;Sn++)if(this._gPoints[Sn].isPrimary)return this._gPoints[Sn];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function vt(Tn){var Sn=it[Tn.hash],jn,er=Sn.activePointersLists.length;for(jn=0;jn<er;jn++)Sn.activePointersLists[jn].captureCount>0&&(nt.removeEvent(nt.MouseTracker.captureElement,"mousemove",Sn.mousemovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"mouseup",Sn.mouseupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",Sn.pointermovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",Sn.pointerupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchmove",Sn.touchmovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchend",Sn.touchendcaptured,!0),Sn.activePointersLists[jn].captureCount=0);for(jn=0;jn<er;jn++)Sn.activePointersLists.pop()}function bt(Tn){var Sn=it[Tn.hash],jn,er;if(!Sn.tracking){for(er=0;er<nt.MouseTracker.subscribeEvents.length;er++)jn=nt.MouseTracker.subscribeEvents[er],nt.addEvent(Tn.element,jn,Sn[jn],!1);vt(Tn),Sn.tracking=!0}}function wt(Tn){var Sn=it[Tn.hash],jn,er;if(Sn.tracking){for(er=0;er<nt.MouseTracker.subscribeEvents.length;er++)jn=nt.MouseTracker.subscribeEvents[er],nt.removeEvent(Tn.element,jn,Sn[jn],!1);vt(Tn),Sn.tracking=!1}}function Tt(Tn,Sn){var jn=it[Tn.hash];if(Sn==="pointerevent")return{upName:nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:jn.pointerupcaptured,moveName:nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:jn.pointermovecaptured};if(Sn==="mouse")return{upName:"mouseup",upHandler:jn.mouseupcaptured,moveName:"mousemove",moveHandler:jn.mousemovecaptured};if(Sn==="touch")return{upName:"touchend",upHandler:jn.touchendcaptured,moveName:"touchmove",moveHandler:jn.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function kt(Tn,Sn,jn){var er=Tn.getActivePointersListByType(Sn),Cr;er.captureCount+=jn||1,er.captureCount===1&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Tn.element.setCapture(!0):(Cr=Tt(Tn,nt.MouseTracker.havePointerEvents?"pointerevent":Sn),Ti&&Rr(window.top)&&nt.addEvent(window.top,Cr.upName,Cr.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,Cr.upName,Cr.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,Cr.moveName,Cr.moveHandler,!0)))}function Lt(Tn,Sn,jn){var er=Tn.getActivePointersListByType(Sn),Cr;er.captureCount-=jn||1,er.captureCount===0&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Tn.element.releaseCapture():(Cr=Tt(Tn,nt.MouseTracker.havePointerEvents?"pointerevent":Sn),Ti&&Rr(window.top)&&nt.removeEvent(window.top,Cr.upName,Cr.upHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,Cr.moveName,Cr.moveHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,Cr.upName,Cr.upHandler,!0)))}function Mt(Tn){var Sn;if(nt.MouseTracker.unprefixedPointerEvents)Sn=Tn.pointerType;else switch(Tn.pointerType){case 2:Sn="touch";break;case 3:Sn="pen";break;case 4:Sn="mouse";break;default:Sn=""}return Sn}function Nt(Tn){return nt.getMousePosition(Tn)}function zt(Tn,Sn){return Ht(Nt(Tn),Sn)}function Ht(Tn,Sn){var jn=nt.getElementOffset(Sn);return Tn.minus(jn)}function Wt(Tn,Sn){return new nt.Point((Tn.x+Sn.x)/2,(Tn.y+Sn.y)/2)}function Zt(Tn,Sn){Tn.clickHandler&&nt.cancelEvent(Sn)}function tn(Tn,Sn){Tn.dblClickHandler&&nt.cancelEvent(Sn)}function Yt(Tn,Sn){var jn;Tn.keyDownHandler&&(Sn=nt.getEvent(Sn),jn=Tn.keyDownHandler({eventSource:Tn,keyCode:Sn.keyCode?Sn.keyCode:Sn.charCode,ctrl:Sn.ctrlKey,shift:Sn.shiftKey,alt:Sn.altKey,meta:Sn.metaKey,originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),jn||nt.cancelEvent(Sn))}function nn(Tn,Sn){var jn;Tn.keyUpHandler&&(Sn=nt.getEvent(Sn),jn=Tn.keyUpHandler({eventSource:Tn,keyCode:Sn.keyCode?Sn.keyCode:Sn.charCode,ctrl:Sn.ctrlKey,shift:Sn.shiftKey,alt:Sn.altKey,meta:Sn.metaKey,originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),jn||nt.cancelEvent(Sn))}function rn(Tn,Sn){var jn;Tn.keyHandler&&(Sn=nt.getEvent(Sn),jn=Tn.keyHandler({eventSource:Tn,keyCode:Sn.keyCode?Sn.keyCode:Sn.charCode,ctrl:Sn.ctrlKey,shift:Sn.shiftKey,alt:Sn.altKey,meta:Sn.metaKey,originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),jn||nt.cancelEvent(Sn))}function ln(Tn,Sn){var jn;Tn.focusHandler&&(Sn=nt.getEvent(Sn),jn=Tn.focusHandler({eventSource:Tn,originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),jn===!1&&nt.cancelEvent(Sn))}function sn(Tn,Sn){var jn;Tn.blurHandler&&(Sn=nt.getEvent(Sn),jn=Tn.blurHandler({eventSource:Tn,originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),jn===!1&&nt.cancelEvent(Sn))}function mn(Tn,Sn){Cn(Tn,Sn,Sn)}function wn(Tn,Sn){Sn=nt.getEvent(Sn);var jn={target:Sn.target||Sn.srcElement,type:"wheel",shiftKey:Sn.shiftKey||!1,clientX:Sn.clientX,clientY:Sn.clientY,pageX:Sn.pageX?Sn.pageX:Sn.clientX,pageY:Sn.pageY?Sn.pageY:Sn.clientY,deltaMode:Sn.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};nt.MouseTracker.wheelEventName=="mousewheel"?jn.deltaY=-Sn.wheelDelta/nt.DEFAULT_SETTINGS.pixelsPerWheelLine:jn.deltaY=Sn.detail,Cn(Tn,jn,Sn)}function Cn(Tn,Sn,jn){var er=0,Cr;er=Sn.deltaY<0?1:-1,Tn.scrollHandler&&(Cr=Tn.scrollHandler({eventSource:Tn,pointerType:"mouse",position:zt(Sn,Tn.element),scroll:er,shift:Sn.shiftKey,isTouchEvent:!1,originalEvent:jn,preventDefaultAction:!1,userData:Tn.userData}),Cr===!1&&nt.cancelEvent(jn))}function An(Tn,Sn){if(Tn===Sn)return!1;for(;Sn&&Sn!==Tn;)Sn=Sn.parentNode;return Sn===Tn}function Pn(Tn,Sn){Sn=nt.getEvent(Sn),kn(Tn,Sn)}function On(Tn,Sn){Sn=nt.getEvent(Sn),!(Sn.currentTarget===Sn.relatedTarget||An(Sn.currentTarget,Sn.relatedTarget))&&kn(Tn,Sn)}function kn(Tn,Sn){var jn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Nt(Sn),currentTime:nt.now()};_r(Tn,Sn,[jn])}function gn(Tn,Sn){Sn=nt.getEvent(Sn),pn(Tn,Sn)}function Vn(Tn,Sn){Sn=nt.getEvent(Sn),!(Sn.currentTarget===Sn.relatedTarget||An(Sn.currentTarget,Sn.relatedTarget))&&pn(Tn,Sn)}function pn(Tn,Sn){var jn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Nt(Sn),currentTime:nt.now()};hi(Tn,Sn,[jn])}function pr(Tn){return nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Tn===1?0:Tn===2?2:Tn===4?1:-1:Tn}function yn(Tn,Sn){var jn;Sn=nt.getEvent(Sn),jn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Nt(Sn),currentTime:nt.now()},di(Tn,Sn,[jn],pr(Sn.button))&&(nt.stopEvent(Sn),kt(Tn,"mouse")),(Tn.clickHandler||Tn.dblClickHandler||Tn.pressHandler||Tn.dragHandler||Tn.dragEndHandler)&&nt.cancelEvent(Sn)}function mr(Tn,Sn){Mr(Tn,Sn)}function Er(Tn,Sn){Mr(Tn,Sn),nt.stopEvent(Sn)}function Mr(Tn,Sn){var jn;Sn=nt.getEvent(Sn),jn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Nt(Sn),currentTime:nt.now()},vi(Tn,Sn,[jn],pr(Sn.button))&&Lt(Tn,"mouse")}function rr(Tn,Sn){cr(Tn,Sn)}function vr(Tn,Sn){cr(Tn,Sn),nt.stopEvent(Sn)}function cr(Tn,Sn){var jn;Sn=nt.getEvent(Sn),jn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Nt(Sn),currentTime:nt.now()},Ai(Tn,Sn,[jn])}function gr(Tn,Sn,jn){var er,Cr=jn.getLength(),Qr=[];if(jn.type==="touch"||jn.contacts>0){for(er=0;er<Cr;er++)Qr.push(jn.getByIndex(er));Qr.length>0&&(vi(Tn,Sn,Qr,0),jn.captureCount=1,Lt(Tn,jn.type),hi(Tn,Sn,Qr))}}function Or(Tn,Sn){var jn,er,Cr,Qr=Sn.changedTouches.length,yr=[],ai,Ir=Tn.getActivePointersListByType("touch");for(jn=nt.now(),Ir.getLength()>Sn.touches.length-Qr&&(nt.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),gr(Tn,Sn,Ir)),er=0;er<Qr;er++)yr.push({id:Sn.changedTouches[er].identifier,type:"touch",currentPos:Nt(Sn.changedTouches[er]),currentTime:jn});for(_r(Tn,Sn,yr),er=0;er<rt.length;er++)if(rt[er]!==Tn&&rt[er].isTracking()&&An(rt[er].element,Tn.element)){for(ai=[],Cr=0;Cr<Qr;Cr++)ai.push({id:Sn.changedTouches[Cr].identifier,type:"touch",currentPos:Nt(Sn.changedTouches[Cr]),currentTime:jn});_r(rt[er],Sn,ai)}di(Tn,Sn,yr,0)&&(nt.stopEvent(Sn),kt(Tn,"touch",Qr)),nt.cancelEvent(Sn)}function Ar(Tn,Sn){ii(Tn,Sn)}function sr(Tn,Sn){ii(Tn,Sn),nt.stopEvent(Sn)}function ii(Tn,Sn){var jn,er,Cr,Qr=Sn.changedTouches.length,yr=[],ai;for(jn=nt.now(),er=0;er<Qr;er++)yr.push({id:Sn.changedTouches[er].identifier,type:"touch",currentPos:Nt(Sn.changedTouches[er]),currentTime:jn});for(vi(Tn,Sn,yr,0)&&Lt(Tn,"touch",Qr),hi(Tn,Sn,yr),er=0;er<rt.length;er++)if(rt[er]!==Tn&&rt[er].isTracking()&&An(rt[er].element,Tn.element)){for(ai=[],Cr=0;Cr<Qr;Cr++)ai.push({id:Sn.changedTouches[Cr].identifier,type:"touch",currentPos:Nt(Sn.changedTouches[Cr]),currentTime:jn});hi(rt[er],Sn,ai)}nt.cancelEvent(Sn)}function ar(Tn,Sn){wr(Tn,Sn)}function fr(Tn,Sn){wr(Tn,Sn),nt.stopEvent(Sn)}function wr(Tn,Sn){var jn,er=Sn.changedTouches.length,Cr=[];for(jn=0;jn<er;jn++)Cr.push({id:Sn.changedTouches[jn].identifier,type:"touch",currentPos:Nt(Sn.changedTouches[jn]),currentTime:nt.now()});Ai(Tn,Sn,Cr),nt.cancelEvent(Sn)}function ir(Tn,Sn){var jn=Tn.getActivePointersListByType("touch");gr(Tn,Sn,jn)}function Ln(Tn,Sn){return Sn.stopPropagation(),Sn.preventDefault(),!1}function en(Tn,Sn){return Sn.stopPropagation(),Sn.preventDefault(),!1}function dn(Tn,Sn){var jn;Sn.currentTarget===Sn.relatedTarget||An(Sn.currentTarget,Sn.relatedTarget)||(jn={id:Sn.pointerId,type:Mt(Sn),isPrimary:Sn.isPrimary,currentPos:Nt(Sn),currentTime:nt.now()},_r(Tn,Sn,[jn]))}function un(Tn,Sn){var jn;Sn.currentTarget===Sn.relatedTarget||An(Sn.currentTarget,Sn.relatedTarget)||(jn={id:Sn.pointerId,type:Mt(Sn),isPrimary:Sn.isPrimary,currentPos:Nt(Sn),currentTime:nt.now()},hi(Tn,Sn,[jn]))}function Nn(Tn,Sn){var jn;jn={id:Sn.pointerId,type:Mt(Sn),isPrimary:Sn.isPrimary,currentPos:Nt(Sn),currentTime:nt.now()},di(Tn,Sn,[jn],Sn.button)&&(nt.stopEvent(Sn),kt(Tn,jn.type)),(Tn.clickHandler||Tn.dblClickHandler||Tn.pressHandler||Tn.dragHandler||Tn.dragEndHandler||Tn.pinchHandler)&&nt.cancelEvent(Sn)}function In(Tn,Sn){$n(Tn,Sn)}function lr(Tn,Sn){var jn=Tn.getActivePointersListByType(Mt(Sn));jn.getById(Sn.pointerId)&&$n(Tn,Sn),nt.stopEvent(Sn)}function $n(Tn,Sn){var jn;jn={id:Sn.pointerId,type:Mt(Sn),isPrimary:Sn.isPrimary,currentPos:Nt(Sn),currentTime:nt.now()},vi(Tn,Sn,[jn],Sn.button)&&Lt(Tn,jn.type)}function Qn(Tn,Sn){or(Tn,Sn)}function Wn(Tn,Sn){var jn=Tn.getActivePointersListByType(Mt(Sn));jn.getById(Sn.pointerId)&&or(Tn,Sn),nt.stopEvent(Sn)}function or(Tn,Sn){var jn;jn={id:Sn.pointerId,type:Mt(Sn),isPrimary:Sn.isPrimary,currentPos:Nt(Sn),currentTime:nt.now()},Ai(Tn,Sn,[jn])}function dr(Tn,Sn){var jn;jn={id:Sn.pointerId,type:Mt(Sn)},ki(Tn,Sn,[jn])}function kr(Tn,Sn){return Object.prototype.hasOwnProperty.call(Sn,"isPrimary")||(Tn.getLength()===0?Sn.isPrimary=!0:Sn.isPrimary=!1),Sn.speed=0,Sn.direction=0,Sn.contactPos=Sn.currentPos,Sn.contactTime=Sn.currentTime,Sn.lastPos=Sn.currentPos,Sn.lastTime=Sn.currentTime,Tn.add(Sn)}function br(Tn,Sn){var jn,er;return Tn.getById(Sn.id)?(jn=Tn.removeById(Sn.id),Object.prototype.hasOwnProperty.call(Sn,"isPrimary")||(er=Tn.getPrimary(),er||(er=Tn.getByIndex(0),er&&(er.isPrimary=!0)))):jn=Tn.getLength(),jn}function _r(Tn,Sn,jn){var er=Tn.getActivePointersListByType(jn[0].type),Cr,Qr=jn.length,yr,ai,Ir;for(Cr=0;Cr<Qr;Cr++)yr=jn[Cr],ai=er.getById(yr.id),ai?(ai.insideElement=!0,ai.lastPos=ai.currentPos,ai.lastTime=ai.currentTime,ai.currentPos=yr.currentPos,ai.currentTime=yr.currentTime,yr=ai):(yr.captured=!1,yr.insideElementPressed=!1,yr.insideElement=!0,kr(er,yr)),Tn.enterHandler&&(Ir=Tn.enterHandler({eventSource:Tn,pointerType:yr.type,position:Ht(yr.currentPos,Tn.element),buttons:er.buttons,pointers:Tn.getActivePointerCount(),insideElementPressed:yr.insideElementPressed,buttonDownAny:er.buttons!==0,isTouchEvent:yr.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Ir===!1&&nt.cancelEvent(Sn))}function hi(Tn,Sn,jn){var er=Tn.getActivePointersListByType(jn[0].type),Cr,Qr=jn.length,yr,ai,Ir;for(Cr=0;Cr<Qr;Cr++)yr=jn[Cr],ai=er.getById(yr.id),ai&&(ai.captured?(ai.insideElement=!1,ai.lastPos=ai.currentPos,ai.lastTime=ai.currentTime,ai.currentPos=yr.currentPos,ai.currentTime=yr.currentTime):br(er,ai),yr=ai),Tn.exitHandler&&(Ir=Tn.exitHandler({eventSource:Tn,pointerType:yr.type,position:yr.currentPos&&Ht(yr.currentPos,Tn.element),buttons:er.buttons,pointers:Tn.getActivePointerCount(),insideElementPressed:ai?ai.insideElementPressed:!1,buttonDownAny:er.buttons!==0,isTouchEvent:yr.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Ir===!1&&nt.cancelEvent(Sn))}function di(Tn,Sn,jn,er){var Cr=it[Tn.hash],Qr,yr=Tn.getActivePointersListByType(jn[0].type),ai,Ir=jn.length,mi,wi;typeof Sn.buttons<"u"?yr.buttons=Sn.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?er===0?yr.buttons+=1:er===1?yr.buttons+=4:er===2?yr.buttons+=2:er===3?yr.buttons+=8:er===4?yr.buttons+=16:er===5&&(yr.buttons+=32):er===0?yr.buttons|=1:er===1?yr.buttons|=4:er===2?yr.buttons|=2:er===3?yr.buttons|=8:er===4?yr.buttons|=16:er===5&&(yr.buttons|=32);var Mi=Tn.getActivePointersListsExceptType(jn[0].type);for(ai=0;ai<Mi.length;ai++)gr(Tn,Sn,Mi[ai]);if(er!==0)return Tn.nonPrimaryPressHandler&&(Qr=Tn.nonPrimaryPressHandler({eventSource:Tn,pointerType:jn[0].type,position:Ht(jn[0].currentPos,Tn.element),button:er,buttons:yr.buttons,isTouchEvent:jn[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Qr===!1&&nt.cancelEvent(Sn)),!1;for(ai=0;ai<Ir;ai++)mi=jn[ai],wi=yr.getById(mi.id),wi?(wi.captured=!0,wi.insideElementPressed=!0,wi.insideElement=!0,wi.contactPos=mi.currentPos,wi.contactTime=mi.currentTime,wi.lastPos=wi.currentPos,wi.lastTime=wi.currentTime,wi.currentPos=mi.currentPos,wi.currentTime=mi.currentTime,mi=wi):(mi.captured=!0,mi.insideElementPressed=!0,mi.insideElement=!0,kr(yr,mi)),yr.addContact(),(Tn.dragHandler||Tn.dragEndHandler||Tn.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.addPoint(Tn,mi),yr.contacts===1?Tn.pressHandler&&(Qr=Tn.pressHandler({eventSource:Tn,pointerType:mi.type,position:Ht(mi.contactPos,Tn.element),buttons:yr.buttons,isTouchEvent:mi.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Qr===!1&&nt.cancelEvent(Sn)):yr.contacts===2&&Tn.pinchHandler&&mi.type==="touch"&&(Cr.pinchGPoints=yr.asArray(),Cr.lastPinchDist=Cr.currentPinchDist=Cr.pinchGPoints[0].currentPos.distanceTo(Cr.pinchGPoints[1].currentPos),Cr.lastPinchCenter=Cr.currentPinchCenter=Wt(Cr.pinchGPoints[0].currentPos,Cr.pinchGPoints[1].currentPos));return!0}function vi(Tn,Sn,jn,er){var Cr=it[Tn.hash],Qr=Tn.getActivePointersListByType(jn[0].type),yr,ai,Ir,mi,wi=jn.length,Mi,Ei,io=!1,Di=!1,eo;if(typeof Sn.buttons<"u"?Qr.buttons=Sn.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?er===0?Qr.buttons-=1:er===1?Qr.buttons-=4:er===2?Qr.buttons-=2:er===3?Qr.buttons-=8:er===4?Qr.buttons-=16:er===5&&(Qr.buttons-=32):er===0?Qr.buttons^=-2:er===1?Qr.buttons^=-5:er===2?Qr.buttons^=-3:er===3?Qr.buttons^=-9:er===4?Qr.buttons^=-17:er===5&&(Qr.buttons^=-33),er!==0){Tn.nonPrimaryReleaseHandler&&(yr=Tn.nonPrimaryReleaseHandler({eventSource:Tn,pointerType:jn[0].type,position:Ht(jn[0].currentPos,Tn.element),button:er,buttons:Qr.buttons,isTouchEvent:jn[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(Sn));var wo=Tn.getActivePointersListByType("mouse");return gr(Tn,Sn,wo),!1}if(typeof jn[0].currentPos>"u")return gr(Tn,Sn,Qr),!1;for(mi=0;mi<wi;mi++)Mi=jn[mi],Ei=Qr.getById(Mi.id),Ei&&(Ei.captured&&(Ei.captured=!1,io=!0,Di=!0),Ei.lastPos=Ei.currentPos,Ei.lastTime=Ei.currentTime,Ei.currentPos=Mi.currentPos,Ei.currentTime=Mi.currentTime,Ei.insideElement||br(Qr,Ei),ai=Ei.currentPos,Ir=Ei.currentTime,Di?(Qr.removeContact(),(Tn.dragHandler||Tn.dragEndHandler||Tn.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.removePoint(Tn,Ei),Qr.contacts===0?(Tn.releaseHandler&&(yr=Tn.releaseHandler({eventSource:Tn,pointerType:Ei.type,position:Ht(ai,Tn.element),buttons:Qr.buttons,insideElementPressed:Ei.insideElementPressed,insideElementReleased:Ei.insideElement,isTouchEvent:Ei.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(Sn)),Tn.dragEndHandler&&!Ei.currentPos.equals(Ei.contactPos)&&(yr=Tn.dragEndHandler({eventSource:Tn,pointerType:Ei.type,position:Ht(Ei.currentPos,Tn.element),speed:Ei.speed,direction:Ei.direction,shift:Sn.shiftKey,isTouchEvent:Ei.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(Sn)),(Tn.clickHandler||Tn.dblClickHandler)&&Ei.insideElement&&(eo=Ir-Ei.contactTime<=Tn.clickTimeThreshold&&Ei.contactPos.distanceTo(ai)<=Tn.clickDistThreshold,Tn.clickHandler&&(yr=Tn.clickHandler({eventSource:Tn,pointerType:Ei.type,position:Ht(Ei.currentPos,Tn.element),quick:eo,shift:Sn.shiftKey,isTouchEvent:Ei.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(Sn)),Tn.dblClickHandler&&eo&&(Qr.clicks++,Qr.clicks===1?(Cr.lastClickPos=ai,Cr.dblClickTimeOut=setTimeout(function(){Qr.clicks=0},Tn.dblClickTimeThreshold)):Qr.clicks===2&&(clearTimeout(Cr.dblClickTimeOut),Qr.clicks=0,Cr.lastClickPos.distanceTo(ai)<=Tn.dblClickDistThreshold&&(yr=Tn.dblClickHandler({eventSource:Tn,pointerType:Ei.type,position:Ht(Ei.currentPos,Tn.element),shift:Sn.shiftKey,isTouchEvent:Ei.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(Sn)),Cr.lastClickPos=null)))):Qr.contacts===2&&Tn.pinchHandler&&Ei.type==="touch"&&(Cr.pinchGPoints=Qr.asArray(),Cr.lastPinchDist=Cr.currentPinchDist=Cr.pinchGPoints[0].currentPos.distanceTo(Cr.pinchGPoints[1].currentPos),Cr.lastPinchCenter=Cr.currentPinchCenter=Wt(Cr.pinchGPoints[0].currentPos,Cr.pinchGPoints[1].currentPos))):Tn.releaseHandler&&(yr=Tn.releaseHandler({eventSource:Tn,pointerType:Ei.type,position:Ht(ai,Tn.element),buttons:Qr.buttons,insideElementPressed:Ei.insideElementPressed,insideElementReleased:Ei.insideElement,isTouchEvent:Ei.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(Sn)));return io}function Ai(Tn,Sn,jn){var er=it[Tn.hash],Cr=Tn.getActivePointersListByType(jn[0].type),Qr,yr=jn.length,ai,Ir,mi,wi,Mi;for(typeof Sn.buttons<"u"&&(Cr.buttons=Sn.buttons),Qr=0;Qr<yr;Qr++)ai=jn[Qr],Ir=Cr.getById(ai.id),Ir?(Object.prototype.hasOwnProperty.call(ai,"isPrimary")&&(Ir.isPrimary=ai.isPrimary),Ir.lastPos=Ir.currentPos,Ir.lastTime=Ir.currentTime,Ir.currentPos=ai.currentPos,Ir.currentTime=ai.currentTime):(ai.captured=!1,ai.insideElementPressed=!1,ai.insideElement=!0,kr(Cr,ai));Tn.stopHandler&&jn[0].type==="mouse"&&(clearTimeout(Tn.stopTimeOut),Tn.stopTimeOut=setTimeout(function(){Bi(Tn,Sn,jn[0].type)},Tn.stopDelay)),Cr.contacts===0?Tn.moveHandler&&(Mi=Tn.moveHandler({eventSource:Tn,pointerType:jn[0].type,position:Ht(jn[0].currentPos,Tn.element),buttons:Cr.buttons,isTouchEvent:jn[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Mi===!1&&nt.cancelEvent(Sn)):Cr.contacts===1?(Tn.moveHandler&&(Ir=Cr.asArray()[0],Mi=Tn.moveHandler({eventSource:Tn,pointerType:Ir.type,position:Ht(Ir.currentPos,Tn.element),buttons:Cr.buttons,isTouchEvent:Ir.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Mi===!1&&nt.cancelEvent(Sn)),Tn.dragHandler&&(Ir=Cr.asArray()[0],wi=Ir.currentPos.minus(Ir.lastPos),Mi=Tn.dragHandler({eventSource:Tn,pointerType:Ir.type,position:Ht(Ir.currentPos,Tn.element),buttons:Cr.buttons,delta:wi,speed:Ir.speed,direction:Ir.direction,shift:Sn.shiftKey,isTouchEvent:Ir.type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Mi===!1&&nt.cancelEvent(Sn))):Cr.contacts===2&&(Tn.moveHandler&&(mi=Cr.asArray(),Mi=Tn.moveHandler({eventSource:Tn,pointerType:mi[0].type,position:Ht(Wt(mi[0].currentPos,mi[1].currentPos),Tn.element),buttons:Cr.buttons,isTouchEvent:mi[0].type==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Mi===!1&&nt.cancelEvent(Sn)),Tn.pinchHandler&&jn[0].type==="touch"&&(wi=er.pinchGPoints[0].currentPos.distanceTo(er.pinchGPoints[1].currentPos),wi!=er.currentPinchDist&&(er.lastPinchDist=er.currentPinchDist,er.currentPinchDist=wi,er.lastPinchCenter=er.currentPinchCenter,er.currentPinchCenter=Wt(er.pinchGPoints[0].currentPos,er.pinchGPoints[1].currentPos),Mi=Tn.pinchHandler({eventSource:Tn,pointerType:"touch",gesturePoints:er.pinchGPoints,lastCenter:Ht(er.lastPinchCenter,Tn.element),center:Ht(er.currentPinchCenter,Tn.element),lastDistance:er.lastPinchDist,distance:er.currentPinchDist,shift:Sn.shiftKey,originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData}),Mi===!1&&nt.cancelEvent(Sn))))}function ki(Tn,Sn,jn){vi(Tn,Sn,jn,0),hi(Tn,Sn,jn)}function Bi(Tn,Sn,jn){Tn.stopHandler&&Tn.stopHandler({eventSource:Tn,pointerType:jn,position:zt(Sn,Tn.element),buttons:Tn.getActivePointersListByType(jn).buttons,isTouchEvent:jn==="touch",originalEvent:Sn,preventDefaultAction:!1,userData:Tn.userData})}var Ti=function(){try{return window.self!==window.top}catch{return!0}}();function Rr(Tn){try{return Tn.addEventListener&&Tn.removeEventListener}catch{return!1}}}(OpenSeadragon),function(nt){nt.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},nt.Control=function(rt,it,vt){var bt=rt.parentNode;typeof it=="number"&&(nt.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),it={anchor:it}),it.attachToViewer=typeof it.attachToViewer>"u"?!0:it.attachToViewer,this.autoFade=typeof it.autoFade>"u"?!0:it.autoFade,this.element=rt,this.anchor=it.anchor,this.container=vt,this.anchor==nt.ControlAnchor.ABSOLUTE?(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof it.top=="number"?it.top+"px":it.top,this.wrapper.style.left=typeof it.left=="number"?it.left+"px":it.left,this.wrapper.style.height=typeof it.height=="number"?it.height+"px":it.height,this.wrapper.style.width=typeof it.width=="number"?it.width+"px":it.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==nt.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),it.attachToViewer?this.anchor==nt.ControlAnchor.TOP_RIGHT||this.anchor==nt.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):bt.appendChild(this.wrapper)},nt.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(rt){this.wrapper.style.display=rt?this.anchor==nt.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(rt){this.element[nt.SIGNAL]&&nt.Browser.vendor==nt.BROWSERS.IE?nt.setElementOpacity(this.element,rt,!0):nt.setElementOpacity(this.wrapper,rt,!0)}}}(OpenSeadragon),function(nt){nt.ControlDock=function(it){var vt=["topleft","topright","bottomright","bottomleft"],bt,wt;for(nt.extend(!0,this,{id:"controldock-"+nt.now()+"-"+Math.floor(Math.random()*1e6),container:nt.makeNeutralElement("div"),controls:[]},it),this.container.onsubmit=function(){return!1},this.element&&(this.element=nt.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),wt=0;wt<vt.length;wt++)bt=vt[wt],this.controls[bt]=nt.makeNeutralElement("div"),this.controls[bt].style.position="absolute",bt.match("left")&&(this.controls[bt].style.left="0px"),bt.match("right")&&(this.controls[bt].style.right="0px"),bt.match("top")&&(this.controls[bt].style.top="0px"),bt.match("bottom")&&(this.controls[bt].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},nt.ControlDock.prototype={addControl:function(it,vt){it=nt.getElement(it);var bt=null;if(!(rt(this,it)>=0)){switch(vt.anchor){case nt.ControlAnchor.TOP_RIGHT:bt=this.controls.topright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.BOTTOM_RIGHT:bt=this.controls.bottomright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.BOTTOM_LEFT:bt=this.controls.bottomleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.TOP_LEFT:bt=this.controls.topleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.ABSOLUTE:bt=this.container,it.style.margin="0px",it.style.padding="0px";break;default:case nt.ControlAnchor.NONE:bt=this.container,it.style.margin="0px",it.style.padding="0px";break}this.controls.push(new nt.Control(it,vt,bt)),it.style.display="inline-block"}},removeControl:function(it){it=nt.getElement(it);var vt=rt(this,it);return vt>=0&&(this.controls[vt].destroy(),this.controls.splice(vt,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var it;for(it=this.controls.length-1;it>=0;it--)if(this.controls[it].isVisible())return!0;return!1},setControlsEnabled:function(it){var vt;for(vt=this.controls.length-1;vt>=0;vt--)this.controls[vt].setVisible(it);return this}};function rt(it,vt){var bt=it.controls,wt;for(wt=bt.length-1;wt>=0;wt--)if(bt[wt].element==vt)return wt;return-1}}(OpenSeadragon),function(nt){nt.Placement=nt.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(nt){var rt={},it=1;nt.Viewer=function(en){var dn=arguments,un=this,Nn;if(nt.isPlainObject(en)||(en={id:dn[0],xmlPath:dn.length>1?dn[1]:void 0,prefixUrl:dn.length>2?dn[2]:void 0,controls:dn.length>3?dn[3]:void 0,overlays:dn.length>4?dn[4]:void 0}),en.config&&(nt.extend(!0,en,en.config),delete en.config),nt.extend(!0,this,{id:en.id,hash:en.hash||it++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},nt.DEFAULT_SETTINGS,en),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof rt[this.hash]<"u"&&nt.console.warn("Hash "+this.hash+" has already been used."),rt[this.hash]={fsBoundsDelta:new nt.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=nt.now(),nt.EventSource.call(this),this.addHandler("open-failed",function(In){var lr=nt.getString("Errors.OpenFailed",In.eventSource,In.message);un._showMessage(lr)}),nt.ControlDock.call(this,en),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=nt.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(In){In.width="100%",In.height="100%",In.overflow="hidden",In.position="absolute",In.top="0px",In.left="0px"}(this.canvas.style),nt.setElementTouchActionNone(this.canvas),en.tabIndex!==""&&(this.canvas.tabIndex=en.tabIndex===void 0?0:en.tabIndex),this.container.className="openseadragon-container",function(In){In.width="100%",In.height="100%",In.position="relative",In.overflow="hidden",In.left="0px",In.top="0px",In.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new nt.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:nt.delegate(this,Zt),keyHandler:nt.delegate(this,tn),clickHandler:nt.delegate(this,Yt),dblClickHandler:nt.delegate(this,nn),dragHandler:nt.delegate(this,rn),dragEndHandler:nt.delegate(this,ln),enterHandler:nt.delegate(this,sn),exitHandler:nt.delegate(this,mn),pressHandler:nt.delegate(this,wn),releaseHandler:nt.delegate(this,Cn),nonPrimaryPressHandler:nt.delegate(this,An),nonPrimaryReleaseHandler:nt.delegate(this,Pn),scrollHandler:nt.delegate(this,kn),pinchHandler:nt.delegate(this,On)}),this.outerTracker=new nt.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:nt.delegate(this,gn),exitHandler:nt.delegate(this,Vn)}),this.toolbar&&(this.toolbar=new nt.ControlDock({element:this.toolbar})),this.bindStandardControls(),rt[this.hash].prevContainerSize=vt(this.container),this.world=new nt.World({viewer:this}),this.world.addHandler("add-item",function(In){un.source=un.world.getItemAt(0).source,rt[un.hash].forceRedraw=!0,un._updateRequestId||(un._updateRequestId=kt(un,pn))}),this.world.addHandler("remove-item",function(In){un.world.getItemCount()?un.source=un.world.getItemAt(0).source:un.source=null,rt[un.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(In){un.viewport&&un.viewport._setContentBounds(un.world.getHomeBounds(),un.world.getContentFactor())}),this.world.addHandler("item-index-change",function(In){un.source=un.world.getItemAt(0).source}),this.viewport=new nt.Viewport({containerSize:rt[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new nt.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:en.timeout}),this.tileCache=new nt.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new nt.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=nt.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(Nn=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(Nn,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(Nn=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(Nn,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new nt.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),Nn=0;Nn<this.customControls.length;Nn++)this.addControl(this.customControls[Nn].id,{anchor:this.customControls[Nn].anchor});nt.requestAnimationFrame(function(){Mt(un)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},nt.extend(nt.Viewer.prototype,nt.EventSource.prototype,nt.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(en){return nt.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(en)},openTileSource:function(en){return nt.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(en)},open:function(en,dn){var un=this;if(this.close(),!!en){if(this.sequenceMode&&nt.isArray(en)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof dn<"u"&&!isNaN(dn)&&(this.initialPage=dn),this.tileSources=en,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(nt.isArray(en)||(en=[en]),!!en.length){this._opening=!0;for(var Nn=en.length,In=0,lr=0,$n,Qn=function(){if(In+lr===Nn)if(In){(un._firstOpen||!un.preserveViewport)&&(un.viewport.goHome(!0),un.viewport.update()),un._firstOpen=!1;var dr=en[0];if(dr.tileSource&&(dr=dr.tileSource),un.overlays&&!un.preserveOverlays)for(var kr=0;kr<un.overlays.length;kr++)un.currentOverlays[kr]=wt(un,un.overlays[kr]);un._drawOverlays(),un._opening=!1,un.raiseEvent("open",{source:dr})}else un._opening=!1,un.raiseEvent("open-failed",$n)},Wn=function(dr){(!nt.isPlainObject(dr)||!dr.tileSource)&&(dr={tileSource:dr}),dr.index!==void 0&&(nt.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete dr.index),dr.collectionImmediately===void 0&&(dr.collectionImmediately=!0);var kr=dr.success;dr.success=function(_r){if(In++,dr.tileSource.overlays)for(var hi=0;hi<dr.tileSource.overlays.length;hi++)un.addOverlay(dr.tileSource.overlays[hi]);kr&&kr(_r),Qn()};var br=dr.error;dr.error=function(_r){lr++,$n||($n=_r),br&&br(_r),Qn()},un.addTiledImage(dr)},or=0;or<en.length;or++)Wn(en[or]);return this}}},close:function(){return rt[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),rt[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(!!rt[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(nt.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),rt[this.hash]=null,delete rt[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(en){return this.innerTracker.setTracking(en),this.outerTracker.setTracking(en),this.raiseEvent("mouse-enabled",{enabled:en}),this},areControlsEnabled:function(){var en=this.controls.length,dn;for(dn=0;dn<this.controls.length;dn++)en=en&&this.controls[dn].isVisible();return en},setControlsEnabled:function(en){return en?zt(this):Mt(this),this.raiseEvent("controls-enabled",{enabled:en}),this},setDebugMode:function(en){for(var dn=0;dn<this.world.getItemCount();dn++)this.world.getItemAt(dn).debugMode=en;this.debugMode=en,this.forceRedraw()},isFullPage:function(){return rt[this.hash].fullPage},setFullPage:function(en){var dn=document.body,un=dn.style,Nn=document.documentElement.style,In=this,lr,$n;if(en==this.isFullPage())return this;var Qn={fullPage:en,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Qn),Qn.preventDefaultAction)return this;if(en){for(this.elementSize=nt.getElementSize(this.element),this.pageScroll=nt.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=un.margin,this.docMargin=Nn.margin,un.margin="0",Nn.margin="0",this.bodyPadding=un.padding,this.docPadding=Nn.padding,un.padding="0",Nn.padding="0",this.bodyWidth=un.width,this.docWidth=Nn.width,un.width="100%",Nn.width="100%",this.bodyHeight=un.height,this.docHeight=Nn.height,un.height="100%",Nn.height="100%",this.previousBody=[],rt[this.hash].prevElementParent=this.element.parentNode,rt[this.hash].prevNextSibling=this.element.nextSibling,rt[this.hash].prevElementWidth=this.element.style.width,rt[this.hash].prevElementHeight=this.element.style.height,lr=dn.childNodes.length,$n=0;$n<lr;$n++)this.previousBody.push(dn.childNodes[0]),dn.removeChild(dn.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,dn.appendChild(this.toolbar.element),nt.addClass(this.toolbar.element,"fullpage")),nt.addClass(this.element,"fullpage"),dn.appendChild(this.element),this.element.style.height=nt.getWindowSize().y+"px",this.element.style.width=nt.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=nt.getElementSize(this.element).y-nt.getElementSize(this.toolbar.element).y+"px"),rt[this.hash].fullPage=!0,nt.delegate(this,gn)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,un.margin=this.bodyMargin,Nn.margin=this.docMargin,un.padding=this.bodyPadding,Nn.padding=this.docPadding,un.width=this.bodyWidth,Nn.width=this.docWidth,un.height=this.bodyHeight,Nn.height=this.docHeight,dn.removeChild(this.element),lr=this.previousBody.length,$n=0;$n<lr;$n++)dn.appendChild(this.previousBody.shift());nt.removeClass(this.element,"fullpage"),rt[this.hash].prevElementParent.insertBefore(this.element,rt[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(dn.removeChild(this.toolbar.element),nt.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=rt[this.hash].prevElementWidth,this.element.style.height=rt[this.hash].prevElementHeight;var Wn=0,or=function(){nt.setPageScroll(In.pageScroll);var dr=nt.getPageScroll();Wn++,Wn<10&&(dr.x!==In.pageScroll.x||dr.y!==In.pageScroll.y)&&nt.requestAnimationFrame(or)};nt.requestAnimationFrame(or),rt[this.hash].fullPage=!1,nt.delegate(this,Vn)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:en}),this},setFullScreen:function(en){var dn=this;if(!nt.supportsFullScreen)return this.setFullPage(en);if(nt.isFullScreen()===en)return this;var un={fullScreen:en,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",un),un.preventDefaultAction)return this;if(en){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Nn=function(){var In=nt.isFullScreen();In||(nt.removeEvent(document,nt.fullScreenEventName,Nn),nt.removeEvent(document,nt.fullScreenErrorEventName,Nn),dn.setFullPage(!1),dn.isFullPage()&&(dn.element.style.width=dn.fullPageStyleWidth,dn.element.style.height=dn.fullPageStyleHeight)),dn.navigator&&dn.viewport&&setTimeout(function(){dn.navigator.update(dn.viewport)}),dn.raiseEvent("full-screen",{fullScreen:In})};nt.addEvent(document,nt.fullScreenEventName,Nn),nt.addEvent(document,nt.fullScreenErrorEventName,Nn),nt.requestFullScreen(document.body)}else nt.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(en){return this.container.style.visibility=en?"":"hidden",this.raiseEvent("visible",{visible:en}),this},addTiledImage:function(en){nt.console.assert(en,"[Viewer.addTiledImage] options is required"),nt.console.assert(en.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),nt.console.assert(!en.replace||en.index>-1&&en.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var dn=this;en.replace&&(en.replaceItem=dn.world.getItemAt(en.index)),this._hideMessage(),en.placeholderFillStyle===void 0&&(en.placeholderFillStyle=this.placeholderFillStyle),en.opacity===void 0&&(en.opacity=this.opacity),en.preload===void 0&&(en.preload=this.preload),en.compositeOperation===void 0&&(en.compositeOperation=this.compositeOperation),en.crossOriginPolicy===void 0&&(en.crossOriginPolicy=en.tileSource.crossOriginPolicy!==void 0?en.tileSource.crossOriginPolicy:this.crossOriginPolicy),en.ajaxWithCredentials===void 0&&(en.ajaxWithCredentials=this.ajaxWithCredentials),en.loadTilesWithAjax===void 0&&(en.loadTilesWithAjax=this.loadTilesWithAjax),en.ajaxHeaders===void 0||en.ajaxHeaders===null?en.ajaxHeaders=this.ajaxHeaders:nt.isPlainObject(en.ajaxHeaders)&&nt.isPlainObject(this.ajaxHeaders)&&(en.ajaxHeaders=nt.extend({},this.ajaxHeaders,en.ajaxHeaders));var un={options:en};function Nn($n){for(var Qn=0;Qn<dn._loadQueue.length;Qn++)if(dn._loadQueue[Qn]===un){dn._loadQueue.splice(Qn,1);break}dn._loadQueue.length===0&&In(un),dn.raiseEvent("add-item-failed",$n),en.error&&en.error($n)}function In($n){dn.collectionMode&&(dn.world.arrange({immediately:$n.options.collectionImmediately,rows:dn.collectionRows,columns:dn.collectionColumns,layout:dn.collectionLayout,tileSize:dn.collectionTileSize,tileMargin:dn.collectionTileMargin}),dn.world.setAutoRefigureSizes(!0))}if(nt.isArray(en.tileSource)){setTimeout(function(){Nn({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:en.tileSource,options:en})});return}this._loadQueue.push(un);function lr(){for(var $n,Qn,Wn;dn._loadQueue.length&&($n=dn._loadQueue[0],!!$n.tileSource);){if(dn._loadQueue.splice(0,1),$n.options.replace){var or=dn.world.getIndexOfItem($n.options.replaceItem);or!=-1&&($n.options.index=or),dn.world.removeItem($n.options.replaceItem)}Qn=new nt.TiledImage({viewer:dn,source:$n.tileSource,viewport:dn.viewport,drawer:dn.drawer,tileCache:dn.tileCache,imageLoader:dn.imageLoader,x:$n.options.x,y:$n.options.y,width:$n.options.width,height:$n.options.height,fitBounds:$n.options.fitBounds,fitBoundsPlacement:$n.options.fitBoundsPlacement,clip:$n.options.clip,placeholderFillStyle:$n.options.placeholderFillStyle,opacity:$n.options.opacity,preload:$n.options.preload,degrees:$n.options.degrees,compositeOperation:$n.options.compositeOperation,springStiffness:dn.springStiffness,animationTime:dn.animationTime,minZoomImageRatio:dn.minZoomImageRatio,wrapHorizontal:dn.wrapHorizontal,wrapVertical:dn.wrapVertical,immediateRender:dn.immediateRender,blendTime:dn.blendTime,alwaysBlend:dn.alwaysBlend,minPixelRatio:dn.minPixelRatio,smoothTileEdgesMinZoom:dn.smoothTileEdgesMinZoom,iOSDevice:dn.iOSDevice,crossOriginPolicy:$n.options.crossOriginPolicy,ajaxWithCredentials:$n.options.ajaxWithCredentials,loadTilesWithAjax:$n.options.loadTilesWithAjax,ajaxHeaders:$n.options.ajaxHeaders,debugMode:dn.debugMode}),dn.collectionMode&&dn.world.setAutoRefigureSizes(!1),dn.world.addItem(Qn,{index:$n.options.index}),dn._loadQueue.length===0&&In($n),dn.world.getItemCount()===1&&!dn.preserveViewport&&dn.viewport.goHome(!0),dn.navigator&&(Wn=nt.extend({},$n.options,{replace:!1,originalTiledImage:Qn,tileSource:$n.tileSource}),dn.navigator.addTiledImage(Wn)),$n.options.success&&$n.options.success({item:Qn})}}bt(this,en.tileSource,en,function($n){un.tileSource=$n,lr()},function($n){$n.options=en,Nn($n),lr()})},addSimpleImage:function(en){nt.console.assert(en,"[Viewer.addSimpleImage] options is required"),nt.console.assert(en.url,"[Viewer.addSimpleImage] options.url is required");var dn=nt.extend({},en,{tileSource:{type:"image",url:en.url}});delete dn.url,this.addTiledImage(dn)},addLayer:function(en){var dn=this;nt.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var un=nt.extend({},en,{success:function(Nn){dn.raiseEvent("add-layer",{options:en,drawer:Nn.item})},error:function(Nn){dn.raiseEvent("add-layer-failed",Nn)}});return this.addTiledImage(un),this},getLayerAtLevel:function(en){return nt.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(en)},getLevelOfLayer:function(en){return nt.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(en)},getLayersCount:function(){return nt.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(en,dn){return nt.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(en,dn)},removeLayer:function(en){return nt.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(en)},forceRedraw:function(){return rt[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var en=nt.delegate(this,Ht),dn=nt.delegate(this,Wt),un=nt.delegate(this,Ln),Nn=nt.delegate(this,ir),In=this.navImages,lr=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(lr=!1),this.previousButton=new nt.Button({element:this.previousButton?nt.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.PreviousPage"),srcRest:mr(this.prefixUrl,In.previous.REST),srcGroup:mr(this.prefixUrl,In.previous.GROUP),srcHover:mr(this.prefixUrl,In.previous.HOVER),srcDown:mr(this.prefixUrl,In.previous.DOWN),onRelease:Nn,onFocus:en,onBlur:dn}),this.nextButton=new nt.Button({element:this.nextButton?nt.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.NextPage"),srcRest:mr(this.prefixUrl,In.next.REST),srcGroup:mr(this.prefixUrl,In.next.GROUP),srcHover:mr(this.prefixUrl,In.next.HOVER),srcDown:mr(this.prefixUrl,In.next.DOWN),onRelease:un,onFocus:en,onBlur:dn}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),lr&&(this.paging=new nt.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:nt.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var en=nt.delegate(this,Er),dn=nt.delegate(this,rr),un=nt.delegate(this,gr),Nn=nt.delegate(this,Mr),In=nt.delegate(this,Or),lr=nt.delegate(this,sr),$n=nt.delegate(this,ii),Qn=nt.delegate(this,ar),Wn=nt.delegate(this,fr),or=nt.delegate(this,wr),dr=nt.delegate(this,Ht),kr=nt.delegate(this,Wt),br=this.navImages,_r=[],hi=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(hi=!1),this.showZoomControl&&(_r.push(this.zoomInButton=new nt.Button({element:this.zoomInButton?nt.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomIn"),srcRest:mr(this.prefixUrl,br.zoomIn.REST),srcGroup:mr(this.prefixUrl,br.zoomIn.GROUP),srcHover:mr(this.prefixUrl,br.zoomIn.HOVER),srcDown:mr(this.prefixUrl,br.zoomIn.DOWN),onPress:en,onRelease:dn,onClick:un,onEnter:en,onExit:dn,onFocus:dr,onBlur:kr})),_r.push(this.zoomOutButton=new nt.Button({element:this.zoomOutButton?nt.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomOut"),srcRest:mr(this.prefixUrl,br.zoomOut.REST),srcGroup:mr(this.prefixUrl,br.zoomOut.GROUP),srcHover:mr(this.prefixUrl,br.zoomOut.HOVER),srcDown:mr(this.prefixUrl,br.zoomOut.DOWN),onPress:Nn,onRelease:dn,onClick:In,onEnter:Nn,onExit:dn,onFocus:dr,onBlur:kr}))),this.showHomeControl&&_r.push(this.homeButton=new nt.Button({element:this.homeButton?nt.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Home"),srcRest:mr(this.prefixUrl,br.home.REST),srcGroup:mr(this.prefixUrl,br.home.GROUP),srcHover:mr(this.prefixUrl,br.home.HOVER),srcDown:mr(this.prefixUrl,br.home.DOWN),onRelease:lr,onFocus:dr,onBlur:kr})),this.showFullPageControl&&_r.push(this.fullPageButton=new nt.Button({element:this.fullPageButton?nt.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.FullPage"),srcRest:mr(this.prefixUrl,br.fullpage.REST),srcGroup:mr(this.prefixUrl,br.fullpage.GROUP),srcHover:mr(this.prefixUrl,br.fullpage.HOVER),srcDown:mr(this.prefixUrl,br.fullpage.DOWN),onRelease:$n,onFocus:dr,onBlur:kr})),this.showRotationControl&&(_r.push(this.rotateLeftButton=new nt.Button({element:this.rotateLeftButton?nt.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateLeft"),srcRest:mr(this.prefixUrl,br.rotateleft.REST),srcGroup:mr(this.prefixUrl,br.rotateleft.GROUP),srcHover:mr(this.prefixUrl,br.rotateleft.HOVER),srcDown:mr(this.prefixUrl,br.rotateleft.DOWN),onRelease:Qn,onFocus:dr,onBlur:kr})),_r.push(this.rotateRightButton=new nt.Button({element:this.rotateRightButton?nt.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateRight"),srcRest:mr(this.prefixUrl,br.rotateright.REST),srcGroup:mr(this.prefixUrl,br.rotateright.GROUP),srcHover:mr(this.prefixUrl,br.rotateright.HOVER),srcDown:mr(this.prefixUrl,br.rotateright.DOWN),onRelease:Wn,onFocus:dr,onBlur:kr}))),this.showFlipControl&&_r.push(this.flipButton=new nt.Button({element:this.flipButton?nt.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Flip"),srcRest:mr(this.prefixUrl,br.flip.REST),srcGroup:mr(this.prefixUrl,br.flip.GROUP),srcHover:mr(this.prefixUrl,br.flip.HOVER),srcDown:mr(this.prefixUrl,br.flip.DOWN),onRelease:or,onFocus:dr,onBlur:kr})),hi&&(this.buttons=new nt.ButtonGroup({buttons:_r,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",nt.delegate(this,Ar)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(en){return this.tileSources&&en>=0&&en<this.tileSources.length&&(this._sequenceIndex=en,this._updateSequenceButtons(en),this.open(this.tileSources[en]),this.referenceStrip&&this.referenceStrip.setFocus(en),this.raiseEvent("page",{page:en})),this},addOverlay:function(en,dn,un,Nn){var In;if(nt.isPlainObject(en)?In=en:In={element:en,location:dn,placement:un,onDraw:Nn},en=nt.getElement(In.element),Tt(this.currentOverlays,en)>=0)return this;var lr=wt(this,In);return this.currentOverlays.push(lr),lr.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:en,location:In.location,placement:In.placement}),this},updateOverlay:function(en,dn,un){var Nn;return en=nt.getElement(en),Nn=Tt(this.currentOverlays,en),Nn>=0&&(this.currentOverlays[Nn].update(dn,un),rt[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:en,location:dn,placement:un})),this},removeOverlay:function(en){var dn;return en=nt.getElement(en),dn=Tt(this.currentOverlays,en),dn>=0&&(this.currentOverlays[dn].destroy(),this.currentOverlays.splice(dn,1),rt[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:en})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return rt[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(en){var dn;return en=nt.getElement(en),dn=Tt(this.currentOverlays,en),dn>=0?this.currentOverlays[dn]:null},_updateSequenceButtons:function(en){this.nextButton&&(!this.tileSources||this.tileSources.length-1===en?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(en>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(en){this._hideMessage();var dn=nt.makeNeutralElement("div");dn.appendChild(document.createTextNode(en)),this.messageDiv=nt.makeCenteredNode(dn),nt.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var en=this.messageDiv;en&&(en.parentNode.removeChild(en),delete this.messageDiv)},gestureSettingsByDeviceType:function(en){switch(en){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var en,dn=this.currentOverlays.length;for(en=0;en<dn;en++)this.currentOverlays[en].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new nt.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else nt.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function vt(en){return en=nt.getElement(en),new nt.Point(en.clientWidth===0?1:en.clientWidth,en.clientHeight===0?1:en.clientHeight)}function bt(en,dn,un,Nn,In){var lr=en;if(nt.type(dn)=="string"){if(dn.match(/^\s*<.*>\s*$/))dn=nt.parseXml(dn);else if(dn.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var $n=nt.parseJSON(dn);dn=$n}catch{}}function Qn(Wn,or){Wn.ready?Nn(Wn):(Wn.addHandler("ready",function(){Nn(Wn)}),Wn.addHandler("open-failed",function(dr){In({message:dr.message,source:or})}))}setTimeout(function(){if(nt.type(dn)=="string")dn=new nt.TileSource({url:dn,crossOriginPolicy:un.crossOriginPolicy!==void 0?un.crossOriginPolicy:en.crossOriginPolicy,ajaxWithCredentials:en.ajaxWithCredentials,ajaxHeaders:en.ajaxHeaders,useCanvas:en.useCanvas,success:function(kr){Nn(kr.tileSource)}}),dn.addHandler("open-failed",function(kr){In(kr)});else if(nt.isPlainObject(dn)||dn.nodeType)if(dn.crossOriginPolicy===void 0&&(un.crossOriginPolicy!==void 0||en.crossOriginPolicy!==void 0)&&(dn.crossOriginPolicy=un.crossOriginPolicy!==void 0?un.crossOriginPolicy:en.crossOriginPolicy),dn.ajaxWithCredentials===void 0&&(dn.ajaxWithCredentials=en.ajaxWithCredentials),dn.useCanvas===void 0&&(dn.useCanvas=en.useCanvas),nt.isFunction(dn.getTileUrl)){var Wn=new nt.TileSource(dn);Wn.getTileUrl=dn.getTileUrl,Nn(Wn)}else{var or=nt.TileSource.determineType(lr,dn);if(!or){In({message:"Unable to load TileSource",source:dn});return}var dr=or.prototype.configure.apply(lr,[dn]);Qn(new or(dr),dn)}else Qn(dn,dn)})}function wt(en,dn){if(dn instanceof nt.Overlay)return dn;var un=null;if(dn.element)un=nt.getElement(dn.element);else{var Nn=dn.id?dn.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);un=nt.getElement(dn.id),un||(un=document.createElement("a"),un.href="#/overlay/"+Nn),un.id=Nn,nt.addClass(un,dn.className?dn.className:"openseadragon-overlay")}var In=dn.location,lr=dn.width,$n=dn.height;if(!In){var Qn=dn.x,Wn=dn.y;if(dn.px!==void 0){var or=en.viewport.imageToViewportRectangle(new nt.Rect(dn.px,dn.py,lr||0,$n||0));Qn=or.x,Wn=or.y,lr=lr!==void 0?or.width:void 0,$n=$n!==void 0?or.height:void 0}In=new nt.Point(Qn,Wn)}var dr=dn.placement;return dr&&nt.type(dr)==="string"&&(dr=nt.Placement[dn.placement.toUpperCase()]),new nt.Overlay({element:un,location:In,placement:dr,onDraw:dn.onDraw,checkResize:dn.checkResize,width:lr,height:$n,rotationMode:dn.rotationMode})}function Tt(en,dn){var un;for(un=en.length-1;un>=0;un--)if(en[un].element===dn)return un;return-1}function kt(en,dn){return nt.requestAnimationFrame(function(){dn(en)})}function Lt(en){nt.requestAnimationFrame(function(){Nt(en)})}function Mt(en){!en.autoHideControls||(en.controlsShouldFade=!0,en.controlsFadeBeginTime=nt.now()+en.controlsFadeDelay,window.setTimeout(function(){Lt(en)},en.controlsFadeDelay))}function Nt(en){var dn,un,Nn,In;if(en.controlsShouldFade){for(dn=nt.now(),un=dn-en.controlsFadeBeginTime,Nn=1-un/en.controlsFadeLength,Nn=Math.min(1,Nn),Nn=Math.max(0,Nn),In=en.controls.length-1;In>=0;In--)en.controls[In].autoFade&&en.controls[In].setOpacity(Nn);Nn>0&&Lt(en)}}function zt(en){var dn;for(en.controlsShouldFade=!1,dn=en.controls.length-1;dn>=0;dn--)en.controls[dn].setOpacity(1)}function Ht(){zt(this)}function Wt(){Mt(this)}function Zt(en){var dn={originalEvent:en.originalEvent,preventDefaultAction:en.preventDefaultAction,preventVerticalPan:en.preventVerticalPan,preventHorizontalPan:en.preventHorizontalPan};if(this.raiseEvent("canvas-key",dn),!dn.preventDefaultAction&&!en.ctrl&&!en.alt&&!en.meta)switch(en.keyCode){case 38:return dn.preventVerticalPan||(en.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return dn.preventVerticalPan||(en.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function tn(en){var dn={originalEvent:en.originalEvent,preventDefaultAction:en.preventDefaultAction,preventVerticalPan:en.preventVerticalPan,preventHorizontalPan:en.preventHorizontalPan};if(this.raiseEvent("canvas-key",dn),!dn.preventDefaultAction&&!en.ctrl&&!en.alt&&!en.meta)switch(en.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return dn.preventVerticalPan||(en.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return dn.preventVerticalPan||(en.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function Yt(en){var dn,un=document.activeElement==this.canvas;un||this.canvas.focus(),this.viewport.flipped&&(en.position.x=this.viewport.getContainerSize().x-en.position.x);var Nn={tracker:en.eventSource,position:en.position,quick:en.quick,shift:en.shift,originalEvent:en.originalEvent,preventDefaultAction:en.preventDefaultAction};this.raiseEvent("canvas-click",Nn),!Nn.preventDefaultAction&&this.viewport&&en.quick&&(dn=this.gestureSettingsByDeviceType(en.pointerType),dn.clickToZoom&&(this.viewport.zoomBy(en.shift?1/this.zoomPerClick:this.zoomPerClick,dn.zoomToRefPoint?this.viewport.pointFromPixel(en.position,!0):null),this.viewport.applyConstraints()))}function nn(en){var dn,un={tracker:en.eventSource,position:en.position,shift:en.shift,originalEvent:en.originalEvent,preventDefaultAction:en.preventDefaultAction};this.raiseEvent("canvas-double-click",un),!un.preventDefaultAction&&this.viewport&&(dn=this.gestureSettingsByDeviceType(en.pointerType),dn.dblClickToZoom&&(this.viewport.zoomBy(en.shift?1/this.zoomPerClick:this.zoomPerClick,dn.zoomToRefPoint?this.viewport.pointFromPixel(en.position,!0):null),this.viewport.applyConstraints()))}function rn(en){var dn,un={tracker:en.eventSource,position:en.position,delta:en.delta,speed:en.speed,direction:en.direction,shift:en.shift,originalEvent:en.originalEvent,preventDefaultAction:en.preventDefaultAction};if(this.raiseEvent("canvas-drag",un),!un.preventDefaultAction&&this.viewport){if(dn=this.gestureSettingsByDeviceType(en.pointerType),this.panHorizontal||(en.delta.x=0),this.panVertical||(en.delta.y=0),this.viewport.flipped&&(en.delta.x=-en.delta.x),this.constrainDuringPan){var Nn=this.viewport.deltaPointsFromPixels(en.delta.negate());this.viewport.centerSpringX.target.value+=Nn.x,this.viewport.centerSpringY.target.value+=Nn.y;var In=this.viewport.getBounds(),lr=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Nn.x,this.viewport.centerSpringY.target.value-=Nn.y,In.x!=lr.x&&(en.delta.x=0),In.y!=lr.y&&(en.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(en.delta.negate()),dn.flickEnabled&&!this.constrainDuringPan)}}function ln(en){if(!en.preventDefaultAction&&this.viewport){var dn=this.gestureSettingsByDeviceType(en.pointerType);if(dn.flickEnabled&&en.speed>=dn.flickMinSpeed){var un=0;this.panHorizontal&&(un=dn.flickMomentum*en.speed*Math.cos(en.direction));var Nn=0;this.panVertical&&(Nn=dn.flickMomentum*en.speed*Math.sin(en.direction));var In=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),lr=this.viewport.pointFromPixel(new nt.Point(In.x-un,In.y-Nn));this.viewport.panTo(lr,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:en.eventSource,position:en.position,speed:en.speed,direction:en.direction,shift:en.shift,originalEvent:en.originalEvent})}function sn(en){this.raiseEvent("canvas-enter",{tracker:en.eventSource,pointerType:en.pointerType,position:en.position,buttons:en.buttons,pointers:en.pointers,insideElementPressed:en.insideElementPressed,buttonDownAny:en.buttonDownAny,originalEvent:en.originalEvent})}function mn(en){window.location!=window.parent.location&&nt.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:en.eventSource,pointerType:en.pointerType,position:en.position,buttons:en.buttons,pointers:en.pointers,insideElementPressed:en.insideElementPressed,buttonDownAny:en.buttonDownAny,originalEvent:en.originalEvent})}function wn(en){this.raiseEvent("canvas-press",{tracker:en.eventSource,pointerType:en.pointerType,position:en.position,insideElementPressed:en.insideElementPressed,insideElementReleased:en.insideElementReleased,originalEvent:en.originalEvent})}function Cn(en){this.raiseEvent("canvas-release",{tracker:en.eventSource,pointerType:en.pointerType,position:en.position,insideElementPressed:en.insideElementPressed,insideElementReleased:en.insideElementReleased,originalEvent:en.originalEvent})}function An(en){this.raiseEvent("canvas-nonprimary-press",{tracker:en.eventSource,position:en.position,pointerType:en.pointerType,button:en.button,buttons:en.buttons,originalEvent:en.originalEvent})}function Pn(en){this.raiseEvent("canvas-nonprimary-release",{tracker:en.eventSource,position:en.position,pointerType:en.pointerType,button:en.button,buttons:en.buttons,originalEvent:en.originalEvent})}function On(en){var dn,un,Nn,In;if(!en.preventDefaultAction&&this.viewport&&(dn=this.gestureSettingsByDeviceType(en.pointerType),dn.pinchToZoom&&(un=this.viewport.pointFromPixel(en.center,!0),Nn=this.viewport.pointFromPixel(en.lastCenter,!0),In=Nn.minus(un),this.panHorizontal||(In.x=0),this.panVertical||(In.y=0),this.viewport.zoomBy(en.distance/en.lastDistance,un,!0),dn.zoomToRefPoint&&this.viewport.panBy(In,!0),this.viewport.applyConstraints()),dn.pinchRotate)){var lr=Math.atan2(en.gesturePoints[0].currentPos.y-en.gesturePoints[1].currentPos.y,en.gesturePoints[0].currentPos.x-en.gesturePoints[1].currentPos.x),$n=Math.atan2(en.gesturePoints[0].lastPos.y-en.gesturePoints[1].lastPos.y,en.gesturePoints[0].lastPos.x-en.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(lr-$n)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:en.eventSource,gesturePoints:en.gesturePoints,lastCenter:en.lastCenter,center:en.center,lastDistance:en.lastDistance,distance:en.distance,shift:en.shift,originalEvent:en.originalEvent}),!1}function kn(en){var dn,un,Nn,In;if(Nn=nt.now(),In=Nn-this._lastScrollTime,In>this.minScrollDeltaTime){if(this._lastScrollTime=Nn,this.viewport.flipped&&(en.position.x=this.viewport.getContainerSize().x-en.position.x),!en.preventDefaultAction&&this.viewport&&(dn=this.gestureSettingsByDeviceType(en.pointerType),dn.scrollToZoom&&(un=Math.pow(this.zoomPerScroll,en.scroll),this.viewport.zoomBy(un,dn.zoomToRefPoint?this.viewport.pointFromPixel(en.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:en.eventSource,position:en.position,scroll:en.scroll,shift:en.shift,originalEvent:en.originalEvent}),dn&&dn.scrollToZoom)return!1}else if(dn=this.gestureSettingsByDeviceType(en.pointerType),dn&&dn.scrollToZoom)return!1}function gn(en){rt[this.hash].mouseInside=!0,zt(this),this.raiseEvent("container-enter",{tracker:en.eventSource,position:en.position,buttons:en.buttons,pointers:en.pointers,insideElementPressed:en.insideElementPressed,buttonDownAny:en.buttonDownAny,originalEvent:en.originalEvent})}function Vn(en){en.pointers<1&&(rt[this.hash].mouseInside=!1,rt[this.hash].animating||Mt(this)),this.raiseEvent("container-exit",{tracker:en.eventSource,position:en.position,buttons:en.buttons,pointers:en.pointers,insideElementPressed:en.insideElementPressed,buttonDownAny:en.buttonDownAny,originalEvent:en.originalEvent})}function pn(en){pr(en),en.isOpen()?en._updateRequestId=kt(en,pn):en._updateRequestId=!1}function pr(en){if(!en._opening){if(en.autoResize){var dn=vt(en.container),un=rt[en.hash].prevContainerSize;if(!dn.equals(un)){var Nn=en.viewport;if(en.preserveImageSizeOnResize){var In=un.x/dn.x,lr=Nn.getZoom()*In,$n=Nn.getCenter();Nn.resize(dn,!1),Nn.zoomTo(lr,null,!0),Nn.panTo($n,!0)}else{var Qn=Nn.getBounds();Nn.resize(dn,!0),Nn.fitBoundsWithConstraints(Qn,!0)}rt[en.hash].prevContainerSize=dn,rt[en.hash].forceRedraw=!0}}var Wn=en.viewport.update(),or=en.world.update()||Wn;Wn&&en.raiseEvent("viewport-change"),en.referenceStrip&&(or=en.referenceStrip.update(en.viewport)||or),!rt[en.hash].animating&&or&&(en.raiseEvent("animation-start"),zt(en)),(or||rt[en.hash].forceRedraw||en.world.needsDraw())&&(yn(en),en._drawOverlays(),en.navigator&&en.navigator.update(en.viewport),rt[en.hash].forceRedraw=!1,or&&en.raiseEvent("animation")),rt[en.hash].animating&&!or&&(en.raiseEvent("animation-finish"),rt[en.hash].mouseInside||Mt(en)),rt[en.hash].animating=or}}function yn(en){en.imageLoader.clear(),en.drawer.clear(),en.world.draw(),en.raiseEvent("update-viewport",{})}function mr(en,dn){return en?en+dn:dn}function Er(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=this.zoomPerSecond,rt[this.hash].zooming=!0,vr(this)}function Mr(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=1/this.zoomPerSecond,rt[this.hash].zooming=!0,vr(this)}function rr(){rt[this.hash].zooming=!1}function vr(en){nt.requestAnimationFrame(nt.delegate(en,cr))}function cr(){var en,dn,un;rt[this.hash].zooming&&this.viewport&&(en=nt.now(),dn=en-rt[this.hash].lastZoomTime,un=Math.pow(rt[this.hash].zoomFactor,dn/1e3),this.viewport.zoomBy(un),this.viewport.applyConstraints(),rt[this.hash].lastZoomTime=en,vr(this))}function gr(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Or(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Ar(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function sr(){this.viewport&&this.viewport.goHome()}function ii(){this.isFullPage()&&!nt.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function ar(){if(this.viewport){var en=this.viewport.getRotation();this.viewport.flipped?en=nt.positiveModulo(en+this.rotationIncrement,360):en=nt.positiveModulo(en-this.rotationIncrement,360),this.viewport.setRotation(en)}}function fr(){if(this.viewport){var en=this.viewport.getRotation();this.viewport.flipped?en=nt.positiveModulo(en-this.rotationIncrement,360):en=nt.positiveModulo(en+this.rotationIncrement,360),this.viewport.setRotation(en)}}function wr(){this.viewport.toggleFlip()}function ir(){var en=this._sequenceIndex-1;this.navPrevNextWrap&&en<0&&(en+=this.tileSources.length),this.goToPage(en)}function Ln(){var en=this._sequenceIndex+1;this.navPrevNextWrap&&en>=this.tileSources.length&&(en=0),this.goToPage(en)}}(OpenSeadragon),function(nt){nt.Navigator=function(kt){var Lt=kt.viewer,Mt=this,Nt,zt;kt.id?(this.element=document.getElementById(kt.id),kt.controlOptions={anchor:nt.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(kt.id="navigator-"+nt.now(),this.element=nt.makeNeutralElement("div"),kt.controlOptions={anchor:nt.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:kt.autoFade},kt.position&&(kt.position=="BOTTOM_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_RIGHT:kt.position=="BOTTOM_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_LEFT:kt.position=="TOP_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_RIGHT:kt.position=="TOP_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_LEFT:kt.position=="ABSOLUTE"&&(kt.controlOptions.anchor=nt.ControlAnchor.ABSOLUTE,kt.controlOptions.top=kt.top,kt.controlOptions.left=kt.left,kt.controlOptions.height=kt.height,kt.controlOptions.width=kt.width))),this.element.id=kt.id,this.element.className+=" navigator",kt=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.navigatorSizeRatio},kt,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:kt.autoResize,minZoomImageRatio:1,background:kt.background,opacity:kt.opacity,borderColor:kt.borderColor,displayRegionColor:kt.displayRegionColor}),kt.minPixelRatio=this.minPixelRatio=Lt.minPixelRatio,nt.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new nt.Point(1,1),this.totalBorderWidths=new nt.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),kt.controlOptions.anchor!=nt.ControlAnchor.NONE&&function(Zt,tn){Zt.margin="0px",Zt.border=tn+"px solid "+kt.borderColor,Zt.padding="0px",Zt.background=kt.background,Zt.opacity=kt.opacity,Zt.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=nt.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(Zt,tn){Zt.position="relative",Zt.top="0px",Zt.left="0px",Zt.fontSize="0px",Zt.overflow="hidden",Zt.border=tn+"px solid "+kt.displayRegionColor,Zt.margin="0px",Zt.padding="0px",Zt.background="transparent",Zt.float="left",Zt.cssFloat="left",Zt.styleFloat="left",Zt.zIndex=999999999,Zt.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=nt.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",Lt.addControl(this.element,kt.controlOptions),this._resizeWithViewer=kt.controlOptions.anchor!=nt.ControlAnchor.ABSOLUTE&&kt.controlOptions.anchor!=nt.ControlAnchor.NONE,kt.width&&kt.height?(this.setWidth(kt.width),this.setHeight(kt.height)):this._resizeWithViewer&&(Nt=nt.getElementSize(Lt.element),this.element.style.height=Math.round(Nt.y*kt.sizeRatio)+"px",this.element.style.width=Math.round(Nt.x*kt.sizeRatio)+"px",this.oldViewerSize=Nt,zt=nt.getElementSize(this.element),this.elementArea=zt.x*zt.y),this.oldContainerSize=new nt.Point(0,0),nt.Viewer.apply(this,[kt]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function Ht(Zt){wt(Mt.displayRegionContainer,Zt),wt(Mt.displayRegion,-Zt),Mt.viewport.setRotation(Zt)}if(kt.navigatorRotate){var Wt=kt.viewer.viewport?kt.viewer.viewport.getRotation():kt.viewer.degrees||0;Ht(Wt),kt.viewer.addHandler("rotate",function(Zt){Ht(Zt.degrees)})}this.innerTracker.destroy(),this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),clickHandler:nt.delegate(this,rt),releaseHandler:nt.delegate(this,vt),scrollHandler:nt.delegate(this,bt)}),this.addHandler("reset-size",function(){Mt.viewport&&Mt.viewport.goHome(!0)}),Lt.world.addHandler("item-index-change",function(Zt){window.setTimeout(function(){var tn=Mt.world.getItemAt(Zt.previousIndex);Mt.world.setItemIndex(tn,Zt.newIndex)},1)}),Lt.world.addHandler("remove-item",function(Zt){var tn=Zt.item,Yt=Mt._getMatchingItem(tn);Yt&&Mt.world.removeItem(Yt)}),this.update(Lt.viewport)},nt.extend(nt.Navigator.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{updateSize:function(){if(this.viewport){var kt=new nt.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);kt.equals(this.oldContainerSize)||(this.viewport.resize(kt,!0),this.viewport.goHome(!0),this.oldContainerSize=kt,this.drawer.clear(),this.world.draw())}},setWidth:function(kt){this.width=kt,this.element.style.width=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setHeight:function(kt){this.height=kt,this.element.style.height=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setFlip:function(kt){return this.viewport.setFlip(kt),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(kt){Tt(this.displayRegion,kt),Tt(this.canvas,kt),Tt(this.element,kt)},update:function(kt){var Lt,Mt,Nt,zt,Ht,Wt;if(Lt=nt.getElementSize(this.viewer.element),this._resizeWithViewer&&Lt.x&&Lt.y&&!Lt.equals(this.oldViewerSize)&&(this.oldViewerSize=Lt,this.maintainSizeRatio||!this.elementArea?(Mt=Lt.x*this.sizeRatio,Nt=Lt.y*this.sizeRatio):(Mt=Math.sqrt(this.elementArea*(Lt.x/Lt.y)),Nt=this.elementArea/Mt),this.element.style.width=Math.round(Mt)+"px",this.element.style.height=Math.round(Nt)+"px",this.elementArea||(this.elementArea=Mt*Nt),this.updateSize()),kt&&this.viewport){zt=kt.getBoundsNoRotate(!0),Ht=this.viewport.pixelFromPointNoRotate(zt.getTopLeft(),!1),Wt=this.viewport.pixelFromPointNoRotate(zt.getBottomRight(),!1).minus(this.totalBorderWidths);var Zt=this.displayRegion.style;Zt.display=this.world.getItemCount()?"block":"none",Zt.top=Math.round(Ht.y)+"px",Zt.left=Math.round(Ht.x)+"px";var tn=Math.abs(Ht.x-Wt.x),Yt=Math.abs(Ht.y-Wt.y);Zt.width=Math.round(Math.max(tn,0))+"px",Zt.height=Math.round(Math.max(Yt,0))+"px"}},addTiledImage:function(kt){var Lt=this,Mt=kt.originalTiledImage;delete kt.original;var Nt=nt.extend({},kt,{success:function(zt){var Ht=zt.item;Ht._originalForNavigator=Mt,Lt._matchBounds(Ht,Mt,!0);function Wt(){Lt._matchBounds(Ht,Mt)}function Zt(){Lt._matchOpacity(Ht,Mt)}function tn(){Lt._matchCompositeOperation(Ht,Mt)}Mt.addHandler("bounds-change",Wt),Mt.addHandler("clip-change",Wt),Mt.addHandler("opacity-change",Zt),Mt.addHandler("composite-operation-change",tn)}});return nt.Viewer.prototype.addTiledImage.apply(this,[Nt])},_getMatchingItem:function(kt){for(var Lt=this.world.getItemCount(),Mt,Nt=0;Nt<Lt;Nt++)if(Mt=this.world.getItemAt(Nt),Mt._originalForNavigator===kt)return Mt;return null},_matchBounds:function(kt,Lt,Mt){var Nt=Lt.getBoundsNoRotate();kt.setPosition(Nt.getTopLeft(),Mt),kt.setWidth(Nt.width,Mt),kt.setRotation(Lt.getRotation(),Mt),kt.setClip(Lt.getClip())},_matchOpacity:function(kt,Lt){kt.setOpacity(Lt.opacity)},_matchCompositeOperation:function(kt,Lt){kt.setCompositeOperation(Lt.compositeOperation)}});function rt(kt){var Lt={tracker:kt.eventSource,position:kt.position,quick:kt.quick,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",Lt),!Lt.preventDefaultAction&&kt.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(kt.position.x=this.viewport.getContainerSize().x-kt.position.x);var Mt=this.viewport.pointFromPixel(kt.position);this.panVertical?this.panHorizontal||(Mt.x=this.viewer.viewport.getCenter(!0).x):Mt.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(Mt),this.viewer.viewport.applyConstraints()}}function it(kt){var Lt={tracker:kt.eventSource,position:kt.position,delta:kt.delta,speed:kt.speed,direction:kt.direction,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",Lt),!Lt.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(kt.delta.x=0),this.panVertical||(kt.delta.y=0),this.viewer.viewport.flipped&&(kt.delta.x=-kt.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(kt.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function vt(kt){kt.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function bt(kt){return this.viewer.raiseEvent("navigator-scroll",{tracker:kt.eventSource,position:kt.position,scroll:kt.scroll,shift:kt.shift,originalEvent:kt.originalEvent}),!1}function wt(kt,Lt){Tt(kt,"rotate("+Lt+"deg)")}function Tt(kt,Lt){kt.style.webkitTransform=Lt,kt.style.mozTransform=Lt,kt.style.msTransform=Lt,kt.style.oTransform=Lt,kt.style.transform=Lt}}(OpenSeadragon),function(nt){var rt={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};nt.extend(nt,{getString:function(it){var vt=it.split("."),bt=null,wt=arguments,Tt=rt,kt;for(kt=0;kt<vt.length-1;kt++)Tt=Tt[vt[kt]]||{};return bt=Tt[vt[kt]],typeof bt!="string"&&(nt.console.log("Untranslated source string:",it),bt=""),bt.replace(/\{\d+\}/g,function(Lt){var Mt=parseInt(Lt.match(/\d+/),10)+1;return Mt<wt.length?wt[Mt]:""})},setString:function(it,vt){var bt=it.split("."),wt=rt,Tt;for(Tt=0;Tt<bt.length-1;Tt++)wt[bt[Tt]]||(wt[bt[Tt]]={}),wt=wt[bt[Tt]];wt[bt[Tt]]=vt}})}(OpenSeadragon),function(nt){nt.Point=function(rt,it){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0},nt.Point.prototype={clone:function(){return new nt.Point(this.x,this.y)},plus:function(rt){return new nt.Point(this.x+rt.x,this.y+rt.y)},minus:function(rt){return new nt.Point(this.x-rt.x,this.y-rt.y)},times:function(rt){return new nt.Point(this.x*rt,this.y*rt)},divide:function(rt){return new nt.Point(this.x/rt,this.y/rt)},negate:function(){return new nt.Point(-this.x,-this.y)},distanceTo:function(rt){return Math.sqrt(Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2))},squaredDistanceTo:function(rt){return Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2)},apply:function(rt){return new nt.Point(rt(this.x),rt(this.y))},equals:function(rt){return rt instanceof nt.Point&&this.x===rt.x&&this.y===rt.y},rotate:function(rt,it){it=it||new nt.Point(0,0);var vt,bt;if(rt%90===0){var wt=nt.positiveModulo(rt,360);switch(wt){case 0:vt=1,bt=0;break;case 90:vt=0,bt=1;break;case 180:vt=-1,bt=0;break;case 270:vt=0,bt=-1;break}}else{var Tt=rt*Math.PI/180;vt=Math.cos(Tt),bt=Math.sin(Tt)}var kt=vt*(this.x-it.x)-bt*(this.y-it.y)+it.x,Lt=bt*(this.x-it.x)+vt*(this.y-it.y)+it.y;return new nt.Point(kt,Lt)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(nt){nt.TileSource=function(it,vt,bt,wt,Tt,kt){var Lt=this,Mt=arguments,Nt,zt;if(nt.isPlainObject(it)?Nt=it:Nt={width:Mt[0],height:Mt[1],tileSize:Mt[2],tileOverlap:Mt[3],minLevel:Mt[4],maxLevel:Mt[5]},nt.EventSource.call(this),nt.extend(!0,this,Nt),!this.success){for(zt=0;zt<arguments.length;zt++)if(nt.isFunction(arguments[zt])){this.success=arguments[zt];break}}this.success&&this.addHandler("ready",function(Ht){Lt.success(Ht)}),nt.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new nt.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=Nt.width&&Nt.height?Nt.width/Nt.height:1,this.dimensions=new nt.Point(Nt.width,Nt.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=Nt.tileOverlap?Nt.tileOverlap:0,this.minLevel=Nt.minLevel?Nt.minLevel:0,this.maxLevel=Nt.maxLevel!==void 0&&Nt.maxLevel!==null?Nt.maxLevel:Nt.width&&Nt.height?Math.ceil(Math.log(Math.max(Nt.width,Nt.height))/Math.log(2)):0,this.success&&nt.isFunction(this.success)&&this.success(this))},nt.TileSource.prototype={getTileSize:function(it){return nt.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(it){return this._tileWidth?this._tileWidth:this.getTileSize(it)},getTileHeight:function(it){return this._tileHeight?this._tileHeight:this.getTileSize(it)},getLevelScale:function(it){var vt={},bt;for(bt=0;bt<=this.maxLevel;bt++)vt[bt]=1/Math.pow(2,this.maxLevel-bt);return this.getLevelScale=function(wt){return vt[wt]},this.getLevelScale(it)},getNumTiles:function(it){var vt=this.getLevelScale(it),bt=Math.ceil(vt*this.dimensions.x/this.getTileWidth(it)),wt=Math.ceil(vt*this.dimensions.y/this.getTileHeight(it));return new nt.Point(bt,wt)},getPixelRatio:function(it){var vt=this.dimensions.times(this.getLevelScale(it)),bt=1/vt.x,wt=1/vt.y;return new nt.Point(bt,wt)},getClosestLevel:function(){var it,vt;for(it=this.minLevel+1;it<=this.maxLevel&&(vt=this.getNumTiles(it),!(vt.x>1||vt.y>1));it++);return it-1},getTileAtPoint:function(it,vt){var bt=vt.x>=0&&vt.x<=1&&vt.y>=0&&vt.y<=1/this.aspectRatio;nt.console.assert(bt,"[TileSource.getTileAtPoint] must be called with a valid point.");var wt=this.dimensions.x*this.getLevelScale(it),Tt=vt.x*wt,kt=vt.y*wt,Lt=Math.floor(Tt/this.getTileWidth(it)),Mt=Math.floor(kt/this.getTileHeight(it));vt.x>=1&&(Lt=this.getNumTiles(it).x-1);var Nt=1e-15;return vt.y>=1/this.aspectRatio-Nt&&(Mt=this.getNumTiles(it).y-1),new nt.Point(Lt,Mt)},getTileBounds:function(it,vt,bt,wt){var Tt=this.dimensions.times(this.getLevelScale(it)),kt=this.getTileWidth(it),Lt=this.getTileHeight(it),Mt=vt===0?0:kt*vt-this.tileOverlap,Nt=bt===0?0:Lt*bt-this.tileOverlap,zt=kt+(vt===0?1:2)*this.tileOverlap,Ht=Lt+(bt===0?1:2)*this.tileOverlap,Wt=1/Tt.x;return zt=Math.min(zt,Tt.x-Mt),Ht=Math.min(Ht,Tt.y-Nt),wt?new nt.Rect(0,0,zt,Ht):new nt.Rect(Mt*Wt,Nt*Wt,zt*Wt,Ht*Wt)},getImageInfo:function(it){var vt=this,bt,wt,Tt,kt,Lt,Mt,Nt;it&&(Lt=it.split("/"),Mt=Lt[Lt.length-1],Nt=Mt.lastIndexOf("."),Nt>-1&&(Lt[Lt.length-1]=Mt.slice(0,Nt))),wt=function(zt){typeof zt=="string"&&(zt=nt.parseXml(zt));var Ht=nt.TileSource.determineType(vt,zt,it);if(!Ht){vt.raiseEvent("open-failed",{message:"Unable to load TileSource",source:it});return}kt=Ht.prototype.configure.apply(vt,[zt,it]),kt.ajaxWithCredentials===void 0&&(kt.ajaxWithCredentials=vt.ajaxWithCredentials),Tt=new Ht(kt),vt.ready=!0,vt.raiseEvent("ready",{tileSource:Tt})},it.match(/\.js$/)?(bt=it.split("/").pop().replace(".js",""),nt.jsonp({url:it,async:!1,callbackName:bt,callback:wt})):nt.makeAjaxRequest({url:it,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(zt){var Ht=rt(zt);wt(Ht)},error:function(zt,Ht){var Wt;try{Wt="HTTP "+zt.status+" attempting to load TileSource"}catch{var Zt;typeof Ht>"u"||!Ht.toString?Zt="Unknown error":Zt=Ht.toString(),Wt=Zt+" attempting to load TileSource"}vt.raiseEvent("open-failed",{message:Wt,source:it})}})},supports:function(it,vt){return!1},configure:function(it,vt){throw new Error("Method not implemented.")},getTileUrl:function(it,vt,bt){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(it,vt,bt){return{}},tileExists:function(it,vt,bt){var wt=this.getNumTiles(it);return it>=this.minLevel&&it<=this.maxLevel&&vt>=0&&bt>=0&&vt<wt.x&&bt<wt.y}},nt.extend(!0,nt.TileSource.prototype,nt.EventSource.prototype);function rt(it){var vt=it.responseText,bt=it.status,wt,Tt;if(it){if(it.status!==200&&it.status!==0)throw bt=it.status,wt=bt==404?"Not Found":it.statusText,new Error(nt.getString("Errors.Status",bt,wt))}else throw new Error(nt.getString("Errors.Security"));if(vt.match(/\s*<.*/))try{Tt=it.responseXML&&it.responseXML.documentElement?it.responseXML:nt.parseXml(vt)}catch{Tt=it.responseText}else if(vt.match(/\s*[\{\[].*/))try{Tt=nt.parseJSON(vt)}catch{Tt=vt}else Tt=vt;return Tt}nt.TileSource.determineType=function(it,vt,bt){var wt;for(wt in OpenSeadragon)if(wt.match(/.+TileSource$/)&&nt.isFunction(OpenSeadragon[wt])&&nt.isFunction(OpenSeadragon[wt].prototype.supports)&&OpenSeadragon[wt].prototype.supports.call(it,vt,bt))return OpenSeadragon[wt];nt.console.error("No TileSource was able to open %s %s",bt,vt)}}(OpenSeadragon),function(nt){nt.DziTileSource=function(vt,bt,wt,Tt,kt,Lt,Mt,Nt,zt){var Ht,Wt,Zt,tn;if(nt.isPlainObject(vt)?tn=vt:tn={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=tn.tilesUrl,this.fileFormat=tn.fileFormat,this.displayRects=tn.displayRects,this.displayRects)for(Ht=this.displayRects.length-1;Ht>=0;Ht--)for(Wt=this.displayRects[Ht],Zt=Wt.minLevel;Zt<=Wt.maxLevel;Zt++)this._levelRects[Zt]||(this._levelRects[Zt]=[]),this._levelRects[Zt].push(Wt);nt.TileSource.apply(this,[tn])},nt.extend(nt.DziTileSource.prototype,nt.TileSource.prototype,{supports:function(vt,bt){var wt;return vt.Image?wt=vt.Image.xmlns:vt.documentElement&&(vt.documentElement.localName=="Image"||vt.documentElement.tagName=="Image")&&(wt=vt.documentElement.namespaceURI),wt=(wt||"").toLowerCase(),wt.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||wt.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(vt,bt){var wt;return nt.isPlainObject(vt)?wt=it(this,vt):wt=rt(this,vt),bt&&!wt.tilesUrl&&(wt.tilesUrl=bt.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),bt.search(/\.(dzi|xml|js)\?/)!=-1?wt.queryParams=bt.match(/\?.*/):wt.queryParams=""),wt},getTileUrl:function(vt,bt,wt){return[this.tilesUrl,vt,"/",bt,"_",wt,".",this.fileFormat,this.queryParams].join("")},tileExists:function(vt,bt,wt){var Tt=this._levelRects[vt],kt,Lt,Mt,Nt,zt,Ht,Wt;if(this.minLevel&&vt<this.minLevel||this.maxLevel&&vt>this.maxLevel)return!1;if(!Tt||!Tt.length)return!0;for(Wt=Tt.length-1;Wt>=0;Wt--)if(kt=Tt[Wt],!(vt<kt.minLevel||vt>kt.maxLevel)&&(Lt=this.getLevelScale(vt),Mt=kt.x*Lt,Nt=kt.y*Lt,zt=Mt+kt.width*Lt,Ht=Nt+kt.height*Lt,Mt=Math.floor(Mt/this._tileWidth),Nt=Math.floor(Nt/this._tileWidth),zt=Math.ceil(zt/this._tileWidth),Ht=Math.ceil(Ht/this._tileWidth),Mt<=bt&&bt<zt&&Nt<=wt&&wt<Ht))return!0;return!1}});function rt(vt,bt){if(!bt||!bt.documentElement)throw new Error(nt.getString("Errors.Xml"));var wt=bt.documentElement,Tt=wt.localName||wt.tagName,kt=bt.documentElement.namespaceURI,Lt=null,Mt=[],Nt,zt,Ht,Wt,Zt;if(Tt=="Image")try{if(Wt=wt.getElementsByTagName("Size")[0],Wt===void 0&&(Wt=wt.getElementsByTagNameNS(kt,"Size")[0]),Lt={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:wt.getAttribute("Url"),Format:wt.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(wt.getAttribute("Overlap"),10),TileSize:parseInt(wt.getAttribute("TileSize"),10),Size:{Height:parseInt(Wt.getAttribute("Height"),10),Width:parseInt(Wt.getAttribute("Width"),10)}}},!nt.imageFormatSupported(Lt.Image.Format))throw new Error(nt.getString("Errors.ImageFormat",Lt.Image.Format.toUpperCase()));for(Nt=wt.getElementsByTagName("DisplayRect"),Nt===void 0&&(Nt=wt.getElementsByTagNameNS(kt,"DisplayRect")[0]),Zt=0;Zt<Nt.length;Zt++)zt=Nt[Zt],Ht=zt.getElementsByTagName("Rect")[0],Ht===void 0&&(Ht=zt.getElementsByTagNameNS(kt,"Rect")[0]),Mt.push({Rect:{X:parseInt(Ht.getAttribute("X"),10),Y:parseInt(Ht.getAttribute("Y"),10),Width:parseInt(Ht.getAttribute("Width"),10),Height:parseInt(Ht.getAttribute("Height"),10),MinLevel:parseInt(zt.getAttribute("MinLevel"),10),MaxLevel:parseInt(zt.getAttribute("MaxLevel"),10)}});return Mt.length&&(Lt.Image.DisplayRect=Mt),it(vt,Lt)}catch(nn){throw nn instanceof Error?nn:new Error(nt.getString("Errors.Dzi"))}else{if(Tt=="Collection")throw new Error(nt.getString("Errors.Dzc"));if(Tt=="Error"){var tn=wt.getElementsByTagName("Message")[0],Yt=tn.firstChild.nodeValue;throw new Error(Yt)}}throw new Error(nt.getString("Errors.Dzi"))}function it(vt,bt){var wt=bt.Image,Tt=wt.Url,kt=wt.Format,Lt=wt.Size,Mt=wt.DisplayRect||[],Nt=parseInt(Lt.Width,10),zt=parseInt(Lt.Height,10),Ht=parseInt(wt.TileSize,10),Wt=parseInt(wt.Overlap,10),Zt=[],tn,Yt;for(Yt=0;Yt<Mt.length;Yt++)tn=Mt[Yt].Rect,Zt.push(new nt.DisplayRect(parseInt(tn.X,10),parseInt(tn.Y,10),parseInt(tn.Width,10),parseInt(tn.Height,10),parseInt(tn.MinLevel,10),parseInt(tn.MaxLevel,10)));return nt.extend(!0,{width:Nt,height:zt,tileSize:Ht,tileOverlap:Wt,minLevel:null,maxLevel:null,tilesUrl:Tt,fileFormat:kt,displayRects:Zt},bt)}}(OpenSeadragon),function(nt){nt.IIIFTileSource=function(wt){if(nt.extend(!0,this,wt),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(wt.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=wt.version,this.tile_width&&this.tile_height)wt.tileWidth=this.tile_width,wt.tileHeight=this.tile_height;else if(this.tile_width)wt.tileSize=this.tile_width;else if(this.tile_height)wt.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)wt.tileWidth=this.tiles[0].width,wt.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var Tt=0;Tt<this.tiles.length;Tt++)for(var kt=0;kt<this.tiles[Tt].scaleFactors.length;kt++){var Lt=this.tiles[Tt].scaleFactors[kt];this.scale_factors.push(Lt),wt.tileSizePerScaleFactor[Lt]={width:this.tiles[Tt].width,height:this.tiles[Tt].height||this.tiles[Tt].width}}}else if(rt(wt)){for(var Mt=Math.min(this.height,this.width),Nt=[256,512,1024],zt=[],Ht=0;Ht<Nt.length;Ht++)Nt[Ht]<=Mt&&zt.push(Nt[Ht]);zt.length>0?wt.tileSize=Math.max.apply(null,zt):wt.tileSize=Mt}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,wt.levels=it(this),nt.extend(!0,wt,{width:wt.levels[wt.levels.length-1].width,height:wt.levels[wt.levels.length-1].height,tileSize:Math.max(wt.height,wt.width),tileOverlap:0,minLevel:0,maxLevel:wt.levels.length-1}),this.levels=wt.levels):nt.console.error("Nothing in the info.json to construct image pyramids from");if(!wt.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)wt.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var Wt=Math.max.apply(null,this.scale_factors);wt.maxLevel=Math.round(Math.log(Wt)*Math.LOG2E)}nt.TileSource.apply(this,[wt])},nt.extend(nt.IIIFTileSource.prototype,nt.TileSource.prototype,{supports:function(wt,Tt){return wt.protocol&&wt.protocol=="http://iiif.io/api/image"||wt["@context"]&&(wt["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||wt["@context"]=="http://iiif.io/api/image/1/context.json")||wt.profile&&wt.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||wt.identifier&&wt.width&&wt.height?!0:!!(wt.documentElement&&wt.documentElement.tagName=="info"&&wt.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(wt,Tt){if(nt.isPlainObject(wt)){if(!wt["@context"])wt["@context"]="http://iiif.io/api/image/1.0/context.json",wt["@id"]=Tt.replace("/info.json",""),wt.version=1;else{var Lt=wt["@context"];if(Array.isArray(Lt)){for(var Mt=0;Mt<Lt.length;Mt++)if(typeof Lt[Mt]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(Lt[Mt])||Lt[Mt]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){Lt=Lt[Mt];break}}switch(Lt){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":wt.version=1;break;case"http://iiif.io/api/image/2/context.json":wt.version=2;break;case"http://iiif.io/api/image/3/context.json":wt.version=3;break;default:nt.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!wt["@id"]&&wt.id&&(wt["@id"]=wt.id),wt.preferredFormats){for(var Nt=0;Nt<wt.preferredFormats.length;Nt++)if(OpenSeadragon.imageFormatSupported(wt.preferredFormats[Nt])){wt.tileFormat=wt.preferredFormats[Nt];break}}return wt}else{var kt=vt(wt);return kt["@context"]="http://iiif.io/api/image/1.0/context.json",kt["@id"]=Tt.replace("/info.xml",""),kt.version=1,kt}},getTileWidth:function(wt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileWidth.call(this,wt);var Tt=Math.pow(2,this.maxLevel-wt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Tt]?this.tileSizePerScaleFactor[Tt].width:this._tileWidth},getTileHeight:function(wt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileHeight.call(this,wt);var Tt=Math.pow(2,this.maxLevel-wt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Tt]?this.tileSizePerScaleFactor[Tt].height:this._tileHeight},getLevelScale:function(wt){if(this.emulateLegacyImagePyramid){var Tt=NaN;return this.levels.length>0&&wt>=this.minLevel&&wt<=this.maxLevel&&(Tt=this.levels[wt].width/this.levels[this.maxLevel].width),Tt}return nt.TileSource.prototype.getLevelScale.call(this,wt)},getNumTiles:function(wt){if(this.emulateLegacyImagePyramid){var Tt=this.getLevelScale(wt);return Tt?new nt.Point(1,1):new nt.Point(0,0)}return nt.TileSource.prototype.getNumTiles.call(this,wt)},getTileAtPoint:function(wt,Tt){return this.emulateLegacyImagePyramid?new nt.Point(0,0):nt.TileSource.prototype.getTileAtPoint.call(this,wt,Tt)},getTileUrl:function(wt,Tt,kt){if(this.emulateLegacyImagePyramid){var Lt=null;return this.levels.length>0&&wt>=this.minLevel&&wt<=this.maxLevel&&(Lt=this.levels[wt].url),Lt}var Mt="0",Nt=Math.pow(.5,this.maxLevel-wt),zt=Math.ceil(this.width*Nt),Ht=Math.ceil(this.height*Nt),Wt,Zt,tn,Yt,nn,rn,ln,sn,mn,wn,Cn,An,Pn,On;return Wt=this.getTileWidth(wt),Zt=this.getTileHeight(wt),tn=Math.ceil(Wt/Nt),Yt=Math.ceil(Zt/Nt),this.version===1?Pn="native."+this.tileFormat:Pn="default."+this.tileFormat,zt<Wt&&Ht<Zt?(this.version===2&&zt===this.width||this.version===3&&zt===this.width&&Ht===this.height?wn="max":this.version===3?wn=zt+","+Ht:wn=zt+",",nn="full"):(rn=Tt*tn,ln=kt*Yt,sn=Math.min(tn,this.width-rn),mn=Math.min(Yt,this.height-ln),Tt===0&&kt===0&&sn===this.width&&mn===this.height?nn="full":nn=[rn,ln,sn,mn].join(","),Cn=Math.ceil(sn*Nt),An=Math.ceil(mn*Nt),this.version===2&&Cn===this.width||this.version===3&&Cn===this.width&&An===this.height?wn="max":this.version===3?wn=Cn+","+An:wn=Cn+","),On=[this["@id"],nn,wn,Mt,Pn].join("/"),On},__testonly__:{canBeTiled:rt,constructLevels:it}});function rt(wt){var Tt=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],kt=Array.isArray(wt.profile)?wt.profile[0]:wt.profile,Lt=Tt.indexOf(kt)!==-1,Mt=!1;return wt.version===2&&wt.profile.length>1&&wt.profile[1].supports&&(Mt=wt.profile[1].supports.indexOf("sizeByW")!==-1),wt.version===3&&wt.extraFeatures&&(Mt=wt.extraFeatures.indexOf("sizeByWh")!==-1),!Lt||Mt}function it(wt){for(var Tt=[],kt=0;kt<wt.sizes.length;kt++)Tt.push({url:wt["@id"]+"/full/"+wt.sizes[kt].width+","+(wt.version===3?wt.sizes[kt].height:"")+"/0/default."+wt.tileFormat,width:wt.sizes[kt].width,height:wt.sizes[kt].height});return Tt.sort(function(Lt,Mt){return Lt.width-Mt.width})}function vt(wt){if(!wt||!wt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Tt=wt.documentElement,kt=Tt.tagName,Lt=null;if(kt=="info")try{return Lt={},bt(Tt,Lt),Lt}catch(Mt){throw Mt instanceof Error?Mt:new Error(nt.getString("Errors.IIIF"))}throw new Error(nt.getString("Errors.IIIF"))}function bt(wt,Tt,kt){var Lt,Mt;if(wt.nodeType==3&&kt)Mt=wt.nodeValue.trim(),Mt.match(/^\d*$/)&&(Mt=Number(Mt)),Tt[kt]?(nt.isArray(Tt[kt])||(Tt[kt]=[Tt[kt]]),Tt[kt].push(Mt)):Tt[kt]=Mt;else if(wt.nodeType==1)for(Lt=0;Lt<wt.childNodes.length;Lt++)bt(wt.childNodes[Lt],Tt,wt.nodeName)}}(OpenSeadragon),function(nt){nt.OsmTileSource=function(rt,it,vt,bt,wt){var Tt;nt.isPlainObject(rt)?Tt=rt:Tt={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!Tt.width||!Tt.height)&&(Tt.width=65572864,Tt.height=65572864),Tt.tileSize||(Tt.tileSize=256,Tt.tileOverlap=0),Tt.tilesUrl||(Tt.tilesUrl="http://tile.openstreetmap.org/"),Tt.minLevel=8,nt.TileSource.apply(this,[Tt])},nt.extend(nt.OsmTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="openstreetmaps"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,vt){return this.tilesUrl+(rt-8)+"/"+it+"/"+vt+".png"}})}(OpenSeadragon),function(nt){nt.TmsTileSource=function(rt,it,vt,bt,wt){var Tt;nt.isPlainObject(rt)?Tt=rt:Tt={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var kt=Math.ceil(Tt.width/256)*256,Lt=Math.ceil(Tt.height/256)*256,Mt;kt>Lt?Mt=kt/256:Mt=Lt/256,Tt.maxLevel=Math.ceil(Math.log(Mt)/Math.log(2))-1,Tt.tileSize=256,Tt.width=kt,Tt.height=Lt,nt.TileSource.apply(this,[Tt])},nt.extend(nt.TmsTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="tiledmapservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,vt){var bt=this.getNumTiles(rt).y-1;return this.tilesUrl+rt+"/"+it+"/"+(bt-vt)+".png"}})}(OpenSeadragon),function(nt){nt.ZoomifyTileSource=function(rt){rt.tileSize=256;var it={x:rt.width,y:rt.height};for(rt.imageSizes=[{x:rt.width,y:rt.height}],rt.gridSize=[this._getGridSize(rt.width,rt.height,rt.tileSize)];parseInt(it.x,10)>rt.tileSize||parseInt(it.y,10)>rt.tileSize;)it.x=Math.floor(it.x/2),it.y=Math.floor(it.y/2),rt.imageSizes.push({x:it.x,y:it.y}),rt.gridSize.push(this._getGridSize(it.x,it.y,rt.tileSize));rt.imageSizes.reverse(),rt.gridSize.reverse(),rt.minLevel=0,rt.maxLevel=rt.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[rt])},nt.extend(nt.ZoomifyTileSource.prototype,nt.TileSource.prototype,{_getGridSize:function(rt,it,vt){return{x:Math.ceil(rt/vt),y:Math.ceil(it/vt)}},_calculateAbsoluteTileNumber:function(rt,it,vt){for(var bt=0,wt={},Tt=0;Tt<rt;Tt++)wt=this.gridSize[Tt],bt+=wt.x*wt.y;return wt=this.gridSize[rt],bt+=wt.x*vt+it,bt},supports:function(rt,it){return rt.type&&rt.type=="zoomifytileservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,vt){var bt=0,wt=this._calculateAbsoluteTileNumber(rt,it,vt);return bt=Math.floor(wt/256),this.tilesUrl+"TileGroup"+bt+"/"+rt+"-"+it+"-"+vt+".jpg"}})}(OpenSeadragon),function(nt){nt.LegacyTileSource=function(bt){var wt,Tt,kt;nt.isArray(bt)&&(wt={type:"legacy-image-pyramid",levels:bt}),wt.levels=rt(wt.levels),wt.levels.length>0?(Tt=wt.levels[wt.levels.length-1].width,kt=wt.levels[wt.levels.length-1].height):(Tt=0,kt=0,nt.console.error("No supported image formats found")),nt.extend(!0,wt,{width:Tt,height:kt,tileSize:Math.max(kt,Tt),tileOverlap:0,minLevel:0,maxLevel:wt.levels.length>0?wt.levels.length-1:0}),nt.TileSource.apply(this,[wt]),this.levels=wt.levels},nt.extend(nt.LegacyTileSource.prototype,nt.TileSource.prototype,{supports:function(bt,wt){return bt.type&&bt.type=="legacy-image-pyramid"||bt.documentElement&&bt.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(bt,wt){var Tt;return nt.isPlainObject(bt)?Tt=vt(this,bt):Tt=it(this,bt),Tt},getLevelScale:function(bt){var wt=NaN;return this.levels.length>0&&bt>=this.minLevel&&bt<=this.maxLevel&&(wt=this.levels[bt].width/this.levels[this.maxLevel].width),wt},getNumTiles:function(bt){var wt=this.getLevelScale(bt);return wt?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(bt,wt,Tt){var kt=null;return this.levels.length>0&&bt>=this.minLevel&&bt<=this.maxLevel&&(kt=this.levels[bt].url),kt}});function rt(bt){var wt=[],Tt,kt;for(kt=0;kt<bt.length;kt++)Tt=bt[kt],Tt.height&&Tt.width&&Tt.url?wt.push({url:Tt.url,width:Number(Tt.width),height:Number(Tt.height)}):nt.console.error("Unsupported image format: %s",Tt.url?Tt.url:"<no URL>");return wt.sort(function(Lt,Mt){return Lt.height-Mt.height})}function it(bt,wt){if(!wt||!wt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Tt=wt.documentElement,kt=Tt.tagName,Lt=null,Mt=[],Nt,zt;if(kt=="image")try{for(Lt={type:Tt.getAttribute("type"),levels:[]},Mt=Tt.getElementsByTagName("level"),zt=0;zt<Mt.length;zt++)Nt=Mt[zt],Lt.levels.push({url:Nt.getAttribute("url"),width:parseInt(Nt.getAttribute("width"),10),height:parseInt(Nt.getAttribute("height"),10)});return vt(bt,Lt)}catch(Ht){throw Ht instanceof Error?Ht:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(kt=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(kt=="error")throw new Error("Error: "+wt)}throw new Error("Unknown element "+kt)}function vt(bt,wt){return wt.levels}}(OpenSeadragon),function(nt){nt.ImageTileSource=function(rt){rt=nt.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},rt),nt.TileSource.apply(this,[rt])},nt.extend(nt.ImageTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type==="image"},configure:function(rt,it){return rt},getImageInfo:function(rt){var it=this._image=new Image,vt=this;this.crossOriginPolicy&&(it.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(it.useCredentials=this.ajaxWithCredentials),nt.addEvent(it,"load",function(){vt.width=Object.prototype.hasOwnProperty.call(it,"naturalWidth")?it.naturalWidth:it.width,vt.height=Object.prototype.hasOwnProperty.call(it,"naturalHeight")?it.naturalHeight:it.height,vt.aspectRatio=vt.width/vt.height,vt.dimensions=new nt.Point(vt.width,vt.height),vt._tileWidth=vt.width,vt._tileHeight=vt.height,vt.tileOverlap=0,vt.minLevel=0,vt.levels=vt._buildLevels(),vt.maxLevel=vt.levels.length-1,vt.ready=!0,vt.raiseEvent("ready",{tileSource:vt})}),nt.addEvent(it,"error",function(){vt.raiseEvent("open-failed",{message:"Error loading image at "+rt,source:rt})}),it.src=rt},getLevelScale:function(rt){var it=NaN;return rt>=this.minLevel&&rt<=this.maxLevel&&(it=this.levels[rt].width/this.levels[this.maxLevel].width),it},getNumTiles:function(rt){var it=this.getLevelScale(rt);return it?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(rt,it,vt){var bt=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(bt=this.levels[rt].url),bt},getContext2D:function(rt,it,vt){var bt=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(bt=this.levels[rt].context2D),bt},_buildLevels:function(){var rt=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!nt.supportsCanvas||!this.useCanvas)return delete this._image,rt;var it=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,vt=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,bt=document.createElement("canvas"),wt=bt.getContext("2d");if(bt.width=it,bt.height=vt,wt.drawImage(this._image,0,0,it,vt),rt[0].context2D=wt,delete this._image,nt.isCanvasTainted(bt))return rt;for(;it>=2&&vt>=2;){it=Math.floor(it/2),vt=Math.floor(vt/2);var Tt=document.createElement("canvas"),kt=Tt.getContext("2d");Tt.width=it,Tt.height=vt,kt.drawImage(bt,0,0,it,vt),rt.splice(0,0,{context2D:kt,width:it,height:vt}),bt=Tt,wt=kt}return rt}})}(OpenSeadragon),function(nt){nt.TileSourceCollection=function(rt,it,vt,bt){nt.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(nt){nt.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},nt.Button=function(kt){var Lt=this;nt.EventSource.call(this),nt.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},kt),this.element=kt.element||nt.makeNeutralElement("div"),kt.element||(this.imgRest=nt.makeTransparentImage(this.srcRest),this.imgGroup=nt.makeTransparentImage(this.srcGroup),this.imgHover=nt.makeTransparentImage(this.srcHover),this.imgDown=nt.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",nt.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",nt.Browser.vendor==nt.BROWSERS.FIREFOX&&nt.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=nt.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Mt){Mt.insideElementPressed?(wt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("enter",{originalEvent:Mt.originalEvent})):Mt.buttonDownAny||wt(Lt,nt.ButtonState.HOVER)},focusHandler:function(Mt){this.enterHandler(Mt),Lt.raiseEvent("focus",{originalEvent:Mt.originalEvent})},exitHandler:function(Mt){Tt(Lt,nt.ButtonState.GROUP),Mt.insideElementPressed&&Lt.raiseEvent("exit",{originalEvent:Mt.originalEvent})},blurHandler:function(Mt){this.exitHandler(Mt),Lt.raiseEvent("blur",{originalEvent:Mt.originalEvent})},pressHandler:function(Mt){wt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("press",{originalEvent:Mt.originalEvent})},releaseHandler:function(Mt){Mt.insideElementPressed&&Mt.insideElementReleased?(Tt(Lt,nt.ButtonState.HOVER),Lt.raiseEvent("release",{originalEvent:Mt.originalEvent})):Mt.insideElementPressed?Tt(Lt,nt.ButtonState.GROUP):wt(Lt,nt.ButtonState.HOVER)},clickHandler:function(Mt){Mt.quick&&Lt.raiseEvent("click",{originalEvent:Mt.originalEvent})},keyHandler:function(Mt){return Mt.keyCode===13?(Lt.raiseEvent("click",{originalEvent:Mt.originalEvent}),Lt.raiseEvent("release",{originalEvent:Mt.originalEvent}),!1):!0}}),Tt(this,nt.ButtonState.REST)},nt.extend(nt.Button.prototype,nt.EventSource.prototype,{notifyGroupEnter:function(){wt(this,nt.ButtonState.GROUP)},notifyGroupExit:function(){Tt(this,nt.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,nt.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,nt.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function rt(kt){nt.requestAnimationFrame(function(){it(kt)})}function it(kt){var Lt,Mt,Nt;kt.shouldFade&&(Lt=nt.now(),Mt=Lt-kt.fadeBeginTime,Nt=1-Mt/kt.fadeLength,Nt=Math.min(1,Nt),Nt=Math.max(0,Nt),kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,Nt,!0),Nt>0&&rt(kt))}function vt(kt){kt.shouldFade=!0,kt.fadeBeginTime=nt.now()+kt.fadeDelay,window.setTimeout(function(){rt(kt)},kt.fadeDelay)}function bt(kt){kt.shouldFade=!1,kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,1,!0)}function wt(kt,Lt){kt.element.disabled||(Lt>=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.REST&&(bt(kt),kt.currentState=nt.ButtonState.GROUP),Lt>=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.GROUP&&(kt.imgHover&&(kt.imgHover.style.visibility=""),kt.currentState=nt.ButtonState.HOVER),Lt>=nt.ButtonState.DOWN&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgDown&&(kt.imgDown.style.visibility=""),kt.currentState=nt.ButtonState.DOWN))}function Tt(kt,Lt){kt.element.disabled||(Lt<=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.DOWN&&(kt.imgDown&&(kt.imgDown.style.visibility="hidden"),kt.currentState=nt.ButtonState.HOVER),Lt<=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgHover&&(kt.imgHover.style.visibility="hidden"),kt.currentState=nt.ButtonState.GROUP),Lt<=nt.ButtonState.REST&&kt.currentState==nt.ButtonState.GROUP&&(vt(kt),kt.currentState=nt.ButtonState.REST))}}(OpenSeadragon),function(nt){nt.ButtonGroup=function(rt){nt.extend(!0,this,{buttons:[],clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},rt);var it=this.buttons.concat([]),vt=this,bt;if(this.element=rt.element||nt.makeNeutralElement("div"),!rt.group)for(this.element.style.display="inline-block",bt=0;bt<it.length;bt++)this.element.appendChild(it[bt].element);nt.setElementTouchActionNone(this.element),this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(wt){var Tt;for(Tt=0;Tt<vt.buttons.length;Tt++)vt.buttons[Tt].notifyGroupEnter()},exitHandler:function(wt){var Tt;if(!wt.insideElementPressed)for(Tt=0;Tt<vt.buttons.length;Tt++)vt.buttons[Tt].notifyGroupExit()}})},nt.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(nt){nt.Rect=function(rt,it,vt,bt,wt){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0,this.width=typeof vt=="number"?vt:0,this.height=typeof bt=="number"?bt:0,this.degrees=typeof wt=="number"?wt:0,this.degrees=nt.positiveModulo(this.degrees,360);var Tt,kt;this.degrees>=270?(Tt=this.getTopRight(),this.x=Tt.x,this.y=Tt.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=270):this.degrees>=180?(Tt=this.getBottomRight(),this.x=Tt.x,this.y=Tt.y,this.degrees-=180):this.degrees>=90&&(Tt=this.getBottomLeft(),this.x=Tt.x,this.y=Tt.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=90)},nt.Rect.fromSummits=function(rt,it,vt){var bt=rt.distanceTo(it),wt=rt.distanceTo(vt),Tt=it.minus(rt),kt=Math.atan(Tt.y/Tt.x);return Tt.x<0?kt+=Math.PI:Tt.y<0&&(kt+=2*Math.PI),new nt.Rect(rt.x,rt.y,bt,wt,kt/Math.PI*180)},nt.Rect.prototype={clone:function(){return new nt.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new nt.Point(this.x,this.y)},getBottomRight:function(){return new nt.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new nt.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new nt.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new nt.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new nt.Point(this.width,this.height)},equals:function(rt){return rt instanceof nt.Rect&&this.x===rt.x&&this.y===rt.y&&this.width===rt.width&&this.height===rt.height&&this.degrees===rt.degrees},times:function(rt){return new nt.Rect(this.x*rt,this.y*rt,this.width*rt,this.height*rt,this.degrees)},translate:function(rt){return new nt.Rect(this.x+rt.x,this.y+rt.y,this.width,this.height,this.degrees)},union:function(rt){var it=this.getBoundingBox(),vt=rt.getBoundingBox(),bt=Math.min(it.x,vt.x),wt=Math.min(it.y,vt.y),Tt=Math.max(it.x+it.width,vt.x+vt.width),kt=Math.max(it.y+it.height,vt.y+vt.height);return new nt.Rect(bt,wt,Tt-bt,kt-wt)},intersection:function(rt){var it=1e-10,vt=[],bt=this.getTopLeft();rt.containsPoint(bt,it)&&vt.push(bt);var wt=this.getTopRight();rt.containsPoint(wt,it)&&vt.push(wt);var Tt=this.getBottomLeft();rt.containsPoint(Tt,it)&&vt.push(Tt);var kt=this.getBottomRight();rt.containsPoint(kt,it)&&vt.push(kt);var Lt=rt.getTopLeft();this.containsPoint(Lt,it)&&vt.push(Lt);var Mt=rt.getTopRight();this.containsPoint(Mt,it)&&vt.push(Mt);var Nt=rt.getBottomLeft();this.containsPoint(Nt,it)&&vt.push(Nt);var zt=rt.getBottomRight();this.containsPoint(zt,it)&&vt.push(zt);for(var Ht=this._getSegments(),Wt=rt._getSegments(),Zt=0;Zt<Ht.length;Zt++)for(var tn=Ht[Zt],Yt=0;Yt<Wt.length;Yt++){var nn=Wt[Yt],rn=ln(tn[0],tn[1],nn[0],nn[1]);rn&&vt.push(rn)}function ln(On,kn,gn,Vn){var pn=kn.minus(On),pr=Vn.minus(gn),yn=-pr.x*pn.y+pn.x*pr.y;if(yn===0)return null;var mr=(pn.x*(On.y-gn.y)-pn.y*(On.x-gn.x))/yn,Er=(pr.x*(On.y-gn.y)-pr.y*(On.x-gn.x))/yn;return-it<=mr&&mr<=1-it&&-it<=Er&&Er<=1-it?new nt.Point(On.x+Er*pn.x,On.y+Er*pn.y):null}if(vt.length===0)return null;for(var sn=vt[0].x,mn=vt[0].x,wn=vt[0].y,Cn=vt[0].y,An=1;An<vt.length;An++){var Pn=vt[An];Pn.x<sn&&(sn=Pn.x),Pn.x>mn&&(mn=Pn.x),Pn.y<wn&&(wn=Pn.y),Pn.y>Cn&&(Cn=Pn.y)}return new nt.Rect(sn,wn,mn-sn,Cn-wn)},_getSegments:function(){var rt=this.getTopLeft(),it=this.getTopRight(),vt=this.getBottomLeft(),bt=this.getBottomRight();return[[rt,it],[it,bt],[bt,vt],[vt,rt]]},rotate:function(rt,it){if(rt=nt.positiveModulo(rt,360),rt===0)return this.clone();it=it||this.getCenter();var vt=this.getTopLeft().rotate(rt,it),bt=this.getTopRight().rotate(rt,it),wt=bt.minus(vt);wt=wt.apply(function(kt){var Lt=1e-15;return Math.abs(kt)<Lt?0:kt});var Tt=Math.atan(wt.y/wt.x);return wt.x<0?Tt+=Math.PI:wt.y<0&&(Tt+=2*Math.PI),new nt.Rect(vt.x,vt.y,this.width,this.height,Tt/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var rt=this.getTopLeft(),it=this.getTopRight(),vt=this.getBottomLeft(),bt=this.getBottomRight(),wt=Math.min(rt.x,it.x,vt.x,bt.x),Tt=Math.max(rt.x,it.x,vt.x,bt.x),kt=Math.min(rt.y,it.y,vt.y,bt.y),Lt=Math.max(rt.y,it.y,vt.y,bt.y);return new nt.Rect(wt,kt,Tt-wt,Lt-kt)},getIntegerBoundingBox:function(){var rt=this.getBoundingBox(),it=Math.floor(rt.x),vt=Math.floor(rt.y),bt=Math.ceil(rt.width+rt.x-it),wt=Math.ceil(rt.height+rt.y-vt);return new nt.Rect(it,vt,bt,wt)},containsPoint:function(rt,it){it=it||0;var vt=this.getTopLeft(),bt=this.getTopRight(),wt=this.getBottomLeft(),Tt=bt.minus(vt),kt=wt.minus(vt);return(rt.x-vt.x)*Tt.x+(rt.y-vt.y)*Tt.y>=-it&&(rt.x-bt.x)*Tt.x+(rt.y-bt.y)*Tt.y<=it&&(rt.x-vt.x)*kt.x+(rt.y-vt.y)*kt.y>=-it&&(rt.x-wt.x)*kt.x+(rt.y-wt.y)*kt.y<=it},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(nt){var rt={};nt.ReferenceStrip=function(Mt){var Nt=this,zt=Mt.viewer,Ht=nt.getElementSize(zt.element),Wt,Zt,tn;for(Mt.id||(Mt.id="referencestrip-"+nt.now(),this.element=nt.makeNeutralElement("div"),this.element.id=Mt.id,this.element.className="referencestrip"),Mt=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.referenceStripSizeRatio,position:nt.DEFAULT_SETTINGS.referenceStripPosition,scroll:nt.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold},Mt,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),nt.extend(this,Mt),rt[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,Zt=this.element.style,Zt.marginTop="0px",Zt.marginRight="0px",Zt.marginBottom="0px",Zt.marginLeft="0px",Zt.left="0px",Zt.bottom="0px",Zt.border="0px",Zt.background="#000",Zt.position="relative",nt.setElementTouchActionNone(this.element),nt.setElementOpacity(this.element,.8),this.viewer=zt,this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),scrollHandler:nt.delegate(this,vt),enterHandler:nt.delegate(this,wt),exitHandler:nt.delegate(this,Tt),keyDownHandler:nt.delegate(this,kt),keyHandler:nt.delegate(this,Lt)}),Mt.width&&Mt.height?(this.element.style.width=Mt.width+"px",this.element.style.height=Mt.height+"px",zt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):Mt.scroll=="horizontal"?(this.element.style.width=Ht.x*Mt.sizeRatio*zt.tileSources.length+12*zt.tileSources.length+"px",this.element.style.height=Ht.y*Mt.sizeRatio+"px",zt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=Ht.y*Mt.sizeRatio*zt.tileSources.length+12*zt.tileSources.length+"px",this.element.style.width=Ht.x*Mt.sizeRatio+"px",zt.addControl(this.element,{anchor:nt.ControlAnchor.TOP_LEFT})),this.panelWidth=Ht.x*this.sizeRatio+8,this.panelHeight=Ht.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},tn=0;tn<zt.tileSources.length;tn++)Wt=nt.makeNeutralElement("div"),Wt.id=this.element.id+"-"+tn,Wt.style.width=Nt.panelWidth+"px",Wt.style.height=Nt.panelHeight+"px",Wt.style.display="inline",Wt.style.float="left",Wt.style.cssFloat="left",Wt.style.styleFloat="left",Wt.style.padding="2px",nt.setElementTouchActionNone(Wt),Wt.innerTracker=new nt.MouseTracker({element:Wt,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(Yt){Yt.eventSource.dragging=nt.now()},releaseHandler:function(Yt){var nn=Yt.eventSource,rn=nn.element.id,ln=Number(rn.split("-")[2]),sn=nt.now();Yt.insideElementPressed&&Yt.insideElementReleased&&nn.dragging&&sn-nn.dragging<nn.clickTimeThreshold&&(nn.dragging=null,zt.goToPage(ln))}}),this.element.appendChild(Wt),Wt.activePanel=!1,this.panels.push(Wt);bt(this,this.scroll=="vertical"?Ht.y:Ht.x,0),this.setFocus(0)},nt.extend(nt.ReferenceStrip.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{setFocus:function(Mt){var Nt=this.element.querySelector("#"+this.element.id+"-"+Mt),zt=nt.getElementSize(this.viewer.canvas),Ht=Number(this.element.style.width.replace("px","")),Wt=Number(this.element.style.height.replace("px","")),Zt=-Number(this.element.style.marginLeft.replace("px","")),tn=-Number(this.element.style.marginTop.replace("px","")),Yt;this.currentSelected!==Nt&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=Nt,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(Yt=Number(Mt)*(this.panelWidth+3),Yt>Zt+zt.x-this.panelWidth?(Yt=Math.min(Yt,Ht-zt.x),this.element.style.marginLeft=-Yt+"px",bt(this,zt.x,-Yt)):Yt<Zt&&(Yt=Math.max(0,Yt-zt.x/2),this.element.style.marginLeft=-Yt+"px",bt(this,zt.x,-Yt))):(Yt=Number(Mt)*(this.panelHeight+3),Yt>tn+zt.y-this.panelHeight?(Yt=Math.min(Yt,Wt-zt.y),this.element.style.marginTop=-Yt+"px",bt(this,zt.y,-Yt)):Yt<tn&&(Yt=Math.max(0,Yt-zt.y/2),this.element.style.marginTop=-Yt+"px",bt(this,zt.y,-Yt))),this.currentPage=Mt,wt.call(this,{eventSource:this.innerTracker}))},update:function(){return rt[this.id].animating?(nt.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var Mt in this.miniViewers)this.miniViewers[Mt].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function it(Mt){var Nt=Number(this.element.style.marginLeft.replace("px","")),zt=Number(this.element.style.marginTop.replace("px","")),Ht=Number(this.element.style.width.replace("px","")),Wt=Number(this.element.style.height.replace("px","")),Zt=nt.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-Mt.delta.x>0?Nt>-(Ht-Zt.x)&&(this.element.style.marginLeft=Nt+Mt.delta.x*2+"px",bt(this,Zt.x,Nt+Mt.delta.x*2)):-Mt.delta.x<0&&Nt<0&&(this.element.style.marginLeft=Nt+Mt.delta.x*2+"px",bt(this,Zt.x,Nt+Mt.delta.x*2)):-Mt.delta.y>0?zt>-(Wt-Zt.y)&&(this.element.style.marginTop=zt+Mt.delta.y*2+"px",bt(this,Zt.y,zt+Mt.delta.y*2)):-Mt.delta.y<0&&zt<0&&(this.element.style.marginTop=zt+Mt.delta.y*2+"px",bt(this,Zt.y,zt+Mt.delta.y*2))),!1}function vt(Mt){var Nt=Number(this.element.style.marginLeft.replace("px","")),zt=Number(this.element.style.marginTop.replace("px","")),Ht=Number(this.element.style.width.replace("px","")),Wt=Number(this.element.style.height.replace("px","")),Zt=nt.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?Mt.scroll>0?Nt>-(Ht-Zt.x)&&(this.element.style.marginLeft=Nt-Mt.scroll*60+"px",bt(this,Zt.x,Nt-Mt.scroll*60)):Mt.scroll<0&&Nt<0&&(this.element.style.marginLeft=Nt-Mt.scroll*60+"px",bt(this,Zt.x,Nt-Mt.scroll*60)):Mt.scroll<0?zt>Zt.y-Wt&&(this.element.style.marginTop=zt+Mt.scroll*60+"px",bt(this,Zt.y,zt+Mt.scroll*60)):Mt.scroll>0&&zt<0&&(this.element.style.marginTop=zt+Mt.scroll*60+"px",bt(this,Zt.y,zt+Mt.scroll*60))),!1}function bt(Mt,Nt,zt){var Ht,Wt,Zt,tn,Yt,nn,rn;for(Mt.scroll=="horizontal"?Ht=Mt.panelWidth:Ht=Mt.panelHeight,Wt=Math.ceil(Nt/Ht)+5,Zt=Math.ceil((Math.abs(zt)+Nt)/Ht)+1,Wt=Zt-Wt,Wt=Wt<0?0:Wt,nn=Wt;nn<Zt&&nn<Mt.panels.length;nn++)if(rn=Mt.panels[nn],!rn.activePanel){var ln,sn=Mt.viewer.tileSources[nn];sn.referenceStripThumbnailUrl?ln={type:"image",url:sn.referenceStripThumbnailUrl}:ln=sn,tn=new nt.Viewer({id:rn.id,tileSources:[ln],element:rn,navigatorSizeRatio:Mt.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:Mt.viewer.loadTilesWithAjax,ajaxHeaders:Mt.viewer.ajaxHeaders,useCanvas:Mt.useCanvas}),tn.displayRegion=nt.makeNeutralElement("div"),tn.displayRegion.id=rn.id+"-displayregion",tn.displayRegion.className="displayregion",Yt=tn.displayRegion.style,Yt.position="relative",Yt.top="0px",Yt.left="0px",Yt.fontSize="0px",Yt.overflow="hidden",Yt.float="left",Yt.cssFloat="left",Yt.styleFloat="left",Yt.zIndex=999999999,Yt.cursor="default",Yt.width=Mt.panelWidth-4+"px",Yt.height=Mt.panelHeight-4+"px",tn.displayRegion.innerTracker=new nt.MouseTracker({element:tn.displayRegion,startDisabled:!0}),rn.getElementsByTagName("div")[0].appendChild(tn.displayRegion),Mt.miniViewers[rn.id]=tn,rn.activePanel=!0}}function wt(Mt){var Nt=Mt.eventSource.element;return this.scroll=="horizontal"?Nt.style.marginBottom="0px":Nt.style.marginLeft="0px",!1}function Tt(Mt){var Nt=Mt.eventSource.element;return this.scroll=="horizontal"?Nt.style.marginBottom="-"+nt.getElementSize(Nt).y/2+"px":Nt.style.marginLeft="-"+nt.getElementSize(Nt).x/2+"px",!1}function kt(Mt){if(!Mt.preventDefaultAction&&!Mt.ctrl&&!Mt.alt&&!Mt.meta)switch(Mt.keyCode){case 38:return vt.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return vt.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return vt.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return vt.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function Lt(Mt){if(!Mt.preventDefaultAction&&!Mt.ctrl&&!Mt.alt&&!Mt.meta)switch(Mt.keyCode){case 61:return vt.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return vt.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return vt.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return vt.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return vt.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return vt.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(nt){nt.DisplayRect=function(rt,it,vt,bt,wt,Tt){nt.Rect.apply(this,[rt,it,vt,bt]),this.minLevel=wt,this.maxLevel=Tt},nt.extend(nt.DisplayRect.prototype,nt.Rect.prototype)}(OpenSeadragon),function(nt){nt.Spring=function(it){var vt=arguments;typeof it!="object"&&(it={initial:vt.length&&typeof vt[0]=="number"?vt[0]:void 0,springStiffness:vt.length>1?vt[1].springStiffness:5,animationTime:vt.length>1?vt[1].animationTime:1.5}),nt.console.assert(typeof it.springStiffness=="number"&&it.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),nt.console.assert(typeof it.animationTime=="number"&&it.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),it.exponential&&(this._exponential=!0,delete it.exponential),nt.extend(!0,this,it),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:nt.now()},nt.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},nt.Spring.prototype={resetTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=it,this.start.time=this.target.time=this.current.time=nt.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=it,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(it){this.start.value+=it,this.target.value+=it,this._exponential&&(nt.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(it){this._exponential=it,this._exponential&&(nt.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=nt.now();var it,vt;this._exponential?(it=this.start._logValue,vt=this.target._logValue):(it=this.start.value,vt=this.target.value);var bt=this.current.time>=this.target.time?vt:it+(vt-it)*rt(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),wt=this.current.value;return this._exponential?this.current.value=Math.exp(bt):this.current.value=bt,wt!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function rt(it,vt){return(1-Math.exp(it*-vt))/(1-Math.exp(-it))}}(OpenSeadragon),function(nt){function rt(vt){nt.extend(!0,this,{timeout:nt.DEFAULT_SETTINGS.timeout,jobId:null},vt),this.image=null}rt.prototype={errorMsg:null,start:function(){var vt=this,bt=this.abort;this.image=new Image,this.image.onload=function(){vt.finish(!0)},this.image.onabort=this.image.onerror=function(){vt.errorMsg="Image load aborted",vt.finish(!1)},this.jobId=window.setTimeout(function(){vt.errorMsg="Image load exceeded timeout ("+vt.timeout+" ms)",vt.finish(!1)},this.timeout),this.loadWithAjax?(this.request=nt.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(wt){var Tt;try{Tt=new window.Blob([wt.response])}catch(Nt){var kt=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(Nt.name==="TypeError"&&kt){var Lt=new kt;Lt.append(wt.response),Tt=Lt.getBlob()}}Tt.size===0&&(vt.errorMsg="Empty image response.",vt.finish(!1));var Mt=(window.URL||window.webkitURL).createObjectURL(Tt);vt.image.src=Mt},error:function(wt){vt.errorMsg="Image load aborted - XHR error",vt.finish(!1)}}),this.abort=function(){vt.request.abort(),typeof bt=="function"&&bt()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(vt){this.image.onload=this.image.onerror=this.image.onabort=null,vt||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},nt.ImageLoader=function(vt){nt.extend(!0,this,{jobLimit:nt.DEFAULT_SETTINGS.imageLoaderLimit,timeout:nt.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},vt)},nt.ImageLoader.prototype={addJob:function(vt){var bt=this,wt=function(Lt){it(bt,Lt,vt.callback)},Tt={src:vt.src,loadWithAjax:vt.loadWithAjax,ajaxHeaders:vt.loadWithAjax?vt.ajaxHeaders:null,crossOriginPolicy:vt.crossOriginPolicy,ajaxWithCredentials:vt.ajaxWithCredentials,callback:wt,abort:vt.abort,timeout:this.timeout},kt=new rt(Tt);!this.jobLimit||this.jobsInProgress<this.jobLimit?(kt.start(),this.jobsInProgress++):this.jobQueue.push(kt)},clear:function(){for(var vt=0;vt<this.jobQueue.length;vt++){var bt=this.jobQueue[vt];typeof bt.abort=="function"&&bt.abort()}this.jobQueue=[]}};function it(vt,bt,wt){var Tt;vt.jobsInProgress--,(!vt.jobLimit||vt.jobsInProgress<vt.jobLimit)&&vt.jobQueue.length>0&&(Tt=vt.jobQueue.shift(),Tt.start(),vt.jobsInProgress++),wt(bt.image,bt.errorMsg,bt.request)}}(OpenSeadragon),function(nt){nt.Tile=function(rt,it,vt,bt,wt,Tt,kt,Lt,Mt,Nt){this.level=rt,this.x=it,this.y=vt,this.bounds=bt,this.sourceBounds=Nt,this.exists=wt,this.url=Tt,this.context2D=kt,this.loadWithAjax=Lt,this.ajaxHeaders=Mt,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},nt.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(rt){if(!this.cacheImageRecord){nt.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=nt.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=rt&&rt.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",nt.setElementOpacity(this.element,this.opacity)},drawCanvas:function(rt,it,vt,bt){var wt=this.position.times(nt.pixelDensityRatio),Tt=this.size.times(nt.pixelDensityRatio),kt;if(!this.context2D&&!this.cacheImageRecord){nt.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(kt=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!kt){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}rt.save(),rt.globalAlpha=this.opacity,typeof vt=="number"&&vt!==1&&(wt=wt.times(vt),Tt=Tt.times(vt)),bt instanceof nt.Point&&(wt=wt.plus(bt)),rt.globalAlpha===1&&this._hasTransparencyChannel()&&rt.clearRect(wt.x,wt.y,Tt.x,Tt.y),it({context:rt,tile:this,rendered:kt});var Lt,Mt;this.sourceBounds?(Lt=Math.min(this.sourceBounds.width,kt.canvas.width),Mt=Math.min(this.sourceBounds.height,kt.canvas.height)):(Lt=kt.canvas.width,Mt=kt.canvas.height),rt.drawImage(kt.canvas,0,0,Lt,Mt,wt.x,wt.y,Tt.x,Tt.y),rt.restore()},getScaleForEdgeSmoothing:function(){var rt;if(this.cacheImageRecord)rt=this.cacheImageRecord.getRenderedContext();else if(this.context2D)rt=this.context2D;else return nt.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return rt.canvas.width/(this.size.x*nt.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(rt,it,vt){var bt=Math.max(1,Math.ceil((vt.x-it.x)/2)),wt=Math.max(1,Math.ceil((vt.y-it.y)/2));return new nt.Point(bt,wt).minus(this.position.times(nt.pixelDensityRatio).times(rt||1).apply(function(Tt){return Tt%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(nt){nt.OverlayPlacement=nt.Placement,nt.OverlayRotationMode=nt.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),nt.Overlay=function(rt,it,vt){var bt;nt.isPlainObject(rt)?bt=rt:bt={element:rt,location:it,placement:vt},this.element=bt.element,this.style=bt.element.style,this._init(bt)},nt.Overlay.prototype={_init:function(rt){this.location=rt.location,this.placement=rt.placement===void 0?nt.Placement.TOP_LEFT:rt.placement,this.onDraw=rt.onDraw,this.checkResize=rt.checkResize===void 0?!0:rt.checkResize,this.width=rt.width===void 0?null:rt.width,this.height=rt.height===void 0?null:rt.height,this.rotationMode=rt.rotationMode||nt.OverlayRotationMode.EXACT,this.location instanceof nt.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=nt.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new nt.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(rt,it){var vt=nt.Placement.properties[this.placement];!vt||(vt.isHorizontallyCentered?rt.x-=it.x/2:vt.isRight&&(rt.x-=it.x),vt.isVerticallyCentered?rt.y-=it.y/2:vt.isBottom&&(rt.y-=it.y))},destroy:function(){var rt=this.element,it=this.style;rt.parentNode&&(rt.parentNode.removeChild(rt),rt.prevElementParent&&(it.display="none",document.body.appendChild(rt))),this.onDraw=null,it.top="",it.left="",it.position="",this.width!==null&&(it.width=""),this.height!==null&&(it.height="");var vt=nt.getCssPropertyWithVendorPrefix("transformOrigin"),bt=nt.getCssPropertyWithVendorPrefix("transform");vt&&bt&&(it[vt]="",it[bt]="")},drawHTML:function(rt,it){var vt=this.element;vt.parentNode!==rt&&(vt.prevElementParent=vt.parentNode,vt.prevNextSibling=vt.nextSibling,rt.appendChild(vt),this.style.position="absolute",this.size=nt.getElementSize(vt));var bt=this._getOverlayPositionAndSize(it),wt=bt.position,Tt=this.size=bt.size,kt=bt.rotate;if(this.onDraw)this.onDraw(wt,Tt,this.element);else{var Lt=this.style;Lt.left=wt.x+"px",Lt.top=wt.y+"px",this.width!==null&&(Lt.width=Tt.x+"px"),this.height!==null&&(Lt.height=Tt.y+"px");var Mt=nt.getCssPropertyWithVendorPrefix("transformOrigin"),Nt=nt.getCssPropertyWithVendorPrefix("transform");Mt&&Nt&&(kt?(Lt[Mt]=this._getTransformOrigin(),Lt[Nt]="rotate("+kt+"deg)"):(Lt[Mt]="",Lt[Nt]="")),Lt.display!=="none"&&(Lt.display="block")}},_getOverlayPositionAndSize:function(rt){var it=rt.pixelFromPoint(this.location,!0),vt=this._getSizeInPixels(rt);this.adjust(it,vt);var bt=0;if(rt.degrees&&this.rotationMode!==nt.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var wt=new nt.Rect(it.x,it.y,vt.x,vt.y),Tt=this._getBoundingBox(wt,rt.degrees);it=Tt.getTopLeft(),vt=Tt.getSize()}else bt=rt.degrees;return{position:it,size:vt,rotate:bt}},_getSizeInPixels:function(rt){var it=this.size.x,vt=this.size.y;if(this.width!==null||this.height!==null){var bt=rt.deltaPixelsFromPointsNoRotate(new nt.Point(this.width||0,this.height||0),!0);this.width!==null&&(it=bt.x),this.height!==null&&(vt=bt.y)}if(this.checkResize&&(this.width===null||this.height===null)){var wt=this.size=nt.getElementSize(this.element);this.width===null&&(it=wt.x),this.height===null&&(vt=wt.y)}return new nt.Point(it,vt)},_getBoundingBox:function(rt,it){var vt=this._getPlacementPoint(rt);return rt.rotate(it,vt).getBoundingBox()},_getPlacementPoint:function(rt){var it=new nt.Point(rt.x,rt.y),vt=nt.Placement.properties[this.placement];return vt&&(vt.isHorizontallyCentered?it.x+=rt.width/2:vt.isRight&&(it.x+=rt.width),vt.isVerticallyCentered?it.y+=rt.height/2:vt.isBottom&&(it.y+=rt.height)),it},_getTransformOrigin:function(){var rt="",it=nt.Placement.properties[this.placement];return it&&(it.isLeft?rt="left":it.isRight&&(rt="right"),it.isTop?rt+=" top":it.isBottom&&(rt+=" bottom")),rt},update:function(rt,it){var vt=nt.isPlainObject(rt)?rt:{location:rt,placement:it};this._init({location:vt.location||this.location,placement:vt.placement!==void 0?vt.placement:this.placement,onDraw:vt.onDraw||this.onDraw,checkResize:vt.checkResize||this.checkResize,width:vt.width!==void 0?vt.width:this.width,height:vt.height!==void 0?vt.height:this.height,rotationMode:vt.rotationMode||this.rotationMode})},getBounds:function(rt){nt.console.assert(rt,"A viewport must now be passed to Overlay.getBounds.");var it=this.width,vt=this.height;if(it===null||vt===null){var bt=rt.deltaPointsFromPixelsNoRotate(this.size,!0);it===null&&(it=bt.x),vt===null&&(vt=bt.y)}var wt=this.location.clone();return this.adjust(wt,new nt.Point(it,vt)),this._adjustBoundsForRotation(rt,new nt.Rect(wt.x,wt.y,it,vt))},_adjustBoundsForRotation:function(rt,it){if(!rt||rt.degrees===0||this.rotationMode===nt.OverlayRotationMode.EXACT)return it;if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return it;var vt=this._getOverlayPositionAndSize(rt);return rt.viewerElementToViewportRectangle(new nt.Rect(vt.position.x,vt.position.y,vt.size.x,vt.size.y))}return it.rotate(-rt.degrees,this._getPlacementPoint(it))}}}(OpenSeadragon),function(nt){nt.Drawer=function(rt){nt.console.assert(rt.viewer,"[Drawer] options.viewer is required");var it=arguments;if(nt.isPlainObject(rt)||(rt={source:it[0],viewport:it[1],element:it[2]}),nt.console.assert(rt.viewport,"[Drawer] options.viewport is required"),nt.console.assert(rt.element,"[Drawer] options.element is required"),rt.source&&nt.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=rt.viewer,this.viewport=rt.viewport,this.debugGridColor=typeof rt.debugGridColor=="string"?[rt.debugGridColor]:rt.debugGridColor||nt.DEFAULT_SETTINGS.debugGridColor,rt.opacity&&nt.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=nt.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=nt.getElement(rt.element),this.canvas=nt.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var vt=this._calculateCanvasSize();this.canvas.width=vt.x,this.canvas.height=vt.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",nt.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},nt.Drawer.prototype={addOverlay:function(rt,it,vt,bt){return nt.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(rt,it,vt,bt),this},updateOverlay:function(rt,it,vt){return nt.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(rt,it,vt),this},removeOverlay:function(rt){return nt.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(rt),this},clearOverlays:function(){return nt.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt,!0);return new nt.Point(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio)},clipWithPolygons:function(rt,it){if(!!this.useCanvas){var vt=this._getContext(it);vt.beginPath(),rt.forEach(function(bt){bt.forEach(function(wt,Tt){vt[Tt===0?"moveTo":"lineTo"](wt.x,wt.y)})}),vt.clip()}},setOpacity:function(rt){nt.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var it=this.viewer.world,vt=0;vt<it.getItemCount();vt++)it.getItemAt(vt).setOpacity(rt);return this},getOpacity:function(){nt.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var rt=this.viewer.world,it=0,vt=0;vt<rt.getItemCount();vt++){var bt=rt.getItemAt(vt).getOpacity();bt>it&&(it=bt)}return it},needsUpdate:function(){return nt.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return nt.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return nt.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return nt.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var rt=this._calculateCanvasSize();if((this.canvas.width!=rt.x||this.canvas.height!=rt.y)&&(this.canvas.width=rt.x,this.canvas.height=rt.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var it=this._calculateSketchCanvasSize();this.sketchCanvas.width=it.x,this.sketchCanvas.height=it.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(rt,it){if(!!this.useCanvas){var vt=this._getContext(rt);if(it)vt.clearRect(it.x,it.y,it.width,it.height);else{var bt=vt.canvas;vt.clearRect(0,0,bt.width,bt.height)}}},viewportToDrawerRectangle:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt.getTopLeft(),!0),vt=this.viewport.deltaPixelsFromPointsNoRotate(rt.getSize(),!0);return new nt.Rect(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio,vt.x*nt.pixelDensityRatio,vt.y*nt.pixelDensityRatio)},drawTile:function(rt,it,vt,bt,wt){if(nt.console.assert(rt,"[Drawer.drawTile] tile is required"),nt.console.assert(it,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var Tt=this._getContext(vt);bt=bt||1,rt.drawCanvas(Tt,it,bt,wt)}else rt.drawHTML(this.canvas)},_getContext:function(rt){var it=this.context;if(rt){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var vt=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=vt.x,this.sketchCanvas.height=vt.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var bt=this;this.viewer.addHandler("rotate",function wt(){if(bt.viewport.getRotation()!==0){bt.viewer.removeHandler("rotate",wt);var Tt=bt._calculateSketchCanvasSize();bt.sketchCanvas.width=Tt.x,bt.sketchCanvas.height=Tt.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}it=this.sketchContext}return it},saveContext:function(rt){!this.useCanvas||this._getContext(rt).save()},restoreContext:function(rt){!this.useCanvas||this._getContext(rt).restore()},setClip:function(rt,it){if(!!this.useCanvas){var vt=this._getContext(it);vt.beginPath(),vt.rect(rt.x,rt.y,rt.width,rt.height),vt.clip()}},drawRectangle:function(rt,it,vt){if(!!this.useCanvas){var bt=this._getContext(vt);bt.save(),bt.fillStyle=it,bt.fillRect(rt.x,rt.y,rt.width,rt.height),bt.restore()}},blendSketch:function(rt,it,vt,bt){var wt=rt;if(nt.isPlainObject(wt)||(wt={opacity:rt,scale:it,translate:vt,compositeOperation:bt}),!(!this.useCanvas||!this.sketchCanvas)){rt=wt.opacity,bt=wt.compositeOperation;var Tt=wt.bounds;if(this.context.save(),this.context.globalAlpha=rt,bt&&(this.context.globalCompositeOperation=bt),Tt)Tt.x<0&&(Tt.width+=Tt.x,Tt.x=0),Tt.x+Tt.width>this.canvas.width&&(Tt.width=this.canvas.width-Tt.x),Tt.y<0&&(Tt.height+=Tt.y,Tt.y=0),Tt.y+Tt.height>this.canvas.height&&(Tt.height=this.canvas.height-Tt.y),this.context.drawImage(this.sketchCanvas,Tt.x,Tt.y,Tt.width,Tt.height,Tt.x,Tt.y,Tt.width,Tt.height);else{it=wt.scale||1,vt=wt.translate;var kt=vt instanceof nt.Point?vt:new nt.Point(0,0),Lt=0,Mt=0;if(vt){var Nt=this.sketchCanvas.width-this.canvas.width,zt=this.sketchCanvas.height-this.canvas.height;Lt=Math.round(Nt/2),Mt=Math.round(zt/2)}this.context.drawImage(this.sketchCanvas,kt.x-Lt*it,kt.y-Mt*it,(this.canvas.width+2*Lt)*it,(this.canvas.height+2*Mt)*it,-Lt,-Mt,this.canvas.width+2*Lt,this.canvas.height+2*Mt)}this.context.restore()}},drawDebugInfo:function(rt,it,vt,bt){if(!!this.useCanvas){var wt=this.viewer.world.getIndexOfItem(bt)%this.debugGridColor.length,Tt=this.context;Tt.save(),Tt.lineWidth=2*nt.pixelDensityRatio,Tt.font="small-caps bold "+13*nt.pixelDensityRatio+"px arial",Tt.strokeStyle=this.debugGridColor[wt],Tt.fillStyle=this.debugGridColor[wt],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),bt.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:bt.getRotation(!0),point:bt.viewport.pixelFromPointNoRotate(bt._getRotationPoint(!0),!0)}),bt.viewport.degrees===0&&bt.getRotation(!0)%360===0&&bt._drawer.viewer.viewport.getFlip()&&bt._drawer._flip(),Tt.strokeRect(rt.position.x*nt.pixelDensityRatio,rt.position.y*nt.pixelDensityRatio,rt.size.x*nt.pixelDensityRatio,rt.size.y*nt.pixelDensityRatio);var kt=(rt.position.x+rt.size.x/2)*nt.pixelDensityRatio,Lt=(rt.position.y+rt.size.y/2)*nt.pixelDensityRatio;Tt.translate(kt,Lt),Tt.rotate(Math.PI/180*-this.viewport.degrees),Tt.translate(-kt,-Lt),rt.x===0&&rt.y===0&&(Tt.fillText("Zoom: "+this.viewport.getZoom(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-30)*nt.pixelDensityRatio),Tt.fillText("Pan: "+this.viewport.getBounds().toString(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-20)*nt.pixelDensityRatio)),Tt.fillText("Level: "+rt.level,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+20)*nt.pixelDensityRatio),Tt.fillText("Column: "+rt.x,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+30)*nt.pixelDensityRatio),Tt.fillText("Row: "+rt.y,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+40)*nt.pixelDensityRatio),Tt.fillText("Order: "+vt+" of "+it,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+50)*nt.pixelDensityRatio),Tt.fillText("Size: "+rt.size.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+60)*nt.pixelDensityRatio),Tt.fillText("Position: "+rt.position.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+70)*nt.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),bt.getRotation(!0)%360!==0&&this._restoreRotationChanges(),bt.viewport.degrees===0&&bt.getRotation(!0)%360===0&&bt._drawer.viewer.viewport.getFlip()&&bt._drawer._flip(),Tt.restore()}},debugRect:function(rt){if(this.useCanvas){var it=this.context;it.save(),it.lineWidth=2*nt.pixelDensityRatio,it.strokeStyle=this.debugGridColor[0],it.fillStyle=this.debugGridColor[0],it.strokeRect(rt.x*nt.pixelDensityRatio,rt.y*nt.pixelDensityRatio,rt.width*nt.pixelDensityRatio,rt.height*nt.pixelDensityRatio),it.restore()}},setImageSmoothingEnabled:function(rt){this.useCanvas&&(this._imageSmoothingEnabled=rt,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(rt){rt.msImageSmoothingEnabled=this._imageSmoothingEnabled,rt.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(rt){var it=this._getContext(rt).canvas;return new nt.Point(it.width,it.height)},getCanvasCenter:function(){return new nt.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(rt){var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),vt=this._getContext(rt.useSketch);vt.save(),vt.translate(it.x,it.y),this.viewer.viewport.flipped?(vt.rotate(Math.PI/180*-rt.degrees),vt.scale(-1,1)):vt.rotate(Math.PI/180*rt.degrees),vt.translate(-it.x,-it.y)},_flip:function(rt){rt=rt||{};var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),vt=this._getContext(rt.useSketch);vt.translate(it.x,0),vt.scale(-1,1),vt.translate(-it.x,0)},_restoreRotationChanges:function(rt){var it=this._getContext(rt);it.restore()},_calculateCanvasSize:function(){var rt=nt.pixelDensityRatio,it=this.viewport.getContainerSize();return{x:Math.round(it.x*rt),y:Math.round(it.y*rt)}},_calculateSketchCanvasSize:function(){var rt=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return rt;var it=Math.ceil(Math.sqrt(rt.x*rt.x+rt.y*rt.y));return{x:it,y:it}}}}(OpenSeadragon),function(nt){nt.Viewport=function(rt){var it=arguments;it.length&&it[0]instanceof nt.Point&&(rt={containerSize:it[0],contentSize:it[1],config:it[2]}),rt.config&&(nt.extend(!0,rt,rt.config),delete rt.config),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt.margins||{}),delete rt.margins,nt.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:nt.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:nt.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:nt.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:nt.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:nt.DEFAULT_SETTINGS.maxZoomLevel,degrees:nt.DEFAULT_SETTINGS.degrees,flipped:nt.DEFAULT_SETTINGS.flipped,homeFillsViewer:nt.DEFAULT_SETTINGS.homeFillsViewer},rt),this._updateContainerInnerSize(),this.centerSpringX=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new nt.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new nt.Rect(0,0,1,1),1),this.goHome(!0),this.update()},nt.Viewport.prototype={resetContentSize:function(rt){return nt.console.assert(rt,"[Viewport.resetContentSize] contentSize is required"),nt.console.assert(rt instanceof nt.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),nt.console.assert(rt.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),nt.console.assert(rt.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new nt.Rect(0,0,1,rt.y/rt.x),rt.x),this},setHomeBounds:function(rt,it){nt.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(rt,it)},_setContentBounds:function(rt,it){nt.console.assert(rt,"[Viewport._setContentBounds] bounds is required"),nt.console.assert(rt instanceof nt.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),nt.console.assert(rt.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),nt.console.assert(rt.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=rt.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(it),this._contentBounds=rt.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(it),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:it,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var rt=this._contentAspectRatio/this.getAspectRatio(),it;return this.homeFillsViewer?it=rt>=1?rt:1:it=rt>=1?1:rt,it/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var rt=this._contentBounds.getCenter(),it=1/this.getHomeZoom(),vt=it/this.getAspectRatio();return new nt.Rect(rt.x-it/2,rt.y-vt/2,it,vt)},goHome:function(rt){return this.viewer&&this.viewer.raiseEvent("home",{immediately:rt}),this.fitBounds(this.getHomeBounds(),rt)},getMinZoom:function(){var rt=this.getHomeZoom(),it=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*rt;return it},getMaxZoom:function(){var rt=this.maxZoomLevel;return rt||(rt=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,rt/=this._contentBounds.width),Math.max(rt,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new nt.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return nt.extend({},this._margins)},setMargins:function(rt){nt.console.assert(nt.type(rt)==="object","[Viewport.setMargins] margins must be an object"),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(rt){return this.getBoundsNoRotate(rt).rotate(-this.getRotation())},getBoundsNoRotate:function(rt){var it=this.getCenter(rt),vt=1/this.getZoom(rt),bt=vt/this.getAspectRatio();return new nt.Rect(it.x-vt/2,it.y-bt/2,vt,bt)},getBoundsWithMargins:function(rt){return this.getBoundsNoRotateWithMargins(rt).rotate(-this.getRotation(),this.getCenter(rt))},getBoundsNoRotateWithMargins:function(rt){var it=this.getBoundsNoRotate(rt),vt=this._containerInnerSize.x*this.getZoom(rt);return it.x-=this._margins.left/vt,it.y-=this._margins.top/vt,it.width+=(this._margins.left+this._margins.right)/vt,it.height+=(this._margins.top+this._margins.bottom)/vt,it},getCenter:function(rt){var it=new nt.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),vt=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),bt,wt,Tt,kt,Lt,Mt,Nt,zt;return rt?it:this.zoomPoint?(bt=this.pixelFromPoint(this.zoomPoint,!0),wt=this.getZoom(),Tt=1/wt,kt=Tt/this.getAspectRatio(),Lt=new nt.Rect(it.x-Tt/2,it.y-kt/2,Tt,kt),Mt=this._pixelFromPoint(this.zoomPoint,Lt),Nt=Mt.minus(bt),zt=Nt.divide(this._containerInnerSize.x*wt),vt.plus(zt)):vt},getZoom:function(rt){return rt?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(rt){return Math.max(Math.min(rt,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(rt){var it=new nt.Rect(rt.x,rt.y,rt.width,rt.height);if(!this.wrapHorizontal){var vt=this.visibilityRatio*it.width,bt=it.x+it.width,wt=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,Tt=this._contentBoundsNoRotate.x-bt+vt,kt=wt-it.x-vt;vt>this._contentBoundsNoRotate.width?it.x+=(Tt+kt)/2:kt<0?it.x+=kt:Tt>0&&(it.x+=Tt)}if(!this.wrapVertical){var Lt=this.visibilityRatio*it.height,Mt=it.y+it.height,Nt=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,zt=this._contentBoundsNoRotate.y-Mt+Lt,Ht=Nt-it.y-Lt;Lt>this._contentBoundsNoRotate.height?it.y+=(zt+Ht)/2:Ht<0?it.y+=Ht:zt>0&&(it.y+=zt)}return it},_raiseConstraintsEvent:function(rt){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:rt})},applyConstraints:function(rt){var it=this.getZoom(),vt=this._applyZoomConstraints(it);it!==vt&&this.zoomTo(vt,this.zoomPoint,rt);var bt=this.getBoundsNoRotate(),wt=this._applyBoundaryConstraints(bt);return this._raiseConstraintsEvent(rt),(bt.x!==wt.x||bt.y!==wt.y||rt)&&this.fitBounds(wt.rotate(-this.getRotation()),rt),this},ensureVisible:function(rt){return this.applyConstraints(rt)},_fitBounds:function(rt,it){it=it||{};var vt=it.immediately||!1,bt=it.constraints||!1,wt=this.getAspectRatio(),Tt=rt.getCenter(),kt=new nt.Rect(rt.x,rt.y,rt.width,rt.height,rt.degrees+this.getRotation()).getBoundingBox();kt.getAspectRatio()>=wt?kt.height=kt.width/wt:kt.width=kt.height*wt,kt.x=Tt.x-kt.width/2,kt.y=Tt.y-kt.height/2;var Lt=1/kt.width;if(bt){var Mt=kt.getAspectRatio(),Nt=this._applyZoomConstraints(Lt);Lt!==Nt&&(Lt=Nt,kt.width=1/Lt,kt.x=Tt.x-kt.width/2,kt.height=kt.width/Mt,kt.y=Tt.y-kt.height/2),kt=this._applyBoundaryConstraints(kt),Tt=kt.getCenter(),this._raiseConstraintsEvent(vt)}if(vt)return this.panTo(Tt,!0),this.zoomTo(Lt,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var zt=this.getBounds(),Ht=this.getZoom();if(Ht===0||Math.abs(Lt/Ht-1)<1e-8)return this.zoomTo(Lt,!0),this.panTo(Tt,vt);kt=kt.rotate(-this.getRotation());var Wt=kt.getTopLeft().times(Lt).minus(zt.getTopLeft().times(Ht)).divide(Lt-Ht);return this.zoomTo(Lt,Wt,vt)},fitBounds:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!1})},fitBoundsWithConstraints:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!0})},fitVertically:function(rt){var it=new nt.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(it,rt)},fitHorizontally:function(rt){var it=new nt.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(it,rt)},getConstrainedBounds:function(rt){var it,vt;return it=this.getBounds(rt),vt=this._applyBoundaryConstraints(it),vt},panBy:function(rt,it){var vt=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(vt.plus(rt),it)},panTo:function(rt,it){return it?(this.centerSpringX.resetTo(rt.x),this.centerSpringY.resetTo(rt.y)):(this.centerSpringX.springTo(rt.x),this.centerSpringY.springTo(rt.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:rt,immediately:it}),this},zoomBy:function(rt,it,vt){return this.zoomTo(this.zoomSpring.target.value*rt,it,vt)},zoomTo:function(rt,it,vt){var bt=this;return this.zoomPoint=it instanceof nt.Point&&!isNaN(it.x)&&!isNaN(it.y)?it:null,vt?this._adjustCenterSpringsForZoomPoint(function(){bt.zoomSpring.resetTo(rt)}):this.zoomSpring.springTo(rt),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:rt,refPoint:it,immediately:vt}),this},setRotation:function(rt){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=nt.positiveModulo(rt,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:rt}),this)},getRotation:function(){return this.degrees},resize:function(rt,it){var vt=this.getBoundsNoRotate(),bt=vt,wt;return this.containerSize.x=rt.x,this.containerSize.y=rt.y,this._updateContainerInnerSize(),it&&(wt=rt.x/this.containerSize.x,bt.width=vt.width*wt,bt.height=bt.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:rt,maintain:it}),this.fitBounds(bt,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new nt.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var rt=this;this._adjustCenterSpringsForZoomPoint(function(){rt.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var it=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,it},_adjustCenterSpringsForZoomPoint:function(rt){if(this.zoomPoint){var it=this.pixelFromPoint(this.zoomPoint,!0);rt();var vt=this.pixelFromPoint(this.zoomPoint,!0),bt=vt.minus(it),wt=this.deltaPointsFromPixels(bt,!0);this.centerSpringX.shiftBy(wt.x),this.centerSpringY.shiftBy(wt.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else rt()},deltaPixelsFromPointsNoRotate:function(rt,it){return rt.times(this._containerInnerSize.x*this.getZoom(it))},deltaPixelsFromPoints:function(rt,it){return this.deltaPixelsFromPointsNoRotate(rt.rotate(this.getRotation()),it)},deltaPointsFromPixelsNoRotate:function(rt,it){return rt.divide(this._containerInnerSize.x*this.getZoom(it))},deltaPointsFromPixels:function(rt,it){return this.deltaPointsFromPixelsNoRotate(rt,it).rotate(-this.getRotation())},pixelFromPointNoRotate:function(rt,it){return this._pixelFromPointNoRotate(rt,this.getBoundsNoRotate(it))},pixelFromPoint:function(rt,it){return this._pixelFromPoint(rt,this.getBoundsNoRotate(it))},_pixelFromPointNoRotate:function(rt,it){return rt.minus(it.getTopLeft()).times(this._containerInnerSize.x/it.width).plus(new nt.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(rt,it){return this._pixelFromPointNoRotate(rt.rotate(this.getRotation(),this.getCenter(!0)),it)},pointFromPixelNoRotate:function(rt,it){var vt=this.getBoundsNoRotate(it);return rt.minus(new nt.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/vt.width).plus(vt.getTopLeft())},pointFromPixel:function(rt,it){return this.pointFromPixelNoRotate(rt,it).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(rt,it){var vt=this._contentBoundsNoRotate.width;return new nt.Point(rt*this._contentSizeNoRotate.x/vt,it*this._contentSizeNoRotate.x/vt)},viewportToImageCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.viewportToImageCoordinates(rt.x,rt.y);if(this.viewer){var vt=this.viewer.world.getItemCount();if(vt>1)nt.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(vt===1){var bt=this.viewer.world.getItemAt(0);return bt.viewportToImageCoordinates(rt,it,!0)}}return this._viewportToImageDelta(rt-this._contentBoundsNoRotate.x,it-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(rt,it){var vt=this._contentBoundsNoRotate.width;return new nt.Point(rt/this._contentSizeNoRotate.x*vt,it/this._contentSizeNoRotate.x*vt)},imageToViewportCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.imageToViewportCoordinates(rt.x,rt.y);if(this.viewer){var vt=this.viewer.world.getItemCount();if(vt>1)nt.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(vt===1){var bt=this.viewer.world.getItemAt(0);return bt.imageToViewportCoordinates(rt,it,!0)}}var wt=this._imageToViewportDelta(rt,it);return wt.x+=this._contentBoundsNoRotate.x,wt.y+=this._contentBoundsNoRotate.y,wt},imageToViewportRectangle:function(rt,it,vt,bt){var wt=rt;if(wt instanceof nt.Rect||(wt=new nt.Rect(rt,it,vt,bt)),this.viewer){var Tt=this.viewer.world.getItemCount();if(Tt>1)nt.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(Tt===1){var kt=this.viewer.world.getItemAt(0);return kt.imageToViewportRectangle(rt,it,vt,bt,!0)}}var Lt=this.imageToViewportCoordinates(wt.x,wt.y),Mt=this._imageToViewportDelta(wt.width,wt.height);return new nt.Rect(Lt.x,Lt.y,Mt.x,Mt.y,wt.degrees)},viewportToImageRectangle:function(rt,it,vt,bt){var wt=rt;if(wt instanceof nt.Rect||(wt=new nt.Rect(rt,it,vt,bt)),this.viewer){var Tt=this.viewer.world.getItemCount();if(Tt>1)nt.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(Tt===1){var kt=this.viewer.world.getItemAt(0);return kt.viewportToImageRectangle(rt,it,vt,bt,!0)}}var Lt=this.viewportToImageCoordinates(wt.x,wt.y),Mt=this._viewportToImageDelta(wt.width,wt.height);return new nt.Rect(Lt.x,Lt.y,Mt.x,Mt.y,wt.degrees)},viewerElementToImageCoordinates:function(rt){var it=this.pointFromPixel(rt,!0);return this.viewportToImageCoordinates(it)},imageToViewerElementCoordinates:function(rt){var it=this.imageToViewportCoordinates(rt);return this.pixelFromPoint(it,!0)},windowToImageCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(it)},imageToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var it=this.imageToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(rt){return this.pointFromPixel(rt,!0)},viewportToViewerElementCoordinates:function(rt){return this.pixelFromPoint(rt,!0)},viewerElementToViewportRectangle:function(rt){return nt.Rect.fromSummits(this.pointFromPixel(rt.getTopLeft(),!0),this.pointFromPixel(rt.getTopRight(),!0),this.pointFromPixel(rt.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(rt){return nt.Rect.fromSummits(this.pixelFromPoint(rt.getTopLeft(),!0),this.pixelFromPoint(rt.getTopRight(),!0),this.pixelFromPoint(rt.getBottomLeft(),!0))},windowToViewportCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(it)},viewportToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var it=this.viewportToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewportToImageZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(it===1){var vt=this.viewer.world.getItemAt(0);return vt.viewportToImageZoom(rt)}}var bt=this._contentSizeNoRotate.x,wt=this._containerInnerSize.x,Tt=this._contentBoundsNoRotate.width,kt=wt/bt*Tt;return rt*kt},imageToViewportZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(it===1){var vt=this.viewer.world.getItemAt(0);return vt.imageToViewportZoom(rt)}}var bt=this._contentSizeNoRotate.x,wt=this._containerInnerSize.x,Tt=this._contentBoundsNoRotate.width,kt=bt/wt/Tt;return rt*kt},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(rt){return this.flipped===rt?this:(this.flipped=rt,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:rt}),this)}}}(OpenSeadragon),function(nt){nt.TiledImage=function(Yt){var nn=this;nt.console.assert(Yt.tileCache,"[TiledImage] options.tileCache is required"),nt.console.assert(Yt.drawer,"[TiledImage] options.drawer is required"),nt.console.assert(Yt.viewer,"[TiledImage] options.viewer is required"),nt.console.assert(Yt.imageLoader,"[TiledImage] options.imageLoader is required"),nt.console.assert(Yt.source,"[TiledImage] options.source is required"),nt.console.assert(!Yt.clip||Yt.clip instanceof nt.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),nt.EventSource.call(this),this._tileCache=Yt.tileCache,delete Yt.tileCache,this._drawer=Yt.drawer,delete Yt.drawer,this._imageLoader=Yt.imageLoader,delete Yt.imageLoader,Yt.clip instanceof nt.Rect&&(this._clip=Yt.clip.clone()),delete Yt.clip;var rn=Yt.x||0;delete Yt.x;var ln=Yt.y||0;delete Yt.y,this.normHeight=Yt.source.dimensions.y/Yt.source.dimensions.x,this.contentAspectX=Yt.source.dimensions.x/Yt.source.dimensions.y;var sn=1;Yt.width?(sn=Yt.width,delete Yt.width,Yt.height&&(nt.console.error("specifying both width and height to a tiledImage is not supported"),delete Yt.height)):Yt.height&&(sn=Yt.height/this.normHeight,delete Yt.height);var mn=Yt.fitBounds;delete Yt.fitBounds;var wn=Yt.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete Yt.fitBoundsPlacement;var Cn=Yt.degrees||0;delete Yt.degrees,nt.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,immediateRender:nt.DEFAULT_SETTINGS.immediateRender,blendTime:nt.DEFAULT_SETTINGS.blendTime,alwaysBlend:nt.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:nt.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:nt.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:nt.DEFAULT_SETTINGS.iOSDevice,debugMode:nt.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:nt.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:nt.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:nt.DEFAULT_SETTINGS.placeholderFillStyle,opacity:nt.DEFAULT_SETTINGS.opacity,preload:nt.DEFAULT_SETTINGS.preload,compositeOperation:nt.DEFAULT_SETTINGS.compositeOperation},Yt),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new nt.Spring({initial:rn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new nt.Spring({initial:ln,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new nt.Spring({initial:sn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new nt.Spring({initial:Cn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),mn&&this.fitBounds(mn,wn,!0),this._drawingHandler=function(An){nn.viewer.raiseEvent("tile-drawing",nt.extend({tiledImage:nn},An))}},nt.extend(nt.TiledImage.prototype,nt.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(Yt){Yt!==this._fullyLoaded&&(this._fullyLoaded=Yt,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=nt.now(),this._needsDraw=!0},update:function(){var Yt=this._xSpring.update(),nn=this._ySpring.update(),rn=this._scaleSpring.update(),ln=this._degreesSpring.update();return Yt||nn||rn||ln?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(Yt){return this.getBoundsNoRotate(Yt).rotate(this.getRotation(Yt),this._getRotationPoint(Yt))},getBoundsNoRotate:function(Yt){return Yt?new nt.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new nt.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return nt.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(Yt){var nn=this.getBoundsNoRotate(Yt);if(this._clip){var rn=Yt?this._worldWidthCurrent:this._worldWidthTarget,ln=rn/this.source.dimensions.x,sn=this._clip.times(ln);nn=new nt.Rect(nn.x+sn.x,nn.y+sn.y,sn.width,sn.height)}return nn.rotate(this.getRotation(Yt),this._getRotationPoint(Yt))},getContentSize:function(){return new nt.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(Yt,nn,rn){var ln=rn?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Yt*(this.source.dimensions.x/ln),nn*(this.source.dimensions.y*this.contentAspectX/ln))},viewportToImageCoordinates:function(Yt,nn,rn){var ln;return Yt instanceof nt.Point?(rn=nn,ln=Yt):ln=new nt.Point(Yt,nn),ln=ln.rotate(-this.getRotation(rn),this._getRotationPoint(rn)),rn?this._viewportToImageDelta(ln.x-this._xSpring.current.value,ln.y-this._ySpring.current.value):this._viewportToImageDelta(ln.x-this._xSpring.target.value,ln.y-this._ySpring.target.value)},_imageToViewportDelta:function(Yt,nn,rn){var ln=rn?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Yt/this.source.dimensions.x*ln,nn/this.source.dimensions.y/this.contentAspectX*ln)},imageToViewportCoordinates:function(Yt,nn,rn){Yt instanceof nt.Point&&(rn=nn,nn=Yt.y,Yt=Yt.x);var ln=this._imageToViewportDelta(Yt,nn);return rn?(ln.x+=this._xSpring.current.value,ln.y+=this._ySpring.current.value):(ln.x+=this._xSpring.target.value,ln.y+=this._ySpring.target.value),ln.rotate(this.getRotation(rn),this._getRotationPoint(rn))},imageToViewportRectangle:function(Yt,nn,rn,ln,sn){var mn=Yt;mn instanceof nt.Rect?sn=nn:mn=new nt.Rect(Yt,nn,rn,ln);var wn=this.imageToViewportCoordinates(mn.getTopLeft(),sn),Cn=this._imageToViewportDelta(mn.width,mn.height,sn);return new nt.Rect(wn.x,wn.y,Cn.x,Cn.y,mn.degrees+this.getRotation(sn))},viewportToImageRectangle:function(Yt,nn,rn,ln,sn){var mn=Yt;Yt instanceof nt.Rect?sn=nn:mn=new nt.Rect(Yt,nn,rn,ln);var wn=this.viewportToImageCoordinates(mn.getTopLeft(),sn),Cn=this._viewportToImageDelta(mn.width,mn.height,sn);return new nt.Rect(wn.x,wn.y,Cn.x,Cn.y,mn.degrees-this.getRotation(sn))},viewerElementToImageCoordinates:function(Yt){var nn=this.viewport.pointFromPixel(Yt,!0);return this.viewportToImageCoordinates(nn)},imageToViewerElementCoordinates:function(Yt){var nn=this.imageToViewportCoordinates(Yt);return this.viewport.pixelFromPoint(nn,!0)},windowToImageCoordinates:function(Yt){var nn=Yt.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(nn)},imageToWindowCoordinates:function(Yt){var nn=this.imageToViewerElementCoordinates(Yt);return nn.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(Yt){var nn=this._scaleSpring.current.value;return Yt=Yt.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new nt.Rect((Yt.x-this._xSpring.current.value)/nn,(Yt.y-this._ySpring.current.value)/nn,Yt.width/nn,Yt.height/nn,Yt.degrees)},viewportToImageZoom:function(Yt){var nn=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return nn*Yt},imageToViewportZoom:function(Yt){var nn=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Yt/nn},setPosition:function(Yt,nn){var rn=this._xSpring.target.value===Yt.x&&this._ySpring.target.value===Yt.y;if(nn){if(rn&&this._xSpring.current.value===Yt.x&&this._ySpring.current.value===Yt.y)return;this._xSpring.resetTo(Yt.x),this._ySpring.resetTo(Yt.y),this._needsDraw=!0}else{if(rn)return;this._xSpring.springTo(Yt.x),this._ySpring.springTo(Yt.y),this._needsDraw=!0}rn||this._raiseBoundsChange()},setWidth:function(Yt,nn){this._setScale(Yt,nn)},setHeight:function(Yt,nn){this._setScale(Yt/this.normHeight,nn)},setCroppingPolygons:function(Yt){var nn=function(ln){return ln instanceof nt.Point||typeof ln.x=="number"&&typeof ln.y=="number"},rn=function(ln){return ln.map(function(sn){try{if(nn(sn))return{x:sn.x,y:sn.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!nt.isArray(Yt))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=Yt.map(function(ln){return rn(ln)})}catch(ln){nt.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),nt.console.error(ln),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(Yt,nn,rn){nn=nn||nt.Placement.CENTER;var ln=nt.Placement.properties[nn],sn=this.contentAspectX,mn=0,wn=0,Cn=1,An=1;if(this._clip&&(sn=this._clip.getAspectRatio(),Cn=this._clip.width/this.source.dimensions.x,An=this._clip.height/this.source.dimensions.y,Yt.getAspectRatio()>sn?(mn=this._clip.x/this._clip.height*Yt.height,wn=this._clip.y/this._clip.height*Yt.height):(mn=this._clip.x/this._clip.width*Yt.width,wn=this._clip.y/this._clip.width*Yt.width)),Yt.getAspectRatio()>sn){var Pn=Yt.height/An,On=0;ln.isHorizontallyCentered?On=(Yt.width-Yt.height*sn)/2:ln.isRight&&(On=Yt.width-Yt.height*sn),this.setPosition(new nt.Point(Yt.x-mn+On,Yt.y-wn),rn),this.setHeight(Pn,rn)}else{var kn=Yt.width/Cn,gn=0;ln.isVerticallyCentered?gn=(Yt.height-Yt.width/sn)/2:ln.isBottom&&(gn=Yt.height-Yt.width/sn),this.setPosition(new nt.Point(Yt.x-mn,Yt.y-wn+gn),rn),this.setWidth(kn,rn)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(Yt){nt.console.assert(!Yt||Yt instanceof nt.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),Yt instanceof nt.Rect?this._clip=Yt.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(Yt){Yt!==this.opacity&&(this.opacity=Yt,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(Yt){this._preload=!!Yt,this._needsDraw=!0},getRotation:function(Yt){return Yt?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(Yt,nn){this._degreesSpring.target.value===Yt&&this._degreesSpring.isAtTargetValue()||(nn?this._degreesSpring.resetTo(Yt):this._degreesSpring.springTo(Yt),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(Yt){return this.getBoundsNoRotate(Yt).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(Yt){Yt!==this.compositeOperation&&(this.compositeOperation=Yt,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(Yt,nn){var rn=this._scaleSpring.target.value===Yt;if(nn){if(rn&&this._scaleSpring.current.value===Yt)return;this._scaleSpring.resetTo(Yt),this._updateForScale(),this._needsDraw=!0}else{if(rn)return;this._scaleSpring.springTo(Yt),this._updateForScale(),this._needsDraw=!0}rn||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var Yt=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),nn=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,rn=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(nn/this.minPixelRatio)/Math.log(2))));return rn=Math.max(rn,this.source.minLevel||0),Yt=Math.min(Yt,rn),{lowestLevel:Yt,highestLevel:rn}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var Yt=this.lastDrawn.pop();Yt.beingDrawn=!1}var nn=this.viewport,rn=this._viewportToTiledImageRectangle(nn.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var ln=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(rn=rn.intersection(ln),rn===null)return}for(var sn=this._getLevelsInterval(),mn=sn.lowestLevel,wn=sn.highestLevel,Cn=null,An=!1,Pn=nt.now(),On=wn;On>=mn;On--){var kn=!1,gn=nn.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(On),!0).x*this._scaleSpring.current.value;if(On===mn||!An&&gn>=this.minPixelRatio)kn=!0,An=!0;else if(!An)continue;var Vn=nn.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(On),!1).x*this._scaleSpring.current.value,pn=nn.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,pr=this.immediateRender?1:pn,yn=Math.min(1,(gn-.5)/.5),mr=pr/Math.abs(pr-Vn);if(Cn=rt(this,An,kn,On,yn,mr,rn,Pn,Cn),Mt(this.coverage,On))break}Zt(this,this.lastDrawn),Cn&&!Cn.context2D?(bt(this,Cn,Pn),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(Yt,nn,rn){var ln,sn;this.wrapHorizontal?(ln=nt.positiveModulo(nn.x,1),sn=nt.positiveModulo(rn.x,1)):(ln=Math.max(0,nn.x),sn=Math.min(1,rn.x));var mn,wn,Cn=1/this.source.aspectRatio;this.wrapVertical?(mn=nt.positiveModulo(nn.y,Cn),wn=nt.positiveModulo(rn.y,Cn)):(mn=Math.max(0,nn.y),wn=Math.min(Cn,rn.y));var An=this.source.getTileAtPoint(Yt,new nt.Point(ln,mn)),Pn=this.source.getTileAtPoint(Yt,new nt.Point(sn,wn)),On=this.source.getNumTiles(Yt);return this.wrapHorizontal&&(An.x+=On.x*Math.floor(nn.x),Pn.x+=On.x*Math.floor(rn.x)),this.wrapVertical&&(An.y+=On.y*Math.floor(nn.y/Cn),Pn.y+=On.y*Math.floor(rn.y/Cn)),{topLeft:An,bottomRight:Pn}}});function rt(Yt,nn,rn,ln,sn,mn,wn,Cn,An){var Pn=wn.getBoundingBox().getTopLeft(),On=wn.getBoundingBox().getBottomRight();Yt.viewer&&Yt.viewer.raiseEvent("update-level",{tiledImage:Yt,havedrawn:nn,level:ln,opacity:sn,visibility:mn,drawArea:wn,topleft:Pn,bottomright:On,currenttime:Cn,best:An}),Ht(Yt.coverage,ln),Ht(Yt.loadingCoverage,ln);for(var kn=Yt._getCornerTiles(ln,Pn,On),gn=kn.topLeft,Vn=kn.bottomRight,pn=Yt.source.getNumTiles(ln),pr=Yt.viewport.pixelFromPoint(Yt.viewport.getCenter()),yn=gn.x;yn<=Vn.x;yn++)for(var mr=gn.y;mr<=Vn.y;mr++){if(!Yt.wrapHorizontal&&!Yt.wrapVertical){var Er=Yt.source.getTileBounds(ln,yn,mr);if(wn.intersection(Er)===null)continue}An=it(Yt,rn,nn,yn,mr,ln,sn,mn,pr,pn,Cn,An)}return An}function it(Yt,nn,rn,ln,sn,mn,wn,Cn,An,Pn,On,kn){var gn=vt(ln,sn,mn,Yt,Yt.source,Yt.tilesMatrix,On,Pn,Yt._worldWidthCurrent,Yt._worldHeightCurrent),Vn=rn;Yt.viewer&&Yt.viewer.raiseEvent("update-tile",{tiledImage:Yt,tile:gn}),zt(Yt.coverage,mn,ln,sn,!1);var pn=gn.loaded||gn.loading||Nt(Yt.loadingCoverage,mn,ln,sn);if(zt(Yt.loadingCoverage,mn,ln,sn,pn),!gn.exists||(nn&&!Vn&&(Nt(Yt.coverage,mn,ln,sn)?zt(Yt.coverage,mn,ln,sn,!0):Vn=!0),!Vn))return kn;if(kt(gn,Yt.source.tileOverlap,Yt.viewport,An,Cn,Yt),!gn.loaded)if(gn.context2D)Tt(Yt,gn);else{var pr=Yt._tileCache.getImageRecord(gn.cacheKey);if(pr){var yn=pr.getImage();Tt(Yt,gn,yn)}}if(gn.loaded){var mr=Lt(Yt,gn,ln,sn,mn,wn,On);mr&&(Yt._needsDraw=!0)}else gn.loading?Yt._tilesLoading++:pn||(kn=Wt(kn,gn));return kn}function vt(Yt,nn,rn,ln,sn,mn,wn,Cn,An,Pn){var On,kn,gn,Vn,pn,pr,yn,mr,Er;return mn[rn]||(mn[rn]={}),mn[rn][Yt]||(mn[rn][Yt]={}),mn[rn][Yt][nn]||(On=(Cn.x+Yt%Cn.x)%Cn.x,kn=(Cn.y+nn%Cn.y)%Cn.y,gn=sn.getTileBounds(rn,On,kn),Vn=sn.getTileBounds(rn,On,kn,!0),pn=sn.tileExists(rn,On,kn),pr=sn.getTileUrl(rn,On,kn),ln.loadTilesWithAjax?(yn=sn.getTileAjaxHeaders(rn,On,kn),nt.isPlainObject(ln.ajaxHeaders)&&(yn=nt.extend({},ln.ajaxHeaders,yn))):yn=null,mr=sn.getContext2D?sn.getContext2D(rn,On,kn):void 0,gn.x+=(Yt-On)/Cn.x,gn.y+=Pn/An*((nn-kn)/Cn.y),Er=new nt.Tile(rn,Yt,nn,gn,pn,pr,mr,ln.loadTilesWithAjax,yn,Vn),On===Cn.x-1&&(Er.isRightMost=!0),kn===Cn.y-1&&(Er.isBottomMost=!0),mn[rn][Yt][nn]=Er),Er=mn[rn][Yt][nn],Er.lastTouchTime=wn,Er}function bt(Yt,nn,rn){nn.loading=!0,Yt._imageLoader.addJob({src:nn.url,loadWithAjax:nn.loadWithAjax,ajaxHeaders:nn.ajaxHeaders,crossOriginPolicy:Yt.crossOriginPolicy,ajaxWithCredentials:Yt.ajaxWithCredentials,callback:function(ln,sn,mn){wt(Yt,nn,rn,ln,sn,mn)},abort:function(){nn.loading=!1}})}function wt(Yt,nn,rn,ln,sn,mn){if(!ln){nt.console.log("Tile %s failed to load: %s - error: %s",nn,nn.url,sn),Yt.viewer.raiseEvent("tile-load-failed",{tile:nn,tiledImage:Yt,time:rn,message:sn,tileRequest:mn}),nn.loading=!1,nn.exists=!1;return}if(rn<Yt.lastResetTime){nt.console.log("Ignoring tile %s loaded before reset: %s",nn,nn.url),nn.loading=!1;return}var wn=function(){var Cn=Yt.source.getClosestLevel();Tt(Yt,nn,ln,Cn,mn)};Yt._midDraw?window.setTimeout(wn,1):wn()}function Tt(Yt,nn,rn,ln,sn){var mn=0;function wn(){return mn++,Cn}function Cn(){mn--,mn===0&&(nn.loading=!1,nn.loaded=!0,nn.context2D||Yt._tileCache.cacheTile({image:rn,tile:nn,cutoff:ln,tiledImage:Yt}),Yt._needsDraw=!0)}Yt.viewer.raiseEvent("tile-loaded",{tile:nn,tiledImage:Yt,tileRequest:sn,image:rn,getCompletionCallback:wn}),wn()()}function kt(Yt,nn,rn,ln,sn,mn){var wn=Yt.bounds.getTopLeft();wn.x*=mn._scaleSpring.current.value,wn.y*=mn._scaleSpring.current.value,wn.x+=mn._xSpring.current.value,wn.y+=mn._ySpring.current.value;var Cn=Yt.bounds.getSize();Cn.x*=mn._scaleSpring.current.value,Cn.y*=mn._scaleSpring.current.value;var An=rn.pixelFromPointNoRotate(wn,!0),Pn=rn.pixelFromPointNoRotate(wn,!1),On=rn.deltaPixelsFromPointsNoRotate(Cn,!0),kn=rn.deltaPixelsFromPointsNoRotate(Cn,!1),gn=Pn.plus(kn.divide(2)),Vn=ln.squaredDistanceTo(gn);nn||(On=On.plus(new nt.Point(1,1))),Yt.isRightMost&&mn.wrapHorizontal&&(On.x+=.75),Yt.isBottomMost&&mn.wrapVertical&&(On.y+=.75),Yt.position=An,Yt.size=On,Yt.squaredDistance=Vn,Yt.visibility=sn}function Lt(Yt,nn,rn,ln,sn,mn,wn){var Cn=1e3*Yt.blendTime,An,Pn;if(nn.blendStart||(nn.blendStart=wn),An=wn-nn.blendStart,Pn=Cn?Math.min(1,An/Cn):1,Yt.alwaysBlend&&(Pn*=mn),nn.opacity=Pn,Yt.lastDrawn.push(nn),Pn===1)zt(Yt.coverage,sn,rn,ln,!0),Yt._hasOpaqueTile=!0;else if(An<Cn)return!0;return!1}function Mt(Yt,nn,rn,ln){var sn,mn,wn,Cn;if(!Yt[nn])return!1;if(rn===void 0||ln===void 0){sn=Yt[nn];for(wn in sn)if(Object.prototype.hasOwnProperty.call(sn,wn)){mn=sn[wn];for(Cn in mn)if(Object.prototype.hasOwnProperty.call(mn,Cn)&&!mn[Cn])return!1}return!0}return Yt[nn][rn]===void 0||Yt[nn][rn][ln]===void 0||Yt[nn][rn][ln]===!0}function Nt(Yt,nn,rn,ln){return rn===void 0||ln===void 0?Mt(Yt,nn+1):Mt(Yt,nn+1,2*rn,2*ln)&&Mt(Yt,nn+1,2*rn,2*ln+1)&&Mt(Yt,nn+1,2*rn+1,2*ln)&&Mt(Yt,nn+1,2*rn+1,2*ln+1)}function zt(Yt,nn,rn,ln,sn){if(!Yt[nn]){nt.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",nn);return}Yt[nn][rn]||(Yt[nn][rn]={}),Yt[nn][rn][ln]=sn}function Ht(Yt,nn){Yt[nn]={}}function Wt(Yt,nn){return!Yt||nn.visibility>Yt.visibility||nn.visibility==Yt.visibility&&nn.squaredDistance<Yt.squaredDistance?nn:Yt}function Zt(Yt,nn){if(!(Yt.opacity===0||nn.length===0&&!Yt.placeholderFillStyle)){var rn=nn[0],ln;rn&&(ln=Yt.opacity<1||Yt.compositeOperation&&Yt.compositeOperation!=="source-over"||!Yt._isBottomItem()&&rn._hasTransparencyChannel());var sn,mn,wn=Yt.viewport.getZoom(!0),Cn=Yt.viewportToImageZoom(wn);nn.length>1&&Cn>Yt.smoothTileEdgesMinZoom&&!Yt.iOSDevice&&Yt.getRotation(!0)%360===0&&nt.supportsCanvas&&(ln=!0,sn=rn.getScaleForEdgeSmoothing(),mn=rn.getTranslationForEdgeSmoothing(sn,Yt._drawer.getCanvasSize(!1),Yt._drawer.getCanvasSize(!0)));var An;ln&&(sn||(An=Yt.viewport.viewportToViewerElementRectangle(Yt.getClippedBounds(!0)).getIntegerBoundingBox(),Yt._drawer.viewer.viewport.getFlip()&&(Yt.viewport.degrees!==0||Yt.getRotation(!0)%360!==0)&&(An.x=Yt._drawer.viewer.container.clientWidth-(An.x+An.width)),An=An.times(nt.pixelDensityRatio)),Yt._drawer._clear(!0,An)),sn||(Yt.viewport.degrees!==0&&Yt._drawer._offsetForRotation({degrees:Yt.viewport.degrees,useSketch:ln}),Yt.getRotation(!0)%360!==0&&Yt._drawer._offsetForRotation({degrees:Yt.getRotation(!0),point:Yt.viewport.pixelFromPointNoRotate(Yt._getRotationPoint(!0),!0),useSketch:ln}),Yt.viewport.degrees===0&&Yt.getRotation(!0)%360===0&&Yt._drawer.viewer.viewport.getFlip()&&Yt._drawer._flip());var Pn=!1;if(Yt._clip){Yt._drawer.saveContext(ln);var On=Yt.imageToViewportRectangle(Yt._clip,!0);On=On.rotate(-Yt.getRotation(!0),Yt._getRotationPoint(!0));var kn=Yt._drawer.viewportToDrawerRectangle(On);sn&&(kn=kn.times(sn)),mn&&(kn=kn.translate(mn)),Yt._drawer.setClip(kn,ln),Pn=!0}if(Yt._croppingPolygons){Yt._drawer.saveContext(ln);try{var gn=Yt._croppingPolygons.map(function(yn){return yn.map(function(mr){var Er=Yt.imageToViewportCoordinates(mr.x,mr.y,!0).rotate(-Yt.getRotation(!0),Yt._getRotationPoint(!0)),Mr=Yt._drawer.viewportCoordToDrawerCoord(Er);return sn&&(Mr=Mr.times(sn)),Mr})});Yt._drawer.clipWithPolygons(gn,ln)}catch(yn){nt.console.error(yn)}Pn=!0}if(Yt.placeholderFillStyle&&Yt._hasOpaqueTile===!1){var Vn=Yt._drawer.viewportToDrawerRectangle(Yt.getBounds(!0));sn&&(Vn=Vn.times(sn)),mn&&(Vn=Vn.translate(mn));var pn=null;typeof Yt.placeholderFillStyle=="function"?pn=Yt.placeholderFillStyle(Yt,Yt._drawer.context):pn=Yt.placeholderFillStyle,Yt._drawer.drawRectangle(Vn,pn,ln)}for(var pr=nn.length-1;pr>=0;pr--)rn=nn[pr],Yt._drawer.drawTile(rn,Yt._drawingHandler,ln,sn,mn),rn.beingDrawn=!0,Yt.viewer&&Yt.viewer.raiseEvent("tile-drawn",{tiledImage:Yt,tile:rn});Pn&&Yt._drawer.restoreContext(ln),sn||(Yt.getRotation(!0)%360!==0&&Yt._drawer._restoreRotationChanges(ln),Yt.viewport.degrees!==0&&Yt._drawer._restoreRotationChanges(ln)),ln&&(sn&&(Yt.viewport.degrees!==0&&Yt._drawer._offsetForRotation({degrees:Yt.viewport.degrees,useSketch:!1}),Yt.getRotation(!0)%360!==0&&Yt._drawer._offsetForRotation({degrees:Yt.getRotation(!0),point:Yt.viewport.pixelFromPointNoRotate(Yt._getRotationPoint(!0),!0),useSketch:!1})),Yt._drawer.blendSketch({opacity:Yt.opacity,scale:sn,translate:mn,compositeOperation:Yt.compositeOperation,bounds:An}),sn&&(Yt.getRotation(!0)%360!==0&&Yt._drawer._restoreRotationChanges(!1),Yt.viewport.degrees!==0&&Yt._drawer._restoreRotationChanges(!1))),sn||Yt.viewport.degrees===0&&Yt.getRotation(!0)%360===0&&Yt._drawer.viewer.viewport.getFlip()&&Yt._drawer._flip(),tn(Yt,nn)}}function tn(Yt,nn){if(Yt.debugMode)for(var rn=nn.length-1;rn>=0;rn--){var ln=nn[rn];try{Yt._drawer.drawDebugInfo(ln,nn.length,rn,Yt)}catch(sn){nt.console.error(sn)}}}}(OpenSeadragon),function(nt){var rt=function(vt){nt.console.assert(vt,"[TileCache.cacheTile] options is required"),nt.console.assert(vt.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(vt.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=vt.tile,this.tiledImage=vt.tiledImage},it=function(vt){nt.console.assert(vt,"[ImageRecord] options is required"),nt.console.assert(vt.image,"[ImageRecord] options.image is required"),this._image=vt.image,this._tiles=[]};it.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var vt=document.createElement("canvas");vt.width=this._image.width,vt.height=this._image.height,this._renderedContext=vt.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(vt){nt.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=vt},addTile:function(vt){nt.console.assert(vt,"[ImageRecord.addTile] tile is required"),this._tiles.push(vt)},removeTile:function(vt){for(var bt=0;bt<this._tiles.length;bt++)if(this._tiles[bt]===vt){this._tiles.splice(bt,1);return}nt.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",vt)},getTileCount:function(){return this._tiles.length}},nt.TileCache=function(vt){vt=vt||{},this._maxImageCacheCount=vt.maxImageCacheCount||nt.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},nt.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(vt){nt.console.assert(vt,"[TileCache.cacheTile] options is required"),nt.console.assert(vt.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(vt.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),nt.console.assert(vt.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var bt=vt.cutoff||0,wt=this._tilesLoaded.length,Tt=this._imagesLoaded[vt.tile.cacheKey];if(Tt||(nt.console.assert(vt.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),Tt=this._imagesLoaded[vt.tile.cacheKey]=new it({image:vt.image}),this._imagesLoadedCount++),Tt.addTile(vt.tile),vt.tile.cacheImageRecord=Tt,this._imagesLoadedCount>this._maxImageCacheCount){for(var kt=null,Lt=-1,Mt=null,Nt,zt,Ht,Wt,Zt,tn,Yt=this._tilesLoaded.length-1;Yt>=0;Yt--)if(tn=this._tilesLoaded[Yt],Nt=tn.tile,!(Nt.level<=bt||Nt.beingDrawn)){if(!kt){kt=Nt,Lt=Yt,Mt=tn;continue}Wt=Nt.lastTouchTime,zt=kt.lastTouchTime,Zt=Nt.level,Ht=kt.level,(Wt<zt||Wt==zt&&Zt>Ht)&&(kt=Nt,Lt=Yt,Mt=tn)}kt&&Lt>=0&&(this._unloadTile(Mt),wt=Lt)}this._tilesLoaded[wt]=new rt({tile:vt.tile,tiledImage:vt.tiledImage})},clearTilesFor:function(vt){nt.console.assert(vt,"[TileCache.clearTilesFor] tiledImage is required");for(var bt,wt=0;wt<this._tilesLoaded.length;++wt)bt=this._tilesLoaded[wt],bt.tiledImage===vt&&(this._unloadTile(bt),this._tilesLoaded.splice(wt,1),wt--)},getImageRecord:function(vt){return nt.console.assert(vt,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[vt]},_unloadTile:function(vt){nt.console.assert(vt,"[TileCache._unloadTile] tileRecord is required");var bt=vt.tile,wt=vt.tiledImage;bt.unload(),bt.cacheImageRecord=null;var Tt=this._imagesLoaded[bt.cacheKey];Tt.removeTile(bt),Tt.getTileCount()||(Tt.destroy(),delete this._imagesLoaded[bt.cacheKey],this._imagesLoadedCount--),wt.viewer.raiseEvent("tile-unloaded",{tile:bt,tiledImage:wt})}}}(OpenSeadragon),function(nt){nt.World=function(rt){var it=this;nt.console.assert(rt.viewer,"[World] options.viewer is required"),nt.EventSource.call(this),this.viewer=rt.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(vt){it._autoRefigureSizes?it._figureSizes():it._needsSizesFigured=!0},this._figureSizes()},nt.extend(nt.World.prototype,nt.EventSource.prototype,{addItem:function(rt,it){if(nt.console.assert(rt,"[World.addItem] item is required"),nt.console.assert(rt instanceof nt.TiledImage,"[World.addItem] only TiledImages supported at this time"),it=it||{},it.index!==void 0){var vt=Math.max(0,Math.min(this._items.length,it.index));this._items.splice(vt,0,rt)}else this._items.push(rt);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,rt.addHandler("bounds-change",this._delegatedFigureSizes),rt.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:rt})},getItemAt:function(rt){return nt.console.assert(rt!==void 0,"[World.getItemAt] index is required"),this._items[rt]},getIndexOfItem:function(rt){return nt.console.assert(rt,"[World.getIndexOfItem] item is required"),nt.indexOf(this._items,rt)},getItemCount:function(){return this._items.length},setItemIndex:function(rt,it){nt.console.assert(rt,"[World.setItemIndex] item is required"),nt.console.assert(it!==void 0,"[World.setItemIndex] index is required");var vt=this.getIndexOfItem(rt);if(it>=this._items.length)throw new Error("Index bigger than number of layers.");it===vt||vt===-1||(this._items.splice(vt,1),this._items.splice(it,0,rt),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:rt,previousIndex:vt,newIndex:it}))},removeItem:function(rt){nt.console.assert(rt,"[World.removeItem] item is required");var it=nt.indexOf(this._items,rt);it!==-1&&(rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy(),this._items.splice(it,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(rt))},removeAll:function(){this.viewer._cancelPendingImages();var rt,it;for(it=0;it<this._items.length;it++)rt=this._items[it],rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy();var vt=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,it=0;it<vt.length;it++)rt=vt[it],this._raiseRemoveItem(rt)},resetItems:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].reset()},update:function(){for(var rt=!1,it=0;it<this._items.length;it++)rt=this._items[it].update()||rt;return rt},draw:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].draw();this._needsDraw=!1},needsDraw:function(){for(var rt=0;rt<this._items.length;rt++)if(this._items[rt].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(rt){this._autoRefigureSizes=rt,rt&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(rt){rt=rt||{};var it=rt.immediately||!1,vt=rt.layout||nt.DEFAULT_SETTINGS.collectionLayout,bt=rt.rows||nt.DEFAULT_SETTINGS.collectionRows,wt=rt.columns||nt.DEFAULT_SETTINGS.collectionColumns,Tt=rt.tileSize||nt.DEFAULT_SETTINGS.collectionTileSize,kt=rt.tileMargin||nt.DEFAULT_SETTINGS.collectionTileMargin,Lt=Tt+kt,Mt;!rt.rows&&wt?Mt=wt:Mt=Math.ceil(this._items.length/bt);var Nt=0,zt=0,Ht,Wt,Zt,tn,Yt;this.setAutoRefigureSizes(!1);for(var nn=0;nn<this._items.length;nn++)nn&&nn%Mt===0&&(vt==="horizontal"?(zt+=Lt,Nt=0):(Nt+=Lt,zt=0)),Ht=this._items[nn],Wt=Ht.getBounds(),Wt.width>Wt.height?Zt=Tt:Zt=Tt*(Wt.width/Wt.height),tn=Zt*(Wt.height/Wt.width),Yt=new nt.Point(Nt+(Tt-Zt)/2,zt+(Tt-tn)/2),Ht.setPosition(Yt,it),Ht.setWidth(Zt,it),vt==="horizontal"?Nt+=Lt:zt+=Lt;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var rt=this._homeBounds?this._homeBounds.clone():null,it=this._contentSize?this._contentSize.clone():null,vt=this._contentFactor||0;if(!this._items.length)this._homeBounds=new nt.Rect(0,0,1,1),this._contentSize=new nt.Point(1,1),this._contentFactor=1;else{var bt=this._items[0],wt=bt.getBounds();this._contentFactor=bt.getContentSize().x/wt.width;for(var Tt=bt.getClippedBounds().getBoundingBox(),kt=Tt.x,Lt=Tt.y,Mt=Tt.x+Tt.width,Nt=Tt.y+Tt.height,zt=1;zt<this._items.length;zt++)bt=this._items[zt],wt=bt.getBounds(),this._contentFactor=Math.max(this._contentFactor,bt.getContentSize().x/wt.width),Tt=bt.getClippedBounds().getBoundingBox(),kt=Math.min(kt,Tt.x),Lt=Math.min(Lt,Tt.y),Mt=Math.max(Mt,Tt.x+Tt.width),Nt=Math.max(Nt,Tt.y+Tt.height);this._homeBounds=new nt.Rect(kt,Lt,Mt-kt,Nt-Lt),this._contentSize=new nt.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==vt||!this._homeBounds.equals(rt)||!this._contentSize.equals(it))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(rt){this.raiseEvent("remove-item",{item:rt})}})}(OpenSeadragon)}(openseadragon)),openseadragon.exports}var openseadragonExports=requireOpenseadragon(),openseadragonViewerinputhook={exports:{}};/*! @openseadragon-imaging/openseadragon-viewerinputhook 2.2.1 ab9b394 (clean)  @license MIT */(function(nt,rt){(function(it,vt){nt.exports=vt(requireOpenseadragon())})(window,function(it){return function(vt){function bt(Tt){if(wt[Tt])return wt[Tt].exports;var kt=wt[Tt]={i:Tt,l:!1,exports:{}};return vt[Tt].call(kt.exports,kt,kt.exports,bt),kt.l=!0,kt.exports}var wt={};return bt.m=vt,bt.c=wt,bt.d=function(Tt,kt,Lt){bt.o(Tt,kt)||Object.defineProperty(Tt,kt,{enumerable:!0,get:Lt})},bt.r=function(Tt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Tt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Tt,"__esModule",{value:!0})},bt.t=function(Tt,kt){if(1&kt&&(Tt=bt(Tt)),8&kt||4&kt&&typeof Tt=="object"&&Tt&&Tt.__esModule)return Tt;var Lt=Object.create(null);if(bt.r(Lt),Object.defineProperty(Lt,"default",{enumerable:!0,value:Tt}),2&kt&&typeof Tt!="string")for(var Mt in Tt)bt.d(Lt,Mt,function(Nt){return Tt[Nt]}.bind(null,Mt));return Lt},bt.n=function(Tt){var kt=Tt&&Tt.__esModule?function(){return Tt.default}:function(){return Tt};return bt.d(kt,"a",kt),kt},bt.o=function(Tt,kt){return Object.prototype.hasOwnProperty.call(Tt,kt)},bt.p="",bt(bt.s=1)}([function(vt){vt.exports=it},function(vt,bt,wt){wt.r(bt);var Tt=wt(0),kt=wt.n(Tt);bt.default=function(Lt,Mt){if(!Lt.version||1>Lt.version.major)throw new Error("OpenSeadragonViewerInputHook requires OpenSeadragon version 1.0.0+");return Lt.Viewer.prototype.addViewerInputHook=function(Nt){return(Nt=Nt||{}).viewer=this,new Mt.ViewerInputHook(Nt)},Mt.ViewerInputHook=function(Nt){var zt,Ht;for((Nt=Nt||{}).hooks=Nt.hooks||[],this.viewer=Nt.viewer||null,this.viewerTrackers={},this.hooks=[],this.viewer&&(this.viewerTrackers.viewer=this.viewer.innerTracker,this.viewerTrackers.viewer_outer=this.viewer.outerTracker),zt=0;zt<Nt.hooks.length;zt++){if(typeof Nt.hooks[zt].tracker=="string"){if(!this.viewer)throw new Error("A viewer must be specified.");if((Ht=this.viewerTrackers[Nt.hooks[zt].tracker])===void 0)throw new Error("Unknown tracker specified: "+Nt.hooks[zt].tracker)}else Ht=Nt.hooks[zt].tracker;this.hooks.push({tracker:Ht,handlerName:Nt.hooks[zt].handler,origHandler:Ht[Nt.hooks[zt].handler],hookHandler:Nt.hooks[zt].hookHandler}),function(Wt,Zt,tn,Yt){var nn=Zt[tn];Zt[tn]=function(rn){return Wt._callHandlers(Yt,nn,rn)}}(this,Ht,Nt.hooks[zt].handler,Nt.hooks[zt].hookHandler)}},Mt.ViewerInputHook.version={versionStr:"2.2.1",major:2,minor:2,revision:1},Mt.ViewerInputHook.prototype._callHandlers=function(Nt,zt,Ht){var Wt=Nt(Ht);return zt&&!Ht.stopHandlers&&(Wt=zt(Ht)),!Ht.stopBubbling&&Wt},Mt.ViewerInputHook.prototype.destroy=function(){for(;0<this.hooks.length;){var Nt=this.hooks.pop();Nt.tracker[Nt.handlerName]=Nt.origHandler}this.viewer&&(delete this.viewerTrackers.viewer,delete this.viewerTrackers.viewer_outer,this.viewer=null)},Mt.ViewerInputHook}(kt.a||window.OpenSeadragon,window.OpenSeadragonImaging=window.OpenSeadragonImaging||{})}]).default})})(openseadragonViewerinputhook);const OpenSeadragonViewerInputHook=getDefaultExportFromCjs(openseadragonViewerinputhook.exports);var openseadragonAnnotorious_min={exports:{}};(function(nt,rt){var it=Object.defineProperty,vt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Lt=(Wt,Zt,tn)=>Zt in Wt?it(Wt,Zt,{enumerable:!0,configurable:!0,writable:!0,value:tn}):Wt[Zt]=tn,Mt=(Wt,Zt)=>{for(var tn in Zt||(Zt={}))Tt.call(Zt,tn)&&Lt(Wt,tn,Zt[tn]);if(wt)for(var tn of wt(Zt))kt.call(Zt,tn)&&Lt(Wt,tn,Zt[tn]);return Wt},Nt=(Wt,Zt)=>vt(Wt,bt(Zt)),zt=(Wt,Zt)=>{var tn={};for(var Yt in Wt)Tt.call(Wt,Yt)&&Zt.indexOf(Yt)<0&&(tn[Yt]=Wt[Yt]);if(Wt!=null&&wt)for(var Yt of wt(Wt))Zt.indexOf(Yt)<0&&kt.call(Wt,Yt)&&(tn[Yt]=Wt[Yt]);return tn},Ht=(Wt,Zt,tn)=>(Lt(Wt,typeof Zt!="symbol"?Zt+"":Zt,tn),tn);(function(Wt,Zt){nt.exports=Zt(requireOpenseadragon())})(commonjsGlobal$1,function(Wt){function Zt(Pt){return Pt&&typeof Pt=="object"&&"default"in Pt?Pt:{default:Pt}}var tn=Zt(Wt),Yt,nn,rn,ln,sn,mn,wn,Cn={},An=[],Pn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function On(Pt,Rt){for(var $t in Rt)Pt[$t]=Rt[$t];return Pt}function kn(Pt){var Rt=Pt.parentNode;Rt&&Rt.removeChild(Pt)}function gn(Pt,Rt,$t){var Bt,Ut,Kt,an={};for(Kt in Rt)Kt=="key"?Bt=Rt[Kt]:Kt=="ref"?Ut=Rt[Kt]:an[Kt]=Rt[Kt];if(arguments.length>2&&(an.children=arguments.length>3?Yt.call(arguments,2):$t),typeof Pt=="function"&&Pt.defaultProps!=null)for(Kt in Pt.defaultProps)an[Kt]===void 0&&(an[Kt]=Pt.defaultProps[Kt]);return Vn(Pt,an,Bt,Ut,null)}function Vn(Pt,Rt,$t,Bt,Ut){var Kt={type:Pt,props:Rt,key:$t,ref:Bt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ut==null?++rn:Ut};return nn.vnode!=null&&nn.vnode(Kt),Kt}function pn(){return{current:null}}function pr(Pt){return Pt.children}function yn(Pt,Rt){this.props=Pt,this.context=Rt}function mr(Pt,Rt){if(Rt==null)return Pt.__?mr(Pt.__,Pt.__.__k.indexOf(Pt)+1):null;for(var $t;Rt<Pt.__k.length;Rt++)if(($t=Pt.__k[Rt])!=null&&$t.__e!=null)return $t.__e;return typeof Pt.type=="function"?mr(Pt):null}function Er(Pt){var Rt,$t;if((Pt=Pt.__)!=null&&Pt.__c!=null){for(Pt.__e=Pt.__c.base=null,Rt=0;Rt<Pt.__k.length;Rt++)if(($t=Pt.__k[Rt])!=null&&$t.__e!=null){Pt.__e=Pt.__c.base=$t.__e;break}return Er(Pt)}}function Mr(Pt){(!Pt.__d&&(Pt.__d=!0)&&ln.push(Pt)&&!rr.__r++||mn!==nn.debounceRendering)&&((mn=nn.debounceRendering)||sn)(rr)}function rr(){for(var Pt;rr.__r=ln.length;)Pt=ln.sort(function(Rt,$t){return Rt.__v.__b-$t.__v.__b}),ln=[],Pt.some(function(Rt){var $t,Bt,Ut,Kt,an,xn;Rt.__d&&(an=(Kt=($t=Rt).__v).__e,(xn=$t.__P)&&(Bt=[],(Ut=On({},Kt)).__v=Kt.__v+1,wr(xn,Kt,Ut,$t.__n,xn.ownerSVGElement!==void 0,Kt.__h!=null?[an]:null,Bt,an==null?mr(Kt):an,Kt.__h),ir(Bt,Kt),Kt.__e!=an&&Er(Kt)))})}function vr(Pt,Rt,$t,Bt,Ut,Kt,an,xn,Bn,Fn){var Dn,ur,Pr,$r,Kr,gi,fi,Ri=Bt&&Bt.__k||An,Ui=Ri.length;for($t.__k=[],Dn=0;Dn<Rt.length;Dn++)if(($r=$t.__k[Dn]=($r=Rt[Dn])==null||typeof $r=="boolean"?null:typeof $r=="string"||typeof $r=="number"||typeof $r=="bigint"?Vn(null,$r,null,null,$r):Array.isArray($r)?Vn(pr,{children:$r},null,null,null):$r.__b>0?Vn($r.type,$r.props,$r.key,null,$r.__v):$r)!=null){if($r.__=$t,$r.__b=$t.__b+1,(Pr=Ri[Dn])===null||Pr&&$r.key==Pr.key&&$r.type===Pr.type)Ri[Dn]=void 0;else for(ur=0;ur<Ui;ur++){if((Pr=Ri[ur])&&$r.key==Pr.key&&$r.type===Pr.type){Ri[ur]=void 0;break}Pr=null}wr(Pt,$r,Pr=Pr||Cn,Ut,Kt,an,xn,Bn,Fn),Kr=$r.__e,(ur=$r.ref)&&Pr.ref!=ur&&(fi||(fi=[]),Pr.ref&&fi.push(Pr.ref,null,$r),fi.push(ur,$r.__c||Kr,$r)),Kr!=null?(gi==null&&(gi=Kr),typeof $r.type=="function"&&$r.__k!=null&&$r.__k===Pr.__k?$r.__d=Bn=cr($r,Bn,Pt):Bn=Or(Pt,$r,Pr,Ri,Kr,Bn),Fn||$t.type!=="option"?typeof $t.type=="function"&&($t.__d=Bn):Pt.value=""):Bn&&Pr.__e==Bn&&Bn.parentNode!=Pt&&(Bn=mr(Pr))}for($t.__e=gi,Dn=Ui;Dn--;)Ri[Dn]!=null&&(typeof $t.type=="function"&&Ri[Dn].__e!=null&&Ri[Dn].__e==$t.__d&&($t.__d=mr(Bt,Dn+1)),dn(Ri[Dn],Ri[Dn]));if(fi)for(Dn=0;Dn<fi.length;Dn++)en(fi[Dn],fi[++Dn],fi[++Dn])}function cr(Pt,Rt,$t){var Bt,Ut;for(Bt=0;Bt<Pt.__k.length;Bt++)(Ut=Pt.__k[Bt])&&(Ut.__=Pt,Rt=typeof Ut.type=="function"?cr(Ut,Rt,$t):Or($t,Ut,Ut,Pt.__k,Ut.__e,Rt));return Rt}function gr(Pt,Rt){return Rt=Rt||[],Pt==null||typeof Pt=="boolean"||(Array.isArray(Pt)?Pt.some(function($t){gr($t,Rt)}):Rt.push(Pt)),Rt}function Or(Pt,Rt,$t,Bt,Ut,Kt){var an,xn,Bn;if(Rt.__d!==void 0)an=Rt.__d,Rt.__d=void 0;else if($t==null||Ut!=Kt||Ut.parentNode==null)e:if(Kt==null||Kt.parentNode!==Pt)Pt.appendChild(Ut),an=null;else{for(xn=Kt,Bn=0;(xn=xn.nextSibling)&&Bn<Bt.length;Bn+=2)if(xn==Ut)break e;Pt.insertBefore(Ut,Kt),an=Kt}return an!==void 0?an:Ut.nextSibling}function Ar(Pt,Rt,$t,Bt,Ut){var Kt;for(Kt in $t)Kt==="children"||Kt==="key"||Kt in Rt||ii(Pt,Kt,null,$t[Kt],Bt);for(Kt in Rt)Ut&&typeof Rt[Kt]!="function"||Kt==="children"||Kt==="key"||Kt==="value"||Kt==="checked"||$t[Kt]===Rt[Kt]||ii(Pt,Kt,Rt[Kt],$t[Kt],Bt)}function sr(Pt,Rt,$t){Rt[0]==="-"?Pt.setProperty(Rt,$t):Pt[Rt]=$t==null?"":typeof $t!="number"||Pn.test(Rt)?$t:$t+"px"}function ii(Pt,Rt,$t,Bt,Ut){var Kt;e:if(Rt==="style")if(typeof $t=="string")Pt.style.cssText=$t;else{if(typeof Bt=="string"&&(Pt.style.cssText=Bt=""),Bt)for(Rt in Bt)$t&&Rt in $t||sr(Pt.style,Rt,"");if($t)for(Rt in $t)Bt&&$t[Rt]===Bt[Rt]||sr(Pt.style,Rt,$t[Rt])}else if(Rt[0]==="o"&&Rt[1]==="n")Kt=Rt!==(Rt=Rt.replace(/Capture$/,"")),Rt=Rt.toLowerCase()in Pt?Rt.toLowerCase().slice(2):Rt.slice(2),Pt.l||(Pt.l={}),Pt.l[Rt+Kt]=$t,$t?Bt||Pt.addEventListener(Rt,Kt?fr:ar,Kt):Pt.removeEventListener(Rt,Kt?fr:ar,Kt);else if(Rt!=="dangerouslySetInnerHTML"){if(Ut)Rt=Rt.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Rt!=="href"&&Rt!=="list"&&Rt!=="form"&&Rt!=="tabIndex"&&Rt!=="download"&&Rt in Pt)try{Pt[Rt]=$t==null?"":$t;break e}catch{}typeof $t=="function"||($t!=null&&($t!==!1||Rt[0]==="a"&&Rt[1]==="r")?Pt.setAttribute(Rt,$t):Pt.removeAttribute(Rt))}}function ar(Pt){this.l[Pt.type+!1](nn.event?nn.event(Pt):Pt)}function fr(Pt){this.l[Pt.type+!0](nn.event?nn.event(Pt):Pt)}function wr(Pt,Rt,$t,Bt,Ut,Kt,an,xn,Bn){var Fn,Dn,ur,Pr,$r,Kr,gi,fi,Ri,Ui,Ho,Oo=Rt.type;if(Rt.constructor!==void 0)return null;$t.__h!=null&&(Bn=$t.__h,xn=Rt.__e=$t.__e,Rt.__h=null,Kt=[xn]),(Fn=nn.__b)&&Fn(Rt);try{e:if(typeof Oo=="function"){if(fi=Rt.props,Ri=(Fn=Oo.contextType)&&Bt[Fn.__c],Ui=Fn?Ri?Ri.props.value:Fn.__:Bt,$t.__c?gi=(Dn=Rt.__c=$t.__c).__=Dn.__E:("prototype"in Oo&&Oo.prototype.render?Rt.__c=Dn=new Oo(fi,Ui):(Rt.__c=Dn=new yn(fi,Ui),Dn.constructor=Oo,Dn.render=un),Ri&&Ri.sub(Dn),Dn.props=fi,Dn.state||(Dn.state={}),Dn.context=Ui,Dn.__n=Bt,ur=Dn.__d=!0,Dn.__h=[]),Dn.__s==null&&(Dn.__s=Dn.state),Oo.getDerivedStateFromProps!=null&&(Dn.__s==Dn.state&&(Dn.__s=On({},Dn.__s)),On(Dn.__s,Oo.getDerivedStateFromProps(fi,Dn.__s))),Pr=Dn.props,$r=Dn.state,ur)Oo.getDerivedStateFromProps==null&&Dn.componentWillMount!=null&&Dn.componentWillMount(),Dn.componentDidMount!=null&&Dn.__h.push(Dn.componentDidMount);else{if(Oo.getDerivedStateFromProps==null&&fi!==Pr&&Dn.componentWillReceiveProps!=null&&Dn.componentWillReceiveProps(fi,Ui),!Dn.__e&&Dn.shouldComponentUpdate!=null&&Dn.shouldComponentUpdate(fi,Dn.__s,Ui)===!1||Rt.__v===$t.__v){Dn.props=fi,Dn.state=Dn.__s,Rt.__v!==$t.__v&&(Dn.__d=!1),Dn.__v=Rt,Rt.__e=$t.__e,Rt.__k=$t.__k,Rt.__k.forEach(function(ko){ko&&(ko.__=Rt)}),Dn.__h.length&&an.push(Dn);break e}Dn.componentWillUpdate!=null&&Dn.componentWillUpdate(fi,Dn.__s,Ui),Dn.componentDidUpdate!=null&&Dn.__h.push(function(){Dn.componentDidUpdate(Pr,$r,Kr)})}Dn.context=Ui,Dn.props=fi,Dn.state=Dn.__s,(Fn=nn.__r)&&Fn(Rt),Dn.__d=!1,Dn.__v=Rt,Dn.__P=Pt,Fn=Dn.render(Dn.props,Dn.state,Dn.context),Dn.state=Dn.__s,Dn.getChildContext!=null&&(Bt=On(On({},Bt),Dn.getChildContext())),ur||Dn.getSnapshotBeforeUpdate==null||(Kr=Dn.getSnapshotBeforeUpdate(Pr,$r)),Ho=Fn!=null&&Fn.type===pr&&Fn.key==null?Fn.props.children:Fn,vr(Pt,Array.isArray(Ho)?Ho:[Ho],Rt,$t,Bt,Ut,Kt,an,xn,Bn),Dn.base=Rt.__e,Rt.__h=null,Dn.__h.length&&an.push(Dn),gi&&(Dn.__E=Dn.__=null),Dn.__e=!1}else Kt==null&&Rt.__v===$t.__v?(Rt.__k=$t.__k,Rt.__e=$t.__e):Rt.__e=Ln($t.__e,Rt,$t,Bt,Ut,Kt,an,Bn);(Fn=nn.diffed)&&Fn(Rt)}catch(ko){Rt.__v=null,(Bn||Kt!=null)&&(Rt.__e=xn,Rt.__h=!!Bn,Kt[Kt.indexOf(xn)]=null),nn.__e(ko,Rt,$t)}}function ir(Pt,Rt){nn.__c&&nn.__c(Rt,Pt),Pt.some(function($t){try{Pt=$t.__h,$t.__h=[],Pt.some(function(Bt){Bt.call($t)})}catch(Bt){nn.__e(Bt,$t.__v)}})}function Ln(Pt,Rt,$t,Bt,Ut,Kt,an,xn){var Bn,Fn,Dn,ur=$t.props,Pr=Rt.props,$r=Rt.type,Kr=0;if($r==="svg"&&(Ut=!0),Kt!=null){for(;Kr<Kt.length;Kr++)if((Bn=Kt[Kr])&&(Bn===Pt||($r?Bn.localName==$r:Bn.nodeType==3))){Pt=Bn,Kt[Kr]=null;break}}if(Pt==null){if($r===null)return document.createTextNode(Pr);Pt=Ut?document.createElementNS("http://www.w3.org/2000/svg",$r):document.createElement($r,Pr.is&&Pr),Kt=null,xn=!1}if($r===null)ur===Pr||xn&&Pt.data===Pr||(Pt.data=Pr);else{if(Kt=Kt&&Yt.call(Pt.childNodes),Fn=(ur=$t.props||Cn).dangerouslySetInnerHTML,Dn=Pr.dangerouslySetInnerHTML,!xn){if(Kt!=null)for(ur={},Kr=0;Kr<Pt.attributes.length;Kr++)ur[Pt.attributes[Kr].name]=Pt.attributes[Kr].value;(Dn||Fn)&&(Dn&&(Fn&&Dn.__html==Fn.__html||Dn.__html===Pt.innerHTML)||(Pt.innerHTML=Dn&&Dn.__html||""))}if(Ar(Pt,Pr,ur,Ut,xn),Dn)Rt.__k=[];else if(Kr=Rt.props.children,vr(Pt,Array.isArray(Kr)?Kr:[Kr],Rt,$t,Bt,Ut&&$r!=="foreignObject",Kt,an,Kt?Kt[0]:$t.__k&&mr($t,0),xn),Kt!=null)for(Kr=Kt.length;Kr--;)Kt[Kr]!=null&&kn(Kt[Kr]);xn||("value"in Pr&&(Kr=Pr.value)!==void 0&&(Kr!==Pt.value||$r==="progress"&&!Kr)&&ii(Pt,"value",Kr,ur.value,!1),"checked"in Pr&&(Kr=Pr.checked)!==void 0&&Kr!==Pt.checked&&ii(Pt,"checked",Kr,ur.checked,!1))}return Pt}function en(Pt,Rt,$t){try{typeof Pt=="function"?Pt(Rt):Pt.current=Rt}catch(Bt){nn.__e(Bt,$t)}}function dn(Pt,Rt,$t){var Bt,Ut;if(nn.unmount&&nn.unmount(Pt),(Bt=Pt.ref)&&(Bt.current&&Bt.current!==Pt.__e||en(Bt,null,Rt)),(Bt=Pt.__c)!=null){if(Bt.componentWillUnmount)try{Bt.componentWillUnmount()}catch(Kt){nn.__e(Kt,Rt)}Bt.base=Bt.__P=null}if(Bt=Pt.__k)for(Ut=0;Ut<Bt.length;Ut++)Bt[Ut]&&dn(Bt[Ut],Rt,typeof Pt.type!="function");$t||Pt.__e==null||kn(Pt.__e),Pt.__e=Pt.__d=void 0}function un(Pt,Rt,$t){return this.constructor(Pt,$t)}function Nn(Pt,Rt,$t){var Bt,Ut,Kt;nn.__&&nn.__(Pt,Rt),Ut=(Bt=typeof $t=="function")?null:$t&&$t.__k||Rt.__k,Kt=[],wr(Rt,Pt=(!Bt&&$t||Rt).__k=gn(pr,null,[Pt]),Ut||Cn,Cn,Rt.ownerSVGElement!==void 0,!Bt&&$t?[$t]:Ut?null:Rt.firstChild?Yt.call(Rt.childNodes):null,Kt,!Bt&&$t?$t:Ut?Ut.__e:Rt.firstChild,Bt),ir(Kt,Pt)}function In(Pt,Rt){Nn(Pt,Rt,In)}function lr(Pt,Rt,$t){var Bt,Ut,Kt,an=On({},Pt.props);for(Kt in Rt)Kt=="key"?Bt=Rt[Kt]:Kt=="ref"?Ut=Rt[Kt]:an[Kt]=Rt[Kt];return arguments.length>2&&(an.children=arguments.length>3?Yt.call(arguments,2):$t),Vn(Pt.type,an,Bt||Pt.key,Ut||Pt.ref,null)}function $n(Pt,Rt){var $t={__c:Rt="__cC"+wn++,__:Pt,Consumer:function(Bt,Ut){return Bt.children(Ut)},Provider:function(Bt){var Ut,Kt;return this.getChildContext||(Ut=[],(Kt={})[Rt]=this,this.getChildContext=function(){return Kt},this.shouldComponentUpdate=function(an){this.props.value!==an.value&&Ut.some(Mr)},this.sub=function(an){Ut.push(an);var xn=an.componentWillUnmount;an.componentWillUnmount=function(){Ut.splice(Ut.indexOf(an),1),xn&&xn.call(an)}}),Bt.children}};return $t.Provider.__=$t.Consumer.contextType=$t}Yt=An.slice,nn={__e:function(Pt,Rt){for(var $t,Bt,Ut;Rt=Rt.__;)if(($t=Rt.__c)&&!$t.__)try{if((Bt=$t.constructor)&&Bt.getDerivedStateFromError!=null&&($t.setState(Bt.getDerivedStateFromError(Pt)),Ut=$t.__d),$t.componentDidCatch!=null&&($t.componentDidCatch(Pt),Ut=$t.__d),Ut)return $t.__E=$t}catch(Kt){Pt=Kt}throw Pt}},rn=0,yn.prototype.setState=function(Pt,Rt){var $t;$t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=On({},this.state),typeof Pt=="function"&&(Pt=Pt(On({},$t),this.props)),Pt&&On($t,Pt),Pt!=null&&this.__v&&(Rt&&this.__h.push(Rt),Mr(this))},yn.prototype.forceUpdate=function(Pt){this.__v&&(this.__e=!0,Pt&&this.__h.push(Pt),Mr(this))},yn.prototype.render=pr,ln=[],sn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rr.__r=0,wn=0;var Qn,Wn,or,dr=0,kr=[],br=nn.__b,_r=nn.__r,hi=nn.diffed,di=nn.__c,vi=nn.unmount;function Ai(Pt,Rt){nn.__h&&nn.__h(Wn,Pt,dr||Rt),dr=0;var $t=Wn.__H||(Wn.__H={__:[],__h:[]});return Pt>=$t.__.length&&$t.__.push({}),$t.__[Pt]}function ki(Pt){return dr=1,Bi(Ei,Pt)}function Bi(Pt,Rt,$t){var Bt=Ai(Qn++,2);return Bt.t=Pt,Bt.__c||(Bt.__=[$t?$t(Rt):Ei(void 0,Rt),function(Ut){var Kt=Bt.t(Bt.__[0],Ut);Bt.__[0]!==Kt&&(Bt.__=[Kt,Bt.__[1]],Bt.__c.setState({}))}],Bt.__c=Wn),Bt.__}function Ti(Pt,Rt){var $t=Ai(Qn++,3);!nn.__s&&Mi($t.__H,Rt)&&($t.__=Pt,$t.__H=Rt,Wn.__H.__h.push($t))}function Rr(Pt,Rt){var $t=Ai(Qn++,4);!nn.__s&&Mi($t.__H,Rt)&&($t.__=Pt,$t.__H=Rt,Wn.__h.push($t))}function Tn(Pt){return dr=5,jn(function(){return{current:Pt}},[])}function Sn(Pt,Rt,$t){dr=6,Rr(function(){typeof Pt=="function"?Pt(Rt()):Pt&&(Pt.current=Rt())},$t==null?$t:$t.concat(Pt))}function jn(Pt,Rt){var $t=Ai(Qn++,7);return Mi($t.__H,Rt)&&($t.__=Pt(),$t.__H=Rt,$t.__h=Pt),$t.__}function er(Pt,Rt){return dr=8,jn(function(){return Pt},Rt)}function Cr(Pt){var Rt=Wn.context[Pt.__c],$t=Ai(Qn++,9);return $t.c=Pt,Rt?($t.__==null&&($t.__=!0,Rt.sub(Wn)),Rt.props.value):Pt.__}function Qr(Pt,Rt){nn.useDebugValue&&nn.useDebugValue(Rt?Rt(Pt):Pt)}function yr(Pt){var Rt=Ai(Qn++,10),$t=ki();return Rt.__=Pt,Wn.componentDidCatch||(Wn.componentDidCatch=function(Bt){Rt.__&&Rt.__(Bt),$t[1](Bt)}),[$t[0],function(){$t[1](void 0)}]}function ai(){kr.forEach(function(Pt){if(Pt.__P)try{Pt.__H.__h.forEach(mi),Pt.__H.__h.forEach(wi),Pt.__H.__h=[]}catch(Rt){Pt.__H.__h=[],nn.__e(Rt,Pt.__v)}}),kr=[]}nn.__b=function(Pt){Wn=null,br&&br(Pt)},nn.__r=function(Pt){_r&&_r(Pt),Qn=0;var Rt=(Wn=Pt.__c).__H;Rt&&(Rt.__h.forEach(mi),Rt.__h.forEach(wi),Rt.__h=[])},nn.diffed=function(Pt){hi&&hi(Pt);var Rt=Pt.__c;Rt&&Rt.__H&&Rt.__H.__h.length&&(kr.push(Rt)!==1&&or===nn.requestAnimationFrame||((or=nn.requestAnimationFrame)||function($t){var Bt,Ut=function(){clearTimeout(Kt),Ir&&cancelAnimationFrame(Bt),setTimeout($t)},Kt=setTimeout(Ut,100);Ir&&(Bt=requestAnimationFrame(Ut))})(ai)),Wn=void 0},nn.__c=function(Pt,Rt){Rt.some(function($t){try{$t.__h.forEach(mi),$t.__h=$t.__h.filter(function(Bt){return!Bt.__||wi(Bt)})}catch(Bt){Rt.some(function(Ut){Ut.__h&&(Ut.__h=[])}),Rt=[],nn.__e(Bt,$t.__v)}}),di&&di(Pt,Rt)},nn.unmount=function(Pt){vi&&vi(Pt);var Rt=Pt.__c;if(Rt&&Rt.__H)try{Rt.__H.__.forEach(mi)}catch($t){nn.__e($t,Rt.__v)}};var Ir=typeof requestAnimationFrame=="function";function mi(Pt){var Rt=Wn;typeof Pt.__c=="function"&&Pt.__c(),Wn=Rt}function wi(Pt){var Rt=Wn;Pt.__c=Pt.__(),Wn=Rt}function Mi(Pt,Rt){return!Pt||Pt.length!==Rt.length||Rt.some(function($t,Bt){return $t!==Pt[Bt]})}function Ei(Pt,Rt){return typeof Rt=="function"?Rt(Pt):Rt}function io(Pt,Rt){for(var $t in Rt)Pt[$t]=Rt[$t];return Pt}function Di(Pt,Rt){for(var $t in Pt)if($t!=="__source"&&!($t in Rt))return!0;for(var Bt in Rt)if(Bt!=="__source"&&Pt[Bt]!==Rt[Bt])return!0;return!1}function eo(Pt){this.props=Pt}function wo(Pt,Rt){function $t(Ut){var Kt=this.props.ref,an=Kt==Ut.ref;return!an&&Kt&&(Kt.call?Kt(null):Kt.current=null),Rt?!Rt(this.props,Ut)||!an:Di(this.props,Ut)}function Bt(Ut){return this.shouldComponentUpdate=$t,gn(Pt,Ut)}return Bt.displayName="Memo("+(Pt.displayName||Pt.name)+")",Bt.prototype.isReactComponent=!0,Bt.__f=!0,Bt}(eo.prototype=new yn).isPureReactComponent=!0,eo.prototype.shouldComponentUpdate=function(Pt,Rt){return Di(this.props,Pt)||Di(this.state,Rt)};var Ji=nn.__b;nn.__b=function(Pt){Pt.type&&Pt.type.__f&&Pt.ref&&(Pt.props.ref=Pt.ref,Pt.ref=null),Ji&&Ji(Pt)};var al=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ws(Pt){function Rt($t,Bt){var Ut=io({},$t);return delete Ut.ref,Pt(Ut,(Bt=$t.ref||Bt)&&(typeof Bt!="object"||"current"in Bt)?Bt:null)}return Rt.$$typeof=al,Rt.render=Rt,Rt.prototype.isReactComponent=Rt.__f=!0,Rt.displayName="ForwardRef("+(Pt.displayName||Pt.name)+")",Rt}var Pi=function(Pt,Rt){return Pt==null?null:gr(gr(Pt).map(Rt))},oo={map:Pi,forEach:Pi,count:function(Pt){return Pt?gr(Pt).length:0},only:function(Pt){var Rt=gr(Pt);if(Rt.length!==1)throw"Children.only";return Rt[0]},toArray:gr},Rs=nn.__e;nn.__e=function(Pt,Rt,$t){if(Pt.then){for(var Bt,Ut=Rt;Ut=Ut.__;)if((Bt=Ut.__c)&&Bt.__c)return Rt.__e==null&&(Rt.__e=$t.__e,Rt.__k=$t.__k),Bt.__c(Pt,Rt)}Rs(Pt,Rt,$t)};var jo=nn.unmount;function ls(){this.__u=0,this.t=null,this.__b=null}function Dr(Pt){var Rt=Pt.__.__c;return Rt&&Rt.__e&&Rt.__e(Pt)}function Yr(Pt){var Rt,$t,Bt;function Ut(Kt){if(Rt||(Rt=Pt()).then(function(an){$t=an.default||an},function(an){Bt=an}),Bt)throw Bt;if(!$t)throw Rt;return gn($t,Kt)}return Ut.displayName="Lazy",Ut.__f=!0,Ut}function Vr(){this.u=null,this.o=null}nn.unmount=function(Pt){var Rt=Pt.__c;Rt&&Rt.__R&&Rt.__R(),Rt&&Pt.__h===!0&&(Pt.type=null),jo&&jo(Pt)},(ls.prototype=new yn).__c=function(Pt,Rt){var $t=Rt.__c,Bt=this;Bt.t==null&&(Bt.t=[]),Bt.t.push($t);var Ut=Dr(Bt.__v),Kt=!1,an=function(){Kt||(Kt=!0,$t.__R=null,Ut?Ut(xn):xn())};$t.__R=an;var xn=function(){if(!--Bt.__u){if(Bt.state.__e){var Fn=Bt.state.__e;Bt.__v.__k[0]=function ur(Pr,$r,Kr){return Pr&&(Pr.__v=null,Pr.__k=Pr.__k&&Pr.__k.map(function(gi){return ur(gi,$r,Kr)}),Pr.__c&&Pr.__c.__P===$r&&(Pr.__e&&Kr.insertBefore(Pr.__e,Pr.__d),Pr.__c.__e=!0,Pr.__c.__P=Kr)),Pr}(Fn,Fn.__c.__P,Fn.__c.__O)}var Dn;for(Bt.setState({__e:Bt.__b=null});Dn=Bt.t.pop();)Dn.forceUpdate()}},Bn=Rt.__h===!0;Bt.__u++||Bn||Bt.setState({__e:Bt.__b=Bt.__v.__k[0]}),Pt.then(an,an)},ls.prototype.componentWillUnmount=function(){this.t=[]},ls.prototype.render=function(Pt,Rt){if(this.__b){if(this.__v.__k){var $t=document.createElement("div"),Bt=this.__v.__k[0].__c;this.__v.__k[0]=function Kt(an,xn,Bn){return an&&(an.__c&&an.__c.__H&&(an.__c.__H.__.forEach(function(Fn){typeof Fn.__c=="function"&&Fn.__c()}),an.__c.__H=null),(an=io({},an)).__c!=null&&(an.__c.__P===Bn&&(an.__c.__P=xn),an.__c=null),an.__k=an.__k&&an.__k.map(function(Fn){return Kt(Fn,xn,Bn)})),an}(this.__b,$t,Bt.__O=Bt.__P)}this.__b=null}var Ut=Rt.__e&&gn(pr,null,Pt.fallback);return Ut&&(Ut.__h=null),[gn(pr,null,Rt.__e?null:Pt.children),Ut]};var xi=function(Pt,Rt,$t){if(++$t[1]===$t[0]&&Pt.o.delete(Rt),Pt.props.revealOrder&&(Pt.props.revealOrder[0]!=="t"||!Pt.o.size))for($t=Pt.u;$t;){for(;$t.length>3;)$t.pop()();if($t[1]<$t[0])break;Pt.u=$t=$t[2]}};function ui(Pt){return this.getChildContext=function(){return Pt.context},Pt.children}function xr(Pt){var Rt=this,$t=Pt.i;Rt.componentWillUnmount=function(){Nn(null,Rt.l),Rt.l=null,Rt.i=null},Rt.i&&Rt.i!==$t&&Rt.componentWillUnmount(),Pt.__v?(Rt.l||(Rt.i=$t,Rt.l={nodeType:1,parentNode:$t,childNodes:[],appendChild:function(Bt){this.childNodes.push(Bt),Rt.i.appendChild(Bt)},insertBefore:function(Bt,Ut){this.childNodes.push(Bt),Rt.i.appendChild(Bt)},removeChild:function(Bt){this.childNodes.splice(this.childNodes.indexOf(Bt)>>>1,1),Rt.i.removeChild(Bt)}}),Nn(gn(ui,{context:Rt.context},Pt.__v),Rt.l)):Rt.l&&Rt.componentWillUnmount()}function li(Pt,Rt){return gn(xr,{__v:Pt,i:Rt})}(Vr.prototype=new yn).__e=function(Pt){var Rt=this,$t=Dr(Rt.__v),Bt=Rt.o.get(Pt);return Bt[0]++,function(Ut){var Kt=function(){Rt.props.revealOrder?(Bt.push(Ut),xi(Rt,Pt,Bt)):Ut()};$t?$t(Kt):Kt()}},Vr.prototype.render=function(Pt){this.u=null,this.o=new Map;var Rt=gr(Pt.children);Pt.revealOrder&&Pt.revealOrder[0]==="b"&&Rt.reverse();for(var $t=Rt.length;$t--;)this.o.set(Rt[$t],this.u=[1,0,this.u]);return Pt.children},Vr.prototype.componentDidUpdate=Vr.prototype.componentDidMount=function(){var Pt=this;this.o.forEach(function(Rt,$t){xi(Pt,$t,Rt)})};var yi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,uo=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ss=function(Pt){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Pt)};function Co(Pt,Rt,$t){return Rt.__k==null&&(Rt.textContent=""),Nn(Pt,Rt),typeof $t=="function"&&$t(),Pt?Pt.__c:null}function Mo(Pt,Rt,$t){return In(Pt,Rt),typeof $t=="function"&&$t(),Pt?Pt.__c:null}yn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Pt){Object.defineProperty(yn.prototype,Pt,{configurable:!0,get:function(){return this["UNSAFE_"+Pt]},set:function(Rt){Object.defineProperty(this,Pt,{configurable:!0,writable:!0,value:Rt})}})});var ho=nn.event;function as(){}function pl(){return this.cancelBubble}function vu(){return this.defaultPrevented}nn.event=function(Pt){return ho&&(Pt=ho(Pt)),Pt.persist=as,Pt.isPropagationStopped=pl,Pt.isDefaultPrevented=vu,Pt.nativeEvent=Pt};var Ea,ji={configurable:!0,get:function(){return this.class}},ao=nn.vnode;nn.vnode=function(Pt){var Rt=Pt.type,$t=Pt.props,Bt=$t;if(typeof Rt=="string"){for(var Ut in Bt={},$t){var Kt=$t[Ut];Ut==="value"&&"defaultValue"in $t&&Kt==null||(Ut==="defaultValue"&&"value"in $t&&$t.value==null?Ut="value":Ut==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(Ut)?Ut="ondblclick":/^onchange(textarea|input)/i.test(Ut+Rt)&&!ss($t.type)?Ut="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ut)?Ut=Ut.toLowerCase():uo.test(Ut)?Ut=Ut.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Bt[Ut]=Kt)}Rt=="select"&&Bt.multiple&&Array.isArray(Bt.value)&&(Bt.value=gr($t.children).forEach(function(an){an.props.selected=Bt.value.indexOf(an.props.value)!=-1})),Rt=="select"&&Bt.defaultValue!=null&&(Bt.value=gr($t.children).forEach(function(an){an.props.selected=Bt.multiple?Bt.defaultValue.indexOf(an.props.value)!=-1:Bt.defaultValue==an.props.value})),Pt.props=Bt}Rt&&$t.class!=$t.className&&(ji.enumerable="className"in $t,$t.className!=null&&(Bt.class=$t.className),Object.defineProperty(Bt,"className",ji)),Pt.$$typeof=yi,ao&&ao(Pt)};var mo=nn.__r;nn.__r=function(Pt){mo&&mo(Pt),Ea=Pt.__c};var Oi={ReactCurrentDispatcher:{current:{readContext:function(Pt){return Ea.__n[Pt.__c].props.value}}}},so="17.0.2";function Sr(Pt){return gn.bind(null,Pt)}function Ml(Pt){return!!Pt&&Pt.$$typeof===yi}function Nr(Pt){return Ml(Pt)?lr.apply(null,arguments):Pt}function na(Pt){return!!Pt.__k&&(Nn(null,Pt),!0)}function _u(Pt){return Pt&&(Pt.base||Pt.nodeType===1&&Pt)||null}var Bo=function(Pt,Rt){return Pt(Rt)},yo=function(Pt,Rt){return Pt(Rt)},Cc=pr,zi={useState:ki,useReducer:Bi,useEffect:Ti,useLayoutEffect:Rr,useRef:Tn,useImperativeHandle:Sn,useMemo:jn,useCallback:er,useContext:Cr,useDebugValue:Qr,version:"17.0.2",Children:oo,render:Co,hydrate:Mo,unmountComponentAtNode:na,createPortal:li,createElement:gn,createContext:$n,createFactory:Sr,cloneElement:Nr,createRef:pn,Fragment:pr,isValidElement:Ml,findDOMNode:_u,Component:yn,PureComponent:eo,memo:wo,forwardRef:Ws,flushSync:yo,unstable_batchedUpdates:Bo,StrictMode:pr,Suspense:ls,SuspenseList:Vr,lazy:Yr,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Oi},vo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zi,version:so,Children:oo,render:Co,hydrate:Mo,unmountComponentAtNode:na,createPortal:li,createFactory:Sr,cloneElement:Nr,isValidElement:Ml,findDOMNode:_u,PureComponent:eo,memo:wo,forwardRef:Ws,flushSync:yo,unstable_batchedUpdates:Bo,StrictMode:Cc,Suspense:ls,SuspenseList:Vr,lazy:Yr,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Oi,createElement:gn,createContext:$n,createRef:pn,Fragment:pr,Component:yn,useState:ki,useReducer:Bi,useEffect:Ti,useLayoutEffect:Rr,useRef:Tn,useImperativeHandle:Sn,useMemo:jn,useCallback:er,useContext:Cr,useDebugValue:Qr,useErrorBoundary:yr}),qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{};function ru(Pt){return Pt&&Pt.__esModule&&Object.prototype.hasOwnProperty.call(Pt,"default")?Pt.default:Pt}function Rl(Pt){if(Pt.__esModule)return Pt;var Rt=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(Pt).forEach(function($t){var Bt=Object.getOwnPropertyDescriptor(Pt,$t);Object.defineProperty(Rt,$t,Bt.get?Bt:{enumerable:!0,get:function(){return Pt[$t]}})}),Rt}var Js={exports:{}};function Vo(){}Vo.prototype={on:function(Pt,Rt,$t){var Bt=this.e||(this.e={});return(Bt[Pt]||(Bt[Pt]=[])).push({fn:Rt,ctx:$t}),this},once:function(Pt,Rt,$t){var Bt=this;function Ut(){Bt.off(Pt,Ut),Rt.apply($t,arguments)}return Ut._=Rt,this.on(Pt,Ut,$t)},emit:function(Pt){var Rt=[].slice.call(arguments,1),$t=((this.e||(this.e={}))[Pt]||[]).slice(),Bt=0,Ut=$t.length;for(Bt;Bt<Ut;Bt++)$t[Bt].fn.apply($t[Bt].ctx,Rt);return this},off:function(Pt,Rt){var $t=this.e||(this.e={}),Bt=$t[Pt],Ut=[];if(Bt&&Rt)for(var Kt=0,an=Bt.length;Kt<an;Kt++)Bt[Kt].fn!==Rt&&Bt[Kt].fn._!==Rt&&Ut.push(Bt[Kt]);return Ut.length?$t[Pt]=Ut:delete $t[Pt],this}},Js.exports=Vo,Js.exports.TinyEmitter=Vo;var Wo=Js.exports,oa={exports:{}},Sl={},pa=Rl(vo),gl={exports:{}},Ha="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ic=Ha,Ru=ic;function bu(){}function Xa(){}Xa.resetWarningCache=bu;var Tc=function(){function Pt(Bt,Ut,Kt,an,xn,Bn){if(Bn!==Ru){var Fn=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Fn.name="Invariant Violation",Fn}}Pt.isRequired=Pt;function Rt(){return Pt}var $t={array:Pt,bool:Pt,func:Pt,number:Pt,object:Pt,string:Pt,symbol:Pt,any:Pt,arrayOf:Rt,element:Pt,elementType:Pt,instanceOf:Rt,node:Pt,objectOf:Rt,oneOf:Rt,oneOfType:Rt,shape:Rt,exact:Rt,checkPropTypes:Xa,resetWarningCache:bu};return $t.PropTypes=$t,$t};gl.exports=Tc();function kc(Pt){var Rt,$t,Bt="";if(typeof Pt=="string"||typeof Pt=="number")Bt+=Pt;else if(typeof Pt=="object")if(Array.isArray(Pt))for(Rt=0;Rt<Pt.length;Rt++)Pt[Rt]&&($t=kc(Pt[Rt]))&&(Bt&&(Bt+=" "),Bt+=$t);else for(Rt in Pt)Pt[Rt]&&(Bt&&(Bt+=" "),Bt+=Rt);return Bt}function Ac(){for(var Pt=0,Rt,$t,Bt="";Pt<arguments.length;)(Rt=arguments[Pt++])&&($t=kc(Rt))&&(Bt&&(Bt+=" "),Bt+=$t);return Bt}var Fo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ac}),ga=Rl(Fo),co={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.findInArray=Kh,Cl.isFunction=Jh,Cl.isNum=Kc,Cl.int=Pc,Cl.dontSetMe=Jc;function Kh(Pt,Rt){for(var $t=0,Bt=Pt.length;$t<Bt;$t++)if(Rt.apply(Rt,[Pt[$t],$t,Pt]))return Pt[$t]}function Jh(Pt){return typeof Pt=="function"||Object.prototype.toString.call(Pt)==="[object Function]"}function Kc(Pt){return typeof Pt=="number"&&!isNaN(Pt)}function Pc(Pt){return parseInt(Pt,10)}function Jc(Pt,Rt,$t){if(Pt[Rt])return new Error("Invalid prop ".concat(Rt," passed to ").concat($t," - do not set this, set it on the child."))}var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.getPrefix=Du,Dl.browserPrefixToKey=oc,Dl.browserPrefixToStyle=Md,Dl.default=void 0;var ua=["Moz","Webkit","O","ms"];function Du(){var Pt,Rt,$t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var Bt=(Pt=window.document)===null||Pt===void 0||(Rt=Pt.documentElement)===null||Rt===void 0?void 0:Rt.style;if(!Bt||$t in Bt)return"";for(var Ut=0;Ut<ua.length;Ut++)if(oc($t,ua[Ut])in Bt)return ua[Ut];return""}function oc(Pt,Rt){return Rt?"".concat(Rt).concat(wf(Pt)):Pt}function Md(Pt,Rt){return Rt?"-".concat(Rt.toLowerCase(),"-").concat(Pt):Pt}function wf(Pt){for(var Rt="",$t=!0,Bt=0;Bt<Pt.length;Bt++)$t?(Rt+=Pt[Bt].toUpperCase(),$t=!1):Pt[Bt]==="-"?$t=!0:Rt+=Pt[Bt];return Rt}var Qh=Du();Dl.default=Qh;function Tl(Pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tl=function(Rt){return typeof Rt}:Tl=function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt},Tl(Pt)}Object.defineProperty(co,"__esModule",{value:!0}),co.matchesSelector=th,co.matchesSelectorAndParentsTo=Rd,co.addEvent=xu,co.removeEvent=Dd,co.outerHeight=ed,co.outerWidth=Th,co.innerHeight=td,co.innerWidth=Ys,co.offsetXYFromParent=Nu,co.createCSSTransform=Za,co.createSVGTransform=Ua,co.getTranslation=kl,co.getTouch=Eo,co.getTouchIdentifier=Ef,co.addUserSelectStyles=wp,co.removeUserSelectStyles=nh,co.addClassName=iu,co.removeClassName=Gl;var Va=Cl,Ch=Lc(Dl);function zo(Pt){if(typeof WeakMap!="function")return null;var Rt=new WeakMap,$t=new WeakMap;return(zo=function(Bt){return Bt?$t:Rt})(Pt)}function Lc(Pt,Rt){if(!Rt&&Pt&&Pt.__esModule)return Pt;if(Pt===null||Tl(Pt)!=="object"&&typeof Pt!="function")return{default:Pt};var $t=zo(Rt);if($t&&$t.has(Pt))return $t.get(Pt);var Bt={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Kt in Pt)if(Kt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Kt)){var an=Ut?Object.getOwnPropertyDescriptor(Pt,Kt):null;an&&(an.get||an.set)?Object.defineProperty(Bt,Kt,an):Bt[Kt]=Pt[Kt]}return Bt.default=Pt,$t&&$t.set(Pt,Bt),Bt}function ma(Pt,Rt){var $t=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(Pt);Rt&&(Bt=Bt.filter(function(Ut){return Object.getOwnPropertyDescriptor(Pt,Ut).enumerable})),$t.push.apply($t,Bt)}return $t}function Qc(Pt){for(var Rt=1;Rt<arguments.length;Rt++){var $t=arguments[Rt]!=null?arguments[Rt]:{};Rt%2?ma(Object($t),!0).forEach(function(Bt){eh(Pt,Bt,$t[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors($t)):ma(Object($t)).forEach(function(Bt){Object.defineProperty(Pt,Bt,Object.getOwnPropertyDescriptor($t,Bt))})}return Pt}function eh(Pt,Rt,$t){return Rt in Pt?Object.defineProperty(Pt,Rt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):Pt[Rt]=$t,Pt}var sc="";function th(Pt,Rt){return sc||(sc=(0,Va.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function($t){return(0,Va.isFunction)(Pt[$t])})),(0,Va.isFunction)(Pt[sc])?Pt[sc](Rt):!1}function Rd(Pt,Rt,$t){var Bt=Pt;do{if(th(Bt,Rt))return!0;if(Bt===$t)return!1;Bt=Bt.parentNode}while(Bt);return!1}function xu(Pt,Rt,$t,Bt){if(Pt){var Ut=Qc({capture:!0},Bt);Pt.addEventListener?Pt.addEventListener(Rt,$t,Ut):Pt.attachEvent?Pt.attachEvent("on"+Rt,$t):Pt["on"+Rt]=$t}}function Dd(Pt,Rt,$t,Bt){if(Pt){var Ut=Qc({capture:!0},Bt);Pt.removeEventListener?Pt.removeEventListener(Rt,$t,Ut):Pt.detachEvent?Pt.detachEvent("on"+Rt,$t):Pt["on"+Rt]=null}}function ed(Pt){var Rt=Pt.clientHeight,$t=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Rt+=(0,Va.int)($t.borderTopWidth),Rt+=(0,Va.int)($t.borderBottomWidth),Rt}function Th(Pt){var Rt=Pt.clientWidth,$t=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Rt+=(0,Va.int)($t.borderLeftWidth),Rt+=(0,Va.int)($t.borderRightWidth),Rt}function td(Pt){var Rt=Pt.clientHeight,$t=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Rt-=(0,Va.int)($t.paddingTop),Rt-=(0,Va.int)($t.paddingBottom),Rt}function Ys(Pt){var Rt=Pt.clientWidth,$t=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Rt-=(0,Va.int)($t.paddingLeft),Rt-=(0,Va.int)($t.paddingRight),Rt}function Nu(Pt,Rt,$t){var Bt=Rt===Rt.ownerDocument.body,Ut=Bt?{left:0,top:0}:Rt.getBoundingClientRect(),Kt=(Pt.clientX+Rt.scrollLeft-Ut.left)/$t,an=(Pt.clientY+Rt.scrollTop-Ut.top)/$t;return{x:Kt,y:an}}function Za(Pt,Rt){var $t=kl(Pt,Rt,"px");return eh({},(0,Ch.browserPrefixToKey)("transform",Ch.default),$t)}function Ua(Pt,Rt){var $t=kl(Pt,Rt,"");return $t}function kl(Pt,Rt,$t){var Bt=Pt.x,Ut=Pt.y,Kt="translate(".concat(Bt).concat($t,",").concat(Ut).concat($t,")");if(Rt){var an="".concat(typeof Rt.x=="string"?Rt.x:Rt.x+$t),xn="".concat(typeof Rt.y=="string"?Rt.y:Rt.y+$t);Kt="translate(".concat(an,", ").concat(xn,")")+Kt}return Kt}function Eo(Pt,Rt){return Pt.targetTouches&&(0,Va.findInArray)(Pt.targetTouches,function($t){return Rt===$t.identifier})||Pt.changedTouches&&(0,Va.findInArray)(Pt.changedTouches,function($t){return Rt===$t.identifier})}function Ef(Pt){if(Pt.targetTouches&&Pt.targetTouches[0])return Pt.targetTouches[0].identifier;if(Pt.changedTouches&&Pt.changedTouches[0])return Pt.changedTouches[0].identifier}function wp(Pt){if(Pt){var Rt=Pt.getElementById("react-draggable-style-el");Rt||(Rt=Pt.createElement("style"),Rt.type="text/css",Rt.id="react-draggable-style-el",Rt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,Rt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,Pt.getElementsByTagName("head")[0].appendChild(Rt)),Pt.body&&iu(Pt.body,"react-draggable-transparent-selection")}}function nh(Pt){if(Pt)try{if(Pt.body&&Gl(Pt.body,"react-draggable-transparent-selection"),Pt.selection)Pt.selection.empty();else{var Rt=(Pt.defaultView||window).getSelection();Rt&&Rt.type!=="Caret"&&Rt.removeAllRanges()}}catch{}}function iu(Pt,Rt){Pt.classList?Pt.classList.add(Rt):Pt.className.match(new RegExp("(?:^|\\s)".concat(Rt,"(?!\\S)")))||(Pt.className+=" ".concat(Rt))}function Gl(Pt,Rt){Pt.classList?Pt.classList.remove(Rt):Pt.className=Pt.className.replace(new RegExp("(?:^|\\s)".concat(Rt,"(?!\\S)"),"g"),"")}var ml={};Object.defineProperty(ml,"__esModule",{value:!0}),ml.getBoundPosition=nd,ml.snapToGrid=Jo,ml.canDragX=Xt,ml.canDragY=hn,ml.getControlPosition=Mn,ml.createCoreData=Kn,ml.createDraggableData=hr;var ja=Cl,Ka=co;function nd(Pt,Rt,$t){if(!Pt.props.bounds)return[Rt,$t];var Bt=Pt.props.bounds;Bt=typeof Bt=="string"?Bt:zr(Bt);var Ut=ti(Pt);if(typeof Bt=="string"){var Kt=Ut.ownerDocument,an=Kt.defaultView,xn;if(Bt==="parent"?xn=Ut.parentNode:xn=Kt.querySelector(Bt),!(xn instanceof an.HTMLElement))throw new Error('Bounds selector "'+Bt+'" could not find an element.');var Bn=xn,Fn=an.getComputedStyle(Ut),Dn=an.getComputedStyle(Bn);Bt={left:-Ut.offsetLeft+(0,ja.int)(Dn.paddingLeft)+(0,ja.int)(Fn.marginLeft),top:-Ut.offsetTop+(0,ja.int)(Dn.paddingTop)+(0,ja.int)(Fn.marginTop),right:(0,Ka.innerWidth)(Bn)-(0,Ka.outerWidth)(Ut)-Ut.offsetLeft+(0,ja.int)(Dn.paddingRight)-(0,ja.int)(Fn.marginRight),bottom:(0,Ka.innerHeight)(Bn)-(0,Ka.outerHeight)(Ut)-Ut.offsetTop+(0,ja.int)(Dn.paddingBottom)-(0,ja.int)(Fn.marginBottom)}}return(0,ja.isNum)(Bt.right)&&(Rt=Math.min(Rt,Bt.right)),(0,ja.isNum)(Bt.bottom)&&($t=Math.min($t,Bt.bottom)),(0,ja.isNum)(Bt.left)&&(Rt=Math.max(Rt,Bt.left)),(0,ja.isNum)(Bt.top)&&($t=Math.max($t,Bt.top)),[Rt,$t]}function Jo(Pt,Rt,$t){var Bt=Math.round(Rt/Pt[0])*Pt[0],Ut=Math.round($t/Pt[1])*Pt[1];return[Bt,Ut]}function Xt(Pt){return Pt.props.axis==="both"||Pt.props.axis==="x"}function hn(Pt){return Pt.props.axis==="both"||Pt.props.axis==="y"}function Mn(Pt,Rt,$t){var Bt=typeof Rt=="number"?(0,Ka.getTouch)(Pt,Rt):null;if(typeof Rt=="number"&&!Bt)return null;var Ut=ti($t),Kt=$t.props.offsetParent||Ut.offsetParent||Ut.ownerDocument.body;return(0,Ka.offsetXYFromParent)(Bt||Pt,Kt,$t.props.scale)}function Kn(Pt,Rt,$t){var Bt=Pt.state,Ut=!(0,ja.isNum)(Bt.lastX),Kt=ti(Pt);return Ut?{node:Kt,deltaX:0,deltaY:0,lastX:Rt,lastY:$t,x:Rt,y:$t}:{node:Kt,deltaX:Rt-Bt.lastX,deltaY:$t-Bt.lastY,lastX:Bt.lastX,lastY:Bt.lastY,x:Rt,y:$t}}function hr(Pt,Rt){var $t=Pt.props.scale;return{node:Rt.node,x:Pt.state.x+Rt.deltaX/$t,y:Pt.state.y+Rt.deltaY/$t,deltaX:Rt.deltaX/$t,deltaY:Rt.deltaY/$t,lastX:Pt.state.x,lastY:Pt.state.y}}function zr(Pt){return{left:Pt.left,top:Pt.top,right:Pt.right,bottom:Pt.bottom}}function ti(Pt){var Rt=Pt.findDOMNode();if(!Rt)throw new Error("<DraggableCore>: Unmounted during event!");return Rt}var ci={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.default=Li;function Li(){}function _o(Pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(Rt){return typeof Rt}:_o=function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt},_o(Pt)}Object.defineProperty(ci,"__esModule",{value:!0}),ci.default=void 0;var lo=od(pa),Ko=sa(gl.exports),Bs=sa(pa),Ds=co,wu=ml,Yl=Cl,$u=sa(Ni);function sa(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function rd(Pt){if(typeof WeakMap!="function")return null;var Rt=new WeakMap,$t=new WeakMap;return(rd=function(Bt){return Bt?$t:Rt})(Pt)}function od(Pt,Rt){if(!Rt&&Pt&&Pt.__esModule)return Pt;if(Pt===null||_o(Pt)!=="object"&&typeof Pt!="function")return{default:Pt};var $t=rd(Rt);if($t&&$t.has(Pt))return $t.get(Pt);var Bt={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Kt in Pt)if(Kt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Kt)){var an=Ut?Object.getOwnPropertyDescriptor(Pt,Kt):null;an&&(an.get||an.set)?Object.defineProperty(Bt,Kt,an):Bt[Kt]=Pt[Kt]}return Bt.default=Pt,$t&&$t.set(Pt,Bt),Bt}function Ep(Pt,Rt){return Bm(Pt)||Nd(Pt,Rt)||Sf(Pt,Rt)||sd()}function sd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sf(Pt,Rt){if(Pt){if(typeof Pt=="string")return ac(Pt,Rt);var $t=Object.prototype.toString.call(Pt).slice(8,-1);if($t==="Object"&&Pt.constructor&&($t=Pt.constructor.name),$t==="Map"||$t==="Set")return Array.from(Pt);if($t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($t))return ac(Pt,Rt)}}function ac(Pt,Rt){(Rt==null||Rt>Pt.length)&&(Rt=Pt.length);for(var $t=0,Bt=new Array(Rt);$t<Rt;$t++)Bt[$t]=Pt[$t];return Bt}function Nd(Pt,Rt){var $t=Pt==null?null:typeof Symbol<"u"&&Pt[Symbol.iterator]||Pt["@@iterator"];if($t!=null){var Bt=[],Ut=!0,Kt=!1,an,xn;try{for($t=$t.call(Pt);!(Ut=(an=$t.next()).done)&&(Bt.push(an.value),!(Rt&&Bt.length===Rt));Ut=!0);}catch(Bn){Kt=!0,xn=Bn}finally{try{!Ut&&$t.return!=null&&$t.return()}finally{if(Kt)throw xn}}return Bt}}function Bm(Pt){if(Array.isArray(Pt))return Pt}function Sp(Pt,Rt){if(!(Pt instanceof Rt))throw new TypeError("Cannot call a class as a function")}function Pg(Pt,Rt){for(var $t=0;$t<Rt.length;$t++){var Bt=Rt[$t];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Pt,Bt.key,Bt)}}function Oc(Pt,Rt,$t){return Rt&&Pg(Pt.prototype,Rt),$t&&Pg(Pt,$t),Pt}function Fm(Pt,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Rt&&Rt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Rt&&rh(Pt,Rt)}function rh(Pt,Rt){return rh=Object.setPrototypeOf||function($t,Bt){return $t.__proto__=Bt,$t},rh(Pt,Rt)}function zm(Pt){var Rt=Lg();return function(){var $t=ad(Pt),Bt;if(Rt){var Ut=ad(this).constructor;Bt=Reflect.construct($t,arguments,Ut)}else Bt=$t.apply(this,arguments);return Ic(this,Bt)}}function Ic(Pt,Rt){if(Rt&&(_o(Rt)==="object"||typeof Rt=="function"))return Rt;if(Rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ja(Pt)}function Ja(Pt){if(Pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pt}function Lg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ad(Pt){return ad=Object.setPrototypeOf?Object.getPrototypeOf:function(Rt){return Rt.__proto__||Object.getPrototypeOf(Rt)},ad(Pt)}function Nl(Pt,Rt,$t){return Rt in Pt?Object.defineProperty(Pt,Rt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):Pt[Rt]=$t,Pt}var ou={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Bu=ou.mouse,Mc=function(Pt){Fm($t,Pt);var Rt=zm($t);function $t(){var Bt;Sp(this,$t);for(var Ut=arguments.length,Kt=new Array(Ut),an=0;an<Ut;an++)Kt[an]=arguments[an];return Bt=Rt.call.apply(Rt,[this].concat(Kt)),Nl(Ja(Bt),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Nl(Ja(Bt),"mounted",!1),Nl(Ja(Bt),"handleDragStart",function(xn){if(Bt.props.onMouseDown(xn),!Bt.props.allowAnyClick&&typeof xn.button=="number"&&xn.button!==0)return!1;var Bn=Bt.findDOMNode();if(!Bn||!Bn.ownerDocument||!Bn.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Fn=Bn.ownerDocument;if(!(Bt.props.disabled||!(xn.target instanceof Fn.defaultView.Node)||Bt.props.handle&&!(0,Ds.matchesSelectorAndParentsTo)(xn.target,Bt.props.handle,Bn)||Bt.props.cancel&&(0,Ds.matchesSelectorAndParentsTo)(xn.target,Bt.props.cancel,Bn))){xn.type==="touchstart"&&xn.preventDefault();var Dn=(0,Ds.getTouchIdentifier)(xn);Bt.setState({touchIdentifier:Dn});var ur=(0,wu.getControlPosition)(xn,Dn,Ja(Bt));if(ur!=null){var Pr=ur.x,$r=ur.y,Kr=(0,wu.createCoreData)(Ja(Bt),Pr,$r);(0,$u.default)("DraggableCore: handleDragStart: %j",Kr),(0,$u.default)("calling",Bt.props.onStart);var gi=Bt.props.onStart(xn,Kr);gi===!1||Bt.mounted===!1||(Bt.props.enableUserSelectHack&&(0,Ds.addUserSelectStyles)(Fn),Bt.setState({dragging:!0,lastX:Pr,lastY:$r}),(0,Ds.addEvent)(Fn,Bu.move,Bt.handleDrag),(0,Ds.addEvent)(Fn,Bu.stop,Bt.handleDragStop))}}}),Nl(Ja(Bt),"handleDrag",function(xn){var Bn=(0,wu.getControlPosition)(xn,Bt.state.touchIdentifier,Ja(Bt));if(Bn!=null){var Fn=Bn.x,Dn=Bn.y;if(Array.isArray(Bt.props.grid)){var ur=Fn-Bt.state.lastX,Pr=Dn-Bt.state.lastY,$r=(0,wu.snapToGrid)(Bt.props.grid,ur,Pr),Kr=Ep($r,2);if(ur=Kr[0],Pr=Kr[1],!ur&&!Pr)return;Fn=Bt.state.lastX+ur,Dn=Bt.state.lastY+Pr}var gi=(0,wu.createCoreData)(Ja(Bt),Fn,Dn);(0,$u.default)("DraggableCore: handleDrag: %j",gi);var fi=Bt.props.onDrag(xn,gi);if(fi===!1||Bt.mounted===!1){try{Bt.handleDragStop(new MouseEvent("mouseup"))}catch{var Ri=document.createEvent("MouseEvents");Ri.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Bt.handleDragStop(Ri)}return}Bt.setState({lastX:Fn,lastY:Dn})}}),Nl(Ja(Bt),"handleDragStop",function(xn){if(Bt.state.dragging){var Bn=(0,wu.getControlPosition)(xn,Bt.state.touchIdentifier,Ja(Bt));if(Bn!=null){var Fn=Bn.x,Dn=Bn.y,ur=(0,wu.createCoreData)(Ja(Bt),Fn,Dn),Pr=Bt.props.onStop(xn,ur);if(Pr===!1||Bt.mounted===!1)return!1;var $r=Bt.findDOMNode();$r&&Bt.props.enableUserSelectHack&&(0,Ds.removeUserSelectStyles)($r.ownerDocument),(0,$u.default)("DraggableCore: handleDragStop: %j",ur),Bt.setState({dragging:!1,lastX:NaN,lastY:NaN}),$r&&((0,$u.default)("DraggableCore: Removing handlers"),(0,Ds.removeEvent)($r.ownerDocument,Bu.move,Bt.handleDrag),(0,Ds.removeEvent)($r.ownerDocument,Bu.stop,Bt.handleDragStop))}}}),Nl(Ja(Bt),"onMouseDown",function(xn){return Bu=ou.mouse,Bt.handleDragStart(xn)}),Nl(Ja(Bt),"onMouseUp",function(xn){return Bu=ou.mouse,Bt.handleDragStop(xn)}),Nl(Ja(Bt),"onTouchStart",function(xn){return Bu=ou.touch,Bt.handleDragStart(xn)}),Nl(Ja(Bt),"onTouchEnd",function(xn){return Bu=ou.touch,Bt.handleDragStop(xn)}),Bt}return Oc($t,[{key:"componentDidMount",value:function(){this.mounted=!0;var Bt=this.findDOMNode();Bt&&(0,Ds.addEvent)(Bt,ou.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Bt=this.findDOMNode();if(Bt){var Ut=Bt.ownerDocument;(0,Ds.removeEvent)(Ut,ou.mouse.move,this.handleDrag),(0,Ds.removeEvent)(Ut,ou.touch.move,this.handleDrag),(0,Ds.removeEvent)(Ut,ou.mouse.stop,this.handleDragStop),(0,Ds.removeEvent)(Ut,ou.touch.stop,this.handleDragStop),(0,Ds.removeEvent)(Bt,ou.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ds.removeUserSelectStyles)(Ut)}}},{key:"findDOMNode",value:function(){var Bt,Ut,Kt;return(Bt=(Ut=this.props)===null||Ut===void 0||(Kt=Ut.nodeRef)===null||Kt===void 0?void 0:Kt.current)!==null&&Bt!==void 0?Bt:Bs.default.findDOMNode(this)}},{key:"render",value:function(){return lo.cloneElement(lo.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),$t}(lo.Component);ci.default=Mc,Nl(Mc,"displayName","DraggableCore"),Nl(Mc,"propTypes",{allowAnyClick:Ko.default.bool,disabled:Ko.default.bool,enableUserSelectHack:Ko.default.bool,offsetParent:function(Pt,Rt){if(Pt[Rt]&&Pt[Rt].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ko.default.arrayOf(Ko.default.number),handle:Ko.default.string,cancel:Ko.default.string,nodeRef:Ko.default.object,onStart:Ko.default.func,onDrag:Ko.default.func,onStop:Ko.default.func,onMouseDown:Ko.default.func,scale:Ko.default.number,className:Yl.dontSetMe,style:Yl.dontSetMe,transform:Yl.dontSetMe}),Nl(Mc,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(Pt){function Rt(bi){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rt=function(Hi){return typeof Hi}:Rt=function(Hi){return Hi&&typeof Symbol=="function"&&Hi.constructor===Symbol&&Hi!==Symbol.prototype?"symbol":typeof Hi},Rt(bi)}Object.defineProperty(Pt,"__esModule",{value:!0}),Object.defineProperty(Pt,"DraggableCore",{enumerable:!0,get:function(){return Fn.default}}),Pt.default=void 0;var $t=Kr(pa),Bt=Pr(gl.exports),Ut=Pr(pa),Kt=Pr(ga),an=co,xn=ml,Bn=Cl,Fn=Pr(ci),Dn=Pr(Ni),ur=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function Pr(bi){return bi&&bi.__esModule?bi:{default:bi}}function $r(bi){if(typeof WeakMap!="function")return null;var Hi=new WeakMap,Wi=new WeakMap;return($r=function(Vi){return Vi?Wi:Hi})(bi)}function Kr(bi,Hi){if(!Hi&&bi&&bi.__esModule)return bi;if(bi===null||Rt(bi)!=="object"&&typeof bi!="function")return{default:bi};var Wi=$r(Hi);if(Wi&&Wi.has(bi))return Wi.get(bi);var Vi={},Zi=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Yo in bi)if(Yo!=="default"&&Object.prototype.hasOwnProperty.call(bi,Yo)){var za=Zi?Object.getOwnPropertyDescriptor(bi,Yo):null;za&&(za.get||za.set)?Object.defineProperty(Vi,Yo,za):Vi[Yo]=bi[Yo]}return Vi.default=bi,Wi&&Wi.set(bi,Vi),Vi}function gi(){return gi=Object.assign||function(bi){for(var Hi=1;Hi<arguments.length;Hi++){var Wi=arguments[Hi];for(var Vi in Wi)Object.prototype.hasOwnProperty.call(Wi,Vi)&&(bi[Vi]=Wi[Vi])}return bi},gi.apply(this,arguments)}function fi(bi,Hi){if(bi==null)return{};var Wi=Ri(bi,Hi),Vi,Zi;if(Object.getOwnPropertySymbols){var Yo=Object.getOwnPropertySymbols(bi);for(Zi=0;Zi<Yo.length;Zi++)Vi=Yo[Zi],!(Hi.indexOf(Vi)>=0)&&(!Object.prototype.propertyIsEnumerable.call(bi,Vi)||(Wi[Vi]=bi[Vi]))}return Wi}function Ri(bi,Hi){if(bi==null)return{};var Wi={},Vi=Object.keys(bi),Zi,Yo;for(Yo=0;Yo<Vi.length;Yo++)Zi=Vi[Yo],!(Hi.indexOf(Zi)>=0)&&(Wi[Zi]=bi[Zi]);return Wi}function Ui(bi,Hi){var Wi=Object.keys(bi);if(Object.getOwnPropertySymbols){var Vi=Object.getOwnPropertySymbols(bi);Hi&&(Vi=Vi.filter(function(Zi){return Object.getOwnPropertyDescriptor(bi,Zi).enumerable})),Wi.push.apply(Wi,Vi)}return Wi}function Ho(bi){for(var Hi=1;Hi<arguments.length;Hi++){var Wi=arguments[Hi]!=null?arguments[Hi]:{};Hi%2?Ui(Object(Wi),!0).forEach(function(Vi){Sh(bi,Vi,Wi[Vi])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bi,Object.getOwnPropertyDescriptors(Wi)):Ui(Object(Wi)).forEach(function(Vi){Object.defineProperty(bi,Vi,Object.getOwnPropertyDescriptor(Wi,Vi))})}return bi}function Oo(bi,Hi){return Ya(bi)||Fa(bi,Hi)||Uo(bi,Hi)||ko()}function ko(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(bi,Hi){if(bi){if(typeof bi=="string")return Io(bi,Hi);var Wi=Object.prototype.toString.call(bi).slice(8,-1);if(Wi==="Object"&&bi.constructor&&(Wi=bi.constructor.name),Wi==="Map"||Wi==="Set")return Array.from(bi);if(Wi==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Wi))return Io(bi,Hi)}}function Io(bi,Hi){(Hi==null||Hi>bi.length)&&(Hi=bi.length);for(var Wi=0,Vi=new Array(Hi);Wi<Hi;Wi++)Vi[Wi]=bi[Wi];return Vi}function Fa(bi,Hi){var Wi=bi==null?null:typeof Symbol<"u"&&bi[Symbol.iterator]||bi["@@iterator"];if(Wi!=null){var Vi=[],Zi=!0,Yo=!1,za,Wl;try{for(Wi=Wi.call(bi);!(Zi=(za=Wi.next()).done)&&(Vi.push(za.value),!(Hi&&Vi.length===Hi));Zi=!0);}catch(fa){Yo=!0,Wl=fa}finally{try{!Zi&&Wi.return!=null&&Wi.return()}finally{if(Yo)throw Wl}}return Vi}}function Ya(bi){if(Array.isArray(bi))return bi}function ha(bi,Hi){if(!(bi instanceof Hi))throw new TypeError("Cannot call a class as a function")}function da(bi,Hi){for(var Wi=0;Wi<Hi.length;Wi++){var Vi=Hi[Wi];Vi.enumerable=Vi.enumerable||!1,Vi.configurable=!0,"value"in Vi&&(Vi.writable=!0),Object.defineProperty(bi,Vi.key,Vi)}}function wh(bi,Hi,Wi){return Hi&&da(bi.prototype,Hi),Wi&&da(bi,Wi),bi}function rc(bi,Hi){if(typeof Hi!="function"&&Hi!==null)throw new TypeError("Super expression must either be null or a function");bi.prototype=Object.create(Hi&&Hi.prototype,{constructor:{value:bi,writable:!0,configurable:!0}}),Hi&&xf(bi,Hi)}function xf(bi,Hi){return xf=Object.setPrototypeOf||function(Wi,Vi){return Wi.__proto__=Vi,Wi},xf(bi,Hi)}function Eh(bi){var Hi=pv();return function(){var Wi=kg(bi),Vi;if(Hi){var Zi=kg(this).constructor;Vi=Reflect.construct(Wi,arguments,Zi)}else Vi=Wi.apply(this,arguments);return Zh(this,Vi)}}function Zh(bi,Hi){if(Hi&&(Rt(Hi)==="object"||typeof Hi=="function"))return Hi;if(Hi!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yu(bi)}function yu(bi){if(bi===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bi}function pv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kg(bi){return kg=Object.setPrototypeOf?Object.getPrototypeOf:function(Hi){return Hi.__proto__||Object.getPrototypeOf(Hi)},kg(bi)}function Sh(bi,Hi,Wi){return Hi in bi?Object.defineProperty(bi,Hi,{value:Wi,enumerable:!0,configurable:!0,writable:!0}):bi[Hi]=Wi,bi}var La=function(bi){rc(Wi,bi);var Hi=Eh(Wi);function Wi(Vi){var Zi;return ha(this,Wi),Zi=Hi.call(this,Vi),Sh(yu(Zi),"onDragStart",function(Yo,za){(0,Dn.default)("Draggable: onDragStart: %j",za);var Wl=Zi.props.onStart(Yo,(0,xn.createDraggableData)(yu(Zi),za));if(Wl===!1)return!1;Zi.setState({dragging:!0,dragged:!0})}),Sh(yu(Zi),"onDrag",function(Yo,za){if(!Zi.state.dragging)return!1;(0,Dn.default)("Draggable: onDrag: %j",za);var Wl=(0,xn.createDraggableData)(yu(Zi),za),fa={x:Wl.x,y:Wl.y};if(Zi.props.bounds){var Ag=fa.x,Od=fa.y;fa.x+=Zi.state.slackX,fa.y+=Zi.state.slackY;var xp=(0,xn.getBoundPosition)(yu(Zi),fa.x,fa.y),$m=Oo(xp,2),gv=$m[0],mv=$m[1];fa.x=gv,fa.y=mv,fa.slackX=Zi.state.slackX+(Ag-fa.x),fa.slackY=Zi.state.slackY+(Od-fa.y),Wl.x=fa.x,Wl.y=fa.y,Wl.deltaX=fa.x-Zi.state.x,Wl.deltaY=fa.y-Zi.state.y}var V_=Zi.props.onDrag(Yo,Wl);if(V_===!1)return!1;Zi.setState(fa)}),Sh(yu(Zi),"onDragStop",function(Yo,za){if(!Zi.state.dragging)return!1;var Wl=Zi.props.onStop(Yo,(0,xn.createDraggableData)(yu(Zi),za));if(Wl===!1)return!1;(0,Dn.default)("Draggable: onDragStop: %j",za);var fa={dragging:!1,slackX:0,slackY:0},Ag=Boolean(Zi.props.position);if(Ag){var Od=Zi.props.position,xp=Od.x,$m=Od.y;fa.x=xp,fa.y=$m}Zi.setState(fa)}),Zi.state={dragging:!1,dragged:!1,x:Vi.position?Vi.position.x:Vi.defaultPosition.x,y:Vi.position?Vi.position.y:Vi.defaultPosition.y,prevPropsPosition:Ho({},Vi.position),slackX:0,slackY:0,isElementSVG:!1},Vi.position&&!(Vi.onDrag||Vi.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Zi}return wh(Wi,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Vi,Zi,Yo;return(Vi=(Zi=this.props)===null||Zi===void 0||(Yo=Zi.nodeRef)===null||Yo===void 0?void 0:Yo.current)!==null&&Vi!==void 0?Vi:Ut.default.findDOMNode(this)}},{key:"render",value:function(){var Vi,Zi=this.props;Zi.axis,Zi.bounds;var Yo=Zi.children,za=Zi.defaultPosition,Wl=Zi.defaultClassName,fa=Zi.defaultClassNameDragging,Ag=Zi.defaultClassNameDragged,Od=Zi.position,xp=Zi.positionOffset;Zi.scale;var $m=fi(Zi,ur),gv={},mv=null,V_=Boolean(Od),Yb=!V_||this.state.dragging,qb=Od||za,Xb={x:(0,xn.canDragX)(this)&&Yb?this.state.x:qb.x,y:(0,xn.canDragY)(this)&&Yb?this.state.y:qb.y};this.state.isElementSVG?mv=(0,an.createSVGTransform)(Xb,xp):gv=(0,an.createCSSTransform)(Xb,xp);var Hw=(0,Kt.default)(Yo.props.className||"",Wl,(Vi={},Sh(Vi,fa,this.state.dragging),Sh(Vi,Ag,this.state.dragged),Vi));return $t.createElement(Fn.default,gi({},$m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),$t.cloneElement($t.Children.only(Yo),{className:Hw,style:Ho(Ho({},Yo.props.style),gv),transform:mv}))}}],[{key:"getDerivedStateFromProps",value:function(Vi,Zi){var Yo=Vi.position,za=Zi.prevPropsPosition;return Yo&&(!za||Yo.x!==za.x||Yo.y!==za.y)?((0,Dn.default)("Draggable: getDerivedStateFromProps %j",{position:Yo,prevPropsPosition:za}),{x:Yo.x,y:Yo.y,prevPropsPosition:Ho({},Yo)}):null}}]),Wi}($t.Component);Pt.default=La,Sh(La,"displayName","Draggable"),Sh(La,"propTypes",Ho(Ho({},Fn.default.propTypes),{},{axis:Bt.default.oneOf(["both","x","y","none"]),bounds:Bt.default.oneOfType([Bt.default.shape({left:Bt.default.number,right:Bt.default.number,top:Bt.default.number,bottom:Bt.default.number}),Bt.default.string,Bt.default.oneOf([!1])]),defaultClassName:Bt.default.string,defaultClassNameDragging:Bt.default.string,defaultClassNameDragged:Bt.default.string,defaultPosition:Bt.default.shape({x:Bt.default.number,y:Bt.default.number}),positionOffset:Bt.default.shape({x:Bt.default.oneOfType([Bt.default.number,Bt.default.string]),y:Bt.default.oneOfType([Bt.default.number,Bt.default.string])}),position:Bt.default.shape({x:Bt.default.number,y:Bt.default.number}),className:Bn.dontSetMe,style:Bn.dontSetMe,transform:Bn.dontSetMe})),Sh(La,"defaultProps",Ho(Ho({},Fn.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(Sl);var $d=Sl,Cf=$d.default,Tf=$d.DraggableCore;oa.exports=Cf,oa.exports.default=Cf,oa.exports.DraggableCore=Tf;var Cp=oa.exports,kf=["second","minute","hour","day","week","month","year"];function ld(Pt,Rt){if(Rt===0)return["just now","right now"];var $t=kf[Math.floor(Rt/2)];return Pt>1&&($t+="s"),[Pt+" "+$t+" ago","in "+Pt+" "+$t]}var Og=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function Ig(Pt,Rt){if(Rt===0)return["\u521A\u521A","\u7247\u523B\u540E"];var $t=Og[~~(Rt/2)];return[Pt+" "+$t+"\u524D",Pt+" "+$t+"\u540E"]}var Bd={},Sa=function(Pt,Rt){Bd[Pt]=Rt},Fu=function(Pt){return Bd[Pt]||Bd.en_US},ll=[60,60,24,7,365/7/12,12];function Tp(Pt){return Pt instanceof Date?Pt:!isNaN(Pt)||/^\d+$/.test(Pt)?new Date(parseInt(Pt)):(Pt=(Pt||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(Pt))}function su(Pt,Rt){var $t=Pt<0?1:0;Pt=Math.abs(Pt);for(var Bt=Pt,Ut=0;Pt>=ll[Ut]&&Ut<ll.length;Ut++)Pt/=ll[Ut];return Pt=Math.floor(Pt),Ut*=2,Pt>(Ut===0?9:1)&&(Ut+=1),Rt(Pt,Ut,Bt)[$t].replace("%s",Pt.toString())}function Fd(Pt,Rt){var $t=Rt?Tp(Rt):new Date;return(+$t-+Tp(Pt))/1e3}function kp(Pt){for(var Rt=1,$t=0,Bt=Math.abs(Pt);Pt>=ll[$t]&&$t<ll.length;$t++)Pt/=ll[$t],Rt*=ll[$t];return Bt=Bt%Rt,Bt=Bt?Rt-Bt:Rt,Math.ceil(Bt)}var Mg=function(Pt,Rt,$t){var Bt=Fd(Pt,$t&&$t.relativeDate);return su(Bt,Fu(Rt))},ih="timeago-id";function Hm(Pt){return Pt.getAttribute("datetime")}function kh(Pt,Rt){Pt.setAttribute(ih,Rt)}function Af(Pt){return parseInt(Pt.getAttribute(ih))}var zd={},Hd=function(Pt){clearTimeout(Pt),delete zd[Pt]};function zu(Pt,Rt,$t,Bt){Hd(Af(Pt));var Ut=Bt.relativeDate,Kt=Bt.minInterval,an=Fd(Rt,Ut);Pt.innerText=su(an,$t);var xn=setTimeout(function(){zu(Pt,Rt,$t,Bt)},Math.min(Math.max(kp(an),Kt||1)*1e3,2147483647));zd[xn]=0,kh(Pt,xn)}function Pf(Pt){Pt?Hd(Af(Pt)):Object.keys(zd).forEach(Hd)}function Lf(Pt,Rt,$t){var Bt=Pt.length?Pt:[Pt];return Bt.forEach(function(Ut){zu(Ut,Hm(Ut),Fu(Rt),$t||{})}),Bt}Sa("en_US",ld),Sa("zh_CN",Ig);var Ah=function(){var Pt=function(Rt,$t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bt,Ut){Bt.__proto__=Ut}||function(Bt,Ut){for(var Kt in Ut)Ut.hasOwnProperty(Kt)&&(Bt[Kt]=Ut[Kt])},Pt(Rt,$t)};return function(Rt,$t){Pt(Rt,$t);function Bt(){this.constructor=Rt}Rt.prototype=$t===null?Object.create($t):(Bt.prototype=$t.prototype,new Bt)}}(),Of=function(){return Of=Object.assign||function(Pt){for(var Rt,$t=1,Bt=arguments.length;$t<Bt;$t++){Rt=arguments[$t];for(var Ut in Rt)Object.prototype.hasOwnProperty.call(Rt,Ut)&&(Pt[Ut]=Rt[Ut])}return Pt},Of.apply(this,arguments)},yl=function(Pt,Rt){var $t={};for(var Bt in Pt)Object.prototype.hasOwnProperty.call(Pt,Bt)&&Rt.indexOf(Bt)<0&&($t[Bt]=Pt[Bt]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Bt=Object.getOwnPropertySymbols(Pt);Ut<Bt.length;Ut++)Rt.indexOf(Bt[Ut])<0&&Object.prototype.propertyIsEnumerable.call(Pt,Bt[Ut])&&($t[Bt[Ut]]=Pt[Bt[Ut]]);return $t},Vd=function(Pt){return""+(Pt instanceof Date?Pt.getTime():Pt)},Ap=function(Pt){Ah(Rt,Pt);function Rt(){var $t=Pt!==null&&Pt.apply(this,arguments)||this;return $t.dom=null,$t}return Rt.prototype.componentDidMount=function(){this.renderTimeAgo()},Rt.prototype.componentDidUpdate=function(){this.renderTimeAgo()},Rt.prototype.renderTimeAgo=function(){var $t=this.props,Bt=$t.live,Ut=$t.datetime,Kt=$t.locale,an=$t.opts;Pf(this.dom),Bt!==!1&&(this.dom.setAttribute("datetime",Vd(Ut)),Lf(this.dom,Kt,an))},Rt.prototype.componentWillUnmount=function(){Pf(this.dom)},Rt.prototype.render=function(){var $t=this,Bt=this.props,Ut=Bt.datetime;Bt.live;var Kt=Bt.locale,an=Bt.opts,xn=yl(Bt,["datetime","live","locale","opts"]);return gn("time",Of({ref:function(Bn){$t.dom=Bn}},xn),Mg(Ut,Kt,an))},Rt.defaultProps={live:!0,className:""},Rt}(eo);function Pp(Pt,Rt){const $t=Bt=>{Pt.current&&!Pt.current.contains(event.target)&&Rt()};Ti(()=>(document.addEventListener("mousedown",$t),()=>document.removeEventListener("mousedown",$t)))}var Lp=Object.prototype.toString,Op=function(Pt){var Rt=Lp.call(Pt),$t=Rt==="[object Arguments]";return $t||($t=Rt!=="[object Array]"&&Pt!==null&&typeof Pt=="object"&&typeof Pt.length=="number"&&Pt.length>=0&&Lp.call(Pt.callee)==="[object Function]"),$t},If;if(!Object.keys){var ud=Object.prototype.hasOwnProperty,Ud=Object.prototype.toString,Rg=Op,cd=Object.prototype.propertyIsEnumerable,Dg=!cd.call({toString:null},"toString"),Ip=cd.call(function(){},"prototype"),jd=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],It=function(Pt){var Rt=Pt.constructor;return Rt&&Rt.prototype===Pt},Vt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Qt=function(){if(typeof window>"u")return!1;for(var Pt in window)try{if(!Vt["$"+Pt]&&ud.call(window,Pt)&&window[Pt]!==null&&typeof window[Pt]=="object")try{It(window[Pt])}catch{return!0}}catch{return!0}return!1}(),fn=function(Pt){if(typeof window>"u"||!Qt)return It(Pt);try{return It(Pt)}catch{return!1}};If=function(Pt){var Rt=Pt!==null&&typeof Pt=="object",$t=Ud.call(Pt)==="[object Function]",Bt=Rg(Pt),Ut=Rt&&Ud.call(Pt)==="[object String]",Kt=[];if(!Rt&&!$t&&!Bt)throw new TypeError("Object.keys called on a non-object");var an=Ip&&$t;if(Ut&&Pt.length>0&&!ud.call(Pt,0))for(var xn=0;xn<Pt.length;++xn)Kt.push(String(xn));if(Bt&&Pt.length>0)for(var Bn=0;Bn<Pt.length;++Bn)Kt.push(String(Bn));else for(var Fn in Pt)!(an&&Fn==="prototype")&&ud.call(Pt,Fn)&&Kt.push(String(Fn));if(Dg)for(var Dn=fn(Pt),ur=0;ur<jd.length;++ur)!(Dn&&jd[ur]==="constructor")&&ud.call(Pt,jd[ur])&&Kt.push(jd[ur]);return Kt}}var Rn=If,tr=Array.prototype.slice,Lr=Op,qr=Object.keys,ni=qr?function(Pt){return qr(Pt)}:Rn,_i=Object.keys;ni.shim=function(){if(Object.keys){var Pt=function(){var Rt=Object.keys(arguments);return Rt&&Rt.length===arguments.length}(1,2);Pt||(Object.keys=function(Rt){return Lr(Rt)?_i(tr.call(Rt)):_i(Rt)})}else Object.keys=ni;return Object.keys||ni};var Gi=ni,Ro=Gi,ys=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ql=Object.prototype.toString,oh=Array.prototype.concat,Ph=Object.defineProperty,Eu=function(Pt){return typeof Pt=="function"&&ql.call(Pt)==="[object Function]"},Mf=function(){var Pt={};try{Ph(Pt,"x",{enumerable:!1,value:Pt});for(var Rt in Pt)return!1;return Pt.x===Pt}catch{return!1}},Mp=Ph&&Mf(),Ng=function(Pt,Rt,$t,Bt){Rt in Pt&&(!Eu(Bt)||!Bt())||(Mp?Ph(Pt,Rt,{configurable:!0,enumerable:!1,value:$t,writable:!0}):Pt[Rt]=$t)},Rp=function(Pt,Rt){var $t=arguments.length>2?arguments[2]:{},Bt=Ro(Rt);ys&&(Bt=oh.call(Bt,Object.getOwnPropertySymbols(Rt)));for(var Ut=0;Ut<Bt.length;Ut+=1)Ng(Pt,Bt[Ut],Rt[Bt[Ut]],$t[Bt[Ut]])};Rp.supportsDescriptors=!!Mp;var sh=Rp,hd={exports:{}},Rf="Function.prototype.bind called on incompatible ",Qs=Array.prototype.slice,Wd=Object.prototype.toString,$g="[object Function]",Bg=function(Pt){var Rt=this;if(typeof Rt!="function"||Wd.call(Rt)!==$g)throw new TypeError(Rf+Rt);for(var $t=Qs.call(arguments,1),Bt,Ut=function(){if(this instanceof Bt){var Fn=Rt.apply(this,$t.concat(Qs.call(arguments)));return Object(Fn)===Fn?Fn:this}else return Rt.apply(Pt,$t.concat(Qs.call(arguments)))},Kt=Math.max(0,Rt.length-$t.length),an=[],xn=0;xn<Kt;xn++)an.push("$"+xn);if(Bt=Function("binder","return function ("+an.join(",")+"){ return binder.apply(this,arguments); }")(Ut),Rt.prototype){var Bn=function(){};Bn.prototype=Rt.prototype,Bt.prototype=new Bn,Bn.prototype=null}return Bt},dd=Bg,fd=Function.prototype.bind||dd,Df=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var Pt={},Rt=Symbol("test"),$t=Object(Rt);if(typeof Rt=="string"||Object.prototype.toString.call(Rt)!=="[object Symbol]"||Object.prototype.toString.call($t)!=="[object Symbol]")return!1;var Bt=42;Pt[Rt]=Bt;for(Rt in Pt)return!1;if(typeof Object.keys=="function"&&Object.keys(Pt).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(Pt).length!==0)return!1;var Ut=Object.getOwnPropertySymbols(Pt);if(Ut.length!==1||Ut[0]!==Rt||!Object.prototype.propertyIsEnumerable.call(Pt,Rt))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var Kt=Object.getOwnPropertyDescriptor(Pt,Rt);if(Kt.value!==Bt||Kt.enumerable!==!0)return!1}return!0},Dp=typeof Symbol<"u"&&Symbol,Gd=Df,Vm=function(){return typeof Dp!="function"||typeof Symbol!="function"||typeof Dp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Gd()},Nf=fd,Um=Nf.call(Function.call,Object.prototype.hasOwnProperty),Us,Lh=SyntaxError,Np=Function,Oh=TypeError,Fg=function(Pt){try{return Np('"use strict"; return ('+Pt+").constructor;")()}catch{}},pd=Object.getOwnPropertyDescriptor;if(pd)try{pd({},"")}catch{pd=null}var jm=function(){throw new Oh},g1=pd?function(){try{return arguments.callee,jm}catch{try{return pd(arguments,"callee").get}catch{return jm}}}():jm,lc=Vm(),gd=Object.getPrototypeOf||function(Pt){return Pt.__proto__},Wa={},Rc=typeof Uint8Array>"u"?Us:gd(Uint8Array),qo={"%AggregateError%":typeof AggregateError>"u"?Us:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Us:ArrayBuffer,"%ArrayIteratorPrototype%":lc?gd([][Symbol.iterator]()):Us,"%AsyncFromSyncIteratorPrototype%":Us,"%AsyncFunction%":Wa,"%AsyncGenerator%":Wa,"%AsyncGeneratorFunction%":Wa,"%AsyncIteratorPrototype%":Wa,"%Atomics%":typeof Atomics>"u"?Us:Atomics,"%BigInt%":typeof BigInt>"u"?Us:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Us:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Us:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Us:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Us:FinalizationRegistry,"%Function%":Np,"%GeneratorFunction%":Wa,"%Int8Array%":typeof Int8Array>"u"?Us:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Us:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Us:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":lc?gd(gd([][Symbol.iterator]())):Us,"%JSON%":typeof JSON=="object"?JSON:Us,"%Map%":typeof Map>"u"?Us:Map,"%MapIteratorPrototype%":typeof Map>"u"||!lc?Us:gd(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Us:Promise,"%Proxy%":typeof Proxy>"u"?Us:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Us:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Us:Set,"%SetIteratorPrototype%":typeof Set>"u"||!lc?Us:gd(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Us:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":lc?gd(""[Symbol.iterator]()):Us,"%Symbol%":lc?Symbol:Us,"%SyntaxError%":Lh,"%ThrowTypeError%":g1,"%TypedArray%":Rc,"%TypeError%":Oh,"%Uint8Array%":typeof Uint8Array>"u"?Us:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Us:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Us:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Us:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Us:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Us:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Us:WeakSet},vs=function Pt(Rt){var $t;if(Rt==="%AsyncFunction%")$t=Fg("async function () {}");else if(Rt==="%GeneratorFunction%")$t=Fg("function* () {}");else if(Rt==="%AsyncGeneratorFunction%")$t=Fg("async function* () {}");else if(Rt==="%AsyncGenerator%"){var Bt=Pt("%AsyncGeneratorFunction%");Bt&&($t=Bt.prototype)}else if(Rt==="%AsyncIteratorPrototype%"){var Ut=Pt("%AsyncGenerator%");Ut&&($t=gd(Ut.prototype))}return qo[Rt]=$t,$t},us={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Qo=fd,es=Um,_s=Qo.call(Function.call,Array.prototype.concat),bs=Qo.call(Function.apply,Array.prototype.splice),cs=Qo.call(Function.call,String.prototype.replace),ts=Qo.call(Function.call,String.prototype.slice),xs=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ws=/\\(\\)?/g,Es=function(Pt){var Rt=ts(Pt,0,1),$t=ts(Pt,-1);if(Rt==="%"&&$t!=="%")throw new Lh("invalid intrinsic syntax, expected closing `%`");if($t==="%"&&Rt!=="%")throw new Lh("invalid intrinsic syntax, expected opening `%`");var Bt=[];return cs(Pt,xs,function(Ut,Kt,an,xn){Bt[Bt.length]=an?cs(xn,ws,"$1"):Kt||Ut}),Bt},Ss=function(Pt,Rt){var $t=Pt,Bt;if(es(us,$t)&&(Bt=us[$t],$t="%"+Bt[0]+"%"),es(qo,$t)){var Ut=qo[$t];if(Ut===Wa&&(Ut=vs($t)),typeof Ut>"u"&&!Rt)throw new Oh("intrinsic "+Pt+" exists, but is not available. Please file an issue!");return{alias:Bt,name:$t,value:Ut}}throw new Lh("intrinsic "+Pt+" does not exist!")},Ao=function(Pt,Rt){if(typeof Pt!="string"||Pt.length===0)throw new Oh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Rt!="boolean")throw new Oh('"allowMissing" argument must be a boolean');var $t=Es(Pt),Bt=$t.length>0?$t[0]:"",Ut=Ss("%"+Bt+"%",Rt),Kt=Ut.name,an=Ut.value,xn=!1,Bn=Ut.alias;Bn&&(Bt=Bn[0],bs($t,_s([0,1],Bn)));for(var Fn=1,Dn=!0;Fn<$t.length;Fn+=1){var ur=$t[Fn],Pr=ts(ur,0,1),$r=ts(ur,-1);if((Pr==='"'||Pr==="'"||Pr==="`"||$r==='"'||$r==="'"||$r==="`")&&Pr!==$r)throw new Lh("property names with quotes must have matching quotes");if((ur==="constructor"||!Dn)&&(xn=!0),Bt+="."+ur,Kt="%"+Bt+"%",es(qo,Kt))an=qo[Kt];else if(an!=null){if(!(ur in an)){if(!Rt)throw new Oh("base intrinsic for "+Pt+" exists, but the property is not available.");return}if(pd&&Fn+1>=$t.length){var Kr=pd(an,ur);Dn=!!Kr,Dn&&"get"in Kr&&!("originalValue"in Kr.get)?an=Kr.get:an=an[ur]}else Dn=es(an,ur),an=an[ur];Dn&&!xn&&(qo[Kt]=an)}}return an};(function(Pt){var Rt=fd,$t=Ao,Bt=$t("%Function.prototype.apply%"),Ut=$t("%Function.prototype.call%"),Kt=$t("%Reflect.apply%",!0)||Rt.call(Ut,Bt),an=$t("%Object.getOwnPropertyDescriptor%",!0),xn=$t("%Object.defineProperty%",!0),Bn=$t("%Math.max%");if(xn)try{xn({},"a",{value:1})}catch{xn=null}Pt.exports=function(Dn){var ur=Kt(Rt,Ut,arguments);if(an&&xn){var Pr=an(ur,"length");Pr.configurable&&xn(ur,"length",{value:1+Bn(0,Dn.length-(arguments.length-1))})}return ur};var Fn=function(){return Kt(Rt,Bt,arguments)};xn?xn(Pt.exports,"apply",{value:Fn}):Pt.exports.apply=Fn})(hd);var hs=Ao,ds=hd.exports,Cs=ds(hs("String.prototype.indexOf")),Go=function(Pt,Rt){var $t=hs(Pt,!!Rt);return typeof $t=="function"&&Cs(Pt,".prototype.")>-1?ds($t):$t},Ts=Ao,ks=Ts("%TypeError%"),As=function(Pt,Rt){if(Pt==null)throw new ks(Rt||"Cannot call method on "+Pt);return Pt},ns=As,Ps=Ao,fs=Ps("%Array%"),Wm=!fs.isArray&&Go("Object.prototype.toString"),Gm=fs.isArray||function(Pt){return Wm(Pt)==="[object Array]"},zg=Ao,Ym=Go,qm=zg("%TypeError%"),Xm=Gm,Zm=zg("%Reflect.apply%",!0)||Ym("%Function.prototype.apply%"),Km=function(Pt,Rt){var $t=arguments.length>2?arguments[2]:[];if(!Xm($t))throw new qm("Assertion failed: optional `argumentsList`, if provided, must be a List");return Zm(Pt,Rt,$t)},Xi={},qi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xi}),fo=Rl(qi),no=typeof Map=="function"&&Map.prototype,To=Object.getOwnPropertyDescriptor&&no?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,bo=no&&To&&typeof To.get=="function"?To.get:null,Ls=no&&Map.prototype.forEach,ps=typeof Set=="function"&&Set.prototype,Fi=Object.getOwnPropertyDescriptor&&ps?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Jn=ps&&Fi&&typeof Fi.get=="function"?Fi.get:null,Jm=ps&&Set.prototype.forEach,yv=typeof WeakMap=="function"&&WeakMap.prototype,$p=yv?WeakMap.prototype.has:null,vv=typeof WeakSet=="function"&&WeakSet.prototype,Bp=vv?WeakSet.prototype.has:null,_v=typeof WeakRef=="function"&&WeakRef.prototype,m1=_v?WeakRef.prototype.deref:null,bv=Boolean.prototype.valueOf,y1=Object.prototype.toString,v1=Function.prototype.toString,_1=String.prototype.match,$f=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Fp=Object.getOwnPropertySymbols,Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",e0=Object.prototype.propertyIsEnumerable,n0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Pt){return Pt.__proto__}:null),Hg=fo.custom,r0=Hg&&s0(Hg)?Hg:null,$l=typeof Symbol=="function"&&typeof Symbol.toStringTag<"u"?Symbol.toStringTag:null,xv=function Pt(Rt,$t,Bt,Ut){var Kt=$t||{};if(md(Kt,"quoteStyle")&&Kt.quoteStyle!=="single"&&Kt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(md(Kt,"maxStringLength")&&(typeof Kt.maxStringLength=="number"?Kt.maxStringLength<0&&Kt.maxStringLength!==1/0:Kt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var an=md(Kt,"customInspect")?Kt.customInspect:!0;if(typeof an!="boolean"&&an!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(md(Kt,"indent")&&Kt.indent!==null&&Kt.indent!=="	"&&!(parseInt(Kt.indent,10)===Kt.indent&&Kt.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(typeof Rt>"u")return"undefined";if(Rt===null)return"null";if(typeof Rt=="boolean")return Rt?"true":"false";if(typeof Rt=="string")return l0(Rt,Kt);if(typeof Rt=="number")return Rt===0?1/0/Rt>0?"0":"-0":String(Rt);if(typeof Rt=="bigint")return String(Rt)+"n";var xn=typeof Kt.depth>"u"?5:Kt.depth;if(typeof Bt>"u"&&(Bt=0),Bt>=xn&&xn>0&&typeof Rt=="object")return Vg(Rt)?"[Array]":"[Object]";var Bn=A1(Kt,Bt);if(typeof Ut>"u")Ut=[];else if(a0(Ut,Rt)>=0)return"[Circular]";function Fn(ha,da,wh){if(da&&(Ut=Ut.slice(),Ut.push(da)),wh){var rc={depth:Kt.depth};return md(Kt,"quoteStyle")&&(rc.quoteStyle=Kt.quoteStyle),Pt(ha,rc,Bt+1,Ut)}return Pt(ha,Kt,Bt+1,Ut)}if(typeof Rt=="function"){var Dn=Sv(Rt),ur=Ug(Rt,Fn);return"[Function"+(Dn?": "+Dn:" (anonymous)")+"]"+(ur.length>0?" { "+ur.join(", ")+" }":"")}if(s0(Rt)){var Pr=Bf?String(Rt).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Qm.call(Rt);return typeof Rt=="object"&&!Bf?zp(Pr):Pr}if(Av(Rt)){for(var $r="<"+String(Rt.nodeName).toLowerCase(),Kr=Rt.attributes||[],gi=0;gi<Kr.length;gi++)$r+=" "+Kr[gi].name+"="+i0(b1(Kr[gi].value),"double",Kt);return $r+=">",Rt.childNodes&&Rt.childNodes.length&&($r+="..."),$r+="</"+String(Rt.nodeName).toLowerCase()+">",$r}if(Vg(Rt)){if(Rt.length===0)return"[]";var fi=Ug(Rt,Fn);return Bn&&!Lv(fi)?"["+c0(fi,Bn)+"]":"[ "+fi.join(", ")+" ]"}if(o0(Rt)){var Ri=Ug(Rt,Fn);return Ri.length===0?"["+String(Rt)+"]":"{ ["+String(Rt)+"] "+Ri.join(", ")+" }"}if(typeof Rt=="object"&&an){if(r0&&typeof Rt[r0]=="function")return Rt[r0]();if(an!=="symbol"&&typeof Rt.inspect=="function")return Rt.inspect()}if(C1(Rt)){var Ui=[];return Ls.call(Rt,function(ha,da){Ui.push(Fn(da,Rt,!0)+" => "+Fn(ha,Rt))}),k1("Map",bo.call(Rt),Ui,Bn)}if(T1(Rt)){var Ho=[];return Jm.call(Rt,function(ha){Ho.push(Fn(ha,Rt))}),k1("Set",Jn.call(Rt),Ho,Bn)}if(Cv(Rt))return u0("WeakMap");if(kv(Rt))return u0("WeakSet");if(Tv(Rt))return u0("WeakRef");if(w1(Rt))return zp(Fn(Number(Rt)));if(S1(Rt))return zp(Fn($f.call(Rt)));if(E1(Rt))return zp(bv.call(Rt));if(Ev(Rt))return zp(Fn(String(Rt)));if(!wv(Rt)&&!x1(Rt)){var Oo=Ug(Rt,Fn),ko=n0?n0(Rt)===Object.prototype:Rt instanceof Object||Rt.constructor===Object,Uo=Rt instanceof Object?"":"null prototype",Io=!ko&&$l&&Object(Rt)===Rt&&$l in Rt?Ih(Rt).slice(8,-1):Uo?"Object":"",Fa=ko||typeof Rt.constructor!="function"?"":Rt.constructor.name?Rt.constructor.name+" ":"",Ya=Fa+(Io||Uo?"["+[].concat(Io||[],Uo||[]).join(": ")+"] ":"");return Oo.length===0?Ya+"{}":Bn?Ya+"{"+c0(Oo,Bn)+"}":Ya+"{ "+Oo.join(", ")+" }"}return String(Rt)};function i0(Pt,Rt,$t){var Bt=($t.quoteStyle||Rt)==="double"?'"':"'";return Bt+Pt+Bt}function b1(Pt){return String(Pt).replace(/"/g,"&quot;")}function Vg(Pt){return Ih(Pt)==="[object Array]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function wv(Pt){return Ih(Pt)==="[object Date]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function x1(Pt){return Ih(Pt)==="[object RegExp]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function o0(Pt){return Ih(Pt)==="[object Error]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function Ev(Pt){return Ih(Pt)==="[object String]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function w1(Pt){return Ih(Pt)==="[object Number]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function E1(Pt){return Ih(Pt)==="[object Boolean]"&&(!$l||!(typeof Pt=="object"&&$l in Pt))}function s0(Pt){if(Bf)return Pt&&typeof Pt=="object"&&Pt instanceof Symbol;if(typeof Pt=="symbol")return!0;if(!Pt||typeof Pt!="object"||!Qm)return!1;try{return Qm.call(Pt),!0}catch{}return!1}function S1(Pt){if(!Pt||typeof Pt!="object"||!$f)return!1;try{return $f.call(Pt),!0}catch{}return!1}var ah=Object.prototype.hasOwnProperty||function(Pt){return Pt in this};function md(Pt,Rt){return ah.call(Pt,Rt)}function Ih(Pt){return y1.call(Pt)}function Sv(Pt){if(Pt.name)return Pt.name;var Rt=_1.call(v1.call(Pt),/^function\s*([\w$]+)/);return Rt?Rt[1]:null}function a0(Pt,Rt){if(Pt.indexOf)return Pt.indexOf(Rt);for(var $t=0,Bt=Pt.length;$t<Bt;$t++)if(Pt[$t]===Rt)return $t;return-1}function C1(Pt){if(!bo||!Pt||typeof Pt!="object")return!1;try{bo.call(Pt);try{Jn.call(Pt)}catch{return!0}return Pt instanceof Map}catch{}return!1}function Cv(Pt){if(!$p||!Pt||typeof Pt!="object")return!1;try{$p.call(Pt,$p);try{Bp.call(Pt,Bp)}catch{return!0}return Pt instanceof WeakMap}catch{}return!1}function Tv(Pt){if(!m1||!Pt||typeof Pt!="object")return!1;try{return m1.call(Pt),!0}catch{}return!1}function T1(Pt){if(!Jn||!Pt||typeof Pt!="object")return!1;try{Jn.call(Pt);try{bo.call(Pt)}catch{return!0}return Pt instanceof Set}catch{}return!1}function kv(Pt){if(!Bp||!Pt||typeof Pt!="object")return!1;try{Bp.call(Pt,Bp);try{$p.call(Pt,$p)}catch{return!0}return Pt instanceof WeakSet}catch{}return!1}function Av(Pt){return!Pt||typeof Pt!="object"?!1:typeof HTMLElement<"u"&&Pt instanceof HTMLElement?!0:typeof Pt.nodeName=="string"&&typeof Pt.getAttribute=="function"}function l0(Pt,Rt){if(Pt.length>Rt.maxStringLength){var $t=Pt.length-Rt.maxStringLength,Bt="... "+$t+" more character"+($t>1?"s":"");return l0(Pt.slice(0,Rt.maxStringLength),Rt)+Bt}var Ut=Pt.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Pv);return i0(Ut,"single",Rt)}function Pv(Pt){var Rt=Pt.charCodeAt(0),$t={8:"b",9:"t",10:"n",12:"f",13:"r"}[Rt];return $t?"\\"+$t:"\\x"+(Rt<16?"0":"")+Rt.toString(16).toUpperCase()}function zp(Pt){return"Object("+Pt+")"}function u0(Pt){return Pt+" { ? }"}function k1(Pt,Rt,$t,Bt){var Ut=Bt?c0($t,Bt):$t.join(", ");return Pt+" ("+Rt+") {"+Ut+"}"}function Lv(Pt){for(var Rt=0;Rt<Pt.length;Rt++)if(a0(Pt[Rt],`
`)>=0)return!1;return!0}function A1(Pt,Rt){var $t;if(Pt.indent==="	")$t="	";else if(typeof Pt.indent=="number"&&Pt.indent>0)$t=Array(Pt.indent+1).join(" ");else return null;return{base:$t,prev:Array(Rt+1).join($t)}}function c0(Pt,Rt){if(Pt.length===0)return"";var $t=`
`+Rt.prev+Rt.base;return $t+Pt.join(","+$t)+`
`+Rt.prev}function Ug(Pt,Rt){var $t=Vg(Pt),Bt=[];if($t){Bt.length=Pt.length;for(var Ut=0;Ut<Pt.length;Ut++)Bt[Ut]=md(Pt,Ut)?Rt(Pt[Ut],Pt):""}var Kt=typeof Fp=="function"?Fp(Pt):[],an;if(Bf){an={};for(var xn=0;xn<Kt.length;xn++)an["$"+Kt[xn]]=Kt[xn]}for(var Bn in Pt)!md(Pt,Bn)||$t&&String(Number(Bn))===Bn&&Bn<Pt.length||Bf&&an["$"+Bn]instanceof Symbol||(/[^\w$]/.test(Bn)?Bt.push(Rt(Bn,Pt)+": "+Rt(Pt[Bn],Pt)):Bt.push(Bn+": "+Rt(Pt[Bn],Pt)));if(typeof Fp=="function")for(var Fn=0;Fn<Kt.length;Fn++)e0.call(Pt,Kt[Fn])&&Bt.push("["+Rt(Kt[Fn])+"]: "+Rt(Pt[Kt[Fn]],Pt));return Bt}var h0=function(Pt){return typeof Pt=="string"||typeof Pt=="symbol"},P1=function(Pt){if(Pt===null)return"Null";if(typeof Pt>"u")return"Undefined";if(typeof Pt=="function"||typeof Pt=="object")return"Object";if(typeof Pt=="number")return"Number";if(typeof Pt=="boolean")return"Boolean";if(typeof Pt=="string")return"String"},jg=P1,yd=function(Pt){return typeof Pt=="symbol"?"Symbol":typeof Pt=="bigint"?"BigInt":jg(Pt)},Wg=Ao,d0=Wg("%TypeError%"),Ov=xv,L1=h0,Iv=yd,O1=function(Pt,Rt){if(Iv(Pt)!=="Object")throw new d0("Assertion failed: Type(O) is not Object");if(!L1(Rt))throw new d0("Assertion failed: IsPropertyKey(P) is not true, got "+Ov(Rt));return Pt[Rt]},Gg=Ao,Hp=Gg("%TypeError%"),Vp=h0,Up=yd,I1=function(Pt,Rt){if(Up(Pt)!=="Object")throw new Hp("Assertion failed: `O` must be an Object");if(!Vp(Rt))throw new Hp("Assertion failed: `P` must be a Property Key");return Rt in Pt},Ff=Function.prototype.toString,lh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,zf,Yg;if(typeof lh=="function"&&typeof Object.defineProperty=="function")try{zf=Object.defineProperty({},"length",{get:function(){throw Yg}}),Yg={},lh(function(){throw 42},null,zf)}catch(Pt){Pt!==Yg&&(lh=null)}else lh=null;var Mv=/^\s*class\b/,f0=function(Pt){try{var Rt=Ff.call(Pt);return Mv.test(Rt)}catch{return!1}},M1=function(Pt){try{return f0(Pt)?!1:(Ff.call(Pt),!0)}catch{return!1}},Rv=Object.prototype.toString,p0="[object Function]",R1="[object GeneratorFunction]",Dv=typeof Symbol=="function"&&!!Symbol.toStringTag,Yd=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{},vd=lh?function(Pt){if(Pt===Yd)return!0;if(!Pt||typeof Pt!="function"&&typeof Pt!="object")return!1;if(typeof Pt=="function"&&!Pt.prototype)return!0;try{lh(Pt,null,zf)}catch(Rt){if(Rt!==Yg)return!1}return!f0(Pt)}:function(Pt){if(Pt===Yd)return!0;if(!Pt||typeof Pt!="function"&&typeof Pt!="object")return!1;if(typeof Pt=="function"&&!Pt.prototype)return!0;if(Dv)return M1(Pt);if(f0(Pt))return!1;var Rt=Rv.call(Pt);return Rt===p0||Rt===R1},D1=vd,N1=Ao,$1=N1("%Math%"),g0=N1("%Number%"),Nv=g0.MAX_SAFE_INTEGER||$1.pow(2,53)-1,$v=Ao,B1=$v("%Math.abs%"),Bv=function(Pt){return B1(Pt)},Hf=Math.floor,Hu=function(Pt){return Hf(Pt)},Vf=function(Pt){return Pt===null||typeof Pt!="function"&&typeof Pt!="object"},Xl=Object.prototype.toString,ea=Vf,Fv=vd,F1={"[[DefaultValue]]":function(Pt){var Rt;if(arguments.length>1?Rt=arguments[1]:Rt=Xl.call(Pt)==="[object Date]"?String:Number,Rt===String||Rt===Number){var $t=Rt===String?["toString","valueOf"]:["valueOf","toString"],Bt,Ut;for(Ut=0;Ut<$t.length;++Ut)if(Fv(Pt[$t[Ut]])&&(Bt=Pt[$t[Ut]](),ea(Bt)))return Bt;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}},m0=function(Pt){return ea(Pt)?Pt:arguments.length>1?F1["[[DefaultValue]]"](Pt,arguments[1]):F1["[[DefaultValue]]"](Pt)},zv=m0,z1=zv,H1=function(Pt){var Rt=z1(Pt,Number);if(typeof Rt!="string")return+Rt;var $t=Rt.replace(/^[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+|[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+$/g,"");return/^0[ob]|^[+-]0x/.test($t)?NaN:+$t},y0=Number.isNaN||function(Pt){return Pt!==Pt},V1=Number.isNaN||function(Pt){return Pt!==Pt},U1=Number.isFinite||function(Pt){return typeof Pt=="number"&&!V1(Pt)&&Pt!==1/0&&Pt!==-1/0},Hv=function(Pt){return Pt>=0?1:-1},Vv=Bv,Uv=Hu,j1=H1,W1=y0,G1=U1,Y1=Hv,q1=function(Pt){var Rt=j1(Pt);return W1(Rt)?0:Rt===0||!G1(Rt)?Rt:Y1(Rt)*Uv(Vv(Rt))},X1=Ao,Z1=X1("RegExp.prototype.test"),jv=hd.exports,Wv=function(Pt){return jv(Z1,Pt)},jp=function(Pt){return Pt===null||typeof Pt!="function"&&typeof Pt!="object"},K1=Df,v0=function(){return K1()&&!!Symbol.toStringTag},J1=Date.prototype.getDay,Q1=function(Pt){try{return J1.call(Pt),!0}catch{return!1}},ey=Object.prototype.toString,Gv="[object Date]",ty=v0(),_0=function(Pt){return typeof Pt!="object"||Pt===null?!1:ty?Q1(Pt):ey.call(Pt)===Gv},qg={exports:{}},b0=Object.prototype.toString,Xg=Vm();if(Xg){var x0=Symbol.prototype.toString,ny=/^Symbol\(.*\)$/,Yv=function(Pt){return typeof Pt.valueOf()!="symbol"?!1:ny.test(x0.call(Pt))};qg.exports=function(Pt){if(typeof Pt=="symbol")return!0;if(b0.call(Pt)!=="[object Symbol]")return!1;try{return Yv(Pt)}catch{return!1}}}else qg.exports=function(Pt){return!1};var _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",w0=Vf,Mh=vd,E0=_0,S0=qg.exports,C0=function(Pt,Rt){if(typeof Pt>"u"||Pt===null)throw new TypeError("Cannot call method on "+Pt);if(typeof Rt!="string"||Rt!=="number"&&Rt!=="string")throw new TypeError('hint must be "string" or "number"');var $t=Rt==="string"?["toString","valueOf"]:["valueOf","toString"],Bt,Ut,Kt;for(Kt=0;Kt<$t.length;++Kt)if(Bt=Pt[$t[Kt]],Mh(Bt)&&(Ut=Bt.call(Pt),w0(Ut)))return Ut;throw new TypeError("No default value")},T0=function(Pt,Rt){var $t=Pt[Rt];if($t!==null&&typeof $t<"u"){if(!Mh($t))throw new TypeError($t+" returned for property "+Rt+" of object "+Pt+" is not a function");return $t}},k0=function(Pt){if(w0(Pt))return Pt;var Rt="default";arguments.length>1&&(arguments[1]===String?Rt="string":arguments[1]===Number&&(Rt="number"));var $t;if(_d&&(Symbol.toPrimitive?$t=T0(Pt,Symbol.toPrimitive):S0(Pt)&&($t=Symbol.prototype.valueOf)),typeof $t<"u"){var Bt=$t.call(Pt,Rt);if(w0(Bt))return Bt;throw new TypeError("unable to convert exotic object to primitive")}return Rt==="default"&&(E0(Pt)||S0(Pt))&&(Rt="string"),C0(Pt,Rt==="default"?"number":Rt)},Zg=k0,A0=function(Pt){return arguments.length>1?Zg(Pt,arguments[1]):Zg(Pt)},au=Ao,P0=au("%TypeError%"),Zl=au("%Number%"),Wp=au("%RegExp%"),Kg=au("%parseInt%"),Rh=Go,Jg=Wv,L0=jp,ry=Rh("String.prototype.slice"),iy=Jg(/^0b[01]+$/i),Gp=Jg(/^0o[0-7]+$/i),Yp=Jg(/^[-+]0x[0-9a-f]+$/i),oy=["\x85","\u200B","\uFFFE"].join(""),sy=new Wp("["+oy+"]","g"),Qg=Jg(sy),ay=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),ly=new RegExp("(^["+ay+"]+)|(["+ay+"]+$)","g"),uy=Rh("String.prototype.replace"),uh=function(Pt){return uy(Pt,ly,"")},qv=A0,em=function Pt(Rt){var $t=L0(Rt)?Rt:qv(Rt,Zl);if(typeof $t=="symbol")throw new P0("Cannot convert a Symbol value to a number");if(typeof $t=="bigint")throw new P0("Conversion from 'BigInt' to 'number' is not allowed.");if(typeof $t=="string"){if(iy($t))return Pt(Kg(ry($t,2),2));if(Gp($t))return Pt(Kg(ry($t,2),8));if(Qg($t)||Yp($t))return NaN;var Bt=uh($t);if(Bt!==$t)return Pt(Bt)}return Zl($t)},cy=q1,Xv=em,hy=function(Pt){var Rt=Xv(Pt);return Rt!==0&&(Rt=cy(Rt)),Rt===0?0:Rt},dy=Nv,fy=hy,Zv=function(Pt){var Rt=fy(Pt);return Rt<=0?0:Rt>dy?dy:Rt},Kv=Ao,py=Kv("%TypeError%"),Jv=O1,Dc=Zv,Dh=yd,qd=function(Pt){if(Dh(Pt)!=="Object")throw new py("Assertion failed: `obj` must be an Object");return Dc(Jv(Pt,"length"))},ra=Ao,Po=ra("%Object%"),gy=ns,Su=function(Pt){return gy(Pt),Po(Pt)},qp=Ao,Uf=qp("%String%"),Cu=qp("%TypeError%"),Ur=function(Pt){if(typeof Pt=="symbol")throw new Cu("Cannot convert a Symbol value to a string");return Uf(Pt)},Xd=String.prototype.valueOf,Nh=function(Pt){try{return Xd.call(Pt),!0}catch{return!1}},jf=Object.prototype.toString,Zr="[object String]",Xp=v0(),xo=function(Pt){return typeof Pt=="string"?!0:typeof Pt!="object"?!1:Xp?Nh(Pt):jf.call(Pt)===Zr},lu=Ao,my=Go,uc=lu("%TypeError%"),cc=Km,Zp=O1,ri=I1,Vu=D1,Bl=qd,yy=Su,gs=Ur,Kp=xo,vy=my("String.prototype.split"),Zd=Object("a"),ul=Zd[0]!=="a"||!(0 in Zd),Tu=function(Pt){var Rt=yy(this),$t=ul&&Kp(this)?vy(this,""):Rt,Bt=Bl($t);if(!Vu(Pt))throw new uc("Array.prototype.forEach callback must be a function");var Ut;arguments.length>1&&(Ut=arguments[1]);for(var Kt=0;Kt<Bt;){var an=gs(Kt),xn=ri($t,an);if(xn){var Bn=Zp($t,an);cc(Pt,Ut,[Bn,Kt,$t])}Kt+=1}},to=function(Pt){var Rt=!0,$t=!0,Bt=!1;if(typeof Pt=="function"){try{Pt.call("f",function(Ut,Kt,an){typeof an!="object"&&(Rt=!1)}),Pt.call([null],function(){"use strict";$t=typeof this=="string"},"x")}catch{Bt=!0}return!Bt&&Rt&&$t}return!1},_y=to,hc=Tu,Jp=function(){var Pt=Array.prototype.forEach;return _y(Pt)?Pt:hc},ch=sh,Wf=Jp,Uu=function(){var Pt=Wf();return ch(Array.prototype,{forEach:Pt},{forEach:function(){return Array.prototype.forEach!==Pt}}),Pt},hh=sh,tm=hd.exports,No=Go,aa=ns,Kd=Tu,$h=Jp,Jd=$h(),dc=Uu,$i=No("Array.prototype.slice"),Qd=tm.apply(Jd),Nc=function(Pt,Rt){return aa(Pt),Qd(Pt,$i(arguments,1))};hh(Nc,{getPolyfill:$h,implementation:Kd,shim:dc});var go=Nc,$c=ns,nm=Go,Bc=nm("Object.prototype.propertyIsEnumerable"),ku=nm("Array.prototype.push"),Fc=function(Pt){var Rt=$c(Pt),$t=[];for(var Bt in Rt)Bc(Rt,Bt)&&ku($t,[Bt,Rt[Bt]]);return $t},Gf=Fc,ef=function(){return typeof Object.entries=="function"?Object.entries:Gf},Yf=ef,qf=sh,Oa=function(){var Pt=Yf();return qf(Object,{entries:Pt},{entries:function(){return Object.entries!==Pt}}),Pt},O0=sh,Xf=hd.exports,ju=Fc,tf=ef,Ii=Oa,by=Xf(tf(),Object);O0(by,{getPolyfill:tf,implementation:ju,shim:Ii});var Qp=by,Xo=ns,rm=Ur,eg=Go,nf=eg("String.prototype.replace"),rf=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Qv=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,Zf=function(){var Pt=rm(Xo(this));return nf(nf(Pt,rf,""),Qv,"")},im=Zf,om="\u200B",xy=function(){return String.prototype.trim&&om.trim()===om?String.prototype.trim:im},wy=sh,qs=xy,dh=function(){var Pt=qs();return wy(String.prototype,{trim:Pt},{trim:function(){return String.prototype.trim!==Pt}}),Pt},I0=hd.exports,Ey=sh,vl=Zf,Kf=xy,Sy=dh,Wu=I0(Kf());Ey(Wu,{getPolyfill:Kf,implementation:vl,shim:Sy});var sm=Wu,zc=go,Os=Qp,Au=Um,fc=sm,Gu=function(Pt){},Al=String.prototype.replace,Bh=String.prototype.split,Fl="||||",Jf=function(Pt){var Rt=Pt%100,$t=Rt%10;return Rt!==11&&$t===1?0:2<=$t&&$t<=4&&!(Rt>=12&&Rt<=14)?1:2},Cy={pluralTypes:{arabic:function(Pt){if(Pt<3)return Pt;var Rt=Pt%100;return Rt>=3&&Rt<=10?3:Rt>=11?4:5},bosnian_serbian:Jf,chinese:function(){return 0},croatian:Jf,french:function(Pt){return Pt>=2?1:0},german:function(Pt){return Pt!==1?1:0},russian:Jf,lithuanian:function(Pt){return Pt%10==1&&Pt%100!=11?0:Pt%10>=2&&Pt%10<=9&&(Pt%100<11||Pt%100>19)?1:2},czech:function(Pt){return Pt===1?0:Pt>=2&&Pt<=4?1:2},polish:function(Pt){if(Pt===1)return 0;var Rt=Pt%10;return 2<=Rt&&Rt<=4&&(Pt%100<10||Pt%100>=20)?1:2},icelandic:function(Pt){return Pt%10!=1||Pt%100==11?1:0},slovenian:function(Pt){var Rt=Pt%100;return Rt===1?0:Rt===2?1:Rt===3||Rt===4?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function e_(Pt){var Rt={};return zc(Os(Pt),function($t){var Bt=$t[0],Ut=$t[1];zc(Ut,function(Kt){Rt[Kt]=Bt})}),Rt}function t_(Pt,Rt){var $t=e_(Pt.pluralTypeToLanguages);return $t[Rt]||$t[Bh.call(Rt,/-/,1)[0]]||$t.en}function n_(Pt,Rt,$t){return Pt.pluralTypes[Rt]($t)}function r_(){var Pt={};return function(Rt,$t){var Bt=Pt[$t];return Bt&&!Rt.pluralTypes[Bt]&&(Bt=null,Pt[$t]=Bt),Bt||(Bt=t_(Rt,$t),Bt&&(Pt[$t]=Bt)),Bt}}function Ty(Pt){return Pt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pu(Pt){var Rt=Pt&&Pt.prefix||"%{",$t=Pt&&Pt.suffix||"}";if(Rt===Fl||$t===Fl)throw new RangeError('"'+Fl+'" token is reserved for pluralization');return new RegExp(Ty(Rt)+"(.*?)"+Ty($t),"g")}var M0=r_(),ya=/%\{(.*?)\}/g;function ia(Pt,Rt,$t,Bt,Ut){if(typeof Pt!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(Rt==null)return Pt;var Kt=Pt,an=Bt||ya,xn=typeof Rt=="number"?{smart_count:Rt}:Rt;if(xn.smart_count!=null&&Pt){var Bn=Ut||Cy,Fn=Bh.call(Pt,Fl),Dn=$t||"en",ur=M0(Bn,Dn),Pr=n_(Bn,ur,xn.smart_count);Kt=fc(Fn[Pr]||Fn[0])}return Kt=Al.call(Kt,an,function($r,Kr){return!Au(xn,Kr)||xn[Kr]==null?$r:xn[Kr]}),Kt}function Yu(Pt){var Rt=Pt||{};this.phrases={},this.extend(Rt.phrases||{}),this.currentLocale=Rt.locale||"en";var $t=Rt.allowMissing?ia:null;this.onMissingKey=typeof Rt.onMissingKey=="function"?Rt.onMissingKey:$t,this.warn=Rt.warn||Gu,this.tokenRegex=Pu(Rt.interpolation),this.pluralRules=Rt.pluralRules||Cy}Yu.prototype.locale=function(Pt){return Pt&&(this.currentLocale=Pt),this.currentLocale},Yu.prototype.extend=function(Pt,Rt){zc(Os(Pt||{}),function($t){var Bt=$t[0],Ut=$t[1],Kt=Rt?Rt+"."+Bt:Bt;typeof Ut=="object"?this.extend(Ut,Kt):this.phrases[Kt]=Ut},this)},Yu.prototype.unset=function(Pt,Rt){typeof Pt=="string"?delete this.phrases[Pt]:zc(Os(Pt||{}),function($t){var Bt=$t[0],Ut=$t[1],Kt=Rt?Rt+"."+Bt:Bt;typeof Ut=="object"?this.unset(Ut,Kt):delete this.phrases[Kt]},this)},Yu.prototype.clear=function(){this.phrases={}},Yu.prototype.replace=function(Pt){this.clear(),this.extend(Pt)},Yu.prototype.t=function(Pt,Rt){var $t,Bt,Ut=Rt==null?{}:Rt;if(typeof this.phrases[Pt]=="string")$t=this.phrases[Pt];else if(typeof Ut._=="string")$t=Ut._;else if(this.onMissingKey){var Kt=this.onMissingKey;Bt=Kt(Pt,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+Pt+'"'),Bt=Pt;return typeof $t=="string"&&(Bt=ia($t,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)),Bt},Yu.prototype.has=function(Pt){return Au(this.phrases,Pt)},Yu.transformPhrase=function(Pt,Rt,$t){return ia(Pt,Rt,$t)};var Kl=Yu,Fh={"Add a comment...":"\u0625\u0636\u0627\u0641\u0629 \u062A\u0639\u0644\u064A\u0642","Add a reply...":"\u0625\u0636\u0627\u0641\u0629 \u0631\u062F","Add tag...":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0644\u0627\u0645\u0629",Cancel:"\u0625\u0644\u063A\u0627\u0621",Close:"\u0625\u063A\u0644\u0627\u0642",Edit:"Edit",Delete:"Delete",Ok:"\u062A\u0645"},Ia={"Add a comment...":"Napsat koment\xE1\u0159...","Add a reply...":"Odpov\u011Bd\u011Bt...","Add tag...":"P\u0159idat \u0161t\xEDtek...",Cancel:"Zru\u0161it",Close:"Zav\u0159\xEDt",Edit:"Upravit",Delete:"Smazat",Ok:"Ok"},Qf={"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...",Cancel:"Abbrechen",Close:"Schliessen",Edit:"Bearbeiten",Delete:"L\xF6schen",Ok:"Ok"},Hc={"Add a comment...":"\u03A3\u03C7\u03BF\u03BB\u03AF\u03B1\u03C3\u03B5...","Add a reply...":"\u0391\u03C0\u03AC\u03BD\u03C4\u03B7\u03C3\u03B5...","Add tag...":"\u03A0\u03C1\u03CC\u03C3\u03B8\u03B5\u03C3\u03B5 tag...",Cancel:"\u0386\u03BA\u03C5\u03C1\u03BF",Close:"\u039A\u03BB\u03B5\u03AF\u03C3\u03B9\u03BC\u03BF",Edit:"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1",Delete:"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE",Ok:"Ok"},Vc={"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Cerrar",Edit:"Editar",Delete:"Eliminar",Ok:"Ok"},Lu={"Add a comment...":"Lis\xE4\xE4 kommentti","Add a reply...":"Lis\xE4\xE4 vastaus","Add tag...":"Lis\xE4\xE4 tunniste",Cancel:"Peruuta",Close:"Sulje",Edit:"Muokkaa",Delete:"Poista",Ok:"Ok"},am={"Add a comment...":"Ajouter un commentaire...","Add a reply...":"Ajouter une r\xE9ponse...","Add tag...":"Ajouter une \xE9tiquette...",Cancel:"Annuler",Close:"Fermer",Edit:"\xC9diter",Delete:"Supprimer",Ok:"Ok"},tg={"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Pechar",Edit:"Edit",Delete:"Delete",Ok:"Ok"},ng={"Add a comment...":"\u091F\u093F\u092A\u094D\u092A\u0923\u0940 \u091C\u094B\u0921\u093C\u0947\u0902","Add a reply...":"\u091C\u0935\u093E\u092C \u0926\u0947\u0902","Add tag...":"\u091F\u0948\u0917 \u0932\u0917\u093E\u090F\u0901",Cancel:"\u0930\u0926\u094D\u0926 \u0915\u0930\u0947\u0902",Close:"\u092C\u0902\u0926 \u0915\u0930\u0947\u0902",Edit:"\u0938\u0902\u092A\u093E\u0926\u093F\u0924 \u0915\u0930\u0947\u0902",Delete:"\u0939\u091F\u093E\u090F\u0901",Ok:"\u0920\u0940\u0915 \u0939\u0948"},rg={"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...",Cancel:"Annulla",Close:"Chiudi",Edit:"Edit",Delete:"Delete",Ok:"Ok"},va={"Add a comment...":"\uB313\uAE00 \uCD94\uAC00","Add a reply...":"\uB2F5\uAE00 \uCD94\uAC00","Add tag...":"\uD0DC\uADF8 \uCD94\uAC00",Cancel:"\uCDE8\uC18C",Close:"\uB2EB\uAE30",Edit:"\uC218\uC815",Delete:"\uC0AD\uC81C",Ok:"\uD655\uC778"},ky={"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...",Cancel:"Afbreken",Close:"Sluiten",Edit:"Bewerken",Delete:"Verwijderen",Ok:"Ok"},Uc={"Add a comment...":"Adicionar um coment\xE1rio...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Fechar",Edit:"Editar",Delete:"Apagar",Ok:"Ok"},R0={"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...",Cancel:"Cancel",Close:"St\xE4ng",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Ay={"Add a comment...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E2D\u0E21\u0E40\u0E21\u0E19\u0E15\u0E4C...","Add a reply...":"\u0E15\u0E2D\u0E1A\u0E01\u0E25\u0E31\u0E1A...","Add tag...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E41\u0E17\u0E47\u0E01...",Cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",Close:"\u0E1B\u0E34\u0E14",Edit:"\u0E41\u0E01\u0E49\u0E44\u0E02",Delete:"\u0E25\u0E1A",Ok:"\u0E15\u0E01\u0E25\u0E07"},Ns={"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...",Cancel:"\u0130ptal",Close:"Kapat",Edit:"D\xFCzenle",Delete:"Sil",Ok:"Tamam"},D0={"Add a comment...":"\u062A\u0628\u0635\u0631\u06C1 \u06A9\u0631\u06CC\u06BA","Add a reply...":"\u062C\u0648\u0627\u0628 \u062F\u06CC\u06BA","Add tag...":"\u0679\u06CC\u06AF \u0644\u06AF\u0627\u0626\u06CC\u06BA",Cancel:"\u0645\u0646\u0633\u0648\u062E \u06A9\u0631\u06CC\u06BA",Close:"\u0628\u0646\u062F \u06A9\u0631\u06CC\u06BA",Edit:"\u062A\u0631\u0645\u06CC\u0645 \u06A9\u0631\u06CC\u06BA",Delete:"\u06C1\u0679\u0627\u0626\u06CC\u06BA",Ok:"\u0679\u06BE\u06CC\u06A9 \u06C1\u06D2"},qu={};Object.defineProperty(qu,"__esModule",{value:!0});var ig=[["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u064A\u0646","%s \u062B\u0648\u0627\u0646","%s \u062B\u0627\u0646\u064A\u0629"],["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u064A\u0646","%s \u062F\u0642\u0627\u0626\u0642","%s \u062F\u0642\u064A\u0642\u0629"],["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","%s \u0633\u0627\u0639\u0627\u062A","%s \u0633\u0627\u0639\u0629"],["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","%s \u0623\u064A\u0627\u0645","%s \u064A\u0648\u0645\u0627\u064B"],["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","%s \u0623\u0633\u0627\u0628\u064A\u0639","%s \u0623\u0633\u0628\u0648\u0639\u0627\u064B"],["\u0634\u0647\u0631","\u0634\u0647\u0631\u064A\u0646","%s \u0623\u0634\u0647\u0631","%s \u0634\u0647\u0631\u0627\u064B"],["\u0639\u0627\u0645","\u0639\u0627\u0645\u064A\u0646","%s \u0623\u0639\u0648\u0627\u0645","%s \u0639\u0627\u0645\u0627\u064B"]];function Zo(Pt,Rt){return Rt<3?ig[Pt][Rt-1]:Rt>=3&&Rt<=10?ig[Pt][2]:ig[Pt][3]}function Py(Pt,Rt){if(Rt===0)return["\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A","\u0628\u0639\u062F \u0644\u062D\u0638\u0627\u062A"];var $t=Zo(Math.floor(Rt/2),Pt);return["\u0645\u0646\u0630 "+$t,"\u0628\u0639\u062F "+$t]}var i_=qu.default=Py,og={};Object.defineProperty(og,"__esModule",{value:!0});function pc(Pt,Rt){var $t=0,Bt=Rt==1||Rt==3||Rt==5||Rt==7||Rt==9||Rt==11||Rt==13;return Bt&&Pt>=5&&($t=1),[[["pr\xE1v\u011B te\u010F","pr\xE1v\u011B te\u010F"]],[["p\u0159ed %s vte\u0159inami","za %s vte\u0159iny"],["p\u0159ed %s vte\u0159inami","za %s vte\u0159in"]],[["p\u0159ed minutou","za minutu"]],[["p\u0159ed %s minutami","za %s minuty"],["p\u0159ed %s minutami","za %s minut"]],[["p\u0159ed hodinou","za hodinu"]],[["p\u0159ed %s hodinami","za %s hodiny"],["p\u0159ed %s hodinami","za %s hodin"]],[["v\u010Dera","z\xEDtra"]],[["p\u0159ed %s dny","za %s dny"],["p\u0159ed %s dny","za %s dn\u016F"]],[["minul\xFD t\xFDden","p\u0159\xED\u0161t\xED t\xFDden"]],[["p\u0159ed %s t\xFDdny","za %s t\xFDdny"],["p\u0159ed %s t\xFDdny","za %s t\xFDdn\u016F"]],[["minul\xFD m\u011Bs\xEDc","p\u0159\xEDst\xED m\u011Bs\xEDc"]],[["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDce"],["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDc\u016F"]],[["p\u0159ed rokem","p\u0159\xEDst\xED rok"]],[["p\u0159ed %s lety","za %s roky"],["p\u0159ed %s lety","za %s let"]]][Rt][$t]}var fh=og.default=pc,lm={};Object.defineProperty(lm,"__esModule",{value:!0});function Ly(Pt,Rt){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][Rt]}var Si=lm.default=Ly,sg={};Object.defineProperty(sg,"__esModule",{value:!0});function um(Pt,Rt){return[["\u03BC\u03CC\u03BB\u03B9\u03C2 \u03C4\u03CE\u03C1\u03B1","\u03C3\u03B5 \u03BB\u03AF\u03B3\u03BF"],["%s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"],["1 \u03BB\u03B5\u03C0\u03C4\u03CC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BB\u03B5\u03C0\u03C4\u03CC"],["%s \u03BB\u03B5\u03C0\u03C4\u03AC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BB\u03B5\u03C0\u03C4\u03AC"],["1 \u03CE\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03CE\u03C1\u03B1"],["%s \u03CE\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03CE\u03C1\u03B5\u03C2"],["1 \u03BC\u03AD\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AD\u03C1\u03B1"],["%s \u03BC\u03AD\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AD\u03C1\u03B5\u03C2"],["1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1"],["%s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"],["1 \u03BC\u03AE\u03BD\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AE\u03BD\u03B1"],["%s \u03BC\u03AE\u03BD\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AE\u03BD\u03B5\u03C2"],["1 \u03C7\u03C1\u03CC\u03BD\u03BF \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03C7\u03C1\u03CC\u03BD\u03BF"],["%s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"]][Rt]}var gc=sg.default=um,Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});function ph(Pt,Rt){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xEDa","en 1 d\xEDa"],["hace %s d\xEDas","en %s d\xEDas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xF1o","en 1 a\xF1o"],["hace %s a\xF1os","en %s a\xF1os"]][Rt]}var cm=Xu.default=ph,_l={};Object.defineProperty(_l,"__esModule",{value:!0});function Xs(Pt,Rt){return[["juuri \xE4sken","juuri nyt"],["%s sekuntia sitten","%s sekunnin p\xE4\xE4st\xE4"],["minuutti sitten","minuutin p\xE4\xE4st\xE4"],["%s minuuttia sitten","%s minuutin p\xE4\xE4st\xE4"],["tunti sitten","tunnin p\xE4\xE4st\xE4"],["%s tuntia sitten","%s tunnin p\xE4\xE4st\xE4"],["p\xE4iv\xE4 sitten","p\xE4iv\xE4n p\xE4\xE4st\xE4"],["%s p\xE4iv\xE4\xE4 sitten","%s p\xE4iv\xE4n p\xE4\xE4st\xE4"],["viikko sitten","viikon p\xE4\xE4st\xE4"],["%s viikkoa sitten","%s viikon p\xE4\xE4st\xE4"],["kuukausi sitten","kuukauden p\xE4\xE4st\xE4"],["%s kuukautta sitten","%s kuukauden p\xE4\xE4st\xE4"],["vuosi sitten","vuoden p\xE4\xE4st\xE4"],["%s vuotta sitten","%s vuoden p\xE4\xE4st\xE4"]][Rt]}var zs=_l.default=Xs,ba={};Object.defineProperty(ba,"__esModule",{value:!0});function o_(Pt,Rt){return[["\xE0 l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][Rt]}var s_=ba.default=o_,Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});function hm(Pt,Rt){return[["xusto agora","daqu\xED a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 d\xEDa","nun d\xEDa"],["hai %s d\xEDas","en %s d\xEDas"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][Rt]}var mc=Jl.default=hm,Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});function ag(Pt,Rt){return[["\u0905\u092D\u0940","\u0915\u0941\u091B \u0938\u092E\u092F"],["%s \u0938\u0947\u0915\u0902\u0921 \u092A\u0939\u0932\u0947","%s \u0938\u0947\u0915\u0902\u0921 \u092E\u0947\u0902"],["1 \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","1 \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["%s \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","%s \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["1 \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","1 \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["%s \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","%s \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["1 \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","1 \u0926\u093F\u0928 \u092E\u0947\u0902"],["%s \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","%s \u0926\u093F\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092A\u0939\u0932\u0947","1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092E\u0947\u0902"],["%s \u0939\u092B\u094D\u0924\u0947 \u092A\u0939\u0932\u0947","%s \u0939\u092B\u094D\u0924\u094B\u0902 \u092E\u0947\u0902"],["1 \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","1 \u092E\u0939\u0940\u0928\u0947 \u092E\u0947\u0902"],["%s \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","%s \u092E\u0939\u0940\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","1 \u0938\u093E\u0932 \u092E\u0947\u0902"],["%s \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","%s \u0938\u093E\u0932 \u092E\u0947\u0902"]][Rt]}var bl=Hs.default=ag,dm={};Object.defineProperty(dm,"__esModule",{value:!0});function ep(Pt,Rt){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][Rt]}var la=dm.default=ep,zl={};Object.defineProperty(zl,"__esModule",{value:!0});function tp(Pt,Rt){return[["\uBC29\uAE08","\uACE7"],["%s\uCD08 \uC804","%s\uCD08 \uD6C4"],["1\uBD84 \uC804","1\uBD84 \uD6C4"],["%s\uBD84 \uC804","%s\uBD84 \uD6C4"],["1\uC2DC\uAC04 \uC804","1\uC2DC\uAC04 \uD6C4"],["%s\uC2DC\uAC04 \uC804","%s\uC2DC\uAC04 \uD6C4"],["1\uC77C \uC804","1\uC77C \uD6C4"],["%s\uC77C \uC804","%s\uC77C \uD6C4"],["1\uC8FC\uC77C \uC804","1\uC8FC\uC77C \uD6C4"],["%s\uC8FC\uC77C \uC804","%s\uC8FC\uC77C \uD6C4"],["1\uAC1C\uC6D4 \uC804","1\uAC1C\uC6D4 \uD6C4"],["%s\uAC1C\uC6D4 \uC804","%s\uAC1C\uC6D4 \uD6C4"],["1\uB144 \uC804","1\uB144 \uD6C4"],["%s\uB144 \uC804","%s\uB144 \uD6C4"]][Rt]}var Zu=zl.default=tp,jc={};Object.defineProperty(jc,"__esModule",{value:!0});function zh(Pt,Rt){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][Rt]}var of=jc.default=zh,Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});function Oy(Pt,Rt){return[["agora mesmo","agora"],["h\xE1 %s segundos","em %s segundos"],["h\xE1 um minuto","em um minuto"],["h\xE1 %s minutos","em %s minutos"],["h\xE1 uma hora","em uma hora"],["h\xE1 %s horas","em %s horas"],["h\xE1 um dia","em um dia"],["h\xE1 %s dias","em %s dias"],["h\xE1 uma semana","em uma semana"],["h\xE1 %s semanas","em %s semanas"],["h\xE1 um m\xEAs","em um m\xEAs"],["h\xE1 %s meses","em %s meses"],["h\xE1 um ano","em um ano"],["h\xE1 %s anos","em %s anos"]][Rt]}var Ku=Ca.default=Oy,xa={};Object.defineProperty(xa,"__esModule",{value:!0});function Qa(Pt,Rt){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 m\xE5nad sedan","om 1 m\xE5nad"],["%s m\xE5nader sedan","om %s m\xE5nader"],["1 \xE5r sedan","om 1 \xE5r"],["%s \xE5r sedan","om %s \xE5r"]][Rt]}var fm=xa.default=Qa,Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});function np(Pt,Rt){return[["\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48\u0E19\u0E35\u0E49","\u0E2D\u0E35\u0E01\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48"],["%s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"],["1 \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E19\u0E32\u0E17\u0E35"],["%s \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E19\u0E32\u0E17\u0E35"],["1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["%s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["1 \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E27\u0E31\u0E19"],["%s \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E31\u0E19"],["1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["%s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["1 \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E40\u0E14\u0E37\u0E2D\u0E19"],["%s \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E40\u0E14\u0E37\u0E2D\u0E19"],["1 \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E1B\u0E35"],["%s \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E1B\u0E35"]][Rt]}var My=Iy.default=np,N0={};Object.defineProperty(N0,"__esModule",{value:!0});function Hl(Pt,Rt){return[["az \xF6nce","\u015Fimdi"],["%s saniye \xF6nce","%s saniye i\xE7inde"],["1 dakika \xF6nce","1 dakika i\xE7inde"],["%s dakika \xF6nce","%s dakika i\xE7inde"],["1 saat \xF6nce","1 saat i\xE7inde"],["%s saat \xF6nce","%s saat i\xE7inde"],["1 g\xFCn \xF6nce","1 g\xFCn i\xE7inde"],["%s g\xFCn \xF6nce","%s g\xFCn i\xE7inde"],["1 hafta \xF6nce","1 hafta i\xE7inde"],["%s hafta \xF6nce","%s hafta i\xE7inde"],["1 ay \xF6nce","1 ay i\xE7inde"],["%s ay \xF6nce","%s ay i\xE7inde"],["1 y\u0131l \xF6nce","1 y\u0131l i\xE7inde"],["%s y\u0131l \xF6nce","%s y\u0131l i\xE7inde"]][Rt]}var Hh=N0.default=Hl;const Ga={ar:Fh,cs:Ia,de:Qf,el:Hc,es:Vc,fi:Lu,fr:am,gl:tg,hi:ng,it:rg,ko:va,nl:ky,pt:Uc,sv:R0,th:Ay,tr:Ns,ur:D0},Ju=new Kl({allowMissing:!0});Ju.init=(Pt,Rt)=>{Ju.clear(),Pt&&(Ju.locale(Pt),Ju.extend(Ga[Pt])),Rt&&Ju.extend(Rt)},Sa("ar",i_),Sa("cs",fh),Sa("de",Si),Sa("el",gc),Sa("es",cm),Sa("fi",zs),Sa("fr",s_),Sa("gl",mc),Sa("hi",bl),Sa("it",la),Sa("ko",Zu),Sa("nl",of),Sa("pt",Ku),Sa("sv",fm),Sa("th",My),Sa("tr",Hh),Ju.registerMessages=(Pt,Rt)=>{Ga[Pt]?Ga[Pt]=Mt(Mt({},Ga[Pt]),Rt):Ga[Pt]=Rt};var Ma=Ju,lg=Pt=>{const Rt=Tn();return Pp(Rt,()=>Pt.onClickOutside()),gn("ul",{ref:Rt,className:"r6o-comment-dropdown-menu"},gn("li",{onClick:Pt.onEdit},Ma.t("Edit")),gn("li",{onClick:Pt.onDelete},Ma.t("Delete")))},ca={},Qi={},pm={exports:{}};/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/(function(Pt,Rt){(function($t,Bt){Bt(Pt,Rt)})(qa,function($t,Bt){var Ut=typeof Map=="function"?new Map:function(){var Dn=[],ur=[];return{has:function(Pr){return Dn.indexOf(Pr)>-1},get:function(Pr){return ur[Dn.indexOf(Pr)]},set:function(Pr,$r){Dn.indexOf(Pr)===-1&&(Dn.push(Pr),ur.push($r))},delete:function(Pr){var $r=Dn.indexOf(Pr);$r>-1&&(Dn.splice($r,1),ur.splice($r,1))}}}(),Kt=function(Dn){return new Event(Dn,{bubbles:!0})};try{new Event("test")}catch{Kt=function(ur){var Pr=document.createEvent("Event");return Pr.initEvent(ur,!0,!1),Pr}}function an(Dn){if(!Dn||!Dn.nodeName||Dn.nodeName!=="TEXTAREA"||Ut.has(Dn))return;var ur=null,Pr=null,$r=null;function Kr(){var ko=window.getComputedStyle(Dn,null);ko.resize==="vertical"?Dn.style.resize="none":ko.resize==="both"&&(Dn.style.resize="horizontal"),ko.boxSizing==="content-box"?ur=-(parseFloat(ko.paddingTop)+parseFloat(ko.paddingBottom)):ur=parseFloat(ko.borderTopWidth)+parseFloat(ko.borderBottomWidth),isNaN(ur)&&(ur=0),Ui()}function gi(ko){{var Uo=Dn.style.width;Dn.style.width="0px",Dn.offsetWidth,Dn.style.width=Uo}Dn.style.overflowY=ko}function fi(ko){for(var Uo=[];ko&&ko.parentNode&&ko.parentNode instanceof Element;)ko.parentNode.scrollTop&&Uo.push({node:ko.parentNode,scrollTop:ko.parentNode.scrollTop}),ko=ko.parentNode;return Uo}function Ri(){if(Dn.scrollHeight!==0){var ko=fi(Dn),Uo=document.documentElement&&document.documentElement.scrollTop;Dn.style.height="",Dn.style.height=Dn.scrollHeight+ur+"px",Pr=Dn.clientWidth,ko.forEach(function(Io){Io.node.scrollTop=Io.scrollTop}),Uo&&(document.documentElement.scrollTop=Uo)}}function Ui(){Ri();var ko=Math.round(parseFloat(Dn.style.height)),Uo=window.getComputedStyle(Dn,null),Io=Uo.boxSizing==="content-box"?Math.round(parseFloat(Uo.height)):Dn.offsetHeight;if(Io<ko?Uo.overflowY==="hidden"&&(gi("scroll"),Ri(),Io=Uo.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(Dn,null).height)):Dn.offsetHeight):Uo.overflowY!=="hidden"&&(gi("hidden"),Ri(),Io=Uo.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(Dn,null).height)):Dn.offsetHeight),$r!==Io){$r=Io;var Fa=Kt("autosize:resized");try{Dn.dispatchEvent(Fa)}catch{}}}var Ho=function(){Dn.clientWidth!==Pr&&Ui()},Oo=function(ko){window.removeEventListener("resize",Ho,!1),Dn.removeEventListener("input",Ui,!1),Dn.removeEventListener("keyup",Ui,!1),Dn.removeEventListener("autosize:destroy",Oo,!1),Dn.removeEventListener("autosize:update",Ui,!1),Object.keys(ko).forEach(function(Uo){Dn.style[Uo]=ko[Uo]}),Ut.delete(Dn)}.bind(Dn,{height:Dn.style.height,resize:Dn.style.resize,overflowY:Dn.style.overflowY,overflowX:Dn.style.overflowX,wordWrap:Dn.style.wordWrap});Dn.addEventListener("autosize:destroy",Oo,!1),"onpropertychange"in Dn&&"oninput"in Dn&&Dn.addEventListener("keyup",Ui,!1),window.addEventListener("resize",Ho,!1),Dn.addEventListener("input",Ui,!1),Dn.addEventListener("autosize:update",Ui,!1),Dn.style.overflowX="hidden",Dn.style.wordWrap="break-word",Ut.set(Dn,{destroy:Oo,update:Ui}),Kr()}function xn(Dn){var ur=Ut.get(Dn);ur&&ur.destroy()}function Bn(Dn){var ur=Ut.get(Dn);ur&&ur.update()}var Fn=null;typeof window>"u"||typeof window.getComputedStyle!="function"?(Fn=function(Dn){return Dn},Fn.destroy=function(Dn){return Dn},Fn.update=function(Dn){return Dn}):(Fn=function(Dn,ur){return Dn&&Array.prototype.forEach.call(Dn.length?Dn:[Dn],function(Pr){return an(Pr)}),Dn},Fn.destroy=function(Dn){return Dn&&Array.prototype.forEach.call(Dn.length?Dn:[Dn],xn),Dn},Fn.update=function(Dn){return Dn&&Array.prototype.forEach.call(Dn.length?Dn:[Dn],Bn),Dn}),Bt.default=Fn,$t.exports=Bt.default})})(pm,pm.exports);var ug=function(Pt,Rt,$t){return $t=window.getComputedStyle,($t?$t(Pt):Pt.currentStyle)[Rt.replace(/-(\w)/gi,function(Bt,Ut){return Ut.toUpperCase()})]},Ql=ug,Ou=Ql;function bd(Pt){var Rt=Ou(Pt,"line-height"),$t=parseFloat(Rt,10);if(Rt===$t+""){var Bt=Pt.style.lineHeight;Pt.style.lineHeight=Rt+"em",Rt=Ou(Pt,"line-height"),$t=parseFloat(Rt,10),Bt?Pt.style.lineHeight=Bt:delete Pt.style.lineHeight}if(Rt.indexOf("pt")!==-1?($t*=4,$t/=3):Rt.indexOf("mm")!==-1?($t*=96,$t/=25.4):Rt.indexOf("cm")!==-1?($t*=96,$t/=2.54):Rt.indexOf("in")!==-1?$t*=96:Rt.indexOf("pc")!==-1&&($t*=16),$t=Math.round($t),Rt==="normal"){var Ut=Pt.nodeName,Kt=document.createElement(Ut);Kt.innerHTML="&nbsp;",Ut.toUpperCase()==="TEXTAREA"&&Kt.setAttribute("rows","1");var an=Ou(Pt,"font-size");Kt.style.fontSize=an,Kt.style.padding="0px",Kt.style.border="0px";var xn=document.body;xn.appendChild(Kt);var Bn=Kt.offsetHeight;$t=Bn,xn.removeChild(Kt)}return $t}var cg=bd,$0=qa&&qa.__extends||function(){var Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,$t){Rt.__proto__=$t}||function(Rt,$t){for(var Bt in $t)$t.hasOwnProperty(Bt)&&(Rt[Bt]=$t[Bt])};return function(Rt,$t){Pt(Rt,$t);function Bt(){this.constructor=Rt}Rt.prototype=$t===null?Object.create($t):(Bt.prototype=$t.prototype,new Bt)}}(),gm=qa&&qa.__assign||Object.assign||function(Pt){for(var Rt,$t=1,Bt=arguments.length;$t<Bt;$t++){Rt=arguments[$t];for(var Ut in Rt)Object.prototype.hasOwnProperty.call(Rt,Ut)&&(Pt[Ut]=Rt[Ut])}return Pt},$s=qa&&qa.__rest||function(Pt,Rt){var $t={};for(var Bt in Pt)Object.prototype.hasOwnProperty.call(Pt,Bt)&&Rt.indexOf(Bt)<0&&($t[Bt]=Pt[Bt]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Bt=Object.getOwnPropertySymbols(Pt);Ut<Bt.length;Ut++)Rt.indexOf(Bt[Ut])<0&&($t[Bt[Ut]]=Pt[Bt[Ut]]);return $t};Qi.__esModule=!0;var Qu=pa,Ks=gl.exports,xd=pm.exports,uu=cg,Ry=uu,rs="autosize:resized",sf=function(Pt){$0(Rt,Pt);function Rt(){var $t=Pt!==null&&Pt.apply(this,arguments)||this;return $t.state={lineHeight:null},$t.textarea=null,$t.onResize=function(Bt){$t.props.onResize&&$t.props.onResize(Bt)},$t.updateLineHeight=function(){$t.textarea&&$t.setState({lineHeight:Ry($t.textarea)})},$t.onChange=function(Bt){var Ut=$t.props.onChange;$t.currentValue=Bt.currentTarget.value,Ut&&Ut(Bt)},$t}return Rt.prototype.componentDidMount=function(){var $t=this,Bt=this.props,Ut=Bt.maxRows,Kt=Bt.async;typeof Ut=="number"&&this.updateLineHeight(),typeof Ut=="number"||Kt?setTimeout(function(){return $t.textarea&&xd($t.textarea)}):this.textarea&&xd(this.textarea),this.textarea&&this.textarea.addEventListener(rs,this.onResize)},Rt.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(rs,this.onResize),xd.destroy(this.textarea))},Rt.prototype.render=function(){var $t=this,Bt=this,Ut=Bt.props;Ut.onResize;var Kt=Ut.maxRows;Ut.onChange;var an=Ut.style;Ut.innerRef;var xn=Ut.children,Bn=$s(Ut,["onResize","maxRows","onChange","style","innerRef","children"]),Fn=Bt.state.lineHeight,Dn=Kt&&Fn?Fn*Kt:null;return Qu.createElement("textarea",gm({},Bn,{onChange:this.onChange,style:Dn?gm({},an,{maxHeight:Dn}):an,ref:function(ur){$t.textarea=ur,typeof $t.props.innerRef=="function"?$t.props.innerRef(ur):$t.props.innerRef&&($t.props.innerRef.current=ur)}}),xn)},Rt.prototype.componentDidUpdate=function(){this.textarea&&xd.update(this.textarea)},Rt.defaultProps={rows:1,async:!1},Rt.propTypes={rows:Ks.number,maxRows:Ks.number,onResize:Ks.func,innerRef:Ks.any,async:Ks.bool},Rt}(Qu.Component);Qi.TextareaAutosize=Qu.forwardRef(function(Pt,Rt){return Qu.createElement(sf,gm({},Pt,{innerRef:Rt}))}),function(Pt){Pt.__esModule=!0;var Rt=Qi;Pt.default=Rt.TextareaAutosize}(ca);var ta=ru(ca);class rp extends yn{constructor(Rt){super(Rt),Ht(this,"onKeyDown",$t=>{$t.which===13&&$t.ctrlKey&&this.props.onSaveAndClose()}),this.element=pn()}componentDidMount(){this.props.focus&&this.element.current&&this.element.current.focus({preventScroll:!0})}render(){return gn(ta,{ref:this.element,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||Ma.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}function ro(){return ro=Object.assign||function(Pt){for(var Rt=1;Rt<arguments.length;Rt++){var $t=arguments[Rt];for(var Bt in $t)Object.prototype.hasOwnProperty.call($t,Bt)&&(Pt[Bt]=$t[Bt])}return Pt},ro.apply(this,arguments)}function af(Pt){if(Pt.sheet)return Pt.sheet;for(var Rt=0;Rt<document.styleSheets.length;Rt++)if(document.styleSheets[Rt].ownerNode===Pt)return document.styleSheets[Rt]}function Dy(Pt){var Rt=document.createElement("style");return Rt.setAttribute("data-emotion",Pt.key),Pt.nonce!==void 0&&Rt.setAttribute("nonce",Pt.nonce),Rt.appendChild(document.createTextNode("")),Rt.setAttribute("data-s",""),Rt}var wd=function(){function Pt($t){var Bt=this;this._insertTag=function(Ut){var Kt;Bt.tags.length===0?Bt.insertionPoint?Kt=Bt.insertionPoint.nextSibling:Bt.prepend?Kt=Bt.container.firstChild:Kt=Bt.before:Kt=Bt.tags[Bt.tags.length-1].nextSibling,Bt.container.insertBefore(Ut,Kt),Bt.tags.push(Ut)},this.isSpeedy=$t.speedy===void 0?!0:$t.speedy,this.tags=[],this.ctr=0,this.nonce=$t.nonce,this.key=$t.key,this.container=$t.container,this.prepend=$t.prepend,this.insertionPoint=$t.insertionPoint,this.before=null}var Rt=Pt.prototype;return Rt.hydrate=function($t){$t.forEach(this._insertTag)},Rt.insert=function($t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(Dy(this));var Bt=this.tags[this.tags.length-1];if(this.isSpeedy){var Ut=af(Bt);try{Ut.insertRule($t,Ut.cssRules.length)}catch{}}else Bt.appendChild(document.createTextNode($t));this.ctr++},Rt.flush=function(){this.tags.forEach(function($t){return $t.parentNode&&$t.parentNode.removeChild($t)}),this.tags=[],this.ctr=0},Pt}(),Lo="-ms-",Vl="-moz-",Fs="-webkit-",yc="comm",Ul="rule",el="decl",a_="@import",Ny="@keyframes",Vh=Math.abs,eu=String.fromCharCode;function Ed(Pt,Rt){return(((Rt<<2^Ra(Pt,0))<<2^Ra(Pt,1))<<2^Ra(Pt,2))<<2^Ra(Pt,3)}function tu(Pt){return Pt.trim()}function vc(Pt,Rt){return(Pt=Rt.exec(Pt))?Pt[0]:Pt}function Is(Pt,Rt,$t){return Pt.replace(Rt,$t)}function Uh(Pt,Rt){return Pt.indexOf(Rt)}function Ra(Pt,Rt){return Pt.charCodeAt(Rt)|0}function Ta(Pt,Rt,$t){return Pt.slice(Rt,$t)}function Wc(Pt){return Pt.length}function ip(Pt){return Pt.length}function tl(Pt,Rt){return Rt.push(Pt),Pt}function jh(Pt,Rt){return Pt.map(Rt).join("")}var cu=1,lf=1,Pl=0,hu=0,ka=0,Gc="";function hg(Pt,Rt,$t,Bt,Ut,Kt,an){return{value:Pt,root:Rt,parent:$t,type:Bt,props:Ut,children:Kt,line:cu,column:lf,length:an,return:""}}function op(Pt,Rt,$t){return hg(Pt,Rt.root,Rt.parent,$t,Rt.props,Rt.children,0)}function uf(){return ka}function Yc(){return ka=hu>0?Ra(Gc,--hu):0,lf--,ka===10&&(lf=1,cu--),ka}function Gs(){return ka=hu<Pl?Ra(Gc,hu++):0,lf++,ka===10&&(lf=1,cu++),ka}function du(){return Ra(Gc,hu)}function nl(){return hu}function fu(Pt,Rt){return Ta(Gc,Pt,Rt)}function _c(Pt){switch(Pt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mm(Pt){return cu=lf=1,Pl=Wc(Gc=Pt),hu=0,[]}function Sd(Pt){return Gc="",Pt}function qc(Pt){return tu(fu(hu-1,pu(Pt===91?Pt+2:Pt===40?Pt+1:Pt)))}function gh(Pt){for(;(ka=du())&&ka<33;)Gs();return _c(Pt)>2||_c(ka)>3?"":" "}function cl(Pt,Rt){for(;--Rt&&Gs()&&!(ka<48||ka>102||ka>57&&ka<65||ka>70&&ka<97););return fu(Pt,nl()+(Rt<6&&du()==32&&Gs()==32))}function pu(Pt){for(;Gs();)switch(ka){case Pt:return hu;case 34:case 39:return pu(Pt===34||Pt===39?Pt:ka);case 40:Pt===41&&pu(Pt);break;case 92:Gs();break}return hu}function Ll(Pt,Rt){for(;Gs()&&Pt+ka!==47+10&&!(Pt+ka===42+42&&du()===47););return"/*"+fu(Rt,hu-1)+"*"+eu(Pt===47?Pt:Gs())}function $y(Pt){for(;!_c(du());)Gs();return fu(Pt,hu)}function Wh(Pt){return Sd(mh("",null,null,null,[""],Pt=mm(Pt),0,[0],Pt))}function mh(Pt,Rt,$t,Bt,Ut,Kt,an,xn,Bn){for(var Fn=0,Dn=0,ur=an,Pr=0,$r=0,Kr=0,gi=1,fi=1,Ri=1,Ui=0,Ho="",Oo=Ut,ko=Kt,Uo=Bt,Io=Ho;fi;)switch(Kr=Ui,Ui=Gs()){case 34:case 39:case 91:case 40:Io+=qc(Ui);break;case 9:case 10:case 13:case 32:Io+=gh(Kr);break;case 92:Io+=cl(nl()-1,7);continue;case 47:switch(du()){case 42:case 47:tl(xl(Ll(Gs(),nl()),Rt,$t),Bn);break;default:Io+="/"}break;case 123*gi:xn[Fn++]=Wc(Io)*Ri;case 125*gi:case 59:case 0:switch(Ui){case 0:case 125:fi=0;case 59+Dn:$r>0&&Wc(Io)-ur&&tl($r>32?ec(Io+";",Bt,$t,ur-1):ec(Is(Io," ","")+";",Bt,$t,ur-2),Bn);break;case 59:Io+=";";default:if(tl(Uo=rl(Io,Rt,$t,Fn,Dn,Ut,xn,Ho,Oo=[],ko=[],ur),Kt),Ui===123)if(Dn===0)mh(Io,Rt,Uo,Uo,Oo,Kt,ur,xn,ko);else switch(Pr){case 100:case 109:case 115:mh(Pt,Uo,Uo,Bt&&tl(rl(Pt,Uo,Uo,0,0,Ut,xn,Ho,Ut,Oo=[],ur),ko),Ut,ko,ur,xn,Bt?Oo:ko);break;default:mh(Io,Uo,Uo,Uo,[""],ko,ur,xn,ko)}}Fn=Dn=$r=0,gi=Ri=1,Ho=Io="",ur=an;break;case 58:ur=1+Wc(Io),$r=Kr;default:if(gi<1){if(Ui==123)--gi;else if(Ui==125&&gi++==0&&Yc()==125)continue}switch(Io+=eu(Ui),Ui*gi){case 38:Ri=Dn>0?1:(Io+="\f",-1);break;case 44:xn[Fn++]=(Wc(Io)-1)*Ri,Ri=1;break;case 64:du()===45&&(Io+=qc(Gs())),Pr=du(),Dn=Wc(Ho=Io+=$y(nl())),Ui++;break;case 45:Kr===45&&Wc(Io)==2&&(gi=0)}}return Kt}function rl(Pt,Rt,$t,Bt,Ut,Kt,an,xn,Bn,Fn,Dn){for(var ur=Ut-1,Pr=Ut===0?Kt:[""],$r=ip(Pr),Kr=0,gi=0,fi=0;Kr<Bt;++Kr)for(var Ri=0,Ui=Ta(Pt,ur+1,ur=Vh(gi=an[Kr])),Ho=Pt;Ri<$r;++Ri)(Ho=tu(gi>0?Pr[Ri]+" "+Ui:Is(Ui,/&\f/g,Pr[Ri])))&&(Bn[fi++]=Ho);return hg(Pt,Rt,$t,Ut===0?Ul:xn,Bn,Fn,Dn)}function xl(Pt,Rt,$t){return hg(Pt,Rt,$t,yc,eu(uf()),Ta(Pt,2,-2),0)}function ec(Pt,Rt,$t,Bt){return hg(Pt,Rt,$t,el,Ta(Pt,0,Bt),Ta(Pt,Bt+1,-1),Bt)}function gu(Pt,Rt){switch(Ed(Pt,Rt)){case 5103:return Fs+"print-"+Pt+Pt;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Fs+Pt+Pt;case 5349:case 4246:case 4810:case 6968:case 2756:return Fs+Pt+Vl+Pt+Lo+Pt+Pt;case 6828:case 4268:return Fs+Pt+Lo+Pt+Pt;case 6165:return Fs+Pt+Lo+"flex-"+Pt+Pt;case 5187:return Fs+Pt+Is(Pt,/(\w+).+(:[^]+)/,Fs+"box-$1$2"+Lo+"flex-$1$2")+Pt;case 5443:return Fs+Pt+Lo+"flex-item-"+Is(Pt,/flex-|-self/,"")+Pt;case 4675:return Fs+Pt+Lo+"flex-line-pack"+Is(Pt,/align-content|flex-|-self/,"")+Pt;case 5548:return Fs+Pt+Lo+Is(Pt,"shrink","negative")+Pt;case 5292:return Fs+Pt+Lo+Is(Pt,"basis","preferred-size")+Pt;case 6060:return Fs+"box-"+Is(Pt,"-grow","")+Fs+Pt+Lo+Is(Pt,"grow","positive")+Pt;case 4554:return Fs+Is(Pt,/([^-])(transform)/g,"$1"+Fs+"$2")+Pt;case 6187:return Is(Is(Is(Pt,/(zoom-|grab)/,Fs+"$1"),/(image-set)/,Fs+"$1"),Pt,"")+Pt;case 5495:case 3959:return Is(Pt,/(image-set\([^]*)/,Fs+"$1$`$1");case 4968:return Is(Is(Pt,/(.+:)(flex-)?(.*)/,Fs+"box-pack:$3"+Lo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Fs+Pt+Pt;case 4095:case 3583:case 4068:case 2532:return Is(Pt,/(.+)-inline(.+)/,Fs+"$1$2")+Pt;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wc(Pt)-1-Rt>6)switch(Ra(Pt,Rt+1)){case 109:if(Ra(Pt,Rt+4)!==45)break;case 102:return Is(Pt,/(.+:)(.+)-([^]+)/,"$1"+Fs+"$2-$3$1"+Vl+(Ra(Pt,Rt+3)==108?"$3":"$2-$3"))+Pt;case 115:return~Uh(Pt,"stretch")?gu(Is(Pt,"stretch","fill-available"),Rt)+Pt:Pt}break;case 4949:if(Ra(Pt,Rt+1)!==115)break;case 6444:switch(Ra(Pt,Wc(Pt)-3-(~Uh(Pt,"!important")&&10))){case 107:return Is(Pt,":",":"+Fs)+Pt;case 101:return Is(Pt,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Fs+(Ra(Pt,14)===45?"inline-":"")+"box$3$1"+Fs+"$2$3$1"+Lo+"$2box$3")+Pt}break;case 5936:switch(Ra(Pt,Rt+11)){case 114:return Fs+Pt+Lo+Is(Pt,/[svh]\w+-[tblr]{2}/,"tb")+Pt;case 108:return Fs+Pt+Lo+Is(Pt,/[svh]\w+-[tblr]{2}/,"tb-rl")+Pt;case 45:return Fs+Pt+Lo+Is(Pt,/[svh]\w+-[tblr]{2}/,"lr")+Pt}return Fs+Pt+Lo+Pt+Pt}return Pt}function cf(Pt,Rt){for(var $t="",Bt=ip(Pt),Ut=0;Ut<Bt;Ut++)$t+=Rt(Pt[Ut],Ut,Pt,Rt)||"";return $t}function hf(Pt,Rt,$t,Bt){switch(Pt.type){case a_:case el:return Pt.return=Pt.return||Pt.value;case yc:return"";case Ul:Pt.value=Pt.props.join(",")}return Wc($t=cf(Pt.children,Bt))?Pt.return=Pt.value+"{"+$t+"}":""}function Gh(Pt){var Rt=ip(Pt);return function($t,Bt,Ut,Kt){for(var an="",xn=0;xn<Rt;xn++)an+=Pt[xn]($t,Bt,Ut,Kt)||"";return an}}function nu(Pt){return function(Rt){Rt.root||(Rt=Rt.return)&&Pt(Rt)}}function B0(Pt,Rt,$t,Bt){if(!Pt.return)switch(Pt.type){case el:Pt.return=gu(Pt.value,Pt.length);break;case Ny:return cf([op(Is(Pt.value,"@","@"+Fs),Pt,"")],Bt);case Ul:if(Pt.length)return jh(Pt.props,function(Ut){switch(vc(Ut,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cf([op(Is(Ut,/:(read-\w+)/,":"+Vl+"$1"),Pt,"")],Bt);case"::placeholder":return cf([op(Is(Ut,/:(plac\w+)/,":"+Fs+"input-$1"),Pt,""),op(Is(Ut,/:(plac\w+)/,":"+Vl+"$1"),Pt,""),op(Is(Ut,/:(plac\w+)/,Lo+"input-$1"),Pt,"")],Bt)}return""})}}function hl(Pt){var Rt=Object.create(null);return function($t){return Rt[$t]===void 0&&(Rt[$t]=Pt($t)),Rt[$t]}}var F0=function(Pt,Rt,$t){for(var Bt=0,Ut=0;Bt=Ut,Ut=du(),Bt===38&&Ut===12&&(Rt[$t]=1),!_c(Ut);)Gs();return fu(Pt,hu)},bc=function(Pt,Rt){var $t=-1,Bt=44;do switch(_c(Bt)){case 0:Bt===38&&du()===12&&(Rt[$t]=1),Pt[$t]+=F0(hu-1,Rt,$t);break;case 2:Pt[$t]+=qc(Bt);break;case 4:if(Bt===44){Pt[++$t]=du()===58?"&\f":"",Rt[$t]=Pt[$t].length;break}default:Pt[$t]+=eu(Bt)}while(Bt=Gs());return Pt},il=function(Pt,Rt){return Sd(bc(mm(Pt),Rt))},Iu=new WeakMap,Cd=function(Pt){if(!(Pt.type!=="rule"||!Pt.parent||!Pt.length)){for(var Rt=Pt.value,$t=Pt.parent,Bt=Pt.column===$t.column&&Pt.line===$t.line;$t.type!=="rule";)if($t=$t.parent,!$t)return;if(!(Pt.props.length===1&&Rt.charCodeAt(0)!==58&&!Iu.get($t))&&!Bt){Iu.set(Pt,!0);for(var Ut=[],Kt=il(Rt,Ut),an=$t.props,xn=0,Bn=0;xn<Kt.length;xn++)for(var Fn=0;Fn<an.length;Fn++,Bn++)Pt.props[Bn]=Ut[xn]?Kt[xn].replace(/&\f/g,an[Fn]):an[Fn]+" "+Kt[xn]}}},df=function(Pt){if(Pt.type==="decl"){var Rt=Pt.value;Rt.charCodeAt(0)===108&&Rt.charCodeAt(2)===98&&(Pt.return="",Pt.value="")}},xc=[B0],ff=function(Pt){var Rt=Pt.key;if(Rt==="css"){var $t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call($t,function(Kr){var gi=Kr.getAttribute("data-emotion");gi.indexOf(" ")!==-1&&(document.head.appendChild(Kr),Kr.setAttribute("data-s",""))})}var Bt=Pt.stylisPlugins||xc,Ut={},Kt,an=[];Kt=Pt.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+Rt+' "]'),function(Kr){for(var gi=Kr.getAttribute("data-emotion").split(" "),fi=1;fi<gi.length;fi++)Ut[gi[fi]]=!0;an.push(Kr)});var xn,Bn=[Cd,df];{var Fn,Dn=[hf,nu(function(Kr){Fn.insert(Kr)})],ur=Gh(Bn.concat(Bt,Dn)),Pr=function(Kr){return cf(Wh(Kr),ur)};xn=function(Kr,gi,fi,Ri){Fn=fi,Pr(Kr?Kr+"{"+gi.styles+"}":gi.styles),Ri&&($r.inserted[gi.name]=!0)}}var $r={key:Rt,sheet:new wd({key:Rt,container:Kt,nonce:Pt.nonce,speedy:Pt.speedy,prepend:Pt.prepend,insertionPoint:Pt.insertionPoint}),nonce:Pt.nonce,inserted:Ut,registered:{},insert:xn};return $r.sheet.hydrate(an),$r},Ol={exports:{}},Ms={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var is=typeof Symbol=="function"&&Symbol.for,ym=is?Symbol.for("react.element"):60103,vm=is?Symbol.for("react.portal"):60106,ol=is?Symbol.for("react.fragment"):60107,wc=is?Symbol.for("react.strict_mode"):60108,sp=is?Symbol.for("react.profiler"):60114,yh=is?Symbol.for("react.provider"):60109,Ec=is?Symbol.for("react.context"):60110,Da=is?Symbol.for("react.async_mode"):60111,sl=is?Symbol.for("react.concurrent_mode"):60111,Td=is?Symbol.for("react.forward_ref"):60112,wl=is?Symbol.for("react.suspense"):60113,z0=is?Symbol.for("react.suspense_list"):60120,pf=is?Symbol.for("react.memo"):60115,Na=is?Symbol.for("react.lazy"):60116,l_=is?Symbol.for("react.block"):60121,Xc=is?Symbol.for("react.fundamental"):60117,By=is?Symbol.for("react.responder"):60118,dg=is?Symbol.for("react.scope"):60119;function tc(Pt){if(typeof Pt=="object"&&Pt!==null){var Rt=Pt.$$typeof;switch(Rt){case ym:switch(Pt=Pt.type,Pt){case Da:case sl:case ol:case sp:case wc:case wl:return Pt;default:switch(Pt=Pt&&Pt.$$typeof,Pt){case Ec:case Td:case Na:case pf:case yh:return Pt;default:return Rt}}case vm:return Rt}}}function Fy(Pt){return tc(Pt)===sl}Ms.AsyncMode=Da,Ms.ConcurrentMode=sl,Ms.ContextConsumer=Ec,Ms.ContextProvider=yh,Ms.Element=ym,Ms.ForwardRef=Td,Ms.Fragment=ol,Ms.Lazy=Na,Ms.Memo=pf,Ms.Portal=vm,Ms.Profiler=sp,Ms.StrictMode=wc,Ms.Suspense=wl,Ms.isAsyncMode=function(Pt){return Fy(Pt)||tc(Pt)===Da},Ms.isConcurrentMode=Fy,Ms.isContextConsumer=function(Pt){return tc(Pt)===Ec},Ms.isContextProvider=function(Pt){return tc(Pt)===yh},Ms.isElement=function(Pt){return typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ym},Ms.isForwardRef=function(Pt){return tc(Pt)===Td},Ms.isFragment=function(Pt){return tc(Pt)===ol},Ms.isLazy=function(Pt){return tc(Pt)===Na},Ms.isMemo=function(Pt){return tc(Pt)===pf},Ms.isPortal=function(Pt){return tc(Pt)===vm},Ms.isProfiler=function(Pt){return tc(Pt)===sp},Ms.isStrictMode=function(Pt){return tc(Pt)===wc},Ms.isSuspense=function(Pt){return tc(Pt)===wl},Ms.isValidElementType=function(Pt){return typeof Pt=="string"||typeof Pt=="function"||Pt===ol||Pt===sl||Pt===sp||Pt===wc||Pt===wl||Pt===z0||typeof Pt=="object"&&Pt!==null&&(Pt.$$typeof===Na||Pt.$$typeof===pf||Pt.$$typeof===yh||Pt.$$typeof===Ec||Pt.$$typeof===Td||Pt.$$typeof===Xc||Pt.$$typeof===By||Pt.$$typeof===dg||Pt.$$typeof===l_)},Ms.typeOf=tc,Ol.exports=Ms;var Sc=Ol.exports,ap={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lp={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_m={};_m[Sc.ForwardRef]=ap,_m[Sc.Memo]=lp;var up=!0;function Yh(Pt,Rt,$t){var Bt="";return $t.split(" ").forEach(function(Ut){Pt[Ut]!==void 0?Rt.push(Pt[Ut]+";"):Bt+=Ut+" "}),Bt}var cp=function(Pt,Rt,$t){var Bt=Pt.key+"-"+Rt.name;if(($t===!1||up===!1)&&Pt.registered[Bt]===void 0&&(Pt.registered[Bt]=Rt.styles),Pt.inserted[Rt.name]===void 0){var Ut=Rt;do Pt.insert(Rt===Ut?"."+Bt:"",Ut,Pt.sheet,!0),Ut=Ut.next;while(Ut!==void 0)}};function hp(Pt){for(var Rt=0,$t,Bt=0,Ut=Pt.length;Ut>=4;++Bt,Ut-=4)$t=Pt.charCodeAt(Bt)&255|(Pt.charCodeAt(++Bt)&255)<<8|(Pt.charCodeAt(++Bt)&255)<<16|(Pt.charCodeAt(++Bt)&255)<<24,$t=($t&65535)*1540483477+(($t>>>16)*59797<<16),$t^=$t>>>24,Rt=($t&65535)*1540483477+(($t>>>16)*59797<<16)^(Rt&65535)*1540483477+((Rt>>>16)*59797<<16);switch(Ut){case 3:Rt^=(Pt.charCodeAt(Bt+2)&255)<<16;case 2:Rt^=(Pt.charCodeAt(Bt+1)&255)<<8;case 1:Rt^=Pt.charCodeAt(Bt)&255,Rt=(Rt&65535)*1540483477+((Rt>>>16)*59797<<16)}return Rt^=Rt>>>13,Rt=(Rt&65535)*1540483477+((Rt>>>16)*59797<<16),((Rt^Rt>>>15)>>>0).toString(36)}var kd={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Do=/[A-Z]|^ms/g,qh=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gf=function(Pt){return Pt.charCodeAt(1)===45},Xh=function(Pt){return Pt!=null&&typeof Pt!="boolean"},jl=hl(function(Pt){return gf(Pt)?Pt:Pt.replace(Do,"-$&").toLowerCase()}),H0=function(Pt,Rt){switch(Pt){case"animation":case"animationName":if(typeof Rt=="string")return Rt.replace(qh,function($t,Bt,Ut){return nc={name:Bt,styles:Ut,next:nc},Bt})}return kd[Pt]!==1&&!gf(Pt)&&typeof Rt=="number"&&Rt!==0?Rt+"px":Rt};function El(Pt,Rt,$t){if($t==null)return"";if($t.__emotion_styles!==void 0)return $t;switch(typeof $t){case"boolean":return"";case"object":{if($t.anim===1)return nc={name:$t.name,styles:$t.styles,next:nc},$t.name;if($t.styles!==void 0){var Bt=$t.next;if(Bt!==void 0)for(;Bt!==void 0;)nc={name:Bt.name,styles:Bt.styles,next:nc},Bt=Bt.next;var Ut=$t.styles+";";return Ut}return Aa(Pt,Rt,$t)}case"function":{if(Pt!==void 0){var Kt=nc,an=$t(Pt);return nc=Kt,El(Pt,Rt,an)}break}}if(Rt==null)return $t;var xn=Rt[$t];return xn!==void 0?xn:$t}function Aa(Pt,Rt,$t){var Bt="";if(Array.isArray($t))for(var Ut=0;Ut<$t.length;Ut++)Bt+=El(Pt,Rt,$t[Ut])+";";else for(var Kt in $t){var an=$t[Kt];if(typeof an!="object")Rt!=null&&Rt[an]!==void 0?Bt+=Kt+"{"+Rt[an]+"}":Xh(an)&&(Bt+=jl(Kt)+":"+H0(Kt,an)+";");else if(Array.isArray(an)&&typeof an[0]=="string"&&(Rt==null||Rt[an[0]]===void 0))for(var xn=0;xn<an.length;xn++)Xh(an[xn])&&(Bt+=jl(Kt)+":"+H0(Kt,an[xn])+";");else{var Bn=El(Pt,Rt,an);switch(Kt){case"animation":case"animationName":{Bt+=jl(Kt)+":"+Bn+";";break}default:Bt+=Kt+"{"+Bn+"}"}}}return Bt}var V0=/label:\s*([^\s;\n{]+)\s*(;|$)/g,nc,vh=function(Pt,Rt,$t){if(Pt.length===1&&typeof Pt[0]=="object"&&Pt[0]!==null&&Pt[0].styles!==void 0)return Pt[0];var Bt=!0,Ut="";nc=void 0;var Kt=Pt[0];Kt==null||Kt.raw===void 0?(Bt=!1,Ut+=El($t,Rt,Kt)):Ut+=Kt[0];for(var an=1;an<Pt.length;an++)Ut+=El($t,Rt,Pt[an]),Bt&&(Ut+=Kt[an]);V0.lastIndex=0;for(var xn="",Bn;(Bn=V0.exec(Ut))!==null;)xn+="-"+Bn[1];var Fn=hp(Ut)+xn;return{name:Fn,styles:Ut,next:nc}},dp={}.hasOwnProperty,fg=$n(typeof HTMLElement<"u"?ff({key:"css"}):null);fg.Provider;var U0=function(Pt){return Ws(function(Rt,$t){var Bt=Cr(fg);return Pt(Rt,Bt,$t)})},wa=$n({}),Vs="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",_h=function(Pt,Rt){var $t={};for(var Bt in Rt)dp.call(Rt,Bt)&&($t[Bt]=Rt[Bt]);return $t[Vs]=Pt,$t},zy=function(){return null},bh=U0(function(Pt,Rt,$t){var Bt=Pt.css;typeof Bt=="string"&&Rt.registered[Bt]!==void 0&&(Bt=Rt.registered[Bt]);var Ut=Pt[Vs],Kt=[Bt],an="";typeof Pt.className=="string"?an=Yh(Rt.registered,Kt,Pt.className):Pt.className!=null&&(an=Pt.className+" ");var xn=vh(Kt,void 0,Cr(wa));cp(Rt,xn,typeof Ut=="string"),an+=Rt.key+"-"+xn.name;var Bn={};for(var Fn in Pt)dp.call(Pt,Fn)&&Fn!=="css"&&Fn!==Vs&&(Bn[Fn]=Pt[Fn]);Bn.ref=$t,Bn.className=an;var Dn=gn(Ut,Bn),ur=gn(zy,null);return gn(pr,null,ur,Dn)}),So=function(Pt,Rt){var $t=arguments;if(Rt==null||!dp.call(Rt,"css"))return gn.apply(void 0,$t);var Bt=$t.length,Ut=new Array(Bt);Ut[0]=bh,Ut[1]=_h(Pt,Rt);for(var Kt=2;Kt<Bt;Kt++)Ut[Kt]=$t[Kt];return gn.apply(null,Ut)};function Mu(){for(var Pt=arguments.length,Rt=new Array(Pt),$t=0;$t<Pt;$t++)Rt[$t]=arguments[$t];return vh(Rt)}var Il=function(){var Pt=Mu.apply(void 0,arguments),Rt="animation-"+Pt.name;return{name:Rt,styles:"@keyframes "+Rt+"{"+Pt.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},u_=function Pt(Rt){for(var $t=Rt.length,Bt=0,Ut="";Bt<$t;Bt++){var Kt=Rt[Bt];if(Kt!=null){var an=void 0;switch(typeof Kt){case"boolean":break;case"object":{if(Array.isArray(Kt))an=Pt(Kt);else{an="";for(var xn in Kt)Kt[xn]&&xn&&(an&&(an+=" "),an+=xn)}break}default:an=Kt}an&&(Ut&&(Ut+=" "),Ut+=an)}}return Ut};function fp(Pt,Rt,$t){var Bt=[],Ut=Yh(Pt,Bt,$t);return Bt.length<2?$t:Ut+Rt(Bt)}var $a=function(){return null},Ba=U0(function(Pt,Rt){var $t=function(){for(var xn=arguments.length,Bn=new Array(xn),Fn=0;Fn<xn;Fn++)Bn[Fn]=arguments[Fn];var Dn=vh(Bn,Rt.registered);return cp(Rt,Dn,!1),Rt.key+"-"+Dn.name},Bt=function(){for(var xn=arguments.length,Bn=new Array(xn),Fn=0;Fn<xn;Fn++)Bn[Fn]=arguments[Fn];return fp(Rt.registered,$t,u_(Bn))},Ut={css:$t,cx:Bt,theme:Cr(wa)},Kt=Pt.children(Ut),an=gn($a,null);return gn(pr,null,an,Kt)});function pg(Pt,Rt){return Rt||(Rt=Pt.slice(0)),Object.freeze(Object.defineProperties(Pt,{raw:{value:Object.freeze(Rt)}}))}function bm(Pt,Rt){if(Pt==null)return{};var $t={},Bt=Object.keys(Pt),Ut,Kt;for(Kt=0;Kt<Bt.length;Kt++)Ut=Bt[Kt],!(Rt.indexOf(Ut)>=0)&&($t[Ut]=Pt[Ut]);return $t}function Zc(Pt,Rt){if(Pt==null)return{};var $t=bm(Pt,Rt),Bt,Ut;if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(Pt);for(Ut=0;Ut<Kt.length;Ut++)Bt=Kt[Ut],!(Rt.indexOf(Bt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Pt,Bt)||($t[Bt]=Pt[Bt]))}return $t}function Ad(Pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ad=function(Rt){return typeof Rt}:Ad=function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt},Ad(Pt)}var gg={};Object.defineProperty(gg,"__esModule",{value:!0});var xm=Object.assign||function(Pt){for(var Rt=1;Rt<arguments.length;Rt++){var $t=arguments[Rt];for(var Bt in $t)Object.prototype.hasOwnProperty.call($t,Bt)&&(Pt[Bt]=$t[Bt])}return Pt},j0=function(){function Pt(Rt,$t){for(var Bt=0;Bt<$t.length;Bt++){var Ut=$t[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Rt,Ut.key,Ut)}}return function(Rt,$t,Bt){return $t&&Pt(Rt.prototype,$t),Bt&&Pt(Rt,Bt),Rt}}(),wm=pa,pp=mg(wm),W0=gl.exports,Pa=mg(W0);function mg(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function Em(Pt,Rt){var $t={};for(var Bt in Pt)Rt.indexOf(Bt)>=0||!Object.prototype.hasOwnProperty.call(Pt,Bt)||($t[Bt]=Pt[Bt]);return $t}function G0(Pt,Rt){if(!(Pt instanceof Rt))throw new TypeError("Cannot call a class as a function")}function Sm(Pt,Rt){if(!Pt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Rt&&(typeof Rt=="object"||typeof Rt=="function")?Rt:Pt}function Y0(Pt,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Rt);Pt.prototype=Object.create(Rt&&Rt.prototype,{constructor:{value:Pt,enumerable:!1,writable:!0,configurable:!0}}),Rt&&(Object.setPrototypeOf?Object.setPrototypeOf(Pt,Rt):Pt.__proto__=Rt)}var q0={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},X0=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],Hy=function(Pt){return X0.forEach(function(Rt){return delete Pt[Rt]}),Pt},Z0=function(Pt,Rt){Rt.style.fontSize=Pt.fontSize,Rt.style.fontFamily=Pt.fontFamily,Rt.style.fontWeight=Pt.fontWeight,Rt.style.fontStyle=Pt.fontStyle,Rt.style.letterSpacing=Pt.letterSpacing,Rt.style.textTransform=Pt.textTransform},K0=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,J0=function(){return K0?"_"+Math.random().toString(36).substr(2,12):void 0},Cm=function(Pt){Y0(Rt,Pt),j0(Rt,null,[{key:"getDerivedStateFromProps",value:function($t,Bt){var Ut=$t.id;return Ut!==Bt.prevId?{inputId:Ut||J0(),prevId:Ut}:null}}]);function Rt($t){G0(this,Rt);var Bt=Sm(this,(Rt.__proto__||Object.getPrototypeOf(Rt)).call(this,$t));return Bt.inputRef=function(Ut){Bt.input=Ut,typeof Bt.props.inputRef=="function"&&Bt.props.inputRef(Ut)},Bt.placeHolderSizerRef=function(Ut){Bt.placeHolderSizer=Ut},Bt.sizerRef=function(Ut){Bt.sizer=Ut},Bt.state={inputWidth:$t.minWidth,inputId:$t.id||J0(),prevId:$t.id},Bt}return j0(Rt,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function($t,Bt){Bt.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var $t=this.input&&window.getComputedStyle(this.input);!$t||(Z0($t,this.sizer),this.placeHolderSizer&&Z0($t,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var $t=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?$t=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:$t=this.sizer.scrollWidth+2;var Bt=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;$t+=Bt,$t<this.props.minWidth&&($t=this.props.minWidth),$t!==this.state.inputWidth&&this.setState({inputWidth:$t})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var $t=this.props.injectStyles;return K0&&$t?pp.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var $t=[this.props.defaultValue,this.props.value,""].reduce(function(an,xn){return an!=null?an:xn}),Bt=xm({},this.props.style);Bt.display||(Bt.display="inline-block");var Ut=xm({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),Kt=Em(this.props,[]);return Hy(Kt),Kt.className=this.props.inputClassName,Kt.id=this.state.inputId,Kt.style=Ut,pp.default.createElement("div",{className:this.props.className,style:Bt},this.renderStyles(),pp.default.createElement("input",xm({},Kt,{ref:this.inputRef})),pp.default.createElement("div",{ref:this.sizerRef,style:q0},$t),this.props.placeholder?pp.default.createElement("div",{ref:this.placeHolderSizerRef,style:q0},this.props.placeholder):null)}}]),Rt}(wm.Component);Cm.propTypes={className:Pa.default.string,defaultValue:Pa.default.any,extraWidth:Pa.default.oneOfType([Pa.default.number,Pa.default.string]),id:Pa.default.string,injectStyles:Pa.default.bool,inputClassName:Pa.default.string,inputRef:Pa.default.func,inputStyle:Pa.default.object,minWidth:Pa.default.oneOfType([Pa.default.number,Pa.default.string]),onAutosize:Pa.default.func,onChange:Pa.default.func,placeholder:Pa.default.string,placeholderIsMinWidth:Pa.default.bool,style:Pa.default.object,value:Pa.default.any},Cm.defaultProps={minWidth:1,injectStyles:!0};var Tm=gg.default=Cm;function mf(Pt,Rt){if(!(Pt instanceof Rt))throw new TypeError("Cannot call a class as a function")}function Q0(Pt,Rt){for(var $t=0;$t<Rt.length;$t++){var Bt=Rt[$t];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Pt,Bt.key,Bt)}}function yg(Pt,Rt,$t){return Rt&&Q0(Pt.prototype,Rt),$t&&Q0(Pt,$t),Pt}function vg(Pt,Rt){return vg=Object.setPrototypeOf||function($t,Bt){return $t.__proto__=Bt,$t},vg(Pt,Rt)}function gp(Pt,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Rt&&Rt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Rt&&vg(Pt,Rt)}function xh(Pt,Rt,$t){return Rt in Pt?Object.defineProperty(Pt,Rt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):Pt[Rt]=$t,Pt}function Vy(Pt,Rt,$t){return Rt in Pt?Object.defineProperty(Pt,Rt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):Pt[Rt]=$t,Pt}function mp(Pt,Rt){var $t=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(Pt);Rt&&(Bt=Bt.filter(function(Ut){return Object.getOwnPropertyDescriptor(Pt,Ut).enumerable})),$t.push.apply($t,Bt)}return $t}function dl(Pt){for(var Rt=1;Rt<arguments.length;Rt++){var $t=arguments[Rt]!=null?arguments[Rt]:{};Rt%2?mp(Object($t),!0).forEach(function(Bt){Vy(Pt,Bt,$t[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors($t)):mp(Object($t)).forEach(function(Bt){Object.defineProperty(Pt,Bt,Object.getOwnPropertyDescriptor($t,Bt))})}return Pt}function km(Pt){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(Rt){return Rt.__proto__||Object.getPrototypeOf(Rt)},km(Pt)}function e1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Uy(Pt){if(Pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pt}function yp(Pt,Rt){return Rt&&(typeof Rt=="object"||typeof Rt=="function")?Rt:Uy(Pt)}function yf(Pt){var Rt=e1();return function(){var $t=km(Pt),Bt;if(Rt){var Ut=km(this).constructor;Bt=Reflect.construct($t,arguments,Ut)}else Bt=$t.apply(this,arguments);return yp(this,Bt)}}var Pd=function(){};function Am(Pt,Rt){return Rt?Rt[0]==="-"?Pt+Rt:Pt+"__"+Rt:Pt}function jy(Pt,Rt,$t){var Bt=[$t];if(Rt&&Pt)for(var Ut in Rt)Rt.hasOwnProperty(Ut)&&Rt[Ut]&&Bt.push("".concat(Am(Pt,Ut)));return Bt.filter(function(Kt){return Kt}).map(function(Kt){return String(Kt).trim()}).join(" ")}var n1=function(Pt){return Array.isArray(Pt)?Pt.filter(Boolean):Ad(Pt)==="object"&&Pt!==null?[Pt]:[]},Wy=function(Pt){Pt.className,Pt.clearValue,Pt.cx,Pt.getStyles,Pt.getValue,Pt.hasValue,Pt.isMulti,Pt.isRtl,Pt.options,Pt.selectOption,Pt.selectProps,Pt.setValue,Pt.theme;var Rt=Zc(Pt,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]);return dl({},Rt)};function r1(Pt){return[document.documentElement,document.body,window].indexOf(Pt)>-1}function i1(Pt){return r1(Pt)?window.pageYOffset:Pt.scrollTop}function Pm(Pt,Rt){if(r1(Pt)){window.scrollTo(0,Rt);return}Pt.scrollTop=Rt}function Gy(Pt){var Rt=getComputedStyle(Pt),$t=Rt.position==="absolute",Bt=/(auto|scroll)/,Ut=document.documentElement;if(Rt.position==="fixed")return Ut;for(var Kt=Pt;Kt=Kt.parentElement;)if(Rt=getComputedStyle(Kt),!($t&&Rt.position==="static")&&Bt.test(Rt.overflow+Rt.overflowY+Rt.overflowX))return Kt;return Ut}function o1(Pt,Rt,$t,Bt){return $t*((Pt=Pt/Bt-1)*Pt*Pt+1)+Rt}function _g(Pt,Rt){var $t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,Bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Pd,Ut=i1(Pt),Kt=Rt-Ut,an=10,xn=0;function Bn(){xn+=an;var Fn=o1(xn,Ut,Kt,$t);Pm(Pt,Fn),xn<$t?window.requestAnimationFrame(Bn):Bt(Pt)}Bn()}function c_(Pt,Rt){var $t=Pt.getBoundingClientRect(),Bt=Rt.getBoundingClientRect(),Ut=Rt.offsetHeight/3;Bt.bottom+Ut>$t.bottom?Pm(Pt,Math.min(Rt.offsetTop+Rt.clientHeight-Pt.offsetHeight+Ut,Pt.scrollHeight)):Bt.top-Ut<$t.top&&Pm(Pt,Math.max(Rt.offsetTop-Ut,0))}function Yy(Pt){var Rt=Pt.getBoundingClientRect();return{bottom:Rt.bottom,height:Rt.height,left:Rt.left,right:Rt.right,top:Rt.top,width:Rt.width}}function qy(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function h_(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var s1=!1,d_={get passive(){return s1=!0}},vf=typeof window<"u"?window:{};vf.addEventListener&&vf.removeEventListener&&(vf.addEventListener("p",Pd,d_),vf.removeEventListener("p",Pd,!1));var Xy=s1;function Zy(Pt){var Rt=Pt.maxHeight,$t=Pt.menuEl,Bt=Pt.minHeight,Ut=Pt.placement,Kt=Pt.shouldScroll,an=Pt.isFixedPosition,xn=Pt.theme,Bn=xn.spacing,Fn=Gy($t),Dn={placement:"bottom",maxHeight:Rt};if(!$t||!$t.offsetParent)return Dn;var ur=Fn.getBoundingClientRect(),Pr=ur.height,$r=$t.getBoundingClientRect(),Kr=$r.bottom,gi=$r.height,fi=$r.top,Ri=$t.offsetParent.getBoundingClientRect(),Ui=Ri.top,Ho=window.innerHeight,Oo=i1(Fn),ko=parseInt(getComputedStyle($t).marginBottom,10),Uo=parseInt(getComputedStyle($t).marginTop,10),Io=Ui-Uo,Fa=Ho-fi,Ya=Io+Oo,ha=Pr-Oo-fi,da=Kr-Ho+Oo+ko,wh=Oo+fi-Uo,rc=160;switch(Ut){case"auto":case"bottom":if(Fa>=gi)return{placement:"bottom",maxHeight:Rt};if(ha>=gi&&!an)return Kt&&_g(Fn,da,rc),{placement:"bottom",maxHeight:Rt};if(!an&&ha>=Bt||an&&Fa>=Bt){Kt&&_g(Fn,da,rc);var xf=an?Fa-ko:ha-ko;return{placement:"bottom",maxHeight:xf}}if(Ut==="auto"||an){var Eh=Rt,Zh=an?Io:Ya;return Zh>=Bt&&(Eh=Math.min(Zh-ko-Bn.controlHeight,Rt)),{placement:"top",maxHeight:Eh}}if(Ut==="bottom")return Kt&&Pm(Fn,da),{placement:"bottom",maxHeight:Rt};break;case"top":if(Io>=gi)return{placement:"top",maxHeight:Rt};if(Ya>=gi&&!an)return Kt&&_g(Fn,wh,rc),{placement:"top",maxHeight:Rt};if(!an&&Ya>=Bt||an&&Io>=Bt){var yu=Rt;return(!an&&Ya>=Bt||an&&Io>=Bt)&&(yu=an?Io-Uo:Ya-Uo),Kt&&_g(Fn,wh,rc),{placement:"top",maxHeight:yu}}return{placement:"bottom",maxHeight:Rt};default:throw new Error('Invalid placement provided "'.concat(Ut,'".'))}return Dn}function Ky(Pt){var Rt={bottom:"top",top:"bottom"};return Pt?Rt[Pt]:"bottom"}var _f=function(Pt){return Pt==="auto"?"bottom":Pt},Jy=function(Pt){var Rt,$t=Pt.placement,Bt=Pt.theme,Ut=Bt.borderRadius,Kt=Bt.spacing,an=Bt.colors;return Rt={label:"menu"},xh(Rt,Ky($t),"100%"),xh(Rt,"backgroundColor",an.neutral0),xh(Rt,"borderRadius",Ut),xh(Rt,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),xh(Rt,"marginBottom",Kt.menuGutter),xh(Rt,"marginTop",Kt.menuGutter),xh(Rt,"position","absolute"),xh(Rt,"width","100%"),xh(Rt,"zIndex",1),Rt},Qy=$n({getPortalPlacement:null}),ev=function(Pt){gp($t,Pt);var Rt=yf($t);function $t(){var Bt;mf(this,$t);for(var Ut=arguments.length,Kt=new Array(Ut),an=0;an<Ut;an++)Kt[an]=arguments[an];return Bt=Rt.call.apply(Rt,[this].concat(Kt)),Bt.state={maxHeight:Bt.props.maxMenuHeight,placement:null},Bt.getPlacement=function(xn){var Bn=Bt.props,Fn=Bn.minMenuHeight,Dn=Bn.maxMenuHeight,ur=Bn.menuPlacement,Pr=Bn.menuPosition,$r=Bn.menuShouldScrollIntoView,Kr=Bn.theme;if(xn){var gi=Pr==="fixed",fi=$r&&!gi,Ri=Zy({maxHeight:Dn,menuEl:xn,minHeight:Fn,placement:ur,shouldScroll:fi,isFixedPosition:gi,theme:Kr}),Ui=Bt.context.getPortalPlacement;Ui&&Ui(Ri),Bt.setState(Ri)}},Bt.getUpdatedProps=function(){var xn=Bt.props.menuPlacement,Bn=Bt.state.placement||_f(xn);return dl(dl({},Bt.props),{},{placement:Bn,maxHeight:Bt.state.maxHeight})},Bt}return yg($t,[{key:"render",value:function(){var Bt=this.props.children;return Bt({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),$t}(yn);ev.contextType=Qy;var tv=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerRef,an=Pt.innerProps;return So("div",ro({css:Ut("menu",Pt),className:Bt({menu:!0},$t),ref:Kt},an),Rt)},f_=function(Pt){var Rt=Pt.maxHeight,$t=Pt.theme.spacing.baseUnit;return{maxHeight:Rt,overflowY:"auto",paddingBottom:$t,paddingTop:$t,position:"relative",WebkitOverflowScrolling:"touch"}},nv=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps,an=Pt.innerRef,xn=Pt.isMulti;return So("div",ro({css:Ut("menuList",Pt),className:Bt({"menu-list":!0,"menu-list--is-multi":xn},$t),ref:an},Kt),Rt)},a1=function(Pt){var Rt=Pt.theme,$t=Rt.spacing.baseUnit,Bt=Rt.colors;return{color:Bt.neutral40,padding:"".concat($t*2,"px ").concat($t*3,"px"),textAlign:"center"}},st=a1,_t=a1,xt=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps;return So("div",ro({css:Ut("noOptionsMessage",Pt),className:Bt({"menu-notice":!0,"menu-notice--no-options":!0},$t)},Kt),Rt)};xt.defaultProps={children:"No options"};var Et=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps;return So("div",ro({css:Ut("loadingMessage",Pt),className:Bt({"menu-notice":!0,"menu-notice--loading":!0},$t)},Kt),Rt)};Et.defaultProps={children:"Loading..."};var At=function(Pt){var Rt=Pt.rect,$t=Pt.offset,Bt=Pt.position;return{left:Rt.left,position:Bt,top:$t,width:Rt.width,zIndex:1}},Ot=function(Pt){gp($t,Pt);var Rt=yf($t);function $t(){var Bt;mf(this,$t);for(var Ut=arguments.length,Kt=new Array(Ut),an=0;an<Ut;an++)Kt[an]=arguments[an];return Bt=Rt.call.apply(Rt,[this].concat(Kt)),Bt.state={placement:null},Bt.getPortalPlacement=function(xn){var Bn=xn.placement,Fn=_f(Bt.props.menuPlacement);Bn!==Fn&&Bt.setState({placement:Bn})},Bt}return yg($t,[{key:"render",value:function(){var Bt=this.props,Ut=Bt.appendTo,Kt=Bt.children,an=Bt.className,xn=Bt.controlElement,Bn=Bt.cx,Fn=Bt.innerProps,Dn=Bt.menuPlacement,ur=Bt.menuPosition,Pr=Bt.getStyles,$r=ur==="fixed";if(!Ut&&!$r||!xn)return null;var Kr=this.state.placement||_f(Dn),gi=Yy(xn),fi=$r?0:window.pageYOffset,Ri=gi[Kr]+fi,Ui={offset:Ri,position:ur,rect:gi},Ho=So("div",ro({css:Pr("menuPortal",Ui),className:Bn({"menu-portal":!0},an)},Fn),Kt);return So(Qy.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},Ut?li(Ho,Ut):Ho)}}]),$t}(yn),Dt=function(Pt){var Rt=Pt.isDisabled,$t=Pt.isRtl;return{label:"container",direction:$t?"rtl":null,pointerEvents:Rt?"none":null,position:"relative"}},Ft=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps,an=Pt.isDisabled,xn=Pt.isRtl;return So("div",ro({css:Ut("container",Pt),className:Bt({"--is-disabled":an,"--is-rtl":xn},$t)},Kt),Rt)},jt=function(Pt){var Rt=Pt.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(Rt.baseUnit/2,"px ").concat(Rt.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},Gt=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.innerProps,Kt=Pt.isMulti,an=Pt.getStyles,xn=Pt.hasValue;return So("div",ro({css:an("valueContainer",Pt),className:Bt({"value-container":!0,"value-container--is-multi":Kt,"value-container--has-value":xn},$t)},Ut),Rt)},Jt=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},qt=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.innerProps,Kt=Pt.getStyles;return So("div",ro({css:Kt("indicatorsContainer",Pt),className:Bt({indicators:!0},$t)},Ut),Rt)},on,vn={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},_n=function(Pt){var Rt=Pt.size,$t=Zc(Pt,["size"]);return So("svg",ro({height:Rt,width:Rt,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:vn},$t))},En=function(Pt){return So(_n,ro({size:20},Pt),So("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},cn=function(Pt){return So(_n,ro({size:20},Pt),So("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Hn=function(Pt){var Rt=Pt.isFocused,$t=Pt.theme,Bt=$t.spacing.baseUnit,Ut=$t.colors;return{label:"indicatorContainer",color:Rt?Ut.neutral60:Ut.neutral20,display:"flex",padding:Bt*2,transition:"color 150ms",":hover":{color:Rt?Ut.neutral80:Ut.neutral40}}},nr=Hn,bn=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps;return So("div",ro({css:Ut("dropdownIndicator",Pt),className:Bt({indicator:!0,"dropdown-indicator":!0},$t)},Kt),Rt||So(cn,null))},zn=Hn,Un=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps;return So("div",ro({css:Ut("clearIndicator",Pt),className:Bt({indicator:!0,"clear-indicator":!0},$t)},Kt),Rt||So(En,null))},qn=function(Pt){var Rt=Pt.isDisabled,$t=Pt.theme,Bt=$t.spacing.baseUnit,Ut=$t.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:Rt?Ut.neutral10:Ut.neutral20,marginBottom:Bt*2,marginTop:Bt*2,width:1}},Gn=function(Pt){var Rt=Pt.className,$t=Pt.cx,Bt=Pt.getStyles,Ut=Pt.innerProps;return So("span",ro({},Ut,{css:Bt("indicatorSeparator",Pt),className:$t({"indicator-separator":!0},Rt)}))},Xr=Il(on||(on=pg([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Br=function(Pt){var Rt=Pt.isFocused,$t=Pt.size,Bt=Pt.theme,Ut=Bt.colors,Kt=Bt.spacing.baseUnit;return{label:"loadingIndicator",color:Rt?Ut.neutral60:Ut.neutral20,display:"flex",padding:Kt*2,transition:"color 150ms",alignSelf:"center",fontSize:$t,lineHeight:1,marginRight:$t,textAlign:"center",verticalAlign:"middle"}},Jr=function(Pt){var Rt=Pt.delay,$t=Pt.offset;return So("span",{css:Mu({animation:"".concat(Xr," 1s ease-in-out ").concat(Rt,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:$t?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Fr=function(Pt){var Rt=Pt.className,$t=Pt.cx,Bt=Pt.getStyles,Ut=Pt.innerProps,Kt=Pt.isRtl;return So("div",ro({css:Bt("loadingIndicator",Pt),className:$t({indicator:!0,"loading-indicator":!0},Rt)},Ut),So(Jr,{delay:0,offset:Kt}),So(Jr,{delay:160,offset:!0}),So(Jr,{delay:320,offset:!Kt}))};Fr.defaultProps={size:4};var oi=function(Pt){var Rt=Pt.isDisabled,$t=Pt.isFocused,Bt=Pt.theme,Ut=Bt.colors,Kt=Bt.borderRadius,an=Bt.spacing;return{label:"control",alignItems:"center",backgroundColor:Rt?Ut.neutral5:Ut.neutral0,borderColor:Rt?Ut.neutral10:$t?Ut.primary:Ut.neutral20,borderRadius:Kt,borderStyle:"solid",borderWidth:1,boxShadow:$t?"0 0 0 1px ".concat(Ut.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:an.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:$t?Ut.primary:Ut.neutral30}}},Wr=function(Pt){var Rt=Pt.children,$t=Pt.cx,Bt=Pt.getStyles,Ut=Pt.className,Kt=Pt.isDisabled,an=Pt.isFocused,xn=Pt.innerRef,Bn=Pt.innerProps,Fn=Pt.menuIsOpen;return So("div",ro({ref:xn,css:Bt("control",Pt),className:$t({control:!0,"control--is-disabled":Kt,"control--is-focused":an,"control--menu-is-open":Fn},Ut)},Bn),Rt)},jr=function(Pt){var Rt=Pt.theme.spacing;return{paddingBottom:Rt.baseUnit*2,paddingTop:Rt.baseUnit*2}},Hr=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.Heading,an=Pt.headingProps,xn=Pt.innerProps,Bn=Pt.label,Fn=Pt.theme,Dn=Pt.selectProps;return So("div",ro({css:Ut("group",Pt),className:Bt({group:!0},$t)},xn),So(Kt,ro({},an,{selectProps:Dn,theme:Fn,getStyles:Ut,cx:Bt}),Bn),So("div",null,Rt))},ei=function(Pt){var Rt=Pt.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:Rt.baseUnit*3,paddingRight:Rt.baseUnit*3,textTransform:"uppercase"}},Gr=function(Pt){var Rt=Pt.getStyles,$t=Pt.cx,Bt=Pt.className,Ut=Wy(Pt);Ut.data;var Kt=Zc(Ut,["data"]);return So("div",ro({css:Rt("groupHeading",Pt),className:$t({"group-heading":!0},Bt)},Kt))},si=function(Pt){var Rt=Pt.isDisabled,$t=Pt.theme,Bt=$t.spacing,Ut=$t.colors;return{margin:Bt.baseUnit/2,paddingBottom:Bt.baseUnit/2,paddingTop:Bt.baseUnit/2,visibility:Rt?"hidden":"visible",color:Ut.neutral80}},Tr=function(Pt){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:Pt?0:1,outline:0,padding:0,color:"inherit"}},Ki=function(Pt){var Rt=Pt.className,$t=Pt.cx,Bt=Pt.getStyles,Ut=Wy(Pt),Kt=Ut.innerRef,an=Ut.isDisabled,xn=Ut.isHidden,Bn=Zc(Ut,["innerRef","isDisabled","isHidden"]);return So("div",{css:Bt("input",Pt)},So(Tm,ro({className:$t({input:!0},Rt),inputRef:Kt,inputStyle:Tr(xn),disabled:an},Bn)))},Ci=function(Pt){var Rt=Pt.theme,$t=Rt.spacing,Bt=Rt.borderRadius,Ut=Rt.colors;return{label:"multiValue",backgroundColor:Ut.neutral10,borderRadius:Bt/2,display:"flex",margin:$t.baseUnit/2,minWidth:0}},$o=function(Pt){var Rt=Pt.theme,$t=Rt.borderRadius,Bt=Rt.colors,Ut=Pt.cropWithEllipsis;return{borderRadius:$t/2,color:Bt.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:Ut?"ellipsis":null,whiteSpace:"nowrap"}},Yi=function(Pt){var Rt=Pt.theme,$t=Rt.spacing,Bt=Rt.borderRadius,Ut=Rt.colors,Kt=Pt.isFocused;return{alignItems:"center",borderRadius:Bt/2,backgroundColor:Kt&&Ut.dangerLight,display:"flex",paddingLeft:$t.baseUnit,paddingRight:$t.baseUnit,":hover":{backgroundColor:Ut.dangerLight,color:Ut.danger}}},po=function(Pt){var Rt=Pt.children,$t=Pt.innerProps;return So("div",$t,Rt)},os=po,js=po;function fl(Pt){var Rt=Pt.children,$t=Pt.innerProps;return So("div",$t,Rt||So(En,{size:14}))}var bg=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.components,Ut=Pt.cx,Kt=Pt.data,an=Pt.getStyles,xn=Pt.innerProps,Bn=Pt.isDisabled,Fn=Pt.removeProps,Dn=Pt.selectProps,ur=Bt.Container,Pr=Bt.Label,$r=Bt.Remove;return So(Ba,null,function(Kr){var gi=Kr.css,fi=Kr.cx;return So(ur,{data:Kt,innerProps:dl({className:fi(gi(an("multiValue",Pt)),Ut({"multi-value":!0,"multi-value--is-disabled":Bn},$t))},xn),selectProps:Dn},So(Pr,{data:Kt,innerProps:{className:fi(gi(an("multiValueLabel",Pt)),Ut({"multi-value__label":!0},$t))},selectProps:Dn},Rt),So($r,{data:Kt,innerProps:dl({className:fi(gi(an("multiValueRemove",Pt)),Ut({"multi-value__remove":!0},$t))},Fn),selectProps:Dn}))})};bg.defaultProps={cropWithEllipsis:!0};var Ld=function(Pt){var Rt=Pt.isDisabled,$t=Pt.isFocused,Bt=Pt.isSelected,Ut=Pt.theme,Kt=Ut.spacing,an=Ut.colors;return{label:"option",backgroundColor:Bt?an.primary:$t?an.primary25:"transparent",color:Rt?an.neutral20:Bt?an.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(Kt.baseUnit*2,"px ").concat(Kt.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!Rt&&(Bt?an.primary:an.primary50)}}},xg=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.isDisabled,an=Pt.isFocused,xn=Pt.isSelected,Bn=Pt.innerRef,Fn=Pt.innerProps;return So("div",ro({css:Ut("option",Pt),className:Bt({option:!0,"option--is-disabled":Kt,"option--is-focused":an,"option--is-selected":xn},$t),ref:Bn},Fn),Rt)},wg=function(Pt){var Rt=Pt.theme,$t=Rt.spacing,Bt=Rt.colors;return{label:"placeholder",color:Bt.neutral50,marginLeft:$t.baseUnit/2,marginRight:$t.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},vp=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.innerProps;return So("div",ro({css:Ut("placeholder",Pt),className:Bt({placeholder:!0},$t)},Kt),Rt)},Lm=function(Pt){var Rt=Pt.isDisabled,$t=Pt.theme,Bt=$t.spacing,Ut=$t.colors;return{label:"singleValue",color:Rt?Ut.neutral40:Ut.neutral80,marginLeft:Bt.baseUnit/2,marginRight:Bt.baseUnit/2,maxWidth:"calc(100% - ".concat(Bt.baseUnit*2,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},_p=function(Pt){var Rt=Pt.children,$t=Pt.className,Bt=Pt.cx,Ut=Pt.getStyles,Kt=Pt.isDisabled,an=Pt.innerProps;return So("div",ro({css:Ut("singleValue",Pt),className:Bt({"single-value":!0,"single-value--is-disabled":Kt},$t)},an),Rt)},rv={ClearIndicator:Un,Control:Wr,DropdownIndicator:bn,DownChevron:cn,CrossIcon:En,Group:Hr,GroupHeading:Gr,IndicatorsContainer:qt,IndicatorSeparator:Gn,Input:Ki,LoadingIndicator:Fr,Menu:tv,MenuList:nv,MenuPortal:Ot,LoadingMessage:Et,NoOptionsMessage:xt,MultiValue:bg,MultiValueContainer:os,MultiValueLabel:js,MultiValueRemove:fl,Option:xg,Placeholder:vp,SelectContainer:Ft,SingleValue:_p,ValueContainer:Gt},iv=function(Pt){return dl(dl({},rv),Pt.components)};function p_(Pt,Rt){(Rt==null||Rt>Pt.length)&&(Rt=Pt.length);for(var $t=0,Bt=new Array(Rt);$t<Rt;$t++)Bt[$t]=Pt[$t];return Bt}function Zb(Pt){if(Array.isArray(Pt))return p_(Pt)}function Kb(Pt){if(typeof Symbol<"u"&&Pt[Symbol.iterator]!=null||Pt["@@iterator"]!=null)return Array.from(Pt)}function Jb(Pt,Rt){if(Pt){if(typeof Pt=="string")return p_(Pt,Rt);var $t=Object.prototype.toString.call(Pt).slice(8,-1);if($t==="Object"&&Pt.constructor&&($t=Pt.constructor.name),$t==="Map"||$t==="Set")return Array.from(Pt);if($t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($t))return p_(Pt,Rt)}}function Qb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U_(Pt){return Zb(Pt)||Kb(Pt)||Jb(Pt)||Qb()}var j_=Number.isNaN||function(Pt){return typeof Pt=="number"&&Pt!==Pt};function _2(Pt,Rt){return!!(Pt===Rt||j_(Pt)&&j_(Rt))}function C2(Pt,Rt){if(Pt.length!==Rt.length)return!1;for(var $t=0;$t<Pt.length;$t++)if(!_2(Pt[$t],Rt[$t]))return!1;return!0}function k2(Pt,Rt){Rt===void 0&&(Rt=C2);var $t,Bt=[],Ut,Kt=!1;function an(){for(var xn=[],Bn=0;Bn<arguments.length;Bn++)xn[Bn]=arguments[Bn];return Kt&&$t===this&&Rt(xn,Bt)||(Ut=Pt.apply(this,xn),Kt=!0,$t=this,Bt=xn),Ut}return an}for(var A2={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},P2=function(Pt){return So("span",ro({css:A2},Pt))},I2={guidance:function(Pt){var Rt=Pt.isSearchable,$t=Pt.isMulti,Bt=Pt.isDisabled,Ut=Pt.tabSelectsValue,Kt=Pt.context;switch(Kt){case"menu":return"Use Up and Down to choose options".concat(Bt?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(Ut?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(Pt["aria-label"]||"Select"," is focused ").concat(Rt?",type to refine list":"",", press Down to open the menu, ").concat($t?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(Pt){var Rt=Pt.action,$t=Pt.label,Bt=$t===void 0?"":$t,Ut=Pt.isDisabled;switch(Rt){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(Bt,", deselected.");case"select-option":return Ut?"option ".concat(Bt," is disabled. Select another option."):"option ".concat(Bt,", selected.");default:return""}},onFocus:function(Pt){var Rt=Pt.context,$t=Pt.focused,Bt=$t===void 0?{}:$t,Ut=Pt.options,Kt=Pt.label,an=Kt===void 0?"":Kt,xn=Pt.selectValue,Bn=Pt.isDisabled,Fn=Pt.isSelected,Dn=function($r,Kr){return $r&&$r.length?"".concat($r.indexOf(Kr)+1," of ").concat($r.length):""};if(Rt==="value"&&xn)return"value ".concat(an," focused, ").concat(Dn(xn,Bt),".");if(Rt==="menu"){var ur=Bn?" disabled":"",Pr="".concat(Fn?"selected":"focused").concat(ur);return"option ".concat(an," ").concat(Pr,", ").concat(Dn(Ut,Bt),".")}return""},onFilter:function(Pt){var Rt=Pt.inputValue,$t=Pt.resultsMessage;return"".concat($t).concat(Rt?" for search term "+Rt:"",".")}},M2=function(Pt){var Rt=Pt.ariaSelection,$t=Pt.focusedOption,Bt=Pt.focusedValue,Ut=Pt.focusableOptions,Kt=Pt.isFocused,an=Pt.selectValue,xn=Pt.selectProps,Bn=xn.ariaLiveMessages,Fn=xn.getOptionLabel,Dn=xn.inputValue,ur=xn.isMulti,Pr=xn.isOptionDisabled,$r=xn.isSearchable,Kr=xn.menuIsOpen,gi=xn.options,fi=xn.screenReaderStatus,Ri=xn.tabSelectsValue,Ui=xn["aria-label"],Ho=xn["aria-live"],Oo=jn(function(){return dl(dl({},I2),Bn||{})},[Bn]),ko=jn(function(){var ha="";if(Rt&&Oo.onChange){var da=Rt.option,wh=Rt.removedValue,rc=Rt.value,xf=function(yu){return Array.isArray(yu)?null:yu},Eh=wh||da||xf(rc),Zh=dl({isDisabled:Eh&&Pr(Eh),label:Eh?Fn(Eh):""},Rt);ha=Oo.onChange(Zh)}return ha},[Rt,Pr,Fn,Oo]),Uo=jn(function(){var ha="",da=$t||Bt,wh=!!($t&&an&&an.includes($t));if(da&&Oo.onFocus){var rc={focused:da,label:Fn(da),isDisabled:Pr(da),isSelected:wh,options:gi,context:da===$t?"menu":"value",selectValue:an};ha=Oo.onFocus(rc)}return ha},[$t,Bt,Fn,Pr,Oo,gi,an]),Io=jn(function(){var ha="";if(Kr&&gi.length&&Oo.onFilter){var da=fi({count:Ut.length});ha=Oo.onFilter({inputValue:Dn,resultsMessage:da})}return ha},[Ut,Dn,Kr,Oo,gi,fi]),Fa=jn(function(){var ha="";if(Oo.guidance){var da=Bt?"value":Kr?"menu":"input";ha=Oo.guidance({"aria-label":Ui,context:da,isDisabled:$t&&Pr($t),isMulti:ur,isSearchable:$r,tabSelectsValue:Ri})}return ha},[Ui,$t,Bt,ur,Pr,$r,Kr,Oo,Ri]),Ya="".concat(Uo," ").concat(Io," ").concat(Fa);return So(P2,{"aria-live":Ho,"aria-atomic":"false","aria-relevant":"additions text"},Kt&&So(zi.Fragment,null,So("span",{id:"aria-selection"},ko),So("span",{id:"aria-context"},Ya)))},g_=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],R2=new RegExp("["+g_.map(function(Pt){return Pt.letters}).join("")+"]","g"),W_={},m_=0;m_<g_.length;m_++)for(var y_=g_[m_],v_=0;v_<y_.letters.length;v_++)W_[y_.letters[v_]]=y_.base;var G_=function(Pt){return Pt.replace(R2,function(Rt){return W_[Rt]})},N2=k2(G_),Y_=function(Pt){return Pt.replace(/^\s+|\s+$/g,"")},$2=function(Pt){return"".concat(Pt.label," ").concat(Pt.value)},B2=function(Pt){return function(Rt,$t){var Bt=dl({ignoreCase:!0,ignoreAccents:!0,stringify:$2,trim:!0,matchFrom:"any"},Pt),Ut=Bt.ignoreCase,Kt=Bt.ignoreAccents,an=Bt.stringify,xn=Bt.trim,Bn=Bt.matchFrom,Fn=xn?Y_($t):$t,Dn=xn?Y_(an(Rt)):an(Rt);return Ut&&(Fn=Fn.toLowerCase(),Dn=Dn.toLowerCase()),Kt&&(Fn=N2(Fn),Dn=G_(Dn)),Bn==="start"?Dn.substr(0,Fn.length)===Fn:Dn.indexOf(Fn)>-1}};function F2(Pt){Pt.in,Pt.out,Pt.onExited,Pt.appear,Pt.enter,Pt.exit;var Rt=Pt.innerRef;Pt.emotion;var $t=Zc(Pt,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return So("input",ro({ref:Rt},$t,{css:Mu({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var z2=function(Pt){Pt.preventDefault(),Pt.stopPropagation()};function H2(Pt){var Rt=Pt.isEnabled,$t=Pt.onBottomArrive,Bt=Pt.onBottomLeave,Ut=Pt.onTopArrive,Kt=Pt.onTopLeave,an=Tn(!1),xn=Tn(!1),Bn=Tn(0),Fn=Tn(null),Dn=er(function(fi,Ri){if(Fn.current!==null){var Ui=Fn.current,Ho=Ui.scrollTop,Oo=Ui.scrollHeight,ko=Ui.clientHeight,Uo=Fn.current,Io=Ri>0,Fa=Oo-ko-Ho,Ya=!1;Fa>Ri&&an.current&&(Bt&&Bt(fi),an.current=!1),Io&&xn.current&&(Kt&&Kt(fi),xn.current=!1),Io&&Ri>Fa?($t&&!an.current&&$t(fi),Uo.scrollTop=Oo,Ya=!0,an.current=!0):!Io&&-Ri>Ho&&(Ut&&!xn.current&&Ut(fi),Uo.scrollTop=0,Ya=!0,xn.current=!0),Ya&&z2(fi)}},[]),ur=er(function(fi){Dn(fi,fi.deltaY)},[Dn]),Pr=er(function(fi){Bn.current=fi.changedTouches[0].clientY},[]),$r=er(function(fi){var Ri=Bn.current-fi.changedTouches[0].clientY;Dn(fi,Ri)},[Dn]),Kr=er(function(fi){if(fi){var Ri=Xy?{passive:!1}:!1;typeof fi.addEventListener=="function"&&fi.addEventListener("wheel",ur,Ri),typeof fi.addEventListener=="function"&&fi.addEventListener("touchstart",Pr,Ri),typeof fi.addEventListener=="function"&&fi.addEventListener("touchmove",$r,Ri)}},[$r,Pr,ur]),gi=er(function(fi){!fi||(typeof fi.removeEventListener=="function"&&fi.removeEventListener("wheel",ur,!1),typeof fi.removeEventListener=="function"&&fi.removeEventListener("touchstart",Pr,!1),typeof fi.removeEventListener=="function"&&fi.removeEventListener("touchmove",$r,!1))},[$r,Pr,ur]);return Ti(function(){if(Rt){var fi=Fn.current;return Kr(fi),function(){gi(fi)}}},[Rt,Kr,gi]),function(fi){Fn.current=fi}}var q_=["boxSizing","height","overflow","paddingRight","position"],X_={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Z_(Pt){Pt.preventDefault()}function K_(Pt){Pt.stopPropagation()}function J_(){var Pt=this.scrollTop,Rt=this.scrollHeight,$t=Pt+this.offsetHeight;Pt===0?this.scrollTop=1:$t===Rt&&(this.scrollTop=Pt-1)}function Q_(){return"ontouchstart"in window||navigator.maxTouchPoints}var eb=!!(typeof window<"u"&&window.document&&window.document.createElement),l1=0,Om={capture:!1,passive:!1};function V2(Pt){var Rt=Pt.isEnabled,$t=Pt.accountForScrollbars,Bt=$t===void 0?!0:$t,Ut=Tn({}),Kt=Tn(null),an=er(function(Bn){if(eb){var Fn=document.body,Dn=Fn&&Fn.style;if(Bt&&q_.forEach(function(Kr){var gi=Dn&&Dn[Kr];Ut.current[Kr]=gi}),Bt&&l1<1){var ur=parseInt(Ut.current.paddingRight,10)||0,Pr=document.body?document.body.clientWidth:0,$r=window.innerWidth-Pr+ur||0;Object.keys(X_).forEach(function(Kr){var gi=X_[Kr];Dn&&(Dn[Kr]=gi)}),Dn&&(Dn.paddingRight="".concat($r,"px"))}Fn&&Q_()&&(Fn.addEventListener("touchmove",Z_,Om),Bn&&(Bn.addEventListener("touchstart",J_,Om),Bn.addEventListener("touchmove",K_,Om))),l1+=1}},[]),xn=er(function(Bn){if(eb){var Fn=document.body,Dn=Fn&&Fn.style;l1=Math.max(l1-1,0),Bt&&l1<1&&q_.forEach(function(ur){var Pr=Ut.current[ur];Dn&&(Dn[ur]=Pr)}),Fn&&Q_()&&(Fn.removeEventListener("touchmove",Z_,Om),Bn&&(Bn.removeEventListener("touchstart",J_,Om),Bn.removeEventListener("touchmove",K_,Om)))}},[]);return Ti(function(){if(Rt){var Bn=Kt.current;return an(Bn),function(){xn(Bn)}}},[Rt,an,xn]),function(Bn){Kt.current=Bn}}var U2=function(){return document.activeElement&&document.activeElement.blur()},j2={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function W2(Pt){var Rt=Pt.children,$t=Pt.lockEnabled,Bt=Pt.captureEnabled,Ut=Bt===void 0?!0:Bt,Kt=Pt.onBottomArrive,an=Pt.onBottomLeave,xn=Pt.onTopArrive,Bn=Pt.onTopLeave,Fn=H2({isEnabled:Ut,onBottomArrive:Kt,onBottomLeave:an,onTopArrive:xn,onTopLeave:Bn}),Dn=V2({isEnabled:$t}),ur=function(Pr){Fn(Pr),Dn(Pr)};return So(zi.Fragment,null,$t&&So("div",{onClick:U2,css:j2}),Rt(ur))}var G2=function(Pt){return Pt.label},Y2=function(Pt){return Pt.label},q2=function(Pt){return Pt.value},X2=function(Pt){return!!Pt.isDisabled},Z2={clearIndicator:zn,container:Dt,control:oi,dropdownIndicator:nr,group:jr,groupHeading:ei,indicatorsContainer:Jt,indicatorSeparator:qn,input:si,loadingIndicator:Br,loadingMessage:_t,menu:Jy,menuList:f_,menuPortal:At,multiValue:Ci,multiValueLabel:$o,multiValueRemove:Yi,noOptionsMessage:st,option:Ld,placeholder:wg,singleValue:Lm,valueContainer:jt},K2={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},J2=4,tb=4,Q2=38,ex=tb*2,tx={baseUnit:tb,controlHeight:Q2,menuGutter:ex},__={borderRadius:J2,colors:K2,spacing:tx},nx={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:qy(),captureMenuScroll:!qy(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:B2(),formatGroupLabel:G2,getOptionLabel:Y2,getOptionValue:q2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:X2,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!h_(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(Pt){var Rt=Pt.count;return"".concat(Rt," result").concat(Rt!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function nb(Pt,Rt,$t,Bt){var Ut=ab(Pt,Rt,$t),Kt=lb(Pt,Rt,$t),an=sb(Pt,Rt),xn=ov(Pt,Rt);return{type:"option",data:Rt,isDisabled:Ut,isSelected:Kt,label:an,value:xn,index:Bt}}function rb(Pt,Rt){return Pt.options.map(function($t,Bt){if($t.options){var Ut=$t.options.map(function(an,xn){return nb(Pt,an,Rt,xn)}).filter(function(an){return ob(Pt,an)});return Ut.length>0?{type:"group",data:$t,options:Ut,index:Bt}:void 0}var Kt=nb(Pt,$t,Rt,Bt);return ob(Pt,Kt)?Kt:void 0}).filter(function($t){return!!$t})}function ib(Pt){return Pt.reduce(function(Rt,$t){return $t.type==="group"?Rt.push.apply(Rt,U_($t.options.map(function(Bt){return Bt.data}))):Rt.push($t.data),Rt},[])}function rx(Pt,Rt){return ib(rb(Pt,Rt))}function ob(Pt,Rt){var $t=Pt.inputValue,Bt=$t===void 0?"":$t,Ut=Rt.data,Kt=Rt.isSelected,an=Rt.label,xn=Rt.value;return(!cb(Pt)||!Kt)&&ub(Pt,{label:an,value:xn,data:Ut},Bt)}function ix(Pt,Rt){var $t=Pt.focusedValue,Bt=Pt.selectValue,Ut=Bt.indexOf($t);if(Ut>-1){var Kt=Rt.indexOf($t);if(Kt>-1)return $t;if(Ut<Rt.length)return Rt[Ut]}return null}function ox(Pt,Rt){var $t=Pt.focusedOption;return $t&&Rt.indexOf($t)>-1?$t:Rt[0]}var sb=function(Pt,Rt){return Pt.getOptionLabel(Rt)},ov=function(Pt,Rt){return Pt.getOptionValue(Rt)};function ab(Pt,Rt,$t){return typeof Pt.isOptionDisabled=="function"?Pt.isOptionDisabled(Rt,$t):!1}function lb(Pt,Rt,$t){if($t.indexOf(Rt)>-1)return!0;if(typeof Pt.isOptionSelected=="function")return Pt.isOptionSelected(Rt,$t);var Bt=ov(Pt,Rt);return $t.some(function(Ut){return ov(Pt,Ut)===Bt})}function ub(Pt,Rt,$t){return Pt.filterOption?Pt.filterOption(Rt,$t):!0}var cb=function(Pt){var Rt=Pt.hideSelectedOptions,$t=Pt.isMulti;return Rt===void 0?$t:Rt},sx=1,hb=function(Pt){gp($t,Pt);var Rt=yf($t);function $t(Bt){var Ut;return mf(this,$t),Ut=Rt.call(this,Bt),Ut.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},Ut.blockOptionHover=!1,Ut.isComposing=!1,Ut.commonProps=void 0,Ut.initialTouchX=0,Ut.initialTouchY=0,Ut.instancePrefix="",Ut.openAfterFocus=!1,Ut.scrollToFocusedOptionOnUpdate=!1,Ut.userIsDragging=void 0,Ut.controlRef=null,Ut.getControlRef=function(Kt){Ut.controlRef=Kt},Ut.focusedOptionRef=null,Ut.getFocusedOptionRef=function(Kt){Ut.focusedOptionRef=Kt},Ut.menuListRef=null,Ut.getMenuListRef=function(Kt){Ut.menuListRef=Kt},Ut.inputRef=null,Ut.getInputRef=function(Kt){Ut.inputRef=Kt},Ut.focus=Ut.focusInput,Ut.blur=Ut.blurInput,Ut.onChange=function(Kt,an){var xn=Ut.props,Bn=xn.onChange,Fn=xn.name;an.name=Fn,Ut.ariaOnChange(Kt,an),Bn(Kt,an)},Ut.setValue=function(Kt){var an=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",xn=arguments.length>2?arguments[2]:void 0,Bn=Ut.props,Fn=Bn.closeMenuOnSelect,Dn=Bn.isMulti;Ut.onInputChange("",{action:"set-value"}),Fn&&(Ut.setState({inputIsHiddenAfterUpdate:!Dn}),Ut.onMenuClose()),Ut.setState({clearFocusValueOnUpdate:!0}),Ut.onChange(Kt,{action:an,option:xn})},Ut.selectOption=function(Kt){var an=Ut.props,xn=an.blurInputOnSelect,Bn=an.isMulti,Fn=an.name,Dn=Ut.state.selectValue,ur=Bn&&Ut.isOptionSelected(Kt,Dn),Pr=Ut.isOptionDisabled(Kt,Dn);if(ur){var $r=Ut.getOptionValue(Kt);Ut.setValue(Dn.filter(function(Kr){return Ut.getOptionValue(Kr)!==$r}),"deselect-option",Kt)}else if(!Pr)Bn?Ut.setValue([].concat(U_(Dn),[Kt]),"select-option",Kt):Ut.setValue(Kt,"select-option");else{Ut.ariaOnChange(Kt,{action:"select-option",name:Fn});return}xn&&Ut.blurInput()},Ut.removeValue=function(Kt){var an=Ut.props.isMulti,xn=Ut.state.selectValue,Bn=Ut.getOptionValue(Kt),Fn=xn.filter(function(ur){return Ut.getOptionValue(ur)!==Bn}),Dn=an?Fn:Fn[0]||null;Ut.onChange(Dn,{action:"remove-value",removedValue:Kt}),Ut.focusInput()},Ut.clearValue=function(){var Kt=Ut.state.selectValue;Ut.onChange(Ut.props.isMulti?[]:null,{action:"clear",removedValues:Kt})},Ut.popValue=function(){var Kt=Ut.props.isMulti,an=Ut.state.selectValue,xn=an[an.length-1],Bn=an.slice(0,an.length-1),Fn=Kt?Bn:Bn[0]||null;Ut.onChange(Fn,{action:"pop-value",removedValue:xn})},Ut.getValue=function(){return Ut.state.selectValue},Ut.cx=function(){for(var Kt=arguments.length,an=new Array(Kt),xn=0;xn<Kt;xn++)an[xn]=arguments[xn];return jy.apply(void 0,[Ut.props.classNamePrefix].concat(an))},Ut.getOptionLabel=function(Kt){return sb(Ut.props,Kt)},Ut.getOptionValue=function(Kt){return ov(Ut.props,Kt)},Ut.getStyles=function(Kt,an){var xn=Z2[Kt](an);xn.boxSizing="border-box";var Bn=Ut.props.styles[Kt];return Bn?Bn(xn,an):xn},Ut.getElementId=function(Kt){return"".concat(Ut.instancePrefix,"-").concat(Kt)},Ut.getComponents=function(){return iv(Ut.props)},Ut.buildCategorizedOptions=function(){return rb(Ut.props,Ut.state.selectValue)},Ut.getCategorizedOptions=function(){return Ut.props.menuIsOpen?Ut.buildCategorizedOptions():[]},Ut.buildFocusableOptions=function(){return ib(Ut.buildCategorizedOptions())},Ut.getFocusableOptions=function(){return Ut.props.menuIsOpen?Ut.buildFocusableOptions():[]},Ut.ariaOnChange=function(Kt,an){Ut.setState({ariaSelection:dl({value:Kt},an)})},Ut.onMenuMouseDown=function(Kt){Kt.button===0&&(Kt.stopPropagation(),Kt.preventDefault(),Ut.focusInput())},Ut.onMenuMouseMove=function(Kt){Ut.blockOptionHover=!1},Ut.onControlMouseDown=function(Kt){var an=Ut.props.openMenuOnClick;Ut.state.isFocused?Ut.props.menuIsOpen?Kt.target.tagName!=="INPUT"&&Kt.target.tagName!=="TEXTAREA"&&Ut.onMenuClose():an&&Ut.openMenu("first"):(an&&(Ut.openAfterFocus=!0),Ut.focusInput()),Kt.target.tagName!=="INPUT"&&Kt.target.tagName!=="TEXTAREA"&&Kt.preventDefault()},Ut.onDropdownIndicatorMouseDown=function(Kt){if(!(Kt&&Kt.type==="mousedown"&&Kt.button!==0)&&!Ut.props.isDisabled){var an=Ut.props,xn=an.isMulti,Bn=an.menuIsOpen;Ut.focusInput(),Bn?(Ut.setState({inputIsHiddenAfterUpdate:!xn}),Ut.onMenuClose()):Ut.openMenu("first"),Kt.preventDefault(),Kt.stopPropagation()}},Ut.onClearIndicatorMouseDown=function(Kt){Kt&&Kt.type==="mousedown"&&Kt.button!==0||(Ut.clearValue(),Kt.stopPropagation(),Ut.openAfterFocus=!1,Kt.type==="touchend"?Ut.focusInput():setTimeout(function(){return Ut.focusInput()}))},Ut.onScroll=function(Kt){typeof Ut.props.closeMenuOnScroll=="boolean"?Kt.target instanceof HTMLElement&&r1(Kt.target)&&Ut.props.onMenuClose():typeof Ut.props.closeMenuOnScroll=="function"&&Ut.props.closeMenuOnScroll(Kt)&&Ut.props.onMenuClose()},Ut.onCompositionStart=function(){Ut.isComposing=!0},Ut.onCompositionEnd=function(){Ut.isComposing=!1},Ut.onTouchStart=function(Kt){var an=Kt.touches,xn=an&&an.item(0);!xn||(Ut.initialTouchX=xn.clientX,Ut.initialTouchY=xn.clientY,Ut.userIsDragging=!1)},Ut.onTouchMove=function(Kt){var an=Kt.touches,xn=an&&an.item(0);if(xn){var Bn=Math.abs(xn.clientX-Ut.initialTouchX),Fn=Math.abs(xn.clientY-Ut.initialTouchY),Dn=5;Ut.userIsDragging=Bn>Dn||Fn>Dn}},Ut.onTouchEnd=function(Kt){Ut.userIsDragging||(Ut.controlRef&&!Ut.controlRef.contains(Kt.target)&&Ut.menuListRef&&!Ut.menuListRef.contains(Kt.target)&&Ut.blurInput(),Ut.initialTouchX=0,Ut.initialTouchY=0)},Ut.onControlTouchEnd=function(Kt){Ut.userIsDragging||Ut.onControlMouseDown(Kt)},Ut.onClearIndicatorTouchEnd=function(Kt){Ut.userIsDragging||Ut.onClearIndicatorMouseDown(Kt)},Ut.onDropdownIndicatorTouchEnd=function(Kt){Ut.userIsDragging||Ut.onDropdownIndicatorMouseDown(Kt)},Ut.handleInputChange=function(Kt){var an=Kt.currentTarget.value;Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange(an,{action:"input-change"}),Ut.props.menuIsOpen||Ut.onMenuOpen()},Ut.onInputFocus=function(Kt){Ut.props.onFocus&&Ut.props.onFocus(Kt),Ut.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(Ut.openAfterFocus||Ut.props.openMenuOnFocus)&&Ut.openMenu("first"),Ut.openAfterFocus=!1},Ut.onInputBlur=function(Kt){if(Ut.menuListRef&&Ut.menuListRef.contains(document.activeElement)){Ut.inputRef.focus();return}Ut.props.onBlur&&Ut.props.onBlur(Kt),Ut.onInputChange("",{action:"input-blur"}),Ut.onMenuClose(),Ut.setState({focusedValue:null,isFocused:!1})},Ut.onOptionHover=function(Kt){Ut.blockOptionHover||Ut.state.focusedOption===Kt||Ut.setState({focusedOption:Kt})},Ut.shouldHideSelectedOptions=function(){return cb(Ut.props)},Ut.onKeyDown=function(Kt){var an=Ut.props,xn=an.isMulti,Bn=an.backspaceRemovesValue,Fn=an.escapeClearsValue,Dn=an.inputValue,ur=an.isClearable,Pr=an.isDisabled,$r=an.menuIsOpen,Kr=an.onKeyDown,gi=an.tabSelectsValue,fi=an.openMenuOnFocus,Ri=Ut.state,Ui=Ri.focusedOption,Ho=Ri.focusedValue,Oo=Ri.selectValue;if(!Pr&&!(typeof Kr=="function"&&(Kr(Kt),Kt.defaultPrevented))){switch(Ut.blockOptionHover=!0,Kt.key){case"ArrowLeft":if(!xn||Dn)return;Ut.focusValue("previous");break;case"ArrowRight":if(!xn||Dn)return;Ut.focusValue("next");break;case"Delete":case"Backspace":if(Dn)return;if(Ho)Ut.removeValue(Ho);else{if(!Bn)return;xn?Ut.popValue():ur&&Ut.clearValue()}break;case"Tab":if(Ut.isComposing||Kt.shiftKey||!$r||!gi||!Ui||fi&&Ut.isOptionSelected(Ui,Oo))return;Ut.selectOption(Ui);break;case"Enter":if(Kt.keyCode===229)break;if($r){if(!Ui||Ut.isComposing)return;Ut.selectOption(Ui);break}return;case"Escape":$r?(Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange("",{action:"menu-close"}),Ut.onMenuClose()):ur&&Fn&&Ut.clearValue();break;case" ":if(Dn)return;if(!$r){Ut.openMenu("first");break}if(!Ui)return;Ut.selectOption(Ui);break;case"ArrowUp":$r?Ut.focusOption("up"):Ut.openMenu("last");break;case"ArrowDown":$r?Ut.focusOption("down"):Ut.openMenu("first");break;case"PageUp":if(!$r)return;Ut.focusOption("pageup");break;case"PageDown":if(!$r)return;Ut.focusOption("pagedown");break;case"Home":if(!$r)return;Ut.focusOption("first");break;case"End":if(!$r)return;Ut.focusOption("last");break;default:return}Kt.preventDefault()}},Ut.instancePrefix="react-select-"+(Ut.props.instanceId||++sx),Ut.state.selectValue=n1(Bt.value),Ut}return yg($t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(Bt){var Ut=this.props,Kt=Ut.isDisabled,an=Ut.menuIsOpen,xn=this.state.isFocused;(xn&&!Kt&&Bt.isDisabled||xn&&an&&!Bt.menuIsOpen)&&this.focusInput(),xn&&Kt&&!Bt.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(c_(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(Bt,Ut){this.props.onInputChange(Bt,Ut)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(Bt){var Ut=this,Kt=this.state,an=Kt.selectValue,xn=Kt.isFocused,Bn=this.buildFocusableOptions(),Fn=Bt==="first"?0:Bn.length-1;if(!this.props.isMulti){var Dn=Bn.indexOf(an[0]);Dn>-1&&(Fn=Dn)}this.scrollToFocusedOptionOnUpdate=!(xn&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:Bn[Fn]},function(){return Ut.onMenuOpen()})}},{key:"focusValue",value:function(Bt){var Ut=this.state,Kt=Ut.selectValue,an=Ut.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var xn=Kt.indexOf(an);an||(xn=-1);var Bn=Kt.length-1,Fn=-1;if(Kt.length){switch(Bt){case"previous":xn===0?Fn=0:xn===-1?Fn=Bn:Fn=xn-1;break;case"next":xn>-1&&xn<Bn&&(Fn=xn+1);break}this.setState({inputIsHidden:Fn!==-1,focusedValue:Kt[Fn]})}}}},{key:"focusOption",value:function(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",Ut=this.props.pageSize,Kt=this.state.focusedOption,an=this.getFocusableOptions();if(an.length){var xn=0,Bn=an.indexOf(Kt);Kt||(Bn=-1),Bt==="up"?xn=Bn>0?Bn-1:an.length-1:Bt==="down"?xn=(Bn+1)%an.length:Bt==="pageup"?(xn=Bn-Ut,xn<0&&(xn=0)):Bt==="pagedown"?(xn=Bn+Ut,xn>an.length-1&&(xn=an.length-1)):Bt==="last"&&(xn=an.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:an[xn],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(__):dl(dl({},__),this.props.theme):__}},{key:"getCommonProps",value:function(){var Bt=this.clearValue,Ut=this.cx,Kt=this.getStyles,an=this.getValue,xn=this.selectOption,Bn=this.setValue,Fn=this.props,Dn=Fn.isMulti,ur=Fn.isRtl,Pr=Fn.options,$r=this.hasValue();return{clearValue:Bt,cx:Ut,getStyles:Kt,getValue:an,hasValue:$r,isMulti:Dn,isRtl:ur,options:Pr,selectOption:xn,selectProps:Fn,setValue:Bn,theme:this.getTheme()}}},{key:"hasValue",value:function(){var Bt=this.state.selectValue;return Bt.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var Bt=this.props,Ut=Bt.isClearable,Kt=Bt.isMulti;return Ut===void 0?Kt:Ut}},{key:"isOptionDisabled",value:function(Bt,Ut){return ab(this.props,Bt,Ut)}},{key:"isOptionSelected",value:function(Bt,Ut){return lb(this.props,Bt,Ut)}},{key:"filterOption",value:function(Bt,Ut){return ub(this.props,Bt,Ut)}},{key:"formatOptionLabel",value:function(Bt,Ut){if(typeof this.props.formatOptionLabel=="function"){var Kt=this.props.inputValue,an=this.state.selectValue;return this.props.formatOptionLabel(Bt,{context:Ut,inputValue:Kt,selectValue:an})}else return this.getOptionLabel(Bt)}},{key:"formatGroupLabel",value:function(Bt){return this.props.formatGroupLabel(Bt)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var Bt=this.props,Ut=Bt.isDisabled,Kt=Bt.isSearchable,an=Bt.inputId,xn=Bt.inputValue,Bn=Bt.tabIndex,Fn=Bt.form,Dn=this.getComponents(),ur=Dn.Input,Pr=this.state.inputIsHidden,$r=this.commonProps,Kr=an||this.getElementId("input"),gi={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return Kt?zi.createElement(ur,ro({},$r,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Kr,innerRef:this.getInputRef,isDisabled:Ut,isHidden:Pr,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:Bn,form:Fn,type:"text",value:xn},gi)):zi.createElement(F2,ro({id:Kr,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Pd,onFocus:this.onInputFocus,readOnly:!0,disabled:Ut,tabIndex:Bn,form:Fn,value:""},gi))}},{key:"renderPlaceholderOrValue",value:function(){var Bt=this,Ut=this.getComponents(),Kt=Ut.MultiValue,an=Ut.MultiValueContainer,xn=Ut.MultiValueLabel,Bn=Ut.MultiValueRemove,Fn=Ut.SingleValue,Dn=Ut.Placeholder,ur=this.commonProps,Pr=this.props,$r=Pr.controlShouldRenderValue,Kr=Pr.isDisabled,gi=Pr.isMulti,fi=Pr.inputValue,Ri=Pr.placeholder,Ui=this.state,Ho=Ui.selectValue,Oo=Ui.focusedValue,ko=Ui.isFocused;if(!this.hasValue()||!$r)return fi?null:zi.createElement(Dn,ro({},ur,{key:"placeholder",isDisabled:Kr,isFocused:ko}),Ri);if(gi){var Uo=Ho.map(function(Fa,Ya){var ha=Fa===Oo;return zi.createElement(Kt,ro({},ur,{components:{Container:an,Label:xn,Remove:Bn},isFocused:ha,isDisabled:Kr,key:"".concat(Bt.getOptionValue(Fa)).concat(Ya),index:Ya,removeProps:{onClick:function(){return Bt.removeValue(Fa)},onTouchEnd:function(){return Bt.removeValue(Fa)},onMouseDown:function(da){da.preventDefault(),da.stopPropagation()}},data:Fa}),Bt.formatOptionLabel(Fa,"value"))});return Uo}if(fi)return null;var Io=Ho[0];return zi.createElement(Fn,ro({},ur,{data:Io,isDisabled:Kr}),this.formatOptionLabel(Io,"value"))}},{key:"renderClearIndicator",value:function(){var Bt=this.getComponents(),Ut=Bt.ClearIndicator,Kt=this.commonProps,an=this.props,xn=an.isDisabled,Bn=an.isLoading,Fn=this.state.isFocused;if(!this.isClearable()||!Ut||xn||!this.hasValue()||Bn)return null;var Dn={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return zi.createElement(Ut,ro({},Kt,{innerProps:Dn,isFocused:Fn}))}},{key:"renderLoadingIndicator",value:function(){var Bt=this.getComponents(),Ut=Bt.LoadingIndicator,Kt=this.commonProps,an=this.props,xn=an.isDisabled,Bn=an.isLoading,Fn=this.state.isFocused;if(!Ut||!Bn)return null;var Dn={"aria-hidden":"true"};return zi.createElement(Ut,ro({},Kt,{innerProps:Dn,isDisabled:xn,isFocused:Fn}))}},{key:"renderIndicatorSeparator",value:function(){var Bt=this.getComponents(),Ut=Bt.DropdownIndicator,Kt=Bt.IndicatorSeparator;if(!Ut||!Kt)return null;var an=this.commonProps,xn=this.props.isDisabled,Bn=this.state.isFocused;return zi.createElement(Kt,ro({},an,{isDisabled:xn,isFocused:Bn}))}},{key:"renderDropdownIndicator",value:function(){var Bt=this.getComponents(),Ut=Bt.DropdownIndicator;if(!Ut)return null;var Kt=this.commonProps,an=this.props.isDisabled,xn=this.state.isFocused,Bn={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return zi.createElement(Ut,ro({},Kt,{innerProps:Bn,isDisabled:an,isFocused:xn}))}},{key:"renderMenu",value:function(){var Bt=this,Ut=this.getComponents(),Kt=Ut.Group,an=Ut.GroupHeading,xn=Ut.Menu,Bn=Ut.MenuList,Fn=Ut.MenuPortal,Dn=Ut.LoadingMessage,ur=Ut.NoOptionsMessage,Pr=Ut.Option,$r=this.commonProps,Kr=this.state.focusedOption,gi=this.props,fi=gi.captureMenuScroll,Ri=gi.inputValue,Ui=gi.isLoading,Ho=gi.loadingMessage,Oo=gi.minMenuHeight,ko=gi.maxMenuHeight,Uo=gi.menuIsOpen,Io=gi.menuPlacement,Fa=gi.menuPosition,Ya=gi.menuPortalTarget,ha=gi.menuShouldBlockScroll,da=gi.menuShouldScrollIntoView,wh=gi.noOptionsMessage,rc=gi.onMenuScrollToTop,xf=gi.onMenuScrollToBottom;if(!Uo)return null;var Eh=function(La,bi){var Hi=La.type,Wi=La.data,Vi=La.isDisabled,Zi=La.isSelected,Yo=La.label,za=La.value,Wl=Kr===Wi,fa=Vi?void 0:function(){return Bt.onOptionHover(Wi)},Ag=Vi?void 0:function(){return Bt.selectOption(Wi)},Od="".concat(Bt.getElementId("option"),"-").concat(bi),xp={id:Od,onClick:Ag,onMouseMove:fa,onMouseOver:fa,tabIndex:-1};return zi.createElement(Pr,ro({},$r,{innerProps:xp,data:Wi,isDisabled:Vi,isSelected:Zi,key:Od,label:Yo,type:Hi,value:za,isFocused:Wl,innerRef:Wl?Bt.getFocusedOptionRef:void 0}),Bt.formatOptionLabel(La.data,"menu"))},Zh;if(this.hasOptions())Zh=this.getCategorizedOptions().map(function(La){if(La.type==="group"){var bi=La.data,Hi=La.options,Wi=La.index,Vi="".concat(Bt.getElementId("group"),"-").concat(Wi),Zi="".concat(Vi,"-heading");return zi.createElement(Kt,ro({},$r,{key:Vi,data:bi,options:Hi,Heading:an,headingProps:{id:Zi,data:La.data},label:Bt.formatGroupLabel(La.data)}),La.options.map(function(Yo){return Eh(Yo,"".concat(Wi,"-").concat(Yo.index))}))}else if(La.type==="option")return Eh(La,"".concat(La.index))});else if(Ui){var yu=Ho({inputValue:Ri});if(yu===null)return null;Zh=zi.createElement(Dn,$r,yu)}else{var pv=wh({inputValue:Ri});if(pv===null)return null;Zh=zi.createElement(ur,$r,pv)}var kg={minMenuHeight:Oo,maxMenuHeight:ko,menuPlacement:Io,menuPosition:Fa,menuShouldScrollIntoView:da},Sh=zi.createElement(ev,ro({},$r,kg),function(La){var bi=La.ref,Hi=La.placerProps,Wi=Hi.placement,Vi=Hi.maxHeight;return zi.createElement(xn,ro({},$r,kg,{innerRef:bi,innerProps:{onMouseDown:Bt.onMenuMouseDown,onMouseMove:Bt.onMenuMouseMove},isLoading:Ui,placement:Wi}),zi.createElement(W2,{captureEnabled:fi,onTopArrive:rc,onBottomArrive:xf,lockEnabled:ha},function(Zi){return zi.createElement(Bn,ro({},$r,{innerRef:function(Yo){Bt.getMenuListRef(Yo),Zi(Yo)},isLoading:Ui,maxHeight:Vi,focusedOption:Kr}),Zh)}))});return Ya||Fa==="fixed"?zi.createElement(Fn,ro({},$r,{appendTo:Ya,controlElement:this.controlRef,menuPlacement:Io,menuPosition:Fa}),Sh):Sh}},{key:"renderFormField",value:function(){var Bt=this,Ut=this.props,Kt=Ut.delimiter,an=Ut.isDisabled,xn=Ut.isMulti,Bn=Ut.name,Fn=this.state.selectValue;if(!(!Bn||an))if(xn)if(Kt){var Dn=Fn.map(function($r){return Bt.getOptionValue($r)}).join(Kt);return zi.createElement("input",{name:Bn,type:"hidden",value:Dn})}else{var ur=Fn.length>0?Fn.map(function($r,Kr){return zi.createElement("input",{key:"i-".concat(Kr),name:Bn,type:"hidden",value:Bt.getOptionValue($r)})}):zi.createElement("input",{name:Bn,type:"hidden"});return zi.createElement("div",null,ur)}else{var Pr=Fn[0]?this.getOptionValue(Fn[0]):"";return zi.createElement("input",{name:Bn,type:"hidden",value:Pr})}}},{key:"renderLiveRegion",value:function(){var Bt=this.commonProps,Ut=this.state,Kt=Ut.ariaSelection,an=Ut.focusedOption,xn=Ut.focusedValue,Bn=Ut.isFocused,Fn=Ut.selectValue,Dn=this.getFocusableOptions();return zi.createElement(M2,ro({},Bt,{ariaSelection:Kt,focusedOption:an,focusedValue:xn,isFocused:Bn,selectValue:Fn,focusableOptions:Dn}))}},{key:"render",value:function(){var Bt=this.getComponents(),Ut=Bt.Control,Kt=Bt.IndicatorsContainer,an=Bt.SelectContainer,xn=Bt.ValueContainer,Bn=this.props,Fn=Bn.className,Dn=Bn.id,ur=Bn.isDisabled,Pr=Bn.menuIsOpen,$r=this.state.isFocused,Kr=this.commonProps=this.getCommonProps();return zi.createElement(an,ro({},Kr,{className:Fn,innerProps:{id:Dn,onKeyDown:this.onKeyDown},isDisabled:ur,isFocused:$r}),this.renderLiveRegion(),zi.createElement(Ut,ro({},Kr,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:ur,isFocused:$r,menuIsOpen:Pr}),zi.createElement(xn,ro({},Kr,{isDisabled:ur}),this.renderPlaceholderOrValue(),this.renderInput()),zi.createElement(Kt,ro({},Kr,{isDisabled:ur}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(Bt,Ut){var Kt=Ut.prevProps,an=Ut.clearFocusValueOnUpdate,xn=Ut.inputIsHiddenAfterUpdate,Bn=Bt.options,Fn=Bt.value,Dn=Bt.menuIsOpen,ur=Bt.inputValue,Pr={};if(Kt&&(Fn!==Kt.value||Bn!==Kt.options||Dn!==Kt.menuIsOpen||ur!==Kt.inputValue)){var $r=n1(Fn),Kr=Dn?rx(Bt,$r):[],gi=an?ix(Ut,$r):null,fi=ox(Ut,Kr);Pr={selectValue:$r,focusedOption:fi,focusedValue:gi,clearFocusValueOnUpdate:!1}}var Ri=xn!=null&&Bt!==Kt?{inputIsHidden:xn,inputIsHiddenAfterUpdate:void 0}:{};return dl(dl(dl({},Pr),Ri),{},{prevProps:Bt})}}]),$t}(yn);hb.defaultProps=nx;var ax={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},lx=function(Pt){var Rt,$t;return $t=Rt=function(Bt){gp(Kt,Bt);var Ut=yf(Kt);function Kt(){var an;mf(this,Kt);for(var xn=arguments.length,Bn=new Array(xn),Fn=0;Fn<xn;Fn++)Bn[Fn]=arguments[Fn];return an=Ut.call.apply(Ut,[this].concat(Bn)),an.select=void 0,an.state={inputValue:an.props.inputValue!==void 0?an.props.inputValue:an.props.defaultInputValue,menuIsOpen:an.props.menuIsOpen!==void 0?an.props.menuIsOpen:an.props.defaultMenuIsOpen,value:an.props.value!==void 0?an.props.value:an.props.defaultValue},an.onChange=function(Dn,ur){an.callProp("onChange",Dn,ur),an.setState({value:Dn})},an.onInputChange=function(Dn,ur){var Pr=an.callProp("onInputChange",Dn,ur);an.setState({inputValue:Pr!==void 0?Pr:Dn})},an.onMenuOpen=function(){an.callProp("onMenuOpen"),an.setState({menuIsOpen:!0})},an.onMenuClose=function(){an.callProp("onMenuClose"),an.setState({menuIsOpen:!1})},an}return yg(Kt,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(an){return this.props[an]!==void 0?this.props[an]:this.state[an]}},{key:"callProp",value:function(an){if(typeof this.props[an]=="function"){for(var xn,Bn=arguments.length,Fn=new Array(Bn>1?Bn-1:0),Dn=1;Dn<Bn;Dn++)Fn[Dn-1]=arguments[Dn];return(xn=this.props)[an].apply(xn,Fn)}}},{key:"render",value:function(){var an=this,xn=this.props;xn.defaultInputValue,xn.defaultMenuIsOpen,xn.defaultValue;var Bn=Zc(xn,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return zi.createElement(Pt,ro({},Bn,{ref:function(Fn){an.select=Fn},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),Kt}(yn),Rt.defaultProps=ax,$t},ux=lx(hb),cx=ux;const b_=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"},{value:"supplementing",label:"Transcription"}];var db=Pt=>{const Rt=Pt.content?b_.find($t=>$t.value===Pt.content):null;return gn("div",{className:"r6o-purposedropdown"},gn(cx,{value:Rt,onChange:Pt.onChange,options:b_,isDisabled:!Pt.editable}))};const hx=Pt=>gn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:Pt.width},gn("metadata",null,"IcoFont Icons"),gn("title",null,"simple-down"),gn("glyph",{glyphName:"simple-down",unicode:"\uEAB2",horizAdvX:"1000"}),gn("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"})),dx=Pt=>gn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:Pt.width},gn("metadata",null,"IcoFont Icons"),gn("title",null,"close"),gn("glyph",{glyphName:"close",unicode:"\uEEE4",horizAdvX:"1000"}),gn("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"})),fx=Pt=>gn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:Pt.width},gn("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}));var px=Pt=>{const[Rt,$t]=ki(!1),[Bt,Ut]=ki(!1),Kt=ur=>{$t(!0),Ut(!1)},an=ur=>{Pt.onDelete(Pt.body),Ut(!1)},xn=ur=>Pt.onUpdate(Pt.body,Nt(Mt({},Pt.body),{value:ur.target.value})),Bn=ur=>Pt.onUpdate(Pt.body,Nt(Mt({},Pt.body),{purpose:ur.value})),Fn=Pt.body.modified||Pt.body.created,Dn=Pt.body.creator&&gn("div",{className:"r6o-lastmodified"},gn("span",{className:"r6o-lastmodified-by"},Pt.body.creator.name||Pt.body.creator.id),Pt.body.created&&gn("span",{className:"r6o-lastmodified-at"},gn(Ap,{datetime:Pt.env.toClientTime(Fn),locale:Ma.locale()})));return Pt.readOnly?gn("div",{className:"r6o-widget comment"},gn("div",{className:"r6o-readonly-comment"},Pt.body.value),Dn):gn("div",{className:Rt?"r6o-widget comment editable":"r6o-widget comment"},gn(rp,{editable:Rt,content:Pt.body.value,onChange:xn,onSaveAndClose:Pt.onSaveAndClose}),!Rt&&Dn,Pt.purposeSelector&&gn(db,{editable:Rt,content:Pt.body.purpose,onChange:Bn,onSaveAndClose:Pt.onSaveAndClose}),gn("div",{className:Bt?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:()=>Ut(!Bt)},gn(hx,{width:12})),Bt&&gn(lg,{onEdit:Kt,onDelete:an,onClickOutside:()=>Ut(!1)}))};const gx=b_.map(Pt=>Pt.value),fb=(Pt,Rt)=>{const $t=Rt?gx.indexOf(Pt.purpose)>-1:Pt.purpose=="commenting"||Pt.purpose=="replying";return Pt.type==="TextualBody"&&(!Pt.hasOwnProperty("purpose")||$t)},pb=(Pt,Rt)=>{var $t,Bt;if(Rt.editable===!0)return!1;if(Rt.editable===!1)return!0;if(Rt.editable==="MINE_ONLY"){const Ut=($t=Pt.creator)==null?void 0:$t.id;return((Bt=Rt.env.user)==null?void 0:Bt.id)!==Ut}return Rt.readOnly},mx=(Pt,Rt)=>Pt||{type:"TextualBody",value:"",purpose:Rt?"replying":"commenting",draft:!0},gb=Pt=>{const Rt=Pt.annotation?Pt.annotation.bodies.filter(an=>fb(an,Pt.purposeSelector)):[],$t=mx(Rt.find(an=>an.draft==!0),Rt.length>1),Bt=Rt.filter(an=>an!=$t),Ut=an=>{const xn=$t.value,Bn=an.target.value;xn.length===0&&Bn.length>0?Pt.onAppendBody(Nt(Mt({},$t),{value:Bn})):xn.length>0&&Bn.length===0?Pt.onRemoveBody($t):Pt.onUpdateBody($t,Nt(Mt({},$t),{value:Bn}))},Kt=an=>Pt.onUpdateBody($t,Nt(Mt({},$t),{purpose:an.value}));return gn(pr,null,Bt.map((an,xn)=>gn(px,{key:xn,env:Pt.env,purposeSelector:Pt.purposeSelector,readOnly:pb(an,Pt),body:an,onUpdate:Pt.onUpdateBody,onDelete:Pt.onRemoveBody,onSaveAndClose:Pt.onSaveAndClose})),!Pt.readOnly&&Pt.annotation&&gn("div",{className:"r6o-widget comment editable"},gn(rp,{focus:Pt.focus,content:$t.value,editable:!0,placeholder:Bt.length>0?Ma.t("Add a reply..."):Ma.t("Add a comment..."),onChange:Ut,onSaveAndClose:()=>Pt.onSaveAndClose()}),Pt.purposeSelector&&$t.value.length>0&&gn(db,{editable:!0,content:$t.purpose,onChange:Kt,onSaveAndClose:()=>Pt.onSaveAndClose()})))};gb.disableDelete=(Pt,Rt)=>Pt.bodies.filter($t=>fb($t,Rt.purposeSelector)).some($t=>pb($t,Rt));var mb=gb;function yb(Pt,Rt){Pt.prototype=Object.create(Rt.prototype),Pt.prototype.constructor=Pt,vg(Pt,Rt)}function yx(Pt,Rt){return Pt.classList?!!Rt&&Pt.classList.contains(Rt):(" "+(Pt.className.baseVal||Pt.className)+" ").indexOf(" "+Rt+" ")!==-1}function vx(Pt,Rt){Pt.classList?Pt.classList.add(Rt):yx(Pt,Rt)||(typeof Pt.className=="string"?Pt.className=Pt.className+" "+Rt:Pt.setAttribute("class",(Pt.className&&Pt.className.baseVal||"")+" "+Rt))}function vb(Pt,Rt){return Pt.replace(new RegExp("(^|\\s)"+Rt+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function _x(Pt,Rt){Pt.classList?Pt.classList.remove(Rt):typeof Pt.className=="string"?Pt.className=vb(Pt.className,Rt):Pt.setAttribute("class",vb(Pt.className&&Pt.className.baseVal||"",Rt))}var _b={disabled:!1},bb=zi.createContext(null),u1="unmounted",Eg="exited",Sg="entering",Im="entered",x_="exiting",bf=function(Pt){yb(Rt,Pt);function Rt(Bt,Ut){var Kt;Kt=Pt.call(this,Bt,Ut)||this;var an=Ut,xn=an&&!an.isMounting?Bt.enter:Bt.appear,Bn;return Kt.appearStatus=null,Bt.in?xn?(Bn=Eg,Kt.appearStatus=Sg):Bn=Im:Bt.unmountOnExit||Bt.mountOnEnter?Bn=u1:Bn=Eg,Kt.state={status:Bn},Kt.nextCallback=null,Kt}Rt.getDerivedStateFromProps=function(Bt,Ut){var Kt=Bt.in;return Kt&&Ut.status===u1?{status:Eg}:null};var $t=Rt.prototype;return $t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},$t.componentDidUpdate=function(Bt){var Ut=null;if(Bt!==this.props){var Kt=this.state.status;this.props.in?Kt!==Sg&&Kt!==Im&&(Ut=Sg):(Kt===Sg||Kt===Im)&&(Ut=x_)}this.updateStatus(!1,Ut)},$t.componentWillUnmount=function(){this.cancelNextCallback()},$t.getTimeouts=function(){var Bt=this.props.timeout,Ut,Kt,an;return Ut=Kt=an=Bt,Bt!=null&&typeof Bt!="number"&&(Ut=Bt.exit,Kt=Bt.enter,an=Bt.appear!==void 0?Bt.appear:Kt),{exit:Ut,enter:Kt,appear:an}},$t.updateStatus=function(Bt,Ut){Bt===void 0&&(Bt=!1),Ut!==null?(this.cancelNextCallback(),Ut===Sg?this.performEnter(Bt):this.performExit()):this.props.unmountOnExit&&this.state.status===Eg&&this.setState({status:u1})},$t.performEnter=function(Bt){var Ut=this,Kt=this.props.enter,an=this.context?this.context.isMounting:Bt,xn=this.props.nodeRef?[an]:[zi.findDOMNode(this),an],Bn=xn[0],Fn=xn[1],Dn=this.getTimeouts(),ur=an?Dn.appear:Dn.enter;if(!Bt&&!Kt||_b.disabled){this.safeSetState({status:Im},function(){Ut.props.onEntered(Bn)});return}this.props.onEnter(Bn,Fn),this.safeSetState({status:Sg},function(){Ut.props.onEntering(Bn,Fn),Ut.onTransitionEnd(ur,function(){Ut.safeSetState({status:Im},function(){Ut.props.onEntered(Bn,Fn)})})})},$t.performExit=function(){var Bt=this,Ut=this.props.exit,Kt=this.getTimeouts(),an=this.props.nodeRef?void 0:zi.findDOMNode(this);if(!Ut||_b.disabled){this.safeSetState({status:Eg},function(){Bt.props.onExited(an)});return}this.props.onExit(an),this.safeSetState({status:x_},function(){Bt.props.onExiting(an),Bt.onTransitionEnd(Kt.exit,function(){Bt.safeSetState({status:Eg},function(){Bt.props.onExited(an)})})})},$t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},$t.safeSetState=function(Bt,Ut){Ut=this.setNextCallback(Ut),this.setState(Bt,Ut)},$t.setNextCallback=function(Bt){var Ut=this,Kt=!0;return this.nextCallback=function(an){Kt&&(Kt=!1,Ut.nextCallback=null,Bt(an))},this.nextCallback.cancel=function(){Kt=!1},this.nextCallback},$t.onTransitionEnd=function(Bt,Ut){this.setNextCallback(Ut);var Kt=this.props.nodeRef?this.props.nodeRef.current:zi.findDOMNode(this),an=Bt==null&&!this.props.addEndListener;if(!Kt||an){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var xn=this.props.nodeRef?[this.nextCallback]:[Kt,this.nextCallback],Bn=xn[0],Fn=xn[1];this.props.addEndListener(Bn,Fn)}Bt!=null&&setTimeout(this.nextCallback,Bt)},$t.render=function(){var Bt=this.state.status;if(Bt===u1)return null;var Ut=this.props,Kt=Ut.children;Ut.in,Ut.mountOnEnter,Ut.unmountOnExit,Ut.appear,Ut.enter,Ut.exit,Ut.timeout,Ut.addEndListener,Ut.onEnter,Ut.onEntering,Ut.onEntered,Ut.onExit,Ut.onExiting,Ut.onExited,Ut.nodeRef;var an=bm(Ut,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return zi.createElement(bb.Provider,{value:null},typeof Kt=="function"?Kt(Bt,an):zi.cloneElement(zi.Children.only(Kt),an))},Rt}(zi.Component);bf.contextType=bb,bf.propTypes={};function Mm(){}bf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mm,onEntering:Mm,onEntered:Mm,onExit:Mm,onExiting:Mm,onExited:Mm},bf.UNMOUNTED=u1,bf.EXITED=Eg,bf.ENTERING=Sg,bf.ENTERED=Im,bf.EXITING=x_;var bx=bf,xx=function(Pt,Rt){return Pt&&Rt&&Rt.split(" ").forEach(function($t){return vx(Pt,$t)})},w_=function(Pt,Rt){return Pt&&Rt&&Rt.split(" ").forEach(function($t){return _x(Pt,$t)})},E_=function(Pt){yb(Rt,Pt);function Rt(){for(var Bt,Ut=arguments.length,Kt=new Array(Ut),an=0;an<Ut;an++)Kt[an]=arguments[an];return Bt=Pt.call.apply(Pt,[this].concat(Kt))||this,Bt.appliedClasses={appear:{},enter:{},exit:{}},Bt.onEnter=function(xn,Bn){var Fn=Bt.resolveArguments(xn,Bn),Dn=Fn[0],ur=Fn[1];Bt.removeClasses(Dn,"exit"),Bt.addClass(Dn,ur?"appear":"enter","base"),Bt.props.onEnter&&Bt.props.onEnter(xn,Bn)},Bt.onEntering=function(xn,Bn){var Fn=Bt.resolveArguments(xn,Bn),Dn=Fn[0],ur=Fn[1],Pr=ur?"appear":"enter";Bt.addClass(Dn,Pr,"active"),Bt.props.onEntering&&Bt.props.onEntering(xn,Bn)},Bt.onEntered=function(xn,Bn){var Fn=Bt.resolveArguments(xn,Bn),Dn=Fn[0],ur=Fn[1],Pr=ur?"appear":"enter";Bt.removeClasses(Dn,Pr),Bt.addClass(Dn,Pr,"done"),Bt.props.onEntered&&Bt.props.onEntered(xn,Bn)},Bt.onExit=function(xn){var Bn=Bt.resolveArguments(xn),Fn=Bn[0];Bt.removeClasses(Fn,"appear"),Bt.removeClasses(Fn,"enter"),Bt.addClass(Fn,"exit","base"),Bt.props.onExit&&Bt.props.onExit(xn)},Bt.onExiting=function(xn){var Bn=Bt.resolveArguments(xn),Fn=Bn[0];Bt.addClass(Fn,"exit","active"),Bt.props.onExiting&&Bt.props.onExiting(xn)},Bt.onExited=function(xn){var Bn=Bt.resolveArguments(xn),Fn=Bn[0];Bt.removeClasses(Fn,"exit"),Bt.addClass(Fn,"exit","done"),Bt.props.onExited&&Bt.props.onExited(xn)},Bt.resolveArguments=function(xn,Bn){return Bt.props.nodeRef?[Bt.props.nodeRef.current,xn]:[xn,Bn]},Bt.getClassNames=function(xn){var Bn=Bt.props.classNames,Fn=typeof Bn=="string",Dn=Fn&&Bn?Bn+"-":"",ur=Fn?""+Dn+xn:Bn[xn],Pr=Fn?ur+"-active":Bn[xn+"Active"],$r=Fn?ur+"-done":Bn[xn+"Done"];return{baseClassName:ur,activeClassName:Pr,doneClassName:$r}},Bt}var $t=Rt.prototype;return $t.addClass=function(Bt,Ut,Kt){var an=this.getClassNames(Ut)[Kt+"ClassName"],xn=this.getClassNames("enter"),Bn=xn.doneClassName;Ut==="appear"&&Kt==="done"&&Bn&&(an+=" "+Bn),Kt==="active"&&Bt&&Bt.scrollTop,an&&(this.appliedClasses[Ut][Kt]=an,xx(Bt,an))},$t.removeClasses=function(Bt,Ut){var Kt=this.appliedClasses[Ut],an=Kt.base,xn=Kt.active,Bn=Kt.done;this.appliedClasses[Ut]={},an&&w_(Bt,an),xn&&w_(Bt,xn),Bn&&w_(Bt,Bn)},$t.render=function(){var Bt=this.props;Bt.classNames;var Ut=bm(Bt,["classNames"]);return zi.createElement(bx,ro({},Ut,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},Rt}(zi.Component);E_.defaultProps={classNames:""},E_.propTypes={};var wx=E_;const Ex=(Pt,Rt)=>Rt.filter($t=>($t.label?$t.label:$t).toLowerCase().startsWith(Pt.toLowerCase())),Sx=(Pt,Rt)=>Rt(Pt);var Cx=Pt=>{const Rt=Tn(),[$t,Bt]=ki(Pt.initialValue||""),[Ut,Kt]=ki([]),[an,xn]=ki(null);Ti(()=>{Pt.focus&&Rt.current.querySelector("input").focus({preventScroll:!0})},[]),Ti(()=>{Pt.onChange&&Pt.onChange($t)},[$t]);const Bn=Dn=>{if(typeof Pt.vocabulary=="function"){const ur=Sx(Dn,Pt.vocabulary);ur.then?ur.then(Kt):Kt(ur)}else{const ur=Ex(Dn,Pt.vocabulary);Kt(ur)}},Fn=()=>{if(an!==null)Pt.onSubmit(Ut[an]);else{const Dn=$t.trim();if(Dn){const ur=Array.isArray(Pt.vocabulary)?Pt.vocabulary.find(Pr=>(Pr.label||Pr).toLowerCase()===Dn.toLowerCase()):null;ur?Pt.onSubmit(ur):Pt.onSubmit(Dn)}}Bt(""),Kt([]),xn(null)};return gn("div",{ref:Rt,className:"r6o-autocomplete"},gn("div",null,gn("input",{onKeyDown:Dn=>{if(Dn.which===13)Fn();else if(Dn.which===27)Pt.onCancel&&Pt.onCancel();else if(Ut.length>0){if(Dn.which===38)if(an===null)xn(0);else{const ur=Math.max(0,an-1);xn(ur)}else if(Dn.which===40)if(an===null)xn(0);else{const ur=Math.min(Ut.length-1,an+1);xn(ur)}}else Dn.which===40&&Array.isArray(Pt.vocabulary)&&Kt(Pt.vocabulary)},onChange:Dn=>{const{value:ur}=Dn.target;Bt(ur),xn(null),ur?Bn(ur):Kt([])},value:$t,placeholder:Pt.placeholder})),gn("ul",null,Ut.length>0&&Ut.map((Dn,ur)=>gn("li",{key:`${Dn.label?Dn.label:Dn}${ur}`,onClick:Fn,onMouseEnter:()=>xn(ur),style:an===ur?{backgroundColor:"#bde4ff"}:{}},Dn.label?Dn.label:Dn))))};const Tx=Pt=>Pt||{type:"TextualBody",value:"",purpose:"tagging",draft:!0};var xb=Pt=>{const Rt=Pt.annotation?Pt.annotation.bodies.filter(Dn=>Dn.type==="TextualBody"&&Dn.purpose==="tagging"):[],$t=Tx(Rt.slice().reverse().find(Dn=>Dn.draft)),Bt=Rt.filter(Dn=>Dn!=$t),[Ut,Kt]=ki(!1),an=Dn=>ur=>{Kt(Ut===Dn?!1:Dn)},xn=Dn=>{const ur=$t.value.trim(),Pr=Dn.trim();ur.length===0&&Pr.length>0?Pt.onAppendBody(Nt(Mt({},$t),{value:Pr})):ur.length>0&&Pr.length===0?Pt.onRemoveBody($t):Pt.onUpdateBody($t,Nt(Mt({},$t),{value:Pr}))},Bn=Dn=>ur=>{ur.stopPropagation(),Pt.onRemoveBody(Dn)},Fn=Dn=>{const ur=Dn.label?Nt(Mt({},$t),{value:Dn.label,source:Dn.uri}):Nt(Mt({},$t),{value:Dn}),Pr=zt(ur,["draft"]);$t.value.trim().length===0?Pt.onAppendBody(Pr):Pt.onUpdateBody($t,Pr)};return gn("div",{className:"r6o-widget r6o-tag"},Bt.length>0&&gn("ul",{className:"r6o-taglist"},Bt.map(Dn=>gn("li",{key:Dn.value,onClick:an(Dn.value)},gn("span",{className:"r6o-label"},Dn.value),!Pt.readOnly&&gn(wx,{in:Ut===Dn.value,timeout:200,classNames:"r6o-delete"},gn("span",{className:"r6o-delete-wrapper",onClick:Bn(Dn)},gn("span",{className:"r6o-delete"},gn(dx,{width:12}))))))),!Pt.readOnly&&gn(Cx,{focus:Pt.focus,placeholder:Ma.t("Add tag..."),vocabulary:Pt.vocabulary||[],onChange:xn,onSubmit:Fn}))};class wb extends yn{constructor(Rt){super(Rt),this.element=zi.createRef()}renderWidget(Rt){const $t=this.props.widget(Nt(Mt({annotation:Rt.annotation,readOnly:Rt.readOnly},Rt.config),{onAppendBody:(Bt,Ut)=>Rt.onAppendBody(Bt,Ut),onUpdateBody:(Bt,Ut,Kt)=>Rt.onUpdateBody(Bt,Ut,Kt),onUpsertBody:(Bt,Ut,Kt)=>Rt.onUpsertBody(Bt,Ut,Kt),onRemoveBody:(Bt,Ut)=>Rt.onRemoveBody(Bt,Ut),onBatchModify:(Bt,Ut)=>Rt.onBatchModify(Bt,Ut),onSetProperty:(Bt,Ut)=>Rt.onSetProperty(Bt,Ut),onSaveAndClose:()=>Rt.onSaveAndClose()}));for(;this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild($t)}componentDidMount(){this.renderWidget(this.props)}componentWillReceiveProps(Rt){this.element.current&&this.props.annotation!==Rt.annotation&&this.renderWidget(Rt)}render(){return gn("div",{ref:this.element,className:"widget"})}}window.React=zi,window.ReactDOM=zi;const kx={COMMENT:mb,TAG:xb},Ax=[gn(mb,null),gn(xb,null)],Px=Pt=>{const Rt=Bt=>{var Ut;return typeof Bt=="function"&&!!((Ut=Bt.prototype)!=null&&Ut.isReactComponent)},$t=Bt=>typeof Bt=="function"&&(String(Bt).match(/return .+\(['|"].+['|"],\s*\{/g)||String(Bt).match(/return .+preact_compat/)||String(Bt).match(/return .+\.createElement/g));return Rt(Pt)||$t(Pt)},Lx=Pt=>{const Rt=($t,Bt,Ut)=>{if(typeof $t=="string"||$t instanceof String)return zi.createElement(kx[$t],Bt);if((Ut==null?void 0:Ut.toLowerCase())==="react")return zi.createElement($t,Bt);if((Ut==null?void 0:Ut.toLowerCase())==="plainjs")return gn(wb,{widget:$t,config:Bt});if(Px($t))return zi.createElement($t,Bt);if(typeof $t=="function"||$t instanceof Function)return gn(wb,{widget:$t,config:Bt});throw`${$t} is not a valid plugin`};if(Pt.widget){const $t=Pt,{widget:Bt,force:Ut}=$t,Kt=zt($t,["widget","force"]);return Rt(Bt,Kt,Ut)}else return Rt(Pt)},Eb=14;var Sb=(Pt,Rt,$t,Bt)=>{const Ut=Pt.getBoundingClientRect();Rt.className="r6o-editor r6o-arrow-top r6o-arrow-left";const{left:Kt,top:an,right:xn,bottom:Bn}=$t.getBoundingClientRect();if(Rt.style.top=`${Bn-Ut.top+Eb}px`,Rt.style.left=`${Kt-Ut.left}px`,Bt){const Fn=Rt.children[1].getBoundingClientRect();if(Fn.right>window.innerWidth&&(Rt.classList.remove("r6o-arrow-left"),Rt.classList.add("r6o-arrow-right"),Rt.style.left=`${xn-Fn.width-Ut.left}px`),Fn.bottom>window.innerHeight){Rt.classList.remove("r6o-arrow-top"),Rt.classList.add("r6o-arrow-bottom");const ur=Rt.children[1].getBoundingClientRect().height;Rt.style.top=`${an-Ut.top-ur-Eb}px`}const Dn=Rt.children[1].getBoundingClientRect();if(Dn.top<0){Rt.classList.add("pushed","down"),Rt.style.top=`${-Ut.top}px`;const ur=Bn-Ut.top;Dn.height-Ut.top>ur&&Rt.classList.remove("r6o-arrow-bottom")}Dn.left<0&&(Rt.classList.add("pushed","right"),Rt.style.left=`${-Ut.left}px`),requestAnimationFrame(()=>Rt.style.opacity=1)}};const Cb=Pt=>{const{top:Rt,left:$t,width:Bt,height:Ut}=Pt.getBoundingClientRect();return`${Rt}, ${$t}, ${Bt}, ${Ut}`};class Ox extends yn{constructor(Rt){super(Rt),Ht(this,"initResizeObserver",()=>{const $t=this.props.autoPosition===void 0?!0:this.props.autoPosition;if(window!=null&&window.ResizeObserver){const Bt=new ResizeObserver(()=>{this.state.dragged||Sb(this.props.wrapperEl,this.element.current,this.props.selectedElement,$t)});return Bt.observe(this.props.wrapperEl),()=>Bt.disconnect()}else this.state.dragged||Sb(this.props.wrapperEl,this.element.current,this.props.selectedElement,$t)}),Ht(this,"creationMeta",$t=>{const Bt={},{user:Ut}=this.props.env;return Ut&&(Bt.creator={},Ut.id&&(Bt.creator.id=Ut.id),Ut.displayName&&(Bt.creator.name=Ut.displayName),Bt[$t.created?"modified":"created"]=this.props.env.getCurrentTimeAdjusted()),Bt}),Ht(this,"getCurrentAnnotation",()=>this.state.currentAnnotation.clone()),Ht(this,"updateCurrentAnnotation",($t,Bt)=>this.setState({currentAnnotation:this.state.currentAnnotation.clone($t)},()=>{Bt&&this.onOk()})),Ht(this,"onAppendBody",($t,Bt)=>this.updateCurrentAnnotation({body:[...this.state.currentAnnotation.bodies,Mt(Mt({},$t),this.creationMeta($t))]},Bt)),Ht(this,"onUpdateBody",($t,Bt,Ut)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.map(Kt=>Kt===$t?Mt(Mt({},Bt),this.creationMeta(Bt)):Kt)},Ut)),Ht(this,"onRemoveBody",($t,Bt)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.filter(Ut=>Ut!==$t)},Bt)),Ht(this,"onUpsertBody",($t,Bt,Ut)=>{if($t==null&&Bt!=null)this.onAppendBody(Bt,Ut);else if($t!=null&&Bt!=null)this.onUpdateBody($t,Bt,Ut);else if($t!=null&&Bt==null){const Kt=this.state.currentAnnotation.bodies.find(an=>an.purpose===$t.purpose);Kt?this.onUpdateBody(Kt,$t,Ut):this.onAppendBody($t,Ut)}}),Ht(this,"onBatchModify",($t,Bt)=>{const Ut=$t.filter(Fn=>Fn.action==="upsert"&&Fn.body).map(Fn=>({previous:this.state.currentAnnotation.bodies.find(Dn=>Dn.purpose===Fn.body.purpose),updated:Mt(Mt({},Fn.body),this.creationMeta(Fn.body))})),Kt=$t.filter(Fn=>Fn.action==="remove").map(Fn=>Fn.body),an=[...$t.filter(Fn=>Fn.action==="append"||Fn.action==="upsert"&&Fn.updated&&!Fn.previous).map(Fn=>Mt(Mt({},Fn.body),this.creationMeta(Fn.body))),...Ut.filter(Fn=>!Fn.previous).map(Fn=>Fn.updated)],xn=[...$t.filter(Fn=>Fn.action==="update"||Fn.action==="upsert"&&Fn.updated&&Fn.previous).map(Fn=>({previous:Fn.previous,updated:Mt(Mt({},Fn.updated),this.creationMeta(Fn.updated))})),...Ut.filter(Fn=>Fn.previous)],Bn=[...this.state.currentAnnotation.bodies.filter(Fn=>!Kt.includes(Fn)).map(Fn=>{const Dn=xn.find(ur=>ur.previous===Fn);return Dn?Dn.updated:Fn}),...an];this.updateCurrentAnnotation({body:Bn},Bt)}),Ht(this,"onSetProperty",($t,Bt)=>{if(["@context","id","type","body","target"].includes($t))throw new Exception(`Cannot set ${$t} - not allowed`);if(Bt)this.updateCurrentAnnotation({[$t]:Bt});else{const Ut=this.currentAnnotation.clone();delete Ut[$t],this.setState({currentAnnotation:Ut})}}),Ht(this,"onCancel",()=>this.props.onCancel(this.props.annotation)),Ht(this,"onOk",()=>{const $t=Ut=>Ut.clone({body:Ut.bodies.map(Kt=>{var an=Kt,xn=zt(an,["draft"]);return xn})}),{currentAnnotation:Bt}=this.state;Bt.bodies.length===0&&!this.props.allowEmpty?Bt.isSelection?this.onCancel():this.props.onAnnotationDeleted(this.props.annotation):Bt.isSelection?this.props.onAnnotationCreated($t(Bt).toAnnotation()):this.props.onAnnotationUpdated($t(Bt),this.props.annotation)}),Ht(this,"onDelete",()=>this.props.onAnnotationDeleted(this.props.annotation)),this.element=zi.createRef(),this.state={currentAnnotation:Rt.annotation,dragged:!1,selectionBounds:Cb(Rt.selectedElement)}}componentWillReceiveProps(Rt){var $t;const{selectionBounds:Bt}=this.state,Ut=Cb(Rt.selectedElement);($t=this.props.annotation)!=null&&$t.isEqual(Rt.annotation)?this.setState({selectionBounds:Ut}):this.setState({currentAnnotation:Rt.annotation,selectionBounds:Ut}),this.props.modifiedTarget!=Rt.modifiedTarget&&this.state.currentAnnotation&&this.updateCurrentAnnotation({target:this.props.modifiedTarget}),Bt!=Ut&&this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}componentDidMount(){this.removeObserver=this.initResizeObserver(),new MutationObserver(()=>{this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}).observe(this.element.current,{childList:!0,subtree:!0})}componentWillUnmount(){this.removeObserver&&this.removeObserver()}render(){const{currentAnnotation:Rt}=this.state,$t=this.props.widgets?this.props.widgets.map(Lx):Ax,Bt=Kt=>Kt.type.disableDelete?Kt.type.disableDelete(Rt,Nt(Mt({},Kt.props),{readOnly:this.props.readOnly,env:this.props.env})):!1,Ut=Rt&&(Rt.bodies.length>0||this.props.allowEmpty)&&!this.props.readOnly&&!Rt.isSelection&&!$t.some(Bt);return gn(Cp,{disabled:!this.props.detachable,handle:".r6o-draggable",cancel:".r6o-btn, .r6o-btn *",onDrag:()=>this.setState({dragged:!0})},gn("div",{ref:this.element,className:this.state.dragged?"r6o-editor dragged":"r6o-editor"},gn("div",{className:"r6o-arrow"}),gn("div",{className:"r6o-editor-inner"},$t.map((Kt,an)=>zi.cloneElement(Kt,{key:`${an}`,focus:an===0,annotation:Rt,readOnly:this.props.readOnly,env:this.props.env,onAppendBody:this.onAppendBody,onUpdateBody:this.onUpdateBody,onRemoveBody:this.onRemoveBody,onUpsertBody:this.onUpsertBody,onBatchModify:this.onBatchModify,onSetProperty:this.onSetProperty,onSaveAndClose:this.onOk})),this.props.readOnly?gn("div",{className:"r6o-footer"},gn("button",{className:"r6o-btn",onClick:this.onCancel},Ma.t("Close"))):gn("div",{className:this.props.detachable?"r6o-footer r6o-draggable":"r6o-footer"},Ut&&gn("button",{className:"r6o-btn left delete-annotation",title:Ma.t("Delete"),onClick:this.onDelete},gn(fx,{width:12})),gn("button",{className:"r6o-btn outline",onClick:this.onCancel},Ma.t("Cancel")),gn("button",{className:"r6o-btn ",onClick:this.onOk},Ma.t("Ok"))))))}}var sv,Ix=new Uint8Array(16);function Mx(){if(!sv&&(sv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sv(Ix)}var Rx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dx(Pt){return typeof Pt=="string"&&Rx.test(Pt)}for(var mu=[],S_=0;S_<256;++S_)mu.push((S_+256).toString(16).substr(1));function Nx(Pt){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$t=(mu[Pt[Rt+0]]+mu[Pt[Rt+1]]+mu[Pt[Rt+2]]+mu[Pt[Rt+3]]+"-"+mu[Pt[Rt+4]]+mu[Pt[Rt+5]]+"-"+mu[Pt[Rt+6]]+mu[Pt[Rt+7]]+"-"+mu[Pt[Rt+8]]+mu[Pt[Rt+9]]+"-"+mu[Pt[Rt+10]]+mu[Pt[Rt+11]]+mu[Pt[Rt+12]]+mu[Pt[Rt+13]]+mu[Pt[Rt+14]]+mu[Pt[Rt+15]]).toLowerCase();if(!Dx($t))throw TypeError("Stringified UUID is invalid");return $t}function Tb(Pt,Rt,$t){Pt=Pt||{};var Bt=Pt.random||(Pt.rng||Mx)();if(Bt[6]=Bt[6]&15|64,Bt[8]=Bt[8]&63|128,Rt){$t=$t||0;for(var Ut=0;Ut<16;++Ut)Rt[$t+Ut]=Bt[Ut];return Rt}return Nx(Bt)}var $x=function Pt(Rt,$t){if(Rt===$t)return!0;if(Rt&&$t&&typeof Rt=="object"&&typeof $t=="object"){if(Rt.constructor!==$t.constructor)return!1;var Bt,Ut,Kt;if(Array.isArray(Rt)){if(Bt=Rt.length,Bt!=$t.length)return!1;for(Ut=Bt;Ut--!=0;)if(!Pt(Rt[Ut],$t[Ut]))return!1;return!0}if(Rt.constructor===RegExp)return Rt.source===$t.source&&Rt.flags===$t.flags;if(Rt.valueOf!==Object.prototype.valueOf)return Rt.valueOf()===$t.valueOf();if(Rt.toString!==Object.prototype.toString)return Rt.toString()===$t.toString();if(Kt=Object.keys(Rt),Bt=Kt.length,Bt!==Object.keys($t).length)return!1;for(Ut=Bt;Ut--!=0;)if(!Object.prototype.hasOwnProperty.call($t,Kt[Ut]))return!1;for(Ut=Bt;Ut--!=0;){var an=Kt[Ut];if(!Pt(Rt[an],$t[an]))return!1}return!0}return Rt!==Rt&&$t!==$t},kb=$x;const C_=class{constructor(Pt,Rt){Ht(this,"clone",($t,Bt)=>new C_(Mt(Mt({},this.underlying),$t),Mt(Mt({},this.opts),Bt))),Ht(this,"selector",$t=>{const{target:Bt}=this.underlying;if(Bt.selector)return(Array.isArray(Bt.selector)?Bt.selector:[Bt.selector]).find(Ut=>Ut.type===$t)}),this.underlying=Pt,this.opts=Rt}isEqual(Pt){return(Pt==null?void 0:Pt.type)!=="Annotation"?!1:this.underlying===Pt.underlying?!0:!this.underlying.id||!Pt.underlying.id?!1:kb(this.underlying,Pt.underlying)}get readOnly(){var Pt;return(Pt=this.opts)==null?void 0:Pt.readOnly}get id(){return this.underlying.id}get type(){return this.underlying.type}get motivation(){return this.underlying.motivation}get body(){return this.underlying.body}get target(){return this.underlying.target}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}set bodies(Pt){this.underlying.body=Pt}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}get quote(){return this.selector("TextQuoteSelector").exact}get start(){return this.selector("TextPositionSelector").start}get end(){return this.selector("TextPositionSelector").end}};let Cg=C_;Ht(Cg,"create",Pt=>{const Rt={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${Tb()}`,body:[]};return new C_(Mt(Mt({},Rt),Pt))});class c1{constructor(Rt,$t){Ht(this,"clone",Bt=>{const Ut=new c1;return Ut.underlying=JSON.parse(JSON.stringify(this.underlying)),Bt&&(Ut.underlying=Mt(Mt({},Ut.underlying),Bt)),Ut}),Ht(this,"selector",Bt=>{const{target:Ut}=this.underlying;if(Ut.selector)return(Array.isArray(Ut.selector)?Ut.selector:[Ut.selector]).find(Kt=>Kt.type===Bt)}),Ht(this,"toAnnotation",()=>{const Bt=Object.assign({},this.underlying,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${Tb()}`});return new Cg(Bt)}),this.underlying={type:"Selection",body:$t||[],target:Rt}}get type(){return this.underlying.type}get body(){return this.underlying.body}get target(){return this.underlying.target}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}isEqual(Rt){return Rt?kb(this.underlying,Rt.underlying):!1}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}get quote(){return this.selector("TextQuoteSelector").exact}get isSelection(){return!0}}let T_=0;var Bx=()=>({setServerTime:Pt=>{const Rt=Date.now();T_=Pt-Rt},getCurrentTimeAdjusted:()=>new Date(Date.now()+T_).toISOString(),toClientTime:Pt=>Date.parse(Pt)-T_});const Fx=(Pt,Rt)=>{if(Pt){const $t=Pt==="auto"?window.navigator.userLanguage||window.navigator.language:Pt;try{Ma.init($t.split("-")[0].toLowerCase(),Rt)}catch{console.warn(`Unsupported locale '${$t}'. Falling back to default en.`)}}else Ma.init(null,Rt)},Zs="http://www.w3.org/2000/svg",k_=Pt=>{const Rt=Pt.getAttribute("class");return Rt?new Set(Rt.split(" ")):new Set},bp=(Pt,Rt)=>{const $t=k_(Pt);$t.add(Rt),Pt.setAttribute("class",Array.from($t).join(" "))},zx=(Pt,Rt)=>{const $t=k_(Pt);$t.delete(Rt),$t.size===0?Pt.removeAttribute("class"):Pt.setAttribute("class",Array.from($t).join(" "))},A_=(Pt,Rt)=>k_(Pt).has(Rt),Tg=(Pt,Rt)=>{const $t=Pt.selector("FragmentSelector");if($t!=null&&$t.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){const{value:Bt}=$t,Ut=Bt.includes(":")?Bt.substring(Bt.indexOf("=")+1,Bt.indexOf(":")):"pixel",Kt=Bt.includes(":")?Bt.substring(Bt.indexOf(":")+1):Bt.substring(Bt.indexOf("=")+1);let[an,xn,Bn,Fn]=Kt.split(",").map(parseFloat);return Ut.toLowerCase()==="percent"&&(an=an*Rt.naturalWidth/100,xn=xn*Rt.naturalHeight/100,Bn=Bn*Rt.naturalWidth/100,Fn=Fn*Rt.naturalHeight/100),{x:an,y:xn,w:Bn,h:Fn}}},Hx=(Pt,Rt,$t,Bt,Ut)=>({source:Ut==null?void 0:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${Pt},${Rt},${$t},${Bt}`}}),Vx=(Pt,Rt,$t,Bt,Ut)=>{const Kt=Pt/Ut.naturalWidth*100,an=Rt/Ut.naturalHeight*100,xn=$t/Ut.naturalWidth*100,Bn=Bt/Ut.naturalHeight*100;return{source:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=percent:${Kt},${an},${xn},${Bn}`}}},h1=(Pt,Rt,$t,Bt,Ut,Kt)=>(Kt==null?void 0:Kt.toLowerCase())==="percent"?Vx(Pt,Rt,$t,Bt,Ut):Hx(Pt,Rt,$t,Bt,Ut),av=(Pt,Rt,$t,Bt,Ut)=>{Pt.setAttribute("x",Rt),Pt.setAttribute("y",$t),Pt.setAttribute("width",Bt),Pt.setAttribute("height",Ut)},lv=(Pt,Rt,$t)=>{Pt.setAttribute("cx",Rt),Pt.setAttribute("cy",$t),Pt.setAttribute("r",7)},Ab=(Pt,Rt,$t,Bt,Ut)=>{const Kt=document.createElementNS(Zs,"path");Kt.setAttribute("fill-rule","evenodd");const{naturalWidth:an,naturalHeight:xn}=Pt;return Kt.setAttribute("d",`M0 0 h${an} v${xn} h-${an} z M${Rt} ${$t} h${Bt} v${Ut} h-${Bt} z`),Kt},P_=(Pt,Rt,$t,Bt,Ut,Kt)=>{const{naturalWidth:an,naturalHeight:xn}=Rt;Pt.setAttribute("d",`M0 0 h${an} v${xn} h-${an} z M${$t} ${Bt} h${Ut} v${Kt} h-${Ut} z`)},L_=(Pt,Rt,$t,Bt)=>{const{x:Ut,y:Kt,w:an,h:xn}=Pt.type==="Annotation"||Pt.type==="Selection"?Tg(Pt,Rt):{x:Pt,y:Rt,w:$t,h:Bt},Bn=document.createElementNS(Zs,"g");if(an===0&&xn===0){bp(Bn,"a9s-point"),bp(Bn,"a9s-non-scaling"),Bn.setAttribute("transform-origin",`${Ut} ${Kt}`);const Fn=document.createElementNS(Zs,"circle"),Dn=document.createElementNS(Zs,"circle");Dn.setAttribute("class","a9s-inner"),lv(Dn,Ut,Kt),Fn.setAttribute("class","a9s-outer"),lv(Fn,Ut,Kt),Bn.appendChild(Fn),Bn.appendChild(Dn)}else{const Fn=document.createElementNS(Zs,"rect"),Dn=document.createElementNS(Zs,"rect");Dn.setAttribute("class","a9s-inner"),av(Dn,Ut,Kt,an,xn),Fn.setAttribute("class","a9s-outer"),av(Fn,Ut,Kt,an,xn),Bn.appendChild(Fn),Bn.appendChild(Dn)}return Bn},Pb=Pt=>{const Rt=Pt.querySelector(".a9s-outer");if(Rt.nodeName==="rect"){const $t=parseFloat(Rt.getAttribute("x")),Bt=parseFloat(Rt.getAttribute("y")),Ut=parseFloat(Rt.getAttribute("width")),Kt=parseFloat(Rt.getAttribute("height"));return{x:$t,y:Bt,w:Ut,h:Kt}}else{const $t=parseFloat(Rt.getAttribute("cx")),Bt=parseFloat(Rt.getAttribute("cy"));return{x:$t,y:Bt,w:0,h:0}}},O_=(Pt,Rt,$t,Bt,Ut)=>{const Kt=Pt.querySelector(".a9s-inner"),an=Pt.querySelector(".a9s-outer");an.nodeName==="rect"?(av(Kt,Rt,$t,Bt,Ut),av(an,Rt,$t,Bt,Ut)):(lv(Kt,Rt,$t),lv(an,Rt,$t))},Ux=(Pt,Rt)=>{const{w:$t,h:Bt}=Tg(Pt,Rt);return $t*Bt};class jx{constructor(Rt,$t,Bt,Ut,Kt){Ht(this,"dragTo",(an,xn)=>{this.group.style.display=null,this.opposite=[an,xn];const{x:Bn,y:Fn,w:Dn,h:ur}=this.bbox;P_(this.mask,this.env.image,Bn,Fn,Dn,ur),O_(this.rect,Bn,Fn,Dn,ur)}),Ht(this,"getBoundingClientRect",()=>this.rect.getBoundingClientRect()),Ht(this,"toSelection",()=>{const{x:an,y:xn,w:Bn,h:Fn}=this.bbox;return new c1(h1(an,xn,Bn,Fn,this.env.image,this.config.fragmentUnit))}),Ht(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.mask=null,this.rect=null,this.group=null}),this.anchor=[Rt,$t],this.opposite=[Rt,$t],this.config=Ut,this.env=Kt,this.group=document.createElementNS(Zs,"g"),this.mask=Ab(Kt.image,Rt,$t,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=L_(Rt,$t,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),Bt.appendChild(this.group)}get bbox(){const Rt=this.opposite[0]-this.anchor[0],$t=this.opposite[1]-this.anchor[1];return{x:Rt>0?this.anchor[0]:this.opposite[0],y:$t>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(Rt)),h:Math.max(1,Math.abs($t))}}get element(){return this.rect}}const Wx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},I_=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Gx=Pt=>{let Rt=null;const $t=(Ut,Kt)=>new MouseEvent(Ut,{screenX:Kt.screenX,screenY:Kt.screenY,clientX:Kt.clientX,clientY:Kt.clientY,pageX:Kt.pageX,pageY:Kt.pageY,bubbles:!0}),Bt=Ut=>{const Kt=Ut.changedTouches[0],an=$t(Wx[Ut.type],Kt);Kt.target.dispatchEvent(an),Ut.preventDefault(),(Ut.type==="touchstart"||Ut.type==="touchmove")&&(Rt&&clearTimeout(Rt),Rt=setTimeout(()=>{const xn=$t("dblclick",Kt);Kt.target.dispatchEvent(xn)},800)),Ut.type==="touchend"&&Rt&&clearTimeout(Rt)};Pt.addEventListener("touchstart",Bt,!0),Pt.addEventListener("touchmove",Bt,!0),Pt.addEventListener("touchend",Bt,!0),Pt.addEventListener("touchcancel",Bt,!0)},uv="An implementation is missing",Yx=I_();class Lb extends Wo{constructor(Rt,$t,Bt){super(),Ht(this,"enableResponsive",()=>{window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{const Kt=this.svg.getBoundingClientRect(),{width:an,height:xn}=this.svg.viewBox.baseVal;this.scale=Math.max(an/Kt.width,xn/Kt.height),this.onScaleChanged&&this.onScaleChanged(this.scale)}),this.resizeObserver.observe(this.svg.parentNode))}),Ht(this,"getSVGPoint",Kt=>{const an=this.svg.createSVGPoint();if(Yx){const xn=this.svg.getBoundingClientRect(),Bn=Kt.clientX-xn.x,Fn=Kt.clientY-xn.y,{left:Dn,top:ur}=this.svg.getBoundingClientRect();return an.x=Bn+Dn,an.y=Fn+ur,an.matrixTransform(this.g.getScreenCTM().inverse())}else return an.x=Kt.offsetX,an.y=Kt.offsetY,an.matrixTransform(this.g.getCTM().inverse())}),Ht(this,"drawHandle",(Kt,an)=>{const xn=document.createElementNS(Zs,"g");xn.setAttribute("class","a9s-handle");const Bn=document.createElementNS(Zs,"g"),Fn=$r=>{const Kr=document.createElementNS(Zs,"circle");return Kr.setAttribute("cx",Kt),Kr.setAttribute("cy",an),Kr.setAttribute("r",$r),Kr},Dn=this.config.handleRadius||6,ur=Fn(Dn);ur.setAttribute("class","a9s-handle-inner");const Pr=Fn(Dn+1);return Pr.setAttribute("class","a9s-handle-outer"),Bn.appendChild(Pr),Bn.appendChild(ur),xn.appendChild(Bn),xn}),Ht(this,"setHandleXY",(Kt,an,xn)=>{const Bn=Kt.querySelector(".a9s-handle-inner");Bn.setAttribute("cx",an),Bn.setAttribute("cy",xn);const Fn=Kt.querySelector(".a9s-handle-outer");Fn.setAttribute("cx",an),Fn.setAttribute("cy",xn)}),Ht(this,"getHandleXY",Kt=>{const an=Kt.querySelector(".a9s-handle-outer");return{x:parseFloat(an.getAttribute("cx")),y:parseFloat(an.getAttribute("cy"))}}),Ht(this,"scaleHandle",Kt=>{const an=Kt.querySelector(".a9s-handle-inner"),xn=Kt.querySelector(".a9s-handle-outer"),Bn=this.scale*(this.config.handleRadius||6);an.setAttribute("r",Bn),xn.setAttribute("r",Bn)}),this.svg=Rt.closest("svg"),this.g=Rt,this.config=$t,this.env=Bt,this.scale=1;const{image:Ut}=Bt;(Ut instanceof Element||Ut instanceof HTMLDocument)&&this.enableResponsive()}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}class M_ extends Lb{constructor(Rt,$t,Bt){super(Rt,$t,Bt),Ht(this,"attachListeners",({mouseMove:Ut,mouseUp:Kt,dblClick:an})=>{Ut&&(this.mouseMove=xn=>{const{x:Bn,y:Fn}=this.getSVGPoint(xn);this.started||(this.emit("startSelection",{x:Bn,y:Fn}),this.started=!0),Ut(Bn,Fn,xn)},this.svg.addEventListener("mousemove",this.mouseMove)),Kt&&(this.mouseUp=xn=>{if(xn.button!==0)return;const{x:Bn,y:Fn}=this.getSVGPoint(xn);Kt(Bn,Fn,xn)},document.addEventListener("mouseup",this.mouseUp)),an&&(this.dblClick=xn=>{const{x:Bn,y:Fn}=this.getSVGPoint(xn);an(Bn,Fn,xn)},document.addEventListener("dblclick",this.dblClick))}),Ht(this,"detachListeners",()=>{this.mouseMove&&this.svg.removeEventListener("mousemove",this.mouseMove),this.mouseUp&&document.removeEventListener("mouseup",this.mouseUp),this.dblClick&&document.removeEventListener("dblclick",this.dblClick)}),Ht(this,"start",(Ut,Kt)=>{const{x:an,y:xn}=this.getSVGPoint(Ut);this.startDrawing(an,xn,Kt,Ut)}),Ht(this,"startDrawing",Ut=>{throw new Error(uv)}),Ht(this,"createEditableShape",Ut=>{throw new Error(uv)}),this.started=!1}get isDrawing(){throw new Error(uv)}}M_.supports=Pt=>{throw new Error(uv)};const Ob="An implementation is missing";class Ib extends Lb{constructor(Rt,$t,Bt,Ut){super($t,Bt,Ut),Ht(this,"updateState",Kt=>{throw new Error(Ob)}),this.annotation=Rt}get element(){throw new Error(Ob)}}const qx=/firefox/i.test(navigator.userAgent),Mb=(Pt,Rt,$t,Bt,Ut)=>{Pt.setAttribute("width",Bt),Pt.setAttribute("height",Ut),qx?(Pt.setAttribute("x",0),Pt.setAttribute("y",0),Pt.setAttribute("transform",`translate(${Rt}, ${$t})`)):(Pt.setAttribute("x",Rt),Pt.setAttribute("y",$t))},Rb=(Pt,Rt)=>{const{x:$t,y:Bt,width:Ut,height:Kt}=Rt.getBBox(),an=document.createElementNS(Zs,"svg");an.setAttribute("class","a9s-formatter-el"),Mb(an,$t,Bt,Ut,Kt);const xn=document.createElementNS(Zs,"g");xn.appendChild(Pt),an.appendChild(xn),Rt.append(an)},cv=(Pt,Rt,$t)=>{if(!$t)return Pt;const Bt=$t(Rt);if(!Bt)return Pt;if(typeof Bt=="string"||Bt instanceof String)bp(Pt,Bt);else if(Bt.nodeType===Node.ELEMENT_NODE)Rb(Bt,Pt);else{const{className:Ut,style:Kt,element:an}=Bt;if(Ut&&bp(Pt,Ut),Kt){const xn=Pt.querySelector(".a9s-outer"),Bn=Pt.querySelector(".a9s-inner");xn&&Bn?(xn.setAttribute("style","display:none"),Bn.setAttribute("style",Kt)):Pt.setAttribute("style",Kt)}an&&Rb(an,Pt);for(const xn in Bt)Bt.hasOwnProperty(xn)&&xn.startsWith("data-")&&Pt.setAttribute(xn,Bt[xn])}},R_=(Pt,Rt,$t,Bt,Ut)=>{const Kt=Pt.querySelector(".a9s-formatter-el");Kt&&Mb(Kt,Rt,$t,Bt,Ut)};class Xx extends Ib{constructor(Rt,$t,Bt,Ut){super(Rt,$t,Bt,Ut),Ht(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Ht(this,"setSize",(Fn,Dn,ur,Pr)=>{O_(this.rectangle,Fn,Dn,ur,Pr),P_(this.mask,this.env.image,Fn,Dn,ur,Pr),R_(this.elementGroup,Fn,Dn,ur,Pr);const[$r,Kr,gi,fi]=this.handles;this.setHandleXY($r,Fn,Dn),this.setHandleXY(Kr,Fn+ur,Dn),this.setHandleXY(gi,Fn+ur,Dn+Pr),this.setHandleXY(fi,Fn,Dn+Pr)}),Ht(this,"stretchCorners",(Fn,Dn,ur)=>{const Pr=this.getHandleXY(Dn),$r=ur.x-Pr.x,Kr=ur.y-Pr.y,gi=$r>0?Pr.x:ur.x,fi=Kr>0?Pr.y:ur.y,Ri=Math.abs($r),Ui=Math.abs(Kr);O_(this.rectangle,gi,fi,Ri,Ui),P_(this.mask,this.env.image,gi,fi,Ri,Ui),R_(this.elementGroup,gi,fi,Ri,Ui),this.setHandleXY(this.handles[Fn],ur.x,ur.y);const Ho=this.handles[(Fn+3)%4];this.setHandleXY(Ho,Pr.x,ur.y);const Oo=this.handles[(Fn+5)%4];return this.setHandleXY(Oo,ur.x,Pr.y),{x:gi,y:fi,w:Ri,h:Ui}}),Ht(this,"onGrab",Fn=>Dn=>{if(Dn.button!==0)return;this.grabbedElem=Fn;const ur=this.getSVGPoint(Dn),{x:Pr,y:$r}=Pb(this.rectangle);this.mouseOffset={x:ur.x-Pr,y:ur.y-$r}}),Ht(this,"onMouseMove",Fn=>{if(Fn.button!==0)return;const Dn=(ur,Pr)=>ur<0?0:ur>Pr?Pr:ur;if(this.grabbedElem){const ur=this.getSVGPoint(Fn);if(this.grabbedElem===this.rectangle){const{w:Pr,h:$r}=Pb(this.rectangle),{naturalWidth:Kr,naturalHeight:gi}=this.env.image,fi=Dn(ur.x-this.mouseOffset.x,Kr-Pr),Ri=Dn(ur.y-this.mouseOffset.y,gi-$r);this.setSize(fi,Ri,Pr,$r),this.emit("update",h1(fi,Ri,Pr,$r,this.env.image,this.config.fragmentUnit))}else{const Pr=this.handles.indexOf(this.grabbedElem),$r=Pr<2?this.handles[Pr+2]:this.handles[Pr-2],{x:Kr,y:gi,w:fi,h:Ri}=this.stretchCorners(Pr,$r,ur);this.emit("update",h1(Kr,gi,fi,Ri,this.env.image,this.config.fragmentUnit))}}}),Ht(this,"onMouseUp",Fn=>{this.grabbedElem=null,this.mouseOffset=null}),Ht(this,"updateState",Fn=>{const{x:Dn,y:ur,w:Pr,h:$r}=Tg(Fn,this.env.image);this.setSize(Dn,ur,Pr,$r)}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp);const{x:Kt,y:an,w:xn,h:Bn}=Tg(Rt,Ut.image);this.containerGroup=document.createElementNS(Zs,"g"),this.mask=Ab(Ut.image,Kt,an,xn,Bn),this.mask.setAttribute("class","a9s-selection-mask"),this.containerGroup.appendChild(this.mask),this.elementGroup=document.createElementNS(Zs,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.rectangle=L_(Kt,an,xn,Bn),this.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.rectangle)),this.elementGroup.appendChild(this.rectangle),this.handles=[[Kt,an],[Kt+xn,an],[Kt+xn,an+Bn],[Kt,an+Bn]].map(Fn=>{const[Dn,ur]=Fn,Pr=this.drawHandle(Dn,ur);return Pr.addEventListener("mousedown",this.onGrab(Pr)),this.elementGroup.appendChild(Pr),Pr}),this.containerGroup.appendChild(this.elementGroup),$t.appendChild(this.containerGroup),cv(this.rectangle,Rt,Bt.formatter),this.grabbedElem=null,this.mouseOffset=null}get element(){return this.elementGroup}destroy(){this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}}class hv extends M_{constructor(Rt,$t,Bt){super(Rt,$t,Bt),Ht(this,"startDrawing",(Ut,Kt)=>{this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp}),this.rubberband=new jx(Ut,Kt,this.g,this.config,this.env)}),Ht(this,"stop",()=>{this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Ht(this,"onMouseMove",(Ut,Kt)=>this.rubberband.dragTo(Ut,Kt)),Ht(this,"onMouseUp",()=>{this.detachListeners(),this.started=!1;const{width:Ut,height:Kt}=this.rubberband.getBoundingClientRect(),an=this.config.minSelectionWidth||4,xn=this.config.minSelectionHeight||4;if(Ut>=an&&Kt>=xn){const{element:Bn}=this.rubberband;Bn.annotation=this.rubberband.toSelection(),this.emit("complete",Bn)}else this.emit("cancel");this.stop()}),Ht(this,"createEditableShape",Ut=>new Xx(Ut,this.g,this.config,this.env)),this.rubberband=null}get isDrawing(){return this.rubberband!=null}}hv.identifier="rect",hv.supports=Pt=>{const Rt=Pt.selector("FragmentSelector");return Rt==null?void 0:Rt.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};const Zx=Pt=>{const Rt=new XMLSerializer().serializeToString(Pt.documentElement).replace("<svg>",`<svg xmlns="${Zs}">`);return new DOMParser().parseFromString(Rt,"image/svg+xml").documentElement},Db=Pt=>{const Rt=Bt=>{Array.from(Bt.attributes).forEach(Ut=>{Ut.name.startsWith("on")&&Bt.removeAttribute(Ut.name)})},$t=Pt.getElementsByTagName("script");return Array.from($t).reverse().forEach(Bt=>Bt.parentNode.removeChild(Bt)),Rt(Pt),Array.from(Pt.querySelectorAll("*")).forEach(Rt),Pt},Rm=Pt=>{const Rt=Pt.selector("SvgSelector");if(Rt){const $t=new DOMParser,{value:Bt}=Rt,Ut=$t.parseFromString(Bt,"image/svg+xml"),Kt=Ut.lookupPrefix(Zs),an=Ut.lookupNamespaceURI(null);return Kt||an?Db(Ut).firstChild:Db(Zx(Ut)).firstChild}},Nb=Pt=>{const Rt=Rm(Pt),$t=document.createElementNS(Zs,"g"),Bt=Rt.cloneNode(!0);Bt.setAttribute("class","a9s-inner");const Ut=Rt.cloneNode(!0);return Ut.setAttribute("class","a9s-outer"),$t.appendChild(Ut),$t.appendChild(Bt),$t},D_=(Pt,Rt)=>{const $t=Pt.querySelector(".a9s-inner").cloneNode(!0);$t.removeAttribute("class"),$t.removeAttribute("xmlns");let Bt=$t.outerHTML||new XMLSerializer().serializeToString($t);return Bt=Bt.replace(` xmlns="${Zs}"`,""),{source:Rt==null?void 0:Rt.src,selector:{type:"SvgSelector",value:`<svg>${Bt}</svg>`}}},Kx=Pt=>{const Rt=Rm(Pt),$t=Rt.nodeName.toLowerCase();if($t==="polygon")return Jx(Rt);if($t==="circle")return Qx(Rt);if($t==="ellipse")return ew(Rt);if($t=="path")return tw(Rt);throw`Unsupported SVG shape type: ${$t}`},Jx=Pt=>{const Rt=Pt.getAttribute("points").split(" ").map(Ut=>Ut.split(",").map(Kt=>parseFloat(Kt.trim())));let $t=0,Bt=Rt.length-1;for(let Ut=0;Ut<Rt.length;Ut++)$t+=(Rt[Bt][0]+Rt[Ut][0])*(Rt[Bt][1]-Rt[Ut][1]),Bt=Ut;return Math.abs(.5*$t)},Qx=Pt=>{const Rt=Pt.getAttribute("r");return Rt*Rt*Math.PI},ew=Pt=>{const Rt=Pt.getAttribute("rx"),$t=Pt.getAttribute("ry");return Rt*$t*Math.PI},tw=Pt=>{const Rt=Pt.getAttribute("d").split("L");let $t=0;if(Rt.length>1){var Bt=Rt[Rt.length-1].trim().split(" ");let Ut=parseFloat(Bt[0]),Kt=parseFloat(Bt[1]);Bt=Rt[0].substring(1).trim().split(" ");let an=parseFloat(Bt[0]),xn=parseFloat(Bt[1]);$t+=(Ut+an)*(Kt-xn),Ut=an,Kt=xn;for(let Bn=1;Bn<Rt.length;Bn++)Bt=Rt[Bn].trim().split(" "),an=parseFloat(Bt[0]),xn=parseFloat(Bt[1]),$t+=(Ut+an)*(Kt-xn),Ut=an,Kt=xn}return Math.abs(.5*$t)};class $b{constructor(Rt,$t){Ht(this,"redraw",()=>{this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}),Ht(this,"destroy",()=>this.mask.parentNode.removeChild(this.mask)),this.w=Rt.naturalWidth,this.h=Rt.naturalHeight,this.polygon=$t,this.mask=document.createElementNS(Zs,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}get element(){return this.mask}}class nw{constructor(Rt,$t,Bt){Ht(this,"setPoints",Ut=>{const Kt=Ut.map(an=>`${an[0]},${an[1]}`).join(" ");this.outer.setAttribute("points",Kt),this.inner.setAttribute("points",Kt)}),Ht(this,"getBoundingClientRect",()=>this.outer.getBoundingClientRect()),Ht(this,"dragTo",Ut=>{this.group.style.display=null,this.mousepos=Ut;const Kt=[...this.points,Ut];this.setPoints(Kt),this.mask.redraw()}),Ht(this,"addPoint",()=>{const[Ut,Kt]=this.mousepos,an=this.points[this.points.length-1];Math.pow(Ut-an[0],2)+Math.pow(Kt-an[1],2)>4&&(this.points=[...this.points,this.mousepos],this.setPoints(this.points),this.mask.redraw())}),Ht(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.polygon=null,this.group=null}),Ht(this,"toSelection",()=>new c1(D_(this.group,this.env.image))),this.points=[Rt],this.env=Bt,this.mousepos=Rt,this.group=document.createElementNS(Zs,"g"),this.polygon=document.createElementNS(Zs,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(Zs,"polygon"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(Zs,"polygon"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new $b(Bt.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),$t.appendChild(this.group)}get element(){return this.polygon}}const N_=Pt=>{const Rt=Pt.querySelector(".a9s-inner").points,$t=[];for(let Bt=0;Bt<Rt.numberOfItems;Bt++)$t.push(Rt.getItem(Bt));return $t},rw=Pt=>Pt.querySelector(".a9s-inner").getBBox();class iw extends Ib{constructor(Rt,$t,Bt,Ut){super(Rt,$t,Bt,Ut),Ht(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Ht(this,"setPoints",Kt=>{const an=$r=>Math.round(10*$r)/10,xn=Kt.map($r=>`${an($r.x)},${an($r.y)}`).join(" ");this.shape.querySelector(".a9s-inner").setAttribute("points",xn);const Bn=this.shape.querySelector(".a9s-outer");Bn.setAttribute("points",xn),this.mask.redraw();const{x:Fn,y:Dn,width:ur,height:Pr}=Bn.getBBox();R_(this.elementGroup,Fn,Dn,ur,Pr)}),Ht(this,"onGrab",Kt=>an=>{an.button===0&&(this.grabbedElem=Kt,this.grabbedAt=this.getSVGPoint(an))}),Ht(this,"onMouseMove",Kt=>{const an=(xn,Bn,Fn)=>xn+Bn<0?-xn:xn+Bn>Fn?Fn-xn:Bn;if(this.grabbedElem){const xn=this.getSVGPoint(Kt);if(this.grabbedElem===this.shape){const{x:Bn,y:Fn,width:Dn,height:ur}=rw(this.shape),{naturalWidth:Pr,naturalHeight:$r}=this.env.image,Kr=an(Bn,xn.x-this.grabbedAt.x,Pr-Dn),gi=an(Fn,xn.y-this.grabbedAt.y,$r-ur),fi=N_(this.shape).map(Ri=>({x:Ri.x+Kr,y:Ri.y+gi}));this.grabbedAt=xn,this.setPoints(fi),fi.forEach((Ri,Ui)=>this.setHandleXY(this.handles[Ui],Ri.x,Ri.y)),this.emit("update",D_(this.shape,this.env.image))}else{const Bn=this.handles.indexOf(this.grabbedElem),Fn=N_(this.shape).map((Dn,ur)=>ur===Bn?xn:Dn);this.setPoints(Fn),this.setHandleXY(this.handles[Bn],xn.x,xn.y),this.emit("update",D_(this.shape,this.env.image))}}}),Ht(this,"onMouseUp",Kt=>{this.grabbedElem=null,this.grabbedAt=null}),Ht(this,"updateState",Kt=>{const an=Rm(Kt).getAttribute("points").split(" ").map(xn=>{const[Bn,Fn]=xn.split(",").map(Dn=>parseFloat(Dn.trim()));return{x:Bn,y:Fn}});this.setPoints(an),an.forEach((xn,Bn)=>this.setHandleXY(this.handles[Bn],xn.x,xn.y))}),Ht(this,"destroy",()=>{this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp),this.containerGroup=document.createElementNS(Zs,"g"),this.shape=Nb(Rt),this.shape.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.shape)),this.mask=new $b(Ut.image,this.shape.querySelector(".a9s-inner")),this.containerGroup.appendChild(this.mask.element),this.elementGroup=document.createElementNS(Zs,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.elementGroup.appendChild(this.shape),this.handles=N_(this.shape).map(Kt=>{const an=this.drawHandle(Kt.x,Kt.y);return an.addEventListener("mousedown",this.onGrab(an)),this.elementGroup.appendChild(an),an}),this.containerGroup.appendChild(this.elementGroup),$t.appendChild(this.containerGroup),cv(this.shape,Rt,Bt.formatter),this.grabbedElem=null,this.grabbedAt=null}get element(){return this.elementGroup}}class $_ extends M_{constructor(Rt,$t,Bt){super(Rt,$t,Bt),Ht(this,"startDrawing",(Ut,Kt,an)=>{this._isDrawing=!0,this._startOnSingleClick=an,this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp,dblClick:this.onDblClick}),this.rubberband=new nw([Ut,Kt],this.g,this.env)}),Ht(this,"stop",()=>{this.detachListeners(),this._isDrawing=!1,this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Ht(this,"onMouseMove",(Ut,Kt)=>this.rubberband.dragTo([Ut,Kt])),Ht(this,"onMouseUp",()=>{const{width:Ut,height:Kt}=this.rubberband.getBoundingClientRect(),an=this.config.minSelectionWidth||4,xn=this.config.minSelectionHeight||4;Ut>=an||Kt>=xn?this.rubberband.addPoint():this._startOnSingleClick||(this.emit("cancel"),this.stop())}),Ht(this,"onDblClick",()=>{this._isDrawing=!1;const Ut=this.rubberband.element;Ut.annotation=this.rubberband.toSelection(),this.emit("complete",Ut),this.stop()}),Ht(this,"createEditableShape",Ut=>new iw(Ut,this.g,this.config,this.env)),this._isDrawing=!1,this._startOnSingleClick=!1}get isDrawing(){return this._isDrawing}}$_.identifier="polygon",$_.supports=Pt=>{var Rt;const $t=Pt.selector("SvgSelector");if($t)return(Rt=$t.value)==null?void 0:Rt.match(/^<svg.*<polygon/g)};class ow extends Wo{constructor(Rt,$t,Bt){super(),Ht(this,"listTools",()=>this._registered.map(Ut=>Ut.identifier)),Ht(this,"registerTool",Ut=>{const Kt=Ut.identifier;this.listTools().includes(Kt)&&this.unregisterTool(Kt),this._registered.push(Ut)}),Ht(this,"unregisterTool",Ut=>this._registered=this._registered.filter(Kt=>Kt.identifier!==Ut)),Ht(this,"setCurrent",Ut=>{const Kt=typeof Ut=="string"||Ut instanceof String?this._registered.find(an=>an.identifier===Ut):Ut;this._current=new Kt(this._g,this._config,this._env),this._current.on("startSelection",an=>this.emit("startSelection",an)),this._current.on("complete",an=>this.emit("complete",an)),this._current.on("cancel",an=>this.emit("cancel",an))}),Ht(this,"forAnnotation",Ut=>{var Kt;const[an,...xn]=Ut.targets,Bn=(Kt=an.renderedVia)==null?void 0:Kt.name,Fn=Bn?this._registered.find(Dn=>Dn.identifier===Bn):this._registered.find(Dn=>Dn.supports(Ut));return Fn?new Fn(this._g,this._config,this._env):null}),this._g=Rt,this._config=$t,this._env=Bt,this._registered=[hv,$_],this.setCurrent(hv)}get current(){return this._current}}class sw{constructor(Rt,$t,Bt){this.svg=Rt.closest("svg"),this.g=document.createElementNS(Zs,"g"),this.g.setAttribute("class","a9s-crosshair");const Ut=document.createElementNS(Zs,"line"),Kt=document.createElementNS(Zs,"line");this.g.appendChild(Ut),this.g.appendChild(Kt),Rt.appendChild(this.g);const an=xn=>{const Bn=this.svg.getBoundingClientRect(),Fn=xn.clientX-Bn.x,Dn=xn.clientY-Bn.y,ur=this.svg.createSVGPoint(),{left:Pr,top:$r}=this.svg.getBoundingClientRect();return ur.x=Fn+Pr,ur.y=Dn+$r,ur.matrixTransform(Rt.getScreenCTM().inverse())};this.svg.addEventListener("mousemove",xn=>{const{x:Bn,y:Fn}=an(xn);Ut.setAttribute("x1",0),Ut.setAttribute("y1",Fn),Ut.setAttribute("x2",$t),Ut.setAttribute("y2",Fn),Kt.setAttribute("x1",Bn),Kt.setAttribute("y1",0),Kt.setAttribute("x2",Bn),Kt.setAttribute("y2",Bt)})}}const aw={FragmentSelector:L_,SvgSelector:Nb},lw={FragmentSelector:Ux,SvgSelector:Kx},Bb=Pt=>{const Rt=Pt.targets[0];if(Rt)return Array.isArray(Rt.selector)?Rt.selector[0]:Rt.selector},B_=(Pt,Rt)=>aw[Bb(Pt).type](Pt,Rt),Fb=(Pt,Rt)=>lw[Bb(Pt).type](Pt,Rt);function uw(Pt,Rt,$t,Bt,Ut){zb(Pt,Rt,$t||0,Bt||Pt.length-1,Ut||cw)}function zb(Pt,Rt,$t,Bt,Ut){for(;Bt>$t;){if(Bt-$t>600){var Kt=Bt-$t+1,an=Rt-$t+1,xn=Math.log(Kt),Bn=.5*Math.exp(2*xn/3),Fn=.5*Math.sqrt(xn*Bn*(Kt-Bn)/Kt)*(an-Kt/2<0?-1:1),Dn=Math.max($t,Math.floor(Rt-an*Bn/Kt+Fn)),ur=Math.min(Bt,Math.floor(Rt+(Kt-an)*Bn/Kt+Fn));zb(Pt,Rt,Dn,ur,Ut)}var Pr=Pt[Rt],$r=$t,Kr=Bt;for(d1(Pt,$t,Rt),Ut(Pt[Bt],Pr)>0&&d1(Pt,$t,Bt);$r<Kr;){for(d1(Pt,$r,Kr),$r++,Kr--;Ut(Pt[$r],Pr)<0;)$r++;for(;Ut(Pt[Kr],Pr)>0;)Kr--}Ut(Pt[$t],Pr)===0?d1(Pt,$t,Kr):(Kr++,d1(Pt,Kr,Bt)),Kr<=Rt&&($t=Kr+1),Rt<=Kr&&(Bt=Kr-1)}}function d1(Pt,Rt,$t){var Bt=Pt[Rt];Pt[Rt]=Pt[$t],Pt[$t]=Bt}function cw(Pt,Rt){return Pt<Rt?-1:Pt>Rt?1:0}class hw{constructor(Rt=9){this._maxEntries=Math.max(4,Rt),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(Rt){let $t=this.data;const Bt=[];if(!fv(Rt,$t))return Bt;const Ut=this.toBBox,Kt=[];for(;$t;){for(let an=0;an<$t.children.length;an++){const xn=$t.children[an],Bn=$t.leaf?Ut(xn):xn;fv(Rt,Bn)&&($t.leaf?Bt.push(xn):z_(Rt,Bn)?this._all(xn,Bt):Kt.push(xn))}$t=Kt.pop()}return Bt}collides(Rt){let $t=this.data;if(!fv(Rt,$t))return!1;const Bt=[];for(;$t;){for(let Ut=0;Ut<$t.children.length;Ut++){const Kt=$t.children[Ut],an=$t.leaf?this.toBBox(Kt):Kt;if(fv(Rt,an)){if($t.leaf||z_(Rt,an))return!0;Bt.push(Kt)}}$t=Bt.pop()}return!1}load(Rt){if(!(Rt&&Rt.length))return this;if(Rt.length<this._minEntries){for(let Bt=0;Bt<Rt.length;Bt++)this.insert(Rt[Bt]);return this}let $t=this._build(Rt.slice(),0,Rt.length-1,0);if(!this.data.children.length)this.data=$t;else if(this.data.height===$t.height)this._splitRoot(this.data,$t);else{if(this.data.height<$t.height){const Bt=this.data;this.data=$t,$t=Bt}this._insert($t,this.data.height-$t.height-1,!0)}return this}insert(Rt){return Rt&&this._insert(Rt,this.data.height-1),this}clear(){return this.data=Nm([]),this}remove(Rt,$t){if(!Rt)return this;let Bt=this.data;const Ut=this.toBBox(Rt),Kt=[],an=[];let xn,Bn,Fn;for(;Bt||Kt.length;){if(Bt||(Bt=Kt.pop(),Bn=Kt[Kt.length-1],xn=an.pop(),Fn=!0),Bt.leaf){const Dn=dw(Rt,Bt.children,$t);if(Dn!==-1)return Bt.children.splice(Dn,1),Kt.push(Bt),this._condense(Kt),this}!Fn&&!Bt.leaf&&z_(Bt,Ut)?(Kt.push(Bt),an.push(xn),xn=0,Bn=Bt,Bt=Bt.children[0]):Bn?(xn++,Bt=Bn.children[xn],Fn=!1):Bt=null}return this}toBBox(Rt){return Rt}compareMinX(Rt,$t){return Rt.minX-$t.minX}compareMinY(Rt,$t){return Rt.minY-$t.minY}toJSON(){return this.data}fromJSON(Rt){return this.data=Rt,this}_all(Rt,$t){const Bt=[];for(;Rt;)Rt.leaf?$t.push(...Rt.children):Bt.push(...Rt.children),Rt=Bt.pop();return $t}_build(Rt,$t,Bt,Ut){const Kt=Bt-$t+1;let an=this._maxEntries,xn;if(Kt<=an)return xn=Nm(Rt.slice($t,Bt+1)),Dm(xn,this.toBBox),xn;Ut||(Ut=Math.ceil(Math.log(Kt)/Math.log(an)),an=Math.ceil(Kt/Math.pow(an,Ut-1))),xn=Nm([]),xn.leaf=!1,xn.height=Ut;const Bn=Math.ceil(Kt/an),Fn=Bn*Math.ceil(Math.sqrt(an));Hb(Rt,$t,Bt,Fn,this.compareMinX);for(let Dn=$t;Dn<=Bt;Dn+=Fn){const ur=Math.min(Dn+Fn-1,Bt);Hb(Rt,Dn,ur,Bn,this.compareMinY);for(let Pr=Dn;Pr<=ur;Pr+=Bn){const $r=Math.min(Pr+Bn-1,ur);xn.children.push(this._build(Rt,Pr,$r,Ut-1))}}return Dm(xn,this.toBBox),xn}_chooseSubtree(Rt,$t,Bt,Ut){for(;Ut.push($t),!($t.leaf||Ut.length-1===Bt);){let Kt=1/0,an=1/0,xn;for(let Bn=0;Bn<$t.children.length;Bn++){const Fn=$t.children[Bn],Dn=F_(Fn),ur=gw(Rt,Fn)-Dn;ur<an?(an=ur,Kt=Dn<Kt?Dn:Kt,xn=Fn):ur===an&&Dn<Kt&&(Kt=Dn,xn=Fn)}$t=xn||$t.children[0]}return $t}_insert(Rt,$t,Bt){const Ut=Bt?Rt:this.toBBox(Rt),Kt=[],an=this._chooseSubtree(Ut,this.data,$t,Kt);for(an.children.push(Rt),p1(an,Ut);$t>=0&&Kt[$t].children.length>this._maxEntries;)this._split(Kt,$t),$t--;this._adjustParentBBoxes(Ut,Kt,$t)}_split(Rt,$t){const Bt=Rt[$t],Ut=Bt.children.length,Kt=this._minEntries;this._chooseSplitAxis(Bt,Kt,Ut);const an=this._chooseSplitIndex(Bt,Kt,Ut),xn=Nm(Bt.children.splice(an,Bt.children.length-an));xn.height=Bt.height,xn.leaf=Bt.leaf,Dm(Bt,this.toBBox),Dm(xn,this.toBBox),$t?Rt[$t-1].children.push(xn):this._splitRoot(Bt,xn)}_splitRoot(Rt,$t){this.data=Nm([Rt,$t]),this.data.height=Rt.height+1,this.data.leaf=!1,Dm(this.data,this.toBBox)}_chooseSplitIndex(Rt,$t,Bt){let Ut,Kt=1/0,an=1/0;for(let xn=$t;xn<=Bt-$t;xn++){const Bn=f1(Rt,0,xn,this.toBBox),Fn=f1(Rt,xn,Bt,this.toBBox),Dn=mw(Bn,Fn),ur=F_(Bn)+F_(Fn);Dn<Kt?(Kt=Dn,Ut=xn,an=ur<an?ur:an):Dn===Kt&&ur<an&&(an=ur,Ut=xn)}return Ut||Bt-$t}_chooseSplitAxis(Rt,$t,Bt){const Ut=Rt.leaf?this.compareMinX:fw,Kt=Rt.leaf?this.compareMinY:pw,an=this._allDistMargin(Rt,$t,Bt,Ut),xn=this._allDistMargin(Rt,$t,Bt,Kt);an<xn&&Rt.children.sort(Ut)}_allDistMargin(Rt,$t,Bt,Ut){Rt.children.sort(Ut);const Kt=this.toBBox,an=f1(Rt,0,$t,Kt),xn=f1(Rt,Bt-$t,Bt,Kt);let Bn=dv(an)+dv(xn);for(let Fn=$t;Fn<Bt-$t;Fn++){const Dn=Rt.children[Fn];p1(an,Rt.leaf?Kt(Dn):Dn),Bn+=dv(an)}for(let Fn=Bt-$t-1;Fn>=$t;Fn--){const Dn=Rt.children[Fn];p1(xn,Rt.leaf?Kt(Dn):Dn),Bn+=dv(xn)}return Bn}_adjustParentBBoxes(Rt,$t,Bt){for(let Ut=Bt;Ut>=0;Ut--)p1($t[Ut],Rt)}_condense(Rt){for(let $t=Rt.length-1,Bt;$t>=0;$t--)Rt[$t].children.length===0?$t>0?(Bt=Rt[$t-1].children,Bt.splice(Bt.indexOf(Rt[$t]),1)):this.clear():Dm(Rt[$t],this.toBBox)}}function dw(Pt,Rt,$t){if(!$t)return Rt.indexOf(Pt);for(let Bt=0;Bt<Rt.length;Bt++)if($t(Pt,Rt[Bt]))return Bt;return-1}function Dm(Pt,Rt){f1(Pt,0,Pt.children.length,Rt,Pt)}function f1(Pt,Rt,$t,Bt,Ut){Ut||(Ut=Nm(null)),Ut.minX=1/0,Ut.minY=1/0,Ut.maxX=-1/0,Ut.maxY=-1/0;for(let Kt=Rt;Kt<$t;Kt++){const an=Pt.children[Kt];p1(Ut,Pt.leaf?Bt(an):an)}return Ut}function p1(Pt,Rt){return Pt.minX=Math.min(Pt.minX,Rt.minX),Pt.minY=Math.min(Pt.minY,Rt.minY),Pt.maxX=Math.max(Pt.maxX,Rt.maxX),Pt.maxY=Math.max(Pt.maxY,Rt.maxY),Pt}function fw(Pt,Rt){return Pt.minX-Rt.minX}function pw(Pt,Rt){return Pt.minY-Rt.minY}function F_(Pt){return(Pt.maxX-Pt.minX)*(Pt.maxY-Pt.minY)}function dv(Pt){return Pt.maxX-Pt.minX+(Pt.maxY-Pt.minY)}function gw(Pt,Rt){return(Math.max(Rt.maxX,Pt.maxX)-Math.min(Rt.minX,Pt.minX))*(Math.max(Rt.maxY,Pt.maxY)-Math.min(Rt.minY,Pt.minY))}function mw(Pt,Rt){const $t=Math.max(Pt.minX,Rt.minX),Bt=Math.max(Pt.minY,Rt.minY),Ut=Math.min(Pt.maxX,Rt.maxX),Kt=Math.min(Pt.maxY,Rt.maxY);return Math.max(0,Ut-$t)*Math.max(0,Kt-Bt)}function z_(Pt,Rt){return Pt.minX<=Rt.minX&&Pt.minY<=Rt.minY&&Rt.maxX<=Pt.maxX&&Rt.maxY<=Pt.maxY}function fv(Pt,Rt){return Rt.minX<=Pt.maxX&&Rt.minY<=Pt.maxY&&Rt.maxX>=Pt.minX&&Rt.maxY>=Pt.minY}function Nm(Pt){return{children:Pt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Hb(Pt,Rt,$t,Bt,Ut){const Kt=[Rt,$t];for(;Kt.length;){if($t=Kt.pop(),Rt=Kt.pop(),$t-Rt<=Bt)continue;const an=Rt+Math.ceil(($t-Rt)/Bt/2)*Bt;uw(Pt,an,Rt,$t,Ut),Kt.push(Rt,an,an,$t)}}const Vb=Pt=>{const Rt=B_(Pt),$t=document.createElementNS(Zs,"svg");$t.style.position="absolute",$t.style.opacity=0,$t.style.top=0,$t.style.left=0,$t.appendChild(Rt),document.body.appendChild($t);const{x:Bt,y:Ut,width:Kt,height:an}=Rt.getBBox();return document.body.removeChild($t),{minX:Bt,minY:Ut,maxX:Bt+Kt,maxY:Ut+an}};class yw{constructor(Rt){Ht(this,"getAnnotationAt",($t,Bt,Ut)=>{const Kt=Ut?5/Ut:5,an=this.spatial_index.search({minX:$t-Kt,minY:Bt-Kt,maxX:$t+Kt,maxY:Bt+Kt}).map(xn=>xn.annotation);if(an.length>0)return an.sort((xn,Bn)=>Fb(xn,this.env.image)-Fb(Bn,this.env.image)),an[0]}),Ht(this,"getAnnotationsIntersecting",$t=>this.spatial_index.search($t).map(Bt=>Bt.annotation)),Ht(this,"insert",$t=>{(Array.isArray($t)?$t:[$t]).forEach(Bt=>{this.spatial_index.insert(Nt(Mt({},Vb(Bt)),{annotation:Bt}))})}),Ht(this,"remove",$t=>{const Bt=Nt(Mt({},Vb($t)),{annotation:$t});this.spatial_index.remove(Bt,(Ut,Kt)=>Ut.annotation.id===Kt.annotation.id)}),this.env=Rt,this.spatial_index=new hw}}const vw=(Pt,Rt)=>{const $t=A_(Rt,".a9s-annotation")?Rt:Rt.querySelector(".a9s-annotation"),{canvas:Bt}=Pt.drawer,Ut=Bt.getBoundingClientRect(),Kt=Bt.width/Ut.width,an=Bt.height/Ut.height,xn=$t.getBoundingClientRect(),Bn=xn.x-Ut.x,Fn=xn.y-Ut.y,{width:Dn,height:ur}=xn,Pr=document.createElement("CANVAS"),$r=Pr.getContext("2d");Pr.width=Dn,Pr.height=ur,$r.drawImage(Bt,Bn*Kt,Fn*an,Dn*Kt,ur*an,0,0,Dn,ur);const Kr=Pt.viewport.viewportToImageCoordinates(xn.x,xn.y),gi=Pt.viewport.viewportToImageZoom(Pt.viewport.getZoom());return{snippet:Pr,transform:fi=>{const Ri=Kr.x+fi[0]/Kt/gi,Ui=Kr.y+fi[1]/an/gi;return[Ri,Ui]}}},_w=I_();class Ub extends Wo{constructor(Rt){super(),Ht(this,"_getShapeAt",Bt=>{const Ut=Bn=>{const Fn=this.svg.createSVGPoint();if(window.TouchEvent&&Bn instanceof TouchEvent){const Dn=this.svg.getBoundingClientRect(),ur=Bn.touches[0],Pr=ur.clientX-Dn.x,$r=ur.clientY-Dn.y,{left:Kr,top:gi}=this.svg.getBoundingClientRect();return Fn.x=Pr+Kr,Fn.y=$r+gi,Fn.matrixTransform(this.g.getScreenCTM().inverse())}else return Fn.x=Bn.offsetX,Fn.y=Bn.offsetY,Fn.matrixTransform(this.g.getCTM().inverse())},{x:Kt,y:an}=Ut(Bt),xn=this.store.getAnnotationAt(Kt,an,this.currentScale());if(xn)return this.findShape(xn)}),Ht(this,"_initDrawingTools",Bt=>{this.tools=new ow(this.g,this.config,this.env),this.tools.on("complete",this.onDrawingComplete);let Ut=!1;this.mouseTracker=new tn.default.MouseTracker({element:this.svg,pressHandler:Kt=>{this.tools.current.isDrawing||(this.tools.current.start(Kt.originalEvent,this.drawOnSingleClick&&!this.hoveredShape),Bt||this.scaleTool(this.tools.current))},moveHandler:Kt=>{if(this.tools.current.isDrawing){const{x:an,y:xn}=this.tools.current.getSVGPoint(Kt.originalEvent);this.tools.current.onMouseMove(an,xn,Kt.originalEvent),Ut||(this.emit("startSelection",{x:an,y:xn}),Ut=!0)}},releaseHandler:Kt=>{if(this.tools.current.isDrawing){const{x:an,y:xn}=this.tools.current.getSVGPoint(Kt.originalEvent);this.tools.current.onMouseUp(an,xn,Kt.originalEvent)}Ut=!1}}).setTracking(!1),this.onKeyDown&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyUp&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyDown=Kt=>{Kt.which===16&&!this.selectedShape&&this.mouseTracker.setTracking(!this.readOnly)},this.onKeyUp=Kt=>{Kt.which===16&&!this.tools.current.isDrawing&&this.mouseTracker.setTracking(!1)},document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}),Ht(this,"_initMouseEvents",()=>{let Bt=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom;this.svg.addEventListener("mousemove",an=>{var xn,Bn;if(!((xn=this.tools)!=null&&xn.current.isDrawing)&&!an.target.closest(".a9s-annotation.editable.selected")){const Fn=this._getShapeAt(an);if((Fn==null?void 0:Fn.annotation)!==((Bn=this.hoveredShape)==null?void 0:Bn.annotation)){if(this.hoveredShape){this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=Bt;const Dn=this.hoveredShape.element||this.hoveredShape;zx(Dn,"hover"),this.emit("mouseLeaveAnnotation",this.hoveredShape.annotation,this.hoveredShape)}Fn&&(Bt=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom,this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=!1,bp(Fn,"hover"),this.emit("mouseEnterAnnotation",Fn.annotation,Fn))}this.hoveredShape=Fn}});let Ut=null;new tn.default.MouseTracker({element:this.viewer.canvas,pressHandler:()=>{Ut=new Date().getTime()}}),this.svg.addEventListener("mousedown",()=>{Ut=new Date().getTime()});const Kt=an=>{var xn;if(!(((xn=this.tools.current)==null?void 0:xn.isDrawing)||this.disableSelect)&&new Date().getTime()-Ut<250){const Bn=an.target.closest(".a9s-annotation.editable.selected")?this.selectedShape:this._getShapeAt(an);Bn?this.selectShape(Bn):Bn||(this.deselect(),this.emit("select",{}))}this.disableSelect&&this.emit("clickAnnotation",this.hoveredShape.annotation,this.hoveredShape)};this.svg.addEventListener("click",Kt),this.svg.addEventListener("touchstart",Kt)}),Ht(this,"_refreshNonScalingAnnotations",()=>{const Bt=this.currentScale();Array.from(this.svg.querySelectorAll(".a9s-non-scaling")).forEach(Ut=>Ut.setAttribute("transform",`scale(${1/Bt})`))}),Ht(this,"addAnnotation",(Bt,Ut)=>{const Kt=Ut||this.g,an=B_(Bt,this.env.image);return bp(an,"a9s-annotation"),an.setAttribute("data-id",Bt.id),an.annotation=Bt,Kt.appendChild(an),cv(an,Bt,this.formatter),this.scaleFormatterElements(an),an}),Ht(this,"addDrawingTool",Bt=>this.tools.registerTool(Bt)),Ht(this,"addOrUpdateAnnotation",(Bt,Ut)=>{var Kt,an;(((Kt=this.selectedShape)==null?void 0:Kt.annotation)===Bt||((an=this.selectedShape)==null?void 0:an.annotation)==Ut)&&this.deselect(),Ut&&this.removeAnnotation(Bt),this.removeAnnotation(Bt);const xn=this.addAnnotation(Bt);A_(xn,"a9s-non-scaling")&&xn.setAttribute("transform",`scale(${1/this.currentScale()})`),this.store.insert(Bt)}),Ht(this,"currentScale",()=>{const Bt=this.viewer.viewport.getContainerSize().x;return this.viewer.viewport.getZoom(!0)*Bt/this.viewer.world.getContentFactor()}),Ht(this,"deselect",()=>{var Bt;if((Bt=this.tools)==null||Bt.current.stop(),this.selectedShape){const{annotation:Ut}=this.selectedShape;if(this.selectedShape.destroy&&(this.selectedShape.mouseTracker.destroy(),this.selectedShape.destroy(),!Ut.isSelection)){const Kt=this.addAnnotation(Ut);A_(Kt,"a9s-non-scaling")&&Kt.setAttribute("transform",`scale(${1/this.currentScale()})`)}this.selectedShape=null}}),Ht(this,"destroy",()=>{this.deselect(),this.svg.parentNode.removeChild(this.svg)}),Ht(this,"findShape",Bt=>{const Ut=Bt!=null&&Bt.id?Bt.id:Bt;return this.g.querySelector(`.a9s-annotation[data-id="${Ut}"]`)}),Ht(this,"fitBounds",(Bt,Ut)=>{const Kt=this.findShape(Bt);if(Kt){const{x:an,y:xn,width:Bn,height:Fn}=Kt.getBBox(),Dn=this.viewer.viewport.imageToViewportRectangle(an,xn,Bn,Fn);this.viewer.viewport.fitBounds(Dn,Ut)}}),Ht(this,"getAnnotations",()=>Array.from(this.g.querySelectorAll(".a9s-annotation")).map(Bt=>Bt.annotation)),Ht(this,"getSelectedImageSnippet",()=>{var Bt;if(this.selectedShape){const Ut=(Bt=this.selectedShape.element)!=null?Bt:this.selectedShape;return vw(this.viewer,Ut)}}),Ht(this,"init",Bt=>{this.deselect(),Array.from(this.g.querySelectorAll(".a9s-annotation")).forEach(Ut=>this.g.removeChild(Ut)),console.time("Took"),console.log("Drawing..."),this.loaded||(this.g.style.display="none"),Bt.forEach(Ut=>this.addAnnotation(Ut)),console.log("Indexing..."),this.store.insert(Bt),console.timeEnd("Took"),this.resize()}),Ht(this,"listDrawingTools",()=>this.tools.listTools()),Ht(this,"overrideId",(Bt,Ut)=>{const Kt=this.findShape(Bt);Kt.setAttribute("data-id",Ut);const{annotation:an}=Kt,xn=an.clone({id:Ut});return Kt.annotation=xn,this.store.remove(an),this.store.insert(xn),xn}),Ht(this,"panTo",(Bt,Ut)=>{const Kt=this.findShape(Bt);if(Kt){const{top:an,left:xn,width:Bn,height:Fn}=Kt.getBoundingClientRect(),Dn=xn+Bn/2+window.scrollX,ur=an+Fn/2+window.scrollY,Pr=this.viewer.viewport.windowToViewportCoordinates(new tn.default.Point(Dn,ur));this.viewer.viewport.panTo(Pr,Ut)}}),Ht(this,"removeAnnotation",Bt=>{var Ut,Kt;const an=Bt.type?Bt.id:Bt;((Ut=this.selectedShape)==null?void 0:Ut.annotation.id)===an&&this.deselect();const xn=this.findShape(Bt);if(xn){const{annotation:Bn}=xn;((Kt=this.selectedShape)==null?void 0:Kt.annotation)===Bn&&this.deselect(),xn.parentNode.removeChild(xn),this.store.remove(Bn)}}),Ht(this,"removeDrawingTool",Bt=>{var Ut;return(Ut=this.tools)==null?void 0:Ut.unregisterTool(Bt)}),Ht(this,"scaleFormatterElements",Bt=>{const Ut=1/this.currentScale();if(Bt){const Kt=Bt.querySelector(".a9s-formatter-el");Kt&&Kt.firstChild.setAttribute("transform",`scale(${Ut})`)}else Array.from(this.g.querySelectorAll(".a9s-formatter-el")).forEach(Kt=>Kt.firstChild.setAttribute("transform",`scale(${Ut})`))}),Ht(this,"scaleTool",Bt=>{if(Bt){const Ut=1/this.currentScale();Bt.scale=Ut,Bt.onScaleChanged&&Bt.onScaleChanged(Ut)}}),Ht(this,"selectAnnotation",(Bt,Ut)=>{this.selectedShape&&this.deselect();const Kt=this.findShape(Bt);if(Kt){this.selectShape(Kt,Ut);const an=this.selectedShape.element?this.selectedShape.element:this.selectedShape;return{annotation:Kt.annotation,element:an}}else this.deselect()}),Ht(this,"selectShape",(Bt,Ut)=>{var Kt;if(!Ut&&!Bt.annotation.isSelection&&this.emit("clickAnnotation",Bt.annotation,Bt),((Kt=this.selectedShape)==null?void 0:Kt.annotation)===Bt.annotation)return;this.selectedShape&&this.selectedShape.annotation!==Bt.annotation&&this.deselect();const{annotation:an}=Bt;if(this.readOnly||an.readOnly||this.headless)this.selectedShape=Bt,Ut||this.emit("select",{annotation:an,element:Bt,skipEvent:Ut});else{const xn=this.tools.forAnnotation(an);if(xn){setTimeout(()=>{Bt.parentNode.removeChild(Bt),Ut||this.emit("select",{annotation:an,element:this.selectedShape.element})},1),this.selectedShape=xn.createEditableShape(an),this.scaleTool(this.selectedShape),this.scaleFormatterElements(this.selectedShape.element),this.selectedShape.element.annotation=an;const Bn=new tn.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",()=>{this.hoveredShape=this.selectedShape,Bn.setTracking(!0)}),this.selectedShape.element.addEventListener("mouseleave",()=>{this.hoveredShape=null,Bn.setTracking(!1)}),this.selectedShape.mouseTracker=Bn,this.selectedShape.on("update",Fn=>this.emit("updateTarget",this.selectedShape.element,Fn))}else this.selectedShape=Bt,Ut||this.emit("select",{annotation:an,element:this.selectedShape})}}),Ht(this,"setDrawingEnabled",Bt=>{var Ut;return(Ut=this.mouseTracker)==null?void 0:Ut.setTracking(Bt&&!this.readOnly)}),Ht(this,"setDrawingTool",Bt=>{var Ut;this.tools&&((Ut=this.tools.current)==null||Ut.stop(),this.tools.setCurrent(Bt))}),Ht(this,"setVisible",Bt=>{Bt?this.svg.style.display=null:(this.deselect(),this.svg.style.display="none")}),Ht(this,"stopDrawing",()=>{var Bt,Ut;return(Ut=(Bt=this.tools)==null?void 0:Bt.current)==null?void 0:Ut.stop()}),this.viewer=Rt.viewer,this.config=Rt.config,this.env=Rt.env,this.readOnly=Rt.config.readOnly,this.headless=Rt.config.headless,this.formatter=Rt.config.formatter,this.disableSelect=Rt.disableSelect,this.drawOnSingleClick=Rt.config.drawOnSingleClick,this.svg=document.createElementNS(Zs,"svg"),_w?(this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),Gx(this.svg)):this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),this.g=document.createElementNS(Zs,"g"),this.svg.appendChild(this.g),this.viewer.canvas.appendChild(this.svg),this.viewer.addHandler("animation",()=>this.resize()),this.viewer.addHandler("rotate",()=>this.resize()),this.viewer.addHandler("resize",()=>this.resize()),this.viewer.addHandler("flip",()=>this.resize()),this.loaded=!1;const $t=()=>{const{x:Bt,y:Ut}=this.viewer.world.getItemAt(0).source.dimensions;this.env.image={src:this.viewer.world.getItemAt(0).source["@id"]||new URL(this.viewer.world.getItemAt(0).source.url,document.baseURI).href,naturalWidth:Bt,naturalHeight:Ut},Rt.config.crosshair&&(this.crosshair=new sw(this.g,Bt,Ut),bp(this.svg,"has-crosshair")),this.loaded=!0,this.g.style.display="inline",this.resize()};this.viewer.addHandler("open",$t),this.viewer.world.addHandler("add-item",$t),this.viewer.world.getItemAt(0)&&$t(),this.store=new yw(this.env),this.selectedShape=null,this.hoveredShape=null,this._initMouseEvents()}resize(){var Rt;const $t=this.viewer.viewport.getFlip(),Bt=this.viewer.viewport.pixelFromPoint(new tn.default.Point(0,0),!0);$t&&(Bt.x=this.viewer.viewport._containerInnerSize.x-Bt.x);const Ut=this.currentScale(),Kt=$t?-Ut:Ut,an=this.viewer.viewport.getRotation();this.g.setAttribute("transform",`translate(${Bt.x}, ${Bt.y}) scale(${Kt}, ${Ut}) rotate(${an})`),this._refreshNonScalingAnnotations(),this.scaleFormatterElements(),this.selectedShape&&(this.selectedShape.element?(this.scaleTool(this.selectedShape),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape)),(Rt=this.tools)!=null&&Rt.current.isDrawing&&this.scaleTool(this.tools.current)}}class bw extends Ub{constructor(Rt){super(Rt),Ht(this,"onDrawingComplete",$t=>{this.selectShape($t),this.emit("createSelection",$t.annotation),this.mouseTracker.setTracking(!1)}),this._initDrawingTools()}}const H_=Pt=>{const Rt=Pt.viewport.viewportToImageRectangle(Pt.viewport.getBounds(!0)),$t=Pt.viewport.getContainerSize().x,Bt=Pt.viewport.getZoom(!0)*$t/Pt.world.getContentFactor();return{extent:Rt,scale:Bt}},xw=Pt=>{var Rt;const $t=Pt.targets[0];return $t?Array.isArray($t.selector)?$t.selector[0].type:(Rt=$t.selector)==null?void 0:Rt.type:null},jb=(Pt,Rt)=>{const{extent:$t,scale:Bt}=H_(Pt),{selector:Ut}=Rt,Kt=Cg.create({target:Rt});if(Ut.type==="SvgSelector"){const an=Rm(Kt),xn=an.nodeName.toLowerCase();let Bn=null;if(xn==="polygon")Bn=ww(an,$t,Bt);else if(xn==="circle")Bn=Ew(an,$t,Bt);else if(xn==="ellipse")Bn=Sw(an,$t,Bt);else if(xn==="path")Bn=Cw(an,$t,Bt);else throw`Unsupported SVG shape type: ${xn}`;let Fn=Bn.outerHTML||new XMLSerializer().serializeToString(Bn);return Fn=Fn.replace(` xmlns="${Zs}"`,""),Nt(Mt({},Rt),{selector:{type:"SvgSelector",value:`<svg>${Fn}</svg>`}})}else if(Ut.type==="FragmentSelector"){const{x:an,y:xn,w:Bn,h:Fn}=Tg(Kt),Dn=$t.x+an/Bt,ur=$t.y+xn/Bt,Pr=Bn/Bt,$r=Fn/Bt;return h1(Dn,ur,Pr,$r)}else throw`Unsupported selector type: ${Ut.type}`},ww=(Pt,Rt,$t)=>{const Bt=Array.from(Pt.points).map(Ut=>{const Kt=Rt.x+Ut.x/$t,an=Rt.y+Ut.y/$t;return Kt+","+an}).join(" ");return Pt.setAttribute("points",Bt),Pt},Ew=(Pt,Rt,$t)=>{const Bt=parseFloat(Pt.getAttribute("cx")),Ut=parseFloat(Pt.getAttribute("cy")),Kt=parseFloat(Pt.getAttribute("r"));return Pt.setAttribute("cx",Rt.x+Bt/$t),Pt.setAttribute("cy",Rt.y+Ut/$t),Pt.setAttribute("r",Kt/$t),Pt},Sw=(Pt,Rt,$t)=>{const Bt=parseFloat(Pt.getAttribute("cx")),Ut=parseFloat(Pt.getAttribute("cy")),Kt=parseFloat(Pt.getAttribute("rx")),an=parseFloat(Pt.getAttribute("ry"));return Pt.setAttribute("cx",Rt.x+Bt/$t),Pt.setAttribute("cy",Rt.y+Ut/$t),Pt.setAttribute("rx",Kt/$t),Pt.setAttribute("ry",an/$t),Pt},Cw=(Pt,Rt,$t)=>{const Bt=Pt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Kt=Ut.substring(0,1);if(Kt.toLowerCase()==="z")return Kt;{const an=Ut.substring(1).split(" ").map(Dn=>parseFloat(Dn.trim())),xn=Kt===Kt.toUpperCase(),Bn=xn?Rt.x+an[0]/$t:an[0]/$t,Fn=xn?Rt.y+an[1]/$t:an[1]/$t;return Kt+" "+Bn+" "+Fn}}).join(" ");return Pt.setAttribute("d",Bt),Pt},Wb=(Pt,Rt)=>{const{extent:$t,scale:Bt}=H_(Pt),Ut=Rt.selector("FragmentSelector");if(Rt.selector("SvgSelector")){const Kt=Rm(Rt),an=Kt.nodeName.toLowerCase();let xn=null;if(an==="polygon")xn=Tw(Kt,$t,Bt);else if(an==="circle")xn=kw(Kt,$t,Bt);else if(an==="ellipse")xn=Aw(Kt,$t,Bt);else if(an==="path")xn=Pw(Kt,$t,Bt);else throw`Unsupported SVG shape type: ${an}`;let Bn=xn.outerHTML||new XMLSerializer().serializeToString(xn);Bn=Bn.replace(` xmlns="${Zs}"`,"");const Fn={selector:{type:"SvgSelector",value:`<svg>${Bn}</svg>`}};return Rt.clone({target:Fn})}else if(Ut){const{x:Kt,y:an,w:xn,h:Bn}=Tg(Rt),Fn=(Kt-$t.x)*Bt,Dn=(an-$t.y)*Bt,ur=h1(Fn,Dn,xn*Bt,Bn*Bt);return Rt.clone({target:ur})}},Tw=(Pt,Rt,$t)=>{const Bt=Array.from(Pt.points).map(Ut=>{const Kt=$t*(Ut.x-Rt.x),an=$t*(Ut.y-Rt.y);return Kt+","+an}).join(" ");return Pt.setAttribute("points",Bt),Pt},kw=(Pt,Rt,$t)=>{const Bt=Pt.getAttribute("cx"),Ut=Pt.getAttribute("cy"),Kt=Pt.getAttribute("r");return Pt.setAttribute("cx",$t*(Bt-Rt.x)),Pt.setAttribute("cy",$t*(Ut-Rt.y)),Pt.setAttribute("r",Kt*$t),Pt},Aw=(Pt,Rt,$t)=>{const Bt=Pt.getAttribute("cx"),Ut=Pt.getAttribute("cy"),Kt=Pt.getAttribute("rx"),an=Pt.getAttribute("ry");return Pt.setAttribute("cx",$t*(Bt-Rt.x)),Pt.setAttribute("cy",$t*(Ut-Rt.y)),Pt.setAttribute("rx",Kt*$t),Pt.setAttribute("ry",an*$t),Pt},Pw=(Pt,Rt,$t)=>{const Bt=Pt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Kt=Ut.substring(0,1);if(Kt.toLowerCase()==="z")return Kt;{const an=Ut.substring(1).split(" ").filter(Dn=>Dn).map(Dn=>parseFloat(Dn.trim())),xn=Kt===Kt.toUpperCase(),Bn=xn?$t*(an[0]-Rt.x):$t*an[0],Fn=xn?$t*(an[1]-Rt.y):$t*an[1];return Kt+" "+Bn+" "+Fn}}).join(" ");return Pt.setAttribute("d",Bt),Pt},Gb=(Pt,Rt)=>{const{extent:$t,scale:Bt}=H_(Pt),Ut=xw(Rt.annotation);if(Ut==="FragmentSelector")Lw(Rt,$t,Bt);else if(Ut==="SvgSelector")Ow(Rt,$t,Bt);else throw`Unsupported selector type type: ${Ut}`},Lw=(Pt,Rt,$t)=>{const{x:Bt,y:Ut,w:Kt,h:an}=Tg(Pt.annotation),xn=Pt.querySelector(".a9s-outer"),Bn=Pt.querySelector(".a9s-inner"),Fn=$t*(Bt-Rt.x),Dn=$t*(Ut-Rt.y);Kt===0&&an===0?[xn,Bn].forEach(ur=>{ur.setAttribute("cx",Fn),ur.setAttribute("cy",Dn)}):[xn,Bn].forEach(ur=>{ur.setAttribute("x",Fn),ur.setAttribute("y",Dn),ur.setAttribute("width",Kt*$t),ur.setAttribute("height",an*$t)})},Ow=(Pt,Rt,$t)=>{const Bt=Rm(Pt.annotation),Ut=Bt.nodeName.toLowerCase();if(Ut==="polygon")Iw(Pt,Bt,Rt,$t);else if(Ut==="circle")Mw(Pt,Bt,Rt,$t);else if(Ut==="ellipse")Rw(Pt,Bt,Rt,$t);else if(Ut==="path")Dw(Pt,Bt,Rt,$t);else throw`Unsupported SVG shape type: ${Ut}`},Iw=(Pt,Rt,$t,Bt)=>{const Ut=Array.from(Rt.points).map(Kt=>{const an=Bt*(Kt.x-$t.x),xn=Bt*(Kt.y-$t.y);return an+","+xn}).join(" ");Pt.querySelector(".a9s-outer").setAttribute("points",Ut),Pt.querySelector(".a9s-inner").setAttribute("points",Ut)},Mw=(Pt,Rt,$t,Bt)=>{const Ut=Bt*(Rt.getAttribute("cx")-$t.x),Kt=Bt*(Rt.getAttribute("cy")-$t.y),an=Bt*Rt.getAttribute("r"),xn=Pt.querySelector(".a9s-outer");xn.setAttribute("cx",Ut),xn.setAttribute("cy",Kt),xn.setAttribute("r",an);const Bn=Pt.querySelector(".a9s-inner");Bn.setAttribute("cx",Ut),Bn.setAttribute("cy",Kt),Bn.setAttribute("r",an)},Rw=(Pt,Rt,$t,Bt)=>{const Ut=Bt*(Rt.getAttribute("cx")-$t.x),Kt=Bt*(Rt.getAttribute("cy")-$t.y),an=Bt*Rt.getAttribute("rx"),xn=Bt*Rt.getAttribute("ry"),Bn=Pt.querySelector(".a9s-outer");Bn.setAttribute("cx",Ut),Bn.setAttribute("cy",Kt),Bn.setAttribute("rx",an),Bn.setAttribute("ry",xn);const Fn=Pt.querySelector(".a9s-inner");Fn.setAttribute("cx",Ut),Fn.setAttribute("cy",Kt),Fn.setAttribute("rx",an),Fn.setAttribute("ry",xn)},Dw=(Pt,Rt,$t,Bt)=>{const Ut=Rt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Kt=>Kt.trim()).map(Kt=>{const an=Kt.substring(0,1);if(an.toLowerCase()==="z")return an;{const xn=Kt.substring(1).split(" ").filter(ur=>ur).map(ur=>parseFloat(ur.trim())),Bn=an===an.toUpperCase(),Fn=Bn?Bt*(xn[0]-$t.x):Bt*xn[0],Dn=Bn?Bt*(xn[1]-$t.y):Bt*xn[1];return an+" "+Fn+" "+Dn}}).join(" ");Pt.querySelector(".a9s-inner").setAttribute("d",Ut),Pt.querySelector(".a9s-outer").setAttribute("d",Ut)},Nw=I_();class $w extends Ub{constructor(Rt){super(Rt),Ht(this,"onDrawingComplete",$t=>{const Bt=$t.annotation.clone({target:jb(this.viewer,$t.annotation.target)});$t.annotation=Bt,this.selectShape($t),this.emit("createSelection",$t.annotation),this.mouseTracker.setTracking(!1)}),Ht(this,"addAnnotation",($t,Bt)=>{const Ut=Bt||this.g,Kt=B_($t,this.env.image);return bp(Kt,"a9s-annotation"),Kt.setAttribute("data-id",$t.id),Kt.annotation=$t,Gb(this.viewer,Kt),Ut.appendChild(Kt),cv(Kt,$t,this.formatter),Kt}),Ht(this,"_getShapeAt",$t=>{const Bt=Bn=>{if(Nw){const Fn=this.svg.getBoundingClientRect(),Dn=Bn.clientX-Fn.x,ur=Bn.clientY-Fn.y;return new tn.default.Point(Dn,ur)}else return new tn.default.Point(Bn.offsetX,Bn.offsetY)},Ut=this.viewer.viewport.viewerElementToViewportCoordinates(Bt($t)),{x:Kt,y:an}=this.viewer.viewport.viewportToImageCoordinates(Ut.x,Ut.y),xn=this.store.getAnnotationAt(Kt,an,this.currentScale());if(xn)return this.findShape(xn)}),Ht(this,"selectShape",($t,Bt)=>{var Ut;if(!Bt&&!$t.annotation.isSelection&&this.emit("clickAnnotation",$t.annotation,$t),((Ut=this.selectedShape)==null?void 0:Ut.annotation)===$t.annotation)return;this.selectedShape&&this.selectedShape.annotation!==$t.annotation&&this.deselect(!0);const{annotation:Kt}=$t;if(this.readOnly||Kt.readOnly||this.headless)this.selectedShape=$t,Bt||this.emit("select",{annotation:Kt,element:$t,skipEvent:Bt});else{setTimeout(()=>{$t.parentNode.removeChild($t),Bt||this.emit("select",{annotation:Kt,element:this.selectedShape.element})},1);const an=this.tools.forAnnotation(Kt);this.selectedShape=an.createEditableShape(Kt),this.selectedShape.element.annotation=Kt;const xn=Wb(this.viewer,Kt);this.selectedShape.updateState(xn);const Bn=new tn.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",Fn=>Bn.setTracking(!0)),this.selectedShape.element.addEventListener("mouseleave",Fn=>Bn.setTracking(!1)),this.selectedShape.mouseTracker=Bn,this.selectedShape.on("update",Fn=>{const Dn=jb(this.viewer,Fn);this.selectedShape.element.annotation=this.selectedShape.annotation.clone({target:Dn}),this.emit("updateTarget",this.selectedShape.element,Dn)})}}),this._initDrawingTools(!0)}resize(){const Rt=this.viewer.viewport.getBounds(!0),{x:$t,y:Bt,width:Ut,height:Kt}=this.viewer.viewport.viewportToImageRectangle(Rt),an={minX:$t,minY:Bt,maxX:$t+Ut,maxY:Bt+Kt},xn=new Set(this.store.getAnnotationsIntersecting(an).map(Bn=>Bn.id));if(xn.size>0&&Array.from(this.g.querySelectorAll(".a9s-annotation:not(.selected)")).forEach(Bn=>{xn.has(Bn.annotation.id)?(Bn.removeAttribute("visibility"),Gb(this.viewer,Bn)):Bn.hasAttribute("visibility")||Bn.setAttribute("visibility","hidden")}),this.selectedShape)if(this.selectedShape.element){const Bn=Wb(this.viewer,this.selectedShape.element.annotation);this.selectedShape.updateState&&this.selectedShape.updateState(Bn),this.emit("viewportChange",this.selectedShape.element)}else this.emit("viewportChange",this.selectedShape)}}class Bw extends yn{constructor(Rt){super(Rt),Ht(this,"clearState",$t=>this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},$t)),Ht(this,"forwardEvent",($t,Bt)=>{this.annotationLayer.on($t,(Ut,Kt)=>{this.props[Bt](Ut.clone(),Kt)})}),Ht(this,"escapeKeyCancel",$t=>{if($t.which===27){this.annotationLayer.stopDrawing();const{selectedAnnotation:Bt}=this.state;Bt&&(this.cancelSelected(),this.props.onCancelSelected(Bt))}}),Ht(this,"handleStartSelect",$t=>this.props.onSelectionStarted($t)),Ht(this,"handleSelect",($t,Bt)=>{this.state.editorDisabled?this.onHeadlessSelect($t,Bt):this.onNormalSelect($t,Bt)}),Ht(this,"onNormalSelect",($t,Bt)=>{const{annotation:Ut,element:Kt}=$t;if(Ut){const an=()=>{this.setState({selectedAnnotation:Ut,selectedDOMElement:Kt,modifiedTarget:null},()=>{Bt||(Ut.isSelection?this.props.onSelectionCreated(Ut.clone()):this.props.onAnnotationSelected(Ut.clone(),Kt))})},{selectedAnnotation:xn}=this.state;xn&&!xn.isEqual(Ut)?this.clearState(()=>{this.props.onCancelSelected(xn),an()}):an()}else{const{selectedAnnotation:an}=this.state;an?this.clearState(()=>this.props.onCancelSelected(an)):this.clearState()}}),Ht(this,"onHeadlessSelect",($t,Bt)=>{this.saveSelected().then(()=>{this.onNormalSelect($t,Bt)})}),Ht(this,"handleUpdateTarget",($t,Bt)=>{this.setState({selectedDOMElement:$t,modifiedTarget:Bt});const Ut=JSON.parse(JSON.stringify(Bt));this.props.onSelectionTargetChanged(Ut)}),Ht(this,"handleViewportChange",$t=>this.setState({selectedDOMElement:$t})),Ht(this,"overrideAnnotationId",$t=>Bt=>{const{id:Ut}=$t;this.state.selectedAnnotation?this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},()=>{this.annotationLayer.overrideId(Ut,Bt)}):this.annotationLayer.overrideId(Ut,Bt)}),Ht(this,"onCreateOrUpdateAnnotation",($t,Bt)=>(Ut,Kt)=>{let an=Ut.isSelection?Ut.toAnnotation():Ut;an=this.state.modifiedTarget?an.clone({target:this.state.modifiedTarget}):an.clone(),this.clearState(()=>{this.annotationLayer.deselect(),this.annotationLayer.addOrUpdateAnnotation(an,Kt),Kt?this.props[$t](an,Kt.clone()):this.props[$t](an,this.overrideAnnotationId(Ut)),Bt&&Bt()})}),Ht(this,"onDeleteAnnotation",$t=>{this.clearState(),this.annotationLayer.removeAnnotation($t),this.props.onAnnotationDeleted($t)}),Ht(this,"onCancelAnnotation",($t,Bt)=>{this.state.editorDisabled||this.annotationLayer.deselect(),this.props.onCancelSelected($t),this.clearState(Bt)}),Ht(this,"addAnnotation",$t=>{var Bt;$t.id===((Bt=this.state.selectedAnnotation)==null?void 0:Bt.id)&&(this.annotationLayer.deselect(),this.clearState()),this.annotationLayer.addOrUpdateAnnotation($t.clone())}),Ht(this,"addDrawingTool",$t=>this.annotationLayer.addDrawingTool($t)),Ht(this,"cancelSelected",()=>new Promise($t=>{this.annotationLayer.deselect(),this.state.selectedAnnotation?this.clearState($t):$t()})),Ht(this,"fitBounds",($t,Bt)=>this.annotationLayer.fitBounds($t,Bt)),Ht(this,"getAnnotationById",$t=>{var Bt;return(Bt=this.annotationLayer.findShape($t))==null?void 0:Bt.annotation}),Ht(this,"getAnnotations",()=>this.annotationLayer.getAnnotations().map($t=>$t.clone())),Ht(this,"getSelected",()=>{var $t;if(this.state.selectedAnnotation)return this.state.editorDisabled?this.state.selectedAnnotation:($t=this._editor.current)==null?void 0:$t.getCurrentAnnotation()}),Ht(this,"getSelectedImageSnippet",()=>this.annotationLayer.getSelectedImageSnippet()),Ht(this,"listDrawingTools",()=>this.annotationLayer.listDrawingTools()),Ht(this,"panTo",($t,Bt)=>this.annotationLayer.panTo($t,Bt)),Ht(this,"removeAnnotation",$t=>this.annotationLayer.removeAnnotation($t)),Ht(this,"removeDrawingTool",$t=>this.annotationLayer.removeDrawingTool($t)),Ht(this,"saveSelected",()=>new Promise($t=>{const Bt=this.state.selectedAnnotation;if(Bt)if(Bt.isSelection)Bt.bodies.length>0||this.props.config.allowEmpty?this.onCreateOrUpdateAnnotation("onAnnotationCreated",$t)(Bt,Bt):(this.annotationLayer.deselect(),$t());else{const{beforeHeadlessModify:Ut,modifiedTarget:Kt}=this.state;Ut?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",$t)(Bt,Ut):Kt?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",$t)(Bt,Bt):this.onCancelAnnotation(Bt,$t)}else $t()})),Ht(this,"selectAnnotation",$t=>{const Bt=this.annotationLayer.selectAnnotation($t,!0);if(Bt)return this.handleSelect(Bt,!0),Bt.annotation.clone();this.clearState()}),Ht(this,"setAnnotations",$t=>this.annotationLayer.init($t.map(Bt=>Bt.clone()))),Ht(this,"setDrawingEnabled",$t=>this.annotationLayer.setDrawingEnabled($t)),Ht(this,"setDrawingTool",$t=>this.annotationLayer.setDrawingTool($t)),Ht(this,"setVisible",$t=>{this.annotationLayer.setVisible($t),$t||this.clearState()}),Ht(this,"updateSelected",($t,Bt)=>new Promise(Ut=>{this.state.selectedAnnotation&&(Bt?this.state.selectedAnnotation.isSelection?this.onCreateOrUpdateAnnotation("onAnnotationCreated",Ut)($t):this.onCreateOrUpdateAnnotation("onAnnotationUpdated",Ut)($t,this.state.selectedAnnotation):this.setState({selectedAnnotation:$t,beforeHeadlessModify:this.state.beforeHeadlessModify||this.state.selectedAnnotation},Ut))})),this.state={selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:Rt.config.readOnly,editorDisabled:Rt.config.disableEditor,widgets:Rt.config.widgets,beforeHeadlessModify:null},this._editor=zi.createRef()}componentDidMount(){this.annotationLayer=this.props.config.gigapixelMode?new $w(this.props):new bw(this.props),this.annotationLayer.on("startSelection",this.handleStartSelect),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.forwardEvent("mouseEnterAnnotation","onMouseEnterAnnotation"),this.forwardEvent("mouseLeaveAnnotation","onMouseLeaveAnnotation"),this.forwardEvent("clickAnnotation","onClickAnnotation"),document.addEventListener("keyup",this.escapeKeyCancel)}componentWillUnmount(){this.annotationLayer.destroy(),document.removeEventListener("keyup",this.escapeKeyCancel)}get disableEditor(){return this.state.editorDisabled}set disableEditor(Rt){this.setState({editorDisabled:Rt},()=>{Rt?document.addEventListener("keyup",this.escapeKeyCancel):document.removeEventListener("keyup",this.escapeKeyCancel)})}get disableSelect(){return this.annotationLayer.disableSelect}set disableSelect(Rt){this.annotationLayer.disableSelect=Rt}get readOnly(){return this.state.readOnly}set readOnly(Rt){this.annotationLayer.readOnly=Rt,this.setState({readOnly:Rt})}get widgets(){return this.state.widgets}set widgets(Rt){this.setState({widgets:Rt})}render(){var Rt;const $t=this.state.selectedAnnotation&&!this.state.editorDisabled,Bt=this.state.readOnly||((Rt=this.state.selectedAnnotation)==null?void 0:Rt.readOnly);return $t&&gn(Ox,{ref:this._editor,detachable:!0,wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:Bt,allowEmpty:this.props.config.allowEmpty,widgets:this.state.widgets,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}class Fw{constructor(Rt,$t){Ht(this,"handleAnnotationCreated",(Ut,Kt)=>this._emitter.emit("createAnnotation",Ut.underlying,Kt)),Ht(this,"handleAnnotationDeleted",Ut=>this._emitter.emit("deleteAnnotation",Ut.underlying)),Ht(this,"handleAnnotationSelected",(Ut,Kt)=>this._emitter.emit("selectAnnotation",Ut.underlying,Kt)),Ht(this,"handleAnnotationUpdated",(Ut,Kt)=>this._emitter.emit("updateAnnotation",Ut.underlying,Kt.underlying)),Ht(this,"handleCancelSelected",Ut=>this._emitter.emit("cancelSelected",Ut.underlying)),Ht(this,"handleClickAnnotation",(Ut,Kt)=>this._emitter.emit("clickAnnotation",Ut.underlying,Kt)),Ht(this,"handleSelectionCreated",Ut=>this._emitter.emit("createSelection",Ut.underlying)),Ht(this,"handleSelectionStarted",Ut=>this._emitter.emit("startSelection",Ut)),Ht(this,"handleSelectionTargetChanged",Ut=>this._emitter.emit("changeSelectionTarget",Ut)),Ht(this,"handleMouseEnterAnnotation",(Ut,Kt)=>this._emitter.emit("mouseEnterAnnotation",Ut.underlying,Kt)),Ht(this,"handleMouseLeaveAnnotation",(Ut,Kt)=>this._emitter.emit("mouseLeaveAnnotation",Ut.underlying,Kt)),Ht(this,"_wrap",Ut=>(Ut==null?void 0:Ut.type)==="Annotation"?new Cg(Ut):Ut),Ht(this,"addAnnotation",Ut=>this._app.current.addAnnotation(new Cg(Ut))),Ht(this,"addDrawingTool",Ut=>this._app.current.addDrawingTool(Ut)),Ht(this,"cancelSelected",()=>this._app.current.cancelSelected()),Ht(this,"clearAnnotations",()=>this.setAnnotations([])),Ht(this,"clearAuthInfo",()=>this._env.user=null),Ht(this,"destroy",()=>zi.unmountComponentAtNode(this.appContainerEl)),Ht(this,"fitBounds",(Ut,Kt)=>this._app.current.fitBounds(this._wrap(Ut),Kt)),Ht(this,"getAnnotationById",Ut=>{const Kt=this._app.current.getAnnotationById(Ut);return Kt==null?void 0:Kt.underlying}),Ht(this,"getAnnotations",()=>this._app.current.getAnnotations().map(Ut=>Ut.underlying)),Ht(this,"getSelected",()=>{const Ut=this._app.current.getSelected();return Ut==null?void 0:Ut.underlying}),Ht(this,"getSelectedImageSnippet",()=>this._app.current.getSelectedImageSnippet()),Ht(this,"listDrawingTools",()=>this._app.current.listDrawingTools()),Ht(this,"loadAnnotations",Ut=>fetch(Ut).then(Kt=>Kt.json()).then(Kt=>(this.setAnnotations(Kt),Kt))),Ht(this,"off",(Ut,Kt)=>this._emitter.off(Ut,Kt)),Ht(this,"on",(Ut,Kt)=>this._emitter.on(Ut,Kt)),Ht(this,"once",(Ut,Kt)=>this._emitter.once(Ut,Kt)),Ht(this,"panTo",(Ut,Kt)=>this._app.current.panTo(this._wrap(Ut),Kt)),Ht(this,"removeAnnotation",Ut=>this._app.current.removeAnnotation(this._wrap(Ut))),Ht(this,"removeDrawingTool",Ut=>this._app.current.removeDrawingTool(Ut)),Ht(this,"saveSelected",()=>this._app.current.saveSelected()),Ht(this,"selectAnnotation",Ut=>{const Kt=this._app.current.selectAnnotation(this._wrap(Ut));return Kt==null?void 0:Kt.underlying}),Ht(this,"setAnnotations",Ut=>{const Kt=(Ut||[]).map(an=>new Cg(an));this._app.current.setAnnotations(Kt)}),Ht(this,"setAuthInfo",Ut=>this._env.user=Ut),Ht(this,"setDrawingEnabled",Ut=>this._app.current.setDrawingEnabled(Ut)),Ht(this,"setDrawingTool",Ut=>this._app.current.setDrawingTool(Ut)),Ht(this,"setServerTime",Ut=>this._env.setServerTime(Ut)),Ht(this,"setVisible",Ut=>this._app.current.setVisible(Ut)),Ht(this,"updateSelected",(Ut,Kt)=>{let an=null;Ut.type==="Annotation"?an=new Cg(Ut):Ut.type==="Selection"&&(an=new c1(Ut.target,Ut.body)),an&&this._app.current.updateSelected(an,Kt)});const Bt=$t||{};this._app=zi.createRef(),this._emitter=new Wo,this._env=Bx(),this._element=Rt.element,window.getComputedStyle(this._element).getPropertyValue("position")==="static"&&(this._element.style.position="relative"),Fx(Bt.locale,Bt.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),zi.render(gn(Bw,{ref:this._app,viewer:Rt,wrapperEl:this._element,config:Bt,env:this._env,onSelectionStarted:this.handleSelectionStarted,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onClickAnnotation:this.handleClickAnnotation,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}get disableEditor(){return this._app.current.disableEditor}set disableEditor(Rt){this._app.current.disableEditor=Rt}get disableSelect(){return this._app.current.disableSelect}set disableSelect(Rt){this._app.current.disableSelect=Rt}get readOnly(){return this._app.current.readOnly}set readOnly(Rt){this._app.current.readOnly=Rt}get widgets(){return this._app.current.widgets}set widgets(Rt){this._app.current.widgets=Rt}}var zw=(Pt,Rt)=>new Fw(Pt,Rt);return zw})})(openseadragonAnnotorious_min);const Annotorious=getDefaultExportFromCjs(openseadragonAnnotorious_min.exports),annotationsEndpoint="https://api.juncture-digital.org";class Annotator{constructor(rt,it="",vt=!0){Id(this,"osd");Id(this,"base");Id(this,"imageId","");Id(this,"annotorious");Id(this,"visible",!1);Id(this,"ghAuthToken","");Id(this,"selected",null);this.osd=rt,this.base=it,this.annotorious=Annotorious(rt,{readOnly:!vt}),this.annotorious.on("createAnnotation",async bt=>this.createAnnotation(bt)),this.annotorious.on("updateAnnotation",async bt=>this.updateAnnotation(bt)),this.annotorious.on("deleteAnnotation",async bt=>this.deleteAnnotation(bt)),this.annotorious.on("selectAnnotation",async bt=>this.onSelect(bt)),this.setVisible(!0),this.ghAuthToken=localStorage.getItem("gh-auth-token")||""}async loadAnnotations(rt){this.imageId=rt,this.setVisible(!1);let it=[],vt=`${annotationsEndpoint}/annotations/${this.base}/${rt}/`;console.log(`Annotator.loadAnnotations: ${vt}`);let bt=await fetch(vt);return bt.ok&&(bt=await bt.json(),console.log(rt,bt),it=bt.annotations,bt.annotations.length>0&&(it=bt.annotations.map(wt=>(wt.id=wt.id.split("/").filter(Tt=>Tt).pop(),wt)),console.log(`Adding ${bt.annotations.length} annotations`))),this.annotorious.setAnnotations(it),this.annotorious.readOnly&&it.forEach(wt=>{let Tt=this.annoEl(wt.id);Tt&&(Tt.addEventListener("mouseenter",()=>this.select(wt.id)),Tt.addEventListener("mouseleave",()=>this.deselect()),Tt.addEventListener("click",()=>navigator.clipboard.writeText(wt.id)))}),it}setVisible(rt){if(this.selected)this.deselect();else{this.visible=rt;let it=this.osd.element.querySelector(".a9s-annotationlayer");it&&(it.style.visibility=this.visible?"visible":"hidden"),Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(vt=>vt.style.visibility=this.visible?"visible":"hidden")}}toggleVisibility(rt){console.log("toggleVisibility"),rt&&rt.stopPropagation(),this.setVisible(!this.visible)}onSelect(rt){this.selected=rt.id,navigator.clipboard&&navigator.clipboard.writeText(this.selected)}annoEl(rt){return this.osd.element.querySelector(`[data-id="${rt}"]`)}select(rt){var it;if(rt!==((it=this.selected)==null?void 0:it.id)){if(this.deselect(),this.selected=this.annotorious.selectAnnotation(rt),this.selected){let vt=this.annoEl(rt);vt&&(vt.style.visibility="visible")}}else this.deselect()}deselect(){Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(rt=>rt.style.visibility=this.visible?"visible":"hidden"),this.annotorious.selectAnnotation(),this.selected=void 0}async createAnnotation(rt){rt.id=sha256(rt.id).slice(0,8),rt.target.id=this.imageId,console.log("createAnnotation",rt);let it=await fetch(`${annotationsEndpoint}/annotation/`,{method:"POST",headers:{"Content-Type":'application/ld+json;profile="http://www.w3.org/ns/anno.jsonld',Authorization:`Token: ${this.ghAuthToken}`},body:JSON.stringify({annotation:rt,path:`${this.base}/${this.imageId}`})});if(it.ok&&it.status===201){let vt=await it.json();this.annotorious.addAnnotation(vt)}else console.log(`createAnnotation: unexpected resp_code=${it.status}`)}async updateAnnotation(rt){rt.target.id=this.imageId;let it=`${annotationsEndpoint}/annotation/${this.base}/${this.imageId}/${rt.id.split("/").pop()}/`;console.log(`updateAnnotation: url=${it}`);let vt=await fetch(it,{method:"PUT",headers:{"Content-Type":'application/ld+json;profile="http://www.w3.org/ns/anno.jsonld',Authorization:`Bearer: ${this.ghAuthToken}`},body:JSON.stringify(rt)});vt.status!==202&&console.log(`updateAnnotation: unexpected resp_code=${vt.status}`)}async deleteAnnotation(rt){let it=await fetch(`${annotationsEndpoint}/annotation/${this.base}/${this.imageId}/${rt.id.split("/").pop()}/`,{method:"DELETE",headers:{Authorization:`Bearer: ${this.ghAuthToken}`}});it.status!==204&&console.log(`deleteAnnotation: unexpected resp_code=${it.status}`)}}var badge_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-flex;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: max(12px, 0.75em);
    font-weight: var(--sl-font-weight-semibold);
    letter-spacing: var(--sl-letter-spacing-normal);
    line-height: 1;
    border-radius: var(--sl-border-radius-small);
    border: solid 1px var(--sl-color-neutral-0);
    white-space: nowrap;
    padding: 0.35em 0.6em;
    user-select: none;
    cursor: inherit;
  }

  /* Variant modifiers */
  .badge--primary {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--success {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--neutral {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--warning {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--danger {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /* Pill modifier */
  .badge--pill {
    border-radius: var(--sl-border-radius-pill);
  }

  /* Pulse modifier */
  .badge--pulse {
    animation: pulse 1.5s infinite;
  }

  .badge--pulse.badge--primary {
    --pulse-color: var(--sl-color-primary-600);
  }

  .badge--pulse.badge--success {
    --pulse-color: var(--sl-color-success-600);
  }

  .badge--pulse.badge--neutral {
    --pulse-color: var(--sl-color-neutral-600);
  }

  .badge--pulse.badge--warning {
    --pulse-color: var(--sl-color-warning-600);
  }

  .badge--pulse.badge--danger {
    --pulse-color: var(--sl-color-danger-600);
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--pulse-color);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }
`,SlBadge=class extends ShoelaceElement{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return y$2`
      <slot
        part="base"
        class=${o$1({badge:!0,"badge--primary":this.variant==="primary","badge--success":this.variant==="success","badge--neutral":this.variant==="neutral","badge--warning":this.variant==="warning","badge--danger":this.variant==="danger","badge--pill":this.pill,"badge--pulse":this.pulse})}
        role="status"
      ></slot>
    `}};SlBadge.styles=badge_styles_default;__decorateClass([e2$2({reflect:!0})],SlBadge.prototype,"variant",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlBadge.prototype,"pill",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlBadge.prototype,"pulse",2);SlBadge=__decorateClass([e$1("sl-badge")],SlBadge);var image_comparer_styles_default=i$4`
  ${component_styles_default}

  :host {
    --divider-width: 2px;
    --handle-size: 2.5rem;

    display: inline-block;
    position: relative;
  }

  .image-comparer {
    max-width: 100%;
    max-height: 100%;
    overflow: hidden;
  }

  .image-comparer__before,
  .image-comparer__after {
    display: block;
    pointer-events: none;
  }

  .image-comparer__before::slotted(img),
  .image-comparer__after::slotted(img),
  .image-comparer__before::slotted(svg),
  .image-comparer__after::slotted(svg) {
    display: block;
    max-width: 100% !important;
    height: auto;
  }

  .image-comparer__after {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
  }

  .image-comparer__divider {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    width: var(--divider-width);
    height: 100%;
    background-color: var(--sl-color-neutral-0);
    translate: calc(var(--divider-width) / -2);
    cursor: ew-resize;
  }

  .image-comparer__handle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: calc(50% - (var(--handle-size) / 2));
    width: var(--handle-size);
    height: var(--handle-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: var(--sl-border-radius-circle);
    font-size: calc(var(--handle-size) * 0.5);
    color: var(--sl-color-neutral-700);
    cursor: inherit;
    z-index: 10;
  }

  .image-comparer__handle:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }
`;function drag(nt,rt){function it(bt){const wt=nt.getBoundingClientRect(),Tt=nt.ownerDocument.defaultView,kt=wt.left+Tt.pageXOffset,Lt=wt.top+Tt.pageYOffset,Mt=bt.pageX-kt,Nt=bt.pageY-Lt;rt!=null&&rt.onMove&&rt.onMove(Mt,Nt)}function vt(){document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",vt),rt!=null&&rt.onStop&&rt.onStop()}document.addEventListener("pointermove",it,{passive:!0}),document.addEventListener("pointerup",vt),(rt==null?void 0:rt.initialEvent)instanceof PointerEvent&&it(rt.initialEvent)}function clamp(nt,rt,it){return nt<rt?rt:nt>it?it:nt}var i2=e$2(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t$2.ATTRIBUTE||nt.name!=="style"||((rt=nt.strings)===null||rt===void 0?void 0:rt.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(nt){return Object.keys(nt).reduce((rt,it)=>{const vt=nt[it];return vt==null?rt:rt+`${it=it.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${vt};`},"")}update(nt,[rt]){const{style:it}=nt.element;if(this.vt===void 0){this.vt=new Set;for(const vt in rt)this.vt.add(vt);return this.render(rt)}this.vt.forEach(vt=>{rt[vt]==null&&(this.vt.delete(vt),vt.includes("-")?it.removeProperty(vt):it[vt]="")});for(const vt in rt){const bt=rt[vt];bt!=null&&(this.vt.add(vt),vt.includes("-")?it.setProperty(vt,bt):it[vt]=bt)}return x$2}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var SlImageComparer=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.position=50}handleDrag(nt){const{width:rt}=this.base.getBoundingClientRect(),it=this.localize.dir()==="rtl";nt.preventDefault(),drag(this.base,{onMove:vt=>{this.position=parseFloat(clamp(vt/rt*100,0,100).toFixed(2)),it&&(this.position=100-this.position)},initialEvent:nt})}handleKeyDown(nt){const rt=this.localize.dir()==="ltr",it=this.localize.dir()==="rtl";if(["ArrowLeft","ArrowRight","Home","End"].includes(nt.key)){const vt=nt.shiftKey?10:1;let bt=this.position;nt.preventDefault(),(rt&&nt.key==="ArrowLeft"||it&&nt.key==="ArrowRight")&&(bt-=vt),(rt&&nt.key==="ArrowRight"||it&&nt.key==="ArrowLeft")&&(bt+=vt),nt.key==="Home"&&(bt=0),nt.key==="End"&&(bt=100),bt=clamp(bt,0,100),this.position=bt}}handlePositionChange(){this.emit("sl-change")}render(){const nt=this.localize.dir()==="rtl";return y$2`
      <div
        part="base"
        id="image-comparer"
        class=${o$1({"image-comparer":!0,"image-comparer--rtl":nt})}
        @keydown=${this.handleKeyDown}
      >
        <div class="image-comparer__image">
          <slot name="before" part="before" class="image-comparer__before"></slot>

          <slot
            name="after"
            part="after"
            class="image-comparer__after"
            style=${i2({clipPath:nt?`inset(0 0 0 ${100-this.position}%)`:`inset(0 ${100-this.position}% 0 0)`})}
          ></slot>
        </div>

        <div
          part="divider"
          class="image-comparer__divider"
          style=${i2({left:nt?`${100-this.position}%`:`${this.position}%`})}
          @mousedown=${this.handleDrag}
          @touchstart=${this.handleDrag}
        >
          <slot
            name="handle"
            part="handle"
            class="image-comparer__handle"
            role="scrollbar"
            aria-valuenow=${this.position}
            aria-valuemin="0"
            aria-valuemax="100"
            aria-controls="image-comparer"
            tabindex="0"
          >
            <sl-icon library="system" name="grip-vertical"></sl-icon>
          </slot>
        </div>
      </div>
    `}};SlImageComparer.styles=image_comparer_styles_default;__decorateClass([i2$2(".image-comparer")],SlImageComparer.prototype,"base",2);__decorateClass([i2$2(".image-comparer__handle")],SlImageComparer.prototype,"handle",2);__decorateClass([e2$2({type:Number,reflect:!0})],SlImageComparer.prototype,"position",2);__decorateClass([watch("position",{waitUntilFirstUpdate:!0})],SlImageComparer.prototype,"handlePositionChange",1);SlImageComparer=__decorateClass([e$1("sl-image-comparer")],SlImageComparer);const _hoisted_1$b=["draggable"],_hoisted_2$9={id:"content"},_hoisted_3$9={key:0,class:"image-wrapper media-item"},_hoisted_4$7=["src"],_hoisted_5$6=["src"],_hoisted_6$5={key:2,id:"osd"},_hoisted_7$4=["manifest"],_hoisted_8$4=["manifest"],_hoisted_9$3={key:1},_hoisted_10$2=["draggable","onDragstart"],_hoisted_11$1=["src","onClick"],_hoisted_12$1=["src","onClick"],_hoisted_13$1=["manifest"],_hoisted_14$1={key:2},_hoisted_15$1=["slot","src","alt"],_hoisted_16$1={key:3,class:"media-item"},_hoisted_17$1={id:"html5-player",controls:""},_hoisted_18$1=["src","type"],_hoisted_19$1=["manifest"],_hoisted_20$1={key:4,class:"media-item"},_hoisted_21$1={key:0,id:"youtube-placeholder"},_hoisted_22$1={key:1,id:"ve-video-vimeo","data-vimeo-playsinline":"true"},_hoisted_23$1=["muted","autoplay","poster"],_hoisted_24$1=["src","type"],_hoisted_25$1=["manifest"],_hoisted_26$1=["total","current"],_hoisted_27$1={key:0,name:"chat-square",label:"Hide annotations"},_hoisted_28$1={key:1,name:"pencil",label:"Edit annotations"},_hoisted_29={key:2,variant:"danger",pill:""},_hoisted_30={key:0,name:"chat-square",label:"Hide annotations"},_hoisted_31={key:1,name:"chat-square-text",label:"Show annotations"},_hoisted_32={key:2,variant:"danger",pill:""},_hoisted_33=["innerHTML"],_hoisted_34=["innerHTML"],_hoisted_35={id:"media-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},_hoisted_36=["src"],_sfc_main$d=defineComponent({__name:"MediaViewer.ce",props:{manifest:{type:String},src:{type:String},seq:{type:Number,default:1},annoBase:{type:String},base:{type:String},region:{type:String},size:{type:String},rotation:{type:String},quality:{type:String},format:{type:String},options:{type:String},alt:{type:String},caption:{type:String},fit:{type:String},entities:{type:String},zoomOnScroll:{type:Boolean},noCaption:{type:Boolean},noInfoIcon:{type:Boolean},static:{type:Boolean},grid:{type:Boolean},cards:{type:Boolean},compare:{type:Boolean},small:{type:Boolean},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String},autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!0},start:{type:Number},end:{type:Number},poster:{type:String},class:{type:String}},setup(nt){const rt=nt;function it(Dr,Yr){var xi;Yr.stopPropagation(),console.log(Dr,Yr);let Vr=`https://iiif.juncture-digital.org/?manifest=${Dr.id}`;console.log("onDrag",Vr),(xi=Yr.dataTransfer)==null||xi.setData("text/uri-list",Vr)}const vt=ref(null),bt=computed(()=>{var Dr;return(Dr=vt==null?void 0:vt.value)==null?void 0:Dr.parentNode}),wt=computed(()=>{var Dr,Yr;return(Yr=(Dr=vt.value)==null?void 0:Dr.getRootNode())==null?void 0:Yr.host}),Tt=computed(()=>{var Dr;return(Dr=bt.value)==null?void 0:Dr.querySelector("#content")}),kt=computed(()=>{var Dr;return(Dr=bt.value)==null?void 0:Dr.querySelector("#outer")}),Lt=computed(()=>{var Dr;return(Dr=bt.value)==null?void 0:Dr.querySelector("#inner")});onMounted(()=>zt());const Mt=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");function Nt(Dr=16/9){rt.sticky&&(makeSticky(wt.value),Lt.value.style.paddingTop="6px",kt.value.style.paddingBottom="6px"),rr.value=Ar.value?Number((Ar.value.width/Ar.value.height).toFixed(4)):Dr,wt.value.classList.add("ve-component"),wt.value.classList.add(Mt),Mt==="full"||(wt.value.style.float=Mt,wt.value.style.width="calc(50% - 12px)"),wt.value.style.width=window.getComputedStyle(wt.value).width,Tt.value&&(Lt.value.style.width=isMobile()?"100%":rt.width||"100%"),nextTick(()=>{if(Er.value=parseInt(window.getComputedStyle(Tt.value).width.slice(0,-2)),Tt.value.style.width=`${Er.value}px`,Tt.value.style.height=rt.height||(sr.value==="image-grid"?"":sr.value==="audio"?"80px":`${Math.round((Er==null?void 0:Er.value)/rr.value)}px`),Mr.value=parseInt(window.getComputedStyle(Tt.value).height.slice(0,-2)),rt.sticky&&Mt==="full"&&!(rt.width||rt.height)){let Yr=Math.round(window.innerHeight*.4),Vr=Math.ceil(Yr*rr.value);sr.value==="image"&&(Tt.value.style.height=`${Yr}px`),sr.value!=="image-grid"&&Lt.value.classList.add("drop-shadow"),Lt.value.style.width=`${Vr}px`}nextTick(()=>{Er.value=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),Mr.value=parseInt(window.getComputedStyle(Tt.value).height.slice(0,-2))})})}function zt(){var Dr;if(rt.src)if(((Dr=rt.src)==null?void 0:Dr.indexOf("http"))===0){let Yr=new URL(rt.src),Vr=Yr.hostname.replace(/^www\./,"");Tn.has(Vr)?(sr.value="video",yr=!0,er.value=Yr.searchParams.get("v"),nextTick(()=>Di())):Sn.has(Vr)?(sr.value="video",ai=!0,er.value=Yr.pathname.slice(1),nextTick(()=>eo())):vr.value=lr()}else vr.value=lr();else vr.value=lr();Ln()}function Ht(Dr){const Yr=Dr.target.parentElement;Yr&&(Yr.active=!Yr.active)}const Wt=ref();watch$1(Wt,()=>{if(Wt.value){let Dr=Wt.value;setTimeout(()=>Pn(),100),Dr.addHandler("viewport-change",()=>An()),(rt.base||rt.annoBase)&&(nn.value=new Annotator(Dr,rt.base||rt.annoBase,sn.value));let Yr=Dr.world.getItemAt(0);Yr?(rt.rotation&&Yr.setRotation(parseInt(rt.rotation),!0),Yr.getFullyLoaded()?tn():Yr.addHandler("fully-loaded-change",Vr=>{Vr.fullyLoaded&&tn()})):Dr.world.addHandler("add-item",()=>{let Vr=Dr.world.getItemAt(0);rt.rotation&&Vr.setRotation(parseInt(rt.rotation),!0),Vr.getFullyLoaded()?tn():Vr.addHandler("fully-loaded-change",xi=>{xi.fullyLoaded&&tn()})})}});let Zt;function tn(Dr){var xi;let Yr=vr.value[0],Vr=sha256(Ar.value.id||Ar.value["@id"]).slice(0,8);Vr!==Zt&&(nn.value&&nn.value.loadAnnotations(Vr).then(ui=>rn.value=ui),!Zt&&Yr.seq===pr.value&&Yr.region&&((xi=Wt.value)==null||xi.viewport.fitBounds(parseRegionString(Yr.region,Wt.value),!0)),Zt=Vr)}function Yt(Dr){return getItemInfo(Dr).format==="image/gif"}const nn=ref(),rn=ref([]),ln=ref(!1),sn=ref(window.location.pathname.split("/")[1]==="editor");function mn(){ln.value=!ln.value}watch$1(ln,()=>{var Yr;nn.value.setVisible(ln.value);let Dr=(Yr=bt.value)==null?void 0:Yr.querySelector("#annotations-icon");sn.value&&ln.value?Dr==null||Dr.classList.add("editable"):Dr==null||Dr.classList.remove("editable")});const wn=ref();let Cn=null;function An(){Cn!==null&&(clearTimeout(Cn),Cn=null),Cn=window.setTimeout(()=>Pn(),100)}function Pn(){var Yr,Vr;const Dr=Wt&&((Yr=Wt.value)==null?void 0:Yr.world.getItemAt(0));if(Dr){let xi=(Vr=Wt.value)==null?void 0:Vr.viewport.getBounds();const ui=xi?Dr.viewportToImageRectangle(xi):null;wn.value=ui?`${Math.ceil(ui.x)},${Math.ceil(ui.y)},${Math.ceil(ui.width)},${Math.ceil(ui.height)}`:""}}const On=ref();watch$1(bt,()=>{var Dr;On.value=(Dr=bt.value)==null?void 0:Dr.querySelector("#media-dialog")}),watch$1(On,Dr=>{Dr==null||Dr.addEventListener("sl-after-hide",()=>kn.value=null),Dr==null||Dr.addEventListener("sl-show",()=>{On.value&&(On.value.panel.style.width=isMobile()?"100%":`${Vn()}px`)})});const kn=ref();watch$1(kn,Dr=>{var Yr,Vr;Dr?(Yr=On.value)==null||Yr.show():(Vr=On.value)==null||Vr.hide()});function gn(Dr=null){kn.value=kn.value?null:Dr.src||Dr.id}function Vn(){var ui;let Dr=Math.round(window.innerWidth-100),Yr=Math.round(window.innerHeight-150),Vr=((ui=kn.value)==null?void 0:ui.indexOf("http"))===0?kn.value:`https://iiif.juncture-digital.org/${kn.value}/manifest.json`,xi=cr.value.find(xr=>decodeURIComponent(xr.id)===Vr);if(xi){let xr=getItemInfo(xi),li=Number((xr.width/xr.height).toFixed(4));Dr=li>=1?Dr/li>Yr?Dr=Yr*li:Dr:Math.round(Yr*li)}return Dr}const pn=ref(rt.caption),pr=ref(rt.seq),yn=ref(rt.seq);function mr(Dr){pr.value=Dr.detail}const Er=ref(0),Mr=ref(0),rr=ref(0),vr=ref([]),cr=ref([]),gr=ref(null),Or=ref(null),Ar=ref(null),sr=ref(null),ii=ref(null),ar=computed(()=>Object.fromEntries(cr.value.map(Dr=>[sha256(decodeURIComponent(Dr.id)).slice(0,8),Dr])));watch$1(vr,()=>{let Dr=vr.value.filter(Yr=>Yr.iiif).map(Yr=>Yr.src);loadManifests(Dr).then(Yr=>{cr.value=Yr,rt.grid?sr.value="image-grid":cr.value.length>1&&(sr.value=cr.value.length===2?"image-compare":"image-grid")})}),watch$1(cr,()=>{gr.value=cr.value.length>0&&cr.value[0],Or.value=vr.value[0]}),watch$1(gr,()=>{yn.value=imageCount(gr.value),Ar.value=gr.value?getItemInfo(gr.value,pr.value):null}),watch$1(pr,()=>Ar.value=gr.value?getItemInfo(gr.value,pr.value):null);const fr=ref([]),wr=computed(()=>{var Dr;return(Dr=Ar.value)==null?void 0:Dr.id}),ir=computed(()=>{var Yr;let Dr=(Yr=wr.value)==null?void 0:Yr.split("#")[0].split(".").pop();return Dr==="mp4"?"video/mp4":Dr==="webm"?"video/webm":"application/ogg"});watch$1(Ar,()=>{var Dr,Yr;sr.value=sr.value||((Yr=(Dr=Ar.value)==null?void 0:Dr.type)==null?void 0:Yr.toLowerCase()),ii.value=sr.value&&sr.value==="image"?Ar.value.service?`${Ar.value.service[0].id||Ar.value.service[0]["@id"]}/info.json`:{url:Ar.value.id,type:"image",buildPyramid:!0}:null,Wt.value&&Wt.value.open(ii.value),Er.value||nextTick(()=>Nt())}),watch$1(sr,()=>{di(),nextTick(()=>{sr.value==="image"&&!Yt(gr.value)&&!rt.static?Qn():(sr.value==="video"&&vr.value.length>0||sr.value==="audio")&&wo(),!pn.value&&sr.value==="image"&&(pn.value=label(gr.value))})}),watch$1(Mr,()=>{sr.value==="image-compare"&&(fr.value=$n())});function Ln(){let Dr=wt.value.parentElement.querySelector("ve-media > ul, ve-media > span");if(Dr){const Yr=xi=>{for(let ui of xi)ui.type==="childList"||ui.type;vr.value=lr()};new MutationObserver(Yr).observe(Dr,{childList:!0,subtree:!0,characterData:!0})}}const en=RegExp(/^(?<region>(pct:)?([0-9.]+,[0-9.]+,[0-9.]+,[0-9.]+)|full|square)(\/(?<size>full|max|((pct:)?[\d,.!]+)))?(\/(?<rotation>!?\d+))?(\/(?<quality>color|gray|bitonal|default))?(\/(?<format>jpg|tif|png|gif|jp2|pdf|webp))?/),dn=RegExp(/^(?<mirror>!?)(?<rotation>0|90|180|270){1}/);function un(Dr){return en.test(Dr)}function Nn(Dr){return/^[0-9]+$/.test(Dr)}function In(Dr){return dn.test(Dr)}function lr(){let Dr=[],Yr=rt.manifest||rt.src;if(Yr){let Vr={};Vr.src=Yr,Vr.src=Vr.src.indexOf("http")===0?Vr.src:`https://iiif.juncture-digital.org/${Vr.src}/manifest.json`,Vr.id=sha256(Vr.src).slice(0,8);let ui=new URL(Vr.src).hostname.replace(/^www\./,"");if(Vr.iiif=!Tn.has(ui)&&!Sn.has(ui),rt.options&&un(rt.options)){let xr=rt.options.match(en);xr&&(Vr={...Vr,...xr.groups})}Vr.seq=rt.seq,Vr.region=rt.region||Vr.region,Vr.size=rt.size||Vr.size,Vr.rotation=rt.rotation||Vr.rotation,Vr.quality=rt.quality||Vr.quality,Vr.format=rt.format||Vr.format,Vr.fit=rt.fit,Dr.push(Vr)}else Dr=Array.from(wt.value.querySelectorAll("li")).filter(Vr=>Vr.innerHTML).map(Vr=>{var uo,ss;let xi=[],ui=(uo=Vr.textContent)==null?void 0:uo.replace(//,'"').replace(//,'"').replace(//,"'").trim();(ss=ui==null?void 0:ui.match(/[^\s"]+|"([^"]*)"/gmi))==null||ss.forEach(Co=>{xi.length>0&&xi[xi.length-1].indexOf("=")===xi[xi.length-1].length-1?xi[xi.length-1]=`${xi[xi.length-1]}${Co}`:xi.push(Co)});let xr={};xr.src=xi[0].indexOf("http")===0?xi[0]:`https://iiif.juncture-digital.org/${xi[0]}/manifest.json`,xr.id=sha256(decodeURIComponent(xr.src)).slice(0,8);let li=new URL(xi[0]),yi=li.hostname.replace(/^www\./,"");Tn.has(yi)?(xr.youtube=!0,xr.videoid=li.searchParams.get("v")):Sn.has(yi)?xr.vimeo=!0:xr.iiif=!0,xr.iiif=!Tn.has(yi)&&!Sn.has(yi);for(let Co=1;Co<xi.length;Co++){let Mo=xi[Co];if(Mo.indexOf("=")>0){let ho=Mo.split("=");xr[ho[0]]=ho[1]}else if(Nn(Mo))xr.seq=Mo;else if(un(Mo)){let ho=Mo.match(en);ho&&(xr={...xr,...ho.groups})}else if(Mo==="cover"||Mo==="contain")xr.fit=Mo;else if(In(Mo)){let ho=Mo.match(dn);ho&&(xr={...xr,...ho.groups})}else Mo==="mirror"?xr.mirror=!0:xr.caption=Mo[0]==='"'&&Mo[Mo.length-1]==='"'?Mo.slice(1,-1):Mo}return xr});return Dr}function $n(){let Dr=Er.value,Yr=Mr.value,Vr=rr.value;return vr.value.map((xi,ui)=>{let xr=getItemInfo(cr.value[ui],xi.seq),li,yi,uo,ss;xi.region&&([li,yi,uo,ss]=xi.region.split(":").pop().split(",").map(so=>parseFloat(so)),xi.region.split(":")[0]==="pct"&&(li=Math.round(li*xr.width/100),yi=Math.round(yi*xr.height/100),uo=Math.round(uo*xr.width/100),ss=Math.round(ss*xr.height/100)));const Co=uo||xr.width,Mo=ss||xr.height,ho=Number((Co/Mo).toFixed(4));let as=Co,pl=Mo;ho>Vr?(as=Math.round(Mo*Vr),pl=Math.round(as/Vr)):(pl=Math.round(Co/Vr),as=Math.round(pl*Vr));let vu=xr.service[0].id||xr.service[0]["@id"];const Ea=(li||0)+Math.abs(Math.round((as-Co)*.5)),ji=(yi||0)+Math.abs(Math.round((pl-Mo)*.5));let ao=`${Ea},${ji},${as},${pl}`;return`${vu}/${ao}/${Dr},${Yr}/${xi.mirror?"!":""}${xi.rotation||0}/${xi.quality||"default"}.${xi.format||"jpg"}`})}function Qn(){Wt.value=Wn(),or(),ii.value&&Wt.value.open(ii.value)}function Wn(){var xi;const Vr={element:((xi=vt.value)==null?void 0:xi.parentNode).querySelector("#osd"),prefixUrl:"https://openseadragon.github.io/openseadragon/images/",homeFillsViewer:rt.fit==="cover",showNavigationControl:!0,minZoomImageRatio:1,maxZoomPixelRatio:10,showRotationControl:!0,showHomeControl:!0,showZoomControl:!0,showFullPageControl:!0,showNavigator:!1,sequenceMode:!0,showReferenceStrip:!0,animationTime:.5,springStiffness:10,visibilityRatio:1,constrainDuringPan:!0};return openseadragonExports(Vr)}function or(){rt.zoomOnScroll||new OpenSeadragonViewerInputHook({viewer:Wt.value,hooks:[{tracker:"viewer",handler:"scrollHandler",hookHandler:Dr=>{var Yr;return!((Yr=Wt.value)!=null&&Yr.isFullPage())&&!Dr.originalEvent.ctrlKey&&(Dr.preventDefaultAction=!0,Dr.stopHandlers=!0),!0}}]})}function dr(Dr){navigator.clipboard&&navigator.clipboard.writeText(Dr)}function kr(Dr){let Yr=Dr.name.toLowerCase(),Vr=Dr.value;return(Yr==="enter"||Yr==="exit")&&Vr.indexOf("|")>0&&([Yr,Vr]=Vr.split("|")),["zoom","zoomto"].indexOf(Yr.toLowerCase())===0||/^((pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?\|?([0-9a-f]{8})?$/.test(Vr)}function br(Dr){let Yr=Dr.name.toLowerCase(),Vr=Dr.value;return(Yr==="enter"||Yr==="exit")&&Vr.indexOf("|")>0&&([Yr,Vr]=Vr.split("|")),Yr.toLowerCase()==="play"||/^([0-9:]+)+,?([0-9:]+)?$/.test(Vr)}function _r(Dr){let Yr=Dr.name.toLowerCase(),Vr=Dr.value.toLowerCase();return Yr==="pause"||Vr==="pause"}const hi=new Set(["anno","play","start","zoomto"]);function di(){Array.from(wt.value.querySelectorAll("[enter],[exit]")).forEach(Yr=>{vi(Yr)&&Ai(Yr)});let Dr=wt.value.parentElement;for(;Dr.parentElement&&Dr.tagName!=="BODY";)Dr=Dr.parentElement;Array.from(Dr.querySelectorAll("mark")).forEach(Yr=>{console.log(Yr);let Vr=Array.from(Yr.attributes).find(xi=>hi.has(xi.name));Vr&&vi(Yr.parentElement)&&(Yr.classList.add(Vr.name),Yr.addEventListener("click",()=>{console.log("click"),(Vr==null?void 0:Vr.name)==="anno"?Rr(Vr.value):(Vr==null?void 0:Vr.name)==="zoomto"?Ti(Vr.value):(Vr==null?void 0:Vr.name)==="play"?ki(Vr.value):Bi()}))})}function vi(Dr){let Yr=Dr.previousSibling;for(;Yr;){if(Yr.nodeName==="VE-MEDIA")return Yr===wt.value?Yr:null;Yr=Yr.previousSibling}for(;Dr.parentElement&&Dr.tagName!=="MAIN";){Dr=Dr.parentElement;let Vr=Dr.querySelector(":scope > ve-media, :scope > p > ve-media");if(Vr)return Vr===wt.value?Vr:null}}function Ai(Dr){let Yr=Dr.classList.contains("active");new MutationObserver(xi=>{xi.forEach(ui=>{if(ui.attributeName=="class"){let xr=ui.target.classList.contains("active");if(Yr!==xr){Yr=xr;let li=Dr.attributes.getNamedItem(xr?"enter":"exit");li&&(sr.value==="image"&&kr(li)&&Ti(li.value),sr.value!=="image"&&(br(li)?ki(li.value):_r(li)&&Bi()))}}})}).observe(Dr,{attributes:!0})}function ki(Dr){Dr=Dr.replace(/^play\|/i,"");const Yr=Dr.match(/^([0-9:]+)+,?([0-9:]+)?$/);Yr&&ls(Yr[1],Yr[2])}function Bi(){al()}function Ti(Dr){var Vr,xi,ui,xr;Dr=Dr.replace(/^zoomto\|/i,"");const Yr=Dr==null?void 0:Dr.match(/^(?<region>(pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?,?(?<annoid>[0-9a-f]{8})?$/);if(Yr){let li=(Vr=Yr==null?void 0:Yr.groups)==null?void 0:Vr.region,yi=(xi=Yr==null?void 0:Yr.groups)==null?void 0:xi.annoid;yi&&nn.value.selected&&nn.value.selected.id===yi?(ui=Wt.value)==null||ui.viewport.goHome():li&&((xr=Wt.value)==null||xr.viewport.fitBounds(parseRegionString(li,Wt.value),!1)),yi&&nn.value.select(yi)}}function Rr(Dr){var Vr,xi;const Yr=Dr==null?void 0:Dr.match(/^(?<annoid>[0-9a-f]{8})$/);if(Yr){let ui=(Vr=Yr==null?void 0:Yr.groups)==null?void 0:Vr.annoid;ui&&nn.value.selected&&nn.value.selected.id===ui?(xi=Wt.value)==null||xi.viewport.goHome():nn.value.select(ui)}}const Tn=new Set(["youtube.com","youtube.co.uk","youtu.be"]),Sn=new Set(["vimeo.com"]);let jn=null;const er=ref(),Cr=ref(!0),Qr=ref(!1);let yr=!1,ai=!1,Ir=!1,mi=null,wi=!0,Mi={};function Ei(){Mi.value=Object.fromEntries(Array.from(wt.value.parentElement.querySelectorAll("p[data-start]")).map(Dr=>[jo(Dr.dataset.start||"0"),Dr]))}async function io(Dr){let Vr=`https://youtube.com/oembed?url=${encodeURI(`https://www.youtube.com/watch?v=${Dr}`)}&format=json`,ui=await(await fetch(Vr)).json();return ui.aspect=ui.width/ui.height,ui}async function Di(){let Dr=await io(er.value);Ei(),nextTick(()=>{Nt(Dr.aspect),nextTick(()=>{var ui;let Yr=(ui=bt.value)==null?void 0:ui.querySelector("#youtube-placeholder"),Vr=parseInt(window.getComputedStyle(Yr).width.slice(0,-2));Yr.style.height=`${Vr/Dr.aspect}px`;let xi={color:"white",rel:0,modestbranding:1,playsinline:1};jn=YouTubePlayer(Yr,{videoId:er.value,width:Vr,playerVars:xi}),jn.on("ready",xr=>{Ji(),rt.autoplay&&ls(`${rt.start||""}`,`${rt.end||""}`)})})})}async function eo(){var Yr;Nt();let Dr=(Yr=bt.value)==null?void 0:Yr.querySelector("#ve-video-vimeo");jn=new Player(Dr,{id:er.value,width:parseInt(window.getComputedStyle(Dr).width.slice(0,-2))}),jn.on("loaded",()=>{Nt(Dr.clientWidth/Dr.clientHeight-5),Ji()})}function wo(){Ei(),Ir=!0,nextTick(()=>{var Dr;jn=(Dr=bt.value)==null?void 0:Dr.querySelector("#html5-player"),Ji()}),Nt()}async function Ji(){let Dr=wt.value.parentElement.querySelector("ve-media"),Yr=!1;setInterval(async()=>{if(Cr.value=await oo(),Qr.value=await Pi(),Qr.value&&rt.sticky&&Object.keys(Mi.value).length>0&&!Yr){let Vr=Dr.getBoundingClientRect().top+window.scrollY-top$1();window.scrollTo(0,Vr),Yr=!0}Qr.value&&Ws().then(Vr=>{if(Vr=Math.round(Vr),Mi.value[Vr]){let ui=Mi.value[Vr].getBoundingClientRect();window.scrollTo(0,ui.top+window.scrollY-Dr.getBoundingClientRect().bottom)}})},1e3)}function al(){yr?jn.pauseVideo():(ai||Ir)&&jn.pause()}async function Ws(){if(yr)return jn.getCurrentTime();if(ai)return await jn.getCurrentTime();if(Ir)return jn.currentTime}async function Pi(){return yr?await jn.getPlayerState()===1:ai?!(await jn.getEnded()||await jn.getPaused()):Ir?!(jn.ended||jn.paused):!1}async function oo(){return yr?await jn.isMuted():ai?await jn.getMuted():await rt.muted}function Rs(Dr){yr?Dr?jn.mute():jn.unMute():ai?jn.setMuted(Dr):Ir&&(jn.muted=Dr)}function jo(Dr){var Yr=Dr.split(":").slice(0,3).map(ui=>parseInt(ui,10));let Vr=0,xi=1;for(;Yr.length>0;){let ui=Yr.pop()||0;Vr+=xi*ui,xi*=60}return Vr}function ls(Dr,Yr=""){console.log(`seekTo: start=${Dr} end=${Yr}`);let Vr=jo(Dr),xi=Yr?jo(Yr)+1:-1;mi&&(clearTimeout(mi),mi=null);let ui=Cr.value;if(yr?(jn.playVideo(),jn.seekTo(Vr).then(xr=>{xi>=Vr&&(mi=setTimeout(()=>{jn.pauseVideo().then(li=>{mi=null,!ui&&wi&&Rs(!1)})},xi===Vr?200:(xi-Vr)*1e3))})):ai?(jn.setCurrentTime(Vr),jn.play().then(xr=>{xi>=Vr&&(mi=setTimeout(()=>{jn.pause().then(li=>{mi=null,!ui&&wi&&Rs(!1)})},xi===Vr?200:(xi-Vr)*1e3))})):Ir&&setTimeout(()=>{jn.play(),jn.currentTime=Vr,xi>=Vr&&(mi=setTimeout(()=>{mi=null,jn.pause(),!ui&&wi&&Rs(!1)},xi===Vr?200:(xi-Vr)*1e3))},200),Mi.value[Vr]){let li=Mi.value[Vr].getBoundingClientRect(),yi=wt.value.parentElement.querySelector("ve-media");window.scrollTo(0,li.top+window.scrollY-yi.getBoundingClientRect().bottom)}}return(Dr,Yr)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",mergeProps({ref_key:"root",ref:vt},Dr.$attrs),null,16),createBaseVNode("div",{id:"outer",class:normalizeClass(sn.value?"edit":"view"),draggable:sr.value==="image",onDragstart:Yr[2]||(Yr[2]=Vr=>it(gr.value,Vr))},[createBaseVNode("div",{id:"inner",class:normalizeClass(sr.value)},[createBaseVNode("div",_hoisted_2$9,[sr.value==="image"?(openBlock(),createElementBlock("div",_hoisted_3$9,[Yt(cr.value[0])?(openBlock(),createElementBlock("ve-gif",{key:0,src:Ar.value.id,alt:"Animated GIF","initially-paused":"","restart-on-play":""},null,8,_hoisted_4$7)):nt.static?(openBlock(),createElementBlock("img",{key:1,src:unref(staticImage)(gr.value,Or.value,Er.value),style:{width:"100%"},onClick:Yr[0]||(Yr[0]=Vr=>gn(gr.value))},null,8,_hoisted_5$6)):(openBlock(),createElementBlock("div",_hoisted_6$5)),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:3,manifest:cr.value[0].id},null,8,_hoisted_7$4))])):sr.value==="image-grid"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`grid-wrapper${rt.small?" small":""}`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(vr.value,(Vr,xi)=>(openBlock(),createElementBlock(Fragment,null,[rt.cards?(openBlock(),createElementBlock("ve-media-card",{key:0,style:{width:"100%",height:"100%"},manifest:Vr.src},null,8,_hoisted_8$4)):(openBlock(),createElementBlock("div",_hoisted_9$3,[createBaseVNode("div",{class:"media-item",draggable:sr.value==="image",onDragstart:ui=>it(unref(ar)[Vr.id],ui)},[Vr.iiif?(openBlock(),createElementBlock("img",{key:0,src:unref(thumbnail)(unref(ar)[Vr.id]),onClick:ui=>gn(Vr)},null,8,_hoisted_11$1)):Vr.youtube?(openBlock(),createElementBlock("img",{key:1,src:`https://img.youtube.com/vi/${Vr.videoid}/0.jpg`,onClick:ui=>gn(Vr)},null,8,_hoisted_12$1)):createCommentVNode("",!0),Vr.iiif?(openBlock(),createElementBlock("ve-manifest-popup",{key:2,manifest:Vr.src},null,8,_hoisted_13$1)):createCommentVNode("",!0)],40,_hoisted_10$2)]))],64))),256))],2)):sr.value==="image-compare"?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("sl-image-comparer",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(fr.value,(Vr,xi)=>(openBlock(),createElementBlock("img",{key:`img-${xi}`,slot:xi===0?"before":"after",src:Vr,alt:unref(label)(cr.value[xi])},null,8,_hoisted_15$1))),128))])])):sr.value==="audio"?(openBlock(),createElementBlock("div",_hoisted_16$1,[createBaseVNode("audio",_hoisted_17$1,[createBaseVNode("source",{src:unref(wr),type:unref(ir)},null,8,_hoisted_18$1)]),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:0,manifest:cr.value[0].id},null,8,_hoisted_19$1))])):sr.value==="video"?(openBlock(),createElementBlock("div",_hoisted_20$1,[unref(yr)?(openBlock(),createElementBlock("div",_hoisted_21$1)):unref(ai)?(openBlock(),createElementBlock("div",_hoisted_22$1)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("video",{id:"html5-player",controls:"",playsinline:"",muted:rt.muted,autoplay:rt.autoplay,poster:rt.poster},[createBaseVNode("source",{src:unref(wr),type:unref(ir)},null,8,_hoisted_24$1)],8,_hoisted_23$1),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:0,manifest:cr.value[0].id},null,8,_hoisted_25$1))],64))])):createCommentVNode("",!0)]),sr.value==="image"&&yn.value>1?(openBlock(),createElementBlock("ve-pager",{key:0,total:yn.value,current:pr.value,onImageSelected:mr},null,40,_hoisted_26$1)):createCommentVNode("",!0),pn.value&&!rt.noCaption?(openBlock(),createElementBlock("div",{key:1,id:"caption-bar",onClick:Ht},[sr.value==="image"?(openBlock(),createElementBlock("div",{key:0,id:"annotations-icon",class:"button-icon-with-badge",onClick:mn},[sn.value?(openBlock(),createElementBlock(Fragment,{key:0},[ln.value?(openBlock(),createElementBlock("sl-icon-button",_hoisted_27$1)):(openBlock(),createElementBlock("sl-icon-button",_hoisted_28$1)),!ln.value&&rn.value.length>0?(openBlock(),createElementBlock("sl-badge",_hoisted_29,toDisplayString(rn.value.length),1)):createCommentVNode("",!0)],64)):rn.value.length>0?(openBlock(),createElementBlock(Fragment,{key:1},[ln.value?(openBlock(),createElementBlock("sl-icon-button",_hoisted_30)):(openBlock(),createElementBlock("sl-icon-button",_hoisted_31)),ln.value?createCommentVNode("",!0):(openBlock(),createElementBlock("sl-badge",_hoisted_32,toDisplayString(rn.value.length),1))],64)):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",{class:"label",innerHTML:pn.value},null,8,_hoisted_33)])):createCommentVNode("",!0),wn.value?(openBlock(),createElementBlock("div",{key:2,id:"coords",innerHTML:wn.value,onClick:Yr[1]||(Yr[1]=Vr=>dr(wn.value||""))},null,8,_hoisted_34)):createCommentVNode("",!0)],2),createBaseVNode("sl-dialog",_hoisted_35,[kn.value?(openBlock(),createElementBlock("ve-media",{key:0,src:kn.value,"zoom-on-scroll":""},null,8,_hoisted_36)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:gn,variant:"primary"},"Close")])],42,_hoisted_1$b)],64))}}),_style_0$8=`.r6o-editor{top:0;left:0;margin-left:-19px}.a9s-annotationlayer{position:absolute;top:0;left:0;width:100%;height:100%;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.a9s-annotationlayer.no-cursor,.a9s-annotationlayer.no-cursor *{cursor:none!important}.a9s-crosshair line{stroke-width:1px;stroke:#00000080;pointer-events:none;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.a9s-selection-mask{stroke:none;fill:transparent;pointer-events:none}.a9s-annotation rect,.a9s-annotation circle,.a9s-annotation ellipse,.a9s-annotation path,.a9s-annotation polygon,.a9s-annotation line,.a9s-selection rect,.a9s-selection circle,.a9s-selection ellipse,.a9s-selection path,.a9s-selection polygon,.a9s-selection line{fill:transparent;cursor:pointer;vector-effect:non-scaling-stroke}.a9s-annotation .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff;stroke-width:1px;fill:transparent}.a9s-annotation .a9s-inner:hover,.a9s-selection .a9s-inner:hover{stroke:#fff000}.a9s-annotation .a9s-outer,.a9s-selection .a9s-outer{stroke:#000000b3;stroke-width:3px;fill:none}.a9s-annotation .a9s-formatter-el,.a9s-selection .a9s-formatter-el{overflow:visible}.a9s-annotation.a9s-point .a9s-inner{display:none}.a9s-annotation.a9s-point .a9s-outer{stroke:#5a5a5a;stroke-width:1.5px;fill:#ffffff80}.a9s-annotation.a9s-point .a9s-outer:hover{fill:#fff000}.a9s-annotation.selected .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff000}.a9s-annotation.editable .a9s-inner{stroke:#fff000;cursor:move!important}.a9s-annotation.editable .a9s-inner:hover{fill:#fff0001a}.a9s-handle{cursor:move}.a9s-handle .a9s-handle-inner{stroke:#fff000;fill:#000}.a9s-handle .a9s-handle-outer{stroke:#000;fill:#fff}.a9s-handle:hover .a9s-handle-inner{fill:#fff000}.r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle;cursor:pointer}.r6o-btn .r6o-icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2!important;background-color:#a3c2e2!important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-autocomplete{display:inline;position:relative}.r6o-autocomplete div[role=combobox]{display:inline}.r6o-autocomplete input{outline:none;border:none;width:80px;height:100%;line-height:14px;white-space:pre;box-sizing:border-box;background-color:transparent;font-size:14px;color:#3f3f3f}.r6o-autocomplete ul{position:absolute;margin:0;padding:0;list-style-type:none;background-color:#fff;border-radius:3px;border:1px solid #d6d7d9;box-sizing:border-box;box-shadow:0 0 20px #00000040}.r6o-autocomplete ul:empty{display:none}.r6o-autocomplete li{box-sizing:border-box;padding:2px 12px;width:100%;cursor:pointer}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:Lato,sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative}.r6o-widget.comment .r6o-editable-text,.r6o-widget.comment .r6o-readonly-comment{padding:10px;width:100%;box-sizing:border-box;outline:none;border:none;background-color:transparent;resize:none}.r6o-widget.comment .r6o-readonly-comment{white-space:pre-line}.r6o-widget.comment .r6o-editable-text::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text::-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-ms-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;margin:0 10px 8px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .r6o-lastmodified .r6o-lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .r6o-arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .r6o-arrow-down.r6o-menu-open{border-color:#4483c4}.r6o-widget.comment .r6o-comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px #0003}.r6o-widget.comment .r6o-comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .r6o-comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment .r6o-purposedropdown{position:relative;z-index:2}.r6o-widget.comment.editable{background-color:#ecf0f1}.r6o-widget.r6o-tag:empty{display:none}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.r6o-widget.tag .r6o-taglist li{height:27px}.r6o-widget.tag .r6o-taglist li .r6o-delete-wrapper .r6o-delete{position:relative;top:-4px}}.r6o-widget.r6o-tag{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px;display:flex}.r6o-widget.r6o-tag ul{margin:0;padding:0;list-style-type:none;z-index:1}.r6o-widget.r6o-tag ul.r6o-taglist{flex:0;white-space:nowrap}.r6o-widget.r6o-tag ul.r6o-taglist li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,.1);-moz-box-shadow:0 0 4px rgba(0,0,0,.1);box-shadow:0 0 4px #0000001a}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-label{padding:2px 8px;display:inline-block}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper .r6o-delete{padding:2px 6px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper svg{vertical-align:text-top}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-active{width:24px;transition:width .2s}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-done,.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit{width:24px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit-active{width:0;transition:width .2s}.r6o-widget.r6o-tag .r6o-autocomplete{flex:1;position:relative}.r6o-widget.r6o-tag .r6o-autocomplete li{font-size:14px}.r6o-widget.r6o-tag input{width:100%;padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.r6o-widget.r6o-tag input::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input::-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-ms-input-placeholder{color:#c2c2c2}.r6o-editor{position:absolute;z-index:99999;width:400px;color:#3f3f3f;opacity:0;font-family:Lato,sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity .2s ease-in;-moz-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.r6o-editor .r6o-arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px;display:none}.r6o-editor .r6o-arrow:after{content:"";position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .r6o-editor-inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,.4);box-shadow:2px 2px 42px #0006}.r6o-editor .r6o-editor-inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .r6o-editor-inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .r6o-footer{position:relative;text-align:right;padding:8px 0}.r6o-editor .r6o-footer .r6o-btn{margin-right:8px}.r6o-editor .r6o-footer .r6o-btn.delete-annotation{position:absolute;top:7px;left:7px;background-color:transparent;border:none;color:#4483c4;width:32px;height:32px;min-width:0;border-radius:100%;padding:0;display:flex;justify-content:center;align-items:center;-webkit-transition:all .1s ease-in;-moz-transition:all .1s ease-in;-o-transition:all .1s ease-in;transition:all .1s ease-in}.r6o-editor .r6o-footer .r6o-btn.delete-annotation:hover{color:#fff;background-color:#ef352c}@media (max-width: 640px){.r6o-editor{width:260px}}.r6o-editor.r6o-arrow-top .r6o-arrow{display:block}.r6o-editor.r6o-arrow-right{margin-left:8px}.r6o-editor.r6o-arrow-right .r6o-arrow{left:auto;right:12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow{display:block;top:auto;bottom:-12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow:after{top:-11px;box-shadow:none}.r6o-editor.pushed .r6o-arrow,.r6o-editor.dragged .r6o-arrow{display:none}.r6o-editor .r6o-draggable{cursor:move}.r6o-purposedropdown{width:150px;display:inline-block}.r6o-noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.a9s-annotation.hover .a9s-inner{stroke:#fff000}.a9s-annotation:not(.hover):hover .a9s-inner{stroke:#fff}*{box-sizing:border-box}:host{display:block;padding-bottom:6px}.info-icon{position:absolute;top:12px;right:12px;width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center;visibility:hidden}.media-item:hover .info-icon{visibility:visible;transition:all .3s ease-in}.manifest-popover{background-color:#fff;border-radius:6px;width:300px;height:400px;overflow-y:scroll;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#outer{position:relative;width:100%;background-color:#fff;display:flex;justify-items:center}#outer{margin-bottom:12px}#inner{margin:auto;width:100%}#inner.image,.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#content{width:100%}#osd,video{width:100%;height:100%}#caption-bar{display:flex;gap:6px;width:100%;align-items:center;height:32px;background-color:#555}#caption-bar .label{color:#fff;padding:0 9px;font-size:1.1rem;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:pointer}.image-wrapper{position:relative;height:100%;width:100%}.grid-wrapper{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper.small{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper>.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}.grid-wrapper img{border:1px solid #ccc;box-shadow:2px 2px 6px #0000004d;max-width:100%;cursor:pointer}#coords{position:absolute;display:flex;align-items:center;justify-content:flex-end;font-family:sans-serif;bottom:0;right:0;width:130px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#coords:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy}.info-icon span{position:absolute;top:20px;right:20px;font-size:24px;z-index:2;opacity:0;border-radius:50%;border:1px solid white;background-color:#0003}.media-item{position:relative}.media-item:hover .info-icon span{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:pointer;color:#fff}.info-icon:hover svg{fill:#000}.view .r6o-footer{display:none}.r6o-readonly-comment{display:inline}.view .r6o-editor,.view .r6o-editor-inner,.view .r6o-widget{display:inline-block;min-height:unset!important;line-height:1.4;padding:9px;border-bottom:none}.r6o-tag,.comment.editable:nth-of-type(2){display:none!important}.edit .r6o-editor{width:216px}svg.a9s-annotationlayer .a9s-selection .a9s-inner,svg.a9s-annotationlayer .a9s-annotation .a9s-inner{stroke-width:3;stroke:#ff0}ul.annotations{list-style:none;padding-left:0}.annotations li{display:flex;align-items:center;gap:6px;padding:6px 0}.annotations li:hover{background-color:#fff3;cursor:pointer}.compare{height:100%;width:100%;position:relative;overflow:hidden;border:5px solid #bfc0c1;box-shadow:-3px 5px 15px #000}.compare img{width:100%;height:100%;position:absolute}#compare-img-2{clip-path:polygon(0 0,50% 0,50% 100%,0 100%)}#slider{position:relative;-webkit-appearance:none;width:calc(100% + 40px);height:100%;margin-left:-20px;background-color:transparent;outline:none}#slider::-webkit-slider-thumb{-webkit-appearance:none;height:45px;width:45px;background:rgba(255,255,255,.3);border:4px solid white;border-radius:50%;background-size:contain;cursor:pointer}audio#html5-player{width:calc(100% - 60px);max-width:50vh}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.popup-overview sl-popup{--arrow-color: var(--sl-color-primary-600)}.popup-overview span[slot=anchor]{display:inline-block;width:150px;height:150px;border:dashed 2px var(--sl-color-neutral-600);margin:50px}.popup-overview .box{width:100px;height:50px;background:var(--sl-color-primary-600);border-radius:var(--sl-border-radius-medium)}.popup-overview-options{display:flex;flex-wrap:wrap;align-items:end;gap:1rem}.popup-overview-options sl-select{width:160px}.popup-overview-options sl-input{width:100px}.popup-overview-options+.popup-overview-options{margin-top:1rem}sl-popup{--arrow-color: var(--sl-color-primary-600)}.media-item .box{width:300px;height:600px;background:white;border-radius:var(--sl-border-radius-medium)}#annotations-icon{position:relative;cursor:pointer}#annotations-icon sl-icon-button::part(base){color:#fff;font-size:1.2rem;padding:3px}.button-icon-with-badge{display:inline-block;position:relative;margin:0 6px}.button-icon-with-badge sl-badge{position:absolute;left:70%;top:0;cursor:pointer}.button-icon-with-badge sl-badge::part(base){font-size:.7rem;background-color:#ff0;color:#000;font-weight:700;padding:4px 5px 1px;border:unset}#youtube-placeholder,#ve-video-vimeo{width:100%}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,MediaViewer=_export_sfc(_sfc_main$d,[["styles",[_style_0$8]]]),_hoisted_1$a=createBaseVNode("input",{class:"menu-btn",type:"checkbox",id:"menu-btn"},null,-1),_hoisted_2$8={key:0,class:"wrapper"},_hoisted_3$8=createBaseVNode("label",{class:"menu-icon",htmlFor:"menu-btn"},[createBaseVNode("span",{class:"navicon"})],-1),_hoisted_4$6=["onClick"],_hoisted_5$5=["name"],_hoisted_6$4=["contact"],_sfc_main$c=defineComponent({__name:"Menu.ce",props:{background:{type:String},position:{type:String,default:"left"},contact:{type:String}},setup(nt){const rt=nt,it={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","beta.juncture-digital.org":"f30ce4168a0bb95ecaa3","dev.juncture-digital.org":"bb290b5a738cb6fe31c7","tools.juncture-digital.org":"0b40086fe912d97c03e6"},vt={about:{icon:"info-circle-fill"},contact:{icon:"envelope-fill"},documentation:{icon:"book"},docs:{icon:"book"},editor:{icon:"pencil",loginRequired:!0},essays:{icon:"pencil"},help:{icon:"question-circle"},home:{icon:"house-fill"},"how to":{icon:"book-fill"},link:{icon:"link-45deg"},login:{icon:"person-circle"},logout:{icon:"person-circle"},markdown:{icon:"markdown"},media:{icon:"images",loginRequired:!0},showcase:{icon:"easel2"},tools:{icon:"tools",loginRequired:!0}},bt=ref(null),wt=computed(()=>{var mn,wn;return(wn=(mn=bt.value)==null?void 0:mn.getRootNode())==null?void 0:wn.host}),Tt=computed(()=>{var mn;return(mn=bt==null?void 0:bt.value)==null?void 0:mn.parentNode}),kt=ref(!1),Lt=ref([]),Mt=ref();let Nt,zt;onMounted(()=>{Ht(),nextTick(()=>{var wn;let mn=Array.from(((wn=wt.value.children[0])==null?void 0:wn.children)||[]);mn.length>0&&(Lt.value=mn.map(Cn=>{if(Cn.firstChild.nodeName==="A"){let An=Cn.firstChild;return{label:An.textContent,href:An.href,newWindow:An.getAttribute("target")==="_blank"}}else{let An=Cn.firstChild.textContent;return An.toLowerCase()==="auth"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:{label:An}}}).filter(Cn=>Cn.label.toLowerCase().indexOf("contact")!==0||rt.contact))})});function Ht(){kt.value=Wt()!==null;let mn=new URL(window.location.href).searchParams.get("code");if(mn){window.history.replaceState({},"",window.location.pathname);let Cn=window.location.hostname==="localhost"||window.location.hostname.indexOf("192.168.")===0?`http://${window.location.hostname}:8000/gh-token?code=${mn}&hostname=${window.location.hostname}`:`https://api.juncture-digital.org/gh-token?code=${mn}&hostname=${window.location.hostname}`;console.log("token url:",Cn),fetch(Cn).then(An=>An.text()).then(An=>{An&&(kt.value=!0,localStorage.setItem("gh-auth-token",An),window.dispatchEvent(new Event("storage")))}).catch(An=>console.log("err",An))}wt.value.classList.add(rt.position)}watch$1(Lt,()=>{Mt.value=Lt.value.filter(mn=>{var Cn;let wn=mn.href?mn.href.split("/").filter(An=>An).pop().toLowerCase():"link";return!vt[wn]||!((Cn=vt[wn])!=null&&Cn.loginRequired)||kt.value}).map(mn=>mn.label==="Login"||mn.label==="Logout"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:mn)}),watch$1(kt,()=>{Mt.value=Lt.value.filter(mn=>{var Cn;let wn=mn.href?mn.href.split("/").filter(An=>An).pop().toLowerCase():"link";return!vt[wn]||!((Cn=vt[wn])!=null&&Cn.loginRequired)||kt.value}).map(mn=>mn.label==="Login"||mn.label==="Logout"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:mn)});function Wt(){return localStorage.getItem("gh-auth-token")}function Zt(){var wn;let mn=(wn=Tt.value)==null?void 0:wn.querySelector("ve-contact");mn._instance.exposed.show.value=!0}function tn(){Nt&&Nt.close();let wn=window.location.hostname==="localhost"||window.location.hostname.indexOf("192.168.")===0?`http://${window.location.hostname}:8080/help`:"https://beta.juncture-digital.org/help",Cn="toolbar=yes,location=yes,left=0,top=0,width=1040,height=1200,scrollbars=yes,status=yes";Nt=window.open(wn,"_blank",Cn)}function Yt(){var wn;let mn=(wn=Tt.value)==null?void 0:wn.querySelector("#markdown");mn.show=!mn.show}function nn(){let mn=new URL(window.location.href).hostname,wn=mn==="localhost"||mn.indexOf("192.168.")===0,Cn=wn?`${window.location.origin}${window.location.pathname}?code=testing`:it[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${it[location.hostname]}&scope=repo&state=juncture&redirect_uri=${location.href}`:null;console.log(`login: hostname=${mn} isDev=${wn} href=${Cn}`),Cn&&(window.location.href=Cn)}function rn(){console.log("logout"),Object.keys(localStorage).forEach(mn=>localStorage.removeItem(mn)),window.dispatchEvent(new Event("storage")),kt.value=!1}function ln(mn){let wn="",Cn=mn.label.toLowerCase();return Object.keys(vt).forEach(An=>{Cn.indexOf(An)>=0&&(wn=vt[An].icon)}),wn||"link"}function sn(mn){var Cn;console.log("menuItemSelected",mn);let wn=mn.href?mn.href.split("/").pop().toLowerCase():"";if((wn.indexOf("contact")===0||mn.label.toLowerCase().indexOf("contact")===0)&&rt.contact)Zt();else if(wn==="login")nn();else if(wn==="logout")rn();else if(wn==="help")tn();else if(wn==="markdown")Yt();else if(mn.href)if(mn.newWindow)zt&&zt.close(),zt=window.open(mn.href,"_blank","toolbar=yes,location=yes,left=0,top=0,width=1024,height=1200,scrollbars=yes,status=yes");else if(mn.href.indexOf("/window.")>0){let An=mn.href.split("/window.").pop();window[An]()}else location.href=mn.href;((Cn=Tt.value)==null?void 0:Cn.querySelector("#menu-btn")).checked=!1}return(mn,wn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:bt},[createBaseVNode("div",{class:"nav",style:normalizeStyle({backgroundColor:rt.background})},[_hoisted_1$a,Mt.value?(openBlock(),createElementBlock("div",_hoisted_2$8,[_hoisted_3$8,createBaseVNode("ul",{class:"menu",style:normalizeStyle({backgroundColor:rt.background||"#444"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Mt.value,(Cn,An)=>(openBlock(),createElementBlock("li",{key:`nav-${An}`,onClick:Pn=>sn(Cn)},[createBaseVNode("sl-icon",{slot:"prefix",name:ln(Cn),label:"item.label"},null,8,_hoisted_5$5),createTextVNode(" "+toDisplayString(Cn.label),1)],8,_hoisted_4$6))),128))],4)])):createCommentVNode("",!0)],4),createBaseVNode("ve-contact",{contact:rt.contact},null,8,_hoisted_6$4)],512))}}),_style_0$7=`:host,ve-menu{height:100%}:host(.right) .menu,ve-menu.right .menu{right:0}.hydrated ul{display:none}.nav{display:inline-block;position:relative;z-index:10;height:100%;background-color:inherit}.menu{display:none;clear:both;max-height:0;transition:max-height .2s ease-out;position:absolute;top:58px;width:200px;background-color:#0009;color:#fff}ul.menu{padding:0;list-style:none}.menu li{display:flex;padding:10px 20px;text-decoration:none;cursor:pointer;font-size:1rem}.menu li:hover{text-decoration:underline;background-color:inherit;filter:brightness(150%)}.menu-icon{cursor:pointer;display:inline-block;padding:34px 20px;position:relative;user-select:none}.menu-icon .navicon,.menu-icon .navicon:before,.menu-icon .navicon:after{background:#fff}.menu-icon .navicon{display:block;height:4px;border-radius:2px;position:relative;transition:background .2s ease-out;width:32px}.menu-icon .navicon:before,.menu-icon .navicon:after{content:"";display:block;height:100%;position:absolute;transition:all .2s ease-out;width:100%;border-radius:2px}.menu-icon .navicon:before{top:10px}.menu-icon .navicon:after{top:-10px}.menu sl-icon{padding-right:12px}.menu-btn{display:none}.menu-btn:checked~.wrapper{filter:brightness(150%);background-color:inherit}.menu-btn:checked~.wrapper .menu{max-height:unset;display:block}.menu-btn:checked~.wrapper .menu-icon .navicon{background:transparent}.menu-btn:checked~.wrapper .menu-icon .navicon:before{transform:rotate(-45deg)}.menu-btn:checked~.wrapper .menu-icon .navicon:after{transform:rotate(45deg)}.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:before,.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:after{top:0}
`,Menu=_export_sfc(_sfc_main$c,[["styles",[_style_0$7]]]);function commonjsRequire(nt){throw new Error('Could not dynamically require "'+nt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var moment_min={exports:{}};(function(nt,rt){(function(it,vt){nt.exports=vt()})(commonjsGlobal$1,function(){var it;function vt(){return it.apply(null,arguments)}function bt(Xt){return Xt instanceof Array||Object.prototype.toString.call(Xt)==="[object Array]"}function wt(Xt){return Xt!=null&&Object.prototype.toString.call(Xt)==="[object Object]"}function Tt(Xt,hn){return Object.prototype.hasOwnProperty.call(Xt,hn)}function kt(Xt){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(Xt).length===0;for(var hn in Xt)if(Tt(Xt,hn))return;return 1}function Lt(Xt){return Xt===void 0}function Mt(Xt){return typeof Xt=="number"||Object.prototype.toString.call(Xt)==="[object Number]"}function Nt(Xt){return Xt instanceof Date||Object.prototype.toString.call(Xt)==="[object Date]"}function zt(Xt,hn){for(var Mn=[],Kn=Xt.length,hr=0;hr<Kn;++hr)Mn.push(hn(Xt[hr],hr));return Mn}function Ht(Xt,hn){for(var Mn in hn)Tt(hn,Mn)&&(Xt[Mn]=hn[Mn]);return Tt(hn,"toString")&&(Xt.toString=hn.toString),Tt(hn,"valueOf")&&(Xt.valueOf=hn.valueOf),Xt}function Wt(Xt,hn,Mn,Kn){return Vo(Xt,hn,Mn,Kn,!0).utc()}function Zt(Xt){return Xt._pf==null&&(Xt._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),Xt._pf}function tn(Xt){if(Xt._isValid==null){var hn=Zt(Xt),Mn=nn.call(hn.parsedDateParts,function(Kn){return Kn!=null}),Mn=!isNaN(Xt._d.getTime())&&hn.overflow<0&&!hn.empty&&!hn.invalidEra&&!hn.invalidMonth&&!hn.invalidWeekday&&!hn.weekdayMismatch&&!hn.nullInput&&!hn.invalidFormat&&!hn.userInvalidated&&(!hn.meridiem||hn.meridiem&&Mn);if(Xt._strict&&(Mn=Mn&&hn.charsLeftOver===0&&hn.unusedTokens.length===0&&hn.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(Xt))return Mn;Xt._isValid=Mn}return Xt._isValid}function Yt(Xt){var hn=Wt(NaN);return Xt!=null?Ht(Zt(hn),Xt):Zt(hn).userInvalidated=!0,hn}var nn=Array.prototype.some||function(Xt){for(var hn=Object(this),Mn=hn.length>>>0,Kn=0;Kn<Mn;Kn++)if(Kn in hn&&Xt.call(this,hn[Kn],Kn,hn))return!0;return!1},rn=vt.momentProperties=[],ln=!1;function sn(Xt,hn){var Mn,Kn,hr,zr=rn.length;if(Lt(hn._isAMomentObject)||(Xt._isAMomentObject=hn._isAMomentObject),Lt(hn._i)||(Xt._i=hn._i),Lt(hn._f)||(Xt._f=hn._f),Lt(hn._l)||(Xt._l=hn._l),Lt(hn._strict)||(Xt._strict=hn._strict),Lt(hn._tzm)||(Xt._tzm=hn._tzm),Lt(hn._isUTC)||(Xt._isUTC=hn._isUTC),Lt(hn._offset)||(Xt._offset=hn._offset),Lt(hn._pf)||(Xt._pf=Zt(hn)),Lt(hn._locale)||(Xt._locale=hn._locale),0<zr)for(Mn=0;Mn<zr;Mn++)Lt(hr=hn[Kn=rn[Mn]])||(Xt[Kn]=hr);return Xt}function mn(Xt){sn(this,Xt),this._d=new Date(Xt._d!=null?Xt._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ln===!1&&(ln=!0,vt.updateOffset(this),ln=!1)}function wn(Xt){return Xt instanceof mn||Xt!=null&&Xt._isAMomentObject!=null}function Cn(Xt){vt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+Xt)}function An(Xt,hn){var Mn=!0;return Ht(function(){if(vt.deprecationHandler!=null&&vt.deprecationHandler(null,Xt),Mn){for(var Kn,hr,zr=[],ti=arguments.length,ci=0;ci<ti;ci++){if(Kn="",typeof arguments[ci]=="object"){for(hr in Kn+=`
[`+ci+"] ",arguments[0])Tt(arguments[0],hr)&&(Kn+=hr+": "+arguments[0][hr]+", ");Kn=Kn.slice(0,-2)}else Kn=arguments[ci];zr.push(Kn)}Cn(Xt+`
Arguments: `+Array.prototype.slice.call(zr).join("")+`
`+new Error().stack),Mn=!1}return hn.apply(this,arguments)},hn)}var Pn={};function On(Xt,hn){vt.deprecationHandler!=null&&vt.deprecationHandler(Xt,hn),Pn[Xt]||(Cn(hn),Pn[Xt]=!0)}function kn(Xt){return typeof Function<"u"&&Xt instanceof Function||Object.prototype.toString.call(Xt)==="[object Function]"}function gn(Xt,hn){var Mn,Kn=Ht({},Xt);for(Mn in hn)Tt(hn,Mn)&&(wt(Xt[Mn])&&wt(hn[Mn])?(Kn[Mn]={},Ht(Kn[Mn],Xt[Mn]),Ht(Kn[Mn],hn[Mn])):hn[Mn]!=null?Kn[Mn]=hn[Mn]:delete Kn[Mn]);for(Mn in Xt)Tt(Xt,Mn)&&!Tt(hn,Mn)&&wt(Xt[Mn])&&(Kn[Mn]=Ht({},Kn[Mn]));return Kn}function Vn(Xt){Xt!=null&&this.set(Xt)}vt.suppressDeprecationWarnings=!1,vt.deprecationHandler=null;var pn=Object.keys||function(Xt){var hn,Mn=[];for(hn in Xt)Tt(Xt,hn)&&Mn.push(hn);return Mn};function pr(Xt,hn,Mn){var Kn=""+Math.abs(Xt);return(0<=Xt?Mn?"+":"":"-")+Math.pow(10,Math.max(0,hn-Kn.length)).toString().substr(1)+Kn}var yn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,mr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Er={},Mr={};function rr(Xt,hn,Mn,Kn){var hr=typeof Kn=="string"?function(){return this[Kn]()}:Kn;Xt&&(Mr[Xt]=hr),hn&&(Mr[hn[0]]=function(){return pr(hr.apply(this,arguments),hn[1],hn[2])}),Mn&&(Mr[Mn]=function(){return this.localeData().ordinal(hr.apply(this,arguments),Xt)})}function vr(Xt,hn){return Xt.isValid()?(hn=cr(hn,Xt.localeData()),Er[hn]=Er[hn]||function(Mn){for(var Kn,hr=Mn.match(yn),zr=0,ti=hr.length;zr<ti;zr++)Mr[hr[zr]]?hr[zr]=Mr[hr[zr]]:hr[zr]=(Kn=hr[zr]).match(/\[[\s\S]/)?Kn.replace(/^\[|\]$/g,""):Kn.replace(/\\/g,"");return function(ci){for(var Ni="",Li=0;Li<ti;Li++)Ni+=kn(hr[Li])?hr[Li].call(ci,Mn):hr[Li];return Ni}}(hn),Er[hn](Xt)):Xt.localeData().invalidDate()}function cr(Xt,hn){var Mn=5;function Kn(hr){return hn.longDateFormat(hr)||hr}for(mr.lastIndex=0;0<=Mn&&mr.test(Xt);)Xt=Xt.replace(mr,Kn),mr.lastIndex=0,--Mn;return Xt}var gr={};function Or(Xt,hn){var Mn=Xt.toLowerCase();gr[Mn]=gr[Mn+"s"]=gr[hn]=Xt}function Ar(Xt){return typeof Xt=="string"?gr[Xt]||gr[Xt.toLowerCase()]:void 0}function sr(Xt){var hn,Mn,Kn={};for(Mn in Xt)Tt(Xt,Mn)&&(hn=Ar(Mn))&&(Kn[hn]=Xt[Mn]);return Kn}var ii={};function ar(Xt,hn){ii[Xt]=hn}function fr(Xt){return Xt%4==0&&Xt%100!=0||Xt%400==0}function wr(Xt){return Xt<0?Math.ceil(Xt)||0:Math.floor(Xt)}function ir(hn){var hn=+hn,Mn=0;return Mn=hn!=0&&isFinite(hn)?wr(hn):Mn}function Ln(Xt,hn){return function(Mn){return Mn!=null?(dn(this,Xt,Mn),vt.updateOffset(this,hn),this):en(this,Xt)}}function en(Xt,hn){return Xt.isValid()?Xt._d["get"+(Xt._isUTC?"UTC":"")+hn]():NaN}function dn(Xt,hn,Mn){Xt.isValid()&&!isNaN(Mn)&&(hn==="FullYear"&&fr(Xt.year())&&Xt.month()===1&&Xt.date()===29?(Mn=ir(Mn),Xt._d["set"+(Xt._isUTC?"UTC":"")+hn](Mn,Xt.month(),Ir(Mn,Xt.month()))):Xt._d["set"+(Xt._isUTC?"UTC":"")+hn](Mn))}var un=/\d/,Eo=/\d\d/,Nn=/\d{3}/,Lc=/\d{4}/,Za=/[+-]?\d{6}/,In=/\d\d?/,lr=/\d\d\d\d?/,$n=/\d\d\d\d\d\d?/,Qn=/\d{1,3}/,Ua=/\d{1,4}/,ma=/[+-]?\d{1,6}/,Wn=/\d+/,or=/[+-]?\d+/,dr=/Z|[+-]\d\d:?\d\d/gi,kr=/Z|[+-]\d\d(?::?\d\d)?/gi,br=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function _r(Xt,hn,Mn){vi[Xt]=kn(hn)?hn:function(Kn,hr){return Kn&&Mn?Mn:hn}}function hi(Xt,hn){return Tt(vi,Xt)?vi[Xt](hn._strict,hn._locale):new RegExp(di(Xt.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(Mn,Kn,hr,zr,ti){return Kn||hr||zr||ti})))}function di(Xt){return Xt.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var vi={},Ai={};function ki(Xt,hn){var Mn,Kn,hr=hn;for(typeof Xt=="string"&&(Xt=[Xt]),Mt(hn)&&(hr=function(zr,ti){ti[hn]=ir(zr)}),Kn=Xt.length,Mn=0;Mn<Kn;Mn++)Ai[Xt[Mn]]=hr}function Bi(Xt,hn){ki(Xt,function(Mn,Kn,hr,zr){hr._w=hr._w||{},hn(Mn,hr._w,hr,zr)})}var Ti,Rr=0,Tn=1,Sn=2,jn=3,er=4,Cr=5,Qr=6,yr=7,ai=8;function Ir(Xt,hn){if(isNaN(Xt)||isNaN(hn))return NaN;var Mn=(hn%(Mn=12)+Mn)%Mn;return Xt+=(hn-Mn)/12,Mn==1?fr(Xt)?29:28:31-Mn%7%2}Ti=Array.prototype.indexOf||function(Xt){for(var hn=0;hn<this.length;++hn)if(this[hn]===Xt)return hn;return-1},rr("M",["MM",2],"Mo",function(){return this.month()+1}),rr("MMM",0,0,function(Xt){return this.localeData().monthsShort(this,Xt)}),rr("MMMM",0,0,function(Xt){return this.localeData().months(this,Xt)}),Or("month","M"),ar("month",8),_r("M",In),_r("MM",In,Eo),_r("MMM",function(Xt,hn){return hn.monthsShortRegex(Xt)}),_r("MMMM",function(Xt,hn){return hn.monthsRegex(Xt)}),ki(["M","MM"],function(Xt,hn){hn[Tn]=ir(Xt)-1}),ki(["MMM","MMMM"],function(Xt,hn,Mn,Kn){Kn=Mn._locale.monthsParse(Xt,Kn,Mn._strict),Kn!=null?hn[Tn]=Kn:Zt(Mn).invalidMonth=Xt});var mi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),wi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Mi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ei=br,io=br;function Di(Xt,hn){var Mn;if(Xt.isValid()){if(typeof hn=="string"){if(/^\d+$/.test(hn))hn=ir(hn);else if(!Mt(hn=Xt.localeData().monthsParse(hn)))return}Mn=Math.min(Xt.date(),Ir(Xt.year(),hn)),Xt._d["set"+(Xt._isUTC?"UTC":"")+"Month"](hn,Mn)}}function eo(Xt){return Xt!=null?(Di(this,Xt),vt.updateOffset(this,!0),this):en(this,"Month")}function wo(){function Xt(ti,ci){return ci.length-ti.length}for(var hn,Mn=[],Kn=[],hr=[],zr=0;zr<12;zr++)hn=Wt([2e3,zr]),Mn.push(this.monthsShort(hn,"")),Kn.push(this.months(hn,"")),hr.push(this.months(hn,"")),hr.push(this.monthsShort(hn,""));for(Mn.sort(Xt),Kn.sort(Xt),hr.sort(Xt),zr=0;zr<12;zr++)Mn[zr]=di(Mn[zr]),Kn[zr]=di(Kn[zr]);for(zr=0;zr<24;zr++)hr[zr]=di(hr[zr]);this._monthsRegex=new RegExp("^("+hr.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+Kn.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+Mn.join("|")+")","i")}function Ji(Xt){return fr(Xt)?366:365}rr("Y",0,0,function(){var Xt=this.year();return Xt<=9999?pr(Xt,4):"+"+Xt}),rr(0,["YY",2],0,function(){return this.year()%100}),rr(0,["YYYY",4],0,"year"),rr(0,["YYYYY",5],0,"year"),rr(0,["YYYYYY",6,!0],0,"year"),Or("year","y"),ar("year",1),_r("Y",or),_r("YY",In,Eo),_r("YYYY",Ua,Lc),_r("YYYYY",ma,Za),_r("YYYYYY",ma,Za),ki(["YYYYY","YYYYYY"],Rr),ki("YYYY",function(Xt,hn){hn[Rr]=Xt.length===2?vt.parseTwoDigitYear(Xt):ir(Xt)}),ki("YY",function(Xt,hn){hn[Rr]=vt.parseTwoDigitYear(Xt)}),ki("Y",function(Xt,hn){hn[Rr]=parseInt(Xt,10)}),vt.parseTwoDigitYear=function(Xt){return ir(Xt)+(68<ir(Xt)?1900:2e3)};var kl=Ln("FullYear",!0);function al(Xt,hn,Mn,Kn,hr,zr,ti){var ci;return Xt<100&&0<=Xt?(ci=new Date(Xt+400,hn,Mn,Kn,hr,zr,ti),isFinite(ci.getFullYear())&&ci.setFullYear(Xt)):ci=new Date(Xt,hn,Mn,Kn,hr,zr,ti),ci}function Ws(Xt){var hn;return Xt<100&&0<=Xt?((hn=Array.prototype.slice.call(arguments))[0]=Xt+400,hn=new Date(Date.UTC.apply(null,hn)),isFinite(hn.getUTCFullYear())&&hn.setUTCFullYear(Xt)):hn=new Date(Date.UTC.apply(null,arguments)),hn}function Pi(Xt,hn,Mn){return Mn=7+hn-Mn,Mn-(7+Ws(Xt,0,Mn).getUTCDay()-hn)%7-1}function oo(Xt,ti,ci,Kn,hr){var zr,ti=1+7*(ti-1)+(7+ci-Kn)%7+Pi(Xt,Kn,hr),ci=ti<=0?Ji(zr=Xt-1)+ti:ti>Ji(Xt)?(zr=Xt+1,ti-Ji(Xt)):(zr=Xt,ti);return{year:zr,dayOfYear:ci}}function Rs(Xt,hn,Mn){var Kn,hr,zr=Pi(Xt.year(),hn,Mn),zr=Math.floor((Xt.dayOfYear()-zr-1)/7)+1;return zr<1?Kn=zr+jo(hr=Xt.year()-1,hn,Mn):zr>jo(Xt.year(),hn,Mn)?(Kn=zr-jo(Xt.year(),hn,Mn),hr=Xt.year()+1):(hr=Xt.year(),Kn=zr),{week:Kn,year:hr}}function jo(Xt,hr,Mn){var Kn=Pi(Xt,hr,Mn),hr=Pi(Xt+1,hr,Mn);return(Ji(Xt)-Kn+hr)/7}rr("w",["ww",2],"wo","week"),rr("W",["WW",2],"Wo","isoWeek"),Or("week","w"),Or("isoWeek","W"),ar("week",5),ar("isoWeek",5),_r("w",In),_r("ww",In,Eo),_r("W",In),_r("WW",In,Eo),Bi(["w","ww","W","WW"],function(Xt,hn,Mn,Kn){hn[Kn.substr(0,1)]=ir(Xt)});function ls(Xt,hn){return Xt.slice(hn,7).concat(Xt.slice(0,hn))}rr("d",0,"do","day"),rr("dd",0,0,function(Xt){return this.localeData().weekdaysMin(this,Xt)}),rr("ddd",0,0,function(Xt){return this.localeData().weekdaysShort(this,Xt)}),rr("dddd",0,0,function(Xt){return this.localeData().weekdays(this,Xt)}),rr("e",0,0,"weekday"),rr("E",0,0,"isoWeekday"),Or("day","d"),Or("weekday","e"),Or("isoWeekday","E"),ar("day",11),ar("weekday",11),ar("isoWeekday",11),_r("d",In),_r("e",In),_r("E",In),_r("dd",function(Xt,hn){return hn.weekdaysMinRegex(Xt)}),_r("ddd",function(Xt,hn){return hn.weekdaysShortRegex(Xt)}),_r("dddd",function(Xt,hn){return hn.weekdaysRegex(Xt)}),Bi(["dd","ddd","dddd"],function(Xt,hn,Mn,Kn){Kn=Mn._locale.weekdaysParse(Xt,Kn,Mn._strict),Kn!=null?hn.d=Kn:Zt(Mn).invalidWeekday=Xt}),Bi(["d","e","E"],function(Xt,hn,Mn,Kn){hn[Kn]=ir(Xt)});var Dr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Yr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xi=br,ui=br,xr=br;function li(){function Xt(Li,_o){return _o.length-Li.length}for(var hn,Mn,Kn,hr=[],zr=[],ti=[],ci=[],Ni=0;Ni<7;Ni++)Kn=Wt([2e3,1]).day(Ni),hn=di(this.weekdaysMin(Kn,"")),Mn=di(this.weekdaysShort(Kn,"")),Kn=di(this.weekdays(Kn,"")),hr.push(hn),zr.push(Mn),ti.push(Kn),ci.push(hn),ci.push(Mn),ci.push(Kn);hr.sort(Xt),zr.sort(Xt),ti.sort(Xt),ci.sort(Xt),this._weekdaysRegex=new RegExp("^("+ci.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+ti.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+zr.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+hr.join("|")+")","i")}function yi(){return this.hours()%12||12}function uo(Xt,hn){rr(Xt,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),hn)})}function ss(Xt,hn){return hn._meridiemParse}rr("H",["HH",2],0,"hour"),rr("h",["hh",2],0,yi),rr("k",["kk",2],0,function(){return this.hours()||24}),rr("hmm",0,0,function(){return""+yi.apply(this)+pr(this.minutes(),2)}),rr("hmmss",0,0,function(){return""+yi.apply(this)+pr(this.minutes(),2)+pr(this.seconds(),2)}),rr("Hmm",0,0,function(){return""+this.hours()+pr(this.minutes(),2)}),rr("Hmmss",0,0,function(){return""+this.hours()+pr(this.minutes(),2)+pr(this.seconds(),2)}),uo("a",!0),uo("A",!1),Or("hour","h"),ar("hour",13),_r("a",ss),_r("A",ss),_r("H",In),_r("h",In),_r("k",In),_r("HH",In,Eo),_r("hh",In,Eo),_r("kk",In,Eo),_r("hmm",lr),_r("hmmss",$n),_r("Hmm",lr),_r("Hmmss",$n),ki(["H","HH"],jn),ki(["k","kk"],function(Xt,hn,Mn){Xt=ir(Xt),hn[jn]=Xt===24?0:Xt}),ki(["a","A"],function(Xt,hn,Mn){Mn._isPm=Mn._locale.isPM(Xt),Mn._meridiem=Xt}),ki(["h","hh"],function(Xt,hn,Mn){hn[jn]=ir(Xt),Zt(Mn).bigHour=!0}),ki("hmm",function(Xt,hn,Mn){var Kn=Xt.length-2;hn[jn]=ir(Xt.substr(0,Kn)),hn[er]=ir(Xt.substr(Kn)),Zt(Mn).bigHour=!0}),ki("hmmss",function(Xt,hn,Mn){var Kn=Xt.length-4,hr=Xt.length-2;hn[jn]=ir(Xt.substr(0,Kn)),hn[er]=ir(Xt.substr(Kn,2)),hn[Cr]=ir(Xt.substr(hr)),Zt(Mn).bigHour=!0}),ki("Hmm",function(Xt,hn,Mn){var Kn=Xt.length-2;hn[jn]=ir(Xt.substr(0,Kn)),hn[er]=ir(Xt.substr(Kn))}),ki("Hmmss",function(Xt,hn,Mn){var Kn=Xt.length-4,hr=Xt.length-2;hn[jn]=ir(Xt.substr(0,Kn)),hn[er]=ir(Xt.substr(Kn,2)),hn[Cr]=ir(Xt.substr(hr))}),br=Ln("Hours",!0);var Co,Mo={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:mi,monthsShort:wi,week:{dow:0,doy:6},weekdays:Dr,weekdaysMin:Vr,weekdaysShort:Yr,meridiemParse:/[ap]\.?m?\.?/i},ho={},as={};function pl(Xt){return Xt&&Xt.toLowerCase().replace("_","-")}function vu(Xt){for(var hn,Mn,Kn,hr,zr=0;zr<Xt.length;){for(hn=(hr=pl(Xt[zr]).split("-")).length,Mn=(Mn=pl(Xt[zr+1]))?Mn.split("-"):null;0<hn;){if(Kn=Ea(hr.slice(0,hn).join("-")))return Kn;if(Mn&&Mn.length>=hn&&function(ti,ci){for(var Ni=Math.min(ti.length,ci.length),Li=0;Li<Ni;Li+=1)if(ti[Li]!==ci[Li])return Li;return Ni}(hr,Mn)>=hn-1)break;hn--}zr++}return Co}function Ea(Xt){var hn;if(ho[Xt]===void 0&&!0&&nt&&nt.exports&&Xt.match("^[^/\\\\]*$")!=null)try{hn=Co._abbr,commonjsRequire("./locale/"+Xt),ji(hn)}catch{ho[Xt]=null}return ho[Xt]}function ji(Xt,hn){return Xt&&((hn=Lt(hn)?mo(Xt):ao(Xt,hn))?Co=hn:typeof console<"u"&&console.warn&&console.warn("Locale "+Xt+" not found. Did you forget to load it?")),Co._abbr}function ao(Xt,hn){if(hn===null)return delete ho[Xt],null;var Mn,Kn=Mo;if(hn.abbr=Xt,ho[Xt]!=null)On("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),Kn=ho[Xt]._config;else if(hn.parentLocale!=null)if(ho[hn.parentLocale]!=null)Kn=ho[hn.parentLocale]._config;else{if((Mn=Ea(hn.parentLocale))==null)return as[hn.parentLocale]||(as[hn.parentLocale]=[]),as[hn.parentLocale].push({name:Xt,config:hn}),null;Kn=Mn._config}return ho[Xt]=new Vn(gn(Kn,hn)),as[Xt]&&as[Xt].forEach(function(hr){ao(hr.name,hr.config)}),ji(Xt),ho[Xt]}function mo(Xt){var hn;if(!(Xt=Xt&&Xt._locale&&Xt._locale._abbr?Xt._locale._abbr:Xt))return Co;if(!bt(Xt)){if(hn=Ea(Xt))return hn;Xt=[Xt]}return vu(Xt)}function Oi(Xt){var hn=Xt._a;return hn&&Zt(Xt).overflow===-2&&(hn=hn[Tn]<0||11<hn[Tn]?Tn:hn[Sn]<1||hn[Sn]>Ir(hn[Rr],hn[Tn])?Sn:hn[jn]<0||24<hn[jn]||hn[jn]===24&&(hn[er]!==0||hn[Cr]!==0||hn[Qr]!==0)?jn:hn[er]<0||59<hn[er]?er:hn[Cr]<0||59<hn[Cr]?Cr:hn[Qr]<0||999<hn[Qr]?Qr:-1,Zt(Xt)._overflowDayOfYear&&(hn<Rr||Sn<hn)&&(hn=Sn),Zt(Xt)._overflowWeeks&&hn===-1&&(hn=yr),Zt(Xt)._overflowWeekday&&hn===-1&&(hn=ai),Zt(Xt).overflow=hn),Xt}var so=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ml=/Z|[+-]\d\d(?::?\d\d)?/,Nr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],na=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_u=/^\/?Date\((-?\d+)/i,Bo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,yo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Cc(Xt){var hn,Mn,Kn,hr,zr,ti,Ni=Xt._i,ci=so.exec(Ni)||Sr.exec(Ni),Ni=Nr.length,Li=na.length;if(ci){for(Zt(Xt).iso=!0,hn=0,Mn=Ni;hn<Mn;hn++)if(Nr[hn][1].exec(ci[1])){hr=Nr[hn][0],Kn=Nr[hn][2]!==!1;break}if(hr==null)Xt._isValid=!1;else{if(ci[3]){for(hn=0,Mn=Li;hn<Mn;hn++)if(na[hn][1].exec(ci[3])){zr=(ci[2]||" ")+na[hn][0];break}if(zr==null)return void(Xt._isValid=!1)}if(Kn||zr==null){if(ci[4]){if(!Ml.exec(ci[4]))return void(Xt._isValid=!1);ti="Z"}Xt._f=hr+(zr||"")+(ti||""),Rl(Xt)}else Xt._isValid=!1}}else Xt._isValid=!1}function zi(Xt,hn,Mn,Kn,hr,zr){return Xt=[function(ti){ti=parseInt(ti,10);{if(ti<=49)return 2e3+ti;if(ti<=999)return 1900+ti}return ti}(Xt),wi.indexOf(hn),parseInt(Mn,10),parseInt(Kn,10),parseInt(hr,10)],zr&&Xt.push(parseInt(zr,10)),Xt}function vo(Xt){var hn,Mn,Kn,hr,zr=Bo.exec(Xt._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));zr?(hn=zi(zr[4],zr[3],zr[2],zr[5],zr[6],zr[7]),Mn=zr[1],Kn=hn,hr=Xt,Mn&&Yr.indexOf(Mn)!==new Date(Kn[0],Kn[1],Kn[2]).getDay()?(Zt(hr).weekdayMismatch=!0,hr._isValid=!1):(Xt._a=hn,Xt._tzm=(Mn=zr[8],Kn=zr[9],hr=zr[10],Mn?yo[Mn]:Kn?0:60*(((Mn=parseInt(hr,10))-(Kn=Mn%100))/100)+Kn),Xt._d=Ws.apply(null,Xt._a),Xt._d.setUTCMinutes(Xt._d.getUTCMinutes()-Xt._tzm),Zt(Xt).rfc2822=!0)):Xt._isValid=!1}function qa(Xt,hn,Mn){return Xt!=null?Xt:hn!=null?hn:Mn}function ru(Xt){var hn,Mn,Kn,hr,zr,ti,ci,Ni,Li,_o,lo,Ko=[];if(!Xt._d){for(Kn=Xt,hr=new Date(vt.now()),Mn=Kn._useUTC?[hr.getUTCFullYear(),hr.getUTCMonth(),hr.getUTCDate()]:[hr.getFullYear(),hr.getMonth(),hr.getDate()],Xt._w&&Xt._a[Sn]==null&&Xt._a[Tn]==null&&((hr=(Kn=Xt)._w).GG!=null||hr.W!=null||hr.E!=null?(Ni=1,Li=4,zr=qa(hr.GG,Kn._a[Rr],Rs(Wo(),1,4).year),ti=qa(hr.W,1),((ci=qa(hr.E,1))<1||7<ci)&&(_o=!0)):(Ni=Kn._locale._week.dow,Li=Kn._locale._week.doy,lo=Rs(Wo(),Ni,Li),zr=qa(hr.gg,Kn._a[Rr],lo.year),ti=qa(hr.w,lo.week),hr.d!=null?((ci=hr.d)<0||6<ci)&&(_o=!0):hr.e!=null?(ci=hr.e+Ni,(hr.e<0||6<hr.e)&&(_o=!0)):ci=Ni),ti<1||ti>jo(zr,Ni,Li)?Zt(Kn)._overflowWeeks=!0:_o!=null?Zt(Kn)._overflowWeekday=!0:(lo=oo(zr,ti,ci,Ni,Li),Kn._a[Rr]=lo.year,Kn._dayOfYear=lo.dayOfYear)),Xt._dayOfYear!=null&&(hr=qa(Xt._a[Rr],Mn[Rr]),(Xt._dayOfYear>Ji(hr)||Xt._dayOfYear===0)&&(Zt(Xt)._overflowDayOfYear=!0),_o=Ws(hr,0,Xt._dayOfYear),Xt._a[Tn]=_o.getUTCMonth(),Xt._a[Sn]=_o.getUTCDate()),hn=0;hn<3&&Xt._a[hn]==null;++hn)Xt._a[hn]=Ko[hn]=Mn[hn];for(;hn<7;hn++)Xt._a[hn]=Ko[hn]=Xt._a[hn]==null?hn===2?1:0:Xt._a[hn];Xt._a[jn]===24&&Xt._a[er]===0&&Xt._a[Cr]===0&&Xt._a[Qr]===0&&(Xt._nextDay=!0,Xt._a[jn]=0),Xt._d=(Xt._useUTC?Ws:al).apply(null,Ko),zr=Xt._useUTC?Xt._d.getUTCDay():Xt._d.getDay(),Xt._tzm!=null&&Xt._d.setUTCMinutes(Xt._d.getUTCMinutes()-Xt._tzm),Xt._nextDay&&(Xt._a[jn]=24),Xt._w&&Xt._w.d!==void 0&&Xt._w.d!==zr&&(Zt(Xt).weekdayMismatch=!0)}}function Rl(Xt){if(Xt._f===vt.ISO_8601)Cc(Xt);else if(Xt._f===vt.RFC_2822)vo(Xt);else{Xt._a=[],Zt(Xt).empty=!0;for(var hn,Mn,Kn,hr,zr,ti=""+Xt._i,ci=ti.length,Ni=0,Li=cr(Xt._f,Xt._locale).match(yn)||[],_o=Li.length,lo=0;lo<_o;lo++)Mn=Li[lo],(hn=(ti.match(hi(Mn,Xt))||[])[0])&&(0<(Kn=ti.substr(0,ti.indexOf(hn))).length&&Zt(Xt).unusedInput.push(Kn),ti=ti.slice(ti.indexOf(hn)+hn.length),Ni+=hn.length),Mr[Mn]?(hn?Zt(Xt).empty=!1:Zt(Xt).unusedTokens.push(Mn),Kn=Mn,zr=Xt,(hr=hn)!=null&&Tt(Ai,Kn)&&Ai[Kn](hr,zr._a,zr,Kn)):Xt._strict&&!hn&&Zt(Xt).unusedTokens.push(Mn);Zt(Xt).charsLeftOver=ci-Ni,0<ti.length&&Zt(Xt).unusedInput.push(ti),Xt._a[jn]<=12&&Zt(Xt).bigHour===!0&&0<Xt._a[jn]&&(Zt(Xt).bigHour=void 0),Zt(Xt).parsedDateParts=Xt._a.slice(0),Zt(Xt).meridiem=Xt._meridiem,Xt._a[jn]=function(Ko,Bs,Ds){return Ds==null?Bs:Ko.meridiemHour!=null?Ko.meridiemHour(Bs,Ds):Ko.isPM!=null?((Ko=Ko.isPM(Ds))&&Bs<12&&(Bs+=12),Bs=Ko||Bs!==12?Bs:0):Bs}(Xt._locale,Xt._a[jn],Xt._meridiem),(ci=Zt(Xt).era)!==null&&(Xt._a[Rr]=Xt._locale.erasConvertYear(ci,Xt._a[Rr])),ru(Xt),Oi(Xt)}}function Js(Xt){var hn,Mn,Kn,hr=Xt._i,zr=Xt._f;return Xt._locale=Xt._locale||mo(Xt._l),hr===null||zr===void 0&&hr===""?Yt({nullInput:!0}):(typeof hr=="string"&&(Xt._i=hr=Xt._locale.preparse(hr)),wn(hr)?new mn(Oi(hr)):(Nt(hr)?Xt._d=hr:bt(zr)?function(ti){var ci,Ni,Li,_o,lo,Ko,Bs=!1,Ds=ti._f.length;if(Ds===0)return Zt(ti).invalidFormat=!0,ti._d=new Date(NaN);for(_o=0;_o<Ds;_o++)lo=0,Ko=!1,ci=sn({},ti),ti._useUTC!=null&&(ci._useUTC=ti._useUTC),ci._f=ti._f[_o],Rl(ci),tn(ci)&&(Ko=!0),lo=(lo+=Zt(ci).charsLeftOver)+10*Zt(ci).unusedTokens.length,Zt(ci).score=lo,Bs?lo<Li&&(Li=lo,Ni=ci):(Li==null||lo<Li||Ko)&&(Li=lo,Ni=ci,Ko&&(Bs=!0));Ht(ti,Ni||ci)}(Xt):zr?Rl(Xt):Lt(zr=(hr=Xt)._i)?hr._d=new Date(vt.now()):Nt(zr)?hr._d=new Date(zr.valueOf()):typeof zr=="string"?(Mn=hr,(hn=_u.exec(Mn._i))!==null?Mn._d=new Date(+hn[1]):(Cc(Mn),Mn._isValid===!1&&(delete Mn._isValid,vo(Mn),Mn._isValid===!1&&(delete Mn._isValid,Mn._strict?Mn._isValid=!1:vt.createFromInputFallback(Mn))))):bt(zr)?(hr._a=zt(zr.slice(0),function(ti){return parseInt(ti,10)}),ru(hr)):wt(zr)?(hn=hr)._d||(Kn=(Mn=sr(hn._i)).day===void 0?Mn.date:Mn.day,hn._a=zt([Mn.year,Mn.month,Kn,Mn.hour,Mn.minute,Mn.second,Mn.millisecond],function(ti){return ti&&parseInt(ti,10)}),ru(hn)):Mt(zr)?hr._d=new Date(zr):vt.createFromInputFallback(hr),tn(Xt)||(Xt._d=null),Xt))}function Vo(Xt,hn,Mn,Kn,hr){var zr={};return hn!==!0&&hn!==!1||(Kn=hn,hn=void 0),Mn!==!0&&Mn!==!1||(Kn=Mn,Mn=void 0),(wt(Xt)&&kt(Xt)||bt(Xt)&&Xt.length===0)&&(Xt=void 0),zr._isAMomentObject=!0,zr._useUTC=zr._isUTC=hr,zr._l=Mn,zr._i=Xt,zr._f=hn,zr._strict=Kn,(hr=new mn(Oi(Js(hr=zr))))._nextDay&&(hr.add(1,"d"),hr._nextDay=void 0),hr}function Wo(Xt,hn,Mn,Kn){return Vo(Xt,hn,Mn,Kn,!1)}vt.createFromInputFallback=An("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(Xt){Xt._d=new Date(Xt._i+(Xt._useUTC?" UTC":""))}),vt.ISO_8601=function(){},vt.RFC_2822=function(){},lr=An("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Xt=Wo.apply(null,arguments);return this.isValid()&&Xt.isValid()?Xt<this?this:Xt:Yt()}),$n=An("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Xt=Wo.apply(null,arguments);return this.isValid()&&Xt.isValid()?this<Xt?this:Xt:Yt()});function oa(Xt,hn){var Mn,Kn;if(!(hn=hn.length===1&&bt(hn[0])?hn[0]:hn).length)return Wo();for(Mn=hn[0],Kn=1;Kn<hn.length;++Kn)hn[Kn].isValid()&&!hn[Kn][Xt](Mn)||(Mn=hn[Kn]);return Mn}var Sl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function pa(hn){var hn=sr(hn),Mn=hn.year||0,Kn=hn.quarter||0,hr=hn.month||0,zr=hn.week||hn.isoWeek||0,ti=hn.day||0,ci=hn.hour||0,Ni=hn.minute||0,Li=hn.second||0,_o=hn.millisecond||0;this._isValid=function(lo){var Ko,Bs,Ds=!1,wu=Sl.length;for(Ko in lo)if(Tt(lo,Ko)&&(Ti.call(Sl,Ko)===-1||lo[Ko]!=null&&isNaN(lo[Ko])))return!1;for(Bs=0;Bs<wu;++Bs)if(lo[Sl[Bs]]){if(Ds)return!1;parseFloat(lo[Sl[Bs]])!==ir(lo[Sl[Bs]])&&(Ds=!0)}return!0}(hn),this._milliseconds=+_o+1e3*Li+6e4*Ni+1e3*ci*60*60,this._days=+ti+7*zr,this._months=+hr+3*Kn+12*Mn,this._data={},this._locale=mo(),this._bubble()}function gl(Xt){return Xt instanceof pa}function Ha(Xt){return Xt<0?-1*Math.round(-1*Xt):Math.round(Xt)}function ic(Xt,hn){rr(Xt,0,0,function(){var Mn=this.utcOffset(),Kn="+";return Mn<0&&(Mn=-Mn,Kn="-"),Kn+pr(~~(Mn/60),2)+hn+pr(~~Mn%60,2)})}ic("Z",":"),ic("ZZ",""),_r("Z",kr),_r("ZZ",kr),ki(["Z","ZZ"],function(Xt,hn,Mn){Mn._useUTC=!0,Mn._tzm=bu(kr,Xt)});var Ru=/([\+\-]|\d\d)/gi;function bu(Xt,Mn){var Mn=(Mn||"").match(Xt);return Mn===null?null:(Mn=60*(Xt=((Mn[Mn.length-1]||[])+"").match(Ru)||["-",0,0])[1]+ir(Xt[2]))===0?0:Xt[0]==="+"?Mn:-Mn}function Xa(Xt,hn){var Mn;return hn._isUTC?(hn=hn.clone(),Mn=(wn(Xt)||Nt(Xt)?Xt:Wo(Xt)).valueOf()-hn.valueOf(),hn._d.setTime(hn._d.valueOf()+Mn),vt.updateOffset(hn,!1),hn):Wo(Xt).local()}function Tc(Xt){return-Math.round(Xt._d.getTimezoneOffset())}function kc(){return!!this.isValid()&&this._isUTC&&this._offset===0}vt.updateOffset=function(){};var Ac=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ga(Xt,hn){var Mn,Kn=Xt,hr=null;return gl(Xt)?Kn={ms:Xt._milliseconds,d:Xt._days,M:Xt._months}:Mt(Xt)||!isNaN(+Xt)?(Kn={},hn?Kn[hn]=+Xt:Kn.milliseconds=+Xt):(hr=Ac.exec(Xt))?(Mn=hr[1]==="-"?-1:1,Kn={y:0,d:ir(hr[Sn])*Mn,h:ir(hr[jn])*Mn,m:ir(hr[er])*Mn,s:ir(hr[Cr])*Mn,ms:ir(Ha(1e3*hr[Qr]))*Mn}):(hr=Fo.exec(Xt))?(Mn=hr[1]==="-"?-1:1,Kn={y:co(hr[2],Mn),M:co(hr[3],Mn),w:co(hr[4],Mn),d:co(hr[5],Mn),h:co(hr[6],Mn),m:co(hr[7],Mn),s:co(hr[8],Mn)}):Kn==null?Kn={}:typeof Kn=="object"&&("from"in Kn||"to"in Kn)&&(hn=function(zr,ti){var ci;return!zr.isValid()||!ti.isValid()?{milliseconds:0,months:0}:(ti=Xa(ti,zr),zr.isBefore(ti)?ci=Cl(zr,ti):((ci=Cl(ti,zr)).milliseconds=-ci.milliseconds,ci.months=-ci.months),ci)}(Wo(Kn.from),Wo(Kn.to)),(Kn={}).ms=hn.milliseconds,Kn.M=hn.months),hr=new pa(Kn),gl(Xt)&&Tt(Xt,"_locale")&&(hr._locale=Xt._locale),gl(Xt)&&Tt(Xt,"_isValid")&&(hr._isValid=Xt._isValid),hr}function co(Xt,hn){return Xt=Xt&&parseFloat(Xt.replace(",",".")),(isNaN(Xt)?0:Xt)*hn}function Cl(Xt,hn){var Mn={};return Mn.months=hn.month()-Xt.month()+12*(hn.year()-Xt.year()),Xt.clone().add(Mn.months,"M").isAfter(hn)&&--Mn.months,Mn.milliseconds=+hn-+Xt.clone().add(Mn.months,"M"),Mn}function Kh(Xt,hn){return function(Mn,Kn){var hr;return Kn===null||isNaN(+Kn)||(On(hn,"moment()."+hn+"(period, number) is deprecated. Please use moment()."+hn+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),hr=Mn,Mn=Kn,Kn=hr),Jh(this,ga(Mn,Kn),Xt),this}}function Jh(Xt,ti,Mn,Kn){var hr=ti._milliseconds,zr=Ha(ti._days),ti=Ha(ti._months);Xt.isValid()&&(Kn=Kn==null||Kn,ti&&Di(Xt,en(Xt,"Month")+ti*Mn),zr&&dn(Xt,"Date",en(Xt,"Date")+zr*Mn),hr&&Xt._d.setTime(Xt._d.valueOf()+hr*Mn),Kn&&vt.updateOffset(Xt,zr||ti))}ga.fn=pa.prototype,ga.invalid=function(){return ga(NaN)},mi=Kh(1,"add"),Dr=Kh(-1,"subtract");function Kc(Xt){return typeof Xt=="string"||Xt instanceof String}function Pc(Xt){return wn(Xt)||Nt(Xt)||Kc(Xt)||Mt(Xt)||function(hn){var Mn=bt(hn),Kn=!1;return Mn&&(Kn=hn.filter(function(hr){return!Mt(hr)&&Kc(hn)}).length===0),Mn&&Kn}(Xt)||function(hn){var Mn,Kn,hr=wt(hn)&&!kt(hn),zr=!1,ti=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],ci=ti.length;for(Mn=0;Mn<ci;Mn+=1)Kn=ti[Mn],zr=zr||Tt(hn,Kn);return hr&&zr}(Xt)||Xt==null}function Jc(Xt,hr){if(Xt.date()<hr.date())return-Jc(hr,Xt);var Mn=12*(hr.year()-Xt.year())+(hr.month()-Xt.month()),Kn=Xt.clone().add(Mn,"months"),hr=hr-Kn<0?(hr-Kn)/(Kn-Xt.clone().add(Mn-1,"months")):(hr-Kn)/(Xt.clone().add(1+Mn,"months")-Kn);return-(Mn+hr)||0}function Dl(Xt){return Xt===void 0?this._locale._abbr:((Xt=mo(Xt))!=null&&(this._locale=Xt),this)}vt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",vt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Vr=An("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(Xt){return Xt===void 0?this.localeData():this.locale(Xt)});function ua(){return this._locale}var Du=126227808e5;function oc(Xt,hn){return(Xt%hn+hn)%hn}function Md(Xt,hn,Mn){return Xt<100&&0<=Xt?new Date(Xt+400,hn,Mn)-Du:new Date(Xt,hn,Mn).valueOf()}function wf(Xt,hn,Mn){return Xt<100&&0<=Xt?Date.UTC(Xt+400,hn,Mn)-Du:Date.UTC(Xt,hn,Mn)}function Qh(Xt,hn){return hn.erasAbbrRegex(Xt)}function Tl(){for(var Xt=[],hn=[],Mn=[],Kn=[],hr=this.eras(),zr=0,ti=hr.length;zr<ti;++zr)hn.push(di(hr[zr].name)),Xt.push(di(hr[zr].abbr)),Mn.push(di(hr[zr].narrow)),Kn.push(di(hr[zr].name)),Kn.push(di(hr[zr].abbr)),Kn.push(di(hr[zr].narrow));this._erasRegex=new RegExp("^("+Kn.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+hn.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+Xt.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+Mn.join("|")+")","i")}function Va(Xt,hn){rr(0,[Xt,Xt.length],0,hn)}function Ch(Xt,hn,Mn,Kn,hr){var zr;return Xt==null?Rs(this,Kn,hr).year:(zr=jo(Xt,Kn,hr),function(ti,ci,Ni,Li,_o){return ti=oo(ti,ci,Ni,Li,_o),ci=Ws(ti.year,0,ti.dayOfYear),this.year(ci.getUTCFullYear()),this.month(ci.getUTCMonth()),this.date(ci.getUTCDate()),this}.call(this,Xt,hn=zr<hn?zr:hn,Mn,Kn,hr))}rr("N",0,0,"eraAbbr"),rr("NN",0,0,"eraAbbr"),rr("NNN",0,0,"eraAbbr"),rr("NNNN",0,0,"eraName"),rr("NNNNN",0,0,"eraNarrow"),rr("y",["y",1],"yo","eraYear"),rr("y",["yy",2],0,"eraYear"),rr("y",["yyy",3],0,"eraYear"),rr("y",["yyyy",4],0,"eraYear"),_r("N",Qh),_r("NN",Qh),_r("NNN",Qh),_r("NNNN",function(Xt,hn){return hn.erasNameRegex(Xt)}),_r("NNNNN",function(Xt,hn){return hn.erasNarrowRegex(Xt)}),ki(["N","NN","NNN","NNNN","NNNNN"],function(Xt,hn,Mn,Kn){Kn=Mn._locale.erasParse(Xt,Kn,Mn._strict),Kn?Zt(Mn).era=Kn:Zt(Mn).invalidEra=Xt}),_r("y",Wn),_r("yy",Wn),_r("yyy",Wn),_r("yyyy",Wn),_r("yo",function(Xt,hn){return hn._eraYearOrdinalRegex||Wn}),ki(["y","yy","yyy","yyyy"],Rr),ki(["yo"],function(Xt,hn,Mn,Kn){var hr;Mn._locale._eraYearOrdinalRegex&&(hr=Xt.match(Mn._locale._eraYearOrdinalRegex)),Mn._locale.eraYearOrdinalParse?hn[Rr]=Mn._locale.eraYearOrdinalParse(Xt,hr):hn[Rr]=parseInt(Xt,10)}),rr(0,["gg",2],0,function(){return this.weekYear()%100}),rr(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Va("gggg","weekYear"),Va("ggggg","weekYear"),Va("GGGG","isoWeekYear"),Va("GGGGG","isoWeekYear"),Or("weekYear","gg"),Or("isoWeekYear","GG"),ar("weekYear",1),ar("isoWeekYear",1),_r("G",or),_r("g",or),_r("GG",In,Eo),_r("gg",In,Eo),_r("GGGG",Ua,Lc),_r("gggg",Ua,Lc),_r("GGGGG",ma,Za),_r("ggggg",ma,Za),Bi(["gggg","ggggg","GGGG","GGGGG"],function(Xt,hn,Mn,Kn){hn[Kn.substr(0,2)]=ir(Xt)}),Bi(["gg","GG"],function(Xt,hn,Mn,Kn){hn[Kn]=vt.parseTwoDigitYear(Xt)}),rr("Q",0,"Qo","quarter"),Or("quarter","Q"),ar("quarter",7),_r("Q",un),ki("Q",function(Xt,hn){hn[Tn]=3*(ir(Xt)-1)}),rr("D",["DD",2],"Do","date"),Or("date","D"),ar("date",9),_r("D",In),_r("DD",In,Eo),_r("Do",function(Xt,hn){return Xt?hn._dayOfMonthOrdinalParse||hn._ordinalParse:hn._dayOfMonthOrdinalParseLenient}),ki(["D","DD"],Sn),ki("Do",function(Xt,hn){hn[Sn]=ir(Xt.match(In)[0])}),Ua=Ln("Date",!0),rr("DDD",["DDDD",3],"DDDo","dayOfYear"),Or("dayOfYear","DDD"),ar("dayOfYear",4),_r("DDD",Qn),_r("DDDD",Nn),ki(["DDD","DDDD"],function(Xt,hn,Mn){Mn._dayOfYear=ir(Xt)}),rr("m",["mm",2],0,"minute"),Or("minute","m"),ar("minute",14),_r("m",In),_r("mm",In,Eo),ki(["m","mm"],er);var zo,Lc=Ln("Minutes",!1),ma=(rr("s",["ss",2],0,"second"),Or("second","s"),ar("second",15),_r("s",In),_r("ss",In,Eo),ki(["s","ss"],Cr),Ln("Seconds",!1));for(rr("S",0,0,function(){return~~(this.millisecond()/100)}),rr(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),rr(0,["SSS",3],0,"millisecond"),rr(0,["SSSS",4],0,function(){return 10*this.millisecond()}),rr(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),rr(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),rr(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),rr(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),rr(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Or("millisecond","ms"),ar("millisecond",16),_r("S",Qn,un),_r("SS",Qn,Eo),_r("SSS",Qn,Nn),zo="SSSS";zo.length<=9;zo+="S")_r(zo,Wn);function Qc(Xt,hn){hn[Qr]=ir(1e3*("0."+Xt))}for(zo="S";zo.length<=9;zo+="S")ki(zo,Qc);Za=Ln("Milliseconds",!1),rr("z",0,0,"zoneAbbr"),rr("zz",0,0,"zoneName"),un=mn.prototype;function eh(Xt){return Xt}un.add=mi,un.calendar=function(Mn,hr){arguments.length===1&&(arguments[0]?Pc(arguments[0])?(Mn=arguments[0],hr=void 0):function(zr){for(var ti=wt(zr)&&!kt(zr),ci=!1,Ni=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Li=0;Li<Ni.length;Li+=1)ci=ci||Tt(zr,Ni[Li]);return ti&&ci}(arguments[0])&&(hr=arguments[0],Mn=void 0):hr=Mn=void 0);var Mn=Mn||Wo(),Kn=Xa(Mn,this).startOf("day"),Kn=vt.calendarFormat(this,Kn)||"sameElse",hr=hr&&(kn(hr[Kn])?hr[Kn].call(this,Mn):hr[Kn]);return this.format(hr||this.localeData().calendar(Kn,this,Wo(Mn)))},un.clone=function(){return new mn(this)},un.diff=function(Xt,hn,Mn){var Kn,hr,zr;if(!this.isValid())return NaN;if(!(Kn=Xa(Xt,this)).isValid())return NaN;switch(hr=6e4*(Kn.utcOffset()-this.utcOffset()),hn=Ar(hn)){case"year":zr=Jc(this,Kn)/12;break;case"month":zr=Jc(this,Kn);break;case"quarter":zr=Jc(this,Kn)/3;break;case"second":zr=(this-Kn)/1e3;break;case"minute":zr=(this-Kn)/6e4;break;case"hour":zr=(this-Kn)/36e5;break;case"day":zr=(this-Kn-hr)/864e5;break;case"week":zr=(this-Kn-hr)/6048e5;break;default:zr=this-Kn}return Mn?zr:wr(zr)},un.endOf=function(Xt){var hn,Mn;if((Xt=Ar(Xt))===void 0||Xt==="millisecond"||!this.isValid())return this;switch(Mn=this._isUTC?wf:Md,Xt){case"year":hn=Mn(this.year()+1,0,1)-1;break;case"quarter":hn=Mn(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":hn=Mn(this.year(),this.month()+1,1)-1;break;case"week":hn=Mn(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":hn=Mn(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":hn=Mn(this.year(),this.month(),this.date()+1)-1;break;case"hour":hn=this._d.valueOf(),hn+=36e5-oc(hn+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":hn=this._d.valueOf(),hn+=6e4-oc(hn,6e4)-1;break;case"second":hn=this._d.valueOf(),hn+=1e3-oc(hn,1e3)-1;break}return this._d.setTime(hn),vt.updateOffset(this,!0),this},un.format=function(Xt){return Xt=Xt||(this.isUtc()?vt.defaultFormatUtc:vt.defaultFormat),Xt=vr(this,Xt),this.localeData().postformat(Xt)},un.from=function(Xt,hn){return this.isValid()&&(wn(Xt)&&Xt.isValid()||Wo(Xt).isValid())?ga({to:this,from:Xt}).locale(this.locale()).humanize(!hn):this.localeData().invalidDate()},un.fromNow=function(Xt){return this.from(Wo(),Xt)},un.to=function(Xt,hn){return this.isValid()&&(wn(Xt)&&Xt.isValid()||Wo(Xt).isValid())?ga({from:this,to:Xt}).locale(this.locale()).humanize(!hn):this.localeData().invalidDate()},un.toNow=function(Xt){return this.to(Wo(),Xt)},un.get=function(Xt){return kn(this[Xt=Ar(Xt)])?this[Xt]():this},un.invalidAt=function(){return Zt(this).overflow},un.isAfter=function(Xt,hn){return Xt=wn(Xt)?Xt:Wo(Xt),!(!this.isValid()||!Xt.isValid())&&((hn=Ar(hn)||"millisecond")==="millisecond"?this.valueOf()>Xt.valueOf():Xt.valueOf()<this.clone().startOf(hn).valueOf())},un.isBefore=function(Xt,hn){return Xt=wn(Xt)?Xt:Wo(Xt),!(!this.isValid()||!Xt.isValid())&&((hn=Ar(hn)||"millisecond")==="millisecond"?this.valueOf()<Xt.valueOf():this.clone().endOf(hn).valueOf()<Xt.valueOf())},un.isBetween=function(Xt,hn,Mn,Kn){return Xt=wn(Xt)?Xt:Wo(Xt),hn=wn(hn)?hn:Wo(hn),!!(this.isValid()&&Xt.isValid()&&hn.isValid())&&((Kn=Kn||"()")[0]==="("?this.isAfter(Xt,Mn):!this.isBefore(Xt,Mn))&&(Kn[1]===")"?this.isBefore(hn,Mn):!this.isAfter(hn,Mn))},un.isSame=function(Mn,hn){var Mn=wn(Mn)?Mn:Wo(Mn);return!(!this.isValid()||!Mn.isValid())&&((hn=Ar(hn)||"millisecond")==="millisecond"?this.valueOf()===Mn.valueOf():(Mn=Mn.valueOf(),this.clone().startOf(hn).valueOf()<=Mn&&Mn<=this.clone().endOf(hn).valueOf()))},un.isSameOrAfter=function(Xt,hn){return this.isSame(Xt,hn)||this.isAfter(Xt,hn)},un.isSameOrBefore=function(Xt,hn){return this.isSame(Xt,hn)||this.isBefore(Xt,hn)},un.isValid=function(){return tn(this)},un.lang=Vr,un.locale=Dl,un.localeData=ua,un.max=$n,un.min=lr,un.parsingFlags=function(){return Ht({},Zt(this))},un.set=function(Xt,hn){if(typeof Xt=="object")for(var Mn=function(zr){var ti,ci=[];for(ti in zr)Tt(zr,ti)&&ci.push({unit:ti,priority:ii[ti]});return ci.sort(function(Ni,Li){return Ni.priority-Li.priority}),ci}(Xt=sr(Xt)),Kn=Mn.length,hr=0;hr<Kn;hr++)this[Mn[hr].unit](Xt[Mn[hr].unit]);else if(kn(this[Xt=Ar(Xt)]))return this[Xt](hn);return this},un.startOf=function(Xt){var hn,Mn;if((Xt=Ar(Xt))===void 0||Xt==="millisecond"||!this.isValid())return this;switch(Mn=this._isUTC?wf:Md,Xt){case"year":hn=Mn(this.year(),0,1);break;case"quarter":hn=Mn(this.year(),this.month()-this.month()%3,1);break;case"month":hn=Mn(this.year(),this.month(),1);break;case"week":hn=Mn(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":hn=Mn(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":hn=Mn(this.year(),this.month(),this.date());break;case"hour":hn=this._d.valueOf(),hn-=oc(hn+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":hn=this._d.valueOf(),hn-=oc(hn,6e4);break;case"second":hn=this._d.valueOf(),hn-=oc(hn,1e3);break}return this._d.setTime(hn),vt.updateOffset(this,!0),this},un.subtract=Dr,un.toArray=function(){var Xt=this;return[Xt.year(),Xt.month(),Xt.date(),Xt.hour(),Xt.minute(),Xt.second(),Xt.millisecond()]},un.toObject=function(){var Xt=this;return{years:Xt.year(),months:Xt.month(),date:Xt.date(),hours:Xt.hours(),minutes:Xt.minutes(),seconds:Xt.seconds(),milliseconds:Xt.milliseconds()}},un.toDate=function(){return new Date(this.valueOf())},un.toISOString=function(Xt){if(!this.isValid())return null;var hn=(Xt=Xt!==!0)?this.clone().utc():this;return hn.year()<0||9999<hn.year()?vr(hn,Xt?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):kn(Date.prototype.toISOString)?Xt?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",vr(hn,"Z")):vr(hn,Xt?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},un.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var Xt,hn="moment",Mn="";return this.isLocal()||(hn=this.utcOffset()===0?"moment.utc":"moment.parseZone",Mn="Z"),hn="["+hn+'("]',Xt=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(hn+Xt+"-MM-DD[T]HH:mm:ss.SSS"+(Mn+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(un[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),un.toJSON=function(){return this.isValid()?this.toISOString():null},un.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},un.unix=function(){return Math.floor(this.valueOf()/1e3)},un.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},un.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},un.eraName=function(){for(var Xt,hn=this.localeData().eras(),Mn=0,Kn=hn.length;Mn<Kn;++Mn)if(Xt=this.clone().startOf("day").valueOf(),hn[Mn].since<=Xt&&Xt<=hn[Mn].until||hn[Mn].until<=Xt&&Xt<=hn[Mn].since)return hn[Mn].name;return""},un.eraNarrow=function(){for(var Xt,hn=this.localeData().eras(),Mn=0,Kn=hn.length;Mn<Kn;++Mn)if(Xt=this.clone().startOf("day").valueOf(),hn[Mn].since<=Xt&&Xt<=hn[Mn].until||hn[Mn].until<=Xt&&Xt<=hn[Mn].since)return hn[Mn].narrow;return""},un.eraAbbr=function(){for(var Xt,hn=this.localeData().eras(),Mn=0,Kn=hn.length;Mn<Kn;++Mn)if(Xt=this.clone().startOf("day").valueOf(),hn[Mn].since<=Xt&&Xt<=hn[Mn].until||hn[Mn].until<=Xt&&Xt<=hn[Mn].since)return hn[Mn].abbr;return""},un.eraYear=function(){for(var Xt,hn,Mn=this.localeData().eras(),Kn=0,hr=Mn.length;Kn<hr;++Kn)if(Xt=Mn[Kn].since<=Mn[Kn].until?1:-1,hn=this.clone().startOf("day").valueOf(),Mn[Kn].since<=hn&&hn<=Mn[Kn].until||Mn[Kn].until<=hn&&hn<=Mn[Kn].since)return(this.year()-vt(Mn[Kn].since).year())*Xt+Mn[Kn].offset;return this.year()},un.year=kl,un.isLeapYear=function(){return fr(this.year())},un.weekYear=function(Xt){return Ch.call(this,Xt,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},un.isoWeekYear=function(Xt){return Ch.call(this,Xt,this.isoWeek(),this.isoWeekday(),1,4)},un.quarter=un.quarters=function(Xt){return Xt==null?Math.ceil((this.month()+1)/3):this.month(3*(Xt-1)+this.month()%3)},un.month=eo,un.daysInMonth=function(){return Ir(this.year(),this.month())},un.week=un.weeks=function(Xt){var hn=this.localeData().week(this);return Xt==null?hn:this.add(7*(Xt-hn),"d")},un.isoWeek=un.isoWeeks=function(Xt){var hn=Rs(this,1,4).week;return Xt==null?hn:this.add(7*(Xt-hn),"d")},un.weeksInYear=function(){var Xt=this.localeData()._week;return jo(this.year(),Xt.dow,Xt.doy)},un.weeksInWeekYear=function(){var Xt=this.localeData()._week;return jo(this.weekYear(),Xt.dow,Xt.doy)},un.isoWeeksInYear=function(){return jo(this.year(),1,4)},un.isoWeeksInISOWeekYear=function(){return jo(this.isoWeekYear(),1,4)},un.date=Ua,un.day=un.days=function(Xt){if(!this.isValid())return Xt!=null?this:NaN;var hn,Mn,Kn=this._isUTC?this._d.getUTCDay():this._d.getDay();return Xt!=null?(hn=Xt,Mn=this.localeData(),Xt=typeof hn!="string"?hn:isNaN(hn)?typeof(hn=Mn.weekdaysParse(hn))=="number"?hn:null:parseInt(hn,10),this.add(Xt-Kn,"d")):Kn},un.weekday=function(Xt){if(!this.isValid())return Xt!=null?this:NaN;var hn=(this.day()+7-this.localeData()._week.dow)%7;return Xt==null?hn:this.add(Xt-hn,"d")},un.isoWeekday=function(Xt){return this.isValid()?Xt!=null?(hn=Xt,Mn=this.localeData(),Mn=typeof hn=="string"?Mn.weekdaysParse(hn)%7||7:isNaN(hn)?null:hn,this.day(this.day()%7?Mn:Mn-7)):this.day()||7:Xt!=null?this:NaN;var hn,Mn},un.dayOfYear=function(Xt){var hn=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return Xt==null?hn:this.add(Xt-hn,"d")},un.hour=un.hours=br,un.minute=un.minutes=Lc,un.second=un.seconds=ma,un.millisecond=un.milliseconds=Za,un.utcOffset=function(Xt,hn,Mn){var Kn,hr=this._offset||0;if(!this.isValid())return Xt!=null?this:NaN;if(Xt==null)return this._isUTC?hr:Tc(this);if(typeof Xt=="string"){if((Xt=bu(kr,Xt))===null)return this}else Math.abs(Xt)<16&&!Mn&&(Xt*=60);return!this._isUTC&&hn&&(Kn=Tc(this)),this._offset=Xt,this._isUTC=!0,Kn!=null&&this.add(Kn,"m"),hr!==Xt&&(!hn||this._changeInProgress?Jh(this,ga(Xt-hr,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,vt.updateOffset(this,!0),this._changeInProgress=null)),this},un.utc=function(Xt){return this.utcOffset(0,Xt)},un.local=function(Xt){return this._isUTC&&(this.utcOffset(0,Xt),this._isUTC=!1,Xt&&this.subtract(Tc(this),"m")),this},un.parseZone=function(){var Xt;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((Xt=bu(dr,this._i))!=null?this.utcOffset(Xt):this.utcOffset(0,!0)),this},un.hasAlignedHourOffset=function(Xt){return!!this.isValid()&&(Xt=Xt?Wo(Xt).utcOffset():0,(this.utcOffset()-Xt)%60==0)},un.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},un.isLocal=function(){return!!this.isValid()&&!this._isUTC},un.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},un.isUtc=kc,un.isUTC=kc,un.zoneAbbr=function(){return this._isUTC?"UTC":""},un.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},un.dates=An("dates accessor is deprecated. Use date instead.",Ua),un.months=An("months accessor is deprecated. Use month instead",eo),un.years=An("years accessor is deprecated. Use year instead",kl),un.zone=An("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(Xt,hn){return Xt!=null?(this.utcOffset(Xt=typeof Xt!="string"?-Xt:Xt,hn),this):-this.utcOffset()}),un.isDSTShifted=An("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!Lt(this._isDSTShifted))return this._isDSTShifted;var Xt,hn={};return sn(hn,this),(hn=Js(hn))._a?(Xt=(hn._isUTC?Wt:Wo)(hn._a),this._isDSTShifted=this.isValid()&&0<function(Mn,Kn,hr){for(var zr=Math.min(Mn.length,Kn.length),ti=Math.abs(Mn.length-Kn.length),ci=0,Ni=0;Ni<zr;Ni++)(hr&&Mn[Ni]!==Kn[Ni]||!hr&&ir(Mn[Ni])!==ir(Kn[Ni]))&&ci++;return ci+ti}(hn._a,Xt.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),Eo=Vn.prototype;function sc(Xt,hn,Mn,zr){var hr=mo(),zr=Wt().set(zr,hn);return hr[Mn](zr,Xt)}function th(Xt,hn,Mn){if(Mt(Xt)&&(hn=Xt,Xt=void 0),Xt=Xt||"",hn!=null)return sc(Xt,hn,Mn,"month");for(var Kn=[],hr=0;hr<12;hr++)Kn[hr]=sc(Xt,hr,Mn,"month");return Kn}function Rd(Xt,hn,Mn,Kn){hn=(typeof Xt=="boolean"?Mt(hn)&&(Mn=hn,hn=void 0):(hn=Xt,Xt=!1,Mt(Mn=hn)&&(Mn=hn,hn=void 0)),hn||"");var hr,zr=mo(),ti=Xt?zr._week.dow:0,ci=[];if(Mn!=null)return sc(hn,(Mn+ti)%7,Kn,"day");for(hr=0;hr<7;hr++)ci[hr]=sc(hn,(hr+ti)%7,Kn,"day");return ci}Eo.calendar=function(Xt,hn,Mn){return kn(Xt=this._calendar[Xt]||this._calendar.sameElse)?Xt.call(hn,Mn):Xt},Eo.longDateFormat=function(Xt){var hn=this._longDateFormat[Xt],Mn=this._longDateFormat[Xt.toUpperCase()];return hn||!Mn?hn:(this._longDateFormat[Xt]=Mn.match(yn).map(function(Kn){return Kn==="MMMM"||Kn==="MM"||Kn==="DD"||Kn==="dddd"?Kn.slice(1):Kn}).join(""),this._longDateFormat[Xt])},Eo.invalidDate=function(){return this._invalidDate},Eo.ordinal=function(Xt){return this._ordinal.replace("%d",Xt)},Eo.preparse=eh,Eo.postformat=eh,Eo.relativeTime=function(Xt,hn,Mn,Kn){var hr=this._relativeTime[Mn];return kn(hr)?hr(Xt,hn,Mn,Kn):hr.replace(/%d/i,Xt)},Eo.pastFuture=function(Xt,hn){return kn(Xt=this._relativeTime[0<Xt?"future":"past"])?Xt(hn):Xt.replace(/%s/i,hn)},Eo.set=function(Xt){var hn,Mn;for(Mn in Xt)Tt(Xt,Mn)&&(kn(hn=Xt[Mn])?this[Mn]=hn:this["_"+Mn]=hn);this._config=Xt,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Eo.eras=function(Xt,hn){for(var Mn,Kn=this._eras||mo("en")._eras,hr=0,zr=Kn.length;hr<zr;++hr){switch(typeof Kn[hr].since){case"string":Mn=vt(Kn[hr].since).startOf("day"),Kn[hr].since=Mn.valueOf();break}switch(typeof Kn[hr].until){case"undefined":Kn[hr].until=1/0;break;case"string":Mn=vt(Kn[hr].until).startOf("day").valueOf(),Kn[hr].until=Mn.valueOf();break}}return Kn},Eo.erasParse=function(Xt,hn,Mn){var Kn,hr,zr,ti,ci,Ni=this.eras();for(Xt=Xt.toUpperCase(),Kn=0,hr=Ni.length;Kn<hr;++Kn)if(zr=Ni[Kn].name.toUpperCase(),ti=Ni[Kn].abbr.toUpperCase(),ci=Ni[Kn].narrow.toUpperCase(),Mn)switch(hn){case"N":case"NN":case"NNN":if(ti===Xt)return Ni[Kn];break;case"NNNN":if(zr===Xt)return Ni[Kn];break;case"NNNNN":if(ci===Xt)return Ni[Kn];break}else if(0<=[zr,ti,ci].indexOf(Xt))return Ni[Kn]},Eo.erasConvertYear=function(Xt,hn){var Mn=Xt.since<=Xt.until?1:-1;return hn===void 0?vt(Xt.since).year():vt(Xt.since).year()+(hn-Xt.offset)*Mn},Eo.erasAbbrRegex=function(Xt){return Tt(this,"_erasAbbrRegex")||Tl.call(this),Xt?this._erasAbbrRegex:this._erasRegex},Eo.erasNameRegex=function(Xt){return Tt(this,"_erasNameRegex")||Tl.call(this),Xt?this._erasNameRegex:this._erasRegex},Eo.erasNarrowRegex=function(Xt){return Tt(this,"_erasNarrowRegex")||Tl.call(this),Xt?this._erasNarrowRegex:this._erasRegex},Eo.months=function(Xt,hn){return Xt?(bt(this._months)?this._months:this._months[(this._months.isFormat||Mi).test(hn)?"format":"standalone"])[Xt.month()]:bt(this._months)?this._months:this._months.standalone},Eo.monthsShort=function(Xt,hn){return Xt?(bt(this._monthsShort)?this._monthsShort:this._monthsShort[Mi.test(hn)?"format":"standalone"])[Xt.month()]:bt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Eo.monthsParse=function(Xt,hn,Mn){var Kn,hr;if(this._monthsParseExact)return function(lo,ti,ci){var Ni,Li,_o,lo=lo.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Ni=0;Ni<12;++Ni)_o=Wt([2e3,Ni]),this._shortMonthsParse[Ni]=this.monthsShort(_o,"").toLocaleLowerCase(),this._longMonthsParse[Ni]=this.months(_o,"").toLocaleLowerCase();return ci?ti==="MMM"?(Li=Ti.call(this._shortMonthsParse,lo))!==-1?Li:null:(Li=Ti.call(this._longMonthsParse,lo))!==-1?Li:null:ti==="MMM"?(Li=Ti.call(this._shortMonthsParse,lo))!==-1||(Li=Ti.call(this._longMonthsParse,lo))!==-1?Li:null:(Li=Ti.call(this._longMonthsParse,lo))!==-1||(Li=Ti.call(this._shortMonthsParse,lo))!==-1?Li:null}.call(this,Xt,hn,Mn);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Kn=0;Kn<12;Kn++)if(hr=Wt([2e3,Kn]),Mn&&!this._longMonthsParse[Kn]&&(this._longMonthsParse[Kn]=new RegExp("^"+this.months(hr,"").replace(".","")+"$","i"),this._shortMonthsParse[Kn]=new RegExp("^"+this.monthsShort(hr,"").replace(".","")+"$","i")),Mn||this._monthsParse[Kn]||(hr="^"+this.months(hr,"")+"|^"+this.monthsShort(hr,""),this._monthsParse[Kn]=new RegExp(hr.replace(".",""),"i")),Mn&&hn==="MMMM"&&this._longMonthsParse[Kn].test(Xt)||Mn&&hn==="MMM"&&this._shortMonthsParse[Kn].test(Xt)||!Mn&&this._monthsParse[Kn].test(Xt))return Kn},Eo.monthsRegex=function(Xt){return this._monthsParseExact?(Tt(this,"_monthsRegex")||wo.call(this),Xt?this._monthsStrictRegex:this._monthsRegex):(Tt(this,"_monthsRegex")||(this._monthsRegex=io),this._monthsStrictRegex&&Xt?this._monthsStrictRegex:this._monthsRegex)},Eo.monthsShortRegex=function(Xt){return this._monthsParseExact?(Tt(this,"_monthsRegex")||wo.call(this),Xt?this._monthsShortStrictRegex:this._monthsShortRegex):(Tt(this,"_monthsShortRegex")||(this._monthsShortRegex=Ei),this._monthsShortStrictRegex&&Xt?this._monthsShortStrictRegex:this._monthsShortRegex)},Eo.week=function(Xt){return Rs(Xt,this._week.dow,this._week.doy).week},Eo.firstDayOfYear=function(){return this._week.doy},Eo.firstDayOfWeek=function(){return this._week.dow},Eo.weekdays=function(Xt,hn){return hn=bt(this._weekdays)?this._weekdays:this._weekdays[Xt&&Xt!==!0&&this._weekdays.isFormat.test(hn)?"format":"standalone"],Xt===!0?ls(hn,this._week.dow):Xt?hn[Xt.day()]:hn},Eo.weekdaysMin=function(Xt){return Xt===!0?ls(this._weekdaysMin,this._week.dow):Xt?this._weekdaysMin[Xt.day()]:this._weekdaysMin},Eo.weekdaysShort=function(Xt){return Xt===!0?ls(this._weekdaysShort,this._week.dow):Xt?this._weekdaysShort[Xt.day()]:this._weekdaysShort},Eo.weekdaysParse=function(Xt,hn,Mn){var Kn,hr;if(this._weekdaysParseExact)return function(lo,ti,ci){var Ni,Li,_o,lo=lo.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Ni=0;Ni<7;++Ni)_o=Wt([2e3,1]).day(Ni),this._minWeekdaysParse[Ni]=this.weekdaysMin(_o,"").toLocaleLowerCase(),this._shortWeekdaysParse[Ni]=this.weekdaysShort(_o,"").toLocaleLowerCase(),this._weekdaysParse[Ni]=this.weekdays(_o,"").toLocaleLowerCase();return ci?ti==="dddd"?(Li=Ti.call(this._weekdaysParse,lo))!==-1?Li:null:ti==="ddd"?(Li=Ti.call(this._shortWeekdaysParse,lo))!==-1?Li:null:(Li=Ti.call(this._minWeekdaysParse,lo))!==-1?Li:null:ti==="dddd"?(Li=Ti.call(this._weekdaysParse,lo))!==-1||(Li=Ti.call(this._shortWeekdaysParse,lo))!==-1||(Li=Ti.call(this._minWeekdaysParse,lo))!==-1?Li:null:ti==="ddd"?(Li=Ti.call(this._shortWeekdaysParse,lo))!==-1||(Li=Ti.call(this._weekdaysParse,lo))!==-1||(Li=Ti.call(this._minWeekdaysParse,lo))!==-1?Li:null:(Li=Ti.call(this._minWeekdaysParse,lo))!==-1||(Li=Ti.call(this._weekdaysParse,lo))!==-1||(Li=Ti.call(this._shortWeekdaysParse,lo))!==-1?Li:null}.call(this,Xt,hn,Mn);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Kn=0;Kn<7;Kn++)if(hr=Wt([2e3,1]).day(Kn),Mn&&!this._fullWeekdaysParse[Kn]&&(this._fullWeekdaysParse[Kn]=new RegExp("^"+this.weekdays(hr,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Kn]=new RegExp("^"+this.weekdaysShort(hr,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Kn]=new RegExp("^"+this.weekdaysMin(hr,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[Kn]||(hr="^"+this.weekdays(hr,"")+"|^"+this.weekdaysShort(hr,"")+"|^"+this.weekdaysMin(hr,""),this._weekdaysParse[Kn]=new RegExp(hr.replace(".",""),"i")),Mn&&hn==="dddd"&&this._fullWeekdaysParse[Kn].test(Xt)||Mn&&hn==="ddd"&&this._shortWeekdaysParse[Kn].test(Xt)||Mn&&hn==="dd"&&this._minWeekdaysParse[Kn].test(Xt)||!Mn&&this._weekdaysParse[Kn].test(Xt))return Kn},Eo.weekdaysRegex=function(Xt){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||li.call(this),Xt?this._weekdaysStrictRegex:this._weekdaysRegex):(Tt(this,"_weekdaysRegex")||(this._weekdaysRegex=xi),this._weekdaysStrictRegex&&Xt?this._weekdaysStrictRegex:this._weekdaysRegex)},Eo.weekdaysShortRegex=function(Xt){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||li.call(this),Xt?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Tt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ui),this._weekdaysShortStrictRegex&&Xt?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Eo.weekdaysMinRegex=function(Xt){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||li.call(this),Xt?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Tt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xr),this._weekdaysMinStrictRegex&&Xt?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Eo.isPM=function(Xt){return(Xt+"").toLowerCase().charAt(0)==="p"},Eo.meridiem=function(Xt,hn,Mn){return 11<Xt?Mn?"pm":"PM":Mn?"am":"AM"},ji("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(Xt){var hn=Xt%10;return Xt+(ir(Xt%100/10)===1?"th":hn==1?"st":hn==2?"nd":hn==3?"rd":"th")}}),vt.lang=An("moment.lang is deprecated. Use moment.locale instead.",ji),vt.langData=An("moment.langData is deprecated. Use moment.localeData instead.",mo);var xu=Math.abs;function Dd(Xt,hn,Mn,Kn){return hn=ga(hn,Mn),Xt._milliseconds+=Kn*hn._milliseconds,Xt._days+=Kn*hn._days,Xt._months+=Kn*hn._months,Xt._bubble()}function ed(Xt){return Xt<0?Math.floor(Xt):Math.ceil(Xt)}function Th(Xt){return 4800*Xt/146097}function td(Xt){return 146097*Xt/4800}function Ys(Xt){return function(){return this.as(Xt)}}Qn=Ys("ms"),Nn=Ys("s"),mi=Ys("m"),$n=Ys("h"),lr=Ys("d"),Dr=Ys("w"),br=Ys("M"),Lc=Ys("Q"),ma=Ys("y");function Nu(Xt){return function(){return this.isValid()?this._data[Xt]:NaN}}var Za=Nu("milliseconds"),Ua=Nu("seconds"),kl=Nu("minutes"),Eo=Nu("hours"),Ef=Nu("days"),wp=Nu("months"),nh=Nu("years"),iu=Math.round,Gl={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ml(Xt,hn,Mn,Kn){var Li=ga(Xt).abs(),_o=iu(Li.as("s")),hr=iu(Li.as("m")),zr=iu(Li.as("h")),ti=iu(Li.as("d")),ci=iu(Li.as("M")),Ni=iu(Li.as("w")),Li=iu(Li.as("y")),_o=(_o<=Mn.ss?["s",_o]:_o<Mn.s&&["ss",_o])||hr<=1&&["m"]||hr<Mn.m&&["mm",hr]||zr<=1&&["h"]||zr<Mn.h&&["hh",zr]||ti<=1&&["d"]||ti<Mn.d&&["dd",ti];return(_o=(_o=Mn.w!=null?_o||Ni<=1&&["w"]||Ni<Mn.w&&["ww",Ni]:_o)||ci<=1&&["M"]||ci<Mn.M&&["MM",ci]||Li<=1&&["y"]||["yy",Li])[2]=hn,_o[3]=0<+Xt,_o[4]=Kn,function(lo,Ko,Bs,Ds,wu){return wu.relativeTime(Ko||1,!!Bs,lo,Ds)}.apply(null,_o)}var ja=Math.abs;function Ka(Xt){return(0<Xt)-(Xt<0)||+Xt}function nd(){if(!this.isValid())return this.localeData().invalidDate();var Xt,hn,Mn,Kn,hr,zr,ti,ci=ja(this._milliseconds)/1e3,Ni=ja(this._days),Li=ja(this._months),_o=this.asSeconds();return _o?(Xt=wr(ci/60),hn=wr(Xt/60),ci%=60,Xt%=60,Mn=wr(Li/12),Li%=12,Kn=ci?ci.toFixed(3).replace(/\.?0+$/,""):"",hr=Ka(this._months)!==Ka(_o)?"-":"",zr=Ka(this._days)!==Ka(_o)?"-":"",ti=Ka(this._milliseconds)!==Ka(_o)?"-":"",(_o<0?"-":"")+"P"+(Mn?hr+Mn+"Y":"")+(Li?hr+Li+"M":"")+(Ni?zr+Ni+"D":"")+(hn||Xt||ci?"T":"")+(hn?ti+hn+"H":"")+(Xt?ti+Xt+"M":"")+(ci?ti+Kn+"S":"")):"P0D"}var Jo=pa.prototype;return Jo.isValid=function(){return this._isValid},Jo.abs=function(){var Xt=this._data;return this._milliseconds=xu(this._milliseconds),this._days=xu(this._days),this._months=xu(this._months),Xt.milliseconds=xu(Xt.milliseconds),Xt.seconds=xu(Xt.seconds),Xt.minutes=xu(Xt.minutes),Xt.hours=xu(Xt.hours),Xt.months=xu(Xt.months),Xt.years=xu(Xt.years),this},Jo.add=function(Xt,hn){return Dd(this,Xt,hn,1)},Jo.subtract=function(Xt,hn){return Dd(this,Xt,hn,-1)},Jo.as=function(Xt){if(!this.isValid())return NaN;var hn,Mn,Kn=this._milliseconds;if((Xt=Ar(Xt))==="month"||Xt==="quarter"||Xt==="year")switch(hn=this._days+Kn/864e5,Mn=this._months+Th(hn),Xt){case"month":return Mn;case"quarter":return Mn/3;case"year":return Mn/12}else switch(hn=this._days+Math.round(td(this._months)),Xt){case"week":return hn/7+Kn/6048e5;case"day":return hn+Kn/864e5;case"hour":return 24*hn+Kn/36e5;case"minute":return 1440*hn+Kn/6e4;case"second":return 86400*hn+Kn/1e3;case"millisecond":return Math.floor(864e5*hn)+Kn;default:throw new Error("Unknown unit "+Xt)}},Jo.asMilliseconds=Qn,Jo.asSeconds=Nn,Jo.asMinutes=mi,Jo.asHours=$n,Jo.asDays=lr,Jo.asWeeks=Dr,Jo.asMonths=br,Jo.asQuarters=Lc,Jo.asYears=ma,Jo.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ir(this._months/12):NaN},Jo._bubble=function(){var Xt=this._milliseconds,hn=this._days,Mn=this._months,Kn=this._data;return 0<=Xt&&0<=hn&&0<=Mn||Xt<=0&&hn<=0&&Mn<=0||(Xt+=864e5*ed(td(Mn)+hn),Mn=hn=0),Kn.milliseconds=Xt%1e3,Xt=wr(Xt/1e3),Kn.seconds=Xt%60,Xt=wr(Xt/60),Kn.minutes=Xt%60,Xt=wr(Xt/60),Kn.hours=Xt%24,hn+=wr(Xt/24),Mn+=Xt=wr(Th(hn)),hn-=ed(td(Xt)),Xt=wr(Mn/12),Mn%=12,Kn.days=hn,Kn.months=Mn,Kn.years=Xt,this},Jo.clone=function(){return ga(this)},Jo.get=function(Xt){return Xt=Ar(Xt),this.isValid()?this[Xt+"s"]():NaN},Jo.milliseconds=Za,Jo.seconds=Ua,Jo.minutes=kl,Jo.hours=Eo,Jo.days=Ef,Jo.weeks=function(){return wr(this.days()/7)},Jo.months=wp,Jo.years=nh,Jo.humanize=function(Xt,hn){if(!this.isValid())return this.localeData().invalidDate();var Mn=!1,Kn=Gl;return typeof Xt=="object"&&(hn=Xt,Xt=!1),typeof Xt=="boolean"&&(Mn=Xt),typeof hn=="object"&&(Kn=Object.assign({},Gl,hn),hn.s!=null&&hn.ss==null&&(Kn.ss=hn.s-1)),Xt=this.localeData(),hn=ml(this,!Mn,Kn,Xt),Mn&&(hn=Xt.pastFuture(+this,hn)),Xt.postformat(hn)},Jo.toISOString=nd,Jo.toString=nd,Jo.toJSON=nd,Jo.locale=Dl,Jo.localeData=ua,Jo.toIsoString=An("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),Jo.lang=Vr,rr("X",0,0,"unix"),rr("x",0,0,"valueOf"),_r("x",or),_r("X",/[+-]?\d+(\.\d{1,3})?/),ki("X",function(Xt,hn,Mn){Mn._d=new Date(1e3*parseFloat(Xt))}),ki("x",function(Xt,hn,Mn){Mn._d=new Date(ir(Xt))}),vt.version="2.29.4",it=Wo,vt.fn=un,vt.min=function(){return oa("isBefore",[].slice.call(arguments,0))},vt.max=function(){return oa("isAfter",[].slice.call(arguments,0))},vt.now=function(){return Date.now?Date.now():+new Date},vt.utc=Wt,vt.unix=function(Xt){return Wo(1e3*Xt)},vt.months=function(Xt,hn){return th(Xt,hn,"months")},vt.isDate=Nt,vt.locale=ji,vt.invalid=Yt,vt.duration=ga,vt.isMoment=wn,vt.weekdays=function(Xt,hn,Mn){return Rd(Xt,hn,Mn,"weekdays")},vt.parseZone=function(){return Wo.apply(null,arguments).parseZone()},vt.localeData=mo,vt.isDuration=gl,vt.monthsShort=function(Xt,hn){return th(Xt,hn,"monthsShort")},vt.weekdaysMin=function(Xt,hn,Mn){return Rd(Xt,hn,Mn,"weekdaysMin")},vt.defineLocale=ao,vt.updateLocale=function(Xt,hn){var Mn,Kn;return hn!=null?(Kn=Mo,ho[Xt]!=null&&ho[Xt].parentLocale!=null?ho[Xt].set(gn(ho[Xt]._config,hn)):(hn=gn(Kn=(Mn=Ea(Xt))!=null?Mn._config:Kn,hn),Mn==null&&(hn.abbr=Xt),(Kn=new Vn(hn)).parentLocale=ho[Xt],ho[Xt]=Kn),ji(Xt)):ho[Xt]!=null&&(ho[Xt].parentLocale!=null?(ho[Xt]=ho[Xt].parentLocale,Xt===ji()&&ji(Xt)):ho[Xt]!=null&&delete ho[Xt]),ho[Xt]},vt.locales=function(){return pn(ho)},vt.weekdaysShort=function(Xt,hn,Mn){return Rd(Xt,hn,Mn,"weekdaysShort")},vt.normalizeUnits=Ar,vt.relativeTimeRounding=function(Xt){return Xt===void 0?iu:typeof Xt=="function"&&(iu=Xt,!0)},vt.relativeTimeThreshold=function(Xt,hn){return Gl[Xt]!==void 0&&(hn===void 0?Gl[Xt]:(Gl[Xt]=hn,Xt==="s"&&(Gl.ss=hn-1),!0))},vt.calendarFormat=function(Xt,hn){return(Xt=Xt.diff(hn,"days",!0))<-6?"sameElse":Xt<-1?"lastWeek":Xt<0?"lastDay":Xt<1?"sameDay":Xt<2?"nextDay":Xt<7?"nextWeek":"sameElse"},vt.prototype=un,vt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},vt})})(moment_min);const moment=moment_min.exports;var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var sanitizeUrl_1=dist.sanitizeUrl=void 0,invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,htmlCtrlEntityRegex=/&(newline|tab);/gi,ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,urlSchemeRegex=/^.+(:|&colon;)/gim,relativeFirstCharacters=[".","/"];function isRelativeUrlWithoutProtocol(nt){return relativeFirstCharacters.indexOf(nt[0])>-1}function decodeHtmlCharacters(nt){return nt.replace(htmlEntitiesRegex,function(rt,it){return String.fromCharCode(it)})}function sanitizeUrl(nt){var rt=decodeHtmlCharacters(nt||"").replace(htmlCtrlEntityRegex,"").replace(ctrlCharactersRegex,"").trim();if(!rt)return"about:blank";if(isRelativeUrlWithoutProtocol(rt))return rt;var it=rt.match(urlSchemeRegex);if(!it)return rt;var vt=it[0];return invalidProtocolRegex.test(vt)?"about:blank":rt}sanitizeUrl_1=dist.sanitizeUrl=sanitizeUrl;function ascending$1(nt,rt){return nt==null||rt==null?NaN:nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function descending$1(nt,rt){return nt==null||rt==null?NaN:rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function bisector(nt){let rt,it,vt;nt.length!==2?(rt=ascending$1,it=(kt,Lt)=>ascending$1(nt(kt),Lt),vt=(kt,Lt)=>nt(kt)-Lt):(rt=nt===ascending$1||nt===descending$1?nt:zero$1,it=nt,vt=nt);function bt(kt,Lt,Mt=0,Nt=kt.length){if(Mt<Nt){if(rt(Lt,Lt)!==0)return Nt;do{const zt=Mt+Nt>>>1;it(kt[zt],Lt)<0?Mt=zt+1:Nt=zt}while(Mt<Nt)}return Mt}function wt(kt,Lt,Mt=0,Nt=kt.length){if(Mt<Nt){if(rt(Lt,Lt)!==0)return Nt;do{const zt=Mt+Nt>>>1;it(kt[zt],Lt)<=0?Mt=zt+1:Nt=zt}while(Mt<Nt)}return Mt}function Tt(kt,Lt,Mt=0,Nt=kt.length){const zt=bt(kt,Lt,Mt,Nt-1);return zt>Mt&&vt(kt[zt-1],Lt)>-vt(kt[zt],Lt)?zt-1:zt}return{left:bt,center:Tt,right:wt}}function zero$1(){return 0}function number$3(nt){return nt===null?NaN:+nt}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$3).center;const bisect=bisectRight;class InternMap extends Map{constructor(rt,it=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:it}}),rt!=null)for(const[vt,bt]of rt)this.set(vt,bt)}get(rt){return super.get(intern_get(this,rt))}has(rt){return super.has(intern_get(this,rt))}set(rt,it){return super.set(intern_set(this,rt),it)}delete(rt){return super.delete(intern_delete(this,rt))}}function intern_get({_intern:nt,_key:rt},it){const vt=rt(it);return nt.has(vt)?nt.get(vt):it}function intern_set({_intern:nt,_key:rt},it){const vt=rt(it);return nt.has(vt)?nt.get(vt):(nt.set(vt,it),it)}function intern_delete({_intern:nt,_key:rt},it){const vt=rt(it);return nt.has(vt)&&(it=nt.get(vt),nt.delete(vt)),it}function keyof(nt){return nt!==null&&typeof nt=="object"?nt.valueOf():nt}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(nt,rt,it){var vt,bt=-1,wt,Tt,kt;if(rt=+rt,nt=+nt,it=+it,nt===rt&&it>0)return[nt];if((vt=rt<nt)&&(wt=nt,nt=rt,rt=wt),(kt=tickIncrement(nt,rt,it))===0||!isFinite(kt))return[];if(kt>0){let Lt=Math.round(nt/kt),Mt=Math.round(rt/kt);for(Lt*kt<nt&&++Lt,Mt*kt>rt&&--Mt,Tt=new Array(wt=Mt-Lt+1);++bt<wt;)Tt[bt]=(Lt+bt)*kt}else{kt=-kt;let Lt=Math.round(nt*kt),Mt=Math.round(rt*kt);for(Lt/kt<nt&&++Lt,Mt/kt>rt&&--Mt,Tt=new Array(wt=Mt-Lt+1);++bt<wt;)Tt[bt]=(Lt+bt)/kt}return vt&&Tt.reverse(),Tt}function tickIncrement(nt,rt,it){var vt=(rt-nt)/Math.max(0,it),bt=Math.floor(Math.log(vt)/Math.LN10),wt=vt/Math.pow(10,bt);return bt>=0?(wt>=e10?10:wt>=e5?5:wt>=e2?2:1)*Math.pow(10,bt):-Math.pow(10,-bt)/(wt>=e10?10:wt>=e5?5:wt>=e2?2:1)}function tickStep(nt,rt,it){var vt=Math.abs(rt-nt)/Math.max(0,it),bt=Math.pow(10,Math.floor(Math.log(vt)/Math.LN10)),wt=vt/bt;return wt>=e10?bt*=10:wt>=e5?bt*=5:wt>=e2&&(bt*=2),rt<nt?-bt:bt}function max$2(nt,rt){let it;if(rt===void 0)for(const vt of nt)vt!=null&&(it<vt||it===void 0&&vt>=vt)&&(it=vt);else{let vt=-1;for(let bt of nt)(bt=rt(bt,++vt,nt))!=null&&(it<bt||it===void 0&&bt>=bt)&&(it=bt)}return it}function min$2(nt,rt){let it;if(rt===void 0)for(const vt of nt)vt!=null&&(it>vt||it===void 0&&vt>=vt)&&(it=vt);else{let vt=-1;for(let bt of nt)(bt=rt(bt,++vt,nt))!=null&&(it>bt||it===void 0&&bt>=bt)&&(it=bt)}return it}function identity$5(nt){return nt}var top=1,right=2,bottom=3,left=4,epsilon$2=1e-6;function translateX(nt){return"translate("+nt+",0)"}function translateY(nt){return"translate(0,"+nt+")"}function number$2(nt){return rt=>+nt(rt)}function center(nt,rt){return rt=Math.max(0,nt.bandwidth()-rt*2)/2,nt.round()&&(rt=Math.round(rt)),it=>+nt(it)+rt}function entering(){return!this.__axis}function axis(nt,rt){var it=[],vt=null,bt=null,wt=6,Tt=6,kt=3,Lt=typeof window<"u"&&window.devicePixelRatio>1?0:.5,Mt=nt===top||nt===left?-1:1,Nt=nt===left||nt===right?"x":"y",zt=nt===top||nt===bottom?translateX:translateY;function Ht(Wt){var Zt=vt==null?rt.ticks?rt.ticks.apply(rt,it):rt.domain():vt,tn=bt==null?rt.tickFormat?rt.tickFormat.apply(rt,it):identity$5:bt,Yt=Math.max(wt,0)+kt,nn=rt.range(),rn=+nn[0]+Lt,ln=+nn[nn.length-1]+Lt,sn=(rt.bandwidth?center:number$2)(rt.copy(),Lt),mn=Wt.selection?Wt.selection():Wt,wn=mn.selectAll(".domain").data([null]),Cn=mn.selectAll(".tick").data(Zt,rt).order(),An=Cn.exit(),Pn=Cn.enter().append("g").attr("class","tick"),On=Cn.select("line"),kn=Cn.select("text");wn=wn.merge(wn.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Cn=Cn.merge(Pn),On=On.merge(Pn.append("line").attr("stroke","currentColor").attr(Nt+"2",Mt*wt)),kn=kn.merge(Pn.append("text").attr("fill","currentColor").attr(Nt,Mt*Yt).attr("dy",nt===top?"0em":nt===bottom?"0.71em":"0.32em")),Wt!==mn&&(wn=wn.transition(Wt),Cn=Cn.transition(Wt),On=On.transition(Wt),kn=kn.transition(Wt),An=An.transition(Wt).attr("opacity",epsilon$2).attr("transform",function(gn){return isFinite(gn=sn(gn))?zt(gn+Lt):this.getAttribute("transform")}),Pn.attr("opacity",epsilon$2).attr("transform",function(gn){var Vn=this.parentNode.__axis;return zt((Vn&&isFinite(Vn=Vn(gn))?Vn:sn(gn))+Lt)})),An.remove(),wn.attr("d",nt===left||nt===right?Tt?"M"+Mt*Tt+","+rn+"H"+Lt+"V"+ln+"H"+Mt*Tt:"M"+Lt+","+rn+"V"+ln:Tt?"M"+rn+","+Mt*Tt+"V"+Lt+"H"+ln+"V"+Mt*Tt:"M"+rn+","+Lt+"H"+ln),Cn.attr("opacity",1).attr("transform",function(gn){return zt(sn(gn)+Lt)}),On.attr(Nt+"2",Mt*wt),kn.attr(Nt,Mt*Yt).text(tn),mn.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",nt===right?"start":nt===left?"end":"middle"),mn.each(function(){this.__axis=sn})}return Ht.scale=function(Wt){return arguments.length?(rt=Wt,Ht):rt},Ht.ticks=function(){return it=Array.from(arguments),Ht},Ht.tickArguments=function(Wt){return arguments.length?(it=Wt==null?[]:Array.from(Wt),Ht):it.slice()},Ht.tickValues=function(Wt){return arguments.length?(vt=Wt==null?null:Array.from(Wt),Ht):vt&&vt.slice()},Ht.tickFormat=function(Wt){return arguments.length?(bt=Wt,Ht):bt},Ht.tickSize=function(Wt){return arguments.length?(wt=Tt=+Wt,Ht):wt},Ht.tickSizeInner=function(Wt){return arguments.length?(wt=+Wt,Ht):wt},Ht.tickSizeOuter=function(Wt){return arguments.length?(Tt=+Wt,Ht):Tt},Ht.tickPadding=function(Wt){return arguments.length?(kt=+Wt,Ht):kt},Ht.offset=function(Wt){return arguments.length?(Lt=+Wt,Ht):Lt},Ht}function axisTop(nt){return axis(top,nt)}function axisBottom(nt){return axis(bottom,nt)}var noop$2={value:()=>{}};function dispatch(){for(var nt=0,rt=arguments.length,it={},vt;nt<rt;++nt){if(!(vt=arguments[nt]+"")||vt in it||/[\s.]/.test(vt))throw new Error("illegal type: "+vt);it[vt]=[]}return new Dispatch(it)}function Dispatch(nt){this._=nt}function parseTypenames$1(nt,rt){return nt.trim().split(/^|\s+/).map(function(it){var vt="",bt=it.indexOf(".");if(bt>=0&&(vt=it.slice(bt+1),it=it.slice(0,bt)),it&&!rt.hasOwnProperty(it))throw new Error("unknown type: "+it);return{type:it,name:vt}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(nt,rt){var it=this._,vt=parseTypenames$1(nt+"",it),bt,wt=-1,Tt=vt.length;if(arguments.length<2){for(;++wt<Tt;)if((bt=(nt=vt[wt]).type)&&(bt=get$2(it[bt],nt.name)))return bt;return}if(rt!=null&&typeof rt!="function")throw new Error("invalid callback: "+rt);for(;++wt<Tt;)if(bt=(nt=vt[wt]).type)it[bt]=set$2(it[bt],nt.name,rt);else if(rt==null)for(bt in it)it[bt]=set$2(it[bt],nt.name,null);return this},copy:function(){var nt={},rt=this._;for(var it in rt)nt[it]=rt[it].slice();return new Dispatch(nt)},call:function(nt,rt){if((bt=arguments.length-2)>0)for(var it=new Array(bt),vt=0,bt,wt;vt<bt;++vt)it[vt]=arguments[vt+2];if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(wt=this._[nt],vt=0,bt=wt.length;vt<bt;++vt)wt[vt].value.apply(rt,it)},apply:function(nt,rt,it){if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(var vt=this._[nt],bt=0,wt=vt.length;bt<wt;++bt)vt[bt].value.apply(rt,it)}};function get$2(nt,rt){for(var it=0,vt=nt.length,bt;it<vt;++it)if((bt=nt[it]).name===rt)return bt.value}function set$2(nt,rt,it){for(var vt=0,bt=nt.length;vt<bt;++vt)if(nt[vt].name===rt){nt[vt]=noop$2,nt=nt.slice(0,vt).concat(nt.slice(vt+1));break}return it!=null&&nt.push({name:rt,value:it}),nt}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(nt){var rt=nt+="",it=rt.indexOf(":");return it>=0&&(rt=nt.slice(0,it))!=="xmlns"&&(nt=nt.slice(it+1)),namespaces.hasOwnProperty(rt)?{space:namespaces[rt],local:nt}:nt}function creatorInherit(nt){return function(){var rt=this.ownerDocument,it=this.namespaceURI;return it===xhtml&&rt.documentElement.namespaceURI===xhtml?rt.createElement(nt):rt.createElementNS(it,nt)}}function creatorFixed(nt){return function(){return this.ownerDocument.createElementNS(nt.space,nt.local)}}function creator(nt){var rt=namespace(nt);return(rt.local?creatorFixed:creatorInherit)(rt)}function none(){}function selector(nt){return nt==null?none:function(){return this.querySelector(nt)}}function selection_select(nt){typeof nt!="function"&&(nt=selector(nt));for(var rt=this._groups,it=rt.length,vt=new Array(it),bt=0;bt<it;++bt)for(var wt=rt[bt],Tt=wt.length,kt=vt[bt]=new Array(Tt),Lt,Mt,Nt=0;Nt<Tt;++Nt)(Lt=wt[Nt])&&(Mt=nt.call(Lt,Lt.__data__,Nt,wt))&&("__data__"in Lt&&(Mt.__data__=Lt.__data__),kt[Nt]=Mt);return new Selection$1(vt,this._parents)}function array$1(nt){return nt==null?[]:Array.isArray(nt)?nt:Array.from(nt)}function empty(){return[]}function selectorAll(nt){return nt==null?empty:function(){return this.querySelectorAll(nt)}}function arrayAll(nt){return function(){return array$1(nt.apply(this,arguments))}}function selection_selectAll(nt){typeof nt=="function"?nt=arrayAll(nt):nt=selectorAll(nt);for(var rt=this._groups,it=rt.length,vt=[],bt=[],wt=0;wt<it;++wt)for(var Tt=rt[wt],kt=Tt.length,Lt,Mt=0;Mt<kt;++Mt)(Lt=Tt[Mt])&&(vt.push(nt.call(Lt,Lt.__data__,Mt,Tt)),bt.push(Lt));return new Selection$1(vt,bt)}function matcher(nt){return function(){return this.matches(nt)}}function childMatcher(nt){return function(rt){return rt.matches(nt)}}var find$2=Array.prototype.find;function childFind(nt){return function(){return find$2.call(this.children,nt)}}function childFirst(){return this.firstElementChild}function selection_selectChild(nt){return this.select(nt==null?childFirst:childFind(typeof nt=="function"?nt:childMatcher(nt)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(nt){return function(){return filter$1.call(this.children,nt)}}function selection_selectChildren(nt){return this.selectAll(nt==null?children:childrenFilter(typeof nt=="function"?nt:childMatcher(nt)))}function selection_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,vt=new Array(it),bt=0;bt<it;++bt)for(var wt=rt[bt],Tt=wt.length,kt=vt[bt]=[],Lt,Mt=0;Mt<Tt;++Mt)(Lt=wt[Mt])&&nt.call(Lt,Lt.__data__,Mt,wt)&&kt.push(Lt);return new Selection$1(vt,this._parents)}function sparse(nt){return new Array(nt.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(nt,rt){this.ownerDocument=nt.ownerDocument,this.namespaceURI=nt.namespaceURI,this._next=null,this._parent=nt,this.__data__=rt}EnterNode.prototype={constructor:EnterNode,appendChild:function(nt){return this._parent.insertBefore(nt,this._next)},insertBefore:function(nt,rt){return this._parent.insertBefore(nt,rt)},querySelector:function(nt){return this._parent.querySelector(nt)},querySelectorAll:function(nt){return this._parent.querySelectorAll(nt)}};function constant$3(nt){return function(){return nt}}function bindIndex(nt,rt,it,vt,bt,wt){for(var Tt=0,kt,Lt=rt.length,Mt=wt.length;Tt<Mt;++Tt)(kt=rt[Tt])?(kt.__data__=wt[Tt],vt[Tt]=kt):it[Tt]=new EnterNode(nt,wt[Tt]);for(;Tt<Lt;++Tt)(kt=rt[Tt])&&(bt[Tt]=kt)}function bindKey(nt,rt,it,vt,bt,wt,Tt){var kt,Lt,Mt=new Map,Nt=rt.length,zt=wt.length,Ht=new Array(Nt),Wt;for(kt=0;kt<Nt;++kt)(Lt=rt[kt])&&(Ht[kt]=Wt=Tt.call(Lt,Lt.__data__,kt,rt)+"",Mt.has(Wt)?bt[kt]=Lt:Mt.set(Wt,Lt));for(kt=0;kt<zt;++kt)Wt=Tt.call(nt,wt[kt],kt,wt)+"",(Lt=Mt.get(Wt))?(vt[kt]=Lt,Lt.__data__=wt[kt],Mt.delete(Wt)):it[kt]=new EnterNode(nt,wt[kt]);for(kt=0;kt<Nt;++kt)(Lt=rt[kt])&&Mt.get(Ht[kt])===Lt&&(bt[kt]=Lt)}function datum(nt){return nt.__data__}function selection_data(nt,rt){if(!arguments.length)return Array.from(this,datum);var it=rt?bindKey:bindIndex,vt=this._parents,bt=this._groups;typeof nt!="function"&&(nt=constant$3(nt));for(var wt=bt.length,Tt=new Array(wt),kt=new Array(wt),Lt=new Array(wt),Mt=0;Mt<wt;++Mt){var Nt=vt[Mt],zt=bt[Mt],Ht=zt.length,Wt=arraylike(nt.call(Nt,Nt&&Nt.__data__,Mt,vt)),Zt=Wt.length,tn=kt[Mt]=new Array(Zt),Yt=Tt[Mt]=new Array(Zt),nn=Lt[Mt]=new Array(Ht);it(Nt,zt,tn,Yt,nn,Wt,rt);for(var rn=0,ln=0,sn,mn;rn<Zt;++rn)if(sn=tn[rn]){for(rn>=ln&&(ln=rn+1);!(mn=Yt[ln])&&++ln<Zt;);sn._next=mn||null}}return Tt=new Selection$1(Tt,vt),Tt._enter=kt,Tt._exit=Lt,Tt}function arraylike(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(nt,rt,it){var vt=this.enter(),bt=this,wt=this.exit();return typeof nt=="function"?(vt=nt(vt),vt&&(vt=vt.selection())):vt=vt.append(nt+""),rt!=null&&(bt=rt(bt),bt&&(bt=bt.selection())),it==null?wt.remove():it(wt),vt&&bt?vt.merge(bt).order():bt}function selection_merge(nt){for(var rt=nt.selection?nt.selection():nt,it=this._groups,vt=rt._groups,bt=it.length,wt=vt.length,Tt=Math.min(bt,wt),kt=new Array(bt),Lt=0;Lt<Tt;++Lt)for(var Mt=it[Lt],Nt=vt[Lt],zt=Mt.length,Ht=kt[Lt]=new Array(zt),Wt,Zt=0;Zt<zt;++Zt)(Wt=Mt[Zt]||Nt[Zt])&&(Ht[Zt]=Wt);for(;Lt<bt;++Lt)kt[Lt]=it[Lt];return new Selection$1(kt,this._parents)}function selection_order(){for(var nt=this._groups,rt=-1,it=nt.length;++rt<it;)for(var vt=nt[rt],bt=vt.length-1,wt=vt[bt],Tt;--bt>=0;)(Tt=vt[bt])&&(wt&&Tt.compareDocumentPosition(wt)^4&&wt.parentNode.insertBefore(Tt,wt),wt=Tt);return this}function selection_sort(nt){nt||(nt=ascending);function rt(zt,Ht){return zt&&Ht?nt(zt.__data__,Ht.__data__):!zt-!Ht}for(var it=this._groups,vt=it.length,bt=new Array(vt),wt=0;wt<vt;++wt){for(var Tt=it[wt],kt=Tt.length,Lt=bt[wt]=new Array(kt),Mt,Nt=0;Nt<kt;++Nt)(Mt=Tt[Nt])&&(Lt[Nt]=Mt);Lt.sort(rt)}return new Selection$1(bt,this._parents).order()}function ascending(nt,rt){return nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function selection_call(){var nt=arguments[0];return arguments[0]=this,nt.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var vt=nt[rt],bt=0,wt=vt.length;bt<wt;++bt){var Tt=vt[bt];if(Tt)return Tt}return null}function selection_size(){let nt=0;for(const rt of this)++nt;return nt}function selection_empty(){return!this.node()}function selection_each(nt){for(var rt=this._groups,it=0,vt=rt.length;it<vt;++it)for(var bt=rt[it],wt=0,Tt=bt.length,kt;wt<Tt;++wt)(kt=bt[wt])&&nt.call(kt,kt.__data__,wt,bt);return this}function attrRemove$1(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS$1(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant$1(nt,rt){return function(){this.setAttribute(nt,rt)}}function attrConstantNS$1(nt,rt){return function(){this.setAttributeNS(nt.space,nt.local,rt)}}function attrFunction$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttribute(nt):this.setAttribute(nt,it)}}function attrFunctionNS$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttributeNS(nt.space,nt.local):this.setAttributeNS(nt.space,nt.local,it)}}function selection_attr(nt,rt){var it=namespace(nt);if(arguments.length<2){var vt=this.node();return it.local?vt.getAttributeNS(it.space,it.local):vt.getAttribute(it)}return this.each((rt==null?it.local?attrRemoveNS$1:attrRemove$1:typeof rt=="function"?it.local?attrFunctionNS$1:attrFunction$1:it.local?attrConstantNS$1:attrConstant$1)(it,rt))}function defaultView(nt){return nt.ownerDocument&&nt.ownerDocument.defaultView||nt.document&&nt||nt.defaultView}function styleRemove$1(nt){return function(){this.style.removeProperty(nt)}}function styleConstant$1(nt,rt,it){return function(){this.style.setProperty(nt,rt,it)}}function styleFunction$1(nt,rt,it){return function(){var vt=rt.apply(this,arguments);vt==null?this.style.removeProperty(nt):this.style.setProperty(nt,vt,it)}}function selection_style(nt,rt,it){return arguments.length>1?this.each((rt==null?styleRemove$1:typeof rt=="function"?styleFunction$1:styleConstant$1)(nt,rt,it==null?"":it)):styleValue(this.node(),nt)}function styleValue(nt,rt){return nt.style.getPropertyValue(rt)||defaultView(nt).getComputedStyle(nt,null).getPropertyValue(rt)}function propertyRemove(nt){return function(){delete this[nt]}}function propertyConstant(nt,rt){return function(){this[nt]=rt}}function propertyFunction(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?delete this[nt]:this[nt]=it}}function selection_property(nt,rt){return arguments.length>1?this.each((rt==null?propertyRemove:typeof rt=="function"?propertyFunction:propertyConstant)(nt,rt)):this.node()[nt]}function classArray(nt){return nt.trim().split(/^|\s+/)}function classList(nt){return nt.classList||new ClassList(nt)}function ClassList(nt){this._node=nt,this._names=classArray(nt.getAttribute("class")||"")}ClassList.prototype={add:function(nt){var rt=this._names.indexOf(nt);rt<0&&(this._names.push(nt),this._node.setAttribute("class",this._names.join(" ")))},remove:function(nt){var rt=this._names.indexOf(nt);rt>=0&&(this._names.splice(rt,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(nt){return this._names.indexOf(nt)>=0}};function classedAdd(nt,rt){for(var it=classList(nt),vt=-1,bt=rt.length;++vt<bt;)it.add(rt[vt])}function classedRemove(nt,rt){for(var it=classList(nt),vt=-1,bt=rt.length;++vt<bt;)it.remove(rt[vt])}function classedTrue(nt){return function(){classedAdd(this,nt)}}function classedFalse(nt){return function(){classedRemove(this,nt)}}function classedFunction(nt,rt){return function(){(rt.apply(this,arguments)?classedAdd:classedRemove)(this,nt)}}function selection_classed(nt,rt){var it=classArray(nt+"");if(arguments.length<2){for(var vt=classList(this.node()),bt=-1,wt=it.length;++bt<wt;)if(!vt.contains(it[bt]))return!1;return!0}return this.each((typeof rt=="function"?classedFunction:rt?classedTrue:classedFalse)(it,rt))}function textRemove(){this.textContent=""}function textConstant$1(nt){return function(){this.textContent=nt}}function textFunction$1(nt){return function(){var rt=nt.apply(this,arguments);this.textContent=rt==null?"":rt}}function selection_text(nt){return arguments.length?this.each(nt==null?textRemove:(typeof nt=="function"?textFunction$1:textConstant$1)(nt)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(nt){return function(){this.innerHTML=nt}}function htmlFunction(nt){return function(){var rt=nt.apply(this,arguments);this.innerHTML=rt==null?"":rt}}function selection_html(nt){return arguments.length?this.each(nt==null?htmlRemove:(typeof nt=="function"?htmlFunction:htmlConstant)(nt)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(nt){var rt=typeof nt=="function"?nt:creator(nt);return this.select(function(){return this.appendChild(rt.apply(this,arguments))})}function constantNull(){return null}function selection_insert(nt,rt){var it=typeof nt=="function"?nt:creator(nt),vt=rt==null?constantNull:typeof rt=="function"?rt:selector(rt);return this.select(function(){return this.insertBefore(it.apply(this,arguments),vt.apply(this,arguments)||null)})}function remove(){var nt=this.parentNode;nt&&nt.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var nt=this.cloneNode(!1),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_cloneDeep(){var nt=this.cloneNode(!0),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_clone(nt){return this.select(nt?selection_cloneDeep:selection_cloneShallow)}function selection_datum(nt){return arguments.length?this.property("__data__",nt):this.node().__data__}function contextListener(nt){return function(rt){nt.call(this,rt,this.__data__)}}function parseTypenames(nt){return nt.trim().split(/^|\s+/).map(function(rt){var it="",vt=rt.indexOf(".");return vt>=0&&(it=rt.slice(vt+1),rt=rt.slice(0,vt)),{type:rt,name:it}})}function onRemove(nt){return function(){var rt=this.__on;if(!!rt){for(var it=0,vt=-1,bt=rt.length,wt;it<bt;++it)wt=rt[it],(!nt.type||wt.type===nt.type)&&wt.name===nt.name?this.removeEventListener(wt.type,wt.listener,wt.options):rt[++vt]=wt;++vt?rt.length=vt:delete this.__on}}}function onAdd(nt,rt,it){return function(){var vt=this.__on,bt,wt=contextListener(rt);if(vt){for(var Tt=0,kt=vt.length;Tt<kt;++Tt)if((bt=vt[Tt]).type===nt.type&&bt.name===nt.name){this.removeEventListener(bt.type,bt.listener,bt.options),this.addEventListener(bt.type,bt.listener=wt,bt.options=it),bt.value=rt;return}}this.addEventListener(nt.type,wt,it),bt={type:nt.type,name:nt.name,value:rt,listener:wt,options:it},vt?vt.push(bt):this.__on=[bt]}}function selection_on(nt,rt,it){var vt=parseTypenames(nt+""),bt,wt=vt.length,Tt;if(arguments.length<2){var kt=this.node().__on;if(kt){for(var Lt=0,Mt=kt.length,Nt;Lt<Mt;++Lt)for(bt=0,Nt=kt[Lt];bt<wt;++bt)if((Tt=vt[bt]).type===Nt.type&&Tt.name===Nt.name)return Nt.value}return}for(kt=rt?onAdd:onRemove,bt=0;bt<wt;++bt)this.each(kt(vt[bt],rt,it));return this}function dispatchEvent(nt,rt,it){var vt=defaultView(nt),bt=vt.CustomEvent;typeof bt=="function"?bt=new bt(rt,it):(bt=vt.document.createEvent("Event"),it?(bt.initEvent(rt,it.bubbles,it.cancelable),bt.detail=it.detail):bt.initEvent(rt,!1,!1)),nt.dispatchEvent(bt)}function dispatchConstant(nt,rt){return function(){return dispatchEvent(this,nt,rt)}}function dispatchFunction(nt,rt){return function(){return dispatchEvent(this,nt,rt.apply(this,arguments))}}function selection_dispatch(nt,rt){return this.each((typeof rt=="function"?dispatchFunction:dispatchConstant)(nt,rt))}function*selection_iterator(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var vt=nt[rt],bt=0,wt=vt.length,Tt;bt<wt;++bt)(Tt=vt[bt])&&(yield Tt)}var root$2=[null];function Selection$1(nt,rt){this._groups=nt,this._parents=rt}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(nt){return typeof nt=="string"?new Selection$1([[document.querySelector(nt)]],[document.documentElement]):new Selection$1([[nt]],root$2)}function selectAll(nt){return typeof nt=="string"?new Selection$1([document.querySelectorAll(nt)],[document.documentElement]):new Selection$1([array$1(nt)],root$2)}function define$1(nt,rt,it){nt.prototype=rt.prototype=it,it.constructor=nt}function extend$1(nt,rt){var it=Object.create(nt.prototype);for(var vt in rt)it[vt]=rt[vt];return it}function Color$2(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$2,color,{copy(nt){return Object.assign(new this.constructor,this,nt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(nt){var rt,it;return nt=(nt+"").trim().toLowerCase(),(rt=reHex.exec(nt))?(it=rt[1].length,rt=parseInt(rt[1],16),it===6?rgbn(rt):it===3?new Rgb(rt>>8&15|rt>>4&240,rt>>4&15|rt&240,(rt&15)<<4|rt&15,1):it===8?rgba$2(rt>>24&255,rt>>16&255,rt>>8&255,(rt&255)/255):it===4?rgba$2(rt>>12&15|rt>>8&240,rt>>8&15|rt>>4&240,rt>>4&15|rt&240,((rt&15)<<4|rt&15)/255):null):(rt=reRgbInteger.exec(nt))?new Rgb(rt[1],rt[2],rt[3],1):(rt=reRgbPercent.exec(nt))?new Rgb(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,1):(rt=reRgbaInteger.exec(nt))?rgba$2(rt[1],rt[2],rt[3],rt[4]):(rt=reRgbaPercent.exec(nt))?rgba$2(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,rt[4]):(rt=reHslPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,1):(rt=reHslaPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,rt[4]):named.hasOwnProperty(nt)?rgbn(named[nt]):nt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(nt){return new Rgb(nt>>16&255,nt>>8&255,nt&255,1)}function rgba$2(nt,rt,it,vt){return vt<=0&&(nt=rt=it=NaN),new Rgb(nt,rt,it,vt)}function rgbConvert(nt){return nt instanceof Color$2||(nt=color(nt)),nt?(nt=nt.rgb(),new Rgb(nt.r,nt.g,nt.b,nt.opacity)):new Rgb}function rgb(nt,rt,it,vt){return arguments.length===1?rgbConvert(nt):new Rgb(nt,rt,it,vt==null?1:vt)}function Rgb(nt,rt,it,vt){this.r=+nt,this.g=+rt,this.b=+it,this.opacity=+vt}define$1(Rgb,rgb,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const nt=clampa(this.opacity);return`${nt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${nt===1?")":`, ${nt})`}`}function clampa(nt){return isNaN(nt)?1:Math.max(0,Math.min(1,nt))}function clampi(nt){return Math.max(0,Math.min(255,Math.round(nt)||0))}function hex(nt){return nt=clampi(nt),(nt<16?"0":"")+nt.toString(16)}function hsla(nt,rt,it,vt){return vt<=0?nt=rt=it=NaN:it<=0||it>=1?nt=rt=NaN:rt<=0&&(nt=NaN),new Hsl(nt,rt,it,vt)}function hslConvert(nt){if(nt instanceof Hsl)return new Hsl(nt.h,nt.s,nt.l,nt.opacity);if(nt instanceof Color$2||(nt=color(nt)),!nt)return new Hsl;if(nt instanceof Hsl)return nt;nt=nt.rgb();var rt=nt.r/255,it=nt.g/255,vt=nt.b/255,bt=Math.min(rt,it,vt),wt=Math.max(rt,it,vt),Tt=NaN,kt=wt-bt,Lt=(wt+bt)/2;return kt?(rt===wt?Tt=(it-vt)/kt+(it<vt)*6:it===wt?Tt=(vt-rt)/kt+2:Tt=(rt-it)/kt+4,kt/=Lt<.5?wt+bt:2-wt-bt,Tt*=60):kt=Lt>0&&Lt<1?0:Tt,new Hsl(Tt,kt,Lt,nt.opacity)}function hsl(nt,rt,it,vt){return arguments.length===1?hslConvert(nt):new Hsl(nt,rt,it,vt==null?1:vt)}function Hsl(nt,rt,it,vt){this.h=+nt,this.s=+rt,this.l=+it,this.opacity=+vt}define$1(Hsl,hsl,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},rgb(){var nt=this.h%360+(this.h<0)*360,rt=isNaN(nt)||isNaN(this.s)?0:this.s,it=this.l,vt=it+(it<.5?it:1-it)*rt,bt=2*it-vt;return new Rgb(hsl2rgb(nt>=240?nt-240:nt+120,bt,vt),hsl2rgb(nt,bt,vt),hsl2rgb(nt<120?nt+240:nt-120,bt,vt),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const nt=clampa(this.opacity);return`${nt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${nt===1?")":`, ${nt})`}`}}));function clamph(nt){return nt=(nt||0)%360,nt<0?nt+360:nt}function clampt(nt){return Math.max(0,Math.min(1,nt||0))}function hsl2rgb(nt,rt,it){return(nt<60?rt+(it-rt)*nt/60:nt<180?it:nt<240?rt+(it-rt)*(240-nt)/60:rt)*255}const radians=Math.PI/180,degrees$1=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(nt){if(nt instanceof Lab)return new Lab(nt.l,nt.a,nt.b,nt.opacity);if(nt instanceof Hcl)return hcl2lab(nt);nt instanceof Rgb||(nt=rgbConvert(nt));var rt=rgb2lrgb(nt.r),it=rgb2lrgb(nt.g),vt=rgb2lrgb(nt.b),bt=xyz2lab((.2225045*rt+.7168786*it+.0606169*vt)/Yn),wt,Tt;return rt===it&&it===vt?wt=Tt=bt:(wt=xyz2lab((.4360747*rt+.3850649*it+.1430804*vt)/Xn),Tt=xyz2lab((.0139322*rt+.0971045*it+.7141733*vt)/Zn)),new Lab(116*bt-16,500*(wt-bt),200*(bt-Tt),nt.opacity)}function lab(nt,rt,it,vt){return arguments.length===1?labConvert(nt):new Lab(nt,rt,it,vt==null?1:vt)}function Lab(nt,rt,it,vt){this.l=+nt,this.a=+rt,this.b=+it,this.opacity=+vt}define$1(Lab,lab,extend$1(Color$2,{brighter(nt){return new Lab(this.l+K*(nt==null?1:nt),this.a,this.b,this.opacity)},darker(nt){return new Lab(this.l-K*(nt==null?1:nt),this.a,this.b,this.opacity)},rgb(){var nt=(this.l+16)/116,rt=isNaN(this.a)?nt:nt+this.a/500,it=isNaN(this.b)?nt:nt-this.b/200;return rt=Xn*lab2xyz(rt),nt=Yn*lab2xyz(nt),it=Zn*lab2xyz(it),new Rgb(lrgb2rgb(3.1338561*rt-1.6168667*nt-.4906146*it),lrgb2rgb(-.9787684*rt+1.9161415*nt+.033454*it),lrgb2rgb(.0719453*rt-.2289914*nt+1.4052427*it),this.opacity)}}));function xyz2lab(nt){return nt>t3?Math.pow(nt,1/3):nt/t2+t0$1}function lab2xyz(nt){return nt>t1$1?nt*nt*nt:t2*(nt-t0$1)}function lrgb2rgb(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function rgb2lrgb(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function hclConvert(nt){if(nt instanceof Hcl)return new Hcl(nt.h,nt.c,nt.l,nt.opacity);if(nt instanceof Lab||(nt=labConvert(nt)),nt.a===0&&nt.b===0)return new Hcl(NaN,0<nt.l&&nt.l<100?0:NaN,nt.l,nt.opacity);var rt=Math.atan2(nt.b,nt.a)*degrees$1;return new Hcl(rt<0?rt+360:rt,Math.sqrt(nt.a*nt.a+nt.b*nt.b),nt.l,nt.opacity)}function hcl$1(nt,rt,it,vt){return arguments.length===1?hclConvert(nt):new Hcl(nt,rt,it,vt==null?1:vt)}function Hcl(nt,rt,it,vt){this.h=+nt,this.c=+rt,this.l=+it,this.opacity=+vt}function hcl2lab(nt){if(isNaN(nt.h))return new Lab(nt.l,0,0,nt.opacity);var rt=nt.h*radians;return new Lab(nt.l,Math.cos(rt)*nt.c,Math.sin(rt)*nt.c,nt.opacity)}define$1(Hcl,hcl$1,extend$1(Color$2,{brighter(nt){return new Hcl(this.h,this.c,this.l+K*(nt==null?1:nt),this.opacity)},darker(nt){return new Hcl(this.h,this.c,this.l-K*(nt==null?1:nt),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));const constant$2=nt=>()=>nt;function linear$1(nt,rt){return function(it){return nt+it*rt}}function exponential(nt,rt,it){return nt=Math.pow(nt,it),rt=Math.pow(rt,it)-nt,it=1/it,function(vt){return Math.pow(nt+vt*rt,it)}}function hue(nt,rt){var it=rt-nt;return it?linear$1(nt,it>180||it<-180?it-360*Math.round(it/360):it):constant$2(isNaN(nt)?rt:nt)}function gamma(nt){return(nt=+nt)==1?nogamma:function(rt,it){return it-rt?exponential(rt,it,nt):constant$2(isNaN(rt)?it:rt)}}function nogamma(nt,rt){var it=rt-nt;return it?linear$1(nt,it):constant$2(isNaN(nt)?rt:nt)}const interpolateRgb=function nt(rt){var it=gamma(rt);function vt(bt,wt){var Tt=it((bt=rgb(bt)).r,(wt=rgb(wt)).r),kt=it(bt.g,wt.g),Lt=it(bt.b,wt.b),Mt=nogamma(bt.opacity,wt.opacity);return function(Nt){return bt.r=Tt(Nt),bt.g=kt(Nt),bt.b=Lt(Nt),bt.opacity=Mt(Nt),bt+""}}return vt.gamma=nt,vt}(1);function numberArray(nt,rt){rt||(rt=[]);var it=nt?Math.min(rt.length,nt.length):0,vt=rt.slice(),bt;return function(wt){for(bt=0;bt<it;++bt)vt[bt]=nt[bt]*(1-wt)+rt[bt]*wt;return vt}}function isNumberArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function genericArray(nt,rt){var it=rt?rt.length:0,vt=nt?Math.min(it,nt.length):0,bt=new Array(vt),wt=new Array(it),Tt;for(Tt=0;Tt<vt;++Tt)bt[Tt]=interpolate$1(nt[Tt],rt[Tt]);for(;Tt<it;++Tt)wt[Tt]=rt[Tt];return function(kt){for(Tt=0;Tt<vt;++Tt)wt[Tt]=bt[Tt](kt);return wt}}function date$1(nt,rt){var it=new Date;return nt=+nt,rt=+rt,function(vt){return it.setTime(nt*(1-vt)+rt*vt),it}}function interpolateNumber(nt,rt){return nt=+nt,rt=+rt,function(it){return nt*(1-it)+rt*it}}function object(nt,rt){var it={},vt={},bt;(nt===null||typeof nt!="object")&&(nt={}),(rt===null||typeof rt!="object")&&(rt={});for(bt in rt)bt in nt?it[bt]=interpolate$1(nt[bt],rt[bt]):vt[bt]=rt[bt];return function(wt){for(bt in it)vt[bt]=it[bt](wt);return vt}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(nt){return function(){return nt}}function one(nt){return function(rt){return nt(rt)+""}}function interpolateString(nt,rt){var it=reA.lastIndex=reB.lastIndex=0,vt,bt,wt,Tt=-1,kt=[],Lt=[];for(nt=nt+"",rt=rt+"";(vt=reA.exec(nt))&&(bt=reB.exec(rt));)(wt=bt.index)>it&&(wt=rt.slice(it,wt),kt[Tt]?kt[Tt]+=wt:kt[++Tt]=wt),(vt=vt[0])===(bt=bt[0])?kt[Tt]?kt[Tt]+=bt:kt[++Tt]=bt:(kt[++Tt]=null,Lt.push({i:Tt,x:interpolateNumber(vt,bt)})),it=reB.lastIndex;return it<rt.length&&(wt=rt.slice(it),kt[Tt]?kt[Tt]+=wt:kt[++Tt]=wt),kt.length<2?Lt[0]?one(Lt[0].x):zero(rt):(rt=Lt.length,function(Mt){for(var Nt=0,zt;Nt<rt;++Nt)kt[(zt=Lt[Nt]).i]=zt.x(Mt);return kt.join("")})}function interpolate$1(nt,rt){var it=typeof rt,vt;return rt==null||it==="boolean"?constant$2(rt):(it==="number"?interpolateNumber:it==="string"?(vt=color(rt))?(rt=vt,interpolateRgb):interpolateString:rt instanceof color?interpolateRgb:rt instanceof Date?date$1:isNumberArray(rt)?numberArray:Array.isArray(rt)?genericArray:typeof rt.valueOf!="function"&&typeof rt.toString!="function"||isNaN(rt)?object:interpolateNumber)(nt,rt)}function interpolateRound(nt,rt){return nt=+nt,rt=+rt,function(it){return Math.round(nt*(1-it)+rt*it)}}var degrees=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(nt,rt,it,vt,bt,wt){var Tt,kt,Lt;return(Tt=Math.sqrt(nt*nt+rt*rt))&&(nt/=Tt,rt/=Tt),(Lt=nt*it+rt*vt)&&(it-=nt*Lt,vt-=rt*Lt),(kt=Math.sqrt(it*it+vt*vt))&&(it/=kt,vt/=kt,Lt/=kt),nt*vt<rt*it&&(nt=-nt,rt=-rt,Lt=-Lt,Tt=-Tt),{translateX:bt,translateY:wt,rotate:Math.atan2(rt,nt)*degrees,skewX:Math.atan(Lt)*degrees,scaleX:Tt,scaleY:kt}}var svgNode;function parseCss(nt){const rt=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(nt+"");return rt.isIdentity?identity$4:decompose(rt.a,rt.b,rt.c,rt.d,rt.e,rt.f)}function parseSvg(nt){return nt==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",nt),!(nt=svgNode.transform.baseVal.consolidate()))?identity$4:(nt=nt.matrix,decompose(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f))}function interpolateTransform(nt,rt,it,vt){function bt(Mt){return Mt.length?Mt.pop()+" ":""}function wt(Mt,Nt,zt,Ht,Wt,Zt){if(Mt!==zt||Nt!==Ht){var tn=Wt.push("translate(",null,rt,null,it);Zt.push({i:tn-4,x:interpolateNumber(Mt,zt)},{i:tn-2,x:interpolateNumber(Nt,Ht)})}else(zt||Ht)&&Wt.push("translate("+zt+rt+Ht+it)}function Tt(Mt,Nt,zt,Ht){Mt!==Nt?(Mt-Nt>180?Nt+=360:Nt-Mt>180&&(Mt+=360),Ht.push({i:zt.push(bt(zt)+"rotate(",null,vt)-2,x:interpolateNumber(Mt,Nt)})):Nt&&zt.push(bt(zt)+"rotate("+Nt+vt)}function kt(Mt,Nt,zt,Ht){Mt!==Nt?Ht.push({i:zt.push(bt(zt)+"skewX(",null,vt)-2,x:interpolateNumber(Mt,Nt)}):Nt&&zt.push(bt(zt)+"skewX("+Nt+vt)}function Lt(Mt,Nt,zt,Ht,Wt,Zt){if(Mt!==zt||Nt!==Ht){var tn=Wt.push(bt(Wt)+"scale(",null,",",null,")");Zt.push({i:tn-4,x:interpolateNumber(Mt,zt)},{i:tn-2,x:interpolateNumber(Nt,Ht)})}else(zt!==1||Ht!==1)&&Wt.push(bt(Wt)+"scale("+zt+","+Ht+")")}return function(Mt,Nt){var zt=[],Ht=[];return Mt=nt(Mt),Nt=nt(Nt),wt(Mt.translateX,Mt.translateY,Nt.translateX,Nt.translateY,zt,Ht),Tt(Mt.rotate,Nt.rotate,zt,Ht),kt(Mt.skewX,Nt.skewX,zt,Ht),Lt(Mt.scaleX,Mt.scaleY,Nt.scaleX,Nt.scaleY,zt,Ht),Mt=Nt=null,function(Wt){for(var Zt=-1,tn=Ht.length,Yt;++Zt<tn;)zt[(Yt=Ht[Zt]).i]=Yt.x(Wt);return zt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hcl(nt){return function(rt,it){var vt=nt((rt=hcl$1(rt)).h,(it=hcl$1(it)).h),bt=nogamma(rt.c,it.c),wt=nogamma(rt.l,it.l),Tt=nogamma(rt.opacity,it.opacity);return function(kt){return rt.h=vt(kt),rt.c=bt(kt),rt.l=wt(kt),rt.opacity=Tt(kt),rt+""}}}const interpolateHcl=hcl(hue);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(nt){setTimeout(nt,17)};function now$2(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(nt,rt,it){if(typeof nt!="function")throw new TypeError("callback is not a function");it=(it==null?now$2():+it)+(rt==null?0:+rt),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=nt,this._time=it,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(nt,rt,it){var vt=new Timer;return vt.restart(nt,rt,it),vt}function timerFlush(){now$2(),++frame;for(var nt=taskHead,rt;nt;)(rt=clockNow-nt._time)>=0&&nt._call.call(void 0,rt),nt=nt._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var nt=clock.now(),rt=nt-clockLast;rt>pokeDelay&&(clockSkew-=rt,clockLast=nt)}function nap(){for(var nt,rt=taskHead,it,vt=1/0;rt;)rt._call?(vt>rt._time&&(vt=rt._time),nt=rt,rt=rt._next):(it=rt._next,rt._next=null,rt=nt?nt._next=it:taskHead=it);taskTail=nt,sleep(vt)}function sleep(nt){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var rt=nt-clockNow;rt>24?(nt<1/0&&(timeout$1=setTimeout(wake,nt-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(nt,rt,it){var vt=new Timer;return rt=rt==null?0:+rt,vt.restart(bt=>{vt.stop(),nt(bt+rt)},rt,it),vt}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(nt,rt,it,vt,bt,wt){var Tt=nt.__transition;if(!Tt)nt.__transition={};else if(it in Tt)return;create$1(nt,it,{name:rt,index:vt,group:bt,on:emptyOn,tween:emptyTween,time:wt.time,delay:wt.delay,duration:wt.duration,ease:wt.ease,timer:null,state:CREATED})}function init$2(nt,rt){var it=get$1(nt,rt);if(it.state>CREATED)throw new Error("too late; already scheduled");return it}function set(nt,rt){var it=get$1(nt,rt);if(it.state>STARTED)throw new Error("too late; already running");return it}function get$1(nt,rt){var it=nt.__transition;if(!it||!(it=it[rt]))throw new Error("transition not found");return it}function create$1(nt,rt,it){var vt=nt.__transition,bt;vt[rt]=it,it.timer=timer(wt,0,it.time);function wt(Mt){it.state=SCHEDULED,it.timer.restart(Tt,it.delay,it.time),it.delay<=Mt&&Tt(Mt-it.delay)}function Tt(Mt){var Nt,zt,Ht,Wt;if(it.state!==SCHEDULED)return Lt();for(Nt in vt)if(Wt=vt[Nt],Wt.name===it.name){if(Wt.state===STARTED)return timeout(Tt);Wt.state===RUNNING?(Wt.state=ENDED,Wt.timer.stop(),Wt.on.call("interrupt",nt,nt.__data__,Wt.index,Wt.group),delete vt[Nt]):+Nt<rt&&(Wt.state=ENDED,Wt.timer.stop(),Wt.on.call("cancel",nt,nt.__data__,Wt.index,Wt.group),delete vt[Nt])}if(timeout(function(){it.state===STARTED&&(it.state=RUNNING,it.timer.restart(kt,it.delay,it.time),kt(Mt))}),it.state=STARTING,it.on.call("start",nt,nt.__data__,it.index,it.group),it.state===STARTING){for(it.state=STARTED,bt=new Array(Ht=it.tween.length),Nt=0,zt=-1;Nt<Ht;++Nt)(Wt=it.tween[Nt].value.call(nt,nt.__data__,it.index,it.group))&&(bt[++zt]=Wt);bt.length=zt+1}}function kt(Mt){for(var Nt=Mt<it.duration?it.ease.call(null,Mt/it.duration):(it.timer.restart(Lt),it.state=ENDING,1),zt=-1,Ht=bt.length;++zt<Ht;)bt[zt].call(nt,Nt);it.state===ENDING&&(it.on.call("end",nt,nt.__data__,it.index,it.group),Lt())}function Lt(){it.state=ENDED,it.timer.stop(),delete vt[rt];for(var Mt in vt)return;delete nt.__transition}}function interrupt(nt,rt){var it=nt.__transition,vt,bt,wt=!0,Tt;if(!!it){rt=rt==null?null:rt+"";for(Tt in it){if((vt=it[Tt]).name!==rt){wt=!1;continue}bt=vt.state>STARTING&&vt.state<ENDING,vt.state=ENDED,vt.timer.stop(),vt.on.call(bt?"interrupt":"cancel",nt,nt.__data__,vt.index,vt.group),delete it[Tt]}wt&&delete nt.__transition}}function selection_interrupt(nt){return this.each(function(){interrupt(this,nt)})}function tweenRemove(nt,rt){var it,vt;return function(){var bt=set(this,nt),wt=bt.tween;if(wt!==it){vt=it=wt;for(var Tt=0,kt=vt.length;Tt<kt;++Tt)if(vt[Tt].name===rt){vt=vt.slice(),vt.splice(Tt,1);break}}bt.tween=vt}}function tweenFunction(nt,rt,it){var vt,bt;if(typeof it!="function")throw new Error;return function(){var wt=set(this,nt),Tt=wt.tween;if(Tt!==vt){bt=(vt=Tt).slice();for(var kt={name:rt,value:it},Lt=0,Mt=bt.length;Lt<Mt;++Lt)if(bt[Lt].name===rt){bt[Lt]=kt;break}Lt===Mt&&bt.push(kt)}wt.tween=bt}}function transition_tween(nt,rt){var it=this._id;if(nt+="",arguments.length<2){for(var vt=get$1(this.node(),it).tween,bt=0,wt=vt.length,Tt;bt<wt;++bt)if((Tt=vt[bt]).name===nt)return Tt.value;return null}return this.each((rt==null?tweenRemove:tweenFunction)(it,nt,rt))}function tweenValue(nt,rt,it){var vt=nt._id;return nt.each(function(){var bt=set(this,vt);(bt.value||(bt.value={}))[rt]=it.apply(this,arguments)}),function(bt){return get$1(bt,vt).value[rt]}}function interpolate(nt,rt){var it;return(typeof rt=="number"?interpolateNumber:rt instanceof color?interpolateRgb:(it=color(rt))?(rt=it,interpolateRgb):interpolateString)(nt,rt)}function attrRemove(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant(nt,rt,it){var vt,bt=it+"",wt;return function(){var Tt=this.getAttribute(nt);return Tt===bt?null:Tt===vt?wt:wt=rt(vt=Tt,it)}}function attrConstantNS(nt,rt,it){var vt,bt=it+"",wt;return function(){var Tt=this.getAttributeNS(nt.space,nt.local);return Tt===bt?null:Tt===vt?wt:wt=rt(vt=Tt,it)}}function attrFunction(nt,rt,it){var vt,bt,wt;return function(){var Tt,kt=it(this),Lt;return kt==null?void this.removeAttribute(nt):(Tt=this.getAttribute(nt),Lt=kt+"",Tt===Lt?null:Tt===vt&&Lt===bt?wt:(bt=Lt,wt=rt(vt=Tt,kt)))}}function attrFunctionNS(nt,rt,it){var vt,bt,wt;return function(){var Tt,kt=it(this),Lt;return kt==null?void this.removeAttributeNS(nt.space,nt.local):(Tt=this.getAttributeNS(nt.space,nt.local),Lt=kt+"",Tt===Lt?null:Tt===vt&&Lt===bt?wt:(bt=Lt,wt=rt(vt=Tt,kt)))}}function transition_attr(nt,rt){var it=namespace(nt),vt=it==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(nt,typeof rt=="function"?(it.local?attrFunctionNS:attrFunction)(it,vt,tweenValue(this,"attr."+nt,rt)):rt==null?(it.local?attrRemoveNS:attrRemove)(it):(it.local?attrConstantNS:attrConstant)(it,vt,rt))}function attrInterpolate(nt,rt){return function(it){this.setAttribute(nt,rt.call(this,it))}}function attrInterpolateNS(nt,rt){return function(it){this.setAttributeNS(nt.space,nt.local,rt.call(this,it))}}function attrTweenNS(nt,rt){var it,vt;function bt(){var wt=rt.apply(this,arguments);return wt!==vt&&(it=(vt=wt)&&attrInterpolateNS(nt,wt)),it}return bt._value=rt,bt}function attrTween(nt,rt){var it,vt;function bt(){var wt=rt.apply(this,arguments);return wt!==vt&&(it=(vt=wt)&&attrInterpolate(nt,wt)),it}return bt._value=rt,bt}function transition_attrTween(nt,rt){var it="attr."+nt;if(arguments.length<2)return(it=this.tween(it))&&it._value;if(rt==null)return this.tween(it,null);if(typeof rt!="function")throw new Error;var vt=namespace(nt);return this.tween(it,(vt.local?attrTweenNS:attrTween)(vt,rt))}function delayFunction(nt,rt){return function(){init$2(this,nt).delay=+rt.apply(this,arguments)}}function delayConstant(nt,rt){return rt=+rt,function(){init$2(this,nt).delay=rt}}function transition_delay(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?delayFunction:delayConstant)(rt,nt)):get$1(this.node(),rt).delay}function durationFunction(nt,rt){return function(){set(this,nt).duration=+rt.apply(this,arguments)}}function durationConstant(nt,rt){return rt=+rt,function(){set(this,nt).duration=rt}}function transition_duration(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?durationFunction:durationConstant)(rt,nt)):get$1(this.node(),rt).duration}function easeConstant(nt,rt){if(typeof rt!="function")throw new Error;return function(){set(this,nt).ease=rt}}function transition_ease(nt){var rt=this._id;return arguments.length?this.each(easeConstant(rt,nt)):get$1(this.node(),rt).ease}function easeVarying(nt,rt){return function(){var it=rt.apply(this,arguments);if(typeof it!="function")throw new Error;set(this,nt).ease=it}}function transition_easeVarying(nt){if(typeof nt!="function")throw new Error;return this.each(easeVarying(this._id,nt))}function transition_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,vt=new Array(it),bt=0;bt<it;++bt)for(var wt=rt[bt],Tt=wt.length,kt=vt[bt]=[],Lt,Mt=0;Mt<Tt;++Mt)(Lt=wt[Mt])&&nt.call(Lt,Lt.__data__,Mt,wt)&&kt.push(Lt);return new Transition(vt,this._parents,this._name,this._id)}function transition_merge(nt){if(nt._id!==this._id)throw new Error;for(var rt=this._groups,it=nt._groups,vt=rt.length,bt=it.length,wt=Math.min(vt,bt),Tt=new Array(vt),kt=0;kt<wt;++kt)for(var Lt=rt[kt],Mt=it[kt],Nt=Lt.length,zt=Tt[kt]=new Array(Nt),Ht,Wt=0;Wt<Nt;++Wt)(Ht=Lt[Wt]||Mt[Wt])&&(zt[Wt]=Ht);for(;kt<vt;++kt)Tt[kt]=rt[kt];return new Transition(Tt,this._parents,this._name,this._id)}function start$1(nt){return(nt+"").trim().split(/^|\s+/).every(function(rt){var it=rt.indexOf(".");return it>=0&&(rt=rt.slice(0,it)),!rt||rt==="start"})}function onFunction(nt,rt,it){var vt,bt,wt=start$1(rt)?init$2:set;return function(){var Tt=wt(this,nt),kt=Tt.on;kt!==vt&&(bt=(vt=kt).copy()).on(rt,it),Tt.on=bt}}function transition_on(nt,rt){var it=this._id;return arguments.length<2?get$1(this.node(),it).on.on(nt):this.each(onFunction(it,nt,rt))}function removeFunction(nt){return function(){var rt=this.parentNode;for(var it in this.__transition)if(+it!==nt)return;rt&&rt.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selector(nt));for(var vt=this._groups,bt=vt.length,wt=new Array(bt),Tt=0;Tt<bt;++Tt)for(var kt=vt[Tt],Lt=kt.length,Mt=wt[Tt]=new Array(Lt),Nt,zt,Ht=0;Ht<Lt;++Ht)(Nt=kt[Ht])&&(zt=nt.call(Nt,Nt.__data__,Ht,kt))&&("__data__"in Nt&&(zt.__data__=Nt.__data__),Mt[Ht]=zt,schedule(Mt[Ht],rt,it,Ht,Mt,get$1(Nt,it)));return new Transition(wt,this._parents,rt,it)}function transition_selectAll(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selectorAll(nt));for(var vt=this._groups,bt=vt.length,wt=[],Tt=[],kt=0;kt<bt;++kt)for(var Lt=vt[kt],Mt=Lt.length,Nt,zt=0;zt<Mt;++zt)if(Nt=Lt[zt]){for(var Ht=nt.call(Nt,Nt.__data__,zt,Lt),Wt,Zt=get$1(Nt,it),tn=0,Yt=Ht.length;tn<Yt;++tn)(Wt=Ht[tn])&&schedule(Wt,rt,it,tn,Ht,Zt);wt.push(Ht),Tt.push(Nt)}return new Transition(wt,Tt,rt,it)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(nt,rt){var it,vt,bt;return function(){var wt=styleValue(this,nt),Tt=(this.style.removeProperty(nt),styleValue(this,nt));return wt===Tt?null:wt===it&&Tt===vt?bt:bt=rt(it=wt,vt=Tt)}}function styleRemove(nt){return function(){this.style.removeProperty(nt)}}function styleConstant(nt,rt,it){var vt,bt=it+"",wt;return function(){var Tt=styleValue(this,nt);return Tt===bt?null:Tt===vt?wt:wt=rt(vt=Tt,it)}}function styleFunction(nt,rt,it){var vt,bt,wt;return function(){var Tt=styleValue(this,nt),kt=it(this),Lt=kt+"";return kt==null&&(Lt=kt=(this.style.removeProperty(nt),styleValue(this,nt))),Tt===Lt?null:Tt===vt&&Lt===bt?wt:(bt=Lt,wt=rt(vt=Tt,kt))}}function styleMaybeRemove(nt,rt){var it,vt,bt,wt="style."+rt,Tt="end."+wt,kt;return function(){var Lt=set(this,nt),Mt=Lt.on,Nt=Lt.value[wt]==null?kt||(kt=styleRemove(rt)):void 0;(Mt!==it||bt!==Nt)&&(vt=(it=Mt).copy()).on(Tt,bt=Nt),Lt.on=vt}}function transition_style(nt,rt,it){var vt=(nt+="")=="transform"?interpolateTransformCss:interpolate;return rt==null?this.styleTween(nt,styleNull(nt,vt)).on("end.style."+nt,styleRemove(nt)):typeof rt=="function"?this.styleTween(nt,styleFunction(nt,vt,tweenValue(this,"style."+nt,rt))).each(styleMaybeRemove(this._id,nt)):this.styleTween(nt,styleConstant(nt,vt,rt),it).on("end.style."+nt,null)}function styleInterpolate(nt,rt,it){return function(vt){this.style.setProperty(nt,rt.call(this,vt),it)}}function styleTween(nt,rt,it){var vt,bt;function wt(){var Tt=rt.apply(this,arguments);return Tt!==bt&&(vt=(bt=Tt)&&styleInterpolate(nt,Tt,it)),vt}return wt._value=rt,wt}function transition_styleTween(nt,rt,it){var vt="style."+(nt+="");if(arguments.length<2)return(vt=this.tween(vt))&&vt._value;if(rt==null)return this.tween(vt,null);if(typeof rt!="function")throw new Error;return this.tween(vt,styleTween(nt,rt,it==null?"":it))}function textConstant(nt){return function(){this.textContent=nt}}function textFunction(nt){return function(){var rt=nt(this);this.textContent=rt==null?"":rt}}function transition_text(nt){return this.tween("text",typeof nt=="function"?textFunction(tweenValue(this,"text",nt)):textConstant(nt==null?"":nt+""))}function textInterpolate(nt){return function(rt){this.textContent=nt.call(this,rt)}}function textTween(nt){var rt,it;function vt(){var bt=nt.apply(this,arguments);return bt!==it&&(rt=(it=bt)&&textInterpolate(bt)),rt}return vt._value=nt,vt}function transition_textTween(nt){var rt="text";if(arguments.length<1)return(rt=this.tween(rt))&&rt._value;if(nt==null)return this.tween(rt,null);if(typeof nt!="function")throw new Error;return this.tween(rt,textTween(nt))}function transition_transition(){for(var nt=this._name,rt=this._id,it=newId(),vt=this._groups,bt=vt.length,wt=0;wt<bt;++wt)for(var Tt=vt[wt],kt=Tt.length,Lt,Mt=0;Mt<kt;++Mt)if(Lt=Tt[Mt]){var Nt=get$1(Lt,rt);schedule(Lt,nt,it,Mt,Tt,{time:Nt.time+Nt.delay+Nt.duration,delay:0,duration:Nt.duration,ease:Nt.ease})}return new Transition(vt,this._parents,nt,it)}function transition_end(){var nt,rt,it=this,vt=it._id,bt=it.size();return new Promise(function(wt,Tt){var kt={value:Tt},Lt={value:function(){--bt===0&&wt()}};it.each(function(){var Mt=set(this,vt),Nt=Mt.on;Nt!==nt&&(rt=(nt=Nt).copy(),rt._.cancel.push(kt),rt._.interrupt.push(kt),rt._.end.push(Lt)),Mt.on=rt}),bt===0&&wt()})}var id$2=0;function Transition(nt,rt,it,vt){this._groups=nt,this._parents=rt,this._name=it,this._id=vt}function newId(){return++id$2}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(nt){return((nt*=2)<=1?nt*nt*nt:(nt-=2)*nt*nt+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(nt,rt){for(var it;!(it=nt.__transition)||!(it=it[rt]);)if(!(nt=nt.parentNode))throw new Error(`transition ${rt} not found`);return it}function selection_transition(nt){var rt,it;nt instanceof Transition?(rt=nt._id,nt=nt._name):(rt=newId(),(it=defaultTiming).time=now$2(),nt=nt==null?null:nt+"");for(var vt=this._groups,bt=vt.length,wt=0;wt<bt;++wt)for(var Tt=vt[wt],kt=Tt.length,Lt,Mt=0;Mt<kt;++Mt)(Lt=Tt[Mt])&&schedule(Lt,nt,rt,Mt,Tt,it||inherit(Lt,rt));return new Transition(vt,this._parents,nt,rt)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append$1(nt){this._+=nt[0];for(let rt=1,it=nt.length;rt<it;++rt)this._+=arguments[rt]+nt[rt]}function appendRound(nt){let rt=Math.floor(nt);if(!(rt>=0))throw new Error(`invalid digits: ${nt}`);if(rt>15)return append$1;const it=10**rt;return function(vt){this._+=vt[0];for(let bt=1,wt=vt.length;bt<wt;++bt)this._+=Math.round(arguments[bt]*it)/it+vt[bt]}}class Path{constructor(rt){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=rt==null?append$1:appendRound(rt)}moveTo(rt,it){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(rt,it){this._append`L${this._x1=+rt},${this._y1=+it}`}quadraticCurveTo(rt,it,vt,bt){this._append`Q${+rt},${+it},${this._x1=+vt},${this._y1=+bt}`}bezierCurveTo(rt,it,vt,bt,wt,Tt){this._append`C${+rt},${+it},${+vt},${+bt},${this._x1=+wt},${this._y1=+Tt}`}arcTo(rt,it,vt,bt,wt){if(rt=+rt,it=+it,vt=+vt,bt=+bt,wt=+wt,wt<0)throw new Error(`negative radius: ${wt}`);let Tt=this._x1,kt=this._y1,Lt=vt-rt,Mt=bt-it,Nt=Tt-rt,zt=kt-it,Ht=Nt*Nt+zt*zt;if(this._x1===null)this._append`M${this._x1=rt},${this._y1=it}`;else if(Ht>epsilon$1)if(!(Math.abs(zt*Lt-Mt*Nt)>epsilon$1)||!wt)this._append`L${this._x1=rt},${this._y1=it}`;else{let Wt=vt-Tt,Zt=bt-kt,tn=Lt*Lt+Mt*Mt,Yt=Wt*Wt+Zt*Zt,nn=Math.sqrt(tn),rn=Math.sqrt(Ht),ln=wt*Math.tan((pi$1-Math.acos((tn+Ht-Yt)/(2*nn*rn)))/2),sn=ln/rn,mn=ln/nn;Math.abs(sn-1)>epsilon$1&&this._append`L${rt+sn*Nt},${it+sn*zt}`,this._append`A${wt},${wt},0,0,${+(zt*Wt>Nt*Zt)},${this._x1=rt+mn*Lt},${this._y1=it+mn*Mt}`}}arc(rt,it,vt,bt,wt,Tt){if(rt=+rt,it=+it,vt=+vt,Tt=!!Tt,vt<0)throw new Error(`negative radius: ${vt}`);let kt=vt*Math.cos(bt),Lt=vt*Math.sin(bt),Mt=rt+kt,Nt=it+Lt,zt=1^Tt,Ht=Tt?bt-wt:wt-bt;this._x1===null?this._append`M${Mt},${Nt}`:(Math.abs(this._x1-Mt)>epsilon$1||Math.abs(this._y1-Nt)>epsilon$1)&&this._append`L${Mt},${Nt}`,vt&&(Ht<0&&(Ht=Ht%tau$1+tau$1),Ht>tauEpsilon?this._append`A${vt},${vt},0,1,${zt},${rt-kt},${it-Lt}A${vt},${vt},0,1,${zt},${this._x1=Mt},${this._y1=Nt}`:Ht>epsilon$1&&this._append`A${vt},${vt},0,${+(Ht>=pi$1)},${zt},${this._x1=rt+vt*Math.cos(wt)},${this._y1=it+vt*Math.sin(wt)}`)}rect(rt,it,vt,bt){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}h${vt=+vt}v${+bt}h${-vt}Z`}toString(){return this._}}function responseText(nt){if(!nt.ok)throw new Error(nt.status+" "+nt.statusText);return nt.text()}function text$1(nt,rt){return fetch(nt,rt).then(responseText)}function parser$c(nt){return(rt,it)=>text$1(rt,it).then(vt=>new DOMParser().parseFromString(vt,nt))}var svg$2=parser$c("image/svg+xml");function formatDecimal(nt){return Math.abs(nt=Math.round(nt))>=1e21?nt.toLocaleString("en").replace(/,/g,""):nt.toString(10)}function formatDecimalParts(nt,rt){if((it=(nt=rt?nt.toExponential(rt-1):nt.toExponential()).indexOf("e"))<0)return null;var it,vt=nt.slice(0,it);return[vt.length>1?vt[0]+vt.slice(2):vt,+nt.slice(it+1)]}function exponent(nt){return nt=formatDecimalParts(Math.abs(nt)),nt?nt[1]:NaN}function formatGroup(nt,rt){return function(it,vt){for(var bt=it.length,wt=[],Tt=0,kt=nt[0],Lt=0;bt>0&&kt>0&&(Lt+kt+1>vt&&(kt=Math.max(1,vt-Lt)),wt.push(it.substring(bt-=kt,bt+kt)),!((Lt+=kt+1)>vt));)kt=nt[Tt=(Tt+1)%nt.length];return wt.reverse().join(rt)}}function formatNumerals(nt){return function(rt){return rt.replace(/[0-9]/g,function(it){return nt[+it]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(nt){if(!(rt=re.exec(nt)))throw new Error("invalid format: "+nt);var rt;return new FormatSpecifier({fill:rt[1],align:rt[2],sign:rt[3],symbol:rt[4],zero:rt[5],width:rt[6],comma:rt[7],precision:rt[8]&&rt[8].slice(1),trim:rt[9],type:rt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(nt){this.fill=nt.fill===void 0?" ":nt.fill+"",this.align=nt.align===void 0?">":nt.align+"",this.sign=nt.sign===void 0?"-":nt.sign+"",this.symbol=nt.symbol===void 0?"":nt.symbol+"",this.zero=!!nt.zero,this.width=nt.width===void 0?void 0:+nt.width,this.comma=!!nt.comma,this.precision=nt.precision===void 0?void 0:+nt.precision,this.trim=!!nt.trim,this.type=nt.type===void 0?"":nt.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(nt){e:for(var rt=nt.length,it=1,vt=-1,bt;it<rt;++it)switch(nt[it]){case".":vt=bt=it;break;case"0":vt===0&&(vt=it),bt=it;break;default:if(!+nt[it])break e;vt>0&&(vt=0);break}return vt>0?nt.slice(0,vt)+nt.slice(bt+1):nt}var prefixExponent;function formatPrefixAuto(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var vt=it[0],bt=it[1],wt=bt-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(bt/3)))*3)+1,Tt=vt.length;return wt===Tt?vt:wt>Tt?vt+new Array(wt-Tt+1).join("0"):wt>0?vt.slice(0,wt)+"."+vt.slice(wt):"0."+new Array(1-wt).join("0")+formatDecimalParts(nt,Math.max(0,rt+wt-1))[0]}function formatRounded(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var vt=it[0],bt=it[1];return bt<0?"0."+new Array(-bt).join("0")+vt:vt.length>bt+1?vt.slice(0,bt+1)+"."+vt.slice(bt+1):vt+new Array(bt-vt.length+2).join("0")}const formatTypes={"%":(nt,rt)=>(nt*100).toFixed(rt),b:nt=>Math.round(nt).toString(2),c:nt=>nt+"",d:formatDecimal,e:(nt,rt)=>nt.toExponential(rt),f:(nt,rt)=>nt.toFixed(rt),g:(nt,rt)=>nt.toPrecision(rt),o:nt=>Math.round(nt).toString(8),p:(nt,rt)=>formatRounded(nt*100,rt),r:formatRounded,s:formatPrefixAuto,X:nt=>Math.round(nt).toString(16).toUpperCase(),x:nt=>Math.round(nt).toString(16)};function identity$3(nt){return nt}var map$2=Array.prototype.map,prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(nt){var rt=nt.grouping===void 0||nt.thousands===void 0?identity$3:formatGroup(map$2.call(nt.grouping,Number),nt.thousands+""),it=nt.currency===void 0?"":nt.currency[0]+"",vt=nt.currency===void 0?"":nt.currency[1]+"",bt=nt.decimal===void 0?".":nt.decimal+"",wt=nt.numerals===void 0?identity$3:formatNumerals(map$2.call(nt.numerals,String)),Tt=nt.percent===void 0?"%":nt.percent+"",kt=nt.minus===void 0?"\u2212":nt.minus+"",Lt=nt.nan===void 0?"NaN":nt.nan+"";function Mt(zt){zt=formatSpecifier(zt);var Ht=zt.fill,Wt=zt.align,Zt=zt.sign,tn=zt.symbol,Yt=zt.zero,nn=zt.width,rn=zt.comma,ln=zt.precision,sn=zt.trim,mn=zt.type;mn==="n"?(rn=!0,mn="g"):formatTypes[mn]||(ln===void 0&&(ln=12),sn=!0,mn="g"),(Yt||Ht==="0"&&Wt==="=")&&(Yt=!0,Ht="0",Wt="=");var wn=tn==="$"?it:tn==="#"&&/[boxX]/.test(mn)?"0"+mn.toLowerCase():"",Cn=tn==="$"?vt:/[%p]/.test(mn)?Tt:"",An=formatTypes[mn],Pn=/[defgprs%]/.test(mn);ln=ln===void 0?6:/[gprs]/.test(mn)?Math.max(1,Math.min(21,ln)):Math.max(0,Math.min(20,ln));function On(kn){var gn=wn,Vn=Cn,pn,pr,yn;if(mn==="c")Vn=An(kn)+Vn,kn="";else{kn=+kn;var mr=kn<0||1/kn<0;if(kn=isNaN(kn)?Lt:An(Math.abs(kn),ln),sn&&(kn=formatTrim(kn)),mr&&+kn==0&&Zt!=="+"&&(mr=!1),gn=(mr?Zt==="("?Zt:kt:Zt==="-"||Zt==="("?"":Zt)+gn,Vn=(mn==="s"?prefixes[8+prefixExponent/3]:"")+Vn+(mr&&Zt==="("?")":""),Pn){for(pn=-1,pr=kn.length;++pn<pr;)if(yn=kn.charCodeAt(pn),48>yn||yn>57){Vn=(yn===46?bt+kn.slice(pn+1):kn.slice(pn))+Vn,kn=kn.slice(0,pn);break}}}rn&&!Yt&&(kn=rt(kn,1/0));var Er=gn.length+kn.length+Vn.length,Mr=Er<nn?new Array(nn-Er+1).join(Ht):"";switch(rn&&Yt&&(kn=rt(Mr+kn,Mr.length?nn-Vn.length:1/0),Mr=""),Wt){case"<":kn=gn+kn+Vn+Mr;break;case"=":kn=gn+Mr+kn+Vn;break;case"^":kn=Mr.slice(0,Er=Mr.length>>1)+gn+kn+Vn+Mr.slice(Er);break;default:kn=Mr+gn+kn+Vn;break}return wt(kn)}return On.toString=function(){return zt+""},On}function Nt(zt,Ht){var Wt=Mt((zt=formatSpecifier(zt),zt.type="f",zt)),Zt=Math.max(-8,Math.min(8,Math.floor(exponent(Ht)/3)))*3,tn=Math.pow(10,-Zt),Yt=prefixes[8+Zt/3];return function(nn){return Wt(tn*nn)+Yt}}return{format:Mt,formatPrefix:Nt}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(nt){return locale$1=formatLocale$1(nt),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(nt){return Math.max(0,-exponent(Math.abs(nt)))}function precisionPrefix(nt,rt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(rt)/3)))*3-exponent(Math.abs(nt)))}function precisionRound(nt,rt){return nt=Math.abs(nt),rt=Math.abs(rt)-nt,Math.max(0,exponent(rt)-exponent(nt))+1}function initRange(nt,rt){switch(arguments.length){case 0:break;case 1:this.range(nt);break;default:this.range(rt).domain(nt);break}return this}const implicit=Symbol("implicit");function ordinal(){var nt=new InternMap,rt=[],it=[],vt=implicit;function bt(wt){let Tt=nt.get(wt);if(Tt===void 0){if(vt!==implicit)return vt;nt.set(wt,Tt=rt.push(wt)-1)}return it[Tt%it.length]}return bt.domain=function(wt){if(!arguments.length)return rt.slice();rt=[],nt=new InternMap;for(const Tt of wt)nt.has(Tt)||nt.set(Tt,rt.push(Tt)-1);return bt},bt.range=function(wt){return arguments.length?(it=Array.from(wt),bt):it.slice()},bt.unknown=function(wt){return arguments.length?(vt=wt,bt):vt},bt.copy=function(){return ordinal(rt,it).unknown(vt)},initRange.apply(bt,arguments),bt}function constants(nt){return function(){return nt}}function number$1(nt){return+nt}var unit$1=[0,1];function identity$2(nt){return nt}function normalize(nt,rt){return(rt-=nt=+nt)?function(it){return(it-nt)/rt}:constants(isNaN(rt)?NaN:.5)}function clamper(nt,rt){var it;return nt>rt&&(it=nt,nt=rt,rt=it),function(vt){return Math.max(nt,Math.min(rt,vt))}}function bimap(nt,rt,it){var vt=nt[0],bt=nt[1],wt=rt[0],Tt=rt[1];return bt<vt?(vt=normalize(bt,vt),wt=it(Tt,wt)):(vt=normalize(vt,bt),wt=it(wt,Tt)),function(kt){return wt(vt(kt))}}function polymap(nt,rt,it){var vt=Math.min(nt.length,rt.length)-1,bt=new Array(vt),wt=new Array(vt),Tt=-1;for(nt[vt]<nt[0]&&(nt=nt.slice().reverse(),rt=rt.slice().reverse());++Tt<vt;)bt[Tt]=normalize(nt[Tt],nt[Tt+1]),wt[Tt]=it(rt[Tt],rt[Tt+1]);return function(kt){var Lt=bisect(nt,kt,1,vt)-1;return wt[Lt](bt[Lt](kt))}}function copy$1(nt,rt){return rt.domain(nt.domain()).range(nt.range()).interpolate(nt.interpolate()).clamp(nt.clamp()).unknown(nt.unknown())}function transformer(){var nt=unit$1,rt=unit$1,it=interpolate$1,vt,bt,wt,Tt=identity$2,kt,Lt,Mt;function Nt(){var Ht=Math.min(nt.length,rt.length);return Tt!==identity$2&&(Tt=clamper(nt[0],nt[Ht-1])),kt=Ht>2?polymap:bimap,Lt=Mt=null,zt}function zt(Ht){return Ht==null||isNaN(Ht=+Ht)?wt:(Lt||(Lt=kt(nt.map(vt),rt,it)))(vt(Tt(Ht)))}return zt.invert=function(Ht){return Tt(bt((Mt||(Mt=kt(rt,nt.map(vt),interpolateNumber)))(Ht)))},zt.domain=function(Ht){return arguments.length?(nt=Array.from(Ht,number$1),Nt()):nt.slice()},zt.range=function(Ht){return arguments.length?(rt=Array.from(Ht),Nt()):rt.slice()},zt.rangeRound=function(Ht){return rt=Array.from(Ht),it=interpolateRound,Nt()},zt.clamp=function(Ht){return arguments.length?(Tt=Ht?!0:identity$2,Nt()):Tt!==identity$2},zt.interpolate=function(Ht){return arguments.length?(it=Ht,Nt()):it},zt.unknown=function(Ht){return arguments.length?(wt=Ht,zt):wt},function(Ht,Wt){return vt=Ht,bt=Wt,Nt()}}function continuous(){return transformer()(identity$2,identity$2)}function tickFormat(nt,rt,it,vt){var bt=tickStep(nt,rt,it),wt;switch(vt=formatSpecifier(vt==null?",f":vt),vt.type){case"s":{var Tt=Math.max(Math.abs(nt),Math.abs(rt));return vt.precision==null&&!isNaN(wt=precisionPrefix(bt,Tt))&&(vt.precision=wt),formatPrefix(vt,Tt)}case"":case"e":case"g":case"p":case"r":{vt.precision==null&&!isNaN(wt=precisionRound(bt,Math.max(Math.abs(nt),Math.abs(rt))))&&(vt.precision=wt-(vt.type==="e"));break}case"f":case"%":{vt.precision==null&&!isNaN(wt=precisionFixed(bt))&&(vt.precision=wt-(vt.type==="%")*2);break}}return format$1(vt)}function linearish(nt){var rt=nt.domain;return nt.ticks=function(it){var vt=rt();return ticks(vt[0],vt[vt.length-1],it==null?10:it)},nt.tickFormat=function(it,vt){var bt=rt();return tickFormat(bt[0],bt[bt.length-1],it==null?10:it,vt)},nt.nice=function(it){it==null&&(it=10);var vt=rt(),bt=0,wt=vt.length-1,Tt=vt[bt],kt=vt[wt],Lt,Mt,Nt=10;for(kt<Tt&&(Mt=Tt,Tt=kt,kt=Mt,Mt=bt,bt=wt,wt=Mt);Nt-- >0;){if(Mt=tickIncrement(Tt,kt,it),Mt===Lt)return vt[bt]=Tt,vt[wt]=kt,rt(vt);if(Mt>0)Tt=Math.floor(Tt/Mt)*Mt,kt=Math.ceil(kt/Mt)*Mt;else if(Mt<0)Tt=Math.ceil(Tt*Mt)/Mt,kt=Math.floor(kt*Mt)/Mt;else break;Lt=Mt}return nt},nt}function linear(){var nt=continuous();return nt.copy=function(){return copy$1(nt,linear())},initRange.apply(nt,arguments),linearish(nt)}function nice(nt,rt){nt=nt.slice();var it=0,vt=nt.length-1,bt=nt[it],wt=nt[vt],Tt;return wt<bt&&(Tt=it,it=vt,vt=Tt,Tt=bt,bt=wt,wt=Tt),nt[it]=rt.floor(bt),nt[vt]=rt.ceil(wt),nt}const t0=new Date,t1=new Date;function timeInterval(nt,rt,it,vt){function bt(wt){return nt(wt=arguments.length===0?new Date:new Date(+wt)),wt}return bt.floor=wt=>(nt(wt=new Date(+wt)),wt),bt.ceil=wt=>(nt(wt=new Date(wt-1)),rt(wt,1),nt(wt),wt),bt.round=wt=>{const Tt=bt(wt),kt=bt.ceil(wt);return wt-Tt<kt-wt?Tt:kt},bt.offset=(wt,Tt)=>(rt(wt=new Date(+wt),Tt==null?1:Math.floor(Tt)),wt),bt.range=(wt,Tt,kt)=>{const Lt=[];if(wt=bt.ceil(wt),kt=kt==null?1:Math.floor(kt),!(wt<Tt)||!(kt>0))return Lt;let Mt;do Lt.push(Mt=new Date(+wt)),rt(wt,kt),nt(wt);while(Mt<wt&&wt<Tt);return Lt},bt.filter=wt=>timeInterval(Tt=>{if(Tt>=Tt)for(;nt(Tt),!wt(Tt);)Tt.setTime(Tt-1)},(Tt,kt)=>{if(Tt>=Tt)if(kt<0)for(;++kt<=0;)for(;rt(Tt,-1),!wt(Tt););else for(;--kt>=0;)for(;rt(Tt,1),!wt(Tt););}),it&&(bt.count=(wt,Tt)=>(t0.setTime(+wt),t1.setTime(+Tt),nt(t0),nt(t1),Math.floor(it(t0,t1))),bt.every=wt=>(wt=Math.floor(wt),!isFinite(wt)||!(wt>0)?null:wt>1?bt.filter(vt?Tt=>vt(Tt)%wt===0:Tt=>bt.count(0,Tt)%wt===0):bt)),bt}const millisecond=timeInterval(()=>{},(nt,rt)=>{nt.setTime(+nt+rt)},(nt,rt)=>rt-nt);millisecond.every=nt=>(nt=Math.floor(nt),!isFinite(nt)||!(nt>0)?null:nt>1?timeInterval(rt=>{rt.setTime(Math.floor(rt/nt)*nt)},(rt,it)=>{rt.setTime(+rt+it*nt)},(rt,it)=>(it-rt)/nt):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds())},(nt,rt)=>{nt.setTime(+nt+rt*durationSecond)},(nt,rt)=>(rt-nt)/durationSecond,nt=>nt.getUTCSeconds());second.range;const timeMinute=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getMinutes());timeMinute.range;const utcMinute=timeInterval(nt=>{nt.setUTCSeconds(0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond-nt.getMinutes()*durationMinute)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getHours());timeHour.range;const utcHour=timeInterval(nt=>{nt.setUTCMinutes(0,0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getUTCHours());utcHour.range;const timeDay=timeInterval(nt=>nt.setHours(0,0,0,0),(nt,rt)=>nt.setDate(nt.getDate()+rt),(nt,rt)=>(rt-nt-(rt.getTimezoneOffset()-nt.getTimezoneOffset())*durationMinute)/durationDay,nt=>nt.getDate()-1);timeDay.range;const utcDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>nt.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>Math.floor(nt/durationDay));unixDay.range;function timeWeekday(nt){return timeInterval(rt=>{rt.setDate(rt.getDate()-(rt.getDay()+7-nt)%7),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setDate(rt.getDate()+it*7)},(rt,it)=>(it-rt-(it.getTimezoneOffset()-rt.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(nt){return timeInterval(rt=>{rt.setUTCDate(rt.getUTCDate()-(rt.getUTCDay()+7-nt)%7),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCDate(rt.getUTCDate()+it*7)},(rt,it)=>(it-rt)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(nt=>{nt.setDate(1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setMonth(nt.getMonth()+rt)},(nt,rt)=>rt.getMonth()-nt.getMonth()+(rt.getFullYear()-nt.getFullYear())*12,nt=>nt.getMonth());timeMonth.range;const utcMonth=timeInterval(nt=>{nt.setUTCDate(1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCMonth(nt.getUTCMonth()+rt)},(nt,rt)=>rt.getUTCMonth()-nt.getUTCMonth()+(rt.getUTCFullYear()-nt.getUTCFullYear())*12,nt=>nt.getUTCMonth());utcMonth.range;const timeYear=timeInterval(nt=>{nt.setMonth(0,1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setFullYear(nt.getFullYear()+rt)},(nt,rt)=>rt.getFullYear()-nt.getFullYear(),nt=>nt.getFullYear());timeYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setFullYear(Math.floor(rt.getFullYear()/nt)*nt),rt.setMonth(0,1),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setFullYear(rt.getFullYear()+it*nt)});timeYear.range;const utcYear=timeInterval(nt=>{nt.setUTCMonth(0,1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCFullYear(nt.getUTCFullYear()+rt)},(nt,rt)=>rt.getUTCFullYear()-nt.getUTCFullYear(),nt=>nt.getUTCFullYear());utcYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setUTCFullYear(Math.floor(rt.getUTCFullYear()/nt)*nt),rt.setUTCMonth(0,1),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCFullYear(rt.getUTCFullYear()+it*nt)});utcYear.range;function ticker(nt,rt,it,vt,bt,wt){const Tt=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[wt,1,durationMinute],[wt,5,5*durationMinute],[wt,15,15*durationMinute],[wt,30,30*durationMinute],[bt,1,durationHour],[bt,3,3*durationHour],[bt,6,6*durationHour],[bt,12,12*durationHour],[vt,1,durationDay],[vt,2,2*durationDay],[it,1,durationWeek],[rt,1,durationMonth],[rt,3,3*durationMonth],[nt,1,durationYear]];function kt(Mt,Nt,zt){const Ht=Nt<Mt;Ht&&([Mt,Nt]=[Nt,Mt]);const Wt=zt&&typeof zt.range=="function"?zt:Lt(Mt,Nt,zt),Zt=Wt?Wt.range(Mt,+Nt+1):[];return Ht?Zt.reverse():Zt}function Lt(Mt,Nt,zt){const Ht=Math.abs(Nt-Mt)/zt,Wt=bisector(([,,Yt])=>Yt).right(Tt,Ht);if(Wt===Tt.length)return nt.every(tickStep(Mt/durationYear,Nt/durationYear,zt));if(Wt===0)return millisecond.every(Math.max(tickStep(Mt,Nt,zt),1));const[Zt,tn]=Tt[Ht/Tt[Wt-1][2]<Tt[Wt][2]/Ht?Wt-1:Wt];return Zt.every(tn)}return[kt,Lt]}ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute);const[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L);return rt.setFullYear(nt.y),rt}return new Date(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L)}function utcDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(Date.UTC(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L));return rt.setUTCFullYear(nt.y),rt}return new Date(Date.UTC(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L))}function newDate(nt,rt,it){return{y:nt,m:rt,d:it,H:0,M:0,S:0,L:0}}function formatLocale(nt){var rt=nt.dateTime,it=nt.date,vt=nt.time,bt=nt.periods,wt=nt.days,Tt=nt.shortDays,kt=nt.months,Lt=nt.shortMonths,Mt=formatRe(bt),Nt=formatLookup(bt),zt=formatRe(wt),Ht=formatLookup(wt),Wt=formatRe(Tt),Zt=formatLookup(Tt),tn=formatRe(kt),Yt=formatLookup(kt),nn=formatRe(Lt),rn=formatLookup(Lt),ln={a:mr,A:Er,b:Mr,B:rr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:vr,q:cr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},sn={a:gr,A:Or,b:Ar,B:sr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:ii,q:ar,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},mn={a:On,A:kn,b:gn,B:Vn,c:pn,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:Pn,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:pr,X:yn,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};ln.x=wn(it,ln),ln.X=wn(vt,ln),ln.c=wn(rt,ln),sn.x=wn(it,sn),sn.X=wn(vt,sn),sn.c=wn(rt,sn);function wn(fr,wr){return function(ir){var Ln=[],en=-1,dn=0,un=fr.length,Nn,In,lr;for(ir instanceof Date||(ir=new Date(+ir));++en<un;)fr.charCodeAt(en)===37&&(Ln.push(fr.slice(dn,en)),(In=pads[Nn=fr.charAt(++en)])!=null?Nn=fr.charAt(++en):In=Nn==="e"?" ":"0",(lr=wr[Nn])&&(Nn=lr(ir,In)),Ln.push(Nn),dn=en+1);return Ln.push(fr.slice(dn,en)),Ln.join("")}}function Cn(fr,wr){return function(ir){var Ln=newDate(1900,void 0,1),en=An(Ln,fr,ir+="",0),dn,un;if(en!=ir.length)return null;if("Q"in Ln)return new Date(Ln.Q);if("s"in Ln)return new Date(Ln.s*1e3+("L"in Ln?Ln.L:0));if(wr&&!("Z"in Ln)&&(Ln.Z=0),"p"in Ln&&(Ln.H=Ln.H%12+Ln.p*12),Ln.m===void 0&&(Ln.m="q"in Ln?Ln.q:0),"V"in Ln){if(Ln.V<1||Ln.V>53)return null;"w"in Ln||(Ln.w=1),"Z"in Ln?(dn=utcDate(newDate(Ln.y,0,1)),un=dn.getUTCDay(),dn=un>4||un===0?utcMonday.ceil(dn):utcMonday(dn),dn=utcDay.offset(dn,(Ln.V-1)*7),Ln.y=dn.getUTCFullYear(),Ln.m=dn.getUTCMonth(),Ln.d=dn.getUTCDate()+(Ln.w+6)%7):(dn=localDate(newDate(Ln.y,0,1)),un=dn.getDay(),dn=un>4||un===0?timeMonday.ceil(dn):timeMonday(dn),dn=timeDay.offset(dn,(Ln.V-1)*7),Ln.y=dn.getFullYear(),Ln.m=dn.getMonth(),Ln.d=dn.getDate()+(Ln.w+6)%7)}else("W"in Ln||"U"in Ln)&&("w"in Ln||(Ln.w="u"in Ln?Ln.u%7:"W"in Ln?1:0),un="Z"in Ln?utcDate(newDate(Ln.y,0,1)).getUTCDay():localDate(newDate(Ln.y,0,1)).getDay(),Ln.m=0,Ln.d="W"in Ln?(Ln.w+6)%7+Ln.W*7-(un+5)%7:Ln.w+Ln.U*7-(un+6)%7);return"Z"in Ln?(Ln.H+=Ln.Z/100|0,Ln.M+=Ln.Z%100,utcDate(Ln)):localDate(Ln)}}function An(fr,wr,ir,Ln){for(var en=0,dn=wr.length,un=ir.length,Nn,In;en<dn;){if(Ln>=un)return-1;if(Nn=wr.charCodeAt(en++),Nn===37){if(Nn=wr.charAt(en++),In=mn[Nn in pads?wr.charAt(en++):Nn],!In||(Ln=In(fr,ir,Ln))<0)return-1}else if(Nn!=ir.charCodeAt(Ln++))return-1}return Ln}function Pn(fr,wr,ir){var Ln=Mt.exec(wr.slice(ir));return Ln?(fr.p=Nt.get(Ln[0].toLowerCase()),ir+Ln[0].length):-1}function On(fr,wr,ir){var Ln=Wt.exec(wr.slice(ir));return Ln?(fr.w=Zt.get(Ln[0].toLowerCase()),ir+Ln[0].length):-1}function kn(fr,wr,ir){var Ln=zt.exec(wr.slice(ir));return Ln?(fr.w=Ht.get(Ln[0].toLowerCase()),ir+Ln[0].length):-1}function gn(fr,wr,ir){var Ln=nn.exec(wr.slice(ir));return Ln?(fr.m=rn.get(Ln[0].toLowerCase()),ir+Ln[0].length):-1}function Vn(fr,wr,ir){var Ln=tn.exec(wr.slice(ir));return Ln?(fr.m=Yt.get(Ln[0].toLowerCase()),ir+Ln[0].length):-1}function pn(fr,wr,ir){return An(fr,rt,wr,ir)}function pr(fr,wr,ir){return An(fr,it,wr,ir)}function yn(fr,wr,ir){return An(fr,vt,wr,ir)}function mr(fr){return Tt[fr.getDay()]}function Er(fr){return wt[fr.getDay()]}function Mr(fr){return Lt[fr.getMonth()]}function rr(fr){return kt[fr.getMonth()]}function vr(fr){return bt[+(fr.getHours()>=12)]}function cr(fr){return 1+~~(fr.getMonth()/3)}function gr(fr){return Tt[fr.getUTCDay()]}function Or(fr){return wt[fr.getUTCDay()]}function Ar(fr){return Lt[fr.getUTCMonth()]}function sr(fr){return kt[fr.getUTCMonth()]}function ii(fr){return bt[+(fr.getUTCHours()>=12)]}function ar(fr){return 1+~~(fr.getUTCMonth()/3)}return{format:function(fr){var wr=wn(fr+="",ln);return wr.toString=function(){return fr},wr},parse:function(fr){var wr=Cn(fr+="",!1);return wr.toString=function(){return fr},wr},utcFormat:function(fr){var wr=wn(fr+="",sn);return wr.toString=function(){return fr},wr},utcParse:function(fr){var wr=Cn(fr+="",!0);return wr.toString=function(){return fr},wr}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(nt,rt,it){var vt=nt<0?"-":"",bt=(vt?-nt:nt)+"",wt=bt.length;return vt+(wt<it?new Array(it-wt+1).join(rt)+bt:bt)}function requote(nt){return nt.replace(requoteRe,"\\$&")}function formatRe(nt){return new RegExp("^(?:"+nt.map(requote).join("|")+")","i")}function formatLookup(nt){return new Map(nt.map((rt,it)=>[rt.toLowerCase(),it]))}function parseWeekdayNumberSunday(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+1));return vt?(nt.w=+vt[0],it+vt[0].length):-1}function parseWeekdayNumberMonday(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+1));return vt?(nt.u=+vt[0],it+vt[0].length):-1}function parseWeekNumberSunday(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.U=+vt[0],it+vt[0].length):-1}function parseWeekNumberISO(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.V=+vt[0],it+vt[0].length):-1}function parseWeekNumberMonday(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.W=+vt[0],it+vt[0].length):-1}function parseFullYear(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+4));return vt?(nt.y=+vt[0],it+vt[0].length):-1}function parseYear(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.y=+vt[0]+(+vt[0]>68?1900:2e3),it+vt[0].length):-1}function parseZone(nt,rt,it){var vt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(rt.slice(it,it+6));return vt?(nt.Z=vt[1]?0:-(vt[2]+(vt[3]||"00")),it+vt[0].length):-1}function parseQuarter(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+1));return vt?(nt.q=vt[0]*3-3,it+vt[0].length):-1}function parseMonthNumber(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.m=vt[0]-1,it+vt[0].length):-1}function parseDayOfMonth(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.d=+vt[0],it+vt[0].length):-1}function parseDayOfYear(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+3));return vt?(nt.m=0,nt.d=+vt[0],it+vt[0].length):-1}function parseHour24(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.H=+vt[0],it+vt[0].length):-1}function parseMinutes(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.M=+vt[0],it+vt[0].length):-1}function parseSeconds(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+2));return vt?(nt.S=+vt[0],it+vt[0].length):-1}function parseMilliseconds(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+3));return vt?(nt.L=+vt[0],it+vt[0].length):-1}function parseMicroseconds(nt,rt,it){var vt=numberRe.exec(rt.slice(it,it+6));return vt?(nt.L=Math.floor(vt[0]/1e3),it+vt[0].length):-1}function parseLiteralPercent(nt,rt,it){var vt=percentRe.exec(rt.slice(it,it+1));return vt?it+vt[0].length:-1}function parseUnixTimestamp(nt,rt,it){var vt=numberRe.exec(rt.slice(it));return vt?(nt.Q=+vt[0],it+vt[0].length):-1}function parseUnixTimestampSeconds(nt,rt,it){var vt=numberRe.exec(rt.slice(it));return vt?(nt.s=+vt[0],it+vt[0].length):-1}function formatDayOfMonth(nt,rt){return pad(nt.getDate(),rt,2)}function formatHour24(nt,rt){return pad(nt.getHours(),rt,2)}function formatHour12(nt,rt){return pad(nt.getHours()%12||12,rt,2)}function formatDayOfYear(nt,rt){return pad(1+timeDay.count(timeYear(nt),nt),rt,3)}function formatMilliseconds(nt,rt){return pad(nt.getMilliseconds(),rt,3)}function formatMicroseconds(nt,rt){return formatMilliseconds(nt,rt)+"000"}function formatMonthNumber(nt,rt){return pad(nt.getMonth()+1,rt,2)}function formatMinutes(nt,rt){return pad(nt.getMinutes(),rt,2)}function formatSeconds(nt,rt){return pad(nt.getSeconds(),rt,2)}function formatWeekdayNumberMonday(nt){var rt=nt.getDay();return rt===0?7:rt}function formatWeekNumberSunday(nt,rt){return pad(timeSunday.count(timeYear(nt)-1,nt),rt,2)}function dISO(nt){var rt=nt.getDay();return rt>=4||rt===0?timeThursday(nt):timeThursday.ceil(nt)}function formatWeekNumberISO(nt,rt){return nt=dISO(nt),pad(timeThursday.count(timeYear(nt),nt)+(timeYear(nt).getDay()===4),rt,2)}function formatWeekdayNumberSunday(nt){return nt.getDay()}function formatWeekNumberMonday(nt,rt){return pad(timeMonday.count(timeYear(nt)-1,nt),rt,2)}function formatYear(nt,rt){return pad(nt.getFullYear()%100,rt,2)}function formatYearISO(nt,rt){return nt=dISO(nt),pad(nt.getFullYear()%100,rt,2)}function formatFullYear(nt,rt){return pad(nt.getFullYear()%1e4,rt,4)}function formatFullYearISO(nt,rt){var it=nt.getDay();return nt=it>=4||it===0?timeThursday(nt):timeThursday.ceil(nt),pad(nt.getFullYear()%1e4,rt,4)}function formatZone(nt){var rt=nt.getTimezoneOffset();return(rt>0?"-":(rt*=-1,"+"))+pad(rt/60|0,"0",2)+pad(rt%60,"0",2)}function formatUTCDayOfMonth(nt,rt){return pad(nt.getUTCDate(),rt,2)}function formatUTCHour24(nt,rt){return pad(nt.getUTCHours(),rt,2)}function formatUTCHour12(nt,rt){return pad(nt.getUTCHours()%12||12,rt,2)}function formatUTCDayOfYear(nt,rt){return pad(1+utcDay.count(utcYear(nt),nt),rt,3)}function formatUTCMilliseconds(nt,rt){return pad(nt.getUTCMilliseconds(),rt,3)}function formatUTCMicroseconds(nt,rt){return formatUTCMilliseconds(nt,rt)+"000"}function formatUTCMonthNumber(nt,rt){return pad(nt.getUTCMonth()+1,rt,2)}function formatUTCMinutes(nt,rt){return pad(nt.getUTCMinutes(),rt,2)}function formatUTCSeconds(nt,rt){return pad(nt.getUTCSeconds(),rt,2)}function formatUTCWeekdayNumberMonday(nt){var rt=nt.getUTCDay();return rt===0?7:rt}function formatUTCWeekNumberSunday(nt,rt){return pad(utcSunday.count(utcYear(nt)-1,nt),rt,2)}function UTCdISO(nt){var rt=nt.getUTCDay();return rt>=4||rt===0?utcThursday(nt):utcThursday.ceil(nt)}function formatUTCWeekNumberISO(nt,rt){return nt=UTCdISO(nt),pad(utcThursday.count(utcYear(nt),nt)+(utcYear(nt).getUTCDay()===4),rt,2)}function formatUTCWeekdayNumberSunday(nt){return nt.getUTCDay()}function formatUTCWeekNumberMonday(nt,rt){return pad(utcMonday.count(utcYear(nt)-1,nt),rt,2)}function formatUTCYear(nt,rt){return pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCYearISO(nt,rt){return nt=UTCdISO(nt),pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCFullYear(nt,rt){return pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCFullYearISO(nt,rt){var it=nt.getUTCDay();return nt=it>=4||it===0?utcThursday(nt):utcThursday.ceil(nt),pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(nt){return+nt}function formatUnixTimestampSeconds(nt){return Math.floor(+nt/1e3)}var locale,timeFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(nt){return locale=formatLocale(nt),timeFormat=locale.format,locale.parse,locale.utcFormat,locale.utcParse,locale}function date(nt){return new Date(nt)}function number(nt){return nt instanceof Date?+nt:+new Date(+nt)}function calendar(nt,rt,it,vt,bt,wt,Tt,kt,Lt,Mt){var Nt=continuous(),zt=Nt.invert,Ht=Nt.domain,Wt=Mt(".%L"),Zt=Mt(":%S"),tn=Mt("%I:%M"),Yt=Mt("%I %p"),nn=Mt("%a %d"),rn=Mt("%b %d"),ln=Mt("%B"),sn=Mt("%Y");function mn(wn){return(Lt(wn)<wn?Wt:kt(wn)<wn?Zt:Tt(wn)<wn?tn:wt(wn)<wn?Yt:vt(wn)<wn?bt(wn)<wn?nn:rn:it(wn)<wn?ln:sn)(wn)}return Nt.invert=function(wn){return new Date(zt(wn))},Nt.domain=function(wn){return arguments.length?Ht(Array.from(wn,number)):Ht().map(date)},Nt.ticks=function(wn){var Cn=Ht();return nt(Cn[0],Cn[Cn.length-1],wn==null?10:wn)},Nt.tickFormat=function(wn,Cn){return Cn==null?mn:Mt(Cn)},Nt.nice=function(wn){var Cn=Ht();return(!wn||typeof wn.range!="function")&&(wn=rt(Cn[0],Cn[Cn.length-1],wn==null?10:wn)),wn?Ht(nice(Cn,wn)):Nt},Nt.copy=function(){return copy$1(Nt,calendar(nt,rt,it,vt,bt,wt,Tt,kt,Lt,Mt))},Nt}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function constant$1(nt){return function(){return nt}}const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(nt){return nt>1?0:nt<-1?pi:Math.acos(nt)}function asin(nt){return nt>=1?halfPi:nt<=-1?-halfPi:Math.asin(nt)}function withPath(nt){let rt=3;return nt.digits=function(it){if(!arguments.length)return rt;if(it==null)rt=null;else{const vt=Math.floor(it);if(!(vt>=0))throw new RangeError(`invalid digits: ${it}`);rt=vt}return nt},()=>new Path(rt)}function arcInnerRadius(nt){return nt.innerRadius}function arcOuterRadius(nt){return nt.outerRadius}function arcStartAngle(nt){return nt.startAngle}function arcEndAngle(nt){return nt.endAngle}function arcPadAngle(nt){return nt&&nt.padAngle}function intersect$1(nt,rt,it,vt,bt,wt,Tt,kt){var Lt=it-nt,Mt=vt-rt,Nt=Tt-bt,zt=kt-wt,Ht=zt*Lt-Nt*Mt;if(!(Ht*Ht<epsilon))return Ht=(Nt*(rt-wt)-zt*(nt-bt))/Ht,[nt+Ht*Lt,rt+Ht*Mt]}function cornerTangents(nt,rt,it,vt,bt,wt,Tt){var kt=nt-it,Lt=rt-vt,Mt=(Tt?wt:-wt)/sqrt(kt*kt+Lt*Lt),Nt=Mt*Lt,zt=-Mt*kt,Ht=nt+Nt,Wt=rt+zt,Zt=it+Nt,tn=vt+zt,Yt=(Ht+Zt)/2,nn=(Wt+tn)/2,rn=Zt-Ht,ln=tn-Wt,sn=rn*rn+ln*ln,mn=bt-wt,wn=Ht*tn-Zt*Wt,Cn=(ln<0?-1:1)*sqrt(max$1(0,mn*mn*sn-wn*wn)),An=(wn*ln-rn*Cn)/sn,Pn=(-wn*rn-ln*Cn)/sn,On=(wn*ln+rn*Cn)/sn,kn=(-wn*rn+ln*Cn)/sn,gn=An-Yt,Vn=Pn-nn,pn=On-Yt,pr=kn-nn;return gn*gn+Vn*Vn>pn*pn+pr*pr&&(An=On,Pn=kn),{cx:An,cy:Pn,x01:-Nt,y01:-zt,x11:An*(bt/mn-1),y11:Pn*(bt/mn-1)}}function arc(){var nt=arcInnerRadius,rt=arcOuterRadius,it=constant$1(0),vt=null,bt=arcStartAngle,wt=arcEndAngle,Tt=arcPadAngle,kt=null,Lt=withPath(Mt);function Mt(){var Nt,zt,Ht=+nt.apply(this,arguments),Wt=+rt.apply(this,arguments),Zt=bt.apply(this,arguments)-halfPi,tn=wt.apply(this,arguments)-halfPi,Yt=abs$1(tn-Zt),nn=tn>Zt;if(kt||(kt=Nt=Lt()),Wt<Ht&&(zt=Wt,Wt=Ht,Ht=zt),!(Wt>epsilon))kt.moveTo(0,0);else if(Yt>tau-epsilon)kt.moveTo(Wt*cos(Zt),Wt*sin(Zt)),kt.arc(0,0,Wt,Zt,tn,!nn),Ht>epsilon&&(kt.moveTo(Ht*cos(tn),Ht*sin(tn)),kt.arc(0,0,Ht,tn,Zt,nn));else{var rn=Zt,ln=tn,sn=Zt,mn=tn,wn=Yt,Cn=Yt,An=Tt.apply(this,arguments)/2,Pn=An>epsilon&&(vt?+vt.apply(this,arguments):sqrt(Ht*Ht+Wt*Wt)),On=min$1(abs$1(Wt-Ht)/2,+it.apply(this,arguments)),kn=On,gn=On,Vn,pn;if(Pn>epsilon){var pr=asin(Pn/Ht*sin(An)),yn=asin(Pn/Wt*sin(An));(wn-=pr*2)>epsilon?(pr*=nn?1:-1,sn+=pr,mn-=pr):(wn=0,sn=mn=(Zt+tn)/2),(Cn-=yn*2)>epsilon?(yn*=nn?1:-1,rn+=yn,ln-=yn):(Cn=0,rn=ln=(Zt+tn)/2)}var mr=Wt*cos(rn),Er=Wt*sin(rn),Mr=Ht*cos(mn),rr=Ht*sin(mn);if(On>epsilon){var vr=Wt*cos(ln),cr=Wt*sin(ln),gr=Ht*cos(sn),Or=Ht*sin(sn),Ar;if(Yt<pi)if(Ar=intersect$1(mr,Er,gr,Or,vr,cr,Mr,rr)){var sr=mr-Ar[0],ii=Er-Ar[1],ar=vr-Ar[0],fr=cr-Ar[1],wr=1/sin(acos((sr*ar+ii*fr)/(sqrt(sr*sr+ii*ii)*sqrt(ar*ar+fr*fr)))/2),ir=sqrt(Ar[0]*Ar[0]+Ar[1]*Ar[1]);kn=min$1(On,(Ht-ir)/(wr-1)),gn=min$1(On,(Wt-ir)/(wr+1))}else kn=gn=0}Cn>epsilon?gn>epsilon?(Vn=cornerTangents(gr,Or,mr,Er,Wt,gn,nn),pn=cornerTangents(vr,cr,Mr,rr,Wt,gn,nn),kt.moveTo(Vn.cx+Vn.x01,Vn.cy+Vn.y01),gn<On?kt.arc(Vn.cx,Vn.cy,gn,atan2(Vn.y01,Vn.x01),atan2(pn.y01,pn.x01),!nn):(kt.arc(Vn.cx,Vn.cy,gn,atan2(Vn.y01,Vn.x01),atan2(Vn.y11,Vn.x11),!nn),kt.arc(0,0,Wt,atan2(Vn.cy+Vn.y11,Vn.cx+Vn.x11),atan2(pn.cy+pn.y11,pn.cx+pn.x11),!nn),kt.arc(pn.cx,pn.cy,gn,atan2(pn.y11,pn.x11),atan2(pn.y01,pn.x01),!nn))):(kt.moveTo(mr,Er),kt.arc(0,0,Wt,rn,ln,!nn)):kt.moveTo(mr,Er),!(Ht>epsilon)||!(wn>epsilon)?kt.lineTo(Mr,rr):kn>epsilon?(Vn=cornerTangents(Mr,rr,vr,cr,Ht,-kn,nn),pn=cornerTangents(mr,Er,gr,Or,Ht,-kn,nn),kt.lineTo(Vn.cx+Vn.x01,Vn.cy+Vn.y01),kn<On?kt.arc(Vn.cx,Vn.cy,kn,atan2(Vn.y01,Vn.x01),atan2(pn.y01,pn.x01),!nn):(kt.arc(Vn.cx,Vn.cy,kn,atan2(Vn.y01,Vn.x01),atan2(Vn.y11,Vn.x11),!nn),kt.arc(0,0,Ht,atan2(Vn.cy+Vn.y11,Vn.cx+Vn.x11),atan2(pn.cy+pn.y11,pn.cx+pn.x11),nn),kt.arc(pn.cx,pn.cy,kn,atan2(pn.y11,pn.x11),atan2(pn.y01,pn.x01),!nn))):kt.arc(0,0,Ht,mn,sn,nn)}if(kt.closePath(),Nt)return kt=null,Nt+""||null}return Mt.centroid=function(){var Nt=(+nt.apply(this,arguments)+ +rt.apply(this,arguments))/2,zt=(+bt.apply(this,arguments)+ +wt.apply(this,arguments))/2-pi/2;return[cos(zt)*Nt,sin(zt)*Nt]},Mt.innerRadius=function(Nt){return arguments.length?(nt=typeof Nt=="function"?Nt:constant$1(+Nt),Mt):nt},Mt.outerRadius=function(Nt){return arguments.length?(rt=typeof Nt=="function"?Nt:constant$1(+Nt),Mt):rt},Mt.cornerRadius=function(Nt){return arguments.length?(it=typeof Nt=="function"?Nt:constant$1(+Nt),Mt):it},Mt.padRadius=function(Nt){return arguments.length?(vt=Nt==null?null:typeof Nt=="function"?Nt:constant$1(+Nt),Mt):vt},Mt.startAngle=function(Nt){return arguments.length?(bt=typeof Nt=="function"?Nt:constant$1(+Nt),Mt):bt},Mt.endAngle=function(Nt){return arguments.length?(wt=typeof Nt=="function"?Nt:constant$1(+Nt),Mt):wt},Mt.padAngle=function(Nt){return arguments.length?(Tt=typeof Nt=="function"?Nt:constant$1(+Nt),Mt):Tt},Mt.context=function(Nt){return arguments.length?(kt=Nt==null?null:Nt,Mt):kt},Mt}function array(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function Linear(nt){this._context=nt}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:this._context.lineTo(nt,rt);break}}};function curveLinear(nt){return new Linear(nt)}function x(nt){return nt[0]}function y(nt){return nt[1]}function line$1(nt,rt){var it=constant$1(!0),vt=null,bt=curveLinear,wt=null,Tt=withPath(kt);nt=typeof nt=="function"?nt:nt===void 0?x:constant$1(nt),rt=typeof rt=="function"?rt:rt===void 0?y:constant$1(rt);function kt(Lt){var Mt,Nt=(Lt=array(Lt)).length,zt,Ht=!1,Wt;for(vt==null&&(wt=bt(Wt=Tt())),Mt=0;Mt<=Nt;++Mt)!(Mt<Nt&&it(zt=Lt[Mt],Mt,Lt))===Ht&&((Ht=!Ht)?wt.lineStart():wt.lineEnd()),Ht&&wt.point(+nt(zt,Mt,Lt),+rt(zt,Mt,Lt));if(Wt)return wt=null,Wt+""||null}return kt.x=function(Lt){return arguments.length?(nt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):nt},kt.y=function(Lt){return arguments.length?(rt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):rt},kt.defined=function(Lt){return arguments.length?(it=typeof Lt=="function"?Lt:constant$1(!!Lt),kt):it},kt.curve=function(Lt){return arguments.length?(bt=Lt,vt!=null&&(wt=bt(vt)),kt):bt},kt.context=function(Lt){return arguments.length?(Lt==null?vt=wt=null:wt=bt(vt=Lt),kt):vt},kt}function descending(nt,rt){return rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function identity$1(nt){return nt}function pie(){var nt=identity$1,rt=descending,it=null,vt=constant$1(0),bt=constant$1(tau),wt=constant$1(0);function Tt(kt){var Lt,Mt=(kt=array(kt)).length,Nt,zt,Ht=0,Wt=new Array(Mt),Zt=new Array(Mt),tn=+vt.apply(this,arguments),Yt=Math.min(tau,Math.max(-tau,bt.apply(this,arguments)-tn)),nn,rn=Math.min(Math.abs(Yt)/Mt,wt.apply(this,arguments)),ln=rn*(Yt<0?-1:1),sn;for(Lt=0;Lt<Mt;++Lt)(sn=Zt[Wt[Lt]=Lt]=+nt(kt[Lt],Lt,kt))>0&&(Ht+=sn);for(rt!=null?Wt.sort(function(mn,wn){return rt(Zt[mn],Zt[wn])}):it!=null&&Wt.sort(function(mn,wn){return it(kt[mn],kt[wn])}),Lt=0,zt=Ht?(Yt-Mt*ln)/Ht:0;Lt<Mt;++Lt,tn=nn)Nt=Wt[Lt],sn=Zt[Nt],nn=tn+(sn>0?sn*zt:0)+ln,Zt[Nt]={data:kt[Nt],index:Lt,value:sn,startAngle:tn,endAngle:nn,padAngle:rn};return Zt}return Tt.value=function(kt){return arguments.length?(nt=typeof kt=="function"?kt:constant$1(+kt),Tt):nt},Tt.sortValues=function(kt){return arguments.length?(rt=kt,it=null,Tt):rt},Tt.sort=function(kt){return arguments.length?(it=kt,rt=null,Tt):it},Tt.startAngle=function(kt){return arguments.length?(vt=typeof kt=="function"?kt:constant$1(+kt),Tt):vt},Tt.endAngle=function(kt){return arguments.length?(bt=typeof kt=="function"?kt:constant$1(+kt),Tt):bt},Tt.padAngle=function(kt){return arguments.length?(wt=typeof kt=="function"?kt:constant$1(+kt),Tt):wt},Tt}function noop$1(){}function point$2(nt,rt,it){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+rt)/6,(nt._y0+4*nt._y1+it)/6)}function Basis(nt){this._context=nt}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasis(nt){return new Basis(nt)}function BasisClosed(nt){this._context=nt}BasisClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._x2=nt,this._y2=rt;break;case 1:this._point=2,this._x3=nt,this._y3=rt;break;case 2:this._point=3,this._x4=nt,this._y4=rt,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+rt)/6);break;default:point$2(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisClosed(nt){return new BasisClosed(nt)}function BasisOpen(nt){this._context=nt}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var it=(this._x0+4*this._x1+nt)/6,vt=(this._y0+4*this._y1+rt)/6;this._line?this._context.lineTo(it,vt):this._context.moveTo(it,vt);break;case 3:this._point=4;default:point$2(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisOpen(nt){return new BasisOpen(nt)}function LinearClosed(nt){this._context=nt}LinearClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,rt){nt=+nt,rt=+rt,this._point?this._context.lineTo(nt,rt):(this._point=1,this._context.moveTo(nt,rt))}};function curveLinearClosed(nt){return new LinearClosed(nt)}function sign(nt){return nt<0?-1:1}function slope3(nt,rt,it){var vt=nt._x1-nt._x0,bt=rt-nt._x1,wt=(nt._y1-nt._y0)/(vt||bt<0&&-0),Tt=(it-nt._y1)/(bt||vt<0&&-0),kt=(wt*bt+Tt*vt)/(vt+bt);return(sign(wt)+sign(Tt))*Math.min(Math.abs(wt),Math.abs(Tt),.5*Math.abs(kt))||0}function slope2(nt,rt){var it=nt._x1-nt._x0;return it?(3*(nt._y1-nt._y0)/it-rt)/2:rt}function point$1(nt,rt,it){var vt=nt._x0,bt=nt._y0,wt=nt._x1,Tt=nt._y1,kt=(wt-vt)/3;nt._context.bezierCurveTo(vt+kt,bt+kt*rt,wt-kt,Tt-kt*it,wt,Tt)}function MonotoneX(nt){this._context=nt}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){var it=NaN;if(nt=+nt,rt=+rt,!(nt===this._x1&&rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,it=slope3(this,nt,rt)),it);break;default:point$1(this,this._t0,it=slope3(this,nt,rt));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt,this._t0=it}}};function MonotoneY(nt){this._context=new ReflectContext(nt)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(nt,rt){MonotoneX.prototype.point.call(this,rt,nt)};function ReflectContext(nt){this._context=nt}ReflectContext.prototype={moveTo:function(nt,rt){this._context.moveTo(rt,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,rt){this._context.lineTo(rt,nt)},bezierCurveTo:function(nt,rt,it,vt,bt,wt){this._context.bezierCurveTo(rt,nt,vt,it,wt,bt)}};function monotoneX(nt){return new MonotoneX(nt)}function monotoneY(nt){return new MonotoneY(nt)}function Natural(nt){this._context=nt}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,rt=this._y,it=nt.length;if(it)if(this._line?this._context.lineTo(nt[0],rt[0]):this._context.moveTo(nt[0],rt[0]),it===2)this._context.lineTo(nt[1],rt[1]);else for(var vt=controlPoints(nt),bt=controlPoints(rt),wt=0,Tt=1;Tt<it;++wt,++Tt)this._context.bezierCurveTo(vt[0][wt],bt[0][wt],vt[1][wt],bt[1][wt],nt[Tt],rt[Tt]);(this._line||this._line!==0&&it===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,rt){this._x.push(+nt),this._y.push(+rt)}};function controlPoints(nt){var rt,it=nt.length-1,vt,bt=new Array(it),wt=new Array(it),Tt=new Array(it);for(bt[0]=0,wt[0]=2,Tt[0]=nt[0]+2*nt[1],rt=1;rt<it-1;++rt)bt[rt]=1,wt[rt]=4,Tt[rt]=4*nt[rt]+2*nt[rt+1];for(bt[it-1]=2,wt[it-1]=7,Tt[it-1]=8*nt[it-1]+nt[it],rt=1;rt<it;++rt)vt=bt[rt]/wt[rt-1],wt[rt]-=vt,Tt[rt]-=vt*Tt[rt-1];for(bt[it-1]=Tt[it-1]/wt[it-1],rt=it-2;rt>=0;--rt)bt[rt]=(Tt[rt]-bt[rt+1])/wt[rt];for(wt[it-1]=(nt[it]+bt[it-1])/2,rt=0;rt<it-1;++rt)wt[rt]=2*nt[rt+1]-bt[rt+1];return[bt,wt]}function curveNatural(nt){return new Natural(nt)}function Step(nt,rt){this._context=nt,this._t=rt}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,rt),this._context.lineTo(nt,rt);else{var it=this._x*(1-this._t)+nt*this._t;this._context.lineTo(it,this._y),this._context.lineTo(it,rt)}break}}this._x=nt,this._y=rt}};function curveStep(nt){return new Step(nt,.5)}function stepBefore(nt){return new Step(nt,0)}function stepAfter(nt){return new Step(nt,1)}function Transform(nt,rt,it){this.k=nt,this.x=rt,this.y=it}Transform.prototype={constructor:Transform,scale:function(nt){return nt===1?this:new Transform(this.k*nt,this.x,this.y)},translate:function(nt,rt){return nt===0&rt===0?this:new Transform(this.k,this.x+this.k*nt,this.y+this.k*rt)},apply:function(nt){return[nt[0]*this.k+this.x,nt[1]*this.k+this.y]},applyX:function(nt){return nt*this.k+this.x},applyY:function(nt){return nt*this.k+this.y},invert:function(nt){return[(nt[0]-this.x)/this.k,(nt[1]-this.y)/this.k]},invertX:function(nt){return(nt-this.x)/this.k},invertY:function(nt){return(nt-this.y)/this.k},rescaleX:function(nt){return nt.copy().domain(nt.range().map(this.invertX,this).map(nt.invert,nt))},rescaleY:function(nt){return nt.copy().domain(nt.range().map(this.invertY,this).map(nt.invert,nt))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Transform(1,0,0);Transform.prototype;/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function _typeof(nt){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof(nt)}function _setPrototypeOf(nt,rt){return _setPrototypeOf=Object.setPrototypeOf||function(vt,bt){return vt.__proto__=bt,vt},_setPrototypeOf(nt,rt)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(nt,rt,it){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(bt,wt,Tt){var kt=[null];kt.push.apply(kt,wt);var Lt=Function.bind.apply(bt,kt),Mt=new Lt;return Tt&&_setPrototypeOf(Mt,Tt.prototype),Mt},_construct.apply(null,arguments)}function _toConsumableArray(nt){return _arrayWithoutHoles(nt)||_iterableToArray(nt)||_unsupportedIterableToArray(nt)||_nonIterableSpread()}function _arrayWithoutHoles(nt){if(Array.isArray(nt))return _arrayLikeToArray(nt)}function _iterableToArray(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}function _unsupportedIterableToArray(nt,rt){if(!!nt){if(typeof nt=="string")return _arrayLikeToArray(nt,rt);var it=Object.prototype.toString.call(nt).slice(8,-1);if(it==="Object"&&nt.constructor&&(it=nt.constructor.name),it==="Map"||it==="Set")return Array.from(nt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return _arrayLikeToArray(nt,rt)}}function _arrayLikeToArray(nt,rt){(rt==null||rt>nt.length)&&(rt=nt.length);for(var it=0,vt=new Array(rt);it<rt;it++)vt[it]=nt[it];return vt}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty$g=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply$2=_ref.apply,construct=_ref.construct;apply$2||(apply$2=function(rt,it,vt){return rt.apply(it,vt)});freeze||(freeze=function(rt){return rt});seal||(seal=function(rt){return rt});construct||(construct=function(rt,it){return _construct(rt,_toConsumableArray(it))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush$1=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(nt){return function(rt){for(var it=arguments.length,vt=new Array(it>1?it-1:0),bt=1;bt<it;bt++)vt[bt-1]=arguments[bt];return apply$2(nt,rt,vt)}}function unconstruct(nt){return function(){for(var rt=arguments.length,it=new Array(rt),vt=0;vt<rt;vt++)it[vt]=arguments[vt];return construct(nt,it)}}function addToSet(nt,rt,it){it=it||stringToLowerCase,setPrototypeOf&&setPrototypeOf(nt,null);for(var vt=rt.length;vt--;){var bt=rt[vt];if(typeof bt=="string"){var wt=it(bt);wt!==bt&&(isFrozen(rt)||(rt[vt]=wt),bt=wt)}nt[bt]=!0}return nt}function clone$2(nt){var rt=create(null),it;for(it in nt)apply$2(hasOwnProperty$g,nt,[it])&&(rt[it]=nt[it]);return rt}function lookupGetter(nt,rt){for(;nt!==null;){var it=getOwnPropertyDescriptor(nt,rt);if(it){if(it.get)return unapply(it.get);if(typeof it.value=="function")return unapply(it.value)}nt=getPrototypeOf(nt)}function vt(bt){return console.warn("fallback value for",bt),null}return vt}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function nt(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function nt(rt,it){if(_typeof(rt)!=="object"||typeof rt.createPolicy!="function")return null;var vt=null,bt="data-tt-policy-suffix";it.currentScript&&it.currentScript.hasAttribute(bt)&&(vt=it.currentScript.getAttribute(bt));var wt="dompurify"+(vt?"#"+vt:"");try{return rt.createPolicy(wt,{createHTML:function(kt){return kt},createScriptURL:function(kt){return kt}})}catch{return console.warn("TrustedTypes policy "+wt+" could not be created."),null}};function createDOMPurify(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),rt=function(xr){return createDOMPurify(xr)};if(rt.version="2.4.1",rt.removed=[],!nt||!nt.document||nt.document.nodeType!==9)return rt.isSupported=!1,rt;var it=nt.document,vt=nt.document,bt=nt.DocumentFragment,wt=nt.HTMLTemplateElement,Tt=nt.Node,kt=nt.Element,Lt=nt.NodeFilter,Mt=nt.NamedNodeMap,Nt=Mt===void 0?nt.NamedNodeMap||nt.MozNamedAttrMap:Mt,zt=nt.HTMLFormElement,Ht=nt.DOMParser,Wt=nt.trustedTypes,Zt=kt.prototype,tn=lookupGetter(Zt,"cloneNode"),Yt=lookupGetter(Zt,"nextSibling"),nn=lookupGetter(Zt,"childNodes"),rn=lookupGetter(Zt,"parentNode");if(typeof wt=="function"){var ln=vt.createElement("template");ln.content&&ln.content.ownerDocument&&(vt=ln.content.ownerDocument)}var sn=_createTrustedTypesPolicy(Wt,it),mn=sn?sn.createHTML(""):"",wn=vt,Cn=wn.implementation,An=wn.createNodeIterator,Pn=wn.createDocumentFragment,On=wn.getElementsByTagName,kn=it.importNode,gn={};try{gn=clone$2(vt).documentMode?vt.documentMode:{}}catch{}var Vn={};rt.isSupported=typeof rn=="function"&&Cn&&typeof Cn.createHTMLDocument<"u"&&gn!==9;var pn=MUSTACHE_EXPR,pr=ERB_EXPR,yn=TMPLIT_EXPR,mr=DATA_ATTR,Er=ARIA_ATTR,Mr=IS_SCRIPT_OR_DATA,rr=ATTR_WHITESPACE,vr=IS_ALLOWED_URI,cr=null,gr=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),Or=null,Ar=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),sr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ii=null,ar=null,fr=!0,wr=!0,ir=!1,Ln=!1,en=!1,dn=!1,un=!1,Nn=!1,In=!1,lr=!1,$n=!0,Qn=!1,Wn="user-content-",or=!0,dr=!1,kr={},br=null,_r=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),hi=null,di=addToSet({},["audio","video","img","source","image","track"]),vi=null,Ai=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ki="http://www.w3.org/1998/Math/MathML",Bi="http://www.w3.org/2000/svg",Ti="http://www.w3.org/1999/xhtml",Rr=Ti,Tn=!1,Sn=null,jn=addToSet({},[ki,Bi,Ti],stringToString),er,Cr=["application/xhtml+xml","text/html"],Qr="text/html",yr,ai=null,Ir=vt.createElement("form"),mi=function(xr){return xr instanceof RegExp||xr instanceof Function},wi=function(xr){ai&&ai===xr||((!xr||_typeof(xr)!=="object")&&(xr={}),xr=clone$2(xr),er=Cr.indexOf(xr.PARSER_MEDIA_TYPE)===-1?er=Qr:er=xr.PARSER_MEDIA_TYPE,yr=er==="application/xhtml+xml"?stringToString:stringToLowerCase,cr="ALLOWED_TAGS"in xr?addToSet({},xr.ALLOWED_TAGS,yr):gr,Or="ALLOWED_ATTR"in xr?addToSet({},xr.ALLOWED_ATTR,yr):Ar,Sn="ALLOWED_NAMESPACES"in xr?addToSet({},xr.ALLOWED_NAMESPACES,stringToString):jn,vi="ADD_URI_SAFE_ATTR"in xr?addToSet(clone$2(Ai),xr.ADD_URI_SAFE_ATTR,yr):Ai,hi="ADD_DATA_URI_TAGS"in xr?addToSet(clone$2(di),xr.ADD_DATA_URI_TAGS,yr):di,br="FORBID_CONTENTS"in xr?addToSet({},xr.FORBID_CONTENTS,yr):_r,ii="FORBID_TAGS"in xr?addToSet({},xr.FORBID_TAGS,yr):{},ar="FORBID_ATTR"in xr?addToSet({},xr.FORBID_ATTR,yr):{},kr="USE_PROFILES"in xr?xr.USE_PROFILES:!1,fr=xr.ALLOW_ARIA_ATTR!==!1,wr=xr.ALLOW_DATA_ATTR!==!1,ir=xr.ALLOW_UNKNOWN_PROTOCOLS||!1,Ln=xr.SAFE_FOR_TEMPLATES||!1,en=xr.WHOLE_DOCUMENT||!1,Nn=xr.RETURN_DOM||!1,In=xr.RETURN_DOM_FRAGMENT||!1,lr=xr.RETURN_TRUSTED_TYPE||!1,un=xr.FORCE_BODY||!1,$n=xr.SANITIZE_DOM!==!1,Qn=xr.SANITIZE_NAMED_PROPS||!1,or=xr.KEEP_CONTENT!==!1,dr=xr.IN_PLACE||!1,vr=xr.ALLOWED_URI_REGEXP||vr,Rr=xr.NAMESPACE||Ti,xr.CUSTOM_ELEMENT_HANDLING&&mi(xr.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(sr.tagNameCheck=xr.CUSTOM_ELEMENT_HANDLING.tagNameCheck),xr.CUSTOM_ELEMENT_HANDLING&&mi(xr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(sr.attributeNameCheck=xr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),xr.CUSTOM_ELEMENT_HANDLING&&typeof xr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(sr.allowCustomizedBuiltInElements=xr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ln&&(wr=!1),In&&(Nn=!0),kr&&(cr=addToSet({},_toConsumableArray(text)),Or=[],kr.html===!0&&(addToSet(cr,html$1),addToSet(Or,html)),kr.svg===!0&&(addToSet(cr,svg$1),addToSet(Or,svg),addToSet(Or,xml)),kr.svgFilters===!0&&(addToSet(cr,svgFilters),addToSet(Or,svg),addToSet(Or,xml)),kr.mathMl===!0&&(addToSet(cr,mathMl$1),addToSet(Or,mathMl),addToSet(Or,xml))),xr.ADD_TAGS&&(cr===gr&&(cr=clone$2(cr)),addToSet(cr,xr.ADD_TAGS,yr)),xr.ADD_ATTR&&(Or===Ar&&(Or=clone$2(Or)),addToSet(Or,xr.ADD_ATTR,yr)),xr.ADD_URI_SAFE_ATTR&&addToSet(vi,xr.ADD_URI_SAFE_ATTR,yr),xr.FORBID_CONTENTS&&(br===_r&&(br=clone$2(br)),addToSet(br,xr.FORBID_CONTENTS,yr)),or&&(cr["#text"]=!0),en&&addToSet(cr,["html","head","body"]),cr.table&&(addToSet(cr,["tbody"]),delete ii.tbody),freeze&&freeze(xr),ai=xr)},Mi=addToSet({},["mi","mo","mn","ms","mtext"]),Ei=addToSet({},["foreignobject","desc","title","annotation-xml"]),io=addToSet({},["title","style","font","a","script"]),Di=addToSet({},svg$1);addToSet(Di,svgFilters),addToSet(Di,svgDisallowed);var eo=addToSet({},mathMl$1);addToSet(eo,mathMlDisallowed);var wo=function(xr){var li=rn(xr);(!li||!li.tagName)&&(li={namespaceURI:Rr,tagName:"template"});var yi=stringToLowerCase(xr.tagName),uo=stringToLowerCase(li.tagName);return Sn[xr.namespaceURI]?xr.namespaceURI===Bi?li.namespaceURI===Ti?yi==="svg":li.namespaceURI===ki?yi==="svg"&&(uo==="annotation-xml"||Mi[uo]):Boolean(Di[yi]):xr.namespaceURI===ki?li.namespaceURI===Ti?yi==="math":li.namespaceURI===Bi?yi==="math"&&Ei[uo]:Boolean(eo[yi]):xr.namespaceURI===Ti?li.namespaceURI===Bi&&!Ei[uo]||li.namespaceURI===ki&&!Mi[uo]?!1:!eo[yi]&&(io[yi]||!Di[yi]):!!(er==="application/xhtml+xml"&&Sn[xr.namespaceURI]):!1},Ji=function(xr){arrayPush$1(rt.removed,{element:xr});try{xr.parentNode.removeChild(xr)}catch{try{xr.outerHTML=mn}catch{xr.remove()}}},al=function(xr,li){try{arrayPush$1(rt.removed,{attribute:li.getAttributeNode(xr),from:li})}catch{arrayPush$1(rt.removed,{attribute:null,from:li})}if(li.removeAttribute(xr),xr==="is"&&!Or[xr])if(Nn||In)try{Ji(li)}catch{}else try{li.setAttribute(xr,"")}catch{}},Ws=function(xr){var li,yi;if(un)xr="<remove></remove>"+xr;else{var uo=stringMatch(xr,/^[\r\n\t ]+/);yi=uo&&uo[0]}er==="application/xhtml+xml"&&Rr===Ti&&(xr='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+xr+"</body></html>");var ss=sn?sn.createHTML(xr):xr;if(Rr===Ti)try{li=new Ht().parseFromString(ss,er)}catch{}if(!li||!li.documentElement){li=Cn.createDocument(Rr,"template",null);try{li.documentElement.innerHTML=Tn?"":ss}catch{}}var Co=li.body||li.documentElement;return xr&&yi&&Co.insertBefore(vt.createTextNode(yi),Co.childNodes[0]||null),Rr===Ti?On.call(li,en?"html":"body")[0]:en?li.documentElement:Co},Pi=function(xr){return An.call(xr.ownerDocument||xr,xr,Lt.SHOW_ELEMENT|Lt.SHOW_COMMENT|Lt.SHOW_TEXT,null,!1)},oo=function(xr){return xr instanceof zt&&(typeof xr.nodeName!="string"||typeof xr.textContent!="string"||typeof xr.removeChild!="function"||!(xr.attributes instanceof Nt)||typeof xr.removeAttribute!="function"||typeof xr.setAttribute!="function"||typeof xr.namespaceURI!="string"||typeof xr.insertBefore!="function"||typeof xr.hasChildNodes!="function")},Rs=function(xr){return _typeof(Tt)==="object"?xr instanceof Tt:xr&&_typeof(xr)==="object"&&typeof xr.nodeType=="number"&&typeof xr.nodeName=="string"},jo=function(xr,li,yi){!Vn[xr]||arrayForEach(Vn[xr],function(uo){uo.call(rt,li,yi,ai)})},ls=function(xr){var li;if(jo("beforeSanitizeElements",xr,null),oo(xr)||regExpTest(/[\u0080-\uFFFF]/,xr.nodeName))return Ji(xr),!0;var yi=yr(xr.nodeName);if(jo("uponSanitizeElement",xr,{tagName:yi,allowedTags:cr}),xr.hasChildNodes()&&!Rs(xr.firstElementChild)&&(!Rs(xr.content)||!Rs(xr.content.firstElementChild))&&regExpTest(/<[/\w]/g,xr.innerHTML)&&regExpTest(/<[/\w]/g,xr.textContent)||yi==="select"&&regExpTest(/<template/i,xr.innerHTML))return Ji(xr),!0;if(!cr[yi]||ii[yi]){if(!ii[yi]&&Yr(yi)&&(sr.tagNameCheck instanceof RegExp&&regExpTest(sr.tagNameCheck,yi)||sr.tagNameCheck instanceof Function&&sr.tagNameCheck(yi)))return!1;if(or&&!br[yi]){var uo=rn(xr)||xr.parentNode,ss=nn(xr)||xr.childNodes;if(ss&&uo)for(var Co=ss.length,Mo=Co-1;Mo>=0;--Mo)uo.insertBefore(tn(ss[Mo],!0),Yt(xr))}return Ji(xr),!0}return xr instanceof kt&&!wo(xr)||(yi==="noscript"||yi==="noembed")&&regExpTest(/<\/no(script|embed)/i,xr.innerHTML)?(Ji(xr),!0):(Ln&&xr.nodeType===3&&(li=xr.textContent,li=stringReplace(li,pn," "),li=stringReplace(li,pr," "),li=stringReplace(li,yn," "),xr.textContent!==li&&(arrayPush$1(rt.removed,{element:xr.cloneNode()}),xr.textContent=li)),jo("afterSanitizeElements",xr,null),!1)},Dr=function(xr,li,yi){if($n&&(li==="id"||li==="name")&&(yi in vt||yi in Ir))return!1;if(!(wr&&!ar[li]&&regExpTest(mr,li))){if(!(fr&&regExpTest(Er,li))){if(!Or[li]||ar[li]){if(!(Yr(xr)&&(sr.tagNameCheck instanceof RegExp&&regExpTest(sr.tagNameCheck,xr)||sr.tagNameCheck instanceof Function&&sr.tagNameCheck(xr))&&(sr.attributeNameCheck instanceof RegExp&&regExpTest(sr.attributeNameCheck,li)||sr.attributeNameCheck instanceof Function&&sr.attributeNameCheck(li))||li==="is"&&sr.allowCustomizedBuiltInElements&&(sr.tagNameCheck instanceof RegExp&&regExpTest(sr.tagNameCheck,yi)||sr.tagNameCheck instanceof Function&&sr.tagNameCheck(yi))))return!1}else if(!vi[li]){if(!regExpTest(vr,stringReplace(yi,rr,""))){if(!((li==="src"||li==="xlink:href"||li==="href")&&xr!=="script"&&stringIndexOf(yi,"data:")===0&&hi[xr])){if(!(ir&&!regExpTest(Mr,stringReplace(yi,rr,"")))){if(yi)return!1}}}}}}return!0},Yr=function(xr){return xr.indexOf("-")>0},Vr=function(xr){var li,yi,uo,ss;jo("beforeSanitizeAttributes",xr,null);var Co=xr.attributes;if(!!Co){var Mo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Or};for(ss=Co.length;ss--;){li=Co[ss];var ho=li,as=ho.name,pl=ho.namespaceURI;if(yi=as==="value"?li.value:stringTrim(li.value),uo=yr(as),Mo.attrName=uo,Mo.attrValue=yi,Mo.keepAttr=!0,Mo.forceKeepAttr=void 0,jo("uponSanitizeAttribute",xr,Mo),yi=Mo.attrValue,!Mo.forceKeepAttr&&(al(as,xr),!!Mo.keepAttr)){if(regExpTest(/\/>/i,yi)){al(as,xr);continue}Ln&&(yi=stringReplace(yi,pn," "),yi=stringReplace(yi,pr," "),yi=stringReplace(yi,yn," "));var vu=yr(xr.nodeName);if(!!Dr(vu,uo,yi)){if(Qn&&(uo==="id"||uo==="name")&&(al(as,xr),yi=Wn+yi),sn&&_typeof(Wt)==="object"&&typeof Wt.getAttributeType=="function"&&!pl)switch(Wt.getAttributeType(vu,uo)){case"TrustedHTML":yi=sn.createHTML(yi);break;case"TrustedScriptURL":yi=sn.createScriptURL(yi);break}try{pl?xr.setAttributeNS(pl,as,yi):xr.setAttribute(as,yi),arrayPop(rt.removed)}catch{}}}}jo("afterSanitizeAttributes",xr,null)}},xi=function ui(xr){var li,yi=Pi(xr);for(jo("beforeSanitizeShadowDOM",xr,null);li=yi.nextNode();)jo("uponSanitizeShadowNode",li,null),!ls(li)&&(li.content instanceof bt&&ui(li.content),Vr(li));jo("afterSanitizeShadowDOM",xr,null)};return rt.sanitize=function(ui){var xr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},li,yi,uo,ss,Co;if(Tn=!ui,Tn&&(ui="<!-->"),typeof ui!="string"&&!Rs(ui)){if(typeof ui.toString!="function")throw typeErrorCreate("toString is not a function");if(ui=ui.toString(),typeof ui!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!rt.isSupported){if(_typeof(nt.toStaticHTML)==="object"||typeof nt.toStaticHTML=="function"){if(typeof ui=="string")return nt.toStaticHTML(ui);if(Rs(ui))return nt.toStaticHTML(ui.outerHTML)}return ui}if(dn||wi(xr),rt.removed=[],typeof ui=="string"&&(dr=!1),dr){if(ui.nodeName){var Mo=yr(ui.nodeName);if(!cr[Mo]||ii[Mo])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(ui instanceof Tt)li=Ws("<!---->"),yi=li.ownerDocument.importNode(ui,!0),yi.nodeType===1&&yi.nodeName==="BODY"||yi.nodeName==="HTML"?li=yi:li.appendChild(yi);else{if(!Nn&&!Ln&&!en&&ui.indexOf("<")===-1)return sn&&lr?sn.createHTML(ui):ui;if(li=Ws(ui),!li)return Nn?null:lr?mn:""}li&&un&&Ji(li.firstChild);for(var ho=Pi(dr?ui:li);uo=ho.nextNode();)uo.nodeType===3&&uo===ss||ls(uo)||(uo.content instanceof bt&&xi(uo.content),Vr(uo),ss=uo);if(ss=null,dr)return ui;if(Nn){if(In)for(Co=Pn.call(li.ownerDocument);li.firstChild;)Co.appendChild(li.firstChild);else Co=li;return Or.shadowroot&&(Co=kn.call(it,Co,!0)),Co}var as=en?li.outerHTML:li.innerHTML;return en&&cr["!doctype"]&&li.ownerDocument&&li.ownerDocument.doctype&&li.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,li.ownerDocument.doctype.name)&&(as="<!DOCTYPE "+li.ownerDocument.doctype.name+`>
`+as),Ln&&(as=stringReplace(as,pn," "),as=stringReplace(as,pr," "),as=stringReplace(as,yn," ")),sn&&lr?sn.createHTML(as):as},rt.setConfig=function(ui){wi(ui),dn=!0},rt.clearConfig=function(){ai=null,dn=!1},rt.isValidAttribute=function(ui,xr,li){ai||wi({});var yi=yr(ui),uo=yr(xr);return Dr(yi,uo,li)},rt.addHook=function(ui,xr){typeof xr=="function"&&(Vn[ui]=Vn[ui]||[],arrayPush$1(Vn[ui],xr))},rt.removeHook=function(ui){if(Vn[ui])return arrayPop(Vn[ui])},rt.removeHooks=function(ui){Vn[ui]&&(Vn[ui]=[])},rt.removeAllHooks=function(){Vn={}},rt}var purify=createDOMPurify();const Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:nt=>nt>=255?255:nt<0?0:nt,g:nt=>nt>=255?255:nt<0?0:nt,b:nt=>nt>=255?255:nt<0?0:nt,h:nt=>nt%360,s:nt=>nt>=100?100:nt<0?0:nt,l:nt=>nt>=100?100:nt<0?0:nt,a:nt=>nt>=1?1:nt<0?0:nt},toLinear:nt=>{const rt=nt/255;return nt>.03928?Math.pow((rt+.055)/1.055,2.4):rt/12.92},hue2rgb:(nt,rt,it)=>(it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*(2/3-it)*6:nt),hsl2rgb:({h:nt,s:rt,l:it},vt)=>{if(!rt)return it*2.55;nt/=360,rt/=100,it/=100;const bt=it<.5?it*(1+rt):it+rt-it*rt,wt=2*it-bt;switch(vt){case"r":return Channel.hue2rgb(wt,bt,nt+1/3)*255;case"g":return Channel.hue2rgb(wt,bt,nt)*255;case"b":return Channel.hue2rgb(wt,bt,nt-1/3)*255}},rgb2hsl:({r:nt,g:rt,b:it},vt)=>{nt/=255,rt/=255,it/=255;const bt=Math.max(nt,rt,it),wt=Math.min(nt,rt,it),Tt=(bt+wt)/2;if(vt==="l")return Tt*100;if(bt===wt)return 0;const kt=bt-wt,Lt=Tt>.5?kt/(2-bt-wt):kt/(bt+wt);if(vt==="s")return Lt*100;switch(bt){case nt:return((rt-it)/kt+(rt<it?6:0))*60;case rt:return((it-nt)/kt+2)*60;case it:return((nt-rt)/kt+4)*60;default:return-1}}},channel=Channel,Lang={clamp:(nt,rt,it)=>rt>it?Math.min(rt,Math.max(it,nt)):Math.min(it,Math.max(rt,nt)),round:nt=>Math.round(nt*1e10)/1e10},lang=Lang,Unit={dec2hex:nt=>{const rt=Math.round(nt).toString(16);return rt.length>1?rt:`0${rt}`}},unit=Unit,Utils={channel,lang,unit},_=Utils,DEC2HEX={};for(let nt=0;nt<=255;nt++)DEC2HEX[nt]=_.unit.dec2hex(nt);const TYPE={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE.ALL}get(){return this.type}set(rt){if(this.type&&this.type!==rt)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=rt}reset(){this.type=TYPE.ALL}is(rt){return this.type===rt}}const Type$2=Type;class Channels{constructor(rt,it){this.color=it,this.changed=!1,this.data=rt,this.type=new Type$2}set(rt,it){return this.color=it,this.changed=!1,this.data=rt,this.type.type=TYPE.ALL,this}_ensureHSL(){const rt=this.data,{h:it,s:vt,l:bt}=rt;it===void 0&&(rt.h=_.channel.rgb2hsl(rt,"h")),vt===void 0&&(rt.s=_.channel.rgb2hsl(rt,"s")),bt===void 0&&(rt.l=_.channel.rgb2hsl(rt,"l"))}_ensureRGB(){const rt=this.data,{r:it,g:vt,b:bt}=rt;it===void 0&&(rt.r=_.channel.hsl2rgb(rt,"r")),vt===void 0&&(rt.g=_.channel.hsl2rgb(rt,"g")),bt===void 0&&(rt.b=_.channel.hsl2rgb(rt,"b"))}get r(){const rt=this.data,it=rt.r;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"r"))}get g(){const rt=this.data,it=rt.g;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"g"))}get b(){const rt=this.data,it=rt.b;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"b"))}get h(){const rt=this.data,it=rt.h;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"h"))}get s(){const rt=this.data,it=rt.s;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"s"))}get l(){const rt=this.data,it=rt.l;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"l"))}get a(){return this.data.a}set r(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=rt}set g(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=rt}set b(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=rt}set h(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=rt}set s(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=rt}set l(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=rt}set a(rt){this.changed=!0,this.data.a=rt}}const Channels$1=Channels,channels=new Channels$1({r:0,g:0,b:0,a:0},"transparent"),ChannelsReusable=channels,Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:nt=>{if(nt.charCodeAt(0)!==35)return;const rt=nt.match(Hex.re);if(!rt)return;const it=rt[1],vt=parseInt(it,16),bt=it.length,wt=bt%4===0,Tt=bt>4,kt=Tt?1:17,Lt=Tt?8:4,Mt=wt?0:-1,Nt=Tt?255:15;return ChannelsReusable.set({r:(vt>>Lt*(Mt+3)&Nt)*kt,g:(vt>>Lt*(Mt+2)&Nt)*kt,b:(vt>>Lt*(Mt+1)&Nt)*kt,a:wt?(vt&Nt)*kt/255:1},nt)},stringify:nt=>{const{r:rt,g:it,b:vt,a:bt}=nt;return bt<1?`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(vt)]}${DEC2HEX[Math.round(bt*255)]}`:`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(vt)]}`}},Hex$1=Hex,HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:nt=>{const rt=nt.match(HSL.hueRe);if(rt){const[,it,vt]=rt;switch(vt){case"grad":return _.channel.clamp.h(parseFloat(it)*.9);case"rad":return _.channel.clamp.h(parseFloat(it)*180/Math.PI);case"turn":return _.channel.clamp.h(parseFloat(it)*360)}}return _.channel.clamp.h(parseFloat(nt))},parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==104&&rt!==72)return;const it=nt.match(HSL.re);if(!it)return;const[,vt,bt,wt,Tt,kt]=it;return ChannelsReusable.set({h:HSL._hue2deg(vt),s:_.channel.clamp.s(parseFloat(bt)),l:_.channel.clamp.l(parseFloat(wt)),a:Tt?_.channel.clamp.a(kt?parseFloat(Tt)/100:parseFloat(Tt)):1},nt)},stringify:nt=>{const{h:rt,s:it,l:vt,a:bt}=nt;return bt<1?`hsla(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(vt)}%, ${bt})`:`hsl(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(vt)}%)`}},HSL$1=HSL,Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:nt=>{nt=nt.toLowerCase();const rt=Keyword.colors[nt];if(!!rt)return Hex$1.parse(rt)},stringify:nt=>{const rt=Hex$1.stringify(nt);for(const it in Keyword.colors)if(Keyword.colors[it]===rt)return it}},Keyword$1=Keyword,RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==114&&rt!==82)return;const it=nt.match(RGB.re);if(!it)return;const[,vt,bt,wt,Tt,kt,Lt,Mt,Nt]=it;return ChannelsReusable.set({r:_.channel.clamp.r(bt?parseFloat(vt)*2.55:parseFloat(vt)),g:_.channel.clamp.g(Tt?parseFloat(wt)*2.55:parseFloat(wt)),b:_.channel.clamp.b(Lt?parseFloat(kt)*2.55:parseFloat(kt)),a:Mt?_.channel.clamp.a(Nt?parseFloat(Mt)/100:parseFloat(Mt)):1},nt)},stringify:nt=>{const{r:rt,g:it,b:vt,a:bt}=nt;return bt<1?`rgba(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(vt)}, ${_.lang.round(bt)})`:`rgb(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(vt)})`}},RGB$1=RGB,Color={format:{keyword:Keyword$1,hex:Hex$1,rgb:RGB$1,rgba:RGB$1,hsl:HSL$1,hsla:HSL$1},parse:nt=>{if(typeof nt!="string")return nt;const rt=Hex$1.parse(nt)||RGB$1.parse(nt)||HSL$1.parse(nt)||Keyword$1.parse(nt);if(rt)return rt;throw new Error(`Unsupported color format: "${nt}"`)},stringify:nt=>!nt.changed&&nt.color?nt.color:nt.type.is(TYPE.HSL)||nt.data.r===void 0?HSL$1.stringify(nt):nt.a<1||!Number.isInteger(nt.r)||!Number.isInteger(nt.g)||!Number.isInteger(nt.b)?RGB$1.stringify(nt):Hex$1.stringify(nt)},Color$1=Color,change=(nt,rt)=>{const it=Color$1.parse(nt);for(const vt in rt)it[vt]=_.channel.clamp[vt](rt[vt]);return Color$1.stringify(it)},change$1=change,rgba=(nt,rt,it=0,vt=1)=>{if(typeof nt!="number")return change$1(nt,{a:rt});const bt=ChannelsReusable.set({r:_.channel.clamp.r(nt),g:_.channel.clamp.g(rt),b:_.channel.clamp.b(it),a:_.channel.clamp.a(vt)});return Color$1.stringify(bt)},rgba$1=rgba,adjustChannel=(nt,rt,it)=>{const vt=Color$1.parse(nt),bt=vt[rt],wt=_.channel.clamp[rt](bt+it);return bt!==wt&&(vt[rt]=wt),Color$1.stringify(vt)},adjustChannel$1=adjustChannel,lighten=(nt,rt)=>adjustChannel$1(nt,"l",rt),lighten$1=lighten,darken=(nt,rt)=>adjustChannel$1(nt,"l",-rt),darken$1=darken,adjust$1=(nt,rt)=>{const it=Color$1.parse(nt),vt={};for(const bt in rt)!rt[bt]||(vt[bt]=it[bt]+rt[bt]);return change$1(nt,vt)},adjust$2=adjust$1,mix=(nt,rt,it=50)=>{const{r:vt,g:bt,b:wt,a:Tt}=Color$1.parse(nt),{r:kt,g:Lt,b:Mt,a:Nt}=Color$1.parse(rt),zt=it/100,Ht=zt*2-1,Wt=Tt-Nt,tn=((Ht*Wt===-1?Ht:(Ht+Wt)/(1+Ht*Wt))+1)/2,Yt=1-tn,nn=vt*tn+kt*Yt,rn=bt*tn+Lt*Yt,ln=wt*tn+Mt*Yt,sn=Tt*zt+Nt*(1-zt);return rgba$1(nn,rn,ln,sn)},mix$1=mix,invert=(nt,rt=100)=>{const it=Color$1.parse(nt);return it.r=255-it.r,it.g=255-it.g,it.b=255-it.b,mix$1(it,nt,rt)},invert$1=invert;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(nt){var rt=hasOwnProperty$f.call(nt,symToStringTag$1),it=nt[symToStringTag$1];try{nt[symToStringTag$1]=void 0;var vt=!0}catch{}var bt=nativeObjectToString$1.call(nt);return vt&&(rt?nt[symToStringTag$1]=it:delete nt[symToStringTag$1]),bt}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString(nt){return nativeObjectToString.call(nt)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(nt){return nt==null?nt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(nt)?getRawTag(nt):objectToString(nt)}function isObject$1(nt){var rt=typeof nt;return nt!=null&&(rt=="object"||rt=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(nt){if(!isObject$1(nt))return!1;var rt=baseGetTag(nt);return rt==funcTag$2||rt==genTag$1||rt==asyncTag||rt==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var nt=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return nt?"Symbol(src)_1."+nt:""}();function isMasked(nt){return!!maskSrcKey&&maskSrcKey in nt}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(nt){if(nt!=null){try{return funcToString$2.call(nt)}catch{}try{return nt+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(nt){if(!isObject$1(nt)||isMasked(nt))return!1;var rt=isFunction(nt)?reIsNative:reIsHostCtor;return rt.test(toSource(nt))}function getValue(nt,rt){return nt==null?void 0:nt[rt]}function getNative(nt,rt){var it=getValue(nt,rt);return baseIsNative(it)?it:void 0}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(nt){var rt=this.has(nt)&&delete this.__data__[nt];return this.size-=rt?1:0,rt}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function hashGet(nt){var rt=this.__data__;if(nativeCreate$1){var it=rt[nt];return it===HASH_UNDEFINED$2?void 0:it}return hasOwnProperty$d.call(rt,nt)?rt[nt]:void 0}var objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty;function hashHas(nt){var rt=this.__data__;return nativeCreate$1?rt[nt]!==void 0:hasOwnProperty$c.call(rt,nt)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(nt,rt){var it=this.__data__;return this.size+=this.has(nt)?0:1,it[nt]=nativeCreate$1&&rt===void 0?HASH_UNDEFINED$1:rt,this}function Hash(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var vt=nt[rt];this.set(vt[0],vt[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function eq(nt,rt){return nt===rt||nt!==nt&&rt!==rt}function assocIndexOf(nt,rt){for(var it=nt.length;it--;)if(eq(nt[it][0],rt))return it;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);if(it<0)return!1;var vt=rt.length-1;return it==vt?rt.pop():splice.call(rt,it,1),--this.size,!0}function listCacheGet(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);return it<0?void 0:rt[it][1]}function listCacheHas(nt){return assocIndexOf(this.__data__,nt)>-1}function listCacheSet(nt,rt){var it=this.__data__,vt=assocIndexOf(it,nt);return vt<0?(++this.size,it.push([nt,rt])):it[vt][1]=rt,this}function ListCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var vt=nt[rt];this.set(vt[0],vt[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(nt){var rt=typeof nt;return rt=="string"||rt=="number"||rt=="symbol"||rt=="boolean"?nt!=="__proto__":nt===null}function getMapData(nt,rt){var it=nt.__data__;return isKeyable(rt)?it[typeof rt=="string"?"string":"hash"]:it.map}function mapCacheDelete(nt){var rt=getMapData(this,nt).delete(nt);return this.size-=rt?1:0,rt}function mapCacheGet(nt){return getMapData(this,nt).get(nt)}function mapCacheHas(nt){return getMapData(this,nt).has(nt)}function mapCacheSet(nt,rt){var it=getMapData(this,nt),vt=it.size;return it.set(nt,rt),this.size+=it.size==vt?0:1,this}function MapCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var vt=nt[rt];this.set(vt[0],vt[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(nt,rt){if(typeof nt!="function"||rt!=null&&typeof rt!="function")throw new TypeError(FUNC_ERROR_TEXT);var it=function(){var vt=arguments,bt=rt?rt.apply(this,vt):vt[0],wt=it.cache;if(wt.has(bt))return wt.get(bt);var Tt=nt.apply(this,vt);return it.cache=wt.set(bt,Tt)||wt,Tt};return it.cache=new(memoize.Cache||MapCache),it}memoize.Cache=MapCache;var COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode;function trim(nt){return nt.trim()}function replace(nt,rt,it){return nt.replace(rt,it)}function indexof(nt,rt){return nt.indexOf(rt)}function charat(nt,rt){return nt.charCodeAt(rt)|0}function substr(nt,rt,it){return nt.slice(rt,it)}function strlen(nt){return nt.length}function sizeof(nt){return nt.length}function append(nt,rt){return rt.push(nt),nt}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(nt,rt,it,vt,bt,wt,Tt){return{value:nt,root:rt,parent:it,type:vt,props:bt,children:wt,line,column,length:Tt,return:""}}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(nt,rt){return substr(characters,nt,rt)}function token(nt){switch(nt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(nt){return line=column=1,length=strlen(characters=nt),position$1=0,[]}function dealloc(nt){return characters="",nt}function delimit(nt){return trim(slice(position$1-1,delimiter(nt===91?nt+2:nt===40?nt+1:nt)))}function whitespace(nt){for(;(character=peek())&&character<33;)next();return token(nt)>2||token(character)>3?"":" "}function escaping(nt,rt){for(;--rt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(nt,caret()+(rt<6&&peek()==32&&next()==32))}function delimiter(nt){for(;next();)switch(character){case nt:return position$1;case 34:case 39:nt!==34&&nt!==39&&delimiter(character);break;case 40:nt===41&&delimiter(nt);break;case 92:next();break}return position$1}function commenter(nt,rt){for(;next()&&nt+character!==47+10;)if(nt+character===42+42&&peek()===47)break;return"/*"+slice(rt,position$1-1)+"*"+from(nt===47?nt:next())}function identifier(nt){for(;!token(peek());)next();return slice(nt,position$1)}function compile(nt){return dealloc(parse$2("",null,null,null,[""],nt=alloc(nt),0,[0],nt))}function parse$2(nt,rt,it,vt,bt,wt,Tt,kt,Lt){for(var Mt=0,Nt=0,zt=Tt,Ht=0,Wt=0,Zt=0,tn=1,Yt=1,nn=1,rn=0,ln="",sn=bt,mn=wt,wn=vt,Cn=ln;Yt;)switch(Zt=rn,rn=next()){case 40:if(Zt!=108&&charat(Cn,zt-1)==58){indexof(Cn+=replace(delimit(rn),"&","&\f"),"&\f")!=-1&&(nn=-1);break}case 34:case 39:case 91:Cn+=delimit(rn);break;case 9:case 10:case 13:case 32:Cn+=whitespace(Zt);break;case 92:Cn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),rt,it),Lt);break;default:Cn+="/"}break;case 123*tn:kt[Mt++]=strlen(Cn)*nn;case 125*tn:case 59:case 0:switch(rn){case 0:case 125:Yt=0;case 59+Nt:Wt>0&&strlen(Cn)-zt&&append(Wt>32?declaration(Cn+";",vt,it,zt-1):declaration(replace(Cn," ","")+";",vt,it,zt-2),Lt);break;case 59:Cn+=";";default:if(append(wn=ruleset(Cn,rt,it,Mt,Nt,bt,kt,ln,sn=[],mn=[],zt),wt),rn===123)if(Nt===0)parse$2(Cn,rt,wn,wn,sn,wt,zt,kt,mn);else switch(Ht===99&&charat(Cn,3)===110?100:Ht){case 100:case 109:case 115:parse$2(nt,wn,wn,vt&&append(ruleset(nt,wn,wn,0,0,bt,kt,ln,bt,sn=[],zt),mn),bt,mn,zt,kt,vt?sn:mn);break;default:parse$2(Cn,wn,wn,wn,[""],mn,0,kt,mn)}}Mt=Nt=Wt=0,tn=nn=1,ln=Cn="",zt=Tt;break;case 58:zt=1+strlen(Cn),Wt=Zt;default:if(tn<1){if(rn==123)--tn;else if(rn==125&&tn++==0&&prev()==125)continue}switch(Cn+=from(rn),rn*tn){case 38:nn=Nt>0?1:(Cn+="\f",-1);break;case 44:kt[Mt++]=(strlen(Cn)-1)*nn,nn=1;break;case 64:peek()===45&&(Cn+=delimit(next())),Ht=peek(),Nt=zt=strlen(ln=Cn+=identifier(caret())),rn++;break;case 45:Zt===45&&strlen(Cn)==2&&(tn=0)}}return wt}function ruleset(nt,rt,it,vt,bt,wt,Tt,kt,Lt,Mt,Nt){for(var zt=bt-1,Ht=bt===0?wt:[""],Wt=sizeof(Ht),Zt=0,tn=0,Yt=0;Zt<vt;++Zt)for(var nn=0,rn=substr(nt,zt+1,zt=abs(tn=Tt[Zt])),ln=nt;nn<Wt;++nn)(ln=trim(tn>0?Ht[nn]+" "+rn:replace(rn,/&\f/g,Ht[nn])))&&(Lt[Yt++]=ln);return node(nt,rt,it,bt===0?RULESET:kt,Lt,Mt,Nt)}function comment(nt,rt,it){return node(nt,rt,it,COMMENT,from(char()),substr(nt,2,-2),0)}function declaration(nt,rt,it,vt){return node(nt,rt,it,DECLARATION,substr(nt,0,vt),substr(nt,vt+1,-1),vt)}function serialize(nt,rt){for(var it="",vt=sizeof(nt),bt=0;bt<vt;bt++)it+=rt(nt[bt],bt,nt,rt)||"";return it}function stringify(nt,rt,it,vt){switch(nt.type){case IMPORT:case DECLARATION:return nt.return=nt.return||nt.value;case COMMENT:return"";case KEYFRAMES:return nt.return=nt.value+"{"+serialize(nt.children,vt)+"}";case RULESET:nt.value=nt.props.join(",")}return strlen(it=serialize(nt.children,vt))?nt.return=nt.value+"{"+it+"}":""}function isObjectLike(nt){return nt!=null&&typeof nt=="object"}var symbolTag$3="[object Symbol]";function isSymbol(nt){return typeof nt=="symbol"||isObjectLike(nt)&&baseGetTag(nt)==symbolTag$3}function arrayMap(nt,rt){for(var it=-1,vt=nt==null?0:nt.length,bt=Array(vt);++it<vt;)bt[it]=rt(nt[it],it,nt);return bt}var isArray=Array.isArray;const isArray$1=isArray;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(nt){if(typeof nt=="string")return nt;if(isArray$1(nt))return arrayMap(nt,baseToString)+"";if(isSymbol(nt))return symbolToString?symbolToString.call(nt):"";var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$3?"-0":rt}var reWhitespace=/\s/;function trimmedEndIndex(nt){for(var rt=nt.length;rt--&&reWhitespace.test(nt.charAt(rt)););return rt}var reTrimStart=/^\s+/;function baseTrim(nt){return nt&&nt.slice(0,trimmedEndIndex(nt)+1).replace(reTrimStart,"")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(nt){if(typeof nt=="number")return nt;if(isSymbol(nt))return NAN;if(isObject$1(nt)){var rt=typeof nt.valueOf=="function"?nt.valueOf():nt;nt=isObject$1(rt)?rt+"":rt}if(typeof nt!="string")return nt===0?nt:+nt;nt=baseTrim(nt);var it=reIsBinary.test(nt);return it||reIsOctal.test(nt)?freeParseInt(nt.slice(2),it?2:8):reIsBadHex.test(nt)?NAN:+nt}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(nt){if(!nt)return nt===0?nt:0;if(nt=toNumber(nt),nt===INFINITY$2||nt===-INFINITY$2){var rt=nt<0?-1:1;return rt*MAX_INTEGER}return nt===nt?nt:0}function toInteger(nt){var rt=toFinite(nt),it=rt%1;return rt===rt?it?rt-it:rt:0}function identity(nt){return nt}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function nt(){}return function(rt){if(!isObject$1(rt))return{};if(objectCreate)return objectCreate(rt);nt.prototype=rt;var it=new nt;return nt.prototype=void 0,it}}();const baseCreate$1=baseCreate;function apply$1(nt,rt,it){switch(it.length){case 0:return nt.call(rt);case 1:return nt.call(rt,it[0]);case 2:return nt.call(rt,it[0],it[1]);case 3:return nt.call(rt,it[0],it[1],it[2])}return nt.apply(rt,it)}function noop(){}function copyArray(nt,rt){var it=-1,vt=nt.length;for(rt||(rt=Array(vt));++it<vt;)rt[it]=nt[it];return rt}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(nt){var rt=0,it=0;return function(){var vt=nativeNow(),bt=HOT_SPAN-(vt-it);if(it=vt,bt>0){if(++rt>=HOT_COUNT)return arguments[0]}else rt=0;return nt.apply(void 0,arguments)}}function constant(nt){return function(){return nt}}var defineProperty=function(){try{var nt=getNative(Object,"defineProperty");return nt({},"",{}),nt}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(nt,rt){return defineProperty$1(nt,"toString",{configurable:!0,enumerable:!1,value:constant(rt),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(nt,rt){for(var it=-1,vt=nt==null?0:nt.length;++it<vt&&rt(nt[it],it,nt)!==!1;);return nt}function baseFindIndex(nt,rt,it,vt){for(var bt=nt.length,wt=it+(vt?1:-1);vt?wt--:++wt<bt;)if(rt(nt[wt],wt,nt))return wt;return-1}function baseIsNaN(nt){return nt!==nt}function strictIndexOf(nt,rt,it){for(var vt=it-1,bt=nt.length;++vt<bt;)if(nt[vt]===rt)return vt;return-1}function baseIndexOf(nt,rt,it){return rt===rt?strictIndexOf(nt,rt,it):baseFindIndex(nt,baseIsNaN,it)}function arrayIncludes(nt,rt){var it=nt==null?0:nt.length;return!!it&&baseIndexOf(nt,rt,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(nt,rt){var it=typeof nt;return rt=rt==null?MAX_SAFE_INTEGER$1:rt,!!rt&&(it=="number"||it!="symbol"&&reIsUint.test(nt))&&nt>-1&&nt%1==0&&nt<rt}function baseAssignValue(nt,rt,it){rt=="__proto__"&&defineProperty$1?defineProperty$1(nt,rt,{configurable:!0,enumerable:!0,value:it,writable:!0}):nt[rt]=it}var objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function assignValue(nt,rt,it){var vt=nt[rt];(!(hasOwnProperty$b.call(nt,rt)&&eq(vt,it))||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function copyObject(nt,rt,it,vt){var bt=!it;it||(it={});for(var wt=-1,Tt=rt.length;++wt<Tt;){var kt=rt[wt],Lt=vt?vt(it[kt],nt[kt],kt,it,nt):void 0;Lt===void 0&&(Lt=nt[kt]),bt?baseAssignValue(it,kt,Lt):assignValue(it,kt,Lt)}return it}var nativeMax$2=Math.max;function overRest(nt,rt,it){return rt=nativeMax$2(rt===void 0?nt.length-1:rt,0),function(){for(var vt=arguments,bt=-1,wt=nativeMax$2(vt.length-rt,0),Tt=Array(wt);++bt<wt;)Tt[bt]=vt[rt+bt];bt=-1;for(var kt=Array(rt+1);++bt<rt;)kt[bt]=vt[bt];return kt[rt]=it(Tt),apply$1(nt,this,kt)}}function baseRest(nt,rt){return setToString$1(overRest(nt,rt,identity),nt+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=MAX_SAFE_INTEGER}function isArrayLike(nt){return nt!=null&&isLength(nt.length)&&!isFunction(nt)}function isIterateeCall(nt,rt,it){if(!isObject$1(it))return!1;var vt=typeof rt;return(vt=="number"?isArrayLike(it)&&isIndex(rt,it.length):vt=="string"&&rt in it)?eq(it[rt],nt):!1}function createAssigner(nt){return baseRest(function(rt,it){var vt=-1,bt=it.length,wt=bt>1?it[bt-1]:void 0,Tt=bt>2?it[2]:void 0;for(wt=nt.length>3&&typeof wt=="function"?(bt--,wt):void 0,Tt&&isIterateeCall(it[0],it[1],Tt)&&(wt=bt<3?void 0:wt,bt=1),rt=Object(rt);++vt<bt;){var kt=it[vt];kt&&nt(rt,kt,vt,wt)}return rt})}var objectProto$c=Object.prototype;function isPrototype(nt){var rt=nt&&nt.constructor,it=typeof rt=="function"&&rt.prototype||objectProto$c;return nt===it}function baseTimes(nt,rt){for(var it=-1,vt=Array(nt);++it<nt;)vt[it]=rt(it);return vt}var argsTag$3="[object Arguments]";function baseIsArguments(nt){return isObjectLike(nt)&&baseGetTag(nt)==argsTag$3}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(nt){return isObjectLike(nt)&&hasOwnProperty$a.call(nt,"callee")&&!propertyIsEnumerable$1.call(nt,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(nt){return isObjectLike(nt)&&isLength(nt.length)&&!!typedArrayTags[baseGetTag(nt)]}function baseUnary(nt){return function(rt){return nt(rt)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var nt=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return nt||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function arrayLikeKeys(nt,rt){var it=isArray$1(nt),vt=!it&&isArguments$1(nt),bt=!it&&!vt&&isBuffer$1(nt),wt=!it&&!vt&&!bt&&isTypedArray$1(nt),Tt=it||vt||bt||wt,kt=Tt?baseTimes(nt.length,String):[],Lt=kt.length;for(var Mt in nt)(rt||hasOwnProperty$9.call(nt,Mt))&&!(Tt&&(Mt=="length"||bt&&(Mt=="offset"||Mt=="parent")||wt&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||isIndex(Mt,Lt)))&&kt.push(Mt);return kt}function overArg(nt,rt){return function(it){return nt(rt(it))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function baseKeys(nt){if(!isPrototype(nt))return nativeKeys$1(nt);var rt=[];for(var it in Object(nt))hasOwnProperty$8.call(nt,it)&&it!="constructor"&&rt.push(it);return rt}function keys(nt){return isArrayLike(nt)?arrayLikeKeys(nt):baseKeys(nt)}function nativeKeysIn(nt){var rt=[];if(nt!=null)for(var it in Object(nt))rt.push(it);return rt}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeysIn(nt){if(!isObject$1(nt))return nativeKeysIn(nt);var rt=isPrototype(nt),it=[];for(var vt in nt)vt=="constructor"&&(rt||!hasOwnProperty$7.call(nt,vt))||it.push(vt);return it}function keysIn(nt){return isArrayLike(nt)?arrayLikeKeys(nt,!0):baseKeysIn(nt)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(nt,rt){if(isArray$1(nt))return!1;var it=typeof nt;return it=="number"||it=="symbol"||it=="boolean"||nt==null||isSymbol(nt)?!0:reIsPlainProp.test(nt)||!reIsDeepProp.test(nt)||rt!=null&&nt in Object(rt)}var MAX_MEMOIZE_SIZE=500;function memoizeCapped(nt){var rt=memoize(nt,function(vt){return it.size===MAX_MEMOIZE_SIZE&&it.clear(),vt}),it=rt.cache;return rt}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(nt){var rt=[];return nt.charCodeAt(0)===46&&rt.push(""),nt.replace(rePropName,function(it,vt,bt,wt){rt.push(bt?wt.replace(reEscapeChar,"$1"):vt||it)}),rt});const stringToPath$1=stringToPath;function toString(nt){return nt==null?"":baseToString(nt)}function castPath(nt,rt){return isArray$1(nt)?nt:isKey(nt,rt)?[nt]:stringToPath$1(toString(nt))}var INFINITY$1=1/0;function toKey(nt){if(typeof nt=="string"||isSymbol(nt))return nt;var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$1?"-0":rt}function baseGet(nt,rt){rt=castPath(rt,nt);for(var it=0,vt=rt.length;nt!=null&&it<vt;)nt=nt[toKey(rt[it++])];return it&&it==vt?nt:void 0}function get(nt,rt,it){var vt=nt==null?void 0:baseGet(nt,rt);return vt===void 0?it:vt}function arrayPush(nt,rt){for(var it=-1,vt=rt.length,bt=nt.length;++it<vt;)nt[bt+it]=rt[it];return nt}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(nt){return isArray$1(nt)||isArguments$1(nt)||!!(spreadableSymbol&&nt&&nt[spreadableSymbol])}function baseFlatten(nt,rt,it,vt,bt){var wt=-1,Tt=nt.length;for(it||(it=isFlattenable),bt||(bt=[]);++wt<Tt;){var kt=nt[wt];rt>0&&it(kt)?rt>1?baseFlatten(kt,rt-1,it,vt,bt):arrayPush(bt,kt):vt||(bt[bt.length]=kt)}return bt}function flatten(nt){var rt=nt==null?0:nt.length;return rt?baseFlatten(nt,1):[]}function flatRest(nt){return setToString$1(overRest(nt,void 0,flatten),nt+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(nt){if(!isObjectLike(nt)||baseGetTag(nt)!=objectTag$3)return!1;var rt=getPrototype$1(nt);if(rt===null)return!0;var it=hasOwnProperty$6.call(rt,"constructor")&&rt.constructor;return typeof it=="function"&&it instanceof it&&funcToString.call(it)==objectCtorString}function arrayReduce(nt,rt,it,vt){var bt=-1,wt=nt==null?0:nt.length;for(vt&&wt&&(it=nt[++bt]);++bt<wt;)it=rt(it,nt[bt],bt,nt);return it}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(nt){var rt=this.__data__,it=rt.delete(nt);return this.size=rt.size,it}function stackGet(nt){return this.__data__.get(nt)}function stackHas(nt){return this.__data__.has(nt)}var LARGE_ARRAY_SIZE$1=200;function stackSet(nt,rt){var it=this.__data__;if(it instanceof ListCache){var vt=it.__data__;if(!Map$2||vt.length<LARGE_ARRAY_SIZE$1-1)return vt.push([nt,rt]),this.size=++it.size,this;it=this.__data__=new MapCache(vt)}return it.set(nt,rt),this.size=it.size,this}function Stack(nt){var rt=this.__data__=new ListCache(nt);this.size=rt.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(nt,rt){return nt&&copyObject(rt,keys(rt),nt)}function baseAssignIn(nt,rt){return nt&&copyObject(rt,keysIn(rt),nt)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(nt,rt){if(rt)return nt.slice();var it=nt.length,vt=allocUnsafe?allocUnsafe(it):new nt.constructor(it);return nt.copy(vt),vt}function arrayFilter(nt,rt){for(var it=-1,vt=nt==null?0:nt.length,bt=0,wt=[];++it<vt;){var Tt=nt[it];rt(Tt,it,nt)&&(wt[bt++]=Tt)}return wt}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(nt){return nt==null?[]:(nt=Object(nt),arrayFilter(nativeGetSymbols$1(nt),function(rt){return propertyIsEnumerable.call(nt,rt)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(nt,rt){return copyObject(nt,getSymbols$1(nt),rt)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(nt){for(var rt=[];nt;)arrayPush(rt,getSymbols$1(nt)),nt=getPrototype$1(nt);return rt}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(nt,rt){return copyObject(nt,getSymbolsIn$1(nt),rt)}function baseGetAllKeys(nt,rt,it){var vt=rt(nt);return isArray$1(nt)?vt:arrayPush(vt,it(nt))}function getAllKeys(nt){return baseGetAllKeys(nt,keys,getSymbols$1)}function getAllKeysIn(nt){return baseGetAllKeys(nt,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(nt){var rt=baseGetTag(nt),it=rt==objectTag$2?nt.constructor:void 0,vt=it?toSource(it):"";if(vt)switch(vt){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return rt});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function initCloneArray(nt){var rt=nt.length,it=new nt.constructor(rt);return rt&&typeof nt[0]=="string"&&hasOwnProperty$5.call(nt,"index")&&(it.index=nt.index,it.input=nt.input),it}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(nt){var rt=new nt.constructor(nt.byteLength);return new Uint8Array$2(rt).set(new Uint8Array$2(nt)),rt}function cloneDataView(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.byteLength)}var reFlags=/\w*$/;function cloneRegExp(nt){var rt=new nt.constructor(nt.source,reFlags.exec(nt));return rt.lastIndex=nt.lastIndex,rt}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(nt){return symbolValueOf$1?Object(symbolValueOf$1.call(nt)):{}}function cloneTypedArray(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(nt,rt,it){var vt=nt.constructor;switch(rt){case arrayBufferTag$2:return cloneArrayBuffer(nt);case boolTag$2:case dateTag$2:return new vt(+nt);case dataViewTag$2:return cloneDataView(nt,it);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(nt,it);case mapTag$4:return new vt;case numberTag$2:case stringTag$2:return new vt(nt);case regexpTag$2:return cloneRegExp(nt);case setTag$4:return new vt;case symbolTag$2:return cloneSymbol(nt)}}function initCloneObject(nt){return typeof nt.constructor=="function"&&!isPrototype(nt)?baseCreate$1(getPrototype$1(nt)):{}}var mapTag$3="[object Map]";function baseIsMap(nt){return isObjectLike(nt)&&getTag$1(nt)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(nt){return isObjectLike(nt)&&getTag$1(nt)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(nt,rt,it,vt,bt,wt){var Tt,kt=rt&CLONE_DEEP_FLAG$1,Lt=rt&CLONE_FLAT_FLAG,Mt=rt&CLONE_SYMBOLS_FLAG$2;if(it&&(Tt=bt?it(nt,vt,bt,wt):it(nt)),Tt!==void 0)return Tt;if(!isObject$1(nt))return nt;var Nt=isArray$1(nt);if(Nt){if(Tt=initCloneArray(nt),!kt)return copyArray(nt,Tt)}else{var zt=getTag$1(nt),Ht=zt==funcTag||zt==genTag;if(isBuffer$1(nt))return cloneBuffer(nt,kt);if(zt==objectTag$1||zt==argsTag$1||Ht&&!bt){if(Tt=Lt||Ht?{}:initCloneObject(nt),!kt)return Lt?copySymbolsIn(nt,baseAssignIn(Tt,nt)):copySymbols(nt,baseAssign(Tt,nt))}else{if(!cloneableTags[zt])return bt?nt:{};Tt=initCloneByTag(nt,zt,kt)}}wt||(wt=new Stack);var Wt=wt.get(nt);if(Wt)return Wt;wt.set(nt,Tt),isSet$1(nt)?nt.forEach(function(Yt){Tt.add(baseClone(Yt,rt,it,Yt,nt,wt))}):isMap$1(nt)&&nt.forEach(function(Yt,nn){Tt.set(nn,baseClone(Yt,rt,it,nn,nt,wt))});var Zt=Mt?Lt?getAllKeysIn:getAllKeys:Lt?keysIn:keys,tn=Nt?void 0:Zt(nt);return arrayEach(tn||nt,function(Yt,nn){tn&&(nn=Yt,Yt=nt[nn]),assignValue(Tt,nn,baseClone(Yt,rt,it,nn,nt,wt))}),Tt}var CLONE_SYMBOLS_FLAG$1=4;function clone$1(nt){return baseClone(nt,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(nt){return baseClone(nt,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(nt){return this.__data__.set(nt,HASH_UNDEFINED),this}function setCacheHas(nt){return this.__data__.has(nt)}function SetCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.__data__=new MapCache;++rt<it;)this.add(nt[rt])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(nt,rt){for(var it=-1,vt=nt==null?0:nt.length;++it<vt;)if(rt(nt[it],it,nt))return!0;return!1}function cacheHas(nt,rt){return nt.has(rt)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(nt,rt,it,vt,bt,wt){var Tt=it&COMPARE_PARTIAL_FLAG$5,kt=nt.length,Lt=rt.length;if(kt!=Lt&&!(Tt&&Lt>kt))return!1;var Mt=wt.get(nt),Nt=wt.get(rt);if(Mt&&Nt)return Mt==rt&&Nt==nt;var zt=-1,Ht=!0,Wt=it&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(wt.set(nt,rt),wt.set(rt,nt);++zt<kt;){var Zt=nt[zt],tn=rt[zt];if(vt)var Yt=Tt?vt(tn,Zt,zt,rt,nt,wt):vt(Zt,tn,zt,nt,rt,wt);if(Yt!==void 0){if(Yt)continue;Ht=!1;break}if(Wt){if(!arraySome(rt,function(nn,rn){if(!cacheHas(Wt,rn)&&(Zt===nn||bt(Zt,nn,it,vt,wt)))return Wt.push(rn)})){Ht=!1;break}}else if(!(Zt===tn||bt(Zt,tn,it,vt,wt))){Ht=!1;break}}return wt.delete(nt),wt.delete(rt),Ht}function mapToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(vt,bt){it[++rt]=[bt,vt]}),it}function setToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(vt){it[++rt]=vt}),it}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(nt,rt,it,vt,bt,wt,Tt){switch(it){case dataViewTag:if(nt.byteLength!=rt.byteLength||nt.byteOffset!=rt.byteOffset)return!1;nt=nt.buffer,rt=rt.buffer;case arrayBufferTag:return!(nt.byteLength!=rt.byteLength||!wt(new Uint8Array$2(nt),new Uint8Array$2(rt)));case boolTag:case dateTag:case numberTag:return eq(+nt,+rt);case errorTag:return nt.name==rt.name&&nt.message==rt.message;case regexpTag:case stringTag:return nt==rt+"";case mapTag$1:var kt=mapToArray;case setTag$1:var Lt=vt&COMPARE_PARTIAL_FLAG$4;if(kt||(kt=setToArray),nt.size!=rt.size&&!Lt)return!1;var Mt=Tt.get(nt);if(Mt)return Mt==rt;vt|=COMPARE_UNORDERED_FLAG$2,Tt.set(nt,rt);var Nt=equalArrays(kt(nt),kt(rt),vt,bt,wt,Tt);return Tt.delete(nt),Nt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(nt)==symbolValueOf.call(rt)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects(nt,rt,it,vt,bt,wt){var Tt=it&COMPARE_PARTIAL_FLAG$3,kt=getAllKeys(nt),Lt=kt.length,Mt=getAllKeys(rt),Nt=Mt.length;if(Lt!=Nt&&!Tt)return!1;for(var zt=Lt;zt--;){var Ht=kt[zt];if(!(Tt?Ht in rt:hasOwnProperty$4.call(rt,Ht)))return!1}var Wt=wt.get(nt),Zt=wt.get(rt);if(Wt&&Zt)return Wt==rt&&Zt==nt;var tn=!0;wt.set(nt,rt),wt.set(rt,nt);for(var Yt=Tt;++zt<Lt;){Ht=kt[zt];var nn=nt[Ht],rn=rt[Ht];if(vt)var ln=Tt?vt(rn,nn,Ht,rt,nt,wt):vt(nn,rn,Ht,nt,rt,wt);if(!(ln===void 0?nn===rn||bt(nn,rn,it,vt,wt):ln)){tn=!1;break}Yt||(Yt=Ht=="constructor")}if(tn&&!Yt){var sn=nt.constructor,mn=rt.constructor;sn!=mn&&"constructor"in nt&&"constructor"in rt&&!(typeof sn=="function"&&sn instanceof sn&&typeof mn=="function"&&mn instanceof mn)&&(tn=!1)}return wt.delete(nt),wt.delete(rt),tn}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep(nt,rt,it,vt,bt,wt){var Tt=isArray$1(nt),kt=isArray$1(rt),Lt=Tt?arrayTag:getTag$1(nt),Mt=kt?arrayTag:getTag$1(rt);Lt=Lt==argsTag?objectTag:Lt,Mt=Mt==argsTag?objectTag:Mt;var Nt=Lt==objectTag,zt=Mt==objectTag,Ht=Lt==Mt;if(Ht&&isBuffer$1(nt)){if(!isBuffer$1(rt))return!1;Tt=!0,Nt=!1}if(Ht&&!Nt)return wt||(wt=new Stack),Tt||isTypedArray$1(nt)?equalArrays(nt,rt,it,vt,bt,wt):equalByTag(nt,rt,Lt,it,vt,bt,wt);if(!(it&COMPARE_PARTIAL_FLAG$2)){var Wt=Nt&&hasOwnProperty$3.call(nt,"__wrapped__"),Zt=zt&&hasOwnProperty$3.call(rt,"__wrapped__");if(Wt||Zt){var tn=Wt?nt.value():nt,Yt=Zt?rt.value():rt;return wt||(wt=new Stack),bt(tn,Yt,it,vt,wt)}}return Ht?(wt||(wt=new Stack),equalObjects(nt,rt,it,vt,bt,wt)):!1}function baseIsEqual(nt,rt,it,vt,bt){return nt===rt?!0:nt==null||rt==null||!isObjectLike(nt)&&!isObjectLike(rt)?nt!==nt&&rt!==rt:baseIsEqualDeep(nt,rt,it,vt,baseIsEqual,bt)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(nt,rt,it,vt){var bt=it.length,wt=bt,Tt=!vt;if(nt==null)return!wt;for(nt=Object(nt);bt--;){var kt=it[bt];if(Tt&&kt[2]?kt[1]!==nt[kt[0]]:!(kt[0]in nt))return!1}for(;++bt<wt;){kt=it[bt];var Lt=kt[0],Mt=nt[Lt],Nt=kt[1];if(Tt&&kt[2]){if(Mt===void 0&&!(Lt in nt))return!1}else{var zt=new Stack;if(vt)var Ht=vt(Mt,Nt,Lt,nt,rt,zt);if(!(Ht===void 0?baseIsEqual(Nt,Mt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,vt,zt):Ht))return!1}}return!0}function isStrictComparable(nt){return nt===nt&&!isObject$1(nt)}function getMatchData(nt){for(var rt=keys(nt),it=rt.length;it--;){var vt=rt[it],bt=nt[vt];rt[it]=[vt,bt,isStrictComparable(bt)]}return rt}function matchesStrictComparable(nt,rt){return function(it){return it==null?!1:it[nt]===rt&&(rt!==void 0||nt in Object(it))}}function baseMatches(nt){var rt=getMatchData(nt);return rt.length==1&&rt[0][2]?matchesStrictComparable(rt[0][0],rt[0][1]):function(it){return it===nt||baseIsMatch(it,nt,rt)}}function baseHasIn(nt,rt){return nt!=null&&rt in Object(nt)}function hasPath(nt,rt,it){rt=castPath(rt,nt);for(var vt=-1,bt=rt.length,wt=!1;++vt<bt;){var Tt=toKey(rt[vt]);if(!(wt=nt!=null&&it(nt,Tt)))break;nt=nt[Tt]}return wt||++vt!=bt?wt:(bt=nt==null?0:nt.length,!!bt&&isLength(bt)&&isIndex(Tt,bt)&&(isArray$1(nt)||isArguments$1(nt)))}function hasIn(nt,rt){return nt!=null&&hasPath(nt,rt,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(nt,rt){return isKey(nt)&&isStrictComparable(rt)?matchesStrictComparable(toKey(nt),rt):function(it){var vt=get(it,nt);return vt===void 0&&vt===rt?hasIn(it,nt):baseIsEqual(rt,vt,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(nt){return function(rt){return rt==null?void 0:rt[nt]}}function basePropertyDeep(nt){return function(rt){return baseGet(rt,nt)}}function property(nt){return isKey(nt)?baseProperty(toKey(nt)):basePropertyDeep(nt)}function baseIteratee(nt){return typeof nt=="function"?nt:nt==null?identity:typeof nt=="object"?isArray$1(nt)?baseMatchesProperty(nt[0],nt[1]):baseMatches(nt):property(nt)}function createBaseFor(nt){return function(rt,it,vt){for(var bt=-1,wt=Object(rt),Tt=vt(rt),kt=Tt.length;kt--;){var Lt=Tt[nt?kt:++bt];if(it(wt[Lt],Lt,wt)===!1)break}return rt}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(nt,rt){return nt&&baseFor$1(nt,rt,keys)}function createBaseEach(nt,rt){return function(it,vt){if(it==null)return it;if(!isArrayLike(it))return nt(it,vt);for(var bt=it.length,wt=rt?bt:-1,Tt=Object(it);(rt?wt--:++wt<bt)&&vt(Tt[wt],wt,Tt)!==!1;);return it}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest(function(nt,rt){nt=Object(nt);var it=-1,vt=rt.length,bt=vt>2?rt[2]:void 0;for(bt&&isIterateeCall(rt[0],rt[1],bt)&&(vt=1);++it<vt;)for(var wt=rt[it],Tt=keysIn(wt),kt=-1,Lt=Tt.length;++kt<Lt;){var Mt=Tt[kt],Nt=nt[Mt];(Nt===void 0||eq(Nt,objectProto$2[Mt])&&!hasOwnProperty$2.call(nt,Mt))&&(nt[Mt]=wt[Mt])}return nt});const defaults$1=defaults;function assignMergeValue(nt,rt,it){(it!==void 0&&!eq(nt[rt],it)||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function isArrayLikeObject(nt){return isObjectLike(nt)&&isArrayLike(nt)}function safeGet(nt,rt){if(!(rt==="constructor"&&typeof nt[rt]=="function")&&rt!="__proto__")return nt[rt]}function toPlainObject(nt){return copyObject(nt,keysIn(nt))}function baseMergeDeep(nt,rt,it,vt,bt,wt,Tt){var kt=safeGet(nt,it),Lt=safeGet(rt,it),Mt=Tt.get(Lt);if(Mt){assignMergeValue(nt,it,Mt);return}var Nt=wt?wt(kt,Lt,it+"",nt,rt,Tt):void 0,zt=Nt===void 0;if(zt){var Ht=isArray$1(Lt),Wt=!Ht&&isBuffer$1(Lt),Zt=!Ht&&!Wt&&isTypedArray$1(Lt);Nt=Lt,Ht||Wt||Zt?isArray$1(kt)?Nt=kt:isArrayLikeObject(kt)?Nt=copyArray(kt):Wt?(zt=!1,Nt=cloneBuffer(Lt,!0)):Zt?(zt=!1,Nt=cloneTypedArray(Lt,!0)):Nt=[]:isPlainObject(Lt)||isArguments$1(Lt)?(Nt=kt,isArguments$1(kt)?Nt=toPlainObject(kt):(!isObject$1(kt)||isFunction(kt))&&(Nt=initCloneObject(Lt))):zt=!1}zt&&(Tt.set(Lt,Nt),bt(Nt,Lt,vt,wt,Tt),Tt.delete(Lt)),assignMergeValue(nt,it,Nt)}function baseMerge(nt,rt,it,vt,bt){nt!==rt&&baseFor$1(rt,function(wt,Tt){if(bt||(bt=new Stack),isObject$1(wt))baseMergeDeep(nt,rt,Tt,it,baseMerge,vt,bt);else{var kt=vt?vt(safeGet(nt,Tt),wt,Tt+"",nt,rt,bt):void 0;kt===void 0&&(kt=wt),assignMergeValue(nt,Tt,kt)}},keysIn)}function arrayIncludesWith(nt,rt,it){for(var vt=-1,bt=nt==null?0:nt.length;++vt<bt;)if(it(rt,nt[vt]))return!0;return!1}function last(nt){var rt=nt==null?0:nt.length;return rt?nt[rt-1]:void 0}function castFunction(nt){return typeof nt=="function"?nt:identity}function forEach(nt,rt){var it=isArray$1(nt)?arrayEach:baseEach$1;return it(nt,castFunction(rt))}function baseFilter(nt,rt){var it=[];return baseEach$1(nt,function(vt,bt,wt){rt(vt,bt,wt)&&it.push(vt)}),it}function filter(nt,rt){var it=isArray$1(nt)?arrayFilter:baseFilter;return it(nt,baseIteratee(rt))}function createFind(nt){return function(rt,it,vt){var bt=Object(rt);if(!isArrayLike(rt)){var wt=baseIteratee(it);rt=keys(rt),it=function(kt){return wt(bt[kt],kt,bt)}}var Tt=nt(rt,it,vt);return Tt>-1?bt[wt?rt[Tt]:Tt]:void 0}}var nativeMax$1=Math.max;function findIndex(nt,rt,it){var vt=nt==null?0:nt.length;if(!vt)return-1;var bt=it==null?0:toInteger(it);return bt<0&&(bt=nativeMax$1(vt+bt,0)),baseFindIndex(nt,baseIteratee(rt),bt)}var find=createFind(findIndex);const find$1=find;function baseMap(nt,rt){var it=-1,vt=isArrayLike(nt)?Array(nt.length):[];return baseEach$1(nt,function(bt,wt,Tt){vt[++it]=rt(bt,wt,Tt)}),vt}function map$1(nt,rt){var it=isArray$1(nt)?arrayMap:baseMap;return it(nt,baseIteratee(rt))}function forIn(nt,rt){return nt==null?nt:baseFor$1(nt,castFunction(rt),keysIn)}function baseGt(nt,rt){return nt>rt}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas(nt,rt){return nt!=null&&hasOwnProperty$1.call(nt,rt)}function has(nt,rt){return nt!=null&&hasPath(nt,rt,baseHas)}function baseValues(nt,rt){return arrayMap(rt,function(it){return nt[it]})}function values(nt){return nt==null?[]:baseValues(nt,keys(nt))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(nt){if(nt==null)return!0;if(isArrayLike(nt)&&(isArray$1(nt)||typeof nt=="string"||typeof nt.splice=="function"||isBuffer$1(nt)||isTypedArray$1(nt)||isArguments$1(nt)))return!nt.length;var rt=getTag$1(nt);if(rt==mapTag||rt==setTag)return!nt.size;if(isPrototype(nt))return!baseKeys(nt).length;for(var it in nt)if(hasOwnProperty.call(nt,it))return!1;return!0}function isUndefined(nt){return nt===void 0}function baseLt(nt,rt){return nt<rt}function mapValues(nt,rt){var it={};return rt=baseIteratee(rt),baseForOwn(nt,function(vt,bt,wt){baseAssignValue(it,bt,rt(vt,bt,wt))}),it}function baseExtremum(nt,rt,it){for(var vt=-1,bt=nt.length;++vt<bt;){var wt=nt[vt],Tt=rt(wt);if(Tt!=null&&(kt===void 0?Tt===Tt&&!isSymbol(Tt):it(Tt,kt)))var kt=Tt,Lt=wt}return Lt}function max(nt){return nt&&nt.length?baseExtremum(nt,identity,baseGt):void 0}var merge$2=createAssigner(function(nt,rt,it){baseMerge(nt,rt,it)});const merge$3=merge$2;function min(nt){return nt&&nt.length?baseExtremum(nt,identity,baseLt):void 0}function minBy(nt,rt){return nt&&nt.length?baseExtremum(nt,baseIteratee(rt),baseLt):void 0}function baseSet(nt,rt,it,vt){if(!isObject$1(nt))return nt;rt=castPath(rt,nt);for(var bt=-1,wt=rt.length,Tt=wt-1,kt=nt;kt!=null&&++bt<wt;){var Lt=toKey(rt[bt]),Mt=it;if(Lt==="__proto__"||Lt==="constructor"||Lt==="prototype")return nt;if(bt!=Tt){var Nt=kt[Lt];Mt=vt?vt(Nt,Lt,kt):void 0,Mt===void 0&&(Mt=isObject$1(Nt)?Nt:isIndex(rt[bt+1])?[]:{})}assignValue(kt,Lt,Mt),kt=kt[Lt]}return nt}function basePickBy(nt,rt,it){for(var vt=-1,bt=rt.length,wt={};++vt<bt;){var Tt=rt[vt],kt=baseGet(nt,Tt);it(kt,Tt)&&baseSet(wt,castPath(Tt,nt),kt)}return wt}function baseSortBy(nt,rt){var it=nt.length;for(nt.sort(rt);it--;)nt[it]=nt[it].value;return nt}function compareAscending(nt,rt){if(nt!==rt){var it=nt!==void 0,vt=nt===null,bt=nt===nt,wt=isSymbol(nt),Tt=rt!==void 0,kt=rt===null,Lt=rt===rt,Mt=isSymbol(rt);if(!kt&&!Mt&&!wt&&nt>rt||wt&&Tt&&Lt&&!kt&&!Mt||vt&&Tt&&Lt||!it&&Lt||!bt)return 1;if(!vt&&!wt&&!Mt&&nt<rt||Mt&&it&&bt&&!vt&&!wt||kt&&it&&bt||!Tt&&bt||!Lt)return-1}return 0}function compareMultiple(nt,rt,it){for(var vt=-1,bt=nt.criteria,wt=rt.criteria,Tt=bt.length,kt=it.length;++vt<Tt;){var Lt=compareAscending(bt[vt],wt[vt]);if(Lt){if(vt>=kt)return Lt;var Mt=it[vt];return Lt*(Mt=="desc"?-1:1)}}return nt.index-rt.index}function baseOrderBy(nt,rt,it){rt.length?rt=arrayMap(rt,function(wt){return isArray$1(wt)?function(Tt){return baseGet(Tt,wt.length===1?wt[0]:wt)}:wt}):rt=[identity];var vt=-1;rt=arrayMap(rt,baseUnary(baseIteratee));var bt=baseMap(nt,function(wt,Tt,kt){var Lt=arrayMap(rt,function(Mt){return Mt(wt)});return{criteria:Lt,index:++vt,value:wt}});return baseSortBy(bt,function(wt,Tt){return compareMultiple(wt,Tt,it)})}function basePick(nt,rt){return basePickBy(nt,rt,function(it,vt){return hasIn(nt,vt)})}var pick=flatRest(function(nt,rt){return nt==null?{}:basePick(nt,rt)});const pick$1=pick;var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(nt,rt,it,vt){for(var bt=-1,wt=nativeMax(nativeCeil((rt-nt)/(it||1)),0),Tt=Array(wt);wt--;)Tt[vt?wt:++bt]=nt,nt+=it;return Tt}function createRange(nt){return function(rt,it,vt){return vt&&typeof vt!="number"&&isIterateeCall(rt,it,vt)&&(it=vt=void 0),rt=toFinite(rt),it===void 0?(it=rt,rt=0):it=toFinite(it),vt=vt===void 0?rt<it?1:-1:toFinite(vt),baseRange(rt,it,vt,nt)}}var range=createRange();const range$1=range;function baseReduce(nt,rt,it,vt,bt){return bt(nt,function(wt,Tt,kt){it=vt?(vt=!1,wt):rt(it,wt,Tt,kt)}),it}function reduce(nt,rt,it){var vt=isArray$1(nt)?arrayReduce:baseReduce,bt=arguments.length<3;return vt(nt,baseIteratee(rt),it,bt,baseEach$1)}var sortBy=baseRest(function(nt,rt){if(nt==null)return[];var it=rt.length;return it>1&&isIterateeCall(nt,rt[0],rt[1])?rt=[]:it>2&&isIterateeCall(rt[0],rt[1],rt[2])&&(rt=[rt[0]]),baseOrderBy(nt,baseFlatten(rt,1),[])});const sortBy$1=sortBy;var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(nt){return new Set$2(nt)}:noop;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(nt,rt,it){var vt=-1,bt=arrayIncludes,wt=nt.length,Tt=!0,kt=[],Lt=kt;if(it)Tt=!1,bt=arrayIncludesWith;else if(wt>=LARGE_ARRAY_SIZE){var Mt=rt?null:createSet$1(nt);if(Mt)return setToArray(Mt);Tt=!1,bt=cacheHas,Lt=new SetCache}else Lt=rt?[]:kt;e:for(;++vt<wt;){var Nt=nt[vt],zt=rt?rt(Nt):Nt;if(Nt=it||Nt!==0?Nt:0,Tt&&zt===zt){for(var Ht=Lt.length;Ht--;)if(Lt[Ht]===zt)continue e;rt&&Lt.push(zt),kt.push(Nt)}else bt(Lt,zt,it)||(Lt!==kt&&Lt.push(zt),kt.push(Nt))}return kt}var union=baseRest(function(nt){return baseUniq(baseFlatten(nt,1,isArrayLikeObject,!0))});const union$1=union;var idCounter=0;function uniqueId(nt){var rt=++idCounter;return toString(nt)+rt}function baseZipObject(nt,rt,it){for(var vt=-1,bt=nt.length,wt=rt.length,Tt={};++vt<bt;){var kt=vt<wt?rt[vt]:void 0;it(Tt,nt[vt],kt)}return Tt}function zipObject(nt,rt){return baseZipObject(nt||[],rt||[],assignValue)}var DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";class Graph{constructor(rt={}){this._isDirected=has(rt,"directed")?rt.directed:!0,this._isMultigraph=has(rt,"multigraph")?rt.multigraph:!1,this._isCompound=has(rt,"compound")?rt.compound:!1,this._label=void 0,this._defaultNodeLabelFn=constant(void 0),this._defaultEdgeLabelFn=constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(rt){return this._label=rt,this}graph(){return this._label}setDefaultNodeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultNodeLabelFn=rt,this}nodeCount(){return this._nodeCount}nodes(){return keys(this._nodes)}sources(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._in[it])})}sinks(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._out[it])})}setNodes(rt,it){var vt=arguments,bt=this;return forEach(rt,function(wt){vt.length>1?bt.setNode(wt,it):bt.setNode(wt)}),this}setNode(rt,it){return has(this._nodes,rt)?(arguments.length>1&&(this._nodes[rt]=it),this):(this._nodes[rt]=arguments.length>1?it:this._defaultNodeLabelFn(rt),this._isCompound&&(this._parent[rt]=GRAPH_NODE,this._children[rt]={},this._children[GRAPH_NODE][rt]=!0),this._in[rt]={},this._preds[rt]={},this._out[rt]={},this._sucs[rt]={},++this._nodeCount,this)}node(rt){return this._nodes[rt]}hasNode(rt){return has(this._nodes,rt)}removeNode(rt){var it=this;if(has(this._nodes,rt)){var vt=function(bt){it.removeEdge(it._edgeObjs[bt])};delete this._nodes[rt],this._isCompound&&(this._removeFromParentsChildList(rt),delete this._parent[rt],forEach(this.children(rt),function(bt){it.setParent(bt)}),delete this._children[rt]),forEach(keys(this._in[rt]),vt),delete this._in[rt],delete this._preds[rt],forEach(keys(this._out[rt]),vt),delete this._out[rt],delete this._sucs[rt],--this._nodeCount}return this}setParent(rt,it){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined(it))it=GRAPH_NODE;else{it+="";for(var vt=it;!isUndefined(vt);vt=this.parent(vt))if(vt===rt)throw new Error("Setting "+it+" as parent of "+rt+" would create a cycle");this.setNode(it)}return this.setNode(rt),this._removeFromParentsChildList(rt),this._parent[rt]=it,this._children[it][rt]=!0,this}_removeFromParentsChildList(rt){delete this._children[this._parent[rt]][rt]}parent(rt){if(this._isCompound){var it=this._parent[rt];if(it!==GRAPH_NODE)return it}}children(rt){if(isUndefined(rt)&&(rt=GRAPH_NODE),this._isCompound){var it=this._children[rt];if(it)return keys(it)}else{if(rt===GRAPH_NODE)return this.nodes();if(this.hasNode(rt))return[]}}predecessors(rt){var it=this._preds[rt];if(it)return keys(it)}successors(rt){var it=this._sucs[rt];if(it)return keys(it)}neighbors(rt){var it=this.predecessors(rt);if(it)return union$1(it,this.successors(rt))}isLeaf(rt){var it;return this.isDirected()?it=this.successors(rt):it=this.neighbors(rt),it.length===0}filterNodes(rt){var it=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});it.setGraph(this.graph());var vt=this;forEach(this._nodes,function(Tt,kt){rt(kt)&&it.setNode(kt,Tt)}),forEach(this._edgeObjs,function(Tt){it.hasNode(Tt.v)&&it.hasNode(Tt.w)&&it.setEdge(Tt,vt.edge(Tt))});var bt={};function wt(Tt){var kt=vt.parent(Tt);return kt===void 0||it.hasNode(kt)?(bt[Tt]=kt,kt):kt in bt?bt[kt]:wt(kt)}return this._isCompound&&forEach(it.nodes(),function(Tt){it.setParent(Tt,wt(Tt))}),it}setDefaultEdgeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultEdgeLabelFn=rt,this}edgeCount(){return this._edgeCount}edges(){return values(this._edgeObjs)}setPath(rt,it){var vt=this,bt=arguments;return reduce(rt,function(wt,Tt){return bt.length>1?vt.setEdge(wt,Tt,it):vt.setEdge(wt,Tt),Tt}),this}setEdge(){var rt,it,vt,bt,wt=!1,Tt=arguments[0];typeof Tt=="object"&&Tt!==null&&"v"in Tt?(rt=Tt.v,it=Tt.w,vt=Tt.name,arguments.length===2&&(bt=arguments[1],wt=!0)):(rt=Tt,it=arguments[1],vt=arguments[3],arguments.length>2&&(bt=arguments[2],wt=!0)),rt=""+rt,it=""+it,isUndefined(vt)||(vt=""+vt);var kt=edgeArgsToId(this._isDirected,rt,it,vt);if(has(this._edgeLabels,kt))return wt&&(this._edgeLabels[kt]=bt),this;if(!isUndefined(vt)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(rt),this.setNode(it),this._edgeLabels[kt]=wt?bt:this._defaultEdgeLabelFn(rt,it,vt);var Lt=edgeArgsToObj(this._isDirected,rt,it,vt);return rt=Lt.v,it=Lt.w,Object.freeze(Lt),this._edgeObjs[kt]=Lt,incrementOrInitEntry(this._preds[it],rt),incrementOrInitEntry(this._sucs[rt],it),this._in[it][kt]=Lt,this._out[rt][kt]=Lt,this._edgeCount++,this}edge(rt,it,vt){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,vt);return this._edgeLabels[bt]}hasEdge(rt,it,vt){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,vt);return has(this._edgeLabels,bt)}removeEdge(rt,it,vt){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,vt),wt=this._edgeObjs[bt];return wt&&(rt=wt.v,it=wt.w,delete this._edgeLabels[bt],delete this._edgeObjs[bt],decrementOrRemoveEntry(this._preds[it],rt),decrementOrRemoveEntry(this._sucs[rt],it),delete this._in[it][bt],delete this._out[rt][bt],this._edgeCount--),this}inEdges(rt,it){var vt=this._in[rt];if(vt){var bt=values(vt);return it?filter(bt,function(wt){return wt.v===it}):bt}}outEdges(rt,it){var vt=this._out[rt];if(vt){var bt=values(vt);return it?filter(bt,function(wt){return wt.w===it}):bt}}nodeEdges(rt,it){var vt=this.inEdges(rt,it);if(vt)return vt.concat(this.outEdges(rt,it))}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;function incrementOrInitEntry(nt,rt){nt[rt]?nt[rt]++:nt[rt]=1}function decrementOrRemoveEntry(nt,rt){--nt[rt]||delete nt[rt]}function edgeArgsToId(nt,rt,it,vt){var bt=""+rt,wt=""+it;if(!nt&&bt>wt){var Tt=bt;bt=wt,wt=Tt}return bt+EDGE_KEY_DELIM+wt+EDGE_KEY_DELIM+(isUndefined(vt)?DEFAULT_EDGE_NAME:vt)}function edgeArgsToObj(nt,rt,it,vt){var bt=""+rt,wt=""+it;if(!nt&&bt>wt){var Tt=bt;bt=wt,wt=Tt}var kt={v:bt,w:wt};return vt&&(kt.name=vt),kt}function edgeObjToId(nt,rt){return edgeArgsToId(nt,rt.v,rt.w,rt.name)}class List{constructor(){var rt={};rt._next=rt._prev=rt,this._sentinel=rt}dequeue(){var rt=this._sentinel,it=rt._prev;if(it!==rt)return unlink(it),it}enqueue(rt){var it=this._sentinel;rt._prev&&rt._next&&unlink(rt),rt._next=it._next,it._next._prev=rt,it._next=rt,rt._prev=it}toString(){for(var rt=[],it=this._sentinel,vt=it._prev;vt!==it;)rt.push(JSON.stringify(vt,filterOutLinks)),vt=vt._prev;return"["+rt.join(", ")+"]"}}function unlink(nt){nt._prev._next=nt._next,nt._next._prev=nt._prev,delete nt._next,delete nt._prev}function filterOutLinks(nt,rt){if(nt!=="_next"&&nt!=="_prev")return rt}var DEFAULT_WEIGHT_FN=constant(1);function greedyFAS(nt,rt){if(nt.nodeCount()<=1)return[];var it=buildState(nt,rt||DEFAULT_WEIGHT_FN),vt=doGreedyFAS(it.graph,it.buckets,it.zeroIdx);return flatten(map$1(vt,function(bt){return nt.outEdges(bt.v,bt.w)}))}function doGreedyFAS(nt,rt,it){for(var vt=[],bt=rt[rt.length-1],wt=rt[0],Tt;nt.nodeCount();){for(;Tt=wt.dequeue();)removeNode(nt,rt,it,Tt);for(;Tt=bt.dequeue();)removeNode(nt,rt,it,Tt);if(nt.nodeCount()){for(var kt=rt.length-2;kt>0;--kt)if(Tt=rt[kt].dequeue(),Tt){vt=vt.concat(removeNode(nt,rt,it,Tt,!0));break}}}return vt}function removeNode(nt,rt,it,vt,bt){var wt=bt?[]:void 0;return forEach(nt.inEdges(vt.v),function(Tt){var kt=nt.edge(Tt),Lt=nt.node(Tt.v);bt&&wt.push({v:Tt.v,w:Tt.w}),Lt.out-=kt,assignBucket(rt,it,Lt)}),forEach(nt.outEdges(vt.v),function(Tt){var kt=nt.edge(Tt),Lt=Tt.w,Mt=nt.node(Lt);Mt.in-=kt,assignBucket(rt,it,Mt)}),nt.removeNode(vt.v),wt}function buildState(nt,rt){var it=new Graph,vt=0,bt=0;forEach(nt.nodes(),function(kt){it.setNode(kt,{v:kt,in:0,out:0})}),forEach(nt.edges(),function(kt){var Lt=it.edge(kt.v,kt.w)||0,Mt=rt(kt),Nt=Lt+Mt;it.setEdge(kt.v,kt.w,Nt),bt=Math.max(bt,it.node(kt.v).out+=Mt),vt=Math.max(vt,it.node(kt.w).in+=Mt)});var wt=range$1(bt+vt+3).map(function(){return new List}),Tt=vt+1;return forEach(it.nodes(),function(kt){assignBucket(wt,Tt,it.node(kt))}),{graph:it,buckets:wt,zeroIdx:Tt}}function assignBucket(nt,rt,it){it.out?it.in?nt[it.out-it.in+rt].enqueue(it):nt[nt.length-1].enqueue(it):nt[0].enqueue(it)}function run$2(nt){var rt=nt.graph().acyclicer==="greedy"?greedyFAS(nt,it(nt)):dfsFAS(nt);forEach(rt,function(vt){var bt=nt.edge(vt);nt.removeEdge(vt),bt.forwardName=vt.name,bt.reversed=!0,nt.setEdge(vt.w,vt.v,bt,uniqueId("rev"))});function it(vt){return function(bt){return vt.edge(bt).weight}}}function dfsFAS(nt){var rt=[],it={},vt={};function bt(wt){has(vt,wt)||(vt[wt]=!0,it[wt]=!0,forEach(nt.outEdges(wt),function(Tt){has(it,Tt.w)?rt.push(Tt):bt(Tt.w)}),delete it[wt])}return forEach(nt.nodes(),bt),rt}function undo$2(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.reversed){nt.removeEdge(rt);var vt=it.forwardName;delete it.reversed,delete it.forwardName,nt.setEdge(rt.w,rt.v,it,vt)}})}function addDummyNode(nt,rt,it,vt){var bt;do bt=uniqueId(vt);while(nt.hasNode(bt));return it.dummy=rt,nt.setNode(bt,it),bt}function simplify(nt){var rt=new Graph().setGraph(nt.graph());return forEach(nt.nodes(),function(it){rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){var vt=rt.edge(it.v,it.w)||{weight:0,minlen:1},bt=nt.edge(it);rt.setEdge(it.v,it.w,{weight:vt.weight+bt.weight,minlen:Math.max(vt.minlen,bt.minlen)})}),rt}function asNonCompoundGraph(nt){var rt=new Graph({multigraph:nt.isMultigraph()}).setGraph(nt.graph());return forEach(nt.nodes(),function(it){nt.children(it).length||rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){rt.setEdge(it,nt.edge(it))}),rt}function intersectRect$3(nt,rt){var it=nt.x,vt=nt.y,bt=rt.x-it,wt=rt.y-vt,Tt=nt.width/2,kt=nt.height/2;if(!bt&&!wt)throw new Error("Not possible to find intersection inside of the rectangle");var Lt,Mt;return Math.abs(wt)*Tt>Math.abs(bt)*kt?(wt<0&&(kt=-kt),Lt=kt*bt/wt,Mt=kt):(bt<0&&(Tt=-Tt),Lt=Tt,Mt=Tt*wt/bt),{x:it+Lt,y:vt+Mt}}function buildLayerMatrix(nt){var rt=map$1(range$1(maxRank(nt)+1),function(){return[]});return forEach(nt.nodes(),function(it){var vt=nt.node(it),bt=vt.rank;isUndefined(bt)||(rt[bt][vt.order]=it)}),rt}function normalizeRanks(nt){var rt=min(map$1(nt.nodes(),function(it){return nt.node(it).rank}));forEach(nt.nodes(),function(it){var vt=nt.node(it);has(vt,"rank")&&(vt.rank-=rt)})}function removeEmptyRanks(nt){var rt=min(map$1(nt.nodes(),function(wt){return nt.node(wt).rank})),it=[];forEach(nt.nodes(),function(wt){var Tt=nt.node(wt).rank-rt;it[Tt]||(it[Tt]=[]),it[Tt].push(wt)});var vt=0,bt=nt.graph().nodeRankFactor;forEach(it,function(wt,Tt){isUndefined(wt)&&Tt%bt!==0?--vt:vt&&forEach(wt,function(kt){nt.node(kt).rank+=vt})})}function addBorderNode$1(nt,rt,it,vt){var bt={width:0,height:0};return arguments.length>=4&&(bt.rank=it,bt.order=vt),addDummyNode(nt,"border",bt,rt)}function maxRank(nt){return max(map$1(nt.nodes(),function(rt){var it=nt.node(rt).rank;if(!isUndefined(it))return it}))}function partition(nt,rt){var it={lhs:[],rhs:[]};return forEach(nt,function(vt){rt(vt)?it.lhs.push(vt):it.rhs.push(vt)}),it}function time(nt,rt){var it=now$1();try{return rt()}finally{console.log(nt+" time: "+(now$1()-it)+"ms")}}function notime(nt,rt){return rt()}function addBorderSegments(nt){function rt(it){var vt=nt.children(it),bt=nt.node(it);if(vt.length&&forEach(vt,rt),has(bt,"minRank")){bt.borderLeft=[],bt.borderRight=[];for(var wt=bt.minRank,Tt=bt.maxRank+1;wt<Tt;++wt)addBorderNode(nt,"borderLeft","_bl",it,bt,wt),addBorderNode(nt,"borderRight","_br",it,bt,wt)}}forEach(nt.children(),rt)}function addBorderNode(nt,rt,it,vt,bt,wt){var Tt={width:0,height:0,rank:wt,borderType:rt},kt=bt[rt][wt-1],Lt=addDummyNode(nt,"border",Tt,it);bt[rt][wt]=Lt,nt.setParent(Lt,vt),kt&&nt.setEdge(kt,Lt,{weight:1})}function adjust(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="lr"||rt==="rl")&&swapWidthHeight(nt)}function undo$1(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="bt"||rt==="rl")&&reverseY(nt),(rt==="lr"||rt==="rl")&&(swapXY(nt),swapWidthHeight(nt))}function swapWidthHeight(nt){forEach(nt.nodes(),function(rt){swapWidthHeightOne(nt.node(rt))}),forEach(nt.edges(),function(rt){swapWidthHeightOne(nt.edge(rt))})}function swapWidthHeightOne(nt){var rt=nt.width;nt.width=nt.height,nt.height=rt}function reverseY(nt){forEach(nt.nodes(),function(rt){reverseYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,reverseYOne),has(it,"y")&&reverseYOne(it)})}function reverseYOne(nt){nt.y=-nt.y}function swapXY(nt){forEach(nt.nodes(),function(rt){swapXYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,swapXYOne),has(it,"x")&&swapXYOne(it)})}function swapXYOne(nt){var rt=nt.x;nt.x=nt.y,nt.y=rt}function run$1(nt){var rt=addDummyNode(nt,"root",{},"_root"),it=treeDepths(nt),vt=max(values(it))-1,bt=2*vt+1;nt.graph().nestingRoot=rt,forEach(nt.edges(),function(Tt){nt.edge(Tt).minlen*=bt});var wt=sumWeights(nt)+1;forEach(nt.children(),function(Tt){dfs$1(nt,rt,bt,wt,vt,it,Tt)}),nt.graph().nodeRankFactor=bt}function dfs$1(nt,rt,it,vt,bt,wt,Tt){var kt=nt.children(Tt);if(!kt.length){Tt!==rt&&nt.setEdge(rt,Tt,{weight:0,minlen:it});return}var Lt=addBorderNode$1(nt,"_bt"),Mt=addBorderNode$1(nt,"_bb"),Nt=nt.node(Tt);nt.setParent(Lt,Tt),Nt.borderTop=Lt,nt.setParent(Mt,Tt),Nt.borderBottom=Mt,forEach(kt,function(zt){dfs$1(nt,rt,it,vt,bt,wt,zt);var Ht=nt.node(zt),Wt=Ht.borderTop?Ht.borderTop:zt,Zt=Ht.borderBottom?Ht.borderBottom:zt,tn=Ht.borderTop?vt:2*vt,Yt=Wt!==Zt?1:bt-wt[Tt]+1;nt.setEdge(Lt,Wt,{weight:tn,minlen:Yt,nestingEdge:!0}),nt.setEdge(Zt,Mt,{weight:tn,minlen:Yt,nestingEdge:!0})}),nt.parent(Tt)||nt.setEdge(rt,Lt,{weight:0,minlen:bt+wt[Tt]})}function treeDepths(nt){var rt={};function it(vt,bt){var wt=nt.children(vt);wt&&wt.length&&forEach(wt,function(Tt){it(Tt,bt+1)}),rt[vt]=bt}return forEach(nt.children(),function(vt){it(vt,1)}),rt}function sumWeights(nt){return reduce(nt.edges(),function(rt,it){return rt+nt.edge(it).weight},0)}function cleanup(nt){var rt=nt.graph();nt.removeNode(rt.nestingRoot),delete rt.nestingRoot,forEach(nt.edges(),function(it){var vt=nt.edge(it);vt.nestingEdge&&nt.removeEdge(it)})}function addSubgraphConstraints(nt,rt,it){var vt={},bt;forEach(it,function(wt){for(var Tt=nt.parent(wt),kt,Lt;Tt;){if(kt=nt.parent(Tt),kt?(Lt=vt[kt],vt[kt]=Tt):(Lt=bt,bt=Tt),Lt&&Lt!==Tt){rt.setEdge(Lt,Tt);return}Tt=kt}})}function buildLayerGraph(nt,rt,it){var vt=createRootNode(nt),bt=new Graph({compound:!0}).setGraph({root:vt}).setDefaultNodeLabel(function(wt){return nt.node(wt)});return forEach(nt.nodes(),function(wt){var Tt=nt.node(wt),kt=nt.parent(wt);(Tt.rank===rt||Tt.minRank<=rt&&rt<=Tt.maxRank)&&(bt.setNode(wt),bt.setParent(wt,kt||vt),forEach(nt[it](wt),function(Lt){var Mt=Lt.v===wt?Lt.w:Lt.v,Nt=bt.edge(Mt,wt),zt=isUndefined(Nt)?0:Nt.weight;bt.setEdge(Mt,wt,{weight:nt.edge(Lt).weight+zt})}),has(Tt,"minRank")&&bt.setNode(wt,{borderLeft:Tt.borderLeft[rt],borderRight:Tt.borderRight[rt]}))}),bt}function createRootNode(nt){for(var rt;nt.hasNode(rt=uniqueId("_root")););return rt}function crossCount(nt,rt){for(var it=0,vt=1;vt<rt.length;++vt)it+=twoLayerCrossCount(nt,rt[vt-1],rt[vt]);return it}function twoLayerCrossCount(nt,rt,it){for(var vt=zipObject(it,map$1(it,function(Mt,Nt){return Nt})),bt=flatten(map$1(rt,function(Mt){return sortBy$1(map$1(nt.outEdges(Mt),function(Nt){return{pos:vt[Nt.w],weight:nt.edge(Nt).weight}}),"pos")})),wt=1;wt<it.length;)wt<<=1;var Tt=2*wt-1;wt-=1;var kt=map$1(new Array(Tt),function(){return 0}),Lt=0;return forEach(bt.forEach(function(Mt){var Nt=Mt.pos+wt;kt[Nt]+=Mt.weight;for(var zt=0;Nt>0;)Nt%2&&(zt+=kt[Nt+1]),Nt=Nt-1>>1,kt[Nt]+=Mt.weight;Lt+=Mt.weight*zt})),Lt}function initOrder(nt){var rt={},it=filter(nt.nodes(),function(kt){return!nt.children(kt).length}),vt=max(map$1(it,function(kt){return nt.node(kt).rank})),bt=map$1(range$1(vt+1),function(){return[]});function wt(kt){if(!has(rt,kt)){rt[kt]=!0;var Lt=nt.node(kt);bt[Lt.rank].push(kt),forEach(nt.successors(kt),wt)}}var Tt=sortBy$1(it,function(kt){return nt.node(kt).rank});return forEach(Tt,wt),bt}function barycenter(nt,rt){return map$1(rt,function(it){var vt=nt.inEdges(it);if(vt.length){var bt=reduce(vt,function(wt,Tt){var kt=nt.edge(Tt),Lt=nt.node(Tt.v);return{sum:wt.sum+kt.weight*Lt.order,weight:wt.weight+kt.weight}},{sum:0,weight:0});return{v:it,barycenter:bt.sum/bt.weight,weight:bt.weight}}else return{v:it}})}function resolveConflicts(nt,rt){var it={};forEach(nt,function(bt,wt){var Tt=it[bt.v]={indegree:0,in:[],out:[],vs:[bt.v],i:wt};isUndefined(bt.barycenter)||(Tt.barycenter=bt.barycenter,Tt.weight=bt.weight)}),forEach(rt.edges(),function(bt){var wt=it[bt.v],Tt=it[bt.w];!isUndefined(wt)&&!isUndefined(Tt)&&(Tt.indegree++,wt.out.push(it[bt.w]))});var vt=filter(it,function(bt){return!bt.indegree});return doResolveConflicts(vt)}function doResolveConflicts(nt){var rt=[];function it(wt){return function(Tt){Tt.merged||(isUndefined(Tt.barycenter)||isUndefined(wt.barycenter)||Tt.barycenter>=wt.barycenter)&&mergeEntries(wt,Tt)}}function vt(wt){return function(Tt){Tt.in.push(wt),--Tt.indegree===0&&nt.push(Tt)}}for(;nt.length;){var bt=nt.pop();rt.push(bt),forEach(bt.in.reverse(),it(bt)),forEach(bt.out,vt(bt))}return map$1(filter(rt,function(wt){return!wt.merged}),function(wt){return pick$1(wt,["vs","i","barycenter","weight"])})}function mergeEntries(nt,rt){var it=0,vt=0;nt.weight&&(it+=nt.barycenter*nt.weight,vt+=nt.weight),rt.weight&&(it+=rt.barycenter*rt.weight,vt+=rt.weight),nt.vs=rt.vs.concat(nt.vs),nt.barycenter=it/vt,nt.weight=vt,nt.i=Math.min(rt.i,nt.i),rt.merged=!0}function sort(nt,rt){var it=partition(nt,function(Nt){return has(Nt,"barycenter")}),vt=it.lhs,bt=sortBy$1(it.rhs,function(Nt){return-Nt.i}),wt=[],Tt=0,kt=0,Lt=0;vt.sort(compareWithBias(!!rt)),Lt=consumeUnsortable(wt,bt,Lt),forEach(vt,function(Nt){Lt+=Nt.vs.length,wt.push(Nt.vs),Tt+=Nt.barycenter*Nt.weight,kt+=Nt.weight,Lt=consumeUnsortable(wt,bt,Lt)});var Mt={vs:flatten(wt)};return kt&&(Mt.barycenter=Tt/kt,Mt.weight=kt),Mt}function consumeUnsortable(nt,rt,it){for(var vt;rt.length&&(vt=last(rt)).i<=it;)rt.pop(),nt.push(vt.vs),it++;return it}function compareWithBias(nt){return function(rt,it){return rt.barycenter<it.barycenter?-1:rt.barycenter>it.barycenter?1:nt?it.i-rt.i:rt.i-it.i}}function sortSubgraph(nt,rt,it,vt){var bt=nt.children(rt),wt=nt.node(rt),Tt=wt?wt.borderLeft:void 0,kt=wt?wt.borderRight:void 0,Lt={};Tt&&(bt=filter(bt,function(Zt){return Zt!==Tt&&Zt!==kt}));var Mt=barycenter(nt,bt);forEach(Mt,function(Zt){if(nt.children(Zt.v).length){var tn=sortSubgraph(nt,Zt.v,it,vt);Lt[Zt.v]=tn,has(tn,"barycenter")&&mergeBarycenters(Zt,tn)}});var Nt=resolveConflicts(Mt,it);expandSubgraphs(Nt,Lt);var zt=sort(Nt,vt);if(Tt&&(zt.vs=flatten([Tt,zt.vs,kt]),nt.predecessors(Tt).length)){var Ht=nt.node(nt.predecessors(Tt)[0]),Wt=nt.node(nt.predecessors(kt)[0]);has(zt,"barycenter")||(zt.barycenter=0,zt.weight=0),zt.barycenter=(zt.barycenter*zt.weight+Ht.order+Wt.order)/(zt.weight+2),zt.weight+=2}return zt}function expandSubgraphs(nt,rt){forEach(nt,function(it){it.vs=flatten(it.vs.map(function(vt){return rt[vt]?rt[vt].vs:vt}))})}function mergeBarycenters(nt,rt){isUndefined(nt.barycenter)?(nt.barycenter=rt.barycenter,nt.weight=rt.weight):(nt.barycenter=(nt.barycenter*nt.weight+rt.barycenter*rt.weight)/(nt.weight+rt.weight),nt.weight+=rt.weight)}function order(nt){var rt=maxRank(nt),it=buildLayerGraphs(nt,range$1(1,rt+1),"inEdges"),vt=buildLayerGraphs(nt,range$1(rt-1,-1,-1),"outEdges"),bt=initOrder(nt);assignOrder(nt,bt);for(var wt=Number.POSITIVE_INFINITY,Tt,kt=0,Lt=0;Lt<4;++kt,++Lt){sweepLayerGraphs(kt%2?it:vt,kt%4>=2),bt=buildLayerMatrix(nt);var Mt=crossCount(nt,bt);Mt<wt&&(Lt=0,Tt=cloneDeep(bt),wt=Mt)}assignOrder(nt,Tt)}function buildLayerGraphs(nt,rt,it){return map$1(rt,function(vt){return buildLayerGraph(nt,vt,it)})}function sweepLayerGraphs(nt,rt){var it=new Graph;forEach(nt,function(vt){var bt=vt.graph().root,wt=sortSubgraph(vt,bt,it,rt);forEach(wt.vs,function(Tt,kt){vt.node(Tt).order=kt}),addSubgraphConstraints(vt,it,wt.vs)})}function assignOrder(nt,rt){forEach(rt,function(it){forEach(it,function(vt,bt){nt.node(vt).order=bt})})}function parentDummyChains(nt){var rt=postorder$1(nt);forEach(nt.graph().dummyChains,function(it){for(var vt=nt.node(it),bt=vt.edgeObj,wt=findPath(nt,rt,bt.v,bt.w),Tt=wt.path,kt=wt.lca,Lt=0,Mt=Tt[Lt],Nt=!0;it!==bt.w;){if(vt=nt.node(it),Nt){for(;(Mt=Tt[Lt])!==kt&&nt.node(Mt).maxRank<vt.rank;)Lt++;Mt===kt&&(Nt=!1)}if(!Nt){for(;Lt<Tt.length-1&&nt.node(Mt=Tt[Lt+1]).minRank<=vt.rank;)Lt++;Mt=Tt[Lt]}nt.setParent(it,Mt),it=nt.successors(it)[0]}})}function findPath(nt,rt,it,vt){var bt=[],wt=[],Tt=Math.min(rt[it].low,rt[vt].low),kt=Math.max(rt[it].lim,rt[vt].lim),Lt,Mt;Lt=it;do Lt=nt.parent(Lt),bt.push(Lt);while(Lt&&(rt[Lt].low>Tt||kt>rt[Lt].lim));for(Mt=Lt,Lt=vt;(Lt=nt.parent(Lt))!==Mt;)wt.push(Lt);return{path:bt.concat(wt.reverse()),lca:Mt}}function postorder$1(nt){var rt={},it=0;function vt(bt){var wt=it;forEach(nt.children(bt),vt),rt[bt]={low:wt,lim:it++}}return forEach(nt.children(),vt),rt}function findType1Conflicts(nt,rt){var it={};function vt(bt,wt){var Tt=0,kt=0,Lt=bt.length,Mt=last(wt);return forEach(wt,function(Nt,zt){var Ht=findOtherInnerSegmentNode(nt,Nt),Wt=Ht?nt.node(Ht).order:Lt;(Ht||Nt===Mt)&&(forEach(wt.slice(kt,zt+1),function(Zt){forEach(nt.predecessors(Zt),function(tn){var Yt=nt.node(tn),nn=Yt.order;(nn<Tt||Wt<nn)&&!(Yt.dummy&&nt.node(Zt).dummy)&&addConflict(it,tn,Zt)})}),kt=zt+1,Tt=Wt)}),wt}return reduce(rt,vt),it}function findType2Conflicts(nt,rt){var it={};function vt(wt,Tt,kt,Lt,Mt){var Nt;forEach(range$1(Tt,kt),function(zt){Nt=wt[zt],nt.node(Nt).dummy&&forEach(nt.predecessors(Nt),function(Ht){var Wt=nt.node(Ht);Wt.dummy&&(Wt.order<Lt||Wt.order>Mt)&&addConflict(it,Ht,Nt)})})}function bt(wt,Tt){var kt=-1,Lt,Mt=0;return forEach(Tt,function(Nt,zt){if(nt.node(Nt).dummy==="border"){var Ht=nt.predecessors(Nt);Ht.length&&(Lt=nt.node(Ht[0]).order,vt(Tt,Mt,zt,kt,Lt),Mt=zt,kt=Lt)}vt(Tt,Mt,Tt.length,Lt,wt.length)}),Tt}return reduce(rt,bt),it}function findOtherInnerSegmentNode(nt,rt){if(nt.node(rt).dummy)return find$1(nt.predecessors(rt),function(it){return nt.node(it).dummy})}function addConflict(nt,rt,it){if(rt>it){var vt=rt;rt=it,it=vt}var bt=nt[rt];bt||(nt[rt]=bt={}),bt[it]=!0}function hasConflict(nt,rt,it){if(rt>it){var vt=rt;rt=it,it=vt}return has(nt[rt],it)}function verticalAlignment(nt,rt,it,vt){var bt={},wt={},Tt={};return forEach(rt,function(kt){forEach(kt,function(Lt,Mt){bt[Lt]=Lt,wt[Lt]=Lt,Tt[Lt]=Mt})}),forEach(rt,function(kt){var Lt=-1;forEach(kt,function(Mt){var Nt=vt(Mt);if(Nt.length){Nt=sortBy$1(Nt,function(tn){return Tt[tn]});for(var zt=(Nt.length-1)/2,Ht=Math.floor(zt),Wt=Math.ceil(zt);Ht<=Wt;++Ht){var Zt=Nt[Ht];wt[Mt]===Mt&&Lt<Tt[Zt]&&!hasConflict(it,Mt,Zt)&&(wt[Zt]=Mt,wt[Mt]=bt[Mt]=bt[Zt],Lt=Tt[Zt])}}})}),{root:bt,align:wt}}function horizontalCompaction(nt,rt,it,vt,bt){var wt={},Tt=buildBlockGraph(nt,rt,it,bt),kt=bt?"borderLeft":"borderRight";function Lt(zt,Ht){for(var Wt=Tt.nodes(),Zt=Wt.pop(),tn={};Zt;)tn[Zt]?zt(Zt):(tn[Zt]=!0,Wt.push(Zt),Wt=Wt.concat(Ht(Zt))),Zt=Wt.pop()}function Mt(zt){wt[zt]=Tt.inEdges(zt).reduce(function(Ht,Wt){return Math.max(Ht,wt[Wt.v]+Tt.edge(Wt))},0)}function Nt(zt){var Ht=Tt.outEdges(zt).reduce(function(Zt,tn){return Math.min(Zt,wt[tn.w]-Tt.edge(tn))},Number.POSITIVE_INFINITY),Wt=nt.node(zt);Ht!==Number.POSITIVE_INFINITY&&Wt.borderType!==kt&&(wt[zt]=Math.max(wt[zt],Ht))}return Lt(Mt,Tt.predecessors.bind(Tt)),Lt(Nt,Tt.successors.bind(Tt)),forEach(vt,function(zt){wt[zt]=wt[it[zt]]}),wt}function buildBlockGraph(nt,rt,it,vt){var bt=new Graph,wt=nt.graph(),Tt=sep(wt.nodesep,wt.edgesep,vt);return forEach(rt,function(kt){var Lt;forEach(kt,function(Mt){var Nt=it[Mt];if(bt.setNode(Nt),Lt){var zt=it[Lt],Ht=bt.edge(zt,Nt);bt.setEdge(zt,Nt,Math.max(Tt(nt,Mt,Lt),Ht||0))}Lt=Mt})}),bt}function findSmallestWidthAlignment(nt,rt){return minBy(values(rt),function(it){var vt=Number.NEGATIVE_INFINITY,bt=Number.POSITIVE_INFINITY;return forIn(it,function(wt,Tt){var kt=width$1(nt,Tt)/2;vt=Math.max(wt+kt,vt),bt=Math.min(wt-kt,bt)}),vt-bt})}function alignCoordinates(nt,rt){var it=values(rt),vt=min(it),bt=max(it);forEach(["u","d"],function(wt){forEach(["l","r"],function(Tt){var kt=wt+Tt,Lt=nt[kt],Mt;if(Lt!==rt){var Nt=values(Lt);Mt=Tt==="l"?vt-min(Nt):bt-max(Nt),Mt&&(nt[kt]=mapValues(Lt,function(zt){return zt+Mt}))}})})}function balance(nt,rt){return mapValues(nt.ul,function(it,vt){if(rt)return nt[rt.toLowerCase()][vt];var bt=sortBy$1(map$1(nt,vt));return(bt[1]+bt[2])/2})}function positionX(nt){var rt=buildLayerMatrix(nt),it=merge$3(findType1Conflicts(nt,rt),findType2Conflicts(nt,rt)),vt={},bt;forEach(["u","d"],function(Tt){bt=Tt==="u"?rt:values(rt).reverse(),forEach(["l","r"],function(kt){kt==="r"&&(bt=map$1(bt,function(zt){return values(zt).reverse()}));var Lt=(Tt==="u"?nt.predecessors:nt.successors).bind(nt),Mt=verticalAlignment(nt,bt,it,Lt),Nt=horizontalCompaction(nt,bt,Mt.root,Mt.align,kt==="r");kt==="r"&&(Nt=mapValues(Nt,function(zt){return-zt})),vt[Tt+kt]=Nt})});var wt=findSmallestWidthAlignment(nt,vt);return alignCoordinates(vt,wt),balance(vt,nt.graph().align)}function sep(nt,rt,it){return function(vt,bt,wt){var Tt=vt.node(bt),kt=vt.node(wt),Lt=0,Mt;if(Lt+=Tt.width/2,has(Tt,"labelpos"))switch(Tt.labelpos.toLowerCase()){case"l":Mt=-Tt.width/2;break;case"r":Mt=Tt.width/2;break}if(Mt&&(Lt+=it?Mt:-Mt),Mt=0,Lt+=(Tt.dummy?rt:nt)/2,Lt+=(kt.dummy?rt:nt)/2,Lt+=kt.width/2,has(kt,"labelpos"))switch(kt.labelpos.toLowerCase()){case"l":Mt=kt.width/2;break;case"r":Mt=-kt.width/2;break}return Mt&&(Lt+=it?Mt:-Mt),Mt=0,Lt}}function width$1(nt,rt){return nt.node(rt).width}function position(nt){nt=asNonCompoundGraph(nt),positionY(nt),forEach(positionX(nt),function(rt,it){nt.node(it).x=rt})}function positionY(nt){var rt=buildLayerMatrix(nt),it=nt.graph().ranksep,vt=0;forEach(rt,function(bt){var wt=max(map$1(bt,function(Tt){return nt.node(Tt).height}));forEach(bt,function(Tt){nt.node(Tt).y=vt+wt/2}),vt+=wt+it})}function layout(nt,rt){var it=rt&&rt.debugTiming?time:notime;it("layout",function(){var vt=it("  buildLayoutGraph",function(){return buildLayoutGraph(nt)});it("  runLayout",function(){runLayout(vt,it)}),it("  updateInputGraph",function(){updateInputGraph(nt,vt)})})}function runLayout(nt,rt){rt("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(nt)}),rt("    removeSelfEdges",function(){removeSelfEdges(nt)}),rt("    acyclic",function(){run$2(nt)}),rt("    nestingGraph.run",function(){run$1(nt)}),rt("    rank",function(){rank(asNonCompoundGraph(nt))}),rt("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(nt)}),rt("    removeEmptyRanks",function(){removeEmptyRanks(nt)}),rt("    nestingGraph.cleanup",function(){cleanup(nt)}),rt("    normalizeRanks",function(){normalizeRanks(nt)}),rt("    assignRankMinMax",function(){assignRankMinMax(nt)}),rt("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(nt)}),rt("    normalize.run",function(){run(nt)}),rt("    parentDummyChains",function(){parentDummyChains(nt)}),rt("    addBorderSegments",function(){addBorderSegments(nt)}),rt("    order",function(){order(nt)}),rt("    insertSelfEdges",function(){insertSelfEdges(nt)}),rt("    adjustCoordinateSystem",function(){adjust(nt)}),rt("    position",function(){position(nt)}),rt("    positionSelfEdges",function(){positionSelfEdges(nt)}),rt("    removeBorderNodes",function(){removeBorderNodes(nt)}),rt("    normalize.undo",function(){undo(nt)}),rt("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(nt)}),rt("    undoCoordinateSystem",function(){undo$1(nt)}),rt("    translateGraph",function(){translateGraph(nt)}),rt("    assignNodeIntersects",function(){assignNodeIntersects(nt)}),rt("    reversePoints",function(){reversePointsForReversedEdges(nt)}),rt("    acyclic.undo",function(){undo$2(nt)})}function updateInputGraph(nt,rt){forEach(nt.nodes(),function(it){var vt=nt.node(it),bt=rt.node(it);vt&&(vt.x=bt.x,vt.y=bt.y,rt.children(it).length&&(vt.width=bt.width,vt.height=bt.height))}),forEach(nt.edges(),function(it){var vt=nt.edge(it),bt=rt.edge(it);vt.points=bt.points,has(bt,"x")&&(vt.x=bt.x,vt.y=bt.y)}),nt.graph().width=rt.graph().width,nt.graph().height=rt.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(nt){var rt=new Graph({multigraph:!0,compound:!0}),it=canonicalize(nt.graph());return rt.setGraph(merge$3({},graphDefaults,selectNumberAttrs(it,graphNumAttrs),pick$1(it,graphAttrs))),forEach(nt.nodes(),function(vt){var bt=canonicalize(nt.node(vt));rt.setNode(vt,defaults$1(selectNumberAttrs(bt,nodeNumAttrs),nodeDefaults)),rt.setParent(vt,nt.parent(vt))}),forEach(nt.edges(),function(vt){var bt=canonicalize(nt.edge(vt));rt.setEdge(vt,merge$3({},edgeDefaults,selectNumberAttrs(bt,edgeNumAttrs),pick$1(bt,edgeAttrs)))}),rt}function makeSpaceForEdgeLabels(nt){var rt=nt.graph();rt.ranksep/=2,forEach(nt.edges(),function(it){var vt=nt.edge(it);vt.minlen*=2,vt.labelpos.toLowerCase()!=="c"&&(rt.rankdir==="TB"||rt.rankdir==="BT"?vt.width+=vt.labeloffset:vt.height+=vt.labeloffset)})}function injectEdgeLabelProxies(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.width&&it.height){var vt=nt.node(rt.v),bt=nt.node(rt.w),wt={rank:(bt.rank-vt.rank)/2+vt.rank,e:rt};addDummyNode(nt,"edge-proxy",wt,"_ep")}})}function assignRankMinMax(nt){var rt=0;forEach(nt.nodes(),function(it){var vt=nt.node(it);vt.borderTop&&(vt.minRank=nt.node(vt.borderTop).rank,vt.maxRank=nt.node(vt.borderBottom).rank,rt=max(rt,vt.maxRank))}),nt.graph().maxRank=rt}function removeEdgeLabelProxies(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);it.dummy==="edge-proxy"&&(nt.edge(it.e).labelRank=it.rank,nt.removeNode(rt))})}function translateGraph(nt){var rt=Number.POSITIVE_INFINITY,it=0,vt=Number.POSITIVE_INFINITY,bt=0,wt=nt.graph(),Tt=wt.marginx||0,kt=wt.marginy||0;function Lt(Mt){var Nt=Mt.x,zt=Mt.y,Ht=Mt.width,Wt=Mt.height;rt=Math.min(rt,Nt-Ht/2),it=Math.max(it,Nt+Ht/2),vt=Math.min(vt,zt-Wt/2),bt=Math.max(bt,zt+Wt/2)}forEach(nt.nodes(),function(Mt){Lt(nt.node(Mt))}),forEach(nt.edges(),function(Mt){var Nt=nt.edge(Mt);has(Nt,"x")&&Lt(Nt)}),rt-=Tt,vt-=kt,forEach(nt.nodes(),function(Mt){var Nt=nt.node(Mt);Nt.x-=rt,Nt.y-=vt}),forEach(nt.edges(),function(Mt){var Nt=nt.edge(Mt);forEach(Nt.points,function(zt){zt.x-=rt,zt.y-=vt}),has(Nt,"x")&&(Nt.x-=rt),has(Nt,"y")&&(Nt.y-=vt)}),wt.width=it-rt+Tt,wt.height=bt-vt+kt}function assignNodeIntersects(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt),vt=nt.node(rt.v),bt=nt.node(rt.w),wt,Tt;it.points?(wt=it.points[0],Tt=it.points[it.points.length-1]):(it.points=[],wt=bt,Tt=vt),it.points.unshift(intersectRect$3(vt,wt)),it.points.push(intersectRect$3(bt,Tt))})}function fixupEdgeLabelCoords(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function reversePointsForReversedEdges(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);it.reversed&&it.points.reverse()})}function removeBorderNodes(nt){forEach(nt.nodes(),function(rt){if(nt.children(rt).length){var it=nt.node(rt),vt=nt.node(it.borderTop),bt=nt.node(it.borderBottom),wt=nt.node(last(it.borderLeft)),Tt=nt.node(last(it.borderRight));it.width=Math.abs(Tt.x-wt.x),it.height=Math.abs(bt.y-vt.y),it.x=wt.x+it.width/2,it.y=vt.y+it.height/2}}),forEach(nt.nodes(),function(rt){nt.node(rt).dummy==="border"&&nt.removeNode(rt)})}function removeSelfEdges(nt){forEach(nt.edges(),function(rt){if(rt.v===rt.w){var it=nt.node(rt.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:rt,label:nt.edge(rt)}),nt.removeEdge(rt)}})}function insertSelfEdges(nt){var rt=buildLayerMatrix(nt);forEach(rt,function(it){var vt=0;forEach(it,function(bt,wt){var Tt=nt.node(bt);Tt.order=wt+vt,forEach(Tt.selfEdges,function(kt){addDummyNode(nt,"selfedge",{width:kt.label.width,height:kt.label.height,rank:Tt.rank,order:wt+ ++vt,e:kt.e,label:kt.label},"_se")}),delete Tt.selfEdges})})}function positionSelfEdges(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);if(it.dummy==="selfedge"){var vt=nt.node(it.e.v),bt=vt.x+vt.width/2,wt=vt.y,Tt=it.x-bt,kt=vt.height/2;nt.setEdge(it.e,it.label),nt.removeNode(rt),it.label.points=[{x:bt+2*Tt/3,y:wt-kt},{x:bt+5*Tt/6,y:wt-kt},{x:bt+Tt,y:wt},{x:bt+5*Tt/6,y:wt+kt},{x:bt+2*Tt/3,y:wt+kt}],it.label.x=it.x,it.label.y=it.y}})}function selectNumberAttrs(nt,rt){return mapValues(pick$1(nt,rt),Number)}function canonicalize(nt){var rt={};return forEach(nt,function(it,vt){rt[vt.toLowerCase()]=it}),rt}function run(nt){nt.graph().dummyChains=[],forEach(nt.edges(),function(rt){normalizeEdge(nt,rt)})}function normalizeEdge(nt,rt){var it=rt.v,vt=nt.node(it).rank,bt=rt.w,wt=nt.node(bt).rank,Tt=rt.name,kt=nt.edge(rt),Lt=kt.labelRank;if(wt!==vt+1){nt.removeEdge(rt);var Mt,Nt,zt;for(zt=0,++vt;vt<wt;++zt,++vt)kt.points=[],Nt={width:0,height:0,edgeLabel:kt,edgeObj:rt,rank:vt},Mt=addDummyNode(nt,"edge",Nt,"_d"),vt===Lt&&(Nt.width=kt.width,Nt.height=kt.height,Nt.dummy="edge-label",Nt.labelpos=kt.labelpos),nt.setEdge(it,Mt,{weight:kt.weight},Tt),zt===0&&nt.graph().dummyChains.push(Mt),it=Mt;nt.setEdge(it,bt,{weight:kt.weight},Tt)}}function undo(nt){forEach(nt.graph().dummyChains,function(rt){var it=nt.node(rt),vt=it.edgeLabel,bt;for(nt.setEdge(it.edgeObj,vt);it.dummy;)bt=nt.successors(rt)[0],nt.removeNode(rt),vt.points.push({x:it.x,y:it.y}),it.dummy==="edge-label"&&(vt.x=it.x,vt.y=it.y,vt.width=it.width,vt.height=it.height),rt=bt,it=nt.node(rt)})}function longestPath(nt){var rt={};function it(vt){var bt=nt.node(vt);if(has(rt,vt))return bt.rank;rt[vt]=!0;var wt=min(map$1(nt.outEdges(vt),function(Tt){return it(Tt.w)-nt.edge(Tt).minlen}));return(wt===Number.POSITIVE_INFINITY||wt===void 0||wt===null)&&(wt=0),bt.rank=wt}forEach(nt.sources(),it)}function slack(nt,rt){return nt.node(rt.w).rank-nt.node(rt.v).rank-nt.edge(rt).minlen}function feasibleTree(nt){var rt=new Graph({directed:!1}),it=nt.nodes()[0],vt=nt.nodeCount();rt.setNode(it,{});for(var bt,wt;tightTree(rt,nt)<vt;)bt=findMinSlackEdge(rt,nt),wt=rt.hasNode(bt.v)?slack(nt,bt):-slack(nt,bt),shiftRanks(rt,nt,wt);return rt}function tightTree(nt,rt){function it(vt){forEach(rt.nodeEdges(vt),function(bt){var wt=bt.v,Tt=vt===wt?bt.w:wt;!nt.hasNode(Tt)&&!slack(rt,bt)&&(nt.setNode(Tt,{}),nt.setEdge(vt,Tt,{}),it(Tt))})}return forEach(nt.nodes(),it),nt.nodeCount()}function findMinSlackEdge(nt,rt){return minBy(rt.edges(),function(it){if(nt.hasNode(it.v)!==nt.hasNode(it.w))return slack(rt,it)})}function shiftRanks(nt,rt,it){forEach(nt.nodes(),function(vt){rt.node(vt).rank+=it})}function CycleException(){}CycleException.prototype=new Error;function dfs(nt,rt,it){isArray$1(rt)||(rt=[rt]);var vt=(nt.isDirected()?nt.successors:nt.neighbors).bind(nt),bt=[],wt={};return forEach(rt,function(Tt){if(!nt.hasNode(Tt))throw new Error("Graph does not have node: "+Tt);doDfs(nt,Tt,it==="post",wt,vt,bt)}),bt}function doDfs(nt,rt,it,vt,bt,wt){has(vt,rt)||(vt[rt]=!0,it||wt.push(rt),forEach(bt(rt),function(Tt){doDfs(nt,Tt,it,vt,bt,wt)}),it&&wt.push(rt))}function postorder(nt,rt){return dfs(nt,rt,"post")}function preorder(nt,rt){return dfs(nt,rt,"pre")}networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex(nt){nt=simplify(nt),longestPath(nt);var rt=feasibleTree(nt);initLowLimValues(rt),initCutValues(rt,nt);for(var it,vt;it=leaveEdge(rt);)vt=enterEdge(rt,nt,it),exchangeEdges(rt,nt,it,vt)}function initCutValues(nt,rt){var it=postorder(nt,nt.nodes());it=it.slice(0,it.length-1),forEach(it,function(vt){assignCutValue(nt,rt,vt)})}function assignCutValue(nt,rt,it){var vt=nt.node(it),bt=vt.parent;nt.edge(it,bt).cutvalue=calcCutValue(nt,rt,it)}function calcCutValue(nt,rt,it){var vt=nt.node(it),bt=vt.parent,wt=!0,Tt=rt.edge(it,bt),kt=0;return Tt||(wt=!1,Tt=rt.edge(bt,it)),kt=Tt.weight,forEach(rt.nodeEdges(it),function(Lt){var Mt=Lt.v===it,Nt=Mt?Lt.w:Lt.v;if(Nt!==bt){var zt=Mt===wt,Ht=rt.edge(Lt).weight;if(kt+=zt?Ht:-Ht,isTreeEdge(nt,it,Nt)){var Wt=nt.edge(it,Nt).cutvalue;kt+=zt?-Wt:Wt}}}),kt}function initLowLimValues(nt,rt){arguments.length<2&&(rt=nt.nodes()[0]),dfsAssignLowLim(nt,{},1,rt)}function dfsAssignLowLim(nt,rt,it,vt,bt){var wt=it,Tt=nt.node(vt);return rt[vt]=!0,forEach(nt.neighbors(vt),function(kt){has(rt,kt)||(it=dfsAssignLowLim(nt,rt,it,kt,vt))}),Tt.low=wt,Tt.lim=it++,bt?Tt.parent=bt:delete Tt.parent,it}function leaveEdge(nt){return find$1(nt.edges(),function(rt){return nt.edge(rt).cutvalue<0})}function enterEdge(nt,rt,it){var vt=it.v,bt=it.w;rt.hasEdge(vt,bt)||(vt=it.w,bt=it.v);var wt=nt.node(vt),Tt=nt.node(bt),kt=wt,Lt=!1;wt.lim>Tt.lim&&(kt=Tt,Lt=!0);var Mt=filter(rt.edges(),function(Nt){return Lt===isDescendant$1(nt,nt.node(Nt.v),kt)&&Lt!==isDescendant$1(nt,nt.node(Nt.w),kt)});return minBy(Mt,function(Nt){return slack(rt,Nt)})}function exchangeEdges(nt,rt,it,vt){var bt=it.v,wt=it.w;nt.removeEdge(bt,wt),nt.setEdge(vt.v,vt.w,{}),initLowLimValues(nt),initCutValues(nt,rt),updateRanks(nt,rt)}function updateRanks(nt,rt){var it=find$1(nt.nodes(),function(bt){return!rt.node(bt).parent}),vt=preorder(nt,it);vt=vt.slice(1),forEach(vt,function(bt){var wt=nt.node(bt).parent,Tt=rt.edge(bt,wt),kt=!1;Tt||(Tt=rt.edge(wt,bt),kt=!0),rt.node(bt).rank=rt.node(wt).rank+(kt?Tt.minlen:-Tt.minlen)})}function isTreeEdge(nt,rt,it){return nt.hasEdge(rt,it)}function isDescendant$1(nt,rt,it){return it.low<=rt.lim&&rt.lim<=it.lim}function rank(nt){switch(nt.graph().ranker){case"network-simplex":networkSimplexRanker(nt);break;case"tight-tree":tightTreeRanker(nt);break;case"longest-path":longestPathRanker(nt);break;default:networkSimplexRanker(nt)}}var longestPathRanker=longestPath;function tightTreeRanker(nt){longestPath(nt),feasibleTree(nt)}function networkSimplexRanker(nt){networkSimplex(nt)}function write(nt){var rt={options:{directed:nt.isDirected(),multigraph:nt.isMultigraph(),compound:nt.isCompound()},nodes:writeNodes(nt),edges:writeEdges(nt)};return isUndefined(nt.graph())||(rt.value=clone$1(nt.graph())),rt}function writeNodes(nt){return map$1(nt.nodes(),function(rt){var it=nt.node(rt),vt=nt.parent(rt),bt={v:rt};return isUndefined(it)||(bt.value=it),isUndefined(vt)||(bt.parent=vt),bt})}function writeEdges(nt){return map$1(nt.edges(),function(rt){var it=nt.edge(rt),vt={v:rt.v,w:rt.w};return isUndefined(rt.name)||(vt.name=rt.name),isUndefined(it)||(vt.value=it),vt})}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let nt=0;nt<256;++nt)byteToHex.push((nt+256).toString(16).slice(1));function unsafeStringify(nt,rt=0){return(byteToHex[nt[rt+0]]+byteToHex[nt[rt+1]]+byteToHex[nt[rt+2]]+byteToHex[nt[rt+3]]+"-"+byteToHex[nt[rt+4]]+byteToHex[nt[rt+5]]+"-"+byteToHex[nt[rt+6]]+byteToHex[nt[rt+7]]+"-"+byteToHex[nt[rt+8]]+byteToHex[nt[rt+9]]+"-"+byteToHex[nt[rt+10]]+byteToHex[nt[rt+11]]+byteToHex[nt[rt+12]]+byteToHex[nt[rt+13]]+byteToHex[nt[rt+14]]+byteToHex[nt[rt+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(nt,rt,it){if(native.randomUUID&&!rt&&!nt)return native.randomUUID();nt=nt||{};const vt=nt.random||(nt.rng||rng)();if(vt[6]=vt[6]&15|64,vt[8]=vt[8]&63|128,rt){it=it||0;for(let bt=0;bt<16;++bt)rt[it+bt]=vt[bt];return rt}return unsafeStringify(vt)}function isSubgraph(nt,rt){return!!nt.children(rt).length}function edgeToId(nt){return escapeId(nt.v)+":"+escapeId(nt.w)+":"+escapeId(nt.name)}var ID_DELIM=/:/g;function escapeId(nt){return nt?String(nt).replace(ID_DELIM,"\\:"):""}function applyStyle$1(nt,rt){rt&&nt.attr("style",rt)}function applyClass(nt,rt,it){rt&&nt.attr("class",rt).attr("class",it+" "+nt.attr("class"))}function applyTransition(nt,rt){var it=rt.graph();if(isPlainObject(it)){var vt=it.transition;if(isFunction(vt))return vt(nt)}return nt}var arrows={normal,vee,undirected};function setArrows(nt){arrows=nt}function normal(nt,rt,it,vt){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),wt=bt.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(wt,it[vt+"Style"]),it[vt+"Class"]&&wt.attr("class",it[vt+"Class"])}function vee(nt,rt,it,vt){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),wt=bt.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(wt,it[vt+"Style"]),it[vt+"Class"]&&wt.attr("class",it[vt+"Class"])}function undirected(nt,rt,it,vt){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),wt=bt.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(wt,it[vt+"Style"]),it[vt+"Class"]&&wt.attr("class",it[vt+"Class"])}function addHtmlLabel$1(nt,rt){var it=nt.append("foreignObject").attr("width","100000"),vt=it.append("xhtml:div");vt.attr("xmlns","http://www.w3.org/1999/xhtml");var bt=rt.label;switch(typeof bt){case"function":vt.insert(bt);break;case"object":vt.insert(function(){return bt});break;default:vt.html(bt)}applyStyle$1(vt,rt.labelStyle),vt.style("display","inline-block"),vt.style("white-space","nowrap");var wt=vt.node().getBoundingClientRect();return it.attr("width",wt.width).attr("height",wt.height),it}function addSVGLabel(nt,rt){var it=nt;return it.node().appendChild(rt.label),applyStyle$1(it,rt.labelStyle),it}function addTextLabel(nt,rt){for(var it=nt.append("text"),vt=processEscapeSequences(rt.label).split(`
`),bt=0;bt<vt.length;bt++)it.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(vt[bt]);return applyStyle$1(it,rt.labelStyle),it}function processEscapeSequences(nt){for(var rt="",it=!1,vt,bt=0;bt<nt.length;++bt)if(vt=nt[bt],it){switch(vt){case"n":rt+=`
`;break;default:rt+=vt}it=!1}else vt==="\\"?it=!0:rt+=vt;return rt}function addLabel(nt,rt,it){var vt=rt.label,bt=nt.append("g");rt.labelType==="svg"?addSVGLabel(bt,rt):typeof vt!="string"||rt.labelType==="html"?addHtmlLabel$1(bt,rt):addTextLabel(bt,rt);var wt=bt.node().getBBox(),Tt;switch(it){case"top":Tt=-rt.height/2;break;case"bottom":Tt=rt.height/2-wt.height;break;default:Tt=-wt.height/2}return bt.attr("transform","translate("+-wt.width/2+","+Tt+")"),bt}var createClusters=function(nt,rt){var it=rt.nodes().filter(function(wt){return isSubgraph(rt,wt)}),vt=nt.selectAll("g.cluster").data(it,function(wt){return wt});applyTransition(vt.exit(),rt).style("opacity",0).remove();var bt=vt.enter().append("g").attr("class","cluster").attr("id",function(wt){var Tt=rt.node(wt);return Tt.id}).style("opacity",0).each(function(wt){var Tt=rt.node(wt),kt=select(this);select(this).append("rect");var Lt=kt.append("g").attr("class","label");addLabel(Lt,Tt,Tt.clusterLabelPos)});return vt=vt.merge(bt),vt=applyTransition(vt,rt).style("opacity",1),vt.selectAll("rect").each(function(wt){var Tt=rt.node(wt),kt=select(this);applyStyle$1(kt,Tt.style)}),vt};function setCreateClusters(nt){createClusters=nt}let createEdgeLabels=function(nt,rt){var it=nt.selectAll("g.edgeLabel").data(rt.edges(),function(bt){return edgeToId(bt)}).classed("update",!0);it.exit().remove(),it.enter().append("g").classed("edgeLabel",!0).style("opacity",0),it=nt.selectAll("g.edgeLabel"),it.each(function(bt){var wt=select(this);wt.select(".label").remove();var Tt=rt.edge(bt),kt=addLabel(wt,rt.edge(bt),0).classed("label",!0),Lt=kt.node().getBBox();Tt.labelId&&kt.attr("id",Tt.labelId),has(Tt,"width")||(Tt.width=Lt.width),has(Tt,"height")||(Tt.height=Lt.height)});var vt;return it.exit?vt=it.exit():vt=it.selectAll(null),applyTransition(vt,rt).style("opacity",0).remove(),it};function setCreateEdgeLabels(nt){createEdgeLabels=nt}function intersectNode$1(nt,rt){return nt.intersect(rt)}var createEdgePaths=function(nt,rt,it){var vt=nt.selectAll("g.edgePath").data(rt.edges(),function(Tt){return edgeToId(Tt)}).classed("update",!0),bt=enter(vt,rt);exit(vt,rt);var wt=vt.merge!==void 0?vt.merge(bt):vt;return applyTransition(wt,rt).style("opacity",1),wt.each(function(Tt){var kt=select(this),Lt=rt.edge(Tt);Lt.elem=this,Lt.id&&kt.attr("id",Lt.id),applyClass(kt,Lt.class,(kt.classed("update")?"update ":"")+"edgePath")}),wt.selectAll("path.path").each(function(Tt){var kt=rt.edge(Tt);kt.arrowheadId=uniqueId("arrowhead");var Lt=select(this).attr("marker-end",function(){return"url("+makeFragmentRef(location.href,kt.arrowheadId)+")"}).style("fill","none");applyTransition(Lt,rt).attr("d",function(Mt){return calcPoints(rt,Mt)}),applyStyle$1(Lt,kt.style)}),wt.selectAll("defs *").remove(),wt.selectAll("defs").each(function(Tt){var kt=rt.edge(Tt),Lt=it[kt.arrowhead];Lt(select(this),kt.arrowheadId,kt,"arrowhead")}),wt};function setCreateEdgePaths(nt){createEdgePaths=nt}function makeFragmentRef(nt,rt){var it=nt.split("#")[0];return it+"#"+rt}function calcPoints(nt,rt){var it=nt.edge(rt),vt=nt.node(rt.v),bt=nt.node(rt.w),wt=it.points.slice(1,it.points.length-1);return wt.unshift(intersectNode$1(vt,wt[0])),wt.push(intersectNode$1(bt,wt[wt.length-1])),createLine(it,wt)}function createLine(nt,rt){var it=(line$1||svg$2.line)().x(function(vt){return vt.x}).y(function(vt){return vt.y});return(it.curve||it.interpolate)(nt.curve),it(rt)}function getCoords(nt){var rt=nt.getBBox(),it=nt.ownerSVGElement.getScreenCTM().inverse().multiply(nt.getScreenCTM()).translate(rt.width/2,rt.height/2);return{x:it.e,y:it.f}}function enter(nt,rt){var it=nt.enter().append("g").attr("class","edgePath").style("opacity",0);return it.append("path").attr("class","path").attr("d",function(vt){var bt=rt.edge(vt),wt=rt.node(vt.v).elem,Tt=range$1(bt.points.length).map(function(){return getCoords(wt)});return createLine(bt,Tt)}),it.append("defs"),it}function exit(nt,rt){var it=nt.exit();applyTransition(it,rt).style("opacity",0).remove()}var createNodes=function(nt,rt,it){var vt=rt.nodes().filter(function(Tt){return!isSubgraph(rt,Tt)}),bt=nt.selectAll("g.node").data(vt,function(Tt){return Tt}).classed("update",!0);bt.exit().remove(),bt.enter().append("g").attr("class","node").style("opacity",0),bt=nt.selectAll("g.node"),bt.each(function(Tt){var kt=rt.node(Tt),Lt=select(this);applyClass(Lt,kt.class,(Lt.classed("update")?"update ":"")+"node"),Lt.select("g.label").remove();var Mt=Lt.append("g").attr("class","label"),Nt=addLabel(Mt,kt),zt=it[kt.shape],Ht=pick$1(Nt.node().getBBox(),"width","height");kt.elem=this,kt.id&&Lt.attr("id",kt.id),kt.labelId&&Mt.attr("id",kt.labelId),has(kt,"width")&&(Ht.width=kt.width),has(kt,"height")&&(Ht.height=kt.height),Ht.width+=kt.paddingLeft+kt.paddingRight,Ht.height+=kt.paddingTop+kt.paddingBottom,Mt.attr("transform","translate("+(kt.paddingLeft-kt.paddingRight)/2+","+(kt.paddingTop-kt.paddingBottom)/2+")");var Wt=select(this);Wt.select(".label-container").remove();var Zt=zt(Wt,Ht,kt).classed("label-container",!0);applyStyle$1(Zt,kt.style);var tn=Zt.node().getBBox();kt.width=tn.width,kt.height=tn.height});var wt;return bt.exit?wt=bt.exit():wt=bt.selectAll(null),applyTransition(wt,rt).style("opacity",0).remove(),bt};function setCreateNodes(nt){createNodes=nt}function positionClusters(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function vt(bt){var wt=rt.node(bt);return"translate("+wt.x+","+wt.y+")"}it.attr("transform",vt),applyTransition(nt,rt).style("opacity",1).attr("transform",vt),applyTransition(it.selectAll("rect"),rt).attr("width",function(bt){return rt.node(bt).width}).attr("height",function(bt){return rt.node(bt).height}).attr("x",function(bt){var wt=rt.node(bt);return-wt.width/2}).attr("y",function(bt){var wt=rt.node(bt);return-wt.height/2})}function positionEdgeLabels(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function vt(bt){var wt=rt.edge(bt);return has(wt,"x")?"translate("+wt.x+","+wt.y+")":""}it.attr("transform",vt),applyTransition(nt,rt).style("opacity",1).attr("transform",vt)}function positionNodes(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function vt(bt){var wt=rt.node(bt);return"translate("+wt.x+","+wt.y+")"}it.attr("transform",vt),applyTransition(nt,rt).style("opacity",1).attr("transform",vt)}function intersectEllipse$1(nt,rt,it,vt){var bt=nt.x,wt=nt.y,Tt=bt-vt.x,kt=wt-vt.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Tt*Tt),Mt=Math.abs(rt*it*Tt/Lt);vt.x<bt&&(Mt=-Mt);var Nt=Math.abs(rt*it*kt/Lt);return vt.y<wt&&(Nt=-Nt),{x:bt+Mt,y:wt+Nt}}function intersectCircle$1(nt,rt,it){return intersectEllipse$1(nt,rt,rt,it)}function intersectLine$1(nt,rt,it,vt){var bt,wt,Tt,kt,Lt,Mt,Nt,zt,Ht,Wt,Zt,tn,Yt,nn,rn;if(bt=rt.y-nt.y,Tt=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Ht=bt*it.x+Tt*it.y+Lt,Wt=bt*vt.x+Tt*vt.y+Lt,!(Ht!==0&&Wt!==0&&sameSign$1(Ht,Wt))&&(wt=vt.y-it.y,kt=it.x-vt.x,Mt=vt.x*it.y-it.x*vt.y,Nt=wt*nt.x+kt*nt.y+Mt,zt=wt*rt.x+kt*rt.y+Mt,!(Nt!==0&&zt!==0&&sameSign$1(Nt,zt))&&(Zt=bt*kt-wt*Tt,Zt!==0)))return tn=Math.abs(Zt/2),Yt=Tt*Mt-kt*Lt,nn=Yt<0?(Yt-tn)/Zt:(Yt+tn)/Zt,Yt=wt*Lt-bt*Mt,rn=Yt<0?(Yt-tn)/Zt:(Yt+tn)/Zt,{x:nn,y:rn}}function sameSign$1(nt,rt){return nt*rt>0}function intersectPolygon$1(nt,rt,it){var vt=nt.x,bt=nt.y,wt=[],Tt=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;rt.forEach(function(Zt){Tt=Math.min(Tt,Zt.x),kt=Math.min(kt,Zt.y)});for(var Lt=vt-nt.width/2-Tt,Mt=bt-nt.height/2-kt,Nt=0;Nt<rt.length;Nt++){var zt=rt[Nt],Ht=rt[Nt<rt.length-1?Nt+1:0],Wt=intersectLine$1(nt,it,{x:Lt+zt.x,y:Mt+zt.y},{x:Lt+Ht.x,y:Mt+Ht.y});Wt&&wt.push(Wt)}return wt.length?(wt.length>1&&wt.sort(function(Zt,tn){var Yt=Zt.x-it.x,nn=Zt.y-it.y,rn=Math.sqrt(Yt*Yt+nn*nn),ln=tn.x-it.x,sn=tn.y-it.y,mn=Math.sqrt(ln*ln+sn*sn);return rn<mn?-1:rn===mn?0:1}),wt[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",nt),nt)}function intersectRect$2(nt,rt){var it=nt.x,vt=nt.y,bt=rt.x-it,wt=rt.y-vt,Tt=nt.width/2,kt=nt.height/2,Lt,Mt;return Math.abs(wt)*Tt>Math.abs(bt)*kt?(wt<0&&(kt=-kt),Lt=wt===0?0:kt*bt/wt,Mt=kt):(bt<0&&(Tt=-Tt),Lt=Tt,Mt=bt===0?0:Tt*wt/bt),{x:it+Lt,y:vt+Mt}}var shapes$2={rect:rect$2,ellipse,circle:circle$2,diamond};function setShapes(nt){shapes$2=nt}function rect$2(nt,rt,it){var vt=nt.insert("rect",":first-child").attr("rx",it.rx).attr("ry",it.ry).attr("x",-rt.width/2).attr("y",-rt.height/2).attr("width",rt.width).attr("height",rt.height);return it.intersect=function(bt){return intersectRect$2(it,bt)},vt}function ellipse(nt,rt,it){var vt=rt.width/2,bt=rt.height/2,wt=nt.insert("ellipse",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("rx",vt).attr("ry",bt);return it.intersect=function(Tt){return intersectEllipse$1(it,vt,bt,Tt)},wt}function circle$2(nt,rt,it){var vt=Math.max(rt.width,rt.height)/2,bt=nt.insert("circle",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("r",vt);return it.intersect=function(wt){return intersectCircle$1(it,vt,wt)},bt}function diamond(nt,rt,it){var vt=rt.width*Math.SQRT2/2,bt=rt.height*Math.SQRT2/2,wt=[{x:0,y:-bt},{x:-vt,y:0},{x:0,y:bt},{x:vt,y:0}],Tt=nt.insert("polygon",":first-child").attr("points",wt.map(function(kt){return kt.x+","+kt.y}).join(" "));return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function render$2(){var nt=function(rt,it){preProcessGraph(it);var vt=createOrSelectGroup(rt,"output"),bt=createOrSelectGroup(vt,"clusters"),wt=createOrSelectGroup(vt,"edgePaths"),Tt=createEdgeLabels(createOrSelectGroup(vt,"edgeLabels"),it),kt=createNodes(createOrSelectGroup(vt,"nodes"),it,shapes$2);layout(it),positionNodes(kt,it),positionEdgeLabels(Tt,it),createEdgePaths(wt,it,arrows);var Lt=createClusters(bt,it);positionClusters(Lt,it),postProcessGraph(it)};return nt.createNodes=function(rt){return arguments.length?(setCreateNodes(rt),nt):createNodes},nt.createClusters=function(rt){return arguments.length?(setCreateClusters(rt),nt):createClusters},nt.createEdgeLabels=function(rt){return arguments.length?(setCreateEdgeLabels(rt),nt):createEdgeLabels},nt.createEdgePaths=function(rt){return arguments.length?(setCreateEdgePaths(rt),nt):createEdgePaths},nt.shapes=function(rt){return arguments.length?(setShapes(rt),nt):shapes$2},nt.arrows=function(rt){return arguments.length?(setArrows(rt),nt):arrows},nt}var NODE_DEFAULT_ATTRS={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},EDGE_DEFAULT_ATTRS={arrowhead:"normal",curve:curveLinear};function preProcessGraph(nt){nt.nodes().forEach(function(rt){var it=nt.node(rt);!has(it,"label")&&!nt.children(rt).length&&(it.label=rt),has(it,"paddingX")&&defaults$1(it,{paddingLeft:it.paddingX,paddingRight:it.paddingX}),has(it,"paddingY")&&defaults$1(it,{paddingTop:it.paddingY,paddingBottom:it.paddingY}),has(it,"padding")&&defaults$1(it,{paddingLeft:it.padding,paddingRight:it.padding,paddingTop:it.padding,paddingBottom:it.padding}),defaults$1(it,NODE_DEFAULT_ATTRS),forEach(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(vt){it[vt]=Number(it[vt])}),has(it,"width")&&(it._prevWidth=it.width),has(it,"height")&&(it._prevHeight=it.height)}),nt.edges().forEach(function(rt){var it=nt.edge(rt);has(it,"label")||(it.label=""),defaults$1(it,EDGE_DEFAULT_ATTRS)})}function postProcessGraph(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);has(it,"_prevWidth")?it.width=it._prevWidth:delete it.width,has(it,"_prevHeight")?it.height=it._prevHeight:delete it.height,delete it._prevWidth,delete it._prevHeight})}function createOrSelectGroup(nt,rt){var it=nt.select("g."+rt);return it.empty()&&(it=nt.append("g").attr("class",rt)),it}var __defProp=Object.defineProperty,__defNormalProp=(nt,rt,it)=>rt in nt?__defProp(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__publicField=(nt,rt,it)=>(__defNormalProp(nt,typeof rt!="symbol"?rt+"":rt,it),it);const LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log$1={trace:(...nt)=>{},debug:(...nt)=>{},info:(...nt)=>{},warn:(...nt)=>{},error:(...nt)=>{},fatal:(...nt)=>{}},setLogLevel$1=function(nt="fatal"){let rt=LEVELS.fatal;typeof nt=="string"?(nt=nt.toLowerCase(),nt in LEVELS&&(rt=LEVELS[nt])):typeof nt=="number"&&(rt=nt),log$1.trace=()=>{},log$1.debug=()=>{},log$1.info=()=>{},log$1.warn=()=>{},log$1.error=()=>{},log$1.fatal=()=>{},rt<=LEVELS.fatal&&(log$1.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format("FATAL"))),rt<=LEVELS.error&&(log$1.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format("ERROR"))),rt<=LEVELS.warn&&(log$1.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format("WARN"))),rt<=LEVELS.info&&(log$1.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format("INFO"))),rt<=LEVELS.debug&&(log$1.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("DEBUG"))),rt<=LEVELS.trace&&(log$1.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("TRACE")))},format=nt=>`%c${moment().format("ss.SSS")} : ${nt} : `,getRows=nt=>nt?breakToPlaceholder(nt).replace(/\\n/g,"#br#").split("#br#"):[""],removeScript=nt=>purify.sanitize(nt),sanitizeMore=(nt,rt)=>{var it;if(((it=rt.flowchart)==null?void 0:it.htmlLabels)!==!1){const vt=rt.securityLevel;vt==="antiscript"||vt==="strict"?nt=removeScript(nt):vt!=="loose"&&(nt=breakToPlaceholder(nt),nt=nt.replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=nt.replace(/=/g,"&equals;"),nt=placeholderToBreak(nt))}return nt},sanitizeText$5=(nt,rt)=>nt&&(rt.dompurifyConfig?nt=purify.sanitize(sanitizeMore(nt,rt),rt.dompurifyConfig).toString():nt=purify.sanitize(sanitizeMore(nt,rt),{FORBID_TAGS:["style"]}).toString(),nt),sanitizeTextOrArray=(nt,rt)=>typeof nt=="string"?sanitizeText$5(nt,rt):nt.flat().map(it=>sanitizeText$5(it,rt)),lineBreakRegex=/<br\s*\/?>/gi,hasBreaks=nt=>lineBreakRegex.test(nt),splitBreaks=nt=>nt.split(lineBreakRegex),placeholderToBreak=nt=>nt.replace(/#br#/g,"<br/>"),breakToPlaceholder=nt=>nt.replace(lineBreakRegex,"#br#"),getUrl=nt=>{let rt="";return nt&&(rt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,rt=rt.replaceAll(/\(/g,"\\("),rt=rt.replaceAll(/\)/g,"\\)")),rt},evaluate=nt=>!(nt===!1||["false","null","0"].includes(String(nt).trim().toLowerCase())),parseGenericTypes=function(nt){let rt=nt;return nt.includes("~")?(rt=rt.replace(/~([^~].*)/,"<$1"),rt=rt.replace(/~([^~]*)$/,">$1"),parseGenericTypes(rt)):rt},common$1={getRows,sanitizeText:sanitizeText$5,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate},mkBorder=(nt,rt)=>rt?adjust$2(nt,{s:-40,l:10}):adjust$2(nt,{s:-40,l:-10}),oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2";class Theme$4{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust$2(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust$2(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert$1(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert$1(this.tertiaryColor),this.lineColor=this.lineColor||invert$1(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken$1(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert$1(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten$1(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this.darkMode)for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],75);else for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this.darkMode?this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10):this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust$2(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust$2(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust$2(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust$2(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust$2(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(vt=>{this[vt]=rt[vt]}),this.updateColors(),it.forEach(vt=>{this[vt]=rt[vt]})}}const getThemeVariables$4=nt=>{const rt=new Theme$4;return rt.calculate(nt),rt};class Theme$3{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten$1(this.primaryColor,16),this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=invert$1(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten$1(invert$1("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=rgba$1(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken$1("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=rgba$1(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba$1(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=lighten$1(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten$1(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten$1(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten$1(this.secondaryColor,20),this.git1=lighten$1(this.pie2||this.secondaryColor,20),this.git2=lighten$1(this.pie3||this.tertiaryColor,20),this.git3=lighten$1(this.pie4||adjust$2(this.primaryColor,{h:-30}),20),this.git4=lighten$1(this.pie5||adjust$2(this.primaryColor,{h:-60}),20),this.git5=lighten$1(this.pie6||adjust$2(this.primaryColor,{h:-90}),10),this.git6=lighten$1(this.pie7||adjust$2(this.primaryColor,{h:60}),10),this.git7=lighten$1(this.pie8||adjust$2(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten$1(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten$1(this.background,2)}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(vt=>{this[vt]=rt[vt]}),this.updateColors(),it.forEach(vt=>{this[vt]=rt[vt]})}}const getThemeVariables$3=nt=>{const rt=new Theme$3;return rt.calculate(nt),rt};class Theme$2{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust$2(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=rgba$1(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert$1(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert$1(this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust$2(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||darken$1(invert$1(this.git0),25),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert$1(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert$1(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(vt=>{this[vt]=rt[vt]}),this.updateColors(),it.forEach(vt=>{this[vt]=rt[vt]})}}const getThemeVariables$2=nt=>{const rt=new Theme$2;return rt.calculate(nt),rt};class Theme$1{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten$1("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.primaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=darken$1(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(vt=>{this[vt]=rt[vt]}),this.updateColors(),it.forEach(vt=>{this[vt]=rt[vt]})}}const getThemeVariables$1=nt=>{const rt=new Theme$1;return rt.calculate(nt),rt};class Theme{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten$1(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=lighten$1(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this.darkMode?this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10):this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=lighten$1(this.contrast,30),this.sectionBkgColor2=lighten$1(this.contrast,30),this.taskBorderColor=darken$1(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten$1(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken$1(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken$1(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust$2(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust$2(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust$2(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust$2(this.primaryColor,{h:60}),this.git7=this.pie8||adjust$2(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(vt=>{this[vt]=rt[vt]}),this.updateColors(),it.forEach(vt=>{this[vt]=rt[vt]})}}const getThemeVariables=nt=>{const rt=new Theme;return rt.calculate(nt),rt},theme={base:{getThemeVariables:getThemeVariables$4},dark:{getThemeVariables:getThemeVariables$3},default:{getThemeVariables:getThemeVariables$2},forest:{getThemeVariables:getThemeVariables$1},neutral:{getThemeVariables}},config$1={theme:"default",themeVariables:theme.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};config$1.class&&(config$1.class.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);config$1.gitGraph&&(config$1.gitGraph.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);const keyify=(nt,rt="")=>Object.keys(nt).reduce((it,vt)=>Array.isArray(nt[vt])?it:typeof nt[vt]=="object"&&nt[vt]!==null?[...it,rt+vt,...keyify(nt[vt],"")]:[...it,rt+vt],[]),configKeys=keyify(config$1,""),config$2=config$1;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(nt){return typeof nt>"u"||nt===null}function isObject(nt){return typeof nt=="object"&&nt!==null}function toArray(nt){return Array.isArray(nt)?nt:isNothing(nt)?[]:[nt]}function extend(nt,rt){var it,vt,bt,wt;if(rt)for(wt=Object.keys(rt),it=0,vt=wt.length;it<vt;it+=1)bt=wt[it],nt[bt]=rt[bt];return nt}function repeat(nt,rt){var it="",vt;for(vt=0;vt<rt;vt+=1)it+=nt;return it}function isNegativeZero(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(nt,rt){var it="",vt=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),vt+" "+it):vt}function YAMLException$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=function nt(rt){return this.name+": "+formatError(this,rt)};var exception=YAMLException$1;function getLine(nt,rt,it,vt,bt){var wt="",Tt="",kt=Math.floor(bt/2)-1;return vt-rt>kt&&(wt=" ... ",rt=vt-kt+wt.length),it-vt>kt&&(Tt=" ...",it=vt+kt-Tt.length),{str:wt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Tt,pos:vt-rt+wt.length}}function padStart(nt,rt){return common.repeat(" ",rt-nt.length)+nt}function makeSnippet(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,vt=[0],bt=[],wt,Tt=-1;wt=it.exec(nt.buffer);)bt.push(wt.index),vt.push(wt.index+wt[0].length),nt.position<=wt.index&&Tt<0&&(Tt=vt.length-2);Tt<0&&(Tt=vt.length-1);var kt="",Lt,Mt,Nt=Math.min(nt.line+rt.linesAfter,bt.length).toString().length,zt=rt.maxLength-(rt.indent+Nt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Tt-Lt<0);Lt++)Mt=getLine(nt.buffer,vt[Tt-Lt],bt[Tt-Lt],nt.position-(vt[Tt]-vt[Tt-Lt]),zt),kt=common.repeat(" ",rt.indent)+padStart((nt.line-Lt+1).toString(),Nt)+" | "+Mt.str+`
`+kt;for(Mt=getLine(nt.buffer,vt[Tt],bt[Tt],nt.position,zt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+1).toString(),Nt)+" | "+Mt.str+`
`,kt+=common.repeat("-",rt.indent+Nt+3+Mt.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Tt+Lt>=bt.length);Lt++)Mt=getLine(nt.buffer,vt[Tt+Lt],bt[Tt+Lt],nt.position-(vt[Tt]-vt[Tt+Lt]),zt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+Lt+1).toString(),Nt)+" | "+Mt.str+`
`;return kt.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(vt){rt[String(vt)]=it})}),rt}function Type$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(it)===-1)throw new exception('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases(rt.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type=Type$1;function compileList(nt,rt){var it=[];return nt[rt].forEach(function(vt){var bt=it.length;it.forEach(function(wt,Tt){wt.tag===vt.tag&&wt.kind===vt.kind&&wt.multi===vt.multi&&(bt=Tt)}),it[bt]=vt}),it}function compileMap(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function vt(bt){bt.multi?(nt.multi[bt.kind].push(bt),nt.multi.fallback.push(bt)):nt[bt.kind][bt.tag]=nt.fallback[bt.tag]=bt}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(vt);return nt}function Schema$1(nt){return this.extend(nt)}Schema$1.prototype.extend=function nt(rt){var it=[],vt=[];if(rt instanceof type)vt.push(rt);else if(Array.isArray(rt))vt=vt.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(vt=vt.concat(rt.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(wt){if(!(wt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(wt.loadKind&&wt.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(wt.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),vt.forEach(function(wt){if(!(wt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Schema$1.prototype);return bt.implicit=(this.implicit||[]).concat(it),bt.explicit=(this.explicit||[]).concat(vt),bt.compiledImplicit=compileList(bt,"implicit"),bt.compiledExplicit=compileList(bt,"explicit"),bt.compiledTypeMap=compileMap(bt.compiledImplicit,bt.compiledExplicit),bt};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$1=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe=new schema({explicit:[str,seq$1,map]});function resolveYamlNull(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull(){return null}function isNull(nt){return nt===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode(nt){return 48<=nt&&nt<=55}function isDecCode(nt){return 48<=nt&&nt<=57}function resolveYamlInteger(nt){if(nt===null)return!1;var rt=nt.length,it=0,vt=!1,bt;if(!rt)return!1;if(bt=nt[it],(bt==="-"||bt==="+")&&(bt=nt[++it]),bt==="0"){if(it+1===rt)return!0;if(bt=nt[++it],bt==="b"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(bt!=="0"&&bt!=="1")return!1;vt=!0}return vt&&bt!=="_"}if(bt==="x"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isHexCode(nt.charCodeAt(it)))return!1;vt=!0}return vt&&bt!=="_"}if(bt==="o"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isOctCode(nt.charCodeAt(it)))return!1;vt=!0}return vt&&bt!=="_"}}if(bt==="_")return!1;for(;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isDecCode(nt.charCodeAt(it)))return!1;vt=!0}return!(!vt||bt==="_")}function constructYamlInteger(nt){var rt=nt,it=1,vt;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),vt=rt[0],(vt==="-"||vt==="+")&&(vt==="-"&&(it=-1),rt=rt.slice(1),vt=rt[0]),rt==="0")return 0;if(vt==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common.isNegativeZero(nt)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(nt){return!(nt===null||!YAML_FLOAT_PATTERN.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT.test(it)?it.replace("e",".e"):it}function isFloat(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common.isNegativeZero(nt))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(nt){return nt===null?!1:YAML_DATE_REGEXP.exec(nt)!==null||YAML_TIMESTAMP_REGEXP.exec(nt)!==null}function constructYamlTimestamp(nt){var rt,it,vt,bt,wt,Tt,kt,Lt=0,Mt=null,Nt,zt,Ht;if(rt=YAML_DATE_REGEXP.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],vt=+rt[2]-1,bt=+rt[3],!rt[4])return new Date(Date.UTC(it,vt,bt));if(wt=+rt[4],Tt=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Nt=+rt[10],zt=+(rt[11]||0),Mt=(Nt*60+zt)*6e4,rt[9]==="-"&&(Mt=-Mt)),Ht=new Date(Date.UTC(it,vt,bt,wt,Tt,kt,Lt)),Mt&&Ht.setTime(Ht.getTime()-Mt),Ht}function representYamlTimestamp(nt){return nt.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(nt){return nt==="<<"||nt===null}var merge$1=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(nt){if(nt===null)return!1;var rt,it,vt=0,bt=nt.length,wt=BASE64_MAP;for(it=0;it<bt;it++)if(rt=wt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;vt+=6}return vt%8===0}function constructYamlBinary(nt){var rt,it,vt=nt.replace(/[\r\n=]/g,""),bt=vt.length,wt=BASE64_MAP,Tt=0,kt=[];for(rt=0;rt<bt;rt++)rt%4===0&&rt&&(kt.push(Tt>>16&255),kt.push(Tt>>8&255),kt.push(Tt&255)),Tt=Tt<<6|wt.indexOf(vt.charAt(rt));return it=bt%4*6,it===0?(kt.push(Tt>>16&255),kt.push(Tt>>8&255),kt.push(Tt&255)):it===18?(kt.push(Tt>>10&255),kt.push(Tt>>2&255)):it===12&&kt.push(Tt>>4&255),new Uint8Array(kt)}function representYamlBinary(nt){var rt="",it=0,vt,bt,wt=nt.length,Tt=BASE64_MAP;for(vt=0;vt<wt;vt++)vt%3===0&&vt&&(rt+=Tt[it>>18&63],rt+=Tt[it>>12&63],rt+=Tt[it>>6&63],rt+=Tt[it&63]),it=(it<<8)+nt[vt];return bt=wt%3,bt===0?(rt+=Tt[it>>18&63],rt+=Tt[it>>12&63],rt+=Tt[it>>6&63],rt+=Tt[it&63]):bt===2?(rt+=Tt[it>>10&63],rt+=Tt[it>>4&63],rt+=Tt[it<<2&63],rt+=Tt[64]):bt===1&&(rt+=Tt[it>>2&63],rt+=Tt[it<<4&63],rt+=Tt[64],rt+=Tt[64]),rt}function isBinary(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(nt){if(nt===null)return!0;var rt=[],it,vt,bt,wt,Tt,kt=nt;for(it=0,vt=kt.length;it<vt;it+=1){if(bt=kt[it],Tt=!1,_toString$2.call(bt)!=="[object Object]")return!1;for(wt in bt)if(_hasOwnProperty$3.call(bt,wt))if(!Tt)Tt=!0;else return!1;if(!Tt)return!1;if(rt.indexOf(wt)===-1)rt.push(wt);else return!1}return!0}function constructYamlOmap(nt){return nt!==null?nt:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(nt){if(nt===null)return!0;var rt,it,vt,bt,wt,Tt=nt;for(wt=new Array(Tt.length),rt=0,it=Tt.length;rt<it;rt+=1){if(vt=Tt[rt],_toString$1.call(vt)!=="[object Object]"||(bt=Object.keys(vt),bt.length!==1))return!1;wt[rt]=[bt[0],vt[bt[0]]]}return!0}function constructYamlPairs(nt){if(nt===null)return[];var rt,it,vt,bt,wt,Tt=nt;for(wt=new Array(Tt.length),rt=0,it=Tt.length;rt<it;rt+=1)vt=Tt[rt],bt=Object.keys(vt),wt[rt]=[bt[0],vt[bt[0]]];return wt}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet(nt){return nt!==null?nt:{}}var set$1=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge$1],explicit:[binary,omap,pairs,set$1]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(nt){return Object.prototype.toString.call(nt)}function is_EOL(nt){return nt===10||nt===13}function is_WHITE_SPACE(nt){return nt===9||nt===32}function is_WS_OR_EOL(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet(it),new exception(rt,it)}function throwError(nt,rt){throw generateError(nt,rt)}function throwWarning(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError(nt,rt))}var directiveHandlers={YAML:function nt(rt,it,vt){var bt,wt,Tt;rt.version!==null&&throwError(rt,"duplication of %YAML directive"),vt.length!==1&&throwError(rt,"YAML directive accepts exactly one argument"),bt=/^([0-9]+)\.([0-9]+)$/.exec(vt[0]),bt===null&&throwError(rt,"ill-formed argument of the YAML directive"),wt=parseInt(bt[1],10),Tt=parseInt(bt[2],10),wt!==1&&throwError(rt,"unacceptable YAML version of the document"),rt.version=vt[0],rt.checkLineBreaks=Tt<2,Tt!==1&&Tt!==2&&throwWarning(rt,"unsupported YAML version of the document")},TAG:function nt(rt,it,vt){var bt,wt;vt.length!==2&&throwError(rt,"TAG directive accepts exactly two arguments"),bt=vt[0],wt=vt[1],PATTERN_TAG_HANDLE.test(bt)||throwError(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(rt.tagMap,bt)&&throwError(rt,'there is a previously declared suffix for "'+bt+'" tag handle'),PATTERN_TAG_URI.test(wt)||throwError(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{wt=decodeURIComponent(wt)}catch{throwError(rt,"tag prefix is malformed: "+wt)}rt.tagMap[bt]=wt}};function captureSegment(nt,rt,it,vt){var bt,wt,Tt,kt;if(rt<it){if(kt=nt.input.slice(rt,it),vt)for(bt=0,wt=kt.length;bt<wt;bt+=1)Tt=kt.charCodeAt(bt),Tt===9||32<=Tt&&Tt<=1114111||throwError(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(kt)&&throwError(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings(nt,rt,it,vt){var bt,wt,Tt,kt;for(common.isObject(it)||throwError(nt,"cannot merge mappings; the provided source object is unacceptable"),bt=Object.keys(it),Tt=0,kt=bt.length;Tt<kt;Tt+=1)wt=bt[Tt],_hasOwnProperty$1.call(rt,wt)||(rt[wt]=it[wt],vt[wt]=!0)}function storeMappingPair(nt,rt,it,vt,bt,wt,Tt,kt,Lt){var Mt,Nt;if(Array.isArray(bt))for(bt=Array.prototype.slice.call(bt),Mt=0,Nt=bt.length;Mt<Nt;Mt+=1)Array.isArray(bt[Mt])&&throwError(nt,"nested arrays are not supported inside keys"),typeof bt=="object"&&_class(bt[Mt])==="[object Object]"&&(bt[Mt]="[object Object]");if(typeof bt=="object"&&_class(bt)==="[object Object]"&&(bt="[object Object]"),bt=String(bt),rt===null&&(rt={}),vt==="tag:yaml.org,2002:merge")if(Array.isArray(wt))for(Mt=0,Nt=wt.length;Mt<Nt;Mt+=1)mergeMappings(nt,rt,wt[Mt],it);else mergeMappings(nt,rt,wt,it);else!nt.json&&!_hasOwnProperty$1.call(it,bt)&&_hasOwnProperty$1.call(rt,bt)&&(nt.line=Tt||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError(nt,"duplicated mapping key")),bt==="__proto__"?Object.defineProperty(rt,bt,{configurable:!0,enumerable:!0,writable:!0,value:wt}):rt[bt]=wt,delete it[bt];return rt}function readLineBreak(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace(nt,rt,it){for(var vt=0,bt=nt.input.charCodeAt(nt.position);bt!==0;){for(;is_WHITE_SPACE(bt);)bt===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),bt=nt.input.charCodeAt(++nt.position);if(rt&&bt===35)do bt=nt.input.charCodeAt(++nt.position);while(bt!==10&&bt!==13&&bt!==0);if(is_EOL(bt))for(readLineBreak(nt),bt=nt.input.charCodeAt(nt.position),vt++,nt.lineIndent=0;bt===32;)nt.lineIndent++,bt=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&vt!==0&&nt.lineIndent<it&&throwWarning(nt,"deficient indentation"),vt}function testDocumentSeparator(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL(it)))}function writeFoldedLines(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common.repeat(`
`,rt-1))}function readPlainScalar(nt,rt,it){var vt,bt,wt,Tt,kt,Lt,Mt,Nt,zt=nt.kind,Ht=nt.result,Wt;if(Wt=nt.input.charCodeAt(nt.position),is_WS_OR_EOL(Wt)||is_FLOW_INDICATOR(Wt)||Wt===35||Wt===38||Wt===42||Wt===33||Wt===124||Wt===62||Wt===39||Wt===34||Wt===37||Wt===64||Wt===96||(Wt===63||Wt===45)&&(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(bt)||it&&is_FLOW_INDICATOR(bt)))return!1;for(nt.kind="scalar",nt.result="",wt=Tt=nt.position,kt=!1;Wt!==0;){if(Wt===58){if(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(bt)||it&&is_FLOW_INDICATOR(bt))break}else if(Wt===35){if(vt=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL(vt))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator(nt)||it&&is_FLOW_INDICATOR(Wt))break;if(is_EOL(Wt))if(Lt=nt.line,Mt=nt.lineStart,Nt=nt.lineIndent,skipSeparationSpace(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Wt=nt.input.charCodeAt(nt.position);continue}else{nt.position=Tt,nt.line=Lt,nt.lineStart=Mt,nt.lineIndent=Nt;break}}kt&&(captureSegment(nt,wt,Tt,!1),writeFoldedLines(nt,nt.line-Lt),wt=Tt=nt.position,kt=!1),is_WHITE_SPACE(Wt)||(Tt=nt.position+1),Wt=nt.input.charCodeAt(++nt.position)}return captureSegment(nt,wt,Tt,!1),nt.result?!0:(nt.kind=zt,nt.result=Ht,!1)}function readSingleQuotedScalar(nt,rt){var it,vt,bt;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,vt=bt=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment(nt,vt,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)vt=nt.position,nt.position++,bt=nt.position;else return!0;else is_EOL(it)?(captureSegment(nt,vt,bt,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),vt=bt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,bt=nt.position);throwError(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(nt,rt){var it,vt,bt,wt,Tt,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=vt=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL(kt))skipSeparationSpace(nt,!1,rt);else if(kt<256&&simpleEscapeCheck[kt])nt.result+=simpleEscapeMap[kt],nt.position++;else if((Tt=escapedHexLen(kt))>0){for(bt=Tt,wt=0;bt>0;bt--)kt=nt.input.charCodeAt(++nt.position),(Tt=fromHexCode(kt))>=0?wt=(wt<<4)+Tt:throwError(nt,"expected hexadecimal character");nt.result+=charFromCodepoint(wt),nt.position++}else throwError(nt,"unknown escape sequence");it=vt=nt.position}else is_EOL(kt)?(captureSegment(nt,it,vt,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),it=vt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,vt=nt.position)}throwError(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(nt,rt){var it=!0,vt,bt,wt,Tt=nt.tag,kt,Lt=nt.anchor,Mt,Nt,zt,Ht,Wt,Zt=Object.create(null),tn,Yt,nn,rn;if(rn=nt.input.charCodeAt(nt.position),rn===91)Nt=93,Wt=!1,kt=[];else if(rn===123)Nt=125,Wt=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),rn=nt.input.charCodeAt(++nt.position);rn!==0;){if(skipSeparationSpace(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===Nt)return nt.position++,nt.tag=Tt,nt.anchor=Lt,nt.kind=Wt?"mapping":"sequence",nt.result=kt,!0;it?rn===44&&throwError(nt,"expected the node content, but found ','"):throwError(nt,"missed comma between flow collection entries"),Yt=tn=nn=null,zt=Ht=!1,rn===63&&(Mt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(Mt)&&(zt=Ht=!0,nt.position++,skipSeparationSpace(nt,!0,rt))),vt=nt.line,bt=nt.lineStart,wt=nt.position,composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Yt=nt.tag,tn=nt.result,skipSeparationSpace(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),(Ht||nt.line===vt)&&rn===58&&(zt=!0,rn=nt.input.charCodeAt(++nt.position),skipSeparationSpace(nt,!0,rt),composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),nn=nt.result),Wt?storeMappingPair(nt,kt,Zt,Yt,tn,nn,vt,bt,wt):zt?kt.push(storeMappingPair(nt,null,Zt,Yt,tn,nn,vt,bt,wt)):kt.push(tn),skipSeparationSpace(nt,!0,rt),rn=nt.input.charCodeAt(nt.position),rn===44?(it=!0,rn=nt.input.charCodeAt(++nt.position)):it=!1}throwError(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar(nt,rt){var it,vt,bt=CHOMPING_CLIP,wt=!1,Tt=!1,kt=rt,Lt=0,Mt=!1,Nt,zt;if(zt=nt.input.charCodeAt(nt.position),zt===124)vt=!1;else if(zt===62)vt=!0;else return!1;for(nt.kind="scalar",nt.result="";zt!==0;)if(zt=nt.input.charCodeAt(++nt.position),zt===43||zt===45)CHOMPING_CLIP===bt?bt=zt===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(nt,"repeat of a chomping mode identifier");else if((Nt=fromDecimalCode(zt))>=0)Nt===0?throwError(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Tt?throwError(nt,"repeat of an indentation width identifier"):(kt=rt+Nt-1,Tt=!0);else break;if(is_WHITE_SPACE(zt)){do zt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE(zt));if(zt===35)do zt=nt.input.charCodeAt(++nt.position);while(!is_EOL(zt)&&zt!==0)}for(;zt!==0;){for(readLineBreak(nt),nt.lineIndent=0,zt=nt.input.charCodeAt(nt.position);(!Tt||nt.lineIndent<kt)&&zt===32;)nt.lineIndent++,zt=nt.input.charCodeAt(++nt.position);if(!Tt&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL(zt)){Lt++;continue}if(nt.lineIndent<kt){bt===CHOMPING_KEEP?nt.result+=common.repeat(`
`,wt?1+Lt:Lt):bt===CHOMPING_CLIP&&wt&&(nt.result+=`
`);break}for(vt?is_WHITE_SPACE(zt)?(Mt=!0,nt.result+=common.repeat(`
`,wt?1+Lt:Lt)):Mt?(Mt=!1,nt.result+=common.repeat(`
`,Lt+1)):Lt===0?wt&&(nt.result+=" "):nt.result+=common.repeat(`
`,Lt):nt.result+=common.repeat(`
`,wt?1+Lt:Lt),wt=!0,Tt=!0,Lt=0,it=nt.position;!is_EOL(zt)&&zt!==0;)zt=nt.input.charCodeAt(++nt.position);captureSegment(nt,it,nt.position,!1)}return!0}function readBlockSequence(nt,rt){var it,vt=nt.tag,bt=nt.anchor,wt=[],Tt,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=wt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Tt=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL(Tt))));){if(kt=!0,nt.position++,skipSeparationSpace(nt,!0,-1)&&nt.lineIndent<=rt){wt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode(nt,rt,CONTEXT_BLOCK_IN,!1,!0),wt.push(nt.result),skipSeparationSpace(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=vt,nt.anchor=bt,nt.kind="sequence",nt.result=wt,!0):!1}function readBlockMapping(nt,rt,it){var vt,bt,wt,Tt,kt,Lt,Mt=nt.tag,Nt=nt.anchor,zt={},Ht=Object.create(null),Wt=null,Zt=null,tn=null,Yt=!1,nn=!1,rn;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=zt),rn=nt.input.charCodeAt(nt.position);rn!==0;){if(!Yt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),vt=nt.input.charCodeAt(nt.position+1),wt=nt.line,(rn===63||rn===58)&&is_WS_OR_EOL(vt))rn===63?(Yt&&(storeMappingPair(nt,zt,Ht,Wt,Zt,null,Tt,kt,Lt),Wt=Zt=tn=null),nn=!0,Yt=!0,bt=!0):Yt?(Yt=!1,bt=!0):throwError(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,rn=vt;else{if(Tt=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode(nt,it,CONTEXT_FLOW_OUT,!1,!0))break;if(nt.line===wt){for(rn=nt.input.charCodeAt(nt.position);is_WHITE_SPACE(rn);)rn=nt.input.charCodeAt(++nt.position);if(rn===58)rn=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL(rn)||throwError(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Yt&&(storeMappingPair(nt,zt,Ht,Wt,Zt,null,Tt,kt,Lt),Wt=Zt=tn=null),nn=!0,Yt=!1,bt=!1,Wt=nt.tag,Zt=nt.result;else if(nn)throwError(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=Mt,nt.anchor=Nt,!0}else if(nn)throwError(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=Mt,nt.anchor=Nt,!0}if((nt.line===wt||nt.lineIndent>rt)&&(Yt&&(Tt=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode(nt,rt,CONTEXT_BLOCK_OUT,!0,bt)&&(Yt?Zt=nt.result:tn=nt.result),Yt||(storeMappingPair(nt,zt,Ht,Wt,Zt,tn,Tt,kt,Lt),Wt=Zt=tn=null),skipSeparationSpace(nt,!0,-1),rn=nt.input.charCodeAt(nt.position)),(nt.line===wt||nt.lineIndent>rt)&&rn!==0)throwError(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Yt&&storeMappingPair(nt,zt,Ht,Wt,Zt,null,Tt,kt,Lt),nn&&(nt.tag=Mt,nt.anchor=Nt,nt.kind="mapping",nt.result=zt),nn}function readTagProperty(nt){var rt,it=!1,vt=!1,bt,wt,Tt;if(Tt=nt.input.charCodeAt(nt.position),Tt!==33)return!1;if(nt.tag!==null&&throwError(nt,"duplication of a tag property"),Tt=nt.input.charCodeAt(++nt.position),Tt===60?(it=!0,Tt=nt.input.charCodeAt(++nt.position)):Tt===33?(vt=!0,bt="!!",Tt=nt.input.charCodeAt(++nt.position)):bt="!",rt=nt.position,it){do Tt=nt.input.charCodeAt(++nt.position);while(Tt!==0&&Tt!==62);nt.position<nt.length?(wt=nt.input.slice(rt,nt.position),Tt=nt.input.charCodeAt(++nt.position)):throwError(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Tt!==0&&!is_WS_OR_EOL(Tt);)Tt===33&&(vt?throwError(nt,"tag suffix cannot contain exclamation marks"):(bt=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE.test(bt)||throwError(nt,"named tag handle cannot contain such characters"),vt=!0,rt=nt.position+1)),Tt=nt.input.charCodeAt(++nt.position);wt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS.test(wt)&&throwError(nt,"tag suffix cannot contain flow indicator characters")}wt&&!PATTERN_TAG_URI.test(wt)&&throwError(nt,"tag name cannot contain such characters: "+wt);try{wt=decodeURIComponent(wt)}catch{throwError(nt,"tag name is malformed: "+wt)}return it?nt.tag=wt:_hasOwnProperty$1.call(nt.tagMap,bt)?nt.tag=nt.tagMap[bt]+wt:bt==="!"?nt.tag="!"+wt:bt==="!!"?nt.tag="tag:yaml.org,2002:"+wt:throwError(nt,'undeclared tag handle "'+bt+'"'),!0}function readAnchorProperty(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL(it)&&!is_FLOW_INDICATOR(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias(nt){var rt,it,vt;if(vt=nt.input.charCodeAt(nt.position),vt!==42)return!1;for(vt=nt.input.charCodeAt(++nt.position),rt=nt.position;vt!==0&&!is_WS_OR_EOL(vt)&&!is_FLOW_INDICATOR(vt);)vt=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1.call(nt.anchorMap,it)||throwError(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace(nt,!0,-1),!0}function composeNode(nt,rt,it,vt,bt){var wt,Tt,kt,Lt=1,Mt=!1,Nt=!1,zt,Ht,Wt,Zt,tn,Yt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,wt=Tt=kt=CONTEXT_BLOCK_OUT===it||CONTEXT_BLOCK_IN===it,vt&&skipSeparationSpace(nt,!0,-1)&&(Mt=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty(nt)||readAnchorProperty(nt);)skipSeparationSpace(nt,!0,-1)?(Mt=!0,kt=wt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=Mt||bt),(Lt===1||CONTEXT_BLOCK_OUT===it)&&(CONTEXT_FLOW_IN===it||CONTEXT_FLOW_OUT===it?tn=rt:tn=rt+1,Yt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence(nt,Yt)||readBlockMapping(nt,Yt,tn))||readFlowCollection(nt,tn)?Nt=!0:(Tt&&readBlockScalar(nt,tn)||readSingleQuotedScalar(nt,tn)||readDoubleQuotedScalar(nt,tn)?Nt=!0:readAlias(nt)?(Nt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError(nt,"alias node should not have any properties")):readPlainScalar(nt,tn,CONTEXT_FLOW_IN===it)&&(Nt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Nt=kt&&readBlockSequence(nt,Yt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),zt=0,Ht=nt.implicitTypes.length;zt<Ht;zt+=1)if(Zt=nt.implicitTypes[zt],Zt.resolve(nt.result)){nt.result=Zt.construct(nt.result),nt.tag=Zt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Zt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Zt=null,Wt=nt.typeMap.multi[nt.kind||"fallback"],zt=0,Ht=Wt.length;zt<Ht;zt+=1)if(nt.tag.slice(0,Wt[zt].tag.length)===Wt[zt].tag){Zt=Wt[zt];break}Zt||throwError(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Zt.kind!==nt.kind&&throwError(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Zt.kind+'", not "'+nt.kind+'"'),Zt.resolve(nt.result,nt.tag)?(nt.result=Zt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Nt}function readDocument(nt){var rt=nt.position,it,vt,bt,wt=!1,Tt;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Tt=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace(nt,!0,-1),Tt=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Tt!==37));){for(wt=!0,Tt=nt.input.charCodeAt(++nt.position),it=nt.position;Tt!==0&&!is_WS_OR_EOL(Tt);)Tt=nt.input.charCodeAt(++nt.position);for(vt=nt.input.slice(it,nt.position),bt=[],vt.length<1&&throwError(nt,"directive name must not be less than one character in length");Tt!==0;){for(;is_WHITE_SPACE(Tt);)Tt=nt.input.charCodeAt(++nt.position);if(Tt===35){do Tt=nt.input.charCodeAt(++nt.position);while(Tt!==0&&!is_EOL(Tt));break}if(is_EOL(Tt))break;for(it=nt.position;Tt!==0&&!is_WS_OR_EOL(Tt);)Tt=nt.input.charCodeAt(++nt.position);bt.push(nt.input.slice(it,nt.position))}Tt!==0&&readLineBreak(nt),_hasOwnProperty$1.call(directiveHandlers,vt)?directiveHandlers[vt](nt,vt,bt):throwWarning(nt,'unknown document directive "'+vt+'"')}if(skipSeparationSpace(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace(nt,!0,-1)):wt&&throwError(nt,"directives end mark is expected"),composeNode(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(nt.input.slice(rt,nt.position))&&throwWarning(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace(nt,!0,-1));return}if(nt.position<nt.length-1)throwError(nt,"end of the stream or a document separator is expected");else return}function loadDocuments(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1(nt,rt),vt=nt.indexOf("\0");for(vt!==-1&&(it.position=vt,throwError(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument(it);return it.documents}function loadAll$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var vt=loadDocuments(nt,it);if(typeof rt!="function")return vt;for(var bt=0,wt=vt.length;bt<wt;bt+=1)rt(vt[bt])}function load$1(nt,rt){var it=loadDocuments(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader={loadAll:loadAll_1,load:load_1},FAILSAFE_SCHEMA=failsafe,load=loader.load;const frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function extractFrontMatter(nt,rt){var it;const vt=nt.match(frontMatterRegex);if(vt){const bt=load(vt[1],{schema:FAILSAFE_SCHEMA});return bt!=null&&bt.title&&((it=rt.setDiagramTitle)==null||it.call(rt,bt.title)),nt.slice(vt[0].length)}else return nt}const directive$1=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyComment=/\s*%%.*\n/gm,detectors={},detectType=function(nt,rt){nt=nt.replace(frontMatterRegex,"").replace(directive$1,"").replace(anyComment,`
`);for(const[it,{detector:vt}]of Object.entries(detectors))if(vt(nt,rt))return it;throw new Error(`No diagram type detected for text: ${nt}`)},addDetector=(nt,rt,it)=>{if(detectors[nt])throw new Error(`Detector with key ${nt} already exists`);detectors[nt]={detector:rt,loader:it},log$1.debug(`Detector with key ${nt} added${it?" with loader":""}`)},getDiagramLoader=nt=>detectors[nt].loader,assignWithDepth=function(nt,rt,it){const{depth:vt,clobber:bt}=Object.assign({depth:2,clobber:!1},it);return Array.isArray(rt)&&!Array.isArray(nt)?(rt.forEach(wt=>assignWithDepth(nt,wt,it)),nt):Array.isArray(rt)&&Array.isArray(nt)?(rt.forEach(wt=>{nt.includes(wt)||nt.push(wt)}),nt):nt===void 0||vt<=0?nt!=null&&typeof nt=="object"&&typeof rt=="object"?Object.assign(nt,rt):rt:(rt!==void 0&&typeof nt=="object"&&typeof rt=="object"&&Object.keys(rt).forEach(wt=>{typeof rt[wt]=="object"&&(nt[wt]===void 0||typeof nt[wt]=="object")?(nt[wt]===void 0&&(nt[wt]=Array.isArray(rt[wt])?[]:{}),nt[wt]=assignWithDepth(nt[wt],rt[wt],{depth:vt-1,clobber:bt})):(bt||typeof nt[wt]!="object"&&typeof rt[wt]!="object")&&(nt[wt]=rt[wt])}),nt)},assignWithDepth$1=assignWithDepth,d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directive=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=function(nt,rt){const it=detectDirective(nt,/(?:init\b)|(?:initialize\b)/);let vt={};if(Array.isArray(it)){const bt=it.map(wt=>wt.args);directiveSanitizer(bt),vt=assignWithDepth$1(vt,[...bt])}else vt=it.args;if(vt){let bt=detectType(nt,rt);["config"].forEach(wt=>{vt[wt]!==void 0&&(bt==="flowchart-v2"&&(bt="flowchart"),vt[bt]=vt[wt],delete vt[wt])})}return vt},detectDirective=function(nt,rt=null){try{const it=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");nt=nt.trim().replace(it,"").replace(/'/gm,'"'),log$1.debug(`Detecting diagram directive${rt!==null?" type:"+rt:""} based on the text:${nt}`);let vt;const bt=[];for(;(vt=directive.exec(nt))!==null;)if(vt.index===directive.lastIndex&&directive.lastIndex++,vt&&!rt||rt&&vt[1]&&vt[1].match(rt)||rt&&vt[2]&&vt[2].match(rt)){const wt=vt[1]?vt[1]:vt[2],Tt=vt[3]?vt[3].trim():vt[4]?JSON.parse(vt[4].trim()):null;bt.push({type:wt,args:Tt})}return bt.length===0&&bt.push({type:nt,args:null}),bt.length===1?bt[0]:bt}catch(it){return log$1.error(`ERROR: ${it.message} - Unable to parse directive
      ${rt!==null?" type:"+rt:""} based on the text:${nt}`),{type:null,args:null}}},isSubstringInArray=function(nt,rt){for(const[it,vt]of rt.entries())if(vt.match(nt))return it;return-1};function interpolateToCurve(nt,rt){if(!nt)return rt;const it=`curve${nt.charAt(0).toUpperCase()+nt.slice(1)}`;return d3CurveTypes[it]||rt}function formatUrl(nt,rt){const it=nt.trim();if(it)return rt.securityLevel!=="loose"?sanitizeUrl_1(it):it}const runFunc=(nt,...rt)=>{const it=nt.split("."),vt=it.length-1,bt=it[vt];let wt=window;for(let Tt=0;Tt<vt;Tt++)if(wt=wt[it[Tt]],!wt)return;wt[bt](...rt)};function distance(nt,rt){return nt&&rt?Math.sqrt(Math.pow(rt.x-nt.x,2)+Math.pow(rt.y-nt.y,2)):0}function traverseEdge(nt){let rt,it=0;nt.forEach(wt=>{it+=distance(wt,rt),rt=wt});let vt=it/2,bt;return rt=void 0,nt.forEach(wt=>{if(rt&&!bt){const Tt=distance(wt,rt);if(Tt<vt)vt-=Tt;else{const kt=vt/Tt;kt<=0&&(bt=rt),kt>=1&&(bt={x:wt.x,y:wt.y}),kt>0&&kt<1&&(bt={x:(1-kt)*rt.x+kt*wt.x,y:(1-kt)*rt.y+kt*wt.y})}}rt=wt}),bt}function calcLabelPosition(nt){return nt.length===1?nt[0]:traverseEdge(nt)}const calcCardinalityPosition=(nt,rt,it)=>{let vt;log$1.info(`our points ${JSON.stringify(rt)}`),rt[0]!==it&&(rt=rt.reverse());let wt=25,Tt;vt=void 0,rt.forEach(Nt=>{if(vt&&!Tt){const zt=distance(Nt,vt);if(zt<wt)wt-=zt;else{const Ht=wt/zt;Ht<=0&&(Tt=vt),Ht>=1&&(Tt={x:Nt.x,y:Nt.y}),Ht>0&&Ht<1&&(Tt={x:(1-Ht)*vt.x+Ht*Nt.x,y:(1-Ht)*vt.y+Ht*Nt.y})}}vt=Nt});const kt=nt?10:5,Lt=Math.atan2(rt[0].y-Tt.y,rt[0].x-Tt.x),Mt={x:0,y:0};return Mt.x=Math.sin(Lt)*kt+(rt[0].x+Tt.x)/2,Mt.y=-Math.cos(Lt)*kt+(rt[0].y+Tt.y)/2,Mt};function calcTerminalLabelPosition(nt,rt,it){let vt=JSON.parse(JSON.stringify(it)),bt;log$1.info("our points",vt),rt!=="start_left"&&rt!=="start_right"&&(vt=vt.reverse()),vt.forEach(zt=>{bt=zt});let Tt=25+nt,kt;bt=void 0,vt.forEach(zt=>{if(bt&&!kt){const Ht=distance(zt,bt);if(Ht<Tt)Tt-=Ht;else{const Wt=Tt/Ht;Wt<=0&&(kt=bt),Wt>=1&&(kt={x:zt.x,y:zt.y}),Wt>0&&Wt<1&&(kt={x:(1-Wt)*bt.x+Wt*zt.x,y:(1-Wt)*bt.y+Wt*zt.y})}}bt=zt});const Lt=10+nt*.5,Mt=Math.atan2(vt[0].y-kt.y,vt[0].x-kt.x),Nt={x:0,y:0};return Nt.x=Math.sin(Mt)*Lt+(vt[0].x+kt.x)/2,Nt.y=-Math.cos(Mt)*Lt+(vt[0].y+kt.y)/2,rt==="start_left"&&(Nt.x=Math.sin(Mt+Math.PI)*Lt+(vt[0].x+kt.x)/2,Nt.y=-Math.cos(Mt+Math.PI)*Lt+(vt[0].y+kt.y)/2),rt==="end_right"&&(Nt.x=Math.sin(Mt-Math.PI)*Lt+(vt[0].x+kt.x)/2-5,Nt.y=-Math.cos(Mt-Math.PI)*Lt+(vt[0].y+kt.y)/2-5),rt==="end_left"&&(Nt.x=Math.sin(Mt)*Lt+(vt[0].x+kt.x)/2-5,Nt.y=-Math.cos(Mt)*Lt+(vt[0].y+kt.y)/2-5),Nt}function getStylesFromArray(nt){let rt="",it="";for(const vt of nt)vt!==void 0&&(vt.startsWith("color:")||vt.startsWith("text-align:")?it=it+vt+";":rt=rt+vt+";");return{style:rt,labelStyle:it}}let cnt=0;const generateId$1=()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt);function makeid(nt){let rt="";const it="0123456789abcdef",vt=it.length;for(let bt=0;bt<nt;bt++)rt+=it.charAt(Math.floor(Math.random()*vt));return rt}const random=nt=>makeid(nt.length),getTextObj$2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},drawSimpleText=function(nt,rt){const it=rt.text.replace(common$1.lineBreakRegex," "),vt=nt.append("text");vt.attr("x",rt.x),vt.attr("y",rt.y),vt.style("text-anchor",rt.anchor),vt.style("font-family",rt.fontFamily),vt.style("font-size",rt.fontSize),vt.style("font-weight",rt.fontWeight),vt.attr("fill",rt.fill),rt.class!==void 0&&vt.attr("class",rt.class);const bt=vt.append("tspan");return bt.attr("x",rt.x+rt.textMargin*2),bt.attr("fill",rt.fill),bt.text(it),vt},wrapLabel=memoize((nt,rt,it)=>{if(!nt||(it=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},it),common$1.lineBreakRegex.test(nt)))return nt;const vt=nt.split(" "),bt=[];let wt="";return vt.forEach((Tt,kt)=>{const Lt=calculateTextWidth(`${Tt} `,it),Mt=calculateTextWidth(wt,it);if(Lt>rt){const{hyphenatedStrings:Ht,remainingWord:Wt}=breakString(Tt,rt,"-",it);bt.push(wt,...Ht),wt=Wt}else Mt+Lt>=rt?(bt.push(wt),wt=Tt):wt=[wt,Tt].filter(Boolean).join(" ");kt+1===vt.length&&bt.push(wt)}),bt.filter(Tt=>Tt!=="").join(it.joinWith)},(nt,rt,it)=>`${nt}${rt}${it.fontSize}${it.fontWeight}${it.fontFamily}${it.joinWith}`),breakString=memoize((nt,rt,it="-",vt)=>{vt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},vt);const bt=[...nt],wt=[];let Tt="";return bt.forEach((kt,Lt)=>{const Mt=`${Tt}${kt}`;if(calculateTextWidth(Mt,vt)>=rt){const zt=Lt+1,Ht=bt.length===zt,Wt=`${Mt}${it}`;wt.push(Ht?Mt:Wt),Tt=""}else Tt=Mt}),{hyphenatedStrings:wt,remainingWord:Tt}},(nt,rt,it="-",vt)=>`${nt}${rt}${it}${vt.fontSize}${vt.fontWeight}${vt.fontFamily}`);function calculateTextHeight(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},rt),calculateTextDimensions(nt,rt).height}function calculateTextWidth(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt),calculateTextDimensions(nt,rt).width}const calculateTextDimensions=memoize((nt,rt)=>{rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt);const{fontSize:it,fontFamily:vt,fontWeight:bt}=rt;if(!nt)return{width:0,height:0};const wt=["sans-serif",vt],Tt=nt.split(common$1.lineBreakRegex),kt=[],Lt=select("body");if(!Lt.remove)return{width:0,height:0,lineHeight:0};const Mt=Lt.append("svg");for(const zt of wt){let Ht=0;const Wt={width:0,height:0,lineHeight:0};for(const Zt of Tt){const tn=getTextObj$2();tn.text=Zt;const Yt=drawSimpleText(Mt,tn).style("font-size",it).style("font-weight",bt).style("font-family",zt),nn=(Yt._groups||Yt)[0][0].getBBox();Wt.width=Math.round(Math.max(Wt.width,nn.width)),Ht=Math.round(nn.height),Wt.height+=Ht,Wt.lineHeight=Math.round(Math.max(Wt.lineHeight,Ht))}kt.push(Wt)}Mt.remove();const Nt=isNaN(kt[1].height)||isNaN(kt[1].width)||isNaN(kt[1].lineHeight)||kt[0].height>kt[1].height&&kt[0].width>kt[1].width&&kt[0].lineHeight>kt[1].lineHeight?0:1;return kt[Nt]},(nt,rt)=>`${nt}${rt.fontSize}${rt.fontWeight}${rt.fontFamily}`),initIdGenerator=class{constructor(rt,it){this.deterministic=rt,this.seed=it,this.count=it?it.length:0}next(){return this.deterministic?this.count++:Date.now()}};let decoder;const entityDecode=function(nt){return decoder=decoder||document.createElement("div"),nt=escape(nt).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=nt,unescape(decoder.textContent)},directiveSanitizer=nt=>{if(log$1.debug("directiveSanitizer called with",nt),typeof nt=="object"&&(nt.length?nt.forEach(rt=>directiveSanitizer(rt)):Object.keys(nt).forEach(rt=>{log$1.debug("Checking key",rt),rt.startsWith("__")&&(log$1.debug("sanitize deleting __ option",rt),delete nt[rt]),rt.includes("proto")&&(log$1.debug("sanitize deleting proto option",rt),delete nt[rt]),rt.includes("constr")&&(log$1.debug("sanitize deleting constr option",rt),delete nt[rt]),rt.includes("themeCSS")&&(log$1.debug("sanitizing themeCss option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("fontFamily")&&(log$1.debug("sanitizing fontFamily option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("altFontFamily")&&(log$1.debug("sanitizing altFontFamily option"),nt[rt]=sanitizeCss(nt[rt])),configKeys.includes(rt)?typeof nt[rt]=="object"&&(log$1.debug("sanitize deleting object",rt),directiveSanitizer(nt[rt])):(log$1.debug("sanitize deleting option",rt),delete nt[rt])})),nt.themeVariables){const rt=Object.keys(nt.themeVariables);for(const it of rt){const vt=nt.themeVariables[it];vt&&vt.match&&!vt.match(/^[\d "#%(),.;A-Za-z]+$/)&&(nt.themeVariables[it]="")}}log$1.debug("After sanitization",nt)},sanitizeCss=nt=>{let rt=0,it=0;for(const vt of nt){if(rt<it)return"{ /* ERROR: Unbalanced CSS */ }";vt==="{"?rt++:vt==="}"&&it++}return rt!==it?"{ /* ERROR: Unbalanced CSS */ }":nt};function isDetailedError(nt){return"str"in nt}function getErrorMessage(nt){return nt instanceof Error?nt.message:String(nt)}const insertTitle=(nt,rt,it,vt)=>{if(!vt)return;const bt=nt.node().getBBox();nt.append("text").text(vt).attr("x",bt.x+bt.width/2).attr("y",-it).attr("class",rt)},utils={assignWithDepth:assignWithDepth$1,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId:generateId$1,random,runFunc,entityDecode,initIdGenerator,directiveSanitizer,sanitizeCss,insertTitle},name="mermaid",version$1="9.3.0",description$1="Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main="./dist/mermaid.min.js",module$1="./dist/mermaid.core.mjs",types="./dist/mermaid.d.ts",exports$1={".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords=["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts={clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},repository={type:"git",url:"https://github.com/mermaid-js/mermaid"},author="Knut Sveidqvist",license="MIT",standard={ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies={"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies={"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},files=["dist","README.md"],sideEffects=["**/*.css","**/*.scss"],pkg={name,version:version$1,description:description$1,main,module:module$1,types,exports:exports$1,keywords,scripts,repository,author,license,standard,dependencies,devDependencies,files,sideEffects},defaultConfig=Object.freeze(config$2);let siteConfig=assignWithDepth$1({},defaultConfig),configFromInitialize,directives=[],currentConfig=assignWithDepth$1({},defaultConfig);const updateCurrentConfig=(nt,rt)=>{let it=assignWithDepth$1({},nt),vt={};for(const bt of rt)sanitize(bt),vt=assignWithDepth$1(vt,bt);if(it=assignWithDepth$1(it,vt),vt.theme&&vt.theme in theme){const bt=assignWithDepth$1({},configFromInitialize),wt=assignWithDepth$1(bt.themeVariables||{},vt.themeVariables);it.theme&&it.theme in theme&&(it.themeVariables=theme[it.theme].getThemeVariables(wt))}return currentConfig=it,checkConfig(currentConfig),currentConfig},setSiteConfig=nt=>(siteConfig=assignWithDepth$1({},defaultConfig),siteConfig=assignWithDepth$1(siteConfig,nt),nt.theme&&theme[nt.theme]&&(siteConfig.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),saveConfigFromInitialize=nt=>{configFromInitialize=assignWithDepth$1({},nt)},updateSiteConfig=nt=>(siteConfig=assignWithDepth$1(siteConfig,nt),updateCurrentConfig(siteConfig,directives),siteConfig),getSiteConfig=()=>assignWithDepth$1({},siteConfig),setConfig=nt=>(checkConfig(nt),assignWithDepth$1(currentConfig,nt),getConfig$1()),getConfig$1=()=>assignWithDepth$1({},currentConfig),sanitize=nt=>{var rt;["secure",...(rt=siteConfig.secure)!=null?rt:[]].forEach(it=>{nt[it]!==void 0&&(log$1.debug(`Denied attempt to modify a secure key ${it}`,nt[it]),delete nt[it])}),Object.keys(nt).forEach(it=>{it.indexOf("__")===0&&delete nt[it]}),Object.keys(nt).forEach(it=>{typeof nt[it]=="string"&&(nt[it].includes("<")||nt[it].includes(">")||nt[it].includes("url(data:"))&&delete nt[it],typeof nt[it]=="object"&&sanitize(nt[it])})},addDirective=nt=>{nt.fontFamily&&(nt.themeVariables?nt.themeVariables.fontFamily||(nt.themeVariables={fontFamily:nt.fontFamily}):nt.themeVariables={fontFamily:nt.fontFamily}),directives.push(nt),updateCurrentConfig(siteConfig,directives)},reset=(nt=siteConfig)=>{directives=[],updateCurrentConfig(nt,directives)};var ConfigWarning=(nt=>(nt.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",nt))(ConfigWarning||{});const issuedWarnings={},issueWarning=nt=>{issuedWarnings[nt]||(log$1.warn(ConfigWarning[nt]),issuedWarnings[nt]=!0)},checkConfig=nt=>{!nt||(nt.lazyLoadedDiagrams||nt.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},d3Attrs=function(nt,rt){for(let it of rt)nt.attr(it[0],it[1])},calculateSvgSizeAttrs=function(nt,rt,it){let vt=new Map;return it?(vt.set("width","100%"),vt.set("style",`max-width: ${rt}px;`)):(vt.set("height",nt),vt.set("width",rt)),vt},configureSvgSize=function(nt,rt,it,vt){const bt=calculateSvgSizeAttrs(rt,it,vt);d3Attrs(nt,bt)},setupGraphViewbox$1=function(nt,rt,it,vt){const bt=rt.node().getBBox(),wt=bt.width,Tt=bt.height;log$1.info(`SVG bounds: ${wt}x${Tt}`,bt);let kt=0,Lt=0;log$1.info(`Graph bounds: ${kt}x${Lt}`,nt),kt=wt+it*2,Lt=Tt+it*2,log$1.info(`Calculated bounds: ${kt}x${Lt}`),configureSvgSize(rt,Lt,kt,vt);const Mt=`${bt.x-it} ${bt.y-it} ${bt.width+2*it} ${bt.height+2*it}`;rt.attr("viewBox",Mt)},getStyles$e=nt=>`g.classGroup text {
  fill: ${nt.nodeBorder};
  fill: ${nt.classText};
  stroke: none;
  font-family: ${nt.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${nt.classText};
}
.edgeLabel .label rect {
  fill: ${nt.mainBkg};
}
.label text {
  fill: ${nt.classText};
}
.edgeLabel .label span {
  background: ${nt.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${nt.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.classGroup line {
  stroke: ${nt.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${nt.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${nt.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,classStyles=getStyles$e,getStyles$d=nt=>`
  .entityBox {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${nt.attributeBackgroundColorOdd};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${nt.attributeBackgroundColorEven};
    stroke: ${nt.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${nt.tertiaryColor};
    opacity: 0.7;
    background-color: ${nt.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${nt.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }    
`,erStyles=getStyles$d,getStyles$c=()=>"",errorStyles=getStyles$c,getStyles$b=nt=>`.label {
    font-family: ${nt.fontFamily};
    color: ${nt.nodeTextColor||nt.textColor};
  }
  .cluster-label text {
    fill: ${nt.titleColor};
  }
  .cluster-label span {
    color: ${nt.titleColor};
  }

  .label text,span {
    fill: ${nt.nodeTextColor||nt.textColor};
    color: ${nt.nodeTextColor||nt.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${nt.edgeLabelBackground};
      fill: ${nt.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${nt.clusterBkg};
    stroke: ${nt.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  .cluster span {
    color: ${nt.titleColor};
  }
  /* .cluster div {
    color: ${nt.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${nt.fontFamily};
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
`,flowStyles=getStyles$b,getStyles$a=nt=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${nt.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${nt.sectionBkgColor};
  }

  .section2 {
    fill: ${nt.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${nt.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${nt.titleColor};
  }

  .sectionTitle1 {
    fill: ${nt.titleColor};
  }

  .sectionTitle2 {
    fill: ${nt.titleColor};
  }

  .sectionTitle3 {
    fill: ${nt.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${nt.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${nt.fontFamily};
      fill: ${nt.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${nt.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${nt.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${nt.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${nt.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${nt.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${nt.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${nt.taskBkgColor};
    stroke: ${nt.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${nt.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${nt.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${nt.activeTaskBkgColor};
    stroke: ${nt.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${nt.doneTaskBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,ganttStyles=getStyles$a,getStyles$9=()=>"",infoStyles=getStyles$9,getStyles$8=nt=>`
  .pieCircle{
    stroke: ${nt.pieStrokeColor};
    stroke-width : ${nt.pieStrokeWidth};
    opacity : ${nt.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${nt.pieTitleTextSize};
    fill: ${nt.pieTitleTextColor};
    font-family: ${nt.fontFamily};
  }
  .slice {
    font-family: ${nt.fontFamily};
    fill: ${nt.pieSectionTextColor};
    font-size:${nt.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${nt.pieLegendTextColor};
    font-family: ${nt.fontFamily};
    font-size: ${nt.pieLegendTextSize};
  }
`,pieStyles=getStyles$8,getStyles$7=nt=>`

  marker {
    fill: ${nt.relationColor};
    stroke: ${nt.relationColor};
  }

  marker.cross {
    stroke: ${nt.lineColor};
  }

  svg {
    font-family: ${nt.fontFamily};
    font-size: ${nt.fontSize};
  }

  .reqBox {
    fill: ${nt.requirementBackground};
    fill-opacity: 100%;
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${nt.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${nt.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${nt.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${nt.relationLabelColor};
  }

`,requirementStyles=getStyles$7,getStyles$6=nt=>`.actor {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }

  text.actor > tspan {
    fill: ${nt.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${nt.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${nt.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${nt.signalColor};
  }

  #arrowhead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .sequenceNumber {
    fill: ${nt.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${nt.signalColor};
  }

  #crosshead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .messageText {
    fill: ${nt.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${nt.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${nt.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${nt.noteBorderColor};
    fill: ${nt.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${nt.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation1 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation2 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${nt.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
    stroke-width: 2px;
  }
`,sequenceStyles=getStyles$6,getStyles$5=nt=>`
defs #statediagram-barbEnd {
    fill: ${nt.transitionColor};
    stroke: ${nt.transitionColor};
  }
g.stateGroup text {
  fill: ${nt.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${nt.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${nt.stateLabelColor};
}

g.stateGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.stateGroup line {
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${nt.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${nt.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${nt.noteBorderColor};
  fill: ${nt.noteBkgColor};

  text {
    fill: ${nt.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${nt.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}

.stateLabel text {
  fill: ${nt.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node .fork-join {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node circle.state-end {
  fill: ${nt.innerEndBackground};
  stroke: ${nt.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${nt.compositeBackground||nt.background};
  // stroke: ${nt.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${nt.stateBkg||nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${nt.lineColor};
}

.statediagram-cluster rect {
  fill: ${nt.compositeTitleBackground};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${nt.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${nt.stateBorder||nt.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${nt.compositeBackground||nt.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${nt.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${nt.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${nt.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${nt.lineColor};
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,stateStyles=getStyles$5,getStyles$4=nt=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${nt.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${nt.textColor}
  }

  .legend {
    fill: ${nt.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${nt.textColor}
  }

  .face {
    ${nt.faceColor?`fill: ${nt.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${nt.fillType0?`fill: ${nt.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${nt.fillType0?`fill: ${nt.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${nt.fillType0?`fill: ${nt.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${nt.fillType0?`fill: ${nt.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${nt.fillType0?`fill: ${nt.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${nt.fillType0?`fill: ${nt.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${nt.fillType0?`fill: ${nt.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${nt.fillType0?`fill: ${nt.fillType7}`:""};
  }

  .actor-0 {
    ${nt.actor0?`fill: ${nt.actor0}`:""};
  }
  .actor-1 {
    ${nt.actor1?`fill: ${nt.actor1}`:""};
  }
  .actor-2 {
    ${nt.actor2?`fill: ${nt.actor2}`:""};
  }
  .actor-3 {
    ${nt.actor3?`fill: ${nt.actor3}`:""};
  }
  .actor-4 {
    ${nt.actor4?`fill: ${nt.actor4}`:""};
  }
  .actor-5 {
    ${nt.actor5?`fill: ${nt.actor5}`:""};
  }
`,journeyStyles=getStyles$4,getStyles$3=nt=>`.person {
    stroke: ${nt.personBorder};
    fill: ${nt.personBkg};
  }
`,c4Styles=getStyles$3,themes={flowchart:flowStyles,"flowchart-v2":flowStyles,sequence:sequenceStyles,gantt:ganttStyles,classDiagram:classStyles,"classDiagram-v2":classStyles,class:classStyles,stateDiagram:stateStyles,state:stateStyles,info:infoStyles,pie:pieStyles,er:erStyles,error:errorStyles,journey:journeyStyles,requirement:requirementStyles,c4:c4Styles},getStyles$1=(nt,rt,it)=>{let vt="";return nt in themes&&themes[nt]?vt=themes[nt](it):log$1.warn(`No theme found for ${nt}`),` & {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
    fill: ${it.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${it.errorBkgColor};
  }
  & .error-text {
    fill: ${it.errorTextColor};
    stroke: ${it.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${it.lineColor};
    stroke: ${it.lineColor};
  }
  & .marker.cross {
    stroke: ${it.lineColor};
  }

  & svg {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
  }

  ${vt}

  ${rt}
`},addStylesForDiagram=(nt,rt)=>{themes[nt]=rt},getStyles$2=getStyles$1,log=log$1,setLogLevel=setLogLevel$1,getConfig=getConfig$1,sanitizeText$4=nt=>sanitizeText$5(nt,getConfig()),setupGraphViewbox=setupGraphViewbox$1,diagrams={},registerDiagram=(nt,rt,it)=>{if(diagrams[nt])throw new Error(`Diagram ${nt} already registered.`);diagrams[nt]=rt,it&&addDetector(nt,it),addStylesForDiagram(nt,rt.styles),rt.injectUtils&&rt.injectUtils(log,setLogLevel,getConfig,sanitizeText$4,setupGraphViewbox)},getDiagram=nt=>{if(nt in diagrams)return diagrams[nt];throw new Error(`Diagram ${nt} not found.`)};var parser$b=function(){var nt=function(An,Pn,On,kn){for(On=On||{},kn=An.length;kn--;On[An[kn]]=Pn);return On},rt=[1,4],it=[1,7],vt=[1,5],bt=[1,9],wt=[1,6],Tt=[2,6],kt=[1,16],Lt=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],Mt=[8,14,20,22,24,25,27,29,32,37,40],Nt=[8,13,14,20,22,24,25,27,29,32,37,40],zt=[1,26],Ht=[6,8,14,50,55],Wt=[8,14,55],Zt=[1,53],tn=[1,52],Yt=[8,14,30,33,35,38,55],nn=[1,67],rn=[1,68],ln=[1,69],sn=[8,14,33,35,42,55],mn={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(Pn,On,kn,gn,Vn,pn,pr){var yn=pn.length-1;switch(Vn){case 3:return pn[yn];case 4:return pn[yn-1];case 5:return gn.setDirection(pn[yn-3]),pn[yn-1];case 7:gn.setOptions(pn[yn-1]),this.$=pn[yn];break;case 8:pn[yn-1]+=pn[yn],this.$=pn[yn-1];break;case 10:this.$=[];break;case 11:pn[yn-1].push(pn[yn]),this.$=pn[yn-1];break;case 12:this.$=pn[yn-1];break;case 17:this.$=pn[yn].trim(),gn.setAccTitle(this.$);break;case 18:case 19:this.$=pn[yn].trim(),gn.setAccDescription(this.$);break;case 20:gn.addSection(pn[yn].substr(8)),this.$=pn[yn].substr(8);break;case 22:gn.checkout(pn[yn]);break;case 23:gn.branch(pn[yn]);break;case 24:gn.branch(pn[yn-2],pn[yn]);break;case 25:gn.cherryPick(pn[yn],"",void 0);break;case 26:gn.cherryPick(pn[yn-2],"",pn[yn]);break;case 27:case 29:gn.cherryPick(pn[yn-2],"","");break;case 28:gn.cherryPick(pn[yn],"",pn[yn-2]);break;case 30:gn.merge(pn[yn],"","","");break;case 31:gn.merge(pn[yn-2],pn[yn],"","");break;case 32:gn.merge(pn[yn-2],"",pn[yn],"");break;case 33:gn.merge(pn[yn-2],"","",pn[yn]);break;case 34:gn.merge(pn[yn-4],pn[yn],"",pn[yn-2]);break;case 35:gn.merge(pn[yn-4],"",pn[yn],pn[yn-2]);break;case 36:gn.merge(pn[yn-4],"",pn[yn-2],pn[yn]);break;case 37:gn.merge(pn[yn-4],pn[yn-2],pn[yn],"");break;case 38:gn.merge(pn[yn-4],pn[yn-2],"",pn[yn]);break;case 39:gn.merge(pn[yn-4],pn[yn],pn[yn-2],"");break;case 40:gn.merge(pn[yn-6],pn[yn-4],pn[yn-2],pn[yn]);break;case 41:gn.merge(pn[yn-6],pn[yn],pn[yn-4],pn[yn-2]);break;case 42:gn.merge(pn[yn-6],pn[yn-4],pn[yn],pn[yn-2]);break;case 43:gn.merge(pn[yn-6],pn[yn-2],pn[yn-4],pn[yn]);break;case 44:gn.merge(pn[yn-6],pn[yn],pn[yn-2],pn[yn-4]);break;case 45:gn.merge(pn[yn-6],pn[yn-2],pn[yn],pn[yn-4]);break;case 46:gn.commit(pn[yn]);break;case 47:gn.commit("","",gn.commitType.NORMAL,pn[yn]);break;case 48:gn.commit("","",pn[yn],"");break;case 49:gn.commit("","",pn[yn],pn[yn-2]);break;case 50:gn.commit("","",pn[yn-2],pn[yn]);break;case 51:gn.commit("",pn[yn],gn.commitType.NORMAL,"");break;case 52:gn.commit("",pn[yn-2],gn.commitType.NORMAL,pn[yn]);break;case 53:gn.commit("",pn[yn],gn.commitType.NORMAL,pn[yn-2]);break;case 54:gn.commit("",pn[yn-2],pn[yn],"");break;case 55:gn.commit("",pn[yn],pn[yn-2],"");break;case 56:gn.commit("",pn[yn-4],pn[yn-2],pn[yn]);break;case 57:gn.commit("",pn[yn-4],pn[yn],pn[yn-2]);break;case 58:gn.commit("",pn[yn-2],pn[yn-4],pn[yn]);break;case 59:gn.commit("",pn[yn],pn[yn-4],pn[yn-2]);break;case 60:gn.commit("",pn[yn],pn[yn-2],pn[yn-4]);break;case 61:gn.commit("",pn[yn-2],pn[yn],pn[yn-4]);break;case 62:gn.commit(pn[yn],"",gn.commitType.NORMAL,"");break;case 63:gn.commit(pn[yn],"",gn.commitType.NORMAL,pn[yn-2]);break;case 64:gn.commit(pn[yn-2],"",gn.commitType.NORMAL,pn[yn]);break;case 65:gn.commit(pn[yn-2],"",pn[yn],"");break;case 66:gn.commit(pn[yn],"",pn[yn-2],"");break;case 67:gn.commit(pn[yn],pn[yn-2],gn.commitType.NORMAL,"");break;case 68:gn.commit(pn[yn-2],pn[yn],gn.commitType.NORMAL,"");break;case 69:gn.commit(pn[yn-4],"",pn[yn-2],pn[yn]);break;case 70:gn.commit(pn[yn-4],"",pn[yn],pn[yn-2]);break;case 71:gn.commit(pn[yn-2],"",pn[yn-4],pn[yn]);break;case 72:gn.commit(pn[yn],"",pn[yn-4],pn[yn-2]);break;case 73:gn.commit(pn[yn],"",pn[yn-2],pn[yn-4]);break;case 74:gn.commit(pn[yn-2],"",pn[yn],pn[yn-4]);break;case 75:gn.commit(pn[yn-4],pn[yn],pn[yn-2],"");break;case 76:gn.commit(pn[yn-4],pn[yn-2],pn[yn],"");break;case 77:gn.commit(pn[yn-2],pn[yn],pn[yn-4],"");break;case 78:gn.commit(pn[yn],pn[yn-2],pn[yn-4],"");break;case 79:gn.commit(pn[yn],pn[yn-4],pn[yn-2],"");break;case 80:gn.commit(pn[yn-2],pn[yn-4],pn[yn],"");break;case 81:gn.commit(pn[yn-4],pn[yn],gn.commitType.NORMAL,pn[yn-2]);break;case 82:gn.commit(pn[yn-4],pn[yn-2],gn.commitType.NORMAL,pn[yn]);break;case 83:gn.commit(pn[yn-2],pn[yn],gn.commitType.NORMAL,pn[yn-4]);break;case 84:gn.commit(pn[yn],pn[yn-2],gn.commitType.NORMAL,pn[yn-4]);break;case 85:gn.commit(pn[yn],pn[yn-4],gn.commitType.NORMAL,pn[yn-2]);break;case 86:gn.commit(pn[yn-2],pn[yn-4],gn.commitType.NORMAL,pn[yn]);break;case 87:gn.commit(pn[yn-6],pn[yn-4],pn[yn-2],pn[yn]);break;case 88:gn.commit(pn[yn-6],pn[yn-4],pn[yn],pn[yn-2]);break;case 89:gn.commit(pn[yn-6],pn[yn-2],pn[yn-4],pn[yn]);break;case 90:gn.commit(pn[yn-6],pn[yn],pn[yn-4],pn[yn-2]);break;case 91:gn.commit(pn[yn-6],pn[yn-2],pn[yn],pn[yn-4]);break;case 92:gn.commit(pn[yn-6],pn[yn],pn[yn-2],pn[yn-4]);break;case 93:gn.commit(pn[yn-4],pn[yn-6],pn[yn-2],pn[yn]);break;case 94:gn.commit(pn[yn-4],pn[yn-6],pn[yn],pn[yn-2]);break;case 95:gn.commit(pn[yn-2],pn[yn-6],pn[yn-4],pn[yn]);break;case 96:gn.commit(pn[yn],pn[yn-6],pn[yn-4],pn[yn-2]);break;case 97:gn.commit(pn[yn-2],pn[yn-6],pn[yn],pn[yn-4]);break;case 98:gn.commit(pn[yn],pn[yn-6],pn[yn-2],pn[yn-4]);break;case 99:gn.commit(pn[yn],pn[yn-4],pn[yn-2],pn[yn-6]);break;case 100:gn.commit(pn[yn-2],pn[yn-4],pn[yn],pn[yn-6]);break;case 101:gn.commit(pn[yn],pn[yn-2],pn[yn-4],pn[yn-6]);break;case 102:gn.commit(pn[yn-2],pn[yn],pn[yn-4],pn[yn-6]);break;case 103:gn.commit(pn[yn-4],pn[yn-2],pn[yn],pn[yn-6]);break;case 104:gn.commit(pn[yn-4],pn[yn],pn[yn-2],pn[yn-6]);break;case 105:gn.commit(pn[yn-2],pn[yn-4],pn[yn-6],pn[yn]);break;case 106:gn.commit(pn[yn],pn[yn-4],pn[yn-6],pn[yn-2]);break;case 107:gn.commit(pn[yn-2],pn[yn],pn[yn-6],pn[yn-4]);break;case 108:gn.commit(pn[yn],pn[yn-2],pn[yn-6],pn[yn-4]);break;case 109:gn.commit(pn[yn-4],pn[yn-2],pn[yn-6],pn[yn]);break;case 110:gn.commit(pn[yn-4],pn[yn],pn[yn-6],pn[yn-2]);break;case 111:this.$="";break;case 112:this.$=pn[yn];break;case 113:this.$=gn.commitType.NORMAL;break;case 114:this.$=gn.commitType.REVERSE;break;case 115:this.$=gn.commitType.HIGHLIGHT;break;case 118:gn.parseDirective("%%{","open_directive");break;case 119:gn.parseDirective(pn[yn],"type_directive");break;case 120:pn[yn]=pn[yn].trim().replace(/'/g,'"'),gn.parseDirective(pn[yn],"arg_directive");break;case 121:gn.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:rt,8:it,14:vt,46:8,50:bt,55:wt},{1:[3]},{3:10,4:2,5:3,6:rt,8:it,14:vt,46:8,50:bt,55:wt},{3:11,4:2,5:3,6:rt,8:it,14:vt,46:8,50:bt,55:wt},{7:12,8:Tt,9:[1,13],10:[1,14],11:15,14:kt},nt(Lt,[2,124]),nt(Lt,[2,125]),nt(Lt,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:Tt,11:15,14:kt},{9:[1,21]},nt(Mt,[2,10],{12:22,13:[1,23]}),nt(Nt,[2,9]),{9:[1,25],48:24,53:zt},nt([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:Tt,11:15,14:kt},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},nt(Nt,[2,8]),nt(Ht,[2,116]),{49:45,52:[1,46]},nt(Ht,[2,121]),{1:[2,4]},{8:[1,47]},nt(Mt,[2,11]),{4:48,8:it,14:vt,55:wt},nt(Mt,[2,13]),nt(Wt,[2,14]),nt(Wt,[2,15]),nt(Wt,[2,16]),{21:[1,49]},{23:[1,50]},nt(Wt,[2,19]),nt(Wt,[2,20]),nt(Wt,[2,21]),{28:51,34:Zt,54:tn},nt(Wt,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:Zt,54:tn},{33:[1,61],35:[1,62]},{28:63,34:Zt,54:tn},{48:64,53:zt},{53:[2,120]},{1:[2,5]},nt(Mt,[2,12]),nt(Wt,[2,17]),nt(Wt,[2,18]),nt(Wt,[2,22]),nt(Yt,[2,122]),nt(Yt,[2,123]),nt(Wt,[2,46]),{34:[1,65]},{39:66,43:nn,44:rn,45:ln},{34:[1,70]},{34:[1,71]},nt(Wt,[2,112]),nt(Wt,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},nt(Wt,[2,23],{30:[1,78]}),nt(Ht,[2,117]),nt(Wt,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),nt(Wt,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),nt(sn,[2,113]),nt(sn,[2,114]),nt(sn,[2,115]),nt(Wt,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),nt(Wt,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:nn,44:rn,45:ln},{34:[1,93]},nt(Wt,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:nn,44:rn,45:ln},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:nn,44:rn,45:ln},{34:[1,106]},{34:[1,107]},{39:108,43:nn,44:rn,45:ln},{34:[1,109]},nt(Wt,[2,31],{35:[1,111],38:[1,110]}),nt(Wt,[2,32],{33:[1,113],35:[1,112]}),nt(Wt,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},nt(Wt,[2,24]),nt(Wt,[2,49],{33:[1,120],42:[1,121]}),nt(Wt,[2,53],{38:[1,122],42:[1,123]}),nt(Wt,[2,63],{33:[1,125],38:[1,124]}),nt(Wt,[2,50],{33:[1,126],42:[1,127]}),nt(Wt,[2,55],{35:[1,128],42:[1,129]}),nt(Wt,[2,66],{33:[1,131],35:[1,130]}),nt(Wt,[2,52],{38:[1,132],42:[1,133]}),nt(Wt,[2,54],{35:[1,134],42:[1,135]}),nt(Wt,[2,67],{35:[1,137],38:[1,136]}),nt(Wt,[2,64],{33:[1,139],38:[1,138]}),nt(Wt,[2,65],{33:[1,141],35:[1,140]}),nt(Wt,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:nn,44:rn,45:ln},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:nn,44:rn,45:ln},nt(Wt,[2,26]),nt(Wt,[2,27]),nt(Wt,[2,28]),nt(Wt,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:nn,44:rn,45:ln},{34:[1,153]},{39:154,43:nn,44:rn,45:ln},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:nn,44:rn,45:ln},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:nn,44:rn,45:ln},{34:[1,167]},{39:168,43:nn,44:rn,45:ln},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:nn,44:rn,45:ln},{34:[1,173]},nt(Wt,[2,37],{35:[1,174]}),nt(Wt,[2,38],{38:[1,175]}),nt(Wt,[2,36],{33:[1,176]}),nt(Wt,[2,39],{35:[1,177]}),nt(Wt,[2,34],{38:[1,178]}),nt(Wt,[2,35],{33:[1,179]}),nt(Wt,[2,60],{42:[1,180]}),nt(Wt,[2,73],{33:[1,181]}),nt(Wt,[2,61],{42:[1,182]}),nt(Wt,[2,84],{38:[1,183]}),nt(Wt,[2,74],{33:[1,184]}),nt(Wt,[2,83],{38:[1,185]}),nt(Wt,[2,59],{42:[1,186]}),nt(Wt,[2,72],{33:[1,187]}),nt(Wt,[2,58],{42:[1,188]}),nt(Wt,[2,78],{35:[1,189]}),nt(Wt,[2,71],{33:[1,190]}),nt(Wt,[2,77],{35:[1,191]}),nt(Wt,[2,57],{42:[1,192]}),nt(Wt,[2,85],{38:[1,193]}),nt(Wt,[2,56],{42:[1,194]}),nt(Wt,[2,79],{35:[1,195]}),nt(Wt,[2,80],{35:[1,196]}),nt(Wt,[2,86],{38:[1,197]}),nt(Wt,[2,70],{33:[1,198]}),nt(Wt,[2,81],{38:[1,199]}),nt(Wt,[2,69],{33:[1,200]}),nt(Wt,[2,75],{35:[1,201]}),nt(Wt,[2,76],{35:[1,202]}),nt(Wt,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:nn,44:rn,45:ln},{34:[1,206]},{34:[1,207]},{39:208,43:nn,44:rn,45:ln},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:nn,44:rn,45:ln},{34:[1,214]},{39:215,43:nn,44:rn,45:ln},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:nn,44:rn,45:ln},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:nn,44:rn,45:ln},{34:[1,228]},{39:229,43:nn,44:rn,45:ln},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:nn,44:rn,45:ln},nt(Wt,[2,40]),nt(Wt,[2,42]),nt(Wt,[2,41]),nt(Wt,[2,43]),nt(Wt,[2,45]),nt(Wt,[2,44]),nt(Wt,[2,101]),nt(Wt,[2,102]),nt(Wt,[2,99]),nt(Wt,[2,100]),nt(Wt,[2,104]),nt(Wt,[2,103]),nt(Wt,[2,108]),nt(Wt,[2,107]),nt(Wt,[2,106]),nt(Wt,[2,105]),nt(Wt,[2,110]),nt(Wt,[2,109]),nt(Wt,[2,98]),nt(Wt,[2,97]),nt(Wt,[2,96]),nt(Wt,[2,95]),nt(Wt,[2,93]),nt(Wt,[2,94]),nt(Wt,[2,92]),nt(Wt,[2,91]),nt(Wt,[2,90]),nt(Wt,[2,89]),nt(Wt,[2,87]),nt(Wt,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(Pn,On){if(On.recoverable)this.trace(Pn);else{var kn=new Error(Pn);throw kn.hash=On,kn}},parse:function(Pn){var On=this,kn=[0],gn=[],Vn=[null],pn=[],pr=this.table,yn="",mr=0,Er=0,Mr=2,rr=1,vr=pn.slice.call(arguments,1),cr=Object.create(this.lexer),gr={yy:{}};for(var Or in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Or)&&(gr.yy[Or]=this.yy[Or]);cr.setInput(Pn,gr.yy),gr.yy.lexer=cr,gr.yy.parser=this,typeof cr.yylloc>"u"&&(cr.yylloc={});var Ar=cr.yylloc;pn.push(Ar);var sr=cr.options&&cr.options.ranges;typeof gr.yy.parseError=="function"?this.parseError=gr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ii(){var lr;return lr=gn.pop()||cr.lex()||rr,typeof lr!="number"&&(lr instanceof Array&&(gn=lr,lr=gn.pop()),lr=On.symbols_[lr]||lr),lr}for(var ar,fr,wr,ir,Ln={},en,dn,un,Nn;;){if(fr=kn[kn.length-1],this.defaultActions[fr]?wr=this.defaultActions[fr]:((ar===null||typeof ar>"u")&&(ar=ii()),wr=pr[fr]&&pr[fr][ar]),typeof wr>"u"||!wr.length||!wr[0]){var In="";Nn=[];for(en in pr[fr])this.terminals_[en]&&en>Mr&&Nn.push("'"+this.terminals_[en]+"'");cr.showPosition?In="Parse error on line "+(mr+1)+`:
`+cr.showPosition()+`
Expecting `+Nn.join(", ")+", got '"+(this.terminals_[ar]||ar)+"'":In="Parse error on line "+(mr+1)+": Unexpected "+(ar==rr?"end of input":"'"+(this.terminals_[ar]||ar)+"'"),this.parseError(In,{text:cr.match,token:this.terminals_[ar]||ar,line:cr.yylineno,loc:Ar,expected:Nn})}if(wr[0]instanceof Array&&wr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+fr+", token: "+ar);switch(wr[0]){case 1:kn.push(ar),Vn.push(cr.yytext),pn.push(cr.yylloc),kn.push(wr[1]),ar=null,Er=cr.yyleng,yn=cr.yytext,mr=cr.yylineno,Ar=cr.yylloc;break;case 2:if(dn=this.productions_[wr[1]][1],Ln.$=Vn[Vn.length-dn],Ln._$={first_line:pn[pn.length-(dn||1)].first_line,last_line:pn[pn.length-1].last_line,first_column:pn[pn.length-(dn||1)].first_column,last_column:pn[pn.length-1].last_column},sr&&(Ln._$.range=[pn[pn.length-(dn||1)].range[0],pn[pn.length-1].range[1]]),ir=this.performAction.apply(Ln,[yn,Er,mr,gr.yy,wr[1],Vn,pn].concat(vr)),typeof ir<"u")return ir;dn&&(kn=kn.slice(0,-1*dn*2),Vn=Vn.slice(0,-1*dn),pn=pn.slice(0,-1*dn)),kn.push(this.productions_[wr[1]][0]),Vn.push(Ln.$),pn.push(Ln._$),un=pr[kn[kn.length-2]][kn[kn.length-1]],kn.push(un);break;case 3:return!0}}return!0}},wn=function(){var An={EOF:1,parseError:function(On,kn){if(this.yy.parser)this.yy.parser.parseError(On,kn);else throw new Error(On)},setInput:function(Pn,On){return this.yy=On||this.yy||{},this._input=Pn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Pn=this._input[0];this.yytext+=Pn,this.yyleng++,this.offset++,this.match+=Pn,this.matched+=Pn;var On=Pn.match(/(?:\r\n?|\n).*/g);return On?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pn},unput:function(Pn){var On=Pn.length,kn=Pn.split(/(?:\r\n?|\n)/g);this._input=Pn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-On),this.offset-=On;var gn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),kn.length-1&&(this.yylineno-=kn.length-1);var Vn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:kn?(kn.length===gn.length?this.yylloc.first_column:0)+gn[gn.length-kn.length].length-kn[0].length:this.yylloc.first_column-On},this.options.ranges&&(this.yylloc.range=[Vn[0],Vn[0]+this.yyleng-On]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Pn){this.unput(this.match.slice(Pn))},pastInput:function(){var Pn=this.matched.substr(0,this.matched.length-this.match.length);return(Pn.length>20?"...":"")+Pn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Pn=this.match;return Pn.length<20&&(Pn+=this._input.substr(0,20-Pn.length)),(Pn.substr(0,20)+(Pn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Pn=this.pastInput(),On=new Array(Pn.length+1).join("-");return Pn+this.upcomingInput()+`
`+On+"^"},test_match:function(Pn,On){var kn,gn,Vn;if(this.options.backtrack_lexer&&(Vn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Vn.yylloc.range=this.yylloc.range.slice(0))),gn=Pn[0].match(/(?:\r\n?|\n).*/g),gn&&(this.yylineno+=gn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:gn?gn[gn.length-1].length-gn[gn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pn[0].length},this.yytext+=Pn[0],this.match+=Pn[0],this.matches=Pn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pn[0].length),this.matched+=Pn[0],kn=this.performAction.call(this,this.yy,this,On,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),kn)return kn;if(this._backtrack){for(var pn in Vn)this[pn]=Vn[pn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Pn,On,kn,gn;this._more||(this.yytext="",this.match="");for(var Vn=this._currentRules(),pn=0;pn<Vn.length;pn++)if(kn=this._input.match(this.rules[Vn[pn]]),kn&&(!On||kn[0].length>On[0].length)){if(On=kn,gn=pn,this.options.backtrack_lexer){if(Pn=this.test_match(kn,Vn[pn]),Pn!==!1)return Pn;if(this._backtrack){On=!1;continue}else return!1}else if(!this.options.flex)break}return On?(Pn=this.test_match(On,Vn[gn]),Pn!==!1?Pn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var On=this.next();return On||this.lex()},begin:function(On){this.conditionStack.push(On)},popState:function(){var On=this.conditionStack.length-1;return On>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(On){return On=this.conditionStack.length-1-Math.abs(On||0),On>=0?this.conditionStack[On]:"INITIAL"},pushState:function(On){this.begin(On)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(On,kn,gn,Vn){switch(gn){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return An}();mn.lexer=wn;function Cn(){this.yy={}}return Cn.prototype=mn,mn.Parser=Cn,new Cn}();parser$b.parser=parser$b;const gitGraphParser=parser$b,gitGraphDetector=nt=>nt.match(/^\s*gitGraph/)!==null;let title$1="",diagramTitle="",description="";const sanitizeText$3=nt=>sanitizeText$5(nt,getConfig$1()),clear$g=function(){title$1="",description="",diagramTitle=""},setAccTitle=function(nt){title$1=sanitizeText$3(nt).replace(/^\s+/g,"")},getAccTitle=function(){return title$1||diagramTitle},setAccDescription=function(nt){description=sanitizeText$3(nt).replace(/\n\s+/g,`
`)},getAccDescription=function(){return description},setDiagramTitle=function(nt){diagramTitle=sanitizeText$3(nt)},getDiagramTitle=function(){return diagramTitle};let mainBranchName=getConfig$1().gitGraph.mainBranchName,mainBranchOrder=getConfig$1().gitGraph.mainBranchOrder,commits={},head=null,branchesConfig={};branchesConfig[mainBranchName]={name:mainBranchName,order:mainBranchOrder};let branches={};branches[mainBranchName]=head;let curBranch=mainBranchName,direction$3="LR",seq=0;function getId(){return random({length:7})}const parseDirective$b=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)};function uniqBy(nt,rt){const it=Object.create(null);return nt.reduce((vt,bt)=>{const wt=rt(bt);return it[wt]||(it[wt]=!0,vt.push(bt)),vt},[])}const setDirection$3=function(nt){direction$3=nt};let options={};const setOptions=function(nt){log$1.debug("options str",nt),nt=nt&&nt.trim(),nt=nt||"{}";try{options=JSON.parse(nt)}catch(rt){log$1.error("error while parsing gitGraph options",rt.message)}},getOptions=function(){return options},commit=function(nt,rt,it,vt){log$1.debug("Entering commit:",nt,rt,it,vt),rt=common$1.sanitizeText(rt,getConfig$1()),nt=common$1.sanitizeText(nt,getConfig$1()),vt=common$1.sanitizeText(vt,getConfig$1());const bt={id:rt||seq+"-"+getId(),message:nt,seq:seq++,type:it||commitType$1.NORMAL,tag:vt||"",parents:head==null?[]:[head.id],branch:curBranch};head=bt,commits[bt.id]=bt,branches[curBranch]=bt.id,log$1.debug("in pushCommit "+bt.id)},branch=function(nt,rt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0)branches[nt]=head!=null?head.id:null,branchesConfig[nt]={name:nt,order:rt?parseInt(rt,10):null},checkout(nt),log$1.debug("in createBranch");else{let it=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+nt+'")');throw it.hash={text:"branch "+nt,token:"branch "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+nt+'"']},it}},merge=function(nt,rt,it,vt){nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1());const bt=commits[branches[curBranch]],wt=commits[branches[nt]];if(curBranch===nt){let kt=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(bt===void 0||!bt){let kt=new Error('Incorrect usage of "merge". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},kt}else if(branches[nt]===void 0){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") does not exist");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+nt]},kt}else if(wt===void 0||!wt){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},kt}else if(bt===wt){let kt=new Error('Incorrect usage of "merge". Both branches have same head');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(rt&&commits[rt]!==void 0){let kt=new Error('Incorrect usage of "merge". Commit with id:'+rt+" already exists, use different custom Id");throw kt.hash={text:"merge "+nt+rt+it+vt,token:"merge "+nt+rt+it+vt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+nt+" "+rt+"_UNIQUE "+it+" "+vt]},kt}const Tt={id:rt||seq+"-"+getId(),message:"merged branch "+nt+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,branches[nt]],branch:curBranch,type:commitType$1.MERGE,customType:it,customId:!!rt,tag:vt||""};head=Tt,commits[Tt.id]=Tt,branches[curBranch]=Tt.id,log$1.debug(branches),log$1.debug("in mergeBranch")},cherryPick=function(nt,rt,it){if(log$1.debug("Entering cherryPick:",nt,rt,it),nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1()),it=common$1.sanitizeText(it,getConfig$1()),!nt||commits[nt]===void 0){let wt=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw wt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},wt}let vt=commits[nt],bt=vt.branch;if(vt.type===commitType$1.MERGE){let wt=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw wt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},wt}if(!rt||commits[rt]===void 0){if(bt===curBranch){let kt=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const wt=commits[branches[curBranch]];if(wt===void 0||!wt){let kt=new Error('Incorrect usage of "cherry-pick". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const Tt={id:seq+"-"+getId(),message:"cherry-picked "+vt+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,vt.id],branch:curBranch,type:commitType$1.CHERRY_PICK,tag:it!=null?it:"cherry-pick:"+vt.id};head=Tt,commits[Tt.id]=Tt,branches[curBranch]=Tt.id,log$1.debug(branches),log$1.debug("in cherryPick")}},checkout=function(nt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0){let rt=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+nt+'")');throw rt.hash={text:"checkout "+nt,token:"checkout "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+nt+'"']},rt}else{curBranch=nt;const rt=branches[curBranch];head=commits[rt]}};function upsert(nt,rt,it){const vt=nt.indexOf(rt);vt===-1?nt.push(it):nt.splice(vt,1,it)}function prettyPrintCommitHistory(nt){const rt=nt.reduce((bt,wt)=>bt.seq>wt.seq?bt:wt,nt[0]);let it="";nt.forEach(function(bt){bt===rt?it+="	*":it+="	|"});const vt=[it,rt.id,rt.seq];for(let bt in branches)branches[bt]===rt.id&&vt.push(bt);if(log$1.debug(vt.join(" ")),rt.parents&&rt.parents.length==2){const bt=commits[rt.parents[0]];upsert(nt,rt,bt),nt.push(commits[rt.parents[1]])}else{if(rt.parents.length==0)return;{const bt=commits[rt.parents];upsert(nt,rt,bt)}}nt=uniqBy(nt,bt=>bt.id),prettyPrintCommitHistory(nt)}const prettyPrint=function(){log$1.debug(commits);const nt=getCommitsArray()[0];prettyPrintCommitHistory([nt])},clear$f=function(){commits={},head=null;let nt=getConfig$1().gitGraph.mainBranchName,rt=getConfig$1().gitGraph.mainBranchOrder;branches={},branches[nt]=null,branchesConfig={},branchesConfig[nt]={name:nt,order:rt},curBranch=nt,seq=0,clear$g()},getBranchesAsObjArray=function(){return Object.values(branchesConfig).map((rt,it)=>rt.order!==null?rt:{...rt,order:parseFloat(`0.${it}`,10)}).sort((rt,it)=>rt.order-it.order).map(({name:rt})=>({name:rt}))},getBranches=function(){return branches},getCommits=function(){return commits},getCommitsArray=function(){const nt=Object.keys(commits).map(function(rt){return commits[rt]});return nt.forEach(function(rt){log$1.debug(rt.id)}),nt.sort((rt,it)=>rt.seq-it.seq),nt},getCurrentBranch=function(){return curBranch},getDirection$3=function(){return direction$3},getHead=function(){return head},commitType$1={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},gitGraphDb={parseDirective:parseDirective$b,getConfig:()=>getConfig$1().gitGraph,setDirection:setDirection$3,setOptions,getOptions,commit,branch,merge,cherryPick,checkout,prettyPrint,clear:clear$f,getBranchesAsObjArray,getBranches,getCommits,getCommitsArray,getCurrentBranch,getDirection:getDirection$3,getHead,setAccTitle,getAccTitle,getAccDescription,setAccDescription,setDiagramTitle,getDiagramTitle,commitType:commitType$1};let allCommitsDict={};const commitType={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},THEME_COLOR_LIMIT=8;let branchPos={},commitPos={},lanes=[],maxPos=0;const clear$e=()=>{branchPos={},commitPos={},allCommitsDict={},maxPos=0,lanes=[]},drawText$2=nt=>{const rt=document.createElementNS("http://www.w3.org/2000/svg","text");let it=[];typeof nt=="string"?it=nt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(nt)?it=nt:it=[];for(const vt of it){const bt=document.createElementNS("http://www.w3.org/2000/svg","tspan");bt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),bt.setAttribute("dy","1em"),bt.setAttribute("x","0"),bt.setAttribute("class","row"),bt.textContent=vt.trim(),rt.appendChild(bt)}return rt},drawCommits=(nt,rt,it)=>{const vt=getConfig().gitGraph,bt=nt.append("g").attr("class","commit-bullets"),wt=nt.append("g").attr("class","commit-labels");let Tt=0;Object.keys(rt).sort((Mt,Nt)=>rt[Mt].seq-rt[Nt].seq).forEach(Mt=>{const Nt=rt[Mt],zt=branchPos[Nt.branch].pos,Ht=Tt+10;if(it){let Wt,Zt=Nt.customType!==void 0&&Nt.customType!==""?Nt.customType:Nt.type;switch(Zt){case commitType.NORMAL:Wt="commit-normal";break;case commitType.REVERSE:Wt="commit-reverse";break;case commitType.HIGHLIGHT:Wt="commit-highlight";break;case commitType.MERGE:Wt="commit-merge";break;case commitType.CHERRY_PICK:Wt="commit-cherry-pick";break;default:Wt="commit-normal"}if(Zt===commitType.HIGHLIGHT){const tn=bt.append("rect");tn.attr("x",Ht-10),tn.attr("y",zt-10),tn.attr("height",20),tn.attr("width",20),tn.attr("class",`commit ${Nt.id} commit-highlight${branchPos[Nt.branch].index%THEME_COLOR_LIMIT} ${Wt}-outer`),bt.append("rect").attr("x",Ht-6).attr("y",zt-6).attr("height",12).attr("width",12).attr("class",`commit ${Nt.id} commit${branchPos[Nt.branch].index%THEME_COLOR_LIMIT} ${Wt}-inner`)}else if(Zt===commitType.CHERRY_PICK)bt.append("circle").attr("cx",Ht).attr("cy",zt).attr("r",10).attr("class",`commit ${Nt.id} ${Wt}`),bt.append("circle").attr("cx",Ht-3).attr("cy",zt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Nt.id} ${Wt}`),bt.append("circle").attr("cx",Ht+3).attr("cy",zt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Nt.id} ${Wt}`),bt.append("line").attr("x1",Ht+3).attr("y1",zt+1).attr("x2",Ht).attr("y2",zt-5).attr("stroke","#fff").attr("class",`commit ${Nt.id} ${Wt}`),bt.append("line").attr("x1",Ht-3).attr("y1",zt+1).attr("x2",Ht).attr("y2",zt-5).attr("stroke","#fff").attr("class",`commit ${Nt.id} ${Wt}`);else{const tn=bt.append("circle");if(tn.attr("cx",Ht),tn.attr("cy",zt),tn.attr("r",Nt.type===commitType.MERGE?9:10),tn.attr("class",`commit ${Nt.id} commit${branchPos[Nt.branch].index%THEME_COLOR_LIMIT}`),Zt===commitType.MERGE){const Yt=bt.append("circle");Yt.attr("cx",Ht),Yt.attr("cy",zt),Yt.attr("r",6),Yt.attr("class",`commit ${Wt} ${Nt.id} commit${branchPos[Nt.branch].index%THEME_COLOR_LIMIT}`)}Zt===commitType.REVERSE&&bt.append("path").attr("d",`M ${Ht-5},${zt-5}L${Ht+5},${zt+5}M${Ht-5},${zt+5}L${Ht+5},${zt-5}`).attr("class",`commit ${Wt} ${Nt.id} commit${branchPos[Nt.branch].index%THEME_COLOR_LIMIT}`)}}if(commitPos[Nt.id]={x:Tt+10,y:zt},it){if(Nt.type!==commitType.CHERRY_PICK&&(Nt.customId&&Nt.type===commitType.MERGE||Nt.type!==commitType.MERGE)&&vt.showCommitLabel){const tn=wt.append("g"),Yt=tn.insert("rect").attr("class","commit-label-bkg"),nn=tn.append("text").attr("x",Tt).attr("y",zt+25).attr("class","commit-label").text(Nt.id);let rn=nn.node().getBBox();if(Yt.attr("x",Tt+10-rn.width/2-2).attr("y",zt+13.5).attr("width",rn.width+2*2).attr("height",rn.height+2*2),nn.attr("x",Tt+10-rn.width/2),vt.rotateCommitLabel){let ln=-7.5-(rn.width+10)/25*9.5,sn=10+rn.width/25*8.5;tn.attr("transform","translate("+ln+", "+sn+") rotate("+-45+", "+Tt+", "+zt+")")}}if(Nt.tag){const tn=wt.insert("polygon"),Yt=wt.append("circle"),nn=wt.append("text").attr("y",zt-16).attr("class","tag-label").text(Nt.tag);let rn=nn.node().getBBox();nn.attr("x",Tt+10-rn.width/2);const ln=rn.height/2,sn=zt-19.2;tn.attr("class","tag-label-bkg").attr("points",`
          ${Tt-rn.width/2-4/2},${sn+2}
          ${Tt-rn.width/2-4/2},${sn-2}
          ${Tt+10-rn.width/2-4},${sn-ln-2}
          ${Tt+10+rn.width/2+4},${sn-ln-2}
          ${Tt+10+rn.width/2+4},${sn+ln+2}
          ${Tt+10-rn.width/2-4},${sn+ln+2}`),Yt.attr("cx",Tt-rn.width/2+4/2).attr("cy",sn).attr("r",1.5).attr("class","tag-hole")}}Tt+=50,Tt>maxPos&&(maxPos=Tt)})},hasOverlappingCommits=(nt,rt,it)=>Object.keys(it).filter(wt=>it[wt].branch===rt.branch&&it[wt].seq>nt.seq&&it[wt].seq<rt.seq).length>0,findLane=(nt,rt,it=0)=>{const vt=nt+Math.abs(nt-rt)/2;if(it>5)return vt;if(lanes.every(Tt=>Math.abs(Tt-vt)>=10))return lanes.push(vt),vt;const wt=Math.abs(nt-rt);return findLane(nt,rt-wt/5,it+1)},drawArrow=(nt,rt,it,vt)=>{const bt=commitPos[rt.id],wt=commitPos[it.id],Tt=hasOverlappingCommits(rt,it,vt);let kt="",Lt="",Mt=0,Nt=0,zt=branchPos[it.branch].index,Ht;if(Tt){kt="A 10 10, 0, 0, 0,",Lt="A 10 10, 0, 0, 1,",Mt=10,Nt=10,zt=branchPos[it.branch].index;const Wt=bt.y<wt.y?findLane(bt.y,wt.y):findLane(wt.y,bt.y);bt.y<wt.y?Ht=`M ${bt.x} ${bt.y} L ${bt.x} ${Wt-Mt} ${kt} ${bt.x+Nt} ${Wt} L ${wt.x-Mt} ${Wt} ${Lt} ${wt.x} ${Wt+Nt} L ${wt.x} ${wt.y}`:Ht=`M ${bt.x} ${bt.y} L ${bt.x} ${Wt+Mt} ${Lt} ${bt.x+Nt} ${Wt} L ${wt.x-Mt} ${Wt} ${kt} ${wt.x} ${Wt-Nt} L ${wt.x} ${wt.y}`}else bt.y<wt.y&&(kt="A 20 20, 0, 0, 0,",Mt=20,Nt=20,zt=branchPos[it.branch].index,Ht=`M ${bt.x} ${bt.y} L ${bt.x} ${wt.y-Mt} ${kt} ${bt.x+Nt} ${wt.y} L ${wt.x} ${wt.y}`),bt.y>wt.y&&(kt="A 20 20, 0, 0, 0,",Mt=20,Nt=20,zt=branchPos[rt.branch].index,Ht=`M ${bt.x} ${bt.y} L ${wt.x-Mt} ${bt.y} ${kt} ${wt.x} ${bt.y-Nt} L ${wt.x} ${wt.y}`),bt.y===wt.y&&(zt=branchPos[rt.branch].index,Ht=`M ${bt.x} ${bt.y} L ${bt.x} ${wt.y-Mt} ${kt} ${bt.x+Nt} ${wt.y} L ${wt.x} ${wt.y}`);nt.append("path").attr("d",Ht).attr("class","arrow arrow"+zt%THEME_COLOR_LIMIT)},drawArrows=(nt,rt)=>{const it=nt.append("g").attr("class","commit-arrows");Object.keys(rt).forEach(vt=>{const bt=rt[vt];bt.parents&&bt.parents.length>0&&bt.parents.forEach(wt=>{drawArrow(it,rt[wt],bt,rt)})})},drawBranches=(nt,rt)=>{const it=getConfig().gitGraph,vt=nt.append("g");rt.forEach((bt,wt)=>{const Tt=wt%THEME_COLOR_LIMIT,kt=branchPos[bt.name].pos,Lt=vt.append("line");Lt.attr("x1",0),Lt.attr("y1",kt),Lt.attr("x2",maxPos),Lt.attr("y2",kt),Lt.attr("class","branch branch"+Tt),lanes.push(kt);let Mt=bt.name;const Nt=drawText$2(Mt),zt=vt.insert("rect"),Wt=vt.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+Tt);Wt.node().appendChild(Nt);let Zt=Nt.getBBox();zt.attr("class","branchLabelBkg label"+Tt).attr("rx",4).attr("ry",4).attr("x",-Zt.width-4-(it.rotateCommitLabel===!0?30:0)).attr("y",-Zt.height/2+8).attr("width",Zt.width+18).attr("height",Zt.height+4),Wt.attr("transform","translate("+(-Zt.width-14-(it.rotateCommitLabel===!0?30:0))+", "+(kt-Zt.height/2-1)+")"),zt.attr("transform","translate("+-19+", "+(kt-Zt.height/2)+")")})},draw$f=function(nt,rt,it,vt){var bt;clear$e();const wt=getConfig(),Tt=wt.gitGraph;log$1.debug("in gitgraph renderer",nt+`
`,"id:",rt,it),allCommitsDict=vt.db.getCommits();const kt=vt.db.getBranchesAsObjArray();let Lt=0;kt.forEach((Nt,zt)=>{branchPos[Nt.name]={pos:Lt,index:zt},Lt+=50+(Tt.rotateCommitLabel?40:0)});const Mt=select(`[id="${rt}"]`);drawCommits(Mt,allCommitsDict,!1),Tt.showBranches&&drawBranches(Mt,kt),drawArrows(Mt,allCommitsDict),drawCommits(Mt,allCommitsDict,!0),utils.insertTitle(Mt,"gitTitleText",Tt.titleTopMargin,vt.db.getDiagramTitle()),setupGraphViewbox(void 0,Mt,Tt.diagramPadding,(bt=Tt.useMaxWidth)!=null?bt:wt.useMaxWidth)},gitGraphRenderer={draw:draw$f},getStyles=nt=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(rt=>`
        .branch-label${rt} { fill: ${nt["gitBranchLabel"+rt]}; }
        .commit${rt} { stroke: ${nt["git"+rt]}; fill: ${nt["git"+rt]}; }
        .commit-highlight${rt} { stroke: ${nt["gitInv"+rt]}; fill: ${nt["gitInv"+rt]}; }
        .label${rt}  { fill: ${nt["git"+rt]}; }
        .arrow${rt} { stroke: ${nt["git"+rt]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${nt.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelColor};}
  .commit-label-bkg { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${nt.tagLabelFontSize}; fill: ${nt.tagLabelColor};}
  .tag-label-bkg { fill: ${nt.tagLabelBackground}; stroke: ${nt.tagLabelBorder}; }
  .tag-hole { fill: ${nt.textColor}; }

  .commit-merge {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }
  .commit-reverse {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
  }
`,gitGraphStyles=getStyles;var parser$a=function(){var nt=function(Tn,Sn,jn,er){for(jn=jn||{},er=Tn.length;er--;jn[Tn[er]]=Sn);return jn},rt=[1,6],it=[1,7],vt=[1,8],bt=[1,9],wt=[1,16],Tt=[1,11],kt=[1,12],Lt=[1,13],Mt=[1,14],Nt=[1,15],zt=[1,27],Ht=[1,33],Wt=[1,34],Zt=[1,35],tn=[1,36],Yt=[1,37],nn=[1,72],rn=[1,73],ln=[1,74],sn=[1,75],mn=[1,76],wn=[1,77],Cn=[1,78],An=[1,38],Pn=[1,39],On=[1,40],kn=[1,41],gn=[1,42],Vn=[1,43],pn=[1,44],pr=[1,45],yn=[1,46],mr=[1,47],Er=[1,48],Mr=[1,49],rr=[1,50],vr=[1,51],cr=[1,52],gr=[1,53],Or=[1,54],Ar=[1,55],sr=[1,56],ii=[1,57],ar=[1,59],fr=[1,60],wr=[1,61],ir=[1,62],Ln=[1,63],en=[1,64],dn=[1,65],un=[1,66],Nn=[1,67],In=[1,68],lr=[1,69],$n=[24,52],Qn=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Wn=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],or=[1,94],dr=[1,95],kr=[1,96],br=[1,97],_r=[15,24,52],hi=[7,8,9,10,18,22,25,26,27,28],di=[15,24,43,52],vi=[15,24,43,52,86,87,89,90],Ai=[15,43],ki=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Bi={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(Sn,jn,er,Cr,Qr,yr,ai){var Ir=yr.length-1;switch(Qr){case 4:Cr.setDirection("TB");break;case 5:Cr.setDirection("BT");break;case 6:Cr.setDirection("RL");break;case 7:Cr.setDirection("LR");break;case 11:Cr.parseDirective("%%{","open_directive");break;case 12:break;case 13:yr[Ir]=yr[Ir].trim().replace(/'/g,'"'),Cr.parseDirective(yr[Ir],"arg_directive");break;case 14:Cr.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:Cr.setC4Type(yr[Ir-3]);break;case 26:Cr.setTitle(yr[Ir].substring(6)),this.$=yr[Ir].substring(6);break;case 27:Cr.setAccDescription(yr[Ir].substring(15)),this.$=yr[Ir].substring(15);break;case 28:this.$=yr[Ir].trim(),Cr.setTitle(this.$);break;case 29:case 30:this.$=yr[Ir].trim(),Cr.setAccDescription(this.$);break;case 35:case 36:yr[Ir].splice(2,0,"ENTERPRISE"),Cr.addPersonOrSystemBoundary(...yr[Ir]),this.$=yr[Ir];break;case 37:Cr.addPersonOrSystemBoundary(...yr[Ir]),this.$=yr[Ir];break;case 38:yr[Ir].splice(2,0,"CONTAINER"),Cr.addContainerBoundary(...yr[Ir]),this.$=yr[Ir];break;case 39:Cr.addDeploymentNode("node",...yr[Ir]),this.$=yr[Ir];break;case 40:Cr.addDeploymentNode("nodeL",...yr[Ir]),this.$=yr[Ir];break;case 41:Cr.addDeploymentNode("nodeR",...yr[Ir]),this.$=yr[Ir];break;case 42:Cr.popBoundaryParseStack();break;case 46:Cr.addPersonOrSystem("person",...yr[Ir]),this.$=yr[Ir];break;case 47:Cr.addPersonOrSystem("external_person",...yr[Ir]),this.$=yr[Ir];break;case 48:Cr.addPersonOrSystem("system",...yr[Ir]),this.$=yr[Ir];break;case 49:Cr.addPersonOrSystem("system_db",...yr[Ir]),this.$=yr[Ir];break;case 50:Cr.addPersonOrSystem("system_queue",...yr[Ir]),this.$=yr[Ir];break;case 51:Cr.addPersonOrSystem("external_system",...yr[Ir]),this.$=yr[Ir];break;case 52:Cr.addPersonOrSystem("external_system_db",...yr[Ir]),this.$=yr[Ir];break;case 53:Cr.addPersonOrSystem("external_system_queue",...yr[Ir]),this.$=yr[Ir];break;case 54:Cr.addContainer("container",...yr[Ir]),this.$=yr[Ir];break;case 55:Cr.addContainer("container_db",...yr[Ir]),this.$=yr[Ir];break;case 56:Cr.addContainer("container_queue",...yr[Ir]),this.$=yr[Ir];break;case 57:Cr.addContainer("external_container",...yr[Ir]),this.$=yr[Ir];break;case 58:Cr.addContainer("external_container_db",...yr[Ir]),this.$=yr[Ir];break;case 59:Cr.addContainer("external_container_queue",...yr[Ir]),this.$=yr[Ir];break;case 60:Cr.addComponent("component",...yr[Ir]),this.$=yr[Ir];break;case 61:Cr.addComponent("component_db",...yr[Ir]),this.$=yr[Ir];break;case 62:Cr.addComponent("component_queue",...yr[Ir]),this.$=yr[Ir];break;case 63:Cr.addComponent("external_component",...yr[Ir]),this.$=yr[Ir];break;case 64:Cr.addComponent("external_component_db",...yr[Ir]),this.$=yr[Ir];break;case 65:Cr.addComponent("external_component_queue",...yr[Ir]),this.$=yr[Ir];break;case 67:Cr.addRel("rel",...yr[Ir]),this.$=yr[Ir];break;case 68:Cr.addRel("birel",...yr[Ir]),this.$=yr[Ir];break;case 69:Cr.addRel("rel_u",...yr[Ir]),this.$=yr[Ir];break;case 70:Cr.addRel("rel_d",...yr[Ir]),this.$=yr[Ir];break;case 71:Cr.addRel("rel_l",...yr[Ir]),this.$=yr[Ir];break;case 72:Cr.addRel("rel_r",...yr[Ir]),this.$=yr[Ir];break;case 73:Cr.addRel("rel_b",...yr[Ir]),this.$=yr[Ir];break;case 74:yr[Ir].splice(0,1),Cr.addRel("rel",...yr[Ir]),this.$=yr[Ir];break;case 75:Cr.updateElStyle("update_el_style",...yr[Ir]),this.$=yr[Ir];break;case 76:Cr.updateRelStyle("update_rel_style",...yr[Ir]),this.$=yr[Ir];break;case 77:Cr.updateLayoutConfig("update_layout_config",...yr[Ir]),this.$=yr[Ir];break;case 78:this.$=[yr[Ir]];break;case 79:yr[Ir].unshift(yr[Ir-1]),this.$=yr[Ir];break;case 80:case 82:this.$=yr[Ir].trim();break;case 81:let mi={};mi[yr[Ir-1].trim()]=yr[Ir].trim(),this.$=mi;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:rt,8:it,9:vt,10:bt,11:5,12:10,18:wt,22:Tt,25:kt,26:Lt,27:Mt,28:Nt},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:rt,8:it,9:vt,10:bt,11:5,12:10,18:wt,22:Tt,25:kt,26:Lt,27:Mt,28:Nt},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:zt},nt([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:Ht,33:Wt,34:Zt,36:tn,38:Yt,39:58,40:70,42:71,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,53:32,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr},{23:79,29:29,30:30,31:31,32:Ht,33:Wt,34:Zt,36:tn,38:Yt,39:58,40:70,42:71,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,53:32,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr},{23:80,29:29,30:30,31:31,32:Ht,33:Wt,34:Zt,36:tn,38:Yt,39:58,40:70,42:71,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,53:32,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr},{23:81,29:29,30:30,31:31,32:Ht,33:Wt,34:Zt,36:tn,38:Yt,39:58,40:70,42:71,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,53:32,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr},{23:82,29:29,30:30,31:31,32:Ht,33:Wt,34:Zt,36:tn,38:Yt,39:58,40:70,42:71,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,53:32,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},nt($n,[2,20],{53:32,39:58,40:70,42:71,30:87,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr}),nt($n,[2,21]),nt(Qn,[2,23],{15:[1,88]}),nt($n,[2,43],{15:[1,89]}),nt(Wn,[2,26]),nt(Wn,[2,27]),{35:[1,90]},{37:[1,91]},nt(Wn,[2,30]),{45:92,85:93,86:or,87:dr,89:kr,90:br},{45:98,85:93,86:or,87:dr,89:kr,90:br},{45:99,85:93,86:or,87:dr,89:kr,90:br},{45:100,85:93,86:or,87:dr,89:kr,90:br},{45:101,85:93,86:or,87:dr,89:kr,90:br},{45:102,85:93,86:or,87:dr,89:kr,90:br},{45:103,85:93,86:or,87:dr,89:kr,90:br},{45:104,85:93,86:or,87:dr,89:kr,90:br},{45:105,85:93,86:or,87:dr,89:kr,90:br},{45:106,85:93,86:or,87:dr,89:kr,90:br},{45:107,85:93,86:or,87:dr,89:kr,90:br},{45:108,85:93,86:or,87:dr,89:kr,90:br},{45:109,85:93,86:or,87:dr,89:kr,90:br},{45:110,85:93,86:or,87:dr,89:kr,90:br},{45:111,85:93,86:or,87:dr,89:kr,90:br},{45:112,85:93,86:or,87:dr,89:kr,90:br},{45:113,85:93,86:or,87:dr,89:kr,90:br},{45:114,85:93,86:or,87:dr,89:kr,90:br},{45:115,85:93,86:or,87:dr,89:kr,90:br},{45:116,85:93,86:or,87:dr,89:kr,90:br},nt(_r,[2,66]),{45:117,85:93,86:or,87:dr,89:kr,90:br},{45:118,85:93,86:or,87:dr,89:kr,90:br},{45:119,85:93,86:or,87:dr,89:kr,90:br},{45:120,85:93,86:or,87:dr,89:kr,90:br},{45:121,85:93,86:or,87:dr,89:kr,90:br},{45:122,85:93,86:or,87:dr,89:kr,90:br},{45:123,85:93,86:or,87:dr,89:kr,90:br},{45:124,85:93,86:or,87:dr,89:kr,90:br},{45:125,85:93,86:or,87:dr,89:kr,90:br},{45:126,85:93,86:or,87:dr,89:kr,90:br},{45:127,85:93,86:or,87:dr,89:kr,90:br},{30:128,39:58,40:70,42:71,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,53:32,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr},{15:[1,130],43:[1,129]},{45:131,85:93,86:or,87:dr,89:kr,90:br},{45:132,85:93,86:or,87:dr,89:kr,90:br},{45:133,85:93,86:or,87:dr,89:kr,90:br},{45:134,85:93,86:or,87:dr,89:kr,90:br},{45:135,85:93,86:or,87:dr,89:kr,90:br},{45:136,85:93,86:or,87:dr,89:kr,90:br},{45:137,85:93,86:or,87:dr,89:kr,90:br},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},nt(hi,[2,9]),{14:142,21:zt},{21:[2,13]},{1:[2,15]},nt($n,[2,22]),nt(Qn,[2,24],{31:31,29:143,32:Ht,33:Wt,34:Zt,36:tn,38:Yt}),nt($n,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:Ht,33:Wt,34:Zt,36:tn,38:Yt,44:nn,46:rn,47:ln,48:sn,49:mn,50:wn,51:Cn,54:An,55:Pn,56:On,57:kn,58:gn,59:Vn,60:pn,61:pr,62:yn,63:mr,64:Er,65:Mr,66:rr,67:vr,68:cr,69:gr,70:Or,71:Ar,72:sr,73:ii,74:ar,75:fr,76:wr,77:ir,78:Ln,79:en,80:dn,81:un,82:Nn,83:In,84:lr}),nt(Wn,[2,28]),nt(Wn,[2,29]),nt(_r,[2,46]),nt(di,[2,78],{85:93,45:145,86:or,87:dr,89:kr,90:br}),nt(vi,[2,80]),{88:[1,146]},nt(vi,[2,82]),nt(vi,[2,83]),nt(_r,[2,47]),nt(_r,[2,48]),nt(_r,[2,49]),nt(_r,[2,50]),nt(_r,[2,51]),nt(_r,[2,52]),nt(_r,[2,53]),nt(_r,[2,54]),nt(_r,[2,55]),nt(_r,[2,56]),nt(_r,[2,57]),nt(_r,[2,58]),nt(_r,[2,59]),nt(_r,[2,60]),nt(_r,[2,61]),nt(_r,[2,62]),nt(_r,[2,63]),nt(_r,[2,64]),nt(_r,[2,65]),nt(_r,[2,67]),nt(_r,[2,68]),nt(_r,[2,69]),nt(_r,[2,70]),nt(_r,[2,71]),nt(_r,[2,72]),nt(_r,[2,73]),nt(_r,[2,74]),nt(_r,[2,75]),nt(_r,[2,76]),nt(_r,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},nt(Ai,[2,35]),nt(Ai,[2,36]),nt(Ai,[2,37]),nt(Ai,[2,38]),nt(Ai,[2,39]),nt(Ai,[2,40]),nt(Ai,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},nt(Qn,[2,25]),nt($n,[2,45]),nt(di,[2,79]),nt(vi,[2,81]),nt(_r,[2,31]),nt(_r,[2,42]),nt(ki,[2,32]),nt(ki,[2,33],{15:[1,152]}),nt(hi,[2,10]),nt(ki,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(Sn,jn){if(jn.recoverable)this.trace(Sn);else{var er=new Error(Sn);throw er.hash=jn,er}},parse:function(Sn){var jn=this,er=[0],Cr=[],Qr=[null],yr=[],ai=this.table,Ir="",mi=0,wi=0,Mi=2,Ei=1,io=yr.slice.call(arguments,1),Di=Object.create(this.lexer),eo={yy:{}};for(var wo in this.yy)Object.prototype.hasOwnProperty.call(this.yy,wo)&&(eo.yy[wo]=this.yy[wo]);Di.setInput(Sn,eo.yy),eo.yy.lexer=Di,eo.yy.parser=this,typeof Di.yylloc>"u"&&(Di.yylloc={});var Ji=Di.yylloc;yr.push(Ji);var al=Di.options&&Di.options.ranges;typeof eo.yy.parseError=="function"?this.parseError=eo.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ws(){var xr;return xr=Cr.pop()||Di.lex()||Ei,typeof xr!="number"&&(xr instanceof Array&&(Cr=xr,xr=Cr.pop()),xr=jn.symbols_[xr]||xr),xr}for(var Pi,oo,Rs,jo,ls={},Dr,Yr,Vr,xi;;){if(oo=er[er.length-1],this.defaultActions[oo]?Rs=this.defaultActions[oo]:((Pi===null||typeof Pi>"u")&&(Pi=Ws()),Rs=ai[oo]&&ai[oo][Pi]),typeof Rs>"u"||!Rs.length||!Rs[0]){var ui="";xi=[];for(Dr in ai[oo])this.terminals_[Dr]&&Dr>Mi&&xi.push("'"+this.terminals_[Dr]+"'");Di.showPosition?ui="Parse error on line "+(mi+1)+`:
`+Di.showPosition()+`
Expecting `+xi.join(", ")+", got '"+(this.terminals_[Pi]||Pi)+"'":ui="Parse error on line "+(mi+1)+": Unexpected "+(Pi==Ei?"end of input":"'"+(this.terminals_[Pi]||Pi)+"'"),this.parseError(ui,{text:Di.match,token:this.terminals_[Pi]||Pi,line:Di.yylineno,loc:Ji,expected:xi})}if(Rs[0]instanceof Array&&Rs.length>1)throw new Error("Parse Error: multiple actions possible at state: "+oo+", token: "+Pi);switch(Rs[0]){case 1:er.push(Pi),Qr.push(Di.yytext),yr.push(Di.yylloc),er.push(Rs[1]),Pi=null,wi=Di.yyleng,Ir=Di.yytext,mi=Di.yylineno,Ji=Di.yylloc;break;case 2:if(Yr=this.productions_[Rs[1]][1],ls.$=Qr[Qr.length-Yr],ls._$={first_line:yr[yr.length-(Yr||1)].first_line,last_line:yr[yr.length-1].last_line,first_column:yr[yr.length-(Yr||1)].first_column,last_column:yr[yr.length-1].last_column},al&&(ls._$.range=[yr[yr.length-(Yr||1)].range[0],yr[yr.length-1].range[1]]),jo=this.performAction.apply(ls,[Ir,wi,mi,eo.yy,Rs[1],Qr,yr].concat(io)),typeof jo<"u")return jo;Yr&&(er=er.slice(0,-1*Yr*2),Qr=Qr.slice(0,-1*Yr),yr=yr.slice(0,-1*Yr)),er.push(this.productions_[Rs[1]][0]),Qr.push(ls.$),yr.push(ls._$),Vr=ai[er[er.length-2]][er[er.length-1]],er.push(Vr);break;case 3:return!0}}return!0}},Ti=function(){var Tn={EOF:1,parseError:function(jn,er){if(this.yy.parser)this.yy.parser.parseError(jn,er);else throw new Error(jn)},setInput:function(Sn,jn){return this.yy=jn||this.yy||{},this._input=Sn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Sn=this._input[0];this.yytext+=Sn,this.yyleng++,this.offset++,this.match+=Sn,this.matched+=Sn;var jn=Sn.match(/(?:\r\n?|\n).*/g);return jn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Sn},unput:function(Sn){var jn=Sn.length,er=Sn.split(/(?:\r\n?|\n)/g);this._input=Sn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-jn),this.offset-=jn;var Cr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var Qr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===Cr.length?this.yylloc.first_column:0)+Cr[Cr.length-er.length].length-er[0].length:this.yylloc.first_column-jn},this.options.ranges&&(this.yylloc.range=[Qr[0],Qr[0]+this.yyleng-jn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Sn){this.unput(this.match.slice(Sn))},pastInput:function(){var Sn=this.matched.substr(0,this.matched.length-this.match.length);return(Sn.length>20?"...":"")+Sn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Sn=this.match;return Sn.length<20&&(Sn+=this._input.substr(0,20-Sn.length)),(Sn.substr(0,20)+(Sn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Sn=this.pastInput(),jn=new Array(Sn.length+1).join("-");return Sn+this.upcomingInput()+`
`+jn+"^"},test_match:function(Sn,jn){var er,Cr,Qr;if(this.options.backtrack_lexer&&(Qr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Qr.yylloc.range=this.yylloc.range.slice(0))),Cr=Sn[0].match(/(?:\r\n?|\n).*/g),Cr&&(this.yylineno+=Cr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Cr?Cr[Cr.length-1].length-Cr[Cr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Sn[0].length},this.yytext+=Sn[0],this.match+=Sn[0],this.matches=Sn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Sn[0].length),this.matched+=Sn[0],er=this.performAction.call(this,this.yy,this,jn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var yr in Qr)this[yr]=Qr[yr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Sn,jn,er,Cr;this._more||(this.yytext="",this.match="");for(var Qr=this._currentRules(),yr=0;yr<Qr.length;yr++)if(er=this._input.match(this.rules[Qr[yr]]),er&&(!jn||er[0].length>jn[0].length)){if(jn=er,Cr=yr,this.options.backtrack_lexer){if(Sn=this.test_match(er,Qr[yr]),Sn!==!1)return Sn;if(this._backtrack){jn=!1;continue}else return!1}else if(!this.options.flex)break}return jn?(Sn=this.test_match(jn,Qr[Cr]),Sn!==!1?Sn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var jn=this.next();return jn||this.lex()},begin:function(jn){this.conditionStack.push(jn)},popState:function(){var jn=this.conditionStack.length-1;return jn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(jn){return jn=this.conditionStack.length-1-Math.abs(jn||0),jn>=0?this.conditionStack[jn]:"INITIAL"},pushState:function(jn){this.begin(jn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(jn,er,Cr,Qr){switch(Cr){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return Tn}();Bi.lexer=Ti;function Rr(){this.yy={}}return Rr.prototype=Bi,Bi.Parser=Rr,new Rr}();parser$a.parser=parser$a;const c4Parser=parser$a,c4Detector=nt=>nt.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let c4ShapeArray=[],boundaryParseStack=[""],currentBoundaryParse="global",parentBoundaryParse="",boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],rels=[],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2;var c4Type;const getC4Type=function(){return c4Type},setC4Type=function(nt){c4Type=sanitizeText$5(nt,getConfig$1())},parseDirective$a=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRel=function(nt,rt,it,vt,bt,wt,Tt,kt,Lt){if(nt==null||rt===void 0||rt===null||it===void 0||it===null||vt===void 0||vt===null)return;let Mt={};const Nt=rels.find(zt=>zt.from===rt&&zt.to===it);if(Nt?Mt=Nt:rels.push(Mt),Mt.type=nt,Mt.from=rt,Mt.to=it,Mt.label={text:vt},bt==null)Mt.techn={text:""};else if(typeof bt=="object"){let[zt,Ht]=Object.entries(bt)[0];Mt[zt]={text:Ht}}else Mt.techn={text:bt};if(wt==null)Mt.descr={text:""};else if(typeof wt=="object"){let[zt,Ht]=Object.entries(wt)[0];Mt[zt]={text:Ht}}else Mt.descr={text:wt};if(typeof Tt=="object"){let[zt,Ht]=Object.entries(Tt)[0];Mt[zt]=Ht}else Mt.sprite=Tt;if(typeof kt=="object"){let[zt,Ht]=Object.entries(kt)[0];Mt[zt]=Ht}else Mt.tags=kt;if(typeof Lt=="object"){let[zt,Ht]=Object.entries(Lt)[0];Mt[zt]=Ht}else Mt.link=Lt;Mt.wrap=autoWrap$1()},addPersonOrSystem=function(nt,rt,it,vt,bt,wt,Tt){if(rt===null||it===null)return;let kt={};const Lt=c4ShapeArray.find(Mt=>Mt.alias===rt);if(Lt&&rt===Lt.alias?kt=Lt:(kt.alias=rt,c4ShapeArray.push(kt)),it==null?kt.label={text:""}:kt.label={text:it},vt==null)kt.descr={text:""};else if(typeof vt=="object"){let[Mt,Nt]=Object.entries(vt)[0];kt[Mt]={text:Nt}}else kt.descr={text:vt};if(typeof bt=="object"){let[Mt,Nt]=Object.entries(bt)[0];kt[Mt]=Nt}else kt.sprite=bt;if(typeof wt=="object"){let[Mt,Nt]=Object.entries(wt)[0];kt[Mt]=Nt}else kt.tags=wt;if(typeof Tt=="object"){let[Mt,Nt]=Object.entries(Tt)[0];kt[Mt]=Nt}else kt.link=Tt;kt.typeC4Shape={text:nt},kt.parentBoundary=currentBoundaryParse,kt.wrap=autoWrap$1()},addContainer=function(nt,rt,it,vt,bt,wt,Tt,kt){if(rt===null||it===null)return;let Lt={};const Mt=c4ShapeArray.find(Nt=>Nt.alias===rt);if(Mt&&rt===Mt.alias?Lt=Mt:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},vt==null)Lt.techn={text:""};else if(typeof vt=="object"){let[Nt,zt]=Object.entries(vt)[0];Lt[Nt]={text:zt}}else Lt.techn={text:vt};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Nt,zt]=Object.entries(bt)[0];Lt[Nt]={text:zt}}else Lt.descr={text:bt};if(typeof wt=="object"){let[Nt,zt]=Object.entries(wt)[0];Lt[Nt]=zt}else Lt.sprite=wt;if(typeof Tt=="object"){let[Nt,zt]=Object.entries(Tt)[0];Lt[Nt]=zt}else Lt.tags=Tt;if(typeof kt=="object"){let[Nt,zt]=Object.entries(kt)[0];Lt[Nt]=zt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addComponent=function(nt,rt,it,vt,bt,wt,Tt,kt){if(rt===null||it===null)return;let Lt={};const Mt=c4ShapeArray.find(Nt=>Nt.alias===rt);if(Mt&&rt===Mt.alias?Lt=Mt:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},vt==null)Lt.techn={text:""};else if(typeof vt=="object"){let[Nt,zt]=Object.entries(vt)[0];Lt[Nt]={text:zt}}else Lt.techn={text:vt};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Nt,zt]=Object.entries(bt)[0];Lt[Nt]={text:zt}}else Lt.descr={text:bt};if(typeof wt=="object"){let[Nt,zt]=Object.entries(wt)[0];Lt[Nt]=zt}else Lt.sprite=wt;if(typeof Tt=="object"){let[Nt,zt]=Object.entries(Tt)[0];Lt[Nt]=zt}else Lt.tags=Tt;if(typeof kt=="object"){let[Nt,zt]=Object.entries(kt)[0];Lt[Nt]=zt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addPersonOrSystemBoundary=function(nt,rt,it,vt,bt){if(nt===null||rt===null)return;let wt={};const Tt=boundarys.find(kt=>kt.alias===nt);if(Tt&&nt===Tt.alias?wt=Tt:(wt.alias=nt,boundarys.push(wt)),rt==null?wt.label={text:""}:wt.label={text:rt},it==null)wt.type={text:"system"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];wt[kt]={text:Lt}}else wt.type={text:it};if(typeof vt=="object"){let[kt,Lt]=Object.entries(vt)[0];wt[kt]=Lt}else wt.tags=vt;if(typeof bt=="object"){let[kt,Lt]=Object.entries(bt)[0];wt[kt]=Lt}else wt.link=bt;wt.parentBoundary=currentBoundaryParse,wt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addContainerBoundary=function(nt,rt,it,vt,bt){if(nt===null||rt===null)return;let wt={};const Tt=boundarys.find(kt=>kt.alias===nt);if(Tt&&nt===Tt.alias?wt=Tt:(wt.alias=nt,boundarys.push(wt)),rt==null?wt.label={text:""}:wt.label={text:rt},it==null)wt.type={text:"container"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];wt[kt]={text:Lt}}else wt.type={text:it};if(typeof vt=="object"){let[kt,Lt]=Object.entries(vt)[0];wt[kt]=Lt}else wt.tags=vt;if(typeof bt=="object"){let[kt,Lt]=Object.entries(bt)[0];wt[kt]=Lt}else wt.link=bt;wt.parentBoundary=currentBoundaryParse,wt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addDeploymentNode=function(nt,rt,it,vt,bt,wt,Tt,kt){if(rt===null||it===null)return;let Lt={};const Mt=boundarys.find(Nt=>Nt.alias===rt);if(Mt&&rt===Mt.alias?Lt=Mt:(Lt.alias=rt,boundarys.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},vt==null)Lt.type={text:"node"};else if(typeof vt=="object"){let[Nt,zt]=Object.entries(vt)[0];Lt[Nt]={text:zt}}else Lt.type={text:vt};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Nt,zt]=Object.entries(bt)[0];Lt[Nt]={text:zt}}else Lt.descr={text:bt};if(typeof Tt=="object"){let[Nt,zt]=Object.entries(Tt)[0];Lt[Nt]=zt}else Lt.tags=Tt;if(typeof kt=="object"){let[Nt,zt]=Object.entries(kt)[0];Lt[Nt]=zt}else Lt.link=kt;Lt.nodeType=nt,Lt.parentBoundary=currentBoundaryParse,Lt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=rt,boundaryParseStack.push(parentBoundaryParse)},popBoundaryParseStack=function(){currentBoundaryParse=parentBoundaryParse,boundaryParseStack.pop(),parentBoundaryParse=boundaryParseStack.pop(),boundaryParseStack.push(parentBoundaryParse)},updateElStyle=function(nt,rt,it,vt,bt,wt,Tt,kt,Lt,Mt,Nt){let zt=c4ShapeArray.find(Ht=>Ht.alias===rt);if(!(zt===void 0&&(zt=boundarys.find(Ht=>Ht.alias===rt),zt===void 0))){if(it!=null)if(typeof it=="object"){let[Ht,Wt]=Object.entries(it)[0];zt[Ht]=Wt}else zt.bgColor=it;if(vt!=null)if(typeof vt=="object"){let[Ht,Wt]=Object.entries(vt)[0];zt[Ht]=Wt}else zt.fontColor=vt;if(bt!=null)if(typeof bt=="object"){let[Ht,Wt]=Object.entries(bt)[0];zt[Ht]=Wt}else zt.borderColor=bt;if(wt!=null)if(typeof wt=="object"){let[Ht,Wt]=Object.entries(wt)[0];zt[Ht]=Wt}else zt.shadowing=wt;if(Tt!=null)if(typeof Tt=="object"){let[Ht,Wt]=Object.entries(Tt)[0];zt[Ht]=Wt}else zt.shape=Tt;if(kt!=null)if(typeof kt=="object"){let[Ht,Wt]=Object.entries(kt)[0];zt[Ht]=Wt}else zt.sprite=kt;if(Lt!=null)if(typeof Lt=="object"){let[Ht,Wt]=Object.entries(Lt)[0];zt[Ht]=Wt}else zt.techn=Lt;if(Mt!=null)if(typeof Mt=="object"){let[Ht,Wt]=Object.entries(Mt)[0];zt[Ht]=Wt}else zt.legendText=Mt;if(Nt!=null)if(typeof Nt=="object"){let[Ht,Wt]=Object.entries(Nt)[0];zt[Ht]=Wt}else zt.legendSprite=Nt}},updateRelStyle=function(nt,rt,it,vt,bt,wt,Tt){const kt=rels.find(Lt=>Lt.from===rt&&Lt.to===it);if(kt!==void 0){if(vt!=null)if(typeof vt=="object"){let[Lt,Mt]=Object.entries(vt)[0];kt[Lt]=Mt}else kt.textColor=vt;if(bt!=null)if(typeof bt=="object"){let[Lt,Mt]=Object.entries(bt)[0];kt[Lt]=Mt}else kt.lineColor=bt;if(wt!=null)if(typeof wt=="object"){let[Lt,Mt]=Object.entries(wt)[0];kt[Lt]=parseInt(Mt)}else kt.offsetX=parseInt(wt);if(Tt!=null)if(typeof Tt=="object"){let[Lt,Mt]=Object.entries(Tt)[0];kt[Lt]=parseInt(Mt)}else kt.offsetY=parseInt(Tt)}},updateLayoutConfig=function(nt,rt,it){let vt=c4ShapeInRow$1,bt=c4BoundaryInRow$1;if(typeof rt=="object"){const wt=Object.values(rt)[0];vt=parseInt(wt)}else vt=parseInt(rt);if(typeof it=="object"){const wt=Object.values(it)[0];bt=parseInt(wt)}else bt=parseInt(it);vt>=1&&(c4ShapeInRow$1=vt),bt>=1&&(c4BoundaryInRow$1=bt)},getC4ShapeInRow=function(){return c4ShapeInRow$1},getC4BoundaryInRow=function(){return c4BoundaryInRow$1},getCurrentBoundaryParse=function(){return currentBoundaryParse},getParentBoundaryParse=function(){return parentBoundaryParse},getC4ShapeArray=function(nt){return nt==null?c4ShapeArray:c4ShapeArray.filter(rt=>rt.parentBoundary===nt)},getC4Shape=function(nt){return c4ShapeArray.find(rt=>rt.alias===nt)},getC4ShapeKeys=function(nt){return Object.keys(getC4ShapeArray(nt))},getBoundarys=function(nt){return nt==null?boundarys:boundarys.filter(rt=>rt.parentBoundary===nt)},getRels=function(){return rels},getTitle=function(){return title},setWrap$1=function(nt){wrapEnabled$1=nt},autoWrap$1=function(){return wrapEnabled$1},clear$d=function(){c4ShapeArray=[],boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],parentBoundaryParse="",currentBoundaryParse="global",boundaryParseStack=[""],rels=[],boundaryParseStack=[""],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2},LINETYPE$1={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE$1={FILLED:0,OPEN:1},PLACEMENT$1={LEFTOF:0,RIGHTOF:1,OVER:2},setTitle=function(nt){title=sanitizeText$5(nt,getConfig$1())},c4Db={addPersonOrSystem,addPersonOrSystemBoundary,addContainer,addContainerBoundary,addComponent,addDeploymentNode,popBoundaryParseStack,addRel,updateElStyle,updateRelStyle,updateLayoutConfig,autoWrap:autoWrap$1,setWrap:setWrap$1,getC4ShapeArray,getC4Shape,getC4ShapeKeys,getBoundarys,getCurrentBoundaryParse,getParentBoundaryParse,getRels,getTitle,getC4Type,getC4ShapeInRow,getC4BoundaryInRow,setAccTitle,getAccTitle,getAccDescription,setAccDescription,parseDirective:parseDirective$a,getConfig:()=>getConfig$1().c4,clear:clear$d,LINETYPE:LINETYPE$1,ARROWTYPE:ARROWTYPE$1,PLACEMENT:PLACEMENT$1,setTitle,setC4Type},drawRect$2=function(nt,rt){const it=nt.append("rect");if(it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.attrs!=="undefined"&&rt.attrs!==null)for(let vt in rt.attrs)it.attr(vt,rt.attrs[vt]);return rt.class!=="undefined"&&it.attr("class",rt.class),it},drawImage$1=function(nt,rt,it,vt,bt,wt){const Tt=nt.append("image");Tt.attr("width",rt),Tt.attr("height",it),Tt.attr("x",vt),Tt.attr("y",bt);let kt=wt.startsWith("data:image/png;base64")?wt:sanitizeUrl_1(wt);Tt.attr("xlink:href",kt)},drawRels$1=(nt,rt,it)=>{const vt=nt.append("g");let bt=0;for(let wt of rt){let Tt=wt.textColor?wt.textColor:"#444444",kt=wt.lineColor?wt.lineColor:"#444444",Lt=wt.offsetX?parseInt(wt.offsetX):0,Mt=wt.offsetY?parseInt(wt.offsetY):0,Nt="";if(bt===0){let Ht=vt.append("line");Ht.attr("x1",wt.startPoint.x),Ht.attr("y1",wt.startPoint.y),Ht.attr("x2",wt.endPoint.x),Ht.attr("y2",wt.endPoint.y),Ht.attr("stroke-width","1"),Ht.attr("stroke",kt),Ht.style("fill","none"),wt.type!=="rel_b"&&Ht.attr("marker-end","url("+Nt+"#arrowhead)"),(wt.type==="birel"||wt.type==="rel_b")&&Ht.attr("marker-start","url("+Nt+"#arrowend)"),bt=-1}else{let Ht=vt.append("path");Ht.attr("fill","none").attr("stroke-width","1").attr("stroke",kt).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",wt.startPoint.x).replaceAll("starty",wt.startPoint.y).replaceAll("controlx",wt.startPoint.x+(wt.endPoint.x-wt.startPoint.x)/2-(wt.endPoint.x-wt.startPoint.x)/4).replaceAll("controly",wt.startPoint.y+(wt.endPoint.y-wt.startPoint.y)/2).replaceAll("stopx",wt.endPoint.x).replaceAll("stopy",wt.endPoint.y)),wt.type!=="rel_b"&&Ht.attr("marker-end","url("+Nt+"#arrowhead)"),(wt.type==="birel"||wt.type==="rel_b")&&Ht.attr("marker-start","url("+Nt+"#arrowend)")}let zt=it.messageFont();_drawTextCandidateFunc$2(it)(wt.label.text,vt,Math.min(wt.startPoint.x,wt.endPoint.x)+Math.abs(wt.endPoint.x-wt.startPoint.x)/2+Lt,Math.min(wt.startPoint.y,wt.endPoint.y)+Math.abs(wt.endPoint.y-wt.startPoint.y)/2+Mt,wt.label.width,wt.label.height,{fill:Tt},zt),wt.techn&&wt.techn.text!==""&&(zt=it.messageFont(),_drawTextCandidateFunc$2(it)("["+wt.techn.text+"]",vt,Math.min(wt.startPoint.x,wt.endPoint.x)+Math.abs(wt.endPoint.x-wt.startPoint.x)/2+Lt,Math.min(wt.startPoint.y,wt.endPoint.y)+Math.abs(wt.endPoint.y-wt.startPoint.y)/2+it.messageFontSize+5+Mt,Math.max(wt.label.width,wt.techn.width),wt.techn.height,{fill:Tt,"font-style":"italic"},zt))}},drawBoundary$1=function(nt,rt,it){const vt=nt.append("g");let bt=rt.bgColor?rt.bgColor:"none",wt=rt.borderColor?rt.borderColor:"#444444",Tt=rt.fontColor?rt.fontColor:"black",kt={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};rt.nodeType&&(kt={"stroke-width":1});let Lt={x:rt.x,y:rt.y,fill:bt,stroke:wt,width:rt.width,height:rt.height,rx:2.5,ry:2.5,attrs:kt};drawRect$2(vt,Lt);let Mt=it.boundaryFont();Mt.fontWeight="bold",Mt.fontSize=Mt.fontSize+2,Mt.fontColor=Tt,_drawTextCandidateFunc$2(it)(rt.label.text,vt,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:"#444444"},Mt),rt.type&&rt.type.text!==""&&(Mt=it.boundaryFont(),Mt.fontColor=Tt,_drawTextCandidateFunc$2(it)(rt.type.text,vt,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:"#444444"},Mt)),rt.descr&&rt.descr.text!==""&&(Mt=it.boundaryFont(),Mt.fontSize=Mt.fontSize-2,Mt.fontColor=Tt,_drawTextCandidateFunc$2(it)(rt.descr.text,vt,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:"#444444"},Mt))},drawC4Shape=function(nt,rt,it){let vt=rt.bgColor?rt.bgColor:it[rt.typeC4Shape.text+"_bg_color"],bt=rt.borderColor?rt.borderColor:it[rt.typeC4Shape.text+"_border_color"],wt=rt.fontColor?rt.fontColor:"#FFFFFF",Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(rt.typeC4Shape.text){case"person":Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const kt=nt.append("g");kt.attr("class","person-man");const Lt=getNoteRect$2();switch(rt.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":Lt.x=rt.x,Lt.y=rt.y,Lt.fill=vt,Lt.width=rt.width,Lt.height=rt.height,Lt.style="stroke:"+bt+";stroke-width:0.5;",Lt.rx=2.5,Lt.ry=2.5,drawRect$2(kt,Lt);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":kt.append("path").attr("fill",vt).attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2).replaceAll("height",rt.height)),kt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":kt.append("path").attr("fill",vt).attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("width",rt.width).replaceAll("half",rt.height/2)),kt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",bt).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",rt.x+rt.width).replaceAll("starty",rt.y).replaceAll("half",rt.height/2));break}let Mt=getC4ShapeFont(it,rt.typeC4Shape.text);switch(kt.append("text").attr("fill",wt).attr("font-family",Mt.fontFamily).attr("font-size",Mt.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",rt.typeC4Shape.width).attr("x",rt.x+rt.width/2-rt.typeC4Shape.width/2).attr("y",rt.y+rt.typeC4Shape.Y).text("<<"+rt.typeC4Shape.text+">>"),rt.typeC4Shape.text){case"person":case"external_person":drawImage$1(kt,48,48,rt.x+rt.width/2-24,rt.y+rt.image.Y,Tt);break}let Nt=it[rt.typeC4Shape.text+"Font"]();return Nt.fontWeight="bold",Nt.fontSize=Nt.fontSize+2,Nt.fontColor=wt,_drawTextCandidateFunc$2(it)(rt.label.text,kt,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:wt},Nt),Nt=it[rt.typeC4Shape.text+"Font"](),Nt.fontColor=wt,rt.thchn&&rt.thchn.text!==""?_drawTextCandidateFunc$2(it)(rt.thchn.text,kt,rt.x,rt.y+rt.thchn.Y,rt.width,rt.height,{fill:wt,"font-style":"italic"},Nt):rt.type&&rt.type.text!==""&&_drawTextCandidateFunc$2(it)(rt.type.text,kt,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:wt,"font-style":"italic"},Nt),rt.descr&&rt.descr.text!==""&&(Nt=it.personFont(),Nt.fontColor=wt,_drawTextCandidateFunc$2(it)(rt.descr.text,kt,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:wt},Nt)),rt.height},insertDatabaseIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead$1=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowEnd=function(nt){nt.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},insertArrowFilledHead$1=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertDynamicNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead$1=function(nt){const it=nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);it.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),it.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},getNoteRect$2=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},getC4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),_drawTextCandidateFunc$2=function(){function nt(bt,wt,Tt,kt,Lt,Mt,Nt){const zt=wt.append("text").attr("x",Tt+Lt/2).attr("y",kt+Mt/2+5).style("text-anchor","middle").text(bt);vt(zt,Nt)}function rt(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const{fontSize:Ht,fontFamily:Wt,fontWeight:Zt}=zt,tn=bt.split(common$1.lineBreakRegex);for(let Yt=0;Yt<tn.length;Yt++){const nn=Yt*Ht-Ht*(tn.length-1)/2,rn=wt.append("text").attr("x",Tt+Lt/2).attr("y",kt).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",Ht).style("font-weight",Zt).style("font-family",Wt);rn.append("tspan").attr("dy",nn).text(tn[Yt]).attr("alignment-baseline","mathematical"),vt(rn,Nt)}}function it(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const Ht=wt.append("switch"),Zt=Ht.append("foreignObject").attr("x",Tt).attr("y",kt).attr("width",Lt).attr("height",Mt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Zt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Ht,Tt,kt,Lt,Mt,Nt,zt),vt(Zt,Nt)}function vt(bt,wt){for(const Tt in wt)wt.hasOwnProperty(Tt)&&bt.attr(Tt,wt[Tt])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),svgDraw$3={drawRect:drawRect$2,drawBoundary:drawBoundary$1,drawC4Shape,drawRels:drawRels$1,drawImage:drawImage$1,insertArrowHead:insertArrowHead$1,insertArrowEnd,insertArrowFilledHead:insertArrowFilledHead$1,insertDynamicNumber,insertArrowCrossHead:insertArrowCrossHead$1,insertDatabaseIcon:insertDatabaseIcon$1,insertComputerIcon:insertComputerIcon$1,insertClockIcon:insertClockIcon$1,getNoteRect:getNoteRect$2,sanitizeUrl:sanitizeUrl_1};let globalBoundaryMaxX=0,globalBoundaryMaxY=0,c4ShapeInRow=4,c4BoundaryInRow=2;parser$a.yy=c4Db;let conf$a={};class Bounds{constructor(rt){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,setConf$a(rt.db.getConfig())}setData(rt,it,vt,bt){this.nextData.startx=this.data.startx=rt,this.nextData.stopx=this.data.stopx=it,this.nextData.starty=this.data.starty=vt,this.nextData.stopy=this.data.stopy=bt}updateVal(rt,it,vt,bt){rt[it]===void 0?rt[it]=vt:rt[it]=bt(vt,rt[it])}insert(rt){this.nextData.cnt=this.nextData.cnt+1;let it=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+rt.margin:this.nextData.stopx+rt.margin*2,vt=it+rt.width,bt=this.nextData.starty+rt.margin*2,wt=bt+rt.height;(it>=this.data.widthLimit||vt>=this.data.widthLimit||this.nextData.cnt>c4ShapeInRow)&&(it=this.nextData.startx+rt.margin+conf$a.nextLinePaddingX,bt=this.nextData.stopy+rt.margin*2,this.nextData.stopx=vt=it+rt.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=wt=bt+rt.height,this.nextData.cnt=1),rt.x=it,rt.y=bt,this.updateVal(this.data,"startx",it,Math.min),this.updateVal(this.data,"starty",bt,Math.min),this.updateVal(this.data,"stopx",vt,Math.max),this.updateVal(this.data,"stopy",wt,Math.max),this.updateVal(this.nextData,"startx",it,Math.min),this.updateVal(this.nextData,"starty",bt,Math.min),this.updateVal(this.nextData,"stopx",vt,Math.max),this.updateVal(this.nextData,"stopy",wt,Math.max)}init(rt){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},setConf$a(rt.db.getConfig())}bumpLastMargin(rt){this.data.stopx+=rt,this.data.stopy+=rt}}const setConf$a=function(nt){assignWithDepth$1(conf$a,nt),nt.fontFamily&&(conf$a.personFontFamily=conf$a.systemFontFamily=conf$a.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$a.personFontSize=conf$a.systemFontSize=conf$a.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$a.personFontWeight=conf$a.systemFontWeight=conf$a.messageFontWeight=nt.fontWeight)},c4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),boundaryFont=nt=>({fontFamily:nt.boundaryFontFamily,fontSize:nt.boundaryFontSize,fontWeight:nt.boundaryFontWeight}),messageFont$1=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight});function calcC4ShapeTextWH(nt,rt,it,vt,bt){if(!rt[nt].width)if(it)rt[nt].text=wrapLabel(rt[nt].text,bt,vt),rt[nt].textLines=rt[nt].text.split(common$1.lineBreakRegex).length,rt[nt].width=bt,rt[nt].height=calculateTextHeight(rt[nt].text,vt);else{let wt=rt[nt].text.split(common$1.lineBreakRegex);rt[nt].textLines=wt.length;let Tt=0;rt[nt].height=0,rt[nt].width=0;for(const kt of wt)rt[nt].width=Math.max(calculateTextWidth(kt,vt),rt[nt].width),Tt=calculateTextHeight(kt,vt),rt[nt].height=rt[nt].height+Tt}}const drawBoundary=function(nt,rt,it){rt.x=it.data.startx,rt.y=it.data.starty,rt.width=it.data.stopx-it.data.startx,rt.height=it.data.stopy-it.data.starty,rt.label.y=conf$a.c4ShapeMargin-35;let vt=rt.wrap&&conf$a.wrap,bt=boundaryFont(conf$a);bt.fontSize=bt.fontSize+2,bt.fontWeight="bold";let wt=calculateTextWidth(rt.label.text,bt);calcC4ShapeTextWH("label",rt,vt,bt,wt),svgDraw$3.drawBoundary(nt,rt,conf$a)},drawC4ShapeArray=function(nt,rt,it,vt){let bt=0;for(const wt of vt){bt=0;const Tt=it[wt];let kt=c4ShapeFont(conf$a,Tt.typeC4Shape.text);switch(kt.fontSize=kt.fontSize-2,Tt.typeC4Shape.width=calculateTextWidth("<<"+Tt.typeC4Shape.text+">>",kt),Tt.typeC4Shape.height=kt.fontSize+2,Tt.typeC4Shape.Y=conf$a.c4ShapePadding,bt=Tt.typeC4Shape.Y+Tt.typeC4Shape.height-4,Tt.image={width:0,height:0,Y:0},Tt.typeC4Shape.text){case"person":case"external_person":Tt.image.width=48,Tt.image.height=48,Tt.image.Y=bt,bt=Tt.image.Y+Tt.image.height;break}Tt.sprite&&(Tt.image.width=48,Tt.image.height=48,Tt.image.Y=bt,bt=Tt.image.Y+Tt.image.height);let Lt=Tt.wrap&&conf$a.wrap,Mt=conf$a.width-conf$a.c4ShapePadding*2,Nt=c4ShapeFont(conf$a,Tt.typeC4Shape.text);if(Nt.fontSize=Nt.fontSize+2,Nt.fontWeight="bold",calcC4ShapeTextWH("label",Tt,Lt,Nt,Mt),Tt.label.Y=bt+8,bt=Tt.label.Y+Tt.label.height,Tt.type&&Tt.type.text!==""){Tt.type.text="["+Tt.type.text+"]";let Wt=c4ShapeFont(conf$a,Tt.typeC4Shape.text);calcC4ShapeTextWH("type",Tt,Lt,Wt,Mt),Tt.type.Y=bt+5,bt=Tt.type.Y+Tt.type.height}else if(Tt.techn&&Tt.techn.text!==""){Tt.techn.text="["+Tt.techn.text+"]";let Wt=c4ShapeFont(conf$a,Tt.techn.text);calcC4ShapeTextWH("techn",Tt,Lt,Wt,Mt),Tt.techn.Y=bt+5,bt=Tt.techn.Y+Tt.techn.height}let zt=bt,Ht=Tt.label.width;if(Tt.descr&&Tt.descr.text!==""){let Wt=c4ShapeFont(conf$a,Tt.typeC4Shape.text);calcC4ShapeTextWH("descr",Tt,Lt,Wt,Mt),Tt.descr.Y=bt+20,bt=Tt.descr.Y+Tt.descr.height,Ht=Math.max(Tt.label.width,Tt.descr.width),zt=bt-Tt.descr.textLines*5}Ht=Ht+conf$a.c4ShapePadding,Tt.width=Math.max(Tt.width||conf$a.width,Ht,conf$a.width),Tt.height=Math.max(Tt.height||conf$a.height,zt,conf$a.height),Tt.margin=Tt.margin||conf$a.c4ShapeMargin,nt.insert(Tt),svgDraw$3.drawC4Shape(rt,Tt,conf$a)}nt.bumpLastMargin(conf$a.c4ShapeMargin)};class Point{constructor(rt,it){this.x=rt,this.y=it}}let getIntersectPoint=function(nt,rt){let it=nt.x,vt=nt.y,bt=rt.x,wt=rt.y,Tt=it+nt.width/2,kt=vt+nt.height/2,Lt=Math.abs(it-bt),Mt=Math.abs(vt-wt),Nt=Mt/Lt,zt=nt.height/nt.width,Ht=null;return vt==wt&&it<bt?Ht=new Point(it+nt.width,kt):vt==wt&&it>bt?Ht=new Point(it,kt):it==bt&&vt<wt?Ht=new Point(Tt,vt+nt.height):it==bt&&vt>wt&&(Ht=new Point(Tt,vt)),it>bt&&vt<wt?zt>=Nt?Ht=new Point(it,kt+Nt*nt.width/2):Ht=new Point(Tt-Lt/Mt*nt.height/2,vt+nt.height):it<bt&&vt<wt?zt>=Nt?Ht=new Point(it+nt.width,kt+Nt*nt.width/2):Ht=new Point(Tt+Lt/Mt*nt.height/2,vt+nt.height):it<bt&&vt>wt?zt>=Nt?Ht=new Point(it+nt.width,kt-Nt*nt.width/2):Ht=new Point(Tt+nt.height/2*Lt/Mt,vt):it>bt&&vt>wt&&(zt>=Nt?Ht=new Point(it,kt-nt.width/2*Nt):Ht=new Point(Tt-nt.height/2*Lt/Mt,vt)),Ht},getIntersectPoints=function(nt,rt){let it={x:0,y:0};it.x=rt.x+rt.width/2,it.y=rt.y+rt.height/2;let vt=getIntersectPoint(nt,it);it.x=nt.x+nt.width/2,it.y=nt.y+nt.height/2;let bt=getIntersectPoint(rt,it);return{startPoint:vt,endPoint:bt}};const drawRels=function(nt,rt,it,vt){let bt=0;for(let wt of rt){bt=bt+1;let Tt=wt.wrap&&conf$a.wrap,kt=messageFont$1(conf$a);vt.db.getC4Type()==="C4Dynamic"&&(wt.label.text=bt+": "+wt.label.text);let Mt=calculateTextWidth(wt.label.text,kt);calcC4ShapeTextWH("label",wt,Tt,kt,Mt),wt.techn&&wt.techn.text!==""&&(Mt=calculateTextWidth(wt.techn.text,kt),calcC4ShapeTextWH("techn",wt,Tt,kt,Mt)),wt.descr&&wt.descr.text!==""&&(Mt=calculateTextWidth(wt.descr.text,kt),calcC4ShapeTextWH("descr",wt,Tt,kt,Mt));let Nt=it(wt.from),zt=it(wt.to),Ht=getIntersectPoints(Nt,zt);wt.startPoint=Ht.startPoint,wt.endPoint=Ht.endPoint}svgDraw$3.drawRels(nt,rt,conf$a)};function drawInsideBoundary(nt,rt,it,vt,bt){let wt=new Bounds(bt);wt.data.widthLimit=it.data.widthLimit/Math.min(c4BoundaryInRow,vt.length);for(let[Tt,kt]of vt.entries()){let Lt=0;kt.image={width:0,height:0,Y:0},kt.sprite&&(kt.image.width=48,kt.image.height=48,kt.image.Y=Lt,Lt=kt.image.Y+kt.image.height);let Mt=kt.wrap&&conf$a.wrap,Nt=boundaryFont(conf$a);if(Nt.fontSize=Nt.fontSize+2,Nt.fontWeight="bold",calcC4ShapeTextWH("label",kt,Mt,Nt,wt.data.widthLimit),kt.label.Y=Lt+8,Lt=kt.label.Y+kt.label.height,kt.type&&kt.type.text!==""){kt.type.text="["+kt.type.text+"]";let Zt=boundaryFont(conf$a);calcC4ShapeTextWH("type",kt,Mt,Zt,wt.data.widthLimit),kt.type.Y=Lt+5,Lt=kt.type.Y+kt.type.height}if(kt.descr&&kt.descr.text!==""){let Zt=boundaryFont(conf$a);Zt.fontSize=Zt.fontSize-2,calcC4ShapeTextWH("descr",kt,Mt,Zt,wt.data.widthLimit),kt.descr.Y=Lt+20,Lt=kt.descr.Y+kt.descr.height}if(Tt==0||Tt%c4BoundaryInRow===0){let Zt=it.data.startx+conf$a.diagramMarginX,tn=it.data.stopy+conf$a.diagramMarginY+Lt;wt.setData(Zt,Zt,tn,tn)}else{let Zt=wt.data.stopx!==wt.data.startx?wt.data.stopx+conf$a.diagramMarginX:wt.data.startx,tn=wt.data.starty;wt.setData(Zt,Zt,tn,tn)}wt.name=kt.alias;let zt=bt.db.getC4ShapeArray(kt.alias),Ht=bt.db.getC4ShapeKeys(kt.alias);Ht.length>0&&drawC4ShapeArray(wt,nt,zt,Ht),rt=kt.alias;let Wt=bt.db.getBoundarys(rt);Wt.length>0&&drawInsideBoundary(nt,rt,wt,Wt,bt),kt.alias!=="global"&&drawBoundary(nt,kt,wt),it.data.stopy=Math.max(wt.data.stopy+conf$a.c4ShapeMargin,it.data.stopy),it.data.stopx=Math.max(wt.data.stopx+conf$a.c4ShapeMargin,it.data.stopx),globalBoundaryMaxX=Math.max(globalBoundaryMaxX,it.data.stopx),globalBoundaryMaxY=Math.max(globalBoundaryMaxY,it.data.stopy)}}const draw$e=function(nt,rt,it,vt){conf$a=getConfig$1().c4;const bt=getConfig$1().securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const Tt=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body");let kt=vt.db;vt.db.setWrap(conf$a.wrap),c4ShapeInRow=kt.getC4ShapeInRow(),c4BoundaryInRow=kt.getC4BoundaryInRow(),log$1.debug(`C:${JSON.stringify(conf$a,null,2)}`);const Lt=bt==="sandbox"?Tt.select(`[id="${rt}"]`):select(`[id="${rt}"]`);svgDraw$3.insertComputerIcon(Lt),svgDraw$3.insertDatabaseIcon(Lt),svgDraw$3.insertClockIcon(Lt);let Mt=new Bounds(vt);Mt.setData(conf$a.diagramMarginX,conf$a.diagramMarginX,conf$a.diagramMarginY,conf$a.diagramMarginY),Mt.data.widthLimit=screen.availWidth,globalBoundaryMaxX=conf$a.diagramMarginX,globalBoundaryMaxY=conf$a.diagramMarginY;const Nt=vt.db.getTitle();let zt=vt.db.getBoundarys("");drawInsideBoundary(Lt,"",Mt,zt,vt),svgDraw$3.insertArrowHead(Lt),svgDraw$3.insertArrowEnd(Lt),svgDraw$3.insertArrowCrossHead(Lt),svgDraw$3.insertArrowFilledHead(Lt),drawRels(Lt,vt.db.getRels(),vt.db.getC4Shape,vt),Mt.data.stopx=globalBoundaryMaxX,Mt.data.stopy=globalBoundaryMaxY;const Ht=Mt.data;let Zt=Ht.stopy-Ht.starty+2*conf$a.diagramMarginY;const Yt=Ht.stopx-Ht.startx+2*conf$a.diagramMarginX;Nt&&Lt.append("text").text(Nt).attr("x",(Ht.stopx-Ht.startx)/2-4*conf$a.diagramMarginX).attr("y",Ht.starty+conf$a.diagramMarginY),configureSvgSize(Lt,Zt,Yt,conf$a.useMaxWidth);const nn=Nt?60:0;Lt.attr("viewBox",Ht.startx-conf$a.diagramMarginX+" -"+(conf$a.diagramMarginY+nn)+" "+Yt+" "+(Zt+nn)),log$1.debug("models:",Ht)},c4Renderer={drawPersonOrSystemArray:drawC4ShapeArray,drawBoundary,setConf:setConf$a,draw:draw$e};var parser$9=function(){var nt=function(ir,Ln,en,dn){for(en=en||{},dn=ir.length;dn--;en[ir[dn]]=Ln);return en},rt=[1,3],it=[1,7],vt=[1,8],bt=[1,9],wt=[1,10],Tt=[1,13],kt=[1,12],Lt=[1,16,25],Mt=[1,20],Nt=[1,32],zt=[1,33],Ht=[1,34],Wt=[1,36],Zt=[1,39],tn=[1,37],Yt=[1,38],nn=[1,44],rn=[1,45],ln=[1,40],sn=[1,41],mn=[1,42],wn=[1,43],Cn=[1,48],An=[1,49],Pn=[1,50],On=[1,51],kn=[16,25],gn=[1,65],Vn=[1,66],pn=[1,67],pr=[1,68],yn=[1,69],mr=[1,70],Er=[1,71],Mr=[1,80],rr=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],vr=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],cr=[5,8,9,10,11,16,19,23,25],gr=[54,88,89,90,91],Or=[54,65,66,88,89,90,91],Ar=[54,60,61,62,63,64,88,89,90,91],sr=[16,25,32],ii=[1,107],ar={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(Ln,en,dn,un,Nn,In,lr){var $n=In.length-1;switch(Nn){case 5:un.setDirection("TB");break;case 6:un.setDirection("BT");break;case 7:un.setDirection("RL");break;case 8:un.setDirection("LR");break;case 12:un.parseDirective("%%{","open_directive");break;case 13:un.parseDirective(In[$n],"type_directive");break;case 14:In[$n]=In[$n].trim().replace(/'/g,'"'),un.parseDirective(In[$n],"arg_directive");break;case 15:un.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=In[$n];break;case 22:this.$=In[$n-1]+In[$n];break;case 23:case 24:this.$=In[$n-1]+"~"+In[$n];break;case 25:un.addRelation(In[$n]);break;case 26:In[$n-1].title=un.cleanupLabel(In[$n]),un.addRelation(In[$n-1]);break;case 35:this.$=In[$n].trim(),un.setAccTitle(this.$);break;case 36:case 37:this.$=In[$n].trim(),un.setAccDescription(this.$);break;case 38:un.addClass(In[$n]);break;case 39:un.addClass(In[$n-2]),un.setCssClass(In[$n-2],In[$n]);break;case 40:un.addClass(In[$n-3]),un.addMembers(In[$n-3],In[$n-1]);break;case 41:un.addClass(In[$n-5]),un.setCssClass(In[$n-5],In[$n-3]),un.addMembers(In[$n-5],In[$n-1]);break;case 42:un.addAnnotation(In[$n],In[$n-2]);break;case 43:this.$=[In[$n]];break;case 44:In[$n].push(In[$n-1]),this.$=In[$n];break;case 45:break;case 46:un.addMember(In[$n-1],un.cleanupLabel(In[$n]));break;case 47:break;case 48:break;case 49:this.$={id1:In[$n-2],id2:In[$n],relation:In[$n-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:In[$n-3],id2:In[$n],relation:In[$n-1],relationTitle1:In[$n-2],relationTitle2:"none"};break;case 51:this.$={id1:In[$n-3],id2:In[$n],relation:In[$n-2],relationTitle1:"none",relationTitle2:In[$n-1]};break;case 52:this.$={id1:In[$n-4],id2:In[$n],relation:In[$n-2],relationTitle1:In[$n-3],relationTitle2:In[$n-1]};break;case 53:un.addNote(In[$n],In[$n-1]);break;case 54:un.addNote(In[$n]);break;case 55:this.$={type1:In[$n-2],type2:In[$n],lineType:In[$n-1]};break;case 56:this.$={type1:"none",type2:In[$n],lineType:In[$n-1]};break;case 57:this.$={type1:In[$n-1],type2:"none",lineType:In[$n]};break;case 58:this.$={type1:"none",type2:"none",lineType:In[$n]};break;case 59:this.$=un.relationType.AGGREGATION;break;case 60:this.$=un.relationType.EXTENSION;break;case 61:this.$=un.relationType.COMPOSITION;break;case 62:this.$=un.relationType.DEPENDENCY;break;case 63:this.$=un.relationType.LOLLIPOP;break;case 64:this.$=un.lineType.LINE;break;case 65:this.$=un.lineType.DOTTED_LINE;break;case 66:case 72:this.$=In[$n-2],un.setClickEvent(In[$n-1],In[$n]);break;case 67:case 73:this.$=In[$n-3],un.setClickEvent(In[$n-2],In[$n-1]),un.setTooltip(In[$n-2],In[$n]);break;case 68:case 76:this.$=In[$n-2],un.setLink(In[$n-1],In[$n]);break;case 69:this.$=In[$n-3],un.setLink(In[$n-2],In[$n-1],In[$n]);break;case 70:case 78:this.$=In[$n-3],un.setLink(In[$n-2],In[$n-1]),un.setTooltip(In[$n-2],In[$n]);break;case 71:case 79:this.$=In[$n-4],un.setLink(In[$n-3],In[$n-2],In[$n]),un.setTooltip(In[$n-3],In[$n-1]);break;case 74:this.$=In[$n-3],un.setClickEvent(In[$n-2],In[$n-1],In[$n]);break;case 75:this.$=In[$n-4],un.setClickEvent(In[$n-3],In[$n-2],In[$n-1]),un.setTooltip(In[$n-3],In[$n]);break;case 77:this.$=In[$n-3],un.setLink(In[$n-2],In[$n-1],In[$n]);break;case 80:un.setCssClass(In[$n-1],In[$n]);break}},table:[{3:1,4:2,5:rt,6:4,7:5,8:it,9:vt,10:bt,11:wt,12:6,13:11,19:Tt,23:kt},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:rt,6:4,7:5,8:it,9:vt,10:bt,11:wt,12:6,13:11,19:Tt,23:kt},{1:[2,9]},nt(Lt,[2,5]),nt(Lt,[2,6]),nt(Lt,[2,7]),nt(Lt,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:Mt},nt([17,22],[2,13]),{6:31,7:30,8:it,9:vt,10:bt,11:wt,13:11,19:Tt,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Nt,41:zt,43:Ht,44:Wt,49:Zt,51:tn,52:Yt,55:nn,57:rn,67:ln,68:sn,70:mn,74:wn,88:Cn,89:An,90:Pn,91:On},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},nt(kn,[2,25],{32:[1,57]}),nt(kn,[2,27]),nt(kn,[2,28]),nt(kn,[2,29]),nt(kn,[2,30]),nt(kn,[2,31]),nt(kn,[2,32]),nt(kn,[2,33]),nt(kn,[2,34]),{40:[1,58]},{42:[1,59]},nt(kn,[2,37]),nt(kn,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:gn,61:Vn,62:pn,63:pr,64:yn,65:mr,66:Er}),{27:72,28:46,29:47,88:Cn,89:An,90:Pn,91:On},nt(kn,[2,47]),nt(kn,[2,48]),{28:73,88:Cn,89:An,90:Pn},{27:74,28:46,29:47,88:Cn,89:An,90:Pn,91:On},{27:75,28:46,29:47,88:Cn,89:An,90:Pn,91:On},{27:76,28:46,29:47,88:Cn,89:An,90:Pn,91:On},{54:[1,77]},{27:78,28:46,29:47,88:Cn,89:An,90:Pn,91:On},{54:Mr,56:79},nt(rr,[2,20],{28:46,29:47,27:81,30:[1,82],88:Cn,89:An,90:Pn,91:On}),nt(rr,[2,21],{30:[1,83]}),nt(vr,[2,94]),nt(vr,[2,95]),nt(vr,[2,96]),nt([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),nt(cr,[2,10]),{15:84,22:Mt},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:it,9:vt,10:bt,11:wt,13:11,19:Tt,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Nt,41:zt,43:Ht,44:Wt,49:Zt,51:tn,52:Yt,55:nn,57:rn,67:ln,68:sn,70:mn,74:wn,88:Cn,89:An,90:Pn,91:On},nt(kn,[2,26]),nt(kn,[2,35]),nt(kn,[2,36]),{27:86,28:46,29:47,54:[1,87],88:Cn,89:An,90:Pn,91:On},{53:88,58:63,59:64,60:gn,61:Vn,62:pn,63:pr,64:yn,65:mr,66:Er},nt(kn,[2,46]),{59:89,65:mr,66:Er},nt(gr,[2,58],{58:90,60:gn,61:Vn,62:pn,63:pr,64:yn}),nt(Or,[2,59]),nt(Or,[2,60]),nt(Or,[2,61]),nt(Or,[2,62]),nt(Or,[2,63]),nt(Ar,[2,64]),nt(Ar,[2,65]),nt(kn,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:Cn,89:An,90:Pn},{54:Mr,56:99},nt(kn,[2,54]),nt(kn,[2,98]),nt(rr,[2,22]),nt(rr,[2,23]),nt(rr,[2,24]),{16:[1,100]},{25:[2,19]},nt(sr,[2,49]),{27:101,28:46,29:47,88:Cn,89:An,90:Pn,91:On},{27:102,28:46,29:47,54:[1,103],88:Cn,89:An,90:Pn,91:On},nt(gr,[2,57],{58:104,60:gn,61:Vn,62:pn,63:pr,64:yn}),nt(gr,[2,56]),{28:105,88:Cn,89:An,90:Pn},{47:106,51:ii},{27:108,28:46,29:47,88:Cn,89:An,90:Pn,91:On},nt(kn,[2,66],{54:[1,109]}),nt(kn,[2,68],{54:[1,111],69:[1,110]}),nt(kn,[2,72],{54:[1,112],72:[1,113]}),nt(kn,[2,76],{54:[1,115],69:[1,114]}),nt(kn,[2,80]),nt(kn,[2,53]),nt(cr,[2,11]),nt(sr,[2,51]),nt(sr,[2,50]),{27:116,28:46,29:47,88:Cn,89:An,90:Pn,91:On},nt(gr,[2,55]),nt(kn,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:ii},nt(kn,[2,42]),nt(kn,[2,67]),nt(kn,[2,69]),nt(kn,[2,70],{69:[1,120]}),nt(kn,[2,73]),nt(kn,[2,74],{54:[1,121]}),nt(kn,[2,77]),nt(kn,[2,78],{69:[1,122]}),nt(sr,[2,52]),{47:123,51:ii},nt(kn,[2,40]),{48:[2,44]},nt(kn,[2,71]),nt(kn,[2,75]),nt(kn,[2,79]),{48:[1,124]},nt(kn,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(Ln,en){if(en.recoverable)this.trace(Ln);else{var dn=new Error(Ln);throw dn.hash=en,dn}},parse:function(Ln){var en=this,dn=[0],un=[],Nn=[null],In=[],lr=this.table,$n="",Qn=0,Wn=0,or=2,dr=1,kr=In.slice.call(arguments,1),br=Object.create(this.lexer),_r={yy:{}};for(var hi in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hi)&&(_r.yy[hi]=this.yy[hi]);br.setInput(Ln,_r.yy),_r.yy.lexer=br,_r.yy.parser=this,typeof br.yylloc>"u"&&(br.yylloc={});var di=br.yylloc;In.push(di);var vi=br.options&&br.options.ranges;typeof _r.yy.parseError=="function"?this.parseError=_r.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ai(){var yr;return yr=un.pop()||br.lex()||dr,typeof yr!="number"&&(yr instanceof Array&&(un=yr,yr=un.pop()),yr=en.symbols_[yr]||yr),yr}for(var ki,Bi,Ti,Rr,Tn={},Sn,jn,er,Cr;;){if(Bi=dn[dn.length-1],this.defaultActions[Bi]?Ti=this.defaultActions[Bi]:((ki===null||typeof ki>"u")&&(ki=Ai()),Ti=lr[Bi]&&lr[Bi][ki]),typeof Ti>"u"||!Ti.length||!Ti[0]){var Qr="";Cr=[];for(Sn in lr[Bi])this.terminals_[Sn]&&Sn>or&&Cr.push("'"+this.terminals_[Sn]+"'");br.showPosition?Qr="Parse error on line "+(Qn+1)+`:
`+br.showPosition()+`
Expecting `+Cr.join(", ")+", got '"+(this.terminals_[ki]||ki)+"'":Qr="Parse error on line "+(Qn+1)+": Unexpected "+(ki==dr?"end of input":"'"+(this.terminals_[ki]||ki)+"'"),this.parseError(Qr,{text:br.match,token:this.terminals_[ki]||ki,line:br.yylineno,loc:di,expected:Cr})}if(Ti[0]instanceof Array&&Ti.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Bi+", token: "+ki);switch(Ti[0]){case 1:dn.push(ki),Nn.push(br.yytext),In.push(br.yylloc),dn.push(Ti[1]),ki=null,Wn=br.yyleng,$n=br.yytext,Qn=br.yylineno,di=br.yylloc;break;case 2:if(jn=this.productions_[Ti[1]][1],Tn.$=Nn[Nn.length-jn],Tn._$={first_line:In[In.length-(jn||1)].first_line,last_line:In[In.length-1].last_line,first_column:In[In.length-(jn||1)].first_column,last_column:In[In.length-1].last_column},vi&&(Tn._$.range=[In[In.length-(jn||1)].range[0],In[In.length-1].range[1]]),Rr=this.performAction.apply(Tn,[$n,Wn,Qn,_r.yy,Ti[1],Nn,In].concat(kr)),typeof Rr<"u")return Rr;jn&&(dn=dn.slice(0,-1*jn*2),Nn=Nn.slice(0,-1*jn),In=In.slice(0,-1*jn)),dn.push(this.productions_[Ti[1]][0]),Nn.push(Tn.$),In.push(Tn._$),er=lr[dn[dn.length-2]][dn[dn.length-1]],dn.push(er);break;case 3:return!0}}return!0}},fr=function(){var ir={EOF:1,parseError:function(en,dn){if(this.yy.parser)this.yy.parser.parseError(en,dn);else throw new Error(en)},setInput:function(Ln,en){return this.yy=en||this.yy||{},this._input=Ln,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ln=this._input[0];this.yytext+=Ln,this.yyleng++,this.offset++,this.match+=Ln,this.matched+=Ln;var en=Ln.match(/(?:\r\n?|\n).*/g);return en?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ln},unput:function(Ln){var en=Ln.length,dn=Ln.split(/(?:\r\n?|\n)/g);this._input=Ln+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-en),this.offset-=en;var un=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),dn.length-1&&(this.yylineno-=dn.length-1);var Nn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:dn?(dn.length===un.length?this.yylloc.first_column:0)+un[un.length-dn.length].length-dn[0].length:this.yylloc.first_column-en},this.options.ranges&&(this.yylloc.range=[Nn[0],Nn[0]+this.yyleng-en]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Ln){this.unput(this.match.slice(Ln))},pastInput:function(){var Ln=this.matched.substr(0,this.matched.length-this.match.length);return(Ln.length>20?"...":"")+Ln.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ln=this.match;return Ln.length<20&&(Ln+=this._input.substr(0,20-Ln.length)),(Ln.substr(0,20)+(Ln.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ln=this.pastInput(),en=new Array(Ln.length+1).join("-");return Ln+this.upcomingInput()+`
`+en+"^"},test_match:function(Ln,en){var dn,un,Nn;if(this.options.backtrack_lexer&&(Nn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Nn.yylloc.range=this.yylloc.range.slice(0))),un=Ln[0].match(/(?:\r\n?|\n).*/g),un&&(this.yylineno+=un.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:un?un[un.length-1].length-un[un.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ln[0].length},this.yytext+=Ln[0],this.match+=Ln[0],this.matches=Ln,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ln[0].length),this.matched+=Ln[0],dn=this.performAction.call(this,this.yy,this,en,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),dn)return dn;if(this._backtrack){for(var In in Nn)this[In]=Nn[In];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ln,en,dn,un;this._more||(this.yytext="",this.match="");for(var Nn=this._currentRules(),In=0;In<Nn.length;In++)if(dn=this._input.match(this.rules[Nn[In]]),dn&&(!en||dn[0].length>en[0].length)){if(en=dn,un=In,this.options.backtrack_lexer){if(Ln=this.test_match(dn,Nn[In]),Ln!==!1)return Ln;if(this._backtrack){en=!1;continue}else return!1}else if(!this.options.flex)break}return en?(Ln=this.test_match(en,Nn[un]),Ln!==!1?Ln:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var en=this.next();return en||this.lex()},begin:function(en){this.conditionStack.push(en)},popState:function(){var en=this.conditionStack.length-1;return en>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(en){return en=this.conditionStack.length-1-Math.abs(en||0),en>=0?this.conditionStack[en]:"INITIAL"},pushState:function(en){this.begin(en)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(en,dn,un,Nn){switch(un){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return ir}();ar.lexer=fr;function wr(){this.yy={}}return wr.prototype=ar,ar.Parser=wr,new wr}();parser$9.parser=parser$9;const classParser=parser$9,classDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*classDiagram/)!==null},classDetectorV2=(nt,rt)=>{var it;return nt.match(/^\s*classDiagram/)!==null&&((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!0:nt.match(/^\s*classDiagram-v2/)!==null},MERMAID_DOM_ID_PREFIX$1="classid-";let relations$1=[],classes$2={},notes=[],classCounter=0,funs$2=[];const sanitizeText$2=nt=>common$1.sanitizeText(nt,getConfig$1()),parseDirective$9=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},splitClassNameAndType=function(nt){let rt="",it=nt;if(nt.indexOf("~")>0){let vt=nt.split("~");it=vt[0],rt=common$1.sanitizeText(vt[1],getConfig$1())}return{className:it,type:rt}},addClass$1=function(nt){let rt=splitClassNameAndType(nt);classes$2[rt.className]===void 0&&(classes$2[rt.className]={id:rt.className,type:rt.type,cssClasses:[],methods:[],members:[],annotations:[],domId:MERMAID_DOM_ID_PREFIX$1+rt.className+"-"+classCounter},classCounter++)},lookUpDomId$1=function(nt){const rt=Object.keys(classes$2);for(const it of rt)if(classes$2[it].id===nt)return classes$2[it].domId},clear$c=function(){relations$1=[],classes$2={},notes=[],funs$2=[],funs$2.push(setupToolTips$1),clear$g()},getClass=function(nt){return classes$2[nt]},getClasses$5=function(){return classes$2},getRelations$1=function(){return relations$1},getNotes=function(){return notes},addRelation$1=function(nt){log$1.debug("Adding relation: "+JSON.stringify(nt)),addClass$1(nt.id1),addClass$1(nt.id2),nt.id1=splitClassNameAndType(nt.id1).className,nt.id2=splitClassNameAndType(nt.id2).className,nt.relationTitle1=common$1.sanitizeText(nt.relationTitle1.trim(),getConfig$1()),nt.relationTitle2=common$1.sanitizeText(nt.relationTitle2.trim(),getConfig$1()),relations$1.push(nt)},addAnnotation=function(nt,rt){const it=splitClassNameAndType(nt).className;classes$2[it].annotations.push(rt)},addMember=function(nt,rt){const it=splitClassNameAndType(nt).className,vt=classes$2[it];if(typeof rt=="string"){const bt=rt.trim();bt.startsWith("<<")&&bt.endsWith(">>")?vt.annotations.push(sanitizeText$2(bt.substring(2,bt.length-2))):bt.indexOf(")")>0?vt.methods.push(sanitizeText$2(bt)):bt&&vt.members.push(sanitizeText$2(bt))}},addMembers=function(nt,rt){Array.isArray(rt)&&(rt.reverse(),rt.forEach(it=>addMember(nt,it)))},addNote$1=function(nt,rt){const it={id:`note${notes.length}`,class:rt,text:nt};notes.push(it)},cleanupLabel$1=function(nt){return nt.substring(0,1)===":"?common$1.sanitizeText(nt.substr(1).trim(),getConfig$1()):sanitizeText$2(nt.trim())},setCssClass$1=function(nt,rt){nt.split(",").forEach(function(it){let vt=it;it[0].match(/\d/)&&(vt=MERMAID_DOM_ID_PREFIX$1+vt),classes$2[vt]!==void 0&&classes$2[vt].cssClasses.push(rt)})},setTooltip$1=function(nt,rt){const it=getConfig$1();nt.split(",").forEach(function(vt){rt!==void 0&&(classes$2[vt].tooltip=common$1.sanitizeText(rt,it))})},getTooltip$1=function(nt){return classes$2[nt].tooltip},setLink$2=function(nt,rt,it){const vt=getConfig$1();nt.split(",").forEach(function(bt){let wt=bt;bt[0].match(/\d/)&&(wt=MERMAID_DOM_ID_PREFIX$1+wt),classes$2[wt]!==void 0&&(classes$2[wt].link=utils.formatUrl(rt,vt),vt.securityLevel==="sandbox"?classes$2[wt].linkTarget="_top":typeof it=="string"?classes$2[wt].linkTarget=sanitizeText$2(it):classes$2[wt].linkTarget="_blank")}),setCssClass$1(nt,"clickable")},setClickEvent$2=function(nt,rt,it){nt.split(",").forEach(function(vt){setClickFunc(vt,rt,it),classes$2[vt].haveCallback=!0}),setCssClass$1(nt,"clickable")},setClickFunc=function(nt,rt,it){const vt=getConfig$1();let bt=nt,wt=lookUpDomId$1(bt);if(vt.securityLevel==="loose"&&rt!==void 0&&classes$2[bt]!==void 0){let Tt=[];if(typeof it=="string"){Tt=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let kt=0;kt<Tt.length;kt++){let Lt=Tt[kt].trim();Lt.charAt(0)==='"'&&Lt.charAt(Lt.length-1)==='"'&&(Lt=Lt.substr(1,Lt.length-2)),Tt[kt]=Lt}}Tt.length===0&&Tt.push(wt),funs$2.push(function(){const kt=document.querySelector(`[id="${wt}"]`);kt!==null&&kt.addEventListener("click",function(){utils.runFunc(rt,...Tt)},!1)})}},bindFunctions$2=function(nt){funs$2.forEach(function(rt){rt(nt)})},lineType$1={LINE:0,DOTTED_LINE:1},relationType$1={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setupToolTips$1=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const bt=select(this);if(bt.attr("title")===null)return;const Tt=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(bt.attr("title")).style("left",window.scrollX+Tt.left+(Tt.right-Tt.left)/2+"px").style("top",window.scrollY+Tt.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),bt.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$2.push(setupToolTips$1);let direction$2="TB";const getDirection$2=()=>direction$2,setDirection$2=nt=>{direction$2=nt},classDb={parseDirective:parseDirective$9,setAccTitle,getAccTitle,getAccDescription,setAccDescription,getConfig:()=>getConfig$1().class,addClass:addClass$1,bindFunctions:bindFunctions$2,clear:clear$c,getClass,getClasses:getClasses$5,getNotes,addAnnotation,addNote:addNote$1,getRelations:getRelations$1,addRelation:addRelation$1,getDirection:getDirection$2,setDirection:setDirection$2,addMember,addMembers,cleanupLabel:cleanupLabel$1,lineType:lineType$1,relationType:relationType$1,setClickEvent:setClickEvent$2,setCssClass:setCssClass$1,setLink:setLink$2,getTooltip:getTooltip$1,setTooltip:setTooltip$1,lookUpDomId:lookUpDomId$1,setDiagramTitle,getDiagramTitle};let edgeCount$1=0;const drawEdge$1=function(nt,rt,it,vt,bt){const wt=function(rn){switch(rn){case bt.db.relationType.AGGREGATION:return"aggregation";case bt.db.relationType.EXTENSION:return"extension";case bt.db.relationType.COMPOSITION:return"composition";case bt.db.relationType.DEPENDENCY:return"dependency";case bt.db.relationType.LOLLIPOP:return"lollipop"}};rt.points=rt.points.filter(rn=>!Number.isNaN(rn.y));const Tt=rt.points,kt=line$1().x(function(rn){return rn.x}).y(function(rn){return rn.y}).curve(curveBasis),Lt=nt.append("path").attr("d",kt(Tt)).attr("id","edge"+edgeCount$1).attr("class","relation");let Mt="";vt.arrowMarkerAbsolute&&(Mt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Mt=Mt.replace(/\(/g,"\\("),Mt=Mt.replace(/\)/g,"\\)")),it.relation.lineType==1&&Lt.attr("class","relation dashed-line"),it.relation.lineType==10&&Lt.attr("class","relation dotted-line"),it.relation.type1!=="none"&&Lt.attr("marker-start","url("+Mt+"#"+wt(it.relation.type1)+"Start)"),it.relation.type2!=="none"&&Lt.attr("marker-end","url("+Mt+"#"+wt(it.relation.type2)+"End)");let Nt,zt;const Ht=rt.points.length;let Wt=utils.calcLabelPosition(rt.points);Nt=Wt.x,zt=Wt.y;let Zt,tn,Yt,nn;if(Ht%2!==0&&Ht>1){let rn=utils.calcCardinalityPosition(it.relation.type1!=="none",rt.points,rt.points[0]),ln=utils.calcCardinalityPosition(it.relation.type2!=="none",rt.points,rt.points[Ht-1]);log$1.debug("cardinality_1_point "+JSON.stringify(rn)),log$1.debug("cardinality_2_point "+JSON.stringify(ln)),Zt=rn.x,tn=rn.y,Yt=ln.x,nn=ln.y}if(it.title!==void 0){const rn=nt.append("g").attr("class","classLabel"),ln=rn.append("text").attr("class","label").attr("x",Nt).attr("y",zt).attr("fill","red").attr("text-anchor","middle").text(it.title);window.label=ln;const sn=ln.node().getBBox();rn.insert("rect",":first-child").attr("class","box").attr("x",sn.x-vt.padding/2).attr("y",sn.y-vt.padding/2).attr("width",sn.width+vt.padding).attr("height",sn.height+vt.padding)}log$1.info("Rendering relation "+JSON.stringify(it)),it.relationTitle1!==void 0&&it.relationTitle1!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",Zt).attr("y",tn).attr("fill","black").attr("font-size","6").text(it.relationTitle1),it.relationTitle2!==void 0&&it.relationTitle2!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",Yt).attr("y",nn).attr("fill","black").attr("font-size","6").text(it.relationTitle2),edgeCount$1++},drawClass=function(nt,rt,it,vt){log$1.debug("Rendering class ",rt,it);const bt=rt.id,wt={id:bt,label:rt.id,width:0,height:0},Tt=nt.append("g").attr("id",vt.db.lookUpDomId(bt)).attr("class","classGroup");let kt;rt.link?kt=Tt.append("svg:a").attr("xlink:href",rt.link).attr("target",rt.linkTarget).append("text").attr("y",it.textHeight+it.padding).attr("x",0):kt=Tt.append("text").attr("y",it.textHeight+it.padding).attr("x",0);let Lt=!0;rt.annotations.forEach(function(mn){const wn=kt.append("tspan").text("\xAB"+mn+"\xBB");Lt||wn.attr("dy",it.textHeight),Lt=!1});let Mt=rt.id;rt.type!==void 0&&rt.type!==""&&(Mt+="<"+rt.type+">");const Nt=kt.append("tspan").text(Mt).attr("class","title");Lt||Nt.attr("dy",it.textHeight);const zt=kt.node().getBBox().height,Ht=Tt.append("line").attr("x1",0).attr("y1",it.padding+zt+it.dividerMargin/2).attr("y2",it.padding+zt+it.dividerMargin/2),Wt=Tt.append("text").attr("x",it.padding).attr("y",zt+it.dividerMargin+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.members.forEach(function(mn){addTspan(Wt,mn,Lt,it),Lt=!1});const Zt=Wt.node().getBBox(),tn=Tt.append("line").attr("x1",0).attr("y1",it.padding+zt+it.dividerMargin+Zt.height).attr("y2",it.padding+zt+it.dividerMargin+Zt.height),Yt=Tt.append("text").attr("x",it.padding).attr("y",zt+2*it.dividerMargin+Zt.height+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.methods.forEach(function(mn){addTspan(Yt,mn,Lt,it),Lt=!1});const nn=Tt.node().getBBox();var rn=" ";rt.cssClasses.length>0&&(rn=rn+rt.cssClasses.join(" "));const sn=Tt.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",nn.width+2*it.padding).attr("height",nn.height+it.padding+.5*it.dividerMargin).attr("class",rn).node().getBBox().width;return kt.node().childNodes.forEach(function(mn){mn.setAttribute("x",(sn-mn.getBBox().width)/2)}),rt.tooltip&&kt.insert("title").text(rt.tooltip),Ht.attr("x2",sn),tn.attr("x2",sn),wt.width=sn,wt.height=nn.height+it.padding+.5*it.dividerMargin,wt},drawNote$2=function(nt,rt,it,vt){log$1.debug("Rendering note ",rt,it);const bt=rt.id,wt={id:bt,text:rt.text,width:0,height:0},Tt=nt.append("g").attr("id",bt).attr("class","classGroup");let kt=Tt.append("text").attr("y",it.textHeight+it.padding).attr("x",0);const Lt=JSON.parse(`"${rt.text}"`).split(`
`);Lt.forEach(function(Ht){log$1.debug(`Adding line: ${Ht}`),kt.append("tspan").text(Ht).attr("class","title").attr("dy",it.textHeight)});const Mt=Tt.node().getBBox(),zt=Tt.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Mt.width+2*it.padding).attr("height",Mt.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin).node().getBBox().width;return kt.node().childNodes.forEach(function(Ht){Ht.setAttribute("x",(zt-Ht.getBBox().width)/2)}),wt.width=zt,wt.height=Mt.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin,wt},parseMember=function(nt){const rt=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,it=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let vt=nt.match(rt),bt=nt.match(it);return vt&&!bt?buildFieldDisplay(vt):bt?buildMethodDisplay(bt):buildLegacyDisplay(nt)},buildFieldDisplay=function(nt){let rt="",it="";try{let vt=nt[1]?nt[1].trim():"",bt=nt[2]?nt[2].trim():"",wt=nt[3]?parseGenericTypes(nt[3].trim()):"",Tt=nt[4]?nt[4].trim():"",kt=nt[5]?nt[5].trim():"";it=vt+bt+wt+" "+Tt,rt=parseClassifier(kt)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildMethodDisplay=function(nt){let rt="",it="";try{let vt=nt[1]?nt[1].trim():"",bt=nt[2]?nt[2].trim():"",wt=nt[3]?parseGenericTypes(nt[3].trim()):"",Tt=nt[4]?nt[4].trim():"",kt=nt[5]?" : "+parseGenericTypes(nt[5]).trim():"";it=vt+bt+"("+wt+")"+kt,rt=parseClassifier(Tt)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildLegacyDisplay=function(nt){let rt="",it="",vt="",bt=nt.indexOf("("),wt=nt.indexOf(")");if(bt>1&&wt>bt&&wt<=nt.length){let Tt="",kt="",Lt=nt.substring(0,1);Lt.match(/\w/)?kt=nt.substring(0,bt).trim():(Lt.match(/[#+~-]/)&&(Tt=Lt),kt=nt.substring(1,bt).trim());const Mt=nt.substring(bt+1,wt);nt.substring(wt+1,1),it=parseClassifier(nt.substring(wt+1,wt+2)),rt=Tt+kt+"("+parseGenericTypes(Mt.trim())+")",wt<nt.length&&(vt=nt.substring(wt+2).trim(),vt!==""&&(vt=" : "+parseGenericTypes(vt),rt+=vt))}else rt=parseGenericTypes(nt);return{displayText:rt,cssStyle:it}},addTspan=function(nt,rt,it,vt){let bt=parseMember(rt);const wt=nt.append("tspan").attr("x",vt.padding).text(bt.displayText);bt.cssStyle!==""&&wt.attr("style",bt.cssStyle),it||wt.attr("dy",vt.textHeight)},parseClassifier=function(nt){switch(nt){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},svgDraw$2={drawClass,drawEdge:drawEdge$1,drawNote:drawNote$2,parseMember};let idCache$2={};const padding=20,getGraphId=function(nt){const rt=Object.entries(idCache$2).find(it=>it[1].label===nt);if(rt)return rt[0]},insertMarkers$4=function(nt){nt.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),nt.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},draw$d=function(nt,rt,it,vt){const bt=getConfig$1().class;idCache$2={},log$1.info("Rendering diagram "+nt);const wt=getConfig$1().securityLevel;let Tt;wt==="sandbox"&&(Tt=select("#i"+rt));const kt=select(wt==="sandbox"?Tt.nodes()[0].contentDocument.body:"body"),Lt=kt.select(`[id='${rt}']`);insertMarkers$4(Lt);const Mt=new Graph({multigraph:!0});Mt.setGraph({isMultiGraph:!0}),Mt.setDefaultEdgeLabel(function(){return{}});const Nt=vt.db.getClasses(),zt=Object.keys(Nt);for(const rn of zt){const ln=Nt[rn],sn=svgDraw$2.drawClass(Lt,ln,bt,vt);idCache$2[sn.id]=sn,Mt.setNode(sn.id,sn),log$1.info("Org height: "+sn.height)}vt.db.getRelations().forEach(function(rn){log$1.info("tjoho"+getGraphId(rn.id1)+getGraphId(rn.id2)+JSON.stringify(rn)),Mt.setEdge(getGraphId(rn.id1),getGraphId(rn.id2),{relation:rn},rn.title||"DEFAULT")}),vt.db.getNotes().forEach(function(rn){log$1.debug(`Adding note: ${JSON.stringify(rn)}`);const ln=svgDraw$2.drawNote(Lt,rn,bt,vt);idCache$2[ln.id]=ln,Mt.setNode(ln.id,ln),rn.class&&rn.class in Nt&&Mt.setEdge(rn.id,getGraphId(rn.class),{relation:{id1:rn.id,id2:rn.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),layout(Mt),Mt.nodes().forEach(function(rn){rn!==void 0&&Mt.node(rn)!==void 0&&(log$1.debug("Node "+rn+": "+JSON.stringify(Mt.node(rn))),kt.select("#"+(vt.db.lookUpDomId(rn)||rn)).attr("transform","translate("+(Mt.node(rn).x-Mt.node(rn).width/2)+","+(Mt.node(rn).y-Mt.node(rn).height/2)+" )"))}),Mt.edges().forEach(function(rn){rn!==void 0&&Mt.edge(rn)!==void 0&&(log$1.debug("Edge "+rn.v+" -> "+rn.w+": "+JSON.stringify(Mt.edge(rn))),svgDraw$2.drawEdge(Lt,Mt.edge(rn),Mt.edge(rn).relation,bt,vt))});const Zt=Lt.node().getBBox(),tn=Zt.width+padding*2,Yt=Zt.height+padding*2;configureSvgSize(Lt,Yt,tn,bt.useMaxWidth);const nn=`${Zt.x-padding} ${Zt.y-padding} ${tn} ${Yt}`;log$1.debug(`viewBox ${nn}`),Lt.attr("viewBox",nn)},classRenderer={draw:draw$d},insertMarkers$2=(nt,rt,it,vt)=>{rt.forEach(bt=>{markers$1[bt](nt,it,vt)})},extension=(nt,rt,it)=>{log$1.trace("Making markers for ",it),nt.append("defs").append("marker").attr("id",rt+"-extensionStart").attr("class","marker extension "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id",rt+"-extensionEnd").attr("class","marker extension "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-compositionStart").attr("class","marker composition "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-compositionEnd").attr("class","marker composition "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-aggregationStart").attr("class","marker aggregation "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-aggregationEnd").attr("class","marker aggregation "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-dependencyStart").attr("class","marker dependency "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-dependencyEnd").attr("class","marker dependency "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-lollipopStart").attr("class","marker lollipop "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point=(nt,rt)=>{nt.append("marker").attr("id",rt+"-pointEnd").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-pointStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle$1=(nt,rt)=>{nt.append("marker").attr("id",rt+"-circleEnd").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-circleStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross=(nt,rt)=>{nt.append("marker").attr("id",rt+"-crossEnd").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-crossStart").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},markers$1={extension,composition,aggregation,dependency,lollipop,point,circle:circle$1,cross,barb},insertMarkers$3=insertMarkers$2;function applyStyle(nt,rt){rt&&nt.attr("style",rt)}function addHtmlLabel(nt){const rt=select(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),it=rt.append("xhtml:div"),vt=nt.label,bt=nt.isNode?"nodeLabel":"edgeLabel";return it.html('<span class="'+bt+'" '+(nt.labelStyle?'style="'+nt.labelStyle+'"':"")+">"+vt+"</span>"),applyStyle(it,nt.labelStyle),it.style("display","inline-block"),it.style("white-space","nowrap"),it.attr("xmlns","http://www.w3.org/1999/xhtml"),rt.node()}const createLabel=(nt,rt,it,vt)=>{let bt=nt||"";if(typeof bt=="object"&&(bt=bt[0]),evaluate(getConfig$1().flowchart.htmlLabels)){bt=bt.replace(/\\n|\n/g,"<br />"),log$1.info("vertexText"+bt);const wt={isNode:vt,label:decodeEntities(bt).replace(/fa[blrs]?:fa-[\w-]+/g,kt=>`<i class='${kt.replace(":"," ")}'></i>`),labelStyle:rt.replace("fill:","color:")};return addHtmlLabel(wt)}else{const wt=document.createElementNS("http://www.w3.org/2000/svg","text");wt.setAttribute("style",rt.replace("color:","fill:"));let Tt=[];typeof bt=="string"?Tt=bt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(bt)?Tt=bt:Tt=[];for(const kt of Tt){const Lt=document.createElementNS("http://www.w3.org/2000/svg","tspan");Lt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Lt.setAttribute("dy","1em"),Lt.setAttribute("x","0"),it?Lt.setAttribute("class","title-row"):Lt.setAttribute("class","row"),Lt.textContent=kt.trim(),wt.appendChild(Lt)}return wt}},createLabel$1=createLabel,labelHelper=(nt,rt,it,vt)=>{let bt;it?bt=it:bt="node default";const wt=nt.insert("g").attr("class",bt).attr("id",rt.domId||rt.id),Tt=wt.insert("g").attr("class","label").attr("style",rt.labelStyle);let kt;rt.labelText===void 0?kt="":kt=typeof rt.labelText=="string"?rt.labelText:rt.labelText[0];const Lt=Tt.node().appendChild(createLabel$1(sanitizeText$5(decodeEntities(kt),getConfig$1()),rt.labelStyle,!1,vt));let Mt=Lt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const zt=Lt.children[0],Ht=select(Lt);Mt=zt.getBoundingClientRect(),Ht.attr("width",Mt.width),Ht.attr("height",Mt.height)}const Nt=rt.padding/2;return Tt.attr("transform","translate("+-Mt.width/2+", "+-Mt.height/2+")"),{shapeSvg:wt,bbox:Mt,halfPadding:Nt,label:Tt}},updateNodeBounds=(nt,rt)=>{const it=rt.node().getBBox();nt.width=it.width,nt.height=it.height};function insertPolygonShape$1(nt,rt,it,vt){return nt.insert("polygon",":first-child").attr("points",vt.map(function(bt){return bt.x+","+bt.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-rt/2+","+it/2+")")}let clusterDb={},descendants={},parents={};const clear$b=()=>{descendants={},parents={},clusterDb={}},isDescendant=(nt,rt)=>(log$1.trace("In isDecendant",rt," ",nt," = ",descendants[rt].includes(nt)),!!descendants[rt].includes(nt)),edgeInCluster=(nt,rt)=>(log$1.info("Decendants of ",rt," is ",descendants[rt]),log$1.info("Edge is ",nt),nt.v===rt||nt.w===rt?!1:descendants[rt]?descendants[rt].includes(nt.v)||isDescendant(nt.v,rt)||isDescendant(nt.w,rt)||descendants[rt].includes(nt.w):(log$1.debug("Tilt, ",rt,",not in decendants"),!1)),copy=(nt,rt,it,vt)=>{log$1.warn("Copying children of ",nt,"root",vt,"data",rt.node(nt),vt);const bt=rt.children(nt)||[];nt!==vt&&bt.push(nt),log$1.warn("Copying (nodes) clusterId",nt,"nodes",bt),bt.forEach(wt=>{if(rt.children(wt).length>0)copy(wt,rt,it,vt);else{const Tt=rt.node(wt);log$1.info("cp ",wt," to ",vt," with parent ",nt),it.setNode(wt,Tt),vt!==rt.parent(wt)&&(log$1.warn("Setting parent",wt,rt.parent(wt)),it.setParent(wt,rt.parent(wt))),nt!==vt&&wt!==nt?(log$1.debug("Setting parent",wt,nt),it.setParent(wt,nt)):(log$1.info("In copy ",nt,"root",vt,"data",rt.node(nt),vt),log$1.debug("Not Setting parent for node=",wt,"cluster!==rootId",nt!==vt,"node!==clusterId",wt!==nt));const kt=rt.edges(wt);log$1.debug("Copying Edges",kt),kt.forEach(Lt=>{log$1.info("Edge",Lt);const Mt=rt.edge(Lt.v,Lt.w,Lt.name);log$1.info("Edge data",Mt,vt);try{edgeInCluster(Lt,vt)?(log$1.info("Copying as ",Lt.v,Lt.w,Mt,Lt.name),it.setEdge(Lt.v,Lt.w,Mt,Lt.name),log$1.info("newGraph edges ",it.edges(),it.edge(it.edges()[0]))):log$1.info("Skipping copy of edge ",Lt.v,"-->",Lt.w," rootId: ",vt," clusterId:",nt)}catch(Nt){log$1.error(Nt)}})}log$1.debug("Removing node",wt),rt.removeNode(wt)})},extractDescendants=(nt,rt)=>{const it=rt.children(nt);let vt=[...it];for(const bt of it)parents[bt]=nt,vt=[...vt,...extractDescendants(bt,rt)];return vt},findNonClusterChild=(nt,rt)=>{log$1.trace("Searching",nt);const it=rt.children(nt);if(log$1.trace("Searching children of id ",nt,it),it.length<1)return log$1.trace("This is a valid node",nt),nt;for(const vt of it){const bt=findNonClusterChild(vt,rt);if(bt)return log$1.trace("Found replacement for",nt," => ",bt),bt}},getAnchorId=nt=>!clusterDb[nt]||!clusterDb[nt].externalConnections?nt:clusterDb[nt]?clusterDb[nt].id:nt,adjustClustersAndEdges=(nt,rt)=>{if(!nt||rt>10){log$1.debug("Opting out, no graph ");return}else log$1.debug("Opting in, graph ");nt.nodes().forEach(function(it){nt.children(it).length>0&&(log$1.warn("Cluster identified",it," Replacement id in edges: ",findNonClusterChild(it,nt)),descendants[it]=extractDescendants(it,nt),clusterDb[it]={id:findNonClusterChild(it,nt),clusterData:nt.node(it)})}),nt.nodes().forEach(function(it){const vt=nt.children(it),bt=nt.edges();vt.length>0?(log$1.debug("Cluster identified",it,descendants),bt.forEach(wt=>{if(wt.v!==it&&wt.w!==it){const Tt=isDescendant(wt.v,it),kt=isDescendant(wt.w,it);Tt^kt&&(log$1.warn("Edge: ",wt," leaves cluster ",it),log$1.warn("Decendants of XXX ",it,": ",descendants[it]),clusterDb[it].externalConnections=!0)}})):log$1.debug("Not a cluster ",it,descendants)}),nt.edges().forEach(function(it){const vt=nt.edge(it);log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(it)),log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(nt.edge(it)));let bt=it.v,wt=it.w;if(log$1.warn("Fix XXX",clusterDb,"ids:",it.v,it.w,"Translating: ",clusterDb[it.v]," --- ",clusterDb[it.w]),clusterDb[it.v]&&clusterDb[it.w]&&clusterDb[it.v]===clusterDb[it.w]){log$1.warn("Fixing and trixing link to self - removing XXX",it.v,it.w,it.name),log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),bt=getAnchorId(it.v),wt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name);const Tt=it.w+"---"+it.v;nt.setNode(Tt,{domId:Tt,id:Tt,labelStyle:"",labelText:vt.label,padding:0,shape:"labelRect",style:""});const kt=JSON.parse(JSON.stringify(vt)),Lt=JSON.parse(JSON.stringify(vt));kt.label="",kt.arrowTypeEnd="none",Lt.label="",kt.fromCluster=it.v,Lt.toCluster=it.v,nt.setEdge(bt,Tt,kt,it.name+"-cyclic-special"),nt.setEdge(Tt,wt,Lt,it.name+"-cyclic-special")}else(clusterDb[it.v]||clusterDb[it.w])&&(log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),bt=getAnchorId(it.v),wt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name),bt!==it.v&&(vt.fromCluster=it.v),wt!==it.w&&(vt.toCluster=it.w),log$1.warn("Fix Replacing with XXX",bt,wt,it.name),nt.setEdge(bt,wt,vt,it.name))}),log$1.warn("Adjusted Graph",write(nt)),extractor(nt,0),log$1.trace(clusterDb)},extractor=(nt,rt)=>{if(log$1.warn("extractor - ",rt,write(nt),nt.children("D")),rt>10){log$1.error("Bailing out");return}let it=nt.nodes(),vt=!1;for(const bt of it){const wt=nt.children(bt);vt=vt||wt.length>0}if(!vt){log$1.debug("Done, no node has children",nt.nodes());return}log$1.debug("Nodes = ",it,rt);for(const bt of it)if(log$1.debug("Extracting node",bt,clusterDb,clusterDb[bt]&&!clusterDb[bt].externalConnections,!nt.parent(bt),nt.node(bt),nt.children("D")," Depth ",rt),!clusterDb[bt])log$1.debug("Not a cluster",bt,rt);else if(!clusterDb[bt].externalConnections&&nt.children(bt)&&nt.children(bt).length>0){log$1.warn("Cluster without external connections, without a parent and with children",bt,rt);let Tt=nt.graph().rankdir==="TB"?"LR":"TB";clusterDb[bt]&&clusterDb[bt].clusterData&&clusterDb[bt].clusterData.dir&&(Tt=clusterDb[bt].clusterData.dir,log$1.warn("Fixing dir",clusterDb[bt].clusterData.dir,Tt));const kt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Tt,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});log$1.warn("Old graph before copy",write(nt)),copy(bt,nt,kt,bt),nt.setNode(bt,{clusterNode:!0,id:bt,clusterData:clusterDb[bt].clusterData,labelText:clusterDb[bt].labelText,graph:kt}),log$1.warn("New graph after copy node: (",bt,")",write(kt)),log$1.debug("Old graph after copy",write(nt))}else log$1.warn("Cluster ** ",bt," **not meeting the criteria !externalConnections:",!clusterDb[bt].externalConnections," no parent: ",!nt.parent(bt)," children ",nt.children(bt)&&nt.children(bt).length>0,nt.children("D"),rt),log$1.debug(clusterDb);it=nt.nodes(),log$1.warn("New list of nodes",it);for(const bt of it){const wt=nt.node(bt);log$1.warn(" Now next level",bt,wt),wt.clusterNode&&extractor(wt.graph,rt+1)}},sorter=(nt,rt)=>{if(rt.length===0)return[];let it=Object.assign(rt);return rt.forEach(vt=>{const bt=nt.children(vt),wt=sorter(nt,bt);it=[...it,...wt]}),it},sortNodesByHierarchy=nt=>sorter(nt,nt.children());function intersectNode(nt,rt){return nt.intersect(rt)}function intersectEllipse(nt,rt,it,vt){var bt=nt.x,wt=nt.y,Tt=bt-vt.x,kt=wt-vt.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Tt*Tt),Mt=Math.abs(rt*it*Tt/Lt);vt.x<bt&&(Mt=-Mt);var Nt=Math.abs(rt*it*kt/Lt);return vt.y<wt&&(Nt=-Nt),{x:bt+Mt,y:wt+Nt}}function intersectCircle(nt,rt,it){return intersectEllipse(nt,rt,rt,it)}function intersectLine(nt,rt,it,vt){var bt,wt,Tt,kt,Lt,Mt,Nt,zt,Ht,Wt,Zt,tn,Yt,nn,rn;if(bt=rt.y-nt.y,Tt=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Ht=bt*it.x+Tt*it.y+Lt,Wt=bt*vt.x+Tt*vt.y+Lt,!(Ht!==0&&Wt!==0&&sameSign(Ht,Wt))&&(wt=vt.y-it.y,kt=it.x-vt.x,Mt=vt.x*it.y-it.x*vt.y,Nt=wt*nt.x+kt*nt.y+Mt,zt=wt*rt.x+kt*rt.y+Mt,!(Nt!==0&&zt!==0&&sameSign(Nt,zt))&&(Zt=bt*kt-wt*Tt,Zt!==0)))return tn=Math.abs(Zt/2),Yt=Tt*Mt-kt*Lt,nn=Yt<0?(Yt-tn)/Zt:(Yt+tn)/Zt,Yt=wt*Lt-bt*Mt,rn=Yt<0?(Yt-tn)/Zt:(Yt+tn)/Zt,{x:nn,y:rn}}function sameSign(nt,rt){return nt*rt>0}function intersectPolygon(nt,rt,it){var vt=nt.x,bt=nt.y,wt=[],Tt=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;typeof rt.forEach=="function"?rt.forEach(function(Zt){Tt=Math.min(Tt,Zt.x),kt=Math.min(kt,Zt.y)}):(Tt=Math.min(Tt,rt.x),kt=Math.min(kt,rt.y));for(var Lt=vt-nt.width/2-Tt,Mt=bt-nt.height/2-kt,Nt=0;Nt<rt.length;Nt++){var zt=rt[Nt],Ht=rt[Nt<rt.length-1?Nt+1:0],Wt=intersectLine(nt,it,{x:Lt+zt.x,y:Mt+zt.y},{x:Lt+Ht.x,y:Mt+Ht.y});Wt&&wt.push(Wt)}return wt.length?(wt.length>1&&wt.sort(function(Zt,tn){var Yt=Zt.x-it.x,nn=Zt.y-it.y,rn=Math.sqrt(Yt*Yt+nn*nn),ln=tn.x-it.x,sn=tn.y-it.y,mn=Math.sqrt(ln*ln+sn*sn);return rn<mn?-1:rn===mn?0:1}),wt[0]):nt}const intersectRect=(nt,rt)=>{var it=nt.x,vt=nt.y,bt=rt.x-it,wt=rt.y-vt,Tt=nt.width/2,kt=nt.height/2,Lt,Mt;return Math.abs(wt)*Tt>Math.abs(bt)*kt?(wt<0&&(kt=-kt),Lt=wt===0?0:kt*bt/wt,Mt=kt):(bt<0&&(Tt=-Tt),Lt=Tt,Mt=bt===0?0:Tt*wt/bt),{x:it+Lt,y:vt+Mt}},intersectRect$1=intersectRect,intersect={node:intersectNode,circle:intersectCircle,ellipse:intersectEllipse,polygon:intersectPolygon,rect:intersectRect$1},note=(nt,rt)=>{const{shapeSvg:it,bbox:vt,halfPadding:bt}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.info("Classes = ",rt.classes);const wt=it.insert("rect",":first-child");return wt.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-vt.width/2-bt).attr("y",-vt.height/2-bt).attr("width",vt.width+rt.padding).attr("height",vt.height+rt.padding),updateNodeBounds(rt,wt),rt.intersect=function(Tt){return intersect.rect(rt,Tt)},it},note$1=note,question$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=bt+wt,kt=[{x:Tt/2,y:0},{x:Tt,y:-Tt/2},{x:Tt/2,y:-Tt},{x:0,y:-Tt/2}];log$1.info("Question main (Circle)");const Lt=insertPolygonShape$1(it,Tt,Tt,kt);return Lt.attr("style",rt.style),updateNodeBounds(rt,Lt),rt.intersect=function(Mt){return log$1.warn("Intersect called"),intersect.polygon(rt,kt,Mt)},it},choice=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),vt=28,bt=[{x:0,y:vt/2},{x:vt/2,y:0},{x:0,y:-vt/2},{x:-vt/2,y:0}];return it.insert("polygon",":first-child").attr("points",bt.map(function(Tt){return Tt.x+","+Tt.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),rt.width=28,rt.height=28,rt.intersect=function(Tt){return intersect.circle(rt,14,Tt)},it},hexagon$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=4,wt=vt.height+rt.padding,Tt=wt/bt,kt=vt.width+2*Tt+rt.padding,Lt=[{x:Tt,y:0},{x:kt-Tt,y:0},{x:kt,y:-wt/2},{x:kt-Tt,y:-wt},{x:Tt,y:-wt},{x:0,y:-wt/2}],Mt=insertPolygonShape$1(it,kt,wt,Lt);return Mt.attr("style",rt.style),updateNodeBounds(rt,Mt),rt.intersect=function(Nt){return intersect.polygon(rt,Lt,Nt)},it},rect_left_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:-wt/2,y:0},{x:bt,y:0},{x:bt,y:-wt},{x:-wt/2,y:-wt},{x:0,y:-wt/2}];return insertPolygonShape$1(it,bt,wt,Tt).attr("style",rt.style),rt.width=bt+wt,rt.height=wt,rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},lean_right$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:-2*wt/6,y:0},{x:bt-wt/6,y:0},{x:bt+2*wt/6,y:-wt},{x:wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Tt);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},lean_left$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:2*wt/6,y:0},{x:bt+wt/6,y:0},{x:bt-2*wt/6,y:-wt},{x:-wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Tt);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:-2*wt/6,y:0},{x:bt+2*wt/6,y:0},{x:bt-wt/6,y:-wt},{x:wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Tt);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},inv_trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:wt/6,y:0},{x:bt-wt/6,y:0},{x:bt+2*wt/6,y:-wt},{x:-2*wt/6,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Tt);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},rect_right_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:0,y:0},{x:bt+wt/2,y:0},{x:bt,y:-wt/2},{x:bt+wt/2,y:-wt},{x:0,y:-wt}],kt=insertPolygonShape$1(it,bt,wt,Tt);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},cylinder$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=bt/2,Tt=wt/(2.5+bt/50),kt=vt.height+Tt+rt.padding,Lt="M 0,"+Tt+" a "+wt+","+Tt+" 0,0,0 "+bt+" 0 a "+wt+","+Tt+" 0,0,0 "+-bt+" 0 l 0,"+kt+" a "+wt+","+Tt+" 0,0,0 "+bt+" 0 l 0,"+-kt,Mt=it.attr("label-offset-y",Tt).insert("path",":first-child").attr("style",rt.style).attr("d",Lt).attr("transform","translate("+-bt/2+","+-(kt/2+Tt)+")");return updateNodeBounds(rt,Mt),rt.intersect=function(Nt){const zt=intersect.rect(rt,Nt),Ht=zt.x-rt.x;if(wt!=0&&(Math.abs(Ht)<rt.width/2||Math.abs(Ht)==rt.width/2&&Math.abs(zt.y-rt.y)>rt.height/2-Tt)){let Wt=Tt*Tt*(1-Ht*Ht/(wt*wt));Wt!=0&&(Wt=Math.sqrt(Wt)),Wt=Tt-Wt,Nt.y-rt.y>0&&(Wt=-Wt),zt.y+=Wt}return zt},it},rect$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt,halfPadding:bt}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.trace("Classes = ",rt.classes);const wt=it.insert("rect",":first-child"),Tt=vt.width+rt.padding,kt=vt.height+rt.padding;if(wt.attr("class","basic label-container").attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-vt.width/2-bt).attr("y",-vt.height/2-bt).attr("width",Tt).attr("height",kt),rt.props){const Lt=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(wt,rt.props.borders,Tt,kt),Lt.delete("borders")),Lt.forEach(Mt=>{log$1.warn(`Unknown node property ${Mt}`)})}return updateNodeBounds(rt,wt),rt.intersect=function(Lt){return intersect.rect(rt,Lt)},it},labelRect=(nt,rt)=>{const{shapeSvg:it}=labelHelper(nt,rt,"label",!0);log$1.trace("Classes = ",rt.classes);const vt=it.insert("rect",":first-child"),bt=0,wt=0;if(vt.attr("width",bt).attr("height",wt),it.attr("class","label edgeLabel"),rt.props){const Tt=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(vt,rt.props.borders,bt,wt),Tt.delete("borders")),Tt.forEach(kt=>{log$1.warn(`Unknown node property ${kt}`)})}return updateNodeBounds(rt,vt),rt.intersect=function(Tt){return intersect.rect(rt,Tt)},it};function applyNodePropertyBorders(nt,rt,it,vt){const bt=[],wt=kt=>{bt.push(kt,0)},Tt=kt=>{bt.push(0,kt)};rt.includes("t")?(log$1.debug("add top border"),wt(it)):Tt(it),rt.includes("r")?(log$1.debug("add right border"),wt(vt)):Tt(vt),rt.includes("b")?(log$1.debug("add bottom border"),wt(it)):Tt(it),rt.includes("l")?(log$1.debug("add left border"),wt(vt)):Tt(vt),nt.attr("stroke-dasharray",bt.join(" "))}const rectWithTitle=(nt,rt)=>{let it;rt.classes?it="node "+rt.classes:it="node default";const vt=nt.insert("g").attr("class",it).attr("id",rt.domId||rt.id),bt=vt.insert("rect",":first-child"),wt=vt.insert("line"),Tt=vt.insert("g").attr("class","label"),kt=rt.labelText.flat?rt.labelText.flat():rt.labelText;let Lt="";typeof kt=="object"?Lt=kt[0]:Lt=kt,log$1.info("Label text abc79",Lt,kt,typeof kt=="object");const Mt=Tt.node().appendChild(createLabel$1(Lt,rt.labelStyle,!0,!0));let Nt={width:0,height:0};if(evaluate(getConfig$1().flowchart.htmlLabels)){const tn=Mt.children[0],Yt=select(Mt);Nt=tn.getBoundingClientRect(),Yt.attr("width",Nt.width),Yt.attr("height",Nt.height)}log$1.info("Text 2",kt);const zt=kt.slice(1,kt.length);let Ht=Mt.getBBox();const Wt=Tt.node().appendChild(createLabel$1(zt.join?zt.join("<br/>"):zt,rt.labelStyle,!0,!0));if(evaluate(getConfig$1().flowchart.htmlLabels)){const tn=Wt.children[0],Yt=select(Wt);Nt=tn.getBoundingClientRect(),Yt.attr("width",Nt.width),Yt.attr("height",Nt.height)}const Zt=rt.padding/2;return select(Wt).attr("transform","translate( "+(Nt.width>Ht.width?0:(Ht.width-Nt.width)/2)+", "+(Ht.height+Zt+5)+")"),select(Mt).attr("transform","translate( "+(Nt.width<Ht.width?0:-(Ht.width-Nt.width)/2)+", "+0+")"),Nt=Tt.node().getBBox(),Tt.attr("transform","translate("+-Nt.width/2+", "+(-Nt.height/2-Zt+3)+")"),bt.attr("class","outer title-state").attr("x",-Nt.width/2-Zt).attr("y",-Nt.height/2-Zt).attr("width",Nt.width+rt.padding).attr("height",Nt.height+rt.padding),wt.attr("class","divider").attr("x1",-Nt.width/2-Zt).attr("x2",Nt.width/2+Zt).attr("y1",-Nt.height/2-Zt+Ht.height+Zt).attr("y2",-Nt.height/2-Zt+Ht.height+Zt),updateNodeBounds(rt,bt),rt.intersect=function(tn){return intersect.rect(rt,tn)},vt},stadium$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.height+rt.padding,wt=vt.width+bt/4+rt.padding,Tt=it.insert("rect",":first-child").attr("style",rt.style).attr("rx",bt/2).attr("ry",bt/2).attr("x",-wt/2).attr("y",-bt/2).attr("width",wt).attr("height",bt);return updateNodeBounds(rt,Tt),rt.intersect=function(kt){return intersect.rect(rt,kt)},it},circle=(nt,rt)=>{const{shapeSvg:it,bbox:vt,halfPadding:bt}=labelHelper(nt,rt,void 0,!0),wt=it.insert("circle",":first-child");return wt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",vt.width/2+bt).attr("width",vt.width+rt.padding).attr("height",vt.height+rt.padding),log$1.info("Circle main"),updateNodeBounds(rt,wt),rt.intersect=function(Tt){return log$1.info("Circle intersect",rt,vt.width/2+bt,Tt),intersect.circle(rt,vt.width/2+bt,Tt)},it},doublecircle=(nt,rt)=>{const{shapeSvg:it,bbox:vt,halfPadding:bt}=labelHelper(nt,rt,void 0,!0),wt=5,Tt=it.insert("g",":first-child"),kt=Tt.insert("circle"),Lt=Tt.insert("circle");return kt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",vt.width/2+bt+wt).attr("width",vt.width+rt.padding+wt*2).attr("height",vt.height+rt.padding+wt*2),Lt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",vt.width/2+bt).attr("width",vt.width+rt.padding).attr("height",vt.height+rt.padding),log$1.info("DoubleCircle main"),updateNodeBounds(rt,kt),rt.intersect=function(Mt){return log$1.info("DoubleCircle intersect",rt,vt.width/2+bt+wt,Mt),intersect.circle(rt,vt.width/2+bt+wt,Mt)},it},subroutine$1=(nt,rt)=>{const{shapeSvg:it,bbox:vt}=labelHelper(nt,rt,void 0,!0),bt=vt.width+rt.padding,wt=vt.height+rt.padding,Tt=[{x:0,y:0},{x:bt,y:0},{x:bt,y:-wt},{x:0,y:-wt},{x:0,y:0},{x:-8,y:0},{x:bt+8,y:0},{x:bt+8,y:-wt},{x:-8,y:-wt},{x:-8,y:0}],kt=insertPolygonShape$1(it,bt,wt,Tt);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Tt,Lt)},it},start=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),vt=it.insert("circle",":first-child");return vt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),updateNodeBounds(rt,vt),rt.intersect=function(bt){return intersect.circle(rt,7,bt)},it},forkJoin=(nt,rt,it)=>{const vt=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id);let bt=70,wt=10;it==="LR"&&(bt=10,wt=70);const Tt=vt.append("rect").attr("x",-1*bt/2).attr("y",-1*wt/2).attr("width",bt).attr("height",wt).attr("class","fork-join");return updateNodeBounds(rt,Tt),rt.height=rt.height+rt.padding/2,rt.width=rt.width+rt.padding/2,rt.intersect=function(kt){return intersect.rect(rt,kt)},vt},end=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),vt=it.insert("circle",":first-child"),bt=it.insert("circle",":first-child");return bt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),vt.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),updateNodeBounds(rt,bt),rt.intersect=function(wt){return intersect.circle(rt,7,wt)},it},class_box=(nt,rt)=>{const it=rt.padding/2,vt=4,bt=8;let wt;rt.classes?wt="node "+rt.classes:wt="node default";const Tt=nt.insert("g").attr("class",wt).attr("id",rt.domId||rt.id),kt=Tt.insert("rect",":first-child"),Lt=Tt.insert("line"),Mt=Tt.insert("line");let Nt=0,zt=vt;const Ht=Tt.insert("g").attr("class","label");let Wt=0;const Zt=rt.classData.annotations&&rt.classData.annotations[0],tn=rt.classData.annotations[0]?"\xAB"+rt.classData.annotations[0]+"\xBB":"",Yt=Ht.node().appendChild(createLabel$1(tn,rt.labelStyle,!0,!0));let nn=Yt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const An=Yt.children[0],Pn=select(Yt);nn=An.getBoundingClientRect(),Pn.attr("width",nn.width),Pn.attr("height",nn.height)}rt.classData.annotations[0]&&(zt+=nn.height+vt,Nt+=nn.width);let rn=rt.classData.id;rt.classData.type!==void 0&&rt.classData.type!==""&&(getConfig$1().flowchart.htmlLabels?rn+="&lt;"+rt.classData.type+"&gt;":rn+="<"+rt.classData.type+">");const ln=Ht.node().appendChild(createLabel$1(rn,rt.labelStyle,!0,!0));select(ln).attr("class","classTitle");let sn=ln.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const An=ln.children[0],Pn=select(ln);sn=An.getBoundingClientRect(),Pn.attr("width",sn.width),Pn.attr("height",sn.height)}zt+=sn.height+vt,sn.width>Nt&&(Nt=sn.width);const mn=[];rt.classData.members.forEach(An=>{const Pn=parseMember(An);let On=Pn.displayText;getConfig$1().flowchart.htmlLabels&&(On=On.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const kn=Ht.node().appendChild(createLabel$1(On,Pn.cssStyle?Pn.cssStyle:rt.labelStyle,!0,!0));let gn=kn.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Vn=kn.children[0],pn=select(kn);gn=Vn.getBoundingClientRect(),pn.attr("width",gn.width),pn.attr("height",gn.height)}gn.width>Nt&&(Nt=gn.width),zt+=gn.height+vt,mn.push(kn)}),zt+=bt;const wn=[];if(rt.classData.methods.forEach(An=>{const Pn=parseMember(An);let On=Pn.displayText;getConfig$1().flowchart.htmlLabels&&(On=On.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const kn=Ht.node().appendChild(createLabel$1(On,Pn.cssStyle?Pn.cssStyle:rt.labelStyle,!0,!0));let gn=kn.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Vn=kn.children[0],pn=select(kn);gn=Vn.getBoundingClientRect(),pn.attr("width",gn.width),pn.attr("height",gn.height)}gn.width>Nt&&(Nt=gn.width),zt+=gn.height+vt,wn.push(kn)}),zt+=bt,Zt){let An=(Nt-nn.width)/2;select(Yt).attr("transform","translate( "+(-1*Nt/2+An)+", "+-1*zt/2+")"),Wt=nn.height+vt}let Cn=(Nt-sn.width)/2;return select(ln).attr("transform","translate( "+(-1*Nt/2+Cn)+", "+(-1*zt/2+Wt)+")"),Wt+=sn.height+vt,Lt.attr("class","divider").attr("x1",-Nt/2-it).attr("x2",Nt/2+it).attr("y1",-zt/2-it+bt+Wt).attr("y2",-zt/2-it+bt+Wt),Wt+=bt,mn.forEach(An=>{select(An).attr("transform","translate( "+-Nt/2+", "+(-1*zt/2+Wt+bt/2)+")"),Wt+=sn.height+vt}),Wt+=bt,Mt.attr("class","divider").attr("x1",-Nt/2-it).attr("x2",Nt/2+it).attr("y1",-zt/2-it+bt+Wt).attr("y2",-zt/2-it+bt+Wt),Wt+=bt,wn.forEach(An=>{select(An).attr("transform","translate( "+-Nt/2+", "+(-1*zt/2+Wt)+")"),Wt+=sn.height+vt}),kt.attr("class","outer title-state").attr("x",-Nt/2-it).attr("y",-(zt/2)-it).attr("width",Nt+rt.padding).attr("height",zt+rt.padding),updateNodeBounds(rt,kt),rt.intersect=function(An){return intersect.rect(rt,An)},Tt},shapes$1={question:question$1,rect:rect$1,labelRect,rectWithTitle,choice,circle,doublecircle,stadium:stadium$1,hexagon:hexagon$1,rect_left_inv_arrow:rect_left_inv_arrow$1,lean_right:lean_right$1,lean_left:lean_left$1,trapezoid:trapezoid$1,inv_trapezoid:inv_trapezoid$1,rect_right_inv_arrow:rect_right_inv_arrow$1,cylinder:cylinder$1,start,end,note:note$1,subroutine:subroutine$1,fork:forkJoin,join:forkJoin,class_box};let nodeElems={};const insertNode=(nt,rt,it)=>{let vt,bt;if(rt.link){let wt;getConfig$1().securityLevel==="sandbox"?wt="_top":rt.linkTarget&&(wt=rt.linkTarget||"_blank"),vt=nt.insert("svg:a").attr("xlink:href",rt.link).attr("target",wt),bt=shapes$1[rt.shape](vt,rt,it)}else bt=shapes$1[rt.shape](nt,rt,it),vt=bt;rt.tooltip&&bt.attr("title",rt.tooltip),rt.class&&bt.attr("class","node default "+rt.class),nodeElems[rt.id]=vt,rt.haveCallback&&nodeElems[rt.id].attr("class",nodeElems[rt.id].attr("class")+" clickable")},setNodeElem=(nt,rt)=>{nodeElems[rt.id]=nt},clear$a=()=>{nodeElems={}},positionNode=nt=>{const rt=nodeElems[nt.id];log$1.trace("Transforming node",nt.diff,nt,"translate("+(nt.x-nt.width/2-5)+", "+nt.width/2+")");const it=8,vt=nt.diff||0;return nt.clusterNode?rt.attr("transform","translate("+(nt.x+vt-nt.width/2)+", "+(nt.y-nt.height/2-it)+")"):rt.attr("transform","translate("+nt.x+", "+nt.y+")"),vt},rect=(nt,rt)=>{log$1.trace("Creating subgraph rect for ",rt.id,rt);const it=nt.insert("g").attr("class","cluster"+(rt.class?" "+rt.class:"")).attr("id",rt.id),vt=it.insert("rect",":first-child"),bt=it.insert("g").attr("class","cluster-label"),wt=bt.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let Tt=wt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const zt=wt.children[0],Ht=select(wt);Tt=zt.getBoundingClientRect(),Ht.attr("width",Tt.width),Ht.attr("height",Tt.height)}const kt=0*rt.padding,Lt=kt/2,Mt=rt.width<=Tt.width+kt?Tt.width+kt:rt.width;rt.width<=Tt.width+kt?rt.diff=(Tt.width-rt.width)/2-rt.padding/2:rt.diff=-rt.padding/2,log$1.trace("Data ",rt,JSON.stringify(rt)),vt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-Mt/2).attr("y",rt.y-rt.height/2-Lt).attr("width",Mt).attr("height",rt.height+kt),bt.attr("transform","translate("+(rt.x-Tt.width/2)+", "+(rt.y-rt.height/2)+")");const Nt=vt.node().getBBox();return rt.width=Nt.width,rt.height=Nt.height,rt.intersect=function(zt){return intersectRect$1(rt,zt)},it},noteGroup=(nt,rt)=>{const it=nt.insert("g").attr("class","note-cluster").attr("id",rt.id),vt=it.insert("rect",":first-child"),bt=0*rt.padding,wt=bt/2;vt.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-rt.width/2-wt).attr("y",rt.y-rt.height/2-wt).attr("width",rt.width+bt).attr("height",rt.height+bt).attr("fill","none");const Tt=vt.node().getBBox();return rt.width=Tt.width,rt.height=Tt.height,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},roundedWithTitle=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),vt=it.insert("rect",":first-child"),bt=it.insert("g").attr("class","cluster-label"),wt=it.append("rect"),Tt=bt.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let kt=Tt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Ht=Tt.children[0],Wt=select(Tt);kt=Ht.getBoundingClientRect(),Wt.attr("width",kt.width),Wt.attr("height",kt.height)}kt=Tt.getBBox();const Lt=0*rt.padding,Mt=Lt/2,Nt=rt.width<=kt.width+rt.padding?kt.width+rt.padding:rt.width;rt.width<=kt.width+rt.padding?rt.diff=(kt.width+rt.padding*0-rt.width)/2:rt.diff=-rt.padding/2,vt.attr("class","outer").attr("x",rt.x-Nt/2-Mt).attr("y",rt.y-rt.height/2-Mt).attr("width",Nt+Lt).attr("height",rt.height+Lt),wt.attr("class","inner").attr("x",rt.x-Nt/2-Mt).attr("y",rt.y-rt.height/2-Mt+kt.height-1).attr("width",Nt+Lt).attr("height",rt.height+Lt-kt.height-3),bt.attr("transform","translate("+(rt.x-kt.width/2)+", "+(rt.y-rt.height/2-rt.padding/3+(evaluate(getConfig$1().flowchart.htmlLabels)?5:3))+")");const zt=vt.node().getBBox();return rt.height=zt.height,rt.intersect=function(Ht){return intersectRect$1(rt,Ht)},it},divider=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),vt=it.insert("rect",":first-child"),bt=0*rt.padding,wt=bt/2;vt.attr("class","divider").attr("x",rt.x-rt.width/2-wt).attr("y",rt.y-rt.height/2).attr("width",rt.width+bt).attr("height",rt.height+bt);const Tt=vt.node().getBBox();return rt.width=Tt.width,rt.height=Tt.height,rt.diff=-rt.padding/2,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},shapes={rect,roundedWithTitle,noteGroup,divider};let clusterElems={};const insertCluster=(nt,rt)=>{log$1.trace("Inserting cluster");const it=rt.shape||"rect";clusterElems[rt.id]=shapes[it](nt,rt)},clear$9=()=>{clusterElems={}};let edgeLabels={},terminalLabels={};const clear$8=()=>{edgeLabels={},terminalLabels={}},insertEdgeLabel=(nt,rt)=>{const it=createLabel$1(rt.label,rt.labelStyle),vt=nt.insert("g").attr("class","edgeLabel"),bt=vt.insert("g").attr("class","label");bt.node().appendChild(it);let wt=it.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const kt=it.children[0],Lt=select(it);wt=kt.getBoundingClientRect(),Lt.attr("width",wt.width),Lt.attr("height",wt.height)}bt.attr("transform","translate("+-wt.width/2+", "+-wt.height/2+")"),edgeLabels[rt.id]=vt,rt.width=wt.width,rt.height=wt.height;let Tt;if(rt.startLabelLeft){const kt=createLabel$1(rt.startLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Mt=Lt.insert("g").attr("class","inner");Tt=Mt.node().appendChild(kt);const Nt=kt.getBBox();Mt.attr("transform","translate("+-Nt.width/2+", "+-Nt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startLeft=Lt,setTerminalWidth(Tt,rt.startLabelLeft)}if(rt.startLabelRight){const kt=createLabel$1(rt.startLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Mt=Lt.insert("g").attr("class","inner");Tt=Lt.node().appendChild(kt),Mt.node().appendChild(kt);const Nt=kt.getBBox();Mt.attr("transform","translate("+-Nt.width/2+", "+-Nt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startRight=Lt,setTerminalWidth(Tt,rt.startLabelRight)}if(rt.endLabelLeft){const kt=createLabel$1(rt.endLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Mt=Lt.insert("g").attr("class","inner");Tt=Mt.node().appendChild(kt);const Nt=kt.getBBox();Mt.attr("transform","translate("+-Nt.width/2+", "+-Nt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endLeft=Lt,setTerminalWidth(Tt,rt.endLabelLeft)}if(rt.endLabelRight){const kt=createLabel$1(rt.endLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Mt=Lt.insert("g").attr("class","inner");Tt=Mt.node().appendChild(kt);const Nt=kt.getBBox();Mt.attr("transform","translate("+-Nt.width/2+", "+-Nt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endRight=Lt,setTerminalWidth(Tt,rt.endLabelRight)}};function setTerminalWidth(nt,rt){getConfig$1().flowchart.htmlLabels&&nt&&(nt.style.width=rt.length*9+"px",nt.style.height="12px")}const positionEdgeLabel=(nt,rt)=>{log$1.info("Moving label abc78 ",nt.id,nt.label,edgeLabels[nt.id]);let it=rt.updatedPath?rt.updatedPath:rt.originalPath;if(nt.label){const vt=edgeLabels[nt.id];let bt=nt.x,wt=nt.y;if(it){const Tt=utils.calcLabelPosition(it);log$1.info("Moving label "+nt.label+" from (",bt,",",wt,") to (",Tt.x,",",Tt.y,") abc78"),rt.updatedPath&&(bt=Tt.x,wt=Tt.y)}vt.attr("transform","translate("+bt+", "+wt+")")}if(nt.startLabelLeft){const vt=terminalLabels[nt.id].startLeft;let bt=nt.x,wt=nt.y;if(it){const Tt=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_left",it);bt=Tt.x,wt=Tt.y}vt.attr("transform","translate("+bt+", "+wt+")")}if(nt.startLabelRight){const vt=terminalLabels[nt.id].startRight;let bt=nt.x,wt=nt.y;if(it){const Tt=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_right",it);bt=Tt.x,wt=Tt.y}vt.attr("transform","translate("+bt+", "+wt+")")}if(nt.endLabelLeft){const vt=terminalLabels[nt.id].endLeft;let bt=nt.x,wt=nt.y;if(it){const Tt=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_left",it);bt=Tt.x,wt=Tt.y}vt.attr("transform","translate("+bt+", "+wt+")")}if(nt.endLabelRight){const vt=terminalLabels[nt.id].endRight;let bt=nt.x,wt=nt.y;if(it){const Tt=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_right",it);bt=Tt.x,wt=Tt.y}vt.attr("transform","translate("+bt+", "+wt+")")}},outsideNode=(nt,rt)=>{const it=nt.x,vt=nt.y,bt=Math.abs(rt.x-it),wt=Math.abs(rt.y-vt),Tt=nt.width/2,kt=nt.height/2;return bt>=Tt||wt>=kt},intersection=(nt,rt,it)=>{log$1.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(rt)}
  insidePoint : ${JSON.stringify(it)}
  node        : x:${nt.x} y:${nt.y} w:${nt.width} h:${nt.height}`);const vt=nt.x,bt=nt.y,wt=Math.abs(vt-it.x),Tt=nt.width/2;let kt=it.x<rt.x?Tt-wt:Tt+wt;const Lt=nt.height/2,Mt=Math.abs(rt.y-it.y),Nt=Math.abs(rt.x-it.x);if(Math.abs(bt-rt.y)*Tt>Math.abs(vt-rt.x)*Lt){let zt=it.y<rt.y?rt.y-Lt-bt:bt-Lt-rt.y;kt=Nt*zt/Mt;const Ht={x:it.x<rt.x?it.x+kt:it.x-Nt+kt,y:it.y<rt.y?it.y+Mt-zt:it.y-Mt+zt};return kt===0&&(Ht.x=rt.x,Ht.y=rt.y),Nt===0&&(Ht.x=rt.x),Mt===0&&(Ht.y=rt.y),log$1.warn(`abc89 topp/bott calc, Q ${Mt}, q ${zt}, R ${Nt}, r ${kt}`,Ht),Ht}else{it.x<rt.x?kt=rt.x-Tt-vt:kt=vt-Tt-rt.x;let zt=Mt*kt/Nt,Ht=it.x<rt.x?it.x+Nt-kt:it.x-Nt+kt,Wt=it.y<rt.y?it.y+zt:it.y-zt;return log$1.warn(`sides calc abc89, Q ${Mt}, q ${zt}, R ${Nt}, r ${kt}`,{_x:Ht,_y:Wt}),kt===0&&(Ht=rt.x,Wt=rt.y),Nt===0&&(Ht=rt.x),Mt===0&&(Wt=rt.y),{x:Ht,y:Wt}}},cutPathAtIntersect=(nt,rt)=>{log$1.warn("abc88 cutPathAtIntersect",nt,rt);let it=[],vt=nt[0],bt=!1;return nt.forEach(wt=>{if(log$1.info("abc88 checking point",wt,rt),!outsideNode(rt,wt)&&!bt){const Tt=intersection(rt,vt,wt);log$1.warn("abc88 inside",wt,vt,Tt),log$1.warn("abc88 intersection",Tt);let kt=!1;it.forEach(Lt=>{kt=kt||Lt.x===Tt.x&&Lt.y===Tt.y}),it.some(Lt=>Lt.x===Tt.x&&Lt.y===Tt.y)?log$1.warn("abc88 no intersect",Tt,it):it.push(Tt),bt=!0}else log$1.warn("abc88 outside",wt,vt),vt=wt,bt||it.push(wt)}),log$1.warn("abc88 returning points",it),it},insertEdge=function(nt,rt,it,vt,bt,wt){let Tt=it.points,kt=!1;const Lt=wt.node(rt.v);var Mt=wt.node(rt.w);log$1.info("abc88 InsertEdge: ",it),Mt.intersect&&Lt.intersect&&(Tt=Tt.slice(1,it.points.length-1),Tt.unshift(Lt.intersect(Tt[0])),log$1.info("Last point",Tt[Tt.length-1],Mt,Mt.intersect(Tt[Tt.length-1])),Tt.push(Mt.intersect(Tt[Tt.length-1]))),it.toCluster&&(log$1.info("to cluster abc88",vt[it.toCluster]),Tt=cutPathAtIntersect(it.points,vt[it.toCluster].node),kt=!0),it.fromCluster&&(log$1.info("from cluster abc88",vt[it.fromCluster]),Tt=cutPathAtIntersect(Tt.reverse(),vt[it.fromCluster].node).reverse(),kt=!0);const Nt=Tt.filter(nn=>!Number.isNaN(nn.y));let zt;bt==="graph"||bt==="flowchart"?zt=it.curve||curveBasis:zt=curveBasis;const Ht=line$1().x(function(nn){return nn.x}).y(function(nn){return nn.y}).curve(zt);let Wt;switch(it.thickness){case"normal":Wt="edge-thickness-normal";break;case"thick":Wt="edge-thickness-thick";break;default:Wt=""}switch(it.pattern){case"solid":Wt+=" edge-pattern-solid";break;case"dotted":Wt+=" edge-pattern-dotted";break;case"dashed":Wt+=" edge-pattern-dashed";break}const Zt=nt.append("path").attr("d",Ht(Nt)).attr("id",it.id).attr("class"," "+Wt+(it.classes?" "+it.classes:"")).attr("style",it.style);let tn="";switch((getConfig$1().flowchart.arrowMarkerAbsolute||getConfig$1().state.arrowMarkerAbsolute)&&(tn=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,tn=tn.replace(/\(/g,"\\("),tn=tn.replace(/\)/g,"\\)")),log$1.info("arrowTypeStart",it.arrowTypeStart),log$1.info("arrowTypeEnd",it.arrowTypeEnd),it.arrowTypeStart){case"arrow_cross":Zt.attr("marker-start","url("+tn+"#"+bt+"-crossStart)");break;case"arrow_point":Zt.attr("marker-start","url("+tn+"#"+bt+"-pointStart)");break;case"arrow_barb":Zt.attr("marker-start","url("+tn+"#"+bt+"-barbStart)");break;case"arrow_circle":Zt.attr("marker-start","url("+tn+"#"+bt+"-circleStart)");break;case"aggregation":Zt.attr("marker-start","url("+tn+"#"+bt+"-aggregationStart)");break;case"extension":Zt.attr("marker-start","url("+tn+"#"+bt+"-extensionStart)");break;case"composition":Zt.attr("marker-start","url("+tn+"#"+bt+"-compositionStart)");break;case"dependency":Zt.attr("marker-start","url("+tn+"#"+bt+"-dependencyStart)");break;case"lollipop":Zt.attr("marker-start","url("+tn+"#"+bt+"-lollipopStart)");break}switch(it.arrowTypeEnd){case"arrow_cross":Zt.attr("marker-end","url("+tn+"#"+bt+"-crossEnd)");break;case"arrow_point":Zt.attr("marker-end","url("+tn+"#"+bt+"-pointEnd)");break;case"arrow_barb":Zt.attr("marker-end","url("+tn+"#"+bt+"-barbEnd)");break;case"arrow_circle":Zt.attr("marker-end","url("+tn+"#"+bt+"-circleEnd)");break;case"aggregation":Zt.attr("marker-end","url("+tn+"#"+bt+"-aggregationEnd)");break;case"extension":Zt.attr("marker-end","url("+tn+"#"+bt+"-extensionEnd)");break;case"composition":Zt.attr("marker-end","url("+tn+"#"+bt+"-compositionEnd)");break;case"dependency":Zt.attr("marker-end","url("+tn+"#"+bt+"-dependencyEnd)");break;case"lollipop":Zt.attr("marker-end","url("+tn+"#"+bt+"-lollipopEnd)");break}let Yt={};return kt&&(Yt.updatedPath=Tt),Yt.originalPath=it.points,Yt},recursiveRender=(nt,rt,it,vt)=>{log$1.info("Graph in recursive render: XXX",write(rt),vt);const bt=rt.graph().rankdir;log$1.trace("Dir in recursive render - dir:",bt);const wt=nt.insert("g").attr("class","root");rt.nodes()?log$1.info("Recursive render XXX",rt.nodes()):log$1.info("No nodes found for",rt),rt.edges().length>0&&log$1.trace("Recursive edges",rt.edge(rt.edges()[0]));const Tt=wt.insert("g").attr("class","clusters"),kt=wt.insert("g").attr("class","edgePaths"),Lt=wt.insert("g").attr("class","edgeLabels"),Mt=wt.insert("g").attr("class","nodes");rt.nodes().forEach(function(zt){const Ht=rt.node(zt);if(vt!==void 0){const Wt=JSON.parse(JSON.stringify(vt.clusterData));log$1.info("Setting data for cluster XXX (",zt,") ",Wt,vt),rt.setNode(vt.id,Wt),rt.parent(zt)||(log$1.trace("Setting parent",zt,vt.id),rt.setParent(zt,vt.id,Wt))}if(log$1.info("(Insert) Node XXX"+zt+": "+JSON.stringify(rt.node(zt))),Ht&&Ht.clusterNode){log$1.info("Cluster identified",zt,Ht.width,rt.node(zt));const Wt=recursiveRender(Mt,Ht.graph,it,rt.node(zt)),Zt=Wt.elem;updateNodeBounds(Ht,Zt),Ht.diff=Wt.diff||0,log$1.info("Node bounds (abc123)",zt,Ht,Ht.width,Ht.x,Ht.y),setNodeElem(Zt,Ht),log$1.warn("Recursive render complete ",Zt,Ht)}else rt.children(zt).length>0?(log$1.info("Cluster - the non recursive path XXX",zt,Ht.id,Ht,rt),log$1.info(findNonClusterChild(Ht.id,rt)),clusterDb[Ht.id]={id:findNonClusterChild(Ht.id,rt),node:Ht}):(log$1.info("Node - the non recursive path",zt,Ht.id,Ht),insertNode(Mt,rt.node(zt),bt))}),rt.edges().forEach(function(zt){const Ht=rt.edge(zt.v,zt.w,zt.name);log$1.info("Edge "+zt.v+" -> "+zt.w+": "+JSON.stringify(zt)),log$1.info("Edge "+zt.v+" -> "+zt.w+": ",zt," ",JSON.stringify(rt.edge(zt))),log$1.info("Fix",clusterDb,"ids:",zt.v,zt.w,"Translateing: ",clusterDb[zt.v],clusterDb[zt.w]),insertEdgeLabel(Lt,Ht)}),rt.edges().forEach(function(zt){log$1.info("Edge "+zt.v+" -> "+zt.w+": "+JSON.stringify(zt))}),log$1.info("#############################################"),log$1.info("###                Layout                 ###"),log$1.info("#############################################"),log$1.info(rt),layout(rt),log$1.info("Graph after layout:",write(rt));let Nt=0;return sortNodesByHierarchy(rt).forEach(function(zt){const Ht=rt.node(zt);log$1.info("Position "+zt+": "+JSON.stringify(rt.node(zt))),log$1.info("Position "+zt+": ("+Ht.x,","+Ht.y,") width: ",Ht.width," height: ",Ht.height),Ht&&Ht.clusterNode?positionNode(Ht):rt.children(zt).length>0?(insertCluster(Tt,Ht),clusterDb[Ht.id].node=Ht):positionNode(Ht)}),rt.edges().forEach(function(zt){const Ht=rt.edge(zt);log$1.info("Edge "+zt.v+" -> "+zt.w+": "+JSON.stringify(Ht),Ht);const Wt=insertEdge(kt,zt,Ht,clusterDb,it,rt);positionEdgeLabel(Ht,Wt)}),rt.nodes().forEach(function(zt){const Ht=rt.node(zt);log$1.info(zt,Ht.type,Ht.diff),Ht.type==="group"&&(Nt=Ht.diff)}),{elem:wt,diff:Nt}},render$1=(nt,rt,it,vt,bt)=>{insertMarkers$3(nt,it,vt,bt),clear$a(),clear$8(),clear$9(),clear$b(),log$1.warn("Graph at first:",write(rt)),adjustClustersAndEdges(rt),log$1.warn("Graph after:",write(rt)),recursiveRender(nt,rt,vt)},sanitizeText$1=nt=>common$1.sanitizeText(nt,getConfig$1());let conf$9={dividerMargin:10,padding:5,textHeight:10};const addClasses=function(nt,rt,it,vt){const bt=Object.keys(nt);log$1.info("keys:",bt),log$1.info(nt),bt.forEach(function(wt){const Tt=nt[wt];let kt="";Tt.cssClasses.length>0&&(kt=kt+" "+Tt.cssClasses.join(" "));const Lt={labelStyle:""};let Mt=Tt.text!==void 0?Tt.text:Tt.id,Nt=0,zt="";switch(Tt.type){case"class":zt="class_box";break;default:zt="class_box"}rt.setNode(Tt.id,{labelStyle:Lt.labelStyle,shape:zt,labelText:sanitizeText$1(Mt),classData:Tt,rx:Nt,ry:Nt,class:kt,style:Lt.style,id:Tt.id,domId:Tt.domId,tooltip:vt.db.getTooltip(Tt.id)||"",haveCallback:Tt.haveCallback,link:Tt.link,width:Tt.type==="group"?500:void 0,type:Tt.type,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:zt,labelText:Mt,rx:Nt,ry:Nt,class:kt,style:Lt.style,id:Tt.id,width:Tt.type==="group"?500:void 0,type:Tt.type,padding:getConfig$1().flowchart.padding})})},addNotes=function(nt,rt,it,vt){log$1.info(nt),nt.forEach(function(bt,wt){const Tt=bt;let kt="";const Lt={labelStyle:"",style:""};let Mt=Tt.text,Nt=0,zt="note";if(rt.setNode(Tt.id,{labelStyle:Lt.labelStyle,shape:zt,labelText:sanitizeText$1(Mt),noteData:Tt,rx:Nt,ry:Nt,class:kt,style:Lt.style,id:Tt.id,domId:Tt.id,tooltip:"",type:"note",padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:zt,labelText:Mt,rx:Nt,ry:Nt,style:Lt.style,id:Tt.id,type:"note",padding:getConfig$1().flowchart.padding}),!Tt.class||!(Tt.class in vt))return;const Ht=it+wt,Wt={};Wt.classes="relation",Wt.pattern="dotted",Wt.id=`edgeNote${Ht}`,Wt.arrowhead="none",log$1.info(`Note edge: ${JSON.stringify(Wt)}, ${JSON.stringify(Tt)}`),Wt.startLabelRight="",Wt.endLabelLeft="",Wt.arrowTypeStart="none",Wt.arrowTypeEnd="none";let Zt="fill:none",tn="";Wt.style=Zt,Wt.labelStyle=tn,Wt.curve=interpolateToCurve(conf$9.curve,curveLinear),rt.setEdge(Tt.id,Tt.class,Wt,Ht)})},addRelations=function(nt,rt){const it=getConfig$1().flowchart;let vt=0;nt.forEach(function(bt){vt++;const wt={};wt.classes="relation",wt.pattern=bt.relation.lineType==1?"dashed":"solid",wt.id="id"+vt,bt.type==="arrow_open"?wt.arrowhead="none":wt.arrowhead="normal",log$1.info(wt,bt),wt.startLabelRight=bt.relationTitle1==="none"?"":bt.relationTitle1,wt.endLabelLeft=bt.relationTitle2==="none"?"":bt.relationTitle2,wt.arrowTypeStart=getArrowMarker(bt.relation.type1),wt.arrowTypeEnd=getArrowMarker(bt.relation.type2);let Tt="",kt="";if(bt.style!==void 0){const Lt=getStylesFromArray(bt.style);Tt=Lt.style,kt=Lt.labelStyle}else Tt="fill:none";wt.style=Tt,wt.labelStyle=kt,bt.interpolate!==void 0?wt.curve=interpolateToCurve(bt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?wt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):wt.curve=interpolateToCurve(it.curve,curveLinear),bt.text=bt.title,bt.text===void 0?bt.style!==void 0&&(wt.arrowheadStyle="fill: #333"):(wt.arrowheadStyle="fill: #333",wt.labelpos="c",getConfig$1().flowchart.htmlLabels?(wt.labelType="html",wt.label='<span class="edgeLabel">'+bt.text+"</span>"):(wt.labelType="text",wt.label=bt.text.replace(common$1.lineBreakRegex,`
`),bt.style===void 0&&(wt.style=wt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),wt.labelStyle=wt.labelStyle.replace("color:","fill:"))),rt.setEdge(bt.id1,bt.id2,wt,vt)})},setConf$9=function(nt){Object.keys(nt).forEach(function(it){conf$9[it]=nt[it]})},draw$c=function(nt,rt,it,vt){log$1.info("Drawing class - ",rt);const bt=getConfig$1().flowchart,wt=getConfig$1().securityLevel;log$1.info("config:",bt);const Tt=bt.nodeSpacing||50,kt=bt.rankSpacing||50,Lt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:vt.db.getDirection(),nodesep:Tt,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),Mt=vt.db.getClasses(),Nt=vt.db.getRelations(),zt=vt.db.getNotes();log$1.info(Nt),addClasses(Mt,Lt,rt,vt),addRelations(Nt,Lt),addNotes(zt,Lt,Nt.length+1,Mt);let Ht;wt==="sandbox"&&(Ht=select("#i"+rt));const Wt=select(wt==="sandbox"?Ht.nodes()[0].contentDocument.body:"body"),Zt=Wt.select(`[id="${rt}"]`),tn=Wt.select("#"+rt+" g");if(render$1(tn,Lt,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",rt),utils.insertTitle(Zt,"classTitleText",bt.titleTopMargin,vt.db.getDiagramTitle()),setupGraphViewbox$1(Lt,Zt,bt.diagramPadding,bt.useMaxWidth),!bt.htmlLabels){const Yt=wt==="sandbox"?Ht.nodes()[0].contentDocument:document,nn=Yt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const rn of nn){const ln=rn.getBBox(),sn=Yt.createElementNS("http://www.w3.org/2000/svg","rect");sn.setAttribute("rx",0),sn.setAttribute("ry",0),sn.setAttribute("width",ln.width),sn.setAttribute("height",ln.height),rn.insertBefore(sn,rn.firstChild)}}};function getArrowMarker(nt){let rt;switch(nt){case 0:rt="aggregation";break;case 1:rt="extension";break;case 2:rt="composition";break;case 3:rt="dependency";break;case 4:rt="lollipop";break;default:rt="none"}return rt}const classRendererV2={setConf:setConf$9,draw:draw$c};var parser$8=function(){var nt=function(Pn,On,kn,gn){for(kn=kn||{},gn=Pn.length;gn--;kn[Pn[gn]]=On);return kn},rt=[1,2],it=[1,5],vt=[6,9,11,23,25,27,29,30,31,49],bt=[1,17],wt=[1,18],Tt=[1,19],kt=[1,20],Lt=[1,21],Mt=[1,22],Nt=[1,25],zt=[1,30],Ht=[1,31],Wt=[1,32],Zt=[1,33],tn=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],Yt=[1,45],nn=[30,31,46,47],rn=[4,6,9,11,23,25,27,29,30,31,49],ln=[42,43,44,45],sn=[22,37],mn=[1,64],wn={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(On,kn,gn,Vn,pn,pr,yn){var mr=pr.length-1;switch(pn){case 1:break;case 3:this.$=[];break;case 4:pr[mr-1].push(pr[mr]),this.$=pr[mr-1];break;case 5:case 6:this.$=pr[mr];break;case 7:case 8:this.$=[];break;case 12:Vn.addEntity(pr[mr-4]),Vn.addEntity(pr[mr-2]),Vn.addRelationship(pr[mr-4],pr[mr],pr[mr-2],pr[mr-3]);break;case 13:Vn.addEntity(pr[mr-3]),Vn.addAttributes(pr[mr-3],pr[mr-1]);break;case 14:Vn.addEntity(pr[mr-2]);break;case 15:Vn.addEntity(pr[mr]);break;case 16:case 17:this.$=pr[mr].trim(),Vn.setAccTitle(this.$);break;case 18:case 19:this.$=pr[mr].trim(),Vn.setAccDescription(this.$);break;case 20:case 41:this.$=pr[mr];break;case 21:case 39:case 40:this.$=pr[mr].replace(/"/g,"");break;case 22:this.$=[pr[mr]];break;case 23:pr[mr].push(pr[mr-1]),this.$=pr[mr];break;case 24:this.$={attributeType:pr[mr-1],attributeName:pr[mr]};break;case 25:this.$={attributeType:pr[mr-2],attributeName:pr[mr-1],attributeKeyType:pr[mr]};break;case 26:this.$={attributeType:pr[mr-2],attributeName:pr[mr-1],attributeComment:pr[mr]};break;case 27:this.$={attributeType:pr[mr-3],attributeName:pr[mr-2],attributeKeyType:pr[mr-1],attributeComment:pr[mr]};break;case 28:case 29:case 30:this.$=pr[mr];break;case 31:this.$=pr[mr].replace(/"/g,"");break;case 32:this.$={cardA:pr[mr],relType:pr[mr-1],cardB:pr[mr-2]};break;case 33:this.$=Vn.Cardinality.ZERO_OR_ONE;break;case 34:this.$=Vn.Cardinality.ZERO_OR_MORE;break;case 35:this.$=Vn.Cardinality.ONE_OR_MORE;break;case 36:this.$=Vn.Cardinality.ONLY_ONE;break;case 37:this.$=Vn.Identification.NON_IDENTIFYING;break;case 38:this.$=Vn.Identification.IDENTIFYING;break;case 42:Vn.parseDirective("%%{","open_directive");break;case 43:Vn.parseDirective(pr[mr],"type_directive");break;case 44:pr[mr]=pr[mr].trim().replace(/'/g,'"'),Vn.parseDirective(pr[mr],"arg_directive");break;case 45:Vn.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:rt,7:3,12:4,49:it},{1:[3]},nt(vt,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,49:it},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:bt,25:wt,27:Tt,29:kt,30:Lt,31:Mt,49:it},{1:[2,2]},{14:23,15:[1,24],52:Nt},nt([15,52],[2,43]),nt(vt,[2,8],{1:[2,1]}),nt(vt,[2,4]),{7:15,10:26,12:4,17:16,23:bt,25:wt,27:Tt,29:kt,30:Lt,31:Mt,49:it},nt(vt,[2,6]),nt(vt,[2,7]),nt(vt,[2,11]),nt(vt,[2,15],{18:27,40:29,20:[1,28],42:zt,43:Ht,44:Wt,45:Zt}),{24:[1,34]},{26:[1,35]},{28:[1,36]},nt(vt,[2,19]),nt(tn,[2,20]),nt(tn,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},nt(vt,[2,5]),{17:40,30:Lt,31:Mt},{21:41,22:[1,42],32:43,33:44,37:Yt},{41:46,46:[1,47],47:[1,48]},nt(nn,[2,33]),nt(nn,[2,34]),nt(nn,[2,35]),nt(nn,[2,36]),nt(vt,[2,16]),nt(vt,[2,17]),nt(vt,[2,18]),nt(rn,[2,9]),{14:49,52:Nt},{52:[2,44]},{15:[1,50]},{22:[1,51]},nt(vt,[2,14]),{21:52,22:[2,22],32:43,33:44,37:Yt},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:zt,43:Ht,44:Wt,45:Zt},nt(ln,[2,37]),nt(ln,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},nt(vt,[2,13]),{22:[2,23]},nt(sn,[2,24],{35:61,36:62,38:[1,63],39:mn}),nt([22,37,38,39],[2,29]),nt([30,31],[2,32]),nt(rn,[2,10]),nt(vt,[2,12]),nt(vt,[2,39]),nt(vt,[2,40]),nt(vt,[2,41]),nt(sn,[2,25],{36:65,39:mn}),nt(sn,[2,26]),nt([22,37,39],[2,30]),nt(sn,[2,31]),nt(sn,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(On,kn){if(kn.recoverable)this.trace(On);else{var gn=new Error(On);throw gn.hash=kn,gn}},parse:function(On){var kn=this,gn=[0],Vn=[],pn=[null],pr=[],yn=this.table,mr="",Er=0,Mr=0,rr=2,vr=1,cr=pr.slice.call(arguments,1),gr=Object.create(this.lexer),Or={yy:{}};for(var Ar in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ar)&&(Or.yy[Ar]=this.yy[Ar]);gr.setInput(On,Or.yy),Or.yy.lexer=gr,Or.yy.parser=this,typeof gr.yylloc>"u"&&(gr.yylloc={});var sr=gr.yylloc;pr.push(sr);var ii=gr.options&&gr.options.ranges;typeof Or.yy.parseError=="function"?this.parseError=Or.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ar(){var $n;return $n=Vn.pop()||gr.lex()||vr,typeof $n!="number"&&($n instanceof Array&&(Vn=$n,$n=Vn.pop()),$n=kn.symbols_[$n]||$n),$n}for(var fr,wr,ir,Ln,en={},dn,un,Nn,In;;){if(wr=gn[gn.length-1],this.defaultActions[wr]?ir=this.defaultActions[wr]:((fr===null||typeof fr>"u")&&(fr=ar()),ir=yn[wr]&&yn[wr][fr]),typeof ir>"u"||!ir.length||!ir[0]){var lr="";In=[];for(dn in yn[wr])this.terminals_[dn]&&dn>rr&&In.push("'"+this.terminals_[dn]+"'");gr.showPosition?lr="Parse error on line "+(Er+1)+`:
`+gr.showPosition()+`
Expecting `+In.join(", ")+", got '"+(this.terminals_[fr]||fr)+"'":lr="Parse error on line "+(Er+1)+": Unexpected "+(fr==vr?"end of input":"'"+(this.terminals_[fr]||fr)+"'"),this.parseError(lr,{text:gr.match,token:this.terminals_[fr]||fr,line:gr.yylineno,loc:sr,expected:In})}if(ir[0]instanceof Array&&ir.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wr+", token: "+fr);switch(ir[0]){case 1:gn.push(fr),pn.push(gr.yytext),pr.push(gr.yylloc),gn.push(ir[1]),fr=null,Mr=gr.yyleng,mr=gr.yytext,Er=gr.yylineno,sr=gr.yylloc;break;case 2:if(un=this.productions_[ir[1]][1],en.$=pn[pn.length-un],en._$={first_line:pr[pr.length-(un||1)].first_line,last_line:pr[pr.length-1].last_line,first_column:pr[pr.length-(un||1)].first_column,last_column:pr[pr.length-1].last_column},ii&&(en._$.range=[pr[pr.length-(un||1)].range[0],pr[pr.length-1].range[1]]),Ln=this.performAction.apply(en,[mr,Mr,Er,Or.yy,ir[1],pn,pr].concat(cr)),typeof Ln<"u")return Ln;un&&(gn=gn.slice(0,-1*un*2),pn=pn.slice(0,-1*un),pr=pr.slice(0,-1*un)),gn.push(this.productions_[ir[1]][0]),pn.push(en.$),pr.push(en._$),Nn=yn[gn[gn.length-2]][gn[gn.length-1]],gn.push(Nn);break;case 3:return!0}}return!0}},Cn=function(){var Pn={EOF:1,parseError:function(kn,gn){if(this.yy.parser)this.yy.parser.parseError(kn,gn);else throw new Error(kn)},setInput:function(On,kn){return this.yy=kn||this.yy||{},this._input=On,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var On=this._input[0];this.yytext+=On,this.yyleng++,this.offset++,this.match+=On,this.matched+=On;var kn=On.match(/(?:\r\n?|\n).*/g);return kn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),On},unput:function(On){var kn=On.length,gn=On.split(/(?:\r\n?|\n)/g);this._input=On+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-kn),this.offset-=kn;var Vn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),gn.length-1&&(this.yylineno-=gn.length-1);var pn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:gn?(gn.length===Vn.length?this.yylloc.first_column:0)+Vn[Vn.length-gn.length].length-gn[0].length:this.yylloc.first_column-kn},this.options.ranges&&(this.yylloc.range=[pn[0],pn[0]+this.yyleng-kn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(On){this.unput(this.match.slice(On))},pastInput:function(){var On=this.matched.substr(0,this.matched.length-this.match.length);return(On.length>20?"...":"")+On.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var On=this.match;return On.length<20&&(On+=this._input.substr(0,20-On.length)),(On.substr(0,20)+(On.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var On=this.pastInput(),kn=new Array(On.length+1).join("-");return On+this.upcomingInput()+`
`+kn+"^"},test_match:function(On,kn){var gn,Vn,pn;if(this.options.backtrack_lexer&&(pn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pn.yylloc.range=this.yylloc.range.slice(0))),Vn=On[0].match(/(?:\r\n?|\n).*/g),Vn&&(this.yylineno+=Vn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Vn?Vn[Vn.length-1].length-Vn[Vn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+On[0].length},this.yytext+=On[0],this.match+=On[0],this.matches=On,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(On[0].length),this.matched+=On[0],gn=this.performAction.call(this,this.yy,this,kn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),gn)return gn;if(this._backtrack){for(var pr in pn)this[pr]=pn[pr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var On,kn,gn,Vn;this._more||(this.yytext="",this.match="");for(var pn=this._currentRules(),pr=0;pr<pn.length;pr++)if(gn=this._input.match(this.rules[pn[pr]]),gn&&(!kn||gn[0].length>kn[0].length)){if(kn=gn,Vn=pr,this.options.backtrack_lexer){if(On=this.test_match(gn,pn[pr]),On!==!1)return On;if(this._backtrack){kn=!1;continue}else return!1}else if(!this.options.flex)break}return kn?(On=this.test_match(kn,pn[Vn]),On!==!1?On:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var kn=this.next();return kn||this.lex()},begin:function(kn){this.conditionStack.push(kn)},popState:function(){var kn=this.conditionStack.length-1;return kn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(kn){return kn=this.conditionStack.length-1-Math.abs(kn||0),kn>=0?this.conditionStack[kn]:"INITIAL"},pushState:function(kn){this.begin(kn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(kn,gn,Vn,pn){switch(Vn){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return gn.yytext[0];case 29:return 42;case 30:return 44;case 31:return 44;case 32:return 44;case 33:return 42;case 34:return 42;case 35:return 43;case 36:return 43;case 37:return 43;case 38:return 43;case 39:return 43;case 40:return 44;case 41:return 43;case 42:return 44;case 43:return 45;case 44:return 45;case 45:return 45;case 46:return 45;case 47:return 42;case 48:return 43;case 49:return 44;case 50:return 46;case 51:return 47;case 52:return 47;case 53:return 46;case 54:return 46;case 55:return 46;case 56:return 30;case 57:return gn.yytext[0];case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return Pn}();wn.lexer=Cn;function An(){this.yy={}}return An.prototype=wn,wn.Parser=An,new An}();parser$8.parser=parser$8;const erParser=parser$8,erDetector=nt=>nt.match(/^\s*erDiagram/)!==null;let entities={},relationships=[];const Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective$8=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addEntity=function(nt){return entities[nt]===void 0&&(entities[nt]={attributes:[]},log$1.info("Added new entity :",nt)),entities[nt]},getEntities=()=>entities,addAttributes=function(nt,rt){let it=addEntity(nt),vt;for(vt=rt.length-1;vt>=0;vt--)it.attributes.push(rt[vt]),log$1.debug("Added attribute ",rt[vt].attributeName)},addRelationship$1=function(nt,rt,it,vt){let bt={entityA:nt,roleA:rt,entityB:it,relSpec:vt};relationships.push(bt),log$1.debug("Added new relationship :",bt)},getRelationships$1=()=>relationships,clear$7=function(){entities={},relationships=[],clear$g()},erDb={Cardinality,Identification,parseDirective:parseDirective$8,getConfig:()=>getConfig$1().er,addEntity,addAttributes,getEntities,addRelationship:addRelationship$1,getRelationships:getRelationships$1,clear:clear$7,setAccTitle,getAccTitle,setAccDescription,getAccDescription,setDiagramTitle,getDiagramTitle},ERMarkers={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},insertMarkers$1=function(nt,rt){let it;nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,0 L21,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},erMarkers={ERMarkers,insertMarkers:insertMarkers$1},BAD_ID_CHARS_REGEXP=/[^\dA-Za-z](\W)*/g;let conf$8={},entityNameIds=new Map;const setConf$8=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$8[it]=nt[it]},drawAttributes=(nt,rt,it)=>{const vt=conf$8.entityPadding/3,bt=conf$8.entityPadding/3,wt=conf$8.fontSize*.85,Tt=rt.node().getBBox(),kt=[];let Lt=!1,Mt=!1,Nt=0,zt=0,Ht=0,Wt=0,Zt=Tt.height+vt*2,tn=1;it.forEach(ln=>{ln.attributeKeyType!==void 0&&(Lt=!0),ln.attributeComment!==void 0&&(Mt=!0)}),it.forEach(ln=>{const sn=`${rt.node().id}-attr-${tn}`;let mn=0;const wn=parseGenericTypes(ln.attributeType),Cn=nt.append("text").classed("er entityLabel",!0).attr("id",`${sn}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(wn),An=nt.append("text").classed("er entityLabel",!0).attr("id",`${sn}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(ln.attributeName),Pn={};Pn.tn=Cn,Pn.nn=An;const On=Cn.node().getBBox(),kn=An.node().getBBox();if(Nt=Math.max(Nt,On.width),zt=Math.max(zt,kn.width),mn=Math.max(On.height,kn.height),Lt){const gn=nt.append("text").classed("er entityLabel",!0).attr("id",`${sn}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(ln.attributeKeyType||"");Pn.kn=gn;const Vn=gn.node().getBBox();Ht=Math.max(Ht,Vn.width),mn=Math.max(mn,Vn.height)}if(Mt){const gn=nt.append("text").classed("er entityLabel",!0).attr("id",`${sn}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",wt+"px").text(ln.attributeComment||"");Pn.cn=gn;const Vn=gn.node().getBBox();Wt=Math.max(Wt,Vn.width),mn=Math.max(mn,Vn.height)}Pn.height=mn,kt.push(Pn),Zt+=mn+vt*2,tn+=1});let Yt=4;Lt&&(Yt+=2),Mt&&(Yt+=2);const nn=Nt+zt+Ht+Wt,rn={width:Math.max(conf$8.minEntityWidth,Math.max(Tt.width+conf$8.entityPadding*2,nn+bt*Yt)),height:it.length>0?Zt:Math.max(conf$8.minEntityHeight,Tt.height+conf$8.entityPadding*2)};if(it.length>0){const ln=Math.max(0,(rn.width-nn-bt*Yt)/(Yt/2));rt.attr("transform","translate("+rn.width/2+","+(vt+Tt.height/2)+")");let sn=Tt.height+vt*2,mn="attributeBoxOdd";kt.forEach(wn=>{const Cn=sn+vt+wn.height/2;wn.tn.attr("transform","translate("+bt+","+Cn+")");const An=nt.insert("rect","#"+wn.tn.node().id).classed(`er ${mn}`,!0).attr("x",0).attr("y",sn).attr("width",Nt+bt*2+ln).attr("height",wn.height+vt*2),Pn=parseFloat(An.attr("x"))+parseFloat(An.attr("width"));wn.nn.attr("transform","translate("+(Pn+bt)+","+Cn+")");const On=nt.insert("rect","#"+wn.nn.node().id).classed(`er ${mn}`,!0).attr("x",Pn).attr("y",sn).attr("width",zt+bt*2+ln).attr("height",wn.height+vt*2);let kn=parseFloat(On.attr("x"))+parseFloat(On.attr("width"));if(Lt){wn.kn.attr("transform","translate("+(kn+bt)+","+Cn+")");const gn=nt.insert("rect","#"+wn.kn.node().id).classed(`er ${mn}`,!0).attr("x",kn).attr("y",sn).attr("width",Ht+bt*2+ln).attr("height",wn.height+vt*2);kn=parseFloat(gn.attr("x"))+parseFloat(gn.attr("width"))}Mt&&(wn.cn.attr("transform","translate("+(kn+bt)+","+Cn+")"),nt.insert("rect","#"+wn.cn.node().id).classed(`er ${mn}`,"true").attr("x",kn).attr("y",sn).attr("width",Wt+bt*2+ln).attr("height",wn.height+vt*2)),sn+=wn.height+vt*2,mn=mn==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else rn.height=Math.max(conf$8.minEntityHeight,Zt),rt.attr("transform","translate("+rn.width/2+","+rn.height/2+")");return rn},drawEntities=function(nt,rt,it){const vt=Object.keys(rt);let bt;return vt.forEach(function(wt){const Tt=generateId(wt,"entity");entityNameIds.set(wt,Tt);const kt=nt.append("g").attr("id",Tt);bt=bt===void 0?Tt:bt;const Lt="text-"+Tt,Mt=kt.append("text").classed("er entityLabel",!0).attr("id",Lt).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(wt),{width:Nt,height:zt}=drawAttributes(kt,Mt,rt[wt].attributes),Wt=kt.insert("rect","#"+Lt).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",Nt).attr("height",zt).node().getBBox();it.setNode(Tt,{width:Wt.width,height:Wt.height,shape:"rect",id:Tt})}),bt},adjustEntities$1=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )")})},getEdgeName=function(nt){return(nt.entityA+nt.roleA+nt.entityB).replace(/\s/g,"")},addRelationships$1=function(nt,rt){return nt.forEach(function(it){rt.setEdge(entityNameIds.get(it.entityA),entityNameIds.get(it.entityB),{relationship:it},getEdgeName(it))}),nt};let relCnt$1=0;const drawRelationshipFromLayout$1=function(nt,rt,it,vt,bt){relCnt$1++;const wt=it.edge(entityNameIds.get(rt.entityA),entityNameIds.get(rt.entityB),getEdgeName(rt)),Tt=line$1().x(function(Zt){return Zt.x}).y(function(Zt){return Zt.y}).curve(curveBasis),kt=nt.insert("path","#"+vt).classed("er relationshipLine",!0).attr("d",Tt(wt.points)).style("stroke",conf$8.stroke).style("fill","none");rt.relSpec.relType===bt.db.Identification.NON_IDENTIFYING&&kt.attr("stroke-dasharray","8,8");let Lt="";switch(conf$8.arrowMarkerAbsolute&&(Lt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Lt=Lt.replace(/\(/g,"\\("),Lt=Lt.replace(/\)/g,"\\)")),rt.relSpec.cardA){case bt.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_END+")");break;case bt.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_END+")");break;case bt.db.Cardinality.ONE_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_END+")");break;case bt.db.Cardinality.ONLY_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_END+")");break}switch(rt.relSpec.cardB){case bt.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_START+")");break;case bt.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_START+")");break;case bt.db.Cardinality.ONE_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_START+")");break;case bt.db.Cardinality.ONLY_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_START+")");break}const Mt=kt.node().getTotalLength(),Nt=kt.node().getPointAtLength(Mt*.5),zt="rel"+relCnt$1,Wt=nt.append("text").classed("er relationshipLabel",!0).attr("id",zt).attr("x",Nt.x).attr("y",Nt.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(rt.roleA).node().getBBox();nt.insert("rect","#"+zt).classed("er relationshipLabelBox",!0).attr("x",Nt.x-Wt.width/2).attr("y",Nt.y-Wt.height/2).attr("width",Wt.width).attr("height",Wt.height)},draw$b=function(nt,rt,it,vt){conf$8=getConfig$1().er,log$1.info("Drawing ER diagram");const bt=getConfig$1().securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const kt=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);erMarkers.insertMarkers(kt,conf$8);let Lt;Lt=new Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:conf$8.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const Mt=drawEntities(kt,vt.db.getEntities(),Lt),Nt=addRelationships$1(vt.db.getRelationships(),Lt);layout(Lt),adjustEntities$1(kt,Lt),Nt.forEach(function(tn){drawRelationshipFromLayout$1(kt,tn,Lt,Mt,vt)});const zt=conf$8.diagramPadding;utils.insertTitle(kt,"entityTitleText",conf$8.titleTopMargin,vt.db.getDiagramTitle());const Ht=kt.node().getBBox(),Wt=Ht.width+zt*2,Zt=Ht.height+zt*2;configureSvgSize(kt,Zt,Wt,conf$8.useMaxWidth),kt.attr("viewBox",`${Ht.x-zt} ${Ht.y-zt} ${Wt} ${Zt}`)};function generateId(nt="",rt=""){const it=nt.replace(BAD_ID_CHARS_REGEXP,"");return`${strWithHyphen(rt)}${strWithHyphen(it)}${v4()}`}function strWithHyphen(nt=""){return nt.length>0?`${nt}-`:""}const erRenderer={setConf:setConf$8,draw:draw$b};var parser$7=function(){var nt=function(Ea,ji,ao,mo){for(ao=ao||{},mo=Ea.length;mo--;ao[Ea[mo]]=ji);return ao},rt=[1,9],it=[1,7],vt=[1,6],bt=[1,8],wt=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Tt=[2,10],kt=[1,20],Lt=[1,21],Mt=[1,22],Nt=[1,23],zt=[1,30],Ht=[1,32],Wt=[1,33],Zt=[1,34],tn=[1,62],Yt=[1,48],nn=[1,52],rn=[1,36],ln=[1,37],sn=[1,38],mn=[1,39],wn=[1,40],Cn=[1,56],An=[1,63],Pn=[1,51],On=[1,53],kn=[1,55],gn=[1,59],Vn=[1,60],pn=[1,41],pr=[1,42],yn=[1,43],mr=[1,44],Er=[1,61],Mr=[1,50],rr=[1,54],vr=[1,57],cr=[1,58],gr=[1,49],Or=[1,66],Ar=[1,71],sr=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],ii=[1,75],ar=[1,74],fr=[1,76],wr=[20,21,23,81,82],ir=[1,99],Ln=[1,104],en=[1,107],dn=[1,108],un=[1,101],Nn=[1,106],In=[1,109],lr=[1,102],$n=[1,114],Qn=[1,113],Wn=[1,103],or=[1,105],dr=[1,110],kr=[1,111],br=[1,112],_r=[1,115],hi=[20,21,22,23,81,82],di=[20,21,22,23,53,81,82],vi=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ai=[20,21,23],ki=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Bi=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ti=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],Rr=[1,149],Tn=[1,157],Sn=[1,158],jn=[1,159],er=[1,160],Cr=[1,144],Qr=[1,145],yr=[1,141],ai=[1,152],Ir=[1,153],mi=[1,154],wi=[1,155],Mi=[1,156],Ei=[1,161],io=[1,162],Di=[1,147],eo=[1,150],wo=[1,146],Ji=[1,143],al=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ws=[1,165],Pi=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],oo=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],Rs=[12,21,22,24],jo=[22,106],ls=[1,250],Dr=[1,245],Yr=[1,246],Vr=[1,254],xi=[1,251],ui=[1,248],xr=[1,247],li=[1,249],yi=[1,252],uo=[1,253],ss=[1,255],Co=[1,273],Mo=[20,21,23,106],ho=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],as={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(ji,ao,mo,Oi,so,Sr,Ml){var Nr=Sr.length-1;switch(so){case 5:Oi.parseDirective("%%{","open_directive");break;case 6:Oi.parseDirective(Sr[Nr],"type_directive");break;case 7:Sr[Nr]=Sr[Nr].trim().replace(/'/g,'"'),Oi.parseDirective(Sr[Nr],"arg_directive");break;case 8:Oi.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(Sr[Nr])||Sr[Nr].length>0)&&Sr[Nr-1].push(Sr[Nr]),this.$=Sr[Nr-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=Sr[Nr];break;case 19:Oi.setDirection("TB"),this.$="TB";break;case 20:Oi.setDirection(Sr[Nr-1]),this.$=Sr[Nr-1];break;case 35:this.$=Sr[Nr-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=Oi.addSubGraph(Sr[Nr-6],Sr[Nr-1],Sr[Nr-4]);break;case 42:this.$=Oi.addSubGraph(Sr[Nr-3],Sr[Nr-1],Sr[Nr-3]);break;case 43:this.$=Oi.addSubGraph(void 0,Sr[Nr-1],void 0);break;case 45:this.$=Sr[Nr].trim(),Oi.setAccTitle(this.$);break;case 46:case 47:this.$=Sr[Nr].trim(),Oi.setAccDescription(this.$);break;case 51:Oi.addLink(Sr[Nr-2].stmt,Sr[Nr],Sr[Nr-1]),this.$={stmt:Sr[Nr],nodes:Sr[Nr].concat(Sr[Nr-2].nodes)};break;case 52:Oi.addLink(Sr[Nr-3].stmt,Sr[Nr-1],Sr[Nr-2]),this.$={stmt:Sr[Nr-1],nodes:Sr[Nr-1].concat(Sr[Nr-3].nodes)};break;case 53:this.$={stmt:Sr[Nr-1],nodes:Sr[Nr-1]};break;case 54:this.$={stmt:Sr[Nr],nodes:Sr[Nr]};break;case 55:this.$=[Sr[Nr]];break;case 56:this.$=Sr[Nr-4].concat(Sr[Nr]);break;case 57:this.$=[Sr[Nr-2]],Oi.setClass(Sr[Nr-2],Sr[Nr]);break;case 58:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"square");break;case 59:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"doublecircle");break;case 60:this.$=Sr[Nr-5],Oi.addVertex(Sr[Nr-5],Sr[Nr-2],"circle");break;case 61:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"ellipse");break;case 62:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"stadium");break;case 63:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"subroutine");break;case 64:this.$=Sr[Nr-7],Oi.addVertex(Sr[Nr-7],Sr[Nr-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Sr[Nr-5],Sr[Nr-3]]]));break;case 65:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"cylinder");break;case 66:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"round");break;case 67:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"diamond");break;case 68:this.$=Sr[Nr-5],Oi.addVertex(Sr[Nr-5],Sr[Nr-2],"hexagon");break;case 69:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"odd");break;case 70:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"trapezoid");break;case 71:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"inv_trapezoid");break;case 72:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"lean_right");break;case 73:this.$=Sr[Nr-3],Oi.addVertex(Sr[Nr-3],Sr[Nr-1],"lean_left");break;case 74:this.$=Sr[Nr],Oi.addVertex(Sr[Nr]);break;case 75:Sr[Nr-1].text=Sr[Nr],this.$=Sr[Nr-1];break;case 76:case 77:Sr[Nr-2].text=Sr[Nr-1],this.$=Sr[Nr-2];break;case 78:this.$=Sr[Nr];break;case 79:var na=Oi.destructLink(Sr[Nr],Sr[Nr-2]);this.$={type:na.type,stroke:na.stroke,length:na.length,text:Sr[Nr-1]};break;case 80:var na=Oi.destructLink(Sr[Nr]);this.$={type:na.type,stroke:na.stroke,length:na.length};break;case 81:this.$=Sr[Nr-1];break;case 83:case 97:case 153:this.$=Sr[Nr-1]+""+Sr[Nr];break;case 98:case 99:this.$=Sr[Nr-4],Oi.addClass(Sr[Nr-2],Sr[Nr]);break;case 100:this.$=Sr[Nr-4],Oi.setClass(Sr[Nr-2],Sr[Nr]);break;case 101:case 109:this.$=Sr[Nr-1],Oi.setClickEvent(Sr[Nr-1],Sr[Nr]);break;case 102:case 110:this.$=Sr[Nr-3],Oi.setClickEvent(Sr[Nr-3],Sr[Nr-2]),Oi.setTooltip(Sr[Nr-3],Sr[Nr]);break;case 103:this.$=Sr[Nr-2],Oi.setClickEvent(Sr[Nr-2],Sr[Nr-1],Sr[Nr]);break;case 104:this.$=Sr[Nr-4],Oi.setClickEvent(Sr[Nr-4],Sr[Nr-3],Sr[Nr-2]),Oi.setTooltip(Sr[Nr-4],Sr[Nr]);break;case 105:case 111:this.$=Sr[Nr-1],Oi.setLink(Sr[Nr-1],Sr[Nr]);break;case 106:case 112:this.$=Sr[Nr-3],Oi.setLink(Sr[Nr-3],Sr[Nr-2]),Oi.setTooltip(Sr[Nr-3],Sr[Nr]);break;case 107:case 113:this.$=Sr[Nr-3],Oi.setLink(Sr[Nr-3],Sr[Nr-2],Sr[Nr]);break;case 108:case 114:this.$=Sr[Nr-5],Oi.setLink(Sr[Nr-5],Sr[Nr-4],Sr[Nr]),Oi.setTooltip(Sr[Nr-5],Sr[Nr-2]);break;case 115:this.$=Sr[Nr-4],Oi.addVertex(Sr[Nr-2],void 0,void 0,Sr[Nr]);break;case 116:case 118:this.$=Sr[Nr-4],Oi.updateLink(Sr[Nr-2],Sr[Nr]);break;case 117:this.$=Sr[Nr-4],Oi.updateLink([Sr[Nr-2]],Sr[Nr]);break;case 119:this.$=Sr[Nr-8],Oi.updateLinkInterpolate([Sr[Nr-6]],Sr[Nr-2]),Oi.updateLink([Sr[Nr-6]],Sr[Nr]);break;case 120:this.$=Sr[Nr-8],Oi.updateLinkInterpolate(Sr[Nr-6],Sr[Nr-2]),Oi.updateLink(Sr[Nr-6],Sr[Nr]);break;case 121:this.$=Sr[Nr-6],Oi.updateLinkInterpolate([Sr[Nr-4]],Sr[Nr]);break;case 122:this.$=Sr[Nr-6],Oi.updateLinkInterpolate(Sr[Nr-4],Sr[Nr]);break;case 123:case 125:this.$=[Sr[Nr]];break;case 124:case 126:Sr[Nr-2].push(Sr[Nr]),this.$=Sr[Nr-2];break;case 128:this.$=Sr[Nr-1]+Sr[Nr];break;case 150:this.$=Sr[Nr];break;case 151:this.$=Sr[Nr-1]+""+Sr[Nr];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:rt,16:4,21:it,22:vt,24:bt},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:rt,16:4,21:it,22:vt,24:bt},nt(wt,Tt,{17:11}),{7:12,13:[1,13]},{16:14,21:it,22:vt,24:bt},{16:15,21:it,22:vt,24:bt},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:kt,21:Lt,22:Mt,23:Nt,32:24,33:25,34:26,35:27,36:28,37:29,38:zt,43:31,44:Ht,46:Wt,48:Zt,50:35,51:45,52:tn,54:46,66:Yt,67:nn,86:rn,87:ln,88:sn,89:mn,90:wn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,118:pn,119:pr,120:yn,121:mr,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},{8:64,10:[1,65],15:Or},nt([10,15],[2,6]),nt(wt,[2,17]),nt(wt,[2,18]),nt(wt,[2,19]),{20:[1,68],21:[1,69],22:Ar,27:67,30:70},nt(sr,[2,11]),nt(sr,[2,12]),nt(sr,[2,13]),nt(sr,[2,14]),nt(sr,[2,15]),nt(sr,[2,16]),{9:72,20:ii,21:ar,23:fr,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:ii,21:ar,23:fr},{9:81,20:ii,21:ar,23:fr},{9:82,20:ii,21:ar,23:fr},{9:83,20:ii,21:ar,23:fr},{9:84,20:ii,21:ar,23:fr},{9:86,20:ii,21:ar,22:[1,85],23:fr},nt(sr,[2,44]),{45:[1,87]},{47:[1,88]},nt(sr,[2,47]),nt(wr,[2,54],{30:89,22:Ar}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:ir,52:Ln,66:en,67:dn,84:[1,97],91:un,97:96,98:[1,94],100:[1,95],105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(sr,[2,158]),nt(sr,[2,159]),nt(sr,[2,160]),nt(sr,[2,161]),nt(hi,[2,55],{53:[1,116]}),nt(di,[2,74],{116:129,40:[1,117],52:tn,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Yt,67:nn,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr}),nt(vi,[2,150]),nt(vi,[2,175]),nt(vi,[2,176]),nt(vi,[2,177]),nt(vi,[2,178]),nt(vi,[2,179]),nt(vi,[2,180]),nt(vi,[2,181]),nt(vi,[2,182]),nt(vi,[2,183]),nt(vi,[2,184]),nt(vi,[2,185]),nt(vi,[2,186]),nt(vi,[2,187]),nt(vi,[2,188]),nt(vi,[2,189]),nt(vi,[2,190]),{9:130,20:ii,21:ar,23:fr},{11:131,14:[1,132]},nt(Ai,[2,8]),nt(wt,[2,20]),nt(wt,[2,26]),nt(wt,[2,27]),{21:[1,133]},nt(ki,[2,34],{30:134,22:Ar}),nt(sr,[2,35]),{50:135,51:45,52:tn,54:46,66:Yt,67:nn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},nt(Bi,[2,48]),nt(Bi,[2,49]),nt(Bi,[2,50]),nt(Ti,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:Rr,24:Tn,26:Sn,38:jn,39:139,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),nt(sr,[2,36]),nt(sr,[2,37]),nt(sr,[2,38]),nt(sr,[2,39]),nt(sr,[2,40]),{22:Rr,24:Tn,26:Sn,38:jn,39:163,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(al,Tt,{17:164}),nt(sr,[2,45]),nt(sr,[2,46]),nt(wr,[2,53],{52:Ws}),{26:ir,52:Ln,66:en,67:dn,91:un,97:166,102:[1,167],105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{95:[1,168],103:169,105:[1,170]},{26:ir,52:Ln,66:en,67:dn,91:un,95:[1,171],97:172,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{26:ir,52:Ln,66:en,67:dn,91:un,97:173,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(Ai,[2,101],{22:[1,174],99:[1,175]}),nt(Ai,[2,105],{22:[1,176]}),nt(Ai,[2,109],{115:100,117:178,22:[1,177],26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,122:Wn,123:or,124:dr,125:kr,126:br,127:_r}),nt(Ai,[2,111],{22:[1,179]}),nt(Pi,[2,152]),nt(Pi,[2,154]),nt(Pi,[2,155]),nt(Pi,[2,156]),nt(Pi,[2,157]),nt(oo,[2,162]),nt(oo,[2,163]),nt(oo,[2,164]),nt(oo,[2,165]),nt(oo,[2,166]),nt(oo,[2,167]),nt(oo,[2,168]),nt(oo,[2,169]),nt(oo,[2,170]),nt(oo,[2,171]),nt(oo,[2,172]),nt(oo,[2,173]),nt(oo,[2,174]),{52:tn,54:180,66:Yt,67:nn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},{22:Rr,24:Tn,26:Sn,38:jn,39:181,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:182,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:184,42:er,52:Ln,57:[1,183],66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:185,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:186,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:187,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{66:[1,188]},{22:Rr,24:Tn,26:Sn,38:jn,39:189,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:190,42:er,52:Ln,66:en,67:dn,71:[1,191],73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:192,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:193,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:194,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(vi,[2,151]),nt(Rs,[2,3]),{8:195,15:Or},{15:[2,7]},nt(wt,[2,28]),nt(ki,[2,33]),nt(wr,[2,51],{30:196,22:Ar}),nt(Ti,[2,75],{22:[1,197]}),{22:[1,198]},{22:Rr,24:Tn,26:Sn,38:jn,39:199,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,82:[1,200],83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(oo,[2,82]),nt(oo,[2,84]),nt(oo,[2,140]),nt(oo,[2,141]),nt(oo,[2,142]),nt(oo,[2,143]),nt(oo,[2,144]),nt(oo,[2,145]),nt(oo,[2,146]),nt(oo,[2,147]),nt(oo,[2,148]),nt(oo,[2,149]),nt(oo,[2,85]),nt(oo,[2,86]),nt(oo,[2,87]),nt(oo,[2,88]),nt(oo,[2,89]),nt(oo,[2,90]),nt(oo,[2,91]),nt(oo,[2,92]),nt(oo,[2,93]),nt(oo,[2,94]),nt(oo,[2,95]),{9:203,20:ii,21:ar,22:Rr,23:fr,24:Tn,26:Sn,38:jn,40:[1,202],42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{18:18,19:19,20:kt,21:Lt,22:Mt,23:Nt,32:24,33:25,34:26,35:27,36:28,37:29,38:zt,42:[1,204],43:31,44:Ht,46:Wt,48:Zt,50:35,51:45,52:tn,54:46,66:Yt,67:nn,86:rn,87:ln,88:sn,89:mn,90:wn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,118:pn,119:pr,120:yn,121:mr,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},{22:Ar,30:205},{22:[1,206],26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:178,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},nt(jo,[2,123]),{22:[1,211]},{22:[1,212],26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:178,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:[1,213],26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:178,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{84:[1,214]},nt(Ai,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},nt(Pi,[2,153]),{84:[1,219],101:[1,220]},nt(hi,[2,57],{116:129,52:tn,66:Yt,67:nn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr}),{22:Rr,24:Tn,26:Sn,38:jn,41:[1,221],42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,56:[1,222],66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:223,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,58:[1,224],66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,60:[1,225],66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,62:[1,226],66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,64:[1,227],66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{67:[1,228]},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,70:[1,229],73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,72:[1,230],73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,39:231,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,41:[1,232],42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,73:Cr,75:[1,233],77:[1,234],81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,73:Cr,75:[1,236],77:[1,235],81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{9:237,20:ii,21:ar,23:fr},nt(wr,[2,52],{52:Ws}),nt(Ti,[2,77]),nt(Ti,[2,76]),{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,68:[1,238],73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(Ti,[2,79]),nt(oo,[2,83]),{22:Rr,24:Tn,26:Sn,38:jn,39:239,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(al,Tt,{17:240}),nt(sr,[2,43]),{51:241,52:tn,54:46,66:Yt,67:nn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},{22:ls,66:Dr,67:Yr,86:Vr,96:242,102:xi,105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{22:ls,66:Dr,67:Yr,86:Vr,96:256,102:xi,105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{22:ls,66:Dr,67:Yr,86:Vr,96:257,102:xi,104:[1,258],105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{22:ls,66:Dr,67:Yr,86:Vr,96:259,102:xi,104:[1,260],105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{105:[1,261]},{22:ls,66:Dr,67:Yr,86:Vr,96:262,102:xi,105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{22:ls,66:Dr,67:Yr,86:Vr,96:263,102:xi,105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{26:ir,52:Ln,66:en,67:dn,91:un,97:264,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(Ai,[2,102]),{84:[1,265]},nt(Ai,[2,106],{22:[1,266]}),nt(Ai,[2,107]),nt(Ai,[2,110]),nt(Ai,[2,112],{22:[1,267]}),nt(Ai,[2,113]),nt(di,[2,58]),nt(di,[2,59]),{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,58:[1,268],66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(di,[2,66]),nt(di,[2,61]),nt(di,[2,62]),nt(di,[2,63]),{66:[1,269]},nt(di,[2,65]),nt(di,[2,67]),{22:Rr,24:Tn,26:Sn,38:jn,42:er,52:Ln,66:en,67:dn,72:[1,270],73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(di,[2,69]),nt(di,[2,70]),nt(di,[2,72]),nt(di,[2,71]),nt(di,[2,73]),nt(Rs,[2,4]),nt([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:Rr,24:Tn,26:Sn,38:jn,41:[1,271],42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{18:18,19:19,20:kt,21:Lt,22:Mt,23:Nt,32:24,33:25,34:26,35:27,36:28,37:29,38:zt,42:[1,272],43:31,44:Ht,46:Wt,48:Zt,50:35,51:45,52:tn,54:46,66:Yt,67:nn,86:rn,87:ln,88:sn,89:mn,90:wn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,118:pn,119:pr,120:yn,121:mr,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},nt(hi,[2,56]),nt(Ai,[2,115],{106:Co}),nt(Mo,[2,125],{108:274,22:ls,66:Dr,67:Yr,86:Vr,102:xi,105:ui,109:xr,110:li,111:yi,112:uo,113:ss}),nt(ho,[2,127]),nt(ho,[2,129]),nt(ho,[2,130]),nt(ho,[2,131]),nt(ho,[2,132]),nt(ho,[2,133]),nt(ho,[2,134]),nt(ho,[2,135]),nt(ho,[2,136]),nt(ho,[2,137]),nt(ho,[2,138]),nt(ho,[2,139]),nt(Ai,[2,116],{106:Co}),nt(Ai,[2,117],{106:Co}),{22:[1,275]},nt(Ai,[2,118],{106:Co}),{22:[1,276]},nt(jo,[2,124]),nt(Ai,[2,98],{106:Co}),nt(Ai,[2,99],{106:Co}),nt(Ai,[2,100],{115:100,117:178,26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,122:Wn,123:or,124:dr,125:kr,126:br,127:_r}),nt(Ai,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:ii,21:ar,23:fr},nt(sr,[2,42]),{22:ls,66:Dr,67:Yr,86:Vr,102:xi,105:ui,107:283,108:244,109:xr,110:li,111:yi,112:uo,113:ss},nt(ho,[2,128]),{26:ir,52:Ln,66:en,67:dn,91:un,97:284,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{26:ir,52:Ln,66:en,67:dn,91:un,97:285,105:Nn,106:In,109:lr,111:$n,112:Qn,115:100,117:98,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(Ai,[2,108]),nt(Ai,[2,114]),nt(di,[2,60]),{22:Rr,24:Tn,26:Sn,38:jn,39:286,42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:140,84:yr,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},nt(di,[2,68]),nt(al,Tt,{17:287}),nt(Mo,[2,126],{108:274,22:ls,66:Dr,67:Yr,86:Vr,102:xi,105:ui,109:xr,110:li,111:yi,112:uo,113:ss}),nt(Ai,[2,121],{115:100,117:178,22:[1,288],26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,122:Wn,123:or,124:dr,125:kr,126:br,127:_r}),nt(Ai,[2,122],{115:100,117:178,22:[1,289],26:ir,52:Ln,66:en,67:dn,91:un,105:Nn,106:In,109:lr,111:$n,112:Qn,122:Wn,123:or,124:dr,125:kr,126:br,127:_r}),{22:Rr,24:Tn,26:Sn,38:jn,41:[1,290],42:er,52:Ln,66:en,67:dn,73:Cr,81:Qr,83:201,85:151,86:ai,87:Ir,88:mi,89:wi,90:Mi,91:Ei,92:io,94:142,95:Di,105:Nn,106:In,109:eo,111:$n,112:Qn,113:wo,114:Ji,115:148,122:Wn,123:or,124:dr,125:kr,126:br,127:_r},{18:18,19:19,20:kt,21:Lt,22:Mt,23:Nt,32:24,33:25,34:26,35:27,36:28,37:29,38:zt,42:[1,291],43:31,44:Ht,46:Wt,48:Zt,50:35,51:45,52:tn,54:46,66:Yt,67:nn,86:rn,87:ln,88:sn,89:mn,90:wn,91:Cn,95:An,105:Pn,106:On,109:kn,111:gn,112:Vn,116:47,118:pn,119:pr,120:yn,121:mr,122:Er,123:Mr,124:rr,125:vr,126:cr,127:gr},{22:ls,66:Dr,67:Yr,86:Vr,96:292,102:xi,105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},{22:ls,66:Dr,67:Yr,86:Vr,96:293,102:xi,105:ui,107:243,108:244,109:xr,110:li,111:yi,112:uo,113:ss},nt(di,[2,64]),nt(sr,[2,41]),nt(Ai,[2,119],{106:Co}),nt(Ai,[2,120],{106:Co})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(ji,ao){if(ao.recoverable)this.trace(ji);else{var mo=new Error(ji);throw mo.hash=ao,mo}},parse:function(ji){var ao=this,mo=[0],Oi=[],so=[null],Sr=[],Ml=this.table,Nr="",na=0,_u=0,Bo=2,yo=1,Cc=Sr.slice.call(arguments,1),zi=Object.create(this.lexer),vo={yy:{}};for(var qa in this.yy)Object.prototype.hasOwnProperty.call(this.yy,qa)&&(vo.yy[qa]=this.yy[qa]);zi.setInput(ji,vo.yy),vo.yy.lexer=zi,vo.yy.parser=this,typeof zi.yylloc>"u"&&(zi.yylloc={});var ru=zi.yylloc;Sr.push(ru);var Rl=zi.options&&zi.options.ranges;typeof vo.yy.parseError=="function"?this.parseError=vo.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Js(){var Xa;return Xa=Oi.pop()||zi.lex()||yo,typeof Xa!="number"&&(Xa instanceof Array&&(Oi=Xa,Xa=Oi.pop()),Xa=ao.symbols_[Xa]||Xa),Xa}for(var Vo,Wo,oa,Sl,pa={},gl,Ha,ic,Ru;;){if(Wo=mo[mo.length-1],this.defaultActions[Wo]?oa=this.defaultActions[Wo]:((Vo===null||typeof Vo>"u")&&(Vo=Js()),oa=Ml[Wo]&&Ml[Wo][Vo]),typeof oa>"u"||!oa.length||!oa[0]){var bu="";Ru=[];for(gl in Ml[Wo])this.terminals_[gl]&&gl>Bo&&Ru.push("'"+this.terminals_[gl]+"'");zi.showPosition?bu="Parse error on line "+(na+1)+`:
`+zi.showPosition()+`
Expecting `+Ru.join(", ")+", got '"+(this.terminals_[Vo]||Vo)+"'":bu="Parse error on line "+(na+1)+": Unexpected "+(Vo==yo?"end of input":"'"+(this.terminals_[Vo]||Vo)+"'"),this.parseError(bu,{text:zi.match,token:this.terminals_[Vo]||Vo,line:zi.yylineno,loc:ru,expected:Ru})}if(oa[0]instanceof Array&&oa.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Wo+", token: "+Vo);switch(oa[0]){case 1:mo.push(Vo),so.push(zi.yytext),Sr.push(zi.yylloc),mo.push(oa[1]),Vo=null,_u=zi.yyleng,Nr=zi.yytext,na=zi.yylineno,ru=zi.yylloc;break;case 2:if(Ha=this.productions_[oa[1]][1],pa.$=so[so.length-Ha],pa._$={first_line:Sr[Sr.length-(Ha||1)].first_line,last_line:Sr[Sr.length-1].last_line,first_column:Sr[Sr.length-(Ha||1)].first_column,last_column:Sr[Sr.length-1].last_column},Rl&&(pa._$.range=[Sr[Sr.length-(Ha||1)].range[0],Sr[Sr.length-1].range[1]]),Sl=this.performAction.apply(pa,[Nr,_u,na,vo.yy,oa[1],so,Sr].concat(Cc)),typeof Sl<"u")return Sl;Ha&&(mo=mo.slice(0,-1*Ha*2),so=so.slice(0,-1*Ha),Sr=Sr.slice(0,-1*Ha)),mo.push(this.productions_[oa[1]][0]),so.push(pa.$),Sr.push(pa._$),ic=Ml[mo[mo.length-2]][mo[mo.length-1]],mo.push(ic);break;case 3:return!0}}return!0}},pl=function(){var Ea={EOF:1,parseError:function(ao,mo){if(this.yy.parser)this.yy.parser.parseError(ao,mo);else throw new Error(ao)},setInput:function(ji,ao){return this.yy=ao||this.yy||{},this._input=ji,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ji=this._input[0];this.yytext+=ji,this.yyleng++,this.offset++,this.match+=ji,this.matched+=ji;var ao=ji.match(/(?:\r\n?|\n).*/g);return ao?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ji},unput:function(ji){var ao=ji.length,mo=ji.split(/(?:\r\n?|\n)/g);this._input=ji+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ao),this.offset-=ao;var Oi=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),mo.length-1&&(this.yylineno-=mo.length-1);var so=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:mo?(mo.length===Oi.length?this.yylloc.first_column:0)+Oi[Oi.length-mo.length].length-mo[0].length:this.yylloc.first_column-ao},this.options.ranges&&(this.yylloc.range=[so[0],so[0]+this.yyleng-ao]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ji){this.unput(this.match.slice(ji))},pastInput:function(){var ji=this.matched.substr(0,this.matched.length-this.match.length);return(ji.length>20?"...":"")+ji.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ji=this.match;return ji.length<20&&(ji+=this._input.substr(0,20-ji.length)),(ji.substr(0,20)+(ji.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ji=this.pastInput(),ao=new Array(ji.length+1).join("-");return ji+this.upcomingInput()+`
`+ao+"^"},test_match:function(ji,ao){var mo,Oi,so;if(this.options.backtrack_lexer&&(so={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(so.yylloc.range=this.yylloc.range.slice(0))),Oi=ji[0].match(/(?:\r\n?|\n).*/g),Oi&&(this.yylineno+=Oi.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Oi?Oi[Oi.length-1].length-Oi[Oi.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ji[0].length},this.yytext+=ji[0],this.match+=ji[0],this.matches=ji,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ji[0].length),this.matched+=ji[0],mo=this.performAction.call(this,this.yy,this,ao,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),mo)return mo;if(this._backtrack){for(var Sr in so)this[Sr]=so[Sr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ji,ao,mo,Oi;this._more||(this.yytext="",this.match="");for(var so=this._currentRules(),Sr=0;Sr<so.length;Sr++)if(mo=this._input.match(this.rules[so[Sr]]),mo&&(!ao||mo[0].length>ao[0].length)){if(ao=mo,Oi=Sr,this.options.backtrack_lexer){if(ji=this.test_match(mo,so[Sr]),ji!==!1)return ji;if(this._backtrack){ao=!1;continue}else return!1}else if(!this.options.flex)break}return ao?(ji=this.test_match(ao,so[Oi]),ji!==!1?ji:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ao=this.next();return ao||this.lex()},begin:function(ao){this.conditionStack.push(ao)},popState:function(){var ao=this.conditionStack.length-1;return ao>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ao){return ao=this.conditionStack.length-1-Math.abs(ao||0),ao>=0?this.conditionStack[ao]:"INITIAL"},pushState:function(ao){this.begin(ao)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ao,mo,Oi,so){switch(Oi){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return ao.lex.firstGraph()&&this.begin("dir"),24;case 36:return ao.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 81;case 70:return 81;case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:return 125;case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};return Ea}();as.lexer=pl;function vu(){this.yy={}}return vu.prototype=as,as.Parser=vu,new vu}();parser$7.parser=parser$7;const flowParser=parser$7,flowDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*graph/)!==null},flowDetectorV2=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-wrapper"&&nt.match(/^\s*graph/)!==null?!0:nt.match(/^\s*flowchart/)!==null},MERMAID_DOM_ID_PREFIX="flowchart-";let vertexCounter=0,config=getConfig$1(),vertices={},edges=[],classes$1={},subGraphs=[],subGraphLookup={},tooltips={},subCount=0,firstGraphFlag=!0,direction$1,version,funs$1=[];const sanitizeText=nt=>common$1.sanitizeText(nt,config),parseDirective$7=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},lookUpDomId=function(nt){const rt=Object.keys(vertices);for(const it of rt)if(vertices[it].id===nt)return vertices[it].domId;return nt},addVertex=function(nt,rt,it,vt,bt,wt,Tt={}){let kt,Lt=nt;Lt!==void 0&&Lt.trim().length!==0&&(vertices[Lt]===void 0&&(vertices[Lt]={id:Lt,domId:MERMAID_DOM_ID_PREFIX+Lt+"-"+vertexCounter,styles:[],classes:[]}),vertexCounter++,rt!==void 0?(config=getConfig$1(),kt=sanitizeText(rt.trim()),kt[0]==='"'&&kt[kt.length-1]==='"'&&(kt=kt.substring(1,kt.length-1)),vertices[Lt].text=kt):vertices[Lt].text===void 0&&(vertices[Lt].text=nt),it!==void 0&&(vertices[Lt].type=it),vt!=null&&vt.forEach(function(Mt){vertices[Lt].styles.push(Mt)}),bt!=null&&bt.forEach(function(Mt){vertices[Lt].classes.push(Mt)}),wt!==void 0&&(vertices[Lt].dir=wt),vertices[Lt].props===void 0?vertices[Lt].props=Tt:Tt!==void 0&&Object.assign(vertices[Lt].props,Tt))},addSingleLink=function(nt,rt,it,vt){const Tt={start:nt,end:rt,type:void 0,text:""};vt=it.text,vt!==void 0&&(Tt.text=sanitizeText(vt.trim()),Tt.text[0]==='"'&&Tt.text[Tt.text.length-1]==='"'&&(Tt.text=Tt.text.substring(1,Tt.text.length-1))),it!==void 0&&(Tt.type=it.type,Tt.stroke=it.stroke,Tt.length=it.length),edges.push(Tt)},addLink=function(nt,rt,it,vt){let bt,wt;for(bt=0;bt<nt.length;bt++)for(wt=0;wt<rt.length;wt++)addSingleLink(nt[bt],rt[wt],it,vt)},updateLinkInterpolate=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultInterpolate=rt:edges[it].interpolate=rt})},updateLink=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultStyle=rt:(utils.isSubstringInArray("fill",rt)===-1&&rt.push("fill:none"),edges[it].style=rt)})},addClass=function(nt,rt){classes$1[nt]===void 0&&(classes$1[nt]={id:nt,styles:[],textStyles:[]}),rt!=null&&rt.forEach(function(it){if(it.match("color")){const bt=it.replace("fill","bgFill").replace("color","fill");classes$1[nt].textStyles.push(bt)}classes$1[nt].styles.push(it)})},setDirection$1=function(nt){direction$1=nt,direction$1.match(/.*</)&&(direction$1="RL"),direction$1.match(/.*\^/)&&(direction$1="BT"),direction$1.match(/.*>/)&&(direction$1="LR"),direction$1.match(/.*v/)&&(direction$1="TB")},setClass$1=function(nt,rt){nt.split(",").forEach(function(it){let vt=it;vertices[vt]!==void 0&&vertices[vt].classes.push(rt),subGraphLookup[vt]!==void 0&&subGraphLookup[vt].classes.push(rt)})},setTooltip=function(nt,rt){nt.split(",").forEach(function(it){rt!==void 0&&(tooltips[version==="gen-1"?lookUpDomId(it):it]=sanitizeText(rt))})},setClickFun$1=function(nt,rt,it){let vt=lookUpDomId(nt);if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let bt=[];if(typeof it=="string"){bt=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let wt=0;wt<bt.length;wt++){let Tt=bt[wt].trim();Tt.charAt(0)==='"'&&Tt.charAt(Tt.length-1)==='"'&&(Tt=Tt.substr(1,Tt.length-2)),bt[wt]=Tt}}bt.length===0&&bt.push(nt),vertices[nt]!==void 0&&(vertices[nt].haveCallback=!0,funs$1.push(function(){const wt=document.querySelector(`[id="${vt}"]`);wt!==null&&wt.addEventListener("click",function(){utils.runFunc(rt,...bt)},!1)}))},setLink$1=function(nt,rt,it){nt.split(",").forEach(function(vt){vertices[vt]!==void 0&&(vertices[vt].link=utils.formatUrl(rt,config),vertices[vt].linkTarget=it)}),setClass$1(nt,"clickable")},getTooltip=function(nt){return tooltips[nt]},setClickEvent$1=function(nt,rt,it){nt.split(",").forEach(function(vt){setClickFun$1(vt,rt,it)}),setClass$1(nt,"clickable")},bindFunctions$1=function(nt){funs$1.forEach(function(rt){rt(nt)})},getDirection$1=function(){return direction$1.trim()},getVertices=function(){return vertices},getEdges=function(){return edges},getClasses$4=function(){return classes$1},setupToolTips=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const bt=select(this);if(bt.attr("title")===null)return;const Tt=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(bt.attr("title")).style("left",window.scrollX+Tt.left+(Tt.right-Tt.left)/2+"px").style("top",window.scrollY+Tt.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),bt.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$1.push(setupToolTips);const clear$6=function(nt="gen-1"){vertices={},classes$1={},edges=[],funs$1=[setupToolTips],subGraphs=[],subGraphLookup={},subCount=0,tooltips=[],firstGraphFlag=!0,version=nt,clear$g()},setGen=nt=>{version=nt||"gen-1"},defaultStyle=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph=function(nt,rt,it){let vt=nt.trim(),bt=it;nt===it&&it.match(/\s/)&&(vt=void 0);function wt(Nt){const zt={boolean:{},number:{},string:{}},Ht=[];let Wt;return{nodeList:Nt.filter(function(tn){const Yt=typeof tn;return tn.stmt&&tn.stmt==="dir"?(Wt=tn.value,!1):tn.trim()===""?!1:Yt in zt?zt[Yt].hasOwnProperty(tn)?!1:zt[Yt][tn]=!0:Ht.includes(tn)?!1:Ht.push(tn)}),dir:Wt}}let Tt=[];const{nodeList:kt,dir:Lt}=wt(Tt.concat.apply(Tt,rt));if(Tt=kt,version==="gen-1")for(let Nt=0;Nt<Tt.length;Nt++)Tt[Nt]=lookUpDomId(Tt[Nt]);vt=vt||"subGraph"+subCount,bt=bt||"",bt=sanitizeText(bt),subCount=subCount+1;const Mt={id:vt,nodes:Tt,title:bt.trim(),classes:[],dir:Lt};return log$1.info("Adding",Mt.id,Mt.nodes,Mt.dir),Mt.nodes=makeUniq(Mt,subGraphs).nodes,subGraphs.push(Mt),subGraphLookup[vt]=Mt,vt},getPosForId=function(nt){for(const[rt,it]of subGraphs.entries())if(it.id===nt)return rt;return-1};let secCount=-1;const posCrossRef=[],indexNodes2=function(nt,rt){const it=subGraphs[rt].nodes;if(secCount=secCount+1,secCount>2e3)return;if(posCrossRef[secCount]=rt,subGraphs[rt].id===nt)return{result:!0,count:0};let vt=0,bt=1;for(;vt<it.length;){const wt=getPosForId(it[vt]);if(wt>=0){const Tt=indexNodes2(nt,wt);if(Tt.result)return{result:!0,count:bt+Tt.count};bt=bt+Tt.count}vt=vt+1}return{result:!1,count:bt}},getDepthFirstPos=function(nt){return posCrossRef[nt]},indexNodes=function(){secCount=-1,subGraphs.length>0&&indexNodes2("none",subGraphs.length-1)},getSubGraphs=function(){return subGraphs},firstGraph=()=>firstGraphFlag?(firstGraphFlag=!1,!0):!1,destructStartLink=nt=>{let rt=nt.trim(),it="arrow_open";switch(rt[0]){case"<":it="arrow_point",rt=rt.slice(1);break;case"x":it="arrow_cross",rt=rt.slice(1);break;case"o":it="arrow_circle",rt=rt.slice(1);break}let vt="normal";return rt.includes("=")&&(vt="thick"),rt.includes(".")&&(vt="dotted"),{type:it,stroke:vt}},countChar=(nt,rt)=>{const it=rt.length;let vt=0;for(let bt=0;bt<it;++bt)rt[bt]===nt&&++vt;return vt},destructEndLink=nt=>{const rt=nt.trim();let it=rt.slice(0,-1),vt="arrow_open";switch(rt.slice(-1)){case"x":vt="arrow_cross",rt[0]==="x"&&(vt="double_"+vt,it=it.slice(1));break;case">":vt="arrow_point",rt[0]==="<"&&(vt="double_"+vt,it=it.slice(1));break;case"o":vt="arrow_circle",rt[0]==="o"&&(vt="double_"+vt,it=it.slice(1));break}let bt="normal",wt=it.length-1;it[0]==="="&&(bt="thick");let Tt=countChar(".",it);return Tt&&(bt="dotted",wt=Tt),{type:vt,stroke:bt,length:wt}},destructLink=(nt,rt)=>{const it=destructEndLink(nt);let vt;if(rt){if(vt=destructStartLink(rt),vt.stroke!==it.stroke)return{type:"INVALID",stroke:"INVALID"};if(vt.type==="arrow_open")vt.type=it.type;else{if(vt.type!==it.type)return{type:"INVALID",stroke:"INVALID"};vt.type="double_"+vt.type}return vt.type==="double_arrow"&&(vt.type="double_arrow_point"),vt.length=it.length,vt}return it},exists=(nt,rt)=>{let it=!1;return nt.forEach(vt=>{vt.nodes.indexOf(rt)>=0&&(it=!0)}),it},makeUniq=(nt,rt)=>{const it=[];return nt.nodes.forEach((vt,bt)=>{exists(rt,vt)||it.push(nt.nodes[bt])}),{nodes:it}},flowDb={parseDirective:parseDirective$7,defaultConfig:()=>defaultConfig.flowchart,setAccTitle,getAccTitle,getAccDescription,setAccDescription,addVertex,lookUpDomId,addLink,updateLinkInterpolate,updateLink,addClass,setDirection:setDirection$1,setClass:setClass$1,setTooltip,getTooltip,setClickEvent:setClickEvent$1,setLink:setLink$1,bindFunctions:bindFunctions$1,getDirection:getDirection$1,getVertices,getEdges,getClasses:getClasses$4,clear:clear$6,setGen,defaultStyle,addSubGraph,getDepthFirstPos,indexNodes,getSubGraphs,destructLink,lex:{firstGraph},exists,makeUniq,setDiagramTitle,getDiagramTitle};function question(nt,rt,it){const vt=rt.width,bt=rt.height,wt=(vt+bt)*.9,Tt=[{x:wt/2,y:0},{x:wt,y:-wt/2},{x:wt/2,y:-wt},{x:0,y:-wt/2}],kt=insertPolygonShape(nt,wt,wt,Tt);return it.intersect=function(Lt){return intersectPolygon$1(it,Tt,Lt)},kt}function hexagon(nt,rt,it){const bt=rt.height,wt=bt/4,Tt=rt.width+2*wt,kt=[{x:wt,y:0},{x:Tt-wt,y:0},{x:Tt,y:-bt/2},{x:Tt-wt,y:-bt},{x:wt,y:-bt},{x:0,y:-bt/2}],Lt=insertPolygonShape(nt,Tt,bt,kt);return it.intersect=function(Mt){return intersectPolygon$1(it,kt,Mt)},Lt}function rect_left_inv_arrow(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:-bt/2,y:0},{x:vt,y:0},{x:vt,y:-bt},{x:-bt/2,y:-bt},{x:0,y:-bt/2}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function lean_right(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:-2*bt/6,y:0},{x:vt-bt/6,y:0},{x:vt+2*bt/6,y:-bt},{x:bt/6,y:-bt}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function lean_left(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:2*bt/6,y:0},{x:vt+bt/6,y:0},{x:vt-2*bt/6,y:-bt},{x:-bt/6,y:-bt}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function trapezoid(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:-2*bt/6,y:0},{x:vt+2*bt/6,y:0},{x:vt-bt/6,y:-bt},{x:bt/6,y:-bt}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function inv_trapezoid(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:bt/6,y:0},{x:vt-bt/6,y:0},{x:vt+2*bt/6,y:-bt},{x:-2*bt/6,y:-bt}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function rect_right_inv_arrow(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:0,y:0},{x:vt+bt/2,y:0},{x:vt,y:-bt/2},{x:vt+bt/2,y:-bt},{x:0,y:-bt}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function stadium(nt,rt,it){const vt=rt.height,bt=rt.width+vt/4,wt=nt.insert("rect",":first-child").attr("rx",vt/2).attr("ry",vt/2).attr("x",-bt/2).attr("y",-vt/2).attr("width",bt).attr("height",vt);return it.intersect=function(Tt){return intersectRect$2(it,Tt)},wt}function subroutine(nt,rt,it){const vt=rt.width,bt=rt.height,wt=[{x:0,y:0},{x:vt,y:0},{x:vt,y:-bt},{x:0,y:-bt},{x:0,y:0},{x:-8,y:0},{x:vt+8,y:0},{x:vt+8,y:-bt},{x:-8,y:-bt},{x:-8,y:0}],Tt=insertPolygonShape(nt,vt,bt,wt);return it.intersect=function(kt){return intersectPolygon$1(it,wt,kt)},Tt}function cylinder(nt,rt,it){const vt=rt.width,bt=vt/2,wt=bt/(2.5+vt/50),Tt=rt.height+wt,kt="M 0,"+wt+" a "+bt+","+wt+" 0,0,0 "+vt+" 0 a "+bt+","+wt+" 0,0,0 "+-vt+" 0 l 0,"+Tt+" a "+bt+","+wt+" 0,0,0 "+vt+" 0 l 0,"+-Tt,Lt=nt.attr("label-offset-y",wt).insert("path",":first-child").attr("d",kt).attr("transform","translate("+-vt/2+","+-(Tt/2+wt)+")");return it.intersect=function(Mt){const Nt=intersectRect$2(it,Mt),zt=Nt.x-it.x;if(bt!=0&&(Math.abs(zt)<it.width/2||Math.abs(zt)==it.width/2&&Math.abs(Nt.y-it.y)>it.height/2-wt)){let Ht=wt*wt*(1-zt*zt/(bt*bt));Ht!=0&&(Ht=Math.sqrt(Ht)),Ht=wt-Ht,Mt.y-it.y>0&&(Ht=-Ht),Nt.y+=Ht}return Nt},Lt}function addToRender(nt){nt.shapes().question=question,nt.shapes().hexagon=hexagon,nt.shapes().stadium=stadium,nt.shapes().subroutine=subroutine,nt.shapes().cylinder=cylinder,nt.shapes().rect_left_inv_arrow=rect_left_inv_arrow,nt.shapes().lean_right=lean_right,nt.shapes().lean_left=lean_left,nt.shapes().trapezoid=trapezoid,nt.shapes().inv_trapezoid=inv_trapezoid,nt.shapes().rect_right_inv_arrow=rect_right_inv_arrow}function addToRenderV2(nt){nt({question}),nt({hexagon}),nt({stadium}),nt({subroutine}),nt({cylinder}),nt({rect_left_inv_arrow}),nt({lean_right}),nt({lean_left}),nt({trapezoid}),nt({inv_trapezoid}),nt({rect_right_inv_arrow})}function insertPolygonShape(nt,rt,it,vt){return nt.insert("polygon",":first-child").attr("points",vt.map(function(bt){return bt.x+","+bt.y}).join(" ")).attr("transform","translate("+-rt/2+","+it/2+")")}const flowChartShapes={addToRender,addToRenderV2},conf$7={},setConf$7=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$7[it]=nt[it]},addVertices$1=function(nt,rt,it,vt,bt,wt){const Tt=vt?vt.select(`[id="${it}"]`):select(`[id="${it}"]`),kt=bt||document;Object.keys(nt).forEach(function(Mt){const Nt=nt[Mt];let zt="default";Nt.classes.length>0&&(zt=Nt.classes.join(" "));const Ht=getStylesFromArray(Nt.styles);let Wt=Nt.text!==void 0?Nt.text:Nt.id,Zt;if(evaluate(getConfig$1().flowchart.htmlLabels)){const nn={label:Wt.replace(/fa[blrs]?:fa-[\w-]+/g,rn=>`<i class='${rn.replace(":"," ")}'></i>`)};Zt=addHtmlLabel$1(Tt,nn).node(),Zt.parentNode.removeChild(Zt)}else{const nn=kt.createElementNS("http://www.w3.org/2000/svg","text");nn.setAttribute("style",Ht.labelStyle.replace("color:","fill:"));const rn=Wt.split(common$1.lineBreakRegex);for(const ln of rn){const sn=kt.createElementNS("http://www.w3.org/2000/svg","tspan");sn.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),sn.setAttribute("dy","1em"),sn.setAttribute("x","1"),sn.textContent=ln,nn.appendChild(sn)}Zt=nn}let tn=0,Yt="";switch(Nt.type){case"round":tn=5,Yt="rect";break;case"square":Yt="rect";break;case"diamond":Yt="question";break;case"hexagon":Yt="hexagon";break;case"odd":Yt="rect_left_inv_arrow";break;case"lean_right":Yt="lean_right";break;case"lean_left":Yt="lean_left";break;case"trapezoid":Yt="trapezoid";break;case"inv_trapezoid":Yt="inv_trapezoid";break;case"odd_right":Yt="rect_left_inv_arrow";break;case"circle":Yt="circle";break;case"ellipse":Yt="ellipse";break;case"stadium":Yt="stadium";break;case"subroutine":Yt="subroutine";break;case"cylinder":Yt="cylinder";break;case"group":Yt="rect";break;default:Yt="rect"}log$1.warn("Adding node",Nt.id,Nt.domId),rt.setNode(wt.db.lookUpDomId(Nt.id),{labelType:"svg",labelStyle:Ht.labelStyle,shape:Yt,label:Zt,rx:tn,ry:tn,class:zt,style:Ht.style,id:wt.db.lookUpDomId(Nt.id)})})},addEdges$1=function(nt,rt,it){let vt=0,bt,wt;if(nt.defaultStyle!==void 0){const Tt=getStylesFromArray(nt.defaultStyle);bt=Tt.style,wt=Tt.labelStyle}nt.forEach(function(Tt){vt++;var kt="L-"+Tt.start+"-"+Tt.end,Lt="LS-"+Tt.start,Mt="LE-"+Tt.end;const Nt={};Tt.type==="arrow_open"?Nt.arrowhead="none":Nt.arrowhead="normal";let zt="",Ht="";if(Tt.style!==void 0){const Wt=getStylesFromArray(Tt.style);zt=Wt.style,Ht=Wt.labelStyle}else switch(Tt.stroke){case"normal":zt="fill:none",bt!==void 0&&(zt=bt),wt!==void 0&&(Ht=wt);break;case"dotted":zt="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":zt=" stroke-width: 3.5px;fill:none";break}Nt.style=zt,Nt.labelStyle=Ht,Tt.interpolate!==void 0?Nt.curve=interpolateToCurve(Tt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Nt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Nt.curve=interpolateToCurve(conf$7.curve,curveLinear),Tt.text===void 0?Tt.style!==void 0&&(Nt.arrowheadStyle="fill: #333"):(Nt.arrowheadStyle="fill: #333",Nt.labelpos="c",evaluate(getConfig$1().flowchart.htmlLabels)?(Nt.labelType="html",Nt.label=`<span id="L-${kt}" class="edgeLabel L-${Lt}' L-${Mt}" style="${Nt.labelStyle}">${Tt.text.replace(/fa[blrs]?:fa-[\w-]+/g,Wt=>`<i class='${Wt.replace(":"," ")}'></i>`)}</span>`):(Nt.labelType="text",Nt.label=Tt.text.replace(common$1.lineBreakRegex,`
`),Tt.style===void 0&&(Nt.style=Nt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),Nt.labelStyle=Nt.labelStyle.replace("color:","fill:"))),Nt.id=kt,Nt.class=Lt+" "+Mt,Nt.minlen=Tt.length||1,rt.setEdge(it.db.lookUpDomId(Tt.start),it.db.lookUpDomId(Tt.end),Nt,vt)})},getClasses$3=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch(it){return log$1.error(it),{}}},draw$a=function(nt,rt,it,vt){log$1.info("Drawing flowchart"),vt.db.clear();const{securityLevel:bt,flowchart:wt}=getConfig$1();let Tt;bt==="sandbox"&&(Tt=select("#i"+rt));const kt=select(bt==="sandbox"?Tt.nodes()[0].contentDocument.body:"body"),Lt=bt==="sandbox"?Tt.nodes()[0].contentDocument:document;try{vt.parser.parse(nt)}catch{log$1.debug("Parsing failed")}let Mt=vt.db.getDirection();Mt===void 0&&(Mt="TD");const Nt=wt.nodeSpacing||50,zt=wt.rankSpacing||50,Ht=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Mt,nodesep:Nt,ranksep:zt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let Wt;const Zt=vt.db.getSubGraphs();for(let wn=Zt.length-1;wn>=0;wn--)Wt=Zt[wn],vt.db.addVertex(Wt.id,Wt.title,"group",void 0,Wt.classes);const tn=vt.db.getVertices();log$1.warn("Get vertices",tn);const Yt=vt.db.getEdges();let nn=0;for(nn=Zt.length-1;nn>=0;nn--){Wt=Zt[nn],selectAll("cluster").append("text");for(let wn=0;wn<Wt.nodes.length;wn++)log$1.warn("Setting subgraph",Wt.nodes[wn],vt.db.lookUpDomId(Wt.nodes[wn]),vt.db.lookUpDomId(Wt.id)),Ht.setParent(vt.db.lookUpDomId(Wt.nodes[wn]),vt.db.lookUpDomId(Wt.id))}addVertices$1(tn,Ht,rt,kt,Lt,vt),addEdges$1(Yt,Ht,vt);const rn=new render$2;flowChartShapes.addToRender(rn),rn.arrows().none=function(Cn,An,Pn,On){const gn=Cn.append("marker").attr("id",An).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");applyStyle$1(gn,Pn[On+"Style"])},rn.arrows().normal=function(Cn,An){Cn.append("marker").attr("id",An).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const ln=kt.select(`[id="${rt}"]`),sn=kt.select("#"+rt+" g");for(rn(sn,Ht),sn.selectAll("g.node").attr("title",function(){return vt.db.getTooltip(this.id)}),vt.db.indexNodes("subGraph"+nn),nn=0;nn<Zt.length;nn++)if(Wt=Zt[nn],Wt.title!=="undefined"){const wn=Lt.querySelectorAll("#"+rt+' [id="'+vt.db.lookUpDomId(Wt.id)+'"] rect'),Cn=Lt.querySelectorAll("#"+rt+' [id="'+vt.db.lookUpDomId(Wt.id)+'"]'),An=wn[0].x.baseVal.value,Pn=wn[0].y.baseVal.value,On=wn[0].width.baseVal.value,gn=select(Cn[0]).select(".label");gn.attr("transform",`translate(${An+On/2}, ${Pn+14})`),gn.attr("id",rt+"Text");for(let Vn=0;Vn<Wt.classes.length;Vn++)Cn[0].classList.add(Wt.classes[Vn])}if(!wt.htmlLabels){const wn=Lt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const Cn of wn){const An=Cn.getBBox(),Pn=Lt.createElementNS("http://www.w3.org/2000/svg","rect");Pn.setAttribute("rx",0),Pn.setAttribute("ry",0),Pn.setAttribute("width",An.width),Pn.setAttribute("height",An.height),Cn.insertBefore(Pn,Cn.firstChild)}}setupGraphViewbox$1(Ht,ln,wt.diagramPadding,wt.useMaxWidth),Object.keys(tn).forEach(function(wn){const Cn=tn[wn];if(Cn.link){const An=kt.select("#"+rt+' [id="'+vt.db.lookUpDomId(wn)+'"]');if(An){const Pn=Lt.createElementNS("http://www.w3.org/2000/svg","a");Pn.setAttributeNS("http://www.w3.org/2000/svg","class",Cn.classes.join(" ")),Pn.setAttributeNS("http://www.w3.org/2000/svg","href",Cn.link),Pn.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),bt==="sandbox"?Pn.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):Cn.linkTarget&&Pn.setAttributeNS("http://www.w3.org/2000/svg","target",Cn.linkTarget);const On=An.insert(function(){return Pn},":first-child"),kn=An.select(".label-container");kn&&On.append(function(){return kn.node()});const gn=An.select(".label");gn&&On.append(function(){return gn.node()})}}})},flowRenderer={setConf:setConf$7,addVertices:addVertices$1,addEdges:addEdges$1,getClasses:getClasses$3,draw:draw$a},conf$6={},setConf$6=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$6[it]=nt[it]},addVertices=function(nt,rt,it,vt,bt,wt){const Tt=vt.select(`[id="${it}"]`);Object.keys(nt).forEach(function(Lt){const Mt=nt[Lt];let Nt="default";Mt.classes.length>0&&(Nt=Mt.classes.join(" "));const zt=getStylesFromArray(Mt.styles);let Ht=Mt.text!==void 0?Mt.text:Mt.id,Wt;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Yt={label:Ht.replace(/fa[blrs]?:fa-[\w-]+/g,nn=>`<i class='${nn.replace(":"," ")}'></i>`)};Wt=addHtmlLabel$1(Tt,Yt).node(),Wt.parentNode.removeChild(Wt)}else{const Yt=bt.createElementNS("http://www.w3.org/2000/svg","text");Yt.setAttribute("style",zt.labelStyle.replace("color:","fill:"));const nn=Ht.split(common$1.lineBreakRegex);for(const rn of nn){const ln=bt.createElementNS("http://www.w3.org/2000/svg","tspan");ln.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),ln.setAttribute("dy","1em"),ln.setAttribute("x","1"),ln.textContent=rn,Yt.appendChild(ln)}Wt=Yt}let Zt=0,tn="";switch(Mt.type){case"round":Zt=5,tn="rect";break;case"square":tn="rect";break;case"diamond":tn="question";break;case"hexagon":tn="hexagon";break;case"odd":tn="rect_left_inv_arrow";break;case"lean_right":tn="lean_right";break;case"lean_left":tn="lean_left";break;case"trapezoid":tn="trapezoid";break;case"inv_trapezoid":tn="inv_trapezoid";break;case"odd_right":tn="rect_left_inv_arrow";break;case"circle":tn="circle";break;case"ellipse":tn="ellipse";break;case"stadium":tn="stadium";break;case"subroutine":tn="subroutine";break;case"cylinder":tn="cylinder";break;case"group":tn="rect";break;case"doublecircle":tn="doublecircle";break;default:tn="rect"}rt.setNode(Mt.id,{labelStyle:zt.labelStyle,shape:tn,labelText:Ht,rx:Zt,ry:Zt,class:Nt,style:zt.style,id:Mt.id,link:Mt.link,linkTarget:Mt.linkTarget,tooltip:wt.db.getTooltip(Mt.id)||"",domId:wt.db.lookUpDomId(Mt.id),haveCallback:Mt.haveCallback,width:Mt.type==="group"?500:void 0,dir:Mt.dir,type:Mt.type,props:Mt.props,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:zt.labelStyle,shape:tn,labelText:Ht,rx:Zt,ry:Zt,class:Nt,style:zt.style,id:Mt.id,domId:wt.db.lookUpDomId(Mt.id),width:Mt.type==="group"?500:void 0,type:Mt.type,dir:Mt.dir,props:Mt.props,padding:getConfig$1().flowchart.padding})})},addEdges=function(nt,rt,it){log$1.info("abc78 edges = ",nt);let vt=0,bt={},wt,Tt;if(nt.defaultStyle!==void 0){const kt=getStylesFromArray(nt.defaultStyle);wt=kt.style,Tt=kt.labelStyle}nt.forEach(function(kt){vt++;var Lt="L-"+kt.start+"-"+kt.end;bt[Lt]===void 0?(bt[Lt]=0,log$1.info("abc78 new entry",Lt,bt[Lt])):(bt[Lt]++,log$1.info("abc78 new entry",Lt,bt[Lt]));let Mt=Lt+"-"+bt[Lt];log$1.info("abc78 new link id to be used is",Lt,Mt,bt[Lt]);var Nt="LS-"+kt.start,zt="LE-"+kt.end;const Ht={style:"",labelStyle:""};switch(Ht.minlen=kt.length||1,kt.type==="arrow_open"?Ht.arrowhead="none":Ht.arrowhead="normal",Ht.arrowTypeStart="arrow_open",Ht.arrowTypeEnd="arrow_open",kt.type){case"double_arrow_cross":Ht.arrowTypeStart="arrow_cross";case"arrow_cross":Ht.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":Ht.arrowTypeStart="arrow_point";case"arrow_point":Ht.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":Ht.arrowTypeStart="arrow_circle";case"arrow_circle":Ht.arrowTypeEnd="arrow_circle";break}let Wt="",Zt="";switch(kt.stroke){case"normal":Wt="fill:none;",wt!==void 0&&(Wt=wt),Tt!==void 0&&(Zt=Tt),Ht.thickness="normal",Ht.pattern="solid";break;case"dotted":Ht.thickness="normal",Ht.pattern="dotted",Ht.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Ht.thickness="thick",Ht.pattern="solid",Ht.style="stroke-width: 3.5px;fill:none;";break}if(kt.style!==void 0){const tn=getStylesFromArray(kt.style);Wt=tn.style,Zt=tn.labelStyle}Ht.style=Ht.style+=Wt,Ht.labelStyle=Ht.labelStyle+=Zt,kt.interpolate!==void 0?Ht.curve=interpolateToCurve(kt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Ht.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Ht.curve=interpolateToCurve(conf$6.curve,curveLinear),kt.text===void 0?kt.style!==void 0&&(Ht.arrowheadStyle="fill: #333"):(Ht.arrowheadStyle="fill: #333",Ht.labelpos="c"),Ht.labelType="text",Ht.label=kt.text.replace(common$1.lineBreakRegex,`
`),kt.style===void 0&&(Ht.style=Ht.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),Ht.labelStyle=Ht.labelStyle.replace("color:","fill:"),Ht.id=Mt,Ht.classes="flowchart-link "+Nt+" "+zt,rt.setEdge(kt.start,kt.end,Ht,vt)})},getClasses$2=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch{return}},draw$9=function(nt,rt,it,vt){log$1.info("Drawing flowchart"),vt.db.clear(),flowDb.setGen("gen-2"),vt.parser.parse(nt);let bt=vt.db.getDirection();bt===void 0&&(bt="TD");const{securityLevel:wt,flowchart:Tt}=getConfig$1(),kt=Tt.nodeSpacing||50,Lt=Tt.rankSpacing||50;let Mt;wt==="sandbox"&&(Mt=select("#i"+rt));const Nt=select(wt==="sandbox"?Mt.nodes()[0].contentDocument.body:"body"),zt=wt==="sandbox"?Mt.nodes()[0].contentDocument:document,Ht=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:bt,nodesep:kt,ranksep:Lt,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let Wt;const Zt=vt.db.getSubGraphs();log$1.info("Subgraphs - ",Zt);for(let mn=Zt.length-1;mn>=0;mn--)Wt=Zt[mn],log$1.info("Subgraph - ",Wt),vt.db.addVertex(Wt.id,Wt.title,"group",void 0,Wt.classes,Wt.dir);const tn=vt.db.getVertices(),Yt=vt.db.getEdges();log$1.info(Yt);let nn=0;for(nn=Zt.length-1;nn>=0;nn--){Wt=Zt[nn],selectAll("cluster").append("text");for(let mn=0;mn<Wt.nodes.length;mn++)log$1.info("Setting up subgraphs",Wt.nodes[mn],Wt.id),Ht.setParent(Wt.nodes[mn],Wt.id)}addVertices(tn,Ht,rt,Nt,zt,vt),addEdges(Yt,Ht);const rn=Nt.select(`[id="${rt}"]`),ln=Nt.select("#"+rt+" g");if(render$1(ln,Ht,["point","circle","cross"],"flowchart",rt),utils.insertTitle(rn,"flowchartTitleText",Tt.titleTopMargin,vt.db.getDiagramTitle()),setupGraphViewbox$1(Ht,rn,Tt.diagramPadding,Tt.useMaxWidth),vt.db.indexNodes("subGraph"+nn),!Tt.htmlLabels){const mn=zt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const wn of mn){const Cn=wn.getBBox(),An=zt.createElementNS("http://www.w3.org/2000/svg","rect");An.setAttribute("rx",0),An.setAttribute("ry",0),An.setAttribute("width",Cn.width),An.setAttribute("height",Cn.height),wn.insertBefore(An,wn.firstChild)}}Object.keys(tn).forEach(function(mn){const wn=tn[mn];if(wn.link){const Cn=select("#"+rt+' [id="'+mn+'"]');if(Cn){const An=zt.createElementNS("http://www.w3.org/2000/svg","a");An.setAttributeNS("http://www.w3.org/2000/svg","class",wn.classes.join(" ")),An.setAttributeNS("http://www.w3.org/2000/svg","href",wn.link),An.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),wt==="sandbox"?An.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):wn.linkTarget&&An.setAttributeNS("http://www.w3.org/2000/svg","target",wn.linkTarget);const Pn=Cn.insert(function(){return An},":first-child"),On=Cn.select(".label-container");On&&Pn.append(function(){return On.node()});const kn=Cn.select(".label");kn&&Pn.append(function(){return kn.node()})}}})},flowRendererV2={setConf:setConf$6,addVertices,addEdges,getClasses:getClasses$2,draw:draw$9};var parser$6=function(){var nt=function(An,Pn,On,kn){for(On=On||{},kn=An.length;kn--;On[An[kn]]=Pn);return On},rt=[1,3],it=[1,5],vt=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],bt=[1,15],wt=[1,16],Tt=[1,17],kt=[1,18],Lt=[1,19],Mt=[1,20],Nt=[1,21],zt=[1,22],Ht=[1,23],Wt=[1,24],Zt=[1,25],tn=[1,26],Yt=[1,27],nn=[1,29],rn=[1,31],ln=[1,34],sn=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],mn={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(Pn,On,kn,gn,Vn,pn,pr){var yn=pn.length-1;switch(Vn){case 2:return pn[yn-1];case 3:this.$=[];break;case 4:pn[yn-1].push(pn[yn]),this.$=pn[yn-1];break;case 5:case 6:this.$=pn[yn];break;case 7:case 8:this.$=[];break;case 9:gn.setDateFormat(pn[yn].substr(11)),this.$=pn[yn].substr(11);break;case 10:gn.enableInclusiveEndDates(),this.$=pn[yn].substr(18);break;case 11:gn.TopAxis(),this.$=pn[yn].substr(8);break;case 12:gn.setAxisFormat(pn[yn].substr(11)),this.$=pn[yn].substr(11);break;case 13:gn.setTickInterval(pn[yn].substr(13)),this.$=pn[yn].substr(13);break;case 14:gn.setExcludes(pn[yn].substr(9)),this.$=pn[yn].substr(9);break;case 15:gn.setIncludes(pn[yn].substr(9)),this.$=pn[yn].substr(9);break;case 16:gn.setTodayMarker(pn[yn].substr(12)),this.$=pn[yn].substr(12);break;case 17:gn.setDiagramTitle(pn[yn].substr(6)),this.$=pn[yn].substr(6);break;case 18:this.$=pn[yn].trim(),gn.setAccTitle(this.$);break;case 19:case 20:this.$=pn[yn].trim(),gn.setAccDescription(this.$);break;case 21:gn.addSection(pn[yn].substr(8)),this.$=pn[yn].substr(8);break;case 23:gn.addTask(pn[yn-1],pn[yn]),this.$="task";break;case 27:this.$=pn[yn-1],gn.setClickEvent(pn[yn-1],pn[yn],null);break;case 28:this.$=pn[yn-2],gn.setClickEvent(pn[yn-2],pn[yn-1],pn[yn]);break;case 29:this.$=pn[yn-2],gn.setClickEvent(pn[yn-2],pn[yn-1],null),gn.setLink(pn[yn-2],pn[yn]);break;case 30:this.$=pn[yn-3],gn.setClickEvent(pn[yn-3],pn[yn-2],pn[yn-1]),gn.setLink(pn[yn-3],pn[yn]);break;case 31:this.$=pn[yn-2],gn.setClickEvent(pn[yn-2],pn[yn],null),gn.setLink(pn[yn-2],pn[yn-1]);break;case 32:this.$=pn[yn-3],gn.setClickEvent(pn[yn-3],pn[yn-1],pn[yn]),gn.setLink(pn[yn-3],pn[yn-2]);break;case 33:this.$=pn[yn-1],gn.setLink(pn[yn-1],pn[yn]);break;case 34:case 40:this.$=pn[yn-1]+" "+pn[yn];break;case 35:case 36:case 38:this.$=pn[yn-2]+" "+pn[yn-1]+" "+pn[yn];break;case 37:case 39:this.$=pn[yn-3]+" "+pn[yn-2]+" "+pn[yn-1]+" "+pn[yn];break;case 41:gn.parseDirective("%%{","open_directive");break;case 42:gn.parseDirective(pn[yn],"type_directive");break;case 43:pn[yn]=pn[yn].trim().replace(/'/g,'"'),gn.parseDirective(pn[yn],"arg_directive");break;case 44:gn.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:rt,30:4,40:it},{1:[3]},{3:6,4:2,5:rt,30:4,40:it},nt(vt,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:bt,13:wt,14:Tt,15:kt,16:Lt,17:Mt,18:Nt,19:zt,20:Ht,21:Wt,23:Zt,25:tn,26:Yt,27:28,28:nn,30:4,35:rn,40:it},{32:32,33:[1,33],43:ln},nt([33,43],[2,42]),nt(vt,[2,8],{1:[2,2]}),nt(vt,[2,4]),{4:30,10:35,12:bt,13:wt,14:Tt,15:kt,16:Lt,17:Mt,18:Nt,19:zt,20:Ht,21:Wt,23:Zt,25:tn,26:Yt,27:28,28:nn,30:4,35:rn,40:it},nt(vt,[2,6]),nt(vt,[2,7]),nt(vt,[2,9]),nt(vt,[2,10]),nt(vt,[2,11]),nt(vt,[2,12]),nt(vt,[2,13]),nt(vt,[2,14]),nt(vt,[2,15]),nt(vt,[2,16]),nt(vt,[2,17]),{22:[1,36]},{24:[1,37]},nt(vt,[2,20]),nt(vt,[2,21]),nt(vt,[2,22]),{29:[1,38]},nt(vt,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},nt(vt,[2,5]),nt(vt,[2,18]),nt(vt,[2,19]),nt(vt,[2,23]),nt(vt,[2,27],{37:[1,44],38:[1,45]}),nt(vt,[2,33],{36:[1,46]}),nt(sn,[2,25]),{32:47,43:ln},{43:[2,43]},nt(vt,[2,28],{38:[1,48]}),nt(vt,[2,29]),nt(vt,[2,31],{37:[1,49]}),{11:[1,50]},nt(vt,[2,30]),nt(vt,[2,32]),nt(sn,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(Pn,On){if(On.recoverable)this.trace(Pn);else{var kn=new Error(Pn);throw kn.hash=On,kn}},parse:function(Pn){var On=this,kn=[0],gn=[],Vn=[null],pn=[],pr=this.table,yn="",mr=0,Er=0,Mr=2,rr=1,vr=pn.slice.call(arguments,1),cr=Object.create(this.lexer),gr={yy:{}};for(var Or in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Or)&&(gr.yy[Or]=this.yy[Or]);cr.setInput(Pn,gr.yy),gr.yy.lexer=cr,gr.yy.parser=this,typeof cr.yylloc>"u"&&(cr.yylloc={});var Ar=cr.yylloc;pn.push(Ar);var sr=cr.options&&cr.options.ranges;typeof gr.yy.parseError=="function"?this.parseError=gr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ii(){var lr;return lr=gn.pop()||cr.lex()||rr,typeof lr!="number"&&(lr instanceof Array&&(gn=lr,lr=gn.pop()),lr=On.symbols_[lr]||lr),lr}for(var ar,fr,wr,ir,Ln={},en,dn,un,Nn;;){if(fr=kn[kn.length-1],this.defaultActions[fr]?wr=this.defaultActions[fr]:((ar===null||typeof ar>"u")&&(ar=ii()),wr=pr[fr]&&pr[fr][ar]),typeof wr>"u"||!wr.length||!wr[0]){var In="";Nn=[];for(en in pr[fr])this.terminals_[en]&&en>Mr&&Nn.push("'"+this.terminals_[en]+"'");cr.showPosition?In="Parse error on line "+(mr+1)+`:
`+cr.showPosition()+`
Expecting `+Nn.join(", ")+", got '"+(this.terminals_[ar]||ar)+"'":In="Parse error on line "+(mr+1)+": Unexpected "+(ar==rr?"end of input":"'"+(this.terminals_[ar]||ar)+"'"),this.parseError(In,{text:cr.match,token:this.terminals_[ar]||ar,line:cr.yylineno,loc:Ar,expected:Nn})}if(wr[0]instanceof Array&&wr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+fr+", token: "+ar);switch(wr[0]){case 1:kn.push(ar),Vn.push(cr.yytext),pn.push(cr.yylloc),kn.push(wr[1]),ar=null,Er=cr.yyleng,yn=cr.yytext,mr=cr.yylineno,Ar=cr.yylloc;break;case 2:if(dn=this.productions_[wr[1]][1],Ln.$=Vn[Vn.length-dn],Ln._$={first_line:pn[pn.length-(dn||1)].first_line,last_line:pn[pn.length-1].last_line,first_column:pn[pn.length-(dn||1)].first_column,last_column:pn[pn.length-1].last_column},sr&&(Ln._$.range=[pn[pn.length-(dn||1)].range[0],pn[pn.length-1].range[1]]),ir=this.performAction.apply(Ln,[yn,Er,mr,gr.yy,wr[1],Vn,pn].concat(vr)),typeof ir<"u")return ir;dn&&(kn=kn.slice(0,-1*dn*2),Vn=Vn.slice(0,-1*dn),pn=pn.slice(0,-1*dn)),kn.push(this.productions_[wr[1]][0]),Vn.push(Ln.$),pn.push(Ln._$),un=pr[kn[kn.length-2]][kn[kn.length-1]],kn.push(un);break;case 3:return!0}}return!0}},wn=function(){var An={EOF:1,parseError:function(On,kn){if(this.yy.parser)this.yy.parser.parseError(On,kn);else throw new Error(On)},setInput:function(Pn,On){return this.yy=On||this.yy||{},this._input=Pn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Pn=this._input[0];this.yytext+=Pn,this.yyleng++,this.offset++,this.match+=Pn,this.matched+=Pn;var On=Pn.match(/(?:\r\n?|\n).*/g);return On?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pn},unput:function(Pn){var On=Pn.length,kn=Pn.split(/(?:\r\n?|\n)/g);this._input=Pn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-On),this.offset-=On;var gn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),kn.length-1&&(this.yylineno-=kn.length-1);var Vn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:kn?(kn.length===gn.length?this.yylloc.first_column:0)+gn[gn.length-kn.length].length-kn[0].length:this.yylloc.first_column-On},this.options.ranges&&(this.yylloc.range=[Vn[0],Vn[0]+this.yyleng-On]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Pn){this.unput(this.match.slice(Pn))},pastInput:function(){var Pn=this.matched.substr(0,this.matched.length-this.match.length);return(Pn.length>20?"...":"")+Pn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Pn=this.match;return Pn.length<20&&(Pn+=this._input.substr(0,20-Pn.length)),(Pn.substr(0,20)+(Pn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Pn=this.pastInput(),On=new Array(Pn.length+1).join("-");return Pn+this.upcomingInput()+`
`+On+"^"},test_match:function(Pn,On){var kn,gn,Vn;if(this.options.backtrack_lexer&&(Vn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Vn.yylloc.range=this.yylloc.range.slice(0))),gn=Pn[0].match(/(?:\r\n?|\n).*/g),gn&&(this.yylineno+=gn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:gn?gn[gn.length-1].length-gn[gn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pn[0].length},this.yytext+=Pn[0],this.match+=Pn[0],this.matches=Pn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pn[0].length),this.matched+=Pn[0],kn=this.performAction.call(this,this.yy,this,On,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),kn)return kn;if(this._backtrack){for(var pn in Vn)this[pn]=Vn[pn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Pn,On,kn,gn;this._more||(this.yytext="",this.match="");for(var Vn=this._currentRules(),pn=0;pn<Vn.length;pn++)if(kn=this._input.match(this.rules[Vn[pn]]),kn&&(!On||kn[0].length>On[0].length)){if(On=kn,gn=pn,this.options.backtrack_lexer){if(Pn=this.test_match(kn,Vn[pn]),Pn!==!1)return Pn;if(this._backtrack){On=!1;continue}else return!1}else if(!this.options.flex)break}return On?(Pn=this.test_match(On,Vn[gn]),Pn!==!1?Pn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var On=this.next();return On||this.lex()},begin:function(On){this.conditionStack.push(On)},popState:function(){var On=this.conditionStack.length-1;return On>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(On){return On=this.conditionStack.length-1-Math.abs(On||0),On>=0?this.conditionStack[On]:"INITIAL"},pushState:function(On){this.begin(On)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(On,kn,gn,Vn){switch(gn){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return An}();mn.lexer=wn;function Cn(){this.yy={}}return Cn.prototype=mn,mn.Parser=Cn,new Cn}();parser$6.parser=parser$6;const ganttParser=parser$6,ganttDetector=nt=>nt.match(/^\s*gantt/)!==null;let dateFormat="",axisFormat="",tickInterval,todayMarker="",includes=[],excludes=[],links={},sections$2=[],tasks$1=[],currentSection$1="";const tags=["active","done","crit","milestone"];let funs=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0;const parseDirective$6=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear$5=function(){sections$2=[],tasks$1=[],currentSection$1="",funs=[],taskCnt=0,lastTask=void 0,lastTaskID=void 0,rawTasks$1=[],dateFormat="",axisFormat="",tickInterval=void 0,todayMarker="",includes=[],excludes=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0,links={},clear$g()},setAxisFormat=function(nt){axisFormat=nt},getAxisFormat=function(){return axisFormat},setTickInterval=function(nt){tickInterval=nt},getTickInterval=function(){return tickInterval},setTodayMarker=function(nt){todayMarker=nt},getTodayMarker=function(){return todayMarker},setDateFormat=function(nt){dateFormat=nt},enableInclusiveEndDates=function(){inclusiveEndDates=!0},endDatesAreInclusive=function(){return inclusiveEndDates},enableTopAxis=function(){topAxis=!0},topAxisEnabled=function(){return topAxis},getDateFormat=function(){return dateFormat},setIncludes=function(nt){includes=nt.toLowerCase().split(/[\s,]+/)},getIncludes=function(){return includes},setExcludes=function(nt){excludes=nt.toLowerCase().split(/[\s,]+/)},getExcludes=function(){return excludes},getLinks=function(){return links},addSection$2=function(nt){currentSection$1=nt,sections$2.push(nt)},getSections$2=function(){return sections$2},getTasks$1=function(){let nt=compileTasks$1();const rt=10;let it=0;for(;!nt&&it<rt;)nt=compileTasks$1(),it++;return tasks$1=rawTasks$1,tasks$1},isInvalidDate=function(nt,rt,it,vt){return vt.includes(nt.format(rt.trim()))?!1:nt.isoWeekday()>=6&&it.includes("weekends")||it.includes(nt.format("dddd").toLowerCase())?!0:it.includes(nt.format(rt.trim()))},checkTaskDates=function(nt,rt,it,vt){if(!it.length||nt.manualEndTime)return;let bt=moment(nt.startTime,rt,!0);bt.add(1,"d");let wt=moment(nt.endTime,rt,!0),Tt=fixTaskDates(bt,wt,rt,it,vt);nt.endTime=wt.toDate(),nt.renderEndTime=Tt},fixTaskDates=function(nt,rt,it,vt,bt){let wt=!1,Tt=null;for(;nt<=rt;)wt||(Tt=rt.toDate()),wt=isInvalidDate(nt,it,vt,bt),wt&&rt.add(1,"d"),nt.add(1,"d");return Tt},getStartDate=function(nt,rt,it){it=it.trim();const bt=/^after\s+([\d\w- ]+)/.exec(it.trim());if(bt!==null){let Tt=null;if(bt[1].split(" ").forEach(function(kt){let Lt=findTaskById(kt);Lt!==void 0&&(Tt?Lt.endTime>Tt.endTime&&(Tt=Lt):Tt=Lt)}),Tt)return Tt.endTime;{const kt=new Date;return kt.setHours(0,0,0,0),kt}}let wt=moment(it,rt.trim(),!0);if(wt.isValid())return wt.toDate();{log$1.debug("Invalid date:"+it),log$1.debug("With date format:"+rt.trim());const Tt=new Date(it);if(Tt===void 0||isNaN(Tt.getTime()))throw new Error("Invalid date:"+it);return Tt}},parseDuration=function(nt){const rt=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(nt.trim());return rt!==null?moment.duration(Number.parseFloat(rt[1]),rt[2]):moment.duration.invalid()},getEndDate=function(nt,rt,it,vt=!1){it=it.trim();let bt=moment(it,rt.trim(),!0);if(bt.isValid())return vt&&bt.add(1,"d"),bt.toDate();const wt=moment(nt),Tt=parseDuration(it);return Tt.isValid()&&wt.add(Tt),wt.toDate()};let taskCnt=0;const parseId=function(nt){return nt===void 0?(taskCnt=taskCnt+1,"task"+taskCnt):nt},compileData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const vt=it.split(","),bt={};getTaskTags(vt,bt,tags);for(let Tt=0;Tt<vt.length;Tt++)vt[Tt]=vt[Tt].trim();let wt="";switch(vt.length){case 1:bt.id=parseId(),bt.startTime=nt.endTime,wt=vt[0];break;case 2:bt.id=parseId(),bt.startTime=getStartDate(void 0,dateFormat,vt[0]),wt=vt[1];break;case 3:bt.id=parseId(vt[0]),bt.startTime=getStartDate(void 0,dateFormat,vt[1]),wt=vt[2];break}return wt&&(bt.endTime=getEndDate(bt.startTime,dateFormat,wt,inclusiveEndDates),bt.manualEndTime=moment(wt,"YYYY-MM-DD",!0).isValid(),checkTaskDates(bt,dateFormat,excludes,includes)),bt},parseData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const vt=it.split(","),bt={};getTaskTags(vt,bt,tags);for(let wt=0;wt<vt.length;wt++)vt[wt]=vt[wt].trim();switch(vt.length){case 1:bt.id=parseId(),bt.startTime={type:"prevTaskEnd",id:nt},bt.endTime={data:vt[0]};break;case 2:bt.id=parseId(),bt.startTime={type:"getStartDate",startData:vt[0]},bt.endTime={data:vt[1]};break;case 3:bt.id=parseId(vt[0]),bt.startTime={type:"getStartDate",startData:vt[1]},bt.endTime={data:vt[2]};break}return bt};let lastTask,lastTaskID,rawTasks$1=[];const taskDb={},addTask$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:rt},task:nt,classes:[]},vt=parseData(lastTaskID,rt);it.raw.startTime=vt.startTime,it.raw.endTime=vt.endTime,it.id=vt.id,it.prevTaskId=lastTaskID,it.active=vt.active,it.done=vt.done,it.crit=vt.crit,it.milestone=vt.milestone,it.order=lastOrder,lastOrder++;const bt=rawTasks$1.push(it);lastTaskID=it.id,taskDb[it.id]=bt-1},findTaskById=function(nt){const rt=taskDb[nt];return rawTasks$1[rt]},addTaskOrg$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,description:nt,task:nt,classes:[]},vt=compileData(lastTask,rt);it.startTime=vt.startTime,it.endTime=vt.endTime,it.id=vt.id,it.active=vt.active,it.done=vt.done,it.crit=vt.crit,it.milestone=vt.milestone,lastTask=it,tasks$1.push(it)},compileTasks$1=function(){const nt=function(it){const vt=rawTasks$1[it];let bt="";switch(rawTasks$1[it].raw.startTime.type){case"prevTaskEnd":{const wt=findTaskById(vt.prevTaskId);vt.startTime=wt.endTime;break}case"getStartDate":bt=getStartDate(void 0,dateFormat,rawTasks$1[it].raw.startTime.startData),bt&&(rawTasks$1[it].startTime=bt);break}return rawTasks$1[it].startTime&&(rawTasks$1[it].endTime=getEndDate(rawTasks$1[it].startTime,dateFormat,rawTasks$1[it].raw.endTime.data,inclusiveEndDates),rawTasks$1[it].endTime&&(rawTasks$1[it].processed=!0,rawTasks$1[it].manualEndTime=moment(rawTasks$1[it].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),checkTaskDates(rawTasks$1[it],dateFormat,excludes,includes))),rawTasks$1[it].processed};let rt=!0;for(const[it,vt]of rawTasks$1.entries())nt(it),rt=rt&&vt.processed;return rt},setLink=function(nt,rt){let it=rt;getConfig$1().securityLevel!=="loose"&&(it=sanitizeUrl_1(rt)),nt.split(",").forEach(function(vt){findTaskById(vt)!==void 0&&(pushFun(vt,()=>{window.open(it,"_self")}),links[vt]=it)}),setClass(nt,"clickable")},setClass=function(nt,rt){nt.split(",").forEach(function(it){let vt=findTaskById(it);vt!==void 0&&vt.classes.push(rt)})},setClickFun=function(nt,rt,it){if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let vt=[];if(typeof it=="string"){vt=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let wt=0;wt<vt.length;wt++){let Tt=vt[wt].trim();Tt.charAt(0)==='"'&&Tt.charAt(Tt.length-1)==='"'&&(Tt=Tt.substr(1,Tt.length-2)),vt[wt]=Tt}}vt.length===0&&vt.push(nt),findTaskById(nt)!==void 0&&pushFun(nt,()=>{utils.runFunc(rt,...vt)})},pushFun=function(nt,rt){funs.push(function(){const it=document.querySelector(`[id="${nt}"]`);it!==null&&it.addEventListener("click",function(){rt()})},function(){const it=document.querySelector(`[id="${nt}-text"]`);it!==null&&it.addEventListener("click",function(){rt()})})},setClickEvent=function(nt,rt,it){nt.split(",").forEach(function(vt){setClickFun(vt,rt,it)}),setClass(nt,"clickable")},bindFunctions=function(nt){funs.forEach(function(rt){rt(nt)})},ganttDb={parseDirective:parseDirective$6,getConfig:()=>getConfig$1().gantt,clear:clear$5,setDateFormat,getDateFormat,enableInclusiveEndDates,endDatesAreInclusive,enableTopAxis,topAxisEnabled,setAxisFormat,getAxisFormat,setTickInterval,getTickInterval,setTodayMarker,getTodayMarker,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setAccDescription,getAccDescription,addSection:addSection$2,getSections:getSections$2,getTasks:getTasks$1,addTask:addTask$1,findTaskById,addTaskOrg:addTaskOrg$1,setIncludes,getIncludes,setExcludes,getExcludes,setClickEvent,setLink,getLinks,bindFunctions,parseDuration,isInvalidDate};function getTaskTags(nt,rt,it){let vt=!0;for(;vt;)vt=!1,it.forEach(function(bt){const wt="^\\s*"+bt+"\\s*$",Tt=new RegExp(wt);nt[0].match(Tt)&&(rt[bt]=!0,nt.shift(1),vt=!0)})}const setConf$5=function(){log$1.debug("Something is calling, setConf, remove the call")};let w;const draw$8=function(nt,rt,it,vt){const bt=getConfig$1().gantt,wt=getConfig$1().securityLevel;let Tt;wt==="sandbox"&&(Tt=select("#i"+rt));const kt=select(wt==="sandbox"?Tt.nodes()[0].contentDocument.body:"body"),Lt=wt==="sandbox"?Tt.nodes()[0].contentDocument:document,Mt=Lt.getElementById(rt);w=Mt.parentElement.offsetWidth,w===void 0&&(w=1200),bt.useWidth!==void 0&&(w=bt.useWidth);const Nt=vt.db.getTasks(),zt=Nt.length*(bt.barHeight+bt.barGap)+2*bt.topPadding;Mt.setAttribute("viewBox","0 0 "+w+" "+zt);const Ht=kt.select(`[id="${rt}"]`),Wt=time$1().domain([min$2(Nt,function(On){return On.startTime}),max$2(Nt,function(On){return On.endTime})]).rangeRound([0,w-bt.leftPadding-bt.rightPadding]);let Zt=[];for(const On of Nt)Zt.push(On.type);const tn=Zt;Zt=Cn(Zt);function Yt(On,kn){const gn=On.startTime,Vn=kn.startTime;let pn=0;return gn>Vn?pn=1:gn<Vn&&(pn=-1),pn}Nt.sort(Yt),nn(Nt,w,zt),configureSvgSize(Ht,zt,w,bt.useMaxWidth),Ht.append("text").text(vt.db.getDiagramTitle()).attr("x",w/2).attr("y",bt.titleTopMargin).attr("class","titleText");function nn(On,kn,gn){const Vn=bt.barHeight,pn=Vn+bt.barGap,pr=bt.topPadding,yn=bt.leftPadding,mr=linear().domain([0,Zt.length]).range(["#00B9FA","#F95002"]).interpolate(interpolateHcl);ln(pn,pr,yn,kn,gn,On,vt.db.getExcludes(),vt.db.getIncludes()),sn(yn,pr,kn,gn),rn(On,pn,pr,yn,Vn,mr,kn),mn(pn,pr),wn(yn,pr,kn,gn)}function rn(On,kn,gn,Vn,pn,pr,yn){Ht.append("g").selectAll("rect").data(On).enter().append("rect").attr("x",0).attr("y",function(rr,vr){return vr=rr.order,vr*kn+gn-2}).attr("width",function(){return yn-bt.rightPadding/2}).attr("height",kn).attr("class",function(rr){for(const[vr,cr]of Zt.entries())if(rr.type===cr)return"section section"+vr%bt.numberSectionStyles;return"section section0"});const mr=Ht.append("g").selectAll("rect").data(On).enter(),Er=vt.db.getLinks();if(mr.append("rect").attr("id",function(rr){return rr.id}).attr("rx",3).attr("ry",3).attr("x",function(rr){return rr.milestone?Wt(rr.startTime)+Vn+.5*(Wt(rr.endTime)-Wt(rr.startTime))-.5*pn:Wt(rr.startTime)+Vn}).attr("y",function(rr,vr){return vr=rr.order,vr*kn+gn}).attr("width",function(rr){return rr.milestone?pn:Wt(rr.renderEndTime||rr.endTime)-Wt(rr.startTime)}).attr("height",pn).attr("transform-origin",function(rr,vr){return vr=rr.order,(Wt(rr.startTime)+Vn+.5*(Wt(rr.endTime)-Wt(rr.startTime))).toString()+"px "+(vr*kn+gn+.5*pn).toString()+"px"}).attr("class",function(rr){const vr="task";let cr="";rr.classes.length>0&&(cr=rr.classes.join(" "));let gr=0;for(const[Ar,sr]of Zt.entries())rr.type===sr&&(gr=Ar%bt.numberSectionStyles);let Or="";return rr.active?rr.crit?Or+=" activeCrit":Or=" active":rr.done?rr.crit?Or=" doneCrit":Or=" done":rr.crit&&(Or+=" crit"),Or.length===0&&(Or=" task"),rr.milestone&&(Or=" milestone "+Or),Or+=gr,Or+=" "+cr,vr+Or}),mr.append("text").attr("id",function(rr){return rr.id+"-text"}).text(function(rr){return rr.task}).attr("font-size",bt.fontSize).attr("x",function(rr){let vr=Wt(rr.startTime),cr=Wt(rr.renderEndTime||rr.endTime);rr.milestone&&(vr+=.5*(Wt(rr.endTime)-Wt(rr.startTime))-.5*pn),rr.milestone&&(cr=vr+pn);const gr=this.getBBox().width;return gr>cr-vr?cr+gr+1.5*bt.leftPadding>yn?vr+Vn-5:cr+Vn+5:(cr-vr)/2+vr+Vn}).attr("y",function(rr,vr){return vr=rr.order,vr*kn+bt.barHeight/2+(bt.fontSize/2-2)+gn}).attr("text-height",pn).attr("class",function(rr){const vr=Wt(rr.startTime);let cr=Wt(rr.endTime);rr.milestone&&(cr=vr+pn);const gr=this.getBBox().width;let Or="";rr.classes.length>0&&(Or=rr.classes.join(" "));let Ar=0;for(const[ii,ar]of Zt.entries())rr.type===ar&&(Ar=ii%bt.numberSectionStyles);let sr="";return rr.active&&(rr.crit?sr="activeCritText"+Ar:sr="activeText"+Ar),rr.done?rr.crit?sr=sr+" doneCritText"+Ar:sr=sr+" doneText"+Ar:rr.crit&&(sr=sr+" critText"+Ar),rr.milestone&&(sr+=" milestoneText"),gr>cr-vr?cr+gr+1.5*bt.leftPadding>yn?Or+" taskTextOutsideLeft taskTextOutside"+Ar+" "+sr:Or+" taskTextOutsideRight taskTextOutside"+Ar+" "+sr+" width-"+gr:Or+" taskText taskText"+Ar+" "+sr+" width-"+gr}),getConfig$1().securityLevel==="sandbox"){let rr;rr=select("#i"+rt);const vr=rr.nodes()[0].contentDocument;mr.filter(function(cr){return Er[cr.id]!==void 0}).each(function(cr){var gr=vr.querySelector("#"+cr.id),Or=vr.querySelector("#"+cr.id+"-text");const Ar=gr.parentNode;var sr=vr.createElement("a");sr.setAttribute("xlink:href",Er[cr.id]),sr.setAttribute("target","_top"),Ar.appendChild(sr),sr.appendChild(gr),sr.appendChild(Or)})}}function ln(On,kn,gn,Vn,pn,pr,yn,mr){const Er=pr.reduce((Ar,{startTime:sr})=>Ar?Math.min(Ar,sr):sr,0),Mr=pr.reduce((Ar,{endTime:sr})=>Ar?Math.max(Ar,sr):sr,0),rr=vt.db.getDateFormat();if(!Er||!Mr)return;const vr=[];let cr=null,gr=moment(Er);for(;gr.valueOf()<=Mr;)vt.db.isInvalidDate(gr,rr,yn,mr)?cr?cr.end=gr.clone():cr={start:gr.clone(),end:gr.clone()}:cr&&(vr.push(cr),cr=null),gr.add(1,"d");Ht.append("g").selectAll("rect").data(vr).enter().append("rect").attr("id",function(Ar){return"exclude-"+Ar.start.format("YYYY-MM-DD")}).attr("x",function(Ar){return Wt(Ar.start)+gn}).attr("y",bt.gridLineStartPadding).attr("width",function(Ar){const sr=Ar.end.clone().add(1,"day");return Wt(sr)-Wt(Ar.start)}).attr("height",pn-kn-bt.gridLineStartPadding).attr("transform-origin",function(Ar,sr){return(Wt(Ar.start)+gn+.5*(Wt(Ar.end)-Wt(Ar.start))).toString()+"px "+(sr*On+.5*pn).toString()+"px"}).attr("class","exclude-range")}function sn(On,kn,gn,Vn){let pn=axisBottom(Wt).tickSize(-Vn+kn+bt.gridLineStartPadding).tickFormat(timeFormat(vt.db.getAxisFormat()||bt.axisFormat||"%Y-%m-%d"));const yn=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(vt.db.getTickInterval()||bt.tickInterval);if(yn!==null){const mr=yn[1];switch(yn[2]){case"minute":pn.ticks(timeMinute.every(mr));break;case"hour":pn.ticks(timeHour.every(mr));break;case"day":pn.ticks(timeDay.every(mr));break;case"week":pn.ticks(timeSunday.every(mr));break;case"month":pn.ticks(timeMonth.every(mr));break}}if(Ht.append("g").attr("class","grid").attr("transform","translate("+On+", "+(Vn-50)+")").call(pn).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),vt.db.topAxisEnabled()||bt.topAxis){let mr=axisTop(Wt).tickSize(-Vn+kn+bt.gridLineStartPadding).tickFormat(timeFormat(vt.db.getAxisFormat()||bt.axisFormat||"%Y-%m-%d"));if(yn!==null){const Er=yn[1];switch(yn[2]){case"minute":mr.ticks(timeMinute.every(Er));break;case"hour":mr.ticks(timeHour.every(Er));break;case"day":mr.ticks(timeDay.every(Er));break;case"week":mr.ticks(timeSunday.every(Er));break;case"month":mr.ticks(timeMonth.every(Er));break}}Ht.append("g").attr("class","grid").attr("transform","translate("+On+", "+kn+")").call(mr).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function mn(On,kn){const gn=[];let Vn=0;for(const[pn,pr]of Zt.entries())gn[pn]=[pr,Pn(pr,tn)];Ht.append("g").selectAll("text").data(gn).enter().append(function(pn){const pr=pn[0].split(common$1.lineBreakRegex),yn=-(pr.length-1)/2,mr=Lt.createElementNS("http://www.w3.org/2000/svg","text");mr.setAttribute("dy",yn+"em");for(const[Er,Mr]of pr.entries()){const rr=Lt.createElementNS("http://www.w3.org/2000/svg","tspan");rr.setAttribute("alignment-baseline","central"),rr.setAttribute("x","10"),Er>0&&rr.setAttribute("dy","1em"),rr.textContent=Mr,mr.appendChild(rr)}return mr}).attr("x",10).attr("y",function(pn,pr){if(pr>0)for(let yn=0;yn<pr;yn++)return Vn+=gn[pr-1][1],pn[1]*On/2+Vn*On+kn;else return pn[1]*On/2+kn}).attr("font-size",bt.sectionFontSize).attr("font-size",bt.sectionFontSize).attr("class",function(pn){for(const[pr,yn]of Zt.entries())if(pn[0]===yn)return"sectionTitle sectionTitle"+pr%bt.numberSectionStyles;return"sectionTitle"})}function wn(On,kn,gn,Vn){const pn=vt.db.getTodayMarker();if(pn==="off")return;const pr=Ht.append("g").attr("class","today"),yn=new Date,mr=pr.append("line");mr.attr("x1",Wt(yn)+On).attr("x2",Wt(yn)+On).attr("y1",bt.titleTopMargin).attr("y2",Vn-bt.titleTopMargin).attr("class","today"),pn!==""&&mr.attr("style",pn.replace(/,/g,";"))}function Cn(On){const kn={},gn=[];for(let Vn=0,pn=On.length;Vn<pn;++Vn)Object.prototype.hasOwnProperty.call(kn,On[Vn])||(kn[On[Vn]]=!0,gn.push(On[Vn]));return gn}function An(On){let kn=On.length;const gn={};for(;kn;)gn[On[--kn]]=(gn[On[kn]]||0)+1;return gn}function Pn(On,kn){return An(kn)[On]||0}},ganttRenderer={setConf:setConf$5,draw:draw$8};var parser$5=function(){var nt=function(wt,Tt,kt,Lt){for(kt=kt||{},Lt=wt.length;Lt--;kt[wt[Lt]]=Tt);return kt},rt=[6,9,10],it={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(Tt,kt,Lt,Mt,Nt,zt,Ht){switch(zt.length-1,Nt){case 1:return Mt;case 4:break;case 6:Mt.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},nt(rt,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},nt(rt,[2,3]),nt(rt,[2,4]),nt(rt,[2,5]),nt(rt,[2,6])],defaultActions:{4:[2,1]},parseError:function(Tt,kt){if(kt.recoverable)this.trace(Tt);else{var Lt=new Error(Tt);throw Lt.hash=kt,Lt}},parse:function(Tt){var kt=this,Lt=[0],Mt=[],Nt=[null],zt=[],Ht=this.table,Wt="",Zt=0,tn=0,Yt=2,nn=1,rn=zt.slice.call(arguments,1),ln=Object.create(this.lexer),sn={yy:{}};for(var mn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mn)&&(sn.yy[mn]=this.yy[mn]);ln.setInput(Tt,sn.yy),sn.yy.lexer=ln,sn.yy.parser=this,typeof ln.yylloc>"u"&&(ln.yylloc={});var wn=ln.yylloc;zt.push(wn);var Cn=ln.options&&ln.options.ranges;typeof sn.yy.parseError=="function"?this.parseError=sn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function An(){var Mr;return Mr=Mt.pop()||ln.lex()||nn,typeof Mr!="number"&&(Mr instanceof Array&&(Mt=Mr,Mr=Mt.pop()),Mr=kt.symbols_[Mr]||Mr),Mr}for(var Pn,On,kn,gn,Vn={},pn,pr,yn,mr;;){if(On=Lt[Lt.length-1],this.defaultActions[On]?kn=this.defaultActions[On]:((Pn===null||typeof Pn>"u")&&(Pn=An()),kn=Ht[On]&&Ht[On][Pn]),typeof kn>"u"||!kn.length||!kn[0]){var Er="";mr=[];for(pn in Ht[On])this.terminals_[pn]&&pn>Yt&&mr.push("'"+this.terminals_[pn]+"'");ln.showPosition?Er="Parse error on line "+(Zt+1)+`:
`+ln.showPosition()+`
Expecting `+mr.join(", ")+", got '"+(this.terminals_[Pn]||Pn)+"'":Er="Parse error on line "+(Zt+1)+": Unexpected "+(Pn==nn?"end of input":"'"+(this.terminals_[Pn]||Pn)+"'"),this.parseError(Er,{text:ln.match,token:this.terminals_[Pn]||Pn,line:ln.yylineno,loc:wn,expected:mr})}if(kn[0]instanceof Array&&kn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+On+", token: "+Pn);switch(kn[0]){case 1:Lt.push(Pn),Nt.push(ln.yytext),zt.push(ln.yylloc),Lt.push(kn[1]),Pn=null,tn=ln.yyleng,Wt=ln.yytext,Zt=ln.yylineno,wn=ln.yylloc;break;case 2:if(pr=this.productions_[kn[1]][1],Vn.$=Nt[Nt.length-pr],Vn._$={first_line:zt[zt.length-(pr||1)].first_line,last_line:zt[zt.length-1].last_line,first_column:zt[zt.length-(pr||1)].first_column,last_column:zt[zt.length-1].last_column},Cn&&(Vn._$.range=[zt[zt.length-(pr||1)].range[0],zt[zt.length-1].range[1]]),gn=this.performAction.apply(Vn,[Wt,tn,Zt,sn.yy,kn[1],Nt,zt].concat(rn)),typeof gn<"u")return gn;pr&&(Lt=Lt.slice(0,-1*pr*2),Nt=Nt.slice(0,-1*pr),zt=zt.slice(0,-1*pr)),Lt.push(this.productions_[kn[1]][0]),Nt.push(Vn.$),zt.push(Vn._$),yn=Ht[Lt[Lt.length-2]][Lt[Lt.length-1]],Lt.push(yn);break;case 3:return!0}}return!0}},vt=function(){var wt={EOF:1,parseError:function(kt,Lt){if(this.yy.parser)this.yy.parser.parseError(kt,Lt);else throw new Error(kt)},setInput:function(Tt,kt){return this.yy=kt||this.yy||{},this._input=Tt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Tt=this._input[0];this.yytext+=Tt,this.yyleng++,this.offset++,this.match+=Tt,this.matched+=Tt;var kt=Tt.match(/(?:\r\n?|\n).*/g);return kt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Tt},unput:function(Tt){var kt=Tt.length,Lt=Tt.split(/(?:\r\n?|\n)/g);this._input=Tt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-kt),this.offset-=kt;var Mt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Lt.length-1&&(this.yylineno-=Lt.length-1);var Nt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Lt?(Lt.length===Mt.length?this.yylloc.first_column:0)+Mt[Mt.length-Lt.length].length-Lt[0].length:this.yylloc.first_column-kt},this.options.ranges&&(this.yylloc.range=[Nt[0],Nt[0]+this.yyleng-kt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Tt){this.unput(this.match.slice(Tt))},pastInput:function(){var Tt=this.matched.substr(0,this.matched.length-this.match.length);return(Tt.length>20?"...":"")+Tt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Tt=this.match;return Tt.length<20&&(Tt+=this._input.substr(0,20-Tt.length)),(Tt.substr(0,20)+(Tt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Tt=this.pastInput(),kt=new Array(Tt.length+1).join("-");return Tt+this.upcomingInput()+`
`+kt+"^"},test_match:function(Tt,kt){var Lt,Mt,Nt;if(this.options.backtrack_lexer&&(Nt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Nt.yylloc.range=this.yylloc.range.slice(0))),Mt=Tt[0].match(/(?:\r\n?|\n).*/g),Mt&&(this.yylineno+=Mt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Mt?Mt[Mt.length-1].length-Mt[Mt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Tt[0].length},this.yytext+=Tt[0],this.match+=Tt[0],this.matches=Tt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Tt[0].length),this.matched+=Tt[0],Lt=this.performAction.call(this,this.yy,this,kt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Lt)return Lt;if(this._backtrack){for(var zt in Nt)this[zt]=Nt[zt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Tt,kt,Lt,Mt;this._more||(this.yytext="",this.match="");for(var Nt=this._currentRules(),zt=0;zt<Nt.length;zt++)if(Lt=this._input.match(this.rules[Nt[zt]]),Lt&&(!kt||Lt[0].length>kt[0].length)){if(kt=Lt,Mt=zt,this.options.backtrack_lexer){if(Tt=this.test_match(Lt,Nt[zt]),Tt!==!1)return Tt;if(this._backtrack){kt=!1;continue}else return!1}else if(!this.options.flex)break}return kt?(Tt=this.test_match(kt,Nt[Mt]),Tt!==!1?Tt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var kt=this.next();return kt||this.lex()},begin:function(kt){this.conditionStack.push(kt)},popState:function(){var kt=this.conditionStack.length-1;return kt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(kt){return kt=this.conditionStack.length-1-Math.abs(kt||0),kt>=0?this.conditionStack[kt]:"INITIAL"},pushState:function(kt){this.begin(kt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(kt,Lt,Mt,Nt){switch(Mt){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return wt}();it.lexer=vt;function bt(){this.yy={}}return bt.prototype=it,it.Parser=bt,new bt}();parser$5.parser=parser$5;const infoParser=parser$5;var message="",info=!1;const setMessage=nt=>{log$1.debug("Setting message to: "+nt),message=nt},getMessage=()=>message,setInfo=nt=>{info=nt},getInfo=()=>info,infoDb={setMessage,getMessage,setInfo,getInfo,clear:clear$g},draw$7=(nt,rt,it)=>{try{log$1.debug(`Rendering info diagram
`+nt);const vt=getConfig$1().securityLevel;let bt;vt==="sandbox"&&(bt=select("#i"+rt));const Tt=select(vt==="sandbox"?bt.nodes()[0].contentDocument.body:"body").select("#"+rt);Tt.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+it),Tt.attr("height",100),Tt.attr("width",400)}catch(vt){log$1.error("Error while rendering info diagram"),log$1.error(vt.message)}},infoRenderer={draw:draw$7},infoDetector=nt=>nt.match(/^\s*info/)!==null;var parser$4=function(){var nt=function(wn,Cn,An,Pn){for(An=An||{},Pn=wn.length;Pn--;An[wn[Pn]]=Cn);return An},rt=[1,4],it=[1,5],vt=[1,6],bt=[1,7],wt=[1,9],Tt=[1,11,13,15,17,19,20,26,27,28,29],kt=[2,5],Lt=[1,6,11,13,15,17,19,20,26,27,28,29],Mt=[26,27,28],Nt=[2,8],zt=[1,18],Ht=[1,19],Wt=[1,20],Zt=[1,21],tn=[1,22],Yt=[1,23],nn=[1,28],rn=[6,26,27,28,29],ln={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(Cn,An,Pn,On,kn,gn,Vn){var pn=gn.length-1;switch(kn){case 4:On.setShowData(!0);break;case 7:this.$=gn[pn-1];break;case 9:On.addSection(gn[pn-1],On.cleanupValue(gn[pn]));break;case 10:this.$=gn[pn].trim(),On.setDiagramTitle(this.$);break;case 11:this.$=gn[pn].trim(),On.setAccTitle(this.$);break;case 12:case 13:this.$=gn[pn].trim(),On.setAccDescription(this.$);break;case 14:On.addSection(gn[pn].substr(8)),this.$=gn[pn].substr(8);break;case 21:On.parseDirective("%%{","open_directive");break;case 22:On.parseDirective(gn[pn],"type_directive");break;case 23:gn[pn]=gn[pn].trim().replace(/'/g,'"'),On.parseDirective(gn[pn],"arg_directive");break;case 24:On.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:rt,21:8,26:it,27:vt,28:bt,29:wt},{1:[3]},{3:10,4:2,5:3,6:rt,21:8,26:it,27:vt,28:bt,29:wt},{3:11,4:2,5:3,6:rt,21:8,26:it,27:vt,28:bt,29:wt},nt(Tt,kt,{7:12,8:[1,13]}),nt(Lt,[2,18]),nt(Lt,[2,19]),nt(Lt,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},nt(Mt,Nt,{21:8,9:16,10:17,5:24,1:[2,3],11:zt,13:Ht,15:Wt,17:Zt,19:tn,20:Yt,29:wt}),nt(Tt,kt,{7:25}),{23:26,24:[1,27],32:nn},nt([24,32],[2,22]),nt(Tt,[2,6]),{4:29,26:it,27:vt,28:bt},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},nt(Mt,[2,13]),nt(Mt,[2,14]),nt(Mt,[2,15]),nt(Mt,Nt,{21:8,9:16,10:17,5:24,1:[2,4],11:zt,13:Ht,15:Wt,17:Zt,19:tn,20:Yt,29:wt}),nt(rn,[2,16]),{25:34,31:[1,35]},nt(rn,[2,24]),nt(Tt,[2,7]),nt(Mt,[2,9]),nt(Mt,[2,10]),nt(Mt,[2,11]),nt(Mt,[2,12]),{23:36,32:nn},{32:[2,23]},nt(rn,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(Cn,An){if(An.recoverable)this.trace(Cn);else{var Pn=new Error(Cn);throw Pn.hash=An,Pn}},parse:function(Cn){var An=this,Pn=[0],On=[],kn=[null],gn=[],Vn=this.table,pn="",pr=0,yn=0,mr=2,Er=1,Mr=gn.slice.call(arguments,1),rr=Object.create(this.lexer),vr={yy:{}};for(var cr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,cr)&&(vr.yy[cr]=this.yy[cr]);rr.setInput(Cn,vr.yy),vr.yy.lexer=rr,vr.yy.parser=this,typeof rr.yylloc>"u"&&(rr.yylloc={});var gr=rr.yylloc;gn.push(gr);var Or=rr.options&&rr.options.ranges;typeof vr.yy.parseError=="function"?this.parseError=vr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ar(){var Nn;return Nn=On.pop()||rr.lex()||Er,typeof Nn!="number"&&(Nn instanceof Array&&(On=Nn,Nn=On.pop()),Nn=An.symbols_[Nn]||Nn),Nn}for(var sr,ii,ar,fr,wr={},ir,Ln,en,dn;;){if(ii=Pn[Pn.length-1],this.defaultActions[ii]?ar=this.defaultActions[ii]:((sr===null||typeof sr>"u")&&(sr=Ar()),ar=Vn[ii]&&Vn[ii][sr]),typeof ar>"u"||!ar.length||!ar[0]){var un="";dn=[];for(ir in Vn[ii])this.terminals_[ir]&&ir>mr&&dn.push("'"+this.terminals_[ir]+"'");rr.showPosition?un="Parse error on line "+(pr+1)+`:
`+rr.showPosition()+`
Expecting `+dn.join(", ")+", got '"+(this.terminals_[sr]||sr)+"'":un="Parse error on line "+(pr+1)+": Unexpected "+(sr==Er?"end of input":"'"+(this.terminals_[sr]||sr)+"'"),this.parseError(un,{text:rr.match,token:this.terminals_[sr]||sr,line:rr.yylineno,loc:gr,expected:dn})}if(ar[0]instanceof Array&&ar.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ii+", token: "+sr);switch(ar[0]){case 1:Pn.push(sr),kn.push(rr.yytext),gn.push(rr.yylloc),Pn.push(ar[1]),sr=null,yn=rr.yyleng,pn=rr.yytext,pr=rr.yylineno,gr=rr.yylloc;break;case 2:if(Ln=this.productions_[ar[1]][1],wr.$=kn[kn.length-Ln],wr._$={first_line:gn[gn.length-(Ln||1)].first_line,last_line:gn[gn.length-1].last_line,first_column:gn[gn.length-(Ln||1)].first_column,last_column:gn[gn.length-1].last_column},Or&&(wr._$.range=[gn[gn.length-(Ln||1)].range[0],gn[gn.length-1].range[1]]),fr=this.performAction.apply(wr,[pn,yn,pr,vr.yy,ar[1],kn,gn].concat(Mr)),typeof fr<"u")return fr;Ln&&(Pn=Pn.slice(0,-1*Ln*2),kn=kn.slice(0,-1*Ln),gn=gn.slice(0,-1*Ln)),Pn.push(this.productions_[ar[1]][0]),kn.push(wr.$),gn.push(wr._$),en=Vn[Pn[Pn.length-2]][Pn[Pn.length-1]],Pn.push(en);break;case 3:return!0}}return!0}},sn=function(){var wn={EOF:1,parseError:function(An,Pn){if(this.yy.parser)this.yy.parser.parseError(An,Pn);else throw new Error(An)},setInput:function(Cn,An){return this.yy=An||this.yy||{},this._input=Cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Cn=this._input[0];this.yytext+=Cn,this.yyleng++,this.offset++,this.match+=Cn,this.matched+=Cn;var An=Cn.match(/(?:\r\n?|\n).*/g);return An?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Cn},unput:function(Cn){var An=Cn.length,Pn=Cn.split(/(?:\r\n?|\n)/g);this._input=Cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-An),this.offset-=An;var On=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Pn.length-1&&(this.yylineno-=Pn.length-1);var kn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Pn?(Pn.length===On.length?this.yylloc.first_column:0)+On[On.length-Pn.length].length-Pn[0].length:this.yylloc.first_column-An},this.options.ranges&&(this.yylloc.range=[kn[0],kn[0]+this.yyleng-An]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Cn){this.unput(this.match.slice(Cn))},pastInput:function(){var Cn=this.matched.substr(0,this.matched.length-this.match.length);return(Cn.length>20?"...":"")+Cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Cn=this.match;return Cn.length<20&&(Cn+=this._input.substr(0,20-Cn.length)),(Cn.substr(0,20)+(Cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Cn=this.pastInput(),An=new Array(Cn.length+1).join("-");return Cn+this.upcomingInput()+`
`+An+"^"},test_match:function(Cn,An){var Pn,On,kn;if(this.options.backtrack_lexer&&(kn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(kn.yylloc.range=this.yylloc.range.slice(0))),On=Cn[0].match(/(?:\r\n?|\n).*/g),On&&(this.yylineno+=On.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:On?On[On.length-1].length-On[On.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Cn[0].length},this.yytext+=Cn[0],this.match+=Cn[0],this.matches=Cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Cn[0].length),this.matched+=Cn[0],Pn=this.performAction.call(this,this.yy,this,An,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Pn)return Pn;if(this._backtrack){for(var gn in kn)this[gn]=kn[gn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Cn,An,Pn,On;this._more||(this.yytext="",this.match="");for(var kn=this._currentRules(),gn=0;gn<kn.length;gn++)if(Pn=this._input.match(this.rules[kn[gn]]),Pn&&(!An||Pn[0].length>An[0].length)){if(An=Pn,On=gn,this.options.backtrack_lexer){if(Cn=this.test_match(Pn,kn[gn]),Cn!==!1)return Cn;if(this._backtrack){An=!1;continue}else return!1}else if(!this.options.flex)break}return An?(Cn=this.test_match(An,kn[On]),Cn!==!1?Cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var An=this.next();return An||this.lex()},begin:function(An){this.conditionStack.push(An)},popState:function(){var An=this.conditionStack.length-1;return An>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(An){return An=this.conditionStack.length-1-Math.abs(An||0),An>=0?this.conditionStack[An]:"INITIAL"},pushState:function(An){this.begin(An)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(An,Pn,On,kn){switch(On){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return wn}();ln.lexer=sn;function mn(){this.yy={}}return mn.prototype=ln,ln.Parser=mn,new mn}();parser$4.parser=parser$4;const pieParser=parser$4,pieDetector=nt=>nt.match(/^\s*pie/)!==null||nt.match(/^\s*bar/)!==null;let sections$1={},showData=!1;const parseDirective$5=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addSection$1=function(nt,rt){nt=common$1.sanitizeText(nt,getConfig$1()),sections$1[nt]===void 0&&(sections$1[nt]=rt,log$1.debug("Added new section :",nt))},getSections$1=()=>sections$1,setShowData=function(nt){showData=nt},getShowData=function(){return showData},cleanupValue=function(nt){return nt.substring(0,1)===":"&&(nt=nt.substring(1).trim()),Number(nt.trim())},clear$4=function(){sections$1={},showData=!1,clear$g()},pieDb={parseDirective:parseDirective$5,getConfig:()=>getConfig$1().pie,addSection:addSection$1,getSections:getSections$1,cleanupValue,clear:clear$4,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setShowData,getShowData,getAccDescription,setAccDescription};let conf$5=getConfig$1(),width;const height=450,draw$6=(nt,rt,it,vt)=>{try{conf$5=getConfig$1(),log$1.debug(`Rendering info diagram
`+nt);const rn=getConfig$1().securityLevel;let ln;rn==="sandbox"&&(ln=select("#i"+rt));const sn=select(rn==="sandbox"?ln.nodes()[0].contentDocument.body:"body"),mn=rn==="sandbox"?ln.nodes()[0].contentDocument:document;vt.db.clear(),vt.parser.parse(nt),log$1.debug("Parsed info diagram");const wn=mn.getElementById(rt);width=wn.parentElement.offsetWidth,width===void 0&&(width=1200),conf$5.useWidth!==void 0&&(width=conf$5.useWidth),conf$5.pie.useWidth!==void 0&&(width=conf$5.pie.useWidth);const Cn=sn.select("#"+rt);configureSvgSize(Cn,height,width,conf$5.pie.useMaxWidth),wn.setAttribute("viewBox","0 0 "+width+" "+height);var bt=40,wt=18,Tt=4,kt=Math.min(width,height)/2-bt,Lt=Cn.append("g").attr("transform","translate("+width/2+","+height/2+")"),Mt=vt.db.getSections(),Nt=0;Object.keys(Mt).forEach(function(Pn){Nt+=Mt[Pn]});const An=conf$5.themeVariables;var zt=[An.pie1,An.pie2,An.pie3,An.pie4,An.pie5,An.pie6,An.pie7,An.pie8,An.pie9,An.pie10,An.pie11,An.pie12],Ht=ordinal().range(zt),Wt=Object.entries(Mt).map(function(Pn,On){return{order:On,name:Pn[0],value:Pn[1]}}),Zt=pie().value(function(Pn){return Pn.value}).sort(function(Pn,On){return Pn.order-On.order}),tn=Zt(Wt),Yt=arc().innerRadius(0).outerRadius(kt);Lt.selectAll("mySlices").data(tn).enter().append("path").attr("d",Yt).attr("fill",function(Pn){return Ht(Pn.data.name)}).attr("class","pieCircle"),Lt.selectAll("mySlices").data(tn).enter().append("text").text(function(Pn){return(Pn.data.value/Nt*100).toFixed(0)+"%"}).attr("transform",function(Pn){return"translate("+Yt.centroid(Pn)+")"}).style("text-anchor","middle").attr("class","slice"),Lt.append("text").text(vt.db.getDiagramTitle()).attr("x",0).attr("y",-(height-50)/2).attr("class","pieTitleText");var nn=Lt.selectAll(".legend").data(Ht.domain()).enter().append("g").attr("class","legend").attr("transform",function(Pn,On){const kn=wt+Tt,gn=kn*Ht.domain().length/2,Vn=12*wt,pn=On*kn-gn;return"translate("+Vn+","+pn+")"});nn.append("rect").attr("width",wt).attr("height",wt).style("fill",Ht).style("stroke",Ht),nn.data(tn).append("text").attr("x",wt+Tt).attr("y",wt-Tt).text(function(Pn){return vt.db.getShowData()||conf$5.showData||conf$5.pie.showData?Pn.data.name+" ["+Pn.data.value+"]":Pn.data.name})}catch(rn){log$1.error("Error while rendering info diagram"),log$1.error(rn)}},pieRenderer={draw:draw$6};var parser$3=function(){var nt=function(ii,ar,fr,wr){for(fr=fr||{},wr=ii.length;wr--;fr[ii[wr]]=ar);return fr},rt=[1,3],it=[1,5],vt=[1,6],bt=[1,7],wt=[1,8],Tt=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],kt=[1,22],Lt=[2,13],Mt=[1,26],Nt=[1,27],zt=[1,28],Ht=[1,29],Wt=[1,30],Zt=[1,31],tn=[1,24],Yt=[1,32],nn=[1,33],rn=[1,36],ln=[71,72],sn=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],mn=[1,56],wn=[1,57],Cn=[1,58],An=[1,59],Pn=[1,60],On=[1,61],kn=[1,62],gn=[62,63],Vn=[1,74],pn=[1,70],pr=[1,71],yn=[1,72],mr=[1,73],Er=[1,75],Mr=[1,79],rr=[1,80],vr=[1,77],cr=[1,78],gr=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Or={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(ar,fr,wr,ir,Ln,en,dn){var un=en.length-1;switch(Ln){case 6:this.$=en[un].trim(),ir.setAccTitle(this.$);break;case 7:case 8:this.$=en[un].trim(),ir.setAccDescription(this.$);break;case 9:ir.parseDirective("%%{","open_directive");break;case 10:ir.parseDirective(en[un],"type_directive");break;case 11:en[un]=en[un].trim().replace(/'/g,'"'),ir.parseDirective(en[un],"arg_directive");break;case 12:ir.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:ir.addRequirement(en[un-3],en[un-4]);break;case 20:ir.setNewReqId(en[un-2]);break;case 21:ir.setNewReqText(en[un-2]);break;case 22:ir.setNewReqRisk(en[un-2]);break;case 23:ir.setNewReqVerifyMethod(en[un-2]);break;case 26:this.$=ir.RequirementType.REQUIREMENT;break;case 27:this.$=ir.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=ir.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=ir.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=ir.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=ir.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=ir.RiskLevel.LOW_RISK;break;case 33:this.$=ir.RiskLevel.MED_RISK;break;case 34:this.$=ir.RiskLevel.HIGH_RISK;break;case 35:this.$=ir.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=ir.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=ir.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=ir.VerifyType.VERIFY_TEST;break;case 39:ir.addElement(en[un-3]);break;case 40:ir.setNewElementType(en[un-2]);break;case 41:ir.setNewElementDocRef(en[un-2]);break;case 44:ir.addRelationship(en[un-2],en[un],en[un-4]);break;case 45:ir.addRelationship(en[un-2],en[un-4],en[un]);break;case 46:this.$=ir.Relationships.CONTAINS;break;case 47:this.$=ir.Relationships.COPIES;break;case 48:this.$=ir.Relationships.DERIVES;break;case 49:this.$=ir.Relationships.SATISFIES;break;case 50:this.$=ir.Relationships.VERIFIES;break;case 51:this.$=ir.Relationships.REFINES;break;case 52:this.$=ir.Relationships.TRACES;break}},table:[{3:1,4:2,6:rt,9:4,14:it,16:vt,18:bt,19:wt},{1:[3]},{3:10,4:2,5:[1,9],6:rt,9:4,14:it,16:vt,18:bt,19:wt},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},nt(Tt,[2,8]),{20:[2,9]},{3:16,4:2,6:rt,9:4,14:it,16:vt,18:bt,19:wt},{1:[2,2]},{4:21,5:kt,7:17,8:Lt,9:4,14:it,16:vt,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Mt,41:Nt,42:zt,43:Ht,44:Wt,45:Zt,53:tn,71:Yt,72:nn},{11:34,12:[1,35],22:rn},nt([12,22],[2,10]),nt(Tt,[2,6]),nt(Tt,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:kt,7:38,8:Lt,9:4,14:it,16:vt,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Mt,41:Nt,42:zt,43:Ht,44:Wt,45:Zt,53:tn,71:Yt,72:nn},{4:21,5:kt,7:39,8:Lt,9:4,14:it,16:vt,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Mt,41:Nt,42:zt,43:Ht,44:Wt,45:Zt,53:tn,71:Yt,72:nn},{4:21,5:kt,7:40,8:Lt,9:4,14:it,16:vt,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Mt,41:Nt,42:zt,43:Ht,44:Wt,45:Zt,53:tn,71:Yt,72:nn},{4:21,5:kt,7:41,8:Lt,9:4,14:it,16:vt,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Mt,41:Nt,42:zt,43:Ht,44:Wt,45:Zt,53:tn,71:Yt,72:nn},{4:21,5:kt,7:42,8:Lt,9:4,14:it,16:vt,18:bt,19:wt,23:18,24:19,25:20,26:23,32:25,40:Mt,41:Nt,42:zt,43:Ht,44:Wt,45:Zt,53:tn,71:Yt,72:nn},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},nt(ln,[2,26]),nt(ln,[2,27]),nt(ln,[2,28]),nt(ln,[2,29]),nt(ln,[2,30]),nt(ln,[2,31]),nt(sn,[2,55]),nt(sn,[2,56]),nt(Tt,[2,4]),{13:51,21:[1,52]},nt(Tt,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:mn,65:wn,66:Cn,67:An,68:Pn,69:On,70:kn},{61:63,64:mn,65:wn,66:Cn,67:An,68:Pn,69:On,70:kn},{11:64,22:rn},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},nt(gn,[2,46]),nt(gn,[2,47]),nt(gn,[2,48]),nt(gn,[2,49]),nt(gn,[2,50]),nt(gn,[2,51]),nt(gn,[2,52]),{63:[1,68]},nt(Tt,[2,5]),{5:Vn,29:69,30:pn,33:pr,35:yn,37:mr,39:Er},{5:Mr,39:rr,55:76,56:vr,58:cr},{32:81,71:Yt,72:nn},{32:82,71:Yt,72:nn},nt(gr,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:Vn,29:87,30:pn,33:pr,35:yn,37:mr,39:Er},nt(gr,[2,25]),nt(gr,[2,39]),{31:[1,88]},{31:[1,89]},{5:Mr,39:rr,55:90,56:vr,58:cr},nt(gr,[2,43]),nt(gr,[2,44]),nt(gr,[2,45]),{32:91,71:Yt,72:nn},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},nt(gr,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},nt(gr,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:Vn,29:116,30:pn,33:pr,35:yn,37:mr,39:Er},{5:Vn,29:117,30:pn,33:pr,35:yn,37:mr,39:Er},{5:Vn,29:118,30:pn,33:pr,35:yn,37:mr,39:Er},{5:Vn,29:119,30:pn,33:pr,35:yn,37:mr,39:Er},{5:Mr,39:rr,55:120,56:vr,58:cr},{5:Mr,39:rr,55:121,56:vr,58:cr},nt(gr,[2,20]),nt(gr,[2,21]),nt(gr,[2,22]),nt(gr,[2,23]),nt(gr,[2,40]),nt(gr,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(ar,fr){if(fr.recoverable)this.trace(ar);else{var wr=new Error(ar);throw wr.hash=fr,wr}},parse:function(ar){var fr=this,wr=[0],ir=[],Ln=[null],en=[],dn=this.table,un="",Nn=0,In=0,lr=2,$n=1,Qn=en.slice.call(arguments,1),Wn=Object.create(this.lexer),or={yy:{}};for(var dr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dr)&&(or.yy[dr]=this.yy[dr]);Wn.setInput(ar,or.yy),or.yy.lexer=Wn,or.yy.parser=this,typeof Wn.yylloc>"u"&&(Wn.yylloc={});var kr=Wn.yylloc;en.push(kr);var br=Wn.options&&Wn.options.ranges;typeof or.yy.parseError=="function"?this.parseError=or.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function _r(){var jn;return jn=ir.pop()||Wn.lex()||$n,typeof jn!="number"&&(jn instanceof Array&&(ir=jn,jn=ir.pop()),jn=fr.symbols_[jn]||jn),jn}for(var hi,di,vi,Ai,ki={},Bi,Ti,Rr,Tn;;){if(di=wr[wr.length-1],this.defaultActions[di]?vi=this.defaultActions[di]:((hi===null||typeof hi>"u")&&(hi=_r()),vi=dn[di]&&dn[di][hi]),typeof vi>"u"||!vi.length||!vi[0]){var Sn="";Tn=[];for(Bi in dn[di])this.terminals_[Bi]&&Bi>lr&&Tn.push("'"+this.terminals_[Bi]+"'");Wn.showPosition?Sn="Parse error on line "+(Nn+1)+`:
`+Wn.showPosition()+`
Expecting `+Tn.join(", ")+", got '"+(this.terminals_[hi]||hi)+"'":Sn="Parse error on line "+(Nn+1)+": Unexpected "+(hi==$n?"end of input":"'"+(this.terminals_[hi]||hi)+"'"),this.parseError(Sn,{text:Wn.match,token:this.terminals_[hi]||hi,line:Wn.yylineno,loc:kr,expected:Tn})}if(vi[0]instanceof Array&&vi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+di+", token: "+hi);switch(vi[0]){case 1:wr.push(hi),Ln.push(Wn.yytext),en.push(Wn.yylloc),wr.push(vi[1]),hi=null,In=Wn.yyleng,un=Wn.yytext,Nn=Wn.yylineno,kr=Wn.yylloc;break;case 2:if(Ti=this.productions_[vi[1]][1],ki.$=Ln[Ln.length-Ti],ki._$={first_line:en[en.length-(Ti||1)].first_line,last_line:en[en.length-1].last_line,first_column:en[en.length-(Ti||1)].first_column,last_column:en[en.length-1].last_column},br&&(ki._$.range=[en[en.length-(Ti||1)].range[0],en[en.length-1].range[1]]),Ai=this.performAction.apply(ki,[un,In,Nn,or.yy,vi[1],Ln,en].concat(Qn)),typeof Ai<"u")return Ai;Ti&&(wr=wr.slice(0,-1*Ti*2),Ln=Ln.slice(0,-1*Ti),en=en.slice(0,-1*Ti)),wr.push(this.productions_[vi[1]][0]),Ln.push(ki.$),en.push(ki._$),Rr=dn[wr[wr.length-2]][wr[wr.length-1]],wr.push(Rr);break;case 3:return!0}}return!0}},Ar=function(){var ii={EOF:1,parseError:function(fr,wr){if(this.yy.parser)this.yy.parser.parseError(fr,wr);else throw new Error(fr)},setInput:function(ar,fr){return this.yy=fr||this.yy||{},this._input=ar,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ar=this._input[0];this.yytext+=ar,this.yyleng++,this.offset++,this.match+=ar,this.matched+=ar;var fr=ar.match(/(?:\r\n?|\n).*/g);return fr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ar},unput:function(ar){var fr=ar.length,wr=ar.split(/(?:\r\n?|\n)/g);this._input=ar+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-fr),this.offset-=fr;var ir=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),wr.length-1&&(this.yylineno-=wr.length-1);var Ln=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:wr?(wr.length===ir.length?this.yylloc.first_column:0)+ir[ir.length-wr.length].length-wr[0].length:this.yylloc.first_column-fr},this.options.ranges&&(this.yylloc.range=[Ln[0],Ln[0]+this.yyleng-fr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ar){this.unput(this.match.slice(ar))},pastInput:function(){var ar=this.matched.substr(0,this.matched.length-this.match.length);return(ar.length>20?"...":"")+ar.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ar=this.match;return ar.length<20&&(ar+=this._input.substr(0,20-ar.length)),(ar.substr(0,20)+(ar.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ar=this.pastInput(),fr=new Array(ar.length+1).join("-");return ar+this.upcomingInput()+`
`+fr+"^"},test_match:function(ar,fr){var wr,ir,Ln;if(this.options.backtrack_lexer&&(Ln={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ln.yylloc.range=this.yylloc.range.slice(0))),ir=ar[0].match(/(?:\r\n?|\n).*/g),ir&&(this.yylineno+=ir.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ir?ir[ir.length-1].length-ir[ir.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ar[0].length},this.yytext+=ar[0],this.match+=ar[0],this.matches=ar,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ar[0].length),this.matched+=ar[0],wr=this.performAction.call(this,this.yy,this,fr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),wr)return wr;if(this._backtrack){for(var en in Ln)this[en]=Ln[en];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ar,fr,wr,ir;this._more||(this.yytext="",this.match="");for(var Ln=this._currentRules(),en=0;en<Ln.length;en++)if(wr=this._input.match(this.rules[Ln[en]]),wr&&(!fr||wr[0].length>fr[0].length)){if(fr=wr,ir=en,this.options.backtrack_lexer){if(ar=this.test_match(wr,Ln[en]),ar!==!1)return ar;if(this._backtrack){fr=!1;continue}else return!1}else if(!this.options.flex)break}return fr?(ar=this.test_match(fr,Ln[ir]),ar!==!1?ar:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var fr=this.next();return fr||this.lex()},begin:function(fr){this.conditionStack.push(fr)},popState:function(){var fr=this.conditionStack.length-1;return fr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(fr){return fr=this.conditionStack.length-1-Math.abs(fr||0),fr>=0?this.conditionStack[fr]:"INITIAL"},pushState:function(fr){this.begin(fr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(fr,wr,ir,Ln){switch(ir){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return wr.yytext=wr.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return ii}();Or.lexer=Ar;function sr(){this.yy={}}return sr.prototype=Or,Or.Parser=sr,new sr}();parser$3.parser=parser$3;const requirementParser=parser$3,requirementDetector=nt=>nt.match(/^\s*requirement(Diagram)?/)!==null;let relations=[],latestRequirement={},requirements={},latestElement={},elements={};const RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective$4=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRequirement=(nt,rt)=>(requirements[nt]===void 0&&(requirements[nt]={name:nt,type:rt,id:latestRequirement.id,text:latestRequirement.text,risk:latestRequirement.risk,verifyMethod:latestRequirement.verifyMethod}),latestRequirement={},requirements[nt]),getRequirements=()=>requirements,setNewReqId=nt=>{latestRequirement!==void 0&&(latestRequirement.id=nt)},setNewReqText=nt=>{latestRequirement!==void 0&&(latestRequirement.text=nt)},setNewReqRisk=nt=>{latestRequirement!==void 0&&(latestRequirement.risk=nt)},setNewReqVerifyMethod=nt=>{latestRequirement!==void 0&&(latestRequirement.verifyMethod=nt)},addElement=nt=>(elements[nt]===void 0&&(elements[nt]={name:nt,type:latestElement.type,docRef:latestElement.docRef},log$1.info("Added new requirement: ",nt)),latestElement={},elements[nt]),getElements=()=>elements,setNewElementType=nt=>{latestElement!==void 0&&(latestElement.type=nt)},setNewElementDocRef=nt=>{latestElement!==void 0&&(latestElement.docRef=nt)},addRelationship=(nt,rt,it)=>{relations.push({type:nt,src:rt,dst:it})},getRelationships=()=>relations,clear$3=()=>{relations=[],latestRequirement={},requirements={},latestElement={},elements={},clear$g()},requirementDb={RequirementType,RiskLevel,VerifyType,Relationships,parseDirective:parseDirective$4,getConfig:()=>getConfig$1().req,addRequirement,getRequirements,setNewReqId,setNewReqText,setNewReqRisk,setNewReqVerifyMethod,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addElement,getElements,setNewElementType,setNewElementDocRef,addRelationship,getRelationships,clear:clear$3},ReqMarkers={CONTAINS:"contains",ARROW:"arrow"},insertLineEndings=(nt,rt)=>{let it=nt.append("defs").append("marker").attr("id",ReqMarkers.CONTAINS+"_line_ending").attr("refX",0).attr("refY",rt.line_height/2).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("g");it.append("circle").attr("cx",rt.line_height/2).attr("cy",rt.line_height/2).attr("r",rt.line_height/2).attr("fill","none"),it.append("line").attr("x1",0).attr("x2",rt.line_height).attr("y1",rt.line_height/2).attr("y2",rt.line_height/2).attr("stroke-width",1),it.append("line").attr("y1",0).attr("y2",rt.line_height).attr("x1",rt.line_height/2).attr("x2",rt.line_height/2).attr("stroke-width",1),nt.append("defs").append("marker").attr("id",ReqMarkers.ARROW+"_line_ending").attr("refX",rt.line_height).attr("refY",.5*rt.line_height).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${rt.line_height},${rt.line_height/2}
      M${rt.line_height},${rt.line_height/2}
      L0,${rt.line_height}`).attr("stroke-width",1)},markers={ReqMarkers,insertLineEndings};let conf$4={},relCnt=0;const newRectNode=(nt,rt)=>nt.insert("rect","#"+rt).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",conf$4.rect_min_width+"px").attr("height",conf$4.rect_min_height+"px"),newTitleNode=(nt,rt,it)=>{let vt=conf$4.rect_min_width/2,bt=nt.append("text").attr("class","req reqLabel reqTitle").attr("id",rt).attr("x",vt).attr("y",conf$4.rect_padding).attr("dominant-baseline","hanging"),wt=0;it.forEach(Mt=>{wt==0?bt.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",0).text(Mt):bt.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",conf$4.line_height*.75).text(Mt),wt++});let Tt=1.5*conf$4.rect_padding,kt=wt*conf$4.line_height*.75,Lt=Tt+kt;return nt.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",conf$4.rect_min_width).attr("y1",Lt).attr("y2",Lt),{titleNode:bt,y:Lt}},newBodyNode=(nt,rt,it,vt)=>{let bt=nt.append("text").attr("class","req reqLabel").attr("id",rt).attr("x",conf$4.rect_padding).attr("y",vt).attr("dominant-baseline","hanging"),wt=0;const Tt=30;let kt=[];return it.forEach(Lt=>{let Mt=Lt.length;for(;Mt>Tt&&wt<3;){let Nt=Lt.substring(0,Tt);Lt=Lt.substring(Tt,Lt.length),Mt=Lt.length,kt[kt.length]=Nt,wt++}if(wt==3){let Nt=kt[kt.length-1];kt[kt.length-1]=Nt.substring(0,Nt.length-4)+"..."}else kt[kt.length]=Lt;wt=0}),kt.forEach(Lt=>{bt.append("tspan").attr("x",conf$4.rect_padding).attr("dy",conf$4.line_height).text(Lt)}),bt},addEdgeLabel=(nt,rt,it,vt)=>{const bt=rt.node().getTotalLength(),wt=rt.node().getPointAtLength(bt*.5),Tt="rel"+relCnt;relCnt++;const Lt=nt.append("text").attr("class","req relationshipLabel").attr("id",Tt).attr("x",wt.x).attr("y",wt.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(vt).node().getBBox();nt.insert("rect","#"+Tt).attr("class","req reqLabelBox").attr("x",wt.x-Lt.width/2).attr("y",wt.y-Lt.height/2).attr("width",Lt.width).attr("height",Lt.height).attr("fill","white").attr("fill-opacity","85%")},drawRelationshipFromLayout=function(nt,rt,it,vt,bt){const wt=it.edge(elementString(rt.src),elementString(rt.dst)),Tt=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}),kt=nt.insert("path","#"+vt).attr("class","er relationshipLine").attr("d",Tt(wt.points)).attr("fill","none");rt.type==bt.db.Relationships.CONTAINS?kt.attr("marker-start","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+rt.type+"_line_ending)"):(kt.attr("stroke-dasharray","10,7"),kt.attr("marker-end","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+markers.ReqMarkers.ARROW+"_line_ending)")),addEdgeLabel(nt,kt,conf$4,`<<${rt.type}>>`)},drawReqs=(nt,rt,it)=>{Object.keys(nt).forEach(vt=>{let bt=nt[vt];vt=elementString(vt),log$1.info("Added new requirement: ",vt);const wt=it.append("g").attr("id",vt),Tt="req-"+vt,kt=newRectNode(wt,Tt);let Lt=newTitleNode(wt,vt+"_title",[`<<${bt.type}>>`,`${bt.name}`]);newBodyNode(wt,vt+"_body",[`Id: ${bt.id}`,`Text: ${bt.text}`,`Risk: ${bt.risk}`,`Verification: ${bt.verifyMethod}`],Lt.y);const Mt=kt.node().getBBox();rt.setNode(vt,{width:Mt.width,height:Mt.height,shape:"rect",id:vt})})},drawElements=(nt,rt,it)=>{Object.keys(nt).forEach(vt=>{let bt=nt[vt];const wt=elementString(vt),Tt=it.append("g").attr("id",wt),kt="element-"+wt,Lt=newRectNode(Tt,kt);let Mt=newTitleNode(Tt,kt+"_title",["<<Element>>",`${vt}`]);newBodyNode(Tt,kt+"_body",[`Type: ${bt.type||"Not Specified"}`,`Doc Ref: ${bt.docRef||"None"}`],Mt.y);const Nt=Lt.node().getBBox();rt.setNode(wt,{width:Nt.width,height:Nt.height,shape:"rect",id:wt})})},addRelationships=(nt,rt)=>(nt.forEach(function(it){let vt=elementString(it.src),bt=elementString(it.dst);rt.setEdge(vt,bt,{relationship:it})}),nt),adjustEntities=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&(nt.select("#"+it),nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )"))})},elementString=nt=>nt.replace(/\s/g,"").replace(/\./g,"_"),draw$5=(nt,rt,it,vt)=>{conf$4=getConfig$1().requirement,vt.db.clear(),vt.parser.parse(nt);const bt=conf$4.securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const kt=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);markers.insertLineEndings(kt,conf$4);const Lt=new Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:conf$4.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let Mt=vt.db.getRequirements(),Nt=vt.db.getElements(),zt=vt.db.getRelationships();drawReqs(Mt,Lt,kt),drawElements(Nt,Lt,kt),addRelationships(zt,Lt),layout(Lt),adjustEntities(kt,Lt),zt.forEach(function(Yt){drawRelationshipFromLayout(kt,Yt,Lt,rt,vt)});const Ht=conf$4.rect_padding,Wt=kt.node().getBBox(),Zt=Wt.width+Ht*2,tn=Wt.height+Ht*2;configureSvgSize(kt,tn,Zt,conf$4.useMaxWidth),kt.attr("viewBox",`${Wt.x-Ht} ${Wt.y-Ht} ${Zt} ${tn}`)},requirementRenderer={draw:draw$5};var parser$2=function(){var nt=function(ii,ar,fr,wr){for(fr=fr||{},wr=ii.length;wr--;fr[ii[wr]]=ar);return fr},rt=[1,2],it=[1,3],vt=[1,5],bt=[1,7],wt=[2,5],Tt=[1,15],kt=[1,17],Lt=[1,18],Mt=[1,19],Nt=[1,21],zt=[1,22],Ht=[1,23],Wt=[1,29],Zt=[1,30],tn=[1,31],Yt=[1,32],nn=[1,33],rn=[1,34],ln=[1,35],sn=[1,36],mn=[1,37],wn=[1,38],Cn=[1,39],An=[1,40],Pn=[1,43],On=[1,44],kn=[1,45],gn=[1,46],Vn=[1,47],pn=[1,48],pr=[1,51],yn=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],mr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],Er=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],Mr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],rr=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],vr=[67,68,69],cr=[1,121],gr=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Or={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(ar,fr,wr,ir,Ln,en,dn){var un=en.length-1;switch(Ln){case 4:return ir.apply(en[un]),en[un];case 5:this.$=[];break;case 6:en[un-1].push(en[un]),this.$=en[un-1];break;case 7:case 8:this.$=en[un];break;case 9:this.$=[];break;case 12:en[un-3].type="addParticipant",en[un-3].description=ir.parseMessage(en[un-1]),this.$=en[un-3];break;case 13:en[un-1].type="addParticipant",this.$=en[un-1];break;case 14:en[un-3].type="addActor",en[un-3].description=ir.parseMessage(en[un-1]),this.$=en[un-3];break;case 15:en[un-1].type="addActor",this.$=en[un-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(en[un-2]),sequenceIndexStep:Number(en[un-1]),sequenceVisible:!0,signalType:ir.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(en[un-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:ir.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:ir.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:ir.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:ir.LINETYPE.ACTIVE_START,actor:en[un-1]};break;case 22:this.$={type:"activeEnd",signalType:ir.LINETYPE.ACTIVE_END,actor:en[un-1]};break;case 28:ir.setDiagramTitle(en[un].substring(6)),this.$=en[un].substring(6);break;case 29:ir.setDiagramTitle(en[un].substring(7)),this.$=en[un].substring(7);break;case 30:this.$=en[un].trim(),ir.setAccTitle(this.$);break;case 31:case 32:this.$=en[un].trim(),ir.setAccDescription(this.$);break;case 33:en[un-1].unshift({type:"loopStart",loopText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.LOOP_START}),en[un-1].push({type:"loopEnd",loopText:en[un-2],signalType:ir.LINETYPE.LOOP_END}),this.$=en[un-1];break;case 34:en[un-1].unshift({type:"rectStart",color:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.RECT_START}),en[un-1].push({type:"rectEnd",color:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.RECT_END}),this.$=en[un-1];break;case 35:en[un-1].unshift({type:"optStart",optText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.OPT_START}),en[un-1].push({type:"optEnd",optText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.OPT_END}),this.$=en[un-1];break;case 36:en[un-1].unshift({type:"altStart",altText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.ALT_START}),en[un-1].push({type:"altEnd",signalType:ir.LINETYPE.ALT_END}),this.$=en[un-1];break;case 37:en[un-1].unshift({type:"parStart",parText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.PAR_START}),en[un-1].push({type:"parEnd",signalType:ir.LINETYPE.PAR_END}),this.$=en[un-1];break;case 38:en[un-1].unshift({type:"criticalStart",criticalText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.CRITICAL_START}),en[un-1].push({type:"criticalEnd",signalType:ir.LINETYPE.CRITICAL_END}),this.$=en[un-1];break;case 39:en[un-1].unshift({type:"breakStart",breakText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.BREAK_START}),en[un-1].push({type:"breakEnd",optText:ir.parseMessage(en[un-2]),signalType:ir.LINETYPE.BREAK_END}),this.$=en[un-1];break;case 42:this.$=en[un-3].concat([{type:"option",optionText:ir.parseMessage(en[un-1]),signalType:ir.LINETYPE.CRITICAL_OPTION},en[un]]);break;case 44:this.$=en[un-3].concat([{type:"and",parText:ir.parseMessage(en[un-1]),signalType:ir.LINETYPE.PAR_AND},en[un]]);break;case 46:this.$=en[un-3].concat([{type:"else",altText:ir.parseMessage(en[un-1]),signalType:ir.LINETYPE.ALT_ELSE},en[un]]);break;case 47:this.$=[en[un-1],{type:"addNote",placement:en[un-2],actor:en[un-1].actor,text:en[un]}];break;case 48:en[un-2]=[].concat(en[un-1],en[un-1]).slice(0,2),en[un-2][0]=en[un-2][0].actor,en[un-2][1]=en[un-2][1].actor,this.$=[en[un-1],{type:"addNote",placement:ir.PLACEMENT.OVER,actor:en[un-2].slice(0,2),text:en[un]}];break;case 49:this.$=[en[un-1],{type:"addLinks",actor:en[un-1].actor,text:en[un]}];break;case 50:this.$=[en[un-1],{type:"addALink",actor:en[un-1].actor,text:en[un]}];break;case 51:this.$=[en[un-1],{type:"addProperties",actor:en[un-1].actor,text:en[un]}];break;case 52:this.$=[en[un-1],{type:"addDetails",actor:en[un-1].actor,text:en[un]}];break;case 55:this.$=[en[un-2],en[un]];break;case 56:this.$=en[un];break;case 57:this.$=ir.PLACEMENT.LEFTOF;break;case 58:this.$=ir.PLACEMENT.RIGHTOF;break;case 59:this.$=[en[un-4],en[un-1],{type:"addMessage",from:en[un-4].actor,to:en[un-1].actor,signalType:en[un-3],msg:en[un]},{type:"activeStart",signalType:ir.LINETYPE.ACTIVE_START,actor:en[un-1]}];break;case 60:this.$=[en[un-4],en[un-1],{type:"addMessage",from:en[un-4].actor,to:en[un-1].actor,signalType:en[un-3],msg:en[un]},{type:"activeEnd",signalType:ir.LINETYPE.ACTIVE_END,actor:en[un-4]}];break;case 61:this.$=[en[un-3],en[un-1],{type:"addMessage",from:en[un-3].actor,to:en[un-1].actor,signalType:en[un-2],msg:en[un]}];break;case 62:this.$={type:"addParticipant",actor:en[un]};break;case 63:this.$=ir.LINETYPE.SOLID_OPEN;break;case 64:this.$=ir.LINETYPE.DOTTED_OPEN;break;case 65:this.$=ir.LINETYPE.SOLID;break;case 66:this.$=ir.LINETYPE.DOTTED;break;case 67:this.$=ir.LINETYPE.SOLID_CROSS;break;case 68:this.$=ir.LINETYPE.DOTTED_CROSS;break;case 69:this.$=ir.LINETYPE.SOLID_POINT;break;case 70:this.$=ir.LINETYPE.DOTTED_POINT;break;case 71:this.$=ir.parseMessage(en[un].trim().substring(1));break;case 72:ir.parseDirective("%%{","open_directive");break;case 73:ir.parseDirective(en[un],"type_directive");break;case 74:en[un]=en[un].trim().replace(/'/g,'"'),ir.parseDirective(en[un],"arg_directive");break;case 75:ir.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:rt,5:it,6:4,7:vt,11:6,79:bt},{1:[3]},{3:8,4:rt,5:it,6:4,7:vt,11:6,79:bt},{3:9,4:rt,5:it,6:4,7:vt,11:6,79:bt},{3:10,4:rt,5:it,6:4,7:vt,11:6,79:bt},nt([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],wt,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{13:49,14:[1,50],82:pr},nt([14,82],[2,73]),nt(yn,[2,6]),{6:41,10:52,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},nt(yn,[2,8]),nt(yn,[2,9]),{17:53,69:pn},{17:54,69:pn},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:pn},{17:60,69:pn},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},nt(yn,[2,28]),nt(yn,[2,29]),{35:[1,66]},{37:[1,67]},nt(yn,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},nt(yn,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:pn},{17:89,69:pn},{17:90,69:pn},{17:91,69:pn},nt([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},nt(yn,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},nt(yn,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},nt(yn,[2,20]),{5:[1,102]},{5:[1,103]},nt(yn,[2,23]),nt(yn,[2,24]),nt(yn,[2,25]),nt(yn,[2,26]),nt(yn,[2,27]),nt(yn,[2,30]),nt(yn,[2,31]),nt(mr,wt,{8:104}),nt(mr,wt,{8:105}),nt(mr,wt,{8:106}),nt(Er,wt,{44:107,8:108}),nt(Mr,wt,{46:109,8:110}),nt(rr,wt,{48:111,8:112}),nt(mr,wt,{8:113}),{17:116,67:[1,114],68:[1,115],69:pn},nt(vr,[2,63]),nt(vr,[2,64]),nt(vr,[2,65]),nt(vr,[2,66]),nt(vr,[2,67]),nt(vr,[2,68]),nt(vr,[2,69]),nt(vr,[2,70]),{17:117,69:pn},{17:119,57:118,69:pn},{69:[2,57]},{69:[2,58]},{55:120,78:cr},{55:122,78:cr},{55:123,78:cr},{55:124,78:cr},nt(gr,[2,10]),{13:125,82:pr},{82:[2,74]},{19:[1,126]},nt(yn,[2,13]),{19:[1,127]},nt(yn,[2,15]),{5:[1,128]},nt(yn,[2,18]),nt(yn,[2,19]),nt(yn,[2,21]),nt(yn,[2,22]),{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[1,129],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[1,130],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[1,131],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{40:[1,132]},{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[2,45],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,52:[1,133],53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{40:[1,134]},{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[2,43],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,51:[1,135],53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{40:[1,136]},{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[2,41],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,50:[1,137],53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{4:Tt,5:kt,6:41,9:14,10:16,11:6,16:Lt,17:42,20:Mt,21:20,22:Nt,25:zt,26:Ht,27:24,28:25,29:26,30:27,31:28,32:Wt,33:Zt,34:tn,36:Yt,38:nn,39:rn,40:[1,138],41:ln,42:sn,43:mn,45:wn,47:Cn,49:An,53:Pn,58:On,59:kn,60:gn,61:Vn,69:pn,79:bt},{17:139,69:pn},{17:140,69:pn},{55:141,78:cr},{55:142,78:cr},{55:143,78:cr},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},nt(yn,[2,17]),nt(yn,[2,33]),nt(yn,[2,34]),nt(yn,[2,35]),nt(yn,[2,36]),{19:[1,148]},nt(yn,[2,37]),{19:[1,149]},nt(yn,[2,38]),{19:[1,150]},nt(yn,[2,39]),{55:151,78:cr},{55:152,78:cr},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:pn},nt(gr,[2,11]),nt(yn,[2,12]),nt(yn,[2,14]),nt(Er,wt,{8:108,44:154}),nt(Mr,wt,{8:110,46:155}),nt(rr,wt,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(ar,fr){if(fr.recoverable)this.trace(ar);else{var wr=new Error(ar);throw wr.hash=fr,wr}},parse:function(ar){var fr=this,wr=[0],ir=[],Ln=[null],en=[],dn=this.table,un="",Nn=0,In=0,lr=2,$n=1,Qn=en.slice.call(arguments,1),Wn=Object.create(this.lexer),or={yy:{}};for(var dr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dr)&&(or.yy[dr]=this.yy[dr]);Wn.setInput(ar,or.yy),or.yy.lexer=Wn,or.yy.parser=this,typeof Wn.yylloc>"u"&&(Wn.yylloc={});var kr=Wn.yylloc;en.push(kr);var br=Wn.options&&Wn.options.ranges;typeof or.yy.parseError=="function"?this.parseError=or.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function _r(){var jn;return jn=ir.pop()||Wn.lex()||$n,typeof jn!="number"&&(jn instanceof Array&&(ir=jn,jn=ir.pop()),jn=fr.symbols_[jn]||jn),jn}for(var hi,di,vi,Ai,ki={},Bi,Ti,Rr,Tn;;){if(di=wr[wr.length-1],this.defaultActions[di]?vi=this.defaultActions[di]:((hi===null||typeof hi>"u")&&(hi=_r()),vi=dn[di]&&dn[di][hi]),typeof vi>"u"||!vi.length||!vi[0]){var Sn="";Tn=[];for(Bi in dn[di])this.terminals_[Bi]&&Bi>lr&&Tn.push("'"+this.terminals_[Bi]+"'");Wn.showPosition?Sn="Parse error on line "+(Nn+1)+`:
`+Wn.showPosition()+`
Expecting `+Tn.join(", ")+", got '"+(this.terminals_[hi]||hi)+"'":Sn="Parse error on line "+(Nn+1)+": Unexpected "+(hi==$n?"end of input":"'"+(this.terminals_[hi]||hi)+"'"),this.parseError(Sn,{text:Wn.match,token:this.terminals_[hi]||hi,line:Wn.yylineno,loc:kr,expected:Tn})}if(vi[0]instanceof Array&&vi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+di+", token: "+hi);switch(vi[0]){case 1:wr.push(hi),Ln.push(Wn.yytext),en.push(Wn.yylloc),wr.push(vi[1]),hi=null,In=Wn.yyleng,un=Wn.yytext,Nn=Wn.yylineno,kr=Wn.yylloc;break;case 2:if(Ti=this.productions_[vi[1]][1],ki.$=Ln[Ln.length-Ti],ki._$={first_line:en[en.length-(Ti||1)].first_line,last_line:en[en.length-1].last_line,first_column:en[en.length-(Ti||1)].first_column,last_column:en[en.length-1].last_column},br&&(ki._$.range=[en[en.length-(Ti||1)].range[0],en[en.length-1].range[1]]),Ai=this.performAction.apply(ki,[un,In,Nn,or.yy,vi[1],Ln,en].concat(Qn)),typeof Ai<"u")return Ai;Ti&&(wr=wr.slice(0,-1*Ti*2),Ln=Ln.slice(0,-1*Ti),en=en.slice(0,-1*Ti)),wr.push(this.productions_[vi[1]][0]),Ln.push(ki.$),en.push(ki._$),Rr=dn[wr[wr.length-2]][wr[wr.length-1]],wr.push(Rr);break;case 3:return!0}}return!0}},Ar=function(){var ii={EOF:1,parseError:function(fr,wr){if(this.yy.parser)this.yy.parser.parseError(fr,wr);else throw new Error(fr)},setInput:function(ar,fr){return this.yy=fr||this.yy||{},this._input=ar,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ar=this._input[0];this.yytext+=ar,this.yyleng++,this.offset++,this.match+=ar,this.matched+=ar;var fr=ar.match(/(?:\r\n?|\n).*/g);return fr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ar},unput:function(ar){var fr=ar.length,wr=ar.split(/(?:\r\n?|\n)/g);this._input=ar+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-fr),this.offset-=fr;var ir=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),wr.length-1&&(this.yylineno-=wr.length-1);var Ln=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:wr?(wr.length===ir.length?this.yylloc.first_column:0)+ir[ir.length-wr.length].length-wr[0].length:this.yylloc.first_column-fr},this.options.ranges&&(this.yylloc.range=[Ln[0],Ln[0]+this.yyleng-fr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ar){this.unput(this.match.slice(ar))},pastInput:function(){var ar=this.matched.substr(0,this.matched.length-this.match.length);return(ar.length>20?"...":"")+ar.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ar=this.match;return ar.length<20&&(ar+=this._input.substr(0,20-ar.length)),(ar.substr(0,20)+(ar.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ar=this.pastInput(),fr=new Array(ar.length+1).join("-");return ar+this.upcomingInput()+`
`+fr+"^"},test_match:function(ar,fr){var wr,ir,Ln;if(this.options.backtrack_lexer&&(Ln={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ln.yylloc.range=this.yylloc.range.slice(0))),ir=ar[0].match(/(?:\r\n?|\n).*/g),ir&&(this.yylineno+=ir.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ir?ir[ir.length-1].length-ir[ir.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ar[0].length},this.yytext+=ar[0],this.match+=ar[0],this.matches=ar,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ar[0].length),this.matched+=ar[0],wr=this.performAction.call(this,this.yy,this,fr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),wr)return wr;if(this._backtrack){for(var en in Ln)this[en]=Ln[en];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ar,fr,wr,ir;this._more||(this.yytext="",this.match="");for(var Ln=this._currentRules(),en=0;en<Ln.length;en++)if(wr=this._input.match(this.rules[Ln[en]]),wr&&(!fr||wr[0].length>fr[0].length)){if(fr=wr,ir=en,this.options.backtrack_lexer){if(ar=this.test_match(wr,Ln[en]),ar!==!1)return ar;if(this._backtrack){fr=!1;continue}else return!1}else if(!this.options.flex)break}return fr?(ar=this.test_match(fr,Ln[ir]),ar!==!1?ar:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var fr=this.next();return fr||this.lex()},begin:function(fr){this.conditionStack.push(fr)},popState:function(){var fr=this.conditionStack.length-1;return fr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(fr){return fr=this.conditionStack.length-1-Math.abs(fr||0),fr>=0?this.conditionStack[fr]:"INITIAL"},pushState:function(fr){this.begin(fr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(fr,wr,ir,Ln){switch(ir){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return wr.yytext=wr.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return wr.yytext=wr.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return ii}();Or.lexer=Ar;function sr(){this.yy={}}return sr.prototype=Or,Or.Parser=sr,new sr}();parser$2.parser=parser$2;const sequenceParser=parser$2,sequenceDetector=nt=>nt.match(/^\s*sequenceDiagram/)!==null;let prevActor,actors$1={},messages=[],sequenceNumbersEnabled=!1,wrapEnabled;const parseDirective$3=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addActor=function(nt,rt,it,vt){const bt=actors$1[nt];bt&&rt===bt.name&&it==null||((it==null||it.text==null)&&(it={text:rt,wrap:null,type:vt}),(vt==null||it.text==null)&&(it={text:rt,wrap:null,type:vt}),actors$1[nt]={name:rt,description:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:vt||"participant"},prevActor&&actors$1[prevActor]&&(actors$1[prevActor].nextActor=nt),prevActor=nt)},activationCount=nt=>{let rt,it=0;for(rt=0;rt<messages.length;rt++)messages[rt].type===LINETYPE.ACTIVE_START&&messages[rt].from.actor===nt&&it++,messages[rt].type===LINETYPE.ACTIVE_END&&messages[rt].from.actor===nt&&it--;return it},addMessage=function(nt,rt,it,vt){messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,answer:vt})},addSignal=function(nt,rt,it={text:void 0,wrap:void 0},vt){if(vt===LINETYPE.ACTIVE_END&&activationCount(nt.actor)<1){let wt=new Error("Trying to inactivate an inactive participant ("+nt.actor+")");throw wt.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},wt}return messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:vt}),!0},getMessages=function(){return messages},getActors$1=function(){return actors$1},getActor=function(nt){return actors$1[nt]},getActorKeys=function(){return Object.keys(actors$1)},enableSequenceNumbers=function(){sequenceNumbersEnabled=!0},disableSequenceNumbers=function(){sequenceNumbersEnabled=!1},showSequenceNumbers=()=>sequenceNumbersEnabled,setWrap=function(nt){wrapEnabled=nt},autoWrap=()=>wrapEnabled!==void 0?wrapEnabled:getConfig$1().sequence.wrap,clear$2=function(){actors$1={},messages=[],sequenceNumbersEnabled=!1,clear$g()},parseMessage=function(nt){const rt=nt.trim(),it={text:rt.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:rt.match(/^:?wrap:/)!==null?!0:rt.match(/^:?nowrap:/)!==null?!1:void 0};return log$1.debug("parseMessage:",it),it},LINETYPE={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},ARROWTYPE={FILLED:0,OPEN:1},PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2},addNote=function(nt,rt,it){it.text,it.wrap===void 0&&autoWrap()||it.wrap;const vt=[].concat(nt,nt);messages.push({from:vt[0],to:vt[1],message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:LINETYPE.NOTE,placement:rt})},addLinks=function(nt,rt){const it=getActor(nt);try{let vt=sanitizeText$5(rt.text,getConfig$1());vt=vt.replace(/&amp;/g,"&"),vt=vt.replace(/&equals;/g,"=");const bt=JSON.parse(vt);insertLinks(it,bt)}catch(vt){log$1.error("error while parsing actor link text",vt)}},addALink=function(nt,rt){const it=getActor(nt);try{const Tt={};let kt=sanitizeText$5(rt.text,getConfig$1());var vt=kt.indexOf("@");kt=kt.replace(/&amp;/g,"&"),kt=kt.replace(/&equals;/g,"=");var bt=kt.slice(0,vt-1).trim(),wt=kt.slice(vt+1).trim();Tt[bt]=wt,insertLinks(it,Tt)}catch(Tt){log$1.error("error while parsing actor link text",Tt)}};function insertLinks(nt,rt){if(nt.links==null)nt.links=rt;else for(let it in rt)nt.links[it]=rt[it]}const addProperties=function(nt,rt){const it=getActor(nt);try{let vt=sanitizeText$5(rt.text,getConfig$1());const bt=JSON.parse(vt);insertProperties(it,bt)}catch(vt){log$1.error("error while parsing actor properties text",vt)}};function insertProperties(nt,rt){if(nt.properties==null)nt.properties=rt;else for(let it in rt)nt.properties[it]=rt[it]}const addDetails=function(nt,rt){const it=getActor(nt),vt=document.getElementById(rt.text);try{const bt=vt.innerHTML,wt=JSON.parse(bt);wt.properties&&insertProperties(it,wt.properties),wt.links&&insertLinks(it,wt.links)}catch(bt){log$1.error("error while parsing actor details text",bt)}},getActorProperty=function(nt,rt){if(nt!==void 0&&nt.properties!==void 0)return nt.properties[rt]},apply=function(nt){if(Array.isArray(nt))nt.forEach(function(rt){apply(rt)});else switch(nt.type){case"sequenceIndex":messages.push({from:void 0,to:void 0,message:{start:nt.sequenceIndex,step:nt.sequenceIndexStep,visible:nt.sequenceVisible},wrap:!1,type:nt.signalType});break;case"addParticipant":addActor(nt.actor,nt.actor,nt.description,"participant");break;case"addActor":addActor(nt.actor,nt.actor,nt.description,"actor");break;case"activeStart":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"activeEnd":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"addNote":addNote(nt.actor,nt.placement,nt.text);break;case"addLinks":addLinks(nt.actor,nt.text);break;case"addALink":addALink(nt.actor,nt.text);break;case"addProperties":addProperties(nt.actor,nt.text);break;case"addDetails":addDetails(nt.actor,nt.text);break;case"addMessage":addSignal(nt.from,nt.to,nt.msg,nt.signalType);break;case"loopStart":addSignal(void 0,void 0,nt.loopText,nt.signalType);break;case"loopEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"rectStart":addSignal(void 0,void 0,nt.color,nt.signalType);break;case"rectEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"optStart":addSignal(void 0,void 0,nt.optText,nt.signalType);break;case"optEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"altStart":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"else":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"altEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"setAccTitle":setAccTitle(nt.text);break;case"parStart":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"and":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"parEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"criticalStart":addSignal(void 0,void 0,nt.criticalText,nt.signalType);break;case"option":addSignal(void 0,void 0,nt.optionText,nt.signalType);break;case"criticalEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"breakStart":addSignal(void 0,void 0,nt.breakText,nt.signalType);break;case"breakEnd":addSignal(void 0,void 0,void 0,nt.signalType);break}},sequenceDb={addActor,addMessage,addSignal,addLinks,addDetails,addProperties,autoWrap,setWrap,enableSequenceNumbers,disableSequenceNumbers,showSequenceNumbers,getMessages,getActors:getActors$1,getActor,getActorKeys,getActorProperty,getAccTitle,getDiagramTitle,setDiagramTitle,parseDirective:parseDirective$3,getConfig:()=>getConfig$1().sequence,clear:clear$2,parseMessage,LINETYPE,ARROWTYPE,PLACEMENT,addNote,setAccTitle,apply,setAccDescription,getAccDescription};let interactionFunctions=[];const addFunction=nt=>{interactionFunctions.push(nt)},attachFunctions=()=>{interactionFunctions.forEach(nt=>{nt()}),interactionFunctions=[]},drawRect$1=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},addPopupInteraction=(nt,rt)=>{addFunction(()=>{const it=document.querySelectorAll(nt);it.length!==0&&(it[0].addEventListener("mouseover",function(){popupMenuUpFunc("actor"+rt+"_popup")}),it[0].addEventListener("mouseout",function(){popupMenuDownFunc("actor"+rt+"_popup")}))})},drawPopup=function(nt,rt,it,vt,bt){if(rt.links===void 0||rt.links===null||Object.keys(rt.links).length===0)return{height:0,width:0};const wt=rt.links,Tt=rt.actorCnt,kt=rt.rectData;var Lt="none";bt&&(Lt="block !important");const Mt=nt.append("g");Mt.attr("id","actor"+Tt+"_popup"),Mt.attr("class","actorPopupMenu"),Mt.attr("display",Lt),addPopupInteraction("#actor"+Tt+"_popup",Tt);var Nt="";kt.class!==void 0&&(Nt=" "+kt.class);let zt=kt.width>it?kt.width:it;const Ht=Mt.append("rect");if(Ht.attr("class","actorPopupMenuPanel"+Nt),Ht.attr("x",kt.x),Ht.attr("y",kt.height),Ht.attr("fill",kt.fill),Ht.attr("stroke",kt.stroke),Ht.attr("width",zt),Ht.attr("height",kt.height),Ht.attr("rx",kt.rx),Ht.attr("ry",kt.ry),wt!=null){var Wt=20;for(let Yt in wt){var Zt=Mt.append("a"),tn=sanitizeUrl_1(wt[Yt]);Zt.attr("xlink:href",tn),Zt.attr("target","_blank"),_drawMenuItemTextCandidateFunc(vt)(Yt,Zt,kt.x+10,kt.height+Wt,zt,20,{class:"actor"},vt),Wt+=30}}return Ht.attr("height",Wt),{height:kt.height+Wt,width:zt}},drawImage=function(nt,rt,it,vt){const bt=nt.append("image");bt.attr("x",rt),bt.attr("y",it);var wt=sanitizeUrl_1(vt);bt.attr("xlink:href",wt)},drawEmbeddedImage=function(nt,rt,it,vt){const bt=nt.append("use");bt.attr("x",rt),bt.attr("y",it);var wt=sanitizeUrl_1(vt);bt.attr("xlink:href","#"+wt)},popupMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'none'; }"},popupMenuUpFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="block")},popupMenuDownFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="none")},drawText$1=function(nt,rt){let it=0,vt=0;const bt=rt.text.split(common$1.lineBreakRegex);let wt=[],Tt=0,kt=()=>rt.y;if(rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0)switch(rt.valign){case"top":case"start":kt=()=>Math.round(rt.y+rt.textMargin);break;case"middle":case"center":kt=()=>Math.round(rt.y+(it+vt+rt.textMargin)/2);break;case"bottom":case"end":kt=()=>Math.round(rt.y+(it+vt+2*rt.textMargin)-rt.textMargin);break}if(rt.anchor!==void 0&&rt.textMargin!==void 0&&rt.width!==void 0)switch(rt.anchor){case"left":case"start":rt.x=Math.round(rt.x+rt.textMargin),rt.anchor="start",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"middle":case"center":rt.x=Math.round(rt.x+rt.width/2),rt.anchor="middle",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"right":case"end":rt.x=Math.round(rt.x+rt.width-rt.textMargin),rt.anchor="end",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break}for(let[Lt,Mt]of bt.entries()){rt.textMargin!==void 0&&rt.textMargin===0&&rt.fontSize!==void 0&&(Tt=Lt*rt.fontSize);const Nt=nt.append("text");if(Nt.attr("x",rt.x),Nt.attr("y",kt()),rt.anchor!==void 0&&Nt.attr("text-anchor",rt.anchor).attr("dominant-baseline",rt.dominantBaseline).attr("alignment-baseline",rt.alignmentBaseline),rt.fontFamily!==void 0&&Nt.style("font-family",rt.fontFamily),rt.fontSize!==void 0&&Nt.style("font-size",rt.fontSize),rt.fontWeight!==void 0&&Nt.style("font-weight",rt.fontWeight),rt.fill!==void 0&&Nt.attr("fill",rt.fill),rt.class!==void 0&&Nt.attr("class",rt.class),rt.dy!==void 0?Nt.attr("dy",rt.dy):Tt!==0&&Nt.attr("dy",Tt),rt.tspan){const zt=Nt.append("tspan");zt.attr("x",rt.x),rt.fill!==void 0&&zt.attr("fill",rt.fill),zt.text(Mt)}else Nt.text(Mt);rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0&&(vt+=(Nt._groups||Nt)[0][0].getBBox().height,it=vt),wt.push(Nt)}return wt},drawLabel$1=function(nt,rt){function it(bt,wt,Tt,kt,Lt){return bt+","+wt+" "+(bt+Tt)+","+wt+" "+(bt+Tt)+","+(wt+kt-Lt)+" "+(bt+Tt-Lt*1.2)+","+(wt+kt)+" "+bt+","+(wt+kt)}const vt=nt.append("polygon");return vt.attr("points",it(rt.x,rt.y,rt.width,rt.height,7)),vt.attr("class","labelBox"),rt.y=rt.y+rt.height/2,drawText$1(nt,rt),vt};let actorCnt=-1;const fixLifeLineHeights=(nt,rt)=>{!nt.selectAll||nt.selectAll(".actor-line").attr("class","200").attr("y2",rt-55)},drawActorTypeParticipant=function(nt,rt,it){const vt=rt.x+rt.width/2,bt=nt.append("g");var wt=bt;rt.y===0&&(actorCnt++,wt.append("line").attr("id","actor"+actorCnt).attr("x1",vt).attr("y1",5).attr("x2",vt).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),wt=bt.append("g"),rt.actorCnt=actorCnt,rt.links!=null&&(wt.attr("id","root-"+actorCnt),addPopupInteraction("#root-"+actorCnt,actorCnt)));const Tt=getNoteRect$1();var kt="actor";rt.properties!=null&&rt.properties.class?kt=rt.properties.class:Tt.fill="#eaeaea",Tt.x=rt.x,Tt.y=rt.y,Tt.width=rt.width,Tt.height=rt.height,Tt.class=kt,Tt.rx=3,Tt.ry=3;const Lt=drawRect$1(wt,Tt);if(rt.rectData=Tt,rt.properties!=null&&rt.properties.icon){const Nt=rt.properties.icon.trim();Nt.charAt(0)==="@"?drawEmbeddedImage(wt,Tt.x+Tt.width-20,Tt.y+10,Nt.substr(1)):drawImage(wt,Tt.x+Tt.width-20,Tt.y+10,Nt)}_drawTextCandidateFunc$1(it)(rt.description,wt,Tt.x,Tt.y,Tt.width,Tt.height,{class:"actor"},it);let Mt=rt.height;if(Lt.node){const Nt=Lt.node().getBBox();rt.height=Nt.height,Mt=Nt.height}return Mt},drawActorTypeActor=function(nt,rt,it){const vt=rt.x+rt.width/2;rt.y===0&&(actorCnt++,nt.append("line").attr("id","actor"+actorCnt).attr("x1",vt).attr("y1",80).attr("x2",vt).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const bt=nt.append("g");bt.attr("class","actor-man");const wt=getNoteRect$1();wt.x=rt.x,wt.y=rt.y,wt.fill="#eaeaea",wt.width=rt.width,wt.height=rt.height,wt.class="actor",wt.rx=3,wt.ry=3,bt.append("line").attr("id","actor-man-torso"+actorCnt).attr("x1",vt).attr("y1",rt.y+25).attr("x2",vt).attr("y2",rt.y+45),bt.append("line").attr("id","actor-man-arms"+actorCnt).attr("x1",vt-18).attr("y1",rt.y+33).attr("x2",vt+18).attr("y2",rt.y+33),bt.append("line").attr("x1",vt-18).attr("y1",rt.y+60).attr("x2",vt).attr("y2",rt.y+45),bt.append("line").attr("x1",vt).attr("y1",rt.y+45).attr("x2",vt+16).attr("y2",rt.y+60);const Tt=bt.append("circle");Tt.attr("cx",rt.x+rt.width/2),Tt.attr("cy",rt.y+10),Tt.attr("r",15),Tt.attr("width",rt.width),Tt.attr("height",rt.height);const kt=bt.node().getBBox();return rt.height=kt.height,_drawTextCandidateFunc$1(it)(rt.description,bt,wt.x,wt.y+35,wt.width,wt.height,{class:"actor"},it),rt.height},drawActor=function(nt,rt,it){switch(rt.type){case"actor":return drawActorTypeActor(nt,rt,it);case"participant":return drawActorTypeParticipant(nt,rt,it)}},anchorElement=function(nt){return nt.append("g")},drawActivation=function(nt,rt,it,vt,bt){const wt=getNoteRect$1(),Tt=rt.anchored;wt.x=rt.startx,wt.y=rt.starty,wt.class="activation"+bt%3,wt.width=rt.stopx-rt.startx,wt.height=it-rt.starty,drawRect$1(Tt,wt)},drawLoop=function(nt,rt,it,vt){const{boxMargin:bt,boxTextMargin:wt,labelBoxHeight:Tt,labelBoxWidth:kt,messageFontFamily:Lt,messageFontSize:Mt,messageFontWeight:Nt}=vt,zt=nt.append("g"),Ht=function(tn,Yt,nn,rn){return zt.append("line").attr("x1",tn).attr("y1",Yt).attr("x2",nn).attr("y2",rn).attr("class","loopLine")};Ht(rt.startx,rt.starty,rt.stopx,rt.starty),Ht(rt.stopx,rt.starty,rt.stopx,rt.stopy),Ht(rt.startx,rt.stopy,rt.stopx,rt.stopy),Ht(rt.startx,rt.starty,rt.startx,rt.stopy),rt.sections!==void 0&&rt.sections.forEach(function(tn){Ht(rt.startx,tn.y,rt.stopx,tn.y).style("stroke-dasharray","3, 3")});let Wt=getTextObj$1();Wt.text=it,Wt.x=rt.startx,Wt.y=rt.starty,Wt.fontFamily=Lt,Wt.fontSize=Mt,Wt.fontWeight=Nt,Wt.anchor="middle",Wt.valign="middle",Wt.tspan=!1,Wt.width=kt||50,Wt.height=Tt||20,Wt.textMargin=wt,Wt.class="labelText",drawLabel$1(zt,Wt),Wt=getTextObj$1(),Wt.text=rt.title,Wt.x=rt.startx+kt/2+(rt.stopx-rt.startx)/2,Wt.y=rt.starty+bt+wt,Wt.anchor="middle",Wt.valign="middle",Wt.textMargin=wt,Wt.class="loopText",Wt.fontFamily=Lt,Wt.fontSize=Mt,Wt.fontWeight=Nt,Wt.wrap=!0;let Zt=drawText$1(zt,Wt);return rt.sectionTitles!==void 0&&rt.sectionTitles.forEach(function(tn,Yt){if(tn.message){Wt.text=tn.message,Wt.x=rt.startx+(rt.stopx-rt.startx)/2,Wt.y=rt.sections[Yt].y+bt+wt,Wt.class="loopText",Wt.anchor="middle",Wt.valign="middle",Wt.tspan=!1,Wt.fontFamily=Lt,Wt.fontSize=Mt,Wt.fontWeight=Nt,Wt.wrap=rt.wrap,Zt=drawText$1(zt,Wt);let nn=Math.round(Zt.map(rn=>(rn._groups||rn)[0][0].getBBox().height).reduce((rn,ln)=>rn+ln));rt.sections[Yt].height+=nn-(bt+wt)}}),rt.height=Math.round(rt.stopy-rt.starty),zt},drawBackgroundRect$1=function(nt,rt){drawRect$1(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,class:"rect"}).lower()},insertDatabaseIcon=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead=function(nt){nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},getTextObj$1=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},getNoteRect$1=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc$1=function(){function nt(bt,wt,Tt,kt,Lt,Mt,Nt){const zt=wt.append("text").attr("x",Tt+Lt/2).attr("y",kt+Mt/2+5).style("text-anchor","middle").text(bt);vt(zt,Nt)}function rt(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const{actorFontSize:Ht,actorFontFamily:Wt,actorFontWeight:Zt}=zt;let tn=Ht&&Ht.replace?Ht.replace("px",""):Ht;const Yt=bt.split(common$1.lineBreakRegex);for(let nn=0;nn<Yt.length;nn++){const rn=nn*tn-tn*(Yt.length-1)/2,ln=wt.append("text").attr("x",Tt+Lt/2).attr("y",kt).style("text-anchor","middle").style("font-size",Ht).style("font-weight",Zt).style("font-family",Wt);ln.append("tspan").attr("x",Tt+Lt/2).attr("dy",rn).text(Yt[nn]),ln.attr("y",kt+Mt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),vt(ln,Nt)}}function it(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const Ht=wt.append("switch"),Zt=Ht.append("foreignObject").attr("x",Tt).attr("y",kt).attr("width",Lt).attr("height",Mt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Zt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Ht,Tt,kt,Lt,Mt,Nt,zt),vt(Zt,Nt)}function vt(bt,wt){for(const Tt in wt)wt.hasOwnProperty(Tt)&&bt.attr(Tt,wt[Tt])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),_drawMenuItemTextCandidateFunc=function(){function nt(bt,wt,Tt,kt,Lt,Mt,Nt){const zt=wt.append("text").attr("x",Tt).attr("y",kt).style("text-anchor","start").text(bt);vt(zt,Nt)}function rt(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const{actorFontSize:Ht,actorFontFamily:Wt,actorFontWeight:Zt}=zt,tn=bt.split(common$1.lineBreakRegex);for(let Yt=0;Yt<tn.length;Yt++){const nn=Yt*Ht-Ht*(tn.length-1)/2,rn=wt.append("text").attr("x",Tt).attr("y",kt).style("text-anchor","start").style("font-size",Ht).style("font-weight",Zt).style("font-family",Wt);rn.append("tspan").attr("x",Tt).attr("dy",nn).text(tn[Yt]),rn.attr("y",kt+Mt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),vt(rn,Nt)}}function it(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const Ht=wt.append("switch"),Zt=Ht.append("foreignObject").attr("x",Tt).attr("y",kt).attr("width",Lt).attr("height",Mt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Zt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Ht,Tt,kt,Lt,Mt,Nt,zt),vt(Zt,Nt)}function vt(bt,wt){for(const Tt in wt)wt.hasOwnProperty(Tt)&&bt.attr(Tt,wt[Tt])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),svgDraw$1={drawRect:drawRect$1,drawText:drawText$1,drawLabel:drawLabel$1,drawActor,drawPopup,drawImage,drawEmbeddedImage,anchorElement,drawActivation,drawLoop,drawBackgroundRect:drawBackgroundRect$1,insertArrowHead,insertArrowFilledHead,insertSequenceNumber,insertArrowCrossHead,insertDatabaseIcon,insertComputerIcon,insertClockIcon,getTextObj:getTextObj$1,getNoteRect:getNoteRect$1,popupMenu,popdownMenu,fixLifeLineHeights,sanitizeUrl:sanitizeUrl_1};let conf$3={};const bounds$1={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(nt=>nt.height||0))+(this.loops.length===0?0:this.loops.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.messages.length===0?0:this.messages.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.notes.length===0?0:this.notes.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(nt){this.actors.push(nt)},addLoop:function(nt){this.loops.push(nt)},addMessage:function(nt){this.messages.push(nt)},addNote:function(nt){this.notes.push(nt)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,setConf$4(getConfig$1())},updateVal:function(nt,rt,it,vt){nt[rt]===void 0?nt[rt]=it:nt[rt]=vt(it,nt[rt])},updateBounds:function(nt,rt,it,vt){const bt=this;let wt=0;function Tt(kt){return function(Mt){wt++;const Nt=bt.sequenceItems.length-wt+1;bt.updateVal(Mt,"starty",rt-Nt*conf$3.boxMargin,Math.min),bt.updateVal(Mt,"stopy",vt+Nt*conf$3.boxMargin,Math.max),bt.updateVal(bounds$1.data,"startx",nt-Nt*conf$3.boxMargin,Math.min),bt.updateVal(bounds$1.data,"stopx",it+Nt*conf$3.boxMargin,Math.max),kt!=="activation"&&(bt.updateVal(Mt,"startx",nt-Nt*conf$3.boxMargin,Math.min),bt.updateVal(Mt,"stopx",it+Nt*conf$3.boxMargin,Math.max),bt.updateVal(bounds$1.data,"starty",rt-Nt*conf$3.boxMargin,Math.min),bt.updateVal(bounds$1.data,"stopy",vt+Nt*conf$3.boxMargin,Math.max))}}this.sequenceItems.forEach(Tt()),this.activations.forEach(Tt("activation"))},insert:function(nt,rt,it,vt){const bt=Math.min(nt,it),wt=Math.max(nt,it),Tt=Math.min(rt,vt),kt=Math.max(rt,vt);this.updateVal(bounds$1.data,"startx",bt,Math.min),this.updateVal(bounds$1.data,"starty",Tt,Math.min),this.updateVal(bounds$1.data,"stopx",wt,Math.max),this.updateVal(bounds$1.data,"stopy",kt,Math.max),this.updateBounds(bt,Tt,wt,kt)},newActivation:function(nt,rt,it){const vt=it[nt.from.actor],bt=actorActivations(nt.from.actor).length||0,wt=vt.x+vt.width/2+(bt-1)*conf$3.activationWidth/2;this.activations.push({startx:wt,starty:this.verticalPos+2,stopx:wt+conf$3.activationWidth,stopy:void 0,actor:nt.from.actor,anchored:svgDraw$1.anchorElement(rt)})},endActivation:function(nt){const rt=this.activations.map(function(it){return it.actor}).lastIndexOf(nt.from.actor);return this.activations.splice(rt,1)[0]},createLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:nt.message,wrap:nt.wrap,width:nt.width,height:0,fill:rt}},newLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){this.sequenceItems.push(this.createLoop(nt,rt))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(nt){const rt=this.sequenceItems.pop();rt.sections=rt.sections||[],rt.sectionTitles=rt.sectionTitles||[],rt.sections.push({y:bounds$1.getVerticalPos(),height:0}),rt.sectionTitles.push(nt),this.sequenceItems.push(rt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},drawNote$1=function(nt,rt){bounds$1.bumpVerticalPos(conf$3.boxMargin),rt.height=conf$3.boxMargin,rt.starty=bounds$1.getVerticalPos();const it=svgDraw$1.getNoteRect();it.x=rt.startx,it.y=rt.starty,it.width=rt.width||conf$3.width,it.class="note";const vt=nt.append("g"),bt=svgDraw$1.drawRect(vt,it),wt=svgDraw$1.getTextObj();wt.x=rt.startx,wt.y=rt.starty,wt.width=it.width,wt.dy="1em",wt.text=rt.message,wt.class="noteText",wt.fontFamily=conf$3.noteFontFamily,wt.fontSize=conf$3.noteFontSize,wt.fontWeight=conf$3.noteFontWeight,wt.anchor=conf$3.noteAlign,wt.textMargin=conf$3.noteMargin,wt.valign="center";const Tt=drawText$1(vt,wt),kt=Math.round(Tt.map(Lt=>(Lt._groups||Lt)[0][0].getBBox().height).reduce((Lt,Mt)=>Lt+Mt));bt.attr("height",kt+2*conf$3.noteMargin),rt.height+=kt+2*conf$3.noteMargin,bounds$1.bumpVerticalPos(kt+2*conf$3.noteMargin),rt.stopy=rt.starty+kt+2*conf$3.noteMargin,rt.stopx=rt.startx+it.width,bounds$1.insert(rt.startx,rt.starty,rt.stopx,rt.stopy),bounds$1.models.addNote(rt)},messageFont=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight}),noteFont=nt=>({fontFamily:nt.noteFontFamily,fontSize:nt.noteFontSize,fontWeight:nt.noteFontWeight}),actorFont=nt=>({fontFamily:nt.actorFontFamily,fontSize:nt.actorFontSize,fontWeight:nt.actorFontWeight});function boundMessage(nt,rt){bounds$1.bumpVerticalPos(10);const{startx:it,stopx:vt,message:bt}=rt,wt=common$1.splitBreaks(bt).length,Tt=utils.calculateTextDimensions(bt,messageFont(conf$3)),kt=Tt.height/wt;rt.height+=kt,bounds$1.bumpVerticalPos(kt);let Lt,Mt=Tt.height-10;const Nt=Tt.width;if(it===vt){Lt=bounds$1.getVerticalPos()+Mt,conf$3.rightAngles||(Mt+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+Mt),Mt+=30;const zt=Math.max(Nt/2,conf$3.width/2);bounds$1.insert(it-zt,bounds$1.getVerticalPos()-10+Mt,vt+zt,bounds$1.getVerticalPos()+30+Mt)}else Mt+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+Mt,bounds$1.insert(it,Lt-10,vt,Lt);return bounds$1.bumpVerticalPos(Mt),rt.height+=Mt,rt.stopy=rt.starty+rt.height,bounds$1.insert(rt.fromBounds,rt.starty,rt.toBounds,rt.stopy),Lt}const drawMessage=function(nt,rt,it,vt){const{startx:bt,stopx:wt,starty:Tt,message:kt,type:Lt,sequenceIndex:Mt,sequenceVisible:Nt}=rt,zt=utils.calculateTextDimensions(kt,messageFont(conf$3)),Ht=svgDraw$1.getTextObj();Ht.x=bt,Ht.y=Tt+10,Ht.width=wt-bt,Ht.class="messageText",Ht.dy="1em",Ht.text=kt,Ht.fontFamily=conf$3.messageFontFamily,Ht.fontSize=conf$3.messageFontSize,Ht.fontWeight=conf$3.messageFontWeight,Ht.anchor=conf$3.messageAlign,Ht.valign="center",Ht.textMargin=conf$3.wrapPadding,Ht.tspan=!1,drawText$1(nt,Ht);const Wt=zt.width;let Zt;bt===wt?conf$3.rightAngles?Zt=nt.append("path").attr("d",`M  ${bt},${it} H ${bt+Math.max(conf$3.width/2,Wt/2)} V ${it+25} H ${bt}`):Zt=nt.append("path").attr("d","M "+bt+","+it+" C "+(bt+60)+","+(it-10)+" "+(bt+60)+","+(it+30)+" "+bt+","+(it+20)):(Zt=nt.append("line"),Zt.attr("x1",bt),Zt.attr("y1",it),Zt.attr("x2",wt),Zt.attr("y2",it)),Lt===vt.db.LINETYPE.DOTTED||Lt===vt.db.LINETYPE.DOTTED_CROSS||Lt===vt.db.LINETYPE.DOTTED_POINT||Lt===vt.db.LINETYPE.DOTTED_OPEN?(Zt.style("stroke-dasharray","3, 3"),Zt.attr("class","messageLine1")):Zt.attr("class","messageLine0");let tn="";conf$3.arrowMarkerAbsolute&&(tn=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,tn=tn.replace(/\(/g,"\\("),tn=tn.replace(/\)/g,"\\)")),Zt.attr("stroke-width",2),Zt.attr("stroke","none"),Zt.style("fill","none"),(Lt===vt.db.LINETYPE.SOLID||Lt===vt.db.LINETYPE.DOTTED)&&Zt.attr("marker-end","url("+tn+"#arrowhead)"),(Lt===vt.db.LINETYPE.SOLID_POINT||Lt===vt.db.LINETYPE.DOTTED_POINT)&&Zt.attr("marker-end","url("+tn+"#filled-head)"),(Lt===vt.db.LINETYPE.SOLID_CROSS||Lt===vt.db.LINETYPE.DOTTED_CROSS)&&Zt.attr("marker-end","url("+tn+"#crosshead)"),(Nt||conf$3.showSequenceNumbers)&&(Zt.attr("marker-start","url("+tn+"#sequencenumber)"),nt.append("text").attr("x",bt).attr("y",it+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(Mt))},drawActors=function(nt,rt,it,vt,bt,wt){if(bt.hideUnusedParticipants===!0){const Mt=new Set;wt.forEach(Nt=>{Mt.add(Nt.from),Mt.add(Nt.to)}),it=it.filter(Nt=>Mt.has(Nt))}let Tt=0,kt=0,Lt=0;for(const Mt of it){const Nt=rt[Mt];Nt.width=Nt.width||conf$3.width,Nt.height=Math.max(Nt.height||conf$3.height,conf$3.height),Nt.margin=Nt.margin||conf$3.actorMargin,Nt.x=Tt+kt,Nt.y=vt;const zt=svgDraw$1.drawActor(nt,Nt,conf$3);Lt=Math.max(Lt,zt),bounds$1.insert(Nt.x,vt,Nt.x+Nt.width,Nt.height),Tt+=Nt.width,kt+=Nt.margin,bounds$1.models.addActor(Nt)}bounds$1.bumpVerticalPos(Lt)},drawActorsPopup=function(nt,rt,it,vt){let bt=0,wt=0;for(const Tt of it){const kt=rt[Tt],Lt=getRequiredPopupWidth(kt),Mt=svgDraw$1.drawPopup(nt,kt,Lt,conf$3,conf$3.forceMenus,vt);Mt.height>bt&&(bt=Mt.height),Mt.width+kt.x>wt&&(wt=Mt.width+kt.x)}return{maxHeight:bt,maxWidth:wt}},setConf$4=function(nt){assignWithDepth$1(conf$3,nt),nt.fontFamily&&(conf$3.actorFontFamily=conf$3.noteFontFamily=conf$3.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$3.actorFontSize=conf$3.noteFontSize=conf$3.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$3.actorFontWeight=conf$3.noteFontWeight=conf$3.messageFontWeight=nt.fontWeight)},actorActivations=function(nt){return bounds$1.activations.filter(function(rt){return rt.actor===nt})},activationBounds=function(nt,rt){const it=rt[nt],vt=actorActivations(nt),bt=vt.reduce(function(Tt,kt){return Math.min(Tt,kt.startx)},it.x+it.width/2),wt=vt.reduce(function(Tt,kt){return Math.max(Tt,kt.stopx)},it.x+it.width/2);return[bt,wt]};function adjustLoopHeightForWrap(nt,rt,it,vt,bt){bounds$1.bumpVerticalPos(it);let wt=vt;if(rt.id&&rt.message&&nt[rt.id]){const Tt=nt[rt.id].width,kt=messageFont(conf$3);rt.message=utils.wrapLabel(`[${rt.message}]`,Tt-2*conf$3.wrapPadding,kt),rt.width=Tt,rt.wrap=!0;const Lt=utils.calculateTextDimensions(rt.message,kt),Mt=Math.max(Lt.height,conf$3.labelBoxHeight);wt=vt+Mt,log$1.debug(`${Mt} - ${rt.message}`)}bt(rt),bounds$1.bumpVerticalPos(wt)}const draw$4=function(nt,rt,it,vt){const{securityLevel:bt,sequence:wt}=getConfig$1();conf$3=wt;let Tt;bt==="sandbox"&&(Tt=select("#i"+rt));const kt=select(bt==="sandbox"?Tt.nodes()[0].contentDocument.body:"body"),Lt=bt==="sandbox"?Tt.nodes()[0].contentDocument:document;bounds$1.init(),log$1.debug(vt.db);const Mt=bt==="sandbox"?kt.select(`[id="${rt}"]`):select(`[id="${rt}"]`),Nt=vt.db.getActors(),zt=vt.db.getActorKeys(),Ht=vt.db.getMessages(),Wt=vt.db.getDiagramTitle(),Zt=getMaxMessageWidthPerActor(Nt,Ht,vt);conf$3.height=calculateActorMargins(Nt,Zt),svgDraw$1.insertComputerIcon(Mt),svgDraw$1.insertDatabaseIcon(Mt),svgDraw$1.insertClockIcon(Mt),drawActors(Mt,Nt,zt,0,conf$3,Ht);const tn=calculateLoopBounds(Ht,Nt,Zt,vt);svgDraw$1.insertArrowHead(Mt),svgDraw$1.insertArrowCrossHead(Mt),svgDraw$1.insertArrowFilledHead(Mt),svgDraw$1.insertSequenceNumber(Mt);function Yt(gn,Vn){const pn=bounds$1.endActivation(gn);pn.starty+18>Vn&&(pn.starty=Vn-6,Vn+=12),svgDraw$1.drawActivation(Mt,pn,Vn,conf$3,actorActivations(gn.from.actor).length),bounds$1.insert(pn.startx,Vn-10,pn.stopx,Vn)}let nn=1,rn=1;const ln=[];Ht.forEach(function(gn){let Vn,pn,pr;switch(gn.type){case vt.db.LINETYPE.NOTE:pn=gn.noteModel,drawNote$1(Mt,pn);break;case vt.db.LINETYPE.ACTIVE_START:bounds$1.newActivation(gn,Mt,Nt);break;case vt.db.LINETYPE.ACTIVE_END:Yt(gn,bounds$1.getVerticalPos());break;case vt.db.LINETYPE.LOOP_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,yn=>bounds$1.newLoop(yn));break;case vt.db.LINETYPE.LOOP_END:Vn=bounds$1.endLoop(),svgDraw$1.drawLoop(Mt,Vn,"loop",conf$3),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Vn);break;case vt.db.LINETYPE.RECT_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin,yn=>bounds$1.newLoop(void 0,yn.message));break;case vt.db.LINETYPE.RECT_END:Vn=bounds$1.endLoop(),svgDraw$1.drawBackgroundRect(Mt,Vn),bounds$1.models.addLoop(Vn),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos());break;case vt.db.LINETYPE.OPT_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,yn=>bounds$1.newLoop(yn));break;case vt.db.LINETYPE.OPT_END:Vn=bounds$1.endLoop(),svgDraw$1.drawLoop(Mt,Vn,"opt",conf$3),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Vn);break;case vt.db.LINETYPE.ALT_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,yn=>bounds$1.newLoop(yn));break;case vt.db.LINETYPE.ALT_ELSE:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,yn=>bounds$1.addSectionToLoop(yn));break;case vt.db.LINETYPE.ALT_END:Vn=bounds$1.endLoop(),svgDraw$1.drawLoop(Mt,Vn,"alt",conf$3),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Vn);break;case vt.db.LINETYPE.PAR_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,yn=>bounds$1.newLoop(yn));break;case vt.db.LINETYPE.PAR_AND:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,yn=>bounds$1.addSectionToLoop(yn));break;case vt.db.LINETYPE.PAR_END:Vn=bounds$1.endLoop(),svgDraw$1.drawLoop(Mt,Vn,"par",conf$3),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Vn);break;case vt.db.LINETYPE.AUTONUMBER:nn=gn.message.start||nn,rn=gn.message.step||rn,gn.message.visible?vt.db.enableSequenceNumbers():vt.db.disableSequenceNumbers();break;case vt.db.LINETYPE.CRITICAL_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,yn=>bounds$1.newLoop(yn));break;case vt.db.LINETYPE.CRITICAL_OPTION:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,yn=>bounds$1.addSectionToLoop(yn));break;case vt.db.LINETYPE.CRITICAL_END:Vn=bounds$1.endLoop(),svgDraw$1.drawLoop(Mt,Vn,"critical",conf$3),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Vn);break;case vt.db.LINETYPE.BREAK_START:adjustLoopHeightForWrap(tn,gn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,yn=>bounds$1.newLoop(yn));break;case vt.db.LINETYPE.BREAK_END:Vn=bounds$1.endLoop(),svgDraw$1.drawLoop(Mt,Vn,"break",conf$3),bounds$1.bumpVerticalPos(Vn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(Vn);break;default:try{pr=gn.msgModel,pr.starty=bounds$1.getVerticalPos(),pr.sequenceIndex=nn,pr.sequenceVisible=vt.db.showSequenceNumbers();const yn=boundMessage(Mt,pr);ln.push({messageModel:pr,lineStartY:yn}),bounds$1.models.addMessage(pr)}catch(yn){log$1.error("error while drawing message",yn)}}[vt.db.LINETYPE.SOLID_OPEN,vt.db.LINETYPE.DOTTED_OPEN,vt.db.LINETYPE.SOLID,vt.db.LINETYPE.DOTTED,vt.db.LINETYPE.SOLID_CROSS,vt.db.LINETYPE.DOTTED_CROSS,vt.db.LINETYPE.SOLID_POINT,vt.db.LINETYPE.DOTTED_POINT].includes(gn.type)&&(nn=nn+rn)}),ln.forEach(gn=>drawMessage(Mt,gn.messageModel,gn.lineStartY,vt)),conf$3.mirrorActors&&(bounds$1.bumpVerticalPos(conf$3.boxMargin*2),drawActors(Mt,Nt,zt,bounds$1.getVerticalPos(),conf$3,Ht),bounds$1.bumpVerticalPos(conf$3.boxMargin),fixLifeLineHeights(Mt,bounds$1.getVerticalPos()));const sn=drawActorsPopup(Mt,Nt,zt,Lt),{bounds:mn}=bounds$1.getBounds();log$1.debug("For line height fix Querying: #"+rt+" .actor-line"),selectAll("#"+rt+" .actor-line").attr("y2",mn.stopy);let Cn=mn.stopy-mn.starty;Cn<sn.maxHeight&&(Cn=sn.maxHeight);let An=Cn+2*conf$3.diagramMarginY;conf$3.mirrorActors&&(An=An-conf$3.boxMargin+conf$3.bottomMarginAdj);let Pn=mn.stopx-mn.startx;Pn<sn.maxWidth&&(Pn=sn.maxWidth);const On=Pn+2*conf$3.diagramMarginX;Wt&&Mt.append("text").text(Wt).attr("x",(mn.stopx-mn.startx)/2-2*conf$3.diagramMarginX).attr("y",-25),configureSvgSize(Mt,An,On,conf$3.useMaxWidth);const kn=Wt?40:0;Mt.attr("viewBox",mn.startx-conf$3.diagramMarginX+" -"+(conf$3.diagramMarginY+kn)+" "+On+" "+(An+kn)),log$1.debug("models:",bounds$1.models)};function getMaxMessageWidthPerActor(nt,rt,it){const vt={};return rt.forEach(function(bt){if(nt[bt.to]&&nt[bt.from]){const wt=nt[bt.to];if(bt.placement===it.db.PLACEMENT.LEFTOF&&!wt.prevActor||bt.placement===it.db.PLACEMENT.RIGHTOF&&!wt.nextActor)return;const Tt=bt.placement!==void 0,kt=!Tt,Lt=Tt?noteFont(conf$3):messageFont(conf$3),Mt=bt.wrap?utils.wrapLabel(bt.message,conf$3.width-2*conf$3.wrapPadding,Lt):bt.message,zt=utils.calculateTextDimensions(Mt,Lt).width+2*conf$3.wrapPadding;kt&&bt.from===wt.nextActor?vt[bt.to]=Math.max(vt[bt.to]||0,zt):kt&&bt.from===wt.prevActor?vt[bt.from]=Math.max(vt[bt.from]||0,zt):kt&&bt.from===bt.to?(vt[bt.from]=Math.max(vt[bt.from]||0,zt/2),vt[bt.to]=Math.max(vt[bt.to]||0,zt/2)):bt.placement===it.db.PLACEMENT.RIGHTOF?vt[bt.from]=Math.max(vt[bt.from]||0,zt):bt.placement===it.db.PLACEMENT.LEFTOF?vt[wt.prevActor]=Math.max(vt[wt.prevActor]||0,zt):bt.placement===it.db.PLACEMENT.OVER&&(wt.prevActor&&(vt[wt.prevActor]=Math.max(vt[wt.prevActor]||0,zt/2)),wt.nextActor&&(vt[bt.from]=Math.max(vt[bt.from]||0,zt/2)))}}),log$1.debug("maxMessageWidthPerActor:",vt),vt}const getRequiredPopupWidth=function(nt){let rt=0;const it=actorFont(conf$3);for(const vt in nt.links){const wt=utils.calculateTextDimensions(vt,it).width+2*conf$3.wrapPadding+2*conf$3.boxMargin;rt<wt&&(rt=wt)}return rt};function calculateActorMargins(nt,rt){let it=0;Object.keys(nt).forEach(vt=>{const bt=nt[vt];bt.wrap&&(bt.description=utils.wrapLabel(bt.description,conf$3.width-2*conf$3.wrapPadding,actorFont(conf$3)));const wt=utils.calculateTextDimensions(bt.description,actorFont(conf$3));bt.width=bt.wrap?conf$3.width:Math.max(conf$3.width,wt.width+2*conf$3.wrapPadding),bt.height=bt.wrap?Math.max(wt.height,conf$3.height):conf$3.height,it=Math.max(it,bt.height)});for(const vt in rt){const bt=nt[vt];if(!bt)continue;const wt=nt[bt.nextActor];if(!wt)continue;const kt=rt[vt]+conf$3.actorMargin-bt.width/2-wt.width/2;bt.margin=Math.max(kt,conf$3.actorMargin)}return Math.max(it,conf$3.height)}const buildNoteModel=function(nt,rt,it){const vt=rt[nt.from].x,bt=rt[nt.to].x,wt=nt.wrap&&nt.message;let Tt=utils.calculateTextDimensions(wt?utils.wrapLabel(nt.message,conf$3.width,noteFont(conf$3)):nt.message,noteFont(conf$3));const kt={width:wt?conf$3.width:Math.max(conf$3.width,Tt.width+2*conf$3.noteMargin),height:0,startx:rt[nt.from].x,stopx:0,starty:0,stopy:0,message:nt.message};return nt.placement===it.db.PLACEMENT.RIGHTOF?(kt.width=wt?Math.max(conf$3.width,Tt.width):Math.max(rt[nt.from].width/2+rt[nt.to].width/2,Tt.width+2*conf$3.noteMargin),kt.startx=vt+(rt[nt.from].width+conf$3.actorMargin)/2):nt.placement===it.db.PLACEMENT.LEFTOF?(kt.width=Math.max(wt?conf$3.width:rt[nt.from].width/2+rt[nt.to].width/2,Tt.width+2*conf$3.noteMargin),kt.startx=vt-kt.width+(rt[nt.from].width-conf$3.actorMargin)/2):nt.to===nt.from?(Tt=utils.calculateTextDimensions(wt?utils.wrapLabel(nt.message,Math.max(conf$3.width,rt[nt.from].width),noteFont(conf$3)):nt.message,noteFont(conf$3)),kt.width=wt?Math.max(conf$3.width,rt[nt.from].width):Math.max(rt[nt.from].width,conf$3.width,Tt.width+2*conf$3.noteMargin),kt.startx=vt+(rt[nt.from].width-kt.width)/2):(kt.width=Math.abs(vt+rt[nt.from].width/2-(bt+rt[nt.to].width/2))+conf$3.actorMargin,kt.startx=vt<bt?vt+rt[nt.from].width/2-conf$3.actorMargin/2:bt+rt[nt.to].width/2-conf$3.actorMargin/2),wt&&(kt.message=utils.wrapLabel(nt.message,kt.width-2*conf$3.wrapPadding,noteFont(conf$3))),log$1.debug(`NM:[${kt.startx},${kt.stopx},${kt.starty},${kt.stopy}:${kt.width},${kt.height}=${nt.message}]`),kt},buildMessageModel=function(nt,rt,it){let vt=!1;if([it.db.LINETYPE.SOLID_OPEN,it.db.LINETYPE.DOTTED_OPEN,it.db.LINETYPE.SOLID,it.db.LINETYPE.DOTTED,it.db.LINETYPE.SOLID_CROSS,it.db.LINETYPE.DOTTED_CROSS,it.db.LINETYPE.SOLID_POINT,it.db.LINETYPE.DOTTED_POINT].includes(nt.type)&&(vt=!0),!vt)return{};const bt=activationBounds(nt.from,rt),wt=activationBounds(nt.to,rt),Tt=bt[0]<=wt[0]?1:0,kt=bt[0]<wt[0]?0:1,Lt=[...bt,...wt],Mt=Math.abs(wt[kt]-bt[Tt]);nt.wrap&&nt.message&&(nt.message=utils.wrapLabel(nt.message,Math.max(Mt+2*conf$3.wrapPadding,conf$3.width),messageFont(conf$3)));const Nt=utils.calculateTextDimensions(nt.message,messageFont(conf$3));return{width:Math.max(nt.wrap?0:Nt.width+2*conf$3.wrapPadding,Mt+2*conf$3.wrapPadding,conf$3.width),height:0,startx:bt[Tt],stopx:wt[kt],starty:0,stopy:0,message:nt.message,type:nt.type,wrap:nt.wrap,fromBounds:Math.min.apply(null,Lt),toBounds:Math.max.apply(null,Lt)}},calculateLoopBounds=function(nt,rt,it,vt){const bt={},wt=[];let Tt,kt,Lt;return nt.forEach(function(Mt){switch(Mt.id=utils.random({length:10}),Mt.type){case vt.db.LINETYPE.LOOP_START:case vt.db.LINETYPE.ALT_START:case vt.db.LINETYPE.OPT_START:case vt.db.LINETYPE.PAR_START:case vt.db.LINETYPE.CRITICAL_START:case vt.db.LINETYPE.BREAK_START:wt.push({id:Mt.id,msg:Mt.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case vt.db.LINETYPE.ALT_ELSE:case vt.db.LINETYPE.PAR_AND:case vt.db.LINETYPE.CRITICAL_OPTION:Mt.message&&(Tt=wt.pop(),bt[Tt.id]=Tt,bt[Mt.id]=Tt,wt.push(Tt));break;case vt.db.LINETYPE.LOOP_END:case vt.db.LINETYPE.ALT_END:case vt.db.LINETYPE.OPT_END:case vt.db.LINETYPE.PAR_END:case vt.db.LINETYPE.CRITICAL_END:case vt.db.LINETYPE.BREAK_END:Tt=wt.pop(),bt[Tt.id]=Tt;break;case vt.db.LINETYPE.ACTIVE_START:{const zt=rt[Mt.from?Mt.from.actor:Mt.to.actor],Ht=actorActivations(Mt.from?Mt.from.actor:Mt.to.actor).length,Wt=zt.x+zt.width/2+(Ht-1)*conf$3.activationWidth/2,Zt={startx:Wt,stopx:Wt+conf$3.activationWidth,actor:Mt.from.actor,enabled:!0};bounds$1.activations.push(Zt)}break;case vt.db.LINETYPE.ACTIVE_END:{const zt=bounds$1.activations.map(Ht=>Ht.actor).lastIndexOf(Mt.from.actor);delete bounds$1.activations.splice(zt,1)[0]}break}Mt.placement!==void 0?(kt=buildNoteModel(Mt,rt,vt),Mt.noteModel=kt,wt.forEach(zt=>{Tt=zt,Tt.from=Math.min(Tt.from,kt.startx),Tt.to=Math.max(Tt.to,kt.startx+kt.width),Tt.width=Math.max(Tt.width,Math.abs(Tt.from-Tt.to))-conf$3.labelBoxWidth})):(Lt=buildMessageModel(Mt,rt,vt),Mt.msgModel=Lt,Lt.startx&&Lt.stopx&&wt.length>0&&wt.forEach(zt=>{if(Tt=zt,Lt.startx===Lt.stopx){const Ht=rt[Mt.from],Wt=rt[Mt.to];Tt.from=Math.min(Ht.x-Lt.width/2,Ht.x-Ht.width/2,Tt.from),Tt.to=Math.max(Wt.x+Lt.width/2,Wt.x+Ht.width/2,Tt.to),Tt.width=Math.max(Tt.width,Math.abs(Tt.to-Tt.from))-conf$3.labelBoxWidth}else Tt.from=Math.min(Lt.startx,Tt.from),Tt.to=Math.max(Lt.stopx,Tt.to),Tt.width=Math.max(Tt.width,Lt.width)-conf$3.labelBoxWidth}))}),bounds$1.activations=[],log$1.debug("Loop type widths:",bt),bt},sequenceRenderer={bounds:bounds$1,drawActors,drawActorsPopup,setConf:setConf$4,draw:draw$4};var parser$1=function(){var nt=function(rr,vr,cr,gr){for(cr=cr||{},gr=rr.length;gr--;cr[rr[gr]]=vr);return cr},rt=[1,2],it=[1,3],vt=[1,5],bt=[1,7],wt=[2,5],Tt=[1,15],kt=[1,17],Lt=[1,21],Mt=[1,22],Nt=[1,23],zt=[1,24],Ht=[1,37],Wt=[1,25],Zt=[1,26],tn=[1,27],Yt=[1,28],nn=[1,29],rn=[1,32],ln=[1,33],sn=[1,34],mn=[1,35],wn=[1,36],Cn=[1,39],An=[1,40],Pn=[1,41],On=[1,42],kn=[1,38],gn=[1,45],Vn=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],pn=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],pr=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],yn=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],mr={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(vr,cr,gr,Or,Ar,sr,ii){var ar=sr.length-1;switch(Ar){case 4:return Or.setRootDoc(sr[ar]),sr[ar];case 5:this.$=[];break;case 6:sr[ar]!="nl"&&(sr[ar-1].push(sr[ar]),this.$=sr[ar-1]);break;case 7:case 8:this.$=sr[ar];break;case 9:this.$="nl";break;case 12:this.$=sr[ar];break;case 13:const Ln=sr[ar-1];Ln.description=Or.trimColon(sr[ar]),this.$=Ln;break;case 14:this.$={stmt:"relation",state1:sr[ar-2],state2:sr[ar]};break;case 15:const en=Or.trimColon(sr[ar]);this.$={stmt:"relation",state1:sr[ar-3],state2:sr[ar-1],description:en};break;case 19:this.$={stmt:"state",id:sr[ar-3],type:"default",description:"",doc:sr[ar-1]};break;case 20:var fr=sr[ar],wr=sr[ar-2].trim();if(sr[ar].match(":")){var ir=sr[ar].split(":");fr=ir[0],wr=[wr,ir[1]]}this.$={stmt:"state",id:fr,type:"default",description:wr};break;case 21:this.$={stmt:"state",id:sr[ar-3],type:"default",description:sr[ar-5],doc:sr[ar-1]};break;case 22:this.$={stmt:"state",id:sr[ar],type:"fork"};break;case 23:this.$={stmt:"state",id:sr[ar],type:"join"};break;case 24:this.$={stmt:"state",id:sr[ar],type:"choice"};break;case 25:this.$={stmt:"state",id:Or.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:sr[ar-1].trim(),note:{position:sr[ar-2].trim(),text:sr[ar].trim()}};break;case 30:this.$=sr[ar].trim(),Or.setAccTitle(this.$);break;case 31:case 32:this.$=sr[ar].trim(),Or.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:sr[ar-1].trim(),classes:sr[ar].trim()};break;case 35:this.$={stmt:"applyClass",id:sr[ar-1].trim(),styleClass:sr[ar].trim()};break;case 38:Or.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:Or.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:Or.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:Or.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:sr[ar].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:sr[ar-2].trim(),classes:[sr[ar].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:sr[ar-2].trim(),classes:[sr[ar].trim()],type:"default",description:""};break;case 50:Or.parseDirective("%%{","open_directive");break;case 51:Or.parseDirective(sr[ar],"type_directive");break;case 52:sr[ar]=sr[ar].trim().replace(/'/g,'"'),Or.parseDirective(sr[ar],"arg_directive");break;case 53:Or.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:rt,5:it,6:4,7:vt,45:6,60:bt},{1:[3]},{3:8,4:rt,5:it,6:4,7:vt,45:6,60:bt},{3:9,4:rt,5:it,6:4,7:vt,45:6,60:bt},{3:10,4:rt,5:it,6:4,7:vt,45:6,60:bt},nt([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],wt,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Tt,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Mt,19:Nt,22:zt,24:Ht,25:Wt,26:Zt,27:tn,28:Yt,29:nn,32:31,33:rn,35:ln,37:sn,38:mn,42:wn,45:6,50:Cn,51:An,52:Pn,53:On,56:kn,60:bt},{47:43,48:[1,44],63:gn},nt([48,63],[2,51]),nt(Vn,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:Lt,17:Mt,19:Nt,22:zt,24:Ht,25:Wt,26:Zt,27:tn,28:Yt,29:nn,32:31,33:rn,35:ln,37:sn,38:mn,42:wn,45:6,50:Cn,51:An,52:Pn,53:On,56:kn,60:bt},nt(Vn,[2,8]),nt(Vn,[2,9]),nt(Vn,[2,10]),nt(Vn,[2,11]),nt(Vn,[2,12],{14:[1,47],15:[1,48]}),nt(Vn,[2,16]),{18:[1,49]},nt(Vn,[2,18],{20:[1,50]}),{23:[1,51]},nt(Vn,[2,22]),nt(Vn,[2,23]),nt(Vn,[2,24]),nt(Vn,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},nt(Vn,[2,28]),nt(Vn,[2,29]),{34:[1,56]},{36:[1,57]},nt(Vn,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},nt(pn,[2,44],{57:[1,61]}),nt(pn,[2,45],{57:[1,62]}),nt(Vn,[2,38]),nt(Vn,[2,39]),nt(Vn,[2,40]),nt(Vn,[2,41]),nt(pr,[2,36]),{49:63,62:[1,64]},nt(pr,[2,53]),nt(Vn,[2,7]),nt(Vn,[2,13]),{13:65,24:Ht,56:kn},nt(Vn,[2,17]),nt(yn,wt,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},nt(Vn,[2,30]),nt(Vn,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:gn},{63:[2,52]},nt(Vn,[2,14],{14:[1,76]}),{4:Tt,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Mt,19:Nt,21:[1,77],22:zt,24:Ht,25:Wt,26:Zt,27:tn,28:Yt,29:nn,32:31,33:rn,35:ln,37:sn,38:mn,42:wn,45:6,50:Cn,51:An,52:Pn,53:On,56:kn,60:bt},nt(Vn,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},nt(Vn,[2,33]),nt(Vn,[2,34]),nt(Vn,[2,35]),nt(pn,[2,46]),nt(pn,[2,47]),nt(pr,[2,37]),nt(Vn,[2,15]),nt(Vn,[2,19]),nt(yn,wt,{8:81}),nt(Vn,[2,26]),nt(Vn,[2,27]),{4:Tt,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Mt,19:Nt,21:[1,82],22:zt,24:Ht,25:Wt,26:Zt,27:tn,28:Yt,29:nn,32:31,33:rn,35:ln,37:sn,38:mn,42:wn,45:6,50:Cn,51:An,52:Pn,53:On,56:kn,60:bt},nt(Vn,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(vr,cr){if(cr.recoverable)this.trace(vr);else{var gr=new Error(vr);throw gr.hash=cr,gr}},parse:function(vr){var cr=this,gr=[0],Or=[],Ar=[null],sr=[],ii=this.table,ar="",fr=0,wr=0,ir=2,Ln=1,en=sr.slice.call(arguments,1),dn=Object.create(this.lexer),un={yy:{}};for(var Nn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Nn)&&(un.yy[Nn]=this.yy[Nn]);dn.setInput(vr,un.yy),un.yy.lexer=dn,un.yy.parser=this,typeof dn.yylloc>"u"&&(dn.yylloc={});var In=dn.yylloc;sr.push(In);var lr=dn.options&&dn.options.ranges;typeof un.yy.parseError=="function"?this.parseError=un.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function $n(){var Ai;return Ai=Or.pop()||dn.lex()||Ln,typeof Ai!="number"&&(Ai instanceof Array&&(Or=Ai,Ai=Or.pop()),Ai=cr.symbols_[Ai]||Ai),Ai}for(var Qn,Wn,or,dr,kr={},br,_r,hi,di;;){if(Wn=gr[gr.length-1],this.defaultActions[Wn]?or=this.defaultActions[Wn]:((Qn===null||typeof Qn>"u")&&(Qn=$n()),or=ii[Wn]&&ii[Wn][Qn]),typeof or>"u"||!or.length||!or[0]){var vi="";di=[];for(br in ii[Wn])this.terminals_[br]&&br>ir&&di.push("'"+this.terminals_[br]+"'");dn.showPosition?vi="Parse error on line "+(fr+1)+`:
`+dn.showPosition()+`
Expecting `+di.join(", ")+", got '"+(this.terminals_[Qn]||Qn)+"'":vi="Parse error on line "+(fr+1)+": Unexpected "+(Qn==Ln?"end of input":"'"+(this.terminals_[Qn]||Qn)+"'"),this.parseError(vi,{text:dn.match,token:this.terminals_[Qn]||Qn,line:dn.yylineno,loc:In,expected:di})}if(or[0]instanceof Array&&or.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Wn+", token: "+Qn);switch(or[0]){case 1:gr.push(Qn),Ar.push(dn.yytext),sr.push(dn.yylloc),gr.push(or[1]),Qn=null,wr=dn.yyleng,ar=dn.yytext,fr=dn.yylineno,In=dn.yylloc;break;case 2:if(_r=this.productions_[or[1]][1],kr.$=Ar[Ar.length-_r],kr._$={first_line:sr[sr.length-(_r||1)].first_line,last_line:sr[sr.length-1].last_line,first_column:sr[sr.length-(_r||1)].first_column,last_column:sr[sr.length-1].last_column},lr&&(kr._$.range=[sr[sr.length-(_r||1)].range[0],sr[sr.length-1].range[1]]),dr=this.performAction.apply(kr,[ar,wr,fr,un.yy,or[1],Ar,sr].concat(en)),typeof dr<"u")return dr;_r&&(gr=gr.slice(0,-1*_r*2),Ar=Ar.slice(0,-1*_r),sr=sr.slice(0,-1*_r)),gr.push(this.productions_[or[1]][0]),Ar.push(kr.$),sr.push(kr._$),hi=ii[gr[gr.length-2]][gr[gr.length-1]],gr.push(hi);break;case 3:return!0}}return!0}},Er=function(){var rr={EOF:1,parseError:function(cr,gr){if(this.yy.parser)this.yy.parser.parseError(cr,gr);else throw new Error(cr)},setInput:function(vr,cr){return this.yy=cr||this.yy||{},this._input=vr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var vr=this._input[0];this.yytext+=vr,this.yyleng++,this.offset++,this.match+=vr,this.matched+=vr;var cr=vr.match(/(?:\r\n?|\n).*/g);return cr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),vr},unput:function(vr){var cr=vr.length,gr=vr.split(/(?:\r\n?|\n)/g);this._input=vr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-cr),this.offset-=cr;var Or=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),gr.length-1&&(this.yylineno-=gr.length-1);var Ar=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:gr?(gr.length===Or.length?this.yylloc.first_column:0)+Or[Or.length-gr.length].length-gr[0].length:this.yylloc.first_column-cr},this.options.ranges&&(this.yylloc.range=[Ar[0],Ar[0]+this.yyleng-cr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(vr){this.unput(this.match.slice(vr))},pastInput:function(){var vr=this.matched.substr(0,this.matched.length-this.match.length);return(vr.length>20?"...":"")+vr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var vr=this.match;return vr.length<20&&(vr+=this._input.substr(0,20-vr.length)),(vr.substr(0,20)+(vr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var vr=this.pastInput(),cr=new Array(vr.length+1).join("-");return vr+this.upcomingInput()+`
`+cr+"^"},test_match:function(vr,cr){var gr,Or,Ar;if(this.options.backtrack_lexer&&(Ar={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ar.yylloc.range=this.yylloc.range.slice(0))),Or=vr[0].match(/(?:\r\n?|\n).*/g),Or&&(this.yylineno+=Or.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Or?Or[Or.length-1].length-Or[Or.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+vr[0].length},this.yytext+=vr[0],this.match+=vr[0],this.matches=vr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(vr[0].length),this.matched+=vr[0],gr=this.performAction.call(this,this.yy,this,cr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),gr)return gr;if(this._backtrack){for(var sr in Ar)this[sr]=Ar[sr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var vr,cr,gr,Or;this._more||(this.yytext="",this.match="");for(var Ar=this._currentRules(),sr=0;sr<Ar.length;sr++)if(gr=this._input.match(this.rules[Ar[sr]]),gr&&(!cr||gr[0].length>cr[0].length)){if(cr=gr,Or=sr,this.options.backtrack_lexer){if(vr=this.test_match(gr,Ar[sr]),vr!==!1)return vr;if(this._backtrack){cr=!1;continue}else return!1}else if(!this.options.flex)break}return cr?(vr=this.test_match(cr,Ar[Or]),vr!==!1?vr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var cr=this.next();return cr||this.lex()},begin:function(cr){this.conditionStack.push(cr)},popState:function(){var cr=this.conditionStack.length-1;return cr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(cr){return cr=this.conditionStack.length-1-Math.abs(cr||0),cr>=0?this.conditionStack[cr]:"INITIAL"},pushState:function(cr){this.begin(cr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(cr,gr,Or,Ar){switch(Or){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),gr.yytext=gr.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),gr.yytext=gr.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),gr.yytext=gr.yytext.substr(2).trim(),31;case 69:return this.popState(),gr.yytext=gr.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return gr.yytext=gr.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return rr}();mr.lexer=Er;function Mr(){this.yy={}}return Mr.prototype=mr,mr.Parser=Mr,new Mr}();parser$1.parser=parser$1;const stateParser=parser$1,stateDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*stateDiagram/)!==null},stateDetectorV2=(nt,rt)=>{var it;return!!(nt.match(/^\s*stateDiagram-v2/)!==null||nt.match(/^\s*stateDiagram/)&&((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper")},DEFAULT_DIAGRAM_DIRECTION="LR",DEFAULT_NESTED_DOC_DIR="TB",STMT_STATE="state",STMT_RELATION="relation",STMT_CLASSDEF="classDef",STMT_APPLYCLASS="applyClass",DEFAULT_STATE_TYPE="default",DIVIDER_TYPE="divider",START_NODE="[*]",START_TYPE="start",END_NODE=START_NODE,END_TYPE="end",COLOR_KEYWORD="color",FILL_KEYWORD="fill",BG_FILL="bgFill",STYLECLASS_SEP=",";function newClassesList(){return{}}let direction=DEFAULT_DIAGRAM_DIRECTION,rootDoc=[],classes=newClassesList();const newDoc=()=>({relations:[],states:{},documents:{}});let documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,dividerCnt=0;const lineType={LINE:0,DOTTED_LINE:1},relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},clone=nt=>JSON.parse(JSON.stringify(nt)),parseDirective$2=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},setRootDoc=nt=>{log$1.info("Setting root doc",nt),rootDoc=nt},getRootDoc=()=>rootDoc,docTranslator=(nt,rt,it)=>{if(rt.stmt===STMT_RELATION)docTranslator(nt,rt.state1,!0),docTranslator(nt,rt.state2,!1);else if(rt.stmt===STMT_STATE&&rt.id==="[*]"&&(rt.id=it?nt.id+"_start":nt.id+"_end",rt.start=it),rt.doc){const vt=[];let bt=[],wt;for(wt=0;wt<rt.doc.length;wt++)if(rt.doc[wt].type===DIVIDER_TYPE){const Tt=clone(rt.doc[wt]);Tt.doc=clone(bt),vt.push(Tt),bt=[]}else bt.push(rt.doc[wt]);if(vt.length>0&&bt.length>0){const Tt={stmt:STMT_STATE,id:generateId$1(),type:"divider",doc:clone(bt)};vt.push(clone(Tt)),rt.doc=vt}rt.doc.forEach(Tt=>docTranslator(rt,Tt,!0))}},getRootDocV2=()=>(docTranslator({id:"root"},{id:"root",doc:rootDoc},!0),{id:"root",doc:rootDoc}),extract=nt=>{let rt;nt.doc?rt=nt.doc:rt=nt,log$1.info(rt),clear$1(!0),log$1.info("Extract",rt),rt.forEach(it=>{switch(it.stmt){case STMT_STATE:addState(it.id,it.type,it.doc,it.description,it.note,it.classes,it.styles,it.textStyles);break;case STMT_RELATION:addRelation(it.state1,it.state2,it.description);break;case STMT_CLASSDEF:addStyleClass(it.id,it.classes);break;case STMT_APPLYCLASS:setCssClass(it.id,it.styleClass);break}})},addState=function(nt,rt=DEFAULT_STATE_TYPE,it=null,vt=null,bt=null,wt=null,Tt=null,kt=null){currentDocument.states[nt]===void 0?(log$1.info("Adding state ",nt,vt),currentDocument.states[nt]={id:nt,descriptions:[],type:rt,doc:it,note:bt,classes:[],styles:[],textStyles:[]}):(currentDocument.states[nt].doc||(currentDocument.states[nt].doc=it),currentDocument.states[nt].type||(currentDocument.states[nt].type=rt)),vt&&(log$1.info("Setting state description",nt,vt),typeof vt=="string"&&addDescription(nt,vt.trim()),typeof vt=="object"&&vt.forEach(Lt=>addDescription(nt,Lt.trim()))),bt&&(currentDocument.states[nt].note=bt,currentDocument.states[nt].note.text=common$1.sanitizeText(currentDocument.states[nt].note.text,getConfig$1())),wt&&(log$1.info("Setting state classes",nt,wt),(typeof wt=="string"?[wt]:wt).forEach(Mt=>setCssClass(nt,Mt.trim()))),Tt&&(log$1.info("Setting state styles",nt,Tt),(typeof Tt=="string"?[Tt]:Tt).forEach(Mt=>setStyle(nt,Mt.trim()))),kt&&(log$1.info("Setting state styles",nt,Tt),(typeof kt=="string"?[kt]:kt).forEach(Mt=>setTextStyle(nt,Mt.trim())))},clear$1=function(nt){documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,classes=newClassesList(),nt||clear$g()},getState=function(nt){return currentDocument.states[nt]},getStates=function(){return currentDocument.states},logDocuments=function(){log$1.info("Documents = ",documents)},getRelations=function(){return currentDocument.relations};function startIdIfNeeded(nt=""){let rt=nt;return nt===START_NODE&&(startEndCount++,rt=`${START_TYPE}${startEndCount}`),rt}function startTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===START_NODE?START_TYPE:rt}function endIdIfNeeded(nt=""){let rt=nt;return nt===END_NODE&&(startEndCount++,rt=`${END_TYPE}${startEndCount}`),rt}function endTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===END_NODE?END_TYPE:rt}function addRelationObjs(nt,rt,it){let vt=startIdIfNeeded(nt.id),bt=startTypeIfNeeded(nt.id,nt.type),wt=startIdIfNeeded(rt.id),Tt=startTypeIfNeeded(rt.id,rt.type);addState(vt,bt,nt.doc,nt.description,nt.note,nt.classes,nt.styles,nt.textStyles),addState(wt,Tt,rt.doc,rt.description,rt.note,rt.classes,rt.styles,rt.textStyles),currentDocument.relations.push({id1:vt,id2:wt,relationTitle:common$1.sanitizeText(it,getConfig$1())})}const addRelation=function(nt,rt,it){if(typeof nt=="object")addRelationObjs(nt,rt,it);else{const vt=startIdIfNeeded(nt),bt=startTypeIfNeeded(nt),wt=endIdIfNeeded(rt),Tt=endTypeIfNeeded(rt);addState(vt,bt),addState(wt,Tt),currentDocument.relations.push({id1:vt,id2:wt,title:common$1.sanitizeText(it,getConfig$1())})}},addDescription=function(nt,rt){const it=currentDocument.states[nt],vt=rt.startsWith(":")?rt.replace(":","").trim():rt;it.descriptions.push(common$1.sanitizeText(vt,getConfig$1()))},cleanupLabel=function(nt){return nt.substring(0,1)===":"?nt.substr(2).trim():nt.trim()},getDividerId=()=>(dividerCnt++,"divider-id-"+dividerCnt),addStyleClass=function(nt,rt=""){classes[nt]===void 0&&(classes[nt]={id:nt,styles:[],textStyles:[]});const it=classes[nt];rt!=null&&rt.split(STYLECLASS_SEP).forEach(vt=>{const bt=vt.replace(/([^;]*);/,"$1").trim();if(vt.match(COLOR_KEYWORD)){const Tt=bt.replace(FILL_KEYWORD,BG_FILL).replace(COLOR_KEYWORD,FILL_KEYWORD);it.textStyles.push(Tt)}it.styles.push(bt)})},getClasses$1=function(){return classes},setCssClass=function(nt,rt){nt.split(",").forEach(function(it){let vt=getState(it);if(vt===void 0){const bt=it.trim();addState(bt),vt=getState(bt)}vt.classes.push(rt)})},setStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},setTextStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},getDirection=()=>direction,setDirection=nt=>{direction=nt},trimColon=nt=>nt&&nt[0]===":"?nt.substr(1).trim():nt.trim(),stateDb={parseDirective:parseDirective$2,getConfig:()=>getConfig$1().state,addState,clear:clear$1,getState,getStates,getRelations,getClasses:getClasses$1,getDirection,addRelation,getDividerId,setDirection,cleanupLabel,lineType,relationType,logDocuments,getRootDoc,setRootDoc,getRootDocV2,extract,trimColon,getAccTitle,setAccTitle,getAccDescription,setAccDescription,addStyleClass,setCssClass,addDescription,setDiagramTitle,getDiagramTitle},drawStartState=nt=>nt.append("circle").attr("class","start-state").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit),drawDivider=nt=>nt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",getConfig$1().state.textHeight).attr("class","divider").attr("x2",getConfig$1().state.textHeight*2).attr("y1",0).attr("y2",0),drawSimpleState=(nt,rt)=>{const it=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+2*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),vt=it.node().getBBox();return nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",vt.width+2*getConfig$1().state.padding).attr("height",vt.height+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),it},drawDescrState=(nt,rt)=>{const it=function(Ht,Wt,Zt){const tn=Ht.append("tspan").attr("x",2*getConfig$1().state.padding).text(Wt);Zt||tn.attr("dy",getConfig$1().state.textHeight)},bt=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+1.3*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.descriptions[0]).node().getBBox(),wt=bt.height,Tt=nt.append("text").attr("x",getConfig$1().state.padding).attr("y",wt+getConfig$1().state.padding*.4+getConfig$1().state.dividerMargin+getConfig$1().state.textHeight).attr("class","state-description");let kt=!0,Lt=!0;rt.descriptions.forEach(function(Ht){kt||(it(Tt,Ht,Lt),Lt=!1),kt=!1});const Mt=nt.append("line").attr("x1",getConfig$1().state.padding).attr("y1",getConfig$1().state.padding+wt+getConfig$1().state.dividerMargin/2).attr("y2",getConfig$1().state.padding+wt+getConfig$1().state.dividerMargin/2).attr("class","descr-divider"),Nt=Tt.node().getBBox(),zt=Math.max(Nt.width,bt.width);return Mt.attr("x2",zt+3*getConfig$1().state.padding),nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",zt+2*getConfig$1().state.padding).attr("height",Nt.height+wt+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),nt},addTitleAndBox=(nt,rt,it)=>{const vt=getConfig$1().state.padding,bt=2*getConfig$1().state.padding,wt=nt.node().getBBox(),Tt=wt.width,kt=wt.x,Lt=nt.append("text").attr("x",0).attr("y",getConfig$1().state.titleShift).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),Nt=Lt.node().getBBox().width+bt;let zt=Math.max(Nt,Tt);zt===Tt&&(zt=zt+bt);let Ht;const Wt=nt.node().getBBox();rt.doc,Ht=kt-vt,Nt>Tt&&(Ht=(Tt-zt)/2+vt),Math.abs(kt-Wt.x)<vt&&Nt>Tt&&(Ht=kt-(Nt-Tt)/2);const Zt=1-getConfig$1().state.textHeight;return nt.insert("rect",":first-child").attr("x",Ht).attr("y",Zt).attr("class",it?"alt-composit":"composit").attr("width",zt).attr("height",Wt.height+getConfig$1().state.textHeight+getConfig$1().state.titleShift+1).attr("rx","0"),Lt.attr("x",Ht+vt),Nt<=Tt&&Lt.attr("x",kt+(zt-bt)/2-Nt/2+vt),nt.insert("rect",":first-child").attr("x",Ht).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",zt).attr("height",getConfig$1().state.textHeight*3).attr("rx",getConfig$1().state.radius),nt.insert("rect",":first-child").attr("x",Ht).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",zt).attr("height",Wt.height+3+2*getConfig$1().state.textHeight).attr("rx",getConfig$1().state.radius),nt},drawEndState=nt=>(nt.append("circle").attr("class","end-state-outer").attr("r",getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding),nt.append("circle").attr("class","end-state-inner").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2)),drawForkJoinState=(nt,rt)=>{let it=getConfig$1().state.forkWidth,vt=getConfig$1().state.forkHeight;if(rt.parentId){let bt=it;it=vt,vt=bt}return nt.append("rect").style("stroke","black").style("fill","black").attr("width",it).attr("height",vt).attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding)},_drawLongText=(nt,rt,it,vt)=>{let bt=0;const wt=vt.append("text");wt.style("text-anchor","start"),wt.attr("class","noteText");let Tt=nt.replace(/\r\n/g,"<br/>");Tt=Tt.replace(/\n/g,"<br/>");const kt=Tt.split(common$1.lineBreakRegex);let Lt=1.25*getConfig$1().state.noteMargin;for(const Mt of kt){const Nt=Mt.trim();if(Nt.length>0){const zt=wt.append("tspan");if(zt.text(Nt),Lt===0){const Ht=zt.node().getBBox();Lt+=Ht.height}bt+=Lt,zt.attr("x",rt+getConfig$1().state.noteMargin),zt.attr("y",it+bt+1.25*getConfig$1().state.noteMargin)}}return{textWidth:wt.node().getBBox().width,textHeight:bt}},drawNote=(nt,rt)=>{rt.attr("class","state-note");const it=rt.append("rect").attr("x",0).attr("y",getConfig$1().state.padding),vt=rt.append("g"),{textWidth:bt,textHeight:wt}=_drawLongText(nt,0,0,vt);return it.attr("height",wt+2*getConfig$1().state.noteMargin),it.attr("width",bt+getConfig$1().state.noteMargin*2),it},drawState=function(nt,rt){const it=rt.id,vt={id:it,label:rt.id,width:0,height:0},bt=nt.append("g").attr("id",it).attr("class","stateGroup");rt.type==="start"&&drawStartState(bt),rt.type==="end"&&drawEndState(bt),(rt.type==="fork"||rt.type==="join")&&drawForkJoinState(bt,rt),rt.type==="note"&&drawNote(rt.note.text,bt),rt.type==="divider"&&drawDivider(bt),rt.type==="default"&&rt.descriptions.length===0&&drawSimpleState(bt,rt),rt.type==="default"&&rt.descriptions.length>0&&drawDescrState(bt,rt);const wt=bt.node().getBBox();return vt.width=wt.width+2*getConfig$1().state.padding,vt.height=wt.height+2*getConfig$1().state.padding,vt};let edgeCount=0;const drawEdge=function(nt,rt,it){const vt=function(Lt){switch(Lt){case stateDb.relationType.AGGREGATION:return"aggregation";case stateDb.relationType.EXTENSION:return"extension";case stateDb.relationType.COMPOSITION:return"composition";case stateDb.relationType.DEPENDENCY:return"dependency"}};rt.points=rt.points.filter(Lt=>!Number.isNaN(Lt.y));const bt=rt.points,wt=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}).curve(curveBasis),Tt=nt.append("path").attr("d",wt(bt)).attr("id","edge"+edgeCount).attr("class","transition");let kt="";if(getConfig$1().state.arrowMarkerAbsolute&&(kt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,kt=kt.replace(/\(/g,"\\("),kt=kt.replace(/\)/g,"\\)")),Tt.attr("marker-end","url("+kt+"#"+vt(stateDb.relationType.DEPENDENCY)+"End)"),it.title!==void 0){const Lt=nt.append("g").attr("class","stateLabel"),{x:Mt,y:Nt}=utils.calcLabelPosition(rt.points),zt=common$1.getRows(it.title);let Ht=0;const Wt=[];let Zt=0,tn=0;for(let rn=0;rn<=zt.length;rn++){const ln=Lt.append("text").attr("text-anchor","middle").text(zt[rn]).attr("x",Mt).attr("y",Nt+Ht),sn=ln.node().getBBox();Zt=Math.max(Zt,sn.width),tn=Math.min(tn,sn.x),log$1.info(sn.x,Mt,Nt+Ht),Ht===0&&(Ht=ln.node().getBBox().height,log$1.info("Title height",Ht,Nt)),Wt.push(ln)}let Yt=Ht*zt.length;if(zt.length>1){const rn=(zt.length-1)*Ht*.5;Wt.forEach((ln,sn)=>ln.attr("y",Nt+sn*Ht-rn)),Yt=Ht*zt.length}const nn=Lt.node().getBBox();Lt.insert("rect",":first-child").attr("class","box").attr("x",Mt-Zt/2-getConfig$1().state.padding/2).attr("y",Nt-Yt/2-getConfig$1().state.padding/2-3.5).attr("width",Zt+getConfig$1().state.padding).attr("height",Yt+getConfig$1().state.padding),log$1.info(nn)}edgeCount++};let conf$2;const transformationLog={},setConf$3=function(){},insertMarkers=function(nt){nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},draw$3=function(nt,rt,it,vt){conf$2=getConfig$1().state;const bt=getConfig$1().securityLevel;let wt;bt==="sandbox"&&(wt=select("#i"+rt));const Tt=select(bt==="sandbox"?wt.nodes()[0].contentDocument.body:"body"),kt=bt==="sandbox"?wt.nodes()[0].contentDocument:document;log$1.debug("Rendering diagram "+nt);const Lt=Tt.select(`[id='${rt}']`);insertMarkers(Lt),new Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const Nt=vt.db.getRootDoc();renderDoc(Nt,Lt,void 0,!1,Tt,kt,vt);const zt=conf$2.padding,Ht=Lt.node().getBBox(),Wt=Ht.width+zt*2,Zt=Ht.height+zt*2,tn=Wt*1.75;configureSvgSize(Lt,Zt,tn,conf$2.useMaxWidth),Lt.attr("viewBox",`${Ht.x-conf$2.padding}  ${Ht.y-conf$2.padding} `+Wt+" "+Zt)},getLabelWidth=nt=>nt?nt.length*conf$2.fontSizeFactor:1,renderDoc=(nt,rt,it,vt,bt,wt,Tt)=>{const kt=new Graph({compound:!0,multigraph:!0});let Lt,Mt=!0;for(Lt=0;Lt<nt.length;Lt++)if(nt[Lt].stmt==="relation"){Mt=!1;break}it?kt.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:Mt?1:conf$2.edgeLengthFactor,nodeSep:Mt?1:50,isMultiGraph:!0}):kt.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:Mt?1:conf$2.edgeLengthFactor,nodeSep:Mt?1:50,ranker:"tight-tree",isMultiGraph:!0}),kt.setDefaultEdgeLabel(function(){return{}}),Tt.db.extract(nt);const Nt=Tt.db.getStates(),zt=Tt.db.getRelations(),Ht=Object.keys(Nt);for(const nn of Ht){const rn=Nt[nn];it&&(rn.parentId=it);let ln;if(rn.doc){let sn=rt.append("g").attr("id",rn.id).attr("class","stateGroup");ln=renderDoc(rn.doc,sn,rn.id,!vt,bt,wt,Tt);{sn=addTitleAndBox(sn,rn,vt);let mn=sn.node().getBBox();ln.width=mn.width,ln.height=mn.height+conf$2.padding/2,transformationLog[rn.id]={y:conf$2.compositTitleSize}}}else ln=drawState(rt,rn);if(rn.note){const sn={descriptions:[],id:rn.id+"-note",note:rn.note,type:"note"},mn=drawState(rt,sn);rn.note.position==="left of"?(kt.setNode(ln.id+"-note",mn),kt.setNode(ln.id,ln)):(kt.setNode(ln.id,ln),kt.setNode(ln.id+"-note",mn)),kt.setParent(ln.id,ln.id+"-group"),kt.setParent(ln.id+"-note",ln.id+"-group")}else kt.setNode(ln.id,ln)}log$1.debug("Count=",kt.nodeCount(),kt);let Wt=0;zt.forEach(function(nn){Wt++,log$1.debug("Setting edge",nn),kt.setEdge(nn.id1,nn.id2,{relation:nn,width:getLabelWidth(nn.title),height:conf$2.labelHeight*common$1.getRows(nn.title).length,labelpos:"c"},"id"+Wt)}),layout(kt),log$1.debug("Graph after layout",kt.nodes());const Zt=rt.node();kt.nodes().forEach(function(nn){nn!==void 0&&kt.node(nn)!==void 0?(log$1.warn("Node "+nn+": "+JSON.stringify(kt.node(nn))),bt.select("#"+Zt.id+" #"+nn).attr("transform","translate("+(kt.node(nn).x-kt.node(nn).width/2)+","+(kt.node(nn).y+(transformationLog[nn]?transformationLog[nn].y:0)-kt.node(nn).height/2)+" )"),bt.select("#"+Zt.id+" #"+nn).attr("data-x-shift",kt.node(nn).x-kt.node(nn).width/2),wt.querySelectorAll("#"+Zt.id+" #"+nn+" .divider").forEach(ln=>{const sn=ln.parentElement;let mn=0,wn=0;sn&&(sn.parentElement&&(mn=sn.parentElement.getBBox().width),wn=parseInt(sn.getAttribute("data-x-shift"),10),Number.isNaN(wn)&&(wn=0)),ln.setAttribute("x1",0-wn+8),ln.setAttribute("x2",mn-wn-8)})):log$1.debug("No Node "+nn+": "+JSON.stringify(kt.node(nn)))});let tn=Zt.getBBox();kt.edges().forEach(function(nn){nn!==void 0&&kt.edge(nn)!==void 0&&(log$1.debug("Edge "+nn.v+" -> "+nn.w+": "+JSON.stringify(kt.edge(nn))),drawEdge(rt,kt.edge(nn),kt.edge(nn).relation))}),tn=Zt.getBBox();const Yt={id:it||"root",label:it||"root",width:0,height:0};return Yt.width=tn.width+2*conf$2.padding,Yt.height=tn.height+2*conf$2.padding,log$1.debug("Doc rendered",Yt,kt),Yt},stateRenderer={setConf:setConf$3,draw:draw$3},SHAPE_STATE="rect",SHAPE_STATE_WITH_DESC="rectWithTitle",SHAPE_START="start",SHAPE_END="end",SHAPE_DIVIDER="divider",SHAPE_GROUP="roundedWithTitle",SHAPE_NOTE="note",SHAPE_NOTEGROUP="noteGroup",CSS_DIAGRAM="statediagram",CSS_STATE="state",CSS_DIAGRAM_STATE=`${CSS_DIAGRAM}-${CSS_STATE}`,CSS_EDGE="transition",CSS_NOTE="note",CSS_NOTE_EDGE="note-edge",CSS_EDGE_NOTE_EDGE=`${CSS_EDGE} ${CSS_NOTE_EDGE}`,CSS_DIAGRAM_NOTE=`${CSS_DIAGRAM}-${CSS_NOTE}`,CSS_CLUSTER="cluster",CSS_DIAGRAM_CLUSTER=`${CSS_DIAGRAM}-${CSS_CLUSTER}`,CSS_CLUSTER_ALT="cluster-alt",CSS_DIAGRAM_CLUSTER_ALT=`${CSS_DIAGRAM}-${CSS_CLUSTER_ALT}`,PARENT="parent",NOTE="note",DOMID_STATE="state",DOMID_TYPE_SPACER="----",NOTE_ID=`${DOMID_TYPE_SPACER}${NOTE}`,PARENT_ID=`${DOMID_TYPE_SPACER}${PARENT}`,G_EDGE_STYLE="fill:none",G_EDGE_ARROWHEADSTYLE="fill: #333",G_EDGE_LABELPOS="c",G_EDGE_LABELTYPE="text",G_EDGE_THICKNESS="normal";let nodeDb={},graphItemCount=0;const setConf$2=function(nt){const rt=Object.keys(nt);for(const it of rt)nt[it]},getClasses=function(nt,rt){log$1.trace("Extracting classes"),rt.db.clear();try{return rt.parser.parse(nt),rt.db.extract(rt.db.getRootDocV2()),rt.db.getClasses()}catch(it){return it}};function getClassesFromDbInfo(nt){return nt==null?"":nt.classes?nt.classes.join(" "):""}function stateDomId(nt="",rt=0,it="",vt=DOMID_TYPE_SPACER){const bt=it!==null&&it.length>0?`${vt}${it}`:"";return`${DOMID_STATE}-${nt}${bt}-${rt}`}const setupNode=(nt,rt,it,vt,bt,wt)=>{const Tt=it.id,kt=getClassesFromDbInfo(vt[Tt]);if(Tt!=="root"){let Lt=SHAPE_STATE;it.start===!0&&(Lt=SHAPE_START),it.start===!1&&(Lt=SHAPE_END),it.type!==DEFAULT_STATE_TYPE&&(Lt=it.type),nodeDb[Tt]||(nodeDb[Tt]={id:Tt,shape:Lt,description:common$1.sanitizeText(Tt,getConfig$1()),classes:`${kt} ${CSS_DIAGRAM_STATE}`});const Mt=nodeDb[Tt];it.description&&(Array.isArray(Mt.description)?(Mt.shape=SHAPE_STATE_WITH_DESC,Mt.description.push(it.description)):Mt.description.length>0?(Mt.shape=SHAPE_STATE_WITH_DESC,Mt.description===Tt?Mt.description=[it.description]:Mt.description=[Mt.description,it.description]):(Mt.shape=SHAPE_STATE,Mt.description=it.description),Mt.description=common$1.sanitizeTextOrArray(Mt.description,getConfig$1())),Mt.description.length===1&&Mt.shape===SHAPE_STATE_WITH_DESC&&(Mt.shape=SHAPE_STATE),!Mt.type&&it.doc&&(log$1.info("Setting cluster for ",Tt,getDir(it)),Mt.type="group",Mt.dir=getDir(it),Mt.shape=it.type===DIVIDER_TYPE?SHAPE_DIVIDER:SHAPE_GROUP,Mt.classes=Mt.classes+" "+CSS_DIAGRAM_CLUSTER+" "+(wt?CSS_DIAGRAM_CLUSTER_ALT:""));const Nt={labelStyle:"",shape:Mt.shape,labelText:Mt.description,classes:Mt.classes,style:"",id:Tt,dir:Mt.dir,domId:stateDomId(Tt,graphItemCount),type:Mt.type,padding:15};if(it.note){const zt={labelStyle:"",shape:SHAPE_NOTE,labelText:it.note.text,classes:CSS_DIAGRAM_NOTE,style:"",id:Tt+NOTE_ID+"-"+graphItemCount,domId:stateDomId(Tt,graphItemCount,NOTE),type:Mt.type,padding:15},Ht={labelStyle:"",shape:SHAPE_NOTEGROUP,labelText:it.note.text,classes:Mt.classes,style:"",id:Tt+PARENT_ID,domId:stateDomId(Tt,graphItemCount,PARENT),type:"group",padding:0};graphItemCount++;const Wt=Tt+PARENT_ID;nt.setNode(Wt,Ht),nt.setNode(zt.id,zt),nt.setNode(Tt,Nt),nt.setParent(Tt,Wt),nt.setParent(zt.id,Wt);let Zt=Tt,tn=zt.id;it.note.position==="left of"&&(Zt=zt.id,tn=Tt),nt.setEdge(Zt,tn,{arrowhead:"none",arrowType:"",style:G_EDGE_STYLE,labelStyle:"",classes:CSS_EDGE_NOTE_EDGE,arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS})}else nt.setNode(Tt,Nt)}rt&&rt.id!=="root"&&(log$1.trace("Setting node ",Tt," to be child of its parent ",rt.id),nt.setParent(Tt,rt.id)),it.doc&&(log$1.trace("Adding nodes children "),setupDoc(nt,it,it.doc,vt,bt,!wt))},setupDoc=(nt,rt,it,vt,bt,wt)=>{log$1.trace("items",it),it.forEach(Tt=>{switch(Tt.stmt){case STMT_STATE:setupNode(nt,rt,Tt,vt,bt,wt);break;case DEFAULT_STATE_TYPE:setupNode(nt,rt,Tt,vt,bt,wt);break;case STMT_RELATION:{setupNode(nt,rt,Tt.state1,vt,bt,wt),setupNode(nt,rt,Tt.state2,vt,bt,wt);const kt={id:"edge"+graphItemCount,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:G_EDGE_STYLE,labelStyle:"",label:common$1.sanitizeText(Tt.description,getConfig$1()),arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS,classes:CSS_EDGE};nt.setEdge(Tt.state1.id,Tt.state2.id,kt,graphItemCount),graphItemCount++}break}})},getDir=(nt,rt=DEFAULT_NESTED_DOC_DIR)=>{let it=rt;if(nt.doc)for(let vt=0;vt<nt.doc.length;vt++){const bt=nt.doc[vt];bt.stmt==="dir"&&(it=bt.value)}return it},draw$2=function(nt,rt,it,vt){log$1.info("Drawing state diagram (v2)",rt),nodeDb={},vt.db.getDirection();const{securityLevel:bt,state:wt}=getConfig$1(),Tt=wt.nodeSpacing||50,kt=wt.rankSpacing||50;log$1.info(vt.db.getRootDocV2()),vt.db.extract(vt.db.getRootDocV2()),log$1.info(vt.db.getRootDocV2());const Lt=vt.db.getStates(),Mt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:getDir(vt.db.getRootDocV2()),nodesep:Tt,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});setupNode(Mt,void 0,vt.db.getRootDocV2(),Lt,vt.db,!0);let Nt;bt==="sandbox"&&(Nt=select("#i"+rt));const zt=select(bt==="sandbox"?Nt.nodes()[0].contentDocument.body:"body"),Ht=zt.select(`[id="${rt}"]`),Wt=zt.select("#"+rt+" g");render$1(Wt,Mt,["barb"],CSS_DIAGRAM,rt);const Zt=8;utils.insertTitle(Ht,"statediagramTitleText",wt.titleTopMargin,vt.db.getDiagramTitle());const tn=Ht.node().getBBox(),Yt=tn.width+Zt*2,nn=tn.height+Zt*2;Ht.attr("class",CSS_DIAGRAM);const rn=Ht.node().getBBox();configureSvgSize(Ht,nn,Yt,wt.useMaxWidth);const ln=`${rn.x-Zt} ${rn.y-Zt} ${Yt} ${nn}`;log$1.debug(`viewBox ${ln}`),Ht.attr("viewBox",ln);const sn=document.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const mn of sn){const wn=mn.getBBox(),Cn=document.createElementNS("http://www.w3.org/2000/svg",SHAPE_STATE);Cn.setAttribute("rx",0),Cn.setAttribute("ry",0),Cn.setAttribute("width",wn.width),Cn.setAttribute("height",wn.height),mn.insertBefore(Cn,mn.firstChild)}},stateRendererV2={setConf:setConf$2,getClasses,draw:draw$2};var parser=function(){var nt=function(tn,Yt,nn,rn){for(nn=nn||{},rn=tn.length;rn--;nn[tn[rn]]=Yt);return nn},rt=[1,2],it=[1,5],vt=[6,9,11,17,18,20,22,23,24,26],bt=[1,15],wt=[1,16],Tt=[1,17],kt=[1,18],Lt=[1,19],Mt=[1,20],Nt=[1,24],zt=[4,6,9,11,17,18,20,22,23,24,26],Ht={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(Yt,nn,rn,ln,sn,mn,wn){var Cn=mn.length-1;switch(sn){case 1:return mn[Cn-1];case 3:this.$=[];break;case 4:mn[Cn-1].push(mn[Cn]),this.$=mn[Cn-1];break;case 5:case 6:this.$=mn[Cn];break;case 7:case 8:this.$=[];break;case 11:ln.setDiagramTitle(mn[Cn].substr(6)),this.$=mn[Cn].substr(6);break;case 12:this.$=mn[Cn].trim(),ln.setAccTitle(this.$);break;case 13:case 14:this.$=mn[Cn].trim(),ln.setAccDescription(this.$);break;case 15:ln.addSection(mn[Cn].substr(8)),this.$=mn[Cn].substr(8);break;case 16:ln.addTask(mn[Cn-1],mn[Cn]),this.$="task";break;case 18:ln.parseDirective("%%{","open_directive");break;case 19:ln.parseDirective(mn[Cn],"type_directive");break;case 20:mn[Cn]=mn[Cn].trim().replace(/'/g,'"'),ln.parseDirective(mn[Cn],"arg_directive");break;case 21:ln.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:rt,7:3,12:4,26:it},{1:[3]},nt(vt,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,26:it},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:bt,18:wt,20:Tt,22:kt,23:Lt,24:Mt,26:it},{1:[2,2]},{14:22,15:[1,23],29:Nt},nt([15,29],[2,19]),nt(vt,[2,8],{1:[2,1]}),nt(vt,[2,4]),{7:21,10:25,12:4,17:bt,18:wt,20:Tt,22:kt,23:Lt,24:Mt,26:it},nt(vt,[2,6]),nt(vt,[2,7]),nt(vt,[2,11]),{19:[1,26]},{21:[1,27]},nt(vt,[2,14]),nt(vt,[2,15]),{25:[1,28]},nt(vt,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},nt(vt,[2,5]),nt(vt,[2,12]),nt(vt,[2,13]),nt(vt,[2,16]),nt(zt,[2,9]),{14:32,29:Nt},{29:[2,20]},{11:[1,33]},nt(zt,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(Yt,nn){if(nn.recoverable)this.trace(Yt);else{var rn=new Error(Yt);throw rn.hash=nn,rn}},parse:function(Yt){var nn=this,rn=[0],ln=[],sn=[null],mn=[],wn=this.table,Cn="",An=0,Pn=0,On=2,kn=1,gn=mn.slice.call(arguments,1),Vn=Object.create(this.lexer),pn={yy:{}};for(var pr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pr)&&(pn.yy[pr]=this.yy[pr]);Vn.setInput(Yt,pn.yy),pn.yy.lexer=Vn,pn.yy.parser=this,typeof Vn.yylloc>"u"&&(Vn.yylloc={});var yn=Vn.yylloc;mn.push(yn);var mr=Vn.options&&Vn.options.ranges;typeof pn.yy.parseError=="function"?this.parseError=pn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Er(){var fr;return fr=ln.pop()||Vn.lex()||kn,typeof fr!="number"&&(fr instanceof Array&&(ln=fr,fr=ln.pop()),fr=nn.symbols_[fr]||fr),fr}for(var Mr,rr,vr,cr,gr={},Or,Ar,sr,ii;;){if(rr=rn[rn.length-1],this.defaultActions[rr]?vr=this.defaultActions[rr]:((Mr===null||typeof Mr>"u")&&(Mr=Er()),vr=wn[rr]&&wn[rr][Mr]),typeof vr>"u"||!vr.length||!vr[0]){var ar="";ii=[];for(Or in wn[rr])this.terminals_[Or]&&Or>On&&ii.push("'"+this.terminals_[Or]+"'");Vn.showPosition?ar="Parse error on line "+(An+1)+`:
`+Vn.showPosition()+`
Expecting `+ii.join(", ")+", got '"+(this.terminals_[Mr]||Mr)+"'":ar="Parse error on line "+(An+1)+": Unexpected "+(Mr==kn?"end of input":"'"+(this.terminals_[Mr]||Mr)+"'"),this.parseError(ar,{text:Vn.match,token:this.terminals_[Mr]||Mr,line:Vn.yylineno,loc:yn,expected:ii})}if(vr[0]instanceof Array&&vr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+rr+", token: "+Mr);switch(vr[0]){case 1:rn.push(Mr),sn.push(Vn.yytext),mn.push(Vn.yylloc),rn.push(vr[1]),Mr=null,Pn=Vn.yyleng,Cn=Vn.yytext,An=Vn.yylineno,yn=Vn.yylloc;break;case 2:if(Ar=this.productions_[vr[1]][1],gr.$=sn[sn.length-Ar],gr._$={first_line:mn[mn.length-(Ar||1)].first_line,last_line:mn[mn.length-1].last_line,first_column:mn[mn.length-(Ar||1)].first_column,last_column:mn[mn.length-1].last_column},mr&&(gr._$.range=[mn[mn.length-(Ar||1)].range[0],mn[mn.length-1].range[1]]),cr=this.performAction.apply(gr,[Cn,Pn,An,pn.yy,vr[1],sn,mn].concat(gn)),typeof cr<"u")return cr;Ar&&(rn=rn.slice(0,-1*Ar*2),sn=sn.slice(0,-1*Ar),mn=mn.slice(0,-1*Ar)),rn.push(this.productions_[vr[1]][0]),sn.push(gr.$),mn.push(gr._$),sr=wn[rn[rn.length-2]][rn[rn.length-1]],rn.push(sr);break;case 3:return!0}}return!0}},Wt=function(){var tn={EOF:1,parseError:function(nn,rn){if(this.yy.parser)this.yy.parser.parseError(nn,rn);else throw new Error(nn)},setInput:function(Yt,nn){return this.yy=nn||this.yy||{},this._input=Yt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Yt=this._input[0];this.yytext+=Yt,this.yyleng++,this.offset++,this.match+=Yt,this.matched+=Yt;var nn=Yt.match(/(?:\r\n?|\n).*/g);return nn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Yt},unput:function(Yt){var nn=Yt.length,rn=Yt.split(/(?:\r\n?|\n)/g);this._input=Yt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-nn),this.offset-=nn;var ln=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),rn.length-1&&(this.yylineno-=rn.length-1);var sn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:rn?(rn.length===ln.length?this.yylloc.first_column:0)+ln[ln.length-rn.length].length-rn[0].length:this.yylloc.first_column-nn},this.options.ranges&&(this.yylloc.range=[sn[0],sn[0]+this.yyleng-nn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Yt){this.unput(this.match.slice(Yt))},pastInput:function(){var Yt=this.matched.substr(0,this.matched.length-this.match.length);return(Yt.length>20?"...":"")+Yt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Yt=this.match;return Yt.length<20&&(Yt+=this._input.substr(0,20-Yt.length)),(Yt.substr(0,20)+(Yt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Yt=this.pastInput(),nn=new Array(Yt.length+1).join("-");return Yt+this.upcomingInput()+`
`+nn+"^"},test_match:function(Yt,nn){var rn,ln,sn;if(this.options.backtrack_lexer&&(sn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(sn.yylloc.range=this.yylloc.range.slice(0))),ln=Yt[0].match(/(?:\r\n?|\n).*/g),ln&&(this.yylineno+=ln.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ln?ln[ln.length-1].length-ln[ln.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Yt[0].length},this.yytext+=Yt[0],this.match+=Yt[0],this.matches=Yt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Yt[0].length),this.matched+=Yt[0],rn=this.performAction.call(this,this.yy,this,nn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),rn)return rn;if(this._backtrack){for(var mn in sn)this[mn]=sn[mn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Yt,nn,rn,ln;this._more||(this.yytext="",this.match="");for(var sn=this._currentRules(),mn=0;mn<sn.length;mn++)if(rn=this._input.match(this.rules[sn[mn]]),rn&&(!nn||rn[0].length>nn[0].length)){if(nn=rn,ln=mn,this.options.backtrack_lexer){if(Yt=this.test_match(rn,sn[mn]),Yt!==!1)return Yt;if(this._backtrack){nn=!1;continue}else return!1}else if(!this.options.flex)break}return nn?(Yt=this.test_match(nn,sn[ln]),Yt!==!1?Yt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var nn=this.next();return nn||this.lex()},begin:function(nn){this.conditionStack.push(nn)},popState:function(){var nn=this.conditionStack.length-1;return nn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(nn){return nn=this.conditionStack.length-1-Math.abs(nn||0),nn>=0?this.conditionStack[nn]:"INITIAL"},pushState:function(nn){this.begin(nn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(nn,rn,ln,sn){switch(ln){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return tn}();Ht.lexer=Wt;function Zt(){this.yy={}}return Zt.prototype=Ht,Ht.Parser=Zt,new Zt}();parser.parser=parser;const journeyParser=parser,journeyDetector=nt=>nt.match(/^\s*journey/)!==null;let currentSection="";const sections=[],tasks=[],rawTasks=[],parseDirective$1=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear=function(){sections.length=0,tasks.length=0,currentSection="",rawTasks.length=0,clear$g()},addSection=function(nt){currentSection=nt,sections.push(nt)},getSections=function(){return sections},getTasks=function(){let nt=compileTasks();const rt=100;let it=0;for(;!nt&&it<rt;)nt=compileTasks(),it++;return tasks.push(...rawTasks),tasks},updateActors=function(){const nt=[];return tasks.forEach(it=>{it.people&&nt.push(...it.people)}),[...new Set(nt)].sort()},addTask=function(nt,rt){const it=rt.substr(1).split(":");let vt=0,bt=[];it.length===1?(vt=Number(it[0]),bt=[]):(vt=Number(it[0]),bt=it[1].split(","));const wt=bt.map(kt=>kt.trim()),Tt={section:currentSection,type:currentSection,people:wt,task:nt,score:vt};rawTasks.push(Tt)},addTaskOrg=function(nt){const rt={section:currentSection,type:currentSection,description:nt,task:nt,classes:[]};tasks.push(rt)},compileTasks=function(){const nt=function(it){return rawTasks[it].processed};let rt=!0;for(const[it,vt]of rawTasks.entries())nt(it),rt=rt&&vt.processed;return rt},getActors=function(){return updateActors()},journeyDb={parseDirective:parseDirective$1,getConfig:()=>getConfig$1().journey,clear,setDiagramTitle,getDiagramTitle,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addSection,getSections,getTasks,addTask,addTaskOrg,getActors},drawRect=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},drawFace=function(nt,rt){const vt=nt.append("circle").attr("cx",rt.cx).attr("cy",rt.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),bt=nt.append("g");bt.append("circle").attr("cx",rt.cx-15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),bt.append("circle").attr("cx",rt.cx+15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function wt(Lt){const Mt=arc().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",Mt).attr("transform","translate("+rt.cx+","+(rt.cy+2)+")")}function Tt(Lt){const Mt=arc().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",Mt).attr("transform","translate("+rt.cx+","+(rt.cy+7)+")")}function kt(Lt){Lt.append("line").attr("class","mouth").attr("stroke",2).attr("x1",rt.cx-5).attr("y1",rt.cy+7).attr("x2",rt.cx+5).attr("y2",rt.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return rt.score>3?wt(bt):rt.score<3?Tt(bt):kt(bt),vt},drawCircle=function(nt,rt){const it=nt.append("circle");return it.attr("cx",rt.cx),it.attr("cy",rt.cy),it.attr("class","actor-"+rt.pos),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("r",rt.r),it.class!==void 0&&it.attr("class",it.class),rt.title!==void 0&&it.append("title").text(rt.title),it},drawText=function(nt,rt){const it=rt.text.replace(/<br\s*\/?>/gi," "),vt=nt.append("text");vt.attr("x",rt.x),vt.attr("y",rt.y),vt.attr("class","legend"),vt.style("text-anchor",rt.anchor),rt.class!==void 0&&vt.attr("class",rt.class);const bt=vt.append("tspan");return bt.attr("x",rt.x+rt.textMargin*2),bt.text(it),vt},drawLabel=function(nt,rt){function it(bt,wt,Tt,kt,Lt){return bt+","+wt+" "+(bt+Tt)+","+wt+" "+(bt+Tt)+","+(wt+kt-Lt)+" "+(bt+Tt-Lt*1.2)+","+(wt+kt)+" "+bt+","+(wt+kt)}const vt=nt.append("polygon");vt.attr("points",it(rt.x,rt.y,50,20,7)),vt.attr("class","labelBox"),rt.y=rt.y+rt.labelMargin,rt.x=rt.x+.5*rt.labelMargin,drawText(nt,rt)},drawSection=function(nt,rt,it){const vt=nt.append("g"),bt=getNoteRect();bt.x=rt.x,bt.y=rt.y,bt.fill=rt.fill,bt.width=it.width,bt.height=it.height,bt.class="journey-section section-type-"+rt.num,bt.rx=3,bt.ry=3,drawRect(vt,bt),_drawTextCandidateFunc(it)(rt.text,vt,bt.x,bt.y,bt.width,bt.height,{class:"journey-section section-type-"+rt.num},it,rt.colour)};let taskCount=-1;const drawTask=function(nt,rt,it){const vt=rt.x+it.width/2,bt=nt.append("g");taskCount++;const wt=300+5*30;bt.append("line").attr("id","task"+taskCount).attr("x1",vt).attr("y1",rt.y).attr("x2",vt).attr("y2",wt).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),drawFace(bt,{cx:vt,cy:300+(5-rt.score)*30,score:rt.score});const Tt=getNoteRect();Tt.x=rt.x,Tt.y=rt.y,Tt.fill=rt.fill,Tt.width=it.width,Tt.height=it.height,Tt.class="task task-type-"+rt.num,Tt.rx=3,Tt.ry=3,drawRect(bt,Tt);let kt=rt.x+14;rt.people.forEach(Lt=>{const Mt=rt.actors[Lt].color,Nt={cx:kt,cy:rt.y,r:7,fill:Mt,stroke:"#000",title:Lt,pos:rt.actors[Lt].position};drawCircle(bt,Nt),kt+=10}),_drawTextCandidateFunc(it)(rt.task,bt,Tt.x,Tt.y,Tt.width,Tt.height,{class:"task"},it,rt.colour)},drawBackgroundRect=function(nt,rt){drawRect(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,class:"rect"}).lower()},getTextObj=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},getNoteRect=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc=function(){function nt(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const Ht=wt.append("text").attr("x",Tt+Lt/2).attr("y",kt+Mt/2+5).style("font-color",zt).style("text-anchor","middle").text(bt);vt(Ht,Nt)}function rt(bt,wt,Tt,kt,Lt,Mt,Nt,zt,Ht){const{taskFontSize:Wt,taskFontFamily:Zt}=zt,tn=bt.split(/<br\s*\/?>/gi);for(let Yt=0;Yt<tn.length;Yt++){const nn=Yt*Wt-Wt*(tn.length-1)/2,rn=wt.append("text").attr("x",Tt+Lt/2).attr("y",kt).attr("fill",Ht).style("text-anchor","middle").style("font-size",Wt).style("font-family",Zt);rn.append("tspan").attr("x",Tt+Lt/2).attr("dy",nn).text(tn[Yt]),rn.attr("y",kt+Mt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),vt(rn,Nt)}}function it(bt,wt,Tt,kt,Lt,Mt,Nt,zt){const Ht=wt.append("switch"),Zt=Ht.append("foreignObject").attr("x",Tt).attr("y",kt).attr("width",Lt).attr("height",Mt).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Zt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Ht,Tt,kt,Lt,Mt,Nt,zt),vt(Zt,Nt)}function vt(bt,wt){for(const Tt in wt)Tt in wt&&bt.attr(Tt,wt[Tt])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),initGraphics=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},svgDraw={drawRect,drawCircle,drawSection,drawText,drawLabel,drawTask,drawBackgroundRect,getTextObj,getNoteRect,initGraphics},setConf$1=function(nt){Object.keys(nt).forEach(function(it){conf$1[it]=nt[it]})},actors={};function drawActorLegend(nt){const rt=getConfig$1().journey;let it=60;Object.keys(actors).forEach(vt=>{const bt=actors[vt].color,wt={cx:20,cy:it,r:7,fill:bt,stroke:"#000",pos:actors[vt].position};svgDraw.drawCircle(nt,wt);const Tt={x:40,y:it+7,fill:"#666",text:vt,textMargin:rt.boxTextMargin|5};svgDraw.drawText(nt,Tt),it+=20})}const conf$1=getConfig$1().journey,LEFT_MARGIN=conf$1.leftMargin,draw$1=function(nt,rt,it,vt){const bt=getConfig$1().journey;vt.db.clear(),vt.parser.parse(nt+`
`);const wt=getConfig$1().securityLevel;let Tt;wt==="sandbox"&&(Tt=select("#i"+rt));const kt=select(wt==="sandbox"?Tt.nodes()[0].contentDocument.body:"body");bounds.init();const Lt=kt.select("#"+rt);svgDraw.initGraphics(Lt);const Mt=vt.db.getTasks(),Nt=vt.db.getDiagramTitle(),zt=vt.db.getActors();for(const nn in actors)delete actors[nn];let Ht=0;zt.forEach(nn=>{actors[nn]={color:bt.actorColours[Ht%bt.actorColours.length],position:Ht},Ht++}),drawActorLegend(Lt),bounds.insert(0,0,LEFT_MARGIN,Object.keys(actors).length*50),drawTasks(Lt,Mt,0);const Wt=bounds.getBounds();Nt&&Lt.append("text").text(Nt).attr("x",LEFT_MARGIN).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const Zt=Wt.stopy-Wt.starty+2*bt.diagramMarginY,tn=LEFT_MARGIN+Wt.stopx+2*bt.diagramMarginX;configureSvgSize(Lt,Zt,tn,bt.useMaxWidth),Lt.append("line").attr("x1",LEFT_MARGIN).attr("y1",bt.height*4).attr("x2",tn-LEFT_MARGIN-4).attr("y2",bt.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const Yt=Nt?70:0;Lt.attr("viewBox",`${Wt.startx} -25 ${tn} ${Zt+Yt}`),Lt.attr("preserveAspectRatio","xMinYMin meet"),Lt.attr("height",Zt+Yt+25)},bounds={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(nt,rt,it,vt){nt[rt]===void 0?nt[rt]=it:nt[rt]=vt(it,nt[rt])},updateBounds:function(nt,rt,it,vt){const bt=getConfig$1().journey,wt=this;let Tt=0;function kt(Lt){return function(Nt){Tt++;const zt=wt.sequenceItems.length-Tt+1;wt.updateVal(Nt,"starty",rt-zt*bt.boxMargin,Math.min),wt.updateVal(Nt,"stopy",vt+zt*bt.boxMargin,Math.max),wt.updateVal(bounds.data,"startx",nt-zt*bt.boxMargin,Math.min),wt.updateVal(bounds.data,"stopx",it+zt*bt.boxMargin,Math.max),Lt!=="activation"&&(wt.updateVal(Nt,"startx",nt-zt*bt.boxMargin,Math.min),wt.updateVal(Nt,"stopx",it+zt*bt.boxMargin,Math.max),wt.updateVal(bounds.data,"starty",rt-zt*bt.boxMargin,Math.min),wt.updateVal(bounds.data,"stopy",vt+zt*bt.boxMargin,Math.max))}}this.sequenceItems.forEach(kt())},insert:function(nt,rt,it,vt){const bt=Math.min(nt,it),wt=Math.max(nt,it),Tt=Math.min(rt,vt),kt=Math.max(rt,vt);this.updateVal(bounds.data,"startx",bt,Math.min),this.updateVal(bounds.data,"starty",Tt,Math.min),this.updateVal(bounds.data,"stopx",wt,Math.max),this.updateVal(bounds.data,"stopy",kt,Math.max),this.updateBounds(bt,Tt,wt,kt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},fills=conf$1.sectionFills,textColours=conf$1.sectionColours,drawTasks=function(nt,rt,it){const vt=getConfig$1().journey;let bt="";const wt=vt.height*2+vt.diagramMarginY,Tt=it+wt;let kt=0,Lt="#CCC",Mt="black",Nt=0;for(const[zt,Ht]of rt.entries()){if(bt!==Ht.section){Lt=fills[kt%fills.length],Nt=kt%fills.length,Mt=textColours[kt%textColours.length];const Zt={x:zt*vt.taskMargin+zt*vt.width+LEFT_MARGIN,y:50,text:Ht.section,fill:Lt,num:Nt,colour:Mt};svgDraw.drawSection(nt,Zt,vt),bt=Ht.section,kt++}const Wt=Ht.people.reduce((Zt,tn)=>(actors[tn]&&(Zt[tn]=actors[tn]),Zt),{});Ht.x=zt*vt.taskMargin+zt*vt.width+LEFT_MARGIN,Ht.y=Tt,Ht.width=vt.diagramMarginX,Ht.height=vt.diagramMarginY,Ht.colour=Mt,Ht.fill=Lt,Ht.num=Nt,Ht.actors=Wt,svgDraw.drawTask(nt,Ht,vt),bounds.insert(Ht.x,Ht.y,Ht.x+Ht.width+vt.taskMargin,300+5*30)}},journeyRenderer={setConf:setConf$1,draw:draw$1};let conf={};const setConf=function(nt){conf={...conf,...nt}},draw=(nt,rt,it)=>{try{log$1.debug(`Renering svg for syntax error
`);const vt=select("#"+rt),bt=vt.append("g");bt.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),bt.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),bt.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),bt.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),bt.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),bt.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),bt.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),bt.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+it),vt.attr("height",100),vt.attr("width",500),vt.attr("viewBox","768 0 912 512")}catch(vt){log$1.error("Error while rendering info diagram"),log$1.error(getErrorMessage(vt))}},errorRenderer={setConf,draw};let hasLoadedDiagrams=!1;const addDiagrams=()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerDiagram("error",{db:{clear:()=>{}},styles:errorStyles,renderer:errorRenderer,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},nt=>nt.toLowerCase().trim()==="error"),registerDiagram("c4",{parser:c4Parser,db:c4Db,renderer:c4Renderer,styles:c4Styles,init:nt=>{c4Renderer.setConf(nt.c4)}},c4Detector),registerDiagram("class",{parser:classParser,db:classDb,renderer:classRenderer,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetector),registerDiagram("classDiagram",{parser:classParser,db:classDb,renderer:classRendererV2,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetectorV2),registerDiagram("er",{parser:erParser,db:erDb,renderer:erRenderer,styles:erStyles},erDetector),registerDiagram("gantt",{parser:ganttParser,db:ganttDb,renderer:ganttRenderer,styles:ganttStyles},ganttDetector),registerDiagram("info",{parser:infoParser,db:infoDb,renderer:infoRenderer,styles:infoStyles},infoDetector),registerDiagram("pie",{parser:pieParser,db:pieDb,renderer:pieRenderer,styles:pieStyles},pieDetector),registerDiagram("requirement",{parser:requirementParser,db:requirementDb,renderer:requirementRenderer,styles:requirementStyles},requirementDetector),registerDiagram("sequence",{parser:sequenceParser,db:sequenceDb,renderer:sequenceRenderer,styles:sequenceStyles,init:nt=>{if(nt.sequence||(nt.sequence={}),nt.sequence.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,"sequenceDiagram"in nt)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");sequenceDb.setWrap(nt.wrap),sequenceRenderer.setConf(nt.sequence)}},sequenceDetector),registerDiagram("state",{parser:stateParser,db:stateDb,renderer:stateRenderer,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetector),registerDiagram("stateDiagram",{parser:stateParser,db:stateDb,renderer:stateRendererV2,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetectorV2),registerDiagram("journey",{parser:journeyParser,db:journeyDb,renderer:journeyRenderer,styles:journeyStyles,init:nt=>{journeyRenderer.setConf(nt.journey),journeyDb.clear()}},journeyDetector),registerDiagram("flowchart",{parser:flowParser,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,flowRenderer.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-1")}},flowDetector),registerDiagram("flowchart-v2",{parser:flowParser,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,setConfig({flowchart:{arrowMarkerAbsolute:nt.arrowMarkerAbsolute}}),flowRendererV2.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-2")}},flowDetectorV2),registerDiagram("gitGraph",{parser:gitGraphParser,db:gitGraphDb,renderer:gitGraphRenderer,styles:gitGraphStyles},gitGraphDetector))};class Diagram{constructor(rt,it){__publicField(this,"type","graph"),__publicField(this,"parser"),__publicField(this,"renderer"),__publicField(this,"db"),__publicField(this,"detectTypeFailed",!1);var vt,bt;this.txt=rt;const wt=getConfig$1();this.txt=rt;try{this.type=detectType(rt,wt)}catch(Lt){this.handleError(Lt,it),this.type="error",this.detectTypeFailed=!0}const Tt=getDiagram(this.type);log$1.debug("Type "+this.type),this.db=Tt.db,(bt=(vt=this.db).clear)==null||bt.call(vt),this.renderer=Tt.renderer,this.parser=Tt.parser;const kt=this.parser.parse.bind(this.parser);this.parser.parse=Lt=>kt(extractFrontMatter(Lt,this.db)),this.parser.parser.yy=this.db,Tt.init&&(Tt.init(wt),log$1.debug("Initialized diagram "+this.type,wt)),this.txt+=`
`,this.parse(this.txt,it)}parse(rt,it){var vt,bt;if(this.detectTypeFailed)return!1;try{return rt=rt+`
`,(bt=(vt=this.db).clear)==null||bt.call(vt),this.parser.parse(rt),!0}catch(wt){this.handleError(wt,it)}return!1}handleError(rt,it){if(it===void 0)throw rt;if(isDetailedError(rt)){it(rt.str,rt.hash);return}it(rt)}getParser(){return this.parser}getType(){return this.type}}const getDiagramFromText=(nt,rt)=>{const it=detectType(nt,getConfig$1());try{getDiagram(it)}catch{const bt=getDiagramLoader(it);if(!bt)throw new Error(`Diagram ${it} not found.`);return bt().then(({diagram:wt})=>(registerDiagram(it,wt,void 0),new Diagram(nt,rt)))}return new Diagram(nt,rt)},Diagram$1=Diagram;function setA11yDiagramInfo(nt,rt){isEmpty(rt)||nt.attr("aria-roledescription",rt)}function addSVGa11yTitleDescription(nt,rt,it,vt){if(nt.insert!==void 0)if(rt||it){if(it){const bt="chart-desc-"+vt;nt.attr("aria-describedby",bt),nt.insert("desc",":first-child").attr("id",bt).text(it)}if(rt){const bt="chart-title-"+vt;nt.attr("aria-labelledby",bt),nt.insert("title",":first-child").attr("id",bt).text(rt)}}else return}const CLASSDEF_DIAGRAMS=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function parse$1(nt,rt){return addDiagrams(),new Diagram$1(nt,rt).parse(nt,rt)}async function parseAsync$1(nt,rt){return addDiagrams(),(await getDiagramFromText(nt,rt)).parse(nt,rt)}const encodeEntities=function(nt){let rt=nt;return rt=rt.replace(/style.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/classDef.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/#\w+;/g,function(it){const vt=it.substring(1,it.length-1);return/^\+?\d+$/.test(vt)?"\uFB02\xB0\xB0"+vt+"\xB6\xDF":"\uFB02\xB0"+vt+"\xB6\xDF"}),rt},decodeEntities=function(nt){let rt=nt;return rt=rt.replace(//g,"&#"),rt=rt.replace(//g,"&"),rt=rt.replace(//g,";"),rt},cssImportantStyles=(nt,rt,it=[])=>`
.${nt} ${rt} { ${it.join(" !important; ")} !important; }`,createCssStyles=(nt,rt,it={})=>{var vt;let bt="";if(nt.themeCSS!==void 0&&(bt+=`
${nt.themeCSS}`),nt.fontFamily!==void 0&&(bt+=`
:root { --mermaid-font-family: ${nt.fontFamily}}`),nt.altFontFamily!==void 0&&(bt+=`
:root { --mermaid-alt-font-family: ${nt.altFontFamily}}`),!isEmpty(it)&&CLASSDEF_DIAGRAMS.includes(rt)){const Lt=nt.htmlLabels||((vt=nt.flowchart)==null?void 0:vt.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const Mt in it){const Nt=it[Mt];isEmpty(Nt.styles)||Lt.forEach(zt=>{bt+=cssImportantStyles(Nt.id,zt,Nt.styles)}),isEmpty(Nt.textStyles)||(bt+=cssImportantStyles(Nt.id,"tspan",Nt.textStyles))}}return bt},createUserStyles=(nt,rt,it,vt)=>{const bt=createCssStyles(nt,rt,it),wt=getStyles$2(rt,bt,nt.themeVariables);return serialize(compile(`${vt}{${wt}}`),stringify)},cleanUpSvgCode=(nt="",rt,it)=>{let vt=nt;return!it&&!rt&&(vt=vt.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),vt=decodeEntities(vt),vt=vt.replace(/<br>/g,"<br/>"),vt},putIntoIFrame=(nt="",rt)=>{const it=rt?rt.viewBox.baseVal.height+"px":IFRAME_HEIGHT,vt=btoa('<body style="'+IFRAME_BODY_STYLE+'">'+nt+"</body>");return`<iframe style="width:${IFRAME_WIDTH};height:${it};${IFRAME_STYLES}" src="data:text/html;base64,${vt}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},appendDivSvgG=(nt,rt,it,vt,bt)=>{const wt=nt.append("div");wt.attr("id",it),vt&&wt.attr("style",vt);const Tt=wt.append("svg").attr("id",rt).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return bt&&Tt.attr("xmlns:xlink",bt),Tt.append("g"),nt};function sandboxedIframe(nt,rt){return nt.append("iframe").attr("id",rt).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const removeExistingElements=(nt,rt,it,vt)=>{var bt,wt,Tt;(bt=nt.getElementById(rt))==null||bt.remove(),(wt=nt.getElementById(it))==null||wt.remove(),(Tt=nt.getElementById(vt))==null||Tt.remove()},render=function(nt,rt,it,vt){var bt,wt,Tt,kt,Lt;addDiagrams(),reset();const Mt=utils.detectInit(rt);Mt&&(directiveSanitizer(Mt),addDirective(Mt));const Nt=getConfig$1();log$1.debug(Nt),rt.length>((bt=Nt==null?void 0:Nt.maxTextSize)!=null?bt:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const zt="#"+nt,Ht="i"+nt,Wt="#"+Ht,Zt="d"+nt,tn="#"+Zt;let Yt=select("body");const nn=Nt.securityLevel===SECURITY_LVL_SANDBOX,rn=Nt.securityLevel===SECURITY_LVL_LOOSE,ln=Nt.fontFamily;if(vt!==void 0){if(vt&&(vt.innerHTML=""),nn){const Mr=sandboxedIframe(select(vt),Ht);Yt=select(Mr.nodes()[0].contentDocument.body),Yt.node().style.margin=0}else Yt=select(vt);appendDivSvgG(Yt,nt,Zt,`font-family: ${ln}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Zt,Ht),nn){const Mr=sandboxedIframe(select("body"),Ht);Yt=select(Mr.nodes()[0].contentDocument.body),Yt.node().style.margin=0}else Yt=select("body");appendDivSvgG(Yt,nt,Zt)}rt=encodeEntities(rt);let sn,mn;try{if(sn=getDiagramFromText(rt),"then"in sn)throw new Error("Diagram is a promise. Use renderAsync.")}catch(Mr){sn=new Diagram$1("error"),mn=Mr}const wn=Yt.select(tn).node(),Cn=sn.type,An=wn.firstChild,Pn=An.firstChild,On=CLASSDEF_DIAGRAMS.includes(Cn)?sn.renderer.getClasses(rt,sn):{},kn=createUserStyles(Nt,Cn,On,zt),gn=document.createElement("style");gn.innerHTML=kn,An.insertBefore(gn,Pn);try{sn.renderer.draw(rt,nt,pkg.version,sn)}catch(Mr){throw errorRenderer.draw(rt,nt,pkg.version),Mr}const Vn=Yt.select(`${tn} svg`),pn=(Tt=(wt=sn.db).getAccTitle)==null?void 0:Tt.call(wt),pr=(Lt=(kt=sn.db).getAccDescription)==null?void 0:Lt.call(kt);addA11yInfo(Cn,Vn,pn,pr),Yt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let yn=Yt.select(tn).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",Nt.arrowMarkerAbsolute),yn=cleanUpSvgCode(yn,nn,evaluate(Nt.arrowMarkerAbsolute)),nn){const Mr=Yt.select(tn+" svg").node();yn=putIntoIFrame(yn,Mr)}else rn||(yn=purify.sanitize(yn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(Cn){case"flowchart":case"flowchart-v2":it(yn,flowDb.bindFunctions);break;case"gantt":it(yn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(yn,classDb.bindFunctions);break;default:it(yn)}else log$1.debug("CB = undefined!");attachFunctions();const Er=select(nn?Wt:tn).node();if(Er&&"remove"in Er&&Er.remove(),mn)throw mn;return yn},renderAsync$1=async function(nt,rt,it,vt){var bt,wt,Tt,kt,Lt;addDiagrams(),reset();const Mt=utils.detectInit(rt);Mt&&(directiveSanitizer(Mt),addDirective(Mt));const Nt=getConfig$1();log$1.debug(Nt),rt.length>((bt=Nt==null?void 0:Nt.maxTextSize)!=null?bt:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const zt="#"+nt,Ht="i"+nt,Wt="#"+Ht,Zt="d"+nt,tn="#"+Zt;let Yt=select("body");const nn=Nt.securityLevel===SECURITY_LVL_SANDBOX,rn=Nt.securityLevel===SECURITY_LVL_LOOSE,ln=Nt.fontFamily;if(vt!==void 0){if(vt&&(vt.innerHTML=""),nn){const Mr=sandboxedIframe(select(vt),Ht);Yt=select(Mr.nodes()[0].contentDocument.body),Yt.node().style.margin=0}else Yt=select(vt);appendDivSvgG(Yt,nt,Zt,`font-family: ${ln}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Zt,Ht),nn){const Mr=sandboxedIframe(select("body"),Ht);Yt=select(Mr.nodes()[0].contentDocument.body),Yt.node().style.margin=0}else Yt=select("body");appendDivSvgG(Yt,nt,Zt)}rt=encodeEntities(rt);let sn,mn;try{sn=await getDiagramFromText(rt)}catch(Mr){sn=new Diagram$1("error"),mn=Mr}const wn=Yt.select(tn).node(),Cn=sn.type,An=wn.firstChild,Pn=An.firstChild,On=CLASSDEF_DIAGRAMS.includes(Cn)?sn.renderer.getClasses(rt,sn):{},kn=createUserStyles(Nt,Cn,On,zt),gn=document.createElement("style");gn.innerHTML=kn,An.insertBefore(gn,Pn);try{await sn.renderer.draw(rt,nt,pkg.version,sn)}catch(Mr){throw errorRenderer.draw(rt,nt,pkg.version),Mr}const Vn=Yt.select(`${tn} svg`),pn=(Tt=(wt=sn.db).getAccTitle)==null?void 0:Tt.call(wt),pr=(Lt=(kt=sn.db).getAccDescription)==null?void 0:Lt.call(kt);addA11yInfo(Cn,Vn,pn,pr),Yt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let yn=Yt.select(tn).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",Nt.arrowMarkerAbsolute),yn=cleanUpSvgCode(yn,nn,evaluate(Nt.arrowMarkerAbsolute)),nn){const Mr=Yt.select(tn+" svg").node();yn=putIntoIFrame(yn,Mr)}else rn||(yn=purify.sanitize(yn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(Cn){case"flowchart":case"flowchart-v2":it(yn,flowDb.bindFunctions);break;case"gantt":it(yn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(yn,classDb.bindFunctions);break;default:it(yn)}else log$1.debug("CB = undefined!");attachFunctions();const Er=select(nn?Wt:tn).node();if(Er&&"remove"in Er&&Er.remove(),mn)throw mn;return yn};let currentDirective={};const parseDirective=function(nt,rt,it,vt){try{if(rt!==void 0)switch(rt=rt.trim(),it){case"open_directive":currentDirective={};break;case"type_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.type=rt.toLowerCase();break;case"arg_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.args=JSON.parse(rt);break;case"close_directive":handleDirective(nt,currentDirective,vt),currentDirective=void 0;break}}catch(bt){log$1.error(`Error while rendering sequenceDiagram directive: ${rt} jison context: ${it}`),log$1.error(bt.message)}},handleDirective=function(nt,rt,it){switch(log$1.debug(`Directive type=${rt.type} with args:`,rt.args),rt.type){case"init":case"initialize":{["config"].forEach(vt=>{rt.args[vt]!==void 0&&(it==="flowchart-v2"&&(it="flowchart"),rt.args[it]=rt.args[vt],delete rt.args[vt])}),log$1.debug("sanitize in handleDirective",rt.args),directiveSanitizer(rt.args),log$1.debug("sanitize in handleDirective (done)",rt.args),addDirective(rt.args);break}case"wrap":case"nowrap":nt&&nt.setWrap&&nt.setWrap(rt.type==="wrap");break;case"themeCss":log$1.warn("themeCss encountered");break;default:log$1.warn(`Unhandled directive: source: '%%{${rt.type}: ${JSON.stringify(rt.args?rt.args:{})}}%%`,rt);break}};function initialize$1(nt={}){var rt;(nt==null?void 0:nt.fontFamily)&&!((rt=nt.themeVariables)!=null&&rt.fontFamily)&&(nt.themeVariables={fontFamily:nt.fontFamily}),saveConfigFromInitialize(nt),(nt==null?void 0:nt.theme)&&nt.theme in theme?nt.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables):nt&&(nt.themeVariables=theme.default.getThemeVariables(nt.themeVariables));const it=typeof nt=="object"?setSiteConfig(nt):getSiteConfig();setLogLevel$1(it.logLevel),addDiagrams()}function addA11yInfo(nt,rt,it,vt){setA11yDiagramInfo(rt,nt),addSVGa11yTitleDescription(rt,it,vt,rt.attr("id"))}const mermaidAPI=Object.freeze({render,renderAsync:renderAsync$1,parse:parse$1,parseAsync:parseAsync$1,parseDirective,initialize:initialize$1,getConfig:getConfig$1,setConfig,getSiteConfig,updateSiteConfig,reset:()=>{reset()},globalReset:()=>{reset(defaultConfig)},defaultConfig});setLogLevel$1(getConfig$1().logLevel);reset(getConfig$1());let externalDiagramsRegistered=!1;const init$1=async function(nt,rt,it){try{externalDiagramsRegistered?await initThrowsErrorsAsync(nt,rt,it):initThrowsErrors(nt,rt,it)}catch(vt){log$1.warn("Syntax Error rendering"),isDetailedError(vt)&&log$1.warn(vt.str),mermaid.parseError&&mermaid.parseError(vt)}},handleError=(nt,rt,it)=>{log$1.warn(nt),isDetailedError(nt)?(it&&it(nt.str,nt.hash),rt.push({...nt,message:nt.str,error:nt})):(it&&it(nt),nt instanceof Error&&rt.push({str:nt.message,message:nt.message,hash:nt.name,error:nt}))},initThrowsErrors=function(nt,rt,it){const vt=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let bt;if(rt===void 0)bt=document.querySelectorAll(".mermaid");else if(typeof rt=="string")bt=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)bt=[rt];else if(rt instanceof NodeList)bt=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${bt.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const wt=new utils.initIdGenerator(vt.deterministicIds,vt.deterministicIDSeed);let Tt;const kt=[];for(const Lt of Array.from(bt)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const Mt=`mermaid-${wt.next()}`;Tt=Lt.innerHTML,Tt=utils.entityDecode(Tt).trim().replace(/<br\s*\/?>/gi,"<br/>");const Nt=utils.detectInit(Tt);Nt&&log$1.debug("Detected early reinit: ",Nt);try{mermaidAPI.render(Mt,Tt,(zt,Ht)=>{Lt.innerHTML=zt,it!==void 0&&it(Mt),Ht&&Ht(Lt)},Lt)}catch(zt){handleError(zt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},registerLazyLoadedDiagrams=nt=>{for(const{id:rt,detector:it,loader:vt}of nt)addDetector(rt,it,vt)},loadExternalDiagrams=async nt=>{log$1.debug(`Loading ${nt.length} external diagrams`);const it=(await Promise.allSettled(nt.map(async({id:vt,detector:bt,loader:wt})=>{const{diagram:Tt}=await wt();registerDiagram(vt,Tt,bt)}))).filter(vt=>vt.status==="rejected");if(it.length>0){log$1.error(`Failed to load ${it.length} external diagrams`);for(const vt of it)log$1.error(vt);throw new Error(`Failed to load ${it.length} external diagrams`)}},initThrowsErrorsAsync=async function(nt,rt,it){const vt=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let bt;if(rt===void 0)bt=document.querySelectorAll(".mermaid");else if(typeof rt=="string")bt=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)bt=[rt];else if(rt instanceof NodeList)bt=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${bt.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const wt=new utils.initIdGenerator(vt.deterministicIds,vt.deterministicIDSeed);let Tt;const kt=[];for(const Lt of Array.from(bt)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const Mt=`mermaid-${wt.next()}`;Tt=Lt.innerHTML,Tt=utils.entityDecode(Tt).trim().replace(/<br\s*\/?>/gi,"<br/>");const Nt=utils.detectInit(Tt);Nt&&log$1.debug("Detected early reinit: ",Nt);try{await mermaidAPI.renderAsync(Mt,Tt,(zt,Ht)=>{Lt.innerHTML=zt,it!==void 0&&it(Mt),Ht&&Ht(Lt)},Lt)}catch(zt){handleError(zt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},initialize=function(nt){mermaidAPI.initialize(nt)},registerExternalDiagrams=async(nt,{lazyLoad:rt=!0}={})=>{rt?registerLazyLoadedDiagrams(nt):await loadExternalDiagrams(nt),externalDiagramsRegistered=!0},contentLoaded=function(){if(mermaid.startOnLoad){const{startOnLoad:nt}=mermaidAPI.getConfig();nt&&mermaid.init()}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",contentLoaded,!1)}const setParseErrorHandler=function(nt){mermaid.parseError=nt},parse=nt=>mermaidAPI.parse(nt,mermaid.parseError),executionQueue=[];let executionQueueRunning=!1;const executeQueue=async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const nt=executionQueue.shift();if(nt)try{await nt()}catch(rt){log$1.error("Error executing queue",rt)}}executionQueueRunning=!1}},parseAsync=nt=>new Promise((rt,it)=>{const vt=()=>new Promise((bt,wt)=>{mermaidAPI.parseAsync(nt,mermaid.parseError).then(Tt=>{bt(Tt),rt(Tt)},Tt=>{log$1.error("Error parsing",Tt),wt(Tt),it(Tt)})});executionQueue.push(vt),executeQueue()}),renderAsync=(nt,rt,it,vt)=>new Promise((bt,wt)=>{const Tt=()=>new Promise((kt,Lt)=>{mermaidAPI.renderAsync(nt,rt,it,vt).then(Mt=>{kt(Mt),bt(Mt)},Mt=>{log$1.error("Error parsing",Mt),Lt(Mt),wt(Mt)})});executionQueue.push(Tt),executeQueue()}),mermaid={startOnLoad:!0,diagrams:{},mermaidAPI,parse,parseAsync,render:mermaidAPI.render,renderAsync,init:init$1,initThrowsErrors,initThrowsErrorsAsync,registerExternalDiagrams,initialize,parseError:void 0,contentLoaded,setParseErrorHandler},_hoisted_1$9={class:"content"},_hoisted_2$7=createBaseVNode("div",{id:"diagram"},null,-1),_hoisted_3$7={key:0,id:"caption-bar"},_hoisted_4$5=["innerHTML"],_sfc_main$b=defineComponent({__name:"Mermaid.ce",props:{type:{type:String},caption:{type:String},width:{type:String},height:{type:String},position:{type:String},right:{type:Boolean},left:{type:Boolean},full:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Mt;return(Mt=it==null?void 0:it.value)==null?void 0:Mt.parentNode}),bt=computed(()=>{var Mt,Nt;return(Nt=(Mt=it.value)==null?void 0:Mt.getRootNode())==null?void 0:Nt.host}),wt=computed(()=>{var Mt;return(Mt=vt.value)==null?void 0:Mt.querySelector(".content")});watch$1(bt,()=>kt());const Tt=rt.position||(rt.right?"right":rt.left?"left":"full");function kt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Tt),Tt==="full"?bt.value.style.width="100%":(bt.value.style.float=Tt,bt.value.style.width="50%"),bt.value.style.width=window.getComputedStyle(bt.value).width,wt.value.style.width=rt.width||"100%";let Mt=parseInt(window.getComputedStyle(wt.value).width.slice(0,-2));wt.value.style.width=`${Mt}px`,Lt()}function Lt(){let Mt=bt.value.textContent.trim();mermaid.initialize({startOnLoad:!1}),async function(){var Ht;let Nt=(Ht=vt.value)==null?void 0:Ht.querySelector("#diagram");const zt=function(Wt){Nt&&(Nt.innerHTML=Wt)};await mermaid.render("diagram",Mt,zt)}()}return(Mt,Nt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createBaseVNode("div",_hoisted_1$9,[_hoisted_2$7,rt.caption?(openBlock(),createElementBlock("div",_hoisted_3$7,[createBaseVNode("div",{class:"label",innerHTML:nt.caption},null,8,_hoisted_4$5)])):createCommentVNode("",!0)])],512))}}),_style_0$6=`*{box-sizing:border-box}.content{display:flex;flex-direction:column;justify-content:center;align-content:center;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#diagram{display:block;margin:auto;width:100%;padding:12px 0}#caption-bar{display:flex;align-items:center;height:32px;width:100%;background-color:#555;color:#fff;padding:0 12px}.entityBox:hover{fill:#ff0}
`,Mermaid=_export_sfc(_sfc_main$b,[["styles",[_style_0$6]]]),_hoisted_1$8=["name"],_hoisted_2$6=["label"],_hoisted_3$6=["innerHTML"],_sfc_main$a=defineComponent({__name:"Modal.ce",props:{src:{type:String},prefix:{type:String},label:{type:String},buttonLabel:{type:String,default:"Show me"},buttonIcon:{type:String},width:{type:String}},setup(nt){const rt=nt,it=location.hostname==="localhost"?"http://localhost:8000":"https://api.juncture-digital.org",vt=ref(null),bt=computed(()=>{var Zt;return(Zt=vt==null?void 0:vt.value)==null?void 0:Zt.parentNode}),wt=computed(()=>{var Zt,tn;return(tn=(Zt=vt.value)==null?void 0:Zt.getRootNode())==null?void 0:tn.host}),Tt=computed(()=>{var Zt;return(Zt=bt.value)==null?void 0:Zt.querySelector("#main")}),kt=ref("80vw"),Lt=ref(!1);watch$1(Lt,()=>{Mt.open=Lt.value,zt.value||Ht()});let Mt;const Nt=ref(),zt=ref();watch$1(wt,()=>{kt.value=rt.width||(isMobile()?"100vw":"80vh");let Zt=wt.value.textContent.split(`
`),tn=[];if(Zt.forEach(Yt=>{(Yt.trim().length>0||tn.length>0)&&tn.push(Yt)}),tn.length>0){let Yt=(tn[0].match(/(^\s+)/)||[""])[0].length;Nt.value=tn.map(nn=>(nn.match(/(^\s+)/)||[""])[0].length>=Yt?nn.slice(Yt):nn).join(`
`)}}),watch$1(Tt,()=>{var Zt;Mt=(Zt=bt.value)==null?void 0:Zt.querySelector(".dialog"),Mt.addEventListener("sl-hide",tn=>{tn.target===Mt&&(Lt.value=!1)})});function Ht(){if(zt.value="",rt.src){let Zt=`${it}/html/${rt.src}`,[tn,Yt,...nn]=rt.src.split("/");tn==="juncture-digital"&&Yt==="juncture"&&(location.hostname==="dev.juncture-digital.org"||location.hostname==="localhost")&&(Zt+="?ref=dev"),fetch(Zt).then(rn=>rn.text()).then(rn=>{var mn;let sn=(mn=new DOMParser().parseFromString(rn,"text/html").children[0].children[1].querySelector("main"))==null?void 0:mn.outerHTML;sn&&(zt.value=sn),nextTick(()=>initTippy(bt.value,!0))})}else fetch(`${it}/html/?inline=true`,{method:"POST",body:JSON.stringify({prefix:`${rt.prefix}`,path:"",markdown:Nt.value})}).then(Zt=>Zt.text()).then(Zt=>{var nn;let Yt=(nn=new DOMParser().parseFromString(Zt,"text/html").children[0].children[1].querySelector("main"))==null?void 0:nn.outerHTML;Yt&&(zt.value=Yt),nextTick(()=>initTippy(bt.value,!0))})}function Wt(Zt){var Yt;let tn=Nt.value;tn&&((Yt=Zt.dataTransfer)==null||Yt.setData("text/plain",tn))}return(Zt,tn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:vt,id:"main"},[createBaseVNode("sl-button",{onClick:tn[0]||(tn[0]=Yt=>Lt.value=!Lt.value)},[rt.buttonIcon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.buttonIcon,style:{"font-size":"20px"}},null,8,_hoisted_1$8)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)]),createBaseVNode("sl-dialog",{label:nt.label,class:"dialog",style:normalizeStyle({"--width":kt.value})},[createBaseVNode("div",{id:"content",innerHTML:zt.value,draggable:"true",onDragstart:Wt},null,40,_hoisted_3$6),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:tn[1]||(tn[1]=Yt=>Lt.value=!1)},"Close")],12,_hoisted_2$6)],512))}}),_style_1$3=`*{box-sizing:border-box}:host{display:inline-block}sl-dialog::part(body){padding-top:0}sl-dialog::part(panel){max-width:unset}
`,Modal=_export_sfc(_sfc_main$a,[["styles",[_style_0$o,_style_1$3]]]),_hoisted_1$7=["href"],_hoisted_2$5=["src"],_hoisted_3$5=["src"],_hoisted_4$4={class:"title-panel"},_hoisted_5$4=["innerHTML"],_hoisted_6$3=["innerHTML"],_hoisted_7$3={class:"controls"},_hoisted_8$3=["search-domain"],_hoisted_9$2=["background","contact"],_hoisted_10$1=["innerHTML"],_sfc_main$9=defineComponent({__name:"Navbar.ce",props:{label:{type:String},subtitle:{type:String},background:{type:String},logo:{type:String},url:{type:String},alpha:{type:Number},contact:{type:String},sticky:{type:Boolean,default:!1},height:{type:Number,default:80},offset:{type:Number,default:0},searchDomain:{type:String}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var kt,Lt;return(Lt=(kt=it.value)==null?void 0:kt.getRootNode())==null?void 0:Lt.host}),bt=computed(()=>{var kt,Lt;return(Lt=(kt=it==null?void 0:it.value)==null?void 0:kt.parentNode)==null?void 0:Lt.querySelector(".ve-navbar")}),wt=ref();ref([]),onMounted(()=>{Tt(),nextTick(()=>{var kt;return wt.value=(kt=vt.value.querySelector("ul"))==null?void 0:kt.innerHTML})}),watch$1(rt,()=>Tt());function Tt(){if(bt.value.style.height=`${rt.height}px`,rt.background&&(vt.value.style.backgroundColor=rt.background),rt.offset&&(bt.value.style.marginTop=`-${rt.offset}px`),rt.sticky&&(vt.value.classList.add("sticky"),vt.value.style.position="sticky",vt.value.style.top="0",rt.alpha&&(vt.value.style.background=`rgba(0, 0, 0, ${rt.alpha})`),vt.value.style.marginTop=`-${rt.offset}px`),rt.label){let kt=document.querySelector("title");kt||(kt=document.createElement("title"),document.head.appendChild(kt)),kt.innerText=rt.label}}return(kt,Lt)=>(openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-navbar",style:normalizeStyle({height:`${rt.height}px`})},[rt.logo?(openBlock(),createElementBlock(Fragment,{key:0},[rt.url?(openBlock(),createElementBlock("a",{key:0,href:rt.url},[createBaseVNode("img",{src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_2$5)],8,_hoisted_1$7)):(openBlock(),createElementBlock("img",{key:1,src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_3$5))],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$4,[createBaseVNode("div",{class:"title",innerHTML:rt.label},null,8,_hoisted_5$4),rt.subtitle?(openBlock(),createElementBlock("div",{key:0,class:"subtitle",innerHTML:rt.subtitle},null,8,_hoisted_6$3)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7$3,[rt.searchDomain?(openBlock(),createElementBlock("ve-site-search",{key:0,"search-domain":rt.searchDomain},null,8,_hoisted_8$3)):createCommentVNode("",!0),wt.value?(openBlock(),createElementBlock("ve-menu",{key:1,background:rt.background,position:"right",contact:rt.contact},[createBaseVNode("ul",{innerHTML:wt.value},null,8,_hoisted_10$1)],8,_hoisted_9$2)):createCommentVNode("",!0)])],4))}}),_style_0$5=`*{box-sizing:border-box}:host,ve-navbar{display:block;position:relative;width:100%;z-index:10}.ve-navbar{display:flex;width:100%;height:100%;padding:0;align-items:center;background-color:inherit}.logo{margin-left:20px;background-color:#fff}img.logo{max-height:50px}.controls{display:flex;align-items:center;margin-left:auto}.title-panel{display:flex;flex-direction:column;gap:6px;margin-left:1rem}.title,.subtitle{color:#fff}.title{font-size:2rem;line-height:1.8rem;padding-top:0;font-weight:700}.subtitle{font-size:1.4rem}@media (max-width: 480px){.title{font-size:1.6rem}}
`,Navbar=_export_sfc(_sfc_main$9,[["styles",[_style_0$5]]]),_hoisted_1$6={ref:"root",class:"pagination"},_hoisted_2$4=["disabled"],_hoisted_3$4=["innerHTML"],_hoisted_4$3=["innerHTML"],_hoisted_5$3=["disabled"],_sfc_main$8=defineComponent({__name:"Pager.ce",props:{total:{type:Number,required:!0},current:{type:Number,default:1}},emits:["image-selected"],setup(nt,{emit:rt}){const it=nt,vt=ref();return vt.value=it.current,watch$1(vt,()=>rt("image-selected",vt.value)),(bt,wt)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("span",{class:"prev",onClick:wt[0]||(wt[0]=Tt=>vt.value>1&&--vt.value),disabled:vt.value===1},"\xAB",8,_hoisted_2$4),createBaseVNode("span",{class:"current",innerHTML:vt.value},null,8,_hoisted_3$4),createTextVNode(" / "),createBaseVNode("span",{class:"total",innerHTML:it.total},null,8,_hoisted_4$3),createBaseVNode("span",{class:"next",onClick:wt[1]||(wt[1]=Tt=>vt.value<it.total&&++vt.value),disabled:vt.value===it.total},"\xBB",8,_hoisted_5$3)],512))}}),_style_0$4=`.pagination{display:flex;align-items:center;justify-content:center;background-color:#eee;height:30px;color:#444}.current,.total{padding:0 12px;font-size:1.3rem}.prev[disabled=true],.next[disabled=true]{color:#ccc;cursor:unset}.prev,.next{height:100%;float:left;padding:0 8px;text-decoration:none;transition:background-color .3s;cursor:pointer;font-size:40px;margin-top:-28px}.prev[disabled=false]:hover,.next[disabled=false]:hover{color:var(--sl-color-primary-700)}
`,Pager=_export_sfc(_sfc_main$8,[["styles",[_style_0$4]]]),_hoisted_1$5=createBaseVNode("input",{class:"search-btn",type:"checkbox",id:"search-btn"},null,-1),_hoisted_2$3={class:"wrapper"},_hoisted_3$3={class:"search-form"},_hoisted_4$2={class:"input-wrapper"},_hoisted_5$2={key:0,class:"search-results"},_hoisted_6$2=["href"],_hoisted_7$2=["innerHTML"],_hoisted_8$2=["innerHTML"],_hoisted_9$1={key:0},_sfc_main$7=defineComponent({__name:"SiteSearch.ce",props:{searchDomain:{type:String}},setup(nt){const rt=nt,it="/search",vt=ref(null),bt=computed(()=>{var Yt;return(Yt=vt==null?void 0:vt.value)==null?void 0:Yt.parentNode}),wt=ref(),Tt=ref(),kt=ref(""),Lt=ref([]),Mt=ref(0),Nt=ref(!1);onMounted(()=>zt());function zt(){var Yt,nn;wt.value=(Yt=bt.value)==null?void 0:Yt.querySelector("#search-input"),wt.value.value="",Tt.value=(nn=bt.value)==null?void 0:nn.querySelector("#search-btn"),Lt.value=[]}watch$1(Nt,()=>{var Yt;Tt.value&&(Tt.value.checked=Nt.value),Nt&&((Yt=wt.value)==null||Yt.focus())});function Ht(){var ln;let Yt=(ln=wt.value)==null?void 0:ln.value.replace(/ /,"%20"),nn=Yt===kt.value?Lt.value.length+1:1,rn=`${it}?domain=${rt.searchDomain}&q=${Yt}&start=${nn}`;fetch(rn).then(sn=>sn.json()).then(sn=>{Mt.value=parseInt(sn.searchInformation.totalResults);let mn=sn.items.map(wn=>{let Cn=new URL(wn.link);return wn.link=`${location.origin}${Cn.pathname}`,wn});Lt.value=Yt!==kt.value?mn:[...Lt.value,...mn],kt.value=Yt||""})}function Wt(Yt){Yt.key==="Enter"&&Ht()}function Zt(){Nt.value=!1,wt.value&&(wt.value.value=""),kt.value="",Mt.value=0,Lt.value=[]}function tn(){Nt.value=!Nt.value}return(Yt,nn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:vt,class:"search"},[_hoisted_1$5,createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("sl-icon-button",{class:"cancel",onClick:Zt,name:"x-circle",label:"Clear"}),createBaseVNode("input",{type:"text",id:"search-input",class:"search-input","on:onKeyUp":Wt,autocomplete:"off",role:"textbox",placeholder:"Search site"},null,32)])]),Lt.value.length>0?(openBlock(),createElementBlock("ul",_hoisted_5$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Lt.value,(rn,ln)=>(openBlock(),createElementBlock("li",{key:`sr=${ln}`},[createBaseVNode("a",{href:rn.link},[createBaseVNode("h3",{innerHTML:rn.htmlTitle},null,8,_hoisted_7$2),createBaseVNode("p",{innerHTML:rn.htmlSnippet},null,8,_hoisted_8$2)],8,_hoisted_6$2)]))),128)),Mt.value>Lt.value.length?(openBlock(),createElementBlock("li",_hoisted_9$1,[createBaseVNode("div",{class:"more",onClick:Ht},"More")])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("label",{class:"search-icon",htmlFor:"search-btn"},[createBaseVNode("sl-icon-button",{onClick:tn,name:"search",label:"Search"})])],512))}}),_style_0$3=`*{box-sizing:border-box}.search-icon{color:#fff;font-size:28px}.search-icon:hover{cursor:pointer}.search{position:relative;display:flex;align-items:center;gap:10px}.search-btn,.search-form,.wrapper{display:none}.wrapper{flex-direction:column;position:absolute;right:-4px}.search-form{display:flex;align-items:center}.search-input{height:30px;width:250px;border-radius:6px;padding:3px 10px;font-size:1rem}.search-submit{background-color:#fff;border-radius:6px;padding:8px 8px 4px;height:24px;z-index:4}.search-submit:hover{background-color:#ddd;cursor:pointer}.search-submit sl-icon{color:#00f;font-size:20px}.search-results{position:absolute;top:42px;left:0;width:326px;max-height:50vh;overflow-y:scroll;z-index:2;background-color:#fff;margin:0 0 0 2px;list-style:none;padding:6px;border-radius:6px;font-size:.9rem;box-shadow:0 6px 20px #00000030}.search-results li:nth-of-type(even){background-color:#e6e6df}.search-results li{padding:6px;margin:3px;border:1px solid #E6E6DF}.search-results li h3,.search-results li p{margin:8px 0}.search-results li a{text-decoration:none;color:#444}.search-results li a h3{font-weight:700}.search-results li a p{font-weight:300}.search-results li:hover{cursor:pointer;box-shadow:0 4px 8px #0003}.search-icon sl-icon-button::part(base){color:#fff}.search-btn:checked~.search-icon sl-icon-button::part(base){visibility:hidden}.search-btn:checked~.wrapper .search-form{display:flex;width:100%}.search-btn:checked~.wrapper{display:flex}.input-wrapper{display:inline-block;position:relative}.cancel{position:absolute;right:0;top:4px;font-size:16px;cursor:pointer}
`,SiteSearch=_export_sfc(_sfc_main$7,[["styles",[_style_0$3]]]);var tab_styles_default=i$4`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tab {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    border-radius: var(--sl-border-radius-medium);
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-medium) var(--sl-spacing-large);
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;
  }

  .tab:hover:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus {
    outline: none;
  }

  .tab:focus-visible:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(-1 * var(--sl-focus-ring-width) - var(--sl-focus-ring-offset));
  }

  .tab.tab--active:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab.tab--closable {
    padding-inline-end: var(--sl-spacing-small);
  }

  .tab.tab--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tab__close-button {
    font-size: var(--sl-font-size-small);
    margin-inline-start: var(--sl-spacing-small);
  }

  .tab__close-button::part(base) {
    padding: var(--sl-spacing-3x-small);
  }

  @media (forced-colors: active) {
    .tab.tab--active:not(.tab--disabled) {
      outline: solid 1px transparent;
      outline-offset: -3px;
    }
  }
`,id$1=0,SlTab=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.attrId=++id$1,this.componentId=`sl-tab-${this.attrId}`,this.panel="",this.active=!1,this.closable=!1,this.disabled=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tab")}handleCloseClick(){this.emit("sl-close")}handleActiveChange(){this.setAttribute("aria-selected",this.active?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}focus(nt){this.tab.focus(nt)}blur(){this.tab.blur()}render(){return this.id=this.id.length>0?this.id:this.componentId,y$2`
      <div
        part="base"
        class=${o$1({tab:!0,"tab--active":this.active,"tab--closable":this.closable,"tab--disabled":this.disabled})}
        tabindex=${this.disabled?"-1":"0"}
      >
        <slot></slot>
        ${this.closable?y$2`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                class="tab__close-button"
                @click=${this.handleCloseClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlTab.styles=tab_styles_default;__decorateClass([i2$2(".tab")],SlTab.prototype,"tab",2);__decorateClass([e2$2({reflect:!0})],SlTab.prototype,"panel",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTab.prototype,"active",2);__decorateClass([e2$2({type:Boolean})],SlTab.prototype,"closable",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTab.prototype,"disabled",2);__decorateClass([watch("active")],SlTab.prototype,"handleActiveChange",1);__decorateClass([watch("disabled")],SlTab.prototype,"handleDisabledChange",1);SlTab=__decorateClass([e$1("sl-tab")],SlTab);var tab_group_styles_default=i$4`
  ${component_styles_default}

  :host {
    --indicator-color: var(--sl-color-primary-600);
    --track-color: var(--sl-color-neutral-200);
    --track-width: 2px;

    display: block;
  }

  .tab-group {
    display: flex;
    border-radius: 0;
  }

  .tab-group__tabs {
    display: flex;
    position: relative;
  }

  .tab-group__indicator {
    position: absolute;
    transition: var(--sl-transition-fast) translate ease, var(--sl-transition-fast) width ease;
  }

  .tab-group--has-scroll-controls .tab-group__nav-container {
    position: relative;
    padding: 0 var(--sl-spacing-x-large);
  }

  .tab-group__body {
    display: block;
    overflow: auto;
  }

  .tab-group__scroll-button {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    bottom: 0;
    width: var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button--start {
    left: 0;
  }

  .tab-group__scroll-button--end {
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--start {
    left: auto;
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--end {
    left: 0;
    right: auto;
  }

  /*
   * Top
   */

  .tab-group--top {
    flex-direction: column;
  }

  .tab-group--top .tab-group__nav-container {
    order: 1;
  }

  .tab-group--top .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--top .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--top .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-bottom: solid var(--track-width) var(--track-color);
  }

  .tab-group--top .tab-group__indicator {
    bottom: calc(-1 * var(--track-width));
    border-bottom: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--top .tab-group__body {
    order: 2;
  }

  .tab-group--top ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Bottom
   */

  .tab-group--bottom {
    flex-direction: column;
  }

  .tab-group--bottom .tab-group__nav-container {
    order: 2;
  }

  .tab-group--bottom .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--bottom .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-top: solid var(--track-width) var(--track-color);
  }

  .tab-group--bottom .tab-group__indicator {
    top: calc(-1 * var(--track-width));
    border-top: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--bottom .tab-group__body {
    order: 1;
  }

  .tab-group--bottom ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Start
   */

  .tab-group--start {
    flex-direction: row;
  }

  .tab-group--start .tab-group__nav-container {
    order: 1;
  }

  .tab-group--start .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-inline-end: solid var(--track-width) var(--track-color);
  }

  .tab-group--start .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    border-right: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--start.tab-group--rtl .tab-group__indicator {
    right: auto;
    left: calc(-1 * var(--track-width));
  }

  .tab-group--start .tab-group__body {
    flex: 1 1 auto;
    order: 2;
  }

  .tab-group--start ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }

  /*
   * End
   */

  .tab-group--end {
    flex-direction: row;
  }

  .tab-group--end .tab-group__nav-container {
    order: 2;
  }

  .tab-group--end .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-left: solid var(--track-width) var(--track-color);
  }

  .tab-group--end .tab-group__indicator {
    left: calc(-1 * var(--track-width));
    border-inline-start: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--end.tab-group--rtl .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    left: auto;
  }

  .tab-group--end .tab-group__body {
    flex: 1 1 auto;
    order: 1;
  }

  .tab-group--end ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }
`,SlTabGroup=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController2(this),this.tabs=[],this.panels=[],this.hasScrollControls=!1,this.placement="top",this.activation="auto",this.noScrollControls=!1}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>{this.repositionIndicator(),this.updateScrollControls()}),this.mutationObserver=new MutationObserver(nt=>{nt.some(rt=>!["aria-labelledby","aria-controls"].includes(rt.attributeName))&&setTimeout(()=>this.setAriaLabels()),nt.some(rt=>rt.attributeName==="disabled")&&this.syncTabsAndPanels()}),this.updateComplete.then(()=>{this.syncTabsAndPanels(),this.mutationObserver.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.resizeObserver.observe(this.nav),new IntersectionObserver((rt,it)=>{var vt;rt[0].intersectionRatio>0&&(this.setAriaLabels(),this.setActiveTab((vt=this.getActiveTab())!=null?vt:this.tabs[0],{emitEvents:!1}),it.unobserve(rt[0].target))}).observe(this.tabGroup)})}disconnectedCallback(){this.mutationObserver.disconnect(),this.resizeObserver.unobserve(this.nav)}getAllTabs(nt={includeDisabled:!0}){return[...this.shadowRoot.querySelector('slot[name="nav"]').assignedElements()].filter(it=>nt.includeDisabled?it.tagName.toLowerCase()==="sl-tab":it.tagName.toLowerCase()==="sl-tab"&&!it.disabled)}getAllPanels(){return[...this.body.assignedElements()].filter(nt=>nt.tagName.toLowerCase()==="sl-tab-panel")}getActiveTab(){return this.tabs.find(nt=>nt.active)}handleClick(nt){const it=nt.target.closest("sl-tab");(it==null?void 0:it.closest("sl-tab-group"))===this&&it!==null&&this.setActiveTab(it,{scrollBehavior:"smooth"})}handleKeyDown(nt){const it=nt.target.closest("sl-tab");if((it==null?void 0:it.closest("sl-tab-group"))===this&&(["Enter"," "].includes(nt.key)&&it!==null&&(this.setActiveTab(it,{scrollBehavior:"smooth"}),nt.preventDefault()),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(nt.key))){const bt=this.tabs.find(Tt=>Tt.matches(":focus")),wt=this.localize.dir()==="rtl";if((bt==null?void 0:bt.tagName.toLowerCase())==="sl-tab"){let Tt=this.tabs.indexOf(bt);nt.key==="Home"?Tt=0:nt.key==="End"?Tt=this.tabs.length-1:["top","bottom"].includes(this.placement)&&nt.key===(wt?"ArrowRight":"ArrowLeft")||["start","end"].includes(this.placement)&&nt.key==="ArrowUp"?Tt--:(["top","bottom"].includes(this.placement)&&nt.key===(wt?"ArrowLeft":"ArrowRight")||["start","end"].includes(this.placement)&&nt.key==="ArrowDown")&&Tt++,Tt<0&&(Tt=this.tabs.length-1),Tt>this.tabs.length-1&&(Tt=0),this.tabs[Tt].focus({preventScroll:!0}),this.activation==="auto"&&this.setActiveTab(this.tabs[Tt],{scrollBehavior:"smooth"}),["top","bottom"].includes(this.placement)&&scrollIntoView(this.tabs[Tt],this.nav,"horizontal"),nt.preventDefault()}}}handleScrollToStart(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft+this.nav.clientWidth:this.nav.scrollLeft-this.nav.clientWidth,behavior:"smooth"})}handleScrollToEnd(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft-this.nav.clientWidth:this.nav.scrollLeft+this.nav.clientWidth,behavior:"smooth"})}setActiveTab(nt,rt){if(rt=__spreadValues({emitEvents:!0,scrollBehavior:"auto"},rt),nt!==this.activeTab&&!nt.disabled){const it=this.activeTab;this.activeTab=nt,this.tabs.map(vt=>vt.active=vt===this.activeTab),this.panels.map(vt=>{var bt;return vt.active=vt.name===((bt=this.activeTab)==null?void 0:bt.panel)}),this.syncIndicator(),["top","bottom"].includes(this.placement)&&scrollIntoView(this.activeTab,this.nav,"horizontal",rt.scrollBehavior),rt.emitEvents&&(it&&this.emit("sl-tab-hide",{detail:{name:it.panel}}),this.emit("sl-tab-show",{detail:{name:this.activeTab.panel}}))}}setAriaLabels(){this.tabs.forEach(nt=>{const rt=this.panels.find(it=>it.name===nt.panel);rt&&(nt.setAttribute("aria-controls",rt.getAttribute("id")),rt.setAttribute("aria-labelledby",nt.getAttribute("id")))})}repositionIndicator(){const nt=this.getActiveTab();if(!nt)return;const rt=nt.clientWidth,it=nt.clientHeight,vt=this.localize.dir()==="rtl",bt=this.getAllTabs(),Tt=bt.slice(0,bt.indexOf(nt)).reduce((kt,Lt)=>({left:kt.left+Lt.clientWidth,top:kt.top+Lt.clientHeight}),{left:0,top:0});switch(this.placement){case"top":case"bottom":this.indicator.style.width=`${rt}px`,this.indicator.style.height="auto",this.indicator.style.translate=vt?`${-1*Tt.left}px`:`${Tt.left}px`;break;case"start":case"end":this.indicator.style.width="auto",this.indicator.style.height=`${it}px`,this.indicator.style.translate=`0 ${Tt.top}px`;break}}syncTabsAndPanels(){this.tabs=this.getAllTabs({includeDisabled:!1}),this.panels=this.getAllPanels(),this.syncIndicator()}updateScrollControls(){this.noScrollControls?this.hasScrollControls=!1:this.hasScrollControls=["top","bottom"].includes(this.placement)&&this.nav.scrollWidth>this.nav.clientWidth}syncIndicator(){this.getActiveTab()?(this.indicator.style.display="block",this.repositionIndicator()):this.indicator.style.display="none"}show(nt){const rt=this.tabs.find(it=>it.panel===nt);rt&&this.setActiveTab(rt,{scrollBehavior:"smooth"})}render(){const nt=this.localize.dir()==="rtl";return y$2`
      <div
        part="base"
        class=${o$1({"tab-group":!0,"tab-group--top":this.placement==="top","tab-group--bottom":this.placement==="bottom","tab-group--start":this.placement==="start","tab-group--end":this.placement==="end","tab-group--rtl":this.localize.dir()==="rtl","tab-group--has-scroll-controls":this.hasScrollControls})}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
      >
        <div class="tab-group__nav-container" part="nav">
          ${this.hasScrollControls?y$2`
                <sl-icon-button
                  part="scroll-button scroll-button--start"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--start"
                  name=${nt?"chevron-right":"chevron-left"}
                  library="system"
                  label=${this.localize.term("scrollToStart")}
                  @click=${this.handleScrollToStart}
                ></sl-icon-button>
              `:""}

          <div class="tab-group__nav">
            <div part="tabs" class="tab-group__tabs" role="tablist">
              <div part="active-tab-indicator" class="tab-group__indicator"></div>
              <slot name="nav" @slotchange=${this.syncTabsAndPanels}></slot>
            </div>
          </div>

          ${this.hasScrollControls?y$2`
                <sl-icon-button
                  part="scroll-button scroll-button--end"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--end"
                  name=${nt?"chevron-left":"chevron-right"}
                  library="system"
                  label=${this.localize.term("scrollToEnd")}
                  @click=${this.handleScrollToEnd}
                ></sl-icon-button>
              `:""}
        </div>

        <slot part="body" class="tab-group__body" @slotchange=${this.syncTabsAndPanels}></slot>
      </div>
    `}};SlTabGroup.styles=tab_group_styles_default;__decorateClass([i2$2(".tab-group")],SlTabGroup.prototype,"tabGroup",2);__decorateClass([i2$2(".tab-group__body")],SlTabGroup.prototype,"body",2);__decorateClass([i2$2(".tab-group__nav")],SlTabGroup.prototype,"nav",2);__decorateClass([i2$2(".tab-group__indicator")],SlTabGroup.prototype,"indicator",2);__decorateClass([t$1()],SlTabGroup.prototype,"hasScrollControls",2);__decorateClass([e2$2()],SlTabGroup.prototype,"placement",2);__decorateClass([e2$2()],SlTabGroup.prototype,"activation",2);__decorateClass([e2$2({attribute:"no-scroll-controls",type:Boolean})],SlTabGroup.prototype,"noScrollControls",2);__decorateClass([watch("noScrollControls",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"updateScrollControls",1);__decorateClass([watch("placement",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"syncIndicator",1);SlTabGroup=__decorateClass([e$1("sl-tab-group")],SlTabGroup);var tab_panel_styles_default=i$4`
  ${component_styles_default}

  :host {
    --padding: 0;

    display: block;
  }

  .tab-panel {
    display: block;
    padding: var(--padding);
  }

  .tab-panel:not(.tab-panel--active) {
    display: none;
  }
`,id=0,SlTabPanel=class extends ShoelaceElement{constructor(){super(...arguments),this.attrId=++id,this.componentId=`sl-tab-panel-${this.attrId}`,this.name="",this.active=!1}connectedCallback(){super.connectedCallback(),this.id=this.id.length>0?this.id:this.componentId,this.setAttribute("role","tabpanel")}handleActiveChange(){this.setAttribute("aria-hidden",this.active?"false":"true")}render(){return y$2`
      <slot
        part="base"
        class=${o$1({"tab-panel":!0,"tab-panel--active":this.active})}
      ></slot>
    `}};SlTabPanel.styles=tab_panel_styles_default;__decorateClass([e2$2({reflect:!0})],SlTabPanel.prototype,"name",2);__decorateClass([e2$2({type:Boolean,reflect:!0})],SlTabPanel.prototype,"active",2);__decorateClass([watch("active")],SlTabPanel.prototype,"handleActiveChange",1);SlTabPanel=__decorateClass([e$1("sl-tab-panel")],SlTabPanel);const _hoisted_1$4=["open","draggable"],_hoisted_2$2=createBaseVNode("sl-icon",{name:"plus-square",slot:"expand-icon"},null,-1),_hoisted_3$2=createBaseVNode("sl-icon",{name:"dash-square",slot:"collapse-icon"},null,-1),_hoisted_4$1={slot:"summary"},_hoisted_5$1={content:"Show code snippets",placement:"top"},_hoisted_6$1={style:{display:"flex",alignItems:"center",gap:"9px"}},_hoisted_7$1=createBaseVNode("sl-icon",{name:"markdown",style:{"font-size":"24px"}},null,-1),_hoisted_8$1=createBaseVNode("sl-icon",{name:"code-slash",style:{"font-size":"24px"}},null,-1),_hoisted_9=["innerHTML"],_hoisted_10=createBaseVNode("sl-tab",{slot:"nav",panel:"markdown"},[createBaseVNode("sl-icon",{name:"markdown"}),createTextVNode("Markdown")],-1),_hoisted_11=createBaseVNode("sl-tab",{slot:"nav",panel:"html"},[createBaseVNode("sl-icon",{name:"code-slash"}),createTextVNode("HTML")],-1),_hoisted_12=createBaseVNode("sl-tab",{slot:"nav",panel:"preview"},[createBaseVNode("sl-icon",{name:"eye"}),createTextVNode("Rendered")],-1),_hoisted_13={name:"markdown"},_hoisted_14={key:0},_hoisted_15={name:"html"},_hoisted_16=["innerHTML"],_hoisted_17={name:"preview"},_hoisted_18=["innerHTML","draggable"],_hoisted_19={key:1},_hoisted_20=createBaseVNode("sl-tab",{slot:"nav",panel:"markdown"},[createBaseVNode("sl-icon",{name:"markdown"}),createTextVNode("Markdown")],-1),_hoisted_21=createBaseVNode("sl-tab",{slot:"nav",panel:"html"},[createBaseVNode("sl-icon",{name:"code-slash"}),createTextVNode("HTML")],-1),_hoisted_22=createBaseVNode("sl-tab",{slot:"nav",panel:"preview"},[createBaseVNode("sl-icon",{name:"eye"}),createTextVNode("Rendered")],-1),_hoisted_23={name:"markdown"},_hoisted_24={key:0},_hoisted_25={name:"html"},_hoisted_26=["innerHTML"],_hoisted_27={name:"preview"},_hoisted_28=["innerHTML","draggable"],_sfc_main$6=defineComponent({__name:"Snippet.ce",props:{label:{type:String},collapsible:{type:Boolean,default:!1},open:{type:Boolean,default:!1},prefix:{type:String},path:{type:String},right:{type:Boolean},left:{type:Boolean},width:{type:String},height:{type:String},fill:{type:Boolean},showActive:{type:Boolean},disableDrag:{type:Boolean}},setup(nt){const rt=nt,it=location.hostname==="localhost"?"http://localhost:8000":"https://api.juncture-digital.org",vt=ref(null),bt=computed(()=>{var Zt;return(Zt=vt==null?void 0:vt.value)==null?void 0:Zt.parentNode}),wt=computed(()=>{var Zt,tn;return(tn=(Zt=vt.value)==null?void 0:Zt.getRootNode())==null?void 0:tn.host}),Tt=computed(()=>{var Zt;return(Zt=bt.value)==null?void 0:Zt.querySelector("sl-tab-group")}),kt=ref(),Lt=ref(),Mt=ref();watch$1(wt,()=>{let tn=wt.value.innerHTML.replace(/<pre v-pre="" data-lang="markup"><code class="lang-markup">/,"").replace(/<\/code><\/pre>/,"").split(`
`),Yt=[];if(tn.forEach(nn=>{(nn.trim().length>0||Yt.length>0)&&Yt.push(nn)}),Yt.length>0){let nn=(Yt[0].match(/(^\s+)/)||[""])[0].length;kt.value=Yt.map(rn=>(rn.match(/(^\s+)/)||[""])[0].length>=nn?rn.slice(nn):rn).join(`
`)}}),watch$1(Mt,()=>{Mt.value!=="markdown"&&Lt.value===void 0&&Ht(),Mt.value==="preview"&&nextTick(()=>{initTippy(bt.value,!0)}),rt.fill&&Lt.value&&nextTick(()=>zt()),rt.height&&nextTick(()=>Nt())}),watch$1(Tt,()=>{var Zt;(Zt=bt.value)==null||Zt.querySelectorAll("sl-tab").forEach(tn=>{new MutationObserver(nn=>{var ln;let rn=nn[0].target;rn.getAttribute("aria-selected")==="true"&&(Mt.value=(ln=rn.getAttribute("panel"))==null?void 0:ln.valueOf())}).observe(tn,{attributes:!0})})});function Nt(){var tn;let Zt=(tn=bt.value)==null?void 0:tn.querySelector('sl-tab-panel[name="preview"]');Mt.value==="preview"&&rt.height&&(Zt.style.height=rt.height)}function zt(){var tn,Yt;let Zt=(tn=bt.value)==null?void 0:tn.querySelector('sl-tab-panel[name="preview"]');if(Mt.value==="preview"){let nn=(Yt=bt.value)==null?void 0:Yt.querySelector("#juncture"),rn=Zt.clientWidth/2,ln=document.createElement("div");ln.style.height=`${rn}px`;let sn=nn.querySelector("ve-footer");sn?nn.insertBefore(ln,sn):nn.appendChild(ln),Zt.style.height=rt.height||`${Math.max(rn/2,500)}px`,Zt.style.overflowY="scroll"}else Zt.style.height=""}function Ht(){Lt.value="";let Zt=`${it}/html/?inline=true`;fetch(Zt,{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,markdown:kt.value})}).then(tn=>tn.text()).then(tn=>{let Yt=new DOMParser().parseFromString(tn,"text/html").children[0].children,nn=Yt[1].querySelector("main");if(nn){let rn=Yt[1].querySelector("style");rn&&nn.insertBefore(rn,nn.firstChild),Lt.value=nn.innerHTML,Mt.value==="preview"&&nextTick(()=>{var ln;rt.fill&&zt(),initTippy(bt.value,!0),observeActive((ln=bt.value)==null?void 0:ln.querySelector("#juncture"))})}})}function Wt(Zt){var Yt;let tn=kt.value;tn&&((Yt=Zt.dataTransfer)==null||Yt.setData("text/plain",tn))}return(Zt,tn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:vt,id:"main"},[nt.collapsible?(openBlock(),createElementBlock("sl-details",{key:0,class:"custom-icons",open:rt.open,draggable:!rt.disableDrag,onDragstart:Wt},[_hoisted_2$2,_hoisted_3$2,createBaseVNode("div",_hoisted_4$1,[createBaseVNode("sl-tooltip",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,[_hoisted_7$1,_hoisted_8$1,createBaseVNode("span",{innerHTML:rt.label,class:"label"},null,8,_hoisted_9)])])]),createBaseVNode("sl-tab-group",null,[_hoisted_10,_hoisted_11,_hoisted_12,createBaseVNode("sl-tab-panel",_hoisted_13,[Mt.value==="markdown"?(openBlock(),createElementBlock("ve-source-viewer",_hoisted_14,toDisplayString(kt.value),1)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_15,[Mt.value==="html"&&Lt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,innerHTML:Lt.value,language:"html"},null,8,_hoisted_16)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_17,[Mt.value==="preview"&&Lt.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Lt.value,draggable:!rt.disableDrag,onDragstart:Wt},null,40,_hoisted_18)):createCommentVNode("",!0)])])],40,_hoisted_1$4)):(openBlock(),createElementBlock("sl-tab-group",_hoisted_19,[_hoisted_20,_hoisted_21,_hoisted_22,createBaseVNode("sl-tab-panel",_hoisted_23,[Mt.value==="markdown"?(openBlock(),createElementBlock("ve-source-viewer",_hoisted_24,toDisplayString(kt.value),1)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_25,[Mt.value==="html"&&Lt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,innerHTML:Lt.value,language:"html"},null,8,_hoisted_26)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_27,[Mt.value==="preview"&&Lt.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Lt.value,draggable:!rt.disableDrag,onDragstart:Wt},null,40,_hoisted_28)):createCommentVNode("",!0)])]))],512))}}),_style_1$2=`*{box-sizing:border-box}:host{display:block;margin-top:1.5rem;border-radius:2px;border:.5px solid #ddd;margin-bottom:2rem}:host([collapsible]){border:none}#main{font-family:Roboto,sans-serif;margin-top:0}sl-tab-panel{--padding: 0}sl-tab::part(base){padding:12px}#juncture{padding:12px;font-size:1.2em;line-height:1.3}sl-details::part(header){background-color:#f9f9f9}sl-details::part(summary){font-size:1rem}sl-details::part(content){border-top:1px solid #ddd;padding:0}sl-details.custom-icons::part(summary-icon){rotate:none}sl-tab sl-icon{font-size:24px;margin-right:6px}.label{margin-left:12px;color:#555;font-weight:400}
`,Snippet=_export_sfc(_sfc_main$6,[["styles",[_style_0$o,_style_1$2]]]);var prism$1={exports:{}};(function(nt){var rt=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var it=function(vt){var bt=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,wt=0,Tt={},kt={manual:vt.Prism&&vt.Prism.manual,disableWorkerMessageHandler:vt.Prism&&vt.Prism.disableWorkerMessageHandler,util:{encode:function rn(ln){return ln instanceof Lt?new Lt(ln.type,rn(ln.content),ln.alias):Array.isArray(ln)?ln.map(rn):ln.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(rn){return Object.prototype.toString.call(rn).slice(8,-1)},objId:function(rn){return rn.__id||Object.defineProperty(rn,"__id",{value:++wt}),rn.__id},clone:function rn(ln,sn){sn=sn||{};var mn,wn;switch(kt.util.type(ln)){case"Object":if(wn=kt.util.objId(ln),sn[wn])return sn[wn];mn={},sn[wn]=mn;for(var Cn in ln)ln.hasOwnProperty(Cn)&&(mn[Cn]=rn(ln[Cn],sn));return mn;case"Array":return wn=kt.util.objId(ln),sn[wn]?sn[wn]:(mn=[],sn[wn]=mn,ln.forEach(function(An,Pn){mn[Pn]=rn(An,sn)}),mn);default:return ln}},getLanguage:function(rn){for(;rn;){var ln=bt.exec(rn.className);if(ln)return ln[1].toLowerCase();rn=rn.parentElement}return"none"},setLanguage:function(rn,ln){rn.className=rn.className.replace(RegExp(bt,"gi"),""),rn.classList.add("language-"+ln)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(mn){var rn=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(mn.stack)||[])[1];if(rn){var ln=document.getElementsByTagName("script");for(var sn in ln)if(ln[sn].src==rn)return ln[sn]}return null}},isActive:function(rn,ln,sn){for(var mn="no-"+ln;rn;){var wn=rn.classList;if(wn.contains(ln))return!0;if(wn.contains(mn))return!1;rn=rn.parentElement}return!!sn}},languages:{plain:Tt,plaintext:Tt,text:Tt,txt:Tt,extend:function(rn,ln){var sn=kt.util.clone(kt.languages[rn]);for(var mn in ln)sn[mn]=ln[mn];return sn},insertBefore:function(rn,ln,sn,mn){mn=mn||kt.languages;var wn=mn[rn],Cn={};for(var An in wn)if(wn.hasOwnProperty(An)){if(An==ln)for(var Pn in sn)sn.hasOwnProperty(Pn)&&(Cn[Pn]=sn[Pn]);sn.hasOwnProperty(An)||(Cn[An]=wn[An])}var On=mn[rn];return mn[rn]=Cn,kt.languages.DFS(kt.languages,function(kn,gn){gn===On&&kn!=rn&&(this[kn]=Cn)}),Cn},DFS:function rn(ln,sn,mn,wn){wn=wn||{};var Cn=kt.util.objId;for(var An in ln)if(ln.hasOwnProperty(An)){sn.call(ln,An,ln[An],mn||An);var Pn=ln[An],On=kt.util.type(Pn);On==="Object"&&!wn[Cn(Pn)]?(wn[Cn(Pn)]=!0,rn(Pn,sn,null,wn)):On==="Array"&&!wn[Cn(Pn)]&&(wn[Cn(Pn)]=!0,rn(Pn,sn,An,wn))}}},plugins:{},highlightAll:function(rn,ln){kt.highlightAllUnder(document,rn,ln)},highlightAllUnder:function(rn,ln,sn){var mn={callback:sn,container:rn,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};kt.hooks.run("before-highlightall",mn),mn.elements=Array.prototype.slice.apply(mn.container.querySelectorAll(mn.selector)),kt.hooks.run("before-all-elements-highlight",mn);for(var wn=0,Cn;Cn=mn.elements[wn++];)kt.highlightElement(Cn,ln===!0,mn.callback)},highlightElement:function(rn,ln,sn){var mn=kt.util.getLanguage(rn),wn=kt.languages[mn];kt.util.setLanguage(rn,mn);var Cn=rn.parentElement;Cn&&Cn.nodeName.toLowerCase()==="pre"&&kt.util.setLanguage(Cn,mn);var An=rn.textContent,Pn={element:rn,language:mn,grammar:wn,code:An};function On(gn){Pn.highlightedCode=gn,kt.hooks.run("before-insert",Pn),Pn.element.innerHTML=Pn.highlightedCode,kt.hooks.run("after-highlight",Pn),kt.hooks.run("complete",Pn),sn&&sn.call(Pn.element)}if(kt.hooks.run("before-sanity-check",Pn),Cn=Pn.element.parentElement,Cn&&Cn.nodeName.toLowerCase()==="pre"&&!Cn.hasAttribute("tabindex")&&Cn.setAttribute("tabindex","0"),!Pn.code){kt.hooks.run("complete",Pn),sn&&sn.call(Pn.element);return}if(kt.hooks.run("before-highlight",Pn),!Pn.grammar){On(kt.util.encode(Pn.code));return}if(ln&&vt.Worker){var kn=new Worker(kt.filename);kn.onmessage=function(gn){On(gn.data)},kn.postMessage(JSON.stringify({language:Pn.language,code:Pn.code,immediateClose:!0}))}else On(kt.highlight(Pn.code,Pn.grammar,Pn.language))},highlight:function(rn,ln,sn){var mn={code:rn,grammar:ln,language:sn};if(kt.hooks.run("before-tokenize",mn),!mn.grammar)throw new Error('The language "'+mn.language+'" has no grammar.');return mn.tokens=kt.tokenize(mn.code,mn.grammar),kt.hooks.run("after-tokenize",mn),Lt.stringify(kt.util.encode(mn.tokens),mn.language)},tokenize:function(rn,ln){var sn=ln.rest;if(sn){for(var mn in sn)ln[mn]=sn[mn];delete ln.rest}var wn=new zt;return Ht(wn,wn.head,rn),Nt(rn,wn,ln,wn.head,0),Zt(wn)},hooks:{all:{},add:function(rn,ln){var sn=kt.hooks.all;sn[rn]=sn[rn]||[],sn[rn].push(ln)},run:function(rn,ln){var sn=kt.hooks.all[rn];if(!(!sn||!sn.length))for(var mn=0,wn;wn=sn[mn++];)wn(ln)}},Token:Lt};vt.Prism=kt;function Lt(rn,ln,sn,mn){this.type=rn,this.content=ln,this.alias=sn,this.length=(mn||"").length|0}Lt.stringify=function rn(ln,sn){if(typeof ln=="string")return ln;if(Array.isArray(ln)){var mn="";return ln.forEach(function(On){mn+=rn(On,sn)}),mn}var wn={type:ln.type,content:rn(ln.content,sn),tag:"span",classes:["token",ln.type],attributes:{},language:sn},Cn=ln.alias;Cn&&(Array.isArray(Cn)?Array.prototype.push.apply(wn.classes,Cn):wn.classes.push(Cn)),kt.hooks.run("wrap",wn);var An="";for(var Pn in wn.attributes)An+=" "+Pn+'="'+(wn.attributes[Pn]||"").replace(/"/g,"&quot;")+'"';return"<"+wn.tag+' class="'+wn.classes.join(" ")+'"'+An+">"+wn.content+"</"+wn.tag+">"};function Mt(rn,ln,sn,mn){rn.lastIndex=ln;var wn=rn.exec(sn);if(wn&&mn&&wn[1]){var Cn=wn[1].length;wn.index+=Cn,wn[0]=wn[0].slice(Cn)}return wn}function Nt(rn,ln,sn,mn,wn,Cn){for(var An in sn)if(!(!sn.hasOwnProperty(An)||!sn[An])){var Pn=sn[An];Pn=Array.isArray(Pn)?Pn:[Pn];for(var On=0;On<Pn.length;++On){if(Cn&&Cn.cause==An+","+On)return;var kn=Pn[On],gn=kn.inside,Vn=!!kn.lookbehind,pn=!!kn.greedy,pr=kn.alias;if(pn&&!kn.pattern.global){var yn=kn.pattern.toString().match(/[imsuy]*$/)[0];kn.pattern=RegExp(kn.pattern.source,yn+"g")}for(var mr=kn.pattern||kn,Er=mn.next,Mr=wn;Er!==ln.tail&&!(Cn&&Mr>=Cn.reach);Mr+=Er.value.length,Er=Er.next){var rr=Er.value;if(ln.length>rn.length)return;if(!(rr instanceof Lt)){var vr=1,cr;if(pn){if(cr=Mt(mr,Mr,rn,Vn),!cr||cr.index>=rn.length)break;var sr=cr.index,gr=cr.index+cr[0].length,Or=Mr;for(Or+=Er.value.length;sr>=Or;)Er=Er.next,Or+=Er.value.length;if(Or-=Er.value.length,Mr=Or,Er.value instanceof Lt)continue;for(var Ar=Er;Ar!==ln.tail&&(Or<gr||typeof Ar.value=="string");Ar=Ar.next)vr++,Or+=Ar.value.length;vr--,rr=rn.slice(Mr,Or),cr.index-=Mr}else if(cr=Mt(mr,0,rr,Vn),!cr)continue;var sr=cr.index,ii=cr[0],ar=rr.slice(0,sr),fr=rr.slice(sr+ii.length),wr=Mr+rr.length;Cn&&wr>Cn.reach&&(Cn.reach=wr);var ir=Er.prev;ar&&(ir=Ht(ln,ir,ar),Mr+=ar.length),Wt(ln,ir,vr);var Ln=new Lt(An,gn?kt.tokenize(ii,gn):ii,pr,ii);if(Er=Ht(ln,ir,Ln),fr&&Ht(ln,Er,fr),vr>1){var en={cause:An+","+On,reach:wr};Nt(rn,ln,sn,Er.prev,Mr,en),Cn&&en.reach>Cn.reach&&(Cn.reach=en.reach)}}}}}}function zt(){var rn={value:null,prev:null,next:null},ln={value:null,prev:rn,next:null};rn.next=ln,this.head=rn,this.tail=ln,this.length=0}function Ht(rn,ln,sn){var mn=ln.next,wn={value:sn,prev:ln,next:mn};return ln.next=wn,mn.prev=wn,rn.length++,wn}function Wt(rn,ln,sn){for(var mn=ln.next,wn=0;wn<sn&&mn!==rn.tail;wn++)mn=mn.next;ln.next=mn,mn.prev=ln,rn.length-=wn}function Zt(rn){for(var ln=[],sn=rn.head.next;sn!==rn.tail;)ln.push(sn.value),sn=sn.next;return ln}if(!vt.document)return vt.addEventListener&&(kt.disableWorkerMessageHandler||vt.addEventListener("message",function(rn){var ln=JSON.parse(rn.data),sn=ln.language,mn=ln.code,wn=ln.immediateClose;vt.postMessage(kt.highlight(mn,kt.languages[sn],sn)),wn&&vt.close()},!1)),kt;var tn=kt.util.currentScript();tn&&(kt.filename=tn.src,tn.hasAttribute("data-manual")&&(kt.manual=!0));function Yt(){kt.manual||kt.highlightAll()}if(!kt.manual){var nn=document.readyState;nn==="loading"||nn==="interactive"&&tn&&tn.defer?document.addEventListener("DOMContentLoaded",Yt):window.requestAnimationFrame?window.requestAnimationFrame(Yt):window.setTimeout(Yt,16)}return kt}(rt);nt.exports&&(nt.exports=it),typeof commonjsGlobal$1<"u"&&(commonjsGlobal$1.Prism=it),it.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},it.languages.markup.tag.inside["attr-value"].inside.entity=it.languages.markup.entity,it.languages.markup.doctype.inside["internal-subset"].inside=it.languages.markup,it.hooks.add("wrap",function(vt){vt.type==="entity"&&(vt.attributes.title=vt.content.replace(/&amp;/,"&"))}),Object.defineProperty(it.languages.markup.tag,"addInlined",{value:function(bt,wt){var Tt={};Tt["language-"+wt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:it.languages[wt]},Tt.cdata=/^<!\[CDATA\[|\]\]>$/i;var kt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Tt}};kt["language-"+wt]={pattern:/[\s\S]+/,inside:it.languages[wt]};var Lt={};Lt[bt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return bt}),"i"),lookbehind:!0,greedy:!0,inside:kt},it.languages.insertBefore("markup","cdata",Lt)}}),Object.defineProperty(it.languages.markup.tag,"addAttribute",{value:function(vt,bt){it.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+vt+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[bt,"language-"+bt],inside:it.languages[bt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),it.languages.html=it.languages.markup,it.languages.mathml=it.languages.markup,it.languages.svg=it.languages.markup,it.languages.xml=it.languages.extend("markup",{}),it.languages.ssml=it.languages.xml,it.languages.atom=it.languages.xml,it.languages.rss=it.languages.xml,function(vt){var bt=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;vt.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+bt.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+bt.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+bt.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+bt.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:bt,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},vt.languages.css.atrule.inside.rest=vt.languages.css;var wt=vt.languages.markup;wt&&(wt.tag.addInlined("style","css"),wt.tag.addAttribute("style","css"))}(it),it.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},it.languages.javascript=it.languages.extend("clike",{"class-name":[it.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),it.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,it.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:it.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:it.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:it.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:it.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:it.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),it.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:it.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),it.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),it.languages.markup&&(it.languages.markup.tag.addInlined("script","javascript"),it.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),it.languages.js=it.languages.javascript,function(){if(typeof it>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var vt="Loading\u2026",bt=function(tn,Yt){return"\u2716 Error "+tn+" while fetching file: "+Yt},wt="\u2716 Error: File does not exist or is empty",Tt={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},kt="data-src-status",Lt="loading",Mt="loaded",Nt="failed",zt="pre[data-src]:not(["+kt+'="'+Mt+'"]):not(['+kt+'="'+Lt+'"])';function Ht(tn,Yt,nn){var rn=new XMLHttpRequest;rn.open("GET",tn,!0),rn.onreadystatechange=function(){rn.readyState==4&&(rn.status<400&&rn.responseText?Yt(rn.responseText):rn.status>=400?nn(bt(rn.status,rn.statusText)):nn(wt))},rn.send(null)}function Wt(tn){var Yt=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(tn||"");if(Yt){var nn=Number(Yt[1]),rn=Yt[2],ln=Yt[3];return rn?ln?[nn,Number(ln)]:[nn,void 0]:[nn,nn]}}it.hooks.add("before-highlightall",function(tn){tn.selector+=", "+zt}),it.hooks.add("before-sanity-check",function(tn){var Yt=tn.element;if(Yt.matches(zt)){tn.code="",Yt.setAttribute(kt,Lt);var nn=Yt.appendChild(document.createElement("CODE"));nn.textContent=vt;var rn=Yt.getAttribute("data-src"),ln=tn.language;if(ln==="none"){var sn=(/\.(\w+)$/.exec(rn)||[,"none"])[1];ln=Tt[sn]||sn}it.util.setLanguage(nn,ln),it.util.setLanguage(Yt,ln);var mn=it.plugins.autoloader;mn&&mn.loadLanguages(ln),Ht(rn,function(wn){Yt.setAttribute(kt,Mt);var Cn=Wt(Yt.getAttribute("data-range"));if(Cn){var An=wn.split(/\r\n?|\n/g),Pn=Cn[0],On=Cn[1]==null?An.length:Cn[1];Pn<0&&(Pn+=An.length),Pn=Math.max(0,Math.min(Pn-1,An.length)),On<0&&(On+=An.length),On=Math.max(0,Math.min(On,An.length)),wn=An.slice(Pn,On).join(`
`),Yt.hasAttribute("data-start")||Yt.setAttribute("data-start",String(Pn+1))}nn.textContent=wn,it.highlightElement(nn)},function(wn){Yt.setAttribute(kt,Nt),nn.textContent=wn})}}),it.plugins.fileHighlight={highlight:function(Yt){for(var nn=(Yt||document).querySelectorAll(zt),rn=0,ln;ln=nn[rn++];)it.highlightElement(ln)}};var Zt=!1;it.fileHighlight=function(){Zt||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),Zt=!0),it.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(prism$1);const Prism$1=prism$1.exports;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(nt){nt.type==="entity"&&(nt.attributes.title=nt.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function nt(rt,it){var vt={};vt["language-"+it]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[it]},vt.cdata=/^<!\[CDATA\[|\]\]>$/i;var bt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:vt}};bt["language-"+it]={pattern:/[\s\S]+/,inside:Prism.languages[it]};var wt={};wt[rt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return rt}),"i"),lookbehind:!0,greedy:!0,inside:bt},Prism.languages.insertBefore("markup","cdata",wt)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(nt,rt){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+nt+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[rt,"language-"+rt],inside:Prism.languages[rt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(nt){var rt=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function it(Nt){return Nt=Nt.replace(/<inner>/g,function(){return rt}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+Nt+")")}var vt=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,bt=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return vt}),wt=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;nt.languages.markdown=nt.languages.extend("markup",{}),nt.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:nt.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+bt+wt+"(?:"+bt+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+bt+wt+")(?:"+bt+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(vt),inside:nt.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+bt+")"+wt+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+bt+"$"),inside:{"table-header":{pattern:RegExp(vt),alias:"important",inside:nt.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:it(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:it(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:it(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:it(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(Nt){["url","bold","italic","strike","code-snippet"].forEach(function(zt){Nt!==zt&&(nt.languages.markdown[Nt].inside.content.inside[zt]=nt.languages.markdown[zt])})}),nt.hooks.add("after-tokenize",function(Nt){if(Nt.language!=="markdown"&&Nt.language!=="md")return;function zt(Ht){if(!(!Ht||typeof Ht=="string"))for(var Wt=0,Zt=Ht.length;Wt<Zt;Wt++){var tn=Ht[Wt];if(tn.type!=="code"){zt(tn.content);continue}var Yt=tn.content[1],nn=tn.content[3];if(Yt&&nn&&Yt.type==="code-language"&&nn.type==="code-block"&&typeof Yt.content=="string"){var rn=Yt.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");rn=(/[a-z][\w-]*/i.exec(rn)||[""])[0].toLowerCase();var ln="language-"+rn;nn.alias?typeof nn.alias=="string"?nn.alias=[nn.alias,ln]:nn.alias.push(ln):nn.alias=[ln]}}}zt(Nt.tokens)}),nt.hooks.add("wrap",function(Nt){if(Nt.type==="code-block"){for(var zt="",Ht=0,Wt=Nt.classes.length;Ht<Wt;Ht++){var Zt=Nt.classes[Ht],tn=/language-(.+)/.exec(Zt);if(tn){zt=tn[1];break}}var Yt=nt.languages[zt];if(Yt)Nt.content=nt.highlight(Mt(Nt.content),Yt,zt);else if(zt&&zt!=="none"&&nt.plugins.autoloader){var nn="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);Nt.attributes.id=nn,nt.plugins.autoloader.loadLanguages(zt,function(){var rn=document.getElementById(nn);rn&&(rn.innerHTML=nt.highlight(rn.textContent,nt.languages[zt],zt))})}}});var Tt=RegExp(nt.languages.markup.tag.pattern.source,"gi"),kt={amp:"&",lt:"<",gt:">",quot:'"'},Lt=String.fromCodePoint||String.fromCharCode;function Mt(Nt){var zt=Nt.replace(Tt,"");return zt=zt.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(Ht,Wt){if(Wt=Wt.toLowerCase(),Wt[0]==="#"){var Zt;return Wt[1]==="x"?Zt=parseInt(Wt.slice(2),16):Zt=Number(Wt.slice(1)),Lt(Zt)}else{var tn=kt[Wt];return tn||Ht}}),zt}nt.languages.md=nt.languages.markdown})(Prism);const prism="",_hoisted_1$3=["draggable"],_hoisted_2$1={key:0,id:"juncture",class:"language-juncture",style:{margin:"0","white-space":"pre-wrap","word-wrap":"break-word"}},_hoisted_3$1=["innerHTML"],_sfc_main$5=defineComponent({__name:"SourceViewer.ce",props:{src:{type:String},language:{type:String,default:"juncture"},draggable:{type:Boolean,default:!0}},setup(nt){const rt=nt,it=ref(null),vt=computed(()=>{var Nt,zt;return(zt=(Nt=it.value)==null?void 0:Nt.getRootNode())==null?void 0:zt.host}),bt=computed(()=>{var Nt;return(Nt=it==null?void 0:it.value)==null?void 0:Nt.parentNode}),wt=ref();watch$1(vt,()=>{var zt;let Nt=(zt=vt.value)==null?void 0:zt.innerHTML.trim();Nt&&(wt.value=rt.language==="html"?kt(Nt):`
${Nt}`)}),watch$1(wt,()=>{var zt;let Nt=(zt=bt.value)==null?void 0:zt.querySelector(`#${rt.language}`);Nt&&wt.value&&nextTick(()=>{Prism$1.highlightElement(Nt)})}),onMounted(()=>{rt.src&&fetch(`https://api.juncture-digital.org/markdown/${rt.src}`).then(Nt=>Nt.text()).then(Nt=>{Nt=Nt.replace(/>/g,"&gt;").replace(/</g,"&lt;"),wt.value=rt.language==="html"?kt(Nt):`
${Nt}`})}),Prism$1.languages.juncture=Prism$1.languages.extend("markdown",{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+.+/,greedy:!0,inside:{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+/},string:[{pattern:/[^=]\"(\\.|[^\"])*\"/,alias:"attr-value"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],"manifest-url":[{pattern:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,inside:{url:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,punctuation:/\s+/}}],position:[{pattern:/\s+(full|left|right|sticky)/,alias:"boolean"}],"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},marked:[{pattern:/==[^=]+=={[^}]+}/,alias:"class-name"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],reference:[{pattern:/\[\^[^\]]+\]:?\s*/,alias:"class-name"}]});function Tt(Nt){for(var zt="",Ht=Nt*2;Ht--;)zt+=" ";return zt}function kt(Nt){Nt=Nt.trim().replace(/&amp;/g,"&");let zt="",Ht=0,Wt=Nt.split(/</);for(var Zt=0,tn=Wt.length;Zt<tn;Zt++){var Yt=Wt[Zt].split(/>/);Yt.length===2?(Wt[Zt][0]==="/"&&Ht--,zt+=Tt(Ht),Wt[Zt][0]!=="/"&&Ht++,Zt>0&&(zt+="<"),zt+=Yt[0].trim()+`>
`,Yt[1].trim()!==""&&(zt+=Tt(Ht)+Yt[1].trim().replace(/\s+/g," ")+`
`),Yt[0].match(/^(img|hr|br)/)&&Ht--):zt+=Tt(Ht)+Yt[0]+`
`}return zt.replace(/\s+<mark([^>]*>)\s+/gm," <mark$1").replace(/\s+<\/mark>\s+/mg,"</mark> ").replace(/<a([^>]*>)\s+/gm," <a$1").replace(/\s+<\/a>/mg,"</a> ").replace(/=""/g,"").replace(/(<ve-[^>]+>)\s(<\/ve-[^>]+>\n)/g,`$1$2
`).replace(/<p>\s+/g,"<p>").replace(/\s+<\/p>\s+/g,`</p>
`).replace(/<ve-/g,`
<ve-`).replace(/ anno-base="undefined\/"/g,"").replace(/^\n\n/g,`
`)}function Lt(){var Nt,zt;if(navigator.clipboard){let Ht=(((Nt=wt.value)==null?void 0:Nt.trim())||"").replace(/&lt;/g,"<").replace(/&gt;/g,">");navigator.clipboard.writeText(Ht);const Wt=(zt=bt.value)==null?void 0:zt.querySelector("sl-tooltip");Wt&&(Wt.open=!0,setTimeout(()=>Wt.open=!1,1e3))}}function Mt(Nt){var Ht;let zt=wt.value;console.log(zt),zt&&((Ht=Nt.dataTransfer)==null||Ht.setData("text/plain",zt))}return(Nt,zt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main",style:{width:"100%",height:"100%"},draggable:rt.draggable,onDragstart:Mt},[nt.language==="juncture"?(openBlock(),createElementBlock("pre",_hoisted_2$1,[createTextVNode("    "),createBaseVNode("code",{innerHTML:wt.value},null,8,_hoisted_3$1),createTextVNode(`
  `)])):createCommentVNode("",!0),nt.language==="html"?(openBlock(),createElementBlock("pre",{key:1,id:"html",class:"language-markup",style:normalizeStyle({margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word"})},[createTextVNode("    "),createBaseVNode("code",null,toDisplayString(wt.value),1)],4)):createCommentVNode("",!0),createBaseVNode("sl-tooltip",{content:"Text copied to clipboard",placement:"top",hoist:"",trigger:"manual",style:{"--sl-tooltip-arrow-size":"0"}},[createBaseVNode("sl-button",{class:"copy-button",onClick:Lt},"Copy Text")])],40,_hoisted_1$3))}}),_style_0$2=`code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function,.token.class-name{color:#dd4a68}.token.regex,.token.important,.token.variable{color:#e90}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
`,_style_1$1=`*{box-sizing:border-box}.main{font-size:.8em;position:relative}.main pre{background-color:#f9f9f9;font-size:1rem}.main:hover .copy-button{opacity:1}.copy-button{position:absolute;top:10px;right:10px;opacity:0;transition:all .3s ease-in}.juncture-tag{color:#905}
`,SourceViewer=_export_sfc(_sfc_main$5,[["styles",[_style_0$2,_style_1$1]]]),_sfc_main$4=defineComponent({__name:"Spacer.ce",props:{height:{type:String,default:"50vh"}},setup(nt){const rt=nt;return(it,vt)=>(openBlock(),createElementBlock("div",{style:normalizeStyle({height:rt.height})},null,4))}}),_sfc_main$3=defineComponent({__name:"Starter.ce",props:{id:{type:String},numProp:{type:Number,default:0},boolProp:{type:Boolean}},emits:["custom-event"],setup(nt,{expose:rt,emit:it}){const vt=nt;rt({increment:Mt});const bt=ref(vt.numProp),wt=ref(null),Tt=computed(()=>{var Nt;return(Nt=wt==null?void 0:wt.value)==null?void 0:Nt.parentNode}),kt=computed(()=>{var Nt,zt;return(zt=(Nt=wt.value)==null?void 0:Nt.getRootNode())==null?void 0:zt.host});watch$1(kt,()=>Lt()),watch$1(bt,()=>it("custom-event",bt.value));function Lt(){var Nt;console.log(kt.value),console.log((Nt=Tt.value)==null?void 0:Nt.querySelector("h1")),setTimeout(()=>Mt(),2e3)}function Mt(){++bt.value}return(Nt,zt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:wt,class:"main"}," <ve-starter></ve-starter> ",512))}}),_style_0$1=`.main{color:red}
`,Starter=_export_sfc(_sfc_main$3,[["styles",[_style_0$1]]]),_hoisted_1$2=["innerHTML"],_sfc_main$2=defineComponent({__name:"Version.ce",setup(nt){const rt=ref("2.0.0-beta.25");return(it,vt)=>(openBlock(),createElementBlock("span",{innerHTML:rt.value},null,8,_hoisted_1$2))}}),_hoisted_1$1={id:"autocompleteContainer",class:"autocomplete__container",role:"combobox"},_hoisted_2=createBaseVNode("svg",{"fill-rule":"evenodd",height:"5",viewBox:"0 0 10 5",width:"10"},[createBaseVNode("title",null,"Open drop down"),createBaseVNode("path",{d:"M10 0L5 5 0 0z"})],-1),_hoisted_3=[_hoisted_2],_hoisted_4={id:"autocompleteResults",class:"autocomplete__results",role:"listbox"},_hoisted_5=["onClick"],_hoisted_6=["innerHTML"],_hoisted_7={key:0,class:"aliases"},_hoisted_8=["innerHTML"],_sfc_main$1=defineComponent({__name:"WikidataSearch.ce",props:{language:{type:String,default:"en"}},emits:["entity-selected"],setup(nt,{emit:rt}){const it=nt,vt=ref([]),bt=ref(),wt=ref(),Tt=ref(),kt=ref(),Lt=ref(0),Mt=ref(!1),Nt=ref(""),zt=ref(!1),Ht=ref(null),Wt=computed(()=>{var wn;return(wn=Ht==null?void 0:Ht.value)==null?void 0:wn.parentNode}),Zt=computed(()=>{var wn,Cn;return(Cn=(wn=Ht.value)==null?void 0:wn.getRootNode())==null?void 0:Cn.host});watch$1(Zt,()=>tn()),watch$1(Mt,wn=>{var Cn,An,Pn,On,kn,gn,Vn;wn?((Cn=bt.value)==null||Cn.classList.add("visible"),(An=wt.value)==null||An.classList.add("expanded"),(Pn=Tt.value)==null||Pn.setAttribute("aria-expanded","true")):((On=bt.value)==null||On.classList.remove("visible"),(kn=wt.value)==null||kn.classList.remove("expanded"),(gn=Tt.value)==null||gn.setAttribute("aria-expanded","false"),(Vn=kt.value)==null||Vn.setAttribute("aria-activedescendant",""))}),watch$1(Nt,()=>{vt.value=[],Lt.value=0,sn()});function tn(){var wn,Cn,An,Pn;bt.value=(wn=Wt.value)==null?void 0:wn.querySelector("#autocompleteResults"),kt.value=(Cn=Wt.value)==null?void 0:Cn.querySelector("#autocompleteInput"),wt.value=(An=Wt.value)==null?void 0:An.querySelector("#autocompleteDropdownArrow"),Tt.value=(Pn=Wt.value)==null?void 0:Pn.querySelector("#autocompleteContainer")}function Yt(){kt.value&&(kt.value.value=""),vt.value=[],Lt.value=0,Mt.value=!1}let nn=null;function rn(){nn!==null&&(clearTimeout(nn),nn=null),nn=window.setTimeout(()=>{kt.value&&(Nt.value=kt.value.value.trim()),nn=null},500)}function ln(){Mt.value=!Mt.value}function sn(){if(!Nt.value||zt.value)return;zt.value=!0;let wn=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${Nt.value}&uselang=${it.language}&language=${it.language}&format=json&origin=*&continue=${Lt.value}`;fetch(wn).then(Cn=>Cn.json()).then(Cn=>{Lt.value=Cn["search-continue"],vt.value=[...vt.value,...Cn.search],Mt.value=!0}).catch(Cn=>{console.log(Cn)}).finally(()=>zt.value=!1)}function mn(wn){rt("entity-selected",wn),Yt()}return(wn,Cn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Ht,class:"wikidata-search"},[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("input",{id:"autocompleteInput",class:"autocomplete__input",onKeyup:rn,autocomplete:"off",role:"textbox",placeholder:"Search for entity"},null,32),createBaseVNode("button",{id:"autocompleteDropdownArrow",class:"autocomplete__dropdown-arrow",style:normalizeStyle({visibility:vt.value.length>0?"visible":"hidden"}),onClick:ln,"aria-label":"toggle dropdown"},_hoisted_3,4),createBaseVNode("ul",_hoisted_4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(vt.value,(An,Pn)=>(openBlock(),createElementBlock("li",{key:`result-${Pn}`,onClick:On=>mn(An)},[createBaseVNode("ul",null,[createBaseVNode("li",null,[createBaseVNode("span",{class:"label",innerHTML:An.label},null,8,_hoisted_6),An.aliases?(openBlock(),createElementBlock("span",_hoisted_7,"({item.aliases.join(', ')})")):createCommentVNode("",!0)]),createBaseVNode("li",{class:"description",innerHTML:An.description},null,8,_hoisted_8)])],8,_hoisted_5))),128)),Lt.value?(openBlock(),createElementBlock("li",{key:0,onClick:sn,class:"continue"},"More...")):createCommentVNode("",!0)])])],512))}}),_style_0=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}.autocomplete__container{display:flex;position:relative;align-items:center;justify-content:flex-end;float:left;width:100%;max-width:500px;height:100%}textarea:focus,input:focus{outline:none}.wikidata-search{display:inline-block;height:calc(1.5em + .75rem + 2px);margin-right:3px;border:1px solid #ccc;border-radius:3px;width:100%;background-color:#fff}.wikidata-search i{padding-left:6px;font-size:1.2rem;color:#333}.autocomplete__results.visible{visibility:visible;min-width:320px}.autocomplete__input{display:block;width:100%;min-width:220px;height:100%;border:none;padding-left:.5rem;border-radius:3px;font-size:1.1rem}.autocomplete__input:focus{border-color:#284fa4}.autocomplete__dropdown-arrow{position:absolute;right:0;top:0;background:transparent;border:none;cursor:pointer;height:100%;transition:transform .2s linear}.autocomplete__dropdown-arrow.expanded{transform:rotate(-180deg)}.autocomplete__results{visibility:hidden;position:absolute;top:100%;margin-top:0;width:100%;overflow-y:auto;border:1px solid #999;padding:0;max-height:400px;background:white;z-index:500}.autocomplete__results>li{list-style:none;padding:.3rem .5rem;cursor:pointer;color:#000}.autocomplete__results ul{list-style-type:none;padding-left:0}.autocomplete__results>li:hover{background:hsl(212,10%,60%)}.autocomplete__results>li:focus{background:hsl(212,10%,70%)}.label{font-weight:700}.aliases{font-style:italic}.description{font-size:.9rem;padding:2px 0}.continue{font-weight:700;background-color:#ddd}.search{display:grid;border-radius:0;background-color:#555;color:#fff;width:100%;align-items:center}
`,WikidataSearch=_export_sfc(_sfc_main$1,[["styles",[_style_0]]]),_hoisted_1=["name"],_sfc_main=defineComponent({__name:"Window.ce",props:{href:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},buttonLabel:{type:String,default:"Open"},buttonIcon:{type:String}},setup(nt){const rt=nt,it=window,vt=ref(null);function bt(){rt.width;let wt=rt.height||Math.min(window.innerHeight,1600);it.junctureWindow&&it.junctureWindow.close();let Tt=`toolbar=yes,location=yes,left=${rt.left},top=${rt.top},width=${rt.width},height=${wt},scrollbars=yes,status=yes`;it.junctureWindow=window.open(rt.href,"_blank",Tt)}return(wt,Tt)=>(openBlock(),createElementBlock("sl-button",{ref_key:"root",ref:vt,onClick:bt},[rt.buttonIcon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.buttonIcon},null,8,_hoisted_1)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)],512))}}),_style_1=`:host{display:inline-block}
`,Window=_export_sfc(_sfc_main,[["styles",[_style_0$o,_style_1]]]);setBasePath("https://raw.githubusercontent.com//juncture-digital/web-components/main/src");console.log("juncture.web-components: version=2.0.0-beta.25");function init(){customElements.define("ve-add-media-resource-dialog",defineCustomElement(AddMediaResourceDialog)),customElements.define("ve-auth",defineCustomElement(Auth)),customElements.define("ve-button",defineCustomElement(Button)),customElements.define("ve-contact",defineCustomElement(Contact)),customElements.define("ve-content-selector",defineCustomElement(ContentSelector)),customElements.define("ve-entities",defineCustomElement(Entities)),customElements.define("ve-entity-card",defineCustomElement(EntityCard)),customElements.define("ve-essay",defineCustomElement(Essay)),customElements.define("ve-fab",defineCustomElement(FAB)),customElements.define("ve-footer",defineCustomElement(Footer)),customElements.define("ve-header",defineCustomElement(Header)),customElements.define("ve-gif",defineCustomElement(GIF)),customElements.define("ve-hero",defineCustomElement(Hero)),customElements.define("ve-iframe",defineCustomElement(IFrame)),customElements.define("ve-info-card",defineCustomElement(InfoCard)),customElements.define("ve-manifest",defineCustomElement(Manifest)),customElements.define("ve-manifest-popup",defineCustomElement(ManifestPopup)),customElements.define("ve-map",defineCustomElement(Map$3)),customElements.define("ve-media",defineCustomElement(MediaViewer)),customElements.define("ve-media-card",defineCustomElement(MediaCard)),customElements.define("ve-media-selector",defineCustomElement(MediaSelector)),customElements.define("ve-menu",defineCustomElement(Menu)),customElements.define("ve-mermaid",defineCustomElement(Mermaid)),customElements.define("ve-modal",defineCustomElement(Modal)),customElements.define("ve-navbar",defineCustomElement(Navbar)),customElements.define("ve-pager",defineCustomElement(Pager)),customElements.define("ve-snippet",defineCustomElement(Snippet)),customElements.define("ve-source-viewer",defineCustomElement(SourceViewer)),customElements.define("ve-site-search",defineCustomElement(SiteSearch)),customElements.define("ve-spacer",defineCustomElement(_sfc_main$4)),customElements.define("ve-starter",defineCustomElement(Starter)),customElements.define("ve-version",defineCustomElement(_sfc_main$2)),customElements.define("ve-wikidata-search",defineCustomElement(WikidataSearch)),customElements.define("ve-window",defineCustomElement(Window)),document.body.style.transition="opacity 0.3s linear",document.body.style.visibility="visible",document.body.style.opacity="1"}init()});export default Ww();
